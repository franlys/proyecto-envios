var N0e=Object.defineProperty;var E0e=(t,e,r)=>e in t?N0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var oa=(t,e,r)=>E0e(t,typeof e!="symbol"?e+"":e,r);function iX(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oX={exports:{}},H4={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0e=Symbol.for("react.transitional.element"),S0e=Symbol.for("react.fragment");function lX(t,e,r){var n=null;if(r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),"key"in e){r={};for(var a in e)a!=="key"&&(r[a]=e[a])}else r=e;return e=r.ref,{$$typeof:A0e,type:t,key:n,ref:e!==void 0?e:null,props:r}}H4.Fragment=S0e;H4.jsx=lX;H4.jsxs=lX;oX.exports=H4;var i=oX.exports,cX={exports:{}},wn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO=Symbol.for("react.transitional.element"),j0e=Symbol.for("react.portal"),T0e=Symbol.for("react.fragment"),C0e=Symbol.for("react.strict_mode"),k0e=Symbol.for("react.profiler"),I0e=Symbol.for("react.consumer"),O0e=Symbol.for("react.context"),P0e=Symbol.for("react.forward_ref"),R0e=Symbol.for("react.suspense"),D0e=Symbol.for("react.memo"),uX=Symbol.for("react.lazy"),M0e=Symbol.for("react.activity"),v9=Symbol.iterator;function L0e(t){return t===null||typeof t!="object"?null:(t=v9&&t[v9]||t["@@iterator"],typeof t=="function"?t:null)}var dX={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fX=Object.assign,hX={};function Kx(t,e,r){this.props=t,this.context=e,this.refs=hX,this.updater=r||dX}Kx.prototype.isReactComponent={};Kx.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kx.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mX(){}mX.prototype=Kx.prototype;function bO(t,e,r){this.props=t,this.context=e,this.refs=hX,this.updater=r||dX}var yO=bO.prototype=new mX;yO.constructor=bO;fX(yO,Kx.prototype);yO.isPureReactComponent=!0;var b9=Array.isArray;function IC(){}var ns={H:null,A:null,T:null,S:null},pX=Object.prototype.hasOwnProperty;function wO(t,e,r){var n=r.ref;return{$$typeof:vO,type:t,key:e,ref:n!==void 0?n:null,props:r}}function F0e(t,e){return wO(t.type,e,t.props)}function _O(t){return typeof t=="object"&&t!==null&&t.$$typeof===vO}function B0e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var y9=/\/+/g;function $6(t,e){return typeof t=="object"&&t!==null&&t.key!=null?B0e(""+t.key):e.toString(36)}function U0e(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(IC,IC):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Gg(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vO:case j0e:o=!0;break;case uX:return o=t._init,Gg(o(t._payload),e,r,n,a)}}if(o)return a=a(t),o=n===""?"."+$6(t,0):n,b9(a)?(r="",o!=null&&(r=o.replace(y9,"$&/")+"/"),Gg(a,e,r,"",function(u){return u})):a!=null&&(_O(a)&&(a=F0e(a,r+(a.key==null||t&&t.key===a.key?"":(""+a.key).replace(y9,"$&/")+"/")+o)),e.push(a)),1;o=0;var l=n===""?".":n+":";if(b9(t))for(var c=0;c<t.length;c++)n=t[c],s=l+$6(n,c),o+=Gg(n,e,r,s,a);else if(c=L0e(t),typeof c=="function")for(t=c.call(t),c=0;!(n=t.next()).done;)n=n.value,s=l+$6(n,c++),o+=Gg(n,e,r,s,a);else if(s==="object"){if(typeof t.then=="function")return Gg(U0e(t),e,r,n,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function k_(t,e,r){if(t==null)return t;var n=[],a=0;return Gg(t,n,"","",function(s){return e.call(r,s,a++)}),n}function z0e(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var w9=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},V0e={map:k_,forEach:function(t,e,r){k_(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return k_(t,function(){e++}),e},toArray:function(t){return k_(t,function(e){return e})||[]},only:function(t){if(!_O(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};wn.Activity=M0e;wn.Children=V0e;wn.Component=Kx;wn.Fragment=T0e;wn.Profiler=k0e;wn.PureComponent=bO;wn.StrictMode=C0e;wn.Suspense=R0e;wn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ns;wn.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ns.H.useMemoCache(t)}};wn.cache=function(t){return function(){return t.apply(null,arguments)}};wn.cacheSignal=function(){return null};wn.cloneElement=function(t,e,r){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=fX({},t.props),a=t.key;if(e!=null)for(s in e.key!==void 0&&(a=""+e.key),e)!pX.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(n[s]=e[s]);var s=arguments.length-2;if(s===1)n.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];n.children=o}return wO(t.type,a,n)};wn.createContext=function(t){return t={$$typeof:O0e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:I0e,_context:t},t};wn.createElement=function(t,e,r){var n,a={},s=null;if(e!=null)for(n in e.key!==void 0&&(s=""+e.key),e)pX.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(a[n]=e[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return wO(t,s,a)};wn.createRef=function(){return{current:null}};wn.forwardRef=function(t){return{$$typeof:P0e,render:t}};wn.isValidElement=_O;wn.lazy=function(t){return{$$typeof:uX,_payload:{_status:-1,_result:t},_init:z0e}};wn.memo=function(t,e){return{$$typeof:D0e,type:t,compare:e===void 0?null:e}};wn.startTransition=function(t){var e=ns.T,r={};ns.T=r;try{var n=t(),a=ns.S;a!==null&&a(r,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(IC,w9)}catch(s){w9(s)}finally{e!==null&&r.types!==null&&(e.types=r.types),ns.T=e}};wn.unstable_useCacheRefresh=function(){return ns.H.useCacheRefresh()};wn.use=function(t){return ns.H.use(t)};wn.useActionState=function(t,e,r){return ns.H.useActionState(t,e,r)};wn.useCallback=function(t,e){return ns.H.useCallback(t,e)};wn.useContext=function(t){return ns.H.useContext(t)};wn.useDebugValue=function(){};wn.useDeferredValue=function(t,e){return ns.H.useDeferredValue(t,e)};wn.useEffect=function(t,e){return ns.H.useEffect(t,e)};wn.useEffectEvent=function(t){return ns.H.useEffectEvent(t)};wn.useId=function(){return ns.H.useId()};wn.useImperativeHandle=function(t,e,r){return ns.H.useImperativeHandle(t,e,r)};wn.useInsertionEffect=function(t,e){return ns.H.useInsertionEffect(t,e)};wn.useLayoutEffect=function(t,e){return ns.H.useLayoutEffect(t,e)};wn.useMemo=function(t,e){return ns.H.useMemo(t,e)};wn.useOptimistic=function(t,e){return ns.H.useOptimistic(t,e)};wn.useReducer=function(t,e,r){return ns.H.useReducer(t,e,r)};wn.useRef=function(t){return ns.H.useRef(t)};wn.useState=function(t){return ns.H.useState(t)};wn.useSyncExternalStore=function(t,e,r){return ns.H.useSyncExternalStore(t,e,r)};wn.useTransition=function(){return ns.H.useTransition()};wn.version="19.2.0";cX.exports=wn;var S=cX.exports;const xr=Hc(S),gX=iX({__proto__:null,default:xr},[S]);var xX={exports:{}},q4={},vX={exports:{}},bX={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ce,ne){var ae=ce.length;ce.push(ne);e:for(;0<ae;){var me=ae-1>>>1,Ee=ce[me];if(0<a(Ee,ne))ce[me]=ne,ce[ae]=Ee,ae=me;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var ne=ce[0],ae=ce.pop();if(ae!==ne){ce[0]=ae;e:for(var me=0,Ee=ce.length,ye=Ee>>>1;me<ye;){var H=2*(me+1)-1,Y=ce[H],X=H+1,re=ce[X];if(0>a(Y,ae))X<Ee&&0>a(re,Y)?(ce[me]=re,ce[X]=ae,me=X):(ce[me]=Y,ce[H]=ae,me=H);else if(X<Ee&&0>a(re,ae))ce[me]=re,ce[X]=ae,me=X;else break e}}return ne}function a(ce,ne){var ae=ce.sortIndex-ne.sortIndex;return ae!==0?ae:ce.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,g=!1,b=!1,w=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function P(ce){for(var ne=r(u);ne!==null;){if(ne.callback===null)n(u);else if(ne.startTime<=ce)n(u),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=r(u)}}function U(ce){if(w=!1,P(ce),!b)if(r(c)!==null)b=!0,G||(G=!0,B());else{var ne=r(u);ne!==null&&Z(U,ne.startTime-ce)}}var G=!1,O=-1,D=5,I=-1;function V(){return _?!0:!(t.unstable_now()-I<D)}function R(){if(_=!1,G){var ce=t.unstable_now();I=ce;var ne=!0;try{e:{b=!1,w&&(w=!1,A(O),O=-1),g=!0;var ae=p;try{t:{for(P(ce),h=r(c);h!==null&&!(h.expirationTime>ce&&V());){var me=h.callback;if(typeof me=="function"){h.callback=null,p=h.priorityLevel;var Ee=me(h.expirationTime<=ce);if(ce=t.unstable_now(),typeof Ee=="function"){h.callback=Ee,P(ce),ne=!0;break t}h===r(c)&&n(c),P(ce)}else n(c);h=r(c)}if(h!==null)ne=!0;else{var ye=r(u);ye!==null&&Z(U,ye.startTime-ce),ne=!1}}break e}finally{h=null,p=ae,g=!1}ne=void 0}}finally{ne?B():G=!1}}}var B;if(typeof j=="function")B=function(){j(R)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ee=F.port2;F.port1.onmessage=R,B=function(){ee.postMessage(null)}}else B=function(){N(R,0)};function Z(ce,ne){O=N(function(){ce(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(ce){switch(p){case 1:case 2:case 3:var ne=3;break;default:ne=p}var ae=p;p=ne;try{return ce()}finally{p=ae}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(ce,ne){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ae=p;p=ce;try{return ne()}finally{p=ae}},t.unstable_scheduleCallback=function(ce,ne,ae){var me=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?me+ae:me):ae=me,ce){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=ae+Ee,ce={id:d++,callback:ne,priorityLevel:ce,startTime:ae,expirationTime:Ee,sortIndex:-1},ae>me?(ce.sortIndex=ae,e(u,ce),r(c)===null&&ce===r(u)&&(w?(A(O),O=-1):w=!0,Z(U,ae-me))):(ce.sortIndex=Ee,e(c,ce),b||g||(b=!0,G||(G=!0,B()))),ce},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ce){var ne=p;return function(){var ae=p;p=ne;try{return ce.apply(this,arguments)}finally{p=ae}}}})(bX);vX.exports=bX;var $0e=vX.exports,yX={exports:{}},Nl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0e=S;function wX(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Vh(){}var ml={d:{f:Vh,r:function(){throw Error(wX(522))},D:Vh,C:Vh,L:Vh,m:Vh,X:Vh,S:Vh,M:Vh},p:0,findDOMNode:null},q0e=Symbol.for("react.portal");function G0e(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q0e,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}var Rb=H0e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function G4(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Nl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ml;Nl.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(wX(299));return G0e(t,e,null,r)};Nl.flushSync=function(t){var e=Rb.T,r=ml.p;try{if(Rb.T=null,ml.p=2,t)return t()}finally{Rb.T=e,ml.p=r,ml.d.f()}};Nl.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,ml.d.C(t,e))};Nl.prefetchDNS=function(t){typeof t=="string"&&ml.d.D(t)};Nl.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var r=e.as,n=G4(r,e.crossOrigin),a=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;r==="style"?ml.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:s}):r==="script"&&ml.d.X(t,{crossOrigin:n,integrity:a,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Nl.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var r=G4(e.as,e.crossOrigin);ml.d.M(t,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&ml.d.M(t)};Nl.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var r=e.as,n=G4(r,e.crossOrigin);ml.d.L(t,r,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Nl.preloadModule=function(t,e){if(typeof t=="string")if(e){var r=G4(e.as,e.crossOrigin);ml.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else ml.d.m(t)};Nl.requestFormReset=function(t){ml.d.r(t)};Nl.unstable_batchedUpdates=function(t,e){return t(e)};Nl.useFormState=function(t,e,r){return Rb.H.useFormState(t,e,r)};Nl.useFormStatus=function(){return Rb.H.useHostTransitionStatus()};Nl.version="19.2.0";function _X(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_X)}catch(t){console.error(t)}}_X(),yX.exports=Nl;var Ly=yX.exports;const W0e=Hc(Ly);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Di=$0e,NX=S,K0e=Ly;function Yt(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function EX(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fy(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function AX(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SX(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _9(t){if(Fy(t)!==t)throw Error(Yt(188))}function X0e(t){var e=t.alternate;if(!e){if(e=Fy(t),e===null)throw Error(Yt(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return _9(a),t;if(s===n)return _9(a),e;s=s.sibling}throw Error(Yt(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(Yt(189))}}if(r.alternate!==n)throw Error(Yt(190))}if(r.tag!==3)throw Error(Yt(188));return r.stateNode.current===r?t:e}function jX(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=jX(t),e!==null)return e;t=t.sibling}return null}var ss=Object.assign,Y0e=Symbol.for("react.element"),I_=Symbol.for("react.transitional.element"),xb=Symbol.for("react.portal"),i1=Symbol.for("react.fragment"),TX=Symbol.for("react.strict_mode"),OC=Symbol.for("react.profiler"),CX=Symbol.for("react.consumer"),Pf=Symbol.for("react.context"),NO=Symbol.for("react.forward_ref"),PC=Symbol.for("react.suspense"),RC=Symbol.for("react.suspense_list"),EO=Symbol.for("react.memo"),Jh=Symbol.for("react.lazy"),DC=Symbol.for("react.activity"),Z0e=Symbol.for("react.memo_cache_sentinel"),N9=Symbol.iterator;function Fv(t){return t===null||typeof t!="object"?null:(t=N9&&t[N9]||t["@@iterator"],typeof t=="function"?t:null)}var Q0e=Symbol.for("react.client.reference");function MC(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Q0e?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case i1:return"Fragment";case OC:return"Profiler";case TX:return"StrictMode";case PC:return"Suspense";case RC:return"SuspenseList";case DC:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case xb:return"Portal";case Pf:return t.displayName||"Context";case CX:return(t._context.displayName||"Context")+".Consumer";case NO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case EO:return e=t.displayName||null,e!==null?e:MC(t.type)||"Memo";case Jh:e=t._payload,t=t._init;try{return MC(t(e))}catch{}}return null}var vb=Array.isArray,fn=NX.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,da=K0e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,op={pending:!1,data:null,method:null,action:null},LC=[],o1=-1;function ef(t){return{current:t}}function ao(t){0>o1||(t.current=LC[o1],LC[o1]=null,o1--)}function Ka(t,e){o1++,LC[o1]=t.current,t.current=e}var Ld=ef(null),w2=ef(null),y0=ef(null),gE=ef(null);function xE(t,e){switch(Ka(y0,e),Ka(w2,t),Ka(Ld,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?CF(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=CF(e),t=XZ(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ao(Ld),Ka(Ld,t)}function tx(){ao(Ld),ao(w2),ao(y0)}function FC(t){t.memoizedState!==null&&Ka(gE,t);var e=Ld.current,r=XZ(e,t.type);e!==r&&(Ka(w2,t),Ka(Ld,r))}function vE(t){w2.current===t&&(ao(Ld),ao(w2)),gE.current===t&&(ao(gE),O2._currentValue=op)}var H6,E9;function Rm(t){if(H6===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);H6=e&&e[1]||"",E9=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+H6+t+E9}var q6=!1;function G6(t,e){if(!t||q6)return"";q6=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(g){var p=g}Reflect.construct(t,[],h)}else{try{h.call()}catch(g){p=g}t.call(h.prototype)}}else{try{throw Error()}catch(g){p=g}(h=t())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(g){if(g&&p&&typeof g.stack=="string")return[g.stack,p.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),o=s[0],l=s[1];if(o&&l){var c=o.split(`
`),u=l.split(`
`);for(a=n=0;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(n===c.length||a===u.length)for(n=c.length-1,a=u.length-1;1<=n&&0<=a&&c[n]!==u[a];)a--;for(;1<=n&&0<=a;n--,a--)if(c[n]!==u[a]){if(n!==1||a!==1)do if(n--,a--,0>a||c[n]!==u[a]){var d=`
`+c[n].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=n&&0<=a);break}}}finally{q6=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Rm(r):""}function J0e(t,e){switch(t.tag){case 26:case 27:case 5:return Rm(t.type);case 16:return Rm("Lazy");case 13:return t.child!==e&&e!==null?Rm("Suspense Fallback"):Rm("Suspense");case 19:return Rm("SuspenseList");case 0:case 15:return G6(t.type,!1);case 11:return G6(t.type.render,!1);case 1:return G6(t.type,!0);case 31:return Rm("Activity");default:return""}}function A9(t){try{var e="",r=null;do e+=J0e(t,r),r=t,t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var BC=Object.prototype.hasOwnProperty,AO=Di.unstable_scheduleCallback,W6=Di.unstable_cancelCallback,eme=Di.unstable_shouldYield,tme=Di.unstable_requestPaint,Pc=Di.unstable_now,rme=Di.unstable_getCurrentPriorityLevel,kX=Di.unstable_ImmediatePriority,IX=Di.unstable_UserBlockingPriority,bE=Di.unstable_NormalPriority,nme=Di.unstable_LowPriority,OX=Di.unstable_IdlePriority,ame=Di.log,sme=Di.unstable_setDisableYieldValue,By=null,Rc=null;function u0(t){if(typeof ame=="function"&&sme(t),Rc&&typeof Rc.setStrictMode=="function")try{Rc.setStrictMode(By,t)}catch{}}var Dc=Math.clz32?Math.clz32:lme,ime=Math.log,ome=Math.LN2;function lme(t){return t>>>=0,t===0?32:31-(ime(t)/ome|0)|0}var O_=256,P_=262144,R_=4194304;function Dm(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function W4(t,e,r){var n=t.pendingLanes;if(n===0)return 0;var a=0,s=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=n&134217727;return l!==0?(n=l&~s,n!==0?a=Dm(n):(o&=l,o!==0?a=Dm(o):r||(r=l&~t,r!==0&&(a=Dm(r))))):(l=n&~s,l!==0?a=Dm(l):o!==0?a=Dm(o):r||(r=n&~t,r!==0&&(a=Dm(r)))),a===0?0:e!==0&&e!==a&&!(e&s)&&(s=a&-a,r=e&-e,s>=r||s===32&&(r&4194048)!==0)?e:a}function Uy(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function cme(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PX(){var t=R_;return R_<<=1,!(R_&62914560)&&(R_=4194304),t}function K6(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function zy(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ume(t,e,r,n,a,s){var o=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(r=o&~r;0<r;){var d=31-Dc(r),h=1<<d;l[d]=0,c[d]=-1;var p=u[d];if(p!==null)for(u[d]=null,d=0;d<p.length;d++){var g=p[d];g!==null&&(g.lane&=-536870913)}r&=~h}n!==0&&RX(t,n,0),s!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=s&~(o&~e))}function RX(t,e,r){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Dc(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|r&261930}function DX(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Dc(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}function MX(t,e){var r=e&-e;return r=r&42?1:SO(r),r&(t.suspendedLanes|e)?0:r}function SO(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function jO(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function LX(){var t=da.p;return t!==0?t:(t=window.event,t===void 0?32:iQ(t.type))}function S9(t,e){var r=da.p;try{return da.p=t,e()}finally{da.p=r}}var lm=Math.random().toString(36).slice(2),Eo="__reactFiber$"+lm,Xl="__reactProps$"+lm,Xx="__reactContainer$"+lm,UC="__reactEvents$"+lm,dme="__reactListeners$"+lm,fme="__reactHandles$"+lm,j9="__reactResources$"+lm,Vy="__reactMarker$"+lm;function TO(t){delete t[Eo],delete t[Xl],delete t[UC],delete t[dme],delete t[fme]}function l1(t){var e=t[Eo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Xx]||r[Eo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=RF(t);t!==null;){if(r=t[Eo])return r;t=RF(t)}return e}t=r,r=t.parentNode}return null}function Yx(t){if(t=t[Eo]||t[Xx]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function bb(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(Yt(33))}function C1(t){var e=t[j9];return e||(e=t[j9]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ji(t){t[Vy]=!0}var FX=new Set,BX={};function rg(t,e){rx(t,e),rx(t+"Capture",e)}function rx(t,e){for(BX[t]=e,t=0;t<e.length;t++)FX.add(e[t])}var hme=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),T9={},C9={};function mme(t){return BC.call(C9,t)?!0:BC.call(T9,t)?!1:hme.test(t)?C9[t]=!0:(T9[t]=!0,!1)}function cN(t,e,r){if(mme(e))if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+r)}}function D_(t,e,r){if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+r)}}function hf(t,e,r,n){if(n===null)t.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(e,r,""+n)}}function lu(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function UX(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pme(t,e,r){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zC(t){if(!t._valueTracker){var e=UX(t)?"checked":"value";t._valueTracker=pme(t,e,""+t[e])}}function zX(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=UX(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function yE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gme=/[\n"\\]/g;function du(t){return t.replace(gme,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function VC(t,e,r,n,a,s,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+lu(e)):t.value!==""+lu(e)&&(t.value=""+lu(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?$C(t,o,lu(e)):r!=null?$C(t,o,lu(r)):n!=null&&t.removeAttribute("value"),a==null&&s!=null&&(t.defaultChecked=!!s),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+lu(l):t.removeAttribute("name")}function VX(t,e,r,n,a,s,o,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||r!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){zC(t);return}r=r!=null?""+lu(r):"",e=e!=null?""+lu(e):r,l||e===t.value||(t.value=e),t.defaultValue=e}n=n??a,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=l?t.checked:!!n,t.defaultChecked=!!n,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),zC(t)}function $C(t,e,r){e==="number"&&yE(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function k1(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+lu(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function $X(t,e,r){if(e!=null&&(e=""+lu(e),e!==t.value&&(t.value=e),r==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=r!=null?""+lu(r):""}function HX(t,e,r,n){if(e==null){if(n!=null){if(r!=null)throw Error(Yt(92));if(vb(n)){if(1<n.length)throw Error(Yt(93));n=n[0]}r=n}r==null&&(r=""),e=r}r=lu(e),t.defaultValue=r,n=t.textContent,n===r&&n!==""&&n!==null&&(t.value=n),zC(t)}function nx(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xme=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function k9(t,e,r){var n=e.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?n?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":n?t.setProperty(e,r):typeof r!="number"||r===0||xme.has(e)?e==="float"?t.cssFloat=r:t[e]=(""+r).trim():t[e]=r+"px"}function qX(t,e,r){if(e!=null&&typeof e!="object")throw Error(Yt(62));if(t=t.style,r!=null){for(var n in r)!r.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var a in e)n=e[a],e.hasOwnProperty(a)&&r[a]!==n&&k9(t,a,n)}else for(var s in e)e.hasOwnProperty(s)&&k9(t,s,e[s])}function CO(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vme=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bme=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function uN(t){return bme.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Rf(){}var HC=null;function kO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var c1=null,I1=null;function I9(t){var e=Yx(t);if(e&&(t=e.stateNode)){var r=t[Xl]||null;e:switch(t=e.stateNode,e.type){case"input":if(VC(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+du(""+e)+'"][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=n[Xl]||null;if(!a)throw Error(Yt(90));VC(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<r.length;e++)n=r[e],n.form===t.form&&zX(n)}break e;case"textarea":$X(t,r.value,r.defaultValue);break e;case"select":e=r.value,e!=null&&k1(t,!!r.multiple,e,!1)}}}var X6=!1;function GX(t,e,r){if(X6)return t(e,r);X6=!0;try{var n=t(e);return n}finally{if(X6=!1,(c1!==null||I1!==null)&&(sA(),c1&&(e=c1,t=I1,I1=c1=null,I9(e),t)))for(e=0;e<t.length;e++)I9(t[e])}}function _2(t,e){var r=t.stateNode;if(r===null)return null;var n=r[Xl]||null;if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Yt(231,e,typeof r));return r}var th=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qC=!1;if(th)try{var Bv={};Object.defineProperty(Bv,"passive",{get:function(){qC=!0}}),window.addEventListener("test",Bv,Bv),window.removeEventListener("test",Bv,Bv)}catch{qC=!1}var d0=null,IO=null,dN=null;function WX(){if(dN)return dN;var t,e=IO,r=e.length,n,a="value"in d0?d0.value:d0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return dN=a.slice(t,1<n?1-n:void 0)}function fN(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function M_(){return!0}function O9(){return!1}function Jl(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?M_:O9,this.isPropagationStopped=O9,this}return ss(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=M_)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=M_)},persist:function(){},isPersistent:M_}),e}var ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K4=Jl(ng),$y=ss({},ng,{view:0,detail:0}),yme=Jl($y),Y6,Z6,Uv,X4=ss({},$y,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uv&&(Uv&&t.type==="mousemove"?(Y6=t.screenX-Uv.screenX,Z6=t.screenY-Uv.screenY):Z6=Y6=0,Uv=t),Y6)},movementY:function(t){return"movementY"in t?t.movementY:Z6}}),P9=Jl(X4),wme=ss({},X4,{dataTransfer:0}),_me=Jl(wme),Nme=ss({},$y,{relatedTarget:0}),Q6=Jl(Nme),Eme=ss({},ng,{animationName:0,elapsedTime:0,pseudoElement:0}),Ame=Jl(Eme),Sme=ss({},ng,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jme=Jl(Sme),Tme=ss({},ng,{data:0}),R9=Jl(Tme),Cme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ime={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ome(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ime[t])?!!e[t]:!1}function OO(){return Ome}var Pme=ss({},$y,{key:function(t){if(t.key){var e=Cme[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fN(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kme[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OO,charCode:function(t){return t.type==="keypress"?fN(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fN(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rme=Jl(Pme),Dme=ss({},X4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D9=Jl(Dme),Mme=ss({},$y,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OO}),Lme=Jl(Mme),Fme=ss({},ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bme=Jl(Fme),Ume=ss({},X4,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zme=Jl(Ume),Vme=ss({},ng,{newState:0,oldState:0}),$me=Jl(Vme),Hme=[9,13,27,32],PO=th&&"CompositionEvent"in window,Db=null;th&&"documentMode"in document&&(Db=document.documentMode);var qme=th&&"TextEvent"in window&&!Db,KX=th&&(!PO||Db&&8<Db&&11>=Db),M9=" ",L9=!1;function XX(t,e){switch(t){case"keyup":return Hme.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YX(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var u1=!1;function Gme(t,e){switch(t){case"compositionend":return YX(e);case"keypress":return e.which!==32?null:(L9=!0,M9);case"textInput":return t=e.data,t===M9&&L9?null:t;default:return null}}function Wme(t,e){if(u1)return t==="compositionend"||!PO&&XX(t,e)?(t=WX(),dN=IO=d0=null,u1=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KX&&e.locale!=="ko"?null:e.data;default:return null}}var Kme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F9(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kme[t.type]:e==="textarea"}function ZX(t,e,r,n){c1?I1?I1.push(n):I1=[n]:c1=n,e=FE(e,"onChange"),0<e.length&&(r=new K4("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Mb=null,N2=null;function Xme(t){GZ(t,0)}function Y4(t){var e=bb(t);if(zX(e))return t}function B9(t,e){if(t==="change")return e}var QX=!1;if(th){var J6;if(th){var ej="oninput"in document;if(!ej){var U9=document.createElement("div");U9.setAttribute("oninput","return;"),ej=typeof U9.oninput=="function"}J6=ej}else J6=!1;QX=J6&&(!document.documentMode||9<document.documentMode)}function z9(){Mb&&(Mb.detachEvent("onpropertychange",JX),N2=Mb=null)}function JX(t){if(t.propertyName==="value"&&Y4(N2)){var e=[];ZX(e,N2,t,kO(t)),GX(Xme,e)}}function Yme(t,e,r){t==="focusin"?(z9(),Mb=e,N2=r,Mb.attachEvent("onpropertychange",JX)):t==="focusout"&&z9()}function Zme(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Y4(N2)}function Qme(t,e){if(t==="click")return Y4(e)}function Jme(t,e){if(t==="input"||t==="change")return Y4(e)}function epe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fc=typeof Object.is=="function"?Object.is:epe;function E2(t,e){if(Fc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!BC.call(e,a)||!Fc(t[a],e[a]))return!1}return!0}function V9(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $9(t,e){var r=V9(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=V9(r)}}function eY(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eY(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tY(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=yE(t.document);e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=yE(t.document)}return e}function RO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var tpe=th&&"documentMode"in document&&11>=document.documentMode,d1=null,GC=null,Lb=null,WC=!1;function H9(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;WC||d1==null||d1!==yE(n)||(n=d1,"selectionStart"in n&&RO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Lb&&E2(Lb,n)||(Lb=n,n=FE(GC,"onSelect"),0<n.length&&(e=new K4("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=d1)))}function km(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var f1={animationend:km("Animation","AnimationEnd"),animationiteration:km("Animation","AnimationIteration"),animationstart:km("Animation","AnimationStart"),transitionrun:km("Transition","TransitionRun"),transitionstart:km("Transition","TransitionStart"),transitioncancel:km("Transition","TransitionCancel"),transitionend:km("Transition","TransitionEnd")},tj={},rY={};th&&(rY=document.createElement("div").style,"AnimationEvent"in window||(delete f1.animationend.animation,delete f1.animationiteration.animation,delete f1.animationstart.animation),"TransitionEvent"in window||delete f1.transitionend.transition);function ag(t){if(tj[t])return tj[t];if(!f1[t])return t;var e=f1[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in rY)return tj[t]=e[r];return t}var nY=ag("animationend"),aY=ag("animationiteration"),sY=ag("animationstart"),rpe=ag("transitionrun"),npe=ag("transitionstart"),ape=ag("transitioncancel"),iY=ag("transitionend"),oY=new Map,KC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");KC.push("scrollEnd");function hd(t,e){oY.set(t,e),rg(e,[t])}var wE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},iu=[],h1=0,DO=0;function Z4(){for(var t=h1,e=DO=h1=0;e<t;){var r=iu[e];iu[e++]=null;var n=iu[e];iu[e++]=null;var a=iu[e];iu[e++]=null;var s=iu[e];if(iu[e++]=null,n!==null&&a!==null){var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}s!==0&&lY(r,a,s)}}function Q4(t,e,r,n){iu[h1++]=t,iu[h1++]=e,iu[h1++]=r,iu[h1++]=n,DO|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function MO(t,e,r,n){return Q4(t,e,r,n),_E(t)}function sg(t,e){return Q4(t,null,null,e),_E(t)}function lY(t,e,r){t.lanes|=r;var n=t.alternate;n!==null&&(n.lanes|=r);for(var a=!1,s=t.return;s!==null;)s.childLanes|=r,n=s.alternate,n!==null&&(n.childLanes|=r),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(a=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,a&&e!==null&&(a=31-Dc(r),t=s.hiddenUpdates,n=t[a],n===null?t[a]=[e]:n.push(e),e.lane=r|536870912),s):null}function _E(t){if(50<Gb)throw Gb=0,pk=null,Error(Yt(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var m1={};function spe(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(t,e,r,n){return new spe(t,e,r,n)}function LO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vf(t,e){var r=t.alternate;return r===null?(r=Ec(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function cY(t,e){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function hN(t,e,r,n,a,s){var o=0;if(n=t,typeof t=="function")LO(t)&&(o=1);else if(typeof t=="string")o=uge(t,r,Ld.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case DC:return t=Ec(31,r,e,a),t.elementType=DC,t.lanes=s,t;case i1:return lp(r.children,a,s,e);case TX:o=8,a|=24;break;case OC:return t=Ec(12,r,e,a|2),t.elementType=OC,t.lanes=s,t;case PC:return t=Ec(13,r,e,a),t.elementType=PC,t.lanes=s,t;case RC:return t=Ec(19,r,e,a),t.elementType=RC,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pf:o=10;break e;case CX:o=9;break e;case NO:o=11;break e;case EO:o=14;break e;case Jh:o=16,n=null;break e}o=29,r=Error(Yt(130,t===null?"null":typeof t,"")),n=null}return e=Ec(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function lp(t,e,r,n){return t=Ec(7,t,n,e),t.lanes=r,t}function rj(t,e,r){return t=Ec(6,t,null,e),t.lanes=r,t}function uY(t){var e=Ec(18,null,null,0);return e.stateNode=t,e}function nj(t,e,r){return e=Ec(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var q9=new WeakMap;function fu(t,e){if(typeof t=="object"&&t!==null){var r=q9.get(t);return r!==void 0?r:(e={value:t,source:e,stack:A9(e)},q9.set(t,e),e)}return{value:t,source:e,stack:A9(e)}}var p1=[],g1=0,NE=null,A2=0,cu=[],uu=0,U0=null,jd=1,Td="";function _f(t,e){p1[g1++]=A2,p1[g1++]=NE,NE=t,A2=e}function dY(t,e,r){cu[uu++]=jd,cu[uu++]=Td,cu[uu++]=U0,U0=t;var n=jd;t=Td;var a=32-Dc(n)-1;n&=~(1<<a),r+=1;var s=32-Dc(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,jd=1<<32-Dc(e)+a|r<<a|n,Td=s+t}else jd=1<<s|r<<a|n,Td=t}function FO(t){t.return!==null&&(_f(t,1),dY(t,1,0))}function BO(t){for(;t===NE;)NE=p1[--g1],p1[g1]=null,A2=p1[--g1],p1[g1]=null;for(;t===U0;)U0=cu[--uu],cu[uu]=null,Td=cu[--uu],cu[uu]=null,jd=cu[--uu],cu[uu]=null}function fY(t,e){cu[uu++]=jd,cu[uu++]=Td,cu[uu++]=U0,jd=e.id,Td=e.overflow,U0=t}var Ao=null,es=null,qn=!1,w0=null,hu=!1,XC=Error(Yt(519));function z0(t){var e=Error(Yt(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw S2(fu(e,t)),XC}function G9(t){var e=t.stateNode,r=t.type,n=t.memoizedProps;switch(e[Eo]=t,e[Xl]=n,r){case"dialog":Fn("cancel",e),Fn("close",e);break;case"iframe":case"object":case"embed":Fn("load",e);break;case"video":case"audio":for(r=0;r<k2.length;r++)Fn(k2[r],e);break;case"source":Fn("error",e);break;case"img":case"image":case"link":Fn("error",e),Fn("load",e);break;case"details":Fn("toggle",e);break;case"input":Fn("invalid",e),VX(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Fn("invalid",e);break;case"textarea":Fn("invalid",e),HX(e,n.value,n.defaultValue,n.children)}r=n.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||e.textContent===""+r||n.suppressHydrationWarning===!0||KZ(e.textContent,r)?(n.popover!=null&&(Fn("beforetoggle",e),Fn("toggle",e)),n.onScroll!=null&&Fn("scroll",e),n.onScrollEnd!=null&&Fn("scrollend",e),n.onClick!=null&&(e.onclick=Rf),e=!0):e=!1,e||z0(t,!0)}function W9(t){for(Ao=t.return;Ao;)switch(Ao.tag){case 5:case 31:case 13:hu=!1;return;case 27:case 3:hu=!0;return;default:Ao=Ao.return}}function Ag(t){if(t!==Ao)return!1;if(!qn)return W9(t),qn=!0,!1;var e=t.tag,r;if((r=e!==3&&e!==27)&&((r=e===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||yk(t.type,t.memoizedProps)),r=!r),r&&es&&z0(t),W9(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Yt(317));es=PF(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Yt(317));es=PF(t)}else e===27?(e=es,cm(t.type)?(t=Ek,Ek=null,es=t):es=e):es=Ao?Nu(t.stateNode.nextSibling):null;return!0}function Cp(){es=Ao=null,qn=!1}function aj(){var t=w0;return t!==null&&(Dl===null?Dl=t:Dl.push.apply(Dl,t),w0=null),t}function S2(t){w0===null?w0=[t]:w0.push(t)}var YC=ef(null),ig=null,Df=null;function n0(t,e,r){Ka(YC,e._currentValue),e._currentValue=r}function $f(t){t._currentValue=YC.current,ao(YC)}function ZC(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function QC(t,e,r,n){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){var o=a.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=a;for(var c=0;c<e.length;c++)if(l.context===e[c]){s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),ZC(s.return,r,t),n||(o=null);break e}s=l.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error(Yt(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),ZC(o,r,t),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function Zx(t,e,r,n){t=null;for(var a=e,s=!1;a!==null;){if(!s){if(a.flags&524288)s=!0;else if(a.flags&262144)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error(Yt(387));if(o=o.memoizedProps,o!==null){var l=a.type;Fc(a.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(a===gE.current){if(o=a.alternate,o===null)throw Error(Yt(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(O2):t=[O2])}a=a.return}t!==null&&QC(e,t,r,n),e.flags|=262144}function EE(t){for(t=t.firstContext;t!==null;){if(!Fc(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function kp(t){ig=t,Df=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function To(t){return hY(ig,t)}function L_(t,e){return ig===null&&kp(t),hY(t,e)}function hY(t,e){var r=e._currentValue;if(e={context:e,memoizedValue:r,next:null},Df===null){if(t===null)throw Error(Yt(308));Df=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Df=Df.next=e;return r}var ipe=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(r,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(r){return r()})}},ope=Di.unstable_scheduleCallback,lpe=Di.unstable_NormalPriority,gi={$$typeof:Pf,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function UO(){return{controller:new ipe,data:new Map,refCount:0}}function Hy(t){t.refCount--,t.refCount===0&&ope(lpe,function(){t.controller.abort()})}var Fb=null,JC=0,ax=0,O1=null;function cpe(t,e){if(Fb===null){var r=Fb=[];JC=0,ax=dP(),O1={status:"pending",value:void 0,then:function(n){r.push(n)}}}return JC++,e.then(K9,K9),e}function K9(){if(--JC===0&&Fb!==null){O1!==null&&(O1.status="fulfilled");var t=Fb;Fb=null,ax=0,O1=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function upe(t,e){var r=[],n={status:"pending",value:null,reason:null,then:function(a){r.push(a)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var a=0;a<r.length;a++)(0,r[a])(e)},function(a){for(n.status="rejected",n.reason=a,a=0;a<r.length;a++)(0,r[a])(void 0)}),n}var X9=fn.S;fn.S=function(t,e){jZ=Pc(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&cpe(t,e),X9!==null&&X9(t,e)};var cp=ef(null);function zO(){var t=cp.current;return t!==null?t:za.pooledCache}function mN(t,e){e===null?Ka(cp,cp.current):Ka(cp,e.pool)}function mY(){var t=zO();return t===null?null:{parent:gi._currentValue,pool:t}}var Qx=Error(Yt(460)),VO=Error(Yt(474)),J4=Error(Yt(542)),AE={then:function(){}};function Y9(t){return t=t.status,t==="fulfilled"||t==="rejected"}function pY(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(Rf,Rf),e=r),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Q9(t),t;default:if(typeof e.status=="string")e.then(Rf,Rf);else{if(t=za,t!==null&&100<t.shellSuspendCounter)throw Error(Yt(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=n}},function(n){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Q9(t),t}throw up=e,Qx}}function Mm(t){try{var e=t._init;return e(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(up=r,Qx):r}}var up=null;function Z9(){if(up===null)throw Error(Yt(459));var t=up;return up=null,t}function Q9(t){if(t===Qx||t===J4)throw Error(Yt(483))}var P1=null,j2=0;function F_(t){var e=j2;return j2+=1,P1===null&&(P1=[]),pY(P1,t,e)}function zv(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function B_(t,e){throw e.$$typeof===Y0e?Error(Yt(525)):(t=Object.prototype.toString.call(e),Error(Yt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function gY(t){function e(N,A){if(t){var j=N.deletions;j===null?(N.deletions=[A],N.flags|=16):j.push(A)}}function r(N,A){if(!t)return null;for(;A!==null;)e(N,A),A=A.sibling;return null}function n(N){for(var A=new Map;N!==null;)N.key!==null?A.set(N.key,N):A.set(N.index,N),N=N.sibling;return A}function a(N,A){return N=Vf(N,A),N.index=0,N.sibling=null,N}function s(N,A,j){return N.index=j,t?(j=N.alternate,j!==null?(j=j.index,j<A?(N.flags|=67108866,A):j):(N.flags|=67108866,A)):(N.flags|=1048576,A)}function o(N){return t&&N.alternate===null&&(N.flags|=67108866),N}function l(N,A,j,P){return A===null||A.tag!==6?(A=rj(j,N.mode,P),A.return=N,A):(A=a(A,j),A.return=N,A)}function c(N,A,j,P){var U=j.type;return U===i1?d(N,A,j.props.children,P,j.key):A!==null&&(A.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Jh&&Mm(U)===A.type)?(A=a(A,j.props),zv(A,j),A.return=N,A):(A=hN(j.type,j.key,j.props,null,N.mode,P),zv(A,j),A.return=N,A)}function u(N,A,j,P){return A===null||A.tag!==4||A.stateNode.containerInfo!==j.containerInfo||A.stateNode.implementation!==j.implementation?(A=nj(j,N.mode,P),A.return=N,A):(A=a(A,j.children||[]),A.return=N,A)}function d(N,A,j,P,U){return A===null||A.tag!==7?(A=lp(j,N.mode,P,U),A.return=N,A):(A=a(A,j),A.return=N,A)}function h(N,A,j){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=rj(""+A,N.mode,j),A.return=N,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case I_:return j=hN(A.type,A.key,A.props,null,N.mode,j),zv(j,A),j.return=N,j;case xb:return A=nj(A,N.mode,j),A.return=N,A;case Jh:return A=Mm(A),h(N,A,j)}if(vb(A)||Fv(A))return A=lp(A,N.mode,j,null),A.return=N,A;if(typeof A.then=="function")return h(N,F_(A),j);if(A.$$typeof===Pf)return h(N,L_(N,A),j);B_(N,A)}return null}function p(N,A,j,P){var U=A!==null?A.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return U!==null?null:l(N,A,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I_:return j.key===U?c(N,A,j,P):null;case xb:return j.key===U?u(N,A,j,P):null;case Jh:return j=Mm(j),p(N,A,j,P)}if(vb(j)||Fv(j))return U!==null?null:d(N,A,j,P,null);if(typeof j.then=="function")return p(N,A,F_(j),P);if(j.$$typeof===Pf)return p(N,A,L_(N,j),P);B_(N,j)}return null}function g(N,A,j,P,U){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return N=N.get(j)||null,l(A,N,""+P,U);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case I_:return N=N.get(P.key===null?j:P.key)||null,c(A,N,P,U);case xb:return N=N.get(P.key===null?j:P.key)||null,u(A,N,P,U);case Jh:return P=Mm(P),g(N,A,j,P,U)}if(vb(P)||Fv(P))return N=N.get(j)||null,d(A,N,P,U,null);if(typeof P.then=="function")return g(N,A,j,F_(P),U);if(P.$$typeof===Pf)return g(N,A,j,L_(A,P),U);B_(A,P)}return null}function b(N,A,j,P){for(var U=null,G=null,O=A,D=A=0,I=null;O!==null&&D<j.length;D++){O.index>D?(I=O,O=null):I=O.sibling;var V=p(N,O,j[D],P);if(V===null){O===null&&(O=I);break}t&&O&&V.alternate===null&&e(N,O),A=s(V,A,D),G===null?U=V:G.sibling=V,G=V,O=I}if(D===j.length)return r(N,O),qn&&_f(N,D),U;if(O===null){for(;D<j.length;D++)O=h(N,j[D],P),O!==null&&(A=s(O,A,D),G===null?U=O:G.sibling=O,G=O);return qn&&_f(N,D),U}for(O=n(O);D<j.length;D++)I=g(O,N,D,j[D],P),I!==null&&(t&&I.alternate!==null&&O.delete(I.key===null?D:I.key),A=s(I,A,D),G===null?U=I:G.sibling=I,G=I);return t&&O.forEach(function(R){return e(N,R)}),qn&&_f(N,D),U}function w(N,A,j,P){if(j==null)throw Error(Yt(151));for(var U=null,G=null,O=A,D=A=0,I=null,V=j.next();O!==null&&!V.done;D++,V=j.next()){O.index>D?(I=O,O=null):I=O.sibling;var R=p(N,O,V.value,P);if(R===null){O===null&&(O=I);break}t&&O&&R.alternate===null&&e(N,O),A=s(R,A,D),G===null?U=R:G.sibling=R,G=R,O=I}if(V.done)return r(N,O),qn&&_f(N,D),U;if(O===null){for(;!V.done;D++,V=j.next())V=h(N,V.value,P),V!==null&&(A=s(V,A,D),G===null?U=V:G.sibling=V,G=V);return qn&&_f(N,D),U}for(O=n(O);!V.done;D++,V=j.next())V=g(O,N,D,V.value,P),V!==null&&(t&&V.alternate!==null&&O.delete(V.key===null?D:V.key),A=s(V,A,D),G===null?U=V:G.sibling=V,G=V);return t&&O.forEach(function(B){return e(N,B)}),qn&&_f(N,D),U}function _(N,A,j,P){if(typeof j=="object"&&j!==null&&j.type===i1&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case I_:e:{for(var U=j.key;A!==null;){if(A.key===U){if(U=j.type,U===i1){if(A.tag===7){r(N,A.sibling),P=a(A,j.props.children),P.return=N,N=P;break e}}else if(A.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Jh&&Mm(U)===A.type){r(N,A.sibling),P=a(A,j.props),zv(P,j),P.return=N,N=P;break e}r(N,A);break}else e(N,A);A=A.sibling}j.type===i1?(P=lp(j.props.children,N.mode,P,j.key),P.return=N,N=P):(P=hN(j.type,j.key,j.props,null,N.mode,P),zv(P,j),P.return=N,N=P)}return o(N);case xb:e:{for(U=j.key;A!==null;){if(A.key===U)if(A.tag===4&&A.stateNode.containerInfo===j.containerInfo&&A.stateNode.implementation===j.implementation){r(N,A.sibling),P=a(A,j.children||[]),P.return=N,N=P;break e}else{r(N,A);break}else e(N,A);A=A.sibling}P=nj(j,N.mode,P),P.return=N,N=P}return o(N);case Jh:return j=Mm(j),_(N,A,j,P)}if(vb(j))return b(N,A,j,P);if(Fv(j)){if(U=Fv(j),typeof U!="function")throw Error(Yt(150));return j=U.call(j),w(N,A,j,P)}if(typeof j.then=="function")return _(N,A,F_(j),P);if(j.$$typeof===Pf)return _(N,A,L_(N,j),P);B_(N,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,A!==null&&A.tag===6?(r(N,A.sibling),P=a(A,j),P.return=N,N=P):(r(N,A),P=rj(j,N.mode,P),P.return=N,N=P),o(N)):r(N,A)}return function(N,A,j,P){try{j2=0;var U=_(N,A,j,P);return P1=null,U}catch(O){if(O===Qx||O===J4)throw O;var G=Ec(29,O,null,N.mode);return G.lanes=P,G.return=N,G}finally{}}}var Ip=gY(!0),xY=gY(!1),e0=!1;function $O(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ek(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _0(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function N0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ua&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,e=_E(t),lY(t,null,r),e}return Q4(t,n,e,r),_E(t)}function Bb(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,DX(t,r)}}function sj(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}var tk=!1;function Ub(){if(tk){var t=O1;if(t!==null)throw t}}function zb(t,e,r,n){tk=!1;var a=t.updateQueue;e0=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=a.baseState;o=0,d=u=c=null,l=s;do{var p=l.lane&-536870913,g=p!==l.lane;if(g?(zn&p)===p:(n&p)===p){p!==0&&p===ax&&(tk=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=t,w=l;p=e;var _=r;switch(w.tag){case 1:if(b=w.payload,typeof b=="function"){h=b.call(_,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=w.payload,p=typeof b=="function"?b.call(_,h,p):b,p==null)break e;h=ss({},h,p);break e;case 2:e0=!0}}p=l.callback,p!==null&&(t.flags|=64,g&&(t.flags|=8192),g=a.callbacks,g===null?a.callbacks=[p]:g.push(p))}else g={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,s===null&&(a.shared.lanes=0),$0|=o,t.lanes=o,t.memoizedState=h}}function vY(t,e){if(typeof t!="function")throw Error(Yt(191,t));t.call(e)}function bY(t,e){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)vY(r[t],e)}var sx=ef(null),SE=ef(0);function J9(t,e){t=sh,Ka(SE,t),Ka(sx,e),sh=t|e.baseLanes}function rk(){Ka(SE,sh),Ka(sx,sx.current)}function HO(){sh=SE.current,ao(sx),ao(SE)}var Bc=ef(null),_u=null;function a0(t){var e=t.alternate;Ka(ti,ti.current&1),Ka(Bc,t),_u===null&&(e===null||sx.current!==null||e.memoizedState!==null)&&(_u=t)}function nk(t){Ka(ti,ti.current),Ka(Bc,t),_u===null&&(_u=t)}function yY(t){t.tag===22?(Ka(ti,ti.current),Ka(Bc,t),_u===null&&(_u=t)):s0()}function s0(){Ka(ti,ti.current),Ka(Bc,Bc.current)}function wc(t){ao(Bc),_u===t&&(_u=null),ao(ti)}var ti=ef(0);function jE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||_k(r)||Nk(r)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rh=0,Nn=null,Da=null,mi=null,TE=!1,R1=!1,Op=!1,CE=0,T2=0,D1=null,dpe=0;function Ps(){throw Error(Yt(321))}function qO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Fc(t[r],e[r]))return!1;return!0}function GO(t,e,r,n,a,s){return rh=s,Nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fn.H=t===null||t.memoizedState===null?ZY:nP,Op=!1,s=r(n,a),Op=!1,R1&&(s=_Y(e,r,n,a)),wY(t),s}function wY(t){fn.H=C2;var e=Da!==null&&Da.next!==null;if(rh=0,mi=Da=Nn=null,TE=!1,T2=0,D1=null,e)throw Error(Yt(300));t===null||xi||(t=t.dependencies,t!==null&&EE(t)&&(xi=!0))}function _Y(t,e,r,n){Nn=t;var a=0;do{if(R1&&(D1=null),T2=0,R1=!1,25<=a)throw Error(Yt(301));if(a+=1,mi=Da=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}fn.H=QY,s=e(r,n)}while(R1);return s}function fpe(){var t=fn.H,e=t.useState()[0];return e=typeof e.then=="function"?qy(e):e,t=t.useState()[0],(Da!==null?Da.memoizedState:null)!==t&&(Nn.flags|=1024),e}function WO(){var t=CE!==0;return CE=0,t}function KO(t,e,r){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r}function XO(t){if(TE){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}TE=!1}rh=0,mi=Da=Nn=null,R1=!1,T2=CE=0,D1=null}function ll(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?Nn.memoizedState=mi=t:mi=mi.next=t,mi}function ni(){if(Da===null){var t=Nn.alternate;t=t!==null?t.memoizedState:null}else t=Da.next;var e=mi===null?Nn.memoizedState:mi.next;if(e!==null)mi=e,Da=t;else{if(t===null)throw Nn.alternate===null?Error(Yt(467)):Error(Yt(310));Da=t,t={memoizedState:Da.memoizedState,baseState:Da.baseState,baseQueue:Da.baseQueue,queue:Da.queue,next:null},mi===null?Nn.memoizedState=mi=t:mi=mi.next=t}return mi}function eA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qy(t){var e=T2;return T2+=1,D1===null&&(D1=[]),t=pY(D1,t,e),e=Nn,(mi===null?e.memoizedState:mi.next)===null&&(e=e.alternate,fn.H=e===null||e.memoizedState===null?ZY:nP),t}function tA(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return qy(t);if(t.$$typeof===Pf)return To(t)}throw Error(Yt(438,String(t)))}function YO(t){var e=null,r=Nn.updateQueue;if(r!==null&&(e=r.memoCache),e==null){var n=Nn.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),r===null&&(r=eA(),Nn.updateQueue=r),r.memoCache=e,r=e.data[e.index],r===void 0)for(r=e.data[e.index]=Array(t),n=0;n<t;n++)r[n]=Z0e;return e.index++,r}function nh(t,e){return typeof e=="function"?e(t):e}function pN(t){var e=ni();return ZO(e,Da,t)}function ZO(t,e,r){var n=t.queue;if(n===null)throw Error(Yt(311));n.lastRenderedReducer=r;var a=t.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}e.baseQueue=a=s,n.pending=null}if(s=t.baseState,a===null)t.memoizedState=s;else{e=a.next;var l=o=null,c=null,u=e,d=!1;do{var h=u.lane&-536870913;if(h!==u.lane?(zn&h)===h:(rh&h)===h){var p=u.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===ax&&(d=!0);else if((rh&p)===p){u=u.next,p===ax&&(d=!0);continue}else h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=h,o=s):c=c.next=h,Nn.lanes|=p,$0|=p;h=u.action,Op&&r(s,h),s=u.hasEagerState?u.eagerState:r(s,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=p,o=s):c=c.next=p,Nn.lanes|=h,$0|=h;u=u.next}while(u!==null&&u!==e);if(c===null?o=s:c.next=l,!Fc(s,t.memoizedState)&&(xi=!0,d&&(r=O1,r!==null)))throw r;t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}return a===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function ij(t){var e=ni(),r=e.queue;if(r===null)throw Error(Yt(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);Fc(s,e.memoizedState)||(xi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function NY(t,e,r){var n=Nn,a=ni(),s=qn;if(s){if(r===void 0)throw Error(Yt(407));r=r()}else r=e();var o=!Fc((Da||a).memoizedState,r);if(o&&(a.memoizedState=r,xi=!0),a=a.queue,QO(SY.bind(null,n,a,t),[t]),a.getSnapshot!==e||o||mi!==null&&mi.memoizedState.tag&1){if(n.flags|=2048,ix(9,{destroy:void 0},AY.bind(null,n,a,r,e),null),za===null)throw Error(Yt(349));s||rh&127||EY(n,e,r)}return r}function EY(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Nn.updateQueue,e===null?(e=eA(),Nn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function AY(t,e,r,n){e.value=r,e.getSnapshot=n,jY(e)&&TY(t)}function SY(t,e,r){return r(function(){jY(e)&&TY(t)})}function jY(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Fc(t,r)}catch{return!0}}function TY(t){var e=sg(t,2);e!==null&&$l(e,t,2)}function ak(t){var e=ll();if(typeof t=="function"){var r=t;if(t=r(),Op){u0(!0);try{r()}finally{u0(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nh,lastRenderedState:t},e}function CY(t,e,r,n){return t.baseState=r,ZO(t,Da,typeof n=="function"?n:nh)}function hpe(t,e,r,n,a){if(nA(t))throw Error(Yt(485));if(t=e.action,t!==null){var s={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};fn.T!==null?r(!0):s.isTransition=!1,n(s),r=e.pending,r===null?(s.next=e.pending=s,kY(e,s)):(s.next=r.next,e.pending=r.next=s)}}function kY(t,e){var r=e.action,n=e.payload,a=t.state;if(e.isTransition){var s=fn.T,o={};fn.T=o;try{var l=r(a,n),c=fn.S;c!==null&&c(o,l),eF(t,e,l)}catch(u){sk(t,e,u)}finally{s!==null&&o.types!==null&&(s.types=o.types),fn.T=s}}else try{s=r(a,n),eF(t,e,s)}catch(u){sk(t,e,u)}}function eF(t,e,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(n){tF(t,e,n)},function(n){return sk(t,e,n)}):tF(t,e,r)}function tF(t,e,r){e.status="fulfilled",e.value=r,IY(e),t.state=r,e=t.pending,e!==null&&(r=e.next,r===e?t.pending=null:(r=r.next,e.next=r,kY(t,r)))}function sk(t,e,r){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=r,IY(e),e=e.next;while(e!==n)}t.action=null}function IY(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function OY(t,e){return e}function rF(t,e){if(qn){var r=za.formState;if(r!==null){e:{var n=Nn;if(qn){if(es){t:{for(var a=es,s=hu;a.nodeType!==8;){if(!s){a=null;break t}if(a=Nu(a.nextSibling),a===null){a=null;break t}}s=a.data,a=s==="F!"||s==="F"?a:null}if(a){es=Nu(a.nextSibling),n=a.data==="F!";break e}}z0(n)}n=!1}n&&(e=r[0])}}return r=ll(),r.memoizedState=r.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:OY,lastRenderedState:e},r.queue=n,r=KY.bind(null,Nn,n),n.dispatch=r,n=ak(!1),s=rP.bind(null,Nn,!1,n.queue),n=ll(),a={state:e,dispatch:null,action:t,pending:null},n.queue=a,r=hpe.bind(null,Nn,a,s,r),a.dispatch=r,n.memoizedState=t,[e,r,!1]}function nF(t){var e=ni();return PY(e,Da,t)}function PY(t,e,r){if(e=ZO(t,e,OY)[0],t=pN(nh)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=qy(e)}catch(o){throw o===Qx?J4:o}else n=e;e=ni();var a=e.queue,s=a.dispatch;return r!==e.memoizedState&&(Nn.flags|=2048,ix(9,{destroy:void 0},mpe.bind(null,a,r),null)),[n,s,t]}function mpe(t,e){t.action=e}function aF(t){var e=ni(),r=Da;if(r!==null)return PY(e,r,t);ni(),e=e.memoizedState,r=ni();var n=r.queue.dispatch;return r.memoizedState=t,[e,n,!1]}function ix(t,e,r,n){return t={tag:t,create:r,deps:n,inst:e,next:null},e=Nn.updateQueue,e===null&&(e=eA(),Nn.updateQueue=e),r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function RY(){return ni().memoizedState}function gN(t,e,r,n){var a=ll();Nn.flags|=t,a.memoizedState=ix(1|e,{destroy:void 0},r,n===void 0?null:n)}function rA(t,e,r,n){var a=ni();n=n===void 0?null:n;var s=a.memoizedState.inst;Da!==null&&n!==null&&qO(n,Da.memoizedState.deps)?a.memoizedState=ix(e,s,r,n):(Nn.flags|=t,a.memoizedState=ix(1|e,s,r,n))}function sF(t,e){gN(8390656,8,t,e)}function QO(t,e){rA(2048,8,t,e)}function ppe(t){Nn.flags|=4;var e=Nn.updateQueue;if(e===null)e=eA(),Nn.updateQueue=e,e.events=[t];else{var r=e.events;r===null?e.events=[t]:r.push(t)}}function DY(t){var e=ni().memoizedState;return ppe({ref:e,nextImpl:t}),function(){if(ua&2)throw Error(Yt(440));return e.impl.apply(void 0,arguments)}}function MY(t,e){return rA(4,2,t,e)}function LY(t,e){return rA(4,4,t,e)}function FY(t,e){if(typeof e=="function"){t=t();var r=e(t);return function(){typeof r=="function"?r():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BY(t,e,r){r=r!=null?r.concat([t]):null,rA(4,4,FY.bind(null,e,t),r)}function JO(){}function UY(t,e){var r=ni();e=e===void 0?null:e;var n=r.memoizedState;return e!==null&&qO(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function zY(t,e){var r=ni();e=e===void 0?null:e;var n=r.memoizedState;if(e!==null&&qO(e,n[1]))return n[0];if(n=t(),Op){u0(!0);try{t()}finally{u0(!1)}}return r.memoizedState=[n,e],n}function eP(t,e,r){return r===void 0||rh&1073741824&&!(zn&261930)?t.memoizedState=e:(t.memoizedState=r,t=CZ(),Nn.lanes|=t,$0|=t,r)}function VY(t,e,r,n){return Fc(r,e)?r:sx.current!==null?(t=eP(t,r,n),Fc(t,e)||(xi=!0),t):!(rh&42)||rh&1073741824&&!(zn&261930)?(xi=!0,t.memoizedState=r):(t=CZ(),Nn.lanes|=t,$0|=t,e)}function $Y(t,e,r,n,a){var s=da.p;da.p=s!==0&&8>s?s:8;var o=fn.T,l={};fn.T=l,rP(t,!1,e,r);try{var c=a(),u=fn.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=upe(c,n);Vb(t,e,d,Mc(t))}else Vb(t,e,n,Mc(t))}catch(h){Vb(t,e,{then:function(){},status:"rejected",reason:h},Mc())}finally{da.p=s,o!==null&&l.types!==null&&(o.types=l.types),fn.T=o}}function gpe(){}function ik(t,e,r,n){if(t.tag!==5)throw Error(Yt(476));var a=HY(t).queue;$Y(t,a,e,op,r===null?gpe:function(){return qY(t),r(n)})}function HY(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:op,baseState:op,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nh,lastRenderedState:op},next:null};var r={};return e.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nh,lastRenderedState:r},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function qY(t){var e=HY(t);e.next===null&&(e=t.alternate.memoizedState),Vb(t,e.next.queue,{},Mc())}function tP(){return To(O2)}function GY(){return ni().memoizedState}function WY(){return ni().memoizedState}function xpe(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var r=Mc();t=_0(r);var n=N0(e,t,r);n!==null&&($l(n,e,r),Bb(n,e,r)),e={cache:UO()},t.payload=e;return}e=e.return}}function vpe(t,e,r){var n=Mc();r={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},nA(t)?XY(e,r):(r=MO(t,e,r,n),r!==null&&($l(r,t,n),YY(r,e,n)))}function KY(t,e,r){var n=Mc();Vb(t,e,r,n)}function Vb(t,e,r,n){var a={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(nA(t))XY(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Fc(l,o))return Q4(t,e,a,0),za===null&&Z4(),!1}catch{}finally{}if(r=MO(t,e,a,n),r!==null)return $l(r,t,n),YY(r,e,n),!0}return!1}function rP(t,e,r,n){if(n={lane:2,revertLane:dP(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},nA(t)){if(e)throw Error(Yt(479))}else e=MO(t,r,n,2),e!==null&&$l(e,t,2)}function nA(t){var e=t.alternate;return t===Nn||e!==null&&e===Nn}function XY(t,e){R1=TE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function YY(t,e,r){if(r&4194048){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,DX(t,r)}}var C2={readContext:To,use:tA,useCallback:Ps,useContext:Ps,useEffect:Ps,useImperativeHandle:Ps,useLayoutEffect:Ps,useInsertionEffect:Ps,useMemo:Ps,useReducer:Ps,useRef:Ps,useState:Ps,useDebugValue:Ps,useDeferredValue:Ps,useTransition:Ps,useSyncExternalStore:Ps,useId:Ps,useHostTransitionStatus:Ps,useFormState:Ps,useActionState:Ps,useOptimistic:Ps,useMemoCache:Ps,useCacheRefresh:Ps};C2.useEffectEvent=Ps;var ZY={readContext:To,use:tA,useCallback:function(t,e){return ll().memoizedState=[t,e===void 0?null:e],t},useContext:To,useEffect:sF,useImperativeHandle:function(t,e,r){r=r!=null?r.concat([t]):null,gN(4194308,4,FY.bind(null,e,t),r)},useLayoutEffect:function(t,e){return gN(4194308,4,t,e)},useInsertionEffect:function(t,e){gN(4,2,t,e)},useMemo:function(t,e){var r=ll();e=e===void 0?null:e;var n=t();if(Op){u0(!0);try{t()}finally{u0(!1)}}return r.memoizedState=[n,e],n},useReducer:function(t,e,r){var n=ll();if(r!==void 0){var a=r(e);if(Op){u0(!0);try{r(e)}finally{u0(!1)}}}else a=e;return n.memoizedState=n.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},n.queue=t,t=t.dispatch=vpe.bind(null,Nn,t),[n.memoizedState,t]},useRef:function(t){var e=ll();return t={current:t},e.memoizedState=t},useState:function(t){t=ak(t);var e=t.queue,r=KY.bind(null,Nn,e);return e.dispatch=r,[t.memoizedState,r]},useDebugValue:JO,useDeferredValue:function(t,e){var r=ll();return eP(r,t,e)},useTransition:function(){var t=ak(!1);return t=$Y.bind(null,Nn,t.queue,!0,!1),ll().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,r){var n=Nn,a=ll();if(qn){if(r===void 0)throw Error(Yt(407));r=r()}else{if(r=e(),za===null)throw Error(Yt(349));zn&127||EY(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,sF(SY.bind(null,n,s,t),[t]),n.flags|=2048,ix(9,{destroy:void 0},AY.bind(null,n,s,r,e),null),r},useId:function(){var t=ll(),e=za.identifierPrefix;if(qn){var r=Td,n=jd;r=(n&~(1<<32-Dc(n)-1)).toString(32)+r,e="_"+e+"R_"+r,r=CE++,0<r&&(e+="H"+r.toString(32)),e+="_"}else r=dpe++,e="_"+e+"r_"+r.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:tP,useFormState:rF,useActionState:rF,useOptimistic:function(t){var e=ll();e.memoizedState=e.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=r,e=rP.bind(null,Nn,!0,r),r.dispatch=e,[t,e]},useMemoCache:YO,useCacheRefresh:function(){return ll().memoizedState=xpe.bind(null,Nn)},useEffectEvent:function(t){var e=ll(),r={impl:t};return e.memoizedState=r,function(){if(ua&2)throw Error(Yt(440));return r.impl.apply(void 0,arguments)}}},nP={readContext:To,use:tA,useCallback:UY,useContext:To,useEffect:QO,useImperativeHandle:BY,useInsertionEffect:MY,useLayoutEffect:LY,useMemo:zY,useReducer:pN,useRef:RY,useState:function(){return pN(nh)},useDebugValue:JO,useDeferredValue:function(t,e){var r=ni();return VY(r,Da.memoizedState,t,e)},useTransition:function(){var t=pN(nh)[0],e=ni().memoizedState;return[typeof t=="boolean"?t:qy(t),e]},useSyncExternalStore:NY,useId:GY,useHostTransitionStatus:tP,useFormState:nF,useActionState:nF,useOptimistic:function(t,e){var r=ni();return CY(r,Da,t,e)},useMemoCache:YO,useCacheRefresh:WY};nP.useEffectEvent=DY;var QY={readContext:To,use:tA,useCallback:UY,useContext:To,useEffect:QO,useImperativeHandle:BY,useInsertionEffect:MY,useLayoutEffect:LY,useMemo:zY,useReducer:ij,useRef:RY,useState:function(){return ij(nh)},useDebugValue:JO,useDeferredValue:function(t,e){var r=ni();return Da===null?eP(r,t,e):VY(r,Da.memoizedState,t,e)},useTransition:function(){var t=ij(nh)[0],e=ni().memoizedState;return[typeof t=="boolean"?t:qy(t),e]},useSyncExternalStore:NY,useId:GY,useHostTransitionStatus:tP,useFormState:aF,useActionState:aF,useOptimistic:function(t,e){var r=ni();return Da!==null?CY(r,Da,t,e):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:YO,useCacheRefresh:WY};QY.useEffectEvent=DY;function oj(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ss({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ok={enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Mc(),a=_0(n);a.payload=e,r!=null&&(a.callback=r),e=N0(t,a,n),e!==null&&($l(e,t,n),Bb(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Mc(),a=_0(n);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=N0(t,a,n),e!==null&&($l(e,t,n),Bb(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Mc(),n=_0(r);n.tag=2,e!=null&&(n.callback=e),e=N0(t,n,r),e!==null&&($l(e,t,r),Bb(e,t,r))}};function iF(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!E2(r,n)||!E2(a,s):!0}function oF(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ok.enqueueReplaceState(e,e.state,null)}function Pp(t,e){var r=e;if("ref"in e){r={};for(var n in e)n!=="ref"&&(r[n]=e[n])}if(t=t.defaultProps){r===e&&(r=ss({},r));for(var a in t)r[a]===void 0&&(r[a]=t[a])}return r}function JY(t){wE(t)}function eZ(t){console.error(t)}function tZ(t){wE(t)}function kE(t,e){try{var r=t.onUncaughtError;r(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function lF(t,e,r){try{var n=t.onCaughtError;n(r.value,{componentStack:r.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function lk(t,e,r){return r=_0(r),r.tag=3,r.payload={element:null},r.callback=function(){kE(t,e)},r}function rZ(t){return t=_0(t),t.tag=3,t}function nZ(t,e,r,n){var a=r.type.getDerivedStateFromError;if(typeof a=="function"){var s=n.value;t.payload=function(){return a(s)},t.callback=function(){lF(e,r,n)}}var o=r.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){lF(e,r,n),typeof a!="function"&&(E0===null?E0=new Set([this]):E0.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})})}function bpe(t,e,r,n,a){if(r.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=r.alternate,e!==null&&Zx(e,r,a,!0),r=Bc.current,r!==null){switch(r.tag){case 31:case 13:return _u===null?DE():r.alternate===null&&Bs===0&&(Bs=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===AE?r.flags|=16384:(e=r.updateQueue,e===null?r.updateQueue=new Set([n]):e.add(n),vj(t,n,a)),!1;case 22:return r.flags|=65536,n===AE?r.flags|=16384:(e=r.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=e):(r=e.retryQueue,r===null?e.retryQueue=new Set([n]):r.add(n)),vj(t,n,a)),!1}throw Error(Yt(435,r.tag))}return vj(t,n,a),DE(),!1}if(qn)return e=Bc.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,n!==XC&&(t=Error(Yt(422),{cause:n}),S2(fu(t,r)))):(n!==XC&&(e=Error(Yt(423),{cause:n}),S2(fu(e,r))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,n=fu(n,r),a=lk(t.stateNode,n,a),sj(t,a),Bs!==4&&(Bs=2)),!1;var s=Error(Yt(520),{cause:n});if(s=fu(s,r),qb===null?qb=[s]:qb.push(s),Bs!==4&&(Bs=2),e===null)return!0;n=fu(n,r),r=e;do{switch(r.tag){case 3:return r.flags|=65536,t=a&-a,r.lanes|=t,t=lk(r.stateNode,n,t),sj(r,t),!1;case 1:if(e=r.type,s=r.stateNode,(r.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(E0===null||!E0.has(s))))return r.flags|=65536,a&=-a,r.lanes|=a,a=rZ(a),nZ(a,t,r,n),sj(r,a),!1}r=r.return}while(r!==null);return!1}var aP=Error(Yt(461)),xi=!1;function bo(t,e,r,n){e.child=t===null?xY(e,null,r,n):Ip(e,t.child,r,n)}function cF(t,e,r,n,a){r=r.render;var s=e.ref;if("ref"in n){var o={};for(var l in n)l!=="ref"&&(o[l]=n[l])}else o=n;return kp(e),n=GO(t,e,r,o,s,a),l=WO(),t!==null&&!xi?(KO(t,e,a),ah(t,e,a)):(qn&&l&&FO(e),e.flags|=1,bo(t,e,n,a),e.child)}function uF(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!LO(s)&&s.defaultProps===void 0&&r.compare===null?(e.tag=15,e.type=s,aZ(t,e,s,n,a)):(t=hN(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!sP(t,a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:E2,r(o,n)&&t.ref===e.ref)return ah(t,e,a)}return e.flags|=1,t=Vf(s,n),t.ref=e.ref,t.return=e,e.child=t}function aZ(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(E2(s,n)&&t.ref===e.ref)if(xi=!1,e.pendingProps=n=s,sP(t,a))t.flags&131072&&(xi=!0);else return e.lanes=t.lanes,ah(t,e,a)}return ck(t,e,r,n,a)}function sZ(t,e,r,n){var a=n.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|r:r,t!==null){for(n=e.child=t.child,a=0;n!==null;)a=a|n.lanes|n.childLanes,n=n.sibling;n=a&~s}else n=0,e.child=null;return dF(t,e,s,r,n)}if(r&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&mN(e,s!==null?s.cachePool:null),s!==null?J9(e,s):rk(),yY(e);else return n=e.lanes=536870912,dF(t,e,s!==null?s.baseLanes|r:r,r,n)}else s!==null?(mN(e,s.cachePool),J9(e,s),s0(),e.memoizedState=null):(t!==null&&mN(e,null),rk(),s0());return bo(t,e,a,r),e.child}function yb(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function dF(t,e,r,n,a){var s=zO();return s=s===null?null:{parent:gi._currentValue,pool:s},e.memoizedState={baseLanes:r,cachePool:s},t!==null&&mN(e,null),rk(),yY(e),t!==null&&Zx(t,e,n,!0),e.childLanes=a,null}function xN(t,e){return e=IE({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function fF(t,e,r){return Ip(e,t.child,null,r),t=xN(e,e.pendingProps),t.flags|=2,wc(e),e.memoizedState=null,t}function ype(t,e,r){var n=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(qn){if(n.mode==="hidden")return t=xN(e,n),e.lanes=536870912,yb(null,t);if(nk(e),(t=es)?(t=ZZ(t,hu),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:U0!==null?{id:jd,overflow:Td}:null,retryLane:536870912,hydrationErrors:null},r=uY(t),r.return=e,e.child=r,Ao=e,es=null)):t=null,t===null)throw z0(e);return e.lanes=536870912,null}return xN(e,n)}var s=t.memoizedState;if(s!==null){var o=s.dehydrated;if(nk(e),a)if(e.flags&256)e.flags&=-257,e=fF(t,e,r);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(Yt(558));else if(xi||Zx(t,e,r,!1),a=(r&t.childLanes)!==0,xi||a){if(n=za,n!==null&&(o=MX(n,r),o!==0&&o!==s.retryLane))throw s.retryLane=o,sg(t,o),$l(n,t,o),aP;DE(),e=fF(t,e,r)}else t=s.treeContext,es=Nu(o.nextSibling),Ao=e,qn=!0,w0=null,hu=!1,t!==null&&fY(e,t),e=xN(e,n),e.flags|=4096;return e}return t=Vf(t.child,{mode:n.mode,children:n.children}),t.ref=e.ref,e.child=t,t.return=e,t}function vN(t,e){var r=e.ref;if(r===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(Yt(284));(t===null||t.ref!==r)&&(e.flags|=4194816)}}function ck(t,e,r,n,a){return kp(e),r=GO(t,e,r,n,void 0,a),n=WO(),t!==null&&!xi?(KO(t,e,a),ah(t,e,a)):(qn&&n&&FO(e),e.flags|=1,bo(t,e,r,a),e.child)}function hF(t,e,r,n,a,s){return kp(e),e.updateQueue=null,r=_Y(e,n,r,a),wY(t),n=WO(),t!==null&&!xi?(KO(t,e,s),ah(t,e,s)):(qn&&n&&FO(e),e.flags|=1,bo(t,e,r,s),e.child)}function mF(t,e,r,n,a){if(kp(e),e.stateNode===null){var s=m1,o=r.contextType;typeof o=="object"&&o!==null&&(s=To(o)),s=new r(n,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ok,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=n,s.state=e.memoizedState,s.refs={},$O(e),o=r.contextType,s.context=typeof o=="object"&&o!==null?To(o):m1,s.state=e.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(oj(e,r,o,n),s.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&ok.enqueueReplaceState(s,s.state,null),zb(e,n,s,a),Ub(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,c=Pp(r,l);s.props=c;var u=s.context,d=r.contextType;o=m1,typeof d=="object"&&d!==null&&(o=To(d));var h=r.getDerivedStateFromProps;d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||u!==o)&&oF(e,s,n,o),e0=!1;var p=e.memoizedState;s.state=p,zb(e,n,s,a),Ub(),u=e.memoizedState,l||p!==u||e0?(typeof h=="function"&&(oj(e,r,h,n),u=e.memoizedState),(c=e0||iF(e,r,c,n,p,u,o))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=o,n=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,ek(t,e),o=e.memoizedProps,d=Pp(r,o),s.props=d,h=e.pendingProps,p=s.context,u=r.contextType,c=m1,typeof u=="object"&&u!==null&&(c=To(u)),l=r.getDerivedStateFromProps,(u=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==h||p!==c)&&oF(e,s,n,c),e0=!1,p=e.memoizedState,s.state=p,zb(e,n,s,a),Ub();var g=e.memoizedState;o!==h||p!==g||e0||t!==null&&t.dependencies!==null&&EE(t.dependencies)?(typeof l=="function"&&(oj(e,r,l,n),g=e.memoizedState),(d=e0||iF(e,r,d,n,p,g,c)||t!==null&&t.dependencies!==null&&EE(t.dependencies))?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),s.props=n,s.state=g,s.context=c,n=d):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return s=n,vN(t,e),n=(e.flags&128)!==0,s||n?(s=e.stateNode,r=n&&typeof r.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&n?(e.child=Ip(e,t.child,null,a),e.child=Ip(e,null,r,a)):bo(t,e,r,a),e.memoizedState=s.state,t=e.child):t=ah(t,e,a),t}function pF(t,e,r,n){return Cp(),e.flags|=256,bo(t,e,r,n),e.child}var lj={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cj(t){return{baseLanes:t,cachePool:mY()}}function uj(t,e,r){return t=t!==null?t.childLanes&~r:0,e&&(t|=jc),t}function iZ(t,e,r){var n=e.pendingProps,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(ti.current&2)!==0),o&&(a=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(qn){if(a?a0(e):s0(),(t=es)?(t=ZZ(t,hu),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:U0!==null?{id:jd,overflow:Td}:null,retryLane:536870912,hydrationErrors:null},r=uY(t),r.return=e,e.child=r,Ao=e,es=null)):t=null,t===null)throw z0(e);return Nk(t)?e.lanes=32:e.lanes=536870912,null}var l=n.children;return n=n.fallback,a?(s0(),a=e.mode,l=IE({mode:"hidden",children:l},a),n=lp(n,a,r,null),l.return=e,n.return=e,l.sibling=n,e.child=l,n=e.child,n.memoizedState=cj(r),n.childLanes=uj(t,o,r),e.memoizedState=lj,yb(null,n)):(a0(e),uk(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(s)e.flags&256?(a0(e),e.flags&=-257,e=dj(t,e,r)):e.memoizedState!==null?(s0(),e.child=t.child,e.flags|=128,e=null):(s0(),l=n.fallback,a=e.mode,n=IE({mode:"visible",children:n.children},a),l=lp(l,a,r,null),l.flags|=2,n.return=e,l.return=e,n.sibling=l,e.child=n,Ip(e,t.child,null,r),n=e.child,n.memoizedState=cj(r),n.childLanes=uj(t,o,r),e.memoizedState=lj,e=yb(null,n));else if(a0(e),Nk(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var u=o.dgst;o=u,n=Error(Yt(419)),n.stack="",n.digest=o,S2({value:n,source:null,stack:null}),e=dj(t,e,r)}else if(xi||Zx(t,e,r,!1),o=(r&t.childLanes)!==0,xi||o){if(o=za,o!==null&&(n=MX(o,r),n!==0&&n!==c.retryLane))throw c.retryLane=n,sg(t,n),$l(o,t,n),aP;_k(l)||DE(),e=dj(t,e,r)}else _k(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,es=Nu(l.nextSibling),Ao=e,qn=!0,w0=null,hu=!1,t!==null&&fY(e,t),e=uk(e,n.children),e.flags|=4096);return e}return a?(s0(),l=n.fallback,a=e.mode,c=t.child,u=c.sibling,n=Vf(c,{mode:"hidden",children:n.children}),n.subtreeFlags=c.subtreeFlags&65011712,u!==null?l=Vf(u,l):(l=lp(l,a,r,null),l.flags|=2),l.return=e,n.return=e,n.sibling=l,e.child=n,yb(null,n),n=e.child,l=t.child.memoizedState,l===null?l=cj(r):(a=l.cachePool,a!==null?(c=gi._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=mY(),l={baseLanes:l.baseLanes|r,cachePool:a}),n.memoizedState=l,n.childLanes=uj(t,o,r),e.memoizedState=lj,yb(t.child,n)):(a0(e),r=t.child,t=r.sibling,r=Vf(r,{mode:"visible",children:n.children}),r.return=e,r.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=r,e.memoizedState=null,r)}function uk(t,e){return e=IE({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function IE(t,e){return t=Ec(22,t,null,e),t.lanes=0,t}function dj(t,e,r){return Ip(e,t.child,null,r),t=uk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gF(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ZC(t.return,e,r)}function fj(t,e,r,n,a,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a,treeForkCount:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a,o.treeForkCount=s)}function oZ(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;n=n.children;var o=ti.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,Ka(ti,o),bo(t,e,n,r),n=qn?A2:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gF(t,r,e);else if(t.tag===19)gF(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&jE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),fj(e,!1,a,r,s,n);break;case"backwards":case"unstable_legacy-backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&jE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}fj(e,!0,r,null,s,n);break;case"together":fj(e,!1,null,null,void 0,n);break;default:e.memoizedState=null}return e.child}function ah(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),$0|=e.lanes,!(r&e.childLanes))if(t!==null){if(Zx(t,e,r,!1),(r&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(Yt(153));if(e.child!==null){for(t=e.child,r=Vf(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Vf(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function sP(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&EE(t)))}function wpe(t,e,r){switch(e.tag){case 3:xE(e,e.stateNode.containerInfo),n0(e,gi,t.memoizedState.cache),Cp();break;case 27:case 5:FC(e);break;case 4:xE(e,e.stateNode.containerInfo);break;case 10:n0(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,nk(e),null;break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(a0(e),e.flags|=128,null):r&e.child.childLanes?iZ(t,e,r):(a0(e),t=ah(t,e,r),t!==null?t.sibling:null);a0(e);break;case 19:var a=(t.flags&128)!==0;if(n=(r&e.childLanes)!==0,n||(Zx(t,e,r,!1),n=(r&e.childLanes)!==0),a){if(n)return oZ(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ka(ti,ti.current),n)break;return null;case 22:return e.lanes=0,sZ(t,e,r,e.pendingProps);case 24:n0(e,gi,t.memoizedState.cache)}return ah(t,e,r)}function lZ(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps)xi=!0;else{if(!sP(t,r)&&!(e.flags&128))return xi=!1,wpe(t,e,r);xi=!!(t.flags&131072)}else xi=!1,qn&&e.flags&1048576&&dY(e,A2,e.index);switch(e.lanes=0,e.tag){case 16:e:{var n=e.pendingProps;if(t=Mm(e.elementType),e.type=t,typeof t=="function")LO(t)?(n=Pp(t,n),e.tag=1,e=mF(null,e,t,n,r)):(e.tag=0,e=ck(null,e,t,n,r));else{if(t!=null){var a=t.$$typeof;if(a===NO){e.tag=11,e=cF(null,e,t,n,r);break e}else if(a===EO){e.tag=14,e=uF(null,e,t,n,r);break e}}throw e=MC(t)||t,Error(Yt(306,e,""))}}return e;case 0:return ck(t,e,e.type,e.pendingProps,r);case 1:return n=e.type,a=Pp(n,e.pendingProps),mF(t,e,n,a,r);case 3:e:{if(xE(e,e.stateNode.containerInfo),t===null)throw Error(Yt(387));n=e.pendingProps;var s=e.memoizedState;a=s.element,ek(t,e),zb(e,n,null,r);var o=e.memoizedState;if(n=o.cache,n0(e,gi,n),n!==s.cache&&QC(e,[gi],r,!0),Ub(),n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=pF(t,e,n,r);break e}else if(n!==a){a=fu(Error(Yt(424)),e),S2(a),e=pF(t,e,n,r);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(es=Nu(t.firstChild),Ao=e,qn=!0,w0=null,hu=!0,r=xY(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Cp(),n===a){e=ah(t,e,r);break e}bo(t,e,n,r)}e=e.child}return e;case 26:return vN(t,e),t===null?(r=MF(e.type,null,e.pendingProps,null))?e.memoizedState=r:qn||(r=e.type,t=e.pendingProps,n=BE(y0.current).createElement(r),n[Eo]=e,n[Xl]=t,Co(n,r,t),Ji(n),e.stateNode=n):e.memoizedState=MF(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return FC(e),t===null&&qn&&(n=e.stateNode=QZ(e.type,e.pendingProps,y0.current),Ao=e,hu=!0,a=es,cm(e.type)?(Ek=a,es=Nu(n.firstChild)):es=a),bo(t,e,e.pendingProps.children,r),vN(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&qn&&((a=n=es)&&(n=Zpe(n,e.type,e.pendingProps,hu),n!==null?(e.stateNode=n,Ao=e,es=Nu(n.firstChild),hu=!1,a=!0):a=!1),a||z0(e)),FC(e),a=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,n=s.children,yk(a,s)?n=null:o!==null&&yk(a,o)&&(e.flags|=32),e.memoizedState!==null&&(a=GO(t,e,fpe,null,null,r),O2._currentValue=a),vN(t,e),bo(t,e,n,r),e.child;case 6:return t===null&&qn&&((t=r=es)&&(r=Qpe(r,e.pendingProps,hu),r!==null?(e.stateNode=r,Ao=e,es=null,t=!0):t=!1),t||z0(e)),null;case 13:return iZ(t,e,r);case 4:return xE(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ip(e,null,n,r):bo(t,e,n,r),e.child;case 11:return cF(t,e,e.type,e.pendingProps,r);case 7:return bo(t,e,e.pendingProps,r),e.child;case 8:return bo(t,e,e.pendingProps.children,r),e.child;case 12:return bo(t,e,e.pendingProps.children,r),e.child;case 10:return n=e.pendingProps,n0(e,e.type,n.value),bo(t,e,n.children,r),e.child;case 9:return a=e.type._context,n=e.pendingProps.children,kp(e),a=To(a),n=n(a),e.flags|=1,bo(t,e,n,r),e.child;case 14:return uF(t,e,e.type,e.pendingProps,r);case 15:return aZ(t,e,e.type,e.pendingProps,r);case 19:return oZ(t,e,r);case 31:return ype(t,e,r);case 22:return sZ(t,e,r,e.pendingProps);case 24:return kp(e),n=To(gi),t===null?(a=zO(),a===null&&(a=za,s=UO(),a.pooledCache=s,s.refCount++,s!==null&&(a.pooledCacheLanes|=r),a=s),e.memoizedState={parent:n,cache:a},$O(e),n0(e,gi,a)):(t.lanes&r&&(ek(t,e),zb(e,null,null,r),Ub()),a=t.memoizedState,s=e.memoizedState,a.parent!==n?(a={parent:n,cache:n},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),n0(e,gi,n)):(n=s.cache,n0(e,gi,n),n!==a.cache&&QC(e,[gi],r,!0))),bo(t,e,e.pendingProps.children,r),e.child;case 29:throw e.pendingProps}throw Error(Yt(156,e.tag))}function mf(t){t.flags|=4}function hj(t,e,r,n,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if(OZ())t.flags|=8192;else throw up=AE,VO}else t.flags&=-16777217}function xF(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!tQ(e))if(OZ())t.flags|=8192;else throw up=AE,VO}function U_(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?PX():536870912,t.lanes|=e,ox|=e)}function Vv(t,e){if(!qn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Za(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&65011712,n|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function _pe(t,e,r){var n=e.pendingProps;switch(BO(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(e),null;case 1:return Za(e),null;case 3:return r=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),$f(gi),tx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ag(e)?mf(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,aj())),Za(e),null;case 26:var a=e.type,s=e.memoizedState;return t===null?(mf(e),s!==null?(Za(e),xF(e,s)):(Za(e),hj(e,a,null,n,r))):s?s!==t.memoizedState?(mf(e),Za(e),xF(e,s)):(Za(e),e.flags&=-16777217):(t=t.memoizedProps,t!==n&&mf(e),Za(e),hj(e,a,t,n,r)),null;case 27:if(vE(e),r=y0.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&mf(e);else{if(!n){if(e.stateNode===null)throw Error(Yt(166));return Za(e),null}t=Ld.current,Ag(e)?G9(e):(t=QZ(a,n,r),e.stateNode=t,mf(e))}return Za(e),null;case 5:if(vE(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&mf(e);else{if(!n){if(e.stateNode===null)throw Error(Yt(166));return Za(e),null}if(s=Ld.current,Ag(e))G9(e);else{var o=BE(y0.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof n.is=="string"?o.createElement("select",{is:n.is}):o.createElement("select"),n.multiple?s.multiple=!0:n.size&&(s.size=n.size);break;default:s=typeof n.is=="string"?o.createElement(a,{is:n.is}):o.createElement(a)}}s[Eo]=e,s[Xl]=n;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=s;e:switch(Co(s,a,n),a){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&mf(e)}}return Za(e),hj(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,r),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&mf(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Yt(166));if(t=y0.current,Ag(e)){if(t=e.stateNode,r=e.memoizedProps,n=null,a=Ao,a!==null)switch(a.tag){case 27:case 5:n=a.memoizedProps}t[Eo]=e,t=!!(t.nodeValue===r||n!==null&&n.suppressHydrationWarning===!0||KZ(t.nodeValue,r)),t||z0(e,!0)}else t=BE(t).createTextNode(n),t[Eo]=e,e.stateNode=t}return Za(e),null;case 31:if(r=e.memoizedState,t===null||t.memoizedState!==null){if(n=Ag(e),r!==null){if(t===null){if(!n)throw Error(Yt(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Yt(557));t[Eo]=e}else Cp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Za(e),t=!1}else r=aj(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return e.flags&256?(wc(e),e):(wc(e),null);if(e.flags&128)throw Error(Yt(558))}return Za(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Ag(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Yt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Yt(317));a[Eo]=e}else Cp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Za(e),a=!1}else a=aj(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(wc(e),e):(wc(e),null)}return wc(e),e.flags&128?(e.lanes=r,e):(r=n!==null,t=t!==null&&t.memoizedState!==null,r&&(n=e.child,a=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(a=n.alternate.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==a&&(n.flags|=2048)),r!==t&&r&&(e.child.flags|=8192),U_(e,e.updateQueue),Za(e),null);case 4:return tx(),t===null&&fP(e.stateNode.containerInfo),Za(e),null;case 10:return $f(e.type),Za(e),null;case 19:if(ao(ti),n=e.memoizedState,n===null)return Za(e),null;if(a=(e.flags&128)!==0,s=n.rendering,s===null)if(a)Vv(n,!1);else{if(Bs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=jE(t),s!==null){for(e.flags|=128,Vv(n,!1),t=s.updateQueue,e.updateQueue=t,U_(e,t),e.subtreeFlags=0,t=r,r=e.child;r!==null;)cY(r,t),r=r.sibling;return Ka(ti,ti.current&1|2),qn&&_f(e,n.treeForkCount),e.child}t=t.sibling}n.tail!==null&&Pc()>PE&&(e.flags|=128,a=!0,Vv(n,!1),e.lanes=4194304)}else{if(!a)if(t=jE(s),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,U_(e,t),Vv(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!qn)return Za(e),null}else 2*Pc()-n.renderingStartTime>PE&&r!==536870912&&(e.flags|=128,a=!0,Vv(n,!1),e.lanes=4194304);n.isBackwards?(s.sibling=e.child,e.child=s):(t=n.last,t!==null?t.sibling=s:e.child=s,n.last=s)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Pc(),t.sibling=null,r=ti.current,Ka(ti,a?r&1|2:r&1),qn&&_f(e,n.treeForkCount),t):(Za(e),null);case 22:case 23:return wc(e),HO(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?r&536870912&&!(e.flags&128)&&(Za(e),e.subtreeFlags&6&&(e.flags|=8192)):Za(e),r=e.updateQueue,r!==null&&U_(e,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==r&&(e.flags|=2048),t!==null&&ao(cp),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),$f(gi),Za(e),null;case 25:return null;case 30:return null}throw Error(Yt(156,e.tag))}function Npe(t,e){switch(BO(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $f(gi),tx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return vE(e),null;case 31:if(e.memoizedState!==null){if(wc(e),e.alternate===null)throw Error(Yt(340));Cp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(wc(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Yt(340));Cp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ao(ti),null;case 4:return tx(),null;case 10:return $f(e.type),null;case 22:case 23:return wc(e),HO(),t!==null&&ao(cp),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return $f(gi),null;case 25:return null;default:return null}}function cZ(t,e){switch(BO(e),e.tag){case 3:$f(gi),tx();break;case 26:case 27:case 5:vE(e);break;case 4:tx();break;case 31:e.memoizedState!==null&&wc(e);break;case 13:wc(e);break;case 19:ao(ti);break;case 10:$f(e.type);break;case 22:case 23:wc(e),HO(),t!==null&&ao(cp);break;case 24:$f(gi)}}function Gy(t,e){try{var r=e.updateQueue,n=r!==null?r.lastEffect:null;if(n!==null){var a=n.next;r=a;do{if((r.tag&t)===t){n=void 0;var s=r.create,o=r.inst;n=s(),o.destroy=n}r=r.next}while(r!==a)}}catch(l){Aa(e,e.return,l)}}function V0(t,e,r){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var s=a.next;n=s;do{if((n.tag&t)===t){var o=n.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,a=e;var c=r,u=l;try{u()}catch(d){Aa(a,c,d)}}}n=n.next}while(n!==s)}}catch(d){Aa(e,e.return,d)}}function uZ(t){var e=t.updateQueue;if(e!==null){var r=t.stateNode;try{bY(e,r)}catch(n){Aa(t,t.return,n)}}}function dZ(t,e,r){r.props=Pp(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(n){Aa(t,e,n)}}function $b(t,e){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof r=="function"?t.refCleanup=r(n):r.current=n}}catch(a){Aa(t,e,a)}}function Cd(t,e){var r=t.ref,n=t.refCleanup;if(r!==null)if(typeof n=="function")try{n()}catch(a){Aa(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(a){Aa(t,e,a)}else r.current=null}function fZ(t){var e=t.type,r=t.memoizedProps,n=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){Aa(t,t.return,a)}}function mj(t,e,r){try{var n=t.stateNode;qpe(n,t.type,r,e),n[Xl]=e}catch(a){Aa(t,t.return,a)}}function hZ(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&cm(t.type)||t.tag===4}function pj(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&cm(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dk(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,e):(e=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,e.appendChild(t),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Rf));else if(n!==4&&(n===27&&cm(t.type)&&(r=t.stateNode,e=null),t=t.child,t!==null))for(dk(t,e,r),t=t.sibling;t!==null;)dk(t,e,r),t=t.sibling}function OE(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(n===27&&cm(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(OE(t,e,r),t=t.sibling;t!==null;)OE(t,e,r),t=t.sibling}function mZ(t){var e=t.stateNode,r=t.memoizedProps;try{for(var n=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);Co(e,n,r),e[Eo]=t,e[Xl]=r}catch(s){Aa(t,t.return,s)}}var Af=!1,pi=!1,gj=!1,vF=typeof WeakSet=="function"?WeakSet:Set,Zi=null;function Epe(t,e){if(t=t.containerInfo,vk=$E,t=tY(t),RO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==s||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===r&&++u===a&&(l=o),p===s&&++d===n&&(c=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(bk={focusedElem:t,selectionRange:r},$E=!1,Zi=e;Zi!==null;)if(e=Zi,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Zi=t;else for(;Zi!==null;){switch(e=Zi,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)a=t[r],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,r=e,a=s.memoizedProps,s=s.memoizedState,n=r.stateNode;try{var b=Pp(r.type,a);t=n.getSnapshotBeforeUpdate(b,s),n.__reactInternalSnapshotBeforeUpdate=t}catch(w){Aa(r,r.return,w)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,r=t.nodeType,r===9)wk(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":wk(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(Yt(163))}if(t=e.sibling,t!==null){t.return=e.return,Zi=t;break}Zi=e.return}}function pZ(t,e,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:gf(t,r),n&4&&Gy(5,r);break;case 1:if(gf(t,r),n&4)if(t=r.stateNode,e===null)try{t.componentDidMount()}catch(o){Aa(r,r.return,o)}else{var a=Pp(r.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){Aa(r,r.return,o)}}n&64&&uZ(r),n&512&&$b(r,r.return);break;case 3:if(gf(t,r),n&64&&(t=r.updateQueue,t!==null)){if(e=null,r.child!==null)switch(r.child.tag){case 27:case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}try{bY(t,e)}catch(o){Aa(r,r.return,o)}}break;case 27:e===null&&n&4&&mZ(r);case 26:case 5:gf(t,r),e===null&&n&4&&fZ(r),n&512&&$b(r,r.return);break;case 12:gf(t,r);break;case 31:gf(t,r),n&4&&vZ(t,r);break;case 13:gf(t,r),n&4&&bZ(t,r),n&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Ppe.bind(null,r),Jpe(t,r))));break;case 22:if(n=r.memoizedState!==null||Af,!n){e=e!==null&&e.memoizedState!==null||pi,a=Af;var s=pi;Af=n,(pi=e)&&!s?yf(t,r,(r.subtreeFlags&8772)!==0):gf(t,r),Af=a,pi=s}break;case 30:break;default:gf(t,r)}}function gZ(t){var e=t.alternate;e!==null&&(t.alternate=null,gZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&TO(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var us=null,Rl=!1;function pf(t,e,r){for(r=r.child;r!==null;)xZ(t,e,r),r=r.sibling}function xZ(t,e,r){if(Rc&&typeof Rc.onCommitFiberUnmount=="function")try{Rc.onCommitFiberUnmount(By,r)}catch{}switch(r.tag){case 26:pi||Cd(r,e),pf(t,e,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:pi||Cd(r,e);var n=us,a=Rl;cm(r.type)&&(us=r.stateNode,Rl=!1),pf(t,e,r),Wb(r.stateNode),us=n,Rl=a;break;case 5:pi||Cd(r,e);case 6:if(n=us,a=Rl,us=null,pf(t,e,r),us=n,Rl=a,us!==null)if(Rl)try{(us.nodeType===9?us.body:us.nodeName==="HTML"?us.ownerDocument.body:us).removeChild(r.stateNode)}catch(s){Aa(r,e,s)}else try{us.removeChild(r.stateNode)}catch(s){Aa(r,e,s)}break;case 18:us!==null&&(Rl?(t=us,IF(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),dx(t)):IF(us,r.stateNode));break;case 4:n=us,a=Rl,us=r.stateNode.containerInfo,Rl=!0,pf(t,e,r),us=n,Rl=a;break;case 0:case 11:case 14:case 15:V0(2,r,e),pi||V0(4,r,e),pf(t,e,r);break;case 1:pi||(Cd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"&&dZ(r,e,n)),pf(t,e,r);break;case 21:pf(t,e,r);break;case 22:pi=(n=pi)||r.memoizedState!==null,pf(t,e,r),pi=n;break;default:pf(t,e,r)}}function vZ(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{dx(t)}catch(r){Aa(e,e.return,r)}}}function bZ(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{dx(t)}catch(r){Aa(e,e.return,r)}}function Ape(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new vF),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new vF),e;default:throw Error(Yt(435,t.tag))}}function z_(t,e){var r=Ape(t);e.forEach(function(n){if(!r.has(n)){r.add(n);var a=Rpe.bind(null,t,n);n.then(a,a)}})}function Ol(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n],s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(cm(l.type)){us=l.stateNode,Rl=!1;break e}break;case 5:us=l.stateNode,Rl=!1;break e;case 3:case 4:us=l.stateNode.containerInfo,Rl=!0;break e}l=l.return}if(us===null)throw Error(Yt(160));xZ(s,o,a),us=null,Rl=!1,s=a.alternate,s!==null&&(s.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)yZ(e,t),e=e.sibling}var Xu=null;function yZ(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ol(e,t),Pl(t),n&4&&(V0(3,t,t.return),Gy(3,t),V0(5,t,t.return));break;case 1:Ol(e,t),Pl(t),n&512&&(pi||r===null||Cd(r,r.return)),n&64&&Af&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?n:r.concat(n))));break;case 26:var a=Xu;if(Ol(e,t),Pl(t),n&512&&(pi||r===null||Cd(r,r.return)),n&4){var s=r!==null?r.memoizedState:null;if(n=t.memoizedState,r===null)if(n===null)if(t.stateNode===null){e:{n=t.type,r=t.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":s=a.getElementsByTagName("title")[0],(!s||s[Vy]||s[Eo]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=a.createElement(n),a.head.insertBefore(s,a.querySelector("head > title"))),Co(s,n,r),s[Eo]=t,Ji(s),n=s;break e;case"link":var o=FF("link","href",a).get(n+(r.href||""));if(o){for(var l=0;l<o.length;l++)if(s=o[l],s.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&s.getAttribute("rel")===(r.rel==null?null:r.rel)&&s.getAttribute("title")===(r.title==null?null:r.title)&&s.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){o.splice(l,1);break t}}s=a.createElement(n),Co(s,n,r),a.head.appendChild(s);break;case"meta":if(o=FF("meta","content",a).get(n+(r.content||""))){for(l=0;l<o.length;l++)if(s=o[l],s.getAttribute("content")===(r.content==null?null:""+r.content)&&s.getAttribute("name")===(r.name==null?null:r.name)&&s.getAttribute("property")===(r.property==null?null:r.property)&&s.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&s.getAttribute("charset")===(r.charSet==null?null:r.charSet)){o.splice(l,1);break t}}s=a.createElement(n),Co(s,n,r),a.head.appendChild(s);break;default:throw Error(Yt(468,n))}s[Eo]=t,Ji(s),n=s}t.stateNode=n}else BF(a,t.type,t.stateNode);else t.stateNode=LF(a,n,t.memoizedProps);else s!==n?(s===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):s.count--,n===null?BF(a,t.type,t.stateNode):LF(a,n,t.memoizedProps)):n===null&&t.stateNode!==null&&mj(t,t.memoizedProps,r.memoizedProps)}break;case 27:Ol(e,t),Pl(t),n&512&&(pi||r===null||Cd(r,r.return)),r!==null&&n&4&&mj(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Ol(e,t),Pl(t),n&512&&(pi||r===null||Cd(r,r.return)),t.flags&32){a=t.stateNode;try{nx(a,"")}catch(b){Aa(t,t.return,b)}}n&4&&t.stateNode!=null&&(a=t.memoizedProps,mj(t,a,r!==null?r.memoizedProps:a)),n&1024&&(gj=!0);break;case 6:if(Ol(e,t),Pl(t),n&4){if(t.stateNode===null)throw Error(Yt(162));n=t.memoizedProps,r=t.stateNode;try{r.nodeValue=n}catch(b){Aa(t,t.return,b)}}break;case 3:if(wN=null,a=Xu,Xu=UE(e.containerInfo),Ol(e,t),Xu=a,Pl(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{dx(e.containerInfo)}catch(b){Aa(t,t.return,b)}gj&&(gj=!1,wZ(t));break;case 4:n=Xu,Xu=UE(t.stateNode.containerInfo),Ol(e,t),Pl(t),Xu=n;break;case 12:Ol(e,t),Pl(t);break;case 31:Ol(e,t),Pl(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,z_(t,n)));break;case 13:Ol(e,t),Pl(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(aA=Pc()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,z_(t,n)));break;case 22:a=t.memoizedState!==null;var c=r!==null&&r.memoizedState!==null,u=Af,d=pi;if(Af=u||a,pi=d||c,Ol(e,t),pi=d,Af=u,Pl(t),n&8192)e:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(r===null||c||Af||pi||Lm(t)),r=null,e=t;;){if(e.tag===5||e.tag===26){if(r===null){c=r=e;try{if(s=c.stateNode,a)o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(b){Aa(c,c.return,b)}}}else if(e.tag===6){if(r===null){c=e;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(b){Aa(c,c.return,b)}}}else if(e.tag===18){if(r===null){c=e;try{var g=c.stateNode;a?OF(g,!0):OF(c.stateNode,!1)}catch(b){Aa(c,c.return,b)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(r=n.retryQueue,r!==null&&(n.retryQueue=null,z_(t,r))));break;case 19:Ol(e,t),Pl(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,z_(t,n)));break;case 30:break;case 21:break;default:Ol(e,t),Pl(t)}}function Pl(t){var e=t.flags;if(e&2){try{for(var r,n=t.return;n!==null;){if(hZ(n)){r=n;break}n=n.return}if(r==null)throw Error(Yt(160));switch(r.tag){case 27:var a=r.stateNode,s=pj(t);OE(t,s,a);break;case 5:var o=r.stateNode;r.flags&32&&(nx(o,""),r.flags&=-33);var l=pj(t);OE(t,l,o);break;case 3:case 4:var c=r.stateNode.containerInfo,u=pj(t);dk(t,u,c);break;default:throw Error(Yt(161))}}catch(d){Aa(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wZ(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;wZ(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function gf(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)pZ(t,e.alternate,e),e=e.sibling}function Lm(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:V0(4,e,e.return),Lm(e);break;case 1:Cd(e,e.return);var r=e.stateNode;typeof r.componentWillUnmount=="function"&&dZ(e,e.return,r),Lm(e);break;case 27:Wb(e.stateNode);case 26:case 5:Cd(e,e.return),Lm(e);break;case 22:e.memoizedState===null&&Lm(e);break;case 30:Lm(e);break;default:Lm(e)}t=t.sibling}}function yf(t,e,r){for(r=r&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,a=t,s=e,o=s.flags;switch(s.tag){case 0:case 11:case 15:yf(a,s,r),Gy(4,s);break;case 1:if(yf(a,s,r),n=s,a=n.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(u){Aa(n,n.return,u)}if(n=s,a=n.updateQueue,a!==null){var l=n.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)vY(c[a],l)}catch(u){Aa(n,n.return,u)}}r&&o&64&&uZ(s),$b(s,s.return);break;case 27:mZ(s);case 26:case 5:yf(a,s,r),r&&n===null&&o&4&&fZ(s),$b(s,s.return);break;case 12:yf(a,s,r);break;case 31:yf(a,s,r),r&&o&4&&vZ(a,s);break;case 13:yf(a,s,r),r&&o&4&&bZ(a,s);break;case 22:s.memoizedState===null&&yf(a,s,r),$b(s,s.return);break;case 30:break;default:yf(a,s,r)}e=e.sibling}}function iP(t,e){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Hy(r))}function oP(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Hy(t))}function $u(t,e,r,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)_Z(t,e,r,n),e=e.sibling}function _Z(t,e,r,n){var a=e.flags;switch(e.tag){case 0:case 11:case 15:$u(t,e,r,n),a&2048&&Gy(9,e);break;case 1:$u(t,e,r,n);break;case 3:$u(t,e,r,n),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Hy(t)));break;case 12:if(a&2048){$u(t,e,r,n),t=e.stateNode;try{var s=e.memoizedProps,o=s.id,l=s.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){Aa(e,e.return,c)}}else $u(t,e,r,n);break;case 31:$u(t,e,r,n);break;case 13:$u(t,e,r,n);break;case 23:break;case 22:s=e.stateNode,o=e.alternate,e.memoizedState!==null?s._visibility&2?$u(t,e,r,n):Hb(t,e):s._visibility&2?$u(t,e,r,n):(s._visibility|=2,Wg(t,e,r,n,(e.subtreeFlags&10256)!==0||!1)),a&2048&&iP(o,e);break;case 24:$u(t,e,r,n),a&2048&&oP(e.alternate,e);break;default:$u(t,e,r,n)}}function Wg(t,e,r,n,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,o=e,l=r,c=n,u=o.flags;switch(o.tag){case 0:case 11:case 15:Wg(s,o,l,c,a),Gy(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?Wg(s,o,l,c,a):Hb(s,o):(d._visibility|=2,Wg(s,o,l,c,a)),a&&u&2048&&iP(o.alternate,o);break;case 24:Wg(s,o,l,c,a),a&&u&2048&&oP(o.alternate,o);break;default:Wg(s,o,l,c,a)}e=e.sibling}}function Hb(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var r=t,n=e,a=n.flags;switch(n.tag){case 22:Hb(r,n),a&2048&&iP(n.alternate,n);break;case 24:Hb(r,n),a&2048&&oP(n.alternate,n);break;default:Hb(r,n)}e=e.sibling}}var wb=8192;function Sg(t,e,r){if(t.subtreeFlags&wb)for(t=t.child;t!==null;)NZ(t,e,r),t=t.sibling}function NZ(t,e,r){switch(t.tag){case 26:Sg(t,e,r),t.flags&wb&&t.memoizedState!==null&&dge(r,Xu,t.memoizedState,t.memoizedProps);break;case 5:Sg(t,e,r);break;case 3:case 4:var n=Xu;Xu=UE(t.stateNode.containerInfo),Sg(t,e,r),Xu=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=wb,wb=16777216,Sg(t,e,r),wb=n):Sg(t,e,r));break;default:Sg(t,e,r)}}function EZ(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function $v(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];Zi=n,SZ(n,t)}EZ(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)AZ(t),t=t.sibling}function AZ(t){switch(t.tag){case 0:case 11:case 15:$v(t),t.flags&2048&&V0(9,t,t.return);break;case 3:$v(t);break;case 12:$v(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,bN(t)):$v(t);break;default:$v(t)}}function bN(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];Zi=n,SZ(n,t)}EZ(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:V0(8,e,e.return),bN(e);break;case 22:r=e.stateNode,r._visibility&2&&(r._visibility&=-3,bN(e));break;default:bN(e)}t=t.sibling}}function SZ(t,e){for(;Zi!==null;){var r=Zi;switch(r.tag){case 0:case 11:case 15:V0(8,r,e);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var n=r.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Hy(r.memoizedState.cache)}if(n=r.child,n!==null)n.return=r,Zi=n;else e:for(r=t;Zi!==null;){n=Zi;var a=n.sibling,s=n.return;if(gZ(n),n===r){Zi=null;break e}if(a!==null){a.return=s,Zi=a;break e}Zi=s}}}var Spe={getCacheForType:function(t){var e=To(gi),r=e.data.get(t);return r===void 0&&(r=t(),e.data.set(t,r)),r},cacheSignal:function(){return To(gi).controller.signal}},jpe=typeof WeakMap=="function"?WeakMap:Map,ua=0,za=null,Bn=null,zn=0,wa=0,xc=null,f0=!1,Jx=!1,lP=!1,sh=0,Bs=0,$0=0,dp=0,cP=0,jc=0,ox=0,qb=null,Dl=null,fk=!1,aA=0,jZ=0,PE=1/0,RE=null,E0=null,Ri=0,A0=null,lx=null,Hf=0,hk=0,mk=null,TZ=null,Gb=0,pk=null;function Mc(){return ua&2&&zn!==0?zn&-zn:fn.T!==null?dP():LX()}function CZ(){if(jc===0)if(!(zn&536870912)||qn){var t=P_;P_<<=1,!(P_&3932160)&&(P_=262144),jc=t}else jc=536870912;return t=Bc.current,t!==null&&(t.flags|=32),jc}function $l(t,e,r){(t===za&&(wa===2||wa===9)||t.cancelPendingCommit!==null)&&(cx(t,0),h0(t,zn,jc,!1)),zy(t,r),(!(ua&2)||t!==za)&&(t===za&&(!(ua&2)&&(dp|=r),Bs===4&&h0(t,zn,jc,!1)),tf(t))}function kZ(t,e,r){if(ua&6)throw Error(Yt(327));var n=!r&&(e&127)===0&&(e&t.expiredLanes)===0||Uy(t,e),a=n?kpe(t,e):xj(t,e,!0),s=n;do{if(a===0){Jx&&!n&&h0(t,e,0,!1);break}else{if(r=t.current.alternate,s&&!Tpe(r)){a=xj(t,e,!1),s=!1;continue}if(a===2){if(s=e,t.errorRecoveryDisabledLanes&s)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;a=qb;var c=l.current.memoizedState.isDehydrated;if(c&&(cx(l,o).flags|=256),o=xj(l,o,!1),o!==2){if(lP&&!c){l.errorRecoveryDisabledLanes|=s,dp|=s,a=4;break e}s=Dl,Dl=a,s!==null&&(Dl===null?Dl=s:Dl.push.apply(Dl,s))}a=o}if(s=!1,a!==2)continue}}if(a===1){cx(t,0),h0(t,e,0,!0);break}e:{switch(n=t,s=a,s){case 0:case 1:throw Error(Yt(345));case 4:if((e&4194048)!==e)break;case 6:h0(n,e,jc,!f0);break e;case 2:Dl=null;break;case 3:case 5:break;default:throw Error(Yt(329))}if((e&62914560)===e&&(a=aA+300-Pc(),10<a)){if(h0(n,e,jc,!f0),W4(n,0,!0)!==0)break e;Hf=e,n.timeoutHandle=YZ(bF.bind(null,n,r,Dl,RE,fk,e,jc,dp,ox,f0,s,"Throttled",-0,0),a);break e}bF(n,r,Dl,RE,fk,e,jc,dp,ox,f0,s,null,-0,0)}}break}while(!0);tf(t)}function bF(t,e,r,n,a,s,o,l,c,u,d,h,p,g){if(t.timeoutHandle=-1,h=e.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rf},NZ(e,s,h);var b=(s&62914560)===s?aA-Pc():(s&4194048)===s?jZ-Pc():0;if(b=fge(h,b),b!==null){Hf=s,t.cancelPendingCommit=b(wF.bind(null,t,e,s,r,n,a,o,l,c,d,h,null,p,g)),h0(t,s,o,!u);return}}wF(t,e,s,r,n,a,o,l,c)}function Tpe(t){for(var e=t;;){var r=e.tag;if((r===0||r===11||r===15)&&e.flags&16384&&(r=e.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Fc(s(),a))return!1}catch{return!1}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function h0(t,e,r,n){e&=~cP,e&=~dp,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var a=e;0<a;){var s=31-Dc(a),o=1<<s;n[s]=-1,a&=~o}r!==0&&RX(t,r,e)}function sA(){return ua&6?!0:(Wy(0),!1)}function uP(){if(Bn!==null){if(wa===0)var t=Bn.return;else t=Bn,Df=ig=null,XO(t),P1=null,j2=0,t=Bn;for(;t!==null;)cZ(t.alternate,t),t=t.return;Bn=null}}function cx(t,e){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Kpe(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Hf=0,uP(),za=t,Bn=r=Vf(t.current,null),zn=e,wa=0,xc=null,f0=!1,Jx=Uy(t,e),lP=!1,ox=jc=cP=dp=$0=Bs=0,Dl=qb=null,fk=!1,e&8&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var a=31-Dc(n),s=1<<a;e|=t[a],n&=~s}return sh=e,Z4(),r}function IZ(t,e){Nn=null,fn.H=C2,e===Qx||e===J4?(e=Z9(),wa=3):e===VO?(e=Z9(),wa=4):wa=e===aP?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,xc=e,Bn===null&&(Bs=1,kE(t,fu(e,t.current)))}function OZ(){var t=Bc.current;return t===null?!0:(zn&4194048)===zn?_u===null:(zn&62914560)===zn||zn&536870912?t===_u:!1}function PZ(){var t=fn.H;return fn.H=C2,t===null?C2:t}function RZ(){var t=fn.A;return fn.A=Spe,t}function DE(){Bs=4,f0||(zn&4194048)!==zn&&Bc.current!==null||(Jx=!0),!($0&134217727)&&!(dp&134217727)||za===null||h0(za,zn,jc,!1)}function xj(t,e,r){var n=ua;ua|=2;var a=PZ(),s=RZ();(za!==t||zn!==e)&&(RE=null,cx(t,e)),e=!1;var o=Bs;e:do try{if(wa!==0&&Bn!==null){var l=Bn,c=xc;switch(wa){case 8:uP(),o=6;break e;case 3:case 2:case 9:case 6:Bc.current===null&&(e=!0);var u=wa;if(wa=0,xc=null,x1(t,l,c,u),r&&Jx){o=0;break e}break;default:u=wa,wa=0,xc=null,x1(t,l,c,u)}}Cpe(),o=Bs;break}catch(d){IZ(t,d)}while(!0);return e&&t.shellSuspendCounter++,Df=ig=null,ua=n,fn.H=a,fn.A=s,Bn===null&&(za=null,zn=0,Z4()),o}function Cpe(){for(;Bn!==null;)DZ(Bn)}function kpe(t,e){var r=ua;ua|=2;var n=PZ(),a=RZ();za!==t||zn!==e?(RE=null,PE=Pc()+500,cx(t,e)):Jx=Uy(t,e);e:do try{if(wa!==0&&Bn!==null){e=Bn;var s=xc;t:switch(wa){case 1:wa=0,xc=null,x1(t,e,s,1);break;case 2:case 9:if(Y9(s)){wa=0,xc=null,yF(e);break}e=function(){wa!==2&&wa!==9||za!==t||(wa=7),tf(t)},s.then(e,e);break e;case 3:wa=7;break e;case 4:wa=5;break e;case 7:Y9(s)?(wa=0,xc=null,yF(e)):(wa=0,xc=null,x1(t,e,s,7));break;case 5:var o=null;switch(Bn.tag){case 26:o=Bn.memoizedState;case 5:case 27:var l=Bn;if(o?tQ(o):l.stateNode.complete){wa=0,xc=null;var c=l.sibling;if(c!==null)Bn=c;else{var u=l.return;u!==null?(Bn=u,iA(u)):Bn=null}break t}}wa=0,xc=null,x1(t,e,s,5);break;case 6:wa=0,xc=null,x1(t,e,s,6);break;case 8:uP(),Bs=6;break e;default:throw Error(Yt(462))}}Ipe();break}catch(d){IZ(t,d)}while(!0);return Df=ig=null,fn.H=n,fn.A=a,ua=r,Bn!==null?0:(za=null,zn=0,Z4(),Bs)}function Ipe(){for(;Bn!==null&&!eme();)DZ(Bn)}function DZ(t){var e=lZ(t.alternate,t,sh);t.memoizedProps=t.pendingProps,e===null?iA(t):Bn=e}function yF(t){var e=t,r=e.alternate;switch(e.tag){case 15:case 0:e=hF(r,e,e.pendingProps,e.type,void 0,zn);break;case 11:e=hF(r,e,e.pendingProps,e.type.render,e.ref,zn);break;case 5:XO(e);default:cZ(r,e),e=Bn=cY(e,sh),e=lZ(r,e,sh)}t.memoizedProps=t.pendingProps,e===null?iA(t):Bn=e}function x1(t,e,r,n){Df=ig=null,XO(e),P1=null,j2=0;var a=e.return;try{if(bpe(t,a,e,r,zn)){Bs=1,kE(t,fu(r,t.current)),Bn=null;return}}catch(s){if(a!==null)throw Bn=a,s;Bs=1,kE(t,fu(r,t.current)),Bn=null;return}e.flags&32768?(qn||n===1?t=!0:Jx||zn&536870912?t=!1:(f0=t=!0,(n===2||n===9||n===3||n===6)&&(n=Bc.current,n!==null&&n.tag===13&&(n.flags|=16384))),MZ(e,t)):iA(e)}function iA(t){var e=t;do{if(e.flags&32768){MZ(e,f0);return}t=e.return;var r=_pe(e.alternate,e,sh);if(r!==null){Bn=r;return}if(e=e.sibling,e!==null){Bn=e;return}Bn=e=t}while(e!==null);Bs===0&&(Bs=5)}function MZ(t,e){do{var r=Npe(t.alternate,t);if(r!==null){r.flags&=32767,Bn=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!e&&(t=t.sibling,t!==null)){Bn=t;return}Bn=t=r}while(t!==null);Bs=6,Bn=null}function wF(t,e,r,n,a,s,o,l,c){t.cancelPendingCommit=null;do oA();while(Ri!==0);if(ua&6)throw Error(Yt(327));if(e!==null){if(e===t.current)throw Error(Yt(177));if(s=e.lanes|e.childLanes,s|=DO,ume(t,r,s,o,l,c),t===za&&(Bn=za=null,zn=0),lx=e,A0=t,Hf=r,hk=s,mk=a,TZ=n,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Dpe(bE,function(){return zZ(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=fn.T,fn.T=null,a=da.p,da.p=2,o=ua,ua|=4;try{Epe(t,e,r)}finally{ua=o,da.p=a,fn.T=n}}Ri=1,LZ(),FZ(),BZ()}}function LZ(){if(Ri===1){Ri=0;var t=A0,e=lx,r=(e.flags&13878)!==0;if(e.subtreeFlags&13878||r){r=fn.T,fn.T=null;var n=da.p;da.p=2;var a=ua;ua|=4;try{yZ(e,t);var s=bk,o=tY(t.containerInfo),l=s.focusedElem,c=s.selectionRange;if(o!==l&&l&&l.ownerDocument&&eY(l.ownerDocument.documentElement,l)){if(c!==null&&RO(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var h=l.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var g=p.getSelection(),b=l.textContent.length,w=Math.min(c.start,b),_=c.end===void 0?w:Math.min(c.end,b);!g.extend&&w>_&&(o=_,_=w,w=o);var N=$9(l,w),A=$9(l,_);if(N&&A&&(g.rangeCount!==1||g.anchorNode!==N.node||g.anchorOffset!==N.offset||g.focusNode!==A.node||g.focusOffset!==A.offset)){var j=h.createRange();j.setStart(N.node,N.offset),g.removeAllRanges(),w>_?(g.addRange(j),g.extend(A.node,A.offset)):(j.setEnd(A.node,A.offset),g.addRange(j))}}}}for(h=[],g=l;g=g.parentNode;)g.nodeType===1&&h.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var P=h[l];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}$E=!!vk,bk=vk=null}finally{ua=a,da.p=n,fn.T=r}}t.current=e,Ri=2}}function FZ(){if(Ri===2){Ri=0;var t=A0,e=lx,r=(e.flags&8772)!==0;if(e.subtreeFlags&8772||r){r=fn.T,fn.T=null;var n=da.p;da.p=2;var a=ua;ua|=4;try{pZ(t,e.alternate,e)}finally{ua=a,da.p=n,fn.T=r}}Ri=3}}function BZ(){if(Ri===4||Ri===3){Ri=0,tme();var t=A0,e=lx,r=Hf,n=TZ;e.subtreeFlags&10256||e.flags&10256?Ri=5:(Ri=0,lx=A0=null,UZ(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(E0=null),jO(r),e=e.stateNode,Rc&&typeof Rc.onCommitFiberRoot=="function")try{Rc.onCommitFiberRoot(By,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=fn.T,a=da.p,da.p=2,fn.T=null;try{for(var s=t.onRecoverableError,o=0;o<n.length;o++){var l=n[o];s(l.value,{componentStack:l.stack})}}finally{fn.T=e,da.p=a}}Hf&3&&oA(),tf(t),a=t.pendingLanes,r&261930&&a&42?t===pk?Gb++:(Gb=0,pk=t):Gb=0,Wy(0)}}function UZ(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Hy(e)))}function oA(){return LZ(),FZ(),BZ(),zZ()}function zZ(){if(Ri!==5)return!1;var t=A0,e=hk;hk=0;var r=jO(Hf),n=fn.T,a=da.p;try{da.p=32>r?32:r,fn.T=null,r=mk,mk=null;var s=A0,o=Hf;if(Ri=0,lx=A0=null,Hf=0,ua&6)throw Error(Yt(331));var l=ua;if(ua|=4,AZ(s.current),_Z(s,s.current,o,r),ua=l,Wy(0,!1),Rc&&typeof Rc.onPostCommitFiberRoot=="function")try{Rc.onPostCommitFiberRoot(By,s)}catch{}return!0}finally{da.p=a,fn.T=n,UZ(t,e)}}function _F(t,e,r){e=fu(r,e),e=lk(t.stateNode,e,2),t=N0(t,e,2),t!==null&&(zy(t,2),tf(t))}function Aa(t,e,r){if(t.tag===3)_F(t,t,r);else for(;e!==null;){if(e.tag===3){_F(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(E0===null||!E0.has(n))){t=fu(r,t),r=rZ(2),n=N0(e,r,2),n!==null&&(nZ(r,n,e,t),zy(n,2),tf(n));break}}e=e.return}}function vj(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new jpe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(lP=!0,a.add(r),t=Ope.bind(null,t,e,r),e.then(t,t))}function Ope(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,za===t&&(zn&r)===r&&(Bs===4||Bs===3&&(zn&62914560)===zn&&300>Pc()-aA?!(ua&2)&&cx(t,0):cP|=r,ox===zn&&(ox=0)),tf(t)}function VZ(t,e){e===0&&(e=PX()),t=sg(t,e),t!==null&&(zy(t,e),tf(t))}function Ppe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),VZ(t,r)}function Rpe(t,e){var r=0;switch(t.tag){case 31:case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(Yt(314))}n!==null&&n.delete(e),VZ(t,r)}function Dpe(t,e){return AO(t,e)}var ME=null,Kg=null,gk=!1,LE=!1,bj=!1,m0=0;function tf(t){t!==Kg&&t.next===null&&(Kg===null?ME=Kg=t:Kg=Kg.next=t),LE=!0,gk||(gk=!0,Lpe())}function Wy(t,e){if(!bj&&LE){bj=!0;do for(var r=!1,n=ME;n!==null;){if(t!==0){var a=n.pendingLanes;if(a===0)var s=0;else{var o=n.suspendedLanes,l=n.pingedLanes;s=(1<<31-Dc(42|t)+1)-1,s&=a&~(o&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(r=!0,NF(n,s))}else s=zn,s=W4(n,n===za?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(s&3)||Uy(n,s)||(r=!0,NF(n,s));n=n.next}while(r);bj=!1}}function Mpe(){$Z()}function $Z(){LE=gk=!1;var t=0;m0!==0&&Wpe()&&(t=m0);for(var e=Pc(),r=null,n=ME;n!==null;){var a=n.next,s=HZ(n,e);s===0?(n.next=null,r===null?ME=a:r.next=a,a===null&&(Kg=r)):(r=n,(t!==0||s&3)&&(LE=!0)),n=a}Ri!==0&&Ri!==5||Wy(t),m0!==0&&(m0=0)}function HZ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var o=31-Dc(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=cme(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}if(e=za,r=zn,r=W4(t,t===e?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,r===0||t===e&&(wa===2||wa===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&W6(n),t.callbackNode=null,t.callbackPriority=0;if(!(r&3)||Uy(t,r)){if(e=r&-r,e===t.callbackPriority)return e;switch(n!==null&&W6(n),jO(r)){case 2:case 8:r=IX;break;case 32:r=bE;break;case 268435456:r=OX;break;default:r=bE}return n=qZ.bind(null,t),r=AO(r,n),t.callbackPriority=e,t.callbackNode=r,e}return n!==null&&n!==null&&W6(n),t.callbackPriority=2,t.callbackNode=null,2}function qZ(t,e){if(Ri!==0&&Ri!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(oA()&&t.callbackNode!==r)return null;var n=zn;return n=W4(t,t===za?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(kZ(t,n,e),HZ(t,Pc()),t.callbackNode!=null&&t.callbackNode===r?qZ.bind(null,t):null)}function NF(t,e){if(oA())return null;kZ(t,e,!0)}function Lpe(){Xpe(function(){ua&6?AO(kX,Mpe):$Z()})}function dP(){if(m0===0){var t=ax;t===0&&(t=O_,O_<<=1,!(O_&261888)&&(O_=256)),m0=t}return m0}function EF(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:uN(""+t)}function AF(t,e){var r=e.ownerDocument.createElement("input");return r.name=e.name,r.value=e.value,t.id&&r.setAttribute("form",t.id),e.parentNode.insertBefore(r,e),t=new FormData(t),r.parentNode.removeChild(r),t}function Fpe(t,e,r,n,a){if(e==="submit"&&r&&r.stateNode===a){var s=EF((a[Xl]||null).action),o=n.submitter;o&&(e=(e=o[Xl]||null)?EF(e.formAction):o.getAttribute("formAction"),e!==null&&(s=e,o=null));var l=new K4("action","action",null,n,a);t.push({event:l,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(m0!==0){var c=o?AF(a,o):new FormData(a);ik(r,{pending:!0,data:c,method:a.method,action:s},null,c)}}else typeof s=="function"&&(l.preventDefault(),c=o?AF(a,o):new FormData(a),ik(r,{pending:!0,data:c,method:a.method,action:s},s,c))},currentTarget:a}]})}}for(var yj=0;yj<KC.length;yj++){var wj=KC[yj],Bpe=wj.toLowerCase(),Upe=wj[0].toUpperCase()+wj.slice(1);hd(Bpe,"on"+Upe)}hd(nY,"onAnimationEnd");hd(aY,"onAnimationIteration");hd(sY,"onAnimationStart");hd("dblclick","onDoubleClick");hd("focusin","onFocus");hd("focusout","onBlur");hd(rpe,"onTransitionRun");hd(npe,"onTransitionStart");hd(ape,"onTransitionCancel");hd(iY,"onTransitionEnd");rx("onMouseEnter",["mouseout","mouseover"]);rx("onMouseLeave",["mouseout","mouseover"]);rx("onPointerEnter",["pointerout","pointerover"]);rx("onPointerLeave",["pointerout","pointerover"]);rg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rg("onBeforeInput",["compositionend","keypress","textInput","paste"]);rg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var k2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zpe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(k2));function GZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=u;try{s(a)}catch(d){wE(d)}a.currentTarget=null,s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=u;try{s(a)}catch(d){wE(d)}a.currentTarget=null,s=c}}}}function Fn(t,e){var r=e[UC];r===void 0&&(r=e[UC]=new Set);var n=t+"__bubble";r.has(n)||(WZ(e,t,2,!1),r.add(n))}function _j(t,e,r){var n=0;e&&(n|=4),WZ(r,t,n,e)}var V_="_reactListening"+Math.random().toString(36).slice(2);function fP(t){if(!t[V_]){t[V_]=!0,FX.forEach(function(r){r!=="selectionchange"&&(zpe.has(r)||_j(r,!1,t),_j(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[V_]||(e[V_]=!0,_j("selectionchange",!1,e))}}function WZ(t,e,r,n){switch(iQ(e)){case 2:var a=pge;break;case 8:a=gge;break;default:a=gP}r=a.bind(null,e,r,t),a=void 0,!qC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Nj(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===a)return;o=o.return}for(;l!==null;){if(o=l1(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){n=s=o;continue e}l=l.parentNode}}n=n.return}GX(function(){var u=s,d=kO(r),h=[];e:{var p=oY.get(t);if(p!==void 0){var g=K4,b=t;switch(t){case"keypress":if(fN(r)===0)break e;case"keydown":case"keyup":g=Rme;break;case"focusin":b="focus",g=Q6;break;case"focusout":b="blur",g=Q6;break;case"beforeblur":case"afterblur":g=Q6;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=P9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=_me;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Lme;break;case nY:case aY:case sY:g=Ame;break;case iY:g=Bme;break;case"scroll":case"scrollend":g=yme;break;case"wheel":g=zme;break;case"copy":case"cut":case"paste":g=jme;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=D9;break;case"toggle":case"beforetoggle":g=$me}var w=(e&4)!==0,_=!w&&(t==="scroll"||t==="scrollend"),N=w?p!==null?p+"Capture":null:p;w=[];for(var A=u,j;A!==null;){var P=A;if(j=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||j===null||N===null||(P=_2(A,N),P!=null&&w.push(I2(A,P,j))),_)break;A=A.return}0<w.length&&(p=new g(p,b,null,r,d),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==HC&&(b=r.relatedTarget||r.fromElement)&&(l1(b)||b[Xx]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(b=r.relatedTarget||r.toElement,g=u,b=b?l1(b):null,b!==null&&(_=Fy(b),w=b.tag,b!==_||w!==5&&w!==27&&w!==6)&&(b=null)):(g=null,b=u),g!==b)){if(w=P9,P="onMouseLeave",N="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(w=D9,P="onPointerLeave",N="onPointerEnter",A="pointer"),_=g==null?p:bb(g),j=b==null?p:bb(b),p=new w(P,A+"leave",g,r,d),p.target=_,p.relatedTarget=j,P=null,l1(d)===u&&(w=new w(N,A+"enter",b,r,d),w.target=j,w.relatedTarget=_,P=w),_=P,g&&b)t:{for(w=Vpe,N=g,A=b,j=0,P=N;P;P=w(P))j++;P=0;for(var U=A;U;U=w(U))P++;for(;0<j-P;)N=w(N),j--;for(;0<P-j;)A=w(A),P--;for(;j--;){if(N===A||A!==null&&N===A.alternate){w=N;break t}N=w(N),A=w(A)}w=null}else w=null;g!==null&&SF(h,p,g,w,!1),b!==null&&_!==null&&SF(h,_,b,w,!0)}}e:{if(p=u?bb(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var G=B9;else if(F9(p))if(QX)G=Jme;else{G=Zme;var O=Yme}else g=p.nodeName,!g||g.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?u&&CO(u.elementType)&&(G=B9):G=Qme;if(G&&(G=G(t,u))){ZX(h,G,r,d);break e}O&&O(t,p,u),t==="focusout"&&u&&p.type==="number"&&u.memoizedProps.value!=null&&$C(p,"number",p.value)}switch(O=u?bb(u):window,t){case"focusin":(F9(O)||O.contentEditable==="true")&&(d1=O,GC=u,Lb=null);break;case"focusout":Lb=GC=d1=null;break;case"mousedown":WC=!0;break;case"contextmenu":case"mouseup":case"dragend":WC=!1,H9(h,r,d);break;case"selectionchange":if(tpe)break;case"keydown":case"keyup":H9(h,r,d)}var D;if(PO)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else u1?XX(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(KX&&r.locale!=="ko"&&(u1||I!=="onCompositionStart"?I==="onCompositionEnd"&&u1&&(D=WX()):(d0=d,IO="value"in d0?d0.value:d0.textContent,u1=!0)),O=FE(u,I),0<O.length&&(I=new R9(I,t,null,r,d),h.push({event:I,listeners:O}),D?I.data=D:(D=YX(r),D!==null&&(I.data=D)))),(D=qme?Gme(t,r):Wme(t,r))&&(I=FE(u,"onBeforeInput"),0<I.length&&(O=new R9("onBeforeInput","beforeinput",null,r,d),h.push({event:O,listeners:I}),O.data=D)),Fpe(h,t,u,r,d)}GZ(h,e)})}function I2(t,e,r){return{instance:t,listener:e,currentTarget:r}}function FE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||s===null||(a=_2(t,r),a!=null&&n.unshift(I2(t,a,s)),a=_2(t,e),a!=null&&n.push(I2(t,a,s))),t.tag===3)return n;t=t.return}return[]}function Vpe(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function SF(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===n)break;l!==5&&l!==26&&l!==27||u===null||(c=u,a?(u=_2(r,s),u!=null&&o.unshift(I2(r,u,c))):a||(u=_2(r,s),u!=null&&o.push(I2(r,u,c)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var $pe=/\r\n?/g,Hpe=/\u0000|\uFFFD/g;function jF(t){return(typeof t=="string"?t:""+t).replace($pe,`
`).replace(Hpe,"")}function KZ(t,e){return e=jF(e),jF(t)===e}function Pa(t,e,r,n,a,s){switch(r){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||nx(t,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&nx(t,""+n);break;case"className":D_(t,"class",n);break;case"tabIndex":D_(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":D_(t,r,n);break;case"style":qX(t,n,s);break;case"data":if(e!=="object"){D_(t,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||r!=="href")){t.removeAttribute(r);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=uN(""+n),t.setAttribute(r,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(r==="formAction"?(e!=="input"&&Pa(t,e,"name",a.name,a,null),Pa(t,e,"formEncType",a.formEncType,a,null),Pa(t,e,"formMethod",a.formMethod,a,null),Pa(t,e,"formTarget",a.formTarget,a,null)):(Pa(t,e,"encType",a.encType,a,null),Pa(t,e,"method",a.method,a,null),Pa(t,e,"target",a.target,a,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=uN(""+n),t.setAttribute(r,n);break;case"onClick":n!=null&&(t.onclick=Rf);break;case"onScroll":n!=null&&Fn("scroll",t);break;case"onScrollEnd":n!=null&&Fn("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(Yt(61));if(r=n.__html,r!=null){if(a.children!=null)throw Error(Yt(60));t.innerHTML=r}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}r=uN(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""+n):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":n===!0?t.setAttribute(r,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,n):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(r,n):t.removeAttribute(r);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(r):t.setAttribute(r,n);break;case"popover":Fn("beforetoggle",t),Fn("toggle",t),cN(t,"popover",n);break;case"xlinkActuate":hf(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":hf(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":hf(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":hf(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":hf(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":hf(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":hf(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":hf(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":hf(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":cN(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=vme.get(r)||r,cN(t,r,n))}}function xk(t,e,r,n,a,s){switch(r){case"style":qX(t,n,s);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(Yt(61));if(r=n.__html,r!=null){if(a.children!=null)throw Error(Yt(60));t.innerHTML=r}}break;case"children":typeof n=="string"?nx(t,n):(typeof n=="number"||typeof n=="bigint")&&nx(t,""+n);break;case"onScroll":n!=null&&Fn("scroll",t);break;case"onScrollEnd":n!=null&&Fn("scrollend",t);break;case"onClick":n!=null&&(t.onclick=Rf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!BX.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(a=r.endsWith("Capture"),e=r.slice(2,a?r.length-7:void 0),s=t[Xl]||null,s=s!=null?s[r]:null,typeof s=="function"&&t.removeEventListener(e,s,a),typeof n=="function")){typeof s!="function"&&s!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(e,n,a);break e}r in t?t[r]=n:n===!0?t.setAttribute(r,""):cN(t,r,n)}}}function Co(t,e,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fn("error",t),Fn("load",t);var n=!1,a=!1,s;for(s in r)if(r.hasOwnProperty(s)){var o=r[s];if(o!=null)switch(s){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Yt(137,e));default:Pa(t,e,s,o,r,null)}}a&&Pa(t,e,"srcSet",r.srcSet,r,null),n&&Pa(t,e,"src",r.src,r,null);return;case"input":Fn("invalid",t);var l=s=o=a=null,c=null,u=null;for(n in r)if(r.hasOwnProperty(n)){var d=r[n];if(d!=null)switch(n){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Yt(137,e));break;default:Pa(t,e,n,d,r,null)}}VX(t,s,l,c,u,o,a,!1);return;case"select":Fn("invalid",t),n=o=s=null;for(a in r)if(r.hasOwnProperty(a)&&(l=r[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":n=l;default:Pa(t,e,a,l,r,null)}e=s,r=o,t.multiple=!!n,e!=null?k1(t,!!n,e,!1):r!=null&&k1(t,!!n,r,!0);return;case"textarea":Fn("invalid",t),s=a=n=null;for(o in r)if(r.hasOwnProperty(o)&&(l=r[o],l!=null))switch(o){case"value":n=l;break;case"defaultValue":a=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Yt(91));break;default:Pa(t,e,o,l,r,null)}HX(t,n,a,s);return;case"option":for(c in r)if(r.hasOwnProperty(c)&&(n=r[c],n!=null))switch(c){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:Pa(t,e,c,n,r,null)}return;case"dialog":Fn("beforetoggle",t),Fn("toggle",t),Fn("cancel",t),Fn("close",t);break;case"iframe":case"object":Fn("load",t);break;case"video":case"audio":for(n=0;n<k2.length;n++)Fn(k2[n],t);break;case"image":Fn("error",t),Fn("load",t);break;case"details":Fn("toggle",t);break;case"embed":case"source":case"link":Fn("error",t),Fn("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&(n=r[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(Yt(137,e));default:Pa(t,e,u,n,r,null)}return;default:if(CO(e)){for(d in r)r.hasOwnProperty(d)&&(n=r[d],n!==void 0&&xk(t,e,d,n,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(n=r[l],n!=null&&Pa(t,e,l,n,r,null))}function qpe(t,e,r,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,o=null,l=null,c=null,u=null,d=null;for(g in r){var h=r[g];if(r.hasOwnProperty(g)&&h!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(g)||Pa(t,e,g,null,n,h)}}for(var p in n){var g=n[p];if(h=r[p],n.hasOwnProperty(p)&&(g!=null||h!=null))switch(p){case"type":s=g;break;case"name":a=g;break;case"checked":u=g;break;case"defaultChecked":d=g;break;case"value":o=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(Yt(137,e));break;default:g!==h&&Pa(t,e,p,g,n,h)}}VC(t,o,l,c,u,d,s,a);return;case"select":g=o=l=p=null;for(s in r)if(c=r[s],r.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":g=c;default:n.hasOwnProperty(s)||Pa(t,e,s,null,n,c)}for(a in n)if(s=n[a],c=r[a],n.hasOwnProperty(a)&&(s!=null||c!=null))switch(a){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Pa(t,e,a,s,n,c)}e=l,r=o,n=g,p!=null?k1(t,!!r,p,!1):!!n!=!!r&&(e!=null?k1(t,!!r,e,!0):k1(t,!!r,r?[]:"",!1));return;case"textarea":g=p=null;for(l in r)if(a=r[l],r.hasOwnProperty(l)&&a!=null&&!n.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Pa(t,e,l,null,n,a)}for(o in n)if(a=n[o],s=r[o],n.hasOwnProperty(o)&&(a!=null||s!=null))switch(o){case"value":p=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(Yt(91));break;default:a!==s&&Pa(t,e,o,a,n,s)}$X(t,p,g);return;case"option":for(var b in r)if(p=r[b],r.hasOwnProperty(b)&&p!=null&&!n.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:Pa(t,e,b,null,n,p)}for(c in n)if(p=n[c],g=r[c],n.hasOwnProperty(c)&&p!==g&&(p!=null||g!=null))switch(c){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Pa(t,e,c,p,n,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w in r)p=r[w],r.hasOwnProperty(w)&&p!=null&&!n.hasOwnProperty(w)&&Pa(t,e,w,null,n,p);for(u in n)if(p=n[u],g=r[u],n.hasOwnProperty(u)&&p!==g&&(p!=null||g!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(Yt(137,e));break;default:Pa(t,e,u,p,n,g)}return;default:if(CO(e)){for(var _ in r)p=r[_],r.hasOwnProperty(_)&&p!==void 0&&!n.hasOwnProperty(_)&&xk(t,e,_,void 0,n,p);for(d in n)p=n[d],g=r[d],!n.hasOwnProperty(d)||p===g||p===void 0&&g===void 0||xk(t,e,d,p,n,g);return}}for(var N in r)p=r[N],r.hasOwnProperty(N)&&p!=null&&!n.hasOwnProperty(N)&&Pa(t,e,N,null,n,p);for(h in n)p=n[h],g=r[h],!n.hasOwnProperty(h)||p===g||p==null&&g==null||Pa(t,e,h,p,n,g)}function TF(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Gpe(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,r=performance.getEntriesByType("resource"),n=0;n<r.length;n++){var a=r[n],s=a.transferSize,o=a.initiatorType,l=a.duration;if(s&&l&&TF(o)){for(o=0,l=a.responseEnd,n+=1;n<r.length;n++){var c=r[n],u=c.startTime;if(u>l)break;var d=c.transferSize,h=c.initiatorType;d&&TF(h)&&(c=c.responseEnd,o+=d*(c<l?1:(l-u)/(c-u)))}if(--n,e+=8*(s+o)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var vk=null,bk=null;function BE(t){return t.nodeType===9?t:t.ownerDocument}function CF(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XZ(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function yk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ej=null;function Wpe(){var t=window.event;return t&&t.type==="popstate"?t===Ej?!1:(Ej=t,!0):(Ej=null,!1)}var YZ=typeof setTimeout=="function"?setTimeout:void 0,Kpe=typeof clearTimeout=="function"?clearTimeout:void 0,kF=typeof Promise=="function"?Promise:void 0,Xpe=typeof queueMicrotask=="function"?queueMicrotask:typeof kF<"u"?function(t){return kF.resolve(null).then(t).catch(Ype)}:YZ;function Ype(t){setTimeout(function(){throw t})}function cm(t){return t==="head"}function IF(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"||r==="/&"){if(n===0){t.removeChild(a),dx(e);return}n--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")n++;else if(r==="html")Wb(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Wb(r);for(var s=r.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Vy]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||r.removeChild(s),s=o}}else r==="body"&&Wb(t.ownerDocument.body);r=a}while(r);dx(e)}function OF(t,e){var r=t;t=0;do{var n=r.nextSibling;if(r.nodeType===1?e?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(e?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=n}while(r)}function wk(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var r=e;switch(e=e.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":wk(r),TO(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Zpe(t,e,r,n){for(;t.nodeType===1;){var a=r;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[Vy])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Nu(t.nextSibling),t===null)break}return null}function Qpe(t,e,r){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Nu(t.nextSibling),t===null))return null;return t}function ZZ(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Nu(t.nextSibling),t===null))return null;return t}function _k(t){return t.data==="$?"||t.data==="$~"}function Nk(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Jpe(t,e){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||r.readyState!=="loading")e();else{var n=function(){e(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function Nu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Ek=null;function PF(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(e===0)return Nu(t.nextSibling);e--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||e++}t=t.nextSibling}return null}function RF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(e===0)return t;e--}else r!=="/$"&&r!=="/&"||e++}t=t.previousSibling}return null}function QZ(t,e,r){switch(e=BE(r),t){case"html":if(t=e.documentElement,!t)throw Error(Yt(452));return t;case"head":if(t=e.head,!t)throw Error(Yt(453));return t;case"body":if(t=e.body,!t)throw Error(Yt(454));return t;default:throw Error(Yt(451))}}function Wb(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);TO(t)}var ju=new Map,DF=new Set;function UE(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Eh=da.d;da.d={f:ege,r:tge,D:rge,C:nge,L:age,m:sge,X:oge,S:ige,M:lge};function ege(){var t=Eh.f(),e=sA();return t||e}function tge(t){var e=Yx(t);e!==null&&e.tag===5&&e.type==="form"?qY(e):Eh.r(t)}var ev=typeof document>"u"?null:document;function JZ(t,e,r){var n=ev;if(n&&typeof e=="string"&&e){var a=du(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof r=="string"&&(a+='[crossorigin="'+r+'"]'),DF.has(a)||(DF.add(a),t={rel:t,crossOrigin:r,href:e},n.querySelector(a)===null&&(e=n.createElement("link"),Co(e,"link",t),Ji(e),n.head.appendChild(e)))}}function rge(t){Eh.D(t),JZ("dns-prefetch",t,null)}function nge(t,e){Eh.C(t,e),JZ("preconnect",t,e)}function age(t,e,r){Eh.L(t,e,r);var n=ev;if(n&&t&&e){var a='link[rel="preload"][as="'+du(e)+'"]';e==="image"&&r&&r.imageSrcSet?(a+='[imagesrcset="'+du(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(a+='[imagesizes="'+du(r.imageSizes)+'"]')):a+='[href="'+du(t)+'"]';var s=a;switch(e){case"style":s=ux(t);break;case"script":s=tv(t)}ju.has(s)||(t=ss({rel:"preload",href:e==="image"&&r&&r.imageSrcSet?void 0:t,as:e},r),ju.set(s,t),n.querySelector(a)!==null||e==="style"&&n.querySelector(Ky(s))||e==="script"&&n.querySelector(Xy(s))||(e=n.createElement("link"),Co(e,"link",t),Ji(e),n.head.appendChild(e)))}}function sge(t,e){Eh.m(t,e);var r=ev;if(r&&t){var n=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+du(n)+'"][href="'+du(t)+'"]',s=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=tv(t)}if(!ju.has(s)&&(t=ss({rel:"modulepreload",href:t},e),ju.set(s,t),r.querySelector(a)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Xy(s)))return}n=r.createElement("link"),Co(n,"link",t),Ji(n),r.head.appendChild(n)}}}function ige(t,e,r){Eh.S(t,e,r);var n=ev;if(n&&t){var a=C1(n).hoistableStyles,s=ux(t);e=e||"default";var o=a.get(s);if(!o){var l={loading:0,preload:null};if(o=n.querySelector(Ky(s)))l.loading=5;else{t=ss({rel:"stylesheet",href:t,"data-precedence":e},r),(r=ju.get(s))&&hP(t,r);var c=o=n.createElement("link");Ji(c),Co(c,"link",t),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,yN(o,e,n)}o={type:"stylesheet",instance:o,count:1,state:l},a.set(s,o)}}}function oge(t,e){Eh.X(t,e);var r=ev;if(r&&t){var n=C1(r).hoistableScripts,a=tv(t),s=n.get(a);s||(s=r.querySelector(Xy(a)),s||(t=ss({src:t,async:!0},e),(e=ju.get(a))&&mP(t,e),s=r.createElement("script"),Ji(s),Co(s,"link",t),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}function lge(t,e){Eh.M(t,e);var r=ev;if(r&&t){var n=C1(r).hoistableScripts,a=tv(t),s=n.get(a);s||(s=r.querySelector(Xy(a)),s||(t=ss({src:t,async:!0,type:"module"},e),(e=ju.get(a))&&mP(t,e),s=r.createElement("script"),Ji(s),Co(s,"link",t),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}function MF(t,e,r,n){var a=(a=y0.current)?UE(a):null;if(!a)throw Error(Yt(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(e=ux(r.href),r=C1(a).hoistableStyles,n=r.get(e),n||(n={type:"style",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=ux(r.href);var s=C1(a).hoistableStyles,o=s.get(t);if(o||(a=a.ownerDocument||a,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,o),(s=a.querySelector(Ky(t)))&&!s._p&&(o.instance=s,o.state.loading=5),ju.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ju.set(t,r),s||cge(a,t,r,o.state))),e&&n===null)throw Error(Yt(528,""));return o}if(e&&n!==null)throw Error(Yt(529,""));return null;case"script":return e=r.async,r=r.src,typeof r=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=tv(r),r=C1(a).hoistableScripts,n=r.get(e),n||(n={type:"script",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(Yt(444,t))}}function ux(t){return'href="'+du(t)+'"'}function Ky(t){return'link[rel="stylesheet"]['+t+"]"}function eQ(t){return ss({},t,{"data-precedence":t.precedence,precedence:null})}function cge(t,e,r,n){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=t.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),Co(e,"link",r),Ji(e),t.head.appendChild(e))}function tv(t){return'[src="'+du(t)+'"]'}function Xy(t){return"script[async]"+t}function LF(t,e,r){if(e.count++,e.instance===null)switch(e.type){case"style":var n=t.querySelector('style[data-href~="'+du(r.href)+'"]');if(n)return e.instance=n,Ji(n),n;var a=ss({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),Ji(n),Co(n,"style",a),yN(n,r.precedence,t),e.instance=n;case"stylesheet":a=ux(r.href);var s=t.querySelector(Ky(a));if(s)return e.state.loading|=4,e.instance=s,Ji(s),s;n=eQ(r),(a=ju.get(a))&&hP(n,a),s=(t.ownerDocument||t).createElement("link"),Ji(s);var o=s;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Co(s,"link",n),e.state.loading|=4,yN(s,r.precedence,t),e.instance=s;case"script":return s=tv(r.src),(a=t.querySelector(Xy(s)))?(e.instance=a,Ji(a),a):(n=r,(a=ju.get(s))&&(n=ss({},r),mP(n,a)),t=t.ownerDocument||t,a=t.createElement("script"),Ji(a),Co(a,"link",n),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(Yt(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,yN(n,r.precedence,t));return e.instance}function yN(t,e,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,s=a,o=0;o<n.length;o++){var l=n[o];if(l.dataset.precedence===e)s=l;else if(s!==a)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=r.nodeType===9?r.head:r,e.insertBefore(t,e.firstChild))}function hP(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function mP(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var wN=null;function FF(t,e,r){if(wN===null){var n=new Map,a=wN=new Map;a.set(r,n)}else a=wN,n=a.get(r),n||(n=new Map,a.set(r,n));if(n.has(t))return n;for(n.set(t,null),r=r.getElementsByTagName(t),a=0;a<r.length;a++){var s=r[a];if(!(s[Vy]||s[Eo]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(e)||"";o=t+o;var l=n.get(o);l?l.push(s):n.set(o,[s])}}return n}function BF(t,e,r){t=t.ownerDocument||t,t.head.insertBefore(r,e==="title"?t.querySelector("head > title"):null)}function uge(t,e,r){if(r===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function tQ(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function dge(t,e,r,n){if(r.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var a=ux(n.href),s=e.querySelector(Ky(a));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=zE.bind(t),e.then(t,t)),r.state.loading|=4,r.instance=s,Ji(s);return}s=e.ownerDocument||e,n=eQ(n),(a=ju.get(a))&&hP(n,a),s=s.createElement("link"),Ji(s);var o=s;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),Co(s,"link",n),r.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,e),(e=r.state.preload)&&!(r.state.loading&3)&&(t.count++,r=zE.bind(t),e.addEventListener("load",r),e.addEventListener("error",r))}}var Aj=0;function fge(t,e){return t.stylesheets&&t.count===0&&_N(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var n=setTimeout(function(){if(t.stylesheets&&_N(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Aj===0&&(Aj=62500*Gpe());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_N(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Aj?50:800)+e);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(a)}}:null}function zE(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_N(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var VE=null;function _N(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,VE=new Map,e.forEach(hge,t),VE=null,zE.call(t))}function hge(t,e){if(!(e.state.loading&4)){var r=VE.get(t);if(r)var n=r.get(null);else{r=new Map,VE.set(t,r);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var o=a[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}a=e.instance,o=a.getAttribute("data-precedence"),s=r.get(o)||n,s===n&&r.set(null,a),r.set(o,a),this.count++,n=zE.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),s?s.parentNode.insertBefore(a,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var O2={$$typeof:Pf,Provider:null,Consumer:null,_currentValue:op,_currentValue2:op,_threadCount:0};function mge(t,e,r,n,a,s,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=K6(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K6(0),this.hiddenUpdates=K6(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function rQ(t,e,r,n,a,s,o,l,c,u,d,h){return t=new mge(t,e,r,o,c,u,d,h,l),e=1,s===!0&&(e|=24),s=Ec(3,null,null,e),t.current=s,s.stateNode=t,e=UO(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:n,isDehydrated:r,cache:e},$O(s),t}function nQ(t){return t?(t=m1,t):m1}function aQ(t,e,r,n,a,s){a=nQ(a),n.context===null?n.context=a:n.pendingContext=a,n=_0(e),n.payload={element:r},s=s===void 0?null:s,s!==null&&(n.callback=s),r=N0(t,n,e),r!==null&&($l(r,t,e),Bb(r,t,e))}function UF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function pP(t,e){UF(t,e),(t=t.alternate)&&UF(t,e)}function sQ(t){if(t.tag===13||t.tag===31){var e=sg(t,67108864);e!==null&&$l(e,t,67108864),pP(t,67108864)}}function zF(t){if(t.tag===13||t.tag===31){var e=Mc();e=SO(e);var r=sg(t,e);r!==null&&$l(r,t,e),pP(t,e)}}var $E=!0;function pge(t,e,r,n){var a=fn.T;fn.T=null;var s=da.p;try{da.p=2,gP(t,e,r,n)}finally{da.p=s,fn.T=a}}function gge(t,e,r,n){var a=fn.T;fn.T=null;var s=da.p;try{da.p=8,gP(t,e,r,n)}finally{da.p=s,fn.T=a}}function gP(t,e,r,n){if($E){var a=Ak(n);if(a===null)Nj(t,e,n,HE,r),VF(t,n);else if(vge(a,t,e,r,n))n.stopPropagation();else if(VF(t,n),e&4&&-1<xge.indexOf(t)){for(;a!==null;){var s=Yx(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=Dm(s.pendingLanes);if(o!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Dc(o);l.entanglements[1]|=c,o&=~c}tf(s),!(ua&6)&&(PE=Pc()+500,Wy(0))}}break;case 31:case 13:l=sg(s,2),l!==null&&$l(l,s,2),sA(),pP(s,2)}if(s=Ak(n),s===null&&Nj(t,e,n,HE,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else Nj(t,e,n,null,r)}}function Ak(t){return t=kO(t),xP(t)}var HE=null;function xP(t){if(HE=null,t=l1(t),t!==null){var e=Fy(t);if(e===null)t=null;else{var r=e.tag;if(r===13){if(t=AX(e),t!==null)return t;t=null}else if(r===31){if(t=SX(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return HE=t,null}function iQ(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rme()){case kX:return 2;case IX:return 8;case bE:case nme:return 32;case OX:return 268435456;default:return 32}default:return 32}}var Sk=!1,S0=null,j0=null,T0=null,P2=new Map,R2=new Map,i0=[],xge="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VF(t,e){switch(t){case"focusin":case"focusout":S0=null;break;case"dragenter":case"dragleave":j0=null;break;case"mouseover":case"mouseout":T0=null;break;case"pointerover":case"pointerout":P2.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":R2.delete(e.pointerId)}}function Hv(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=Yx(e),e!==null&&sQ(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function vge(t,e,r,n,a){switch(e){case"focusin":return S0=Hv(S0,t,e,r,n,a),!0;case"dragenter":return j0=Hv(j0,t,e,r,n,a),!0;case"mouseover":return T0=Hv(T0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return P2.set(s,Hv(P2.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,R2.set(s,Hv(R2.get(s)||null,t,e,r,n,a)),!0}return!1}function oQ(t){var e=l1(t.target);if(e!==null){var r=Fy(e);if(r!==null){if(e=r.tag,e===13){if(e=AX(r),e!==null){t.blockedOn=e,S9(t.priority,function(){zF(r)});return}}else if(e===31){if(e=SX(r),e!==null){t.blockedOn=e,S9(t.priority,function(){zF(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function NN(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ak(t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);HC=n,r.target.dispatchEvent(n),HC=null}else return e=Yx(r),e!==null&&sQ(e),t.blockedOn=r,!1;e.shift()}return!0}function $F(t,e,r){NN(t)&&r.delete(e)}function bge(){Sk=!1,S0!==null&&NN(S0)&&(S0=null),j0!==null&&NN(j0)&&(j0=null),T0!==null&&NN(T0)&&(T0=null),P2.forEach($F),R2.forEach($F)}function $_(t,e){t.blockedOn===e&&(t.blockedOn=null,Sk||(Sk=!0,Di.unstable_scheduleCallback(Di.unstable_NormalPriority,bge)))}var H_=null;function HF(t){H_!==t&&(H_=t,Di.unstable_scheduleCallback(Di.unstable_NormalPriority,function(){H_===t&&(H_=null);for(var e=0;e<t.length;e+=3){var r=t[e],n=t[e+1],a=t[e+2];if(typeof n!="function"){if(xP(n||r)===null)continue;break}var s=Yx(r);s!==null&&(t.splice(e,3),e-=3,ik(s,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function dx(t){function e(c){return $_(c,t)}S0!==null&&$_(S0,t),j0!==null&&$_(j0,t),T0!==null&&$_(T0,t),P2.forEach(e),R2.forEach(e);for(var r=0;r<i0.length;r++){var n=i0[r];n.blockedOn===t&&(n.blockedOn=null)}for(;0<i0.length&&(r=i0[0],r.blockedOn===null);)oQ(r),r.blockedOn===null&&i0.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(n=0;n<r.length;n+=3){var a=r[n],s=r[n+1],o=a[Xl]||null;if(typeof s=="function")o||HF(r);else if(o){var l=null;if(s&&s.hasAttribute("formAction")){if(a=s,o=s[Xl]||null)l=o.formAction;else if(xP(a)!==null)continue}else l=o.action;typeof l=="function"?r[n+1]=l:(r.splice(n,3),n-=3),HF(r)}}}function lQ(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(o){return a=o})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),n||setTimeout(r,20)}function r(){if(!n&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(r,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function vP(t){this._internalRoot=t}lA.prototype.render=vP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Yt(409));var r=e.current,n=Mc();aQ(r,n,t,e,null,null)};lA.prototype.unmount=vP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;aQ(t.current,2,null,t,null,null),sA(),e[Xx]=null}};function lA(t){this._internalRoot=t}lA.prototype.unstable_scheduleHydration=function(t){if(t){var e=LX();t={blockedOn:null,target:t,priority:e};for(var r=0;r<i0.length&&e!==0&&e<i0[r].priority;r++);i0.splice(r,0,t),r===0&&oQ(t)}};var qF=NX.version;if(qF!=="19.2.0")throw Error(Yt(527,qF,"19.2.0"));da.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Yt(188)):(t=Object.keys(t).join(","),Error(Yt(268,t)));return t=X0e(e),t=t!==null?jX(t):null,t=t===null?null:t.stateNode,t};var yge={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:fn,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var q_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!q_.isDisabled&&q_.supportsFiber)try{By=q_.inject(yge),Rc=q_}catch{}}q4.createRoot=function(t,e){if(!EX(t))throw Error(Yt(299));var r=!1,n="",a=JY,s=eZ,o=tZ;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=rQ(t,1,!1,null,null,r,n,null,a,s,o,lQ),t[Xx]=e.current,fP(t),new vP(e)};q4.hydrateRoot=function(t,e,r){if(!EX(t))throw Error(Yt(299));var n=!1,a="",s=JY,o=eZ,l=tZ,c=null;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onUncaughtError!==void 0&&(s=r.onUncaughtError),r.onCaughtError!==void 0&&(o=r.onCaughtError),r.onRecoverableError!==void 0&&(l=r.onRecoverableError),r.formState!==void 0&&(c=r.formState)),e=rQ(t,1,!0,e,r??null,n,a,c,s,o,l,lQ),e.context=nQ(null),r=e.current,n=Mc(),n=SO(n),a=_0(n),a.callback=null,N0(r,a,n),r=n,e.current.lanes=r,zy(e,r),tf(e),t[Xx]=e.current,fP(t),new lA(e)};q4.version="19.2.0";function cQ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cQ)}catch(t){console.error(t)}}cQ(),xX.exports=q4;var wge=xX.exports;const _ge=Hc(wge);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D2(){return D2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D2.apply(this,arguments)}var p0;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(p0||(p0={}));const GF="popstate";function Nge(t){t===void 0&&(t={});function e(n,a){let{pathname:s,search:o,hash:l}=n.location;return jk("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:qE(a)}return Age(e,r,null,t)}function ai(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uQ(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ege(){return Math.random().toString(36).substr(2,8)}function WF(t,e){return{usr:t.state,key:t.key,idx:e}}function jk(t,e,r,n){return r===void 0&&(r=null),D2({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?rv(e):e,{state:r,key:e&&e.key||n||Ege()})}function qE(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function rv(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Age(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l=p0.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(D2({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=p0.Pop;let _=d(),N=_==null?null:_-u;u=_,c&&c({action:l,location:w.location,delta:N})}function p(_,N){l=p0.Push;let A=jk(w.location,_,N);u=d()+1;let j=WF(A,u),P=w.createHref(A);try{o.pushState(j,"",P)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;a.location.assign(P)}s&&c&&c({action:l,location:w.location,delta:1})}function g(_,N){l=p0.Replace;let A=jk(w.location,_,N);u=d();let j=WF(A,u),P=w.createHref(A);o.replaceState(j,"",P),s&&c&&c({action:l,location:w.location,delta:0})}function b(_){let N=a.location.origin!=="null"?a.location.origin:a.location.href,A=typeof _=="string"?_:qE(_);return A=A.replace(/ $/,"%20"),ai(N,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,N)}let w={get action(){return l},get location(){return t(a,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(GF,h),c=_,()=>{a.removeEventListener(GF,h),c=null}},createHref(_){return e(a,_)},createURL:b,encodeLocation(_){let N=b(_);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:p,replace:g,go(_){return o.go(_)}};return w}var KF;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(KF||(KF={}));function Sge(t,e,r){return r===void 0&&(r="/"),jge(t,e,r)}function jge(t,e,r,n){let a=typeof e=="string"?rv(e):e,s=bP(a.pathname||"/",r);if(s==null)return null;let o=dQ(t);Tge(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Uge(s);l=Lge(o[c],u)}return l}function dQ(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(ai(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=C0([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(ai(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),dQ(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Dge(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of fQ(s.path))a(s,o,c)}),e}function fQ(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=fQ(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Tge(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Mge(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Cge=/^:[\w-]+$/,kge=3,Ige=2,Oge=1,Pge=10,Rge=-2,XF=t=>t==="*";function Dge(t,e){let r=t.split("/"),n=r.length;return r.some(XF)&&(n+=Rge),e&&(n+=Ige),r.filter(a=>!XF(a)).reduce((a,s)=>a+(Cge.test(s)?kge:s===""?Oge:Pge),n)}function Mge(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function Lge(t,e,r){let{routesMeta:n}=t,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=Fge({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:C0([s,h.pathname]),pathnameBase:Hge(C0([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=C0([s,h.pathnameBase]))}return o}function Fge(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Bge(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let w=l[h]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const b=l[h];return g&&!b?u[p]=void 0:u[p]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Bge(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),uQ(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function Uge(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uQ(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function bP(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function zge(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?rv(t):t;return{pathname:r?r.startsWith("/")?r:Vge(r,e):e,search:qge(n),hash:Gge(a)}}function Vge(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Sj(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $ge(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function yP(t,e){let r=$ge(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function wP(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=rv(t):(a=D2({},t),ai(!a.pathname||!a.pathname.includes("?"),Sj("?","pathname","search",a)),ai(!a.pathname||!a.pathname.includes("#"),Sj("#","pathname","hash",a)),ai(!a.search||!a.search.includes("#"),Sj("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}l=h>=0?e[h]:"/"}let c=zge(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const C0=t=>t.join("/").replace(/\/\/+/g,"/"),Hge=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),qge=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Gge=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Wge(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const hQ=["post","put","patch","delete"];new Set(hQ);const Kge=["get",...hQ];new Set(Kge);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M2(){return M2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},M2.apply(this,arguments)}const _P=S.createContext(null),Xge=S.createContext(null),um=S.createContext(null),cA=S.createContext(null),Ah=S.createContext({outlet:null,matches:[],isDataRoute:!1}),mQ=S.createContext(null);function Yge(t,e){let{relative:r}=e===void 0?{}:e;nv()||ai(!1);let{basename:n,navigator:a}=S.useContext(um),{hash:s,pathname:o,search:l}=gQ(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:C0([n,o])),a.createHref({pathname:c,search:l,hash:s})}function nv(){return S.useContext(cA)!=null}function dm(){return nv()||ai(!1),S.useContext(cA).location}function pQ(t){S.useContext(um).static||S.useLayoutEffect(t)}function $s(){let{isDataRoute:t}=S.useContext(Ah);return t?c1e():Zge()}function Zge(){nv()||ai(!1);let t=S.useContext(_P),{basename:e,future:r,navigator:n}=S.useContext(um),{matches:a}=S.useContext(Ah),{pathname:s}=dm(),o=JSON.stringify(yP(a,r.v7_relativeSplatPath)),l=S.useRef(!1);return pQ(()=>{l.current=!0}),S.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=wP(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:C0([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function Yy(){let{matches:t}=S.useContext(Ah),e=t[t.length-1];return e?e.params:{}}function gQ(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=S.useContext(um),{matches:a}=S.useContext(Ah),{pathname:s}=dm(),o=JSON.stringify(yP(a,n.v7_relativeSplatPath));return S.useMemo(()=>wP(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Qge(t,e){return Jge(t,e)}function Jge(t,e,r,n){nv()||ai(!1);let{navigator:a}=S.useContext(um),{matches:s}=S.useContext(Ah),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=dm(),d;if(e){var h;let _=typeof e=="string"?rv(e):e;c==="/"||(h=_.pathname)!=null&&h.startsWith(c)||ai(!1),d=_}else d=u;let p=d.pathname||"/",g=p;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=Sge(t,{pathname:g}),w=a1e(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:C0([c,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:C0([c,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,r,n);return e&&w?S.createElement(cA.Provider,{value:{location:M2({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:p0.Pop}},w):w}function e1e(){let t=l1e(),e=Wge(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:a},r):null,null)}const t1e=S.createElement(e1e,null);class r1e extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?S.createElement(Ah.Provider,{value:this.props.routeContext},S.createElement(mQ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n1e(t){let{routeContext:e,match:r,children:n}=t,a=S.useContext(_P);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Ah.Provider,{value:e},n)}function a1e(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ai(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:g}=r,b=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,b=!1,w=null,_=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||t1e,c&&(u<0&&p===0?(u1e("route-fallback"),b=!0,_=null):u===p&&(b=!0,_=h.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,p+1)),A=()=>{let j;return g?j=w:b?j=_:h.route.Component?j=S.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=d,S.createElement(n1e,{match:h,routeContext:{outlet:d,matches:N,isDataRoute:r!=null},children:j})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?S.createElement(r1e,{location:r.location,revalidation:r.revalidation,component:w,error:g,children:A(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):A()},null)}var xQ=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xQ||{}),vQ=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vQ||{});function s1e(t){let e=S.useContext(_P);return e||ai(!1),e}function i1e(t){let e=S.useContext(Xge);return e||ai(!1),e}function o1e(t){let e=S.useContext(Ah);return e||ai(!1),e}function bQ(t){let e=o1e(),r=e.matches[e.matches.length-1];return r.route.id||ai(!1),r.route.id}function l1e(){var t;let e=S.useContext(mQ),r=i1e(),n=bQ();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function c1e(){let{router:t}=s1e(xQ.UseNavigateStable),e=bQ(vQ.UseNavigateStable),r=S.useRef(!1);return pQ(()=>{r.current=!0}),S.useCallback(function(a,s){s===void 0&&(s={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,M2({fromRouteId:e},s)))},[t,e])}const YF={};function u1e(t,e,r){YF[t]||(YF[t]=!0)}function d1e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function GE(t){let{to:e,replace:r,state:n,relative:a}=t;nv()||ai(!1);let{future:s,static:o}=S.useContext(um),{matches:l}=S.useContext(Ah),{pathname:c}=dm(),u=$s(),d=wP(e,yP(l,s.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return S.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:a}),[u,h,a,r,n]),null}function dr(t){ai(!1)}function f1e(t){let{basename:e="/",children:r=null,location:n,navigationType:a=p0.Pop,navigator:s,static:o=!1,future:l}=t;nv()&&ai(!1);let c=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:s,static:o,future:M2({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=rv(n));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:b="default"}=n,w=S.useMemo(()=>{let _=bP(d,c);return _==null?null:{location:{pathname:_,search:h,hash:p,state:g,key:b},navigationType:a}},[c,d,h,p,g,b,a]);return w==null?null:S.createElement(um.Provider,{value:u},S.createElement(cA.Provider,{children:r,value:w}))}function yQ(t){let{children:e,location:r}=t;return Qge(Tk(e),r)}new Promise(()=>{});function Tk(t,e){e===void 0&&(e=[]);let r=[];return S.Children.forEach(t,(n,a)=>{if(!S.isValidElement(n))return;let s=[...e,a];if(n.type===S.Fragment){r.push.apply(r,Tk(n.props.children,s));return}n.type!==dr&&ai(!1),!n.props.index||!n.props.children||ai(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Tk(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ck(){return Ck=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ck.apply(this,arguments)}function h1e(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function m1e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function p1e(t,e){return t.button===0&&(!e||e==="_self")&&!m1e(t)}function kk(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function g1e(t,e){let r=kk(t);return e&&e.forEach((n,a)=>{r.has(a)||e.getAll(a).forEach(s=>{r.append(a,s)})}),r}const x1e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],v1e="6";try{window.__reactRouterVersion=v1e}catch{}const b1e="startTransition",ZF=gX[b1e];function y1e(t){let{basename:e,children:r,future:n,window:a}=t,s=S.useRef();s.current==null&&(s.current=Nge({window:a,v5Compat:!0}));let o=s.current,[l,c]=S.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=S.useCallback(h=>{u&&ZF?ZF(()=>c(h)):c(h)},[c,u]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.useEffect(()=>d1e(n),[n]),S.createElement(f1e,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const w1e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_1e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wQ=S.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,p=h1e(e,x1e),{basename:g}=S.useContext(um),b,w=!1;if(typeof u=="string"&&_1e.test(u)&&(b=u,w1e))try{let j=new URL(window.location.href),P=u.startsWith("//")?new URL(j.protocol+u):new URL(u),U=bP(P.pathname,g);P.origin===j.origin&&U!=null?u=U+P.search+P.hash:w=!0}catch{}let _=Yge(u,{relative:a}),N=N1e(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function A(j){n&&n(j),j.defaultPrevented||N(j)}return S.createElement("a",Ck({},p,{href:b||_,onClick:w||s?n:A,ref:r,target:c}))});var QF;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(QF||(QF={}));var JF;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(JF||(JF={}));function N1e(t,e){let{target:r,replace:n,state:a,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=$s(),u=dm(),d=gQ(t,{relative:o});return S.useCallback(h=>{if(p1e(h,r)){h.preventDefault();let p=n!==void 0?n:qE(u)===qE(d);c(t,{replace:p,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,n,a,r,t,s,o,l])}function E1e(t){let e=S.useRef(kk(t)),r=S.useRef(!1),n=dm(),a=S.useMemo(()=>g1e(n.search,r.current?null:e.current),[n.search]),s=$s(),o=S.useCallback((l,c)=>{const u=kk(typeof l=="function"?l(a):l);r.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const A1e=()=>{};var eB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Q=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},S1e=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,h=(s&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),n.push(r[d],r[h],r[p],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_Q(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):S1e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const h=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||h==null)throw new j1e;const p=s<<2|l>>4;if(n.push(p),u!==64){const g=l<<4&240|u>>2;if(n.push(g),h!==64){const b=u<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class j1e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T1e=function(t){const e=_Q(t);return NQ.encodeByteArray(e,!0)},WE=function(t){return T1e(t).replace(/\./g,"")},EQ=function(t){try{return NQ.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1e=()=>AQ().__FIREBASE_DEFAULTS__,k1e=()=>{if(typeof process>"u"||typeof eB>"u")return;const t=eB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I1e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&EQ(t[1]);return e&&JSON.parse(e)},uA=()=>{try{return A1e()||C1e()||k1e()||I1e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SQ=t=>{var e,r;return(r=(e=uA())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},jQ=t=>{const e=SQ(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},TQ=()=>{var t;return(t=uA())==null?void 0:t.config},CQ=t=>{var e;return(e=uA())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[WE(JSON.stringify(r)),WE(JSON.stringify(o)),""].join(".")}const Kb={};function P1e(){const t={prod:[],emulator:[]};for(const e of Object.keys(Kb))Kb[e]?t.emulator.push(e):t.prod.push(e);return t}function R1e(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let tB=!1;function NP(t,e){if(typeof window>"u"||typeof document>"u"||!Sh(window.location.host)||Kb[t]===e||Kb[t]||tB)return;Kb[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=P1e().prod.length>0;function o(){const p=document.getElementById(n);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{tB=!0,o()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=R1e(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),w=r("learnmore"),_=document.getElementById(w)||document.createElement("a"),N=r("preprendIcon"),A=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const j=p.element;l(j),d(_,w);const P=u();c(A,N),j.append(A,b,_,P),document.body.appendChild(j)}s?(b.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D1e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mi())}function IQ(){var e;const t=(e=uA())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M1e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L1e(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F1e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B1e(){const t=Mi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OQ(){return!IQ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PQ(){return!IQ()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function RQ(){try{return typeof indexedDB=="object"}catch{return!1}}function U1e(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1e="FirebaseError";class rf extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=z1e,Object.setPrototypeOf(this,rf.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zy.prototype.create)}}class Zy{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?V1e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new rf(a,l,n)}}function V1e(t,e){return t.replace($1e,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const $1e=/\{\$([^}]+)}/g;function H1e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function H0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(rB(s)&&rB(o)){if(!H0(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function rB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function _b(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function Nb(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function q1e(t,e){const r=new G1e(t,e);return r.subscribe.bind(r)}class G1e{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");W1e(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=jj),a.error===void 0&&(a.error=jj),a.complete===void 0&&(a.complete=jj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W1e(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function jj(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){return t&&t._delegate?t._delegate:t}class q0{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K1e=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new O1e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y1e(e))try{this.getOrInitializeService({instanceIdentifier:Fm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Fm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fm){return this.instances.has(e)}getOptions(e=Fm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:X1e(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Fm){return this.component?this.component.multipleInstances?e:Fm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function X1e(t){return t===Fm?void 0:t}function Y1e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new K1e(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Un||(Un={}));const Q1e={debug:Un.DEBUG,verbose:Un.VERBOSE,info:Un.INFO,warn:Un.WARN,error:Un.ERROR,silent:Un.SILENT},J1e=Un.INFO,exe={[Un.DEBUG]:"log",[Un.VERBOSE]:"log",[Un.INFO]:"info",[Un.WARN]:"warn",[Un.ERROR]:"error"},txe=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=exe[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class EP{constructor(e){this.name=e,this._logLevel=J1e,this._logHandler=txe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Un))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q1e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Un.DEBUG,...e),this._logHandler(this,Un.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Un.VERBOSE,...e),this._logHandler(this,Un.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Un.INFO,...e),this._logHandler(this,Un.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Un.WARN,...e),this._logHandler(this,Un.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Un.ERROR,...e),this._logHandler(this,Un.ERROR,...e)}}const rxe=(t,e)=>e.some(r=>t instanceof r);let nB,aB;function nxe(){return nB||(nB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function axe(){return aB||(aB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DQ=new WeakMap,Ik=new WeakMap,MQ=new WeakMap,Tj=new WeakMap,AP=new WeakMap;function sxe(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(k0(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&DQ.set(r,t)}).catch(()=>{}),AP.set(e,t),e}function ixe(t){if(Ik.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ik.set(t,e)}let Ok={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Ik.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MQ.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return k0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oxe(t){Ok=t(Ok)}function lxe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Cj(this),e,...r);return MQ.set(n,e.sort?e.sort():[e]),k0(n)}:axe().includes(t)?function(...e){return t.apply(Cj(this),e),k0(DQ.get(this))}:function(...e){return k0(t.apply(Cj(this),e))}}function cxe(t){return typeof t=="function"?lxe(t):(t instanceof IDBTransaction&&ixe(t),rxe(t,nxe())?new Proxy(t,Ok):t)}function k0(t){if(t instanceof IDBRequest)return sxe(t);if(Tj.has(t))return Tj.get(t);const e=cxe(t);return e!==t&&(Tj.set(t,e),AP.set(e,t)),e}const Cj=t=>AP.get(t);function uxe(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=k0(o);return n&&o.addEventListener("upgradeneeded",c=>{n(k0(o.result),c.oldVersion,c.newVersion,k0(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const dxe=["get","getKey","getAll","getAllKeys","count"],fxe=["put","add","delete","clear"],kj=new Map;function sB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kj.get(e))return kj.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=fxe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||dxe.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return kj.set(e,s),s}oxe(t=>({...t,get:(e,r,n)=>sB(e,r)||t.get(e,r,n),has:(e,r)=>!!sB(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(mxe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function mxe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pk="@firebase/app",iB="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new EP("@firebase/app"),pxe="@firebase/app-compat",gxe="@firebase/analytics-compat",xxe="@firebase/analytics",vxe="@firebase/app-check-compat",bxe="@firebase/app-check",yxe="@firebase/auth",wxe="@firebase/auth-compat",_xe="@firebase/database",Nxe="@firebase/data-connect",Exe="@firebase/database-compat",Axe="@firebase/functions",Sxe="@firebase/functions-compat",jxe="@firebase/installations",Txe="@firebase/installations-compat",Cxe="@firebase/messaging",kxe="@firebase/messaging-compat",Ixe="@firebase/performance",Oxe="@firebase/performance-compat",Pxe="@firebase/remote-config",Rxe="@firebase/remote-config-compat",Dxe="@firebase/storage",Mxe="@firebase/storage-compat",Lxe="@firebase/firestore",Fxe="@firebase/ai",Bxe="@firebase/firestore-compat",Uxe="firebase",zxe="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="[DEFAULT]",Vxe={[Pk]:"fire-core",[pxe]:"fire-core-compat",[xxe]:"fire-analytics",[gxe]:"fire-analytics-compat",[bxe]:"fire-app-check",[vxe]:"fire-app-check-compat",[yxe]:"fire-auth",[wxe]:"fire-auth-compat",[_xe]:"fire-rtdb",[Nxe]:"fire-data-connect",[Exe]:"fire-rtdb-compat",[Axe]:"fire-fn",[Sxe]:"fire-fn-compat",[jxe]:"fire-iid",[Txe]:"fire-iid-compat",[Cxe]:"fire-fcm",[kxe]:"fire-fcm-compat",[Ixe]:"fire-perf",[Oxe]:"fire-perf-compat",[Pxe]:"fire-rc",[Rxe]:"fire-rc-compat",[Dxe]:"fire-gcs",[Mxe]:"fire-gcs-compat",[Lxe]:"fire-fst",[Bxe]:"fire-fst-compat",[Fxe]:"fire-vertex","fire-js":"fire-js",[Uxe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=new Map,$xe=new Map,Dk=new Map;function oB(t,e){try{t.container.addComponent(e)}catch(r){ih.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Rp(t){const e=t.name;if(Dk.has(e))return ih.debug(`There were multiple attempts to register component ${e}.`),!1;Dk.set(e,t);for(const r of KE.values())oB(r,t);for(const r of $xe.values())oB(r,t);return!0}function Jy(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function mu(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hxe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},I0=new Zy("app","Firebase",Hxe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qxe{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new q0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw I0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=zxe;function LQ(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Rk,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw I0.create("bad-app-name",{appName:String(a)});if(r||(r=TQ()),!r)throw I0.create("no-options");const s=KE.get(a);if(s){if(H0(r,s.options)&&H0(n,s.config))return s;throw I0.create("duplicate-app",{appName:a})}const o=new Z1e(a);for(const c of Dk.values())o.addComponent(c);const l=new qxe(r,n,o);return KE.set(a,l),l}function SP(t=Rk){const e=KE.get(t);if(!e&&t===Rk&&TQ())return LQ();if(!e)throw I0.create("no-app",{appName:t});return e}function Fd(t,e,r){let n=Vxe[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${e}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ih.warn(o.join(" "));return}Rp(new q0(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gxe="firebase-heartbeat-database",Wxe=1,L2="firebase-heartbeat-store";let Ij=null;function FQ(){return Ij||(Ij=uxe(Gxe,Wxe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(L2)}catch(r){console.warn(r)}}}}).catch(t=>{throw I0.create("idb-open",{originalErrorMessage:t.message})})),Ij}async function Kxe(t){try{const r=(await FQ()).transaction(L2),n=await r.objectStore(L2).get(BQ(t));return await r.done,n}catch(e){if(e instanceof rf)ih.warn(e.message);else{const r=I0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ih.warn(r.message)}}}async function lB(t,e){try{const n=(await FQ()).transaction(L2,"readwrite");await n.objectStore(L2).put(e,BQ(t)),await n.done}catch(r){if(r instanceof rf)ih.warn(r.message);else{const n=I0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ih.warn(n.message)}}}function BQ(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xxe=1024,Yxe=30;class Zxe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Jxe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cB();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Yxe){const o=eve(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ih.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=cB(),{heartbeatsToSend:n,unsentEntries:a}=Qxe(this._heartbeatsCache.heartbeats),s=WE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return ih.warn(r),""}}}function cB(){return new Date().toISOString().substring(0,10)}function Qxe(t,e=Xxe){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),uB(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),uB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Jxe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RQ()?U1e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Kxe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return lB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return lB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function uB(t){return WE(JSON.stringify({version:2,heartbeats:t})).length}function eve(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tve(t){Rp(new q0("platform-logger",e=>new hxe(e),"PRIVATE")),Rp(new q0("heartbeat",e=>new Zxe(e),"PRIVATE")),Fd(Pk,iB,t),Fd(Pk,iB,"esm2020"),Fd("fire-js","")}tve("");function UQ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zQ=UQ,VQ=new Zy("auth","Firebase",UQ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new EP("@firebase/auth");function rve(t,...e){XE.logLevel<=Un.WARN&&XE.warn(`Auth (${og}): ${t}`,...e)}function EN(t,...e){XE.logLevel<=Un.ERROR&&XE.error(`Auth (${og}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(t,...e){throw jP(t,...e)}function Bd(t,...e){return jP(t,...e)}function $Q(t,e,r){const n={...zQ(),[e]:r};return new Zy("auth","Firebase",n).create(e,{appName:t.name})}function O0(t){return $Q(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jP(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return VQ.create(t,...e)}function cn(t,e,...r){if(!t)throw jP(e,...r)}function Mf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw EN(e),new Error(e)}function oh(t,e){t||Mf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function nve(){return dB()==="http:"||dB()==="https:"}function dB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ave(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nve()||L1e()||"connection"in navigator)?navigator.onLine:!0}function sve(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,r){this.shortDelay=e,this.longDelay=r,oh(r>e,"Short delay should be less than long delay!"),this.isMobile=D1e()||F1e()}get(){return ave()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){oh(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ive={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lve=new ew(3e4,6e4);function lg(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function fm(t,e,r,n,a={}){return qQ(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=Qy({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return M1e()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Sh(t.emulatorConfig.host)&&(u.credentials="include"),HQ.fetch()(await GQ(t,t.config.apiHost,r,l),u)})}async function qQ(t,e,r){t._canInitEmulator=!1;const n={...ive,...e};try{const a=new uve(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw G_(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw G_(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw G_(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw G_(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $Q(t,d,u);ld(t,d)}}catch(a){if(a instanceof rf)throw a;ld(t,"network-request-failed",{message:String(a)})}}async function fA(t,e,r,n,a={}){const s=await fm(t,e,r,n,a);return"mfaPendingCredential"in s&&ld(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function GQ(t,e,r,n){const a=`${e}${r}?${n}`,s=t,o=s.config.emulator?TP(t.config,a):`${t.config.apiScheme}://${a}`;return ove.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function cve(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uve{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Bd(this.auth,"network-request-failed")),lve.get())})}}function G_(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Bd(t,e,n);return a.customData._tokenResponse=r,a}function fB(t){return t!==void 0&&t.enterprise!==void 0}class dve{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return cve(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fve(t,e){return fm(t,"GET","/v2/recaptchaConfig",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hve(t,e){return fm(t,"POST","/v1/accounts:delete",e)}async function YE(t,e){return fm(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WQ(t,e=!1){const r=Ss(t),n=await r.getIdToken(e),a=CP(n);cn(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Xb(Oj(a.auth_time)),issuedAtTime:Xb(Oj(a.iat)),expirationTime:Xb(Oj(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Oj(t){return Number(t)*1e3}function CP(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return EN("JWT malformed, contained fewer than 3 sections"),null;try{const a=EQ(r);return a?JSON.parse(a):(EN("Failed to decode base64 JWT payload"),null)}catch(a){return EN("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function hB(t){const e=CP(t);return cn(e,"internal-error"),cn(typeof e.exp<"u","internal-error"),cn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof rf&&mve(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function mve({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pve{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xb(this.lastLoginAt),this.creationTime=Xb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZE(t){var h;const e=t.auth,r=await t.getIdToken(),n=await F2(t,YE(e,{idToken:r}));cn(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=(h=a.providerUserInfo)!=null&&h.length?XQ(a.providerUserInfo):[],o=gve(t.providerData,s),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Lk(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function KQ(t){const e=Ss(t);await ZE(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gve(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function XQ(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xve(t,e){const r=await qQ(t,{},async()=>{const n=Qy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=await GQ(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&Sh(t.emulatorConfig.host)&&(c.credentials="include"),HQ.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function vve(t,e){return fm(t,"POST","/v2/accounts:revokeToken",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){cn(e.idToken,"internal-error"),cn(typeof e.idToken<"u","internal-error"),cn(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){cn(e.length!==0,"internal-error");const r=hB(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(cn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await xve(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new M1;return n&&(cn(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(cn(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(cn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new M1,this.toJSON())}_performRefresh(){return Mf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t,e){cn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nd{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new pve(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Lk(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await F2(this,this.stsTokenManager.getToken(this.auth,e));return cn(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return WQ(this,e)}reload(){return KQ(this)}_assign(e){this!==e&&(cn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new nd({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){cn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await ZE(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mu(this.auth.app))return Promise.reject(O0(this.auth));const e=await this.getIdToken();return await F2(this,hve(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:g,providerData:b,stsTokenManager:w}=r;cn(h&&w,e,"internal-error");const _=M1.fromJSON(this.name,w);cn(typeof h=="string",e,"internal-error"),$h(n,e.name),$h(a,e.name),cn(typeof p=="boolean",e,"internal-error"),cn(typeof g=="boolean",e,"internal-error"),$h(s,e.name),$h(o,e.name),$h(l,e.name),$h(c,e.name),$h(u,e.name),$h(d,e.name);const N=new nd({uid:h,auth:e,email:a,emailVerified:p,displayName:n,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(N.providerData=b.map(A=>({...A}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,r,n=!1){const a=new M1;a.updateFromServerResponse(r);const s=new nd({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await ZE(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];cn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?XQ(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new M1;l.updateFromIdToken(n);const c=new nd({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Lk(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=new Map;function Lf(t){oh(t instanceof Function,"Expected a class definition");let e=mB.get(t);return e?(oh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mB.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}YQ.type="NONE";const Fk=YQ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e,r){return`firebase:${t}:${e}:${r}`}class L1{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=AN(this.userKey,a.apiKey,s),this.fullPersistenceKey=AN("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await YE(this.auth,{idToken:e}).catch(()=>{});return r?nd._fromGetAccountInfoResponse(this.auth,r,e):null}return nd._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new L1(Lf(Fk),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Lf(Fk);const o=AN(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const p=await YE(e,{idToken:d}).catch(()=>{});if(!p)break;h=await nd._fromGetAccountInfoResponse(e,p,d)}else h=nd._fromJSON(e,d);u!==s&&(l=h),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new L1(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new L1(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eJ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rJ(e))return"Blackberry";if(nJ(e))return"Webos";if(QQ(e))return"Safari";if((e.includes("chrome/")||JQ(e))&&!e.includes("edge/"))return"Chrome";if(tJ(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function ZQ(t=Mi()){return/firefox\//i.test(t)}function QQ(t=Mi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JQ(t=Mi()){return/crios\//i.test(t)}function eJ(t=Mi()){return/iemobile/i.test(t)}function tJ(t=Mi()){return/android/i.test(t)}function rJ(t=Mi()){return/blackberry/i.test(t)}function nJ(t=Mi()){return/webos/i.test(t)}function kP(t=Mi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bve(t=Mi()){var e;return kP(t)&&!!((e=window.navigator)!=null&&e.standalone)}function yve(){return B1e()&&document.documentMode===10}function aJ(t=Mi()){return kP(t)||tJ(t)||nJ(t)||rJ(t)||/windows phone/i.test(t)||eJ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sJ(t,e=[]){let r;switch(t){case"Browser":r=pB(Mi());break;case"Worker":r=`${pB(Mi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${og}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wve{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _ve(t,e={}){return fm(t,"GET","/v2/passwordPolicy",lg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nve=6;class Eve{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??Nve,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ave{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gB(this),this.idTokenSubscription=new gB(this),this.beforeStateQueue=new wve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VQ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Lf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await L1.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await YE(this,{idToken:e}),n=await nd._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(mu(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return cn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await ZE(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sve()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mu(this.app))return Promise.reject(O0(this));const r=e?Ss(e):null;return r&&cn(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&cn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mu(this.app)?Promise.reject(O0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mu(this.app)?Promise.reject(O0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _ve(this),r=new Eve(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Zy("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await vve(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Lf(e)||this._popupRedirectResolver;cn(r,this,"argument-error"),this.redirectPersistenceManager=await L1.create(this,[Lf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(cn(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return cn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sJ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(mu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&rve(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function av(t){return Ss(t)}class gB{constructor(e){this.auth=e,this.observer=null,this.addObserver=q1e(r=>this.observer=r)}get next(){return cn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sve(t){hA=t}function iJ(t){return hA.loadJS(t)}function jve(){return hA.recaptchaEnterpriseScript}function Tve(){return hA.gapiScript}function Cve(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class kve{constructor(){this.enterprise=new Ive}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class Ive{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const Ove="recaptcha-enterprise",oJ="NO_RECAPTCHA";class Pve{constructor(e){this.type=Ove,this.auth=av(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{fve(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new dve(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;fB(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(oJ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kve().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&fB(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=jve();c.length!==0&&(c+=l),iJ(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function xB(t,e,r,n=!1,a=!1){const s=new Pve(t);let o;if(a)o=oJ;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function vB(t,e,r,n,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await xB(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await xB(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(t,e){const r=Jy(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(H0(s,e??{}))return a;ld(a,"already-initialized")}return r.initialize({options:e})}function Rve(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Lf);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function cJ(t,e,r){const n=av(t);cn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=uJ(e),{host:o,port:l}=Dve(e),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){cn(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),cn(H0(u,n.config.emulator)&&H0(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Sh(o)?(dA(`${s}//${o}${c}`),NP("Auth",!0)):Mve()}function uJ(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Dve(t){const e=uJ(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:bB(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:bB(o)}}}function bB(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Mve(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Mf("not implemented")}_getIdTokenResponse(e){return Mf("not implemented")}_linkToIdToken(e,r){return Mf("not implemented")}_getReauthenticationResolver(e){return Mf("not implemented")}}async function Lve(t,e){return fm(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fve(t,e){return fA(t,"POST","/v1/accounts:signInWithPassword",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bve(t,e){return fA(t,"POST","/v1/accounts:signInWithEmailLink",lg(t,e))}async function Uve(t,e){return fA(t,"POST","/v1/accounts:signInWithEmailLink",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends mA{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new fx(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new fx(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vB(e,r,"signInWithPassword",Fve);case"emailLink":return Bve(e,{email:this._email,oobCode:this._password});default:ld(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vB(e,n,"signUpPassword",Lve);case"emailLink":return Uve(e,{idToken:r,email:this._email,oobCode:this._password});default:ld(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(t,e){return fA(t,"POST","/v1/accounts:signInWithIdp",lg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zve="http://localhost";class G0 extends mA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new G0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):ld("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new G0(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return F1(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,F1(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,F1(e,r)}buildRequest(){const e={requestUri:zve,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Qy(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vve(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $ve(t){const e=_b(Nb(t)).link,r=e?_b(Nb(e)).deep_link_id:null,n=_b(Nb(t)).deep_link_id;return(n?_b(Nb(n)).link:null)||n||r||e||t}class pA{constructor(e){const r=_b(Nb(e)),n=r.apiKey??null,a=r.oobCode??null,s=Vve(r.mode??null);cn(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=$ve(e);try{return new pA(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.providerId=cg.PROVIDER_ID}static credential(e,r){return fx._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=pA.parseLink(r);return cn(n,"argument-error"),fx._fromEmailAndCode(e,n.code,n.tenantId)}}cg.PROVIDER_ID="password";cg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends dJ{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends tw{constructor(){super("facebook.com")}static credential(e){return G0._fromParams({providerId:Sf.PROVIDER_ID,signInMethod:Sf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sf.credentialFromTaggedObject(e)}static credentialFromError(e){return Sf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sf.credential(e.oauthAccessToken)}catch{return null}}}Sf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends tw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return G0._fromParams({providerId:jf.PROVIDER_ID,signInMethod:jf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return jf.credentialFromTaggedObject(e)}static credentialFromError(e){return jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return jf.credential(r,n)}catch{return null}}}jf.GOOGLE_SIGN_IN_METHOD="google.com";jf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends tw{constructor(){super("github.com")}static credential(e){return G0._fromParams({providerId:Tf.PROVIDER_ID,signInMethod:Tf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tf.credentialFromTaggedObject(e)}static credentialFromError(e){return Tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tf.credential(e.oauthAccessToken)}catch{return null}}}Tf.GITHUB_SIGN_IN_METHOD="github.com";Tf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends tw{constructor(){super("twitter.com")}static credential(e,r){return G0._fromParams({providerId:Cf.PROVIDER_ID,signInMethod:Cf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Cf.credentialFromTaggedObject(e)}static credentialFromError(e){return Cf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Cf.credential(r,n)}catch{return null}}}Cf.TWITTER_SIGN_IN_METHOD="twitter.com";Cf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await nd._fromIdTokenResponse(e,n,a),o=yB(n);return new hx({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=yB(n);return new hx({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function yB(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends rf{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,QE.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new QE(e,r,n,a)}}function fJ(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?QE._fromErrorAndOperation(t,s,e,n):s})}async function Hve(t,e,r=!1){const n=await F2(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return hx._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qve(t,e,r=!1){const{auth:n}=t;if(mu(n.app))return Promise.reject(O0(n));const a="reauthenticate";try{const s=await F2(t,fJ(n,a,e,t),r);cn(s.idToken,n,"internal-error");const o=CP(s.idToken);cn(o,n,"internal-error");const{sub:l}=o;return cn(t.uid===l,n,"user-mismatch"),hx._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ld(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hJ(t,e,r=!1){if(mu(t.app))return Promise.reject(O0(t));const n="signIn",a=await fJ(t,n,e),s=await hx._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function mJ(t,e){return hJ(av(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gve(t){const e=av(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function pJ(t,e,r){return mu(t.app)?Promise.reject(O0(t)):mJ(Ss(t),cg.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Gve(t),n})}function gJ(t,e,r,n){return Ss(t).onIdTokenChanged(e,r,n)}function xJ(t,e,r){return Ss(t).beforeAuthStateChanged(e,r)}function vJ(t,e,r,n){return Ss(t).onAuthStateChanged(e,r,n)}function IP(t){return Ss(t).signOut()}const JE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bJ{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(JE,"1"),this.storage.removeItem(JE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wve=1e3,Kve=10;class yJ extends bJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aJ(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);yve()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Kve):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Wve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}yJ.type="LOCAL";const wJ=yJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J extends bJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}_J.type="SESSION";const OP=_J;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xve(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new gA(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await Xve(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gA.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yve{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=PP("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){return window}function Zve(t){Ud().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(){return typeof Ud().WorkerGlobalScope<"u"&&typeof Ud().importScripts=="function"}async function Qve(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jve(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function ebe(){return NJ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EJ="firebaseLocalStorageDb",tbe=1,e3="firebaseLocalStorage",AJ="fbase_key";class rw{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function xA(t,e){return t.transaction([e3],e?"readwrite":"readonly").objectStore(e3)}function rbe(){const t=indexedDB.deleteDatabase(EJ);return new rw(t).toPromise()}function Bk(){const t=indexedDB.open(EJ,tbe);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(e3,{keyPath:AJ})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(e3)?e(n):(n.close(),await rbe(),e(await Bk()))})})}async function wB(t,e,r){const n=xA(t,!0).put({[AJ]:e,value:r});return new rw(n).toPromise()}async function nbe(t,e){const r=xA(t,!1).get(e),n=await new rw(r).toPromise();return n===void 0?null:n.value}function _B(t,e){const r=xA(t,!0).delete(e);return new rw(r).toPromise()}const abe=800,sbe=3;class SJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bk(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>sbe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gA._getInstance(ebe()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Qve(),!this.activeServiceWorker)return;this.sender=new Yve(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jve()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bk();return await wB(e,JE,"1"),await _B(e,JE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>wB(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>nbe(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_B(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=xA(a,!1).getAll();return new rw(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),abe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SJ.type="LOCAL";const jJ=SJ;new ew(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ibe(t,e){return e?Lf(e):(cn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP extends mA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return F1(e,this._buildIdpRequest())}_linkToIdToken(e,r){return F1(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return F1(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function obe(t){return hJ(t.auth,new RP(t),t.bypassAuthState)}function lbe(t){const{auth:e,user:r}=t;return cn(r,e,"internal-error"),qve(r,new RP(t),t.bypassAuthState)}async function cbe(t){const{auth:e,user:r}=t;return cn(r,e,"internal-error"),Hve(r,new RP(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TJ{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return obe;case"linkViaPopup":case"linkViaRedirect":return cbe;case"reauthViaPopup":case"reauthViaRedirect":return lbe;default:ld(this.auth,"internal-error")}}resolve(e){oh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ube=new ew(2e3,1e4);class v1 extends TJ{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,v1.currentPopupAction&&v1.currentPopupAction.cancel(),v1.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return cn(e,this.auth,"internal-error"),e}async onExecution(){oh(this.filter.length===1,"Popup operations only handle one event");const e=PP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Bd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Bd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v1.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ube.get())};e()}}v1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dbe="pendingRedirect",SN=new Map;class fbe extends TJ{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=SN.get(this.auth._key());if(!e){try{const n=await hbe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}SN.set(this.auth._key(),e)}return this.bypassAuthState||SN.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hbe(t,e){const r=gbe(e),n=pbe(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function mbe(t,e){SN.set(t._key(),e)}function pbe(t){return Lf(t._redirectPersistence)}function gbe(t){return AN(dbe,t.config.apiKey,t.name)}async function xbe(t,e,r=!1){if(mu(t.app))return Promise.reject(O0(t));const n=av(t),a=ibe(n,e),o=await new fbe(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vbe=10*60*1e3;class bbe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ybe(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!CJ(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Bd(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vbe&&this.cachedEventUids.clear(),this.cachedEventUids.has(NB(e))}saveEventToCache(e){this.cachedEventUids.add(NB(e)),this.lastProcessedEventTime=Date.now()}}function NB(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CJ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ybe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CJ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wbe(t,e={}){return fm(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _be=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nbe=/^https?/;async function Ebe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wbe(t);for(const r of e)try{if(Abe(r))return}catch{}ld(t,"unauthorized-domain")}function Abe(t){const e=Mk(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!Nbe.test(r))return!1;if(_be.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sbe=new ew(3e4,6e4);function EB(){const t=Ud().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function jbe(t){return new Promise((e,r)=>{var a,s,o;function n(){EB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{EB(),r(Bd(t,"network-request-failed"))},timeout:Sbe.get()})}if((s=(a=Ud().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Ud().gapi)!=null&&o.load)n();else{const l=Cve("iframefcb");return Ud()[l]=()=>{gapi.load?n():r(Bd(t,"network-request-failed"))},iJ(`${Tve()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw jN=null,e})}let jN=null;function Tbe(t){return jN=jN||jbe(t),jN}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cbe=new ew(5e3,15e3),kbe="__/auth/iframe",Ibe="emulator/auth/iframe",Obe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pbe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rbe(t){const e=t.config;cn(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?TP(e,Ibe):`https://${t.config.authDomain}/${kbe}`,n={apiKey:e.apiKey,appName:t.name,v:og},a=Pbe.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Qy(n).slice(1)}`}async function Dbe(t){const e=await Tbe(t),r=Ud().gapi;return cn(r,t,"internal-error"),e.open({where:document.body,url:Rbe(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Obe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Bd(t,"network-request-failed"),l=Ud().setTimeout(()=>{s(o)},Cbe.get());function c(){Ud().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mbe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lbe=500,Fbe=600,Bbe="_blank",Ube="http://localhost";class AB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zbe(t,e,r,n=Lbe,a=Fbe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...Mbe,width:n.toString(),height:a.toString(),top:s,left:o},u=Mi().toLowerCase();r&&(l=JQ(u)?Bbe:r),ZQ(u)&&(e=e||Ube,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(bve(u)&&l!=="_self")return Vbe(e||"",l),new AB(null);const h=window.open(e||"",l,d);cn(h,t,"popup-blocked");try{h.focus()}catch{}return new AB(h)}function Vbe(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $be="__/auth/handler",Hbe="emulator/auth/handler",qbe=encodeURIComponent("fac");async function SB(t,e,r,n,a,s){cn(t.config.authDomain,t,"auth-domain-config-required"),cn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:og,eventId:a};if(e instanceof dJ){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",H1e(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof tw){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${qbe}=${encodeURIComponent(c)}`:"";return`${Gbe(t)}?${Qy(l).slice(1)}${u}`}function Gbe({config:t}){return t.emulator?TP(t,Hbe):`https://${t.authDomain}/${$be}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj="webStorageSupport";class Wbe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OP,this._completeRedirectFn=xbe,this._overrideRedirectResult=mbe}async _openPopup(e,r,n,a){var o;oh((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await SB(e,r,n,Mk(),a);return zbe(e,s,PP())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await SB(e,r,n,Mk(),a);return Zve(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(oh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Dbe(e),n=new bbe(e);return r.register("authEvent",a=>(cn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Pj,{type:Pj},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[Pj];s!==void 0&&r(!!s),ld(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Ebe(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return aJ()||QQ()||kP()}}const kJ=Wbe;var jB="@firebase/auth",TB="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kbe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){cn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xbe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ybe(t){Rp(new q0("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;cn(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sJ(t)},u=new Ave(n,a,s,c);return Rve(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Rp(new q0("auth-internal",e=>{const r=av(e.getProvider("auth").getImmediate());return(n=>new Kbe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fd(jB,TB,Xbe(t)),Fd(jB,TB,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zbe=5*60,Qbe=CQ("authIdTokenMaxAge")||Zbe;let CB=null;const Jbe=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Qbe)return;const a=r==null?void 0:r.token;CB!==a&&(CB=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function IJ(t=SP()){const e=Jy(t,"auth");if(e.isInitialized())return e.getImmediate();const r=lJ(t,{popupRedirectResolver:kJ,persistence:[jJ,wJ,OP]}),n=CQ("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=Jbe(s.toString());xJ(r,o,()=>o(r.currentUser)),gJ(r,l=>o(l))}}const a=SQ("auth");return a&&cJ(r,`http://${a}`),r}function e2e(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}Sve({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Bd("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",e2e().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ybe("Browser");const t2e=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:pA,AuthCredential:mA,EmailAuthCredential:fx,EmailAuthProvider:cg,FacebookAuthProvider:Sf,GithubAuthProvider:Tf,GoogleAuthProvider:jf,OAuthCredential:G0,TwitterAuthProvider:Cf,beforeAuthStateChanged:xJ,browserLocalPersistence:wJ,browserPopupRedirectResolver:kJ,browserSessionPersistence:OP,connectAuthEmulator:cJ,getAuth:IJ,getIdTokenResult:WQ,inMemoryPersistence:Fk,indexedDBLocalPersistence:jJ,initializeAuth:lJ,onAuthStateChanged:vJ,onIdTokenChanged:gJ,prodErrorMap:zQ,reload:KQ,signInWithCredential:mJ,signInWithEmailAndPassword:pJ,signOut:IP},Symbol.toStringTag,{value:"Module"})),r2e="modulepreload",n2e=function(t){return"/"+t},kB={},qf=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=n2e(c),c in kB)return;kB[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":r2e,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var a2e="firebase",s2e="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fd(a2e,s2e,"app");var IB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var P0,OJ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,D){function I(){}I.prototype=D.prototype,O.F=D.prototype,O.prototype=new I,O.prototype.constructor=O,O.D=function(V,R,B){for(var F=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)F[ee-2]=arguments[ee];return D.prototype[R].apply(V,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,D,I){I||(I=0);const V=Array(16);if(typeof D=="string")for(var R=0;R<16;++R)V[R]=D.charCodeAt(I++)|D.charCodeAt(I++)<<8|D.charCodeAt(I++)<<16|D.charCodeAt(I++)<<24;else for(R=0;R<16;++R)V[R]=D[I++]|D[I++]<<8|D[I++]<<16|D[I++]<<24;D=O.g[0],I=O.g[1],R=O.g[2];let B=O.g[3],F;F=D+(B^I&(R^B))+V[0]+3614090360&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(R^D&(I^R))+V[1]+3905402710&4294967295,B=D+(F<<12&4294967295|F>>>20),F=R+(I^B&(D^I))+V[2]+606105819&4294967295,R=B+(F<<17&4294967295|F>>>15),F=I+(D^R&(B^D))+V[3]+3250441966&4294967295,I=R+(F<<22&4294967295|F>>>10),F=D+(B^I&(R^B))+V[4]+4118548399&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(R^D&(I^R))+V[5]+1200080426&4294967295,B=D+(F<<12&4294967295|F>>>20),F=R+(I^B&(D^I))+V[6]+2821735955&4294967295,R=B+(F<<17&4294967295|F>>>15),F=I+(D^R&(B^D))+V[7]+4249261313&4294967295,I=R+(F<<22&4294967295|F>>>10),F=D+(B^I&(R^B))+V[8]+1770035416&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(R^D&(I^R))+V[9]+2336552879&4294967295,B=D+(F<<12&4294967295|F>>>20),F=R+(I^B&(D^I))+V[10]+4294925233&4294967295,R=B+(F<<17&4294967295|F>>>15),F=I+(D^R&(B^D))+V[11]+2304563134&4294967295,I=R+(F<<22&4294967295|F>>>10),F=D+(B^I&(R^B))+V[12]+1804603682&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(R^D&(I^R))+V[13]+4254626195&4294967295,B=D+(F<<12&4294967295|F>>>20),F=R+(I^B&(D^I))+V[14]+2792965006&4294967295,R=B+(F<<17&4294967295|F>>>15),F=I+(D^R&(B^D))+V[15]+1236535329&4294967295,I=R+(F<<22&4294967295|F>>>10),F=D+(R^B&(I^R))+V[1]+4129170786&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^R&(D^I))+V[6]+3225465664&4294967295,B=D+(F<<9&4294967295|F>>>23),F=R+(D^I&(B^D))+V[11]+643717713&4294967295,R=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(R^B))+V[0]+3921069994&4294967295,I=R+(F<<20&4294967295|F>>>12),F=D+(R^B&(I^R))+V[5]+3593408605&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^R&(D^I))+V[10]+38016083&4294967295,B=D+(F<<9&4294967295|F>>>23),F=R+(D^I&(B^D))+V[15]+3634488961&4294967295,R=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(R^B))+V[4]+3889429448&4294967295,I=R+(F<<20&4294967295|F>>>12),F=D+(R^B&(I^R))+V[9]+568446438&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^R&(D^I))+V[14]+3275163606&4294967295,B=D+(F<<9&4294967295|F>>>23),F=R+(D^I&(B^D))+V[3]+4107603335&4294967295,R=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(R^B))+V[8]+1163531501&4294967295,I=R+(F<<20&4294967295|F>>>12),F=D+(R^B&(I^R))+V[13]+2850285829&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^R&(D^I))+V[2]+4243563512&4294967295,B=D+(F<<9&4294967295|F>>>23),F=R+(D^I&(B^D))+V[7]+1735328473&4294967295,R=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(R^B))+V[12]+2368359562&4294967295,I=R+(F<<20&4294967295|F>>>12),F=D+(I^R^B)+V[5]+4294588738&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^R)+V[8]+2272392833&4294967295,B=D+(F<<11&4294967295|F>>>21),F=R+(B^D^I)+V[11]+1839030562&4294967295,R=B+(F<<16&4294967295|F>>>16),F=I+(R^B^D)+V[14]+4259657740&4294967295,I=R+(F<<23&4294967295|F>>>9),F=D+(I^R^B)+V[1]+2763975236&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^R)+V[4]+1272893353&4294967295,B=D+(F<<11&4294967295|F>>>21),F=R+(B^D^I)+V[7]+4139469664&4294967295,R=B+(F<<16&4294967295|F>>>16),F=I+(R^B^D)+V[10]+3200236656&4294967295,I=R+(F<<23&4294967295|F>>>9),F=D+(I^R^B)+V[13]+681279174&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^R)+V[0]+3936430074&4294967295,B=D+(F<<11&4294967295|F>>>21),F=R+(B^D^I)+V[3]+3572445317&4294967295,R=B+(F<<16&4294967295|F>>>16),F=I+(R^B^D)+V[6]+76029189&4294967295,I=R+(F<<23&4294967295|F>>>9),F=D+(I^R^B)+V[9]+3654602809&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^R)+V[12]+3873151461&4294967295,B=D+(F<<11&4294967295|F>>>21),F=R+(B^D^I)+V[15]+530742520&4294967295,R=B+(F<<16&4294967295|F>>>16),F=I+(R^B^D)+V[2]+3299628645&4294967295,I=R+(F<<23&4294967295|F>>>9),F=D+(R^(I|~B))+V[0]+4096336452&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~R))+V[7]+1126891415&4294967295,B=D+(F<<10&4294967295|F>>>22),F=R+(D^(B|~I))+V[14]+2878612391&4294967295,R=B+(F<<15&4294967295|F>>>17),F=I+(B^(R|~D))+V[5]+4237533241&4294967295,I=R+(F<<21&4294967295|F>>>11),F=D+(R^(I|~B))+V[12]+1700485571&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~R))+V[3]+2399980690&4294967295,B=D+(F<<10&4294967295|F>>>22),F=R+(D^(B|~I))+V[10]+4293915773&4294967295,R=B+(F<<15&4294967295|F>>>17),F=I+(B^(R|~D))+V[1]+2240044497&4294967295,I=R+(F<<21&4294967295|F>>>11),F=D+(R^(I|~B))+V[8]+1873313359&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~R))+V[15]+4264355552&4294967295,B=D+(F<<10&4294967295|F>>>22),F=R+(D^(B|~I))+V[6]+2734768916&4294967295,R=B+(F<<15&4294967295|F>>>17),F=I+(B^(R|~D))+V[13]+1309151649&4294967295,I=R+(F<<21&4294967295|F>>>11),F=D+(R^(I|~B))+V[4]+4149444226&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~R))+V[11]+3174756917&4294967295,B=D+(F<<10&4294967295|F>>>22),F=R+(D^(B|~I))+V[2]+718787259&4294967295,R=B+(F<<15&4294967295|F>>>17),F=I+(B^(R|~D))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(R+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+R&4294967295,O.g[3]=O.g[3]+B&4294967295}n.prototype.v=function(O,D){D===void 0&&(D=O.length);const I=D-this.blockSize,V=this.C;let R=this.h,B=0;for(;B<D;){if(R==0)for(;B<=I;)a(this,O,B),B+=this.blockSize;if(typeof O=="string"){for(;B<D;)if(V[R++]=O.charCodeAt(B++),R==this.blockSize){a(this,V),R=0;break}}else for(;B<D;)if(V[R++]=O[B++],R==this.blockSize){a(this,V),R=0;break}}this.h=R,this.o+=D},n.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;D=this.o*8;for(var I=O.length-8;I<O.length;++I)O[I]=D&255,D/=256;for(this.v(O),O=Array(16),D=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)O[D++]=this.g[I]>>>V&255;return O};function s(O,D){var I=l;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=D(O)}function o(O,D){this.h=D;const I=[];let V=!0;for(let R=O.length-1;R>=0;R--){const B=O[R]|0;V&&B==D||(I[R]=B,V=!1)}this.g=I}var l={};function c(O){return-128<=O&&O<128?s(O,function(D){return new o([D|0],D<0?-1:0)}):new o([O|0],O<0?-1:0)}function u(O){if(isNaN(O)||!isFinite(O))return h;if(O<0)return _(u(-O));const D=[];let I=1;for(let V=0;O>=I;V++)D[V]=O/I|0,I*=4294967296;return new o(D,0)}function d(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return _(d(O.substring(1),D));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(D,8));let V=h;for(let B=0;B<O.length;B+=8){var R=Math.min(8,O.length-B);const F=parseInt(O.substring(B,B+R),D);R<8?(R=u(Math.pow(D,R)),V=V.j(R).add(u(F))):(V=V.j(I),V=V.add(u(F)))}return V}var h=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-_(this).m();let O=0,D=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);O+=(V>=0?V:4294967296+V)*D,D*=4294967296}return O},t.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(b(this))return"0";if(w(this))return"-"+_(this).toString(O);const D=u(Math.pow(O,6));var I=this;let V="";for(;;){const R=P(I,D).g;I=N(I,R.j(D));let B=((I.g.length>0?I.g[0]:I.h)>>>0).toString(O);if(I=R,b(I))return B+V;for(;B.length<6;)B="0"+B;V=B+V}},t.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function b(O){if(O.h!=0)return!1;for(let D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function w(O){return O.h==-1}t.l=function(O){return O=N(this,O),w(O)?-1:b(O)?0:1};function _(O){const D=O.g.length,I=[];for(let V=0;V<D;V++)I[V]=~O.g[V];return new o(I,~O.h).add(p)}t.abs=function(){return w(this)?_(this):this},t.add=function(O){const D=Math.max(this.g.length,O.g.length),I=[];let V=0;for(let R=0;R<=D;R++){let B=V+(this.i(R)&65535)+(O.i(R)&65535),F=(B>>>16)+(this.i(R)>>>16)+(O.i(R)>>>16);V=F>>>16,B&=65535,F&=65535,I[R]=F<<16|B}return new o(I,I[I.length-1]&-2147483648?-1:0)};function N(O,D){return O.add(_(D))}t.j=function(O){if(b(this)||b(O))return h;if(w(this))return w(O)?_(this).j(_(O)):_(_(this).j(O));if(w(O))return _(this.j(_(O)));if(this.l(g)<0&&O.l(g)<0)return u(this.m()*O.m());const D=this.g.length+O.g.length,I=[];for(var V=0;V<2*D;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let R=0;R<O.g.length;R++){const B=this.i(V)>>>16,F=this.i(V)&65535,ee=O.i(R)>>>16,Z=O.i(R)&65535;I[2*V+2*R]+=F*Z,A(I,2*V+2*R),I[2*V+2*R+1]+=B*Z,A(I,2*V+2*R+1),I[2*V+2*R+1]+=F*ee,A(I,2*V+2*R+1),I[2*V+2*R+2]+=B*ee,A(I,2*V+2*R+2)}for(O=0;O<D;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=D;O<2*D;O++)I[O]=0;return new o(I,0)};function A(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function j(O,D){this.g=O,this.h=D}function P(O,D){if(b(D))throw Error("division by zero");if(b(O))return new j(h,h);if(w(O))return D=P(_(O),D),new j(_(D.g),_(D.h));if(w(D))return D=P(O,_(D)),new j(_(D.g),D.h);if(O.g.length>30){if(w(O)||w(D))throw Error("slowDivide_ only works with positive integers.");for(var I=p,V=D;V.l(O)<=0;)I=U(I),V=U(V);var R=G(I,1),B=G(V,1);for(V=G(V,2),I=G(I,2);!b(V);){var F=B.add(V);F.l(O)<=0&&(R=R.add(I),B=F),V=G(V,1),I=G(I,1)}return D=N(O,R.j(D)),new j(R,D)}for(R=h;O.l(D)>=0;){for(I=Math.max(1,Math.floor(O.m()/D.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),B=u(I),F=B.j(D);w(F)||F.l(O)>0;)I-=V,B=u(I),F=B.j(D);b(B)&&(B=p),R=R.add(B),O=N(O,F)}return new j(R,O)}t.B=function(O){return P(this,O).h},t.and=function(O){const D=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)&O.i(V);return new o(I,this.h&O.h)},t.or=function(O){const D=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)|O.i(V);return new o(I,this.h|O.h)},t.xor=function(O){const D=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)^O.i(V);return new o(I,this.h^O.h)};function U(O){const D=O.g.length+1,I=[];for(let V=0;V<D;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new o(I,O.h)}function G(O,D){const I=D>>5;D%=32;const V=O.g.length-I,R=[];for(let B=0;B<V;B++)R[B]=D>0?O.i(B+I)>>>D|O.i(B+I+1)<<32-D:O.i(B+I);return new o(R,O.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,OJ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,P0=o}).apply(typeof IB<"u"?IB:typeof self<"u"?self:typeof window<"u"?window:{});var W_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PJ,Eb,RJ,TN,Uk,DJ,MJ,LJ;(function(){var t,e=Object.defineProperty;function r(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof W_=="object"&&W_];for(var K=0;K<T.length;++K){var te=T[K];if(te&&te.Math==Math)return te}throw Error("Cannot find global object")}var n=r(this);function a(T,K){if(K)e:{var te=n;T=T.split(".");for(var we=0;we<T.length-1;we++){var nt=T[we];if(!(nt in te))break e;te=te[nt]}T=T[T.length-1],we=te[T],K=K(we),K!=we&&K!=null&&e(te,T,{configurable:!0,writable:!0,value:K})}}a("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(T){return T||function(K){var te=[],we;for(we in K)Object.prototype.hasOwnProperty.call(K,we)&&te.push([we,K[we]]);return te}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(T){var K=typeof T;return K=="object"&&T!=null||K=="function"}function c(T,K,te){return T.call.apply(T.bind,arguments)}function u(T,K,te){return u=c,u.apply(null,arguments)}function d(T,K){var te=Array.prototype.slice.call(arguments,1);return function(){var we=te.slice();return we.push.apply(we,arguments),T.apply(this,we)}}function h(T,K){function te(){}te.prototype=K.prototype,T.Z=K.prototype,T.prototype=new te,T.prototype.constructor=T,T.Ob=function(we,nt,gt){for(var ar=Array(arguments.length-2),an=2;an<arguments.length;an++)ar[an-2]=arguments[an];return K.prototype[nt].apply(we,ar)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function g(T){const K=T.length;if(K>0){const te=Array(K);for(let we=0;we<K;we++)te[we]=T[we];return te}return[]}function b(T,K){for(let we=1;we<arguments.length;we++){const nt=arguments[we];var te=typeof nt;if(te=te!="object"?te:nt?Array.isArray(nt)?"array":te:"null",te=="array"||te=="object"&&typeof nt.length=="number"){te=T.length||0;const gt=nt.length||0;T.length=te+gt;for(let ar=0;ar<gt;ar++)T[te+ar]=nt[ar]}else T.push(nt)}}class w{constructor(K,te){this.i=K,this.j=te,this.h=0,this.g=null}get(){let K;return this.h>0?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function _(T){o.setTimeout(()=>{throw T},0)}function N(){var T=O;let K=null;return T.g&&(K=T.g,T.g=T.g.next,T.g||(T.h=null),K.next=null),K}class A{constructor(){this.h=this.g=null}add(K,te){const we=j.get();we.set(K,te),this.h?this.h.next=we:this.g=we,this.h=we}}var j=new w(()=>new P,T=>T.reset());class P{constructor(){this.next=this.g=this.h=null}set(K,te){this.h=K,this.g=te,this.next=null}reset(){this.next=this.g=this.h=null}}let U,G=!1,O=new A,D=()=>{const T=Promise.resolve(void 0);U=()=>{T.then(I)}};function I(){for(var T;T=N();){try{T.h.call(T.g)}catch(te){_(te)}var K=j;K.j(T),K.h<100&&(K.h++,T.next=K.g,K.g=T)}G=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(T,K){this.type=T,this.g=this.target=K,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,K=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const te=()=>{};o.addEventListener("test",te,K),o.removeEventListener("test",te,K)}catch{}return T}();function F(T){return/^[\s\xa0]*$/.test(T)}function ee(T,K){R.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,K)}h(ee,R),ee.prototype.init=function(T,K){const te=this.type=T.type,we=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=K,K=T.relatedTarget,K||(te=="mouseover"?K=T.fromElement:te=="mouseout"&&(K=T.toElement)),this.relatedTarget=K,we?(this.clientX=we.clientX!==void 0?we.clientX:we.pageX,this.clientY=we.clientY!==void 0?we.clientY:we.pageY,this.screenX=we.screenX||0,this.screenY=we.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ce=0;function ne(T,K,te,we,nt){this.listener=T,this.proxy=null,this.src=K,this.type=te,this.capture=!!we,this.ha=nt,this.key=++ce,this.da=this.fa=!1}function ae(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function me(T,K,te){for(const we in T)K.call(te,T[we],we,T)}function Ee(T,K){for(const te in T)K.call(void 0,T[te],te,T)}function ye(T){const K={};for(const te in T)K[te]=T[te];return K}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(T,K){let te,we;for(let nt=1;nt<arguments.length;nt++){we=arguments[nt];for(te in we)T[te]=we[te];for(let gt=0;gt<H.length;gt++)te=H[gt],Object.prototype.hasOwnProperty.call(we,te)&&(T[te]=we[te])}}function X(T){this.src=T,this.g={},this.h=0}X.prototype.add=function(T,K,te,we,nt){const gt=T.toString();T=this.g[gt],T||(T=this.g[gt]=[],this.h++);const ar=se(T,K,we,nt);return ar>-1?(K=T[ar],te||(K.fa=!1)):(K=new ne(K,this.src,gt,!!we,nt),K.fa=te,T.push(K)),K};function re(T,K){const te=K.type;if(te in T.g){var we=T.g[te],nt=Array.prototype.indexOf.call(we,K,void 0),gt;(gt=nt>=0)&&Array.prototype.splice.call(we,nt,1),gt&&(ae(K),T.g[te].length==0&&(delete T.g[te],T.h--))}}function se(T,K,te,we){for(let nt=0;nt<T.length;++nt){const gt=T[nt];if(!gt.da&&gt.listener==K&&gt.capture==!!te&&gt.ha==we)return nt}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Ce={};function xe(T,K,te,we,nt){if(Array.isArray(K)){for(let gt=0;gt<K.length;gt++)xe(T,K[gt],te,we,nt);return null}return te=Lt(te),T&&T[Z]?T.J(K,te,l(we)?!!we.capture:!1,nt):Ie(T,K,te,!1,we,nt)}function Ie(T,K,te,we,nt,gt){if(!K)throw Error("Invalid event type");const ar=l(nt)?!!nt.capture:!!nt;let an=Vt(T);if(an||(T[ke]=an=new X(T)),te=an.add(K,te,we,ar,gt),te.proxy)return te;if(we=He(),te.proxy=we,we.src=T,we.listener=te,T.addEventListener)B||(nt=ar),nt===void 0&&(nt=!1),T.addEventListener(K.toString(),we,nt);else if(T.attachEvent)T.attachEvent(Be(K.toString()),we);else if(T.addListener&&T.removeListener)T.addListener(we);else throw Error("addEventListener and attachEvent are unavailable.");return te}function He(){function T(te){return K.call(T.src,T.listener,te)}const K=be;return T}function Ue(T,K,te,we,nt){if(Array.isArray(K))for(var gt=0;gt<K.length;gt++)Ue(T,K[gt],te,we,nt);else we=l(we)?!!we.capture:!!we,te=Lt(te),T&&T[Z]?(T=T.i,gt=String(K).toString(),gt in T.g&&(K=T.g[gt],te=se(K,te,we,nt),te>-1&&(ae(K[te]),Array.prototype.splice.call(K,te,1),K.length==0&&(delete T.g[gt],T.h--)))):T&&(T=Vt(T))&&(K=T.g[K.toString()],T=-1,K&&(T=se(K,te,we,nt)),(te=T>-1?K[T]:null)&&Me(te))}function Me(T){if(typeof T!="number"&&T&&!T.da){var K=T.src;if(K&&K[Z])re(K.i,T);else{var te=T.type,we=T.proxy;K.removeEventListener?K.removeEventListener(te,we,T.capture):K.detachEvent?K.detachEvent(Be(te),we):K.addListener&&K.removeListener&&K.removeListener(we),(te=Vt(K))?(re(te,T),te.h==0&&(te.src=null,K[ke]=null)):ae(T)}}}function Be(T){return T in Ce?Ce[T]:Ce[T]="on"+T}function be(T,K){if(T.da)T=!0;else{K=new ee(K,this);const te=T.listener,we=T.ha||T.src;T.fa&&Me(T),T=te.call(we,K)}return T}function Vt(T){return T=T[ke],T instanceof X?T:null}var ht="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lt(T){return typeof T=="function"?T:(T[ht]||(T[ht]=function(K){return T.handleEvent(K)}),T[ht])}function et(){V.call(this),this.i=new X(this),this.M=this,this.G=null}h(et,V),et.prototype[Z]=!0,et.prototype.removeEventListener=function(T,K,te,we){Ue(this,T,K,te,we)};function Jt(T,K){var te,we=T.G;if(we)for(te=[];we;we=we.G)te.push(we);if(T=T.M,we=K.type||K,typeof K=="string")K=new R(K,T);else if(K instanceof R)K.target=K.target||T;else{var nt=K;K=new R(we,T),Y(K,nt)}nt=!0;let gt,ar;if(te)for(ar=te.length-1;ar>=0;ar--)gt=K.g=te[ar],nt=Ve(gt,we,!0,K)&&nt;if(gt=K.g=T,nt=Ve(gt,we,!0,K)&&nt,nt=Ve(gt,we,!1,K)&&nt,te)for(ar=0;ar<te.length;ar++)gt=K.g=te[ar],nt=Ve(gt,we,!1,K)&&nt}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var T=this.i;for(const K in T.g){const te=T.g[K];for(let we=0;we<te.length;we++)ae(te[we]);delete T.g[K],T.h--}}this.G=null},et.prototype.J=function(T,K,te,we){return this.i.add(String(T),K,!1,te,we)},et.prototype.K=function(T,K,te,we){return this.i.add(String(T),K,!0,te,we)};function Ve(T,K,te,we){if(K=T.i.g[String(K)],!K)return!0;K=K.concat();let nt=!0;for(let gt=0;gt<K.length;++gt){const ar=K[gt];if(ar&&!ar.da&&ar.capture==te){const an=ar.listener,pa=ar.ha||ar.src;ar.fa&&re(T.i,ar),nt=an.call(pa,we)!==!1&&nt}}return nt&&!we.defaultPrevented}function Ft(T,K){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=u(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(K)>2147483647?-1:o.setTimeout(T,K||0)}function qt(T){T.g=Ft(()=>{T.g=null,T.i&&(T.i=!1,qt(T))},T.l);const K=T.h;T.h=null,T.m.apply(null,K)}class Wt extends V{constructor(K,te){super(),this.m=K,this.l=te,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nr(T){V.call(this),this.h=T,this.g={}}h(nr,V);var Xe=[];function Kt(T){me(T.g,function(K,te){this.g.hasOwnProperty(te)&&Me(K)},T),T.g={}}nr.prototype.N=function(){nr.Z.N.call(this),Kt(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=o.JSON.stringify,pt=o.JSON.parse,Ot=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function Ut(){}function Nr(){}var or={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function lt(){R.call(this,"d")}h(lt,R);function lr(){R.call(this,"c")}h(lr,R);var ve={},Ze=null;function at(){return Ze=Ze||new et}ve.Ia="serverreachability";function Qe(T){R.call(this,ve.Ia,T)}h(Qe,R);function ze(T){const K=at();Jt(K,new Qe(K))}ve.STAT_EVENT="statevent";function it(T,K){R.call(this,ve.STAT_EVENT,T),this.stat=K}h(it,R);function At(T){const K=at();Jt(K,new it(K,T))}ve.Ja="timingevent";function er(T,K){R.call(this,ve.Ja,T),this.size=K}h(er,R);function It(T,K){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},K)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function rn(T,K,te,we,nt,gt){T.info(function(){if(T.g)if(gt){var ar="",an=gt.split("&");for(let Tn=0;Tn<an.length;Tn++){var pa=an[Tn].split("=");if(pa.length>1){const xa=pa[0];pa=pa[1];const Ws=xa.split("_");ar=Ws.length>=2&&Ws[1]=="type"?ar+(xa+"="+pa+"&"):ar+(xa+"=redacted&")}}}else ar=null;else ar=gt;return"XMLHTTP REQ ("+we+") [attempt "+nt+"]: "+K+`
`+te+`
`+ar})}function Qr(T,K,te,we,nt,gt,ar){T.info(function(){return"XMLHTTP RESP ("+we+") [ attempt "+nt+"]: "+K+`
`+te+`
`+gt+" "+ar})}function En(T,K,te,we){T.info(function(){return"XMLHTTP TEXT ("+K+"): "+nn(T,te)+(we?" "+we:"")})}function fr(T,K){T.info(function(){return"TIMEOUT: "+K})}Er.prototype.info=function(){};function nn(T,K){if(!T.g)return K;if(!K)return null;try{const gt=JSON.parse(K);if(gt){for(T=0;T<gt.length;T++)if(Array.isArray(gt[T])){var te=gt[T];if(!(te.length<2)){var we=te[1];if(Array.isArray(we)&&!(we.length<1)){var nt=we[0];if(nt!="noop"&&nt!="stop"&&nt!="close")for(let ar=1;ar<we.length;ar++)we[ar]=""}}}}return kt(gt)}catch{return K}}var ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},on={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},In;function qr(){}h(qr,Ut),qr.prototype.g=function(){return new XMLHttpRequest},In=new qr;function un(T){return encodeURIComponent(String(T))}function de(T){var K=1;T=T.split(":");const te=[];for(;K>0&&T.length;)te.push(T.shift()),K--;return T.length&&te.push(T.join(":")),te}function pe(T,K,te,we){this.j=T,this.i=K,this.l=te,this.S=we||1,this.V=new nr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}var Se={},Te={};function Pe(T,K,te){T.M=1,T.A=ka(On(K)),T.u=te,T.R=!0,tt(T,null)}function tt(T,K){T.F=Date.now(),Ge(T),T.B=On(T.A);var te=T.B,we=T.S;Array.isArray(we)||(we=[String(we)]),Zn(te.i,"t",we),T.C=0,te=T.j.L,T.h=new _e,T.g=Sr(T.j,te?K:null,!T.u),T.P>0&&(T.O=new Wt(u(T.Y,T,T.g),T.P)),K=T.V,te=T.g,we=T.ba;var nt="readystatechange";Array.isArray(nt)||(nt&&(Xe[0]=nt.toString()),nt=Xe);for(let gt=0;gt<nt.length;gt++){const ar=xe(te,nt[gt],we||K.handleEvent,!1,K.h||K);if(!ar)break;K.g[ar.key]=ar}K=T.J?ye(T.J):{},T.u?(T.v||(T.v="POST"),K["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,K)):(T.v="GET",T.g.ea(T.B,T.v,null,K)),ze(),rn(T.i,T.v,T.B,T.l,T.S,T.u)}pe.prototype.ba=function(T){T=T.target;const K=this.O;K&&oo(T)==3?K.j():this.Y(T)},pe.prototype.Y=function(T){try{if(T==this.g)e:{const an=oo(this.g),pa=this.g.ya(),Tn=this.g.ca();if(!(an<3)&&(an!=3||this.g&&(this.h.h||this.g.la()||Sl(this.g)))){this.K||an!=4||pa==7||(pa==8||Tn<=0?ze(3):ze(2)),St(this);var K=this.g.ca();this.X=K;var te=jt(this);if(this.o=K==200,Qr(this.i,this.v,this.B,this.l,this.S,an,K),this.o){if(this.U&&!this.L){t:{if(this.g){var we,nt=this.g;if((we=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(we)){var gt=we;break t}}gt=null}if(T=gt)En(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xt(this,T);else{this.o=!1,this.m=3,At(12),Ct(this),xt(this);break e}}if(this.R){T=!0;let xa;for(;!this.K&&this.C<te.length;)if(xa=Ae(this,te),xa==Te){an==4&&(this.m=4,At(14),T=!1),En(this.i,this.l,null,"[Incomplete Response]");break}else if(xa==Se){this.m=4,At(15),En(this.i,this.l,te,"[Invalid Chunk]"),T=!1;break}else En(this.i,this.l,xa,null),Xt(this,xa);if(st(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||te.length!=0||this.h.h||(this.m=1,At(16),T=!1),this.o=this.o&&T,!T)En(this.i,this.l,te,"[Invalid Chunked Response]"),Ct(this),xt(this);else if(te.length>0&&!this.W){this.W=!0;var ar=this.j;ar.g==this&&ar.aa&&!ar.P&&(ar.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Et(ar),ar.P=!0,At(11))}}else En(this.i,this.l,te,null),Xt(this,te);an==4&&Ct(this),this.o&&!this.K&&(an==4?De(this.j,this):(this.o=!1,Ge(this)))}else tl(this.g),K==400&&te.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Ct(this),xt(this)}}}catch{}finally{}};function jt(T){if(!st(T))return T.g.la();const K=Sl(T.g);if(K==="")return"";let te="";const we=K.length,nt=oo(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return Ct(T),xt(T),"";T.h.i=new o.TextDecoder}for(let gt=0;gt<we;gt++)T.h.h=!0,te+=T.h.i.decode(K[gt],{stream:!(nt&&gt==we-1)});return K.length=0,T.h.g+=te,T.C=0,T.h.g}function st(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function Ae(T,K){var te=T.C,we=K.indexOf(`
`,te);return we==-1?Te:(te=Number(K.substring(te,we)),isNaN(te)?Se:(we+=1,we+te>K.length?Te:(K=K.slice(we,we+te),T.C=we+te,K)))}pe.prototype.cancel=function(){this.K=!0,Ct(this)};function Ge(T){T.T=Date.now()+T.H,ct(T,T.H)}function ct(T,K){if(T.D!=null)throw Error("WatchDog timer not null");T.D=It(u(T.aa,T),K)}function St(T){T.D&&(o.clearTimeout(T.D),T.D=null)}pe.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(fr(this.i,this.B),this.M!=2&&(ze(),At(17)),Ct(this),this.m=2,xt(this)):ct(this,this.T-T)};function xt(T){T.j.I==0||T.K||De(T.j,T)}function Ct(T){St(T);var K=T.O;K&&typeof K.dispose=="function"&&K.dispose(),T.O=null,Kt(T.V),T.g&&(K=T.g,T.g=null,K.abort(),K.dispose())}function Xt(T,K){try{var te=T.j;if(te.I!=0&&(te.g==T||$a(te.h,T))){if(!T.L&&$a(te.h,T)&&te.I==3){try{var we=te.Ba.g.parse(K)}catch{we=null}if(Array.isArray(we)&&we.length==3){var nt=we;if(nt[0]==0){e:if(!te.v){if(te.g)if(te.g.F+3e3<T.F)ie(te),ac(te);else break e;sc(te),At(18)}}else te.xa=nt[1],0<te.xa-te.K&&nt[2]<37500&&te.F&&te.A==0&&!te.C&&(te.C=It(u(te.Va,te),6e3));Gr(te.h)<=1&&te.ta&&(te.ta=void 0)}else rt(te,11)}else if((T.L||te.g==T)&&ie(te),!F(K))for(nt=te.Ba.g.parse(K),K=0;K<nt.length;K++){let Tn=nt[K];const xa=Tn[0];if(!(xa<=te.K))if(te.K=xa,Tn=Tn[1],te.I==2)if(Tn[0]=="c"){te.M=Tn[1],te.ba=Tn[2];const Ws=Tn[3];Ws!=null&&(te.ka=Ws,te.j.info("VER="+te.ka));const lo=Tn[4];lo!=null&&(te.za=lo,te.j.info("SVER="+te.za));const ta=Tn[5];ta!=null&&typeof ta=="number"&&ta>0&&(we=1.5*ta,te.O=we,te.j.info("backChannelRequestTimeoutMs_="+we)),we=te;const oi=T.g;if(oi){const jl=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jl){var gt=we.h;gt.g||jl.indexOf("spdy")==-1&&jl.indexOf("quic")==-1&&jl.indexOf("h2")==-1||(gt.j=gt.l,gt.g=new Set,gt.h&&(ws(gt,gt.h),gt.h=null))}if(we.G){const rl=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(we.wa=rl,zr(we.J,we.G,rl))}}te.I=3,te.l&&te.l.ra(),te.aa&&(te.T=Date.now()-T.F,te.j.info("Handshake RTT: "+te.T+"ms")),we=te;var ar=T;if(we.na=Qt(we,we.L?we.ba:null,we.W),ar.L){hn(we.h,ar);var an=ar,pa=we.O;pa&&(an.H=pa),an.D&&(St(an),Ge(an)),we.g=ar}else Oo(we);te.i.length>0&&Fu(te)}else Tn[0]!="stop"&&Tn[0]!="close"||rt(te,7);else te.I==3&&(Tn[0]=="stop"||Tn[0]=="close"?Tn[0]=="stop"?rt(te,7):nc(te):Tn[0]!="noop"&&te.l&&te.l.qa(Tn),te.A=0)}}ze(4)}catch{}}var br=class{constructor(T,K){this.g=T,this.map=K}};function _t(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yr(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Gr(T){return T.h?1:T.g?T.g.size:0}function $a(T,K){return T.h?T.h==K:T.g?T.g.has(K):!1}function ws(T,K){T.g?T.g.add(K):T.h=K}function hn(T,K){T.h&&T.h==K?T.h=null:T.g&&T.g.has(K)&&T.g.delete(K)}_t.prototype.cancel=function(){if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function ln(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let K=T.i;for(const te of T.g.values())K=K.concat(te.G);return K}return g(T.i)}var sn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ls(T,K){if(T){T=T.split("&");for(let te=0;te<T.length;te++){const we=T[te].indexOf("=");let nt,gt=null;we>=0?(nt=T[te].substring(0,we),gt=T[te].substring(we+1)):nt=T[te],K(nt,gt?decodeURIComponent(gt.replace(/\+/g," ")):"")}}}function ii(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let K;T instanceof ii?(this.l=T.l,Yn(this,T.j),this.o=T.o,this.g=T.g,Ts(this,T.u),this.h=T.h,Vi(this,yt(T.i)),this.m=T.m):T&&(K=String(T).match(sn))?(this.l=!1,Yn(this,K[1]||"",!0),this.o=$i(K[2]||""),this.g=$i(K[3]||"",!0),Ts(this,K[4]),this.h=$i(K[5]||"",!0),Vi(this,K[6]||"",!0),this.m=$i(K[7]||"")):(this.l=!1,this.i=new qa(null,this.l))}ii.prototype.toString=function(){const T=[];var K=this.j;K&&T.push(Mn(K,Ha,!0),":");var te=this.g;return(te||K=="file")&&(T.push("//"),(K=this.o)&&T.push(Mn(K,Ha,!0),"@"),T.push(un(te).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),te=this.u,te!=null&&T.push(":",String(te))),(te=this.h)&&(this.g&&te.charAt(0)!="/"&&T.push("/"),T.push(Mn(te,te.charAt(0)=="/"?Oe:ut,!0))),(te=this.i.toString())&&T.push("?",te),(te=this.m)&&T.push("#",Mn(te,Ia)),T.join("")},ii.prototype.resolve=function(T){const K=On(this);let te=!!T.j;te?Yn(K,T.j):te=!!T.o,te?K.o=T.o:te=!!T.g,te?K.g=T.g:te=T.u!=null;var we=T.h;if(te)Ts(K,T.u);else if(te=!!T.h){if(we.charAt(0)!="/")if(this.g&&!this.h)we="/"+we;else{var nt=K.h.lastIndexOf("/");nt!=-1&&(we=K.h.slice(0,nt+1)+we)}if(nt=we,nt==".."||nt==".")we="";else if(nt.indexOf("./")!=-1||nt.indexOf("/.")!=-1){we=nt.lastIndexOf("/",0)==0,nt=nt.split("/");const gt=[];for(let ar=0;ar<nt.length;){const an=nt[ar++];an=="."?we&&ar==nt.length&&gt.push(""):an==".."?((gt.length>1||gt.length==1&&gt[0]!="")&&gt.pop(),we&&ar==nt.length&&gt.push("")):(gt.push(an),we=!0)}we=gt.join("/")}else we=nt}return te?K.h=we:te=T.i.toString()!=="",te?Vi(K,yt(T.i)):te=!!T.m,te&&(K.m=T.m),K};function On(T){return new ii(T)}function Yn(T,K,te){T.j=te?$i(K,!0):K,T.j&&(T.j=T.j.replace(/:$/,""))}function Ts(T,K){if(K){if(K=Number(K),isNaN(K)||K<0)throw Error("Bad port number "+K);T.u=K}else T.u=null}function Vi(T,K,te){K instanceof qa?(T.i=K,jr(T.i,T.l)):(te||(K=Mn(K,Ar)),T.i=new qa(K,T.l))}function zr(T,K,te){T.i.set(K,te)}function ka(T){return zr(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function $i(T,K){return T?K?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Mn(T,K,te){return typeof T=="string"?(T=encodeURI(T).replace(K,Ln),te&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Ln(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Ha=/[#\/\?@]/g,ut=/[#\?:]/g,Oe=/[#\?]/g,Ar=/[#\?@]/g,Ia=/#/g;function qa(T,K){this.h=this.g=null,this.i=T||null,this.j=!!K}function qs(T){T.g||(T.g=new Map,T.h=0,T.i&&ls(T.i,function(K,te){T.add(decodeURIComponent(K.replace(/\+/g," ")),te)}))}t=qa.prototype,t.add=function(T,K){qs(this),this.i=null,T=mr(this,T);let te=this.g.get(T);return te||this.g.set(T,te=[]),te.push(K),this.h+=1,this};function Zo(T,K){qs(T),K=mr(T,K),T.g.has(K)&&(T.i=null,T.h-=T.g.get(K).length,T.g.delete(K))}function Cs(T,K){return qs(T),K=mr(T,K),T.g.has(K)}t.forEach=function(T,K){qs(this),this.g.forEach(function(te,we){te.forEach(function(nt){T.call(K,nt,we,this)},this)},this)};function Dr(T,K){qs(T);let te=[];if(typeof K=="string")Cs(T,K)&&(te=te.concat(T.g.get(mr(T,K))));else for(T=Array.from(T.g.values()),K=0;K<T.length;K++)te=te.concat(T[K]);return te}t.set=function(T,K){return qs(this),this.i=null,T=mr(this,T),Cs(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[K]),this.h+=1,this},t.get=function(T,K){return T?(T=Dr(this,T),T.length>0?String(T[0]):K):K};function Zn(T,K,te){Zo(T,K),te.length>0&&(T.i=null,T.g.set(mr(T,K),g(te)),T.h+=te.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],K=Array.from(this.g.keys());for(let we=0;we<K.length;we++){var te=K[we];const nt=un(te);te=Dr(this,te);for(let gt=0;gt<te.length;gt++){let ar=nt;te[gt]!==""&&(ar+="="+un(te[gt])),T.push(ar)}}return this.i=T.join("&")};function yt(T){const K=new qa;return K.i=T.i,T.g&&(K.g=new Map(T.g),K.h=T.h),K}function mr(T,K){return K=String(K),T.j&&(K=K.toLowerCase()),K}function jr(T,K){K&&!T.j&&(qs(T),T.i=null,T.g.forEach(function(te,we){const nt=we.toLowerCase();we!=nt&&(Zo(this,we),Zn(this,nt,te))},T)),T.j=K}function Dn(T,K){const te=new Er;if(o.Image){const we=new Image;we.onload=d(Jr,te,"TestLoadImage: loaded",!0,K,we),we.onerror=d(Jr,te,"TestLoadImage: error",!1,K,we),we.onabort=d(Jr,te,"TestLoadImage: abort",!1,K,we),we.ontimeout=d(Jr,te,"TestLoadImage: timeout",!1,K,we),o.setTimeout(function(){we.ontimeout&&we.ontimeout()},1e4),we.src=T}else K(!1)}function pn(T,K){const te=new Er,we=new AbortController,nt=setTimeout(()=>{we.abort(),Jr(te,"TestPingServer: timeout",!1,K)},1e4);fetch(T,{signal:we.signal}).then(gt=>{clearTimeout(nt),gt.ok?Jr(te,"TestPingServer: ok",!0,K):Jr(te,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(nt),Jr(te,"TestPingServer: error",!1,K)})}function Jr(T,K,te,we,nt){try{nt&&(nt.onload=null,nt.onerror=null,nt.onabort=null,nt.ontimeout=null),we(te)}catch{}}function ur(){this.g=new Ot}function $n(T){this.i=T.Sb||null,this.h=T.ab||!1}h($n,Ut),$n.prototype.g=function(){return new ks(this.i,this.h)};function ks(T,K){et.call(this),this.H=T,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(ks,et),t=ks.prototype,t.open=function(T,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=K,this.readyState=1,Ur(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const K={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(K.body=T),(this.H||o).fetch(new Request(this.D,K)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},t.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ir(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ir(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}t.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var K=T.value?T.value:new Uint8Array(0);(K=this.B.decode(K,{stream:!T.done}))&&(this.response=this.responseText+=K)}T.done?Gs(this):Ur(this),this.readyState==3&&Ir(this)}},t.Oa=function(T){this.g&&(this.response=this.responseText=T,Gs(this))},t.Na=function(T){this.g&&(this.response=T,Gs(this))},t.ga=function(){this.g&&Gs(this)};function Gs(T){T.readyState=4,T.l=null,T.j=null,T.B=null,Ur(T)}t.setRequestHeader=function(T,K){this.A.append(T,K)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],K=this.h.entries();for(var te=K.next();!te.done;)te=te.value,T.push(te[0]+": "+te[1]),te=K.next();return T.join(`\r
`)};function Ur(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function ha(T){let K="";return me(T,function(te,we){K+=we,K+=":",K+=te,K+=`\r
`}),K}function af(T,K,te){e:{for(we in te){var we=!1;break e}we=!0}we||(te=ha(te),typeof T=="string"?te!=null&&un(te):zr(T,K,te))}function ma(T){et.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ma,et);var Mu=/^https?$/i,Qo=["POST","PUT"];t=ma.prototype,t.Fa=function(T){this.H=T},t.ea=function(T,K,te,we){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);K=K?K.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():In.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(K,String(T),!0),this.B=!1}catch(gt){Gc(this,gt);return}if(T=te||"",te=new Map(this.headers),we)if(Object.getPrototypeOf(we)===Object.prototype)for(var nt in we)te.set(nt,we[nt]);else if(typeof we.keys=="function"&&typeof we.get=="function")for(const gt of we.keys())te.set(gt,we.get(gt));else throw Error("Unknown input type for opt_headers: "+String(we));we=Array.from(te.keys()).find(gt=>gt.toLowerCase()=="content-type"),nt=o.FormData&&T instanceof o.FormData,!(Array.prototype.indexOf.call(Qo,K,void 0)>=0)||we||nt||te.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[gt,ar]of te)this.g.setRequestHeader(gt,ar);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(gt){Gc(this,gt)}};function Gc(T,K){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=K,T.o=5,Jo(T),Al(T)}function Jo(T){T.A||(T.A=!0,Jt(T,"complete"),Jt(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,Jt(this,"complete"),Jt(this,"abort"),Al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Al(this,!0)),ma.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?el(this):this.Xa())},t.Xa=function(){el(this)};function el(T){if(T.h&&typeof s<"u"){if(T.v&&oo(T)==4)setTimeout(T.Ca.bind(T),0);else if(Jt(T,"readystatechange"),oo(T)==4){T.h=!1;try{const gt=T.ca();e:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break e;default:K=!1}var te;if(!(te=K)){var we;if(we=gt===0){let ar=String(T.D).match(sn)[1]||null;!ar&&o.self&&o.self.location&&(ar=o.self.location.protocol.slice(0,-1)),we=!Mu.test(ar?ar.toLowerCase():"")}te=we}if(te)Jt(T,"complete"),Jt(T,"success");else{T.o=6;try{var nt=oo(T)>2?T.g.statusText:""}catch{nt=""}T.l=nt+" ["+T.ca()+"]",Jo(T)}}finally{Al(T)}}}}function Al(T,K){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const te=T.g;T.g=null,K||Jt(T,"ready");try{te.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function oo(T){return T.g?T.g.readyState:0}t.ca=function(){try{return oo(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(T){if(this.g){var K=this.g.responseText;return T&&K.indexOf(T)==0&&(K=K.substring(T.length)),pt(K)}};function Sl(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function tl(T){const K={};T=(T.g&&oo(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let we=0;we<T.length;we++){if(F(T[we]))continue;var te=de(T[we]);const nt=te[0];if(te=te[1],typeof te!="string")continue;te=te.trim();const gt=K[nt]||[];K[nt]=gt,gt.push(te)}Ee(K,function(we){return we.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(T,K,te){return te&&te.internalChannelParams&&te.internalChannelParams[T]||K}function Lu(T){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oa("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oa("baseRetryDelayMs",5e3,T),this.Za=Oa("retryDelaySeedMs",1e4,T),this.Ta=Oa("forwardChannelMaxRetries",2,T),this.va=Oa("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new _t(T&&T.concurrentRequestLimit),this.Ba=new ur,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Lu.prototype,t.ka=8,t.I=1,t.connect=function(T,K,te,we){At(0),this.W=T,this.H=K||{},te&&we!==void 0&&(this.H.OSID=te,this.H.OAID=we),this.F=this.X,this.J=Qt(this,null,this.W),Fu(this)};function nc(T){if(Wc(T),T.I==3){var K=T.V++,te=On(T.J);if(zr(te,"SID",T.M),zr(te,"RID",K),zr(te,"TYPE","terminate"),Hi(T,te),K=new pe(T,T.j,K),K.M=2,K.A=ka(On(te)),te=!1,o.navigator&&o.navigator.sendBeacon)try{te=o.navigator.sendBeacon(K.A.toString(),"")}catch{}!te&&o.Image&&(new Image().src=K.A,te=!0),te||(K.g=Sr(K.j,null),K.g.ea(K.A)),K.F=Date.now(),Ge(K)}Rt(T)}function ac(T){T.g&&(Et(T),T.g.cancel(),T.g=null)}function Wc(T){ac(T),T.v&&(o.clearTimeout(T.v),T.v=null),ie(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&o.clearTimeout(T.m),T.m=null)}function Fu(T){if(!Yr(T.h)&&!T.m){T.m=!0;var K=T.Ea;U||D(),G||(U(),G=!0),O.add(K,T),T.D=0}}function Dh(T,K){return Gr(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=K.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=It(u(T.Ea,T,K),qe(T,T.D)),T.D++,!0)}t.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const nt=new pe(this,this.j,T);let gt=this.o;if(this.U&&(gt?(gt=ye(gt),Y(gt,this.U)):gt=this.U),this.u!==null||this.R||(nt.J=gt,gt=null),this.S)e:{for(var K=0,te=0;te<this.i.length;te++){t:{var we=this.i[te];if("__data__"in we.map&&(we=we.map.__data__,typeof we=="string")){we=we.length;break t}we=void 0}if(we===void 0)break;if(K+=we,K>4096){K=te;break e}if(K===4096||te===this.i.length-1){K=te+1;break e}}K=1e3}else K=1e3;K=Kc(this,nt,K),te=On(this.J),zr(te,"RID",T),zr(te,"CVER",22),this.G&&zr(te,"X-HTTP-Session-Id",this.G),Hi(this,te),gt&&(this.R?K="headers="+un(ha(gt))+"&"+K:this.u&&af(te,this.u,gt)),ws(this.h,nt),this.Ra&&zr(te,"TYPE","init"),this.S?(zr(te,"$req",K),zr(te,"SID","null"),nt.U=!0,Pe(nt,te,null)):Pe(nt,te,K),this.I=2}}else this.I==3&&(T?An(this,T):this.i.length==0||Yr(this.h)||An(this))};function An(T,K){var te;K?te=K.l:te=T.V++;const we=On(T.J);zr(we,"SID",T.M),zr(we,"RID",te),zr(we,"AID",T.K),Hi(T,we),T.u&&T.o&&af(we,T.u,T.o),te=new pe(T,T.j,te,T.D+1),T.u===null&&(te.J=T.o),K&&(T.i=K.G.concat(T.i)),K=Kc(T,te,1e3),te.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),ws(T.h,te),Pe(te,we,K)}function Hi(T,K){T.H&&me(T.H,function(te,we){zr(K,we,te)}),T.l&&me({},function(te,we){zr(K,we,te)})}function Kc(T,K,te){te=Math.min(T.i.length,te);const we=T.l?u(T.l.Ka,T.l,T):null;e:{var nt=T.i;let an=-1;for(;;){const pa=["count="+te];an==-1?te>0?(an=nt[0].g,pa.push("ofs="+an)):an=0:pa.push("ofs="+an);let Tn=!0;for(let xa=0;xa<te;xa++){var gt=nt[xa].g;const Ws=nt[xa].map;if(gt-=an,gt<0)an=Math.max(0,nt[xa].g-100),Tn=!1;else try{gt="req"+gt+"_"||"";try{var ar=Ws instanceof Map?Ws:Object.entries(Ws);for(const[lo,ta]of ar){let oi=ta;l(ta)&&(oi=kt(ta)),pa.push(gt+lo+"="+encodeURIComponent(oi))}}catch(lo){throw pa.push(gt+"type="+encodeURIComponent("_badmap")),lo}}catch{we&&we(Ws)}}if(Tn){ar=pa.join("&");break e}}ar=void 0}return T=T.i.splice(0,te),K.G=T,ar}function Oo(T){if(!T.g&&!T.v){T.Y=1;var K=T.Da;U||D(),G||(U(),G=!0),O.add(K,T),T.A=0}}function sc(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=It(u(T.Da,T),qe(T,T.A)),T.A++,!0)}t.Da=function(){if(this.v=null,z(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=It(u(this.Wa,this),T)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),ac(this),z(this))};function Et(T){T.B!=null&&(o.clearTimeout(T.B),T.B=null)}function z(T){T.g=new pe(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var K=On(T.na);zr(K,"RID","rpc"),zr(K,"SID",T.M),zr(K,"AID",T.K),zr(K,"CI",T.F?"0":"1"),!T.F&&T.ia&&zr(K,"TO",T.ia),zr(K,"TYPE","xmlhttp"),Hi(T,K),T.u&&T.o&&af(K,T.u,T.o),T.O&&(T.g.H=T.O);var te=T.g;T=T.ba,te.M=1,te.A=ka(On(K)),te.u=null,te.R=!0,tt(te,T)}t.Va=function(){this.C!=null&&(this.C=null,ac(this),sc(this),At(19))};function ie(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function De(T,K){var te=null;if(T.g==K){ie(T),Et(T),T.g=null;var we=2}else if($a(T.h,K))te=K.G,hn(T.h,K),we=1;else return;if(T.I!=0){if(K.o)if(we==1){te=K.u?K.u.length:0,K=Date.now()-K.F;var nt=T.D;we=at(),Jt(we,new er(we,te)),Fu(T)}else Oo(T);else if(nt=K.m,nt==3||nt==0&&K.X>0||!(we==1&&Dh(T,K)||we==2&&sc(T)))switch(te&&te.length>0&&(K=T.h,K.i=K.i.concat(te)),nt){case 1:rt(T,5);break;case 4:rt(T,10);break;case 3:rt(T,6);break;default:rt(T,2)}}}function qe(T,K){let te=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||(te*=2),te*K}function rt(T,K){if(T.j.info("Error code "+K),K==2){var te=u(T.bb,T),we=T.Ua;const nt=!we;we=new ii(we||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Yn(we,"https"),ka(we),nt?Dn(we.toString(),te):pn(we.toString(),te)}else At(2);T.I=0,T.l&&T.l.pa(K),Rt(T),Wc(T)}t.bb=function(T){T?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Rt(T){if(T.I=0,T.ja=[],T.l){const K=ln(T.h);(K.length!=0||T.i.length!=0)&&(b(T.ja,K),b(T.ja,T.i),T.h.i.length=0,g(T.i),T.i.length=0),T.l.oa()}}function Qt(T,K,te){var we=te instanceof ii?On(te):new ii(te);if(we.g!="")K&&(we.g=K+"."+we.g),Ts(we,we.u);else{var nt=o.location;we=nt.protocol,K=K?K+"."+nt.hostname:nt.hostname,nt=+nt.port;const gt=new ii(null);we&&Yn(gt,we),K&&(gt.g=K),nt&&Ts(gt,nt),te&&(gt.h=te),we=gt}return te=T.G,K=T.wa,te&&K&&zr(we,te,K),zr(we,"VER",T.ka),Hi(T,we),we}function Sr(T,K,te){if(K&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return K=T.Aa&&!T.ma?new ma(new $n({ab:te})):new ma(T.ma),K.Fa(T.L),K}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vr(){}t=vr.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kr(){}Kr.prototype.g=function(T,K){return new yr(T,K)};function yr(T,K){et.call(this),this.g=new Lu(K),this.l=T,this.h=K&&K.messageUrlParams||null,T=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(T?T["X-WebChannel-Content-Type"]=K.messageContentType:T={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.sa&&(T?T["X-WebChannel-Client-Profile"]=K.sa:T={"X-WebChannel-Client-Profile":K.sa}),this.g.U=T,(T=K&&K.Qb)&&!F(T)&&(this.g.u=T),this.A=K&&K.supportsCrossDomainXhr||!1,this.v=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!F(K)&&(this.g.G=K,T=this.h,T!==null&&K in T&&(T=this.h,K in T&&delete T[K])),this.j=new Xr(this)}h(yr,et),yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){nc(this.g)},yr.prototype.o=function(T){var K=this.g;if(typeof T=="string"){var te={};te.__data__=T,T=te}else this.v&&(te={},te.__data__=kt(T),T=te);K.i.push(new br(K.Ya++,T)),K.I==3&&Fu(K)},yr.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,yr.Z.N.call(this)};function Pn(T){lt.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var K=T.__sm__;if(K){e:{for(const te in K){T=te;break e}T=void 0}(this.i=T)&&(T=this.i,K=K!==null&&T in K?K[T]:void 0),this.data=K}else this.data=T}h(Pn,lt);function Gn(){lr.call(this),this.status=1}h(Gn,lr);function Xr(T){this.g=T}h(Xr,vr),Xr.prototype.ra=function(){Jt(this.g,"a")},Xr.prototype.qa=function(T){Jt(this.g,new Pn(T))},Xr.prototype.pa=function(T){Jt(this.g,new Gn)},Xr.prototype.oa=function(){Jt(this.g,"b")},Kr.prototype.createWebChannel=Kr.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,LJ=function(){return new Kr},MJ=function(){return at()},DJ=ve,Uk={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,TN=ea,on.COMPLETE="complete",RJ=on,Nr.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",et.prototype.listen=et.prototype.J,Eb=Nr,ma.prototype.listenOnce=ma.prototype.K,ma.prototype.getLastError=ma.prototype.Ha,ma.prototype.getLastErrorCode=ma.prototype.ya,ma.prototype.getStatus=ma.prototype.ca,ma.prototype.getResponseJson=ma.prototype.La,ma.prototype.getResponseText=ma.prototype.la,ma.prototype.send=ma.prototype.ea,ma.prototype.setWithCredentials=ma.prototype.Fa,PJ=ma}).apply(typeof W_<"u"?W_:typeof self<"u"?self:typeof window<"u"?window:{});const OB="@firebase/firestore",PB="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};wo.UNAUTHENTICATED=new wo(null),wo.GOOGLE_CREDENTIALS=new wo("google-credentials-uid"),wo.FIRST_PARTY=new wo("first-party-uid"),wo.MOCK_USER=new wo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sv="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=new EP("@firebase/firestore");function Xg(){return Dp.logLevel}function cr(t,...e){if(Dp.logLevel<=Un.DEBUG){const r=e.map(DP);Dp.debug(`Firestore (${sv}): ${t}`,...r)}}function fl(t,...e){if(Dp.logLevel<=Un.ERROR){const r=e.map(DP);Dp.error(`Firestore (${sv}): ${t}`,...r)}}function mx(t,...e){if(Dp.logLevel<=Un.WARN){const r=e.map(DP);Dp.warn(`Firestore (${sv}): ${t}`,...r)}}function DP(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,FJ(t,n,r)}function FJ(t,e,r){let n=`FIRESTORE (${sv}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw fl(n),new Error(n)}function Hr(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||FJ(e,a,n)}function gn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gr extends rf{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i2e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(wo.UNAUTHENTICATED))}shutdown(){}}class o2e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class l2e{constructor(e){this.t=e,this.currentUser=wo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Hr(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Gf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gf,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{cr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(cr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gf)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(cr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Hr(typeof n.accessToken=="string",31837,{l:n}),new BJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Hr(e===null||typeof e=="string",2055,{h:e}),new wo(e)}}class c2e{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=wo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u2e{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new c2e(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(wo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d2e{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mu(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Hr(this.o===void 0,3512);const n=s=>{s.error!=null&&cr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,cr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{cr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):cr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new RB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Hr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new RB(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=f2e(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function xn(t,e){return t<e?-1:t>e?1:0}function zk(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return Rj(a)===Rj(s)?xn(a,s):Rj(a)?1:-1}return xn(t.length,e.length)}const h2e=55296,m2e=57343;function Rj(t){const e=t.charCodeAt(0);return e>=h2e&&e<=m2e}function px(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function UJ(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB="__name__";class Ed{constructor(e,r,n){r===void 0?r=0:r>e.length&&Rr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Rr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Ed.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ed?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=Ed.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return xn(e.length,r.length)}static compareSegments(e,r){const n=Ed.isNumericId(e),a=Ed.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?Ed.extractNumericId(e).compare(Ed.extractNumericId(r)):zk(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return P0.fromString(e.substring(4,e.length-2))}}class ca extends Ed{construct(e,r,n){return new ca(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new gr(Mt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ca(r)}static emptyPath(){return new ca([])}}const p2e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Es extends Ed{construct(e,r,n){return new Es(e,r,n)}static isValidIdentifier(e){return p2e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Es.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DB}static keyField(){return new Es([DB])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new gr(Mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new gr(Mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new gr(Mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new gr(Mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Es(r)}static emptyPath(){return new Es([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.path=e}static fromPath(e){return new _r(ca.fromString(e))}static fromName(e){return new _r(ca.fromString(e).popFirst(5))}static empty(){return new _r(ca.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ca.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ca.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _r(new ca(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(t,e,r){if(!r)throw new gr(Mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g2e(t,e,r,n){if(e===!0&&n===!0)throw new gr(Mt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function MB(t){if(!_r.isDocumentKey(t))throw new gr(Mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LB(t){if(_r.isDocumentKey(t))throw new gr(Mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VJ(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vA(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Rr(12329,{type:typeof t})}function Wf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new gr(Mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vA(t);throw new gr(Mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function x2e(t,e){if(e<=0)throw new gr(Mt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e){const r={typeString:t};return e&&(r.value=e),r}function nw(t,e){if(!VJ(t))throw new gr(Mt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new gr(Mt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB=-62135596800,BB=1e6;class na{static now(){return na.fromMillis(Date.now())}static fromDate(e){return na.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*BB);return new na(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new gr(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new gr(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<FB)throw new gr(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gr(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BB}_compareTo(e){return this.seconds===e.seconds?xn(this.nanoseconds,e.nanoseconds):xn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:na._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nw(e,na._jsonSchema))return new na(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-FB;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}na._jsonSchemaVersion="firestore/timestamp/1.0",na._jsonSchema={type:vi("string",na._jsonSchemaVersion),seconds:vi("number"),nanoseconds:vi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{static fromTimestamp(e){return new Zr(e)}static min(){return new Zr(new na(0,0))}static max(){return new Zr(new na(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=-1;class t3{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function Vk(t){return t.fields.find(e=>e.kind===2)}function Bm(t){return t.fields.filter(e=>e.kind!==2)}t3.UNKNOWN_ID=-1;class CN{constructor(e,r){this.fieldPath=e,this.kind=r}}class U2{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new U2(0,Uc.min())}}function v2e(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Zr.fromTimestamp(n===1e9?new na(r+1,0):new na(r,n));return new Uc(a,_r.empty(),e)}function $J(t){return new Uc(t.readTime,t.key,B2)}class Uc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Uc(Zr.min(),_r.empty(),B2)}static max(){return new Uc(Zr.max(),_r.empty(),B2)}}function LP(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=_r.comparator(t.documentKey,e.documentKey),r!==0?r:xn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ug(t){if(t.code!==Mt.FAILED_PRECONDITION||t.message!==HJ)throw t;cr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Rr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ft((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ft?r:ft.resolve(r)}catch(r){return ft.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ft.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ft.reject(r)}static resolve(e){return new ft((r,n)=>{r(e)})}static reject(e){return new ft((r,n)=>{n(e)})}static waitFor(e){return new ft((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=ft.resolve(!1);for(const n of e)r=r.next(a=>a?ft.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new ft((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new ft((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="SimpleDb";class bA{static open(e,r,n,a){try{return new bA(r,e.transaction(a,n))}catch(s){throw new Yb(r,s)}}constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.S=new Gf,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{r.error?this.S.reject(new Yb(e,r.error)):this.S.resolve()},this.transaction.onerror=n=>{const a=FP(n.target.error);this.S.reject(new Yb(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(cr(vc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new y2e(r)}}class R0{static delete(e){return cr(vc,"Removing database:",e),Gm(AQ().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!RQ())return!1;if(R0.F())return!0;const e=Mi(),r=R0.M(e),n=0<r&&r<10,a=GJ(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,r){return e.store(r)}static M(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,r,n){this.name=e,this.version=r,this.N=n,this.B=null,R0.M(Mi())===12.2&&fl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(cr(vc,"Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new Yb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new gr(Mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new gr(Mt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new Yb(e,o))},a.onupgradeneeded=s=>{cr(vc,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,a.transaction,s.oldVersion,this.version).next(()=>{cr(vc,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=r=>this.q(r)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const l=bA.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.C(),u)).catch(u=>(l.abort(u),ft.reject(u))).toPromise();return c.catch(()=>{}),await l.D,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(cr(vc,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function GJ(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class b2e{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Gm(this.U.delete())}}class Yb extends gr{constructor(e,r){super(Mt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function hm(t){return t.name==="IndexedDbTransactionError"}class y2e{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(cr(vc,"PUT",this.store.name,e,r),n=this.store.put(r,e)):(cr(vc,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Gm(n)}add(e){return cr(vc,"ADD",this.store.name,e,e),Gm(this.store.add(e))}get(e){return Gm(this.store.get(e)).next(r=>(r===void 0&&(r=null),cr(vc,"GET",this.store.name,e,r),r))}delete(e){return cr(vc,"DELETE",this.store.name,e),Gm(this.store.delete(e))}count(){return cr(vc,"COUNT",this.store.name),Gm(this.store.count())}J(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new ft((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.H(s,(l,c)=>{o.push(c)}).next(()=>o)}}Y(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new ft((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}Z(e,r){cr(vc,"DELETE ALL",this.store.name);const n=this.options(e,r);n.X=!1;const a=this.cursor(n);return this.H(a,(s,o,l)=>l.delete())}ee(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.H(a,r)}te(e){const r=this.cursor({});return new ft((n,a)=>{r.onerror=s=>{const o=FP(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}H(e,r){const n=[];return new ft((a,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new b2e(l),u=r(l.primaryKey,l.value,c);if(u instanceof ft){const d=u.catch(h=>(c.done(),ft.reject(h)));n.push(d)}c.isDone?a():c.G===null?l.continue():l.continue(c.G)}}).next(()=>ft.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Gm(t){return new ft((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=FP(n.target.error);r(a)}})}let UB=!1;function FP(t){const e=R0.M(Mi());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new gr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UB||(UB=!0,setTimeout(()=>{throw n},0)),n}}return t}const Zb="IndexBackfiller";class w2e{constructor(e,r){this.asyncQueue=e,this.ne=r,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){cr(Zb,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const r=await this.ne.ie();cr(Zb,`Documents written: ${r}`)}catch(r){hm(r)?cr(Zb,"Ignoring IndexedDB error during index backfill: ",r):await ug(r)}await this.re(6e4)})}}class _2e{constructor(e,r){this.localStore=e,this.persistence=r}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.se(r,e))}se(e,r){const n=new Set;let a=r,s=!0;return ft.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return cr(Zb,`Processing collection: ${o}`),this.oe(e,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}oe(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(a,s)).next(l=>(cr(Zb,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>o.size)}))}_e(e,r){let n=e;return r.changes.forEach((a,s)=>{const o=$J(s);LP(o,n)>0&&(n=o)}),new Uc(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=-1;function yA(t){return t==null}function z2(t){return t===0&&1/t==-1/0}function N2e(t){return typeof t=="number"&&Number.isInteger(t)&&!z2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="";function qo(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=zB(e)),e=E2e(t.get(r),e);return zB(e)}function E2e(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case r3:r+="";break;default:r+=s}}return r}function zB(t){return t+r3+""}function kd(t){const e=t.length;if(Hr(e>=2,64408,{path:t}),e===2)return Hr(t.charAt(0)===r3&&t.charAt(1)==="",56145,{path:t}),ca.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const o=t.indexOf(r3,s);switch((o<0||o>r)&&Rr(50515,{path:t}),t.charAt(o+1)){case"":const l=t.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,o),a+="\0";break;case"":a+=t.substring(s,o+1);break;default:Rr(61167,{path:t})}s=o+2}return new ca(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="remoteDocuments",aw="owner",jg="owner",V2="mutationQueues",A2e="userId",Yu="mutations",VB="batchId",Jm="userMutationsIndex",$B=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t,e){return[t,qo(e)]}function WJ(t,e,r){return[t,qo(e),r]}const S2e={},gx="documentMutations",n3="remoteDocumentsV14",j2e=["prefixPath","collectionGroup","readTime","documentId"],IN="documentKeyIndex",T2e=["prefixPath","collectionGroup","documentId"],KJ="collectionGroupIndex",C2e=["collectionGroup","readTime","prefixPath","documentId"],$2="remoteDocumentGlobal",$k="remoteDocumentGlobalKey",xx="targets",XJ="queryTargetsIndex",k2e=["canonicalId","targetId"],vx="targetDocuments",I2e=["targetId","path"],BP="documentTargetsIndex",O2e=["path","targetId"],a3="targetGlobalKey",hp="targetGlobal",H2="collectionParents",P2e=["collectionId","parent"],bx="clientMetadata",R2e="clientId",wA="bundles",D2e="bundleId",_A="namedQueries",M2e="name",UP="indexConfiguration",L2e="indexId",Hk="collectionGroupIndex",F2e="collectionGroup",Qb="indexState",B2e=["indexId","uid"],YJ="sequenceNumberIndex",U2e=["uid","sequenceNumber"],Jb="indexEntries",z2e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ZJ="documentKeyIndex",V2e=["indexId","uid","orderedDocumentKey"],NA="documentOverlays",$2e=["userId","collectionPath","documentId"],qk="collectionPathOverlayIndex",H2e=["userId","collectionPath","largestBatchId"],QJ="collectionGroupOverlayIndex",q2e=["userId","collectionGroup","largestBatchId"],zP="globals",G2e="name",JJ=[V2,Yu,gx,Um,xx,aw,hp,vx,bx,$2,H2,wA,_A],W2e=[...JJ,NA],eee=[V2,Yu,gx,n3,xx,aw,hp,vx,bx,$2,H2,wA,_A,NA],tee=eee,VP=[...tee,UP,Qb,Jb],K2e=VP,ree=[...VP,zP],X2e=ree;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk extends qJ{constructor(e,r){super(),this.le=e,this.currentSequenceNumber=r}}function Li(t,e){const r=gn(t);return R0.O(r.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function mm(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function nee(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,r){this.comparator=e,this.root=r||_o.EMPTY}insert(e,r){return new vs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,_o.BLACK,null,null))}remove(e){return new vs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_o.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new K_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new K_(this.root,e,this.comparator,!1)}getReverseIterator(){return new K_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new K_(this.root,e,this.comparator,!0)}}class K_{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _o{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??_o.RED,this.left=a??_o.EMPTY,this.right=s??_o.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new _o(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return _o.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return _o.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_o.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Rr(27949);return e+(this.isRed()?0:1)}}_o.EMPTY=null,_o.RED=!0,_o.BLACK=!1;_o.EMPTY=new class{constructor(){this.size=0}get key(){throw Rr(57766)}get value(){throw Rr(16141)}get color(){throw Rr(16727)}get left(){throw Rr(29726)}get right(){throw Rr(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new _o(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.comparator=e,this.data=new vs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new qB(this.data.getIterator())}getIteratorFrom(e){return new qB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Ta)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ta(this.comparator);return r.data=e,r}}class qB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e){this.fields=e,e.sort(Es.comparator)}static empty(){return new bu([])}unionWith(e){let r=new Ta(Es.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new bu(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return px(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new aee("Invalid base64 string: "+s):s}}(e);return new Ei(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new Ei(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ei.EMPTY_BYTE_STRING=new Ei("");const Y2e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lh(t){if(Hr(!!t,39018),typeof t=="string"){let e=0;const r=Y2e.exec(t);if(Hr(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:fs(t.seconds),nanos:fs(t.nanos)}}function fs(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ch(t){return typeof t=="string"?Ei.fromBase64String(t):Ei.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const see="server_timestamp",iee="__type__",oee="__previous_value__",lee="__local_write_time__";function $P(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[iee])==null?void 0:n.stringValue)===see}function EA(t){const e=t.mapValue.fields[oee];return $P(e)?EA(e):e}function q2(t){const e=lh(t.mapValue.fields[lee].timestampValue);return new na(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2e{constructor(e,r,n,a,s,o,l,c,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const G2="(default)";class Mp{constructor(e,r){this.projectId=e,this.database=r||G2}static empty(){return new Mp("","")}get isDefaultDatabase(){return this.database===G2}isEqual(e){return e instanceof Mp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="__type__",cee="__max__",g0={mapValue:{fields:{__type__:{stringValue:cee}}}},qP="__vector__",yx="value",ON={nullValue:"NULL_VALUE"};function W0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$P(t)?4:uee(t)?9007199254740991:AA(t)?10:11:Rr(28295,{value:t})}function Xd(t,e){if(t===e)return!0;const r=W0(t);if(r!==W0(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return q2(t).isEqual(q2(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=lh(a.timestampValue),l=lh(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return ch(a.bytesValue).isEqual(ch(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return fs(a.geoPointValue.latitude)===fs(s.geoPointValue.latitude)&&fs(a.geoPointValue.longitude)===fs(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return fs(a.integerValue)===fs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=fs(a.doubleValue),l=fs(s.doubleValue);return o===l?z2(o)===z2(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return px(t.arrayValue.values||[],e.arrayValue.values||[],Xd);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(HB(o)!==HB(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Xd(o[c],l[c])))return!1;return!0}(t,e);default:return Rr(52216,{left:t})}}function W2(t,e){return(t.values||[]).find(r=>Xd(r,e))!==void 0}function K0(t,e){if(t===e)return 0;const r=W0(t),n=W0(e);if(r!==n)return xn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return xn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=fs(s.integerValue||s.doubleValue),c=fs(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return GB(t.timestampValue,e.timestampValue);case 4:return GB(q2(t),q2(e));case 5:return zk(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ch(s),c=ch(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=xn(l[u],c[u]);if(d!==0)return d}return xn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=xn(fs(s.latitude),fs(o.latitude));return l!==0?l:xn(fs(s.longitude),fs(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return WB(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,g,b,w;const l=s.fields||{},c=o.fields||{},u=(p=l[yx])==null?void 0:p.arrayValue,d=(g=c[yx])==null?void 0:g.arrayValue,h=xn(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((w=d==null?void 0:d.values)==null?void 0:w.length)||0);return h!==0?h:WB(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===g0.mapValue&&o===g0.mapValue)return 0;if(s===g0.mapValue)return 1;if(o===g0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const p=zk(c[h],d[h]);if(p!==0)return p;const g=K0(l[c[h]],u[d[h]]);if(g!==0)return g}return xn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Rr(23264,{he:r})}}function GB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xn(t,e);const r=lh(t),n=lh(e),a=xn(r.seconds,n.seconds);return a!==0?a:xn(r.nanos,n.nanos)}function WB(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=K0(r[a],n[a]);if(s)return s}return xn(r.length,n.length)}function wx(t){return Wk(t)}function Wk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=lh(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ch(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return _r.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=Wk(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${Wk(r.fields[o])}`;return a+"}"}(t.mapValue):Rr(61005,{value:t})}function PN(t){switch(W0(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=EA(t);return e?16+PN(e):16;case 5:return 2*t.stringValue.length;case 6:return ch(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+PN(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return mm(n.fields,(s,o)=>{a+=s.length+PN(o)}),a}(t.mapValue);default:throw Rr(13486,{value:t})}}function K2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kk(t){return!!t&&"integerValue"in t}function X2(t){return!!t&&"arrayValue"in t}function KB(t){return!!t&&"nullValue"in t}function XB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function RN(t){return!!t&&"mapValue"in t}function AA(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[HP])==null?void 0:n.stringValue)===qP}function e2(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return mm(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=e2(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=e2(t.arrayValue.values[r]);return e}return{...t}}function uee(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cee}const dee={mapValue:{fields:{[HP]:{stringValue:qP},[yx]:{arrayValue:{}}}}};function Q2e(t){return"nullValue"in t?ON:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?K2(Mp.empty(),_r.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?AA(t)?dee:{mapValue:{}}:Rr(35942,{value:t})}function J2e(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?K2(Mp.empty(),_r.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?dee:"mapValue"in t?AA(t)?{mapValue:{}}:g0:Rr(61959,{value:t})}function YB(t,e){const r=K0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ZB(t,e){const r=K0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this.value=e}static empty(){return new hl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!RN(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=e2(r)}setAll(e){let r=Es.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=e2(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());RN(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Xd(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];RN(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){mm(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new hl(e2(this.value))}}function fee(t){const e=[];return mm(t.fields,(r,n)=>{const a=new Es([r]);if(RN(n)){const s=fee(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new bu(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Us(e,0,Zr.min(),Zr.min(),Zr.min(),hl.empty(),0)}static newFoundDocument(e,r,n,a){return new Us(e,1,r,Zr.min(),n,a,0)}static newNoDocument(e,r){return new Us(e,2,r,Zr.min(),Zr.min(),hl.empty(),0)}static newUnknownDocument(e,r){return new Us(e,3,r,Zr.min(),Zr.min(),hl.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Zr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Us&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Us(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,r){this.position=e,this.inclusive=r}}function QB(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=_r.comparator(_r.fromName(o.referenceValue),r.key):n=K0(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function JB(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Xd(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,r="asc"){this.field=e,this.dir=r}}function eye(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hee{}class Vn extends hee{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new tye(e,r,n):r==="array-contains"?new aye(e,n):r==="in"?new bee(e,n):r==="not-in"?new sye(e,n):r==="array-contains-any"?new iye(e,n):new Vn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new rye(e,n):new nye(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(K0(r,this.value)):r!==null&&W0(this.value)===W0(r)&&this.matchesComparison(K0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Rr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sa extends hee{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Sa(e,r)}matches(e){return Nx(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nx(t){return t.op==="and"}function Xk(t){return t.op==="or"}function GP(t){return mee(t)&&Nx(t)}function mee(t){for(const e of t.filters)if(e instanceof Sa)return!1;return!0}function Yk(t){if(t instanceof Vn)return t.field.canonicalString()+t.op.toString()+wx(t.value);if(GP(t))return t.filters.map(e=>Yk(e)).join(",");{const e=t.filters.map(r=>Yk(r)).join(",");return`${t.op}(${e})`}}function pee(t,e){return t instanceof Vn?function(n,a){return a instanceof Vn&&n.op===a.op&&n.field.isEqual(a.field)&&Xd(n.value,a.value)}(t,e):t instanceof Sa?function(n,a){return a instanceof Sa&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&pee(o,a.filters[l]),!0):!1}(t,e):void Rr(19439)}function gee(t,e){const r=t.filters.concat(e);return Sa.create(r,t.op)}function xee(t){return t instanceof Vn?function(r){return`${r.field.canonicalString()} ${r.op} ${wx(r.value)}`}(t):t instanceof Sa?function(r){return r.op.toString()+" {"+r.getFilters().map(xee).join(" ,")+"}"}(t):"Filter"}class tye extends Vn{constructor(e,r,n){super(e,r,n),this.key=_r.fromName(n.referenceValue)}matches(e){const r=_r.comparator(e.key,this.key);return this.matchesComparison(r)}}class rye extends Vn{constructor(e,r){super(e,"in",r),this.keys=vee("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class nye extends Vn{constructor(e,r){super(e,"not-in",r),this.keys=vee("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function vee(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>_r.fromName(n.referenceValue))}class aye extends Vn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return X2(r)&&W2(r.arrayValue,this.value)}}class bee extends Vn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&W2(this.value.arrayValue,r)}}class sye extends Vn{constructor(e,r){super(e,"not-in",r)}matches(e){if(W2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!W2(this.value.arrayValue,r)}}class iye extends Vn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!X2(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>W2(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oye{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function Zk(t,e=null,r=[],n=[],a=null,s=null,o=null){return new oye(t,e,r,n,a,s,o)}function Lp(t){const e=gn(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Yk(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),yA(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>wx(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>wx(n)).join(",")),e.Te=r}return e.Te}function sw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!eye(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!pee(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JB(t.startAt,e.startAt)&&JB(t.endAt,e.endAt)}function s3(t){return _r.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function i3(t,e){return t.filters.filter(r=>r instanceof Vn&&r.field.isEqual(e))}function eU(t,e,r){let n=ON,a=!0;for(const s of i3(t,e)){let o=ON,l=!0;switch(s.op){case"<":case"<=":o=Q2e(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=ON}YB({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];YB({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function tU(t,e,r){let n=g0,a=!0;for(const s of i3(t,e)){let o=g0,l=!0;switch(s.op){case">=":case">":o=J2e(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=g0}ZB({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];ZB({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lye(t,e,r,n,a,s,o,l){return new iv(t,e,r,n,a,s,o,l)}function iw(t){return new iv(t)}function rU(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yee(t){return t.collectionGroup!==null}function t2(t){const e=gn(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ta(Es.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Y2(s,n))}),r.has(Es.keyField().canonicalString())||e.Ie.push(new Y2(Es.keyField(),n))}return e.Ie}function Eu(t){const e=gn(t);return e.Ee||(e.Ee=cye(e,t2(t))),e.Ee}function cye(t,e){if(t.limitType==="F")return Zk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Y2(a.field,s)});const r=t.endAt?new _x(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new _x(t.startAt.position,t.startAt.inclusive):null;return Zk(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Qk(t,e){const r=t.filters.concat([e]);return new iv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function o3(t,e,r){return new iv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function SA(t,e){return sw(Eu(t),Eu(e))&&t.limitType===e.limitType}function wee(t){return`${Lp(Eu(t))}|lt:${t.limitType}`}function Yg(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>xee(a)).join(", ")}]`),yA(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>wx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>wx(a)).join(",")),`Target(${n})`}(Eu(t))}; limitType=${t.limitType})`}function ow(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):_r.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of t2(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=QB(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,t2(n),a)||n.endAt&&!function(o,l,c){const u=QB(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,t2(n),a))}(t,e)}function uye(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _ee(t){return(e,r)=>{let n=!1;for(const a of t2(t)){const s=dye(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function dye(t,e,r){const n=t.field.isKeyField()?_r.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?K0(c,u):Rr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Rr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){mm(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return nee(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fye=new vs(_r.comparator);function Tc(){return fye}const Nee=new vs(_r.comparator);function Ab(...t){let e=Nee;for(const r of t)e=e.insert(r.key,r);return e}function Eee(t){let e=Nee;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Id(){return r2()}function Aee(){return r2()}function r2(){return new jh(t=>t.toString(),(t,e)=>t.isEqual(e))}const hye=new vs(_r.comparator),mye=new Ta(_r.comparator);function Rn(...t){let e=mye;for(const r of t)e=e.add(r);return e}const pye=new Ta(xn);function gye(){return pye}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z2(e)?"-0":e}}function See(t){return{integerValue:""+t}}function xye(t,e){return N2e(e)?See(e):WP(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this._=void 0}}function vye(t,e,r){return t instanceof Z2?function(a,s){const o={fields:{[iee]:{stringValue:see},[lee]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&$P(s)&&(s=EA(s)),s&&(o.fields[oee]=s),{mapValue:o}}(r,e):t instanceof Ex?Tee(t,e):t instanceof Ax?Cee(t,e):function(a,s){const o=jee(a,s),l=nU(o)+nU(a.Ae);return Kk(o)&&Kk(a.Ae)?See(l):WP(a.serializer,l)}(t,e)}function bye(t,e,r){return t instanceof Ex?Tee(t,e):t instanceof Ax?Cee(t,e):r}function jee(t,e){return t instanceof Q2?function(n){return Kk(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Z2 extends jA{}class Ex extends jA{constructor(e){super(),this.elements=e}}function Tee(t,e){const r=kee(e);for(const n of t.elements)r.some(a=>Xd(a,n))||r.push(n);return{arrayValue:{values:r}}}class Ax extends jA{constructor(e){super(),this.elements=e}}function Cee(t,e){let r=kee(e);for(const n of t.elements)r=r.filter(a=>!Xd(a,n));return{arrayValue:{values:r}}}class Q2 extends jA{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function nU(t){return fs(t.integerValue||t.doubleValue)}function kee(t){return X2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yye{constructor(e,r){this.field=e,this.transform=r}}function wye(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof Ex&&a instanceof Ex||n instanceof Ax&&a instanceof Ax?px(n.elements,a.elements,Xd):n instanceof Q2&&a instanceof Q2?Xd(n.Ae,a.Ae):n instanceof Z2&&a instanceof Z2}(t.transform,e.transform)}class _ye{constructor(e,r){this.version=e,this.transformResults=r}}class Cc{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Cc}static exists(e){return new Cc(void 0,e)}static updateTime(e){return new Cc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function DN(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class TA{}function Iee(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new KP(t.key,Cc.none()):new lw(t.key,t.data,Cc.none());{const r=t.data,n=hl.empty();let a=new Ta(Es.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new pm(t.key,n,new bu(a.toArray()),Cc.none())}}function Nye(t,e,r){t instanceof lw?function(a,s,o){const l=a.value.clone(),c=sU(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof pm?function(a,s,o){if(!DN(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=sU(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Oee(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function n2(t,e,r,n){return t instanceof lw?function(s,o,l,c){if(!DN(s.precondition,o))return l;const u=s.value.clone(),d=iU(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof pm?function(s,o,l,c){if(!DN(s.precondition,o))return l;const u=iU(s.fieldTransforms,c,o),d=o.data;return d.setAll(Oee(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,o,l){return DN(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function Eye(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=jee(n.transform,a||null);s!=null&&(r===null&&(r=hl.empty()),r.set(n.field,s))}return r||null}function aU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&px(n,a,(s,o)=>wye(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lw extends TA{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class pm extends TA{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Oee(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function sU(t,e,r){const n=new Map;Hr(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,bye(o,l,r[a]))}return n}function iU(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,vye(s,o,e))}return n}class KP extends TA{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pee extends TA{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&Nye(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=n2(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=n2(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Aee();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=Iee(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(Zr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Rn())}isEqual(e){return this.batchId===e.batchId&&px(this.mutations,e.mutations,(r,n)=>aU(r,n))&&px(this.baseMutations,e.baseMutations,(r,n)=>aU(r,n))}}class YP{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Hr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return hye}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new YP(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aye{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di,Kn;function Sye(t){switch(t){case Mt.OK:return Rr(64938);case Mt.CANCELLED:case Mt.UNKNOWN:case Mt.DEADLINE_EXCEEDED:case Mt.RESOURCE_EXHAUSTED:case Mt.INTERNAL:case Mt.UNAVAILABLE:case Mt.UNAUTHENTICATED:return!1;case Mt.INVALID_ARGUMENT:case Mt.NOT_FOUND:case Mt.ALREADY_EXISTS:case Mt.PERMISSION_DENIED:case Mt.FAILED_PRECONDITION:case Mt.ABORTED:case Mt.OUT_OF_RANGE:case Mt.UNIMPLEMENTED:case Mt.DATA_LOSS:return!0;default:return Rr(15467,{code:t})}}function Ree(t){if(t===void 0)return fl("GRPC error has no .code"),Mt.UNKNOWN;switch(t){case di.OK:return Mt.OK;case di.CANCELLED:return Mt.CANCELLED;case di.UNKNOWN:return Mt.UNKNOWN;case di.DEADLINE_EXCEEDED:return Mt.DEADLINE_EXCEEDED;case di.RESOURCE_EXHAUSTED:return Mt.RESOURCE_EXHAUSTED;case di.INTERNAL:return Mt.INTERNAL;case di.UNAVAILABLE:return Mt.UNAVAILABLE;case di.UNAUTHENTICATED:return Mt.UNAUTHENTICATED;case di.INVALID_ARGUMENT:return Mt.INVALID_ARGUMENT;case di.NOT_FOUND:return Mt.NOT_FOUND;case di.ALREADY_EXISTS:return Mt.ALREADY_EXISTS;case di.PERMISSION_DENIED:return Mt.PERMISSION_DENIED;case di.FAILED_PRECONDITION:return Mt.FAILED_PRECONDITION;case di.ABORTED:return Mt.ABORTED;case di.OUT_OF_RANGE:return Mt.OUT_OF_RANGE;case di.UNIMPLEMENTED:return Mt.UNIMPLEMENTED;case di.DATA_LOSS:return Mt.DATA_LOSS;default:return Rr(39323,{code:t})}}(Kn=di||(di={}))[Kn.OK=0]="OK",Kn[Kn.CANCELLED=1]="CANCELLED",Kn[Kn.UNKNOWN=2]="UNKNOWN",Kn[Kn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kn[Kn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kn[Kn.NOT_FOUND=5]="NOT_FOUND",Kn[Kn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kn[Kn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kn[Kn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kn[Kn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kn[Kn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kn[Kn.ABORTED=10]="ABORTED",Kn[Kn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kn[Kn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kn[Kn.INTERNAL=13]="INTERNAL",Kn[Kn.UNAVAILABLE=14]="UNAVAILABLE",Kn[Kn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jye(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tye=new P0([4294967295,4294967295],0);function oU(t){const e=jye().encode(t),r=new OJ;return r.update(e),new Uint8Array(r.digest())}function lU(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new P0([r,n],0),new P0([a,s],0)]}class QP{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Sb(`Invalid padding: ${r}`);if(n<0)throw new Sb(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Sb(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Sb(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=P0.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(P0.fromNumber(n)));return a.compare(Tye)===1&&(a=new P0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=oU(e),[n,a]=lU(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new QP(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=oU(e),[n,a]=lU(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Sb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,cw.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new CA(Zr.min(),a,new vs(xn),Tc(),Rn())}}class cw{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new cw(n,r,Rn(),Rn(),Rn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class Dee{constructor(e,r){this.targetId=e,this.Ce=r}}class Mee{constructor(e,r,n=Ei.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class cU{constructor(){this.ve=0,this.Fe=uU(),this.Me=Ei.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Rn(),r=Rn(),n=Rn();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Rr(38017,{changeType:s})}}),new cw(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=uU()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Hr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Cye{constructor(e){this.Ge=e,this.ze=new Map,this.je=Tc(),this.Je=X_(),this.He=X_(),this.Ye=new vs(xn)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Rr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(s3(s))if(n===0){const o=new _r(s.path);this.et(r,o,Us.newNoDocument(o,Zr.min()))}else Hr(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=ch(n).toUint8Array()}catch(c){if(c instanceof aee)return mx("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new QP(o,a,s)}catch(c){return mx(c instanceof Sb?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&s3(l.target)){const c=new _r(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Us.newNoDocument(c,e))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=Rn();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const a=new CA(e,r,this.Ye,this.je,n);return this.je=Tc(),this.Je=X_(),this.He=X_(),this.Ye=new vs(xn),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new cU,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Ta(xn),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Ta(xn),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||cr("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cU),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function X_(){return new vs(_r.comparator)}function uU(){return new vs(_r.comparator)}const kye={asc:"ASCENDING",desc:"DESCENDING"},Iye={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oye={and:"AND",or:"OR"};class Pye{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Jk(t,e){return t.useProto3Json||yA(e)?e:{value:e}}function Sx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lee(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Rye(t,e){return Sx(t,e.toTimestamp())}function xl(t){return Hr(!!t,49232),Zr.fromTimestamp(function(r){const n=lh(r);return new na(n.seconds,n.nanos)}(t))}function JP(t,e){return e8(t,e).canonicalString()}function e8(t,e){const r=function(a){return new ca(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Fee(t){const e=ca.fromString(t);return Hr(Wee(e),10190,{key:e.toString()}),e}function l3(t,e){return JP(t.databaseId,e.path)}function mp(t,e){const r=Fee(e);if(r.get(1)!==t.databaseId.projectId)throw new gr(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new gr(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new _r(zee(r))}function Bee(t,e){return JP(t.databaseId,e)}function Uee(t){const e=Fee(t);return e.length===4?ca.emptyPath():zee(e)}function t8(t){return new ca(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zee(t){return Hr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dU(t,e,r){return{name:l3(t,e),fields:r.value.mapValue.fields}}function Dye(t,e,r){const n=mp(t,e.name),a=xl(e.updateTime),s=e.createTime?xl(e.createTime):Zr.min(),o=new hl({mapValue:{fields:e.fields}}),l=Us.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function Mye(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Rr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Hr(d===void 0||typeof d=="string",58123),Ei.fromBase64String(d||"")):(Hr(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ei.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Mt.UNKNOWN:Ree(u.code);return new gr(d,u.message||"")}(o);r=new Mee(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=mp(t,n.document.name),s=xl(n.document.updateTime),o=n.document.createTime?xl(n.document.createTime):Zr.min(),l=new hl({mapValue:{fields:n.document.fields}}),c=Us.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new MN(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=mp(t,n.document),s=n.readTime?xl(n.readTime):Zr.min(),o=Us.newNoDocument(a,s),l=n.removedTargetIds||[];r=new MN([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=mp(t,n.document),s=n.removedTargetIds||[];r=new MN([],s,a,null)}else{if(!("filter"in e))return Rr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new Aye(a,s),l=n.targetId;r=new Dee(l,o)}}return r}function c3(t,e){let r;if(e instanceof lw)r={update:dU(t,e.key,e.value)};else if(e instanceof KP)r={delete:l3(t,e.key)};else if(e instanceof pm)r={update:dU(t,e.key,e.data),updateMask:Vye(e.fieldMask)};else{if(!(e instanceof Pee))return Rr(16599,{Vt:e.type});r={verify:l3(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof Z2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ex)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ax)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Q2)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Rr(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Rye(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Rr(27497)}(t,e.precondition)),r}function r8(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?Cc.updateTime(xl(s.updateTime)):s.exists!==void 0?Cc.exists(s.exists):Cc.none()}(e.currentDocument):Cc.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)Hr(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new Z2;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new Ex(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Ax(d)}else"increment"in l?c=new Q2(o,l.increment):Rr(16584,{proto:l});const u=Es.fromServerFormat(l.fieldPath);return new yye(u,c)}(t,a)):[];if(e.update){e.update.name;const a=mp(t,e.update.name),s=new hl({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new bu(u.map(d=>Es.fromServerFormat(d)))}(e.updateMask);return new pm(a,s,o,r,n)}return new lw(a,s,r,n)}if(e.delete){const a=mp(t,e.delete);return new KP(a,r)}if(e.verify){const a=mp(t,e.verify);return new Pee(a,r)}return Rr(1463,{proto:e})}function Lye(t,e){return t&&t.length>0?(Hr(e!==void 0,14353),t.map(r=>function(a,s){let o=a.updateTime?xl(a.updateTime):xl(s);return o.isEqual(Zr.min())&&(o=xl(s)),new _ye(o,a.transformResults||[])}(r,e))):[]}function Vee(t,e){return{documents:[Bee(t,e.path)]}}function $ee(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Bee(t,a);const s=function(u){if(u.length!==0)return Gee(Sa.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Zg(p.field),direction:Bye(p.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Jk(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:a}}function Hee(t){let e=Uee(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Hr(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const p=qee(h);return p instanceof Sa&&GP(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(p=>function(b){return new Y2(Qg(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(h){let p;return p=typeof h=="object"?h.value:h,yA(p)?null:p}(r.limit));let c=null;r.startAt&&(c=function(h){const p=!!h.before,g=h.values||[];return new _x(g,p)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const p=!h.before,g=h.values||[];return new _x(g,p)}(r.endAt)),lye(e,a,o,s,l,"F",c,u)}function Fye(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rr(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function qee(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Qg(r.unaryFilter.field);return Vn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Qg(r.unaryFilter.field);return Vn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qg(r.unaryFilter.field);return Vn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qg(r.unaryFilter.field);return Vn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rr(61313);default:return Rr(60726)}}(t):t.fieldFilter!==void 0?function(r){return Vn.create(Qg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rr(58110);default:return Rr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Sa.create(r.compositeFilter.filters.map(n=>qee(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Rr(1026)}}(r.compositeFilter.op))}(t):Rr(30097,{filter:t})}function Bye(t){return kye[t]}function Uye(t){return Iye[t]}function zye(t){return Oye[t]}function Zg(t){return{fieldPath:t.canonicalString()}}function Qg(t){return Es.fromServerFormat(t.fieldPath)}function Gee(t){return t instanceof Vn?function(r){if(r.op==="=="){if(XB(r.value))return{unaryFilter:{field:Zg(r.field),op:"IS_NAN"}};if(KB(r.value))return{unaryFilter:{field:Zg(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(XB(r.value))return{unaryFilter:{field:Zg(r.field),op:"IS_NOT_NAN"}};if(KB(r.value))return{unaryFilter:{field:Zg(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zg(r.field),op:Uye(r.op),value:r.value}}}(t):t instanceof Sa?function(r){const n=r.getFilters().map(a=>Gee(a));return n.length===1?n[0]:{compositeFilter:{op:zye(r.op),filters:n}}}(t):Rr(54877,{filter:t})}function Vye(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Wee(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,r,n,a,s=Zr.min(),o=Zr.min(),l=Ei.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ff(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ff(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ff(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kee{constructor(e){this.yt=e}}function $ye(t,e){let r;if(e.document)r=Dye(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_r.fromSegments(e.noDocument.path),a=Bp(e.noDocument.readTime);r=Us.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Rr(56709);{const n=_r.fromSegments(e.unknownDocument.path),a=Bp(e.unknownDocument.version);r=Us.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new na(a[0],a[1]);return Zr.fromTimestamp(s)}(e.readTime)),r}function fU(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:u3(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,o){return{name:l3(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Sx(s,o.version.toTimestamp()),createTime:Sx(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Fp(e.version)};else{if(!e.isUnknownDocument())return Rr(57904,{document:e});n.unknownDocument={path:r.path.toArray(),version:Fp(e.version)}}return n}function u3(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Fp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bp(t){const e=new na(t.seconds,t.nanoseconds);return Zr.fromTimestamp(e)}function Wm(t,e){const r=(e.baseMutations||[]).map(s=>r8(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>r8(t.yt,s)),a=na.fromMillis(e.localWriteTimeMs);return new XP(e.batchId,a,r,n)}function jb(t){const e=Bp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Bp(t.lastLimboFreeSnapshotVersion):Zr.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return Hr(o===1,1966,{count:o}),Eu(iw(Uee(s.documents[0])))}(t.query):function(s){return Eu(Hee(s))}(t.query),new Ff(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Ei.fromBase64String(t.resumeToken))}function Xee(t,e){const r=Fp(e.snapshotVersion),n=Fp(e.lastLimboFreeSnapshotVersion);let a;a=s3(e.target)?Vee(t.yt,e.target):$ee(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function Yee(t){const e=Hee({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?o3(e,e.limit,"L"):e}function Dj(t,e){return new ZP(e.largestBatchId,r8(t.yt,e.overlayMutation))}function hU(t,e){const r=e.path.lastSegment();return[t,qo(e.path.popLast()),r]}function mU(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Fp(n.readTime),documentKey:qo(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hye{getBundleMetadata(e,r){return pU(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:Bp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return pU(e).put(function(a){return{bundleId:a.id,createTime:Fp(xl(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return gU(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:Yee(s.bundledQuery),readTime:Bp(s.readTime)}}(n)})}saveNamedQuery(e,r){return gU(e).put(function(a){return{name:a.name,readTime:Fp(xl(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function pU(t){return Li(t,wA)}function gU(t){return Li(t,_A)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,r){this.serializer=e,this.userId=r}static wt(e,r){const n=r.uid||"";return new kA(e,n)}getOverlay(e,r){return qv(e).get(hU(this.userId,r)).next(n=>n?Dj(this.serializer,n):null)}getOverlays(e,r){const n=Id();return ft.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,o)=>{const l=new ZP(r,o);a.push(this.St(e,l))}),ft.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(o=>a.add(qo(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(qv(e).Z(qk,l))}),ft.waitFor(s)}getOverlaysForCollection(e,r,n){const a=Id(),s=qo(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qv(e).J(qk,o).next(l=>{for(const c of l){const u=Dj(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=Id();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return qv(e).ee({index:QJ,range:l},(c,u,d)=>{const h=Dj(this.serializer,u);s.size()<a||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,r){return qv(e).put(function(a,s,o){const[l,c,u]=hU(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:c3(a.yt,o.mutation)}}(this.serializer,this.userId,r))}}function qv(t){return Li(t,NA)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qye{bt(e){return Li(e,zP)}getSessionToken(e){return this.bt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?Ei.fromUint8Array(n):Ei.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.bt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){}Dt(e,r){this.Ct(e,r),r.vt()}Ct(e,r){if("nullValue"in e)this.Ft(r,5);else if("booleanValue"in e)this.Ft(r,10),r.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(r,15),r.Mt(fs(e.integerValue));else if("doubleValue"in e){const n=fs(e.doubleValue);isNaN(n)?this.Ft(r,13):(this.Ft(r,15),z2(n)?r.Mt(0):r.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(r,20),typeof n=="string"&&(n=lh(n)),r.xt(`${n.seconds||""}`),r.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,r),this.Nt(r);else if("bytesValue"in e)this.Ft(r,30),r.Bt(ch(e.bytesValue)),this.Nt(r);else if("referenceValue"in e)this.Lt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(r,45),r.Mt(n.latitude||0),r.Mt(n.longitude||0)}else"mapValue"in e?uee(e)?this.Ft(r,Number.MAX_SAFE_INTEGER):AA(e)?this.kt(e.mapValue,r):(this.qt(e.mapValue,r),this.Nt(r)):"arrayValue"in e?(this.Qt(e.arrayValue,r),this.Nt(r)):Rr(19022,{$t:e})}Ot(e,r){this.Ft(r,25),this.Ut(e,r)}Ut(e,r){r.xt(e)}qt(e,r){const n=e.fields||{};this.Ft(r,55);for(const a of Object.keys(n))this.Ot(a,r),this.Ct(n[a],r)}kt(e,r){var o,l;const n=e.fields||{};this.Ft(r,53);const a=yx,s=((l=(o=n[a].arrayValue)==null?void 0:o.values)==null?void 0:l.length)||0;this.Ft(r,15),r.Mt(fs(s)),this.Ot(a,r),this.Ct(n[a],r)}Qt(e,r){const n=e.values||[];this.Ft(r,50);for(const a of n)this.Ct(a,r)}Lt(e,r){this.Ft(r,37),_r.fromName(e).path.forEach(n=>{this.Ft(r,60),this.Ut(n,r)})}Ft(e,r){e.Mt(r)}Nt(e){e.Mt(2)}}Km.Kt=new Km;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=255;function Gye(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function xU(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const o=Gye(255&n[s]);if(a+=o,o!==8)break}return a}(t);return Math.ceil(e/8)}class Wye{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Gt(n.value),n=r.next();this.zt()}jt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Jt(n.value),n=r.next();this.Ht()}Yt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const a=r.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const a=r.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const r=this.en(e),n=xU(r);this.tn(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}nn(e){const r=this.en(e),n=xU(r);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}rn(){this.sn(Cg),this.sn(255)}_n(){this.an(Cg),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),n=!!(128&r[0]);r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Gt(e){const r=255&e;r===0?(this.sn(0),this.sn(255)):r===Cg?(this.sn(Cg),this.sn(0)):this.sn(r)}Jt(e){const r=255&e;r===0?(this.an(0),this.an(255)):r===Cg?(this.an(Cg),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Kye{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Xye{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Gv{constructor(){this.cn=new Wye,this.ln=new Kye(this.cn),this.hn=new Xye(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,r,n,a){this.Tn=e,this.In=r,this.En=n,this.dn=a}An(){const e=this.dn.length,r=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.dn,0),r!==e?n.set([0],this.dn.length):++n[n.length-1],new Xm(this.Tn,this.In,this.En,n)}Rn(e,r,n){return{indexId:this.Tn,uid:e,arrayValue:LN(this.En),directionalValue:LN(this.dn),orderedDocumentKey:LN(r),documentKey:n.path.toArray()}}Vn(e,r,n){const a=this.Rn(e,r,n);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function Hh(t,e){let r=t.Tn-e.Tn;return r!==0?r:(r=vU(t.En,e.En),r!==0?r:(r=vU(t.dn,e.dn),r!==0?r:_r.comparator(t.In,e.In)))}function vU(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}function LN(t){return PQ()?function(r){let n="";for(let a=0;a<r.length;a++)n+=String.fromCharCode(r[a]);return n}(t):t}function bU(t){return typeof t!="string"?t:function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(t)}class yU{constructor(e){this.mn=new Ta((r,n)=>Es.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const r of e.filters){const n=r;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Hr(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const r=Vk(e);if(r!==void 0&&!this.wn(r))return!1;const n=Bm(e);let a=new Set,s=0,o=0;for(;s<n.length&&this.wn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.Sn(l,c)||!this.bn(this.fn[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.fn.length||!this.bn(this.fn[o++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ta(Es.comparator);const r=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new CN(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new CN(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new CN(n.field,n.dir==="asc"?0:1)));return new t3(t3.UNKNOWN_ID,this.collectionId,r,U2.empty())}wn(e){for(const r of this.gn)if(this.Sn(r,e))return!0;return!1}Sn(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}bn(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zee(t){var r,n;if(Hr(t instanceof Vn||t instanceof Sa,20012),t instanceof Vn){if(t instanceof bee){const a=((n=(r=t.value.arrayValue)==null?void 0:r.values)==null?void 0:n.map(s=>Vn.create(t.field,"==",s)))||[];return Sa.create(a,"or")}return t}const e=t.filters.map(a=>Zee(a));return Sa.create(e,t.op)}function Yye(t){if(t.getFilters().length===0)return[];const e=s8(Zee(t));return Hr(Qee(e),7391),n8(e)||a8(e)?[e]:e.getFilters()}function n8(t){return t instanceof Vn}function a8(t){return t instanceof Sa&&GP(t)}function Qee(t){return n8(t)||a8(t)||function(r){if(r instanceof Sa&&Xk(r)){for(const n of r.getFilters())if(!n8(n)&&!a8(n))return!1;return!0}return!1}(t)}function s8(t){if(Hr(t instanceof Vn||t instanceof Sa,34018),t instanceof Vn)return t;if(t.filters.length===1)return s8(t.filters[0]);const e=t.filters.map(n=>s8(n));let r=Sa.create(e,t.op);return r=d3(r),Qee(r)?r:(Hr(r instanceof Sa,64498),Hr(Nx(r),40251),Hr(r.filters.length>1,57927),r.filters.reduce((n,a)=>eR(n,a)))}function eR(t,e){let r;return Hr(t instanceof Vn||t instanceof Sa,38388),Hr(e instanceof Vn||e instanceof Sa,25473),r=t instanceof Vn?e instanceof Vn?function(a,s){return Sa.create([a,s],"and")}(t,e):wU(t,e):e instanceof Vn?wU(e,t):function(a,s){if(Hr(a.filters.length>0&&s.filters.length>0,48005),Nx(a)&&Nx(s))return gee(a,s.getFilters());const o=Xk(a)?a:s,l=Xk(a)?s:a,c=o.filters.map(u=>eR(u,l));return Sa.create(c,"or")}(t,e),d3(r)}function wU(t,e){if(Nx(e))return gee(e,t.getFilters());{const r=e.filters.map(n=>eR(t,n));return Sa.create(r,"or")}}function d3(t){if(Hr(t instanceof Vn||t instanceof Sa,11850),t instanceof Vn)return t;const e=t.getFilters();if(e.length===1)return d3(e[0]);if(mee(t))return t;const r=e.map(a=>d3(a)),n=[];return r.forEach(a=>{a instanceof Vn?n.push(a):a instanceof Sa&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Sa.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zye{constructor(){this.Cn=new tR}addToCollectionParentIndex(e,r){return this.Cn.add(r),ft.resolve()}getCollectionParents(e,r){return ft.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return ft.resolve()}deleteFieldIndex(e,r){return ft.resolve()}deleteAllFieldIndexes(e){return ft.resolve()}createTargetIndexes(e,r){return ft.resolve()}getDocumentsMatchingTarget(e,r){return ft.resolve(null)}getIndexType(e,r){return ft.resolve(0)}getFieldIndexes(e,r){return ft.resolve([])}getNextCollectionGroupToUpdate(e){return ft.resolve(null)}getMinOffset(e,r){return ft.resolve(Uc.min())}getMinOffsetFromCollectionGroup(e,r){return ft.resolve(Uc.min())}updateCollectionGroup(e,r,n){return ft.resolve()}updateIndexEntries(e,r){return ft.resolve()}}class tR{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Ta(ca.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ta(ca.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U="IndexedDbIndexManager",Y_=new Uint8Array(0);class Qye{constructor(e,r){this.databaseId=r,this.vn=new tR,this.Fn=new jh(n=>Lp(n),(n,a)=>sw(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.vn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.vn.add(r)});const s={collectionId:n,parent:qo(a)};return NU(e).put(s)}return ft.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[UJ(r),""],!1,!0);return NU(e).J(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(kd(o.parent))}return n})}addFieldIndex(e,r){const n=Wv(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=Ig(e);return s.next(l=>{o.put(mU(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=Wv(e),a=Ig(e),s=kg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Wv(e),n=kg(e),a=Ig(e);return r.Z().next(()=>n.Z()).next(()=>a.Z())}createTargetIndexes(e,r){return ft.forEach(this.Mn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new yU(n).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=kg(e);let a=!0;const s=new Map;return ft.forEach(this.Mn(r),o=>this.xn(e,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=Rn();const l=[];return ft.forEach(s,(c,u)=>{cr(_U,`Using index ${function(j){return`id=${j.indexId}|cg=${j.collectionGroup}|f=${j.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`}(c)} to execute ${Lp(r)}`);const d=function(j,P){const U=Vk(P);if(U===void 0)return null;for(const G of i3(j,U.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(u,c),h=function(j,P){const U=new Map;for(const G of Bm(P))for(const O of i3(j,G.fieldPath))switch(O.op){case"==":case"in":U.set(G.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return U.set(G.fieldPath.canonicalString(),O.value),Array.from(U.values())}return null}(u,c),p=function(j,P){const U=[];let G=!0;for(const O of Bm(P)){const D=O.kind===0?eU(j,O.fieldPath,j.startAt):tU(j,O.fieldPath,j.startAt);U.push(D.value),G&&(G=D.inclusive)}return new _x(U,G)}(u,c),g=function(j,P){const U=[];let G=!0;for(const O of Bm(P)){const D=O.kind===0?tU(j,O.fieldPath,j.endAt):eU(j,O.fieldPath,j.endAt);U.push(D.value),G&&(G=D.inclusive)}return new _x(U,G)}(u,c),b=this.On(c,u,p),w=this.On(c,u,g),_=this.Nn(c,u,h),N=this.Bn(c.indexId,d,b,p.inclusive,w,g.inclusive,_);return ft.forEach(N,A=>n.Y(A,r.limit).next(j=>{j.forEach(P=>{const U=_r.fromSegments(P.documentKey);o.has(U)||(o=o.add(U),l.push(U))})}))}).next(()=>l)}return ft.resolve(null)})}Mn(e){let r=this.Fn.get(e);return r||(e.filters.length===0?r=[e]:r=Yye(Sa.create(e.filters,"and")).map(n=>Zk(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,r),r)}Bn(e,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let h=0;h<c;++h){const p=r?this.Ln(r[h/u]):Y_,g=this.kn(e,p,n[h%u],a),b=this.qn(e,p,s[h%u],o),w=l.map(_=>this.kn(e,p,_,!0));d.push(...this.createRange(g,b,w))}return d}kn(e,r,n,a){const s=new Xm(e,_r.empty(),r,n);return a?s:s.An()}qn(e,r,n,a){const s=new Xm(e,_r.empty(),r,n);return a?s.An():s}xn(e,r){const n=new yU(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let o=null;for(const l of s)n.yn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,r){let n=2;const a=this.Mn(r);return ft.forEach(a,s=>this.xn(e,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new Ta(Es.comparator),d=!1;for(const h of c.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Qn(e,r){const n=new Gv;for(const a of Bm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Pn(a.kind);Km.Kt.Dt(s,o)}return n.un()}Ln(e){const r=new Gv;return Km.Kt.Dt(e,r.Pn(0)),r.un()}$n(e,r){const n=new Gv;return Km.Kt.Dt(K2(this.databaseId,r),n.Pn(function(s){const o=Bm(s);return o.length===0?0:o[o.length-1].kind}(e))),n.un()}Nn(e,r,n){if(n===null)return[];let a=[];a.push(new Gv);let s=0;for(const o of Bm(e)){const l=n[s++];for(const c of a)if(this.Un(r,o.fieldPath)&&X2(l))a=this.Kn(a,o,l);else{const u=c.Pn(o.kind);Km.Kt.Dt(l,u)}}return this.Wn(a)}On(e,r,n){return this.Nn(e,r,n.position)}Wn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].un();return r}Kn(e,r,n){const a=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new Gv;c.seed(l.un()),Km.Kt.Dt(o,c.Pn(r.kind)),s.push(c)}return s}Un(e,r){return!!e.filters.find(n=>n instanceof Vn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=Wv(e),a=Ig(e);return(r?n.J(Hk,IDBKeyRange.bound(r,r)):n.J()).next(s=>{const o=[];return ft.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,h){const p=h?new U2(h.sequenceNumber,new Uc(Bp(h.readTime),new _r(kd(h.documentKey)),h.largestBatchId)):U2.empty(),g=d.fields.map(([b,w])=>new CN(Es.fromServerFormat(b),w));return new t3(d.indexId,d.collectionGroup,g,p)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:xn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=Wv(e),s=Ig(e);return this.Gn(e).next(o=>a.J(Hk,IDBKeyRange.bound(r,r)).next(l=>ft.forEach(l,c=>s.put(mU(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,r){const n=new Map;return ft.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?ft.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),ft.forEach(l,c=>this.zn(e,a,c).next(u=>{const d=this.jn(s,c);return u.isEqual(d)?ft.resolve():this.Jn(e,s,c,u,d)}))))})}Hn(e,r,n,a){return kg(e).put(a.Rn(this.uid,this.$n(n,r.key),r.key))}Yn(e,r,n,a){return kg(e).delete(a.Vn(this.uid,this.$n(n,r.key),r.key))}zn(e,r,n){const a=kg(e);let s=new Ta(Hh);return a.ee({index:ZJ,range:IDBKeyRange.only([n.indexId,this.uid,LN(this.$n(n,r))])},(o,l)=>{s=s.add(new Xm(n.indexId,r,bU(l.arrayValue),bU(l.directionalValue)))}).next(()=>s)}jn(e,r){let n=new Ta(Hh);const a=this.Qn(r,e);if(a==null)return n;const s=Vk(r);if(s!=null){const o=e.data.field(s.fieldPath);if(X2(o))for(const l of o.arrayValue.values||[])n=n.add(new Xm(r.indexId,e.key,this.Ln(l),a))}else n=n.add(new Xm(r.indexId,e.key,Y_,a));return n}Jn(e,r,n,a,s){cr(_U,"Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,h,p){const g=c.getIterator(),b=u.getIterator();let w=Tg(g),_=Tg(b);for(;w||_;){let N=!1,A=!1;if(w&&_){const j=d(w,_);j<0?A=!0:j>0&&(N=!0)}else w!=null?A=!0:N=!0;N?(h(_),_=Tg(b)):A?(p(w),w=Tg(g)):(w=Tg(g),_=Tg(b))}}(a,s,Hh,l=>{o.push(this.Hn(e,r,n,l))},l=>{o.push(this.Yn(e,r,n,l))}),ft.waitFor(o)}Gn(e){let r=1;return Ig(e).ee({index:YJ,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((o,l)=>Hh(o,l)).filter((o,l,c)=>!l||Hh(o,c[l-1])!==0);const a=[];a.push(e);for(const o of n){const l=Hh(o,e),c=Hh(o,r);if(l===0)a[0]=e.An();else if(l>0&&c<0)a.push(o),a.push(o.An());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Zn(a[o],a[o+1]))return[];const l=a[o].Vn(this.uid,Y_,_r.empty()),c=a[o+1].Vn(this.uid,Y_,_r.empty());s.push(IDBKeyRange.bound(l,c))}return s}Zn(e,r){return Hh(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(EU)}getMinOffset(e,r){return ft.mapArray(this.Mn(r),n=>this.xn(e,n).next(a=>a||Rr(44426))).next(EU)}}function NU(t){return Li(t,H2)}function kg(t){return Li(t,Jb)}function Wv(t){return Li(t,UP)}function Ig(t){return Li(t,Qb)}function EU(t){Hr(t.length!==0,28825);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;LP(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Uc(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jee=41943040;class zo{static withCacheSize(e){return new zo(e,zo.DEFAULT_COLLECTION_PERCENTILE,zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ete(t,e,r){const n=t.store(Yu),a=t.store(gx),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.ee({range:o},(d,h,p)=>(l++,p.delete()));s.push(c.next(()=>{Hr(l===1,47070,{batchId:r.batchId})}));const u=[];for(const d of r.mutations){const h=WJ(e,d.key.path,r.batchId);s.push(a.delete(h)),u.push(d.key)}return ft.waitFor(s).next(()=>u)}function f3(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Rr(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zo.DEFAULT_COLLECTION_PERCENTILE=10,zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zo.DEFAULT=new zo(Jee,zo.DEFAULT_COLLECTION_PERCENTILE,zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zo.DISABLED=new zo(-1,0,0);class IA{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Xn={}}static wt(e,r,n,a){Hr(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new IA(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).ee({index:Jm,range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Jg(e),o=qh(e);return o.add({}).next(l=>{Hr(typeof l=="number",49019);const c=new XP(l,r,n,a),u=function(g,b,w){const _=w.baseMutations.map(A=>c3(g.yt,A)),N=w.mutations.map(A=>c3(g.yt,A));return{userId:b,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:_,mutations:N}}(this.serializer,this.userId,c),d=[];let h=new Ta((p,g)=>xn(p.canonicalString(),g.canonicalString()));for(const p of a){const g=WJ(this.userId,p.key.path,l);h=h.add(p.key.path.popLast()),d.push(o.put(u)),d.push(s.put(g,S2e))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[l]=c.keys()}),ft.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return qh(e).get(r).next(n=>n?(Hr(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:r}),Wm(this.serializer,n)):null)}er(e,r){return this.Xn[r]?ft.resolve(this.Xn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Xn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return qh(e).ee({index:Jm,range:a},(o,l,c)=>{l.userId===this.userId&&(Hr(l.batchId>=n,47524,{tr:n}),s=Wm(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=fp;return qh(e).ee({index:Jm,range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,fp],[this.userId,Number.POSITIVE_INFINITY]);return qh(e).J(Jm,r).next(n=>n.map(a=>Wm(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=kN(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Jg(e).ee({range:a},(o,l,c)=>{const[u,d,h]=o,p=kd(d);if(u===this.userId&&r.path.isEqual(p))return qh(e).get(h).next(g=>{if(!g)throw Rr(61480,{nr:o,batchId:h});Hr(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),s.push(Wm(this.serializer,g))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ta(xn);const a=[];return r.forEach(s=>{const o=kN(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=Jg(e).ee({range:l},(u,d,h)=>{const[p,g,b]=u,w=kd(g);p===this.userId&&s.path.isEqual(w)?n=n.add(b):h.done()});a.push(c)}),ft.waitFor(a).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=kN(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new Ta(xn);return Jg(e).ee({range:o},(c,u,d)=>{const[h,p,g]=c,b=kd(p);h===this.userId&&n.isPrefixOf(b)?b.length===a&&(l=l.add(g)):d.done()}).next(()=>this.rr(e,l))}rr(e,r){const n=[],a=[];return r.forEach(s=>{a.push(qh(e).get(s).next(o=>{if(o===null)throw Rr(35274,{batchId:s});Hr(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),n.push(Wm(this.serializer,o))}))}),ft.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return ete(e.le,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.ir(r.batchId)}),ft.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return ft.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return Jg(e).ee({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=kd(s[1]);a.push(c)}else l.done()}).next(()=>{Hr(a.length===0,56720,{sr:a.map(s=>s.canonicalString())})})})}containsKey(e,r){return tte(e,this.userId,r)}_r(e){return rte(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:fp,lastStreamToken:""})}}function tte(t,e,r){const n=kN(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return Jg(t).ee({range:s,X:!0},(l,c,u)=>{const[d,h,p]=l;d===e&&h===a&&(o=!0),u.done()}).next(()=>o)}function qh(t){return Li(t,Yu)}function Jg(t){return Li(t,gx)}function rte(t){return Li(t,V2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Up(0)}static cr(){return new Up(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jye{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.lr(e).next(r=>{const n=new Up(r.highestTargetId);return r.highestTargetId=n.next(),this.hr(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(r=>Zr.fromTimestamp(new na(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.lr(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.hr(e,a)))}addTargetData(e,r){return this.Pr(e,r).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(r,n),this.hr(e,n))))}updateTargetData(e,r){return this.Pr(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Og(e).delete(r.targetId)).next(()=>this.lr(e)).next(n=>(Hr(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return Og(e).ee((o,l)=>{const c=jb(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>ft.waitFor(s)).next(()=>a)}forEachTarget(e,r){return Og(e).ee((n,a)=>{const s=jb(a);r(s)})}lr(e){return SU(e).get(a3).next(r=>(Hr(r!==null,2888),r))}hr(e,r){return SU(e).put(a3,r)}Pr(e,r){return Og(e).put(Xee(this.serializer,r))}Tr(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Lp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Og(e).ee({range:a,index:XJ},(o,l,c)=>{const u=jb(l);sw(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=o0(e);return r.forEach(o=>{const l=qo(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,o))}),ft.waitFor(a)}removeMatchingKeys(e,r,n){const a=o0(e);return ft.forEach(r,s=>{const o=qo(s.path);return ft.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=o0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=o0(e);let s=Rn();return a.ee({range:n,X:!0},(o,l,c)=>{const u=kd(o[1]),d=new _r(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=qo(r.path),a=IDBKeyRange.bound([n],[UJ(n)],!1,!0);let s=0;return o0(e).ee({index:BP,X:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,r){return Og(e).get(r).next(n=>n?jb(n):null)}}function Og(t){return Li(t,xx)}function SU(t){return Li(t,hp)}function o0(t){return Li(t,vx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="LruGarbageCollector",nte=1048576;function TU([t,e],[r,n]){const a=xn(t,r);return a===0?xn(e,n):a}class ewe{constructor(e){this.Ir=e,this.buffer=new Ta(TU),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();TU(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class ate{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){cr(jU,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){hm(r)?cr(jU,"Ignoring IndexedDB error during garbage collection: ",r):await ug(r)}await this.Vr(3e5)})}}class twe{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return ft.resolve(vu.ce);const n=new ewe(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(cr("LruGarbageCollector","Garbage collection skipped; disabled"),ft.resolve(AU)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(cr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AU):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(cr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),a=this.params.maximumSequenceNumbersToCollect):a=h,o=Date.now(),this.nthSequenceNumber(e,a))).next(h=>(n=h,l=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),Xg()<=Un.DEBUG&&cr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),ft.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:h})))}}function ste(t,e){return new twe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rwe{constructor(e,r){this.db=e,this.garbageCollector=ste(this,r)}gr(e){const r=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}pr(e,r){return this.Sr(e,(n,a)=>r(a))}addReference(e,r,n){return Z_(e,n)}removeReference(e,r,n){return Z_(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Z_(e,r)}br(e,r){return function(a,s){let o=!1;return rte(a).te(l=>tte(a,l,s).next(c=>(c&&(o=!0),ft.resolve(!c)))).next(()=>o)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.Sr(e,(o,l)=>{if(l<=r){const c=this.br(e,o).next(u=>{if(!u)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,Zr.min()),o0(e).delete(function(h){return[0,qo(h.path)]}(o))))});a.push(c)}}).next(()=>ft.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Z_(e,r)}Sr(e,r){const n=o0(e);let a,s=vu.ce;return n.ee({index:BP},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==vu.ce&&r(new _r(kd(a)),s),s=u,a=c):s=vu.ce}).next(()=>{s!==vu.ce&&r(new _r(kd(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Z_(t,e){return o0(t).put(function(n,a){return{targetId:0,path:qo(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(){this.changes=new jh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Us.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ft.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nwe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Im(e).put(n)}removeEntry(e,r,n){return Im(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],u3(o),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.Dr(e,n)))}getEntry(e,r){let n=Us.newInvalidDocument(r);return Im(e).ee({index:IN,range:IDBKeyRange.only(Kv(r))},(a,s)=>{n=this.Cr(r,s)}).next(()=>n)}vr(e,r){let n={size:0,document:Us.newInvalidDocument(r)};return Im(e).ee({index:IN,range:IDBKeyRange.only(Kv(r))},(a,s)=>{n={document:this.Cr(r,s),size:f3(s)}}).next(()=>n)}getEntries(e,r){let n=Tc();return this.Fr(e,r,(a,s)=>{const o=this.Cr(a,s);n=n.insert(a,o)}).next(()=>n)}Mr(e,r){let n=Tc(),a=new vs(_r.comparator);return this.Fr(e,r,(s,o)=>{const l=this.Cr(s,o);n=n.insert(s,l),a=a.insert(s,f3(o))}).next(()=>({documents:n,Or:a}))}Fr(e,r,n){if(r.isEmpty())return ft.resolve();let a=new Ta(IU);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(Kv(a.first()),Kv(a.last())),o=a.getIterator();let l=o.getNext();return Im(e).ee({index:IN,range:s},(c,u,d)=>{const h=_r.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&IU(l,h)<0;)n(l,null),l=o.getNext();l&&l.isEqual(h)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.j(Kv(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),u3(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Im(e).J(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Tc();for(const h of u){const p=this.Cr(_r.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(ow(r,p)||a.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Tc();const o=kU(r,n),l=kU(r,Uc.max());return Im(e).ee({index:KJ,range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const h=this.Cr(_r.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new awe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return CU(e).get($k).next(r=>(Hr(!!r,20021),r))}Dr(e,r){return CU(e).put($k,r)}Cr(e,r){if(r){const n=$ye(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Zr.min())))return n}return Us.newInvalidDocument(e)}}function ote(t){return new nwe(t)}class awe extends ite{constructor(e,r){super(),this.Nr=e,this.trackRemovals=r,this.Br=new jh(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Ta((s,o)=>xn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.Br.get(s);if(r.push(this.Nr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const c=fU(this.Nr.serializer,o);a=a.add(s.path.popLast());const u=f3(c);n+=u-l.size,r.push(this.Nr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=fU(this.Nr.serializer,o.convertToNoDocument(Zr.min()));r.push(this.Nr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.Nr.updateMetadata(e,n)),ft.waitFor(r)}getFromCache(e,r){return this.Nr.vr(e,r).next(n=>(this.Br.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.Nr.Mr(e,r).next(({documents:n,Or:a})=>(a.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function CU(t){return Li(t,$2)}function Im(t){return Li(t,n3)}function Kv(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kU(t,e){const r=e.documentKey.path.toArray();return[t,u3(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function IU(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=xn(r[s],n[s]),a)return a;return a=xn(r.length,n.length),a||(a=xn(r[r.length-2],n[n.length-2]),a||xn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class swe{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&n2(n.mutation,a,bu.empty(),na.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Rn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Rn()){const a=Id();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=Ab();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Id();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Rn()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=Tc();const o=r2(),l=function(){return r2()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof pm)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),n2(d.mutation,u,d.mutation.getFieldMask(),na.now())):o.set(u.key,bu.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new swe(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,r){const n=r2();let a=new vs((o,l)=>o-l),s=Rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||bu.empty();d=l.applyToLocalView(u,d),n.set(c,d);const h=(a.get(l.batchId)||Rn()).add(c);a=a.insert(l.batchId,h)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=Aee();d.forEach(p=>{if(!s.has(p)){const g=Iee(r.get(p),n.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ft.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return _r.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):yee(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):ft.resolve(Id());let l=B2,c=s;return o.next(u=>ft.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),s.get(d)?ft.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Rn())).next(d=>({batchId:l,changes:Eee(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new _r(r)).next(n=>{let a=Ab();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=Ab();return this.indexManager.getCollectionParents(e,s).next(l=>ft.forEach(l,c=>{const u=function(h,p){return new iv(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Us.newInvalidDocument(d)))});let l=Ab();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&n2(d.mutation,u,bu.empty(),na.now()),ow(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iwe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return ft.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:xl(a.createTime)}}(r)),ft.resolve()}getNamedQuery(e,r){return ft.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Yee(a.bundledQuery),readTime:xl(a.readTime)}}(r)),ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class owe{constructor(){this.overlays=new vs(_r.comparator),this.qr=new Map}getOverlay(e,r){return ft.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Id();return ft.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.St(e,r,s)}),ft.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),ft.resolve()}getOverlaysForCollection(e,r,n){const a=Id(),s=r.length+1,o=new _r(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return ft.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new vs((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Id(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Id(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return ft.resolve(l)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new ZP(r,n));let s=this.qr.get(r);s===void 0&&(s=Rn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lwe{constructor(){this.sessionToken=Ei.EMPTY_BYTE_STRING}getSessionToken(e){return ft.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.Qr=new Ta(Xi.$r),this.Ur=new Ta(Xi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Xi(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Xi(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new _r(new ca([])),n=new Xi(r,e),a=new Xi(r,e+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new _r(new ca([])),n=new Xi(r,e),a=new Xi(r,e+1);let s=Rn();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new Xi(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Xi{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return _r.comparator(e.key,r.key)||xn(e.Yr,r.Yr)}static Kr(e,r){return xn(e.Yr,r.Yr)||_r.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cwe{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Ta(Xi.$r)}checkEmpty(e){return ft.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new XP(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new Xi(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ft.resolve(o)}lookupMutationBatch(e,r){return ft.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return ft.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ft.resolve(this.mutationQueue.length===0?fp:this.tr-1)}getAllMutationBatches(e){return ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Xi(r,0),a=new Xi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const l=this.Xr(o.Yr);s.push(l)}),ft.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Ta(xn);return r.forEach(a=>{const s=new Xi(a,0),o=new Xi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),ft.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;_r.isDocumentKey(s)||(s=s.child(""));const o=new Xi(new _r(s),0);let l=new Ta(xn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},o),ft.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Hr(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return ft.forEach(r.mutations,a=>{const s=new Xi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Xi(r,0),a=this.Zr.firstAfterOrEqual(n);return ft.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ft.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uwe{constructor(e){this.ri=e,this.docs=function(){return new vs(_r.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ft.resolve(n?n.document.mutableCopy():Us.newInvalidDocument(r))}getEntries(e,r){let n=Tc();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Us.newInvalidDocument(a))}),ft.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Tc();const o=r.path,l=new _r(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||LP($J(d),n)<=0||(a.has(d.key)||ow(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return ft.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Rr(9500)}ii(e,r){return ft.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new dwe(this)}getSize(e){return ft.resolve(this.size)}}class dwe extends ite{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),ft.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fwe{constructor(e){this.persistence=e,this.si=new jh(r=>Lp(r),sw),this.lastRemoteSnapshotVersion=Zr.min(),this.highestTargetId=0,this.oi=0,this._i=new rR,this.targetCount=0,this.ai=Up.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),ft.resolve()}getLastRemoteSnapshotVersion(e){return ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ft.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ft.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),ft.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Up(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,ft.resolve()}updateTargetData(e,r){return this.Pr(r),ft.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,ft.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),ft.waitFor(s).next(()=>a)}getTargetCount(e){return ft.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return ft.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),ft.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),ft.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),ft.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return ft.resolve(n)}containsKey(e,r){return ft.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,r){this.ui={},this.overlays={},this.ci=new vu(0),this.li=!1,this.li=!0,this.hi=new lwe,this.referenceDelegate=e(this),this.Pi=new fwe(this),this.indexManager=new Zye,this.remoteDocumentCache=function(a){return new uwe(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Kee(r),this.Ii=new iwe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new owe,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new cwe(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){cr("MemoryPersistence","Starting transaction:",e);const a=new hwe(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,r){return ft.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class hwe extends qJ{constructor(e){super(),this.currentSequenceNumber=e}}class OA{constructor(e){this.persistence=e,this.Ri=new rR,this.Vi=null}static mi(e){return new OA(e)}get fi(){if(this.Vi)return this.Vi;throw Rr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),ft.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),ft.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),ft.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ft.forEach(this.fi,n=>{const a=_r.fromPath(n);return this.gi(e,a).next(s=>{s||r.removeEntry(a,Zr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return ft.or([()=>ft.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class h3{constructor(e,r){this.persistence=e,this.pi=new jh(n=>qo(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=ste(this,r)}static mi(e,r){return new h3(e,r)}Ei(){}di(e){return ft.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return ft.forEach(this.pi,(n,a)=>this.br(e,n,a).next(s=>s?ft.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,o=>this.br(e,o,r).next(l=>{l||(n++,s.removeEntry(o,Zr.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),ft.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),ft.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),ft.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),ft.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=PN(e.data.value)),r}br(e,r,n){return ft.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return ft.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mwe{constructor(e){this.serializer=e}k(e,r,n,a){const s=new bA("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore(aw)}(e),function(c){c.createObjectStore(V2,{keyPath:A2e}),c.createObjectStore(Yu,{keyPath:VB,autoIncrement:!0}).createIndex(Jm,$B,{unique:!0}),c.createObjectStore(gx)}(e),OU(e),function(c){c.createObjectStore(Um)}(e));let o=ft.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore(vx),c.deleteObjectStore(xx),c.deleteObjectStore(hp)}(e),OU(e)),o=o.next(()=>function(c){const u=c.store(hp),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zr.min().toTimestamp(),targetCount:0};return u.put(a3,d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store(Yu).J().next(h=>{c.deleteObjectStore(Yu),c.createObjectStore(Yu,{keyPath:VB,autoIncrement:!0}).createIndex(Jm,$B,{unique:!0});const p=u.store(Yu),g=h.map(b=>p.put(b));return ft.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore(bx,{keyPath:R2e})})(e)})),n<5&&a>=5&&(o=o.next(()=>this.yi(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore($2)}(e),this.wi(s)))),n<7&&a>=7&&(o=o.next(()=>this.Si(s))),n<8&&a>=8&&(o=o.next(()=>this.bi(e,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(o=o.next(()=>this.Di(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(wA,{keyPath:D2e})})(e),function(c){c.createObjectStore(_A,{keyPath:M2e})}(e)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(NA,{keyPath:$2e});u.createIndex(qk,H2e,{unique:!1}),u.createIndex(QJ,q2e,{unique:!1})})(e)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(n3,{keyPath:j2e});u.createIndex(IN,T2e),u.createIndex(KJ,C2e)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Um))),n<14&&a>=14&&(o=o.next(()=>this.Fi(e,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore(UP,{keyPath:L2e,autoIncrement:!0}).createIndex(Hk,F2e,{unique:!1}),c.createObjectStore(Qb,{keyPath:B2e}).createIndex(YJ,U2e,{unique:!1}),c.createObjectStore(Jb,{keyPath:z2e}).createIndex(ZJ,V2e,{unique:!1})}(e))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore(Qb).clear()}).next(()=>{r.objectStore(Jb).clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(zP,{keyPath:G2e})})(e)})),n<18&&a>=18&&PQ()&&(o=o.next(()=>{r.objectStore(Qb).clear()}).next(()=>{r.objectStore(Jb).clear()})),o}wi(e){let r=0;return e.store(Um).ee((n,a)=>{r+=f3(a)}).next(()=>{const n={byteSize:r};return e.store($2).put($k,n)})}yi(e){const r=e.store(V2),n=e.store(Yu);return r.J().next(a=>ft.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,fp],[s.userId,s.lastAcknowledgedBatchId]);return n.J(Jm,o).next(l=>ft.forEach(l,c=>{Hr(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Wm(this.serializer,c);return ete(e,s.userId,u).next(()=>{})}))}))}Si(e){const r=e.store(vx),n=e.store(Um);return e.store(hp).get(a3).next(a=>{const s=[];return n.ee((o,l)=>{const c=new ca(o),u=function(h){return[0,qo(h)]}(c);s.push(r.get(u).next(d=>d?ft.resolve():(h=>r.put({targetId:0,path:qo(h),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>ft.waitFor(s))})}bi(e,r){e.createObjectStore(H2,{keyPath:P2e});const n=r.store(H2),a=new tR,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:qo(c)})}};return r.store(Um).ee({X:!0},(o,l)=>{const c=new ca(o);return s(c.popLast())}).next(()=>r.store(gx).ee({X:!0},([o,l,c],u)=>{const d=kd(l);return s(d.popLast())}))}Di(e){const r=e.store(xx);return r.ee((n,a)=>{const s=jb(a),o=Xee(this.serializer,s);return r.put(o)})}Ci(e,r){const n=r.store(Um),a=[];return n.ee((s,o)=>{const l=r.store(n3),c=function(h){return h.document?new _r(ca.fromString(h.document.name).popFirst(5)):h.noDocument?_r.fromSegments(h.noDocument.path):h.unknownDocument?_r.fromSegments(h.unknownDocument.path):Rr(36783)}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>ft.waitFor(a))}Fi(e,r){const n=r.store(Yu),a=ote(this.serializer),s=new nR(OA.mi,this.serializer.yt);return n.J().next(o=>{const l=new Map;return o.forEach(c=>{let u=l.get(c.userId)??Rn();Wm(this.serializer,c).keys().forEach(d=>u=u.add(d)),l.set(c.userId,u)}),ft.forEach(l,(c,u)=>{const d=new wo(u),h=kA.wt(this.serializer,d),p=s.getIndexManager(d),g=IA.wt(d,this.serializer,p,s.referenceDelegate);return new lte(a,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Gk(r,vu.ce),c).next()})})}}function OU(t){t.createObjectStore(vx,{keyPath:I2e}).createIndex(BP,O2e,{unique:!0}),t.createObjectStore(xx,{keyPath:"targetId"}).createIndex(XJ,k2e,{unique:!0}),t.createObjectStore(hp)}const Gh="IndexedDbPersistence",Mj=18e5,Lj=5e3,Fj="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pwe="main";class aR{constructor(e,r,n,a,s,o,l,c,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.Mi=s,this.window=o,this.document=l,this.xi=u,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!aR.v())throw new gr(Mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rwe(this,a),this.$i=r+pwe,this.serializer=new Kee(c),this.Ui=new R0(this.$i,this.Ni,new mwe(this.serializer)),this.hi=new qye,this.Pi=new Jye(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ote(this.serializer),this.Ii=new Hye,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&fl(Gh,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gr(Mt.FAILED_PRECONDITION,Fj);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new vu(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Q_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(r=>{r||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(r=>this.isPrimary&&!r?this.Zi(e).next(()=>!1):!!r&&this.Xi(e).next(()=>!0))).catch(e=>{if(hm(e))return cr(Gh,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return cr(Gh,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Xv(e).get(jg).next(r=>ft.resolve(this.es(r)))}ts(e){return Q_(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Mj)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Li(r,bx);return n.J().next(a=>{const s=this.ss(a,Mj),o=a.filter(l=>s.indexOf(l)===-1);return ft.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const r of e)this.Ki.removeItem(this._s(r.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ft.resolve(!0):Xv(e).get(jg).next(r=>{if(r!==null&&this.rs(r.leaseTimestampMs,Lj)&&!this.us(r.ownerId)){if(this.es(r)&&this.networkEnabled)return!0;if(!this.es(r)){if(!r.allowTabSynchronization)throw new gr(Mt.FAILED_PRECONDITION,Fj);return!1}}return!(!this.networkEnabled||!this.inForeground)||Q_(e).J().next(n=>this.ss(n,Lj).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&cr(Gh,`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[aw,bx],e=>{const r=new Gk(e,vu.ce);return this.Zi(r).next(()=>this.ts(r))}),this.Ui.close(),this.Ps()}ss(e,r){return e.filter(n=>this.rs(n.updateTimeMs,r)&&!this.us(n.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>Q_(e).J().next(r=>this.ss(r,Mj).map(n=>n.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,r){return IA.wt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qye(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return kA.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,r,n){cr(Gh,"Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===18?X2e:c===17?ree:c===16?K2e:c===15?VP:c===14?tee:c===13?eee:c===12?W2e:c===11?JJ:void Rr(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,a,s,l=>(o=new Gk(l,this.ci?this.ci.next():vu.ce),r==="readwrite-primary"?this.Hi(o).next(c=>!!c||this.Yi(o)).next(c=>{if(!c)throw fl(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new gr(Mt.FAILED_PRECONDITION,HJ);return n(o)}).next(c=>this.Xi(o).next(()=>c)):this.Is(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Is(e){return Xv(e).get(jg).next(r=>{if(r!==null&&this.rs(r.leaseTimestampMs,Lj)&&!this.us(r.ownerId)&&!this.es(r)&&!(this.Oi||this.allowTabSynchronization&&r.allowTabSynchronization))throw new gr(Mt.FAILED_PRECONDITION,Fj)})}Xi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xv(e).put(jg,r)}static v(){return R0.v()}Zi(e){const r=Xv(e);return r.get(jg).next(n=>this.es(n)?(cr(Gh,"Releasing primary lease."),r.delete(jg)):ft.resolve())}rs(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(fl(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const r=/(?:Version|Mobile)\/1[456]/;OQ()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var r;try{const n=((r=this.Ki)==null?void 0:r.getItem(this._s(e)))!==null;return cr(Gh,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return fl(Gh,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){fl("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xv(t){return Li(t,aw)}function Q_(t){return Li(t,bx)}function gwe(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=Rn(),a=Rn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new sR(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xwe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cte{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return OQ()?8:GJ(Mi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.ys(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new xwe;return this.Ss(e,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,r,o,l.size)})}).next(()=>s.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(Xg()<=Un.DEBUG&&cr("QueryEngine","SDK will not create cache indexes for query:",Yg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ft.resolve()):(Xg()<=Un.DEBUG&&cr("QueryEngine","Query:",Yg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Xg()<=Un.DEBUG&&cr("QueryEngine","The SDK decides to create cache indexes for query:",Yg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Eu(r))):ft.resolve())}ys(e,r){if(rU(r))return ft.resolve(null);let n=Eu(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=o3(r,null,"F"),n=Eu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=Rn(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(e,o3(r,null,"F")):this.vs(e,u,r,c)}))})))}ws(e,r,n,a){return rU(r)||a.isEqual(Zr.min())?ft.resolve(null):this.ps.getDocuments(e,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?ft.resolve(null):(Xg()<=Un.DEBUG&&cr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Yg(r)),this.vs(e,o,r,v2e(a,B2)).next(l=>l))})}Ds(e,r){let n=new Ta(_ee(e));return r.forEach((a,s)=>{ow(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,r,n){return Xg()<=Un.DEBUG&&cr("QueryEngine","Using full collection scan to execute query:",Yg(r)),this.ps.getDocumentsMatchingQuery(e,r,Uc.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="LocalStore",vwe=3e8;class bwe{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new vs(xn),this.xs=new jh(s=>Lp(s),sw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lte(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function ute(t,e,r,n){return new bwe(t,e,r,n)}async function dte(t,e){const r=gn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=Rn();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function ywe(t,e){const r=gn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,p=h.keys();let g=ft.resolve();return p.forEach(b=>{g=g.next(()=>d.getEntry(c,b)).next(w=>{const _=u.docVersions.get(b);Hr(_!==null,48541),w.version.compareTo(_)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=Rn();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function fte(t){const e=gn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function wwe(t,e){const r=gn(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];e.targetChanges.forEach((d,h)=>{const p=a.get(h);if(!p)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Ei.EMPTY_BYTE_STRING,Zr.min()).withLastLimboFreeSnapshotVersion(Zr.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),a=a.insert(h,g),function(w,_,N){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=vwe?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(p,g,d)&&l.push(r.Pi.updateTargetData(s,g))});let c=Tc(),u=Rn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(_we(s,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Zr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(h=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return ft.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function _we(t,e,r){let n=Rn(),a=Rn();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=Tc();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Zr.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):cr(iR,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:a}})}function Nwe(t,e){const r=gn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=fp),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Ewe(t,e){const r=gn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(s=>s?(a=s,ft.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new Ff(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function i8(t,e,r){const n=gn(t),a=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!hm(o))throw o;cr(iR,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function PU(t,e,r){const n=gn(t);let a=Zr.min(),s=Rn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=gn(c),p=h.xs.get(d);return p!==void 0?ft.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,d)}(n,o,Eu(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?a:Zr.min(),r?s:Rn())).next(l=>(Awe(n,uye(e),l),{documents:l,Qs:s})))}function Awe(t,e,r){let n=t.Os.get(e)||Zr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class RU{constructor(){this.activeTargetIds=gye()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hte{constructor(){this.Mo=new RU,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new RU,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Swe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU="ConnectivityMonitor";class MU{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){cr(DU,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){cr(DU,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J_=null;function o8(){return J_===null?J_=function(){return 268435456+Math.round(2147483648*Math.random())}():J_++,"0x"+J_.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="RestConnection",jwe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Twe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===G2?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,s){const o=o8(),l=this.zo(e,r.toUriEncodedString());cr(Bj,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=Sh(u);return this.Jo(e,l,c,n,d).then(h=>(cr(Bj,`Received RPC '${e}' ${o}: `,h),h),h=>{throw mx(Bj,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",n),h})}Ho(e,r,n,a,s,o){return this.Go(e,r,n,a,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sv}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}zo(e,r){const n=jwe[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cwe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="WebChannelConnection";class kwe extends Twe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,s){const o=o8();return new Promise((l,c)=>{const u=new PJ;u.setWithCredentials(!0),u.listenOnce(RJ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case TN.NO_ERROR:const h=u.getResponseJson();cr(Do,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case TN.TIMEOUT:cr(Do,`RPC '${e}' ${o} timed out`),c(new gr(Mt.DEADLINE_EXCEEDED,"Request time out"));break;case TN.HTTP_ERROR:const p=u.getStatus();if(cr(Do,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const w=function(N){const A=N.toLowerCase().replace(/_/g,"-");return Object.values(Mt).indexOf(A)>=0?A:Mt.UNKNOWN}(b.status);c(new gr(w,b.message))}else c(new gr(Mt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new gr(Mt.UNAVAILABLE,"Connection failed."));break;default:Rr(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{cr(Do,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(a);cr(Do,`RPC '${e}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(e,r,n){const a=o8(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=LJ(),l=MJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");cr(Do,`Creating RPC '${e}' stream ${a}: ${d}`,c);const h=o.createWebChannel(d,c);this.I_(h);let p=!1,g=!1;const b=new Cwe({Yo:_=>{g?cr(Do,`Not sending because RPC '${e}' stream ${a} is closed:`,_):(p||(cr(Do,`Opening RPC '${e}' stream ${a} transport.`),h.open(),p=!0),cr(Do,`RPC '${e}' stream ${a} sending:`,_),h.send(_))},Zo:()=>h.close()}),w=(_,N,A)=>{_.listen(N,j=>{try{A(j)}catch(P){setTimeout(()=>{throw P},0)}})};return w(h,Eb.EventType.OPEN,()=>{g||(cr(Do,`RPC '${e}' stream ${a} transport opened.`),b.o_())}),w(h,Eb.EventType.CLOSE,()=>{g||(g=!0,cr(Do,`RPC '${e}' stream ${a} transport closed`),b.a_(),this.E_(h))}),w(h,Eb.EventType.ERROR,_=>{g||(g=!0,mx(Do,`RPC '${e}' stream ${a} transport errored. Name:`,_.name,"Message:",_.message),b.a_(new gr(Mt.UNAVAILABLE,"The operation could not be completed")))}),w(h,Eb.EventType.MESSAGE,_=>{var N;if(!g){const A=_.data[0];Hr(!!A,16349);const j=A,P=(j==null?void 0:j.error)||((N=j[0])==null?void 0:N.error);if(P){cr(Do,`RPC '${e}' stream ${a} received error:`,P);const U=P.status;let G=function(I){const V=di[I];if(V!==void 0)return Ree(V)}(U),O=P.message;G===void 0&&(G=Mt.INTERNAL,O="Unknown error status: "+U+" with message "+P.message),g=!0,b.a_(new gr(G,O)),h.close()}else cr(Do,`RPC '${e}' stream ${a} received:`,A),b.u_(A)}}),w(l,DJ.STAT_EVENT,_=>{_.stat===Uk.PROXY?cr(Do,`RPC '${e}' stream ${a} detected buffering proxy`):_.stat===Uk.NOPROXY&&cr(Do,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iwe(){return typeof window<"u"?window:null}function FN(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t){return new Pye(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mte{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&cr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="PersistentStream";class pte{constructor(e,r,n,a,s,o,l,c){this.Mi=e,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mte(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===Mt.RESOURCE_EXHAUSTED?(fl(r.toString()),fl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new gr(Mt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return cr(LU,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(cr(LU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Owe extends pte{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=Mye(this.serializer,e),n=function(s){if(!("targetChange"in s))return Zr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Zr.min():o.readTime?xl(o.readTime):Zr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=t8(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=s3(c)?{documents:Vee(s,c)}:{query:$ee(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Lee(s,o.resumeToken);const u=Jk(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Zr.min())>0){l.readTime=Sx(s,o.snapshotVersion.toTimestamp());const u=Jk(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=Fye(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=t8(this.serializer),r.removeTarget=e,this.q_(r)}}class Pwe extends pte{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Hr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Hr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Hr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=Lye(e.writeResults,e.commitTime),n=xl(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=t8(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>c3(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rwe{}class Dwe extends Rwe{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new gr(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,e8(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new gr(Mt.UNKNOWN,s.toString())})}Ho(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,e8(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new gr(Mt.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Mwe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fl(r),this.aa=!1):cr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="RemoteStore";class Lwe{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{dg(this)&&(cr(zp,"Restarting streams for network reachability change."),await async function(c){const u=gn(c);u.Ea.add(4),await dw(u),u.Ra.set("Unknown"),u.Ea.delete(4),await uw(u)}(this))})}),this.Ra=new Mwe(n,a)}}async function uw(t){if(dg(t))for(const e of t.da)await e(!0)}async function dw(t){for(const e of t.da)await e(!1)}function gte(t,e){const r=gn(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),uR(r)?cR(r):ov(r).O_()&&lR(r,e))}function oR(t,e){const r=gn(t),n=ov(r);r.Ia.delete(e),n.O_()&&xte(r,e),r.Ia.size===0&&(n.O_()?n.L_():dg(r)&&r.Ra.set("Unknown"))}function lR(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Zr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}ov(t).Y_(e)}function xte(t,e){t.Va.Ue(e),ov(t).Z_(e)}function cR(t){t.Va=new Cye({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ov(t).start(),t.Ra.ua()}function uR(t){return dg(t)&&!ov(t).x_()&&t.Ia.size>0}function dg(t){return gn(t).Ea.size===0}function vte(t){t.Va=void 0}async function Fwe(t){t.Ra.set("Online")}async function Bwe(t){t.Ia.forEach((e,r)=>{lR(t,e)})}async function Uwe(t,e){vte(t),uR(t)?(t.Ra.ha(e),cR(t)):t.Ra.set("Unknown")}async function zwe(t,e,r){if(t.Ra.set("Online"),e instanceof Mee&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(t,e)}catch(n){cr(zp,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await m3(t,n)}else if(e instanceof MN?t.Va.Ze(e):e instanceof Dee?t.Va.st(e):t.Va.tt(e),!r.isEqual(Zr.min()))try{const n=await fte(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Ei.EMPTY_BYTE_STRING,d.snapshotVersion)),xte(s,c);const h=new Ff(d.target,c,u,d.sequenceNumber);lR(s,h)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){cr(zp,"Failed to raise snapshot:",n),await m3(t,n)}}async function m3(t,e,r){if(!hm(e))throw e;t.Ea.add(1),await dw(t),t.Ra.set("Offline"),r||(r=()=>fte(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{cr(zp,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await uw(t)})}function bte(t,e){return e().catch(r=>m3(t,r,e))}async function fw(t){const e=gn(t),r=X0(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fp;for(;Vwe(e);)try{const a=await Nwe(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,$we(e,a)}catch(a){await m3(e,a)}yte(e)&&wte(e)}function Vwe(t){return dg(t)&&t.Ta.length<10}function $we(t,e){t.Ta.push(e);const r=X0(t);r.O_()&&r.X_&&r.ea(e.mutations)}function yte(t){return dg(t)&&!X0(t).x_()&&t.Ta.length>0}function wte(t){X0(t).start()}async function Hwe(t){X0(t).ra()}async function qwe(t){const e=X0(t);for(const r of t.Ta)e.ea(r.mutations)}async function Gwe(t,e,r){const n=t.Ta.shift(),a=YP.from(n,e,r);await bte(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await fw(t)}async function Wwe(t,e){e&&X0(t).X_&&await async function(n,a){if(function(o){return Sye(o)&&o!==Mt.ABORTED}(a.code)){const s=n.Ta.shift();X0(n).B_(),await bte(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await fw(n)}}(t,e),yte(t)&&wte(t)}async function FU(t,e){const r=gn(t);r.asyncQueue.verifyOperationInProgress(),cr(zp,"RemoteStore received new credentials");const n=dg(r);r.Ea.add(3),await dw(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await uw(r)}async function Kwe(t,e){const r=gn(t);e?(r.Ea.delete(2),await uw(r)):e||(r.Ea.add(2),await dw(r),r.Ra.set("Unknown"))}function ov(t){return t.ma||(t.ma=function(r,n,a){const s=gn(r);return s.sa(),new Owe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:Fwe.bind(null,t),t_:Bwe.bind(null,t),r_:Uwe.bind(null,t),H_:zwe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),uR(t)?cR(t):t.Ra.set("Unknown")):(await t.ma.stop(),vte(t))})),t.ma}function X0(t){return t.fa||(t.fa=function(r,n,a){const s=gn(r);return s.sa(),new Pwe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hwe.bind(null,t),r_:Wwe.bind(null,t),ta:qwe.bind(null,t),na:Gwe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await fw(t)):(await t.fa.stop(),t.Ta.length>0&&(cr(zp,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Gf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new dR(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new gr(Mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fR(t,e){if(fl("AsyncQueue",`${e}: ${t}`),hm(t))return new gr(Mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{static emptySet(e){return new B1(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||_r.comparator(r.key,n.key):(r,n)=>_r.comparator(r.key,n.key),this.keyedMap=Ab(),this.sortedSet=new vs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof B1)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new B1;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(){this.ga=new vs(_r.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Rr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class jx{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new jx(e,r,B1.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&SA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xwe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ywe{constructor(){this.queries=UU(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=gn(r),s=a.queries;a.queries=UU(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new gr(Mt.ABORTED,"Firestore shutting down"))}}function UU(){return new jh(t=>wee(t),SA)}async function _te(t,e){const r=gn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.ba()&&e.Da()&&(n=2):(s=new Xwe,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=fR(o,`Initialization of query '${Yg(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&hR(r)}async function Nte(t,e){const r=gn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Zwe(t,e){const r=gn(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(a)&&(n=!0);o.wa=a}}n&&hR(r)}function Qwe(t,e,r){const n=gn(t),a=n.queries.get(e);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(e)}function hR(t){t.Ca.forEach(e=>{e.next()})}var l8,zU;(zU=l8||(l8={})).Ma="default",zU.Cache="cache";class Ete{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new jx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=jx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==l8.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(e){this.key=e}}class Ste{constructor(e){this.key=e}}class Jwe{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Rn(),this.mutatedKeys=Rn(),this.eu=_ee(e),this.tu=new B1(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new BU,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,h)=>{const p=a.get(d),g=ow(this.query,h)?h:null,b=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?b!==w&&(n.track({type:3,doc:g}),_=!0):this.su(p,g)||(n.track({type:2,doc:g}),_=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(n.track({type:0,doc:g}),_=!0):p&&!g&&(n.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(g?(o=o.add(g),s=w?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(g,b){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rr(20277,{Rt:_})}};return w(g)-w(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new jx(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new BU,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Rn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new Ste(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new Ate(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=Rn();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return jx.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mR="SyncEngine";class e_e{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class t_e{constructor(e){this.key=e,this.hu=!1}}class r_e{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new jh(l=>wee(l),SA),this.Iu=new Map,this.Eu=new Set,this.du=new vs(_r.comparator),this.Au=new Map,this.Ru=new rR,this.Vu={},this.mu=new Map,this.fu=Up.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function n_e(t,e,r=!0){const n=Ote(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await jte(n,e,r,!0),a}async function a_e(t,e){const r=Ote(t);await jte(r,e,!0,!1)}async function jte(t,e,r,n){const a=await Ewe(t.localStore,Eu(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await s_e(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&gte(t.remoteStore,a),l}async function s_e(t,e,r,n,a){t.pu=(h,p,g)=>async function(w,_,N,A){let j=_.view.ru(N);j.Cs&&(j=await PU(w.localStore,_.query,!1).then(({documents:O})=>_.view.ru(O,j)));const P=A&&A.targetChanges.get(_.targetId),U=A&&A.targetMismatches.get(_.targetId)!=null,G=_.view.applyChanges(j,w.isPrimaryClient,P,U);return $U(w,_.targetId,G.au),G.snapshot}(t,h,p,g);const s=await PU(t.localStore,e,!0),o=new Jwe(e,s.Qs),l=o.ru(s.documents),c=cw.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);$U(t,r,u.au);const d=new e_e(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function i_e(t,e,r){const n=gn(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!SA(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await i8(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&oR(n.remoteStore,a.targetId),c8(n,a.targetId)}).catch(ug)):(c8(n,a.targetId),await i8(n.localStore,a.targetId,!0))}async function o_e(t,e){const r=gn(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),oR(r.remoteStore,n.targetId))}async function l_e(t,e,r){const n=Pte(t);try{const a=await function(o,l){const c=gn(o),u=na.now(),d=l.reduce((g,b)=>g.add(b.key),Rn());let h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Tc(),w=Rn();return c.Ns.getEntries(g,d).next(_=>{b=_,b.forEach((N,A)=>{A.isValidDocument()||(w=w.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(_=>{h=_;const N=[];for(const A of l){const j=Eye(A,h.get(A.key).overlayedDocument);j!=null&&N.push(new pm(A.key,j,fee(j.value.mapValue),Cc.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,N,l)}).next(_=>{p=_;const N=_.applyToLocalDocumentSet(h,w);return c.documentOverlayCache.saveOverlays(g,_.batchId,N)})}).then(()=>({batchId:p.batchId,changes:Eee(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new vs(xn)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,a.batchId,r),await hw(n,a.changes),await fw(n.remoteStore)}catch(a){const s=fR(a,"Failed to persist write");r.reject(s)}}async function Tte(t,e){const r=gn(t);try{const n=await wwe(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(Hr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?Hr(o.hu,14607):a.removedDocuments.size>0&&(Hr(o.hu,42227),o.hu=!1))}),await hw(r,n,e)}catch(n){await ug(n)}}function VU(t,e,r){const n=gn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=gn(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(l)&&(u=!0)}),u&&hR(c)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function c_e(t,e,r){const n=gn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let o=new vs(_r.comparator);o=o.insert(s,Us.newNoDocument(s,Zr.min()));const l=Rn().add(s),c=new CA(Zr.min(),new Map,new vs(xn),o,l);await Tte(n,c),n.du=n.du.remove(s),n.Au.delete(e),pR(n)}else await i8(n.localStore,e,!1).then(()=>c8(n,e,r)).catch(ug)}async function u_e(t,e){const r=gn(t),n=e.batch.batchId;try{const a=await ywe(r.localStore,e);kte(r,n,null),Cte(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await hw(r,a)}catch(a){await ug(a)}}async function d_e(t,e,r){const n=gn(t);try{const a=await function(o,l){const c=gn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(Hr(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);kte(n,e,r),Cte(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await hw(n,a)}catch(a){await ug(a)}}function Cte(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function kte(t,e,r){const n=gn(t);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function c8(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||Ite(t,n)})}function Ite(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(oR(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),pR(t))}function $U(t,e,r){for(const n of r)n instanceof Ate?(t.Ru.addReference(n.key,e),f_e(t,n)):n instanceof Ste?(cr(mR,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||Ite(t,n.key)):Rr(19791,{wu:n})}function f_e(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(cr(mR,"New document in limbo: "+r),t.Eu.add(n),pR(t))}function pR(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new _r(ca.fromString(e)),n=t.fu.next();t.Au.set(n,new t_e(r)),t.du=t.du.insert(r,n),gte(t.remoteStore,new Ff(Eu(iw(r.path)),n,"TargetPurposeLimboResolution",vu.ce))}}async function hw(t,e,r){const n=gn(t),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){a.push(u);const h=sR.As(c.targetId,u);s.push(h)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(c,u){const d=gn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ft.forEach(u,p=>ft.forEach(p.Es,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>ft.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!hm(h))throw h;cr(iR,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const g=d.Ms.get(p),b=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(p,w)}}}(n.localStore,s))}async function h_e(t,e){const r=gn(t);if(!r.currentUser.isEqual(e)){cr(mR,"User change. New user:",e.toKey());const n=await dte(r.localStore,e);r.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new gr(Mt.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await hw(r,n.Ls)}}function m_e(t,e){const r=gn(t),n=r.Au.get(e);if(n&&n.hu)return Rn().add(n.key);{let a=Rn();const s=r.Iu.get(e);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function Ote(t){const e=gn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tte.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m_e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c_e.bind(null,e),e.Pu.H_=Zwe.bind(null,e.eventManager),e.Pu.yu=Qwe.bind(null,e.eventManager),e}function Pte(t){const e=gn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u_e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d_e.bind(null,e),e}class J2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=PA(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return ute(this.persistence,new cte,e.initialUser,this.serializer)}Cu(e){return new nR(OA.mi,this.serializer)}Du(e){return new hte}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}J2.provider={build:()=>new J2};class p_e extends J2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Hr(this.persistence.referenceDelegate instanceof h3,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ate(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?zo.withCacheSize(this.cacheSizeBytes):zo.DEFAULT;return new nR(n=>h3.mi(n,r),this.serializer)}}class g_e extends J2{constructor(e,r,n){super(),this.xu=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Pte(this.xu.syncEngine),await fw(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return ute(this.persistence,new cte,e.initialUser,this.serializer)}Fu(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new ate(n,e.asyncQueue,r)}Mu(e,r){const n=new _2e(r,this.persistence);return new w2e(e.asyncQueue,n)}Cu(e){const r=gwe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?zo.withCacheSize(this.cacheSizeBytes):zo.DEFAULT;return new aR(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,Iwe(),FN(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new hte}}class p3{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>VU(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=h_e.bind(null,this.syncEngine),await Kwe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ywe}()}createDatastore(e){const r=PA(e.databaseInfo.databaseId),n=function(s){return new kwe(s)}(e.databaseInfo);return function(s,o,l,c){return new Dwe(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new Lwe(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>VU(this.syncEngine,r,0),function(){return MU.v()?new MU:new Swe}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const h=new r_e(a,s,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=gn(a);cr(zp,"RemoteStore shutting down."),s.Ea.add(5),await dw(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}p3.provider={build:()=>new p3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rte{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="FirestoreClient";class x_e{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=wo.UNAUTHENTICATED,this.clientId=MP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{cr(Y0,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(cr(Y0,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=fR(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Uj(t,e){t.asyncQueue.verifyOperationInProgress(),cr(Y0,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await dte(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HU(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Dte(t);cr(Y0,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>FU(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>FU(e.remoteStore,a)),t._onlineComponents=e}async function Dte(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){cr(Y0,"Using user provided OfflineComponentProvider");try{await Uj(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Mt.FAILED_PRECONDITION||a.code===Mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;mx("Error using user provided cache. Falling back to memory cache: "+r),await Uj(t,new J2)}}else cr(Y0,"Using default OfflineComponentProvider"),await Uj(t,new p_e(void 0));return t._offlineComponents}async function gR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(cr(Y0,"Using user provided OnlineComponentProvider"),await HU(t,t._uninitializedComponentsProvider._online)):(cr(Y0,"Using default OnlineComponentProvider"),await HU(t,new p3))),t._onlineComponents}function v_e(t){return Dte(t).then(e=>e.persistence)}function b_e(t){return gR(t).then(e=>e.remoteStore)}function y_e(t){return gR(t).then(e=>e.syncEngine)}async function u8(t){const e=await gR(t),r=e.eventManager;return r.onListen=n_e.bind(null,e.syncEngine),r.onUnlisten=i_e.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=a_e.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=o_e.bind(null,e.syncEngine),r}function w_e(t){return t.asyncQueue.enqueue(async()=>{const e=await v_e(t),r=await b_e(t);return e.setNetworkEnabled(!0),function(a){const s=gn(a);return s.Ea.delete(0),uw(s)}(r)})}function __e(t,e,r={}){const n=new Gf;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new Rte({next:p=>{d.Nu(),o.enqueueAndForget(()=>Nte(s,h));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new gr(Mt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new gr(Mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new Ete(iw(l.path),d,{includeMetadataChanges:!0,qa:!0});return _te(s,h)}(await u8(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mte(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte="firestore.googleapis.com",GU=!0;class WU{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new gr(Mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Lte,this.ssl=GU}else this.host=e.host,this.ssl=e.ssl??GU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jee;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nte)throw new gr(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g2e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mte(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new gr(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new gr(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new gr(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class RA{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WU({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new gr(Mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new gr(Mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WU(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new i2e;switch(n.type){case"firstParty":return new u2e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new gr(Mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=qU.get(r);n&&(cr("ComponentProvider","Removing Datastore"),qU.delete(r),n.terminate())}(this),Promise.resolve()}}function N_e(t,e,r,n={}){var u;t=Wf(t,RA);const a=Sh(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;a&&(dA(`https://${l}`),NP("Firestore",!0)),s.host!==Lte&&s.host!==l&&mx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!H0(c,o)&&(t._setSettings(c),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=wo.MOCK_USER;else{d=kQ(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new gr(Mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new wo(p)}t._authCredentials=new o2e(new BJ(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new gm(this.firestore,e,this._query)}}class ri{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new D0(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ri(this.firestore,e,this._key)}toJSON(){return{type:ri._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(nw(r,ri._jsonSchema))return new ri(e,n||null,new _r(ca.fromString(r.referencePath)))}}ri._jsonSchemaVersion="firestore/documentReference/1.0",ri._jsonSchema={type:vi("string",ri._jsonSchemaVersion),referencePath:vi("string")};class D0 extends gm{constructor(e,r,n){super(e,r,iw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ri(this.firestore,null,new _r(e))}withConverter(e){return new D0(this.firestore,e,this._path)}}function DA(t,e,...r){if(t=Ss(t),zJ("collection","path",e),t instanceof RA){const n=ca.fromString(e,...r);return LB(n),new D0(t,null,n)}{if(!(t instanceof ri||t instanceof D0))throw new gr(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ca.fromString(e,...r));return LB(n),new D0(t.firestore,null,n)}}function g3(t,e,...r){if(t=Ss(t),arguments.length===1&&(e=MP.newId()),zJ("doc","path",e),t instanceof RA){const n=ca.fromString(e,...r);return MB(n),new ri(t,null,new _r(n))}{if(!(t instanceof ri||t instanceof D0))throw new gr(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ca.fromString(e,...r));return MB(n),new ri(t.firestore,t instanceof D0?t.converter:null,new _r(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU="AsyncQueue";class XU{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mte(this,"async_queue_retry"),this._c=()=>{const n=FN();n&&cr(KU,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=FN();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=FN();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Gf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!hm(e))throw e;cr(KU,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,fl("INTERNAL UNHANDLED ERROR: ",YU(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=dR.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Rr(47125,{Pc:YU(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function YU(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Tx extends RA{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new XU,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XU(e),this._firestoreClient=void 0,await e}}}function E_e(t,e,r){r||(r=G2);const n=Jy(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),s=n.getOptions(r);if(H0(s,e))return a;throw new gr(Mt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new gr(Mt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nte)throw new gr(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Sh(e.host)&&dA(e.host),n.initialize({options:e,instanceIdentifier:r})}function A_e(t,e){const r=typeof t=="object"?t:SP(),n=typeof t=="string"?t:G2,a=Jy(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=jQ("firestore");s&&N_e(a,...s)}return a}function MA(t){if(t._terminated)throw new gr(Mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||S_e(t),t._firestoreClient}function S_e(t){var n,a,s;const e=t._freezeSettings(),r=function(l,c,u,d){return new Z2e(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Mte(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new x_e(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function vdt(t){return w_e(MA(t=Wf(t,Tx)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pu(Ei.fromBase64String(e))}catch(r){throw new gr(Mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new pu(Ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nw(e,pu._jsonSchema))return pu.fromBase64String(e.bytes)}}pu._jsonSchemaVersion="firestore/bytes/1.0",pu._jsonSchema={type:vi("string",pu._jsonSchemaVersion),bytes:vi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new gr(Mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Es(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new gr(Mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new gr(Mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xn(this._lat,e._lat)||xn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zd._jsonSchemaVersion}}static fromJSON(e){if(nw(e,zd._jsonSchema))return new zd(e.latitude,e.longitude)}}zd._jsonSchemaVersion="firestore/geoPoint/1.0",zd._jsonSchema={type:vi("string",zd._jsonSchemaVersion),latitude:vi("number"),longitude:vi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Vd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nw(e,Vd._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Vd(e.vectorValues);throw new gr(Mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vd._jsonSchemaVersion="firestore/vectorValue/1.0",Vd._jsonSchema={type:vi("string",Vd._jsonSchemaVersion),vectorValues:vi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_e=/^__.*__$/;class Fte{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new pm(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Bte(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rr(40011,{Ac:t})}}class vR{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vR({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return x3(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bte(this.Ac)&&j_e.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T_e{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||PA(e)}Cc(e,r,n,a=!1){return new vR({Ac:e,methodName:r,Dc:n,path:Es.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ute(t){const e=t._freezeSettings(),r=PA(t._databaseId);return new T_e(t._databaseId,!!e.ignoreUndefinedProperties,r)}class FA extends xR{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof FA}}function C_e(t,e,r,n){const a=t.Cc(1,e,r);Vte("Data must be an object, but it was:",a,n);const s=[],o=hl.empty();mm(n,(c,u)=>{const d=bR(e,c,r);u=Ss(u);const h=a.yc(d);if(u instanceof FA)s.push(d);else{const p=mw(u,h);p!=null&&(s.push(d),o.set(d,p))}});const l=new bu(s);return new Fte(o,l,a.fieldTransforms)}function k_e(t,e,r,n,a,s){const o=t.Cc(1,e,r),l=[QU(e,n,r)],c=[a];if(s.length%2!=0)throw new gr(Mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(QU(e,s[p])),c.push(s[p+1]);const u=[],d=hl.empty();for(let p=l.length-1;p>=0;--p)if(!R_e(u,l[p])){const g=l[p];let b=c[p];b=Ss(b);const w=o.yc(g);if(b instanceof FA)u.push(g);else{const _=mw(b,w);_!=null&&(u.push(g),d.set(g,_))}}const h=new bu(u);return new Fte(d,h,o.fieldTransforms)}function I_e(t,e,r,n=!1){return mw(r,t.Cc(n?4:3,e))}function mw(t,e){if(zte(t=Ss(t)))return Vte("Unsupported field value:",e,t),O_e(t,e);if(t instanceof xR)return function(n,a){if(!Bte(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=mw(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Ss(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return xye(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=na.fromDate(n);return{timestampValue:Sx(a.serializer,s)}}if(n instanceof na){const s=new na(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Sx(a.serializer,s)}}if(n instanceof zd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof pu)return{bytesValue:Lee(a.serializer,n._byteString)};if(n instanceof ri){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:JP(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Vd)return function(o,l){return{mapValue:{fields:{[HP]:{stringValue:qP},[yx]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return WP(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${vA(n)}`)}(t,e)}function O_e(t,e){const r={};return nee(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mm(t,(n,a)=>{const s=mw(a,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function zte(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof na||t instanceof zd||t instanceof pu||t instanceof ri||t instanceof xR||t instanceof Vd)}function Vte(t,e,r){if(!zte(r)||!VJ(r)){const n=vA(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function QU(t,e,r){if((e=Ss(e))instanceof LA)return e._internalPath;if(typeof e=="string")return bR(t,e);throw x3("Field path arguments must be of type string or ",t,!1,void 0,r)}const P_e=new RegExp("[~\\*/\\[\\]]");function bR(t,e,r){if(e.search(P_e)>=0)throw x3(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new LA(...e.split("."))._internalPath}catch{throw x3(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function x3(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new gr(Mt.INVALID_ARGUMENT,l+t+c)}function R_e(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $te{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D_e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(BA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class D_e extends $te{data(){return super.data()}}function BA(t,e){return typeof e=="string"?bR(t,e):e instanceof LA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_e(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new gr(Mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yR{}class wR extends yR{}function gu(t,e,...r){let n=[];e instanceof yR&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof _R).length,l=s.filter(c=>c instanceof UA).length;if(o>1||o>0&&l>0)throw new gr(Mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class UA extends wR{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new UA(e,r,n)}_apply(e){const r=this._parse(e);return Hte(e._query,r),new gm(e.firestore,e.converter,Qk(e._query,r))}_parse(e){const r=Ute(e.firestore);return function(s,o,l,c,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new gr(Mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){ez(h,d);const b=[];for(const w of h)b.push(JU(c,s,w));p={arrayValue:{values:b}}}else p=JU(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||ez(h,d),p=I_e(l,o,h,d==="in"||d==="not-in");return Vn.create(u,d,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function M0(t,e,r){const n=e,a=BA("where",t);return UA._create(a,n,r)}class _R extends yR{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new _R(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Sa.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)Hte(o,c),o=Qk(o,c)}(e._query,r),new gm(e.firestore,e.converter,Qk(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class NR extends wR{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new NR(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new gr(Mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new gr(Mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Y2(s,o)}(e._query,this._field,this._direction);return new gm(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new iv(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function ey(t,e="asc"){const r=e,n=BA("orderBy",t);return NR._create(n,r)}class ER extends wR{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new ER(e,r,n)}_apply(e){return new gm(e.firestore,e.converter,o3(e._query,this._limit,this._limitType))}}function d8(t){return x2e("limit",t),ER._create("limit",t,"F")}function JU(t,e,r){if(typeof(r=Ss(r))=="string"){if(r==="")throw new gr(Mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yee(e)&&r.indexOf("/")!==-1)throw new gr(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ca.fromString(r));if(!_r.isDocumentKey(n))throw new gr(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return K2(t,new _r(n))}if(r instanceof ri)return K2(t,r._key);throw new gr(Mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vA(r)}.`)}function ez(t,e){if(!Array.isArray(t)||t.length===0)throw new gr(Mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hte(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new gr(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new gr(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class L_e{convertValue(e,r="none"){switch(W0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ch(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Rr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return mm(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,a,s;const r=(s=(a=(n=e.fields)==null?void 0:n[yx].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>fs(o.doubleValue));return new Vd(r)}convertGeoPoint(e){return new zd(fs(e.latitude),fs(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=EA(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(q2(e));default:return null}}convertTimestamp(e){const r=lh(e);return new na(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ca.fromString(e);Hr(Wee(n),9688,{name:e});const a=new Mp(n.get(1),n.get(3)),s=new _r(n.popFirst(5));return a.isEqual(r)||fl(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}class Tb{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pp extends $te{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new BN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(BA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new gr(Mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=pp._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}pp._jsonSchemaVersion="firestore/documentSnapshot/1.0",pp._jsonSchema={type:vi("string",pp._jsonSchemaVersion),bundleSource:vi("string","DocumentSnapshot"),bundleName:vi("string"),bundle:vi("string")};class BN extends pp{data(e={}){return super.data(e)}}class U1{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new Tb(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new BN(this._firestore,this._userDataWriter,n.key,n,new Tb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new gr(Mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new BN(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Tb(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new BN(a._firestore,a._userDataWriter,l.doc.key,l.doc,new Tb(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:F_e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new gr(Mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=U1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=MP.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F_e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(t){t=Wf(t,ri);const e=Wf(t.firestore,Tx);return __e(MA(e),t._key).then(r=>Gte(e,t,r))}U1._jsonSchemaVersion="firestore/querySnapshot/1.0",U1._jsonSchema={type:vi("string",U1._jsonSchemaVersion),bundleSource:vi("string","QuerySnapshot"),bundleName:vi("string"),bundle:vi("string")};class qte extends L_e{constructor(e){super(),this.firestore=e}convertBytes(e){return new pu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,r)}}function rz(t,e,r,...n){t=Wf(t,ri);const a=Wf(t.firestore,Tx),s=Ute(a);let o;return o=typeof(e=Ss(e))=="string"||e instanceof LA?k_e(s,"updateDoc",t._key,e,r,n):C_e(s,"updateDoc",t._key,e),B_e(a,[o.toMutation(t._key,Cc.exists(!0))])}function zA(t,...e){var c,u,d;t=Ss(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||ZU(e[n])||(r=e[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(ZU(e[n])){const h=e[n];e[n]=(c=h.next)==null?void 0:c.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,l;if(t instanceof ri)o=Wf(t.firestore,Tx),l=iw(t._key.path),s={next:h=>{e[n]&&e[n](Gte(o,t,h))},error:e[n+1],complete:e[n+2]};else{const h=Wf(t,gm);o=Wf(h.firestore,Tx),l=h._query;const p=new qte(o);s={next:g=>{e[n]&&e[n](new U1(o,p,h,g))},error:e[n+1],complete:e[n+2]},M_e(t._query)}return function(p,g,b,w){const _=new Rte(w),N=new Ete(g,_,b);return p.asyncQueue.enqueueAndForget(async()=>_te(await u8(p),N)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>Nte(await u8(p),N))}}(MA(o),l,a,s)}function B_e(t,e){return function(n,a){const s=new Gf;return n.asyncQueue.enqueueAndForget(async()=>l_e(await y_e(n),a,s)),s.promise}(MA(t),e)}function Gte(t,e,r){const n=r.docs.get(e._key),a=new qte(t);return new pp(t,a,e._key,n,new Tb(r.hasPendingWrites,r.fromCache),e.converter)}class U_e{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=$_e(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function z_e(t){return new U_e(t)}class V_e{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=p3.provider,this._offlineComponentProvider={build:r=>new g_e(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function $_e(t){return new V_e(t==null?void 0:t.forceOwnership)}(function(e,r=!0){(function(a){sv=a})(og),Rp(new q0("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Tx(new l2e(n.getProvider("auth-internal")),new d2e(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new gr(Mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mp(u.options.projectId,d)}(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Fd(OB,PB,e),Fd(OB,PB,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wte="firebasestorage.googleapis.com",Kte="storageBucket",H_e=2*60*1e3,q_e=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends rf{constructor(e,r,n=0){super(zj(e),`Firebase Storage: ${r} (${zj(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zj(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vs;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vs||(Vs={}));function zj(t){return"storage/"+t}function AR(){const t="An unknown error occurred, please check the error payload for server response.";return new Hs(Vs.UNKNOWN,t)}function G_e(t){return new Hs(Vs.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function W_e(t){return new Hs(Vs.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function K_e(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Hs(Vs.UNAUTHENTICATED,t)}function X_e(){return new Hs(Vs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Y_e(t){return new Hs(Vs.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Z_e(){return new Hs(Vs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Q_e(){return new Hs(Vs.CANCELED,"User canceled the upload/download.")}function J_e(t){return new Hs(Vs.INVALID_URL,"Invalid URL '"+t+"'.")}function e5e(t){return new Hs(Vs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function t5e(){return new Hs(Vs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Kte+"' property when initializing the app?")}function r5e(){return new Hs(Vs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function n5e(){return new Hs(Vs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function a5e(t){return new Hs(Vs.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function f8(t){return new Hs(Vs.INVALID_ARGUMENT,t)}function Xte(){return new Hs(Vs.APP_DELETED,"The Firebase app was deleted.")}function s5e(t){return new Hs(Vs.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function a2(t,e){return new Hs(Vs.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Yv(t){throw new Hs(Vs.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=kc.makeFromUrl(e,r)}catch{return new kc(e,"")}if(n.path==="")return n;throw e5e(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${a}/o${p}`,"i"),b={bucket:1,path:3},w=r===Wte?"(?:storage.googleapis.com|storage.cloud.google.com)":r,_="([^?#]*)",N=new RegExp(`^https?://${w}/${a}/${_}`,"i"),j=[{regex:l,indices:c,postModify:s},{regex:g,indices:b,postModify:u},{regex:N,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<j.length;P++){const U=j[P],G=U.regex.exec(e);if(G){const O=G[U.indices.bucket];let D=G[U.indices.path];D||(D=""),n=new kc(O,D),U.postModify(n);break}}if(n==null)throw J_e(e);return n}}class i5e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5e(t,e,r){let n=1,a=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function h(_){a=setTimeout(()=>{a=null,t(g,c())},_)}function p(){s&&clearTimeout(s)}function g(_,...N){if(u){p();return}if(_){p(),d.call(null,_,...N);return}if(c()||o){p(),d.call(null,_,...N);return}n<64&&(n*=2);let j;l===1?(l=2,j=0):j=(n+Math.random())*1e3,h(j)}let b=!1;function w(_){b||(b=!0,p(),!u&&(a!==null?(_||(l=2),clearTimeout(a),h(0)):_||(l=1)))}return h(0),s=setTimeout(()=>{o=!0,w(!0)},r),w}function l5e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5e(t){return t!==void 0}function u5e(t){return typeof t=="object"&&!Array.isArray(t)}function SR(t){return typeof t=="string"||t instanceof String}function nz(t){return jR()&&t instanceof Blob}function jR(){return typeof Blob<"u"}function az(t,e,r,n){if(n<e)throw f8(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw f8(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function Yte(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var gp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(gp||(gp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5e(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5e{constructor(e,r,n,a,s,o,l,c,u,d,h,p=!0,g=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,w)=>{this.resolve_=b,this.reject_=w,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new e5(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===gp.NO_ERROR,c=s.getStatus();if(!l||d5e(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===gp.ABORT;n(!1,new e5(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new e5(u,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());c5e(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=AR();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?Xte():Q_e();o(c)}else{const c=Z_e();o(c)}};this.canceled_?r(!1,new e5(!1,null,!0)):this.backoffId_=o5e(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l5e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class e5{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function h5e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function m5e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function p5e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function g5e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function x5e(t,e,r,n,a,s,o=!0,l=!1){const c=Yte(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return p5e(d,e),h5e(d,r),m5e(d,s),g5e(d,n),new f5e(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function b5e(...t){const e=v5e();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(jR())return new Blob(t);throw new Hs(Vs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function y5e(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5e(t){if(typeof atob>"u")throw a5e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vj{constructor(e,r){this.data=e,this.contentType=r||null}}function _5e(t,e){switch(t){case Od.RAW:return new Vj(Zte(e));case Od.BASE64:case Od.BASE64URL:return new Vj(Qte(t,e));case Od.DATA_URL:return new Vj(E5e(e),A5e(e))}throw AR()}function Zte(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,o=t.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function N5e(t){let e;try{e=decodeURIComponent(t)}catch{throw a2(Od.DATA_URL,"Malformed data URL.")}return Zte(e)}function Qte(t,e){switch(t){case Od.BASE64:{const a=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(a||s)throw a2(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Od.BASE64URL:{const a=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(a||s)throw a2(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=w5e(e)}catch(a){throw a.message.includes("polyfill")?a:a2(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Jte{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw a2(Od.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=S5e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function E5e(t){const e=new Jte(t);return e.base64?Qte(Od.BASE64,e.rest):N5e(e.rest)}function A5e(t){return new Jte(t).contentType}function S5e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,r){let n=0,a="";nz(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(nz(this.data_)){const n=this.data_,a=y5e(n,e,r);return a===null?null:new l0(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new l0(n,!0)}}static getBlob(...e){if(jR()){const r=e.map(n=>n instanceof l0?n.data_:n);return new l0(b5e.apply(null,r))}else{const r=e.map(o=>SR(o)?_5e(Od.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[s++]=o[l]}),new l0(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ere(t){let e;try{e=JSON.parse(t)}catch{return null}return u5e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function T5e(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function tre(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5e(t,e){return e}class ol{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||C5e}}let t5=null;function k5e(t){return!SR(t)||t.length<2?t:tre(t)}function rre(){if(t5)return t5;const t=[];t.push(new ol("bucket")),t.push(new ol("generation")),t.push(new ol("metageneration")),t.push(new ol("name","fullPath",!0));function e(s,o){return k5e(o)}const r=new ol("name");r.xform=e,t.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new ol("size");return a.xform=n,t.push(a),t.push(new ol("timeCreated")),t.push(new ol("updated")),t.push(new ol("md5Hash",null,!0)),t.push(new ol("cacheControl",null,!0)),t.push(new ol("contentDisposition",null,!0)),t.push(new ol("contentEncoding",null,!0)),t.push(new ol("contentLanguage",null,!0)),t.push(new ol("contentType",null,!0)),t.push(new ol("metadata","customMetadata",!0)),t5=t,t5}function I5e(t,e){function r(){const n=t.bucket,a=t.fullPath,s=new kc(n,a);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function O5e(t,e,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,e[o.server])}return I5e(n,t),n}function nre(t,e,r){const n=ere(e);return n===null?null:O5e(t,n,r)}function P5e(t,e,r,n){const a=ere(e);if(a===null||!SR(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),g=TR(p,r,n),b=Yte({alt:"media",token:u});return g+b})[0]}function R5e(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const s=e[a];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class are{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sre(t){if(!t)throw AR()}function D5e(t,e){function r(n,a){const s=nre(t,a,e);return sre(s!==null),s}return r}function M5e(t,e){function r(n,a){const s=nre(t,a,e);return sre(s!==null),P5e(s,a,t.host,t._protocol)}return r}function ire(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=X_e():a=K_e():r.getStatus()===402?a=W_e(t.bucket):r.getStatus()===403?a=Y_e(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function L5e(t){const e=ire(t);function r(n,a){let s=e(n,a);return n.getStatus()===404&&(s=G_e(t.path)),s.serverResponse=a.serverResponse,s}return r}function F5e(t,e,r){const n=e.fullServerUrl(),a=TR(n,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new are(a,s,M5e(t,r),o);return l.errorHandler=L5e(e),l}function B5e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function U5e(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=B5e(null,e)),n}function z5e(t,e,r,n,a){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let j="";for(let P=0;P<2;P++)j=j+Math.random().toString().slice(2);return j}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=U5e(e,n,a),d=R5e(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",g=l0.getBlob(h,n,p);if(g===null)throw r5e();const b={name:u.fullPath},w=TR(s,t.host,t._protocol),_="POST",N=t.maxUploadRetryTime,A=new are(w,_,D5e(t,r),N);return A.urlParams=b,A.headers=o,A.body=g.uploadData(),A.errorHandler=ire(e),A}class V5e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a,s){if(this.sent_)throw Yv("cannot .send() more than once");if(Sh(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Yv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Yv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Yv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Yv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $5e extends V5e{initXhr(){this.xhr_.responseType="text"}}function ore(){return new $5e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,r){this._service=e,r instanceof kc?this._location=r:this._location=kc.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Vp(e,r)}get root(){const e=new kc(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tre(this._location.path)}get storage(){return this._service}get parent(){const e=j5e(this._location.path);if(e===null)return null;const r=new kc(this._location.bucket,e);return new Vp(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw s5e(e)}}function H5e(t,e,r){t._throwIfRoot("uploadBytes");const n=z5e(t.storage,t._location,rre(),new l0(e,!0),r);return t.storage.makeRequestWithTokens(n,ore).then(a=>({metadata:a,ref:t}))}function q5e(t){t._throwIfRoot("getDownloadURL");const e=F5e(t.storage,t._location,rre());return t.storage.makeRequestWithTokens(e,ore).then(r=>{if(r===null)throw n5e();return r})}function G5e(t,e){const r=T5e(t._location.path,e),n=new kc(t._location.bucket,r);return new Vp(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5e(t){return/^[A-Za-z]+:\/\//.test(t)}function K5e(t,e){return new Vp(t,e)}function lre(t,e){if(t instanceof CR){const r=t;if(r._bucket==null)throw t5e();const n=new Vp(r,r._bucket);return e!=null?lre(n,e):n}else return e!==void 0?G5e(t,e):t}function X5e(t,e){if(e&&W5e(e)){if(t instanceof CR)return K5e(t,e);throw f8("To use ref(service, url), the first argument must be a Storage instance.")}else return lre(t,e)}function sz(t,e){const r=e==null?void 0:e[Kte];return r==null?null:kc.makeFromBucketSpec(r,t)}function Y5e(t,e,r,n={}){t.host=`${e}:${r}`;const a=Sh(e);a&&(dA(`https://${t.host}/b`),NP("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:kQ(s,t.app.options.projectId))}class CR{constructor(e,r,n,a,s,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Wte,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=H_e,this._maxUploadRetryTime=q_e,this._requests=new Set,a!=null?this._bucket=kc.makeFromBucketSpec(a,this._host):this._bucket=sz(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kc.makeFromBucketSpec(this._url,e):this._bucket=sz(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){az("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){az("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(mu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vp(this,e)}_makeRequest(e,r,n,a,s=!0){if(this._deleted)return new i5e(Xte());{const o=x5e(e,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const iz="@firebase/storage",oz="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cre="storage";function ty(t,e,r){return t=Ss(t),H5e(t,e,r)}function ry(t){return t=Ss(t),q5e(t)}function ny(t,e){return t=Ss(t),X5e(t,e)}function Z5e(t=SP(),e){t=Ss(t);const n=Jy(t,cre).getImmediate({identifier:e}),a=jQ("storage");return a&&Q5e(n,...a),n}function Q5e(t,e,r,n={}){Y5e(t,e,r,n)}function J5e(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new CR(r,n,a,e,og)}function eNe(){Rp(new q0(cre,J5e,"PUBLIC").setMultipleInstances(!0)),Fd(iz,oz,""),Fd(iz,oz,"esm2020")}eNe();const tNe={apiKey:"AIzaSyCkxBrwlqfmgamysCPOF-mT1R_e67Em5aw",authDomain:"embarques-7ad6e.firebaseapp.com",projectId:"embarques-7ad6e",storageBucket:"embarques-7ad6e.firebasestorage.app",messagingSenderId:"743244010565",appId:"1:743244010565:web:61fb7228a4d9efbb20ff2c"},v3=LQ(tNe),L0=IJ(v3);let h8;try{h8=E_e(v3,{localCache:z_e()})}catch{h8=A_e(v3)}const Bl=h8,Cx=Z5e(v3);typeof window<"u"&&qf(async()=>{const{initializeOfflinePersistence:t}=await import("./firebaseOffline-B6CBaRr1.js");return{initializeOfflinePersistence:t}},[]).then(({initializeOfflinePersistence:t})=>{t().catch(e=>{console.warn("No se pudo habilitar persistencia offline:",e)})});const rNe=Object.freeze(Object.defineProperty({__proto__:null,auth:L0,db:Bl,storage:Cx},Symbol.toStringTag,{value:"Module"}));function ure(t,e){return function(){return t.apply(e,arguments)}}const{toString:nNe}=Object.prototype,{getPrototypeOf:kR}=Object,{iterator:VA,toStringTag:dre}=Symbol,$A=(t=>e=>{const r=nNe.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),md=t=>(t=t.toLowerCase(),e=>$A(e)===t),HA=t=>e=>typeof e===t,{isArray:lv}=Array,kx=HA("undefined");function pw(t){return t!==null&&!kx(t)&&t.constructor!==null&&!kx(t.constructor)&&Hl(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const fre=md("ArrayBuffer");function aNe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&fre(t.buffer),e}const sNe=HA("string"),Hl=HA("function"),hre=HA("number"),gw=t=>t!==null&&typeof t=="object",iNe=t=>t===!0||t===!1,UN=t=>{if($A(t)!=="object")return!1;const e=kR(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(dre in t)&&!(VA in t)},oNe=t=>{if(!gw(t)||pw(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},lNe=md("Date"),cNe=md("File"),uNe=md("Blob"),dNe=md("FileList"),fNe=t=>gw(t)&&Hl(t.pipe),hNe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Hl(t.append)&&((e=$A(t))==="formdata"||e==="object"&&Hl(t.toString)&&t.toString()==="[object FormData]"))},mNe=md("URLSearchParams"),[pNe,gNe,xNe,vNe]=["ReadableStream","Request","Response","Headers"].map(md),bNe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xw(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),lv(t))for(n=0,a=t.length;n<a;n++)e.call(null,t[n],n,t);else{if(pw(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(n=0;n<o;n++)l=s[n],e.call(null,t[l],l,t)}}function mre(t,e){if(pw(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],e===a.toLowerCase())return a;return null}const ep=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pre=t=>!kx(t)&&t!==ep;function m8(){const{caseless:t,skipUndefined:e}=pre(this)&&this||{},r={},n=(a,s)=>{const o=t&&mre(r,s)||s;UN(r[o])&&UN(a)?r[o]=m8(r[o],a):UN(a)?r[o]=m8({},a):lv(a)?r[o]=a.slice():(!e||!kx(a))&&(r[o]=a)};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&xw(arguments[a],n);return r}const yNe=(t,e,r,{allOwnKeys:n}={})=>(xw(e,(a,s)=>{r&&Hl(a)?t[s]=ure(a,r):t[s]=a},{allOwnKeys:n}),t),wNe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),_Ne=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},NNe=(t,e,r,n)=>{let a,s,o;const l={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),s=a.length;s-- >0;)o=a[s],(!n||n(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=r!==!1&&kR(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},ENe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},ANe=t=>{if(!t)return null;if(lv(t))return t;let e=t.length;if(!hre(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},SNe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&kR(Uint8Array)),jNe=(t,e)=>{const n=(t&&t[VA]).call(t);let a;for(;(a=n.next())&&!a.done;){const s=a.value;e.call(t,s[0],s[1])}},TNe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},CNe=md("HTMLFormElement"),kNe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),lz=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),INe=md("RegExp"),gre=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};xw(r,(a,s)=>{let o;(o=e(a,s,t))!==!1&&(n[s]=o||a)}),Object.defineProperties(t,n)},ONe=t=>{gre(t,(e,r)=>{if(Hl(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Hl(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},PNe=(t,e)=>{const r={},n=a=>{a.forEach(s=>{r[s]=!0})};return lv(t)?n(t):n(String(t).split(e)),r},RNe=()=>{},DNe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function MNe(t){return!!(t&&Hl(t.append)&&t[dre]==="FormData"&&t[VA])}const LNe=t=>{const e=new Array(10),r=(n,a)=>{if(gw(n)){if(e.indexOf(n)>=0)return;if(pw(n))return n;if(!("toJSON"in n)){e[a]=n;const s=lv(n)?[]:{};return xw(n,(o,l)=>{const c=r(o,a+1);!kx(c)&&(s[l]=c)}),e[a]=void 0,s}}return n};return r(t,0)},FNe=md("AsyncFunction"),BNe=t=>t&&(gw(t)||Hl(t))&&Hl(t.then)&&Hl(t.catch),xre=((t,e)=>t?setImmediate:e?((r,n)=>(ep.addEventListener("message",({source:a,data:s})=>{a===ep&&s===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ep.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Hl(ep.postMessage)),UNe=typeof queueMicrotask<"u"?queueMicrotask.bind(ep):typeof process<"u"&&process.nextTick||xre,zNe=t=>t!=null&&Hl(t[VA]),Tt={isArray:lv,isArrayBuffer:fre,isBuffer:pw,isFormData:hNe,isArrayBufferView:aNe,isString:sNe,isNumber:hre,isBoolean:iNe,isObject:gw,isPlainObject:UN,isEmptyObject:oNe,isReadableStream:pNe,isRequest:gNe,isResponse:xNe,isHeaders:vNe,isUndefined:kx,isDate:lNe,isFile:cNe,isBlob:uNe,isRegExp:INe,isFunction:Hl,isStream:fNe,isURLSearchParams:mNe,isTypedArray:SNe,isFileList:dNe,forEach:xw,merge:m8,extend:yNe,trim:bNe,stripBOM:wNe,inherits:_Ne,toFlatObject:NNe,kindOf:$A,kindOfTest:md,endsWith:ENe,toArray:ANe,forEachEntry:jNe,matchAll:TNe,isHTMLForm:CNe,hasOwnProperty:lz,hasOwnProp:lz,reduceDescriptors:gre,freezeMethods:ONe,toObjectSet:PNe,toCamelCase:kNe,noop:RNe,toFiniteNumber:DNe,findKey:mre,global:ep,isContextDefined:pre,isSpecCompliantForm:MNe,toJSONObject:LNe,isAsyncFn:FNe,isThenable:BNe,setImmediate:xre,asap:UNe,isIterable:zNe};function _n(t,e,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Tt.inherits(_n,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tt.toJSONObject(this.config),code:this.code,status:this.status}}});const vre=_n.prototype,bre={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bre[t]={value:t}});Object.defineProperties(_n,bre);Object.defineProperty(vre,"isAxiosError",{value:!0});_n.from=(t,e,r,n,a,s)=>{const o=Object.create(vre);Tt.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return _n.call(o,l,c,r,n,a),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const VNe=null;function p8(t){return Tt.isPlainObject(t)||Tt.isArray(t)}function yre(t){return Tt.endsWith(t,"[]")?t.slice(0,-2):t}function cz(t,e,r){return t?t.concat(e).map(function(a,s){return a=yre(a),!r&&s?"["+a+"]":a}).join(r?".":""):e}function $Ne(t){return Tt.isArray(t)&&!t.some(p8)}const HNe=Tt.toFlatObject(Tt,{},null,function(e){return/^is[A-Z]/.test(e)});function qA(t,e,r){if(!Tt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Tt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,_){return!Tt.isUndefined(_[w])});const n=r.metaTokens,a=r.visitor||d,s=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Tt.isSpecCompliantForm(e);if(!Tt.isFunction(a))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(Tt.isDate(b))return b.toISOString();if(Tt.isBoolean(b))return b.toString();if(!c&&Tt.isBlob(b))throw new _n("Blob is not supported. Use a Buffer instead.");return Tt.isArrayBuffer(b)||Tt.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,w,_){let N=b;if(b&&!_&&typeof b=="object"){if(Tt.endsWith(w,"{}"))w=n?w:w.slice(0,-2),b=JSON.stringify(b);else if(Tt.isArray(b)&&$Ne(b)||(Tt.isFileList(b)||Tt.endsWith(w,"[]"))&&(N=Tt.toArray(b)))return w=yre(w),N.forEach(function(j,P){!(Tt.isUndefined(j)||j===null)&&e.append(o===!0?cz([w],P,s):o===null?w:w+"[]",u(j))}),!1}return p8(b)?!0:(e.append(cz(_,w,s),u(b)),!1)}const h=[],p=Object.assign(HNe,{defaultVisitor:d,convertValue:u,isVisitable:p8});function g(b,w){if(!Tt.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(b),Tt.forEach(b,function(N,A){(!(Tt.isUndefined(N)||N===null)&&a.call(e,N,Tt.isString(A)?A.trim():A,w,p))===!0&&g(N,w?w.concat(A):[A])}),h.pop()}}if(!Tt.isObject(t))throw new TypeError("data must be an object");return g(t),e}function uz(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function IR(t,e){this._pairs=[],t&&qA(t,this,e)}const wre=IR.prototype;wre.append=function(e,r){this._pairs.push([e,r])};wre.toString=function(e){const r=e?function(n){return e.call(this,n,uz)}:uz;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function qNe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _re(t,e,r){if(!e)return t;const n=r&&r.encode||qNe;Tt.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(a?s=a(e,r):s=Tt.isURLSearchParams(e)?e.toString():new IR(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class dz{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Tt.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Nre={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GNe=typeof URLSearchParams<"u"?URLSearchParams:IR,WNe=typeof FormData<"u"?FormData:null,KNe=typeof Blob<"u"?Blob:null,XNe={isBrowser:!0,classes:{URLSearchParams:GNe,FormData:WNe,Blob:KNe},protocols:["http","https","file","blob","url","data"]},OR=typeof window<"u"&&typeof document<"u",g8=typeof navigator=="object"&&navigator||void 0,YNe=OR&&(!g8||["ReactNative","NativeScript","NS"].indexOf(g8.product)<0),ZNe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",QNe=OR&&window.location.href||"http://localhost",JNe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:OR,hasStandardBrowserEnv:YNe,hasStandardBrowserWebWorkerEnv:ZNe,navigator:g8,origin:QNe},Symbol.toStringTag,{value:"Module"})),$o={...JNe,...XNe};function eEe(t,e){return qA(t,new $o.classes.URLSearchParams,{visitor:function(r,n,a,s){return $o.isNode&&Tt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function tEe(t){return Tt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rEe(t){const e={},r=Object.keys(t);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],e[s]=t[s];return e}function Ere(t){function e(r,n,a,s){let o=r[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=s>=r.length;return o=!o&&Tt.isArray(a)?a.length:o,c?(Tt.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!Tt.isObject(a[o]))&&(a[o]=[]),e(r,n,a[o],s)&&Tt.isArray(a[o])&&(a[o]=rEe(a[o])),!l)}if(Tt.isFormData(t)&&Tt.isFunction(t.entries)){const r={};return Tt.forEachEntry(t,(n,a)=>{e(tEe(n),a,r,0)}),r}return null}function nEe(t,e,r){if(Tt.isString(t))try{return(e||JSON.parse)(t),Tt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const vw={transitional:Nre,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,s=Tt.isObject(e);if(s&&Tt.isHTMLForm(e)&&(e=new FormData(e)),Tt.isFormData(e))return a?JSON.stringify(Ere(e)):e;if(Tt.isArrayBuffer(e)||Tt.isBuffer(e)||Tt.isStream(e)||Tt.isFile(e)||Tt.isBlob(e)||Tt.isReadableStream(e))return e;if(Tt.isArrayBufferView(e))return e.buffer;if(Tt.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return eEe(e,this.formSerializer).toString();if((l=Tt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return qA(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||a?(r.setContentType("application/json",!1),nEe(e)):e}],transformResponse:[function(e){const r=this.transitional||vw.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Tt.isResponse(e)||Tt.isReadableStream(e))return e;if(e&&Tt.isString(e)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?_n.from(l,_n.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$o.classes.FormData,Blob:$o.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Tt.forEach(["delete","get","head","post","put","patch"],t=>{vw.headers[t]={}});const aEe=Tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sEe=t=>{const e={};let r,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||e[r]&&aEe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},fz=Symbol("internals");function Zv(t){return t&&String(t).trim().toLowerCase()}function zN(t){return t===!1||t==null?t:Tt.isArray(t)?t.map(zN):String(t)}function iEe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const oEe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $j(t,e,r,n,a){if(Tt.isFunction(n))return n.call(this,e,r);if(a&&(e=r),!!Tt.isString(e)){if(Tt.isString(n))return e.indexOf(n)!==-1;if(Tt.isRegExp(n))return n.test(e)}}function lEe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function cEe(t,e){const r=Tt.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,s,o){return this[n].call(this,e,a,s,o)},configurable:!0})})}let ql=class{constructor(e){e&&this.set(e)}set(e,r,n){const a=this;function s(l,c,u){const d=Zv(c);if(!d)throw new Error("header name must be a non-empty string");const h=Tt.findKey(a,d);(!h||a[h]===void 0||u===!0||u===void 0&&a[h]!==!1)&&(a[h||c]=zN(l))}const o=(l,c)=>Tt.forEach(l,(u,d)=>s(u,d,c));if(Tt.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(Tt.isString(e)&&(e=e.trim())&&!oEe(e))o(sEe(e),r);else if(Tt.isObject(e)&&Tt.isIterable(e)){let l={},c,u;for(const d of e){if(!Tt.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?Tt.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Zv(e),e){const n=Tt.findKey(this,e);if(n){const a=this[n];if(!r)return a;if(r===!0)return iEe(a);if(Tt.isFunction(r))return r.call(this,a,n);if(Tt.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Zv(e),e){const n=Tt.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||$j(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let a=!1;function s(o){if(o=Zv(o),o){const l=Tt.findKey(n,o);l&&(!r||$j(n,n[l],l,r))&&(delete n[l],a=!0)}}return Tt.isArray(e)?e.forEach(s):s(e),a}clear(e){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const s=r[n];(!e||$j(this,this[s],s,e,!0))&&(delete this[s],a=!0)}return a}normalize(e){const r=this,n={};return Tt.forEach(this,(a,s)=>{const o=Tt.findKey(n,s);if(o){r[o]=zN(a),delete r[s];return}const l=e?lEe(s):String(s).trim();l!==s&&delete r[s],r[l]=zN(a),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Tt.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=e&&Tt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(a=>n.set(a)),n}static accessor(e){const n=(this[fz]=this[fz]={accessors:{}}).accessors,a=this.prototype;function s(o){const l=Zv(o);n[l]||(cEe(a,o),n[l]=!0)}return Tt.isArray(e)?e.forEach(s):s(e),this}};ql.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Tt.reduceDescriptors(ql.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Tt.freezeMethods(ql);function Hj(t,e){const r=this||vw,n=e||r,a=ql.from(n.headers);let s=n.data;return Tt.forEach(t,function(l){s=l.call(r,s,a.normalize(),e?e.status:void 0)}),a.normalize(),s}function Are(t){return!!(t&&t.__CANCEL__)}function cv(t,e,r){_n.call(this,t??"canceled",_n.ERR_CANCELED,e,r),this.name="CanceledError"}Tt.inherits(cv,_n,{__CANCEL__:!0});function Sre(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new _n("Request failed with status code "+r.status,[_n.ERR_BAD_REQUEST,_n.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function uEe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function dEe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let a=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=n[s];o||(o=u),r[a]=c,n[a]=u;let h=s,p=0;for(;h!==a;)p+=r[h++],h=h%t;if(a=(a+1)%t,a===s&&(s=(s+1)%t),u-o<e)return;const g=d&&u-d;return g?Math.round(p*1e3/g):void 0}}function fEe(t,e){let r=0,n=1e3/e,a,s;const o=(u,d=Date.now())=>{r=d,a=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?o(u,d):(a=u,s||(s=setTimeout(()=>{s=null,o(a)},n-h)))},()=>a&&o(a)]}const b3=(t,e,r=3)=>{let n=0;const a=dEe(50,250);return fEe(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,c=o-n,u=a(c),d=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},r)},hz=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},mz=t=>(...e)=>Tt.asap(()=>t(...e)),hEe=$o.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,$o.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL($o.origin),$o.navigator&&/(msie|trident)/i.test($o.navigator.userAgent)):()=>!0,mEe=$o.hasStandardBrowserEnv?{write(t,e,r,n,a,s){const o=[t+"="+encodeURIComponent(e)];Tt.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Tt.isString(n)&&o.push("path="+n),Tt.isString(a)&&o.push("domain="+a),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pEe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gEe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function jre(t,e,r){let n=!pEe(e);return t&&(n||r==!1)?gEe(t,e):e}const pz=t=>t instanceof ql?{...t}:t;function $p(t,e){e=e||{};const r={};function n(u,d,h,p){return Tt.isPlainObject(u)&&Tt.isPlainObject(d)?Tt.merge.call({caseless:p},u,d):Tt.isPlainObject(d)?Tt.merge({},d):Tt.isArray(d)?d.slice():d}function a(u,d,h,p){if(Tt.isUndefined(d)){if(!Tt.isUndefined(u))return n(void 0,u,h,p)}else return n(u,d,h,p)}function s(u,d){if(!Tt.isUndefined(d))return n(void 0,d)}function o(u,d){if(Tt.isUndefined(d)){if(!Tt.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,h)=>a(pz(u),pz(d),h,!0)};return Tt.forEach(Object.keys({...t,...e}),function(d){const h=c[d]||a,p=h(t[d],e[d],d);Tt.isUndefined(p)&&h!==l||(r[d]=p)}),r}const Tre=t=>{const e=$p({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=e;if(e.headers=o=ql.from(o),e.url=_re(jre(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Tt.isFormData(r)){if($o.hasStandardBrowserEnv||$o.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Tt.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if($o.hasStandardBrowserEnv&&(n&&Tt.isFunction(n)&&(n=n(e)),n||n!==!1&&hEe(e.url))){const c=a&&s&&mEe.read(s);c&&o.set(a,c)}return e},xEe=typeof XMLHttpRequest<"u",vEe=xEe&&function(t){return new Promise(function(r,n){const a=Tre(t);let s=a.data;const o=ql.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,d,h,p,g,b;function w(){g&&g(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let _=new XMLHttpRequest;_.open(a.method.toUpperCase(),a.url,!0),_.timeout=a.timeout;function N(){if(!_)return;const j=ql.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),U={data:!l||l==="text"||l==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:j,config:t,request:_};Sre(function(O){r(O),w()},function(O){n(O),w()},U),_=null}"onloadend"in _?_.onloadend=N:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(N)},_.onabort=function(){_&&(n(new _n("Request aborted",_n.ECONNABORTED,t,_)),_=null)},_.onerror=function(P){const U=P&&P.message?P.message:"Network Error",G=new _n(U,_n.ERR_NETWORK,t,_);G.event=P||null,n(G),_=null},_.ontimeout=function(){let P=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const U=a.transitional||Nre;a.timeoutErrorMessage&&(P=a.timeoutErrorMessage),n(new _n(P,U.clarifyTimeoutError?_n.ETIMEDOUT:_n.ECONNABORTED,t,_)),_=null},s===void 0&&o.setContentType(null),"setRequestHeader"in _&&Tt.forEach(o.toJSON(),function(P,U){_.setRequestHeader(U,P)}),Tt.isUndefined(a.withCredentials)||(_.withCredentials=!!a.withCredentials),l&&l!=="json"&&(_.responseType=a.responseType),u&&([p,b]=b3(u,!0),_.addEventListener("progress",p)),c&&_.upload&&([h,g]=b3(c),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(d=j=>{_&&(n(!j||j.type?new cv(null,t,_):j),_.abort(),_=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const A=uEe(a.url);if(A&&$o.protocols.indexOf(A)===-1){n(new _n("Unsupported protocol "+A+":",_n.ERR_BAD_REQUEST,t));return}_.send(s||null)})},bEe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,a;const s=function(u){if(!a){a=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof _n?d:new cv(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new _n(`timeout ${e} of ms exceeded`,_n.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>Tt.asap(l),c}},yEe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,a;for(;n<r;)a=n+e,yield t.slice(n,a),n=a},wEe=async function*(t,e){for await(const r of _Ee(t))yield*yEe(r,e)},_Ee=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},gz=(t,e,r,n)=>{const a=wEe(t,e);let s=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await a.next();if(u){l(),c.close();return}let h=d.byteLength;if(r){let p=s+=h;r(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},xz=64*1024,{isFunction:r5}=Tt,NEe=(({Request:t,Response:e})=>({Request:t,Response:e}))(Tt.global),{ReadableStream:vz,TextEncoder:bz}=Tt.global,yz=(t,...e)=>{try{return!!t(...e)}catch{return!1}},EEe=t=>{t=Tt.merge.call({skipUndefined:!0},NEe,t);const{fetch:e,Request:r,Response:n}=t,a=e?r5(e):typeof fetch=="function",s=r5(r),o=r5(n);if(!a)return!1;const l=a&&r5(vz),c=a&&(typeof bz=="function"?(b=>w=>b.encode(w))(new bz):async b=>new Uint8Array(await new r(b).arrayBuffer())),u=s&&l&&yz(()=>{let b=!1;const w=new r($o.origin,{body:new vz,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!w}),d=o&&l&&yz(()=>Tt.isReadableStream(new n("").body)),h={stream:d&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!h[b]&&(h[b]=(w,_)=>{let N=w&&w[b];if(N)return N.call(w);throw new _n(`Response type '${b}' is not supported`,_n.ERR_NOT_SUPPORT,_)})});const p=async b=>{if(b==null)return 0;if(Tt.isBlob(b))return b.size;if(Tt.isSpecCompliantForm(b))return(await new r($o.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Tt.isArrayBufferView(b)||Tt.isArrayBuffer(b))return b.byteLength;if(Tt.isURLSearchParams(b)&&(b=b+""),Tt.isString(b))return(await c(b)).byteLength},g=async(b,w)=>{const _=Tt.toFiniteNumber(b.getContentLength());return _??p(w)};return async b=>{let{url:w,method:_,data:N,signal:A,cancelToken:j,timeout:P,onDownloadProgress:U,onUploadProgress:G,responseType:O,headers:D,withCredentials:I="same-origin",fetchOptions:V}=Tre(b),R=e||fetch;O=O?(O+"").toLowerCase():"text";let B=bEe([A,j&&j.toAbortSignal()],P),F=null;const ee=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let Z;try{if(G&&u&&_!=="get"&&_!=="head"&&(Z=await g(D,N))!==0){let ye=new r(w,{method:"POST",body:N,duplex:"half"}),H;if(Tt.isFormData(N)&&(H=ye.headers.get("content-type"))&&D.setContentType(H),ye.body){const[Y,X]=hz(Z,b3(mz(G)));N=gz(ye.body,xz,Y,X)}}Tt.isString(I)||(I=I?"include":"omit");const ce=s&&"credentials"in r.prototype,ne={...V,signal:B,method:_.toUpperCase(),headers:D.normalize().toJSON(),body:N,duplex:"half",credentials:ce?I:void 0};F=s&&new r(w,ne);let ae=await(s?R(F,V):R(w,ne));const me=d&&(O==="stream"||O==="response");if(d&&(U||me&&ee)){const ye={};["status","statusText","headers"].forEach(re=>{ye[re]=ae[re]});const H=Tt.toFiniteNumber(ae.headers.get("content-length")),[Y,X]=U&&hz(H,b3(mz(U),!0))||[];ae=new n(gz(ae.body,xz,Y,()=>{X&&X(),ee&&ee()}),ye)}O=O||"text";let Ee=await h[Tt.findKey(h,O)||"text"](ae,b);return!me&&ee&&ee(),await new Promise((ye,H)=>{Sre(ye,H,{data:Ee,headers:ql.from(ae.headers),status:ae.status,statusText:ae.statusText,config:b,request:F})})}catch(ce){throw ee&&ee(),ce&&ce.name==="TypeError"&&/Load failed|fetch/i.test(ce.message)?Object.assign(new _n("Network Error",_n.ERR_NETWORK,b,F),{cause:ce.cause||ce}):_n.from(ce,ce&&ce.code,b,F)}}},AEe=new Map,Cre=t=>{let e=t?t.env:{};const{fetch:r,Request:n,Response:a}=e,s=[n,a,r];let o=s.length,l=o,c,u,d=AEe;for(;l--;)c=s[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:EEe(e)),d=u;return u};Cre();const x8={http:VNe,xhr:vEe,fetch:{get:Cre}};Tt.forEach(x8,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const wz=t=>`- ${t}`,SEe=t=>Tt.isFunction(t)||t===null||t===!1,kre={getAdapter:(t,e)=>{t=Tt.isArray(t)?t:[t];const{length:r}=t;let n,a;const s={};for(let o=0;o<r;o++){n=t[o];let l;if(a=n,!SEe(n)&&(a=x8[(l=String(n)).toLowerCase()],a===void 0))throw new _n(`Unknown adapter '${l}'`);if(a&&(Tt.isFunction(a)||(a=a.get(e))))break;s[l||"#"+o]=a}if(!a){const o=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(wz).join(`
`):" "+wz(o[0]):"as no adapter specified";throw new _n("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:x8};function qj(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new cv(null,t)}function _z(t){return qj(t),t.headers=ql.from(t.headers),t.data=Hj.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kre.getAdapter(t.adapter||vw.adapter,t)(t).then(function(n){return qj(t),n.data=Hj.call(t,t.transformResponse,n),n.headers=ql.from(n.headers),n},function(n){return Are(n)||(qj(t),n&&n.response&&(n.response.data=Hj.call(t,t.transformResponse,n.response),n.response.headers=ql.from(n.response.headers))),Promise.reject(n)})}const Ire="1.12.2",GA={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{GA[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Nz={};GA.transitional=function(e,r,n){function a(s,o){return"[Axios v"+Ire+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,l)=>{if(e===!1)throw new _n(a(o," has been removed"+(r?" in "+r:"")),_n.ERR_DEPRECATED);return r&&!Nz[o]&&(Nz[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,l):!0}};GA.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function jEe(t,e,r){if(typeof t!="object")throw new _n("options must be an object",_n.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const s=n[a],o=e[s];if(o){const l=t[s],c=l===void 0||o(l,s,t);if(c!==!0)throw new _n("option "+s+" must be "+c,_n.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _n("Unknown option "+s,_n.ERR_BAD_OPTION)}}const VN={assertOptions:jEe,validators:GA},vd=VN.validators;let xp=class{constructor(e){this.defaults=e||{},this.interceptors={request:new dz,response:new dz}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=$p(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:s}=r;n!==void 0&&VN.assertOptions(n,{silentJSONParsing:vd.transitional(vd.boolean),forcedJSONParsing:vd.transitional(vd.boolean),clarifyTimeoutError:vd.transitional(vd.boolean)},!1),a!=null&&(Tt.isFunction(a)?r.paramsSerializer={serialize:a}:VN.assertOptions(a,{encode:vd.function,serialize:vd.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),VN.assertOptions(r,{baseUrl:vd.spelling("baseURL"),withXsrfToken:vd.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&Tt.merge(s.common,s[r.method]);s&&Tt.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),r.headers=ql.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(c=c&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,h=0,p;if(!c){const b=[_z.bind(this),void 0];for(b.unshift(...l),b.push(...u),p=b.length,d=Promise.resolve(r);h<p;)d=d.then(b[h++],b[h++]);return d}p=l.length;let g=r;for(;h<p;){const b=l[h++],w=l[h++];try{g=b(g)}catch(_){w.call(this,_);break}}try{d=_z.call(this,g)}catch(b){return Promise.reject(b)}for(h=0,p=u.length;h<p;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=$p(this.defaults,e);const r=jre(e.baseURL,e.url,e.allowAbsoluteUrls);return _re(r,e.params,e.paramsSerializer)}};Tt.forEach(["delete","get","head","options"],function(e){xp.prototype[e]=function(r,n){return this.request($p(n||{},{method:e,url:r,data:(n||{}).data}))}});Tt.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,l){return this.request($p(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}xp.prototype[e]=r(),xp.prototype[e+"Form"]=r(!0)});let TEe=class Ore{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(a=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](a);n._listeners=null}),this.promise.then=a=>{let s;const o=new Promise(l=>{n.subscribe(l),s=l}).then(a);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,l){n.reason||(n.reason=new cv(s,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Ore(function(a){e=a}),cancel:e}}};function CEe(t){return function(r){return t.apply(null,r)}}function kEe(t){return Tt.isObject(t)&&t.isAxiosError===!0}const v8={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(v8).forEach(([t,e])=>{v8[e]=t});function Pre(t){const e=new xp(t),r=ure(xp.prototype.request,e);return Tt.extend(r,xp.prototype,e,{allOwnKeys:!0}),Tt.extend(r,e,null,{allOwnKeys:!0}),r.create=function(a){return Pre($p(t,a))},r}const bs=Pre(vw);bs.Axios=xp;bs.CanceledError=cv;bs.CancelToken=TEe;bs.isCancel=Are;bs.VERSION=Ire;bs.toFormData=qA;bs.AxiosError=_n;bs.Cancel=bs.CanceledError;bs.all=function(e){return Promise.all(e)};bs.spread=CEe;bs.isAxiosError=kEe;bs.mergeConfig=$p;bs.AxiosHeaders=ql;bs.formToJSON=t=>Ere(Tt.isHTMLForm(t)?new FormData(t):t);bs.getAdapter=kre.getAdapter;bs.HttpStatusCode=v8;bs.default=bs;const{Axios:wdt,AxiosError:_dt,CanceledError:Ndt,isCancel:Edt,CancelToken:Adt,VERSION:Sdt,all:jdt,Cancel:Tdt,isAxiosError:Cdt,spread:kdt,toFormData:Idt,AxiosHeaders:Odt,HttpStatusCode:Pdt,formToJSON:Rdt,getAdapter:Ddt,mergeConfig:Mdt}=bs,wt=bs.create({baseURL:"https://proyecto-envios-production.up.railway.app/api",timeout:6e4,headers:{"Content-Type":"application/json"}});wt.interceptors.request.use(async t=>{try{let e=localStorage.getItem("token");const r=L0.currentUser;if(r){if(e)try{const n=e.split(".")[1],a=JSON.parse(atob(n)),s=Math.floor(Date.now()/1e3);if(a.exp-s<300){console.log(" Token prximo a expirar, renovando automticamente...");const l=await r.getIdToken(!0);localStorage.setItem("token",l),e=l,console.log(" Token renovado exitosamente")}}catch(n){console.warn(" Error decodificando token, renovando por seguridad...",n);const a=await r.getIdToken(!0);localStorage.setItem("token",a),e=a}else console.log(" No hay token en localStorage, obteniendo nuevo token..."),e=await r.getIdToken(!0),localStorage.setItem("token",e);t.headers.Authorization=`Bearer ${e}`}else console.warn(" No hay usuario autenticado en Firebase")}catch(e){console.error(" Error en interceptor de request:",e)}return t},t=>(console.error(" Error configurando request:",t),Promise.reject(t)));wt.interceptors.response.use(t=>{if(t.data&&typeof t.data=="object"&&t.data.success===!1){const e=new Error(t.data.error||t.data.message||"Error desconocido");return e.response=t,e.isBackendError=!0,Promise.reject(e)}return t},async t=>{var a,s,o;const e=t.config;if(((a=t.response)==null?void 0:a.status)===401&&!e._retry){e._retry=!0;try{const l=L0.currentUser;if(l){console.log(" Error 401 detectado, renovando token...");const c=await l.getIdToken(!0);return localStorage.setItem("token",c),e.headers.Authorization=`Bearer ${c}`,console.log(" Token renovado, reintentando peticin original..."),wt(e)}else return console.log(" No hay usuario autenticado, redirigiendo al login..."),localStorage.removeItem("token"),window.location.pathname.includes("/login")||(window.location.href="/login"),t.userMessage="Sesin expirada. Por favor, inicia sesin nuevamente.",Promise.reject(t)}catch(l){return console.error(" Error renovando token:",l),localStorage.removeItem("token"),window.location.pathname.includes("/login")||(window.location.href="/login"),l.userMessage="Error renovando sesin. Por favor, inicia sesin nuevamente.",Promise.reject(l)}}let r="Ha ocurrido un error inesperado",n=null;if(t.response){const{status:l,data:c}=t.response;if(console.error(" Error del servidor:",{status:l,url:(s=t.config)==null?void 0:s.url,method:(o=t.config)==null?void 0:o.method,data:c}),c&&typeof c=="object"&&(c.error?(r=c.error,n=c):c.message?(r=c.message,n=c):typeof c=="string"&&(r=c)),!c||!c.error&&!c.message)switch(l){case 400:r="Datos invlidos o incompletos. Por favor, verifica la informacin.",console.error(" Bad Request - Datos invlidos o incompletos");break;case 403:r="No tienes permisos para realizar esta accin.",console.error(" Acceso denegado - Permisos insuficientes");break;case 404:r="El recurso solicitado no existe.",console.error(" Recurso no encontrado");break;case 500:r="Error interno del servidor. Por favor, intenta nuevamente.",console.error(" Error interno del servidor");break;case 503:r="El servicio no est disponible temporalmente. Por favor, intenta ms tarde.",console.error(" Servicio no disponible temporalmente");break;default:r=`Error del servidor (${l}). Por favor, intenta nuevamente.`}}else t.request?(console.error(" Error de red - Sin respuesta del servidor:",t.message),r="Error de conexin. Verifica tu conexin a internet y que el servidor est disponible."):(console.error(" Error configurando peticin:",t.message),r="Error configurando la peticin. Por favor, contacta soporte tcnico.");return t.userMessage=r,t.errorDetails=n,t.originalMessage||(t.originalMessage=t.message),t.message=r,Promise.reject(t)});const Rre=S.createContext(),fa=()=>{const t=S.useContext(Rre);if(!t)throw new Error("useAuth debe usarse dentro de AuthProvider");return t},IEe=({children:t})=>{const[e,r]=S.useState(null),[n,a]=S.useState(null),[s,o]=S.useState(!0),l=g=>{if(!g)return!0;try{const b=g.split(".")[1],w=JSON.parse(atob(b)),_=Math.floor(Date.now()/1e3);return w.exp<_}catch(b){return console.error("Error verificando expiracin del token:",b),!0}},c=async g=>{try{const b=await g.getIdToken(!0);return localStorage.setItem("token",b),console.log(" Token renovado exitosamente"),b}catch(b){throw console.error(" Error renovando token:",b),b}};S.useEffect(()=>{const g=async()=>{const w=localStorage.getItem("token");if(!(!w||!e))try{const _=w.split(".")[1],N=JSON.parse(atob(_)),A=Math.floor(Date.now()/1e3);N.exp-A<300&&(console.log(" Token prximo a expirar, renovando..."),await c(e))}catch(_){console.error("Error verificando expiracin:",_)}},b=setInterval(g,24e4);return g(),()=>clearInterval(b)},[e]),S.useEffect(()=>vJ(L0,async b=>{if(b){r(b);try{const w=localStorage.getItem("token");if(!w||l(w)){console.log(" Token expirado o no existe, obteniendo nuevo token...");const N=await b.getIdToken(!0);localStorage.setItem("token",N)}const _=await wt.get("auth/profile");if(console.log(" Respuesta de /auth/profile:",_.data),_.data.success&&_.data.data)a(_.data.data),console.log(" Datos de usuario cargados:",_.data.data);else throw new Error(_.data.error||"Formato de respuesta invlido")}catch(w){console.error(" Error obteniendo perfil:",w),w.response&&w.response.status===401?(console.log(" Token invlido, cerrando sesin..."),await d()):(console.log(" Error crtico obteniendo perfil, cerrando sesin..."),await d())}}else r(null),a(null),localStorage.removeItem("token");o(!1)}),[]);const u=async(g,b)=>{try{const w=await pJ(L0,g,b),_=await w.user.getIdToken();return localStorage.setItem("token",_),console.log(" Login exitoso, token guardado"),w}catch(w){throw console.error(" Error en login:",w),w}},d=async()=>{try{await IP(L0),r(null),a(null),localStorage.removeItem("token"),console.log(" Logout exitoso")}catch(g){throw console.error(" Error en logout:",g),g}},p={user:e,userData:n,login:u,logout:d,loading:s,forceRefreshToken:async()=>{if(!e)throw new Error("No hay usuario autenticado");return await c(e)},isTokenExpired:l};return i.jsx(Rre.Provider,{value:p,children:t})};function OEe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const PEe=t=>{switch(t){case"success":return MEe;case"info":return FEe;case"warning":return LEe;case"error":return BEe;default:return null}},REe=Array(12).fill(0),DEe=({visible:t,className:e})=>xr.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},xr.createElement("div",{className:"sonner-spinner"},REe.map((r,n)=>xr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),MEe=xr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),LEe=xr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},xr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),FEe=xr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),BEe=xr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},xr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UEe=xr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},xr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),xr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),zEe=()=>{const[t,e]=xr.useState(document.hidden);return xr.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t};let b8=1;class VEe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:n,...a}=e,s=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:b8++,o=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:n}),{...c,...e,id:s,dismissible:l,title:n}):c):this.addToast({title:n,...a,dismissible:l,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let s=n!==void 0,o;const l=a.then(async u=>{if(o=["resolve",u],xr.isValidElement(u))s=!1,this.create({id:n,type:"default",message:u});else if(HEe(u)&&!u.ok){s=!1;const h=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,b=typeof h=="object"&&!xr.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:p,...b})}else if(u instanceof Error){s=!1;const h=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof h=="object"&&!xr.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:p,...b})}else if(r.success!==void 0){s=!1;const h=typeof r.success=="function"?await r.success(u):r.success,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof h=="object"&&!xr.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:p,...b})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){s=!1;const d=typeof r.error=="function"?await r.error(u):r.error,h=typeof r.description=="function"?await r.description(u):r.description,g=typeof d=="object"&&!xr.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:h,...g})}}).finally(()=>{s&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,r)=>{const n=(r==null?void 0:r.id)||b8++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ml=new VEe,$Ee=(t,e)=>{const r=(e==null?void 0:e.id)||b8++;return Ml.addToast({title:t,...e,id:r}),r},HEe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",qEe=$Ee,GEe=()=>Ml.toasts,WEe=()=>Ml.getActiveToasts(),We=Object.assign(qEe,{success:Ml.success,info:Ml.info,warning:Ml.warning,error:Ml.error,custom:Ml.custom,message:Ml.message,promise:Ml.promise,dismiss:Ml.dismiss,loading:Ml.loading},{getHistory:GEe,getToasts:WEe});OEe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function n5(t){return t.label!==void 0}const KEe=3,XEe="24px",YEe="16px",Ez=4e3,ZEe=356,QEe=14,JEe=45,e3e=200;function bd(...t){return t.filter(Boolean).join(" ")}function t3e(t){const[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}const r3e=t=>{var e,r,n,a,s,o,l,c,u;const{invert:d,toast:h,unstyled:p,interacting:g,setHeights:b,visibleToasts:w,heights:_,index:N,toasts:A,expanded:j,removeToast:P,defaultRichColors:U,closeButton:G,style:O,cancelButtonStyle:D,actionButtonStyle:I,className:V="",descriptionClassName:R="",duration:B,position:F,gap:ee,expandByDefault:Z,classNames:ce,icons:ne,closeButtonAriaLabel:ae="Close toast"}=t,[me,Ee]=xr.useState(null),[ye,H]=xr.useState(null),[Y,X]=xr.useState(!1),[re,se]=xr.useState(!1),[ke,Ce]=xr.useState(!1),[xe,Ie]=xr.useState(!1),[He,Ue]=xr.useState(!1),[Me,Be]=xr.useState(0),[be,Vt]=xr.useState(0),ht=xr.useRef(h.duration||B||Ez),Lt=xr.useRef(null),et=xr.useRef(null),Jt=N===0,Ve=N+1<=w,Ft=h.type,qt=h.dismissible!==!1,Wt=h.className||"",nr=h.descriptionClassName||"",Xe=xr.useMemo(()=>_.findIndex(It=>It.toastId===h.id)||0,[_,h.id]),Kt=xr.useMemo(()=>{var It;return(It=h.closeButton)!=null?It:G},[h.closeButton,G]),kt=xr.useMemo(()=>h.duration||B||Ez,[h.duration,B]),pt=xr.useRef(0),Ot=xr.useRef(0),Ut=xr.useRef(0),Nr=xr.useRef(null),[or,lt]=F.split("-"),lr=xr.useMemo(()=>_.reduce((It,Er,rn)=>rn>=Xe?It:It+Er.height,0),[_,Xe]),ve=zEe(),Ze=h.invert||d,at=Ft==="loading";Ot.current=xr.useMemo(()=>Xe*ee+lr,[Xe,lr]),xr.useEffect(()=>{ht.current=kt},[kt]),xr.useEffect(()=>{X(!0)},[]),xr.useEffect(()=>{const It=et.current;if(It){const Er=It.getBoundingClientRect().height;return Vt(Er),b(rn=>[{toastId:h.id,height:Er,position:h.position},...rn]),()=>b(rn=>rn.filter(Qr=>Qr.toastId!==h.id))}},[b,h.id]),xr.useLayoutEffect(()=>{if(!Y)return;const It=et.current,Er=It.style.height;It.style.height="auto";const rn=It.getBoundingClientRect().height;It.style.height=Er,Vt(rn),b(Qr=>Qr.find(fr=>fr.toastId===h.id)?Qr.map(fr=>fr.toastId===h.id?{...fr,height:rn}:fr):[{toastId:h.id,height:rn,position:h.position},...Qr])},[Y,h.title,h.description,b,h.id,h.jsx,h.action,h.cancel]);const Qe=xr.useCallback(()=>{se(!0),Be(Ot.current),b(It=>It.filter(Er=>Er.toastId!==h.id)),setTimeout(()=>{P(h)},e3e)},[h,P,b,Ot]);xr.useEffect(()=>{if(h.promise&&Ft==="loading"||h.duration===1/0||h.type==="loading")return;let It;return j||g||ve?(()=>{if(Ut.current<pt.current){const Qr=new Date().getTime()-pt.current;ht.current=ht.current-Qr}Ut.current=new Date().getTime()})():(()=>{ht.current!==1/0&&(pt.current=new Date().getTime(),It=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Qe()},ht.current))})(),()=>clearTimeout(It)},[j,g,h,Ft,ve,Qe]),xr.useEffect(()=>{h.delete&&(Qe(),h.onDismiss==null||h.onDismiss.call(h,h))},[Qe,h.delete]);function ze(){var It;if(ne!=null&&ne.loading){var Er;return xr.createElement("div",{className:bd(ce==null?void 0:ce.loader,h==null||(Er=h.classNames)==null?void 0:Er.loader,"sonner-loader"),"data-visible":Ft==="loading"},ne.loading)}return xr.createElement(DEe,{className:bd(ce==null?void 0:ce.loader,h==null||(It=h.classNames)==null?void 0:It.loader),visible:Ft==="loading"})}const it=h.icon||(ne==null?void 0:ne[Ft])||PEe(Ft);var At,er;return xr.createElement("li",{tabIndex:0,ref:et,className:bd(V,Wt,ce==null?void 0:ce.toast,h==null||(e=h.classNames)==null?void 0:e.toast,ce==null?void 0:ce.default,ce==null?void 0:ce[Ft],h==null||(r=h.classNames)==null?void 0:r[Ft]),"data-sonner-toast":"","data-rich-colors":(At=h.richColors)!=null?At:U,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":Y,"data-promise":!!h.promise,"data-swiped":He,"data-removed":re,"data-visible":Ve,"data-y-position":or,"data-x-position":lt,"data-index":N,"data-front":Jt,"data-swiping":ke,"data-dismissible":qt,"data-type":Ft,"data-invert":Ze,"data-swipe-out":xe,"data-swipe-direction":ye,"data-expanded":!!(j||Z&&Y),"data-testid":h.testId,style:{"--index":N,"--toasts-before":N,"--z-index":A.length-N,"--offset":`${re?Me:Ot.current}px`,"--initial-height":Z?"auto":`${be}px`,...O,...h.style},onDragEnd:()=>{Ce(!1),Ee(null),Nr.current=null},onPointerDown:It=>{It.button!==2&&(at||!qt||(Lt.current=new Date,Be(Ot.current),It.target.setPointerCapture(It.pointerId),It.target.tagName!=="BUTTON"&&(Ce(!0),Nr.current={x:It.clientX,y:It.clientY})))},onPointerUp:()=>{var It,Er,rn;if(xe||!qt)return;Nr.current=null;const Qr=Number(((It=et.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),En=Number(((Er=et.current)==null?void 0:Er.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fr=new Date().getTime()-((rn=Lt.current)==null?void 0:rn.getTime()),nn=me==="x"?Qr:En,ea=Math.abs(nn)/fr;if(Math.abs(nn)>=JEe||ea>.11){Be(Ot.current),h.onDismiss==null||h.onDismiss.call(h,h),H(me==="x"?Qr>0?"right":"left":En>0?"down":"up"),Qe(),Ie(!0);return}else{var on,In;(on=et.current)==null||on.style.setProperty("--swipe-amount-x","0px"),(In=et.current)==null||In.style.setProperty("--swipe-amount-y","0px")}Ue(!1),Ce(!1),Ee(null)},onPointerMove:It=>{var Er,rn,Qr;if(!Nr.current||!qt||((Er=window.getSelection())==null?void 0:Er.toString().length)>0)return;const fr=It.clientY-Nr.current.y,nn=It.clientX-Nr.current.x;var ea;const on=(ea=t.swipeDirections)!=null?ea:t3e(F);!me&&(Math.abs(nn)>1||Math.abs(fr)>1)&&Ee(Math.abs(nn)>Math.abs(fr)?"x":"y");let In={x:0,y:0};const qr=un=>1/(1.5+Math.abs(un)/20);if(me==="y"){if(on.includes("top")||on.includes("bottom"))if(on.includes("top")&&fr<0||on.includes("bottom")&&fr>0)In.y=fr;else{const un=fr*qr(fr);In.y=Math.abs(un)<Math.abs(fr)?un:fr}}else if(me==="x"&&(on.includes("left")||on.includes("right")))if(on.includes("left")&&nn<0||on.includes("right")&&nn>0)In.x=nn;else{const un=nn*qr(nn);In.x=Math.abs(un)<Math.abs(nn)?un:nn}(Math.abs(In.x)>0||Math.abs(In.y)>0)&&Ue(!0),(rn=et.current)==null||rn.style.setProperty("--swipe-amount-x",`${In.x}px`),(Qr=et.current)==null||Qr.style.setProperty("--swipe-amount-y",`${In.y}px`)}},Kt&&!h.jsx&&Ft!=="loading"?xr.createElement("button",{"aria-label":ae,"data-disabled":at,"data-close-button":!0,onClick:at||!qt?()=>{}:()=>{Qe(),h.onDismiss==null||h.onDismiss.call(h,h)},className:bd(ce==null?void 0:ce.closeButton,h==null||(n=h.classNames)==null?void 0:n.closeButton)},(er=ne==null?void 0:ne.close)!=null?er:UEe):null,(Ft||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[Ft])!==null||h.icon)?xr.createElement("div",{"data-icon":"",className:bd(ce==null?void 0:ce.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||ze():null,h.type!=="loading"?it:null):null,xr.createElement("div",{"data-content":"",className:bd(ce==null?void 0:ce.content,h==null||(s=h.classNames)==null?void 0:s.content)},xr.createElement("div",{"data-title":"",className:bd(ce==null?void 0:ce.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?xr.createElement("div",{"data-description":"",className:bd(R,nr,ce==null?void 0:ce.description,h==null||(l=h.classNames)==null?void 0:l.description)},typeof h.description=="function"?h.description():h.description):null),xr.isValidElement(h.cancel)?h.cancel:h.cancel&&n5(h.cancel)?xr.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||D,onClick:It=>{n5(h.cancel)&&qt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,It),Qe())},className:bd(ce==null?void 0:ce.cancelButton,h==null||(c=h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,xr.isValidElement(h.action)?h.action:h.action&&n5(h.action)?xr.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||I,onClick:It=>{n5(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,It),!It.defaultPrevented&&Qe())},className:bd(ce==null?void 0:ce.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function Az(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function n3e(t,e){const r={};return[t,e].forEach((n,a)=>{const s=a===1,o=s?"--mobile-offset":"--offset",l=s?YEe:XEe;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}const a3e=xr.forwardRef(function(e,r){const{id:n,invert:a,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:d,mobileOffset:h,theme:p="light",richColors:g,duration:b,style:w,visibleToasts:_=KEe,toastOptions:N,dir:A=Az(),gap:j=QEe,icons:P,containerAriaLabel:U="Notifications"}=e,[G,O]=xr.useState([]),D=xr.useMemo(()=>n?G.filter(Y=>Y.toasterId===n):G.filter(Y=>!Y.toasterId),[G,n]),I=xr.useMemo(()=>Array.from(new Set([s].concat(D.filter(Y=>Y.position).map(Y=>Y.position)))),[D,s]),[V,R]=xr.useState([]),[B,F]=xr.useState(!1),[ee,Z]=xr.useState(!1),[ce,ne]=xr.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=xr.useRef(null),me=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ee=xr.useRef(null),ye=xr.useRef(!1),H=xr.useCallback(Y=>{O(X=>{var re;return(re=X.find(se=>se.id===Y.id))!=null&&re.delete||Ml.dismiss(Y.id),X.filter(({id:se})=>se!==Y.id)})},[]);return xr.useEffect(()=>Ml.subscribe(Y=>{if(Y.dismiss){requestAnimationFrame(()=>{O(X=>X.map(re=>re.id===Y.id?{...re,delete:!0}:re))});return}setTimeout(()=>{W0e.flushSync(()=>{O(X=>{const re=X.findIndex(se=>se.id===Y.id);return re!==-1?[...X.slice(0,re),{...X[re],...Y},...X.slice(re+1)]:[Y,...X]})})})}),[G]),xr.useEffect(()=>{if(p!=="system"){ne(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;const Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:X})=>{ne(X?"dark":"light")})}catch{Y.addListener(({matches:re})=>{try{ne(re?"dark":"light")}catch(se){console.error(se)}})}},[p]),xr.useEffect(()=>{G.length<=1&&F(!1)},[G]),xr.useEffect(()=>{const Y=X=>{var re;if(o.every(Ce=>X[Ce]||X.code===Ce)){var ke;F(!0),(ke=ae.current)==null||ke.focus()}X.code==="Escape"&&(document.activeElement===ae.current||(re=ae.current)!=null&&re.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[o]),xr.useEffect(()=>{if(ae.current)return()=>{Ee.current&&(Ee.current.focus({preventScroll:!0}),Ee.current=null,ye.current=!1)}},[ae.current]),xr.createElement("section",{ref:r,"aria-label":`${U} ${me}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Y,X)=>{var re;const[se,ke]=Y.split("-");return D.length?xr.createElement("ol",{key:Y,dir:A==="auto"?Az():A,tabIndex:-1,ref:ae,className:u,"data-sonner-toaster":!0,"data-sonner-theme":ce,"data-y-position":se,"data-x-position":ke,style:{"--front-toast-height":`${((re=V[0])==null?void 0:re.height)||0}px`,"--width":`${ZEe}px`,"--gap":`${j}px`,...w,...n3e(d,h)},onBlur:Ce=>{ye.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(ye.current=!1,Ee.current&&(Ee.current.focus({preventScroll:!0}),Ee.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||ye.current||(ye.current=!0,Ee.current=Ce.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{ee||F(!1)},onDragEnd:()=>F(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},D.filter(Ce=>!Ce.position&&X===0||Ce.position===Y).map((Ce,xe)=>{var Ie,He;return xr.createElement(r3e,{key:Ce.id,icons:P,index:xe,toast:Ce,defaultRichColors:g,duration:(Ie=N==null?void 0:N.duration)!=null?Ie:b,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:a,visibleToasts:_,closeButton:(He=N==null?void 0:N.closeButton)!=null?He:c,interacting:ee,position:Y,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:H,toasts:D.filter(Ue=>Ue.position==Ce.position),heights:V.filter(Ue=>Ue.position==Ce.position),setHeights:R,expandByDefault:l,gap:j,expanded:B,swipeDirections:e.swipeDirections})})):null}))}),s3e=(t=9e4)=>{const{userData:e}=fa(),r=S.useRef(null);S.useEffect(()=>{if(!e)return;const n=async()=>{try{await wt.post("/auth/heartbeat"),console.log(" Heartbeat enviado")}catch(a){console.error(" Error enviando heartbeat:",a.message)}};return n(),r.current=setInterval(n,t),()=>{r.current&&(clearInterval(r.current),console.log(" Heartbeat detenido"))}},[e,t])};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o3e=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),Sz=t=>{const e=o3e(t);return e.charAt(0).toUpperCase()+e.slice(1)},Dre=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),l3e=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c3e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3e=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>S.createElement("svg",{ref:c,...c3e,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Dre("lucide",a),...!s&&!l3e(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>S.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=(t,e)=>{const r=S.forwardRef(({className:n,...a},s)=>S.createElement(u3e,{ref:s,iconNode:e,className:Dre(`lucide-${i3e(Sz(t))}`,`lucide-${t}`,n),...a}));return r.displayName=Sz(t),r};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3e=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],z1=ir("activity",d3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3e=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],h3e=ir("arrow-down-right",f3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3e=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Gl=ir("arrow-left",m3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3e=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],jz=ir("arrow-right-left",p3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],x3e=ir("arrow-right",g3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3e=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Mre=ir("arrow-up-right",v3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3e=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],Lre=ir("barcode",b3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],PR=ir("bell",y3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3e=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],_3e=ir("book",w3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3e=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Zu=ir("box",N3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3e=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],tp=ir("building-2",E3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],S3e=ir("calculator",A3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Yl=ir("calendar",j3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3e=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Kf=ir("camera",T3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],vp=ir("chart-column",C3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ad=ir("check",k3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fre=ir("chevron-down",I3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3e=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],P3e=ir("chevron-up",O3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ms=ir("circle-alert",R3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],en=ir("circle-check-big",D3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],e1=ir("circle-check",M3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],F3e=ir("circle-plus",L3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tz=ir("circle-question-mark",B3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ym=ir("circle-x",U3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xo=ir("clock",z3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3e=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],$3e=ir("cloud-off",V3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3e=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],q3e=ir("cloud",H3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],W3e=ir("copy",G3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3e=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ay=ir("credit-card",K3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3e=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Bre=ir("crown",X3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ul=ir("dollar-sign",Y3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],WA=ir("download",Z3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],y8=ir("eye-off",Q3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tu=ir("eye",J3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Au=ir("file-text",e4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ure=ir("funnel",t4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],n4e=ir("globe",r4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Cz=ir("grip-vertical",a4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],zre=ir("history",s4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4e=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],w8=ir("house",i4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],$d=ir("image",o4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],c4e=ir("inbox",l4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],d4e=ir("key",u4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bp=ir("loader-circle",f4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4e=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],ts=ir("loader",h4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],s2=ir("lock",m4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],g4e=ir("log-out",p4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uh=ir("mail",x4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Fa=ir("map-pin",v4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4e=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],y4e=ir("menu",b4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],$N=ir("message-circle",w4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],HN=ir("message-square",_4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Gj=ir("monitor",N4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4e=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],sy=ir("navigation",E4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4e=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Br=ir("package",A4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],j4e=ir("palette",S4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],vl=ir("phone",T4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4e=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],k4e=ir("plug",C4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hd=ir("plus",I4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4e=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Wl=ir("printer",O4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4e=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],R4e=ir("qr-code",P4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4e=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],kz=ir("radio",D4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4e=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],L4e=ir("receipt",M4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dh=ir("refresh-cw",F4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],y3=ir("save",B4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4e=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Vre=ir("scan",U4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qd=ir("search",z4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$4e=ir("send",V4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RR=ir("settings",H4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4e=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],G4e=ir("share-2",q4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],K4e=ir("shield-x",W4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Y4e=ir("shield",X4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4e=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Q4e=ir("shopping-cart",Z4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4e=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],$re=ir("smartphone",J4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eAe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],w3=ir("sparkles",eAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tAe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],V1=ir("square-pen",tAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rAe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],nAe=ir("tag",rAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aAe=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],sAe=ir("ticket",aAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iAe=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],oAe=ir("toggle-left",iAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lAe=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],cAe=ir("toggle-right",lAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uAe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yp=ir("trash-2",uAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dAe=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Iz=ir("trash",dAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fAe=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],hAe=ir("trending-down",fAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mAe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kf=ir("trending-up",mAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pAe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bi=ir("triangle-alert",pAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gAe=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],as=ir("truck",gAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xAe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],_3=ir("upload",xAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vAe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],bl=ir("user",vAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bAe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],cd=ir("users",bAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yAe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Oz=ir("video",yAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wAe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],_Ae=ir("wallet",wAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NAe=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],N3=ir("warehouse",NAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EAe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Hre=ir("wifi-off",EAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AAe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],SAe=ir("wifi",AAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jAe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jn=ir("x",jAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TAe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],CAe=ir("zap",TAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kAe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],IAe=ir("zoom-in",kAe),bw="/assets/logo-BeXeJmi3.png",OAe=()=>{const[t,e]=S.useState(()=>{var a;const n=localStorage.getItem("userConfig");if(n)try{return((a=JSON.parse(n).apariencia)==null?void 0:a.tema)||"claro"}catch{return"claro"}return"claro"});return S.useEffect(()=>{t==="oscuro"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),{theme:t,setTheme:e,toggleTheme:()=>{const n=t==="claro"?"oscuro":"claro";e(n);const a=localStorage.getItem("userConfig");let s={};if(a)try{s=JSON.parse(a)}catch{s={}}s.apariencia={...s.apariencia,tema:n},localStorage.setItem("userConfig",JSON.stringify(s))},isDark:t==="oscuro"}},Pz=({onNewNotification:t,onLoadExisting:e})=>{const[r,n]=S.useState(!0),{user:a,userData:s}=fa();return S.useEffect(()=>{if(!a||!s)return;console.log(" NotificationListener Check:",{rol:s.rol,companyId:s.companyId});const o=s.rol==="super_admin",l=!!s.companyId;if(!o&&!l){console.warn(" Usuario sin companyId (y no es admin), listener no iniciado");return}console.log(" NotificationListener iniciado. Rol:",s.rol);const c=DA(Bl,"facturas");let u;s.rol==="super_admin"?u=gu(c,M0("estado","==","no_entregado"),ey("updatedAt","desc"),d8(50)):u=gu(c,M0("companyId","==",s.companyId),M0("estado","==","no_entregado"),ey("updatedAt","desc"),d8(50));const d=zA(u,h=>{if(console.log(" Listener activado - cambios detectados:",h.docChanges().length),r){const p=[];h.docs.forEach(g=>{var N;const b={id:g.id,...g.data()};let w;(N=b.updatedAt)!=null&&N.toDate?w=b.updatedAt.toDate():b.updatedAt instanceof Date?w=b.updatedAt:typeof b.updatedAt=="string"?w=new Date(b.updatedAt):w=new Date,(new Date-w)/1e3<43200&&p.push({id:b.id,tipo:"factura_no_entregada",titulo:`Factura No Entregada: ${b.numeroFactura}`,mensaje:`${b.cliente} - Motivo: ${b.motivoNoEntrega||"Sin especificar"}`,factura:b,timestamp:w,leida:!0})}),console.log(" Cargando",p.length,"notificaciones existentes como LEDAS"),e(p),setTimeout(()=>{n(!1),console.log(" Ahora escuchando cambios NUEVOS")},1e3)}else h.docChanges().forEach(p=>{var g;if(p.type==="added"||p.type==="modified"){const b={id:p.doc.id,...p.doc.data()};let w;if((g=b.updatedAt)!=null&&g.toDate?w=b.updatedAt.toDate():b.updatedAt instanceof Date?w=b.updatedAt:typeof b.updatedAt=="string"?w=new Date(b.updatedAt):w=new Date,(new Date-w)/1e3<30){console.log(" Nueva notificacin!");const N={id:b.id,tipo:"factura_no_entregada",titulo:`Factura No Entregada: ${b.numeroFactura}`,mensaje:`${b.cliente} - Motivo: ${b.motivoNoEntrega||"Sin especificar"}`,factura:b,timestamp:new Date,leida:!1};t(N)}}})},h=>{h.code==="permission-denied"?console.warn(" Listener detenido (Permisos insuficientes):",h.message):console.warn(" Error en listener:",h)});return()=>{console.log(" Listener desconectado"),d()}},[r,t,e,a]),null},DR=S.createContext({});function MR(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const LR=typeof window<"u",qre=LR?S.useLayoutEffect:S.useEffect,KA=S.createContext(null);function FR(t,e){t.indexOf(e)===-1&&t.push(e)}function BR(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const fh=(t,e,r)=>r>e?e:r<t?t:r;let UR=()=>{};const hh={},Gre=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Wre(t){return typeof t=="object"&&t!==null}const Kre=t=>/^0[^.\s]+$/u.test(t);function zR(t){let e;return()=>(e===void 0&&(e=t()),e)}const Su=t=>t,PAe=(t,e)=>r=>e(t(r)),yw=(...t)=>t.reduce(PAe),iy=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class VR{constructor(){this.subscriptions=[]}add(e){return FR(this.subscriptions,e),()=>BR(this.subscriptions,e)}notify(e,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,n);else for(let s=0;s<a;s++){const o=this.subscriptions[s];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gd=t=>t*1e3,yu=t=>t/1e3;function Xre(t,e){return e?t*(1e3/e):0}const Yre=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,RAe=1e-7,DAe=12;function MAe(t,e,r,n,a){let s,o,l=0;do o=e+(r-e)/2,s=Yre(o,n,a)-t,s>0?r=o:e=o;while(Math.abs(s)>RAe&&++l<DAe);return o}function ww(t,e,r,n){if(t===e&&r===n)return Su;const a=s=>MAe(s,0,1,t,r);return s=>s===0||s===1?s:Yre(a(s),e,n)}const Zre=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Qre=t=>e=>1-t(1-e),Jre=ww(.33,1.53,.69,.99),$R=Qre(Jre),ene=Zre($R),tne=t=>(t*=2)<1?.5*$R(t):.5*(2-Math.pow(2,-10*(t-1))),HR=t=>1-Math.sin(Math.acos(t)),rne=Qre(HR),nne=Zre(HR),LAe=ww(.42,0,1,1),FAe=ww(0,0,.58,1),ane=ww(.42,0,.58,1),BAe=t=>Array.isArray(t)&&typeof t[0]!="number",sne=t=>Array.isArray(t)&&typeof t[0]=="number",UAe={linear:Su,easeIn:LAe,easeInOut:ane,easeOut:FAe,circIn:HR,circInOut:nne,circOut:rne,backIn:$R,backInOut:ene,backOut:Jre,anticipate:tne},zAe=t=>typeof t=="string",Rz=t=>{if(sne(t)){UR(t.length===4);const[e,r,n,a]=t;return ww(e,r,n,a)}else if(zAe(t))return UAe[t];return t},a5=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function VAe(t,e){let r=new Set,n=new Set,a=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),t()),d(l)}const u={schedule:(d,h=!1,p=!1)=>{const b=p&&a?r:n;return h&&o.add(d),b.has(d)||b.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,a){s=!0;return}a=!0,[r,n]=[n,r],r.forEach(c),r.clear(),a=!1,s&&(s=!1,u.process(d))}};return u}const $Ae=40;function ine(t,e){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=a5.reduce((j,P)=>(j[P]=VAe(s),j),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:g,postRender:b}=o,w=()=>{const j=hh.useManualTiming?a.timestamp:performance.now();r=!1,hh.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(j-a.timestamp,$Ae),1)),a.timestamp=j,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),d.process(a),h.process(a),p.process(a),g.process(a),b.process(a),a.isProcessing=!1,r&&e&&(n=!1,t(w))},_=()=>{r=!0,n=!0,a.isProcessing||t(w)};return{schedule:a5.reduce((j,P)=>{const U=o[P];return j[P]=(G,O=!1,D=!1)=>(r||_(),U.schedule(G,O,D)),j},{}),cancel:j=>{for(let P=0;P<a5.length;P++)o[a5[P]].cancel(j)},state:a,steps:o}}const{schedule:ps,cancel:Z0,state:vo,steps:Wj}=ine(typeof requestAnimationFrame<"u"?requestAnimationFrame:Su,!0);let qN;function HAe(){qN=void 0}const zl={now:()=>(qN===void 0&&zl.set(vo.isProcessing||hh.useManualTiming?vo.timestamp:performance.now()),qN),set:t=>{qN=t,queueMicrotask(HAe)}},one=t=>e=>typeof e=="string"&&e.startsWith(t),qR=one("--"),qAe=one("var(--"),GR=t=>qAe(t)?GAe.test(t.split("/*")[0].trim()):!1,GAe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},oy={...uv,transform:t=>fh(0,1,t)},s5={...uv,default:1},i2=t=>Math.round(t*1e5)/1e5,WR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WAe(t){return t==null}const KAe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,KR=(t,e)=>r=>!!(typeof r=="string"&&KAe.test(r)&&r.startsWith(t)||e&&!WAe(r)&&Object.prototype.hasOwnProperty.call(r,e)),lne=(t,e,r)=>n=>{if(typeof n!="string")return n;const[a,s,o,l]=n.match(WR);return{[t]:parseFloat(a),[e]:parseFloat(s),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},XAe=t=>fh(0,255,t),Kj={...uv,transform:t=>Math.round(XAe(t))},rp={test:KR("rgb","red"),parse:lne("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Kj.transform(t)+", "+Kj.transform(e)+", "+Kj.transform(r)+", "+i2(oy.transform(n))+")"};function YAe(t){let e="",r="",n="",a="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,r+=r,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const _8={test:KR("#"),parse:YAe,transform:rp.transform},_w=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Zh=_w("deg"),Wd=_w("%"),dn=_w("px"),ZAe=_w("vh"),QAe=_w("vw"),Dz={...Wd,parse:t=>Wd.parse(t)/100,transform:t=>Wd.transform(t*100)},b1={test:KR("hsl","hue"),parse:lne("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+Wd.transform(i2(e))+", "+Wd.transform(i2(r))+", "+i2(oy.transform(n))+")"},fi={test:t=>rp.test(t)||_8.test(t)||b1.test(t),parse:t=>rp.test(t)?rp.parse(t):b1.test(t)?b1.parse(t):_8.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rp.transform(t):b1.transform(t),getAnimatableNone:t=>{const e=fi.parse(t);return e.alpha=0,fi.transform(e)}},JAe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eSe(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(WR))==null?void 0:e.length)||0)+(((r=t.match(JAe))==null?void 0:r.length)||0)>0}const cne="number",une="color",tSe="var",rSe="var(",Mz="${}",nSe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ly(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},a=[];let s=0;const l=e.replace(nSe,c=>(fi.test(c)?(n.color.push(s),a.push(une),r.push(fi.parse(c))):c.startsWith(rSe)?(n.var.push(s),a.push(tSe),r.push(c)):(n.number.push(s),a.push(cne),r.push(parseFloat(c))),++s,Mz)).split(Mz);return{values:r,split:l,indexes:n,types:a}}function dne(t){return ly(t).values}function fne(t){const{split:e,types:r}=ly(t),n=e.length;return a=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],a[o]!==void 0){const l=r[o];l===cne?s+=i2(a[o]):l===une?s+=fi.transform(a[o]):s+=a[o]}return s}}const aSe=t=>typeof t=="number"?0:fi.test(t)?fi.getAnimatableNone(t):t;function sSe(t){const e=dne(t);return fne(t)(e.map(aSe))}const Q0={test:eSe,parse:dne,createTransformer:fne,getAnimatableNone:sSe};function Xj(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function iSe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let a=0,s=0,o=0;if(!e)a=s=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;a=Xj(c,l,t+1/3),s=Xj(c,l,t),o=Xj(c,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function E3(t,e){return r=>r>0?e:t}const As=(t,e,r)=>t+(e-t)*r,Yj=(t,e,r)=>{const n=t*t,a=r*(e*e-n)+n;return a<0?0:Math.sqrt(a)},oSe=[_8,rp,b1],lSe=t=>oSe.find(e=>e.test(t));function Lz(t){const e=lSe(t);if(!e)return!1;let r=e.parse(t);return e===b1&&(r=iSe(r)),r}const Fz=(t,e)=>{const r=Lz(t),n=Lz(e);if(!r||!n)return E3(t,e);const a={...r};return s=>(a.red=Yj(r.red,n.red,s),a.green=Yj(r.green,n.green,s),a.blue=Yj(r.blue,n.blue,s),a.alpha=As(r.alpha,n.alpha,s),rp.transform(a))},N8=new Set(["none","hidden"]);function cSe(t,e){return N8.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function uSe(t,e){return r=>As(t,e,r)}function XR(t){return typeof t=="number"?uSe:typeof t=="string"?GR(t)?E3:fi.test(t)?Fz:hSe:Array.isArray(t)?hne:typeof t=="object"?fi.test(t)?Fz:dSe:E3}function hne(t,e){const r=[...t],n=r.length,a=t.map((s,o)=>XR(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)r[o]=a[o](s);return r}}function dSe(t,e){const r={...t,...e},n={};for(const a in r)t[a]!==void 0&&e[a]!==void 0&&(n[a]=XR(t[a])(t[a],e[a]));return a=>{for(const s in n)r[s]=n[s](a);return r}}function fSe(t,e){const r=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][n[s]],l=t.values[o]??0;r[a]=l,n[s]++}return r}const hSe=(t,e)=>{const r=Q0.createTransformer(e),n=ly(t),a=ly(e);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?N8.has(t)&&!a.values.length||N8.has(e)&&!n.values.length?cSe(t,e):yw(hne(fSe(n,a),a.values),r):E3(t,e)};function mne(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?As(t,e,r):XR(t)(t,e)}const mSe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>ps.update(e,r),stop:()=>Z0(e),now:()=>vo.isProcessing?vo.timestamp:zl.now()}},pne=(t,e,r=10)=>{let n="";const a=Math.max(Math.round(e/r),2);for(let s=0;s<a;s++)n+=Math.round(t(s/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},A3=2e4;function YR(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<A3;)e+=r,n=t.next(e);return e>=A3?1/0:e}function pSe(t,e=100,r){const n=r({...t,keyframes:[0,e]}),a=Math.min(YR(n),A3);return{type:"keyframes",ease:s=>n.next(a*s).value/e,duration:yu(a)}}const gSe=5;function gne(t,e,r){const n=Math.max(e-gSe,0);return Xre(r-t(n),e-n)}const Ms={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Zj=.001;function xSe({duration:t=Ms.duration,bounce:e=Ms.bounce,velocity:r=Ms.velocity,mass:n=Ms.mass}){let a,s,o=1-e;o=fh(Ms.minDamping,Ms.maxDamping,o),t=fh(Ms.minDuration,Ms.maxDuration,yu(t)),o<1?(a=u=>{const d=u*o,h=d*t,p=d-r,g=E8(u,o),b=Math.exp(-h);return Zj-p/g*b},s=u=>{const h=u*o*t,p=h*r+r,g=Math.pow(o,2)*Math.pow(u,2)*t,b=Math.exp(-h),w=E8(Math.pow(u,2),o);return(-a(u)+Zj>0?-1:1)*((p-g)*b)/w}):(a=u=>{const d=Math.exp(-u*t),h=(u-r)*t+1;return-Zj+d*h},s=u=>{const d=Math.exp(-u*t),h=(r-u)*(t*t);return d*h});const l=5/t,c=bSe(a,s,l);if(t=Gd(t),isNaN(c))return{stiffness:Ms.stiffness,damping:Ms.damping,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const vSe=12;function bSe(t,e,r){let n=r;for(let a=1;a<vSe;a++)n=n-t(n)/e(n);return n}function E8(t,e){return t*Math.sqrt(1-e*e)}const ySe=["duration","bounce"],wSe=["stiffness","damping","mass"];function Bz(t,e){return e.some(r=>t[r]!==void 0)}function _Se(t){let e={velocity:Ms.velocity,stiffness:Ms.stiffness,damping:Ms.damping,mass:Ms.mass,isResolvedFromDuration:!1,...t};if(!Bz(t,wSe)&&Bz(t,ySe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,s=2*fh(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Ms.mass,stiffness:a,damping:s}}else{const r=xSe(t);e={...e,...r,mass:Ms.mass},e.isResolvedFromDuration=!0}return e}function S3(t=Ms.visualDuration,e=Ms.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:a}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:g}=_Se({...r,velocity:-yu(r.velocity||0)}),b=p||0,w=u/(2*Math.sqrt(c*d)),_=o-s,N=yu(Math.sqrt(c/d)),A=Math.abs(_)<5;n||(n=A?Ms.restSpeed.granular:Ms.restSpeed.default),a||(a=A?Ms.restDelta.granular:Ms.restDelta.default);let j;if(w<1){const U=E8(N,w);j=G=>{const O=Math.exp(-w*N*G);return o-O*((b+w*N*_)/U*Math.sin(U*G)+_*Math.cos(U*G))}}else if(w===1)j=U=>o-Math.exp(-N*U)*(_+(b+N*_)*U);else{const U=N*Math.sqrt(w*w-1);j=G=>{const O=Math.exp(-w*N*G),D=Math.min(U*G,300);return o-O*((b+w*N*_)*Math.sinh(D)+U*_*Math.cosh(D))/U}}const P={calculatedDuration:g&&h||null,next:U=>{const G=j(U);if(g)l.done=U>=h;else{let O=U===0?b:0;w<1&&(O=U===0?Gd(b):gne(j,U,G));const D=Math.abs(O)<=n,I=Math.abs(o-G)<=a;l.done=D&&I}return l.value=l.done?o:G,l},toString:()=>{const U=Math.min(YR(P),A3),G=pne(O=>P.next(U*O).value,U,30);return U+"ms "+G},toTransition:()=>{}};return P}S3.applyToOptions=t=>{const e=pSe(t,100,S3);return t.ease=e.ease,t.duration=Gd(e.duration),t.type="keyframes",t};function A8({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},g=D=>l!==void 0&&D<l||c!==void 0&&D>c,b=D=>l===void 0?c:c===void 0||Math.abs(l-D)<Math.abs(c-D)?l:c;let w=r*e;const _=h+w,N=o===void 0?_:o(_);N!==_&&(w=N-h);const A=D=>-w*Math.exp(-D/n),j=D=>N+A(D),P=D=>{const I=A(D),V=j(D);p.done=Math.abs(I)<=u,p.value=p.done?N:V};let U,G;const O=D=>{g(p.value)&&(U=D,G=S3({keyframes:[p.value,b(p.value)],velocity:gne(j,D,p.value),damping:a,stiffness:s,restDelta:u,restSpeed:d}))};return O(0),{calculatedDuration:null,next:D=>{let I=!1;return!G&&U===void 0&&(I=!0,P(D),O(D)),U!==void 0&&D>=U?G.next(D-U):(!I&&P(D),p)}}}function NSe(t,e,r){const n=[],a=r||hh.mix||mne,s=t.length-1;for(let o=0;o<s;o++){let l=a(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Su:e;l=yw(c,l)}n.push(l)}return n}function ESe(t,e,{clamp:r=!0,ease:n,mixer:a}={}){const s=t.length;if(UR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=NSe(e,n,a),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=iy(t[h],t[h+1],d);return l[h](p)};return r?d=>u(fh(t[0],t[s-1],d)):u}function ASe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const a=iy(0,e,n);t.push(As(r,1,a))}}function SSe(t){const e=[0];return ASe(e,t.length-1),e}function jSe(t,e){return t.map(r=>r*e)}function TSe(t,e){return t.map(()=>e||ane).splice(0,t.length-1)}function o2({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const a=BAe(n)?n.map(Rz):Rz(n),s={done:!1,value:e[0]},o=jSe(r&&r.length===e.length?r:SSe(e),t),l=ESe(o,e,{ease:Array.isArray(a)?a:TSe(e,a)});return{calculatedDuration:t,next:c=>(s.value=l(c),s.done=c>=t,s)}}const CSe=t=>t!==null;function ZR(t,{repeat:e,repeatType:r="loop"},n,a=1){const s=t.filter(CSe),l=a<0||e&&r!=="loop"&&e%2===1?0:s.length-1;return!l||n===void 0?s[l]:n}const kSe={decay:A8,inertia:A8,tween:o2,keyframes:o2,spring:S3};function xne(t){typeof t.type=="string"&&(t.type=kSe[t.type])}class QR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const ISe=t=>t/100;class JR extends QR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,a;const{motionValue:r}=this.options;r&&r.updatedAt!==zl.now()&&this.tick(zl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(n=this.options).onStop)==null||a.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xne(e);const{type:r=o2,repeat:n=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const c=r||o2;c!==o2&&typeof l[0]!="number"&&(this.mixKeyframes=yw(ISe,mne(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=YR(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:a,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:g,type:b,onUpdate:w,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const N=this.currentTime-u*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?N<0:N>a;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let j=this.currentTime,P=n;if(h){const D=Math.min(this.currentTime,a)/l;let I=Math.floor(D),V=D%1;!V&&D>=1&&(V=1),V===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(p==="reverse"?(V=1-V,g&&(V-=g/l)):p==="mirror"&&(P=o)),j=fh(0,1,V)*l}const U=A?{done:!1,value:d[0]}:P.next(j);s&&(U.value=s(U.value));let{done:G}=U;!A&&c!==null&&(G=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return O&&b!==A8&&(U.value=ZR(d,this.options,_,this.speed)),w&&w(U.value),O&&this.finish(),U}then(e,r){return this.finished.then(e,r)}get duration(){return yu(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yu(e)}get time(){return yu(this.currentTime)}set time(e){var r;e=Gd(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(zl.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=yu(this.currentTime))}play(){var a,s;if(this.isStopped)return;const{driver:e=mSe,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(a=this.options).onPlay)==null||s.call(a);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(zl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function OSe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const np=t=>t*180/Math.PI,S8=t=>{const e=np(Math.atan2(t[1],t[0]));return j8(e)},PSe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:S8,rotateZ:S8,skewX:t=>np(Math.atan(t[1])),skewY:t=>np(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},j8=t=>(t=t%360,t<0&&(t+=360),t),Uz=S8,zz=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Vz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),RSe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zz,scaleY:Vz,scale:t=>(zz(t)+Vz(t))/2,rotateX:t=>j8(np(Math.atan2(t[6],t[5]))),rotateY:t=>j8(np(Math.atan2(-t[2],t[0]))),rotateZ:Uz,rotate:Uz,skewX:t=>np(Math.atan(t[4])),skewY:t=>np(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function T8(t){return t.includes("scale")?1:0}function C8(t,e){if(!t||t==="none")return T8(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(r)n=RSe,a=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=PSe,a=l}if(!a)return T8(e);const s=n[e],o=a[1].split(",").map(MSe);return typeof s=="function"?s(o):o[s]}const DSe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return C8(r,e)};function MSe(t){return parseFloat(t.trim())}const dv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fv=new Set(dv),$z=t=>t===uv||t===dn,LSe=new Set(["x","y","z"]),FSe=dv.filter(t=>!LSe.has(t));function BSe(t){const e=[];return FSe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const wp={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>C8(e,"x"),y:(t,{transform:e})=>C8(e,"y")};wp.translateX=wp.x;wp.translateY=wp.y;const _p=new Set;let k8=!1,I8=!1,O8=!1;function vne(){if(I8){const t=Array.from(_p).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const a=BSe(n);a.length&&(r.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([s,o])=>{var l;(l=n.getValue(s))==null||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}I8=!1,k8=!1,_p.forEach(t=>t.complete(O8)),_p.clear()}function bne(){_p.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(I8=!0)})}function USe(){O8=!0,bne(),vne(),O8=!1}class e7{constructor(e,r,n,a,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=a,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(_p.add(this),k8||(k8=!0,ps.read(bne),ps.resolveKeyframes(vne))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:a}=this;if(e[0]===null){const s=a==null?void 0:a.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&r){const l=n.readValue(r,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&s===void 0&&a.set(e[0])}OSe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),_p.delete(this)}cancel(){this.state==="scheduled"&&(_p.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zSe=t=>t.startsWith("--");function VSe(t,e,r){zSe(e)?t.style.setProperty(e,r):t.style[e]=r}const $Se=zR(()=>window.ScrollTimeline!==void 0),HSe={};function qSe(t,e){const r=zR(t);return()=>HSe[e]??r()}const yne=qSe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cb=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Hz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Cb([0,.65,.55,1]),circOut:Cb([.55,0,1,.45]),backIn:Cb([.31,.01,.66,-.59]),backOut:Cb([.33,1.53,.69,.99])};function wne(t,e){if(t)return typeof t=="function"?yne()?pne(t,e):"ease-out":sne(t)?Cb(t):Array.isArray(t)?t.map(r=>wne(r,e)||Hz.easeOut):Hz[t]}function GSe(t,e,r,{delay:n=0,duration:a=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:r};c&&(d.offset=c);const h=wne(l,a);Array.isArray(h)&&(d.easing=h);const p={delay:n,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(d,p)}function _ne(t){return typeof t=="function"&&"applyToOptions"in t}function WSe({type:t,...e}){return _ne(t)&&yne()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class KSe extends QR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:a,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,UR(typeof e.type!="string");const u=WSe(e);this.animation=GSe(r,n,a,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=ZR(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):VSe(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return yu(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+yu(e)}get time(){return yu(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Gd(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&$Se()?(this.animation.timeline=e,Su):r(this)}}const Nne={anticipate:tne,backInOut:ene,circInOut:nne};function XSe(t){return t in Nne}function YSe(t){typeof t.ease=="string"&&XSe(t.ease)&&(t.ease=Nne[t.ease])}const qz=10;class ZSe extends KSe{constructor(e){YSe(e),xne(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:a,element:s,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const l=new JR({...o,autoplay:!1}),c=Gd(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-qz).value,l.sample(c).value,qz),l.stop()}}const Gz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Q0.test(t)||t==="0")&&!t.startsWith("url("));function QSe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function JSe(t,e,r,n){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Gz(a,e),l=Gz(s,e);return!o||!l?!1:QSe(t)||(r==="spring"||_ne(r))&&n}function P8(t){t.duration=0,t.type="keyframes"}const e6e=new Set(["opacity","clipPath","filter","transform"]),t6e=zR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function r6e(t){var d;const{motionValue:e,name:r,repeatDelay:n,repeatType:a,damping:s,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return t6e()&&r&&e6e.has(r)&&(r!=="transform"||!u)&&!c&&!n&&a!=="mirror"&&s!==0&&o!=="inertia"}const n6e=40;class a6e extends QR{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var b;super(),this.stop=()=>{var w,_;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=zl.now();const p={autoplay:e,delay:r,type:n,repeat:a,repeatDelay:s,repeatType:o,name:c,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||e7;this.keyframeResolver=new g(l,(w,_,N)=>this.onKeyframesResolved(w,_,p,!N),c,u,d),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,r,n,a){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=zl.now(),JSe(e,s,o,l)||((hh.instantAnimations||!c)&&(d==null||d(ZR(e,n,r))),e[0]=e[e.length-1],P8(n),n.repeat=0);const p={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>n6e?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},g=!u&&r6e(p)?new ZSe({...p,element:p.motionValue.owner.current}):new JR(p);g.finished.then(()=>this.notifyFinished()).catch(Su),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),USe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const s6e=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function i6e(t){const e=s6e.exec(t);if(!e)return[,];const[,r,n,a]=e;return[`--${r??n}`,a]}function Ene(t,e,r=1){const[n,a]=i6e(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return Gre(o)?parseFloat(o):o}return GR(a)?Ene(a,e,r+1):a}function t7(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Ane=new Set(["width","height","top","left","right","bottom",...dv]),o6e={test:t=>t==="auto",parse:t=>t},Sne=t=>e=>e.test(t),jne=[uv,dn,Wd,Zh,QAe,ZAe,o6e],Wz=t=>jne.find(Sne(t));function l6e(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Kre(t):!0}const c6e=new Set(["brightness","contrast","saturate","opacity"]);function u6e(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(WR)||[];if(!n)return t;const a=r.replace(n,"");let s=c6e.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+a+")"}const d6e=/\b([a-z-]*)\(.*?\)/gu,R8={...Q0,getAnimatableNone:t=>{const e=t.match(d6e);return e?e.map(u6e).join(" "):t}},Kz={...uv,transform:Math.round},f6e={rotate:Zh,rotateX:Zh,rotateY:Zh,rotateZ:Zh,scale:s5,scaleX:s5,scaleY:s5,scaleZ:s5,skew:Zh,skewX:Zh,skewY:Zh,distance:dn,translateX:dn,translateY:dn,translateZ:dn,x:dn,y:dn,z:dn,perspective:dn,transformPerspective:dn,opacity:oy,originX:Dz,originY:Dz,originZ:dn},r7={borderWidth:dn,borderTopWidth:dn,borderRightWidth:dn,borderBottomWidth:dn,borderLeftWidth:dn,borderRadius:dn,radius:dn,borderTopLeftRadius:dn,borderTopRightRadius:dn,borderBottomRightRadius:dn,borderBottomLeftRadius:dn,width:dn,maxWidth:dn,height:dn,maxHeight:dn,top:dn,right:dn,bottom:dn,left:dn,padding:dn,paddingTop:dn,paddingRight:dn,paddingBottom:dn,paddingLeft:dn,margin:dn,marginTop:dn,marginRight:dn,marginBottom:dn,marginLeft:dn,backgroundPositionX:dn,backgroundPositionY:dn,...f6e,zIndex:Kz,fillOpacity:oy,strokeOpacity:oy,numOctaves:Kz},h6e={...r7,color:fi,backgroundColor:fi,outlineColor:fi,fill:fi,stroke:fi,borderColor:fi,borderTopColor:fi,borderRightColor:fi,borderBottomColor:fi,borderLeftColor:fi,filter:R8,WebkitFilter:R8},Tne=t=>h6e[t];function Cne(t,e){let r=Tne(t);return r!==R8&&(r=Q0),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const m6e=new Set(["auto","none","0"]);function p6e(t,e,r){let n=0,a;for(;n<t.length&&!a;){const s=t[n];typeof s=="string"&&!m6e.has(s)&&ly(s).values.length&&(a=t[n]),n++}if(a&&r)for(const s of e)t[s]=Cne(r,a)}class g6e extends e7{constructor(e,r,n,a,s){super(e,r,n,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),GR(u))){const d=Ene(u,r.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Ane.has(n)||e.length!==2)return;const[a,s]=e,o=Wz(a),l=Wz(s);if(o!==l)if($z(o)&&$z(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else wp[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let a=0;a<e.length;a++)(e[a]===null||l6e(e[a]))&&n.push(a);n.length&&p6e(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wp[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&e.getValue(n,a).jump(a,!1)}measureEndState(){var l;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const a=e.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=wp[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function x6e(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const a=(r==null?void 0:r[t])??n.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const kne=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Ine(t){return Wre(t)&&"offsetHeight"in t}const Xz=30,v6e=t=>!isNaN(parseFloat(t));class b6e{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const a=zl.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=zl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=v6e(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new VR);const n=this.events[e].add(r);return e==="change"?()=>{n(),ps.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=zl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xz)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Xz);return Xre(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ix(t,e){return new b6e(t,e)}const{schedule:n7}=ine(queueMicrotask,!1),Wu={x:!1,y:!1};function One(){return Wu.x||Wu.y}function y6e(t){return t==="x"||t==="y"?Wu[t]?null:(Wu[t]=!0,()=>{Wu[t]=!1}):Wu.x||Wu.y?null:(Wu.x=Wu.y=!0,()=>{Wu.x=Wu.y=!1})}function Pne(t,e){const r=x6e(t),n=new AbortController,a={passive:!0,...e,signal:n.signal};return[r,a,()=>n.abort()]}function Yz(t){return!(t.pointerType==="touch"||One())}function w6e(t,e,r={}){const[n,a,s]=Pne(t,r),o=l=>{if(!Yz(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{Yz(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,a)};return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),s}const Rne=(t,e)=>e?t===e?!0:Rne(t,e.parentElement):!1,a7=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_6e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N6e(t){return _6e.has(t.tagName)||t.tabIndex!==-1}const GN=new WeakSet;function Zz(t){return e=>{e.key==="Enter"&&t(e)}}function Qj(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const E6e=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=Zz(()=>{if(GN.has(r))return;Qj(r,"down");const a=Zz(()=>{Qj(r,"up")}),s=()=>Qj(r,"cancel");r.addEventListener("keyup",a,e),r.addEventListener("blur",s,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Qz(t){return a7(t)&&!One()}function A6e(t,e,r={}){const[n,a,s]=Pne(t,r),o=l=>{const c=l.currentTarget;if(!Qz(l))return;GN.add(c);const u=e(c,l),d=(g,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),GN.has(c)&&GN.delete(c),Qz(g)&&typeof u=="function"&&u(g,{success:b})},h=g=>{d(g,c===window||c===document||r.useGlobalTarget||Rne(c,g.target))},p=g=>{d(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",p,a)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),Ine(l)&&(l.addEventListener("focus",u=>E6e(u,a)),!N6e(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function Dne(t){return Wre(t)&&"ownerSVGElement"in t}function S6e(t){return Dne(t)&&t.tagName==="svg"}const Ho=t=>!!(t&&t.getVelocity),j6e=[...jne,fi,Q0],T6e=t=>j6e.find(Sne(t)),s7=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Jz(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function C6e(...t){return e=>{let r=!1;const n=t.map(a=>{const s=Jz(a,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():Jz(t[a],null)}}}}function k6e(...t){return S.useCallback(C6e(...t),t)}class I6e extends S.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,a=Ine(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function O6e({children:t,isPresent:e,anchorX:r,root:n}){const a=S.useId(),s=S.useRef(null),o=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=S.useContext(s7),c=k6e(s,t==null?void 0:t.ref);return S.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:p,right:g}=o.current;if(e||!s.current||!u||!d)return;const b=r==="left"?`left: ${p}`:`right: ${g}`;s.current.dataset.motionPopId=a;const w=document.createElement("style");l&&(w.nonce=l);const _=n??document.head;return _.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{_.contains(w)&&_.removeChild(w)}},[e]),i.jsx(I6e,{isPresent:e,childRef:s,sizeRef:o,children:S.cloneElement(t,{ref:c})})}const P6e=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:s,mode:o,anchorX:l,root:c})=>{const u=MR(R6e),d=S.useId();let h=!0,p=S.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:r,custom:a,onExitComplete:g=>{u.set(g,!0);for(const b of u.values())if(!b)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return s&&h&&(p={...p}),S.useMemo(()=>{u.forEach((g,b)=>u.set(b,!1))},[r]),S.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(t=i.jsx(O6e,{isPresent:r,anchorX:l,root:c,children:t})),i.jsx(KA.Provider,{value:p,children:t})};function R6e(){return new Map}function Mne(t=!0){const e=S.useContext(KA);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=e,s=S.useId();S.useEffect(()=>{if(t)return a(s)},[t]);const o=S.useCallback(()=>t&&n&&n(s),[s,n,t]);return!r&&n?[!1,o]:[!0]}const i5=t=>t.key||"";function eV(t){const e=[];return S.Children.forEach(t,r=>{S.isValidElement(r)&&e.push(r)}),e}const Nw=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=Mne(o),h=S.useMemo(()=>eV(t),[t]),p=o&&!u?[]:h.map(i5),g=S.useRef(!0),b=S.useRef(h),w=MR(()=>new Map),[_,N]=S.useState(h),[A,j]=S.useState(h);qre(()=>{g.current=!1,b.current=h;for(let G=0;G<A.length;G++){const O=i5(A[G]);p.includes(O)?w.delete(O):w.get(O)!==!0&&w.set(O,!1)}},[A,p.length,p.join("-")]);const P=[];if(h!==_){let G=[...h];for(let O=0;O<A.length;O++){const D=A[O],I=i5(D);p.includes(I)||(G.splice(O,0,D),P.push(D))}return s==="wait"&&P.length&&(G=P),j(eV(G)),N(h),null}const{forceRender:U}=S.useContext(DR);return i.jsx(i.Fragment,{children:A.map(G=>{const O=i5(G),D=o&&!u?!1:h===A||p.includes(O),I=()=>{if(w.has(O))w.set(O,!0);else return;let V=!0;w.forEach(R=>{R||(V=!1)}),V&&(U==null||U(),j(b.current),o&&(d==null||d()),n&&n())};return i.jsx(P6e,{isPresent:D,initial:!g.current||r?void 0:!1,custom:e,presenceAffectsLayout:a,mode:s,root:c,onExitComplete:D?void 0:I,anchorX:l,children:G},O)})})},Lne=S.createContext({strict:!1}),tV={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ox={};for(const t in tV)Ox[t]={isEnabled:e=>tV[t].some(r=>!!e[r])};function D6e(t){for(const e in t)Ox[e]={...Ox[e],...t[e]}}const M6e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function j3(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||M6e.has(t)}let Fne=t=>!j3(t);function L6e(t){typeof t=="function"&&(Fne=e=>e.startsWith("on")?!j3(e):t(e))}try{L6e(require("@emotion/is-prop-valid").default)}catch{}function F6e(t,e,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(Fne(a)||r===!0&&j3(a)||!e&&!j3(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}const XA=S.createContext({});function YA(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function cy(t){return typeof t=="string"||Array.isArray(t)}const i7=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],o7=["initial",...i7];function ZA(t){return YA(t.animate)||o7.some(e=>cy(t[e]))}function Bne(t){return!!(ZA(t)||t.variants)}function B6e(t,e){if(ZA(t)){const{initial:r,animate:n}=t;return{initial:r===!1||cy(r)?r:void 0,animate:cy(n)?n:void 0}}return t.inherit!==!1?e:{}}function U6e(t){const{initial:e,animate:r}=B6e(t,S.useContext(XA));return S.useMemo(()=>({initial:e,animate:r}),[rV(e),rV(r)])}function rV(t){return Array.isArray(t)?t.join(" "):t}const uy={};function z6e(t){for(const e in t)uy[e]=t[e],qR(e)&&(uy[e].isCSSVariable=!0)}function Une(t,{layout:e,layoutId:r}){return fv.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!uy[t]||t==="opacity")}const V6e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$6e=dv.length;function H6e(t,e,r){let n="",a=!0;for(let s=0;s<$6e;s++){const o=dv[s],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=kne(l,r7[o]);if(!c){a=!1;const d=V6e[o]||o;n+=`${d}(${u}) `}r&&(e[o]=u)}}return n=n.trim(),r?n=r(e,a?"":n):a&&(n="none"),n}function l7(t,e,r){const{style:n,vars:a,transformOrigin:s}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(fv.has(c)){o=!0;continue}else if(qR(c)){a[c]=u;continue}else{const d=kne(u,r7[c]);c.startsWith("origin")?(l=!0,s[c]=d):n[c]=d}}if(e.transform||(o||r?n.transform=H6e(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;n.transformOrigin=`${c} ${u} ${d}`}}const c7=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zne(t,e,r){for(const n in e)!Ho(e[n])&&!Une(n,r)&&(t[n]=e[n])}function q6e({transformTemplate:t},e){return S.useMemo(()=>{const r=c7();return l7(r,e,t),Object.assign({},r.vars,r.style)},[e])}function G6e(t,e){const r=t.style||{},n={};return zne(n,r,t),Object.assign(n,q6e(t,e)),n}function W6e(t,e){const r={},n=G6e(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const K6e={offset:"stroke-dashoffset",array:"stroke-dasharray"},X6e={offset:"strokeDashoffset",array:"strokeDasharray"};function Y6e(t,e,r=1,n=0,a=!0){t.pathLength=1;const s=a?K6e:X6e;t[s.offset]=dn.transform(-n);const o=dn.transform(e),l=dn.transform(r);t[s.array]=`${o} ${l}`}function Vne(t,{attrX:e,attrY:r,attrScale:n,pathLength:a,pathSpacing:s=1,pathOffset:o=0,...l},c,u,d){if(l7(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),a!==void 0&&Y6e(h,a,s,o,!1)}const $ne=()=>({...c7(),attrs:{}}),Hne=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Z6e(t,e,r,n){const a=S.useMemo(()=>{const s=$ne();return Vne(s,e,Hne(n),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};zne(s,t.style,t),a.style={...s,...a.style}}return a}const Q6e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function u7(t){return typeof t!="string"||t.includes("-")?!1:!!(Q6e.indexOf(t)>-1||/[A-Z]/u.test(t))}function J6e(t,e,r,{latestValues:n},a,s=!1){const l=(u7(t)?Z6e:W6e)(e,n,a,t),c=F6e(e,typeof t=="string",s),u=t!==S.Fragment?{...c,...l,ref:r}:{},{children:d}=e,h=S.useMemo(()=>Ho(d)?d.get():d,[d]);return S.createElement(t,{...u,children:h})}function nV(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function d7(t,e,r,n){if(typeof e=="function"){const[a,s]=nV(n);e=e(r!==void 0?r:t.custom,a,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,s]=nV(n);e=e(r!==void 0?r:t.custom,a,s)}return e}function WN(t){return Ho(t)?t.get():t}function eje({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,a){return{latestValues:tje(r,n,a,t),renderState:e()}}function tje(t,e,r,n){const a={},s=n(t,{});for(const p in s)a[p]=WN(s[p]);let{initial:o,animate:l}=t;const c=ZA(t),u=Bne(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!YA(h)){const p=Array.isArray(h)?h:[h];for(let g=0;g<p.length;g++){const b=d7(t,p[g]);if(b){const{transitionEnd:w,transition:_,...N}=b;for(const A in N){let j=N[A];if(Array.isArray(j)){const P=d?j.length-1:0;j=j[P]}j!==null&&(a[A]=j)}for(const A in w)a[A]=w[A]}}}return a}const qne=t=>(e,r)=>{const n=S.useContext(XA),a=S.useContext(KA),s=()=>eje(t,e,n,a);return r?s():MR(s)};function f7(t,e,r){var s;const{style:n}=t,a={};for(const o in n)(Ho(n[o])||e.style&&Ho(e.style[o])||Une(o,t)||((s=r==null?void 0:r.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(a[o]=n[o]);return a}const rje=qne({scrapeMotionValuesFromProps:f7,createRenderState:c7});function Gne(t,e,r){const n=f7(t,e,r);for(const a in t)if(Ho(t[a])||Ho(e[a])){const s=dv.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[s]=t[a]}return n}const nje=qne({scrapeMotionValuesFromProps:Gne,createRenderState:$ne}),aje=Symbol.for("motionComponentSymbol");function y1(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function sje(t,e,r){return S.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):y1(r)&&(r.current=n))},[e])}const h7=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ije="framerAppearId",Wne="data-"+h7(ije),Kne=S.createContext({});function oje(t,e,r,n,a){var w,_;const{visualElement:s}=S.useContext(XA),o=S.useContext(Lne),l=S.useContext(KA),c=S.useContext(s7).reducedMotion,u=S.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:s,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=S.useContext(Kne);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&lje(u.current,r,a,h);const p=S.useRef(!1);S.useInsertionEffect(()=>{d&&p.current&&d.update(r,l)});const g=r[Wne],b=S.useRef(!!g&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,g))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,g)));return qre(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),b.current&&d.animationState&&d.animationState.animateChanges())}),S.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,g)}),b.current=!1),d.enteringChildren=void 0)}),d}function lje(t,e,r,n){const{layoutId:a,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Xne(t.parent)),t.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!o||l&&y1(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function Xne(t){if(t)return t.options.allowProjection!==!1?t.projection:Xne(t.parent)}function Jj(t,{forwardMotionProps:e=!1}={},r,n){r&&D6e(r);const a=u7(t)?nje:rje;function s(l,c){let u;const d={...S.useContext(s7),...l,layoutId:cje(l)},{isStatic:h}=d,p=U6e(l),g=a(l,h);if(!h&&LR){uje();const b=dje(d);u=b.MeasureLayout,p.visualElement=oje(t,g,d,n,b.ProjectionNode)}return i.jsxs(XA.Provider,{value:p,children:[u&&p.visualElement?i.jsx(u,{visualElement:p.visualElement,...d}):null,J6e(t,l,sje(g,p.visualElement,c),g,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=S.forwardRef(s);return o[aje]=t,o}function cje({layoutId:t}){const e=S.useContext(DR).id;return e&&t!==void 0?e+"-"+t:t}function uje(t,e){S.useContext(Lne).strict}function dje(t){const{drag:e,layout:r}=Ox;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function fje(t,e){if(typeof Proxy>"u")return Jj;const r=new Map,n=(s,o)=>Jj(s,o,t,e),a=(s,o)=>n(s,o);return new Proxy(a,{get:(s,o)=>o==="create"?n:(r.has(o)||r.set(o,Jj(o,void 0,t,e)),r.get(o))})}function Yne({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function hje({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function mje(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function eT(t){return t===void 0||t===1}function D8({scale:t,scaleX:e,scaleY:r}){return!eT(t)||!eT(e)||!eT(r)}function zm(t){return D8(t)||Zne(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Zne(t){return aV(t.x)||aV(t.y)}function aV(t){return t&&t!=="0%"}function T3(t,e,r){const n=t-r,a=e*n;return r+a}function sV(t,e,r,n,a){return a!==void 0&&(t=T3(t,a,n)),T3(t,r,n)+e}function M8(t,e=0,r=1,n,a){t.min=sV(t.min,e,r,n,a),t.max=sV(t.max,e,r,n,a)}function Qne(t,{x:e,y:r}){M8(t.x,e.translate,e.scale,e.originPoint),M8(t.y,r.translate,r.scale,r.originPoint)}const iV=.999999999999,oV=1.0000000000001;function pje(t,e,r,n=!1){const a=r.length;if(!a)return;e.x=e.y=1;let s,o;for(let l=0;l<a;l++){s=r[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_1(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Qne(t,o)),n&&zm(s.latestValues)&&_1(t,s.latestValues))}e.x<oV&&e.x>iV&&(e.x=1),e.y<oV&&e.y>iV&&(e.y=1)}function w1(t,e){t.min=t.min+e,t.max=t.max+e}function lV(t,e,r,n,a=.5){const s=As(t.min,t.max,a);M8(t,e,r,s,n)}function _1(t,e){lV(t.x,e.x,e.scaleX,e.scale,e.originX),lV(t.y,e.y,e.scaleY,e.scale,e.originY)}function Jne(t,e){return Yne(mje(t.getBoundingClientRect(),e))}function gje(t,e,r){const n=Jne(t,r),{scroll:a}=e;return a&&(w1(n.x,a.offset.x),w1(n.y,a.offset.y)),n}const cV=()=>({translate:0,scale:1,origin:0,originPoint:0}),N1=()=>({x:cV(),y:cV()}),uV=()=>({min:0,max:0}),Zs=()=>({x:uV(),y:uV()}),L8={current:null},eae={current:!1};function xje(){if(eae.current=!0,!!LR)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>L8.current=t.matches;t.addEventListener("change",e),e()}else L8.current=!1}const vje=new WeakMap;function bje(t,e,r){for(const n in e){const a=e[n],s=r[n];if(Ho(a))t.addValue(n,a);else if(Ho(s))t.addValue(n,Ix(a,{owner:t}));else if(s!==a)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(n);t.addValue(n,Ix(o!==void 0?o:a,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const dV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yje{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=e7,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=zl.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,ps.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=ZA(r),this.isVariantNode=Bne(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in h){const g=h[p];c[p]!==void 0&&Ho(g)&&g.set(c[p])}}mount(e){var r;this.current=e,vje.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),eae.current||xje(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:L8.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Z0(this.notifyUpdate),Z0(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=fv.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ps.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{a(),s&&s(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ox){const r=Ox[e];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Zs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<dV.length;n++){const a=dV[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,o=e[s];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=bje(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Ix(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Gre(n)||Kre(n))?n=parseFloat(n):!T6e(n)&&Q0.test(r)&&(n=Cne(e,r)),this.setBaseTarget(e,Ho(n)?n.get():n)),Ho(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var s;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=d7(this.props,r,(s=this.presenceContext)==null?void 0:s.custom);o&&(n=o[e])}if(r&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Ho(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new VR),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){n7.render(this.render)}}class tae extends yje{constructor(){super(...arguments),this.KeyframeResolver=g6e}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ho(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function rae(t,{style:e,vars:r},n,a){const s=t.style;let o;for(o in e)s[o]=e[o];a==null||a.applyProjectionStyles(s,n);for(o in r)s.setProperty(o,r[o])}function wje(t){return window.getComputedStyle(t)}class _je extends tae{constructor(){super(...arguments),this.type="html",this.renderInstance=rae}readValueFromInstance(e,r){var n;if(fv.has(r))return(n=this.projection)!=null&&n.isProjecting?T8(r):DSe(e,r);{const a=wje(e),s=(qR(r)?a.getPropertyValue(r):a[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Jne(e,r)}build(e,r,n){l7(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return f7(e,r,n)}}const nae=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Nje(t,e,r,n){rae(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(nae.has(a)?a:h7(a),e.attrs[a])}class Eje extends tae{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Zs}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(fv.has(r)){const n=Tne(r);return n&&n.default||0}return r=nae.has(r)?r:h7(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Gne(e,r,n)}build(e,r,n){Vne(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,a){Nje(e,r,n,a)}mount(e){this.isSVGTag=Hne(e.tagName),super.mount(e)}}const Aje=(t,e)=>u7(t)?new Eje(e):new _je(e,{allowProjection:t!==S.Fragment});function $1(t,e,r){const n=t.getProps();return d7(n,e,r!==void 0?r:n.custom,t)}const F8=t=>Array.isArray(t);function Sje(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Ix(r))}function jje(t){return F8(t)?t[t.length-1]||0:t}function Tje(t,e){const r=$1(t,e);let{transitionEnd:n={},transition:a={},...s}=r||{};s={...s,...n};for(const o in s){const l=jje(s[o]);Sje(t,o,l)}}function Cje(t){return!!(Ho(t)&&t.add)}function B8(t,e){const r=t.getValue("willChange");if(Cje(r))return r.add(e);if(!r&&hh.WillChange){const n=new hh.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function aae(t){return t.props[Wne]}const kje=t=>t!==null;function Ije(t,{repeat:e,repeatType:r="loop"},n){const a=t.filter(kje),s=e&&r!=="loop"&&e%2===1?0:a.length-1;return a[s]}const Oje={type:"spring",stiffness:500,damping:25,restSpeed:10},Pje=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Rje={type:"keyframes",duration:.8},Dje={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mje=(t,{keyframes:e})=>e.length>2?Rje:fv.has(t)?t.startsWith("scale")?Pje(e[1]):Oje:Dje;function Lje({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const m7=(t,e,r,n={},a,s)=>o=>{const l=t7(n,t)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Gd(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:a};Lje(l)||Object.assign(d,Mje(t,d)),d.duration&&(d.duration=Gd(d.duration)),d.repeatDelay&&(d.repeatDelay=Gd(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(P8(d),d.delay===0&&(h=!0)),(hh.instantAnimations||hh.skipAnimations)&&(h=!0,P8(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!s&&e.get()!==void 0){const p=Ije(d.keyframes,l);if(p!==void 0){ps.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new JR(d):new a6e(d)};function Fje({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function sae(t,e,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(s=n);const c=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),p=l[d];if(p===void 0||u&&Fje(u,d))continue;const g={delay:r,...t7(s||{},d)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===b&&!g.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const N=aae(t);if(N){const A=window.MotionHandoffAnimation(N,d,ps);A!==null&&(g.startTime=A,w=!0)}}B8(t,d),h.start(m7(d,h,p,t.shouldReduceMotion&&Ane.has(d)?{type:!1}:g,t,w));const _=h.animation;_&&c.push(_)}return o&&Promise.all(c).then(()=>{ps.update(()=>{o&&Tje(t,o)})}),c}function iae(t,e,r,n=0,a=1){const s=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*n;return typeof r=="function"?r(s,o):a===1?s*n:l-s*n}function U8(t,e,r={}){var c;const n=$1(t,e,r.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const s=n?()=>Promise.all(sae(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=a;return Bje(t,e,u,d,h,p,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(r.delay)])}function Bje(t,e,r=0,n=0,a=0,s=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(U8(c,e,{...o,delay:r+(typeof n=="function"?0:n)+iae(t.variantChildren,c,n,a,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function Uje(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(s=>U8(t,s,r));n=Promise.all(a)}else if(typeof e=="string")n=U8(t,e,r);else{const a=typeof e=="function"?$1(t,e,r.custom):e;n=Promise.all(sae(t,a,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function oae(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const zje=o7.length;function lae(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?lae(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<zje;r++){const n=o7[r],a=t.props[n];(cy(a)||a===!1)&&(e[n]=a)}return e}const Vje=[...i7].reverse(),$je=i7.length;function Hje(t){return e=>Promise.all(e.map(({animation:r,options:n})=>Uje(t,r,n)))}function qje(t){let e=Hje(t),r=fV(),n=!0;const a=c=>(u,d)=>{var p;const h=$1(t,d,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:g,transitionEnd:b,...w}=h;u={...u,...w,...b}}return u};function s(c){e=c(t)}function o(c){const{props:u}=t,d=lae(t.parent)||{},h=[],p=new Set;let g={},b=1/0;for(let _=0;_<$je;_++){const N=Vje[_],A=r[N],j=u[N]!==void 0?u[N]:d[N],P=cy(j),U=N===c?A.isActive:null;U===!1&&(b=_);let G=j===d[N]&&j!==u[N]&&P;if(G&&n&&t.manuallyAnimateOnMount&&(G=!1),A.protectedKeys={...g},!A.isActive&&U===null||!j&&!A.prevProp||YA(j)||typeof j=="boolean")continue;const O=Gje(A.prevProp,j);let D=O||N===c&&A.isActive&&!G&&P||_>b&&P,I=!1;const V=Array.isArray(j)?j:[j];let R=V.reduce(a(N),{});U===!1&&(R={});const{prevResolvedValues:B={}}=A,F={...B,...R},ee=ne=>{D=!0,p.has(ne)&&(I=!0,p.delete(ne)),A.needsAnimating[ne]=!0;const ae=t.getValue(ne);ae&&(ae.liveStyle=!1)};for(const ne in F){const ae=R[ne],me=B[ne];if(g.hasOwnProperty(ne))continue;let Ee=!1;F8(ae)&&F8(me)?Ee=!oae(ae,me):Ee=ae!==me,Ee?ae!=null?ee(ne):p.add(ne):ae!==void 0&&p.has(ne)?ee(ne):A.protectedKeys[ne]=!0}A.prevProp=j,A.prevResolvedValues=R,A.isActive&&(g={...g,...R}),n&&t.blockInitialAnimation&&(D=!1);const Z=G&&O;D&&(!Z||I)&&h.push(...V.map(ne=>{const ae={type:N};if(typeof ne=="string"&&n&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:me}=t,Ee=$1(me,ne);if(me.enteringChildren&&Ee){const{delayChildren:ye}=Ee.transition||{};ae.delay=iae(me.enteringChildren,t,ye)}}return{animation:ne,options:ae}}))}if(p.size){const _={};if(typeof u.initial!="boolean"){const N=$1(t,Array.isArray(u.initial)?u.initial[0]:u.initial);N&&N.transition&&(_.transition=N.transition)}p.forEach(N=>{const A=t.getBaseTarget(N),j=t.getValue(N);j&&(j.liveStyle=!0),_[N]=A??null}),h.push({animation:_})}let w=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const p in r)r[p].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>r,reset:()=>{r=fV()}}}function Gje(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!oae(e,t):!1}function Om(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function fV(){return{animate:Om(!0),whileInView:Om(),whileHover:Om(),whileTap:Om(),whileDrag:Om(),whileFocus:Om(),exit:Om()}}class xm{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Wje extends xm{constructor(e){super(e),e.animationState||(e.animationState=qje(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();YA(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Kje=0;class Xje extends xm{constructor(){super(...arguments),this.id=Kje++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);r&&!e&&a.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Yje={animation:{Feature:Wje},exit:{Feature:Xje}};function dy(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function Ew(t){return{point:{x:t.pageX,y:t.pageY}}}const Zje=t=>e=>a7(e)&&t(e,Ew(e));function l2(t,e,r,n){return dy(t,e,Zje(r),n)}const cae=1e-4,Qje=1-cae,Jje=1+cae,uae=.01,eTe=0-uae,tTe=0+uae;function pl(t){return t.max-t.min}function rTe(t,e,r){return Math.abs(t-e)<=r}function hV(t,e,r,n=.5){t.origin=n,t.originPoint=As(e.min,e.max,t.origin),t.scale=pl(r)/pl(e),t.translate=As(r.min,r.max,t.origin)-t.originPoint,(t.scale>=Qje&&t.scale<=Jje||isNaN(t.scale))&&(t.scale=1),(t.translate>=eTe&&t.translate<=tTe||isNaN(t.translate))&&(t.translate=0)}function c2(t,e,r,n){hV(t.x,e.x,r.x,n?n.originX:void 0),hV(t.y,e.y,r.y,n?n.originY:void 0)}function mV(t,e,r){t.min=r.min+e.min,t.max=t.min+pl(e)}function nTe(t,e,r){mV(t.x,e.x,r.x),mV(t.y,e.y,r.y)}function pV(t,e,r){t.min=e.min-r.min,t.max=t.min+pl(e)}function u2(t,e,r){pV(t.x,e.x,r.x),pV(t.y,e.y,r.y)}function au(t){return[t("x"),t("y")]}const dae=({current:t})=>t?t.ownerDocument.defaultView:null,gV=(t,e)=>Math.abs(t-e);function aTe(t,e){const r=gV(t.x,e.x),n=gV(t.y,e.y);return Math.sqrt(r**2+n**2)}class fae{constructor(e,r,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=rT(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,b=aTe(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!b)return;const{point:w}=p,{timestamp:_}=vo;this.history.push({...w,timestamp:_});const{onStart:N,onMove:A}=this.handlers;g||(N&&N(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=tT(g,this.transformPagePoint),ps.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=rT(p.type==="pointercancel"?this.lastMoveEventInfo:tT(g,this.transformPagePoint),this.history);this.startEvent&&b&&b(p,N),w&&w(p,N)},!a7(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const l=Ew(e),c=tT(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=vo;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(e,rT(c,this.history)),this.removeListeners=yw(l2(this.contextWindow,"pointermove",this.handlePointerMove),l2(this.contextWindow,"pointerup",this.handlePointerUp),l2(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Z0(this.updatePoint)}}function tT(t,e){return e?{point:e(t.point)}:t}function xV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rT({point:t},e){return{point:t,delta:xV(t,hae(e)),offset:xV(t,sTe(e)),velocity:iTe(e,.1)}}function sTe(t){return t[0]}function hae(t){return t[t.length-1]}function iTe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=hae(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>Gd(e)));)r--;if(!n)return{x:0,y:0};const s=yu(a.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function oTe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?As(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?As(r,t,n.max):Math.min(t,r)),t}function vV(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function lTe(t,{top:e,left:r,bottom:n,right:a}){return{x:vV(t.x,r,a),y:vV(t.y,e,n)}}function bV(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function cTe(t,e){return{x:bV(t.x,e.x),y:bV(t.y,e.y)}}function uTe(t,e){let r=.5;const n=pl(t),a=pl(e);return a>n?r=iy(e.min,e.max-n,t.min):n>a&&(r=iy(t.min,t.max-a,e.min)),fh(0,1,r)}function dTe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const z8=.35;function fTe(t=z8){return t===!1?t=0:t===!0&&(t=z8),{x:yV(t,"left","right"),y:yV(t,"top","bottom")}}function yV(t,e,r){return{min:wV(t,e),max:wV(t,r)}}function wV(t,e){return typeof t=="number"?t:t[e]||0}const hTe=new WeakMap;class mTe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Zs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Ew(h).point)},o=(h,p)=>{const{drag:g,dragPropagation:b,onDragStart:w}=this.getProps();if(g&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=y6e(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),au(N=>{let A=this.getAxisMotionValue(N).get()||0;if(Wd.test(A)){const{projection:j}=this.visualElement;if(j&&j.layout){const P=j.layout.layoutBox[N];P&&(A=pl(P)*(parseFloat(A)/100))}}this.originPoint[N]=A}),w&&ps.postRender(()=>w(h,p)),B8(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},l=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:b,onDirectionLock:w,onDrag:_}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:N}=p;if(b&&this.currentDirection===null){this.currentDirection=pTe(N),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",p.point,N),this.updateAxis("y",p.point,N),this.visualElement.render(),_&&_(h,p)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>au(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new fae(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:dae(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,a=r||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ps.postRender(()=>l(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:a}=this.getProps();if(!n||!o5(e,a,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=oTe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,a=this.constraints;e&&y1(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=lTe(n.layoutBox,e):this.constraints=!1,this.elastic=fTe(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&au(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=dTe(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!y1(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=gje(n,a.root,this.visualElement.getTransformPagePoint());let o=cTe(a.layout.layoutBox,s);if(r){const l=r(hje(o));this.hasMutatedConstraints=!!l,l&&(o=Yne(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=au(d=>{if(!o5(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const p=a?200:1e6,g=a?40:1e7,b={type:"inertia",velocity:n?e[d]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,b)});return Promise.all(u).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return B8(this.visualElement,e),n.start(m7(e,n,0,r,this.visualElement,!1))}stopAnimation(){au(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){au(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){au(r=>{const{drag:n}=this.getProps();if(!o5(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];s.set(e[r]-As(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!y1(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};au(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=uTe({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),au(o=>{if(!o5(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(As(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;hTe.set(this.visualElement,this);const e=this.visualElement.current,r=l2(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();y1(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ps.read(n);const o=dy(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(au(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:o=z8,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function o5(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function pTe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class gTe extends xm{constructor(e){super(e),this.removeGroupControls=Su,this.removeListeners=Su,this.controls=new mTe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Su}unmount(){this.removeGroupControls(),this.removeListeners()}}const _V=t=>(e,r)=>{t&&ps.postRender(()=>t(e,r))};class xTe extends xm{constructor(){super(...arguments),this.removePointerDownListener=Su}onPointerDown(e){this.session=new fae(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dae(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:_V(e),onStart:_V(r),onMove:n,onEnd:(s,o)=>{delete this.session,a&&ps.postRender(()=>a(s,o))}}}mount(){this.removePointerDownListener=l2(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const KN={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function NV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Qv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(dn.test(t))t=parseFloat(t);else return t;const r=NV(t,e.target.x),n=NV(t,e.target.y);return`${r}% ${n}%`}},vTe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,a=Q0.parse(t);if(a.length>5)return n;const s=Q0.createTransformer(t),o=typeof a[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;a[0+o]/=l,a[1+o]/=c;const u=As(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),s(a)}};let nT=!1;class bTe extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:s}=e;z6e(yTe),s&&(r.group&&r.group.add(s),n&&n.register&&a&&n.register(s),nT&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),KN.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:a,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,nT=!0,a||e.layoutDependency!==r||r===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ps.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),n7.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=e;nT=!0,a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mae(t){const[e,r]=Mne(),n=S.useContext(DR);return i.jsx(bTe,{...t,layoutGroup:n,switchLayoutGroup:S.useContext(Kne),isPresent:e,safeToRemove:r})}const yTe={borderRadius:{...Qv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qv,borderTopRightRadius:Qv,borderBottomLeftRadius:Qv,borderBottomRightRadius:Qv,boxShadow:vTe};function wTe(t,e,r){const n=Ho(t)?t:Ix(t);return n.start(m7("",n,e,r)),n.animation}const _Te=(t,e)=>t.depth-e.depth;class NTe{constructor(){this.children=[],this.isDirty=!1}add(e){FR(this.children,e),this.isDirty=!0}remove(e){BR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_Te),this.isDirty=!1,this.children.forEach(e)}}function ETe(t,e){const r=zl.now(),n=({timestamp:a})=>{const s=a-r;s>=e&&(Z0(n),t(s-e))};return ps.setup(n,!0),()=>Z0(n)}const pae=["TopLeft","TopRight","BottomLeft","BottomRight"],ATe=pae.length,EV=t=>typeof t=="string"?parseFloat(t):t,AV=t=>typeof t=="number"||dn.test(t);function STe(t,e,r,n,a,s){a?(t.opacity=As(0,r.opacity??1,jTe(n)),t.opacityExit=As(e.opacity??1,0,TTe(n))):s&&(t.opacity=As(e.opacity??1,r.opacity??1,n));for(let o=0;o<ATe;o++){const l=`border${pae[o]}Radius`;let c=SV(e,l),u=SV(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||AV(c)===AV(u)?(t[l]=Math.max(As(EV(c),EV(u),n),0),(Wd.test(u)||Wd.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||r.rotate)&&(t.rotate=As(e.rotate||0,r.rotate||0,n))}function SV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const jTe=gae(0,.5,rne),TTe=gae(.5,.95,Su);function gae(t,e,r){return n=>n<t?0:n>e?1:r(iy(t,e,n))}function jV(t,e){t.min=e.min,t.max=e.max}function Zc(t,e){jV(t.x,e.x),jV(t.y,e.y)}function TV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function CV(t,e,r,n,a){return t-=e,t=T3(t,1/r,n),a!==void 0&&(t=T3(t,1/a,n)),t}function CTe(t,e=0,r=1,n=.5,a,s=t,o=t){if(Wd.test(e)&&(e=parseFloat(e),e=As(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=As(s.min,s.max,n);t===s&&(l-=e),t.min=CV(t.min,e,r,l,a),t.max=CV(t.max,e,r,l,a)}function kV(t,e,[r,n,a],s,o){CTe(t,e[r],e[n],e[a],e.scale,s,o)}const kTe=["x","scaleX","originX"],ITe=["y","scaleY","originY"];function IV(t,e,r,n){kV(t.x,e,kTe,r?r.x:void 0,n?n.x:void 0),kV(t.y,e,ITe,r?r.y:void 0,n?n.y:void 0)}function OV(t){return t.translate===0&&t.scale===1}function xae(t){return OV(t.x)&&OV(t.y)}function PV(t,e){return t.min===e.min&&t.max===e.max}function OTe(t,e){return PV(t.x,e.x)&&PV(t.y,e.y)}function RV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function vae(t,e){return RV(t.x,e.x)&&RV(t.y,e.y)}function DV(t){return pl(t.x)/pl(t.y)}function MV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class PTe{constructor(){this.members=[]}add(e){FR(this.members,e),e.scheduleRender()}remove(e){if(BR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function RTe(t,e,r){let n="";const a=t.x.translate/e.x,s=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((a||s||o)&&(n=`translate3d(${a}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:g,skewY:b}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),p&&(n+=`rotateY(${p}deg) `),g&&(n+=`skewX(${g}deg) `),b&&(n+=`skewY(${b}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const aT=["","X","Y","Z"],DTe=1e3;let MTe=0;function sT(t,e,r,n){const{latestValues:a}=e;a[t]&&(r[t]=a[t],e.setStaticValue(t,0),n&&(n[t]=0))}function bae(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=aae(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ps,!(a||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&bae(n)}function yae({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=e==null?void 0:e()){this.id=MTe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(BTe),this.nodes.forEach($Te),this.nodes.forEach(HTe),this.nodes.forEach(UTe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new NTe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new VR),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Dne(o)&&!S6e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;ps.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=ETe(p,250),KN.hasAnimatedSinceResize&&(KN.hasAnimatedSinceResize=!1,this.nodes.forEach(BV)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||XTe,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=u.getProps(),N=!this.targetLayout||!vae(this.targetLayout,g),A=!h&&p;if(this.options.layoutRoot||this.resumeFrom||A||h&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...t7(b,"layout"),onPlay:w,onComplete:_};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(d,A)}else h||BV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Z0(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qTe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bae(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(FV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(VTe),this.nodes.forEach(LTe),this.nodes.forEach(FTe)):this.nodes.forEach(FV),this.clearAllSnapshots();const l=zl.now();vo.delta=fh(0,1e3/60,l-vo.timestamp),vo.timestamp=l,vo.isProcessing=!0,Wj.update.process(vo),Wj.preRender.process(vo),Wj.render.process(vo),vo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,n7.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zTe),this.sharedNodes.forEach(GTe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ps.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ps.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!pl(this.snapshot.measuredBox.x)&&!pl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Zs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!xae(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||zm(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),YTe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Zs();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(ZTe))){const{scroll:d}=this.root;d&&(w1(l.x,d.offset.x),w1(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=Zs();if(Zc(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Zc(l,o),w1(l.x,h.offset.x),w1(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=Zs();Zc(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&_1(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zm(d.latestValues)&&_1(c,d.latestValues)}return zm(this.latestValues)&&_1(c,this.latestValues),c}removeTransform(o){const l=Zs();Zc(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zm(u.latestValues))continue;D8(u.latestValues)&&u.updateSnapshot();const d=Zs(),h=u.measurePageBox();Zc(d,h),IV(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return zm(this.latestValues)&&IV(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=vo.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Zs(),this.relativeTargetOrigin=Zs(),u2(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Zc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Zs(),this.targetWithTransforms=Zs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nTe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zc(this.target,this.layout.layoutBox),Qne(this.target,this.targetDelta)):Zc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Zs(),this.relativeTargetOrigin=Zs(),u2(this.relativeTargetOrigin,this.target,g.target),Zc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||D8(this.parent.latestValues)||Zne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===vo.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Zc(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;pje(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Zs());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(TV(this.prevProjectionDelta.x,this.projectionDelta.x),TV(this.prevProjectionDelta.y,this.projectionDelta.y)),c2(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!MV(this.projectionDelta.x,this.prevProjectionDelta.x)||!MV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=N1(),this.projectionDelta=N1(),this.projectionDeltaWithTransform=N1()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=N1();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Zs(),g=c?c.source:void 0,b=this.layout?this.layout.source:void 0,w=g!==b,_=this.getStack(),N=!_||_.members.length<=1,A=!!(w&&!N&&this.options.crossfade===!0&&!this.path.some(KTe));this.animationProgress=0;let j;this.mixTargetDelta=P=>{const U=P/1e3;UV(h.x,o.x,U),UV(h.y,o.y,U),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(u2(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),WTe(this.relativeTarget,this.relativeTargetOrigin,p,U),j&&OTe(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Zs()),Zc(j,this.relativeTarget)),w&&(this.animationValues=d,STe(d,u,this.latestValues,U,A,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Z0(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ps.update(()=>{KN.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ix(0)),this.currentAnimation=wTe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DTe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&wae(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Zs();const h=pl(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const p=pl(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}Zc(l,c),_1(l,d),c2(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new PTe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&sT("z",o,u,this.animationValues);for(let d=0;d<aT.length;d++)sT(`rotate${aT[d]}`,o,u,this.animationValues),sT(`skew${aT[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=WN(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=WN(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!zm(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=RTe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const b in uy){if(d[b]===void 0)continue;const{correct:w,applyTo:_,isCSSVariable:N}=uy[b],A=h==="none"?d[b]:w(d[b],u);if(_){const j=_.length;for(let P=0;P<j;P++)o[_[P]]=A}else N?this.options.visualElement.renderState.vars[b]=A:o[b]=A}this.options.layoutId&&(o.pointerEvents=u===this?WN(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(LV),this.root.sharedNodes.clear()}}}function LTe(t){t.updateLayout()}function FTe(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?au(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],g=pl(p);p.min=n[h].min,p.max=p.min+g}):wae(s,e.layoutBox,n)&&au(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],g=pl(n[h]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const l=N1();c2(l,n,e.layoutBox);const c=N1();o?c2(c,t.applyTransform(a,!0),e.measuredBox):c2(c,n,e.layoutBox);const u=!xae(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const b=Zs();u2(b,e.layoutBox,p.layoutBox);const w=Zs();u2(w,n,g.layoutBox),vae(b,w)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function BTe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function UTe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zTe(t){t.clearSnapshot()}function LV(t){t.clearMeasurements()}function FV(t){t.isLayoutDirty=!1}function VTe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function BV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $Te(t){t.resolveTargetDelta()}function HTe(t){t.calcProjection()}function qTe(t){t.resetSkewAndRotation()}function GTe(t){t.removeLeadSnapshot()}function UV(t,e,r){t.translate=As(e.translate,0,r),t.scale=As(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function zV(t,e,r,n){t.min=As(e.min,r.min,n),t.max=As(e.max,r.max,n)}function WTe(t,e,r,n){zV(t.x,e.x,r.x,n),zV(t.y,e.y,r.y,n)}function KTe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const XTe={duration:.45,ease:[.4,0,.1,1]},VV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),$V=VV("applewebkit/")&&!VV("chrome/")?Math.round:Su;function HV(t){t.min=$V(t.min),t.max=$V(t.max)}function YTe(t){HV(t.x),HV(t.y)}function wae(t,e,r){return t==="position"||t==="preserve-aspect"&&!rTe(DV(e),DV(r),.2)}function ZTe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const QTe=yae({attachResizeListener:(t,e)=>dy(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iT={current:void 0},_ae=yae({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!iT.current){const t=new QTe({});t.mount(window),t.setOptions({layoutScroll:!0}),iT.current=t}return iT.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),JTe={pan:{Feature:xTe},drag:{Feature:gTe,ProjectionNode:_ae,MeasureLayout:mae}};function qV(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,s=n[a];s&&ps.postRender(()=>s(e,Ew(e)))}class eCe extends xm{mount(){const{current:e}=this.node;e&&(this.unmount=w6e(e,(r,n)=>(qV(this.node,n,"Start"),a=>qV(this.node,a,"End"))))}unmount(){}}class tCe extends xm{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yw(dy(this.node.current,"focus",()=>this.onFocus()),dy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GV(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),s=n[a];s&&ps.postRender(()=>s(e,Ew(e)))}class rCe extends xm{mount(){const{current:e}=this.node;e&&(this.unmount=A6e(e,(r,n)=>(GV(this.node,n,"Start"),(a,{success:s})=>GV(this.node,a,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const V8=new WeakMap,oT=new WeakMap,nCe=t=>{const e=V8.get(t.target);e&&e(t)},aCe=t=>{t.forEach(nCe)};function sCe({root:t,...e}){const r=t||document;oT.has(r)||oT.set(r,{});const n=oT.get(r),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(aCe,{root:t,...e})),n[a]}function iCe(t,e,r){const n=sCe(e);return V8.set(t,r),n.observe(t),()=>{V8.delete(t),n.unobserve(t)}}const oCe={some:0,all:1};class lCe extends xm{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:oCe[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(c)};return iCe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(cCe(e,r))&&this.startObserver()}unmount(){}}function cCe({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const uCe={inView:{Feature:lCe},tap:{Feature:rCe},focus:{Feature:tCe},hover:{Feature:eCe}},dCe={layout:{ProjectionNode:_ae,MeasureLayout:mae}},fCe={...Yje,...uCe,...JTe,...dCe},Zt=fje(fCe,Aje),WV=({notifications:t,onClose:e,onMarkAsRead:r,onViewDetails:n})=>{const[a,s]=S.useState("all"),o=t.filter(c=>a==="unread"?!c.leida:a==="read"?c.leida:!0),l=t.filter(c=>!c.leida).length;return i.jsxs(Zt.div,{initial:{x:400},animate:{x:0},exit:{x:400},transition:{type:"spring",stiffness:300,damping:30},className:"fixed right-0 top-0 h-full w-96 bg-white dark:bg-slate-900 shadow-2xl z-50 flex flex-col",children:[i.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-rose-700 dark:from-rose-700 dark:to-rose-800 text-white p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Notificaciones"}),i.jsx("button",{onClick:e,className:"text-white hover:text-rose-200 transition",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l>0&&i.jsxs("div",{className:"bg-rose-500 text-white text-sm px-3 py-1 rounded-full inline-block",children:[l," sin leer"]})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-800",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>s("all"),className:`px-3 py-1 rounded text-sm transition ${a==="all"?"bg-rose-600 text-white":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600"}`,children:["Todas (",t.length,")"]}),i.jsxs("button",{onClick:()=>s("unread"),className:`px-3 py-1 rounded text-sm transition ${a==="unread"?"bg-rose-600 text-white":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600"}`,children:["No ledas (",l,")"]}),i.jsx("button",{onClick:()=>s("read"),className:`px-3 py-1 rounded text-sm transition ${a==="read"?"bg-rose-600 text-white":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600"}`,children:"Ledas"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:o.length===0?i.jsxs("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[i.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i.jsx("p",{className:"text-lg font-medium",children:"No hay notificaciones"}),i.jsx("p",{className:"text-sm mt-1",children:a==="unread"?"Todas ledas":"Aqu aparecern las alertas"})]}):i.jsx(Nw,{children:o.map((c,u)=>{var d;return i.jsx(Zt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:u*.05},className:`border-b border-slate-200 dark:border-slate-700 p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition ${c.leida?"bg-white dark:bg-slate-900":"bg-rose-50 dark:bg-rose-900/20"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`mt-1 p-2 rounded-full ${c.leida?"bg-slate-100 dark:bg-slate-700":"bg-rose-100 dark:bg-rose-900/40"}`,children:i.jsx("svg",{className:`w-5 h-5 ${c.leida?"text-slate-400 dark:text-slate-500":"text-rose-600 dark:text-rose-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`font-medium ${c.leida?"text-slate-600 dark:text-slate-400":"text-slate-900 dark:text-white"}`,children:c.titulo}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:c.mensaje}),c.factura&&i.jsxs("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-500",children:[i.jsxs("p",{children:["Ruta: ",c.factura.rutaNombre||"Sin asignar"]}),i.jsxs("p",{children:["Repartidor: ",c.factura.repartidorNombre||"N/A"]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsx("button",{onClick:()=>n(c.factura),className:"text-xs bg-indigo-600 dark:bg-indigo-500 text-white px-3 py-1 rounded hover:bg-indigo-700 dark:hover:bg-indigo-600 transition",children:"Ver Detalles"}),!c.leida&&i.jsx("button",{onClick:()=>r(c.id),className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Marcar como leda"})]}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:(d=c.timestamp)==null?void 0:d.toLocaleString()})]})]})},c.id)})})})]})},KV=({notification:t,onClose:e,onViewDetails:r})=>{var n,a,s,o;return S.useEffect(()=>{const l=setTimeout(()=>{e()},8e3);return()=>clearTimeout(l)},[e]),t?i.jsx(Nw,{children:i.jsx(Zt.div,{initial:{opacity:0,x:100,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.95},transition:{duration:.3,type:"spring",stiffness:200},className:"fixed top-20 right-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl border-l-4 border-rose-600 dark:border-rose-500 p-4 max-w-md",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-rose-600 dark:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-1",children:" Factura No Entregada"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:(n=t.factura)==null?void 0:n.numeroFactura}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Cliente: ",(a=t.factura)==null?void 0:a.cliente]}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Motivo: ",((s=t.factura)==null?void 0:s.motivoNoEntrega)||"Sin especificar"]}),((o=t.factura)==null?void 0:o.rutaNombre)&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["Ruta: ",t.factura.rutaNombre,"  Repartidor: ",t.factura.repartidorNombre||"N/A"]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx("button",{onClick:()=>{r(t.factura),e()},className:"text-xs bg-indigo-600 dark:bg-indigo-500 text-white px-3 py-1.5 rounded hover:bg-indigo-700 dark:hover:bg-indigo-600 transition font-medium",children:"Ver Detalles"}),i.jsx("button",{onClick:e,className:"text-xs text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 px-2",children:"Cerrar"})]})]}),i.jsx("button",{onClick:e,className:"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"mt-3 h-1 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:8,ease:"linear"},className:"h-full bg-rose-600 dark:bg-rose-500"})})]})})}):null},XV=({factura:t,onClose:e})=>{const[r,n]=S.useState(null),[a,s]=S.useState(!0);if(S.useEffect(()=>{(async()=>{if(!(t!=null&&t.rutaId)){s(!1);return}try{const c=await tz(g3(Bl,"rutas",t.rutaId));if(c.exists()){const u=c.data();let d="No asignado";if(u.empleadoNombre)d=u.empleadoNombre;else if(u.empleadoId)try{const h=await tz(g3(Bl,"usuarios",u.empleadoId));if(h.exists()){const p=h.data();d=p.nombre||p.email||"Sin nombre"}}catch(h){console.error("Error al buscar empleado:",h)}n({nombre:u.nombre,repartidorNombre:d})}}catch(c){console.error("Error al obtener info de ruta:",c)}finally{s(!1)}})()},[t]),!t)return null;const o=()=>{t.telefono&&(window.location.href="tel:"+t.telefono)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-6 rounded-t-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Detalles de Factura"}),i.jsx("p",{className:"text-indigo-100 mt-1",children:"Informacin completa para contacto"})]}),i.jsx("button",{onClick:e,className:"text-white hover:text-indigo-200 transition",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Nmero de Factura"}),i.jsx("p",{className:"text-lg font-bold text-slate-900 mt-1",children:t.numeroFactura})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Estado"}),i.jsx("p",{className:"mt-1",children:i.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(t.estado==="entregado"?"bg-emerald-100 text-emerald-800":t.estado==="no_entregado"?"bg-rose-100 text-rose-800":t.estado==="asignado"?"bg-indigo-100 text-indigo-800":"bg-slate-100 text-slate-800"),children:t.estado==="entregado"?"Entregado":t.estado==="no_entregado"?"No Entregado":t.estado==="asignado"?"Asignado":"Pendiente"})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Informacin del Cliente"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Nombre Completo"}),i.jsx("p",{className:"text-slate-900 font-medium",children:t.cliente})]}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.cliente),className:"text-indigo-600 hover:text-indigo-800 text-sm",children:"Copiar"})]}),t.telefono&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Telfono"}),i.jsx("p",{className:"text-slate-900 font-medium",children:t.telefono})]}),i.jsx("button",{onClick:o,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition text-sm font-medium",children:"Llamar"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Direccin"}),i.jsx("p",{className:"text-slate-900",children:t.direccion})]}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.direccion),className:"text-indigo-600 hover:text-indigo-800 text-sm ml-2",children:"Copiar"})]}),t.sector&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium text-indigo-700",children:"Sector"}),i.jsx("p",{className:"text-indigo-900 font-medium",children:t.sector})]}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.sector),className:"text-indigo-600 hover:text-indigo-800 text-sm ml-2",children:"Copiar"})]})]})]}),t.estado==="no_entregado"&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Detalles del Intento Fallido"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-3 bg-rose-50 rounded-lg border border-rose-200",children:[i.jsx("label",{className:"text-sm font-medium text-rose-700",children:"Motivo de No Entrega"}),i.jsx("p",{className:"text-rose-900 font-medium mt-1",children:t.motivoNoEntrega||"Sin motivo especificado"})]}),t.fechaIntento&&i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Fecha del Intento"}),i.jsx("p",{className:"text-slate-900",children:new Date(t.fechaIntento).toLocaleString()})]}),t.observaciones&&i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Observaciones"}),i.jsx("p",{className:"text-slate-900 mt-1",children:t.observaciones})]})]})]}),t.rutaId&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Informacin de Ruta"]}),a?i.jsx("div",{className:"p-4 bg-slate-50 rounded-lg text-center text-slate-500",children:"Cargando informacin de ruta..."}):r?i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Ruta"}),i.jsx("p",{className:"text-slate-900 font-medium",children:r.nombre})]}),i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Repartidor"}),i.jsx("p",{className:"text-slate-900 font-medium",children:r.repartidorNombre})]})]}):i.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:i.jsx("p",{className:"text-amber-800 text-sm",children:"No se pudo cargar la informacin de la ruta"})})]}),t.monto&&i.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[i.jsx("label",{className:"text-sm font-medium text-indigo-700",children:"Monto a Cobrar"}),i.jsxs("p",{className:"text-2xl font-bold text-indigo-900 mt-1",children:["$",t.monto.toLocaleString()]})]})]}),i.jsx("div",{className:"bg-slate-50 px-6 py-4 rounded-b-lg flex justify-end gap-3",children:i.jsx("button",{onClick:e,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition",children:"Cerrar"})})]})})},YV=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(!1),[a,s]=S.useState(null);S.useEffect(()=>{const g=()=>{const w=new Date;e(_=>_.filter(N=>(w-N.timestamp)/1e3<86400))},b=setInterval(g,3e5);return g(),()=>clearInterval(b)},[]);const o=S.useCallback(g=>{e(g)},[]),l=S.useCallback(g=>{e(b=>{if(b.find(_=>_.id===g.id))return b.map(_=>_.id===g.id?g:_);try{const _=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSyBzvLZiTYIG2m98OScTgwNUrDn77ZnFwc3kdfw2YM0CxqB5ObycSoHBQBRQB8AAEAfAAABAAgA");_.volume=.5,_.play().catch(N=>console.log("No se pudo reproducir sonido:",N))}catch(_){console.log("Error al reproducir sonido:",_)}return[g,...b]}),s(g),setTimeout(()=>{s(null)},5e3)},[]),c=S.useCallback(g=>{e(b=>b.map(w=>w.id===g?{...w,leida:!0}:w))},[]),u=S.useCallback(()=>{e(g=>g.map(b=>({...b,leida:!0})))},[]),d=S.useCallback(()=>{s(null)},[]),h=S.useCallback(()=>{n(g=>!g)},[]),p=t.filter(g=>!g.leida).length;return{notifications:t,showPanel:r,currentToast:a,unreadCount:p,addNotification:l,loadExistingNotifications:o,markAsRead:c,markAllAsRead:u,closeToast:d,togglePanel:h,setShowPanel:n}},hCe=({children:t})=>{var Z,ce;const e=$s(),r=dm(),{userData:n,logout:a}=fa(),[s,o]=S.useState(!1),[l,c]=S.useState(null),[u,d]=S.useState(!1),[h,p]=S.useState(!1);OAe();const{notifications:g,showPanel:b,currentToast:w,unreadCount:_,addNotification:N,loadExistingNotifications:A,markAsRead:j,closeToast:P,togglePanel:U,setShowPanel:G}=YV(),O=async()=>{try{a?await a():await IP(L0),e("/login")}catch(ne){console.error("Error al cerrar sesin:",ne)}},D=ne=>{c(ne),d(!0),G&&G(!1)},I=(n==null?void 0:n.rol)==="admin"?"admin_general":(n==null?void 0:n.rol)||"admin_general",R=(()=>{const ne={super_admin:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/finanzas",label:"Finanzas",icon:""},{path:"/companies",label:"Compaas",icon:""},{path:"/hardware",label:"Hardware",icon:""},{path:"/tickets-admin",label:"Tickets",icon:""},{path:"/configuracion/whatsapp",label:"WhatsApp Cloud",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],propietario:[{path:"/dashboard",label:"Dashboard Ejecutivo",icon:""},{path:"/finanzas",label:"Finanzas",icon:""},{path:"/reportes",label:"Reportes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],admin_general:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/recolecciones",label:"Recolecciones",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/almacen-usa",label:"Almacn USA",icon:""},{path:"/almacen-rd",label:"Almacn RD",icon:""},{path:"/secretarias",label:"Panel Secretaras",icon:""},{path:"/cargadores",label:"Panel Cargadores",icon:""},{path:"/repartidores",label:"Panel Repartidores",icon:""},{path:"/rutas",label:"Rutas",icon:""},{path:"/facturas-no-entregadas",label:"No Entregadas",icon:""},{path:"/facturas-pendientes-pago",label:"Facturas Pendientes",icon:""},{path:"/empleados",label:"Empleados",icon:""},{path:"/reportes",label:"Reportes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],recolector:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/recolecciones",label:"Mis Recolecciones",icon:""},{path:"/pool",label:"Bolsa de Cargas",icon:""},{path:"/recolecciones/nueva",label:"Nueva Recoleccin",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],secretaria_usa:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/call-center",label:"Call Center USA",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],secretaria:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/secretarias",label:"Confirmar Facturas",icon:""},{path:"/embarques",label:"Ver Embarques",icon:""},{path:"/facturas-pendientes-pago",label:"Facturas Pendientes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],almacen:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/rutas",label:"Crear Rutas",icon:""},{path:"/facturas-no-entregadas",label:"No Entregadas",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],almacen_rd:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/almacen-rd",label:"Almacn RD",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/rutas",label:"Crear Rutas",icon:""},{path:"/facturas-no-entregadas",label:"No Entregadas",icon:""},{path:"/reportes",label:"Reportes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],almacen_eeuu:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/recolecciones",label:"Recolecciones",icon:""},{path:"/recolecciones/nueva",label:"Nueva Recoleccin",icon:""},{path:"/almacen-usa",label:"Almacn USA",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],cargador:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/cargadores",label:"Mis Rutas",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],repartidor:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/repartidores",label:"Mis Entregas",icon:""},{path:"/rutas",label:"Ver Rutas",icon:""},{path:"/facturas-pendientes-pago",label:"Facturas Pendientes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}]};return ne[I]||ne.admin_general})(),B=()=>({super_admin:"Super Admin",propietario:"Propietario",admin_general:"Administrador",recolector:"Recolector",secretaria:"Secretara",cargador:"Cargador",almacen:"Almacn RD",almacen_rd:"Almacn RD",almacen_eeuu:"Almacn EE.UU.",secretaria_usa:"Secretara USA",repartidor:"Repartidor"})[I]||"Usuario",F=["admin_general","super_admin","almacen_rd","secretaria","repartidor"],ee=(n==null?void 0:n.rol)&&F.includes(n.rol);return i.jsxs("div",{className:"h-screen flex flex-col overflow-hidden bg-slate-50",children:[Pz&&ee&&i.jsx(Pz,{onNewNotification:N,onLoadExisting:A}),KV&&w&&i.jsx(KV,{notification:w,onClose:P,onViewDetails:D}),WV&&b&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>G(!1)}),i.jsx(WV,{notifications:g,onClose:()=>G(!1),onMarkAsRead:j,onViewDetails:D})]}),i.jsx("header",{className:"bg-white border-b border-slate-200 z-50 flex-shrink-0",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>p(!h),className:"lg:hidden p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition","aria-label":"Toggle menu",children:h?i.jsx(Jn,{size:24}):i.jsx(y4e,{size:24})}),i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("img",{src:bw,alt:"ProLogix",className:"h-10 sm:h-12 w-auto object-contain"}),i.jsx("span",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-indigo-600 to-indigo-800 bg-clip-text text-transparent",children:"ProLogix"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[YV&&i.jsxs("button",{onClick:U,className:"relative p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",children:[i.jsx(PR,{className:"w-5 h-5"}),_>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-rose-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:_>9?"9+":_})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-3 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:(n==null?void 0:n.nombre)||"Usuario"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B()})]}),i.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold",children:((Z=n==null?void 0:n.nombre)==null?void 0:Z.charAt(0).toUpperCase())||"U"})]}),s&&i.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 rounded-lg shadow-xl py-2 z-50 border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-slate-700",children:[i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:n==null?void 0:n.nombre}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:n==null?void 0:n.email})]}),i.jsx("button",{onClick:()=>{o(!1),e("/configuracion")},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:" Configuracin"}),i.jsxs("button",{onClick:O,className:"w-full text-left px-4 py-2 text-sm text-rose-600 dark:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition flex items-center gap-2",children:[i.jsx(g4e,{className:"w-4 h-4"}),"Cerrar Sesin"]})]})]})]})]})})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[h&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>p(!1)}),i.jsxs("aside",{className:`
          fixed lg:relative
          top-0 left-0 h-full
          w-64 bg-white border-r border-slate-200
          flex flex-col flex-shrink-0
          z-50 lg:z-auto
          transform transition-transform duration-300 ease-in-out
          ${h?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        `,children:[i.jsxs("div",{className:"lg:hidden p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Men"}),i.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition","aria-label":"Cerrar men",children:i.jsx(Jn,{size:20,className:"text-slate-600 dark:text-slate-400"})})]}),i.jsx("nav",{className:"flex-1 p-3 overflow-y-auto",children:R.map(ne=>i.jsxs(wQ,{to:ne.path,onClick:()=>p(!1),className:`flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-all duration-200 text-sm group ${r.pathname===ne.path||r.pathname.startsWith(ne.path+"/")?"bg-indigo-50 text-indigo-700 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[i.jsx("span",{className:"text-xl flex-shrink-0 opacity-90",children:ne.icon}),i.jsx("span",{className:"font-medium truncate",children:ne.label})]},ne.path))}),i.jsx("div",{className:"lg:hidden p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0",children:((ce=n==null?void 0:n.nombre)==null?void 0:ce.charAt(0).toUpperCase())||"U"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:(n==null?void 0:n.nombre)||"Usuario"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:B()})]})]})})]}),i.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50",children:t})]}),XV&&u&&l&&i.jsx(XV,{factura:l,onClose:()=>{d(!1),c(null)}})]})},mCe=({onLoginStart:t,onExitComplete:e})=>{const[r,n]=S.useState(""),[a,s]=S.useState(""),[o,l]=S.useState(""),[c,u]=S.useState(!1),[d,h]=S.useState(0),{login:p}=fa();S.useEffect(()=>{const b=setTimeout(()=>h(1),2e3),w=setTimeout(()=>h(2),3200),_=setTimeout(()=>h(3),4e3);return()=>{clearTimeout(b),clearTimeout(w),clearTimeout(_)}},[]);const g=async b=>{b.preventDefault(),l(""),u(!0);try{t&&t(),await p(r,a),h(4),setTimeout(()=>h(5),800),setTimeout(()=>{h(6),setTimeout(()=>{e&&e()},2e3)},1e3)}catch(w){console.error("Error en login:",w),l("Email o contrasea incorrectos"),u(!1)}};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 overflow-hidden relative",children:[i.jsx("div",{className:"absolute bottom-0 w-full h-[140px] bg-indigo-900/80 z-30 overflow-hidden border-t border-indigo-500/30 backdrop-blur-sm",children:i.jsx("div",{className:"absolute -top-5 w-[200%] h-10 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 1200 120\\' preserveAspectRatio=\\'none\\'%3E%3Cpath d=\\'M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z\\' fill=\\'%2360A5FA\\' opacity=\\'0.3\\'/%3E%3C/svg%3E')] bg-[length:50%_100%] animate-wave"})}),i.jsxs("div",{className:`absolute bottom-[100px] w-[260px] h-[100px] z-20 transition-transform duration-[2500ms] ease-in-out
          ${d===0?"animate-ship-enter":""}
          ${d>=1&&d<6?"translate-x-0 left-[calc(50%-130px)]":""}
          ${d===6?"animate-ship-depart left-[calc(50%-130px)]":""}
        `,children:[i.jsx("div",{className:"absolute -top-[50px] right-[40px] w-[70px] h-[50px] bg-slate-700 rounded-t-[5px] border-2 border-slate-600",children:i.jsx("div",{className:"absolute top-[10px] left-[10px] w-5 h-5 bg-indigo-400/50 rounded-[2px] animate-pulse"})}),i.jsxs("div",{className:"w-full h-[70px] bg-slate-800 rounded-bl-[20px] rounded-br-[50px] relative shadow-lg border-t border-slate-600",children:[i.jsx("div",{className:"absolute top-[15px] w-full h-[8px] bg-rose-600/80"}),i.jsx("div",{className:"absolute bottom-[10px] left-[20px] text-slate-500 text-[10px] font-mono tracking-widest",children:"PROLOGIX-01"})]}),i.jsx("div",{className:`absolute -top-[60px] left-[100px] w-[60px] h-[60px] bg-white border-2 border-indigo-500 rounded-lg flex items-center justify-center shadow-md transition-opacity duration-0
          ${d<1||d>=6?"opacity-100":"opacity-0"}
        `,children:i.jsx(Br,{className:"text-indigo-600",size:32})})]}),i.jsxs("div",{className:`relative z-50 flex flex-col items-center justify-center transition-all overflow-hidden
          ${d<1?"opacity-0 scale-0":""} 
          ${d===1?"w-[60px] h-[60px] bg-white border-2 border-indigo-500 rounded-lg animate-box-float-up":""}
          ${d===2?"animate-expand-form":""}
          ${d===3?"w-full max-w-md h-[500px] bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8":""}
          ${d===4?"animate-collapse":""}
          ${d===5?"w-[60px] h-[60px] bg-white border-2 border-indigo-500 rounded-lg animate-box-drop":""}
          ${d===6?"opacity-0":""}
        `,children:[i.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-500 pointer-events-none ${d===1||d===2||d>=4?"opacity-100":"opacity-0"}`,children:i.jsx(Br,{className:"text-indigo-600",size:32})}),i.jsxs("div",{className:`w-full h-full flex flex-col justify-center transition-opacity duration-700 delay-200 ${d===3?"opacity-100":"opacity-0 hidden"}`,children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"bg-white w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ring-4 ring-white/10 p-4",children:i.jsx("img",{src:bw,alt:"ProLogix",className:"w-full h-full object-contain"})}),i.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"ProLogix"}),i.jsx("p",{className:"text-indigo-200/80 mt-2 text-sm font-light tracking-wide",children:"SISTEMA DE GESTIN LOGSTICA"})]}),o&&i.jsxs("div",{className:"bg-rose-500/20 border border-rose-500/50 text-white p-3 rounded-lg mb-6 flex items-center gap-2 animate-pulse",children:[i.jsx(ms,{size:20}),i.jsx("span",{children:o})]}),i.jsxs("form",{onSubmit:g,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-1 uppercase tracking-wider",children:"Correo Corporativo"}),i.jsx("input",{type:"email",value:r,onChange:b=>n(b.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all hover:bg-slate-900/70",placeholder:"usuario@prologix.com",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-1 uppercase tracking-wider",children:"Contrasea"}),i.jsx("input",{type:"password",value:a,onChange:b=>s(b.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all hover:bg-slate-900/70",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3.5 px-4 rounded-xl shadow-lg shadow-indigo-900/50 transform transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-2",children:c?i.jsxs(i.Fragment,{children:[i.jsx(bp,{className:"animate-spin",size:20}),i.jsx("span",{children:"Autenticando..."})]}):"Acceder al Sistema"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx(wQ,{to:"/forgot-password",className:"text-sm text-indigo-300 hover:text-white transition-colors underline",children:"Olvidaste tu contrasea?"})})]})]})]})},p7=(t,e=[],r=[],n={})=>{const{userData:a}=fa(),[s,o]=S.useState([]),[l,c]=S.useState(!0),[u,d]=S.useState(null),h=S.useRef(null),p=a==null?void 0:a.companyId;return S.useEffect(()=>{if(!p){c(!1);return}return(async()=>{try{c(!0),d(null);const b=DA(Bl,t);let w=gu(b);w=gu(w,M0("companyId","==",p)),e.forEach(([_,N,A])=>{w=gu(w,M0(_,N,A))}),r.forEach(([_,N="asc"])=>{w=gu(w,ey(_,N))}),console.log(` Configurando listener para ${t} con ${e.length} filtros`),h.current=zA(w,_=>{const N=[];_.forEach(A=>{N.push({id:A.id,...A.data()})}),console.log(` ${t} actualizado: ${N.length} documentos`),o(N),c(!1),n.onUpdate&&n.onUpdate(N)},_=>{console.error(` Error en listener de ${t}:`,_),d(_.message),c(!1),n.onError&&n.onError(_)})}catch(b){console.error(` Error configurando listener de ${t}:`,b),d(b.message),c(!1)}})(),()=>{h.current&&(console.log(` Desconectando listener de ${t}`),h.current())}},[t,p]),{data:s,loading:l,error:u}},Nae=()=>p7("rutas",[["estado","in",["asignada","cargada","carga_finalizada","en_carga","en_entrega"]]]),pCe=()=>p7("rutas",[["estado","in",["en_carga","cargada","carga_finalizada"]]]),g7=(t=null)=>{const e=[["activo","==",!0]];t&&e.push(["rol","==",t]);const{data:r,loading:n,error:a}=p7("usuarios",e),[s,o]=S.useState([]);return S.useEffect(()=>{if(!r)return;const l=new Date,c=5*60*1e3,u=r.filter(d=>{var g,b;if(!d.ultimaActividad)return!1;let h;if((g=d.ultimaActividad)!=null&&g.toDate)h=d.ultimaActividad.toDate();else if((b=d.ultimaActividad)!=null&&b.seconds)h=new Date(d.ultimaActividad.seconds*1e3);else if(d.ultimaActividad instanceof Date)h=d.ultimaActividad;else return!1;return l-h<c});o(u)},[r]),{data:s,loading:n,error:a}},gCe=()=>{const[t,e]=S.useState(0),[r,n]=S.useState(!1),{data:a,loading:s}=pCe(),{data:o,loading:l}=g7("cargador"),c=()=>{n(!0),e(p=>p+1),setTimeout(()=>n(!1),1e3)},u=a.filter(p=>p.cargadorId),d=u.filter(p=>p.estado==="en_carga").length,h=u.filter(p=>p.estado==="cargada"||p.estado==="carga_finalizada").length;return s||l?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),i.jsx("span",{className:"ml-3 text-slate-600",children:"Cargando monitor..."})]})}):i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-amber-50 to-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:i.jsx(Br,{className:"w-6 h-6 text-amber-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Monitor de Cargadores"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Actividad en tiempo real"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[i.jsx("button",{onClick:c,disabled:r,className:"p-2 rounded-lg bg-amber-100 hover:bg-amber-200 text-amber-600 transition-colors disabled:opacity-50",title:"Actualizar manualmente",children:i.jsx(dh,{className:`w-4 h-4 ${r?"animate-spin":""}`})}),i.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-emerald-50 rounded-md border border-emerald-200",children:[i.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-emerald-700",children:"En vivo"})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 p-6 bg-slate-50",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-amber-600",children:o.length}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Cargadores Activos"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:d}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Cargando Ahora"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:h}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Listas para Salir"})]})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[i.jsx(Zu,{className:"w-4 h-4"}),"Rutas en Proceso"]}),u.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Br,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),i.jsx("p",{children:"No hay rutas en proceso de carga"})]}):i.jsx("div",{className:"space-y-3",children:u.map(p=>{const g=o.find(A=>A.uid===p.cargadorId),b=p.itemsCargadosRuta||0,w=p.itemsTotalRuta||0,_=w>0?Math.round(b/w*100):0;let N="";if(p.fechaInicioCarga){const A=new Date(p.fechaInicioCarga),P=Math.floor((new Date-A)/6e4);if(P<60)N=`${P} min`;else{const U=Math.floor(P/60),G=P%60;N=`${U}h ${G}m`}}return i.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${p.estado==="en_carga"?"border-amber-200 bg-amber-50":"border-emerald-200 bg-emerald-50"}`,children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h5",{className:"font-semibold text-slate-900",children:p.nombre}),p.estado==="en_carga"?i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full font-medium",children:"Cargando"}):i.jsxs("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs rounded-full font-medium flex items-center gap-1",children:[i.jsx(en,{className:"w-3 h-3"}),"Completa"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(bl,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:(g==null?void 0:g.nombre)||"Cargador no asignado"}),N&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(Xo,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:N})]})]})]})}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 mb-1",children:[i.jsx("span",{children:"Items cargados"}),i.jsxs("span",{className:"font-medium",children:[b," / ",w]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-500 ${_===100?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${_}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mt-3 pt-3 border-t border-slate-200",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-slate-900",children:p.totalFacturas||0}),i.jsx("div",{className:"text-slate-500",children:"Facturas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-slate-900",children:[_,"%"]}),i.jsx("div",{className:"text-slate-500",children:"Completado"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-slate-900",children:p.zona||"No asignada"}),i.jsx("div",{className:"text-slate-500",children:"Zona"})]})]}),p.notasCarga&&i.jsx("div",{className:"mt-3 p-2 bg-white rounded border border-slate-200",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(bi,{className:"w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5"}),i.jsx("div",{className:"text-xs text-slate-600",children:p.notasCarga})]})})]},p.id)})})]}),i.jsx("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-200 text-xs text-slate-500 text-center",children:"Actualizacin automtica en tiempo real"})]})},xCe=()=>{const[t,e]=S.useState(0),[r,n]=S.useState(!1),{data:a,loading:s}=Nae(),{data:o,loading:l}=g7("repartidor"),c=()=>{n(!0),e(p=>p+1),setTimeout(()=>n(!1),1e3)};if(s||l)return i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),i.jsx("span",{className:"ml-3 text-slate-600",children:"Cargando monitor..."})]})});const u=a.filter(p=>p.repartidorId);u.reduce((p,g)=>p+(g.totalFacturas||0),0);const d=u.reduce((p,g)=>p+(g.facturasEntregadas||0),0),h=u.reduce((p,g)=>{const b=g.facturas||[];return p+b.filter(w=>w.estado==="no_entregada").length},0);return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-indigo-50 to-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(as,{className:"w-6 h-6 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Monitor de Repartidores"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Entregas en tiempo real"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[i.jsx("button",{onClick:c,disabled:r,className:"p-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors disabled:opacity-50",title:"Actualizar manualmente",children:i.jsx(dh,{className:`w-4 h-4 ${r?"animate-spin":""}`})}),i.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-emerald-50 rounded-md border border-emerald-200",children:[i.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-emerald-700",children:"En vivo"})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6 bg-slate-50",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:o.length}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Repartidores"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-amber-600",children:u.length}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"En Ruta"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:d}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Entregadas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-rose-600",children:h}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"No Entregadas"})]})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[i.jsx(Fa,{className:"w-4 h-4"}),"Rutas Activas"]}),u.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(as,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),i.jsx("p",{children:"No hay repartidores en ruta"})]}):i.jsx("div",{className:"space-y-3",children:u.map(p=>{var P;const g=o.find(U=>U.uid===p.repartidorId),b=p.facturas||[],w=b.length,_=p.facturasEntregadas||0,N=b.filter(U=>U.estado==="no_entregada").length,A=w>0?Math.round(_/w*100):0;let j="";if(p.fechaInicioEntrega){const U=new Date(p.fechaInicioEntrega),O=Math.floor((new Date-U)/6e4);if(O<60)j=`${O} min`;else{const D=Math.floor(O/60),I=O%60;j=`${D}h ${I}m`}}return i.jsxs("div",{className:"p-4 rounded-lg border-2 border-indigo-200 bg-indigo-50 transition-all hover:shadow-md",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h5",{className:"font-semibold text-slate-900",children:p.nombre}),i.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full font-medium flex items-center gap-1",children:[i.jsx(as,{className:"w-3 h-3"}),"En Entrega"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(bl,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"font-medium",children:(g==null?void 0:g.nombre)||"No asignado"}),j&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(Xo,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:j})]}),p.zona&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(Fa,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:p.zona})]})]})]})}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 mb-1",children:[i.jsx("span",{children:"Progreso de entregas"}),i.jsxs("span",{className:"font-medium",children:[_," / ",w]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-500 ${A===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${A}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mt-3 pt-3 border-t border-indigo-200",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(Br,{className:"w-3.5 h-3.5 text-slate-500"})}),i.jsx("div",{className:"font-semibold text-slate-900",children:w}),i.jsx("div",{className:"text-slate-500",children:"Total"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(en,{className:"w-3.5 h-3.5 text-emerald-500"})}),i.jsx("div",{className:"font-semibold text-emerald-600",children:_}),i.jsx("div",{className:"text-slate-500",children:"Entregadas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(Xo,{className:"w-3.5 h-3.5 text-amber-500"})}),i.jsx("div",{className:"font-semibold text-amber-600",children:w-_}),i.jsx("div",{className:"text-slate-500",children:"Pendientes"})]})]}),p.totalGastos>0&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-200 flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-slate-600",children:"Gastos reportados:"}),i.jsxs("span",{className:"font-semibold text-slate-900",children:["$",((P=p.totalGastos)==null?void 0:P.toLocaleString("es-DO"))||"0"]})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-center gap-1",children:[Array.from({length:Math.min(w,10)}).map((U,G)=>{const O=G<_,D=G>=_&&G<_+N;return i.jsx("div",{className:`w-6 h-1 rounded-full transition-all ${O?"bg-emerald-500":D?"bg-rose-400":"bg-slate-300"}`},G)}),w>10&&i.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["+",w-10]})]})]},p.id)})})]}),i.jsx("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-200 text-xs text-slate-500 text-center",children:"Actualizacin automtica en tiempo real"})]})},ZV=({variant:t="base",className:e="",children:r,onClick:n,...a})=>{const s={base:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow duration-200",elevated:"bg-white rounded-xl shadow-lg border border-slate-200",interactive:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-indigo-300 transition-all duration-200 cursor-pointer"};return i.jsx("div",{className:`${s[t]} ${e}`,onClick:n,...a,children:r})},QV=({className:t="",children:e,...r})=>i.jsx("div",{className:`p-6 ${t}`,...r,children:e}),lT=({variant:t="neutral",size:e="md",dot:r=!1,className:n="",children:a,...s})=>{const o="inline-flex items-center font-medium rounded-full",l={success:"bg-emerald-50 text-emerald-700 ring-1 ring-inset ring-emerald-600/20",warning:"bg-amber-50 text-amber-700 ring-1 ring-inset ring-amber-600/20",danger:"bg-rose-50 text-rose-700 ring-1 ring-inset ring-rose-600/20",info:"bg-indigo-50 text-indigo-700 ring-1 ring-inset ring-indigo-600/20",neutral:"bg-slate-50 text-slate-700 ring-1 ring-inset ring-slate-600/20"},c={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-1 text-sm gap-1.5",lg:"px-3 py-1.5 text-base gap-2"},u={success:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-rose-500",info:"bg-indigo-500",neutral:"bg-slate-500"},d={sm:"w-1 h-1",md:"w-1.5 h-1.5",lg:"w-2 h-2"};return i.jsxs("span",{className:`${o} ${l[t]} ${c[e]} ${n}`,...s,children:[r&&i.jsx("span",{className:`${d[e]} ${u[t]} rounded-full`}),a]})},vCe=()=>{const{user:t}=fa(),[e,r]=S.useState([]),[n,a]=S.useState(null),[s,o]=S.useState(null),[l,c]=S.useState(!1),[u,d]=S.useState(!1);S.useEffect(()=>{h()},[t]),S.useEffect(()=>{n&&p(n)},[n]);const h=async()=>{c(!0);try{const _=await t.getIdToken(),N=await fetch("https://proyecto-envios-production.up.railway.app/api/api/contenedores",{headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(N.ok){const j=(await N.json()).contenedores||[];r(j),j.length>0&&!n&&a(j[0].id)}}catch(_){console.error("Error cargando contenedores:",_)}finally{c(!1)}},p=async _=>{d(!0);try{const N=await t.getIdToken(),A=await fetch(`https://proyecto-envios-production.up.railway.app/api/api/dashboard/contenedor/${_}`,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});if(A.ok){const j=await A.json();o(j.contenedor)}}catch(N){console.error("Error cargando estadsticas:",N)}finally{d(!1)}},g=_=>_>=90?"from-emerald-500 to-green-600":_>=70?"from-blue-500 to-indigo-600":_>=40?"from-amber-500 to-orange-600":"from-rose-500 to-red-600",b=_=>({CREADO:"bg-slate-100 text-slate-700",EN_RECOLECCION:"bg-blue-100 text-blue-700",CONFIRMADO:"bg-indigo-100 text-indigo-700",EN_TRANSITO:"bg-purple-100 text-purple-700",EN_ENTREGA:"bg-amber-100 text-amber-700",COMPLETADO:"bg-emerald-100 text-emerald-700"})[_]||"bg-gray-100 text-gray-700",w=_=>({CREADO:"Creado",EN_RECOLECCION:"En Recoleccin",CONFIRMADO:"Confirmado",EN_TRANSITO:"En Trnsito",EN_ENTREGA:"En Entrega",COMPLETADO:"Completado"})[_]||_;return l?i.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(dh,{className:"h-8 w-8 animate-spin text-indigo-600"})})}):e.length===0?i.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Br,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600",children:"No hay contenedores disponibles"})]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:" Selecciona un Contenedor"}),i.jsx("select",{value:n||"",onChange:_=>a(_.target.value),className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-slate-50 font-medium text-slate-800",children:e.map(_=>i.jsxs("option",{value:_.id,children:[_.numeroContenedor," - ",new Date(_.createdAt).toLocaleDateString("es-DO")]},_.id))})]}),u?i.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(dh,{className:"h-8 w-8 animate-spin text-indigo-600"}),i.jsx("span",{className:"ml-3 text-slate-600",children:"Cargando estadsticas..."})]})}):s?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl shadow-2xl p-6 text-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold",children:s.numeroContenedor}),i.jsxs("p",{className:"text-indigo-100 text-sm",children:["Creado: ",new Date(s.fechaCreacion).toLocaleDateString("es-DO")]})]}),i.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${b(s.estado)}`,children:w(s.estado)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium",children:"Progreso General"}),i.jsxs("span",{className:"font-bold",children:[s.progresoGeneral,"%"]})]}),i.jsx("div",{className:"w-full bg-white/20 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:`h-full bg-gradient-to-r ${g(s.progresoGeneral)} transition-all duration-500 rounded-full flex items-center justify-end pr-2`,style:{width:`${s.progresoGeneral}%`},children:s.progresoGeneral>10&&i.jsxs("span",{className:"text-xs font-bold text-white drop-shadow",children:[s.progresoGeneral,"%"]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg",children:i.jsx(Br,{className:"h-6 w-6 text-indigo-600"})}),i.jsx("span",{className:"text-3xl font-bold text-slate-800",children:s.totalFacturas})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Facturas"}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["$",s.valorTotal.toFixed(2)]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg",children:i.jsx(en,{className:"h-6 w-6 text-purple-600"})}),i.jsx("span",{className:"text-3xl font-bold text-purple-600",children:s.facturasConfirmadas})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Confirmadas"}),i.jsx("div",{className:"mt-2 w-full bg-slate-100 rounded-full h-2",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full transition-all duration-500",style:{width:`${s.porcentajeConfirmacion}%`}})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.porcentajeConfirmacion,"% del total"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg",children:i.jsx(as,{className:"h-6 w-6 text-amber-600"})}),i.jsx("span",{className:"text-3xl font-bold text-amber-600",children:s.facturasEnTransito})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"En Trnsito"}),i.jsx("div",{className:"mt-2 w-full bg-slate-100 rounded-full h-2",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-600 rounded-full transition-all duration-500",style:{width:`${s.porcentajeEnTransito}%`}})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.porcentajeEnTransito,"% del total"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-50 to-green-50 rounded-lg",children:i.jsx(en,{className:"h-6 w-6 text-emerald-600"})}),i.jsx("span",{className:"text-3xl font-bold text-emerald-600",children:s.facturasEntregadas})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Entregadas"}),i.jsx("div",{className:"mt-2 w-full bg-slate-100 rounded-full h-2",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-green-600 rounded-full transition-all duration-500",style:{width:`${s.porcentajeEntrega}%`}})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.porcentajeEntrega,"% del total"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:i.jsx(Xo,{className:"h-5 w-5 text-slate-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:s.facturasPendientes}),i.jsx("p",{className:"text-sm text-slate-600",children:"Pendientes"})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(vp,{className:"h-5 w-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-indigo-800",children:s.facturasRecibidasRD}),i.jsx("p",{className:"text-sm text-slate-600",children:"Recibidas en RD"}),i.jsxs("p",{className:"text-xs text-slate-500",children:[s.porcentajeRecibidasRD,"%"]})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-rose-100 rounded-lg",children:i.jsx(Ym,{className:"h-5 w-5 text-rose-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-rose-800",children:s.facturasNoEntregadas}),i.jsx("p",{className:"text-sm text-slate-600",children:"No Entregadas"})]})]})})]}),s.rutas&&s.rutas.length>0&&i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6",children:[i.jsxs("h4",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[i.jsx(as,{className:"h-5 w-5 text-indigo-600"}),"Rutas Asociadas (",s.totalRutas,")"]}),i.jsx("div",{className:"space-y-2",children:s.rutas.map(_=>i.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg border border-slate-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800",children:_.nombre}),i.jsxs("p",{className:"text-xs text-slate-500",children:[_.tipo==="recoleccion"?"Recoleccin":"Entrega","  ",_.totalPaquetes," paquetes"]})]}),i.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:_.estado})]},_.id))})]})]}):null]})},bCe=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=S.useState(0);return S.useEffect(()=>{const c=t/60;let u=0,d=0;const h=setInterval(()=>{d++,u=Math.min(u+c,t),d>=60||u>=t?(s(t),clearInterval(h)):s(u)},1200/60);return()=>clearInterval(h)},[t]),i.jsxs("span",{children:[e,n>0?a.toFixed(n):Math.floor(a).toLocaleString("es-DO"),r]})},yCe=()=>{const{userData:t,loading:e}=fa(),r=$s(),[n,a]=S.useState(null),[s,o]=S.useState(!0),[l,c]=S.useState(null),{data:u}=Nae(),{data:d}=g7();return S.useEffect(()=>{if(!e&&t){const h=t.rol;if(h==="secretaria"){r("/secretarias");return}else if(h==="secretaria_usa"){r("/call-center");return}else if(h==="recolector"){r("/mis-solicitudes");return}else if(h==="repartidor"){r("/rutas");return}else if(h==="cargador"){r("/cargadores");return}else if(h==="almacen_rd"){r("/embarques");return}else if(h==="almacen_eeuu"){r("/almacen-usa");return}if(h!=="admin_general"&&h!=="super_admin"&&h!=="propietario"){r("/");return}}},[t,e]),S.useEffect(()=>{!e&&t&&(async()=>{var p,g,b,w,_,N,A,j,P,U,G,O,D;if(!t||t.rol!=="admin_general"&&t.rol!=="super_admin"){o(!1);return}try{o(!0),c(null);const I=await wt.get("/dashboard/stats");console.log(" Respuesta del backend:",I.data);const V=I.data,R={embarquesActivos:((p=V.embarques)==null?void 0:p.activos)||0,recoleccionesHoy:((g=V.recolecciones)==null?void 0:g.hoy)||0,rutasEnCurso:((b=V.rutas)==null?void 0:b.enCurso)||((w=V.rutas)==null?void 0:w.activas)||0,facturasPendientes:((_=V.facturas)==null?void 0:_.pendientes)||0,totalUsuarios:((N=V.usuarios)==null?void 0:N.total)||0,usuariosActivos:((A=V.usuarios)==null?void 0:A.activos)||0,totalRecolecciones:((j=V.recolecciones)==null?void 0:j.total)||0,totalEmbarques:((P=V.embarques)==null?void 0:P.total)||0,totalRutas:((U=V.rutas)==null?void 0:U.total)||0,totalFacturas:((G=V.facturas)==null?void 0:G.total)||0,facturasEntregadas:((O=V.facturas)==null?void 0:O.entregadas)||0,empresa:V.empresa||null};console.log(" Stats transformadas:",R),a(R)}catch(I){console.error(" Error cargando estadsticas:",I),I.response?I.response.status===401?(c("Sesin expirada. Por favor, inicia sesin nuevamente."),setTimeout(()=>r("/login"),2e3)):I.response.status===403?c("No tienes permisos para ver estas estadsticas."):I.response.status===500?c("Error del servidor. Intenta nuevamente ms tarde."):c(((D=I.response.data)==null?void 0:D.error)||"Error al cargar estadsticas"):I.request?c("Error de conexin. Verifica tu internet e intenta nuevamente."):c(I.message||"Error desconocido al cargar estadsticas")}finally{o(!1)}})()},[t,e]),e?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(z1,{className:"w-12 h-12 text-indigo-600 mx-auto mb-4 animate-pulse"}),i.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando..."})]})}):l?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsx(ZV,{className:"max-w-md",children:i.jsxs(QV,{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Error"}),i.jsx("p",{className:"text-slate-600 mb-6",children:l}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Reintentar"})]})})}):s?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(z1,{className:"w-12 h-12 text-indigo-600 mx-auto mb-4 animate-pulse"}),i.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando estadsticas..."})]})}):n?i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-6 lg:p-8",children:[i.jsxs(Zt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-6 sm:mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-sm",children:i.jsx(z1,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-white",children:["Dashboard - ",(t==null?void 0:t.rol)==="super_admin"?"Super Admin":"Administrador General"]}),i.jsxs("p",{className:"text-sm sm:text-base text-slate-600 dark:text-slate-400",children:["Bienvenido, ",t==null?void 0:t.nombre]})]})]}),n.empresa&&i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsx(lT,{variant:"info",size:"sm",children:n.empresa.nombre}),i.jsxs(lT,{variant:"neutral",size:"sm",children:["Plan: ",n.empresa.plan]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[i.jsx(JV,{title:"Rutas en Curso",value:u.length,subtitle:`Total registradas: ${n.totalRutas||0}`,icon:Fa,color:"amber",realtime:!0,delay:.1}),i.jsx(JV,{title:"Usuarios Activos",value:d.length,subtitle:`Total en sistema: ${n.totalUsuarios||0}`,icon:cd,color:"slate",realtime:!0,delay:.2}),i.jsx(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Estado del Sistema"}),i.jsx("div",{className:"flex items-center gap-2 mb-1",children:i.jsx(lT,{variant:"success",size:"md",dot:!0,children:"Operativo"})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:"Todos los servicios funcionando"})]}),i.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center flex-shrink-0 ml-3 shadow-sm",children:i.jsx(e1,{className:"w-6 h-6 text-white"})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[i.jsx(gCe,{}),i.jsx(xCe,{})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},className:"mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Br,{className:"w-6 h-6 text-indigo-600"}),"Monitoreo de Contenedores"]}),i.jsx(vCe,{})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.9},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center",children:i.jsx(kf,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Accesos Rpidos"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(l5,{title:"Embarques",icon:Br,color:"indigo",onClick:()=>r("/embarques")}),i.jsx(l5,{title:"Almacn USA",icon:N3,color:"indigo",onClick:()=>r("/almacen-usa")}),i.jsx(l5,{title:"Almacn RD",icon:N3,color:"emerald",onClick:()=>r("/almacen-rd")}),i.jsx(l5,{title:"Rutas",icon:as,color:"amber",onClick:()=>r("/rutas")})]})]})]}):i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsx(ZV,{className:"max-w-md",children:i.jsxs(QV,{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Sin Datos"}),i.jsx("p",{className:"text-slate-600",children:"No hay estadsticas disponibles en este momento."})]})})})},JV=({title:t,value:e,subtitle:r,icon:n,color:a,realtime:s=!1,delay:o=0})=>{const l={indigo:{bg:"bg-indigo-50",text:"text-indigo-600",iconBg:"bg-gradient-to-br from-indigo-500 to-indigo-600"},emerald:{bg:"bg-emerald-50",text:"text-emerald-600",iconBg:"bg-gradient-to-br from-emerald-500 to-emerald-600"},amber:{bg:"bg-amber-50",text:"text-amber-600",iconBg:"bg-gradient-to-br from-amber-500 to-amber-600"},rose:{bg:"bg-rose-50",text:"text-rose-600",iconBg:"bg-gradient-to-br from-rose-500 to-rose-600"},slate:{bg:"bg-slate-50",text:"text-slate-600",iconBg:"bg-gradient-to-br from-slate-500 to-slate-600"}},c=l[a]||l.indigo;return i.jsx(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow relative",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),s&&i.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 dark:bg-emerald-900/30 rounded-md",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:"En vivo"})]})]}),i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-1",children:i.jsx(bCe,{value:e})}),r&&i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:r})]}),i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ml-3 shadow-sm ${c.iconBg}`,children:n&&i.jsx(n,{className:"w-6 h-6 text-white"})})]})})},l5=({title:t,icon:e,color:r,onClick:n})=>{const a={indigo:{bg:"bg-indigo-50 dark:bg-indigo-900/20",hover:"hover:bg-indigo-100 dark:hover:bg-indigo-900/40",text:"text-indigo-600 dark:text-indigo-400",iconBg:"bg-indigo-100 dark:bg-indigo-800",border:"hover:border-indigo-200 dark:hover:border-indigo-700"},emerald:{bg:"bg-emerald-50 dark:bg-emerald-900/20",hover:"hover:bg-emerald-100 dark:hover:bg-emerald-900/40",text:"text-emerald-600 dark:text-emerald-400",iconBg:"bg-emerald-100 dark:bg-emerald-800",border:"hover:border-emerald-200 dark:hover:border-emerald-700"},amber:{bg:"bg-amber-50 dark:bg-amber-900/20",hover:"hover:bg-amber-100 dark:hover:bg-amber-900/40",text:"text-amber-600 dark:text-amber-400",iconBg:"bg-amber-100 dark:bg-amber-800",border:"hover:border-amber-200 dark:hover:border-amber-700"},slate:{bg:"bg-slate-50 dark:bg-slate-700/50",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",text:"text-slate-600 dark:text-slate-400",iconBg:"bg-slate-100 dark:bg-slate-600",border:"hover:border-slate-200 dark:hover:border-slate-600"}},s=a[r]||a.indigo;return i.jsxs("button",{onClick:n,className:`${s.bg} ${s.hover} ${s.text} rounded-xl p-4 transition-all duration-200 flex flex-col items-center justify-center gap-3 min-h-[100px] border border-transparent ${s.border} hover:shadow-sm group`,children:[i.jsx("div",{className:`${s.iconBg} w-12 h-12 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-200`,children:e&&i.jsx(e,{className:"w-6 h-6"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:t})]})},e$="https://proyecto-envios-production.up.railway.app/api",wCe=()=>{const t=$s(),[e,r]=S.useState(null),[n,a]=S.useState([]),[s,o]=S.useState({totalUsers:0,totalCompanies:0,activeCompanies:0,inactiveCompanies:0}),[l,c]=S.useState(!0),[u,d]=S.useState(null);S.useEffect(()=>{h(),p()},[]),S.useEffect(()=>{n.length>0&&g()},[n]);const h=async()=>{try{const N=await(await fetch(`${e$}/health`)).json();r(N)}catch(_){console.error("Error checking health:",_),r({status:"ERROR",error:_.message})}},p=async()=>{c(!0),d(null);try{const _=await wt.get("/companies");if(_.data.success)a(_.data.data||[]);else throw new Error(_.data.error||"Error al cargar compaas")}catch(_){console.error("Error cargando compaas:",_),d(_.message),a([])}finally{c(!1)}},g=async()=>{var _,N,A;try{const j=await wt.get("/empleados").catch(()=>({data:[]})),P=n.filter(G=>G==null?void 0:G.activo).length,U=n.filter(G=>!(G!=null&&G.activo)).length;o({totalUsers:((N=(_=j.data)==null?void 0:_.data)==null?void 0:N.length)||((A=j.data)==null?void 0:A.length)||0,totalCompanies:n.length,activeCompanies:P,inactiveCompanies:U})}catch(j){console.error(" Error fetching stats:",j)}},b=_=>_==="OK"?"bg-emerald-500":_==="ERROR"?"bg-rose-500":"bg-amber-500",w=_=>_==="OK"?"Sistema Operativo":_==="ERROR"?"Sistema Cado":"Verificando...";return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Monitor del Sistema"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Panel de control y administracin del sistema Multi-Tenant"})]}),u&&i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border-l-4 border-rose-400 dark:border-rose-600 p-4 mb-6",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-rose-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-rose-700 dark:text-rose-200",children:[i.jsx("strong",{children:"Error:"})," ",u]})})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white",children:[i.jsx(z1,{className:"inline mr-2",size:20}),"Estado de Servicios"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Backend API"}),i.jsx("p",{className:"text-lg font-semibold mt-1 text-slate-900 dark:text-white",children:e?w(e.status):"Verificando..."})]}),i.jsx("div",{className:`w-4 h-4 rounded-full ${e?b(e.status):"bg-slate-300 dark:bg-slate-600"}`})]}),(e==null?void 0:e.uptime)&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[" Uptime: ",Math.floor(e.uptime/60)," min"]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[" ",e$]})]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Firebase/Firestore"}),i.jsx("p",{className:"text-lg font-semibold mt-1 text-slate-900 dark:text-white",children:"Operativo"})]}),i.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500"})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:" Conexin estable"})]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Autenticacin"}),i.jsx("p",{className:"text-lg font-semibold mt-1 text-slate-900 dark:text-white",children:"Operativo"})]}),i.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500"})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:" Firebase Auth activo"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsx("div",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Compaas Totales"}),i.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-1",children:s.totalCompanies}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"En el sistema"})]}),i.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900 rounded-full",children:i.jsx(tp,{className:"text-indigo-600 dark:text-indigo-300",size:24})})]})}),i.jsx("div",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Compaas Activas"}),i.jsx("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-1",children:s.activeCompanies}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Operando"})]}),i.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900 rounded-full",children:i.jsx(en,{className:"text-emerald-600 dark:text-emerald-300",size:24})})]})}),i.jsx("div",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Compaas Inactivas"}),i.jsx("p",{className:"text-3xl font-bold text-rose-600 dark:text-rose-400 mt-1",children:s.inactiveCompanies}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Desactivadas"})]}),i.jsx("div",{className:"p-3 bg-rose-100 dark:bg-rose-900 rounded-full",children:i.jsx(ms,{className:"text-rose-600 dark:text-rose-300",size:24})})]})}),i.jsx("div",{onClick:()=>t("/empleados"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Usuarios Totales"}),i.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-1",children:s.totalUsers}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"En todas las compaas"})]}),i.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-full",children:i.jsx(cd,{className:"text-purple-600 dark:text-purple-300",size:24})})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:[i.jsx(tp,{className:"inline mr-2",size:20}),"Compaas Registradas"]}),i.jsx("button",{onClick:()=>t("/companies"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm",children:"Ver todas "})]}),l?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando compaas..."})]}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(tp,{className:"mx-auto text-slate-400 dark:text-slate-600 mb-3",size:48}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay compaas registradas"}),i.jsx("button",{onClick:()=>t("/companies"),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Crear Primera Compaa"})]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Compaa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Plan"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Creada"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Admin"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.slice(0,5).map(_=>i.jsxs("tr",{onClick:()=>t("/companies"),className:"hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:_.nombre||"Sin nombre"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:_.id})]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_.plan==="enterprise"?"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200":_.plan==="premium"?"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"}`,children:_.plan||"basic"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_.activo?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"}`,children:_.activo?" Activa":" Inactiva"})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:_.fechaCreacion?new Date(_.fechaCreacion.toDate?_.fechaCreacion.toDate():_.fechaCreacion).toLocaleDateString():"N/A"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:_.adminEmail||"N/A"})]},_.id))})]}),n.length>5&&i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{onClick:()=>t("/companies"),className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:["Ver todas las ",n.length," compaas "]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white",children:[i.jsx(ms,{className:"inline mr-2",size:20}),"Alertas del Sistema"]}),i.jsxs("div",{className:"space-y-3",children:[(e==null?void 0:e.status)==="ERROR"&&i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border-l-4 border-rose-400 dark:border-rose-600 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-rose-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-rose-700 dark:text-rose-200",children:[i.jsx("strong",{children:"Backend API cado:"})," ",e.error]})})]})}),s.inactiveCompanies>0&&i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-400 dark:border-amber-600 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-amber-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-200",children:[i.jsx("strong",{children:"Compaas inactivas:"})," ",s.inactiveCompanies," compaa",s.inactiveCompanies!==1?"s":""," desactivada",s.inactiveCompanies!==1?"s":""]})})]})}),(e==null?void 0:e.status)==="OK"&&s.inactiveCompanies===0&&i.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border-l-4 border-emerald-400 dark:border-emerald-600 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-emerald-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-emerald-700 dark:text-emerald-200",children:[i.jsx("strong",{children:"Todo operativo:"})," No se detectaron problemas en el sistema"]})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsxs("button",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx(tp,{className:"text-indigo-600 dark:text-indigo-400 mb-3",size:32}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Gestionar Compaas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra todas las compaas del sistema"})]}),i.jsxs("button",{onClick:()=>t("/empleados"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx(cd,{className:"text-emerald-600 dark:text-emerald-400 mb-3",size:32}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Ver Usuarios"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revisa todos los usuarios del sistema"})]}),i.jsxs("button",{onClick:()=>t("/tickets-admin"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx(ms,{className:"text-purple-600 dark:text-purple-400 mb-3",size:32}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Tickets de Soporte"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revisa y responde tickets de ayuda"})]})]})]})},XN=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=S.useState(0);return S.useEffect(()=>{const c=t/60;let u=0,d=0;const h=setInterval(()=>{d++,u=Math.min(u+c,t),d>=60||u>=t?(s(t),clearInterval(h)):s(u)},1200/60);return()=>clearInterval(h)},[t]),i.jsxs("span",{children:[e,n>0?a.toFixed(n):Math.floor(a).toLocaleString("es-DO"),r]})},_Ce=()=>{const{userData:t,loading:e}=fa(),r=$s(),[n,a]=S.useState(null),[s,o]=S.useState(!0),[l,c]=S.useState(null),[u,d]=S.useState([]),[h,p]=S.useState(null),[g,b]=S.useState(null),[w,_]=S.useState([]),[N,A]=S.useState(null),[j,P]=S.useState(null);return S.useEffect(()=>{!e&&t&&(async()=>{var G,O,D,I,V,R,B,F,ee,Z,ce,ne,ae,me,Ee,ye,H,Y,X,re,se,ke,Ce,xe,Ie,He,Ue,Me,Be,be,Vt,ht,Lt,et,Jt,Ve,Ft,qt,Wt,nr,Xe,Kt,kt,pt,Ot,Ut,Nr,or,lt,lr,ve;if(!(!t||t.rol!=="propietario"&&t.rol!=="super_admin"))try{o(!0),c(null);const Ze=await wt.get("/dashboard/propietario");console.log(" Dashboard Ejecutivo:",Ze.data);const at=Ze.data.data,Qe={totalContenedores:((G=at.contenedores)==null?void 0:G.total)||0,contenedoresUSA:((O=at.contenedores)==null?void 0:O.enUSA)||0,contenedoresRD:((D=at.contenedores)==null?void 0:D.enRD)||0,contenedoresTransito:((I=at.contenedores)==null?void 0:I.enTransito)||0,contenedoresTrabajados:((V=at.contenedores)==null?void 0:V.trabajados)||0,porcentajeTrabajados:((R=at.contenedores)==null?void 0:R.porcentajeTrabajados)||0,porcentajeConfirmacion:((F=(B=at.contenedores)==null?void 0:B.facturas)==null?void 0:F.porcentajeConfirmacion)||0,porcentajeEntregaContenedores:((Z=(ee=at.contenedores)==null?void 0:ee.facturas)==null?void 0:Z.porcentajeEntrega)||0,facturasConfirmadas:((ne=(ce=at.contenedores)==null?void 0:ce.facturas)==null?void 0:ne.confirmadas)||0,totalFacturasContenedor:((me=(ae=at.contenedores)==null?void 0:ae.facturas)==null?void 0:me.total)||0,rutasActivas:((Ee=at.rutas)==null?void 0:Ee.activas)||0,rutasCompletadas:((ye=at.rutas)==null?void 0:ye.completadas)||0,rutasPendientes:((H=at.rutas)==null?void 0:H.pendientes)||0,totalRutas:((Y=at.rutas)==null?void 0:Y.total)||0,porcentajeEntregaRutas:((re=(X=at.rutas)==null?void 0:X.eficiencia)==null?void 0:re.porcentajeEntrega)||0,facturasEnRutas:((ke=(se=at.rutas)==null?void 0:se.eficiencia)==null?void 0:ke.totalFacturas)||0,facturasEntregadasRutas:((xe=(Ce=at.rutas)==null?void 0:Ce.eficiencia)==null?void 0:xe.entregadas)||0,totalFacturas:((Ie=at.facturas)==null?void 0:Ie.total)||0,facturasEntregadas:((He=at.facturas)==null?void 0:He.entregadas)||0,facturasPendientes:((Ue=at.facturas)==null?void 0:Ue.pendientes)||0,facturasNoEntregadas:((Me=at.facturas)==null?void 0:Me.noEntregadas)||0,facturasEnRuta:((Be=at.facturas)==null?void 0:Be.enRuta)||0,porcentajeEntrega:((be=at.facturas)==null?void 0:be.porcentajeEntrega)||0,totalNoEntregadas:((Vt=at.noEntregadas)==null?void 0:Vt.total)||0,reincidencias:((ht=at.noEntregadas)==null?void 0:ht.reincidencias)||0,porcentajeReincidencia:((Lt=at.noEntregadas)==null?void 0:Lt.porcentajeReincidencia)||0,motivosNoEntrega:((et=at.noEntregadas)==null?void 0:et.motivos)||[],solicitudesTotal:((Jt=at.solicitudes)==null?void 0:Jt.total)||0,solicitudesPendientes:((Ve=at.solicitudes)==null?void 0:Ve.pendientes)||0,solicitudesAsignadas:((Ft=at.solicitudes)==null?void 0:Ft.asignadas)||0,solicitudesCompletadas:((qt=at.solicitudes)==null?void 0:qt.completadas)||0,solicitudesHoy:((Wt=at.solicitudes)==null?void 0:Wt.solicitudesHoy)||0,solicitudesAsignacionManual:((nr=at.solicitudes)==null?void 0:nr.asignacionManual)||0,solicitudesAsignacionAuto:((Xe=at.solicitudes)==null?void 0:Xe.asignacionAuto)||0,porcentajeSolicitudesCompletadas:((Kt=at.solicitudes)==null?void 0:Kt.porcentajeCompletadas)||0,cobrosFinanzas:((pt=(kt=at.finanzas)==null?void 0:kt.mes)==null?void 0:pt.cobros)||0,gastosFinanzas:((Ut=(Ot=at.finanzas)==null?void 0:Ot.mes)==null?void 0:Ut.gastos)||0,balanceFinanzas:((or=(Nr=at.finanzas)==null?void 0:Nr.mes)==null?void 0:or.balance)||0,embarquesActivos:0,rutasEnCurso:((lt=at.rutas)==null?void 0:lt.activas)||0,totalEmbarques:0,empresa:null};a(Qe)}catch(Ze){console.error(" Error cargando dashboard ejecutivo:",Ze),c(((ve=(lr=Ze.response)==null?void 0:lr.data)==null?void 0:ve.error)||"Error al cargar dashboard")}finally{o(!1)}})()},[t,e]),S.useEffect(()=>{!e&&t&&(async()=>{if(t)try{const G=await wt.get("/contenedores");G.data.success&&d(G.data.data)}catch(G){console.error("Error cargando contenedores:",G)}})()},[t,e]),S.useEffect(()=>{(async()=>{if(!h){b(null);return}try{const G=await wt.get(`/dashboard/contenedor/${h}`);G.data.success&&b(G.data.contenedor)}catch(G){console.error("Error cargando stats de contenedor:",G)}})()},[h]),S.useEffect(()=>{!e&&t&&(async()=>{if(t)try{const G=await wt.get("/rutas");G.data.success&&_(G.data.data)}catch(G){console.error("Error cargando rutas:",G)}})()},[t,e]),S.useEffect(()=>{(async()=>{if(!N){P(null);return}try{const G=await wt.get(`/dashboard/ruta/${N}`);G.data.success&&P(G.data.data)}catch(G){console.error("Error cargando stats de ruta:",G)}})()},[N]),e||s?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando tu dashboard..."})]})}):l?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-rose-50 to-white dark:from-slate-900 dark:to-slate-800",children:i.jsxs(Zt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-rose-200 dark:border-rose-900 p-8 max-w-md",children:[i.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(bi,{className:"w-8 h-8 text-rose-600 dark:text-rose-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2 text-center",children:"Error"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6 text-center",children:l}),i.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Reintentar"})]})}):n?i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-4 sm:p-6 lg:p-8",children:[i.jsx(Zt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:["Bienvenido, ",t==null?void 0:t.nombre]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"Vista general de tu operacin empresarial"})]}),n.empresa&&i.jsxs(Zt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"flex items-center gap-3 bg-white dark:bg-slate-800 rounded-xl px-6 py-4 shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(Br,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tu Empresa"}),i.jsx("p",{className:"font-bold text-lg text-slate-900 dark:text-white",children:n.empresa.nombre}),i.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:["Plan: ",n.empresa.plan]})]})]})]})}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center",children:[i.jsx(Br,{className:"w-6 h-6 mr-2 text-indigo-600"}),"Contenedores"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:h||"",onChange:U=>p(U.target.value||null),className:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",children:[i.jsx("option",{value:"",children:" Todos los contenedores"}),u.map(U=>i.jsxs("option",{value:U.id,children:[" ",U.numeroContenedor," - ",U.estado]},U.id))]}),h&&i.jsx("button",{onClick:()=>p(null),className:"px-3 py-2 text-sm bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Ver todos"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[i.jsx(mo,{title:h?"Facturas en Contenedor":"Total Contenedores",value:g?g.totalFacturas:n.totalContenedores,total:g?g.totalFacturas:n.totalContenedores,icon:Br,gradient:"from-indigo-500 to-purple-500",delay:.1}),i.jsx(mo,{title:h?"Confirmadas":"En USA",value:g?g.facturasConfirmadas:n.contenedoresUSA,total:g?g.totalFacturas:n.totalContenedores,icon:g?e1:N3,gradient:"from-blue-500 to-cyan-500",delay:.2}),i.jsx(mo,{title:h?"Entregadas":"En RD",value:g?g.facturasEntregadas:n.contenedoresRD,total:g?g.totalFacturas:n.totalContenedores,icon:e1,gradient:"from-emerald-500 to-teal-500",delay:.3}),i.jsx(mo,{title:"% Entrega",value:g?g.porcentajeEntrega:n.porcentajeEntregaContenedores||0,total:100,icon:kf,gradient:"from-emerald-500 to-green-500",delay:.4,isPercentage:!0}),i.jsx(mo,{title:"% Confirmacin",value:g?g.porcentajeConfirmacion:n.porcentajeConfirmacion,total:100,icon:e1,gradient:"from-purple-500 to-pink-500",delay:.5,isPercentage:!0})]})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center",children:[i.jsx(as,{className:"w-6 h-6 mr-2 text-emerald-600"}),"Rutas y Entregas"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:N||"",onChange:U=>A(U.target.value||null),className:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",children:[i.jsx("option",{value:"",children:" Todas las rutas"}),w.map(U=>i.jsxs("option",{value:U.id,children:[" ",U.nombre||U.id," - ",U.estado]},U.id))]}),N&&i.jsx("button",{onClick:()=>A(null),className:"px-3 py-2 text-sm bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Ver todas"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(mo,{title:N?"Facturas en Ruta":"Rutas Activas",value:j?j.totalFacturas:n.rutasActivas,total:j?j.totalFacturas:n.totalRutas,icon:as,gradient:"from-emerald-500 to-teal-500",delay:.1,onClick:()=>!j&&r("/reportes")}),i.jsx(mo,{title:N?"Entregadas":"Completadas",value:j?j.facturasEntregadas:n.rutasCompletadas,total:j?j.totalFacturas:n.totalRutas,icon:e1,gradient:"from-blue-500 to-indigo-500",delay:.2}),i.jsx(mo,{title:"% Entrega",value:j?j.porcentajeEntrega:n.porcentajeEntregaRutas,total:100,icon:kf,gradient:"from-indigo-500 to-purple-500",delay:.3,isPercentage:!0}),i.jsx(mo,{title:"Facturas Pendientes",value:j?j.facturasPendientes:n.facturasPendientes,total:j?j.totalFacturas:n.totalFacturas,icon:Xo,gradient:"from-amber-500 to-orange-500",delay:.4})]})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center",children:[i.jsx(Yl,{className:"w-6 h-6 mr-2 text-indigo-600"}),"Solicitudes de Recoleccin"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[i.jsx(mo,{title:"Total Solicitudes",value:n.solicitudesTotal,total:n.solicitudesTotal,icon:Q4e,gradient:"from-indigo-500 to-purple-500",delay:.1,onClick:()=>r("/solicitudes")}),i.jsx(mo,{title:"Pendientes",value:n.solicitudesPendientes,total:n.solicitudesTotal,icon:Xo,gradient:"from-amber-500 to-orange-500",delay:.2,onClick:()=>r("/solicitudes")}),i.jsx(mo,{title:"Asignadas",value:n.solicitudesAsignadas,total:n.solicitudesTotal,icon:as,gradient:"from-blue-500 to-cyan-500",delay:.3}),i.jsx(mo,{title:"Completadas",value:n.solicitudesCompletadas,total:n.solicitudesTotal,icon:e1,gradient:"from-emerald-500 to-teal-500",delay:.4}),i.jsx(mo,{title:"Hoy",value:n.solicitudesHoy,total:n.solicitudesTotal,icon:z1,gradient:"from-purple-500 to-pink-500",delay:.5})]}),(n.solicitudesAsignacionManual>0||n.solicitudesAsignacionAuto>0)&&i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Zt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-4 border border-indigo-100 dark:border-indigo-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:"Asignacin Manual (Secretaria)"}),i.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100 mt-1",children:n.solicitudesAsignacionManual})]}),i.jsx("div",{className:"w-12 h-12 bg-indigo-200 dark:bg-indigo-800 rounded-full flex items-center justify-center",children:i.jsx(vl,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-300"})})]})}),i.jsx(Zt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},className:"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-4 border border-emerald-100 dark:border-emerald-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-medium",children:"Auto-Asignacin (Recolector)"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100 mt-1",children:n.solicitudesAsignacionAuto})]}),i.jsx("div",{className:"w-12 h-12 bg-emerald-200 dark:bg-emerald-800 rounded-full flex items-center justify-center",children:i.jsx(kf,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-300"})})]})})]})]}),n.totalNoEntregadas>0&&i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"mb-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center",children:[i.jsx(bi,{className:"w-6 h-6 mr-2 text-rose-600"}),"Anlisis de No Entregadas"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsx(mo,{title:"Total No Entregadas",value:n.totalNoEntregadas,total:n.totalFacturas,icon:bi,gradient:"from-rose-500 to-pink-500",delay:.1}),i.jsx(mo,{title:"Reincidencias",value:n.reincidencias,total:n.totalNoEntregadas,icon:z1,gradient:"from-amber-500 to-orange-500",delay:.2}),i.jsx(mo,{title:"% Reincidencia",value:n.porcentajeReincidencia,total:100,icon:vp,gradient:"from-red-500 to-rose-500",delay:.3,isPercentage:!0})]}),n.motivosNoEntrega&&n.motivosNoEntrega.length>0&&i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Motivos de No Entrega"}),i.jsx("div",{className:"space-y-4",children:n.motivosNoEntrega.map((U,G)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:U.motivo}),i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[U.count," (",U.porcentaje,"%)"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${U.porcentaje}%`},transition:{duration:1,delay:.5+G*.1},className:"bg-gradient-to-r from-rose-500 to-pink-500 h-2 rounded-full"})})]},G))})]})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"mb-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center",children:[i.jsx(Ul,{className:"w-6 h-6 mr-2 text-emerald-600"}),"Resumen Financiero del Mes"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Cobros"}),i.jsx("h3",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:i.jsx(XN,{value:n.cobrosFinanzas,prefix:"USD$ "})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Ingresos del mes"})]}),i.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center shadow-lg",children:i.jsx(kf,{className:"w-7 h-7 text-white"})})]})}),i.jsx(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Gastos"}),i.jsx("h3",{className:"text-3xl font-bold text-rose-600 dark:text-rose-400",children:i.jsx(XN,{value:n.gastosFinanzas,prefix:"USD$ "})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Egresos del mes"})]}),i.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-rose-500 to-pink-500 flex items-center justify-center shadow-lg",children:i.jsx(vp,{className:"w-7 h-7 text-white"})})]})}),i.jsx(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Balance"}),i.jsx("h3",{className:`text-3xl font-bold ${n.balanceFinanzas>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:i.jsx(XN,{value:n.balanceFinanzas,prefix:"USD$ "})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:n.balanceFinanzas>=0?"Ganancia":"Prdida"})]}),i.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${n.balanceFinanzas>=0?"from-emerald-500 to-teal-500":"from-rose-500 to-red-500"} flex items-center justify-center shadow-lg`,children:i.jsx(Ul,{className:"w-7 h-7 text-white"})})]})})]})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 p-6 sm:p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(kf,{className:"w-5 h-5 text-white"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Accesos Rpidos"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(c5,{title:"Finanzas",description:"Ver mtricas",icon:Ul,gradient:"from-emerald-500 to-teal-500",onClick:()=>r("/finanzas")}),i.jsx(c5,{title:"Reportes",description:"Anlisis completo",icon:vp,gradient:"from-indigo-500 to-purple-500",onClick:()=>r("/reportes")}),i.jsx(c5,{title:"Embarques",description:"Gestionar envos",icon:N3,gradient:"from-blue-500 to-cyan-500",onClick:()=>r("/embarques")}),i.jsx(c5,{title:"Rutas",description:"Ver entregas",icon:as,gradient:"from-amber-500 to-orange-500",onClick:()=>r("/rutas")})]})]})]}):null},mo=({title:t,value:e,total:r,icon:n,gradient:a,delay:s,onClick:o,isPercentage:l=!1})=>{const c=l?e:r>0?Math.round(e/r*100):0,u=e;return i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:s},whileHover:{scale:1.02,y:-5},onClick:o,className:`bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 ${o?"cursor-pointer":""} hover:shadow-xl transition-all`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:t}),i.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:i.jsx(XN,{value:u,suffix:l?"%":""})}),!l&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["de ",r," totales"]})]}),i.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${a} flex items-center justify-center shadow-lg`,children:i.jsx(n,{className:"w-7 h-7 text-white"})})]}),i.jsx("div",{className:"relative h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${c}%`},transition:{duration:1,delay:s+.3},className:`h-full bg-gradient-to-r ${a}`})}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2 text-right",children:[c,"%"]})]})},c5=({title:t,description:e,icon:r,gradient:n,onClick:a})=>i.jsxs(Zt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex flex-col items-center justify-center p-6 bg-gradient-to-br from-slate-50 to-white dark:from-slate-700 dark:to-slate-800 rounded-xl border-2 border-transparent hover:border-indigo-200 dark:hover:border-indigo-800 transition-all group",children:[i.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${n} flex items-center justify-center mb-3 shadow-lg group-hover:shadow-xl transition-shadow`,children:i.jsx(r,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-1",children:t}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 text-center",children:e})]}),NCe=()=>{const{userData:t}=fa(),e=$s(),[r,n]=S.useState([]),[a,s]=S.useState(!0),[o,l]=S.useState(!1),[c,u]=S.useState("create"),[d,h]=S.useState(null),[p,g]=S.useState({nombre:"",adminEmail:"",adminPassword:"",telefono:"",supportPhone:"",direccion:"",plan:"operativo",emailConfig:{service:"gmail",user:"",pass:"",from:""},invoiceDesign:{logoUrl:"",primaryColor:"#1976D2",secondaryColor:"#f5f5f5",template:"modern",headerText:"Gracias por su preferencia",footerText:""}}),[b,w]=S.useState(!1),[_,N]=S.useState(null),[A,j]=S.useState(""),[P,U]=S.useState(!1);S.useEffect(()=>{(t==null?void 0:t.rol)==="super_admin"&&G()},[t]);const G=async()=>{try{s(!0);const ne=await wt.get("/companies");if(ne.data.success)n(ne.data.data||[]);else throw new Error(ne.data.error||"Error al cargar compaas")}catch(ne){console.error(" Error cargando compaas:",ne),n([]),alert("Error al cargar compaas")}finally{s(!1)}},O=async ne=>{var ae,me;ne.preventDefault();try{await wt.post("/companies",p),alert("Compaa y administrador creados exitosamente"),l(!1),ee(),G()}catch(Ee){console.error("Error:",Ee),alert(((me=(ae=Ee.response)==null?void 0:ae.data)==null?void 0:me.error)||"Error al crear compaa")}},D=async ne=>{var ae,me;ne.preventDefault();try{await wt.put(`/companies/${d.id}`,{nombre:p.nombre,telefono:p.telefono,supportPhone:p.supportPhone,direccion:p.direccion,plan:p.plan,emailConfig:p.emailConfig,invoiceDesign:p.invoiceDesign}),alert("Compaa actualizada exitosamente"),l(!1),ee(),G()}catch(Ee){console.error("Error:",Ee),alert(((me=(ae=Ee.response)==null?void 0:ae.data)==null?void 0:me.error)||"Error al actualizar compaa")}},I=async(ne,ae)=>{var me,Ee;if(confirm(`Ests seguro de ${ae?"desactivar":"activar"} esta compaa?`))try{await wt.patch(`/companies/${ne}/toggle`),alert("Estado de compaa actualizado"),G()}catch(ye){console.error("Error:",ye),alert(((Ee=(me=ye.response)==null?void 0:me.data)==null?void 0:Ee.error)||"Error al cambiar estado")}},V=async ne=>{var ae,me;if(ne.preventDefault(),!_||!A){alert("Contrasea requerida");return}if(confirm(` ADVERTENCIA CRTICA

Ests ABSOLUTAMENTE SEGURO de eliminar "${_.nombre}"?

Esto eliminar PERMANENTEMENTE:
- Todos los usuarios de la compaa
- Todos los embarques y facturas
- Todas las rutas y entregas
- Todo el historial

ESTA ACCIN NO SE PUEDE DESHACER`))try{U(!0);const{signInWithEmailAndPassword:Ee}=await qf(async()=>{const{signInWithEmailAndPassword:Y}=await Promise.resolve().then(()=>t2e);return{signInWithEmailAndPassword:Y}},void 0),{auth:ye}=await qf(async()=>{const{auth:Y}=await Promise.resolve().then(()=>rNe);return{auth:Y}},void 0);try{await Ee(ye,t.email,A)}catch{alert(" Contrasea incorrecta"),U(!1);return}const H=await wt.delete(`/companies/${_.id}`);alert(` ${H.data.message}

Eliminados:
- ${H.data.stats.usuarios} usuarios
- ${H.data.stats.embarques} embarques
- ${H.data.stats.rutas} rutas
- ${H.data.stats.facturas} facturas
- ${H.data.stats.gastos} gastos`),w(!1),N(null),j(""),G()}catch(Ee){console.error("Error:",Ee),alert(((me=(ae=Ee.response)==null?void 0:ae.data)==null?void 0:me.error)||"Error al eliminar compaa")}finally{U(!1)}},R=()=>{u("create"),ee(),l(!0)},B=ne=>{u("edit"),h(ne),g({nombre:ne.nombre,adminEmail:ne.adminEmail,adminPassword:"",telefono:ne.telefono||"",supportPhone:ne.supportPhone||"",direccion:ne.direccion||"",plan:ne.plan||"operativo",emailConfig:ne.emailConfig||{service:"gmail",user:"",pass:"",from:""},invoiceDesign:ne.invoiceDesign||{logoUrl:"",primaryColor:"#1976D2",secondaryColor:"#f5f5f5",template:"modern",headerText:"Gracias por su preferencia",footerText:""}}),l(!0)},F=ne=>{N(ne),j(""),w(!0)},ee=()=>{g({nombre:"",adminEmail:"",adminPassword:"",telefono:"",supportPhone:"",direccion:"",plan:"operativo",emailConfig:{service:"gmail",user:"",pass:"",from:""},invoiceDesign:{logoUrl:"",primaryColor:"#1976D2",secondaryColor:"#f5f5f5",template:"modern",headerText:"Gracias por su preferencia",footerText:""}}),h(null)},Z=ne=>{const ae={operativo:"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200",automatizado:"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200",smart:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200"};return ae[ne]||ae.operativo},ce=ne=>({operativo:"Plan Operativo",automatizado:"Plan Automatizado",smart:"Plan Smart Logistics"})[ne]||"Plan Operativo";return(t==null?void 0:t.rol)!=="super_admin"?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"bg-rose-100 border border-rose-400 text-rose-700 px-4 py-3 rounded",children:[i.jsx("p",{className:"font-bold",children:"Acceso Denegado"}),i.jsx("p",{className:"text-sm",children:"Solo los Super Administradores pueden gestionar compaas."})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Gestin de Compaas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Administra las compaas del sistema Multi-Tenant"})]}),i.jsx("button",{onClick:R,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium",children:"+ Nueva Compaa"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:a?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando compaas..."})]}):r.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg mb-4",children:"No hay compaas registradas"}),i.jsx("button",{onClick:R,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Crear Primera Compaa"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Compaa"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Plan"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Estado"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Creacin"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Admin Email"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r.map(ne=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:ne.nombre||"Sin nombre"}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["ID: ",ne.id]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Z(ne.plan)}`,children:ce(ne.plan)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ne.activo?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"}`,children:ne.activo?" Activa":" Inactiva"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:ne.fechaCreacion?new Date(ne.fechaCreacion.toDate?ne.fechaCreacion.toDate():ne.fechaCreacion).toLocaleDateString():"N/A"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:ne.adminEmail||"N/A"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex justify-end gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>e(`/companies/${ne.id}/features`),className:"text-purple-600 dark:text-purple-400 hover:text-purple-900 dark:hover:text-purple-300 font-medium",children:" Features"}),i.jsx("button",{onClick:()=>B(ne),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300",children:"Editar"}),i.jsx("button",{onClick:()=>I(ne.id,ne.activo),className:`${ne.activo?"text-amber-600 dark:text-amber-400 hover:text-amber-900 dark:hover:text-amber-300":"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300"}`,children:ne.activo?"Desactivar":"Activar"}),i.jsx("button",{onClick:()=>F(ne),className:"text-rose-600 dark:text-rose-400 hover:text-rose-900 dark:hover:text-rose-300",children:"Eliminar"})]})})]},ne.id))})]})})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white",children:c==="create"?"Crear Nueva Compaa":"Editar Compaa"}),i.jsxs("form",{onSubmit:c==="create"?O:D,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nombre de la Compaa *"}),i.jsx("input",{type:"text",required:!0,value:p.nombre,onChange:ne=>g({...p,nombre:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Embarques Ivn"}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Se generar un ID automtico: ",p.nombre.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email del Administrador *"}),i.jsx("input",{type:"email",required:!0,value:p.adminEmail,onChange:ne=>g({...p,adminEmail:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"admin@embarquesivn.com",disabled:c==="edit"})]}),c==="create"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contrasea del Administrador *"}),i.jsx("input",{type:"password",required:!0,value:p.adminPassword,onChange:ne=>g({...p,adminPassword:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Mnimo 6 caracteres",minLength:6}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:" Esta ser la contrasea para que el administrador inicie sesin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telfono"}),i.jsx("input",{type:"tel",value:p.telefono,onChange:ne=>g({...p,telefono:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"(809) 123-4567"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telfono de Soporte (Bot Handoff)"}),i.jsx("input",{type:"tel",value:p.supportPhone,onChange:ne=>g({...p,supportPhone:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"5215512345678 (Sin smbolos)"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:' Este nmero se enviar cuando el usuario pida "Ayuda" o "Soporte" en WhatsApp.'})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Direccin"}),i.jsx("input",{type:"text",value:p.direccion,onChange:ne=>g({...p,direccion:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Santo Domingo, Repblica Dominicana"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Plan *"}),i.jsxs("select",{required:!0,value:p.plan,onChange:ne=>g({...p,plan:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"operativo",children:"Plan Operativo (RD$ 50,000/mes)"}),i.jsx("option",{value:"automatizado",children:"Plan Automatizado (RD$ 75,000/mes)"}),i.jsx("option",{value:"smart",children:"Plan Smart Logistics (RD$ 120,000/mes)"})]})]}),i.jsxs("div",{className:"border-t border-slate-300 dark:border-slate-600 pt-4 mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3",children:"Configuracin de Correo"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email de la Compaa"}),i.jsx("input",{type:"email",value:p.emailConfig.user,onChange:ne=>g({...p,emailConfig:{...p.emailConfig,user:ne.target.value,from:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"empresa@gmail.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contrasea de Aplicacin de Gmail"}),i.jsx("input",{type:"password",value:p.emailConfig.pass,onChange:ne=>g({...p,emailConfig:{...p.emailConfig,pass:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"wimu etth qgnf qplx"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Contrasea de aplicacin generada en Google"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-300 dark:border-slate-600 pt-4 mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3",children:"Diseo de Factura"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Logo de la Compaa"}),p.invoiceDesign.logoUrl&&i.jsx("div",{className:"mb-2 p-2 border border-slate-200 dark:border-slate-600 rounded-lg",children:i.jsx("img",{src:p.invoiceDesign.logoUrl,alt:"Logo preview",className:"h-16 object-contain mx-auto",onError:ne=>{ne.target.style.display="none"}})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("label",{className:"flex-1 cursor-pointer",children:[i.jsx("div",{className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-center rounded-lg transition-colors",children:" Subir Logo"}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async ne=>{var me,Ee,ye;const ae=(me=ne.target.files)==null?void 0:me[0];if(ae){if(ae.size>5*1024*1024){alert("El archivo es muy grande. Mximo 5MB");return}try{const H=new FormData;H.append("logo",ae);const Y=await wt.post(`/companies/${d.id}/upload-logo`,H,{headers:{"Content-Type":"multipart/form-data"}});Y.data.success?(g({...p,invoiceDesign:{...p.invoiceDesign,logoUrl:Y.data.logoUrl}}),alert("Logo subido exitosamente")):alert("Error: "+Y.data.error)}catch(H){console.error("Error subiendo logo:",H),alert(((ye=(Ee=H.response)==null?void 0:Ee.data)==null?void 0:ye.error)||"Error al subir logo")}}}})]}),i.jsx("button",{type:"button",onClick:()=>{const ne=prompt("Ingresa la URL del logo:",p.invoiceDesign.logoUrl);ne!==null&&g({...p,invoiceDesign:{...p.invoiceDesign,logoUrl:ne}})},className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors",children:" URL"})]}),i.jsx("input",{type:"url",value:p.invoiceDesign.logoUrl,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg bg-slate-50 text-sm",placeholder:"https://... (carga un archivo o ingresa una URL)"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Color Principal"}),i.jsx("input",{type:"color",value:p.invoiceDesign.primaryColor,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,primaryColor:ne.target.value}}),className:"w-full h-10 border border-slate-300 dark:border-slate-600 rounded-lg cursor-pointer"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Color Secundario"}),i.jsx("input",{type:"color",value:p.invoiceDesign.secondaryColor,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,secondaryColor:ne.target.value}}),className:"w-full h-10 border border-slate-300 dark:border-slate-600 rounded-lg cursor-pointer"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Plantilla"}),i.jsxs("select",{value:p.invoiceDesign.template,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,template:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"modern",children:"Moderna"}),i.jsx("option",{value:"classic",children:"Clsica"}),i.jsx("option",{value:"minimal",children:"Minimalista"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto de Encabezado"}),i.jsx("input",{type:"text",value:p.invoiceDesign.headerText,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,headerText:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Gracias por su preferencia"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto de Pie de Pgina"}),i.jsx("textarea",{value:p.invoiceDesign.footerText,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,footerText:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Trminos y condiciones...",rows:"3"})]})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),ee()},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:c==="create"?"Crear Compaa":"Guardar Cambios"})]})]})]})}),b&&_&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-rose-100 dark:bg-rose-900/30 mb-4",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("h2",{className:"text-xl font-bold text-rose-600 dark:text-rose-400 mb-2",children:"ELIMINAR COMPAA"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["Esta accin es ",i.jsx("strong",{children:"IRREVERSIBLE"})]})]}),i.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg p-4 mb-4",children:[i.jsx("p",{className:"font-semibold text-rose-900 dark:text-rose-200 mb-2",children:"Se eliminar permanentemente:"}),i.jsxs("ul",{className:"text-sm text-rose-800 dark:text-rose-300 space-y-1",children:[i.jsxs("li",{children:[" Compaa: ",i.jsx("strong",{children:_.nombre})]}),i.jsx("li",{children:" Todos los usuarios de la compaa"}),i.jsx("li",{children:" Todos los embarques y facturas"}),i.jsx("li",{children:" Todas las rutas y entregas"}),i.jsx("li",{children:" Todo el historial"})]})]}),i.jsxs("form",{onSubmit:V,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:" Ingresa tu contrasea de Super Admin para confirmar:"}),i.jsx("input",{type:"password",required:!0,value:A,onChange:ne=>j(ne.target.value),className:"w-full px-3 py-2 border border-rose-300 dark:border-rose-700 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-500",placeholder:"Tu contrasea de Super Admin",disabled:P})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{w(!1),N(null),j("")},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",disabled:P,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:P,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition disabled:opacity-50",children:P?"Eliminando...":"Eliminar Permanentemente"})]})]})]})})]})},Jv=()=>{const{userData:t}=fa(),[e,r]=S.useState([]),[n,a]=S.useState(!0),[s,o]=S.useState("");S.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const p=await wt.get("/embarques");if(console.log(" Embarques cargados:",p.data),p.data.success)r(p.data.data||[]);else throw new Error(p.data.error||"Error al cargar embarques desde la API")}catch(p){console.error(" Error cargando embarques:",p),r([]),alert("Error al cargar embarques: "+p.message)}finally{a(!1)}},c=async p=>{if(window.confirm("Ests seguro de eliminar este embarque?"))try{const g=await wt.delete(`/embarques/${p}`);if(g.data.success)alert(" Embarque eliminado exitosamente"),l();else throw new Error(g.data.error||"Error al eliminar embarque")}catch(g){console.error("Error eliminando embarque:",g),alert("Error al eliminar embarque: "+g.message)}},u=e.filter(p=>{var g,b,w,_;return((g=p.codigoTracking)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))||((b=p.origen)==null?void 0:b.toLowerCase().includes(s.toLowerCase()))||((w=p.destino)==null?void 0:w.toLowerCase().includes(s.toLowerCase()))||((_=p.nombre)==null?void 0:_.toLowerCase().includes(s.toLowerCase()))}),d=p=>{const g={activo:"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200",pendiente:"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200",en_proceso:"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200",entregado:"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200",completado:"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200",inactivo:"bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-200",cancelado:"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"};return g[p]||g.activo},h=p=>({activo:"Activo",pendiente:"Pendiente",en_proceso:"En Proceso",entregado:"Entregado",completado:"Completado",inactivo:"Inactivo",cancelado:"Cancelado"})[p]||p;return n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:"Embarques"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Los embarques se crean automticamente desde Google Drive"})]})}),i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Br,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-indigo-900 dark:text-indigo-100",children:"Sistema de actualizacin automtica"}),i.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mt-1",children:"Los embarques se sincronizan automticamente cada 5 minutos desde Google Drive"})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow",children:i.jsxs("div",{className:"relative",children:[i.jsx(qd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),i.jsx("input",{type:"text",placeholder:"Buscar por nombre, cdigo, origen o destino...",value:s,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Br,{size:16}),"Nombre / Cdigo"]})}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Descripcin"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yl,{size:16}),"Fecha Creacin"]})}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Estado"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Facturas"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Progreso"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:u.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center",children:[i.jsx(Br,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:s?"No se encontraron embarques":"No hay embarques registrados"}),i.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:"Los embarques se crearn automticamente al subir archivos a Google Drive"})]})}):u.map(p=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:p.nombre||p.codigoTracking||"Sin nombre"}),p.id&&i.jsxs("div",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["ID: ",p.id]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100 max-w-xs truncate",children:p.descripcion||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:p.fechaCreacion?new Date(p.fechaCreacion).toLocaleDateString("es-DO",{year:"numeric",month:"short",day:"numeric"}):"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${d(p.estado||"activo")}`,children:h(p.estado||"activo")})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Au,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"font-medium",children:p.totalFacturas||0})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Entregadas: ",p.facturasEntregadas||0]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"bg-emerald-600 h-2 rounded-full transition-all",style:{width:`${p.porcentajeCompletado||0}%`}})}),i.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[p.porcentajeCompletado||0,"%"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>window.location.href=`/embarques/${p.id}`,className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300",title:"Ver detalles",children:i.jsx(Tu,{size:18})}),((t==null?void 0:t.rol)==="admin_general"||(t==null?void 0:t.rol)==="super_admin")&&i.jsx("button",{onClick:()=>c(p.id),className:"text-rose-600 dark:text-rose-400 hover:text-rose-900 dark:hover:text-rose-300",title:"Eliminar",children:i.jsx(yp,{size:18})})]})})]},p.id||p._id))})]})})})]})},u5={"Distrito Nacional":"Capital","SD Este":"Capital","SD Norte":"Capital","SD Oeste":"Capital","Yaguate y Sur":"Capital",Santiago:"Cibao","La Vega":"Cibao","San Francisco de Macors":"Cibao",Moca:"Cibao","La Romana":"Este","Punta Cana":"Este",Bvaro:"Este",Higey:"Este","San Pedro de Macors":"Este",Barahona:"Sur",Azua:"Sur",Ban:"Sur","Recogida Almacn":"Local"},eb=()=>{var Qe;const t=$s(),{userData:e}=fa(),[r,n]=S.useState([]),[a,s]=S.useState(!0),[o,l]=S.useState(!1),[c,u]=S.useState(null),[d,h]=S.useState("activas"),[p,g]=S.useState([]),[b,w]=S.useState([]),[_,N]=S.useState([]),[A,j]=S.useState(""),[P,U]=S.useState(""),[G,O]=S.useState(""),[D,I]=S.useState(!1),[V,R]=S.useState([]),[B,F]=S.useState([]),[ee,Z]=S.useState("adelante-atras"),[ce,ne]=S.useState("cercanas-primero"),[ae,me]=S.useState(!1),[Ee,ye]=S.useState([]),[H,Y]=S.useState(!1),[X,re]=S.useState(""),[se,ke]=S.useState([]),[Ce,xe]=S.useState(""),[Ie,He]=S.useState(""),[Ue,Me]=S.useState(""),[Be,be]=S.useState("");S.useEffect(()=>{Vt()},[]),S.useEffect(()=>{D&&ht()},[Ce,D]);const Vt=async()=>{try{s(!0);const ze=await wt.get("/rutas");if(ze.data.success)n(ze.data.data||[]);else throw new Error(ze.data.error||"Error al cargar rutas")}catch(ze){console.error("Error:",ze),We.error("Error al cargar rutas")}finally{s(!1)}},ht=async()=>{Y(!0);try{let ze="/rutas/facturas-disponibles";Ce&&(ze+=`?contenedorId=${Ce}`);const it=await wt.get(ze);it.data.success&&w(it.data.data||[])}catch(ze){console.error("Error al cargar facturas:",ze),We.error("Error al cargar facturas disponibles")}finally{Y(!1)}},Lt=async()=>{Y(!0);try{const ze=await wt.get("/rutas/repartidores-disponibles");ze.data.success&&g(ze.data.data||[]);const it=await wt.get("/rutas/cargadores-disponibles");it.data.success&&R(it.data.data||[]);const At=await wt.get("/rutas/contenedores-disponibles");At.data.success&&ke(At.data.data||[]),w([]),I(!0)}catch(ze){console.error("Error:",ze),We.error("Error al cargar datos para crear ruta")}finally{Y(!1)}},et=ze=>{N(it=>it.includes(ze)?it.filter(At=>At!==ze):[...it,ze])},Jt=ze=>{F(it=>it.includes(ze)?it.filter(At=>At!==ze):[...it,ze])},Ve=S.useMemo(()=>{const ze=b.map(it=>u5[it.zona]).filter(Boolean);return[...new Set(ze)].sort()},[b]),Ft=S.useMemo(()=>{const ze=b.filter(it=>!Ie||u5[it.zona]===Ie).map(it=>it.zona).filter(Boolean);return[...new Set(ze)].sort()},[b,Ie]),qt=S.useMemo(()=>{const ze=b.filter(it=>(!Ie||u5[it.zona]===Ie)&&(!Ue||it.zona===Ue)).map(it=>it.sector).filter(Boolean);return[...new Set(ze)].sort()},[b,Ie,Ue]),Wt=S.useMemo(()=>b.filter(ze=>{var it,At,er,It;if(Ie&&u5[ze.zona]!==Ie||Ue&&ze.zona!==Ue||Be&&ze.sector!==Be)return!1;if(G){const Er=G.toLowerCase();if(!(((it=ze.cliente)==null?void 0:it.toLowerCase().includes(Er))||((At=ze.direccion)==null?void 0:At.toLowerCase().includes(Er))||((er=ze.codigoTracking)==null?void 0:er.toLowerCase().includes(Er))||((It=ze.sector)==null?void 0:It.toLowerCase().includes(Er))))return!1}return!0}),[b,Ie,Ue,Be,G]),nr=()=>{const ze=Wt.map(It=>It.id).filter(It=>_.includes(It)),it=b.filter(It=>ze.includes(It.id));if(it.length===0){We.warning("Debes seleccionar al menos una factura de la lista filtrada.");return}if(!A){We.warning("Debes seleccionar un repartidor");return}if(B.length===0){We.warning("Debes seleccionar al menos un cargador");return}let At=it.map((It,Er)=>({facturaId:It.id,ordenOriginal:Er+1}));ce==="lejanas-primero"&&At.reverse();const er=At.map((It,Er)=>ee==="atras-adelante"?{...It,ordenCarga:At.length-Er,ordenEntrega:Er+1}:{...It,ordenCarga:Er+1,ordenEntrega:At.length-Er});ye(er),me(!0)},Xe=()=>{const ze=Wt.map(it=>it.id);N(it=>{const At=[...it];return ze.forEach(er=>{At.includes(er)||At.push(er)}),At})},Kt=()=>{const ze=Wt.map(it=>it.id);N(it=>it.filter(At=>!ze.includes(At)))},kt=async()=>{if(Ee.length===0){We.error("Error: No hay facturas en la vista previa. Por favor, genera la vista previa primero.");return}if(!A||B.length===0){We.error("Error: Faltan datos. Verifique repartidor y cargadores.");return}try{const ze=Ee.map(At=>At.facturaId),it=await wt.post("/rutas/crear-avanzada",{nombre:P||`Ruta ${new Date().toLocaleDateString()}`,repartidorId:A,cargadoresIds:B,facturasIds:ze,montoAsignado:parseFloat(X)||0,configuracion:{direccionCarga:ee,ordenEntrega:ce}});it.data.success?(We.success(" Ruta creada exitosamente!"),I(!1),me(!1),Ut(),Vt()):We.error(it.data.message||"Error al crear la ruta")}catch(ze){console.error("Error:",ze),We.error(ze.message||"Error al crear la ruta")}},pt=async(ze,it)=>{ze.stopPropagation(),u(it),l(!0)},Ot=async()=>{var ze,it;try{await wt.put(`/rutas/${c.id}/cerrar`),We.success("Ruta cerrada exitosamente"),l(!1),u(null),Vt()}catch(At){console.error("Error:",At),We.error(((it=(ze=At.response)==null?void 0:ze.data)==null?void 0:it.error)||"Error al cerrar la ruta")}},Ut=()=>{j(""),N([]),F([]),w([]),U(""),O(""),Z("adelante-atras"),ne("cercanas-primero"),ye([]),xe(""),He(""),Me(""),be(""),re("")},Nr=ze=>{switch(ze){case"pendiente":return"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200";case"en_proceso":return"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200";case"completada":return"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200";case"asignada":return"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200";default:return"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"}},or=ze=>{switch(ze){case"pendiente":return"Pendiente";case"en_proceso":return"En Proceso";case"completada":return"Completada";case"asignada":return"Asignada";default:return ze}},lt=ze=>ze>0?"text-emerald-600 dark:text-emerald-400":ze<0?"text-rose-600 dark:text-rose-400":"text-slate-600 dark:text-slate-400",lr=r.filter(ze=>d==="activas"?ze.estado!=="completada":ze.estado==="completada"),ve=ze=>{He(ze.target.value),Me(""),be("")},Ze=ze=>{Me(ze.target.value),be("")},at=()=>{const it=Ee.map(At=>({...b.find(It=>It.id===At.facturaId),...At})).reduce((At,er)=>{const It=er.sector||"Sin Sector";return At[It]||(At[It]=[]),At[It].push(er),At},{});for(const At in it)it[At].sort((er,It)=>er.ordenEntrega-It.ordenEntrega);return Object.entries(it).sort(([,At],[,er])=>At[0].ordenEntrega-er[0].ordenEntrega)};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Gestin de Rutas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Crea y administra rutas de entrega"})]}),(e==null?void 0:e.rol)!=="repartidor"&&i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:Lt,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 hover:from-indigo-700 hover:to-purple-700 transition shadow-lg",children:[i.jsx("span",{children:""}),"Crear Nueva Ruta"]})})]}),i.jsxs("div",{className:"flex gap-4 mb-6 border-b dark:border-slate-700",children:[i.jsx("button",{onClick:()=>h("activas"),className:`px-4 py-2 font-medium transition-all ${d==="activas"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"Rutas Activas"}),i.jsx("button",{onClick:()=>h("historial"),className:`px-4 py-2 font-medium transition-all ${d==="historial"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"Historial"})]}),a?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando rutas..."})]}):lr.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-12 text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:d==="activas"?"No hay rutas activas":"No hay rutas en el historial"}),d==="activas"&&i.jsx("p",{className:"text-slate-400 dark:text-slate-500 mt-2",children:'Crea tu primera ruta haciendo click en "Crear Nueva Ruta"'})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:lr.map(ze=>{var it,At;return i.jsxs("div",{onClick:()=>t(`/rutas/${ze.id}`),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-xl transition cursor-pointer",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:ze.nombre}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[" ",ze.empleadoNombre||ze.repartidorNombre]}),(((it=ze.configuracion)==null?void 0:it.sistemaLIFO)||((At=ze.configuracion)==null?void 0:At.direccionCarga))&&i.jsx("span",{className:"inline-block mt-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-0.5 rounded",children:" LIFO"})]}),i.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${Nr(ze.estado)}`,children:or(ze.estado)})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total facturas:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:ze.totalFacturas})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Entregadas:"}),i.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:ze.facturasEntregadas||0})]}),ze.montoAsignado&&i.jsxs("div",{className:"border-t dark:border-slate-700 pt-2 mt-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Monto asignado:"}),i.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["$",ze.montoAsignado||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total gastos:"}),i.jsxs("span",{className:"font-medium text-rose-600 dark:text-rose-400",children:["$",ze.totalGastos||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Balance:"}),i.jsxs("span",{className:lt((ze.montoAsignado||0)-(ze.totalGastos||0)),children:["$",(ze.montoAsignado||0)-(ze.totalGastos||0)]})]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-emerald-600 dark:bg-emerald-500 h-2 rounded-full transition-all",style:{width:`${Math.min((ze.facturasEntregadas||0)/(ze.totalFacturas||1)*100,100)}%`}})})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Creada: ",ze.createdAt?new Date(ze.createdAt.seconds*1e3).toLocaleDateString():"Fecha desc."]}),ze.estado!=="completada"&&i.jsx("button",{onClick:er=>pt(er,ze),className:"text-xs bg-slate-600 dark:bg-slate-700 text-white px-3 py-1 rounded hover:bg-slate-700 dark:hover:bg-slate-600 transition",children:"Cerrar Ruta"})]})]},ze.id)})}),D&&!ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-6xl my-8",children:i.jsxs("div",{className:"p-6 max-h-[85vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" Crear Ruta con Sistema LIFO"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Orden de carga optimizado para entregas eficientes"})]}),i.jsx("button",{onClick:()=>{I(!1),Ut()},className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:i.jsx("span",{className:"text-2xl",children:""})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nombre de la Ruta"}),i.jsx("input",{type:"text",value:P,onChange:ze=>U(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: Ruta SD Este - 15 Enero 2025"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto Asignado para Gastos (RD$)"}),i.jsx("input",{type:"number",step:"0.01",min:"0",value:X,onChange:ze=>re(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"0.00"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Presupuesto para combustible, peajes y otros gastos de la ruta"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(as,{size:20,className:"text-purple-600"}),"Configuracin de Carga (Sistema LIFO)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin de Carga"}),i.jsxs("select",{value:ee,onChange:ze=>Z(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"adelante-atras",children:" Adelante  Atrs (Normal)"}),i.jsx("option",{value:"atras-adelante",children:" Atrs  Adelante (Invertido)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Orden de Entrega"}),i.jsxs("select",{value:ce,onChange:ze=>ne(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"cercanas-primero",children:" Cercanas Primero (Optimizado)"}),i.jsx("option",{value:"lejanas-primero",children:" Lejanas Primero (Inverso)"})]})]})]}),i.jsx("div",{className:"mt-4 p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:i.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 flex items-start gap-2",children:[i.jsx(ms,{size:16,className:"mt-0.5 flex-shrink-0"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Sistema LIFO:"})," Las primeras en cargar son las ltimas en entregar"]})]})})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Fa,{size:20,className:"text-indigo-600"}),"Filtrar Facturas"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(Br,{size:16}),"Nivel 0: Contenedor"]})}),i.jsxs("select",{value:Ce,onChange:ze=>{xe(ze.target.value),He(""),Me(""),be(""),w([])},disabled:H,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50",children:[i.jsx("option",{value:"",children:"-- Todas las Facturas Confirmadas --"}),se.map(ze=>i.jsxs("option",{value:ze.id,children:[ze.numeroContenedor," (",ze.facturasPendientes," facturas)"]},ze.id))]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nivel 1: Zona Principal"}),i.jsxs("select",{value:Ie,onChange:ve,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",disabled:H,children:[i.jsx("option",{value:"",children:"-- Todas las Zonas --"}),Ve.map(ze=>i.jsx("option",{value:ze,children:ze},ze))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nivel 2: Subzona"}),i.jsxs("select",{value:Ue,onChange:Ze,disabled:!Ft.length||H,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50",children:[i.jsx("option",{value:"",children:"-- Todas las Subzonas --"}),Ft.map(ze=>i.jsx("option",{value:ze,children:ze},ze))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nivel 3: Sector"}),i.jsxs("select",{value:Be,onChange:ze=>be(ze.target.value),disabled:!qt.length||H,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50",children:[i.jsx("option",{value:"",children:"-- Todos los Sectores --"}),qt.map(ze=>i.jsx("option",{value:ze,children:ze},ze))]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bsqueda Rpida (Cliente, Tracking, Direccin...)"}),i.jsx("input",{type:"text",value:G,onChange:ze=>O(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:" Buscar...",disabled:H})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Facturas Disponibles (",_.length," sel. de ",Wt.length," filtradas)"]}),Wt.length>0&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Xe,className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:" Seleccionar todas"}),i.jsx("button",{onClick:Kt,className:"text-xs text-rose-600 hover:text-rose-800 font-medium",children:" Deseleccionar todas"})]})]}),H?i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-3 font-medium",children:"Cargando facturas..."})]}):b.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx(ms,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{className:"font-medium",children:"No hay facturas disponibles"}),i.jsx("p",{className:"text-sm mt-1",children:Ce?"El contenedor seleccionado no tiene facturas confirmadas.":"No hay facturas confirmadas por secretara."})]}):Wt.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx(ms,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{className:"font-medium",children:"No se encontraron facturas"}),i.jsx("p",{className:"text-sm mt-1",children:"Ajusta los filtros para encontrar facturas."})]}):i.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg max-h-64 overflow-y-auto",children:Wt.map(ze=>{var it;return i.jsx("div",{onClick:()=>et(ze.id),className:`p-3 border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer ${_.includes(ze.id)?"bg-indigo-50 dark:bg-indigo-900/30":""}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:_.includes(ze.id),onChange:()=>{},className:"mr-3 h-4 w-4"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:ze.cliente}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:ze.direccion}),i.jsxs("div",{className:"flex gap-3 mt-1 flex-wrap",children:[i.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:ze.codigoTracking}),i.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:[" ",ze.zona,"  ",ze.sector]}),i.jsxs("span",{className:"text-xs text-emerald-600",children:[" $",(it=ze.monto)==null?void 0:it.toFixed(2)]})]})]})]})},ze.id)})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(as,{size:20,className:"text-emerald-600"}),"Repartidor *"]}),i.jsxs("select",{value:A,onChange:ze=>j(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(ze=>i.jsx("option",{value:ze.id,children:ze.nombre},ze.id))]}),p.length===0&&i.jsx("p",{className:"text-xs text-rose-600 mt-2",children:" No hay repartidores disponibles"})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(cd,{size:20,className:"text-amber-600"}),"Cargadores * (mnimo 1)"]}),i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:V.length===0?i.jsx("p",{className:"text-xs text-rose-600",children:" No hay cargadores disponibles"}):V.map(ze=>i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 hover:bg-white dark:hover:bg-slate-700 rounded",children:[i.jsx("input",{type:"checkbox",checked:B.includes(ze.id),onChange:()=>Jt(ze.id),className:"h-4 w-4"}),i.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:ze.nombre})]},ze.id))})]})]}),_.length>0&&i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-4 rounded-lg mb-6",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:" Resumen"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Facturas"}),i.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:_.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargadores"}),i.jsx("p",{className:"text-xl font-bold text-amber-600",children:B.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Repartidor"}),i.jsx("p",{className:"text-xl font-bold text-indigo-600",children:A?"":""})]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{I(!1),Ut()},className:"flex-1 px-6 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsxs("button",{onClick:nr,disabled:_.length===0||!A||B.length===0||H,className:"flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Tu,{size:20}),"Vista Previa"]})]})]})})}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-5xl my-8",children:i.jsxs("div",{className:"p-6 max-h-[85vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" Vista Previa de Carga y Entrega"}),i.jsx("button",{onClick:()=>me(!1),className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:i.jsx("span",{className:"text-2xl",children:""})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:" Configuracin"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Direccin:"})," ",ee==="adelante-atras"?" Adelante  Atrs":" Atrs  Adelante"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Orden:"})," ",ce==="cercanas-primero"?" Cercanas primero":" Lejanas primero"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Sistema:"})," LIFO (Last In, First Out)"]})]})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:" Personal"}),i.jsxs("div",{className:"space-y-1 text-sm text-slate-700 dark:text-slate-300",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Repartidor:"})," ",(Qe=p.find(ze=>ze.id===A))==null?void 0:Qe.nombre]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Cargadores:"})," ",B.map(ze=>{var it;return(it=V.find(At=>At.id===ze))==null?void 0:it.nombre}).join(", ")]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:" Orden de Carga en el Camin (LIFO)"}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:ee==="adelante-atras"?" Adelante del camin (se carga primero, se entrega ltimo)":" Atrs del camin (se carga primero, se entrega ltimo)"}),i.jsx("div",{className:"space-y-4",children:at().map(([ze,it])=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm",children:[i.jsxs("h4",{className:"font-bold text-lg text-purple-600 dark:text-purple-400 mb-3",children:["Sector: ",ze," (",it.length," ",it.length>1?"facturas":"factura",")"]}),i.jsx("div",{className:"space-y-2",children:it.map(At=>{var er;return i.jsx("div",{className:"border-l-4 border-indigo-600 pl-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex gap-2 mb-1",children:[i.jsxs("span",{className:"bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded",children:["CARGA #",At.ordenCarga]}),i.jsxs("span",{className:"bg-emerald-600 text-white text-xs font-bold px-2 py-1 rounded",children:["ENTREGA #",At.ordenEntrega]})]}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:At==null?void 0:At.cliente}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:At==null?void 0:At.direccion})]}),i.jsxs("div",{className:"text-right ml-2",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:At==null?void 0:At.codigoTracking}),i.jsxs("p",{className:"text-sm text-emerald-600",children:["$",(er=At==null?void 0:At.monto)==null?void 0:er.toFixed(2)]})]})]})},At.facturaId)})})]},ze))}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:ee==="adelante-atras"?" Atrs del camin (se carga ltimo, se entrega primero)":" Adelante del camin (se carga ltimo, se entrega primero)"})]})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-300 dark:border-amber-700 mb-6",children:[i.jsxs("h3",{className:"font-semibold text-amber-800 dark:text-amber-200 mb-2 flex items-center gap-2",children:[i.jsx(ms,{size:20}),"Cmo funciona el sistema LIFO?"]}),i.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"1. Carga:"})," Los cargadores cargan en el orden mostrado arriba (Carga #1, #2, #3...)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"2. Transporte:"})," Las facturas con menor nmero de entrega (Entrega #1, #2...) estn ms accesibles."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"3. Entrega:"})," El repartidor entrega en orden ascendente (1, 2, 3...)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"4. Optimizacin:"})," Reduce tiempo de bsqueda y mejora eficiencia."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>me(!1),className:"flex-1 px-6 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:" Volver a Editar"}),i.jsxs("button",{onClick:kt,className:"flex-1 px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Confirmar y Crear Ruta"]})]})]})})}),o&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white",children:"Cerrar Ruta"}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:['Ests seguro de cerrar la ruta "',c.nombre,'"?']}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-4 rounded-lg space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Repartidor:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:c.empleadoNombre})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Facturas entregadas:"}),i.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[c.facturasEntregadas||0," de ",c.totalFacturas]})]}),c.montoAsignado&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Monto asignado:"}),i.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["$",c.montoAsignado||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Total gastado:"}),i.jsxs("span",{className:"font-medium text-rose-600 dark:text-rose-400",children:["$",c.totalGastos||0]})]}),i.jsx("div",{className:"border-t dark:border-slate-600 pt-2",children:i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Balance final:"}),i.jsxs("span",{className:lt((c.montoAsignado||0)-(c.totalGastos||0)),children:["$",(c.montoAsignado||0)-(c.totalGastos||0)]})]})})]})]}),c.facturasEntregadas<c.totalFacturas&&i.jsxs("p",{className:"text-amber-600 dark:text-amber-400 text-sm mt-4",children:[" Hay ",c.totalFacturas-(c.facturasEntregadas||0)," facturas sin entregar"]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{l(!1),u(null)},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),i.jsx("button",{onClick:Ot,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition",children:"Confirmar Cierre"})]})]})})})]})},tb=()=>{const{id:t}=Yy(),e=$s(),[r,n]=S.useState(null),[a,s]=S.useState([]),[o,l]=S.useState([]),[c,u]=S.useState(!0);S.useEffect(()=>{d()},[t]);const d=async()=>{var A,j;try{const P=await wt.get(`/rutas/${t}`);if(P.data.success){const U=P.data.data;n(U),s(U.facturas||[]),l(U.gastos||[])}else throw new Error(P.data.error||"Error al cargar la ruta")}catch(P){console.error("Error al cargar ruta:",P),((A=P.response)==null?void 0:A.status)===404?(alert("Ruta no encontrada"),e("/rutas")):((j=P.response)==null?void 0:j.status)===403?(alert("No tienes permisos para ver esta ruta"),e("/rutas")):alert("Error al cargar la ruta")}finally{u(!1)}};if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600",children:"Cargando detalles de la ruta..."})]})});if(!r)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xl text-slate-600",children:"Ruta no encontrada"}),i.jsx("button",{onClick:()=>e("/rutas"),className:"mt-4 text-indigo-600 hover:text-indigo-800",children:"Volver a Rutas"})]})});const h=a.filter(A=>A.estado==="entregado"||A.estado==="entregada").length,p=a.filter(A=>A.estado==="no_entregado"||A.estado==="no_entregada").length,g=a.filter(A=>A.estado==="asignado"||A.estado==="pendiente"||A.estado==="confirmada").length,b=o.reduce((A,j)=>A+(j.monto||0),0),w=a.filter(A=>A.estado==="entregado"||A.estado==="entregada").reduce((A,j)=>A+(j.monto||0),0),_=(r.montoAsignado||0)-b,N=A=>{const j={pendiente:"bg-amber-100 text-amber-800",en_proceso:"bg-indigo-100 text-indigo-800",completada:"bg-emerald-100 text-emerald-800",cancelada:"bg-rose-100 text-rose-800"},P={pendiente:"Pendiente",en_proceso:"En Proceso",completada:"Completada",cancelada:"Cancelada"};return i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j[A]||"bg-slate-100 text-slate-800"}`,children:P[A]||A})};return i.jsxs("div",{className:"max-w-7xl mx-auto p-3 sm:p-4 md:p-6",children:[i.jsxs("div",{className:"mb-4 sm:mb-6",children:[i.jsxs("button",{onClick:()=>e("/rutas"),className:"flex items-center text-slate-600 hover:text-slate-800 mb-3 sm:mb-4 text-sm sm:text-base",children:[i.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-slate-900 truncate",children:r.nombre}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:["Creada el ",new Date(r.createdAt).toLocaleDateString()]})]}),i.jsx("div",{className:"flex-shrink-0",children:N(r.estado)})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:[i.jsxs("h2",{className:"text-base sm:text-lg md:text-xl font-bold text-slate-900 mb-3 sm:mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),i.jsx("span",{className:"truncate",children:"Repartidor Asignado"})]}),r.empleadoNombre?i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-slate-500",children:"Nombre"}),i.jsx("p",{className:"text-sm sm:text-base text-slate-900 font-medium break-words",children:r.empleadoNombre})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-slate-500",children:"Email"}),i.jsx("p",{className:"text-sm sm:text-base text-slate-900 break-all",children:r.empleadoEmail||"No disponible"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-slate-500",children:"Telfono"}),i.jsx("p",{className:"text-sm sm:text-base text-slate-900",children:r.empleadoTelefono||"No disponible"})]})]}):i.jsx("p",{className:"text-sm sm:text-base text-slate-500",children:"No hay repartidor asignado"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-4 sm:mb-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:["Total",i.jsx("br",{className:"sm:hidden"}),"Facturas"]}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-slate-900 mt-0.5 sm:mt-1",children:a.length})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-indigo-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:"Entregadas"}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-emerald-600 mt-0.5 sm:mt-1",children:h})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-emerald-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:["No",i.jsx("br",{className:"sm:hidden"}),"Entregadas"]}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-rose-600 mt-0.5 sm:mt-1",children:p})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-rose-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:"Pendientes"}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-amber-600 mt-0.5 sm:mt-1",children:g})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-amber-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:[i.jsxs("h2",{className:"text-base sm:text-lg md:text-xl font-bold text-slate-900 mb-3 sm:mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"truncate",children:"Resumen Financiero"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[i.jsxs("div",{className:"p-3 sm:p-4 bg-indigo-50 rounded-lg",children:[i.jsxs("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-indigo-700",children:["Monto",i.jsx("br",{className:"sm:hidden"}),"Asignado"]}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-indigo-900 mt-0.5 sm:mt-1",children:["$",(r.montoAsignado||0).toLocaleString()]})]}),i.jsxs("div",{className:"p-3 sm:p-4 bg-emerald-50 rounded-lg",children:[i.jsx("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-emerald-700",children:"Total Cobrado"}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-emerald-900 mt-0.5 sm:mt-1",children:["$",w.toLocaleString()]})]}),i.jsxs("div",{className:"p-3 sm:p-4 bg-rose-50 rounded-lg",children:[i.jsx("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-rose-700",children:"Total Gastos"}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-rose-900 mt-0.5 sm:mt-1",children:["$",b.toLocaleString()]})]}),i.jsxs("div",{className:"p-3 sm:p-4 bg-purple-50 rounded-lg",children:[i.jsx("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-purple-700",children:"Balance"}),i.jsxs("p",{className:`text-lg sm:text-xl md:text-2xl font-bold mt-0.5 sm:mt-1 ${_>=0?"text-purple-900":"text-rose-600"}`,children:["$",_.toLocaleString()]})]})]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md",children:i.jsx(ECe,{facturas:a,gastos:o})})]})},ECe=({facturas:t,gastos:e})=>{const[r,n]=S.useState("facturas");return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200",children:i.jsxs("nav",{className:"flex gap-4 px-6",children:[i.jsxs("button",{onClick:()=>n("facturas"),className:`py-4 px-2 border-b-2 font-medium transition ${r==="facturas"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Facturas (",t.length,")"]}),i.jsxs("button",{onClick:()=>n("gastos"),className:`py-4 px-2 border-b-2 font-medium transition ${r==="gastos"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Gastos (",e.length,")"]})]})}),i.jsx("div",{className:"p-6",children:r==="facturas"?i.jsx(ACe,{facturas:t}):i.jsx(SCe,{gastos:e})})]})},ACe=({facturas:t})=>{const[e,r]=S.useState(null);return t.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsx("p",{className:"text-slate-500",children:"No hay facturas en esta ruta"})]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50",children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Nmero"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Direccin"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Sector"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Monto"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Fotos"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Observaciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(n=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:n.codigoTracking||n.numeroFactura||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:n.cliente}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:n.direccion}),i.jsx("td",{className:"px-4 py-3 text-sm text-indigo-600 font-medium",children:n.sector||"-"}),i.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:["$",(n.monto||0).toLocaleString()]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.estado==="entregado"||n.estado==="entregada"?"bg-emerald-100 text-emerald-800":n.estado==="no_entregado"||n.estado==="no_entregada"?"bg-rose-100 text-rose-800":"bg-amber-100 text-amber-800"}`,children:n.estado==="entregado"||n.estado==="entregada"?"Entregado":n.estado==="no_entregado"||n.estado==="no_entregada"?"No Entregado":"Pendiente"})}),i.jsx("td",{className:"px-4 py-3",children:n.fotosEntrega&&n.fotosEntrega.length>0?i.jsxs("div",{className:"flex gap-1",children:[n.fotosEntrega.slice(0,3).map((a,s)=>i.jsx("button",{onClick:()=>r({fotos:n.fotosEntrega,index:s}),className:"w-10 h-10 rounded border border-slate-300 overflow-hidden hover:border-indigo-500 transition",title:"Click para ampliar",children:i.jsx("img",{src:a,alt:`Foto ${s+1}`,className:"w-full h-full object-cover"})},s)),n.fotosEntrega.length>3&&i.jsxs("div",{className:"w-10 h-10 rounded border border-slate-300 bg-slate-100 flex items-center justify-center text-xs font-medium text-slate-600",children:["+",n.fotosEntrega.length-3]})]}):i.jsxs("span",{className:"text-slate-400 text-sm flex items-center gap-1",children:[i.jsx($d,{size:16}),"Sin fotos"]})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:n.observaciones||n.motivoNoEntrega||"-"})]},n.id))})]}),e&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-95 z-[9999] flex items-center justify-center p-4",children:[i.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 text-white hover:text-slate-300 transition z-[10000] bg-black/50 p-2 rounded-full",children:i.jsx(Jn,{size:32})}),i.jsxs("div",{className:"max-w-6xl w-full max-h-[90vh] flex flex-col items-center justify-center",children:[i.jsx("img",{src:e.fotos[e.index],alt:`Foto ${e.index+1}`,className:"max-w-full max-h-[calc(90vh-120px)] h-auto object-contain rounded-lg shadow-2xl"}),i.jsx("div",{className:"flex justify-center gap-2 mt-4",children:e.fotos.map((n,a)=>i.jsx("button",{onClick:()=>r({fotos:e.fotos,index:a}),className:`w-16 h-16 rounded border-2 overflow-hidden transition ${a===e.index?"border-indigo-500":"border-white/30 hover:border-white/60"}`,children:i.jsx("img",{src:n,alt:`Thumb ${a+1}`,className:"w-full h-full object-cover"})},a))}),i.jsxs("p",{className:"text-white text-center mt-2",children:["Foto ",e.index+1," de ",e.fotos.length]})]})]})]})},SCe=({gastos:t})=>t.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),i.jsx("p",{className:"text-slate-500",children:"No hay gastos registrados en esta ruta"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50",children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Descripcin"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Monto"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Fecha"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(e=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:e.tipo||"Otro"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:e.descripcion||"-"}),i.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-rose-600",children:["$",(e.monto||0).toLocaleString()]}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(e.fecha).toLocaleDateString()})]},e.id))})]})}),jCe=t=>{var e,r,n,a;return t?{nombre:((e=t.destinatario)==null?void 0:e.nombre)||t.nombreRecibe||"N/A",telefono:((r=t.destinatario)==null?void 0:r.telefono)||t.telefono||"N/A",direccion:((n=t.destinatario)==null?void 0:n.direccion)||t.direccion||"N/A",email:((a=t.destinatario)==null?void 0:a.email)||t.email||""}:{nombre:"N/A",telefono:"N/A",direccion:"N/A",email:"N/A"}},TCe=t=>!t||!t.remitente?{nombre:"N/A",telefono:"N/A",direccion:"N/A",email:""}:{nombre:t.remitente.nombre||"N/A",telefono:t.remitente.telefono||"N/A",direccion:t.remitente.direccion||"N/A",email:t.remitente.email||""},t$=t=>{var e;return((e=t==null?void 0:t.destinatario)==null?void 0:e.nombre)||(t==null?void 0:t.nombreRecibe)||"Sin nombre"},r$=t=>{var e;return((e=t==null?void 0:t.destinatario)==null?void 0:e.telefono)||(t==null?void 0:t.telefono)||"N/A"},CCe=t=>{var e;return((e=t==null?void 0:t.destinatario)==null?void 0:e.direccion)||(t==null?void 0:t.direccion)||"N/A"},Eae=(t,e=[],r=[],n={})=>{const{userData:a}=fa(),[s,o]=S.useState([]),[l,c]=S.useState(!0),[u,d]=S.useState(null),[h,p]=S.useState(!1),g=S.useRef(null),b=S.useRef([]),w=S.useRef(!0),{enableNotifications:_=!1,notificationMessage:N="Nuevos datos disponibles",onNewData:A=null,maxItems:j=null}=n;S.useEffect(()=>{if(!a||!a.companyId){c(!1);return}return(async()=>{try{c(!0),d(null),console.log(" [useRealtime] Iniciando listener para:",t),console.log(" [useRealtime] User Company:",a.companyId),console.log(" [useRealtime] Filtros:",JSON.stringify(e));const G=DA(Bl,t);let O=gu(G);O=gu(O,M0("companyId","==",a.companyId)),e.forEach(([D,I,V])=>{O=gu(O,M0(D,I,V))}),r.forEach(([D,I="asc"])=>{O=gu(O,ey(D,I))}),j&&(O=gu(O,d8(j))),g.current=zA(O,D=>{const I=[],V={added:[],modified:[],removed:[]};D.docChanges().forEach(R=>{const B={id:R.doc.id,...R.doc.data()};R.type==="added"?V.added.push(B):R.type==="modified"?V.modified.push(B):R.type==="removed"&&V.removed.push(B)}),D.forEach(R=>{I.push({id:R.id,...R.data()})}),console.log(` [useRealtime] ${t}: ${I.length} docs encontrados`),!w.current&&V.added.length>0&&(p(!0),_&&We.info(N,{duration:3e3,action:{label:"Ver",onClick:()=>p(!1)}}),A&&A(V.added)),o(I),c(!1),b.current=I,w.current&&(w.current=!1),n.onUpdate&&n.onUpdate(I,V)},D=>{console.error(`Error en listener de ${t}:`,D),d(D.message),c(!1),n.onError&&n.onError(D)})}catch(G){console.error(`Error configurando listener de ${t}:`,G),d(G.message),c(!1)}})(),()=>{g.current&&g.current()}},[t,a,JSON.stringify(e),JSON.stringify(r)]);const P=S.useCallback(()=>{p(!1)},[]);return{data:s,loading:l,error:u,hasNewData:h,clearNewDataIndicator:P}},kCe=()=>{const{userData:t}=fa();return Eae("rutas",[["repartidorId","==",(t==null?void 0:t.uid)||""],["estado","in",["asignada","cargada","carga_finalizada","en_entrega"]]],[["createdAt","desc"]],{enableNotifications:!0,notificationMessage:" Nueva ruta asignada",maxItems:20})},Aae=()=>{const[t,e]=S.useState(!1);return{executeWithOptimism:S.useCallback(async({optimisticUpdate:n,serverAction:a,rollback:s,successMessage:o="Accin completada",errorMessage:l="Error en la operacin"})=>{try{return e(!0),n(),await a(),We.success(o),{success:!0}}catch(c){return s&&s(),console.error("Error en accin optimista:",c),We.error(l),{success:!1,error:c}}finally{e(!1)}},[]),isProcessing:t}},Sae=({isLive:t=!0,size:e="sm",showText:r=!0,className:n=""})=>{const a={xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"},s={xs:"text-xs",sm:"text-xs",md:"text-sm",lg:"text-base"};return i.jsxs("div",{className:`flex items-center gap-1.5 ${n}`,children:[i.jsx("div",{className:`${a[e]} rounded-full ${t?"bg-emerald-500 animate-pulse":"bg-slate-400"}`}),r&&i.jsx("span",{className:`${s[e]} ${t?"text-emerald-600 dark:text-emerald-400":"text-slate-500"} font-medium`,children:t?"En vivo":"Sin conexin"})]})},jae=()=>{const[t,e]=S.useState(navigator.onLine);return S.useEffect(()=>{const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),t?null:i.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50",children:i.jsxs("div",{className:"bg-amber-600 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 animate-bounce",children:[i.jsx(Hre,{size:16}),i.jsx("span",{className:"text-sm font-medium",children:"Sin conexin - Modo offline"})]})})},ICe=t=>t&&typeof t=="object"&&(t.thumbnail||t.preview),Tae=t=>t?ICe(t)?{thumbnail:t.thumbnail||t.preview,preview:t.preview||t.thumbnail,isOptimized:!0}:{thumbnail:t,preview:t,isOptimized:!1}:{thumbnail:null,preview:null,isOptimized:!1},Cae=({src:t,alt:e="Imagen",className:r="",onClick:n=null,showOptimizedBadge:a=!0,showZoomIcon:s=!0,usePreview:o=!1,objectFit:l="cover"})=>{const[c,u]=S.useState(!1),[d,h]=S.useState(!0),{thumbnail:p,preview:g,isOptimized:b}=Tae(t);if(!p)return i.jsx("div",{className:`${r} bg-slate-100 dark:bg-slate-800 flex items-center justify-center`,children:i.jsx($d,{className:"text-slate-400",size:32})});if(c)return i.jsxs("div",{className:`${r} bg-slate-100 dark:bg-slate-800 flex flex-col items-center justify-center p-4`,children:[i.jsx($d,{className:"text-slate-400 mb-2",size:32}),i.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Error al cargar imagen"})]});const w=()=>{n&&n(g)},_=o?g:p;return i.jsxs("div",{className:`relative ${r} group`,children:[i.jsx("img",{src:_,alt:e,className:`w-full h-full object-${l} transition-opacity duration-300 ${d?"opacity-0":"opacity-100"}`,onLoad:()=>h(!1),onError:()=>{u(!0),h(!1)},onClick:w,style:{cursor:n?"pointer":"default"}}),d&&i.jsx("div",{className:"absolute inset-0 bg-slate-200 dark:bg-slate-700 animate-pulse flex items-center justify-center",children:i.jsx($d,{className:"text-slate-400",size:24})}),a&&b&&!d&&i.jsxs("div",{className:"absolute top-2 right-2 bg-emerald-500 text-white text-xs px-2 py-1 rounded-full shadow-lg flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"HD"]}),s&&n&&!d&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:i.jsx(IAe,{className:"text-white drop-shadow-lg",size:32})})]})},OCe=({imageUrl:t,onClose:e})=>{if(!t)return null;const{preview:r}=Tae(t);return i.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:e,children:[i.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition z-10",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("img",{src:r,alt:"Vista ampliada",className:"max-w-full max-h-full object-contain",onClick:n=>n.stopPropagation()})]})},kae=()=>{const[t,e]=S.useState(null),r=s=>{e(s)},n=()=>{e(null)};return{openLightbox:r,closeLightbox:n,LightboxComponent:t?i.jsx(OCe,{imageUrl:t,onClose:n}):null}},d5=()=>{const{userData:t}=fa(),e=$s(),r=(t==null?void 0:t.rol)==="recolector"&&(t!=null&&t.uid)?[["userId","==",t.uid]]:[],{data:n,loading:a}=Eae("recolecciones",r,[["fechaCreacion","desc"]],{}),{openLightbox:s,LightboxComponent:o}=kae(),[l,c]=S.useState([]),[u,d]=S.useState(""),[h,p]=S.useState("todas"),[g,b]=S.useState("todas"),[w,_]=S.useState(!1),[N,A]=S.useState(null);S.useEffect(()=>{n&&n.length>0?c(n):a||c([])},[n,a]);const j=V=>{console.log(" Ver detalle de recoleccin:",V),A(V),_(!0)},P=()=>{_(!1),A(null)},U=()=>{e("/recolecciones/nueva")},G=l.filter(V=>{var R,B,F,ee;if(u){const Z=u.toLowerCase(),ce=t$(V).toLowerCase(),ne=r$(V).toLowerCase();if(!(((R=V.codigoTracking)==null?void 0:R.toLowerCase().includes(Z))||((B=V.zona)==null?void 0:B.toLowerCase().includes(Z))||((F=V.sector)==null?void 0:F.toLowerCase().includes(Z))||ce.includes(Z)||ne.includes(Z)||((ee=V.items)==null?void 0:ee.some(me=>{var Ee;return(Ee=me.descripcion)==null?void 0:Ee.toLowerCase().includes(Z)}))))return!1}return!(h!=="todas"&&V.estadoGeneral!==h||g!=="todas"&&V.zona!==g)}),O=V=>({sin_confirmar:"bg-amber-100 text-amber-800",pendiente_recoleccion:"bg-amber-100 text-amber-800",recolectada:"bg-emerald-100 text-emerald-800",en_contenedor_usa:"bg-purple-100 text-purple-800",incompleta_usa:"bg-amber-100 text-amber-800",en_transito_rd:"bg-indigo-100 text-indigo-800",recibida_rd:"bg-indigo-100 text-indigo-800",pendiente_confirmacion:"bg-amber-100 text-amber-800",confirmada:"bg-indigo-100 text-indigo-800",en_ruta:"bg-purple-100 text-purple-800",lista_para_entregar:"bg-teal-100 text-teal-800",entregada:"bg-emerald-100 text-emerald-800",no_entregada:"bg-rose-100 text-rose-800"})[V]||"bg-slate-100 text-slate-800",D=V=>({sin_confirmar:"Sin Confirmar",pendiente_recoleccion:"Pendiente Recoleccin",recolectada:"Recolectada",en_contenedor_usa:"En Contenedor USA",incompleta_usa:"Incompleta USA",en_transito_rd:"En Trnsito RD",recibida_rd:"Recibida RD",pendiente_confirmacion:"Pendiente Confirmacin",confirmada:"Confirmada",en_ruta:"En Ruta",lista_para_entregar:"Lista para Entregar",entregada:"Entregada",no_entregada:"No Entregada"})[V]||V,I={total:l.length,pendientes:l.filter(V=>V.estadoGeneral==="pendiente_recoleccion"||V.estadoGeneral==="sin_confirmar").length,recolectadas:l.filter(V=>V.estadoGeneral==="recolectada").length,enAlmacen:l.filter(V=>V.estadoGeneral==="en_contenedor_usa").length};return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx(jae,{}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Recolecciones"}),i.jsx(Sae,{isLive:!0,showText:!0})]}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Gestiona todas las recolecciones del sistema"})]}),((t==null?void 0:t.rol)==="recolector"||(t==null?void 0:t.rol)==="admin_general"||(t==null?void 0:t.rol)==="super_admin")&&i.jsxs("button",{onClick:U,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Hd,{size:20}),"Nueva Recoleccin"]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(qd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),i.jsx("input",{type:"text",placeholder:"Buscar por cdigo, zona, nombre...",value:u,onChange:V=>d(V.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsx("div",{children:i.jsxs("select",{value:h,onChange:V=>p(V.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"todas",children:"Todos los estados"}),i.jsx("option",{value:"sin_confirmar",children:"Sin Confirmar"}),i.jsx("option",{value:"pendiente_recoleccion",children:"Pendiente Recoleccin"}),i.jsx("option",{value:"recolectada",children:"Recolectada"}),i.jsx("option",{value:"en_contenedor_usa",children:"En Contenedor USA"}),i.jsx("option",{value:"incompleta_usa",children:"Incompleta USA"}),i.jsx("option",{value:"en_transito_rd",children:"En Trnsito RD"}),i.jsx("option",{value:"recibida_rd",children:"Recibida RD"}),i.jsx("option",{value:"pendiente_confirmacion",children:"Pendiente Confirmacin"}),i.jsx("option",{value:"confirmada",children:"Confirmada"}),i.jsx("option",{value:"en_ruta",children:"En Ruta"}),i.jsx("option",{value:"entregada",children:"Entregada"}),i.jsx("option",{value:"no_entregada",children:"No Entregada"})]})}),i.jsx("div",{children:i.jsxs("select",{value:g,onChange:V=>b(V.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"todas",children:"Todas las zonas"}),i.jsx("option",{value:"Capital",children:"Capital"}),i.jsx("option",{value:"Sur",children:"Sur"}),i.jsx("option",{value:"Local",children:"Local (Ban)"}),i.jsx("option",{value:"Cibao",children:"Cibao"}),i.jsx("option",{value:"Este",children:"Este"})]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"Total"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:I.total})]}),i.jsx(Br,{className:"text-indigo-600",size:32})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"Pendientes"}),i.jsx("p",{className:"text-2xl font-bold text-amber-600",children:I.pendientes})]}),i.jsx(Yl,{className:"text-amber-600",size:32})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"Recolectadas"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:I.recolectadas})]}),i.jsx(Fa,{className:"text-emerald-600",size:32})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"En Almacn"}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:I.enAlmacen})]}),i.jsx(Br,{className:"text-purple-600",size:32})]})})]}),G.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[i.jsx(Br,{className:"mx-auto text-slate-400 mb-4",size:48}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No hay recolecciones"}),i.jsx("p",{className:"text-slate-600",children:u||h!=="todas"||g!=="todas"?"No se encontraron recolecciones con esos filtros":"An no hay recolecciones registradas"})]}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:G.map(V=>{var ee,Z,ce,ne,ae,me;const R=t$(V),B=r$(V),F=CCe(V);return i.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:V.codigoTracking}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${O(V.estadoGeneral)}`,children:D(V.estadoGeneral)})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Yl,{size:14}),new Date(((ee=V.fechaCreacion)==null?void 0:ee.seconds)*1e3||V.createdAt||Date.now()).toLocaleDateString("es-DO")]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fa,{size:14}),V.zona||((Z=V.destinatario)==null?void 0:Z.zona)||"N/A",(V.sector||((ce=V.destinatario)==null?void 0:ce.sector))&&` - ${V.sector||((ne=V.destinatario)==null?void 0:ne.sector)}`]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Br,{size:14}),((ae=V.items)==null?void 0:ae.length)||0," item(s)"]})]})]}),i.jsxs("button",{onClick:()=>j(V),className:"bg-indigo-50 text-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-100 transition flex items-center gap-2",children:[i.jsx(Tu,{size:18}),"Ver Detalle"]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(bl,{size:14,className:"text-slate-600"}),i.jsx("span",{className:"font-medium text-slate-900",children:R}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(vl,{size:14,className:"text-slate-600"}),i.jsx("span",{className:"text-slate-700",children:B})]}),i.jsx("p",{className:"text-xs text-slate-600 mt-1 ml-5",children:F})]}),i.jsxs("div",{className:"space-y-2",children:[(V.items||[]).slice(0,2).map((Ee,ye)=>i.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700 bg-slate-50 p-3 rounded-lg",children:[i.jsx(Br,{className:"text-slate-400",size:16}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:Ee.descripcion||Ee.producto||"Sin descripcin"}),i.jsx("div",{className:"flex gap-4 text-xs text-slate-600 mt-1",children:i.jsxs("span",{children:["Cantidad: ",Ee.cantidad]})})]})]},ye)),((me=V.items)==null?void 0:me.length)>2&&i.jsxs("p",{className:"text-xs text-slate-500 text-center",children:["Y ",V.items.length-2," item(s) ms..."]})]}),V.fotos&&V.fotos.length>0&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Kf,{size:16}),i.jsxs("span",{children:[V.fotos.length," foto(s) adjunta(s)"]})]})})]},V.id)})}),w&&N&&(()=>{var B,F,ee,Z;const V=jCe(N),R=TCe(N);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:N.codigoTracking}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O(N.estadoGeneral)}`,children:D(N.estadoGeneral)}),i.jsxs("span",{className:"text-sm text-slate-600 flex items-center gap-1",children:[i.jsx(Fa,{size:14}),N.zona||((B=N.destinatario)==null?void 0:B.zona),(N.sector||((F=N.destinatario)==null?void 0:F.sector))&&` - ${N.sector||((ee=N.destinatario)==null?void 0:ee.sector)}`]})]})]}),i.jsx("button",{onClick:P,className:"text-slate-400 hover:text-slate-600 transition",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(Br,{className:"text-emerald-600",size:20}),"Informacin del Remitente (Quien Enva)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-emerald-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(bl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Nombre"}),i.jsx("p",{className:"text-slate-900 font-medium",children:R.nombre})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(vl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Telfono"}),i.jsx("p",{className:"text-slate-900 font-medium",children:R.telefono})]})]}),R.email&&R.email!=="N/A"&&R.email!==""&&i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(uh,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email"}),i.jsx("p",{className:"text-slate-900 font-medium",children:R.email})]})]}),i.jsxs("div",{className:"flex items-start gap-2 md:col-span-2",children:[i.jsx(w8,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Direccin de Recogida"}),i.jsx("p",{className:"text-slate-900 font-medium",children:R.direccion})]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(Fa,{className:"text-indigo-600",size:20}),"Informacin del Destinatario (Quien Recibe)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-indigo-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(bl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Cliente"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.nombre})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(vl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Telfono"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.telefono})]})]}),V.email&&V.email!=="N/A"&&V.email!==""&&i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(uh,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.email})]})]}),i.jsxs("div",{className:"flex items-start gap-2 md:col-span-2",children:[i.jsx(w8,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Direccin de Entrega"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.direccion})]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:["Items (",((Z=N.items)==null?void 0:Z.length)||0,")"]}),i.jsx("div",{className:"space-y-3",children:(N.items||[]).map((ce,ne)=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Br,{className:"text-purple-600",size:20}),i.jsxs("h4",{className:"font-semibold text-slate-900",children:["Item #",ne+1]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Descripcin"}),i.jsx("p",{className:"text-slate-900",children:ce.descripcion||ce.producto||"Sin descripcin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Cantidad"}),i.jsx("p",{className:"text-slate-900",children:ce.cantidad})]}),ce.precio&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Precio"}),i.jsxs("p",{className:"text-slate-900",children:["$",ce.precio]})]})]})]},ce.id||ne))})]}),N.fotos&&N.fotos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:["Fotos de la Recoleccin (",N.fotos.length,")"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:N.fotos.map((ce,ne)=>i.jsx("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-slate-200 cursor-pointer",children:i.jsx(Cae,{src:ce.preview||ce.url||ce,alt:`Foto de recoleccin ${ne+1}`,className:"w-full h-full object-cover",onClick:()=>s(ce.preview||ce.url||ce),showOptimizedBadge:!0,showZoomIcon:!0})},ne))})]}),o,N.notas&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Notas"}),i.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:i.jsx("p",{className:"text-slate-700",children:N.notas})})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200 flex justify-end",children:i.jsx("button",{onClick:P,className:"px-6 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition",children:"Cerrar"})})]})})})})()]})},Iae=({items:t=[],onItemsChange:e,facturacion:r={},onFacturacionChange:n,readOnly:a=!1,mostrarPagos:s=!0,recoleccionId:o=null})=>{const[l,c]=S.useState(t),[u,d]=S.useState(r.estadoPago||"pendiente_pago"),[h,p]=S.useState(r.metodoPago||""),[g,b]=S.useState(r.montoPagado||0),[w,_]=S.useState(r.notas||""),[N,A]=S.useState(r.archivoUrl||null),[j,P]=S.useState(!1),[U,G]=S.useState(!1),[O,D]=S.useState(0),[I,V]=S.useState(0),[R,B]=S.useState(0),[F,ee]=S.useState(0);S.useEffect(()=>{c(t)},[t]),S.useEffect(()=>{Z()},[l,g,u]);const Z=()=>{const H=l.reduce((ke,Ce)=>{const xe=parseFloat(Ce.precio)||0,Ie=parseInt(Ce.cantidad)||1;return ke+xe*Ie},0),Y=H*.18,X=H+Y;let re=X,se=parseFloat(g)||0;u==="pagada"?(se=X,re=0):u==="pago_parcial"?re=X-se:u==="cobro_contra_entrega"&&(se=0,re=X),D(H),V(Y),B(X),ee(Math.max(0,re)),n&&n({subtotal:H,impuestos:Y,total:X,estadoPago:u,metodoPago:h,montoPagado:se,saldoPendiente:Math.max(0,re),notas:w,archivoUrl:N})},ce=(H,Y)=>{const X=[...l];X[H]={...X[H],precio:Y},c(X),e&&e(X)},ne=H=>{d(H),H==="pagada"?b(R):(H==="pendiente_pago"||H==="cobro_contra_entrega")&&b(0)},ae=()=>{const H={pagada:{color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200",icon:en,text:"Pagada"},pendiente_pago:{color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200",icon:ms,text:"Pendiente de Pago"},pago_parcial:{color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",icon:Xo,text:"Pago Parcial"},cobro_contra_entrega:{color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",icon:_Ae,text:"Cobro Contra Entrega"}},Y=H[u]||H.pendiente_pago,X=Y.icon;return i.jsxs("span",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${Y.color}`,children:[i.jsx(X,{size:16}),Y.text]})},me=H=>`USD$ ${H.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Ee=async H=>{const Y=H.target.files[0];if(!Y||!o)return;const X=new FormData;X.append("factura",Y),P(!0);try{const re=localStorage.getItem("token"),Ce=await(await fetch(`https://proyecto-envios-production.up.railway.app/api/facturacion/recolecciones/${o}/upload`,{method:"POST",headers:{Authorization:`Bearer ${re}`},body:X})).json();Ce.success?(A(Ce.url),alert("Factura subida exitosamente"),n&&n({...r,archivoUrl:Ce.url})):alert("Error: "+Ce.error)}catch(re){console.error("Error subiendo factura:",re),alert("Error al subir la factura")}finally{P(!1)}},ye=async H=>{if(o){G(!0);try{const Y=localStorage.getItem("token"),se=await(await fetch(`https://proyecto-envios-production.up.railway.app/api/facturacion/recolecciones/${o}/send`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({metodo:H})})).json();se.success?alert(`Factura enviada por ${H} exitosamente`):alert("Error: "+(se.error||"No se pudo enviar"))}catch(Y){console.error("Error enviando factura:",Y),alert("Error al enviar la factura")}finally{G(!1)}}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(S3e,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Facturacin"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Precios, impuestos y estado de pago"})]})]}),ae()]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Items y Precios"}),i.jsx("div",{className:"space-y-2",children:l.map((H,Y)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:H.descripcion||H.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",H.cantidad]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"USD$"}),i.jsx("input",{type:"number",value:H.precio,onChange:X=>ce(Y,X.target.value),disabled:a,className:`w-32 px-3 py-2 border rounded-lg text-right font-semibold ${H.precio===""||H.precio===null||H.precio===void 0?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-300 dark:border-slate-600 dark:bg-slate-600 dark:text-white"}`,placeholder:"0.00",step:"0.01",min:"0"})]}),i.jsxs("div",{className:"w-32 text-right",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total"}),i.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:me((parseFloat(H.precio)||0)*(parseInt(H.cantidad)||1))})]})]},Y))})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Subtotal:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:me(O)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"ITBIS (18%):"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:me(I)})]}),i.jsx("div",{className:"border-t border-indigo-200 dark:border-indigo-800 pt-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Total:"}),i.jsx("span",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:me(R)})]})})]}),s&&!a&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:"Gestin de Pago"}),u==="pagada"&&i.jsx("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(en,{className:"text-emerald-600 dark:text-emerald-400 mt-0.5",size:20}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-emerald-800 dark:text-emerald-200",children:"Factura Pagada por Completo"}),i.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 mt-1",children:"Esta factura ya ha sido pagada en su totalidad. No se pueden hacer modificaciones al pago."})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Estado de Pago *"}),i.jsxs("select",{value:u,onChange:H=>ne(H.target.value),disabled:u==="pagada",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"pendiente_pago",children:"Pendiente de Pago"}),i.jsx("option",{value:"pago_parcial",children:"Pago Parcial"}),i.jsx("option",{value:"pagada",children:"Pagada"}),i.jsx("option",{value:"cobro_contra_entrega",children:"Cobro Contra Entrega"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Mtodo de Pago ",u==="pagada"||u==="pago_parcial"?"*":""]}),i.jsxs("select",{value:h,onChange:H=>p(H.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),i.jsx("option",{value:"efectivo",children:" Efectivo"}),i.jsx("option",{value:"transferencia",children:" Transferencia Bancaria"}),i.jsx("option",{value:"tarjeta",children:" Tarjeta de Crdito/Dbito"}),i.jsx("option",{value:"cheque",children:" Cheque"}),i.jsx("option",{value:"otro",children:" Otro"})]})]}),u==="pago_parcial"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto Pagado"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"USD$"}),i.jsx("input",{type:"number",value:g,onChange:H=>b(H.target.value),disabled:u==="pagada",className:`flex-1 px-3 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed ${g===""?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white"}`,placeholder:"0.00",step:"0.01",min:"0",max:R})]}),i.jsx("div",{className:"mt-2 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Saldo Pendiente:"}),i.jsx("span",{className:"text-lg font-bold text-amber-900 dark:text-amber-100",children:me(F)})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas / Observaciones"}),i.jsx("textarea",{value:w,onChange:H=>_(H.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Observaciones sobre el pago..."})]})]}),a&&s&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 space-y-2",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Informacin de Pago"}),u==="pago_parcial"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Monto Pagado:"}),i.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:me(g)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Saldo Pendiente:"}),i.jsx("span",{className:"font-semibold text-rose-600 dark:text-rose-400",children:me(F)})]})]}),h&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Mtodo de Pago:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:h})]}),w&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("strong",{children:"Notas:"})," ",w]})})]}),o&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsxs("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Au,{size:20,className:"text-indigo-600"}),"Documento de Factura"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:N?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-600 rounded border border-emerald-200 dark:border-emerald-800",children:[i.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 dark:text-emerald-300",children:[i.jsx(en,{size:18}),i.jsx("span",{className:"font-medium",children:"Factura Disponible"})]}),i.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm",children:"Ver Documento"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>ye("email"),disabled:U,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-400 transition",children:[i.jsx(uh,{size:16}),U?"Enviando...":"Enviar Email"]}),i.jsxs("button",{onClick:()=>ye("whatsapp"),disabled:U,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:bg-slate-400 transition",children:[i.jsx($N,{size:16}),U?"Enviando...":"Enviar WhatsApp"]})]})]}):i.jsxs("div",{className:"text-center py-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3",children:"No hay factura adjunta. Sube el PDF o imagen de la factura."}),i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-600 border border-slate-300 dark:border-slate-500 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-500 transition",children:[i.jsx(_3,{size:18,className:"text-slate-600 dark:text-slate-300"}),i.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:j?"Subiendo...":"Subir Factura"}),i.jsx("input",{type:"file",accept:".pdf,image/*",className:"hidden",onChange:Ee,disabled:j})]})]})})]})]})};var x7={},QA={},El={};Object.defineProperty(El,"__esModule",{value:!0});function PCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var RCe=function t(e,r){PCe(this,t),this.data=e,this.text=r.text||e,this.options=r};El.default=RCe;Object.defineProperty(QA,"__esModule",{value:!0});QA.CODE39=void 0;var DCe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),MCe=El,LCe=FCe(MCe);function FCe(t){return t&&t.__esModule?t:{default:t}}function BCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UCe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var VCe=function(t){zCe(e,t);function e(r,n){return BCe(this,e),r=r.toUpperCase(),n.mod43&&(r+=qCe(GCe(r))),UCe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return DCe(e,[{key:"encode",value:function(){for(var n=cT("*"),a=0;a<this.data.length;a++)n+=cT(this.data[a])+"0";return n+=cT("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(LCe.default),Oae=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],$Ce=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function cT(t){return HCe(Pae(t))}function HCe(t){return $Ce[t].toString(2)}function qCe(t){return Oae[t]}function Pae(t){return Oae.indexOf(t)}function GCe(t){for(var e=0,r=0;r<t.length;r++)e+=Pae(t[r]);return e=e%43,e}QA.CODE39=VCe;var Pd={},v7={},hv={},os={};Object.defineProperty(os,"__esModule",{value:!0});var rb;function uT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Rae=os.SET_A=0,Dae=os.SET_B=1,Mae=os.SET_C=2;os.SHIFT=98;var WCe=os.START_A=103,KCe=os.START_B=104,XCe=os.START_C=105;os.MODULO=103;os.STOP=106;os.FNC1=207;os.SET_BY_CODE=(rb={},uT(rb,WCe,Rae),uT(rb,KCe,Dae),uT(rb,XCe,Mae),rb);os.SWAP={101:Rae,100:Dae,99:Mae};os.A_START_CHAR="";os.B_START_CHAR="";os.C_START_CHAR="";os.A_CHARS="[\0-_-]";os.B_CHARS="[ --]";os.C_CHARS="(*[0-9]{2}*)";os.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(hv,"__esModule",{value:!0});var YCe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ZCe=El,QCe=JCe(ZCe),hc=os;function JCe(t){return t&&t.__esModule?t:{default:t}}function eke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function rke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var nke=function(t){rke(e,t);function e(r,n){eke(this,e);var a=tke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.substring(1),n));return a.bytes=r.split("").map(function(s){return s.charCodeAt(0)}),a}return YCe(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,a=n.shift()-105,s=hc.SET_BY_CODE[a];if(s===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(hc.FNC1);var o=e.next(n,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(a)+o.result+e.getBar((o.checksum+a)%hc.MODULO)+e.getBar(hc.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return hc.BARS[n]?hc.BARS[n].toString():""}},{key:"correctIndex",value:function(n,a){if(a===hc.SET_A){var s=n.shift();return s<32?s+64:s-32}else return a===hc.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,a,s){if(!n.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(n[0]>=200){l=n.shift()-105;var c=hc.SWAP[l];c!==void 0?o=e.next(n,a+1,c):((s===hc.SET_A||s===hc.SET_B)&&l===hc.SHIFT&&(n[0]=s===hc.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),o=e.next(n,a+1,s))}else l=e.correctIndex(n,s),o=e.next(n,a+1,s);var u=e.getBar(l),d=l*a;return{result:u+o.result,checksum:d+o.checksum}}}]),e}(QCe.default);hv.default=nke;var b7={};Object.defineProperty(b7,"__esModule",{value:!0});var F0=os,Lae=function(e){return e.match(new RegExp("^"+F0.A_CHARS+"*"))[0].length},Fae=function(e){return e.match(new RegExp("^"+F0.B_CHARS+"*"))[0].length},Bae=function(e){return e.match(new RegExp("^"+F0.C_CHARS+"*"))[0]};function y7(t,e){var r=e?F0.A_CHARS:F0.B_CHARS,n=t.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+""+Uae(t.substring(n[1].length));var a=t.match(new RegExp("^"+r+"+"))[0];return a.length===t.length?t:a+String.fromCharCode(e?205:206)+y7(t.substring(a.length),!e)}function Uae(t){var e=Bae(t),r=e.length;if(r===t.length)return t;t=t.substring(r);var n=Lae(t)>=Fae(t);return e+String.fromCharCode(n?206:205)+y7(t,n)}b7.default=function(t){var e=void 0,r=Bae(t).length;if(r>=2)e=F0.C_START_CHAR+Uae(t);else{var n=Lae(t)>Fae(t);e=(n?F0.A_START_CHAR:F0.B_START_CHAR)+y7(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(a,s){return""+s})};Object.defineProperty(v7,"__esModule",{value:!0});var ake=hv,ske=zae(ake),ike=b7,oke=zae(ike);function zae(t){return t&&t.__esModule?t:{default:t}}function lke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uke=function(t){cke(e,t);function e(r,n){if(lke(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(r))var a=dT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,oke.default)(r),n));else var a=dT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return dT(a)}return e}(ske.default);v7.default=uke;var w7={};Object.defineProperty(w7,"__esModule",{value:!0});var dke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),fke=hv,hke=mke(fke),n$=os;function mke(t){return t&&t.__esModule?t:{default:t}}function pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function xke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vke=function(t){xke(e,t);function e(r,n){return pke(this,e),gke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n$.A_START_CHAR+r,n))}return dke(e,[{key:"valid",value:function(){return new RegExp("^"+n$.A_CHARS+"+$").test(this.data)}}]),e}(hke.default);w7.default=vke;var _7={};Object.defineProperty(_7,"__esModule",{value:!0});var bke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),yke=hv,wke=_ke(yke),a$=os;function _ke(t){return t&&t.__esModule?t:{default:t}}function Nke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Ake(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ske=function(t){Ake(e,t);function e(r,n){return Nke(this,e),Eke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a$.B_START_CHAR+r,n))}return bke(e,[{key:"valid",value:function(){return new RegExp("^"+a$.B_CHARS+"+$").test(this.data)}}]),e}(wke.default);_7.default=Ske;var N7={};Object.defineProperty(N7,"__esModule",{value:!0});var jke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Tke=hv,Cke=kke(Tke),s$=os;function kke(t){return t&&t.__esModule?t:{default:t}}function Ike(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Pke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Rke=function(t){Pke(e,t);function e(r,n){return Ike(this,e),Oke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s$.C_START_CHAR+r,n))}return jke(e,[{key:"valid",value:function(){return new RegExp("^"+s$.C_CHARS+"+$").test(this.data)}}]),e}(Cke.default);N7.default=Rke;Object.defineProperty(Pd,"__esModule",{value:!0});Pd.CODE128C=Pd.CODE128B=Pd.CODE128A=Pd.CODE128=void 0;var Dke=v7,Mke=JA(Dke),Lke=w7,Fke=JA(Lke),Bke=_7,Uke=JA(Bke),zke=N7,Vke=JA(zke);function JA(t){return t&&t.__esModule?t:{default:t}}Pd.CODE128=Mke.default;Pd.CODE128A=Fke.default;Pd.CODE128B=Uke.default;Pd.CODE128C=Vke.default;var Fl={},E7={},Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.SIDE_BIN="101";Ou.MIDDLE_BIN="01010";Ou.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};Ou.EAN2_STRUCTURE=["LL","LG","GL","GG"];Ou.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];Ou.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var eS={},fg={};Object.defineProperty(fg,"__esModule",{value:!0});var $ke=Ou,Hke=function(e,r,n){var a=e.split("").map(function(o,l){return $ke.BINARIES[r[l]]}).map(function(o,l){return o?o[e[l]]:""});if(n){var s=e.length-1;a=a.map(function(o,l){return l<s?o+n:o})}return a.join("")};fg.default=Hke;Object.defineProperty(eS,"__esModule",{value:!0});var qke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Pg=Ou,Gke=fg,i$=Vae(Gke),Wke=El,Kke=Vae(Wke);function Vae(t){return t&&t.__esModule?t:{default:t}}function Xke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Zke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Qke=function(t){Zke(e,t);function e(r,n){Xke(this,e);var a=Yke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize,a.guardHeight=n.height+a.fontSize/2+n.textMargin,a}return qke(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,a){return this.text.substr(n,a)}},{key:"leftEncode",value:function(n,a){return(0,i$.default)(n,a)}},{key:"rightText",value:function(n,a){return this.text.substr(n,a)}},{key:"rightEncode",value:function(n,a){return(0,i$.default)(n,a)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},a={height:this.guardHeight};return[{data:Pg.SIDE_BIN,options:a},{data:this.leftEncode(),text:this.leftText(),options:n},{data:Pg.MIDDLE_BIN,options:a},{data:this.rightEncode(),text:this.rightText(),options:n},{data:Pg.SIDE_BIN,options:a}]}},{key:"encodeFlat",value:function(){var n=[Pg.SIDE_BIN,this.leftEncode(),Pg.MIDDLE_BIN,this.rightEncode(),Pg.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),e}(Kke.default);eS.default=Qke;Object.defineProperty(E7,"__esModule",{value:!0});var Jke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),nb=function t(e,r,n){e===null&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(a===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,r,n)}else{if("value"in a)return a.value;var o=a.get;return o===void 0?void 0:o.call(n)}},e8e=Ou,t8e=eS,r8e=n8e(t8e);function n8e(t){return t&&t.__esModule?t:{default:t}}function a8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function i8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o$=function(e){var r=e.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,a,s){return s%2?n+a*3:n+a},0);return(10-r%10)%10},o8e=function(t){i8e(e,t);function e(r,n){a8e(this,e),r.search(/^[0-9]{12}$/)!==-1&&(r+=o$(r));var a=s8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.lastChar=n.lastChar,a}return Jke(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===o$(this.data)}},{key:"leftText",value:function(){return nb(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),a=e8e.EAN13_STRUCTURE[this.data[0]];return nb(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,a)}},{key:"rightText",value:function(){return nb(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return nb(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=nb(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),e}(r8e.default);E7.default=o8e;var A7={};Object.defineProperty(A7,"__esModule",{value:!0});var l8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f5=function t(e,r,n){e===null&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(a===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,r,n)}else{if("value"in a)return a.value;var o=a.get;return o===void 0?void 0:o.call(n)}},c8e=eS,u8e=d8e(c8e);function d8e(t){return t&&t.__esModule?t:{default:t}}function f8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function m8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l$=function(e){var r=e.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,a,s){return s%2?n+a:n+a*3},0);return(10-r%10)%10},p8e=function(t){m8e(e,t);function e(r,n){return f8e(this,e),r.search(/^[0-9]{7}$/)!==-1&&(r+=l$(r)),h8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return l8e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===l$(this.data)}},{key:"leftText",value:function(){return f5(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return f5(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return f5(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return f5(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),e}(u8e.default);A7.default=p8e;var S7={};Object.defineProperty(S7,"__esModule",{value:!0});var g8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),x8e=Ou,v8e=fg,b8e=$ae(v8e),y8e=El,w8e=$ae(y8e);function $ae(t){return t&&t.__esModule?t:{default:t}}function _8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function E8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var A8e=function(e){var r=e.split("").map(function(n){return+n}).reduce(function(n,a,s){return s%2?n+a*9:n+a*3},0);return r%10},S8e=function(t){E8e(e,t);function e(r,n){return _8e(this,e),N8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return g8e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=x8e.EAN5_STRUCTURE[A8e(this.data)];return{data:"1011"+(0,b8e.default)(this.data,n,"01"),text:this.text}}}]),e}(w8e.default);S7.default=S8e;var j7={};Object.defineProperty(j7,"__esModule",{value:!0});var j8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),T8e=Ou,C8e=fg,k8e=Hae(C8e),I8e=El,O8e=Hae(I8e);function Hae(t){return t&&t.__esModule?t:{default:t}}function P8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function D8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var M8e=function(t){D8e(e,t);function e(r,n){return P8e(this,e),R8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return j8e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=T8e.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,k8e.default)(this.data,n,"01"),text:this.text}}}]),e}(O8e.default);j7.default=M8e;var Aw={};Object.defineProperty(Aw,"__esModule",{value:!0});var L8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Aw.checksum=$8;var F8e=fg,Rg=qae(F8e),B8e=El,U8e=qae(B8e);function qae(t){return t&&t.__esModule?t:{default:t}}function z8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var H8e=function(t){$8e(e,t);function e(r,n){z8e(this,e),r.search(/^[0-9]{11}$/)!==-1&&(r+=$8(r));var a=V8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.displayValue=n.displayValue,n.fontSize>n.width*10?a.fontSize=n.width*10:a.fontSize=n.fontSize,a.guardHeight=n.height+a.fontSize/2+n.textMargin,a}return L8e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==$8(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,Rg.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,Rg.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,Rg.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,Rg.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,Rg.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,Rg.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),e}(U8e.default);function $8(t){var e=0,r;for(r=1;r<11;r+=2)e+=parseInt(t[r]);for(r=0;r<11;r+=2)e+=parseInt(t[r])*3;return(10-e%10)%10}Aw.default=H8e;var T7={};Object.defineProperty(T7,"__esModule",{value:!0});var q8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),G8e=fg,W8e=Gae(G8e),K8e=El,X8e=Gae(K8e),Y8e=Aw;function Gae(t){return t&&t.__esModule?t:{default:t}}function Z8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Q8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var J8e=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],eIe=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],tIe=function(t){Q8e(e,t);function e(r,n){Z8e(this,e);var a=fT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));if(a.isValid=!1,r.search(/^[0-9]{6}$/)!==-1)a.middleDigits=r,a.upcA=c$(r,"0"),a.text=n.text||""+a.upcA[0]+r+a.upcA[a.upcA.length-1],a.isValid=!0;else if(r.search(/^[01][0-9]{7}$/)!==-1)if(a.middleDigits=r.substring(1,r.length-1),a.upcA=c$(a.middleDigits,r[0]),a.upcA[a.upcA.length-1]===r[r.length-1])a.isValid=!0;else return fT(a);else return fT(a);return a.displayValue=n.displayValue,n.fontSize>n.width*10?a.fontSize=n.width*10:a.fontSize=n.fontSize,a.guardHeight=n.height+a.fontSize/2+n.textMargin,a}return q8e(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],a=this.upcA[this.upcA.length-1],s=eIe[parseInt(a)][parseInt(n)];return(0,W8e.default)(this.middleDigits,s)}}]),e}(X8e.default);function c$(t,e){for(var r=parseInt(t[t.length-1]),n=J8e[r],a="",s=0,o=0;o<n.length;o++){var l=n[o];l==="X"?a+=t[s++]:a+=l}return a=""+e+a,""+a+(0,Y8e.checksum)(a)}T7.default=tIe;Object.defineProperty(Fl,"__esModule",{value:!0});Fl.UPCE=Fl.UPC=Fl.EAN2=Fl.EAN5=Fl.EAN8=Fl.EAN13=void 0;var rIe=E7,nIe=mv(rIe),aIe=A7,sIe=mv(aIe),iIe=S7,oIe=mv(iIe),lIe=j7,cIe=mv(lIe),uIe=Aw,dIe=mv(uIe),fIe=T7,hIe=mv(fIe);function mv(t){return t&&t.__esModule?t:{default:t}}Fl.EAN13=nIe.default;Fl.EAN8=sIe.default;Fl.EAN5=oIe.default;Fl.EAN2=cIe.default;Fl.UPC=dIe.default;Fl.UPCE=hIe.default;var Px={},tS={},Sw={};Object.defineProperty(Sw,"__esModule",{value:!0});Sw.START_BIN="1010";Sw.END_BIN="11101";Sw.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(tS,"__esModule",{value:!0});var mIe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),h5=Sw,pIe=El,gIe=xIe(pIe);function xIe(t){return t&&t.__esModule?t:{default:t}}function vIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function yIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var wIe=function(t){yIe(e,t);function e(){return vIe(this,e),bIe(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return mIe(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,a=this.data.match(/.{2}/g).map(function(s){return n.encodePair(s)}).join("");return{data:h5.START_BIN+a+h5.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var a=h5.BINARIES[n[1]];return h5.BINARIES[n[0]].split("").map(function(s,o){return(s==="1"?"111":"1")+(a[o]==="1"?"000":"0")}).join("")}}]),e}(gIe.default);tS.default=wIe;var C7={};Object.defineProperty(C7,"__esModule",{value:!0});var _Ie=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),NIe=tS,EIe=AIe(NIe);function AIe(t){return t&&t.__esModule?t:{default:t}}function SIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function TIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u$=function(e){var r=e.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,a,s){return n+a*(3-s%2*2)},0);return Math.ceil(r/10)*10-r},CIe=function(t){TIe(e,t);function e(r,n){return SIe(this,e),r.search(/^[0-9]{13}$/)!==-1&&(r+=u$(r)),jIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return _Ie(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===u$(this.data)}}]),e}(EIe.default);C7.default=CIe;Object.defineProperty(Px,"__esModule",{value:!0});Px.ITF14=Px.ITF=void 0;var kIe=tS,IIe=Wae(kIe),OIe=C7,PIe=Wae(OIe);function Wae(t){return t&&t.__esModule?t:{default:t}}Px.ITF=IIe.default;Px.ITF14=PIe.default;var xu={},hg={};Object.defineProperty(hg,"__esModule",{value:!0});var RIe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),DIe=El,MIe=LIe(DIe);function LIe(t){return t&&t.__esModule?t:{default:t}}function FIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function UIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var zIe=function(t){UIe(e,t);function e(r,n){return FIe(this,e),BIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return RIe(e,[{key:"encode",value:function(){for(var n="110",a=0;a<this.data.length;a++){var s=parseInt(this.data[a]),o=s.toString(2);o=VIe(o,4-o.length);for(var l=0;l<o.length;l++)n+=o[l]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(MIe.default);function VIe(t,e){for(var r=0;r<e;r++)t="0"+t;return t}hg.default=zIe;var k7={},mg={};Object.defineProperty(mg,"__esModule",{value:!0});mg.mod10=$Ie;mg.mod11=HIe;function $Ie(t){for(var e=0,r=0;r<t.length;r++){var n=parseInt(t[r]);(r+t.length)%2===0?e+=n:e+=n*2%10+Math.floor(n*2/10)}return(10-e%10)%10}function HIe(t){for(var e=0,r=[2,3,4,5,6,7],n=0;n<t.length;n++){var a=parseInt(t[t.length-1-n]);e+=r[n%r.length]*a}return(11-e%11)%11}Object.defineProperty(k7,"__esModule",{value:!0});var qIe=hg,GIe=KIe(qIe),WIe=mg;function KIe(t){return t&&t.__esModule?t:{default:t}}function XIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ZIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QIe=function(t){ZIe(e,t);function e(r,n){return XIe(this,e),YIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,WIe.mod10)(r),n))}return e}(GIe.default);k7.default=QIe;var I7={};Object.defineProperty(I7,"__esModule",{value:!0});var JIe=hg,eOe=rOe(JIe),tOe=mg;function rOe(t){return t&&t.__esModule?t:{default:t}}function nOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var iOe=function(t){sOe(e,t);function e(r,n){return nOe(this,e),aOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,tOe.mod11)(r),n))}return e}(eOe.default);I7.default=iOe;var O7={};Object.defineProperty(O7,"__esModule",{value:!0});var oOe=hg,lOe=cOe(oOe),d$=mg;function cOe(t){return t&&t.__esModule?t:{default:t}}function uOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function fOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var hOe=function(t){fOe(e,t);function e(r,n){return uOe(this,e),r+=(0,d$.mod10)(r),r+=(0,d$.mod10)(r),dOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(lOe.default);O7.default=hOe;var P7={};Object.defineProperty(P7,"__esModule",{value:!0});var mOe=hg,pOe=gOe(mOe),f$=mg;function gOe(t){return t&&t.__esModule?t:{default:t}}function xOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yOe=function(t){bOe(e,t);function e(r,n){return xOe(this,e),r+=(0,f$.mod11)(r),r+=(0,f$.mod10)(r),vOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(pOe.default);P7.default=yOe;Object.defineProperty(xu,"__esModule",{value:!0});xu.MSI1110=xu.MSI1010=xu.MSI11=xu.MSI10=xu.MSI=void 0;var wOe=hg,_Oe=jw(wOe),NOe=k7,EOe=jw(NOe),AOe=I7,SOe=jw(AOe),jOe=O7,TOe=jw(jOe),COe=P7,kOe=jw(COe);function jw(t){return t&&t.__esModule?t:{default:t}}xu.MSI=_Oe.default;xu.MSI10=EOe.default;xu.MSI11=SOe.default;xu.MSI1010=TOe.default;xu.MSI1110=kOe.default;var rS={};Object.defineProperty(rS,"__esModule",{value:!0});rS.pharmacode=void 0;var IOe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),OOe=El,POe=ROe(OOe);function ROe(t){return t&&t.__esModule?t:{default:t}}function DOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function LOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var FOe=function(t){LOe(e,t);function e(r,n){DOe(this,e);var a=MOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.number=parseInt(r,10),a}return IOe(e,[{key:"encode",value:function(){for(var n=this.number,a="";!isNaN(n)&&n!=0;)n%2===0?(a="11100"+a,n=(n-2)/2):(a="100"+a,n=(n-1)/2);return a=a.slice(0,-2),{data:a,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(POe.default);rS.pharmacode=FOe;var nS={};Object.defineProperty(nS,"__esModule",{value:!0});nS.codabar=void 0;var BOe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),UOe=El,zOe=VOe(UOe);function VOe(t){return t&&t.__esModule?t:{default:t}}function $Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function qOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var GOe=function(t){qOe(e,t);function e(r,n){$Oe(this,e),r.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(r="A"+r+"A");var a=HOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.toUpperCase(),n));return a.text=a.options.text||a.text.replace(/[A-D]/g,""),a}return BOe(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],a=this.getEncodings(),s=0;s<this.data.length;s++)n.push(a[this.data.charAt(s)]),s!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(zOe.default);nS.codabar=GOe;var Rx={},aS={},Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});Tw.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""];Tw.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Tw.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(aS,"__esModule",{value:!0});var WOe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),m5=Tw,KOe=El,XOe=YOe(KOe);function YOe(t){return t&&t.__esModule?t:{default:t}}function ZOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function JOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ePe=function(t){JOe(e,t);function e(r,n){return ZOe(this,e),QOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return WOe(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.data.split("").flatMap(function(l){return m5.MULTI_SYMBOLS[l]||l}),a=n.map(function(l){return e.getEncoding(l)}).join(""),s=e.checksum(n,20),o=e.checksum(n.concat(s),15);return{text:this.text,data:e.getEncoding("")+a+e.getEncoding(s)+e.getEncoding(o)+e.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(n){return m5.BINARIES[e.symbolValue(n)]}},{key:"getSymbol",value:function(n){return m5.SYMBOLS[n]}},{key:"symbolValue",value:function(n){return m5.SYMBOLS.indexOf(n)}},{key:"checksum",value:function(n,a){var s=n.slice().reverse().reduce(function(o,l,c){var u=c%a+1;return o+e.symbolValue(l)*u},0);return e.getSymbol(s%47)}}]),e}(XOe.default);aS.default=ePe;var R7={};Object.defineProperty(R7,"__esModule",{value:!0});var tPe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),rPe=aS,nPe=aPe(rPe);function aPe(t){return t&&t.__esModule?t:{default:t}}function sPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iPe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function oPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lPe=function(t){oPe(e,t);function e(r,n){return sPe(this,e),iPe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return tPe(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(nPe.default);R7.default=lPe;Object.defineProperty(Rx,"__esModule",{value:!0});Rx.CODE93FullASCII=Rx.CODE93=void 0;var cPe=aS,uPe=Kae(cPe),dPe=R7,fPe=Kae(dPe);function Kae(t){return t&&t.__esModule?t:{default:t}}Rx.CODE93=uPe.default;Rx.CODE93FullASCII=fPe.default;var sS={};Object.defineProperty(sS,"__esModule",{value:!0});sS.GenericBarcode=void 0;var hPe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),mPe=El,pPe=gPe(mPe);function gPe(t){return t&&t.__esModule?t:{default:t}}function xPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vPe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yPe=function(t){bPe(e,t);function e(r,n){return xPe(this,e),vPe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return hPe(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(pPe.default);sS.GenericBarcode=yPe;Object.defineProperty(x7,"__esModule",{value:!0});var wPe=QA,p5=Pd,Dg=Fl,h$=Px,ab=xu,_Pe=rS,NPe=nS,m$=Rx,EPe=sS;x7.default={CODE39:wPe.CODE39,CODE128:p5.CODE128,CODE128A:p5.CODE128A,CODE128B:p5.CODE128B,CODE128C:p5.CODE128C,EAN13:Dg.EAN13,EAN8:Dg.EAN8,EAN5:Dg.EAN5,EAN2:Dg.EAN2,UPC:Dg.UPC,UPCE:Dg.UPCE,ITF14:h$.ITF14,ITF:h$.ITF,MSI:ab.MSI,MSI10:ab.MSI10,MSI11:ab.MSI11,MSI1010:ab.MSI1010,MSI1110:ab.MSI1110,pharmacode:_Pe.pharmacode,codabar:NPe.codabar,CODE93:m$.CODE93,CODE93FullASCII:m$.CODE93FullASCII,GenericBarcode:EPe.GenericBarcode};var pv={};Object.defineProperty(pv,"__esModule",{value:!0});var APe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};pv.default=function(t,e){return APe({},t,e)};var D7={};Object.defineProperty(D7,"__esModule",{value:!0});D7.default=SPe;function SPe(t){var e=[];function r(n){if(Array.isArray(n))for(var a=0;a<n.length;a++)r(n[a]);else n.text=n.text||"",n.data=n.data||"",e.push(n)}return r(t),e}var M7={};Object.defineProperty(M7,"__esModule",{value:!0});M7.default=jPe;function jPe(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var L7={},F7={},iS={};Object.defineProperty(iS,"__esModule",{value:!0});iS.default=TPe;function TPe(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in e)e.hasOwnProperty(r)&&(r=e[r],typeof t[r]=="string"&&(t[r]=parseInt(t[r],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var oS={};Object.defineProperty(oS,"__esModule",{value:!0});var CPe={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};oS.default=CPe;Object.defineProperty(F7,"__esModule",{value:!0});var kPe=iS,IPe=Xae(kPe),OPe=oS,p$=Xae(OPe);function Xae(t){return t&&t.__esModule?t:{default:t}}function PPe(t){var e={};for(var r in p$.default)p$.default.hasOwnProperty(r)&&(t.hasAttribute("jsbarcode-"+r.toLowerCase())&&(e[r]=t.getAttribute("jsbarcode-"+r.toLowerCase())),t.hasAttribute("data-"+r.toLowerCase())&&(e[r]=t.getAttribute("data-"+r.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,IPe.default)(e),e}F7.default=PPe;var B7={},U7={},Ac={};Object.defineProperty(Ac,"__esModule",{value:!0});Ac.getTotalWidthOfEncodings=Ac.calculateEncodingAttributes=Ac.getBarcodePadding=Ac.getEncodingHeight=Ac.getMaximumHeightOfEncodings=void 0;var RPe=pv,DPe=MPe(RPe);function MPe(t){return t&&t.__esModule?t:{default:t}}function Yae(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Zae(t,e,r){if(r.displayValue&&e<t){if(r.textAlign=="center")return Math.floor((t-e)/2);if(r.textAlign=="left")return 0;if(r.textAlign=="right")return Math.floor(t-e)}return 0}function LPe(t,e,r){for(var n=0;n<t.length;n++){var a=t[n],s=(0,DPe.default)(e,a.options),o;s.displayValue?o=UPe(a.text,s,r):o=0;var l=a.data.length*s.width;a.width=Math.ceil(Math.max(o,l)),a.height=Yae(a,s),a.barcodePadding=Zae(o,l,s)}}function FPe(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].width;return e}function BPe(t){for(var e=0,r=0;r<t.length;r++)t[r].height>e&&(e=t[r].height);return e}function UPe(t,e,r){var n;if(r)n=r;else if(typeof document<"u")n=document.createElement("canvas").getContext("2d");else return 0;n.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var a=n.measureText(t);if(!a)return 0;var s=a.width;return s}Ac.getMaximumHeightOfEncodings=BPe;Ac.getEncodingHeight=Yae;Ac.getBarcodePadding=Zae;Ac.calculateEncodingAttributes=LPe;Ac.getTotalWidthOfEncodings=FPe;Object.defineProperty(U7,"__esModule",{value:!0});var zPe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),VPe=pv,$Pe=HPe(VPe),hT=Ac;function HPe(t){return t&&t.__esModule?t:{default:t}}function qPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var GPe=function(){function t(e,r,n){qPe(this,t),this.canvas=e,this.encodings=r,this.options=n}return zPe(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var r=0;r<this.encodings.length;r++){var n=(0,$Pe.default)(this.options,this.encodings[r].options);this.drawCanvasBarcode(n,this.encodings[r]),this.drawCanvasText(n,this.encodings[r]),this.moveCanvasDrawing(this.encodings[r])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var r=this.canvas.getContext("2d");r.save(),(0,hT.calculateEncodingAttributes)(this.encodings,this.options,r);var n=(0,hT.getTotalWidthOfEncodings)(this.encodings),a=(0,hT.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=a,r.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(r.fillStyle=this.options.background,r.fillRect(0,0,this.canvas.width,this.canvas.height)),r.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(r,n){var a=this.canvas.getContext("2d"),s=n.data,o;r.textPosition=="top"?o=r.marginTop+r.fontSize+r.textMargin:o=r.marginTop,a.fillStyle=r.lineColor;for(var l=0;l<s.length;l++){var c=l*r.width+n.barcodePadding;s[l]==="1"?a.fillRect(c,o,r.width,r.height):s[l]&&a.fillRect(c,o,r.width,r.height*s[l])}}},{key:"drawCanvasText",value:function(r,n){var a=this.canvas.getContext("2d"),s=r.fontOptions+" "+r.fontSize+"px "+r.font;if(r.displayValue){var o,l;r.textPosition=="top"?l=r.marginTop+r.fontSize-r.textMargin:l=r.height+r.textMargin+r.marginTop+r.fontSize,a.font=s,r.textAlign=="left"||n.barcodePadding>0?(o=0,a.textAlign="left"):r.textAlign=="right"?(o=n.width-1,a.textAlign="right"):(o=n.width/2,a.textAlign="center"),a.fillText(n.text,o,l)}}},{key:"moveCanvasDrawing",value:function(r){var n=this.canvas.getContext("2d");n.translate(r.width,0)}},{key:"restoreCanvas",value:function(){var r=this.canvas.getContext("2d");r.restore()}}]),t}();U7.default=GPe;var z7={};Object.defineProperty(z7,"__esModule",{value:!0});var WPe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),KPe=pv,XPe=YPe(KPe),mT=Ac;function YPe(t){return t&&t.__esModule?t:{default:t}}function ZPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g5="http://www.w3.org/2000/svg",QPe=function(){function t(e,r,n){ZPe(this,t),this.svg=e,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return WPe(t,[{key:"render",value:function(){var r=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var a=this.encodings[n],s=(0,XPe.default)(this.options,a.options),o=this.createGroup(r,s.marginTop,this.svg);this.setGroupOptions(o,s),this.drawSvgBarcode(o,s,a),this.drawSVGText(o,s,a),r+=a.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,mT.calculateEncodingAttributes)(this.encodings,this.options);var r=(0,mT.getTotalWidthOfEncodings)(this.encodings),n=(0,mT.getMaximumHeightOfEncodings)(this.encodings),a=r+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(a,n),this.options.background&&this.drawRect(0,0,a,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(r,n,a){var s=a.data,o;n.textPosition=="top"?o=n.fontSize+n.textMargin:o=0;for(var l=0,c=0,u=0;u<s.length;u++)c=u*n.width+a.barcodePadding,s[u]==="1"?l++:l>0&&(this.drawRect(c-n.width*l,o,n.width*l,n.height,r),l=0);l>0&&this.drawRect(c-n.width*(l-1),o,n.width*l,n.height,r)}},{key:"drawSVGText",value:function(r,n,a){var s=this.document.createElementNS(g5,"text");if(n.displayValue){var o,l;s.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?l=n.fontSize-n.textMargin:l=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||a.barcodePadding>0?(o=0,s.setAttribute("text-anchor","start")):n.textAlign=="right"?(o=a.width-1,s.setAttribute("text-anchor","end")):(o=a.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",o),s.setAttribute("y",l),s.appendChild(this.document.createTextNode(a.text)),r.appendChild(s)}}},{key:"setSvgAttributes",value:function(r,n){var a=this.svg;a.setAttribute("width",r+"px"),a.setAttribute("height",n+"px"),a.setAttribute("x","0px"),a.setAttribute("y","0px"),a.setAttribute("viewBox","0 0 "+r+" "+n),a.setAttribute("xmlns",g5),a.setAttribute("version","1.1"),a.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(r,n,a){var s=this.document.createElementNS(g5,"g");return s.setAttribute("transform","translate("+r+", "+n+")"),a.appendChild(s),s}},{key:"setGroupOptions",value:function(r,n){r.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(r,n,a,s,o){var l=this.document.createElementNS(g5,"rect");return l.setAttribute("x",r),l.setAttribute("y",n),l.setAttribute("width",a),l.setAttribute("height",s),o.appendChild(l),l}}]),t}();z7.default=QPe;var V7={};Object.defineProperty(V7,"__esModule",{value:!0});var JPe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function eRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var tRe=function(){function t(e,r,n){eRe(this,t),this.object=e,this.encodings=r,this.options=n}return JPe(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();V7.default=tRe;Object.defineProperty(B7,"__esModule",{value:!0});var rRe=U7,nRe=$7(rRe),aRe=z7,sRe=$7(aRe),iRe=V7,oRe=$7(iRe);function $7(t){return t&&t.__esModule?t:{default:t}}B7.default={CanvasRenderer:nRe.default,SVGRenderer:sRe.default,ObjectRenderer:oRe.default};var gv={};Object.defineProperty(gv,"__esModule",{value:!0});function H7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function G7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lRe=function(t){G7(e,t);function e(r,n){H7(this,e);var a=q7(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidInputException",a.symbology=r,a.input=n,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return e}(Error),cRe=function(t){G7(e,t);function e(){H7(this,e);var r=q7(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return e}(Error),uRe=function(t){G7(e,t);function e(){H7(this,e);var r=q7(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return e}(Error);gv.InvalidInputException=lRe;gv.InvalidElementException=cRe;gv.NoElementException=uRe;Object.defineProperty(L7,"__esModule",{value:!0});var dRe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fRe=F7,H8=Qae(fRe),hRe=B7,kb=Qae(hRe),mRe=gv;function Qae(t){return t&&t.__esModule?t:{default:t}}function W7(t){if(typeof t=="string")return pRe(t);if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e.push(W7(t[r]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return gRe(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,H8.default)(t),renderer:kb.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,H8.default)(t),renderer:kb.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:kb.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":dRe(t))==="object"&&!t.nodeName)return{element:t,renderer:kb.default.ObjectRenderer};throw new mRe.InvalidElementException}}function pRe(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var r=[],n=0;n<e.length;n++)r.push(W7(e[n]));return r}}function gRe(t){var e=document.createElement("canvas");return{element:e,options:(0,H8.default)(t),renderer:kb.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}L7.default=W7;var K7={};Object.defineProperty(K7,"__esModule",{value:!0});var xRe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function vRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var bRe=function(){function t(e){vRe(this,t),this.api=e}return xRe(t,[{key:"handleCatch",value:function(r){if(r.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw r.message;else throw r;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(r){try{var n=r.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(a){return this.handleCatch(a),this.api}}}]),t}();K7.default=bRe;var yRe=x7,Np=vm(yRe),wRe=pv,Cw=vm(wRe),_Re=D7,Jae=vm(_Re),NRe=M7,g$=vm(NRe),ERe=L7,ARe=vm(ERe),SRe=iS,jRe=vm(SRe),TRe=K7,CRe=vm(TRe),ese=gv,kRe=oS,tse=vm(kRe);function vm(t){return t&&t.__esModule?t:{default:t}}var Xf=function(){},lS=function(e,r,n){var a=new Xf;if(typeof e>"u")throw Error("No element to render on was provided.");return a._renderProperties=(0,ARe.default)(e),a._encodings=[],a._options=tse.default,a._errorHandler=new CRe.default(a),typeof r<"u"&&(n=n||{},n.format||(n.format=nse()),a.options(n)[n.format](r,n).render()),a};lS.getModule=function(t){return Np.default[t]};for(var x$ in Np.default)Np.default.hasOwnProperty(x$)&&IRe(Np.default,x$);function IRe(t,e){Xf.prototype[e]=Xf.prototype[e.toUpperCase()]=Xf.prototype[e.toLowerCase()]=function(r,n){var a=this;return a._errorHandler.wrapBarcodeCall(function(){n.text=typeof n.text>"u"?void 0:""+n.text;var s=(0,Cw.default)(a._options,n);s=(0,jRe.default)(s);var o=t[e],l=rse(r,o,s);return a._encodings.push(l),a})}}function rse(t,e,r){t=""+t;var n=new e(t,r);if(!n.valid())throw new ese.InvalidInputException(n.constructor.name,t);var a=n.encode();a=(0,Jae.default)(a);for(var s=0;s<a.length;s++)a[s].options=(0,Cw.default)(r,a[s].options);return a}function nse(){return Np.default.CODE128?"CODE128":Object.keys(Np.default)[0]}Xf.prototype.options=function(t){return this._options=(0,Cw.default)(this._options,t),this};Xf.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};Xf.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var r=(0,Cw.default)(this._options,t.options);r.format=="auto"&&(r.format=nse()),this._errorHandler.wrapBarcodeCall(function(){var n=r.value,a=Np.default[r.format.toUpperCase()],s=rse(n,a,r);q8(t,s,r)})}}};Xf.prototype.render=function(){if(!this._renderProperties)throw new ese.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)q8(this._renderProperties[t],this._encodings,this._options);else q8(this._renderProperties,this._encodings,this._options);return this};Xf.prototype._defaults=tse.default;function q8(t,e,r){e=(0,Jae.default)(e);for(var n=0;n<e.length;n++)e[n].options=(0,Cw.default)(r,e[n].options),(0,g$.default)(e[n].options);(0,g$.default)(r);var a=t.renderer,s=new a(t.element,e,r);s.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=lS);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var r=[];return jQuery(this).each(function(){r.push(this)}),lS(r,t,e)});var ORe=lS,ase={exports:{}},PRe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",RRe=PRe,DRe=RRe;function sse(){}function ise(){}ise.resetWarningCache=sse;var MRe=function(){function t(n,a,s,o,l,c){if(c!==DRe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ise,resetWarningCache:sse};return r.PropTypes=r,r};ase.exports=MRe();var X7=ase.exports;function YN(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?YN=function(r){return typeof r}:YN=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},YN(t)}var t1=Y7(S),LRe=Y7(ORe),Ns=Y7(X7);function Y7(t){return t&&t.__esModule?t:{default:t}}function FRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BRe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function URe(t,e,r){return e&&BRe(t.prototype,e),t}function zRe(t,e){return e&&(YN(e)==="object"||typeof e=="function")?e:ose(t)}function G8(t){return G8=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},G8(t)}function ose(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W8(t,e)}function W8(t,e){return W8=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},W8(t,e)}var K8,pT=t1.default.version.split(/[.-]/);pT[0]==="0"&&(pT[1]==="13"||pT[1]==="12")?K8=function(e){return e.getDOMNode()}:K8=function(e){return e};var Z7=function(t){VRe(e,t);function e(r){var n;return FRe(this,e),n=zRe(this,G8(e).call(this,r)),n.renderElementRef=t1.default.createRef(),n.update=n.update.bind(ose(n)),n}return URe(e,[{key:"shouldComponentUpdate",value:function(n){var a=this;return Object.keys(e.propTypes).some(function(s){return a.props[s]!==n[s]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var n=K8(this.renderElementRef.current);try{new LRe.default(n,this.props.value,Object.assign({text:this.props.text||this.props.value},this.props))}catch(a){window.console.error(a)}}},{key:"render",value:function(){var n=this.props,a=n.id,s=n.className;if(this.props.renderer==="svg")return t1.default.createElement("svg",{ref:this.renderElementRef,id:a,className:s});if(this.props.renderer==="canvas")return t1.default.createElement("canvas",{ref:this.renderElementRef,id:a,className:s});if(this.props.renderer==="img")return t1.default.createElement("img",{ref:this.renderElementRef,id:a,className:s})}}]),e}(t1.default.Component);Z7.propTypes={value:Ns.default.string.isRequired,text:Ns.default.string,renderer:Ns.default.string,format:Ns.default.string,width:Ns.default.number,height:Ns.default.number,displayValue:Ns.default.bool,fontOptions:Ns.default.string,font:Ns.default.string,textAlign:Ns.default.string,textPosition:Ns.default.string,textMargin:Ns.default.number,fontSize:Ns.default.number,background:Ns.default.string,lineColor:Ns.default.string,margin:Ns.default.number,marginTop:Ns.default.number,marginBottom:Ns.default.number,marginLeft:Ns.default.number,marginRight:Ns.default.number,id:Ns.default.string,className:Ns.default.string,ean128:Ns.default.bool};Z7.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,className:"",ean128:!1};var $Re=Z7;const HRe=Hc($Re);var cS={},lse={L:1,M:0,Q:3,H:2},cse={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},qRe=cse;function use(t){this.mode=qRe.MODE_8BIT_BYTE,this.data=t}use.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var GRe=use,x5=lse;function Sd(t,e){this.totalCount=t,this.dataCount=e}Sd.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Sd.getRSBlocks=function(t,e){var r=Sd.getRsBlockTable(t,e);if(r==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,a=new Array,s=0;s<n;s++)for(var o=r[s*3+0],l=r[s*3+1],c=r[s*3+2],u=0;u<o;u++)a.push(new Sd(l,c));return a};Sd.getRsBlockTable=function(t,e){switch(e){case x5.L:return Sd.RS_BLOCK_TABLE[(t-1)*4+0];case x5.M:return Sd.RS_BLOCK_TABLE[(t-1)*4+1];case x5.Q:return Sd.RS_BLOCK_TABLE[(t-1)*4+2];case x5.H:return Sd.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var WRe=Sd;function dse(){this.buffer=new Array,this.length=0}dse.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var KRe=dse,Qu={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Qu.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Qu.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var No=0;No<8;No++)Qu.EXP_TABLE[No]=1<<No;for(var No=8;No<256;No++)Qu.EXP_TABLE[No]=Qu.EXP_TABLE[No-4]^Qu.EXP_TABLE[No-5]^Qu.EXP_TABLE[No-6]^Qu.EXP_TABLE[No-8];for(var No=0;No<255;No++)Qu.LOG_TABLE[Qu.EXP_TABLE[No]]=No;var fse=Qu,Pm=fse;function ZN(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}ZN.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=Pm.gexp(Pm.glog(this.get(r))+Pm.glog(t.get(n)));return new ZN(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=Pm.glog(this.get(0))-Pm.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=Pm.gexp(Pm.glog(t.get(n))+e);return new ZN(r,0).mod(t)}};var hse=ZN,Qc=cse,v$=hse,XRe=fse,Wh={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},po={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;po.getBCHDigit(e)-po.getBCHDigit(po.G15)>=0;)e^=po.G15<<po.getBCHDigit(e)-po.getBCHDigit(po.G15);return(t<<10|e)^po.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;po.getBCHDigit(e)-po.getBCHDigit(po.G18)>=0;)e^=po.G18<<po.getBCHDigit(e)-po.getBCHDigit(po.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return po.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case Wh.PATTERN000:return(e+r)%2==0;case Wh.PATTERN001:return e%2==0;case Wh.PATTERN010:return r%3==0;case Wh.PATTERN011:return(e+r)%3==0;case Wh.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case Wh.PATTERN101:return e*r%2+e*r%3==0;case Wh.PATTERN110:return(e*r%2+e*r%3)%2==0;case Wh.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new v$([1],0),r=0;r<t;r++)e=e.multiply(new v$([1,XRe.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Qc.MODE_NUMBER:return 10;case Qc.MODE_ALPHA_NUM:return 9;case Qc.MODE_8BIT_BYTE:return 8;case Qc.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Qc.MODE_NUMBER:return 12;case Qc.MODE_ALPHA_NUM:return 11;case Qc.MODE_8BIT_BYTE:return 16;case Qc.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Qc.MODE_NUMBER:return 14;case Qc.MODE_ALPHA_NUM:return 13;case Qc.MODE_8BIT_BYTE:return 16;case Qc.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var a=0;a<e;a++){for(var s=0,o=t.isDark(n,a),l=-1;l<=1;l++)if(!(n+l<0||e<=n+l))for(var c=-1;c<=1;c++)a+c<0||e<=a+c||l==0&&c==0||o==t.isDark(n+l,a+c)&&s++;s>5&&(r+=3+s-5)}for(var n=0;n<e-1;n++)for(var a=0;a<e-1;a++){var u=0;t.isDark(n,a)&&u++,t.isDark(n+1,a)&&u++,t.isDark(n,a+1)&&u++,t.isDark(n+1,a+1)&&u++,(u==0||u==4)&&(r+=3)}for(var n=0;n<e;n++)for(var a=0;a<e-6;a++)t.isDark(n,a)&&!t.isDark(n,a+1)&&t.isDark(n,a+2)&&t.isDark(n,a+3)&&t.isDark(n,a+4)&&!t.isDark(n,a+5)&&t.isDark(n,a+6)&&(r+=40);for(var a=0;a<e;a++)for(var n=0;n<e-6;n++)t.isDark(n,a)&&!t.isDark(n+1,a)&&t.isDark(n+2,a)&&t.isDark(n+3,a)&&t.isDark(n+4,a)&&!t.isDark(n+5,a)&&t.isDark(n+6,a)&&(r+=40);for(var d=0,a=0;a<e;a++)for(var n=0;n<e;n++)t.isDark(n,a)&&d++;var h=Math.abs(100*d/e/e-50)/5;return r+=h*10,r}},YRe=po,ZRe=GRe,mse=WRe,pse=KRe,bm=YRe,QRe=hse;function Rd(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var qc=Rd.prototype;qc.addData=function(t){var e=new ZRe(t);this.dataList.push(e),this.dataCache=null};qc.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};qc.getModuleCount=function(){return this.moduleCount};qc.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=mse.getRSBlocks(t,this.errorCorrectLevel),r=new pse,n=0,a=0;a<e.length;a++)n+=e[a].dataCount;for(var a=0;a<this.dataList.length;a++){var s=this.dataList[a];r.put(s.mode,4),r.put(s.getLength(),bm.getLengthInBits(s.mode,t)),s.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};qc.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=Rd.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};qc.setupPositionProbePattern=function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)};qc.getBestMaskPattern=function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=bm.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e};qc.createMovieClip=function(t,e,r){var n=t.createEmptyMovieClip(e,r),a=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*a,l=0;l<this.modules[s].length;l++){var c=l*a,u=this.modules[s][l];u&&(n.beginFill(0,100),n.moveTo(c,o),n.lineTo(c+a,o),n.lineTo(c+a,o+a),n.lineTo(c,o+a),n.endFill())}return n};qc.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};qc.setupPositionAdjustPattern=function(){for(var t=bm.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],a=t[r];if(this.modules[n][a]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[n+s][a+o]=!0:this.modules[n+s][a+o]=!1}};qc.setupTypeNumber=function(t){for(var e=bm.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};qc.setupTypeInfo=function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=bm.getBCHTypeInfo(r),a=0;a<15;a++){var s=!t&&(n>>a&1)==1;a<6?this.modules[a][8]=s:a<8?this.modules[a+1][8]=s:this.modules[this.moduleCount-15+a][8]=s}for(var a=0;a<15;a++){var s=!t&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=s:a<9?this.modules[8][15-a-1+1]=s:this.modules[8][15-a-1]=s}this.modules[this.moduleCount-8][8]=!t};qc.mapData=function(t,e){for(var r=-1,n=this.moduleCount-1,a=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var l=0;l<2;l++)if(this.modules[n][o-l]==null){var c=!1;s<t.length&&(c=(t[s]>>>a&1)==1);var u=bm.getMask(e,n,o-l);u&&(c=!c),this.modules[n][o-l]=c,a--,a==-1&&(s++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};Rd.PAD0=236;Rd.PAD1=17;Rd.createData=function(t,e,r){for(var n=mse.getRSBlocks(t,e),a=new pse,s=0;s<r.length;s++){var o=r[s];a.put(o.mode,4),a.put(o.getLength(),bm.getLengthInBits(o.mode,t)),o.write(a)}for(var l=0,s=0;s<n.length;s++)l+=n[s].dataCount;if(a.getLengthInBits()>l*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+l*8+")");for(a.getLengthInBits()+4<=l*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=l*8||(a.put(Rd.PAD0,8),a.getLengthInBits()>=l*8));)a.put(Rd.PAD1,8);return Rd.createBytes(a,n)};Rd.createBytes=function(t,e){for(var r=0,n=0,a=0,s=new Array(e.length),o=new Array(e.length),l=0;l<e.length;l++){var c=e[l].dataCount,u=e[l].totalCount-c;n=Math.max(n,c),a=Math.max(a,u),s[l]=new Array(c);for(var d=0;d<s[l].length;d++)s[l][d]=255&t.buffer[d+r];r+=c;var h=bm.getErrorCorrectPolynomial(u),p=new QRe(s[l],h.getLength()-1),g=p.mod(h);o[l]=new Array(h.getLength()-1);for(var d=0;d<o[l].length;d++){var b=d+g.getLength()-o[l].length;o[l][d]=b>=0?g.get(b):0}}for(var w=0,d=0;d<e.length;d++)w+=e[d].totalCount;for(var _=new Array(w),N=0,d=0;d<n;d++)for(var l=0;l<e.length;l++)d<s[l].length&&(_[N++]=s[l][d]);for(var d=0;d<a;d++)for(var l=0;l<e.length;l++)d<o[l].length&&(_[N++]=o[l][d]);return _};var JRe=Rd,Q7={};Object.defineProperty(Q7,"__esModule",{value:!0});var e7e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t7e=X7,Jc=xse(t7e),gse=S,v5=xse(gse);function xse(t){return t&&t.__esModule?t:{default:t}}function r7e(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var n7e={bgColor:Jc.default.oneOfType([Jc.default.object,Jc.default.string]).isRequired,bgD:Jc.default.string.isRequired,fgColor:Jc.default.oneOfType([Jc.default.object,Jc.default.string]).isRequired,fgD:Jc.default.string.isRequired,size:Jc.default.number.isRequired,title:Jc.default.string,viewBoxSize:Jc.default.number.isRequired,xmlns:Jc.default.string},J7=(0,gse.forwardRef)(function(t,e){var r=t.bgColor,n=t.bgD,a=t.fgD,s=t.fgColor,o=t.size,l=t.title,c=t.viewBoxSize,u=t.xmlns,d=u===void 0?"http://www.w3.org/2000/svg":u,h=r7e(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return v5.default.createElement("svg",e7e({},h,{height:o,ref:e,viewBox:"0 0 "+c+" "+c,width:o,xmlns:d}),l?v5.default.createElement("title",null,l):null,v5.default.createElement("path",{d:n,fill:r}),v5.default.createElement("path",{d:a,fill:s}))});J7.displayName="QRCodeSvg";J7.propTypes=n7e;Q7.default=J7;Object.defineProperty(cS,"__esModule",{value:!0});cS.QRCode=void 0;var a7e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s7e=X7,xf=kw(s7e),i7e=lse,o7e=kw(i7e),l7e=JRe,c7e=kw(l7e),vse=S,u7e=kw(vse),d7e=Q7,f7e=kw(d7e);function kw(t){return t&&t.__esModule?t:{default:t}}function h7e(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var m7e={bgColor:xf.default.oneOfType([xf.default.object,xf.default.string]),fgColor:xf.default.oneOfType([xf.default.object,xf.default.string]),level:xf.default.string,size:xf.default.number,value:xf.default.string.isRequired},uS=(0,vse.forwardRef)(function(t,e){var r=t.bgColor,n=r===void 0?"#FFFFFF":r,a=t.fgColor,s=a===void 0?"#000000":a,o=t.level,l=o===void 0?"L":o,c=t.size,u=c===void 0?256:c,d=t.value,h=h7e(t,["bgColor","fgColor","level","size","value"]),p=new c7e.default(-1,o7e.default[l]);p.addData(d),p.make();var g=p.modules;return u7e.default.createElement(f7e.default,a7e({},h,{bgColor:n,bgD:g.map(function(b,w){return b.map(function(_,N){return _?"":"M "+N+" "+w+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:s,fgD:g.map(function(b,w){return b.map(function(_,N){return _?"M "+N+" "+w+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:u,viewBoxSize:g.length}))});cS.QRCode=uS;uS.displayName="QRCode";uS.propTypes=m7e;var p7e=cS.default=uS;const b$=({value:t,format:e="CODE128",width:r=2,height:n=50,displayValue:a=!0,size:s=128,className:o=""})=>t?e==="QR"?i.jsx("div",{className:o,style:{height:"auto",maxWidth:s,width:"100%"},children:i.jsx(p7e,{size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},value:t,viewBox:"0 0 256 256"})}):i.jsx("div",{className:o,children:i.jsx(HRe,{value:t,format:e,width:r,height:n,displayValue:a,background:"transparent"})}):null,g7e=({uniqueCode:t,tracking:e,itemDesc:r,itemIndex:n,unitIndex:a,totalUnits:s,recipientName:o,date:l,companyName:c="PROLOGIX",size:u="4x2"})=>u==="4x2"?i.jsxs("div",{className:"label-container bg-white flex flex-col justify-between overflow-hidden relative",style:{width:"101.6mm",height:"50.8mm",padding:"2mm",border:"1px solid #eee",boxSizing:"border-box"},children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-black pb-1 mb-1",children:[i.jsx("span",{className:"font-bold text-[10px] truncate max-w-[60%]",children:c}),i.jsx("span",{className:"text-[8px]",children:l})]}),i.jsx("div",{className:"flex-1 flex flex-row gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-[10px] truncate",children:o}),i.jsx("p",{className:"text-[9px] truncate leading-tight",children:r}),i.jsxs("p",{className:"text-[8px] mt-0.5",children:["Unit ",a+1," of ",s]})]})}),i.jsxs("div",{className:"flex flex-col items-center justify-center w-full mt-1",children:[i.jsx("div",{className:"w-full flex justify-center overflow-hidden",style:{maxHeight:"25mm"},children:i.jsx(b$,{value:t,format:"CODE128",width:1.5,height:25,displayValue:!1})}),i.jsx("p",{className:"text-[10px] font-mono font-bold leading-none mt-0.5",children:t})]})]}):i.jsxs("div",{className:"label-container bg-white flex flex-col items-center justify-between overflow-hidden relative",style:{width:"101.6mm",height:"152.4mm",padding:"4mm",border:"1px solid #eee"},children:[i.jsxs("div",{className:"w-full text-center border-b-2 border-black pb-2",children:[i.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider",children:c}),i.jsx("p",{className:"text-xs mt-1",children:l})]}),i.jsxs("div",{className:"w-full text-left py-4",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"DESTINATARIO:"}),i.jsx("h2",{className:"text-xl font-bold leading-tight line-clamp-3 uppercase",children:o})]}),i.jsx("div",{className:"w-full text-left border-y-2 border-black py-3 pl-1 bg-slate-50",children:i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-500",children:"CONTENIDO:"}),i.jsx("p",{className:"text-sm font-bold uppercase line-clamp-2",children:r})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold",children:[a+1,"/",s]}),i.jsx("p",{className:"text-[10px]",children:"UNIDADES"})]})]})}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full my-4",children:[i.jsx(b$,{value:t,format:"CODE128",width:2.5,height:80,displayValue:!1}),i.jsx("p",{className:"text-lg font-bold mt-2 font-mono",children:t})]}),i.jsxs("div",{className:"w-full text-center border-t-2 border-black pt-2",children:[i.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"TRACKING GENERAL"}),i.jsx("p",{className:"text-3xl font-black tracking-tight",children:e})]})]}),bse=({labels:t,companyName:e,size:r="4x2"})=>!t||t.length===0?null:i.jsxs("div",{className:"print-container hidden print:block absolute top-0 left-0 w-full bg-white z-[9999]",children:[i.jsx("style",{children:`
         @media print {
           @page { 
             size: ${r==="4x2"?"4in 2in":"4in 6in"}; 
             margin: 0; 
           }
           body { margin: 0; padding: 0; }
           .no-print { display: none !important; }
           
           /* Forzar saltos de pgina entre etiquetas */
           .label-container { 
             break-after: page; 
             page-break-after: always; 
             border: none !important;
             margin: 0 !important;
           }
           
           /* Hack para que browsers no aadan mrgenes extra */
           html, body {
             height: 100%;
             overflow: hidden; 
           }
           
           .print\\:block { display: block !important; }
         }
       `}),t.map((n,a)=>i.jsx(g7e,{...n,companyName:e,size:r},a))]}),x7e=async(t,e=.85)=>new Promise((r,n)=>{if(!t.type.startsWith("image/")){n(new Error("El archivo no es una imagen"));return}if(t.type==="image/jpeg"&&t.size<5*1024*1024){r({blob:t,fileName:t.name});return}const a=new FileReader;a.onerror=()=>{n(new Error("Error al leer el archivo"))},a.onload=s=>{const o=new Image;o.onerror=()=>{n(new Error("Error al cargar la imagen"))},o.onload=()=>{try{const l=document.createElement("canvas");let c=o.width,u=o.height;const d=3e3;(c>d||u>d)&&(c>u?(u=Math.round(u*d/c),c=d):(c=Math.round(c*d/u),u=d)),l.width=c,l.height=u;const h=l.getContext("2d");h.fillStyle="#FFFFFF",h.fillRect(0,0,c,u),h.drawImage(o,0,0,c,u),l.toBlob(p=>{if(p){const b=`${t.name.replace(/\.[^/.]+$/,"")}.jpg`;r({blob:p,fileName:b})}else n(new Error("Error al convertir imagen"))},"image/jpeg",e)}catch(l){n(l)}},o.src=s.target.result},a.readAsDataURL(t)}),v7e=async t=>{try{console.log(` Procesando imagen: ${t.name} (${(t.size/1024).toFixed(2)} KB)`);const e=await x7e(t,.85);return console.log(` Imagen procesada: ${e.fileName} (${(e.blob.size/1024).toFixed(2)} KB)`),e.blob}catch(e){return console.error(` Error procesando imagen ${t.name}:`,e),console.warn(" Usando archivo original sin procesar"),t}},b7e={Capital:["Gazcue","Piantini","Naco","Bella Vista","Zona Colonial","Cristo Rey","Los Mina","Ensanche Ozama","Villa Mella","Los Tres Brazos","San Isidro","Boca Chica"],Cibao:["Santiago Centro","Los Jardines Metropolitanos","Gurabo","Tamboril","La Vega Centro","Moca","San Francisco de Macors","Mao"],Este:["San Pedro Centro","La Romana Centro","Bvaro","Punta Cana","Higey Centro","El Seibo","Hato Mayor"],Sur:["Azua Centro","Barahona Centro","San Juan Centro","San Cristbal","Bajos de Haina","Neiba"],Local:["Ban Centro","Zona Rural Norte","Zona Rural Sur","Matanzas","Sabana Buey"]},b5=()=>{var Jt;const t=$s(),e=dm(),{userData:r}=fa(),n=(Jt=e.state)==null?void 0:Jt.solicitud,[a,s]=S.useState(""),[o,l]=S.useState(""),[c,u]=S.useState(""),[d,h]=S.useState(""),[p,g]=S.useState(""),[b,w]=S.useState(""),[_,N]=S.useState(""),[A,j]=S.useState(""),[P,U]=S.useState(""),[G,O]=S.useState(""),[D,I]=S.useState([]),[V,R]=S.useState(""),[B,F]=S.useState([{id:1,producto:"",cantidad:1,precio:0}]),[ee,Z]=S.useState([]),[ce,ne]=S.useState([]),[ae,me]=S.useState({subtotal:0,impuestos:0,total:0,estadoPago:"pendiente_pago",metodoPago:"",montoPagado:0,saldoPendiente:0,notas:""}),[Ee,ye]=S.useState(!1),[H,Y]=S.useState(null),[X,re]=S.useState(null),[se,ke]=S.useState([]),[Ce,xe]=S.useState(!1),Ie=S.useRef(null);S.useEffect(()=>{var Ve,Ft,qt,Wt,nr,Xe;if(n){if(console.log(" Prellenando datos de solicitud:",n),re(n.id),s(((Ve=n.cliente)==null?void 0:Ve.nombre)||""),u(((Ft=n.cliente)==null?void 0:Ft.telefono)||""),l(((qt=n.cliente)==null?void 0:qt.email)||""),h(((Wt=n.ubicacion)==null?void 0:Wt.direccion)||((nr=n.cliente)==null?void 0:nr.direccion)||""),(Xe=n.ubicacion)!=null&&Xe.sector&&O(n.ubicacion.sector),n.notas&&R(n.notas),n.items&&n.items.length>0&&F(n.items.map((Kt,kt)=>({id:kt+1,producto:Kt.descripcion||Kt.producto||"",cantidad:Kt.cantidad||1,precio:Kt.precio||0}))),n.fotos&&n.fotos.length>0){console.log(" Prellenando fotos del cliente:",n.fotos.length);const Kt=n.fotos.map(kt=>`PRELLENADA::${kt}`);ne(Kt),We.info(`${n.fotos.length} foto(s) del cliente cargadas`)}We.success("Datos de la solicitud cargados. Completa la informacin del destinatario.")}},[n]),S.useEffect(()=>{if(P){const Ve=b7e[P]||[];I(Ve),G&&!Ve.includes(G)&&O("")}else I([]),O("")},[P]);const He=(Ve,Ft,qt)=>{const Wt=[...B];Wt[Ve][Ft]=qt,F(Wt)},Ue=()=>{F([...B,{id:Date.now(),producto:"",cantidad:1,precio:0}])},Me=Ve=>{if(B.length<=1){We.warning("Debe haber al menos un item.");return}const Ft=B.filter((qt,Wt)=>Wt!==Ve);F(Ft)},Be=Ve=>{const Ft=Array.from(Ve.target.files);if(ee.length+Ft.length>10){We.warning("Puedes subir un mximo de 10 fotos.");return}Z(qt=>[...qt,...Ft]),Ft.forEach(qt=>{const Wt=new FileReader;Wt.onloadend=()=>{ne(nr=>[...nr,Wt.result])},Wt.readAsDataURL(qt)}),Ve.target.value=null},be=Ve=>{Z(ee.filter((Ft,qt)=>qt!==Ve)),ne(Ft=>Ft.filter((qt,Wt)=>Wt!==Ve))},Vt=Ve=>{const Ft=[],qt=Ve.codigoTracking,Wt=p,nr=new Date().toLocaleDateString("es-DO");return Ve.items.forEach((Xe,Kt)=>{const kt=parseInt(Xe.cantidad)||1;for(let pt=0;pt<kt;pt++){const Ot=`${qt}-${Kt+1}-${pt+1}`;Ft.push({uniqueCode:Ot,tracking:qt,itemDesc:Xe.producto||Xe.descripcion||"Item",itemIndex:Kt,unitIndex:pt,totalUnits:kt,recipientName:Wt,date:nr})}}),Ft},ht=()=>{if(se.length===0){We.warning("No hay etiquetas para imprimir");return}Ie.current=setTimeout(()=>{try{window.print(),We.success(`Imprimiendo ${se.length} etiqueta(s)`)}catch(Ve){console.error("Error al imprimir:",Ve),We.error("Error al abrir el dilogo de impresin")}},100)};S.useEffect(()=>()=>{Ie.current&&clearTimeout(Ie.current)},[]);const Lt=async Ve=>{const Ft=[];if(!Ve||Ve.length===0)return Ft;const qt=`temp_${Date.now()}`;for(let Wt=0;Wt<Ve.length;Wt++){const nr=Ve[Wt];try{We.loading(`Procesando imagen ${Wt+1}/${Ve.length}...`,{id:`upload-${Wt}`});const Xe=await v7e(nr);We.loading(`Subiendo imagen ${Wt+1}/${Ve.length}...`,{id:`upload-${Wt}`});const Kt=nr.name.replace(/\.[^/.]+$/,""),kt=`recolecciones/${qt}/${Date.now()}_${Wt}_${Kt}.jpg`,pt=ny(Cx,kt);await ty(pt,Xe);const Ot=await ry(pt);Ft.push({url:Ot,thumbnail:Ot,preview:Ot,fileName:`${Kt}.jpg`,size:Xe.size}),We.success(`Imagen ${Wt+1} subida`,{id:`upload-${Wt}`})}catch(Xe){console.error(`Error subiendo archivo ${nr.name}:`,Xe),We.error(`Error al subir ${nr.name}: ${Xe.message}`,{id:`upload-${Wt}`})}}return Ft},et=async Ve=>{var Ft,qt,Wt;if(Ve.preventDefault(),Y(null),!a||!c||!d){We.error("Los datos del remitente son obligatorios.");return}if(!p||!_||!A||!P){We.error("Los datos del destinatario y zona son obligatorios.");return}if(!(!G&&!confirm("No has seleccionado un sector. Deseas continuar sin especificar el sector?"))){if(B.length===0||B.some(nr=>!nr.producto.trim())){We.error("Debes agregar al menos un item con descripcin.");return}if(B.some(nr=>!nr.cantidad||parseInt(nr.cantidad)<1)){We.error("Todos los items deben tener una cantidad vlida (mnimo 1).");return}ye(!0);try{const nr=B.map(Ot=>({producto:Ot.producto.trim(),cantidad:parseInt(Ot.cantidad)||1,precio:parseFloat(Ot.precio)||0}));let Xe=[];const Kt=ce.filter(Ot=>Ot.startsWith("PRELLENADA::")).map(Ot=>Ot.replace("PRELLENADA::",""));if(Kt.length>0&&(console.log(` Incluyendo ${Kt.length} foto(s) del cliente`),Xe=[...Kt]),ee.length>0){const Ot=await Lt(ee);Ot.length===0?We.warning("No se pudieron subir las fotos nuevas, pero se incluirn las del cliente."):Xe=[...Xe,...Ot]}const kt={remitenteNombre:a.trim(),remitenteEmail:o.trim(),remitenteTelefono:c.trim(),remitenteDireccion:d.trim(),destinatarioNombre:p.trim(),destinatarioEmail:b.trim(),destinatarioTelefono:_.trim(),destinatarioDireccion:A.trim(),destinatarioZona:P,destinatarioSector:G||null,items:nr,subtotal:parseFloat(ae.subtotal)||0,itbis:parseFloat(ae.impuestos)||0,total:parseFloat(ae.total)||0,estadoPago:ae.estadoPago||"pendiente",metodoPago:ae.metodoPago||"",montoPagado:parseFloat(ae.montoPagado)||0,notas:V.trim(),tipoServicio:"standard",fotos:Xe};console.log(" Enviando recoleccin:",kt);const pt=await wt.post("/recolecciones",kt);if(pt.data.success){const Ot=((Ft=pt.data.data)==null?void 0:Ft.codigoTracking)||"N/A",Ut=pt.data.data;if(X)try{await wt.put(`/solicitudes/${X}/completar`,{codigoRecoleccion:(Ut==null?void 0:Ut.id)||null}),console.log(` Solicitud ${X} marcada como completada`)}catch(or){console.error(" Error marcando solicitud como completada:",or)}We.success(` Recoleccin creada: ${Ot}`);const Nr=Vt({...Ut,codigoTracking:Ot,items:nr});ke(Nr),xe(!0)}else Y(pt.data.message||"Error desconocido al crear la recoleccin.")}catch(nr){console.error(" Error completo:",nr);const Xe=((Wt=(qt=nr.response)==null?void 0:qt.data)==null?void 0:Wt.message)||nr.message||"Error de conexin.";Y(Xe),We.error(Xe)}finally{ye(!1)}}};return i.jsxs("div",{className:"p-4 xs:p-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-2xl xs:text-3xl font-bold text-slate-800 dark:text-white",children:"Crear Nueva Recoleccin"}),i.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-700 transition",children:[i.jsx(Gl,{size:20}),"Volver"]})]}),i.jsxs("form",{onSubmit:et,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow border-l-4 border-emerald-500",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Br,{size:24,className:"text-emerald-600"}),"Datos de Quien Enva (Remitente) *"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nombre Completo *"}),i.jsx("input",{type:"text",value:a,onChange:Ve=>s(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Juan Prez",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Telfono *"}),i.jsx("input",{type:"tel",value:c,onChange:Ve=>u(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"(809) 123-4567",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email (Opcional)"}),i.jsx("input",{type:"email",value:o,onChange:Ve=>l(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"remitente@ejemplo.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin de Recogida *"}),i.jsx("input",{type:"text",value:d,onChange:Ve=>h(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Calle, Nmero, Sector, Ciudad...",required:!0})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow border-l-4 border-indigo-500",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Fa,{size:24,className:"text-indigo-600"}),"Datos de Quien Recibe (Destinatario) *"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nombre Completo *"}),i.jsx("input",{type:"text",value:p,onChange:Ve=>g(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Mara Lpez",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Telfono *"}),i.jsx("input",{type:"tel",value:_,onChange:Ve=>N(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"(809) 987-6543",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email (Opcional)"}),i.jsx("input",{type:"email",value:b,onChange:Ve=>w(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"destinatario@ejemplo.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin de Entrega *"}),i.jsx("input",{type:"text",value:A,onChange:Ve=>j(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Calle, Nmero, Sector, Ciudad...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona de Entrega *"}),i.jsxs("select",{value:P,onChange:Ve=>U(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[i.jsx("option",{value:"",children:"-- Seleccionar Zona --"}),i.jsx("option",{value:"Capital",children:" Capital (Santo Domingo)"}),i.jsx("option",{value:"Cibao",children:" Cibao (Santiago)"}),i.jsx("option",{value:"Este",children:" Este (San Pedro, La Romana)"}),i.jsx("option",{value:"Sur",children:" Sur (Azua, Barahona)"}),i.jsx("option",{value:"Local",children:" Local (Ban)"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Sector ",D.length>0&&"(Recomendado)"]}),i.jsxs("select",{value:G,onChange:Ve=>O(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",disabled:!P,children:[i.jsx("option",{value:"",children:"-- Seleccionar Sector --"}),D.map(Ve=>i.jsxs("option",{value:Ve,children:[" ",Ve]},Ve))]}),!P&&i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Selecciona una zona primero"}),P&&D.length>0&&i.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-1",children:" Especificar el sector ayuda a optimizar las rutas de entrega"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"Items Recolectados *"}),i.jsx("div",{className:"space-y-3",children:B.map((Ve,Ft)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx("input",{type:"text",placeholder:`Descripcin del item ${Ft+1}`,value:Ve.producto,onChange:qt=>He(Ft,"producto",qt.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})}),i.jsx("div",{className:"w-24",children:i.jsx("input",{type:"number",min:"1",value:Ve.cantidad,onChange:qt=>He(Ft,"cantidad",qt.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 text-center ${Ve.cantidad?"border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white":"border-rose-500 bg-rose-50 dark:bg-rose-900/20"}`,title:"Cantidad",placeholder:"Cant."})}),i.jsx("button",{type:"button",onClick:()=>Me(Ft),disabled:B.length<=1,className:"px-3 py-2 bg-rose-600 text-white rounded-lg disabled:opacity-50 hover:bg-rose-700 transition",title:"Eliminar item",children:i.jsx(yp,{size:18})})]},Ve.id))}),i.jsxs("button",{type:"button",onClick:Ue,className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2",children:[i.jsx(Hd,{size:18})," Agregar Otro Item"]})]}),i.jsx(Iae,{items:B,onItemsChange:F,facturacion:ae,onFacturacionChange:me,readOnly:!1,mostrarPagos:!0}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-2 text-slate-900 dark:text-white",children:["Fotos de Recoleccin",i.jsx("span",{className:"text-sm font-normal text-slate-500 dark:text-slate-400 ml-2",children:"(Opcional)"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 dark:border-slate-600 border-dashed rounded-lg cursor-pointer bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx(_3,{size:32,className:"text-slate-500 dark:text-slate-400 mb-2"}),i.jsxs("p",{className:"mb-2 text-sm text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-semibold",children:"Click para tomar foto o subir"})," desde galera"]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:" En mviles abre la cmara directamente  Mximo 10 fotos"})]}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",capture:"environment",onChange:Be,className:"hidden"})]}),ce.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[ce.length," foto(s) seleccionada(s)"]}),i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2",children:ce.map((Ve,Ft)=>{const qt=Ve.startsWith("PRELLENADA::"),Wt=qt?Ve.replace("PRELLENADA::",""):Ve;return i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:Wt,alt:`Vista previa ${Ft+1}`,className:"w-full h-24 object-cover rounded-lg border border-slate-200 dark:border-slate-600"}),qt&&i.jsx("div",{className:"absolute top-1 left-1 bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded font-medium",children:"Cliente"}),i.jsx("button",{type:"button",onClick:()=>be(Ft),className:"absolute top-1 right-1 bg-rose-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition",title:"Eliminar foto",children:i.jsx(Jn,{size:14})})]},Ft)})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"Notas Adicionales"}),i.jsx("textarea",{value:V,onChange:Ve=>R(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Notas internas, detalles de pago, instrucciones especiales...",rows:"3"})]}),H&&i.jsxs("div",{className:"p-4 bg-rose-100 dark:bg-rose-900/40 border border-rose-300 dark:border-rose-700 text-rose-800 dark:text-rose-200 rounded-lg flex items-start gap-3",children:[i.jsx(ms,{size:20,className:"flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Error:"})," ",H]})]}),i.jsx("button",{type:"submit",disabled:Ee,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ee?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando Recoleccin..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Br,{size:20}),"Crear Recoleccin"]})})]}),Ce&&se.length>0&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-emerald-100 dark:bg-emerald-900 mb-4",children:i.jsx(Wl,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),i.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"Recoleccin Creada Exitosamente"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Se generaron ",i.jsxs("strong",{children:[se.length," etiqueta(s)"]})," para imprimir.",i.jsx("br",{}),"Deseas imprimir las etiquetas ahora?"]}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3 mb-4",children:i.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[" ",i.jsx("strong",{children:"Importante:"})," Conecta tu impresora de etiquetas antes de imprimir. Compatible con impresoras trmicas, AirPrint, y cualquier impresora del sistema."]})}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>{ht(),setTimeout(()=>{xe(!1),t("/recolecciones")},500)},className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2 font-medium",children:[i.jsx(Wl,{size:20}),"Imprimir Etiquetas"]}),i.jsx("button",{onClick:()=>{xe(!1),t("/recolecciones")},className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition text-sm",children:"Imprimir Despus"})]})]})})}),se.length>0&&i.jsx(bse,{labels:se,companyName:(r==null?void 0:r.companyName)||"PROLOGIX",size:"4x2"})]})},gT=()=>{var Ut,Nr,or,lt,lr;const[t,e]=S.useState("embarques"),[r,n]=S.useState("sin_confirmar"),[a,s]=S.useState([]),[o,l]=S.useState(""),[c,u]=S.useState("todas"),[d,h]=S.useState([]),[p,g]=S.useState(!0),[b,w]=S.useState(null),[_,N]=S.useState(!1),[A,j]=S.useState(""),[P,U]=S.useState(""),[G,O]=S.useState(""),[D,I]=S.useState(""),[V,R]=S.useState(""),[B,F]=S.useState("pago_recibir"),[ee,Z]=S.useState(""),[ce,ne]=S.useState(!1),[ae,me]=S.useState([]),[Ee,ye]=S.useState(""),[H,Y]=S.useState("todas"),[X,re]=S.useState(!1),[se,ke]=S.useState(null),[Ce,xe]=S.useState("pendientes"),[Ie,He]=S.useState(!1);S.useEffect(()=>{t==="facturas_antiguas"?Ue():t==="embarques"&&Be()},[t]),S.useEffect(()=>{let ve=()=>{};return o&&t==="facturas_antiguas"?ve=Me():h([]),()=>ve()},[o,t]);const Ue=async()=>{try{g(!0);const ve=await wt.get("/embarques");if(ve.data.success){const Ze=(ve.data.data||[]).filter(at=>at.estado==="activo");s(Ze)}}catch(ve){console.error("Error al cargar embarques:",ve),We.error("Error al cargar embarques")}finally{g(!1)}},Me=()=>{try{g(!0);const ve=DA(Bl,"facturas");let Ze=gu(ve,M0("embarqueId","==",o),ey("numeroFactura","asc"));return zA(Ze,Qe=>{const ze=(Qe.docs||[]).map(it=>({id:it.id,...it.data()})).filter(it=>it.estado==="sin_confirmar"||it.estado==="pendiente_contacto"||it.estado==="no_entregado");h(ze),g(!1)})}catch(ve){return console.error("Error al cargar facturas:",ve),g(!1),()=>{}}},Be=async()=>{try{re(!0);const ve=await wt.get("/secretarias/contenedores");ve.data.success&&me(ve.data.data)}catch(ve){console.error("Error cargando contenedores recibidos:",ve),We.error("Error al cargar contenedores recibidos")}finally{re(!1)}},be=async ve=>{try{g(!0);const Ze=await wt.get(`/secretarias/contenedores/${ve}/facturas`);Ze.data.success&&me(at=>at.map(Qe=>Qe.id===ve?{...Qe,...Ze.data.data.contenedor,facturas:Ze.data.data.facturas}:Qe))}catch(Ze){console.error("Error cargando facturas del contenedor:",Ze),We.error("Error al cargar facturas del contenedor")}finally{g(!1)}},Vt=()=>Ee?ae.find(ve=>ve.id===Ee):null,ht=ve=>!ve||!ve.facturas?[]:ve.facturas.filter(Ze=>{var er;const at=Ze.confirmadaPorSecretaria===!0,Qe=Ze.estadoItems||Ze.estadoFactura||Ze.estado,ze=Qe==="completo"||Qe==="completa",it=((er=Ze.destinatario)==null?void 0:er.zona)||Ze.zona||"";return ze&&!at&&(H==="todas"||it===H)}),Lt=ve=>!ve||!ve.facturas?[]:ve.facturas.filter(Ze=>{var it;const at=Ze.confirmadaPorSecretaria===!0,Qe=((it=Ze.destinatario)==null?void 0:it.zona)||Ze.zona||"";return at&&(H==="todas"||Qe===H)}),et=ve=>{if(!ve||!ve.facturas)return[];const Ze=new Set;return ve.facturas.filter(at=>{const Qe=at.estadoItems||at.estadoFactura||at.estado;return Qe==="completo"||Qe==="completa"}).forEach(at=>{var ze;const Qe=((ze=at.destinatario)==null?void 0:ze.zona)||at.zona;Qe&&Ze.add(Qe)}),Array.from(Ze).sort()},Jt=async()=>{var Ze,at;if(!se||!Ee)return;const ve=se.id;try{(await wt.post(`/secretarias/facturas/${ve}/confirmar`,{notasSecretaria:V})).data.success&&(We.success("Factura confirmada exitosamente"),N(!1),Xe(),await be(Ee))}catch(Qe){console.error("Error confirmando factura:",Qe),We.error(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al confirmar la factura")}},Ve=async()=>{var at,Qe;if(!se)return;if(!A||!P){We.warning("Telfono y direccin son obligatorios");return}const ve=se.id,Ze={destinatario:{telefono:A,direccion:P,sector:G,zona:D},pago:{estado:B},notasSecretaria:V};try{(await wt.put(`/secretarias/facturas/${ve}`,Ze)).data.success&&(We.success("Factura editada exitosamente"),N(!1),Xe(),await be(Ee))}catch(ze){console.error("Error editando factura:",ze),We.error(((Qe=(at=ze.response)==null?void 0:at.data)==null?void 0:Qe.message)||"Error al editar la factura")}},Ft=(ve,Ze=!1,at=!1)=>{var Qe,ze,it,At,er;if(He(at),Ze){ke(ve),j(((Qe=ve.destinatario)==null?void 0:Qe.telefono)||ve.telefono||""),U(((ze=ve.destinatario)==null?void 0:ze.direccion)||ve.direccion||""),O(((it=ve.destinatario)==null?void 0:it.sector)||ve.sector||""),I(((At=ve.destinatario)==null?void 0:At.zona)||ve.zona||""),R(ve.notasSecretaria||ve.observaciones||"");const It=((er=ve.pago)==null?void 0:er.estado)||"pago_recibir";F(It),Z(It),ne(It==="pagada"||It==="pagado")}else{w(ve),j(ve.telefono||""),U(ve.direccion||""),O(ve.sector||""),I(ve.zona||""),R(ve.observaciones||"");const It=ve.estadoPago||"pago_recibir";F(It),Z(It),ne(It==="pagada"||It==="pagado")}N(!0)},qt=async()=>{se?Ie?await Ve():await Jt():await Wt()},Wt=async()=>{if(se){await qt();return}if(b){if(!A||!P||!D){We.warning("Telfono, direccin y ZONA son obligatorios");return}try{const ve=g3(Bl,"facturas",b.id);await rz(ve,{estado:"confirmada",telefono:A,direccion:P,sector:G,zona:D,observaciones:V,estadoPago:B,fechaConfirmacion:na.now(),updatedAt:na.now()}),We.success("Factura confirmada exitosamente (Sistema Antiguo)"),N(!1),Xe()}catch(ve){console.error("Error:",ve),We.error("Error al confirmar factura")}}},nr=async()=>{if(b)try{const ve=g3(Bl,"facturas",b.id);await rz(ve,{estado:"pendiente_contacto",observaciones:V||"No se pudo contactar",updatedAt:na.now()}),We.info("Factura marcada como pendiente (Sistema Antiguo)"),N(!1),Xe()}catch(ve){console.error("Error:",ve),We.error("Error al marcar como pendiente")}},Xe=()=>{w(null),ke(null),j(""),U(""),O(""),I(""),R(""),F("pago_recibir"),Z(""),He(!1)},Kt=ve=>{ve&&(window.location.href=`tel:${ve}`)},kt=d.filter(ve=>{let Ze=!1;switch(r){case"sin_confirmar":Ze=ve.estado==="sin_confirmar";break;case"pendientes":Ze=ve.estado==="pendiente_contacto";break;case"confirmadas":Ze=ve.estado==="confirmada";break;case"no_entregadas":Ze=ve.estado==="no_entregado";break;default:Ze=!1}let at=c==="todas"||ve.zona===c;return Ze&&at}),pt={sin_confirmar:d.filter(ve=>ve.estado==="sin_confirmar"&&(c==="todas"||ve.zona===c)).length,pendientes:d.filter(ve=>ve.estado==="pendiente_contacto"&&(c==="todas"||ve.zona===c)).length,confirmadas:d.filter(ve=>ve.estado==="confirmada"&&(c==="todas"||ve.zona===c)).length,no_entregadas:d.filter(ve=>ve.estado==="no_entregado"&&(c==="todas"||ve.zona===c)).length},Ot=()=>{const ve=Vt();let Ze=[],at=!0;return Ce==="pendientes"?(Ze=ht(ve),at=!0):(Ze=Lt(ve),at=!1),ve?ve.facturas&&ve.facturas.length>0&&!ve.facturas[0].destinatario?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando detalles de facturas..."})]}):Ze.length===0?i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-8 text-center",children:[i.jsx(en,{className:"mx-auto text-emerald-600 mb-4",size:48}),i.jsxs("p",{className:"text-emerald-800 dark:text-emerald-200 text-lg font-medium",children:[" No hay facturas ",at?"pendientes":"confirmadas",H!=="todas"&&` en la zona ${H}`]})]}):i.jsx("div",{className:"space-y-3",children:Ze.map(Qe=>{var At,er,It,Er,rn,Qr,En,fr,nn,ea;const ze=Qe.estadoItems||Qe.estadoFactura||Qe.estado,it=ze==="completo"||ze==="completa";return i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition",children:i.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-[250px]",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[i.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Qe.numeroFactura||Qe.codigoTracking}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${it?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:it?" Completa":" Incompleta"}),i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs font-medium",children:[" ",Qe.itemsMarcados||0,"/",Qe.itemsTotal||((At=Qe.items)==null?void 0:At.length)||0]}),(((er=Qe.destinatario)==null?void 0:er.zona)||Qe.zona)&&i.jsxs("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs font-medium rounded flex items-center gap-1",children:[i.jsx(Fa,{size:14}),((It=Qe.destinatario)==null?void 0:It.zona)||Qe.zona]})]}),i.jsxs("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:[" ",((Er=Qe.destinatario)==null?void 0:Er.nombre)||Qe.nombreCliente||Qe.cliente||"Sin nombre"]}),(((rn=Qe.destinatario)==null?void 0:rn.telefono)||Qe.telefono)&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",((Qr=Qe.destinatario)==null?void 0:Qr.telefono)||Qe.telefono,i.jsx("button",{onClick:()=>{var on;return Kt(((on=Qe.destinatario)==null?void 0:on.telefono)||Qe.telefono)},className:"ml-2 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Llamar"})]}),(((En=Qe.destinatario)==null?void 0:En.direccion)||Qe.direccion)&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",((fr=Qe.destinatario)==null?void 0:fr.direccion)||Qe.direccion,(((nn=Qe.destinatario)==null?void 0:nn.sector)||Qe.sector)&&i.jsxs("span",{className:"ml-2 text-indigo-600 dark:text-indigo-400 font-medium",children:["(",((ea=Qe.destinatario)==null?void 0:ea.sector)||Qe.sector,")"]})]}),Qe.observaciones&&i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm italic mt-2",children:[" ",Qe.observaciones]}),Qe.notasSecretaria&&i.jsxs("p",{className:"text-indigo-500 dark:text-indigo-400 text-sm italic mt-2",children:[": ",Qe.notasSecretaria]})]}),i.jsxs("div",{className:"ml-4 flex-shrink-0 flex flex-col gap-2",children:[at?i.jsxs("button",{onClick:()=>Ft(Qe,!0,!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm font-medium flex items-center gap-2",children:[i.jsx(en,{size:16}),"Confirmar"]}):i.jsxs("span",{className:"px-4 py-2 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-400 rounded-lg text-sm font-medium flex items-center gap-2",children:[i.jsx(en,{size:16}),"Confirmada"]}),i.jsx("button",{onClick:()=>Ft(Qe,!0,!0),className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-white rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition text-sm font-medium flex items-center gap-2",children:" Editar"})]})]})},Qe.facturaId||Qe.id)})}):null};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Panel de Secretarias"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Confirma y gestiona facturas de embarques y contenedores"})]}),i.jsxs("div",{className:"flex gap-3 mb-6",children:[i.jsxs("button",{onClick:()=>e("embarques"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${t==="embarques"?"bg-indigo-600 text-white shadow-lg":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(as,{size:20}),"Contenedores Recibidos",ae.length>0&&i.jsx("span",{className:"ml-1 bg-white text-indigo-600 px-2 py-0.5 rounded-full text-xs font-bold",children:ae.length})]}),i.jsxs("button",{onClick:()=>e("facturas_antiguas"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${t==="facturas_antiguas"?"bg-purple-600 text-white shadow-lg":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(Au,{size:20}),"Sistema Antiguo"]})]}),t==="embarques"&&i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Contenedor"}),i.jsxs("select",{value:Ee,onChange:ve=>{ye(ve.target.value),Y("todas"),xe("pendientes"),ve.target.value&&be(ve.target.value)},className:"w-full max-w-md px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"-- Seleccionar Contenedor --"}),ae.map(ve=>{var at;const Ze=((at=ve.estadisticas)==null?void 0:at.facturasPendientes)||0;return i.jsxs("option",{value:ve.id,children:[ve.numeroContenedor," (",Ze," facturas por confirmar)"]},ve.id)})]})]}),Ee&&i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por Zona de Entrega"}),i.jsxs("select",{value:H,onChange:ve=>Y(ve.target.value),className:"w-full max-w-md px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"todas",children:"Todas las zonas"}),et(Vt()).map(ve=>{const Ze=Vt();if(!Ze)return null;const at=(Ze.facturas||[]).filter(it=>{var Er;const At=it.estadoItems||it.estadoFactura||it.estado,er=At==="completo"||At==="completa";return(((Er=it.destinatario)==null?void 0:Er.zona)||it.zona)===ve&&er&&it.confirmadaPorSecretaria!==!0}).length,Qe=(Ze.facturas||[]).filter(it=>{var er;return(((er=it.destinatario)==null?void 0:er.zona)||it.zona)===ve&&it.confirmadaPorSecretaria===!0}).length,ze={Capital:" Capital",Cibao:" Cibao",Sur:" Sur",Este:" Este",Local:" Local (Ban)"}[ve]||ve;return i.jsxs("option",{value:ve,children:[ze," (",at," pend, ",Qe," conf)"]},ve)})]})]}),X?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando contenedores..."})]}):ae.length===0?i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-8 text-center",children:[i.jsx(Br,{className:"mx-auto text-indigo-600 mb-4",size:64}),i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-lg font-medium",children:"No hay contenedores recibidos disponibles"})]}):Ee?(()=>{const ve=Vt(),Ze=ht(ve).length,at=Lt(ve).length;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4 pb-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Br,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:ve.numeroContenedor}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:H!=="todas"?`Zona: ${H}`:"Todas las zonas"})]})]}),i.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-800 dark:text-indigo-100 rounded-full text-sm font-medium",children:"Recibido"})]}),i.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>xe("pendientes"),className:`pb-3 px-4 font-medium transition-colors ${Ce==="pendientes"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Au,{size:16}),"Pendientes"]}),Ze>0&&i.jsx("span",{className:"ml-2 bg-rose-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:Ze})]}),i.jsxs("button",{onClick:()=>xe("confirmadas"),className:`pb-3 px-4 font-medium transition-colors ${Ce==="confirmadas"?"border-b-2 border-emerald-600 text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(zre,{size:16}),"Confirmadas"]}),at>0&&i.jsx("span",{className:"ml-2 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:at})]})]}),Ot()]})})():i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-8 text-center",children:[i.jsx(Br,{className:"mx-auto text-indigo-600 mb-4",size:48}),i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-lg font-medium",children:" Selecciona un contenedor para empezar a confirmar facturas"})]})]}),t==="facturas_antiguas"&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Embarque"}),i.jsxs("select",{value:o,onChange:ve=>l(ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Seleccionar embarque..."}),a.map(ve=>i.jsxs("option",{value:ve.id||ve._id,children:[ve.nombre," - ",new Date(ve.fechaCreacion).toLocaleDateString()]},ve.id||ve._id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona de Entrega"}),i.jsxs("select",{value:c,onChange:ve=>u(ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"todas",children:"Todas las zonas"}),i.jsx("option",{value:"capital",children:" Capital"}),i.jsx("option",{value:"cibao",children:" Cibao"}),i.jsx("option",{value:"sur",children:" Sur"}),i.jsx("option",{value:"local_bani",children:" Local (Ban)"})]})]})]}),o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>n("sin_confirmar"),className:`pb-3 px-4 font-medium transition-colors ${r==="sin_confirmar"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["Sin Confirmar",pt.sin_confirmar>0&&i.jsx("span",{className:"ml-2 bg-rose-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:pt.sin_confirmar})]}),i.jsxs("button",{onClick:()=>n("pendientes"),className:`pb-3 px-4 font-medium transition-colors ${r==="pendientes"?"border-b-2 border-amber-600 text-amber-600 dark:text-amber-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["Pendientes",pt.pendientes>0&&i.jsx("span",{className:"ml-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:pt.pendientes})]}),i.jsxs("button",{onClick:()=>n("confirmadas"),className:`pb-3 px-4 font-medium transition-colors ${r==="confirmadas"?"border-b-2 border-emerald-600 text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["Confirmadas",pt.confirmadas>0&&i.jsx("span",{className:"ml-2 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:pt.confirmadas})]}),i.jsxs("button",{onClick:()=>n("no_entregadas"),className:`pb-3 px-4 font-medium transition-colors ${r==="no_entregadas"?"border-b-2 border-amber-600 text-amber-600 dark:text-amber-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["No Entregadas",pt.no_entregadas>0&&i.jsx("span",{className:"ml-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:pt.no_entregadas})]})]}),p?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando facturas..."})]}):kt.length===0?i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-8 text-center",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:[r==="sin_confirmar"&&" No hay facturas sin confirmar",r==="pendientes"&&" No hay facturas pendientes",r==="confirmadas"&&" No hay facturas confirmadas an",r==="no_entregadas"&&" No hay facturas no entregadas"]})}):i.jsx("div",{className:"space-y-4",children:kt.map(ve=>i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-[250px]",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:["#",ve.codigoTracking||ve.numeroFactura||"-"]}),ve.zona&&i.jsxs("span",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 text-xs font-medium rounded",children:[ve.zona==="capital"&&" Capital",ve.zona==="cibao"&&" Cibao",ve.zona==="sur"&&" Sur",ve.zona==="local_bani"&&" Local"]})]}),i.jsxs("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:[" ",ve.cliente]}),ve.telefono&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",ve.telefono,i.jsx("button",{onClick:()=>Kt(ve.telefono),className:"ml-2 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Llamar"})]}),ve.direccion&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",ve.direccion,ve.sector&&i.jsxs("span",{className:"ml-2 text-indigo-600 dark:text-indigo-400 font-medium",children:["(",ve.sector,")"]})]}),ve.contenido&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",ve.contenido]}),ve.estadoPago&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:ve.estadoPago==="pagado"?" Pagado":" Cobrar al entregar"}),ve.observaciones&&i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm italic mt-2",children:[" ",ve.observaciones]})]}),i.jsxs("div",{className:"ml-4 flex flex-col gap-2 flex-shrink-0",children:[(r==="sin_confirmar"||r==="pendientes")&&i.jsx("button",{onClick:()=>Ft(ve,!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm font-medium",children:r==="pendientes"?" Re-intentar":" Confirmar"}),r==="confirmadas"&&i.jsx("span",{className:"px-4 py-2 bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 rounded-lg text-sm font-medium text-center",children:" Confirmada"}),r==="no_entregadas"&&i.jsx("button",{onClick:()=>Ft(ve,!1),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition text-sm font-medium",children:" Reasignar"})]})]})},ve.id))})]}):i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-8 text-center",children:i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-lg font-medium",children:" Selecciona un embarque para empezar"})})]}),_&&(b||se)&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl my-8",children:[i.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:Ie?"Editar Factura":"Confirmar Factura"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:(b==null?void 0:b.numeroFactura)||(se==null?void 0:se.numeroFactura)||(se==null?void 0:se.codigoTracking)})]}),i.jsx("button",{onClick:()=>{N(!1),Xe()},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[((se==null?void 0:se.remitente)||(b==null?void 0:b.remitente))&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(bl,{size:18}),"Remitente"]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",((Ut=se==null?void 0:se.remitente)==null?void 0:Ut.nombre)||((Nr=b==null?void 0:b.remitente)==null?void 0:Nr.nombre)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(vl,{size:14}),((or=se==null?void 0:se.remitente)==null?void 0:or.telefono)||((lt=b==null?void 0:b.remitente)==null?void 0:lt.telefono)||"N/A"]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(bl,{size:18}),"Destinatario"]}),i.jsx("div",{className:"space-y-2 text-sm",children:i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",(b==null?void 0:b.cliente)||((lr=se==null?void 0:se.destinatario)==null?void 0:lr.nombre)||(se==null?void 0:se.nombreCliente)||"Sin nombre"]})})]})]}),(se==null?void 0:se.items)&&se.items.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Br,{size:18}),"Items (",se.items.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:se.items.map((ve,Ze)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:ve.descripcion||ve.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",ve.cantidad]})]}),ve.precio&&i.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["$",ve.precio]})]},Ze))})]}),(se==null?void 0:se.facturacion)&&i.jsxs("div",{className:"mb-6 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Ul,{size:18}),"Facturacin"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["$",(se.facturacion.subtotal||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"ITBIS (18%):"}),i.jsxs("span",{children:["$",(se.facturacion.itbis||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900 dark:text-white border-t border-slate-300 dark:border-slate-600 pt-2",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",(se.facturacion.total||0).toFixed(2)," ",se.facturacion.moneda||"USD"]})]})]})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(en,{size:18}),"Informacin de Entrega"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Telfono *"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"tel",value:A,onChange:ve=>j(ve.target.value),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"809-555-1234"}),A&&i.jsxs("button",{onClick:()=>Kt(A),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2",children:[i.jsx(vl,{size:16}),"Llamar"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin *"}),i.jsx("input",{type:"text",value:P,onChange:ve=>U(ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Calle Principal #123"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Sector"}),i.jsx("input",{type:"text",value:G,onChange:ve=>O(ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Los Jardines"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona de Entrega *"}),i.jsxs("select",{value:D,onChange:ve=>I(ve.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white ${D?"border-slate-300 dark:border-slate-600":"border-rose-500"}`,children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),i.jsx("option",{value:"Capital",children:" Capital"}),i.jsx("option",{value:"Cibao",children:" Cibao"}),i.jsx("option",{value:"Sur",children:" Sur"}),i.jsx("option",{value:"Este",children:" Este"}),i.jsx("option",{value:"Local",children:" Local (Ban)"}),i.jsx("option",{value:"Yaguate y Sur",children:" Yaguate y Sur"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Estado del Pago *"}),ce&&i.jsx("div",{className:"mb-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(en,{className:"text-emerald-600 dark:text-emerald-400 mt-0.5",size:18}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-emerald-800 dark:text-emerald-200",children:" Factura Ya Pagada"}),i.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300 mt-1",children:"Esta factura ya fue pagada en Estados Unidos. No se puede modificar el estado de pago."})]})]})}),i.jsxs("select",{value:B,onChange:ve=>F(ve.target.value),disabled:ce,className:`w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${ce?"bg-slate-100 dark:bg-slate-800 opacity-50 cursor-not-allowed":""}`,children:[i.jsx("option",{value:"pago_recibir",children:" Pago al recibir"}),i.jsx("option",{value:"pagado",children:" Ya pagado"}),i.jsx("option",{value:"pagada",children:" Ya pagada"}),i.jsx("option",{value:"parcial",children:" Pago Parcial"}),i.jsx("option",{value:"contraentrega",children:" Contra Entrega"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Observaciones (Notas de Secretaria)"}),i.jsx("textarea",{value:V,onChange:ve=>R(ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:"3",placeholder:"Notas adicionales sobre la entrega..."})]})]})]})]}),i.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>{N(!1),Xe()},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),r!=="no_entregadas"&&b&&i.jsx("button",{onClick:nr,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition",children:" Marcar Pendiente"}),i.jsxs("button",{onClick:qt,className:`flex-1 px-4 py-2 text-white rounded-lg transition flex items-center justify-center gap-2 ${Ie?"bg-emerald-600 hover:bg-emerald-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:[i.jsx(en,{size:18}),Ie?"Guardar Cambios":"Confirmar"]})]})]})})]})},y7e={maxWidth:1024,maxHeight:1024,quality:.7,targetSizeKB:200,format:"image/jpeg"},w7e=t=>new Promise((e,r)=>{const n=new Image;n.onload=()=>e(n),n.onerror=r,n.src=URL.createObjectURL(t)}),_7e=(t,e,r,n)=>{let a=t,s=e;return t>e?t>r&&(a=r,s=e*r/t):e>n&&(s=n,a=t*n/e),{width:Math.round(a),height:Math.round(s)}},y$=async(t,e)=>{const{maxWidth:r,maxHeight:n,quality:a,format:s}=e,o=_7e(t.naturalWidth,t.naturalHeight,r,n),l=document.createElement("canvas");l.width=o.width,l.height=o.height;const c=l.getContext("2d");return c.imageSmoothingEnabled=!0,c.imageSmoothingQuality="high",c.drawImage(t,0,0,o.width,o.height),new Promise((u,d)=>{l.toBlob(h=>{h?u(h):d(new Error("Error al comprimir imagen"))},s,a)})},N7e=async(t,e)=>{const{targetSizeKB:r}=e;let n=e.quality,a=await y$(t,{...e,quality:n}),s=0;const o=5;if(a.size/1024<=r)return a;for(;a.size/1024>r&&s<o&&n>.3;)s++,n-=.1,a=await y$(t,{...e,quality:Math.max(.3,n)});return a},w$=async(t,e={},r=null)=>{try{if(!t.type.startsWith("image/"))throw new Error("El archivo no es una imagen vlida");const n=t.size;r&&r({stage:"loading",progress:0});const a=await w7e(t);r&&r({stage:"compressing",progress:30});const s={...y7e,...e},o=await N7e(a,s);r&&r({stage:"complete",progress:100}),URL.revokeObjectURL(a.src);const l=o.size,c=((1-l/n)*100).toFixed(1);return{blob:o,originalSize:n,compressedSize:l,compressionRatio:parseFloat(c),metadata:{originalSizeKB:(n/1024).toFixed(2),compressedSizeKB:(l/1024).toFixed(2),format:s.format,dimensions:{width:a.naturalWidth,height:a.naturalHeight}}}}catch(n){throw console.error("Error comprimiendo imagen:",n),n}},_$={thumbnail:{maxWidth:200,maxHeight:200,quality:.6,targetSizeKB:30,format:"image/jpeg"},preview:{maxWidth:1024,maxHeight:1024,quality:.7,targetSizeKB:200,format:"image/jpeg"},highQuality:{maxWidth:1280,maxHeight:1280,quality:.8,targetSizeKB:300,format:"image/jpeg"}},yse=async(t,e={})=>{var o,l,c,u;const{generateThumbnail:r=!0,generatePreview:n=!0,onProgress:a=null}=e,s={};try{if(r){a&&a({stage:"thumbnail",progress:33});const p=await w$(t,_$.thumbnail,g=>{a&&a({stage:"thumbnail",progress:33+g.progress*.33})});s.thumbnail={blob:p.blob,size:p.compressedSize,sizeKB:p.metadata.compressedSizeKB}}if(n){a&&a({stage:"preview",progress:66});const p=await w$(t,_$.preview,g=>{a&&a({stage:"preview",progress:66+g.progress*.33})});s.preview={blob:p.blob,size:p.compressedSize,sizeKB:p.metadata.compressedSizeKB}}a&&a({stage:"complete",progress:100});const d=(t.size/1024).toFixed(2),h=((((o=s.thumbnail)==null?void 0:o.size)||0)+(((l=s.preview)==null?void 0:l.size)||0))/1024;return s.metadata={originalSizeKB:d,totalCompressedKB:h.toFixed(2),thumbnailSizeKB:((c=s.thumbnail)==null?void 0:c.sizeKB)||0,previewSizeKB:((u=s.preview)==null?void 0:u.sizeKB)||0,compressionRatio:((1-h/d)*100).toFixed(1)},s}catch(d){throw console.error("Error generando variantes de imagen:",d),d}},N$=(t,e,r="thumbnail")=>{const n=e.split(".").pop(),s=`${e.replace(/\.[^/.]+$/,"")}_${r}.${n}`;return new File([t],s,{type:t.type})},xT=()=>{var et,Jt,Ve,Ft,qt,Wt,nr;const{executeWithOptimism:t}=Aae();kae();const[e,r]=S.useState([]),[n,a]=S.useState(null),[s,o]=S.useState("lista"),[l,c]=S.useState(!0),[u,d]=S.useState(!1),[h,p]=S.useState(!1),[g,b]=S.useState(!1),[w,_]=S.useState(null),[N,A]=S.useState(""),[j,P]=S.useState([]),[U,G]=S.useState(!1),[O,D]=S.useState(!1),[I,V]=S.useState(""),[R,B]=S.useState(!1),[F,ee]=S.useState([]),[Z,ce]=S.useState(0),[ne,ae]=S.useState(!1),[me,Ee]=S.useState(null),[ye,H]=S.useState(!1),[Y,X]=S.useState(""),[re,se]=S.useState(null);S.useEffect(()=>{Ce()},[]),S.useEffect(()=>{if(!ye||!n)return;const Xe=Kt=>{["INPUT","TEXTAREA"].includes(Kt.target.tagName)||(Kt.key==="Enter"?Y&&(ke(Y),X("")):Kt.key.length===1&&X(kt=>kt+Kt.key))};return window.addEventListener("keydown",Xe),()=>window.removeEventListener("keydown",Xe)},[ye,Y,n]);const ke=Xe=>{se(Xe),console.log(" Cdigo escaneado:",Xe);let Kt=!1;for(const kt of n.facturas||[])if(kt.codigoTracking===Xe||kt.items&&kt.items.some(pt=>pt.codigoBarras===Xe)){const pt=kt.items.map((Ot,Ut)=>({item:Ot,index:Ut})).filter(({item:Ot})=>Ot.codigoBarras===Xe||kt.codigoTracking===Xe);if(pt.length>0){Kt=!0;const Ot=pt.find(({item:Ut})=>!Ut.cargado);Ot?(Ue(kt.id,Ot.index),We.success(`Item escaneado: ${Ot.item.descripcion}`,{icon:"",duration:2e3})):We.info("Item(s) ya cargado(s) para este cdigo",{icon:""});break}}Kt||We.error(`Cdigo no encontrado en esta ruta: ${Xe}`,{icon:""})},Ce=async()=>{try{c(!0);const Xe=await wt.get("/cargadores/rutas");Xe.data.success&&r(Xe.data.data||[])}catch(Xe){console.error("Error cargando rutas:",Xe),We.error("Error al cargar las rutas asignadas"),r([])}finally{c(!1)}},xe=async Xe=>{try{d(!0);const Kt=await wt.get(`/cargadores/rutas/${Xe}`);Kt.data.success&&(a(Kt.data.data),o("detalle"))}catch(Kt){console.error("Error cargando detalle:",Kt),We.error("Error al cargar el detalle de la ruta")}finally{d(!1)}},Ie=()=>{o("lista"),a(null),Ce()},He=async()=>{var Xe,Kt;if(n)try{p(!0),(await wt.post(`/cargadores/rutas/${n.id}/iniciar-carga`)).data.success&&(We.success("Carga iniciada exitosamente"),await xe(n.id))}catch(kt){console.error("Error iniciando carga:",kt),We.error(((Kt=(Xe=kt.response)==null?void 0:Xe.data)==null?void 0:Kt.message)||"Error al iniciar la carga")}finally{p(!1)}},Ue=async(Xe,Kt)=>{var Ot;if(!n)return;const kt=(Ot=n.facturas)==null?void 0:Ot.find(Ut=>Ut.id===Xe);if(!kt||!kt.items||!kt.items[Kt])return;const pt={cargado:kt.items[Kt].cargado};await t({optimisticUpdate:()=>{a(Ut=>{const Nr=[...Ut.facturas||[]],or=Nr.findIndex(lt=>lt.id===Xe);return or!==-1&&(Nr[or]={...Nr[or],items:Nr[or].items.map((lt,lr)=>lr===Kt?{...lt,cargado:!0,_optimistic:!0}:lt)}),{...Ut,facturas:Nr}})},serverAction:async()=>{const Ut=await wt.post(`/cargadores/rutas/${n.id}/facturas/${Xe}/items/confirmar`,{itemIndex:Kt});return await xe(n.id),Ut},rollback:()=>{a(Ut=>{const Nr=[...Ut.facturas||[]],or=Nr.findIndex(lt=>lt.id===Xe);return or!==-1&&(Nr[or]={...Nr[or],items:Nr[or].items.map((lt,lr)=>lr===Kt?{...lt,cargado:pt.cargado,_optimistic:!1}:lt)}),{...Ut,facturas:Nr}})},successMessage:" Item marcado como cargado",errorMessage:" Error al confirmar item"})},Me=async()=>{var Xe,Kt,kt,pt,Ot;if(n)try{p(!0),(await wt.post(`/cargadores/rutas/${n.id}/finalizar-carga`,{notas:I})).data.success&&(We.success("Carga finalizada correctamente",{description:"La ruta ahora est lista para el repartidor"}),D(!1),V(""),Ie())}catch(Ut){console.error("Error finalizando carga:",Ut),(Kt=(Xe=Ut.response)==null?void 0:Xe.data)!=null&&Kt.requiereConfirmacion?We.error("Carga incompleta",{description:`Hay ${((kt=Ut.response.data.facturasIncompletas)==null?void 0:kt.length)||0} facturas con items pendientes.`}):We.error(((Ot=(pt=Ut.response)==null?void 0:pt.data)==null?void 0:Ot.message)||"Error al finalizar la carga")}finally{p(!1)}},Be=async(Xe,Kt)=>{const kt=[];for(let pt=0;pt<Xe.length;pt++){const Ot=Xe[pt];try{const Ut=Date.now(),Nr=setTimeout(()=>{We.loading(`Procesando imagen ${pt+1}/${Xe.length}...`,{id:`process-${pt}`})},500),or=await yse(Ot,{onProgress:Er=>{Er.stage==="thumbnail"?We.loading(`Generando thumbnail ${pt+1}...`,{id:`process-${pt}`}):Er.stage==="preview"&&We.loading(`Generando preview ${pt+1}...`,{id:`process-${pt}`})}});clearTimeout(Nr),We.dismiss(`process-${pt}`);const lt=Date.now(),lr=`danos/${Kt}/${lt}_${pt}`,ve=N$(or.thumbnail.blob,Ot.name,"thumb"),Ze=`${lr}_thumb.jpg`,at=ny(Cx,Ze);await ty(at,ve);const Qe=await ry(at),ze=N$(or.preview.blob,Ot.name,"preview"),it=`${lr}_preview.jpg`,At=ny(Cx,it);await ty(At,ze);const er=await ry(At);kt.push({thumbnail:Qe,preview:er,metadata:or.metadata}),Date.now()-Ut>500&&We.success(`Imagen ${pt+1}: ${or.metadata.originalSizeKB}KB  Thumb: ${or.metadata.thumbnailSizeKB}KB + Preview: ${or.metadata.previewSizeKB}KB`,{duration:3e3})}catch(Ut){throw console.error("Error procesando foto:",Ut),We.error(`Error al procesar ${Ot.name}`),new Error(`Fallo al procesar imagen ${pt+1}`)}}return kt},be=(Xe,Kt,kt)=>{_({facturaId:Xe,item:Kt,itemIndex:kt}),A(""),P([]),b(!0)},Vt=async()=>{var Xe,Kt;if(!w||!N.trim()){We.error("Debes describir el dao encontrado");return}try{p(!0),G(!0);let kt=[];j.length>0&&(We.info(`Subiendo ${j.length} foto(s)...`),kt=await Be(j,w.facturaId)),(await wt.post(`/cargadores/facturas/${w.facturaId}/items/danado`,{itemIndex:w.itemIndex,descripcionDano:N.trim(),fotos:kt})).data.success&&(We.success("Dao reportado exitosamente"),b(!1),await xe(n.id))}catch(kt){console.error("Error reportando dao:",kt),We.error(((Kt=(Xe=kt.response)==null?void 0:Xe.data)==null?void 0:Kt.message)||"Error al guardar el reporte")}finally{p(!1),G(!1)}},ht=Xe=>{!Xe||Xe.length===0||(ee(Xe),ce(0),B(!0))},Lt=Xe=>{Ee(Xe),ae(!0)};return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[s==="detalle"&&i.jsx("button",{onClick:Ie,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition",children:i.jsx(Gl,{className:"text-slate-700 dark:text-slate-300"})}),i.jsx(as,{size:32,className:"text-indigo-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Panel de Cargadores"})}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:s==="lista"?"Selecciona una ruta para comenzar":(n==null?void 0:n.nombre)||"Detalle de Ruta"})]})]})})}),s==="lista"&&i.jsx("div",{className:"space-y-4",children:l?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(ts,{className:"animate-spin text-indigo-600",size:40})}):e.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-8 text-center",children:[i.jsx(Br,{size:48,className:"mx-auto text-slate-400 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes rutas asignadas en este momento"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(Xe=>{var Kt,kt,pt,Ot,Ut;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition border-l-4 border-indigo-500",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:Xe.nombre}),i.jsx("div",{className:"flex gap-2 mt-2",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Xe.estado==="asignada"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200":"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"}`,children:Xe.estado==="asignada"?"Asignada":"En Proceso"})})]})}),Xe.zona&&i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 mb-4",children:[i.jsx(Fa,{size:16}),i.jsx("span",{children:Xe.zona})]}),Xe.repartidorNombre&&i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["Repartidor: ",Xe.repartidorNombre]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Facturas"}),i.jsx("p",{className:"font-bold text-lg text-slate-900 dark:text-white",children:((Kt=Xe.estadisticas)==null?void 0:Kt.totalFacturas)||0})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-300",children:"Items"}),i.jsxs("p",{className:"font-bold text-lg text-purple-700 dark:text-purple-200",children:[((kt=Xe.estadisticas)==null?void 0:kt.itemsCargados)||0,"/",((pt=Xe.estadisticas)==null?void 0:pt.totalItems)||0]})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-300",children:"Progreso"}),i.jsxs("p",{className:"font-bold text-lg text-amber-700 dark:text-amber-200",children:[((Ot=Xe.estadisticas)==null?void 0:Ot.porcentajeCarga)||0,"%"]})]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-4",children:i.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-500",style:{width:`${((Ut=Xe.estadisticas)==null?void 0:Ut.porcentajeCarga)||0}%`}})}),i.jsx("button",{onClick:()=>xe(Xe.id),disabled:u,className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:u?i.jsx(ts,{className:"animate-spin",size:18}):i.jsxs(i.Fragment,{children:[i.jsx(Zu,{size:18}),"Gestionar Carga"]})})]},Xe.id)})})}),s==="detalle"&&n&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n.nombre}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:["Progreso total: ",n.itemsCargadosRuta||0," de ",n.itemsTotalRuta||0," items"]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>window.open(`/rutas/${n.id}/imprimir`,"_blank"),className:"p-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition",title:"Imprimir Facturas",children:i.jsx(Wl,{size:18})}),n.estado==="asignada"?i.jsxs("button",{onClick:He,disabled:h,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition font-medium flex items-center gap-2 disabled:opacity-50",children:[h?i.jsx(ts,{className:"animate-spin",size:18}):i.jsx(en,{size:18}),"Iniciar Proceso de Carga"]}):i.jsxs("button",{onClick:()=>D(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium flex items-center gap-2",children:[i.jsx(en,{size:18}),"Finalizar Carga"]})]})]}),n.estado==="asignada"||n.estado==="en_carga"?i.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-center justify-between transition ${ye?"bg-indigo-50 border border-indigo-200":"bg-slate-50"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-3 rounded-full ${ye?"bg-indigo-100 text-indigo-600 animate-pulse":"bg-slate-200 text-slate-500"}`,children:i.jsx(Lre,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:"Modo Scanner Automtico"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:ye?"LISTO PARA ESCANEAR... (Emule teclado)":"Activa para cargar items automticamente al escanear"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[re&&i.jsxs("span",{className:"text-xs bg-white px-2 py-1 rounded border font-mono",children:["ltimo: ",re]}),i.jsx("button",{onClick:()=>H(!ye),className:`px-4 py-2 rounded-lg font-medium transition ${ye?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:ye?"DESACTIVAR":"ACTIVAR"})]})]}):null]}),i.jsx("div",{className:"space-y-4",children:n.facturas&&n.facturas.length>0?n.facturas.map((Xe,Kt)=>{var kt;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700 flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Xe.codigoTracking}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${Xe.estadoCarga==="cargada"?"bg-emerald-100 text-emerald-800":"bg-slate-200 text-slate-700"}`,children:Xe.estadoCarga==="cargada"?"COMPLETADA":"PENDIENTE"}),i.jsxs("button",{onClick:()=>Lt(Xe),className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded hover:bg-indigo-700 transition flex items-center gap-1",children:[i.jsx(Br,{size:12}),"Ver Detalles"]})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:((kt=Xe.destinatario)==null?void 0:kt.nombre)||"Sin destinatario"})]}),i.jsxs("div",{className:"text-right text-sm text-slate-500 dark:text-slate-400",children:[Xe.itemsCargados||0," / ",Xe.itemsTotal||0," items cargados"]})]}),i.jsx("div",{className:"p-4 space-y-3",children:Xe.items&&Xe.items.map((pt,Ot)=>i.jsxs("div",{className:`flex flex-col md:flex-row justify-between items-center p-4 rounded-lg border-2 transition ${pt.cargado?"bg-emerald-50 dark:bg-emerald-900/10 border-emerald-500":"bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600"}`,children:[i.jsx("div",{className:"flex-1 w-full mb-3 md:mb-0",children:i.jsxs("div",{className:"flex items-center gap-3",children:[pt.cargado?i.jsx(en,{className:"text-emerald-600 flex-shrink-0",size:24}):i.jsx(Zu,{className:"text-slate-400 flex-shrink-0",size:24}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-lg",children:pt.descripcion||pt.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",pt.cantidad]}),pt.fotos&&pt.fotos.length>0&&i.jsxs("button",{onClick:()=>ht(pt.fotos),className:"mt-1 text-xs text-indigo-600 hover:underline flex items-center gap-1",children:[i.jsx($d,{size:12})," Ver fotos del item"]})]})]})}),n.estado==="en_carga"&&!pt.cargado&&i.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[i.jsxs("button",{onClick:()=>Ue(Xe.id,Ot),disabled:h,className:"flex-1 md:flex-none px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:[i.jsx(en,{size:16}),"Cargar"]}),i.jsxs("button",{onClick:()=>be(Xe.id,pt,Ot),disabled:h,className:"flex-1 md:flex-none px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition font-medium flex items-center justify-center gap-2",children:[i.jsx(bi,{size:16}),"Daado"]})]}),pt.cargado&&i.jsxs("div",{className:"px-4 py-2 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 rounded-lg font-medium flex items-center gap-2",children:[i.jsx(en,{size:16})," Cargado"]})]},Ot))}),Xe.itemsDanados&&Xe.itemsDanados.length>0&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-t border-amber-200 dark:border-amber-800",children:[i.jsxs("p",{className:"text-sm font-bold text-amber-700 dark:text-amber-300 flex items-center gap-2",children:[i.jsx(bi,{size:14})," Reportes de Dao:"]}),Xe.itemsDanados.map((pt,Ot)=>{var Ut,Nr;return i.jsxs("div",{className:"text-xs text-amber-800 dark:text-amber-200 ml-5 mt-1",children:[" ",(Ut=pt.item)==null?void 0:Ut.descripcion,": ",pt.descripcionDano,((Nr=pt.fotos)==null?void 0:Nr.length)>0&&i.jsx("button",{onClick:()=>ht(pt.fotos),className:"ml-2 text-indigo-600 underline",children:"Ver fotos"})]},Ot)})]})]},Xe.id||Kt)}):i.jsx("div",{className:"p-8 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-lg",children:"No hay facturas en esta ruta."})})]}),g&&w&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(bi,{className:"text-amber-600"}),"Reportar Item Daado"]}),i.jsx("button",{onClick:()=>b(!1),className:"text-slate-500 hover:text-slate-700",children:i.jsx(Jn,{})})]}),i.jsxs("div",{className:"mb-4 p-3 bg-slate-100 dark:bg-slate-700 rounded",children:[i.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:w.item.descripcion}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cant: ",w.item.cantidad]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Descripcin del dao"}),i.jsx("textarea",{value:N,onChange:Xe=>A(Xe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-amber-500",rows:"3",placeholder:"Describe qu est daado..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fotos de evidencia"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Xe=>P(Array.from(Xe.target.files)),className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"}),j.length>0&&i.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[j.length," fotos seleccionadas"]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>b(!1),disabled:h,className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsxs("button",{onClick:Vt,disabled:h||!N.trim(),className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition disabled:opacity-50 flex justify-center items-center gap-2",children:[U?i.jsx(ts,{className:"animate-spin",size:18}):i.jsx(bi,{size:18}),U?"Subiendo...":"Reportar"]})]})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md p-6 shadow-2xl",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(en,{className:"text-emerald-600"}),"Finalizar Carga"]}),i.jsx("div",{className:"mb-4 bg-emerald-50 dark:bg-emerald-900/20 p-3 rounded text-sm text-emerald-800 dark:text-emerald-200",children:i.jsx("p",{children:'Al finalizar, la ruta cambiar a estado "Cargada" y estar disponible para el repartidor.'})}),i.jsx("textarea",{value:I,onChange:Xe=>V(Xe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg mb-4",placeholder:"Notas opcionales sobre la carga...",rows:"3"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>D(!1),disabled:h,className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-100 dark:border-slate-600 dark:text-white dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:Me,disabled:h,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex justify-center items-center gap-2",children:h?i.jsx(ts,{className:"animate-spin",size:18}):"Confirmar"})]})]})}),R&&F.length>0&&i.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center z-[9999] p-4",children:i.jsxs("div",{className:"relative w-full max-w-6xl max-h-[90vh] flex flex-col items-center justify-center",children:[i.jsx("button",{onClick:()=>{B(!1),ee([])},className:"absolute top-4 right-4 text-white hover:text-slate-300 p-2 bg-black/50 rounded-full z-[10000]",children:i.jsx(Jn,{size:32})}),i.jsx(Cae,{src:F[Z],alt:`Foto ${Z+1}`,className:"max-h-[calc(90vh-120px)] max-w-full rounded-lg shadow-2xl",showOptimizedBadge:!0,showZoomIcon:!1,usePreview:!0,objectFit:"contain"}),F.length>1&&i.jsxs("div",{className:"flex gap-4 mt-4",children:[i.jsx("button",{onClick:()=>ce(Xe=>Xe>0?Xe-1:F.length-1),className:"px-4 py-2 bg-white/20 text-white rounded-full hover:bg-white/30",children:"Anterior"}),i.jsxs("span",{className:"text-white py-2",children:[Z+1," / ",F.length]}),i.jsx("button",{onClick:()=>ce(Xe=>Xe<F.length-1?Xe+1:0),className:"px-4 py-2 bg-white/20 text-white rounded-full hover:bg-white/30",children:"Siguiente"})]})]})}),ne&&me&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-3xl p-6 shadow-2xl my-8",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Br,{className:"text-indigo-600"}),"Detalles de Factura"]}),i.jsx("button",{onClick:()=>ae(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-200 mb-2",children:"Cdigo de Tracking"}),i.jsx("p",{className:"text-2xl font-mono font-bold text-indigo-700 dark:text-indigo-300",children:me.codigoTracking})]}),i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Fa,{size:18,className:"text-emerald-600"}),"Destinatario"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Nombre:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((et=me.destinatario)==null?void 0:et.nombre)||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Telfono:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((Jt=me.destinatario)==null?void 0:Jt.telefono)||"No especificado"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Direccin:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((Ve=me.destinatario)==null?void 0:Ve.direccion)||"No especificada"})]}),((Ft=me.destinatario)==null?void 0:Ft.sector)&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sector:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:me.destinatario.sector})]}),((qt=me.destinatario)==null?void 0:qt.zona)&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Zona:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:me.destinatario.zona})]})]})]}),i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Zu,{size:18,className:"text-purple-600"}),"Items de la Factura (",((Wt=me.items)==null?void 0:Wt.length)||0,")"]}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(nr=me.items)==null?void 0:nr.map((Xe,Kt)=>i.jsxs("div",{className:"flex justify-between items-start p-3 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:Xe.descripcion||Xe.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",Xe.cantidad]}),Xe.fotos&&Xe.fotos.length>0&&i.jsxs("button",{onClick:()=>ht(Xe.fotos),className:"mt-1 text-xs text-indigo-600 hover:underline flex items-center gap-1",children:[i.jsx($d,{size:12})," Ver ",Xe.fotos.length," foto(s)"]})]}),Xe.cargado&&i.jsx(en,{className:"text-emerald-600 flex-shrink-0 ml-2",size:20})]},Kt))})]}),me.fotos&&me.fotos.length>0&&i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx($d,{size:18,className:"text-indigo-600"}),"Fotos de la Recoleccin (",me.fotos.length,")"]}),i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:me.fotos.map((Xe,Kt)=>i.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity border-2 border-slate-200 dark:border-slate-600",onClick:()=>ht(me.fotos),children:i.jsx("img",{src:Xe,alt:`Foto ${Kt+1}`,className:"w-full h-full object-cover",loading:"lazy"})},Kt))}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Haz clic en cualquier foto para ver en tamao completo"})]}),me.facturacion&&i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-3",children:"Facturacin"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[me.facturacion.subtotal&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Subtotal:"}),i.jsxs("p",{className:"font-medium text-slate-900 dark:text-white",children:["$",me.facturacion.subtotal]})]}),me.facturacion.total&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Total:"}),i.jsxs("p",{className:"font-bold text-lg text-slate-900 dark:text-white",children:["$",me.facturacion.total]})]})]})]}),i.jsx("button",{onClick:()=>ae(!1),className:"w-full px-4 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition font-medium",children:"Cerrar"})]})]})})]})},E7e=({onRefresh:t,children:e})=>{const[r,n]=S.useState(0),[a,s]=S.useState(!1),[o,l]=S.useState(0),c=S.useRef(null),u=80,d=g=>{window.scrollY===0&&n(g.touches[0].clientY)},h=g=>{if(r===0)return;const w=g.touches[0].clientY-r;w>0&&window.scrollY===0&&l(Math.min(w*.5,120))},p=async()=>{if(o>u){s(!0),l(u);try{await t()}finally{setTimeout(()=>{s(!1),l(0),n(0)},500)}}else l(0),n(0)};return i.jsxs("div",{ref:c,className:"min-h-screen relative",onTouchStart:d,onTouchMove:h,onTouchEnd:p,children:[i.jsx("div",{className:"fixed top-16 left-0 w-full flex justify-center items-center pointer-events-none transition-all duration-200 z-50",style:{opacity:o>0?1:0,transform:`translateY(${o>0?o:-50}px)`},children:i.jsx("div",{className:`bg-white dark:bg-slate-800 rounded-full p-3 shadow-lg border border-slate-200 dark:border-slate-700 ${a?"animate-spin":""}`,children:i.jsx(dh,{size:24,className:`text-indigo-600 ${o>u&&!a?"rotate-180 transition-transform duration-300":""}`})})}),i.jsx("div",{style:{transform:`translateY(${o}px)`,transition:a?"transform 0.2s":"none"},children:e})]})};var Tr;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Tr||(Tr={}));var E$=new Map([[Tr.QR_CODE,"QR_CODE"],[Tr.AZTEC,"AZTEC"],[Tr.CODABAR,"CODABAR"],[Tr.CODE_39,"CODE_39"],[Tr.CODE_93,"CODE_93"],[Tr.CODE_128,"CODE_128"],[Tr.DATA_MATRIX,"DATA_MATRIX"],[Tr.MAXICODE,"MAXICODE"],[Tr.ITF,"ITF"],[Tr.EAN_13,"EAN_13"],[Tr.EAN_8,"EAN_8"],[Tr.PDF_417,"PDF_417"],[Tr.RSS_14,"RSS_14"],[Tr.RSS_EXPANDED,"RSS_EXPANDED"],[Tr.UPC_A,"UPC_A"],[Tr.UPC_E,"UPC_E"],[Tr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),A$;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(A$||(A$={}));function A7e(t){return Object.values(Tr).includes(t)}var fy;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(fy||(fy={}));var S7e=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[fy.SCAN_TYPE_CAMERA,fy.SCAN_TYPE_FILE],t}(),wse=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!E$.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,E$.get(e))},t}(),S$=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),X8;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(X8||(X8={}));var j7e=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:X8.UNKWOWN_ERROR}},t}(),T7e=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function wf(t){return typeof t>"u"||t===null}var E1=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),_se=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(a),o=Object.keys(e),l=0,c=o;l<c.length;l++){var u=c[l];if(s.has(u))return r.logError("".concat(u," is not supported videoConstaints."),!0),!1}return!0},t}(),Y8={exports:{}};(function(t,e){(function(r,n){n(e)})(Lv,function(r){function n(oe){return oe==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,f){oe.__proto__=f}||function(oe,f){for(var m in f)f.hasOwnProperty(m)&&(oe[m]=f[m])};function s(oe,f){a(oe,f);function m(){this.constructor=oe}oe.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}function o(oe,f){var m=Object.setPrototypeOf;m?m(oe,f):oe.__proto__=f}function l(oe,f){f===void 0&&(f=oe.constructor);var m=Error.captureStackTrace;m&&m(oe,f)}var c=function(oe){s(f,oe);function f(m){var x=this.constructor,v=oe.call(this,m)||this;return Object.defineProperty(v,"name",{value:x.name,enumerable:!1}),o(v,x.prototype),l(v),v}return f}(Error);class u extends c{constructor(f=void 0){super(f),this.message=f}getKind(){return this.constructor.kind}}u.kind="Exception";class d extends u{}d.kind="ArgumentException";class h extends u{}h.kind="IllegalArgumentException";class p{constructor(f){if(this.binarizer=f,f===null)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(f,m){return this.binarizer.getBlackRow(f,m)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(f,m,x,v){const y=this.binarizer.getLuminanceSource().crop(f,m,x,v);return new p(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const f=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new p(this.binarizer.createBinarizer(f))}rotateCounterClockwise45(){const f=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new p(this.binarizer.createBinarizer(f))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class g extends u{static getChecksumInstance(){return new g}}g.kind="ChecksumException";class b{constructor(f){this.source=f}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(f,m,x,v,y){for(;y--;)x[v++]=f[m++]}static currentTimeMillis(){return Date.now()}}class _ extends u{}_.kind="IndexOutOfBoundsException";class N extends _{constructor(f=void 0,m=void 0){super(m),this.index=f,this.message=m}}N.kind="ArrayIndexOutOfBoundsException";class A{static fill(f,m){for(let x=0,v=f.length;x<v;x++)f[x]=m}static fillWithin(f,m,x,v){A.rangeCheck(f.length,m,x);for(let y=m;y<x;y++)f[y]=v}static rangeCheck(f,m,x){if(m>x)throw new h("fromIndex("+m+") > toIndex("+x+")");if(m<0)throw new N(m);if(x>f)throw new N(x)}static asList(...f){return f}static create(f,m,x){return Array.from({length:f}).map(y=>Array.from({length:m}).fill(x))}static createInt32Array(f,m,x){return Array.from({length:f}).map(y=>Int32Array.from({length:m}).fill(x))}static equals(f,m){if(!f||!m||!f.length||!m.length||f.length!==m.length)return!1;for(let x=0,v=f.length;x<v;x++)if(f[x]!==m[x])return!1;return!0}static hashCode(f){if(f===null)return 0;let m=1;for(const x of f)m=31*m+x;return m}static fillUint8Array(f,m){for(let x=0;x!==f.length;x++)f[x]=m}static copyOf(f,m){return f.slice(0,m)}static copyOfUint8Array(f,m){if(f.length<=m){const x=new Uint8Array(m);return x.set(f),x}return f.slice(0,m)}static copyOfRange(f,m,x){const v=x-m,y=new Int32Array(v);return w.arraycopy(f,m,y,0,v),y}static binarySearch(f,m,x){x===void 0&&(x=A.numberComparator);let v=0,y=f.length-1;for(;v<=y;){const E=y+v>>1,k=x(m,f[E]);if(k>0)v=E+1;else if(k<0)y=E-1;else return E}return-v-1}static numberComparator(f,m){return f-m}}class j{static numberOfTrailingZeros(f){let m;if(f===0)return 32;let x=31;return m=f<<16,m!==0&&(x-=16,f=m),m=f<<8,m!==0&&(x-=8,f=m),m=f<<4,m!==0&&(x-=4,f=m),m=f<<2,m!==0&&(x-=2,f=m),x-(f<<1>>>31)}static numberOfLeadingZeros(f){if(f===0)return 32;let m=1;return f>>>16||(m+=16,f<<=16),f>>>24||(m+=8,f<<=8),f>>>28||(m+=4,f<<=4),f>>>30||(m+=2,f<<=2),m-=f>>>31,m}static toHexString(f){return f.toString(16)}static toBinaryString(f){return String(parseInt(String(f),2))}static bitCount(f){return f=f-(f>>>1&1431655765),f=(f&858993459)+(f>>>2&858993459),f=f+(f>>>4)&252645135,f=f+(f>>>8),f=f+(f>>>16),f&63}static truncDivision(f,m){return Math.trunc(f/m)}static parseInt(f,m=void 0){return parseInt(f,m)}}j.MIN_VALUE_32_BITS=-2147483648,j.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(f,m){f===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=f,m==null?this.bits=P.makeArray(f):this.bits=m)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(f){if(f>this.bits.length*32){const m=P.makeArray(f);w.arraycopy(this.bits,0,m,0,this.bits.length),this.bits=m}}get(f){return(this.bits[Math.floor(f/32)]&1<<(f&31))!==0}set(f){this.bits[Math.floor(f/32)]|=1<<(f&31)}flip(f){this.bits[Math.floor(f/32)]^=1<<(f&31)}getNextSet(f){const m=this.size;if(f>=m)return m;const x=this.bits;let v=Math.floor(f/32),y=x[v];y&=~((1<<(f&31))-1);const E=x.length;for(;y===0;){if(++v===E)return m;y=x[v]}const k=v*32+j.numberOfTrailingZeros(y);return k>m?m:k}getNextUnset(f){const m=this.size;if(f>=m)return m;const x=this.bits;let v=Math.floor(f/32),y=~x[v];y&=~((1<<(f&31))-1);const E=x.length;for(;y===0;){if(++v===E)return m;y=~x[v]}const k=v*32+j.numberOfTrailingZeros(y);return k>m?m:k}setBulk(f,m){this.bits[Math.floor(f/32)]=m}setRange(f,m){if(m<f||f<0||m>this.size)throw new h;if(m===f)return;m--;const x=Math.floor(f/32),v=Math.floor(m/32),y=this.bits;for(let E=x;E<=v;E++){const k=E>x?0:f&31,q=(2<<(E<v?31:m&31))-(1<<k);y[E]|=q}}clear(){const f=this.bits.length,m=this.bits;for(let x=0;x<f;x++)m[x]=0}isRange(f,m,x){if(m<f||f<0||m>this.size)throw new h;if(m===f)return!0;m--;const v=Math.floor(f/32),y=Math.floor(m/32),E=this.bits;for(let k=v;k<=y;k++){const L=k>v?0:f&31,Q=(2<<(k<y?31:m&31))-(1<<L)&4294967295;if((E[k]&Q)!==(x?Q:0))return!1}return!0}appendBit(f){this.ensureCapacity(this.size+1),f&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(f,m){if(m<0||m>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+m);for(let x=m;x>0;x--)this.appendBit((f>>x-1&1)===1)}appendBitArray(f){const m=f.size;this.ensureCapacity(this.size+m);for(let x=0;x<m;x++)this.appendBit(f.get(x))}xor(f){if(this.size!==f.size)throw new h("Sizes don't match");const m=this.bits;for(let x=0,v=m.length;x<v;x++)m[x]^=f.bits[x]}toBytes(f,m,x,v){for(let y=0;y<v;y++){let E=0;for(let k=0;k<8;k++)this.get(f)&&(E|=1<<7-k),f++;m[x+y]=E}}getBitArray(){return this.bits}reverse(){const f=new Int32Array(this.bits.length),m=Math.floor((this.size-1)/32),x=m+1,v=this.bits;for(let y=0;y<x;y++){let E=v[y];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,f[m-y]=E}if(this.size!==x*32){const y=x*32-this.size;let E=f[0]>>>y;for(let k=1;k<x;k++){const L=f[k];E|=L<<32-y,f[k-1]=E,E=L>>>y}f[x-1]=E}this.bits=f}static makeArray(f){return new Int32Array(Math.floor((f+31)/32))}equals(f){if(!(f instanceof P))return!1;const m=f;return this.size===m.size&&A.equals(this.bits,m.bits)}hashCode(){return 31*this.size+A.hashCode(this.bits)}toString(){let f="";for(let m=0,x=this.size;m<x;m++)m&7||(f+=" "),f+=this.get(m)?"X":".";return f}clone(){return new P(this.size,this.bits.slice())}}var U;(function(oe){oe[oe.OTHER=0]="OTHER",oe[oe.PURE_BARCODE=1]="PURE_BARCODE",oe[oe.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",oe[oe.TRY_HARDER=3]="TRY_HARDER",oe[oe.CHARACTER_SET=4]="CHARACTER_SET",oe[oe.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",oe[oe.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",oe[oe.ASSUME_GS1=7]="ASSUME_GS1",oe[oe.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",oe[oe.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",oe[oe.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var G=U;class O extends u{static getFormatInstance(){return new O}}O.kind="FormatException";var D;(function(oe){oe[oe.Cp437=0]="Cp437",oe[oe.ISO8859_1=1]="ISO8859_1",oe[oe.ISO8859_2=2]="ISO8859_2",oe[oe.ISO8859_3=3]="ISO8859_3",oe[oe.ISO8859_4=4]="ISO8859_4",oe[oe.ISO8859_5=5]="ISO8859_5",oe[oe.ISO8859_6=6]="ISO8859_6",oe[oe.ISO8859_7=7]="ISO8859_7",oe[oe.ISO8859_8=8]="ISO8859_8",oe[oe.ISO8859_9=9]="ISO8859_9",oe[oe.ISO8859_10=10]="ISO8859_10",oe[oe.ISO8859_11=11]="ISO8859_11",oe[oe.ISO8859_13=12]="ISO8859_13",oe[oe.ISO8859_14=13]="ISO8859_14",oe[oe.ISO8859_15=14]="ISO8859_15",oe[oe.ISO8859_16=15]="ISO8859_16",oe[oe.SJIS=16]="SJIS",oe[oe.Cp1250=17]="Cp1250",oe[oe.Cp1251=18]="Cp1251",oe[oe.Cp1252=19]="Cp1252",oe[oe.Cp1256=20]="Cp1256",oe[oe.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",oe[oe.UTF8=22]="UTF8",oe[oe.ASCII=23]="ASCII",oe[oe.Big5=24]="Big5",oe[oe.GB18030=25]="GB18030",oe[oe.EUC_KR=26]="EUC_KR"})(D||(D={}));class I{constructor(f,m,x,...v){this.valueIdentifier=f,this.name=x,typeof m=="number"?this.values=Int32Array.from([m]):this.values=m,this.otherEncodingNames=v,I.VALUE_IDENTIFIER_TO_ECI.set(f,this),I.NAME_TO_ECI.set(x,this);const y=this.values;for(let E=0,k=y.length;E!==k;E++){const L=y[E];I.VALUES_TO_ECI.set(L,this)}for(const E of v)I.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(f){if(f<0||f>=900)throw new O("incorect value");const m=I.VALUES_TO_ECI.get(f);if(m===void 0)throw new O("incorect value");return m}static getCharacterSetECIByName(f){const m=I.NAME_TO_ECI.get(f);if(m===void 0)throw new O("incorect value");return m}equals(f){if(!(f instanceof I))return!1;const m=f;return this.getName()===m.getName()}}I.VALUE_IDENTIFIER_TO_ECI=new Map,I.VALUES_TO_ECI=new Map,I.NAME_TO_ECI=new Map,I.Cp437=new I(D.Cp437,Int32Array.from([0,2]),"Cp437"),I.ISO8859_1=new I(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),I.ISO8859_2=new I(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),I.ISO8859_3=new I(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),I.ISO8859_4=new I(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),I.ISO8859_5=new I(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),I.ISO8859_6=new I(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),I.ISO8859_7=new I(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),I.ISO8859_8=new I(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),I.ISO8859_9=new I(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),I.ISO8859_10=new I(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),I.ISO8859_11=new I(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),I.ISO8859_13=new I(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),I.ISO8859_14=new I(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),I.ISO8859_15=new I(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),I.ISO8859_16=new I(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),I.SJIS=new I(D.SJIS,20,"SJIS","Shift_JIS"),I.Cp1250=new I(D.Cp1250,21,"Cp1250","windows-1250"),I.Cp1251=new I(D.Cp1251,22,"Cp1251","windows-1251"),I.Cp1252=new I(D.Cp1252,23,"Cp1252","windows-1252"),I.Cp1256=new I(D.Cp1256,24,"Cp1256","windows-1256"),I.UnicodeBigUnmarked=new I(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),I.UTF8=new I(D.UTF8,26,"UTF8","UTF-8"),I.ASCII=new I(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),I.Big5=new I(D.Big5,28,"Big5"),I.GB18030=new I(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),I.EUC_KR=new I(D.EUC_KR,30,"EUC_KR","EUC-KR");class V extends u{}V.kind="UnsupportedOperationException";class R{static decode(f,m){const x=this.encodingName(m);return this.customDecoder?this.customDecoder(f,x):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(x)?this.decodeFallback(f,x):new TextDecoder(x).decode(f)}static shouldDecodeOnFallback(f){return!R.isBrowser()&&f==="ISO-8859-1"}static encode(f,m){const x=this.encodingName(m);return this.customEncoder?this.customEncoder(f,x):typeof TextEncoder>"u"?this.encodeFallback(f):new TextEncoder().encode(f)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(f){return typeof f=="string"?f:f.getName()}static encodingCharacterSet(f){return f instanceof I?f:I.getCharacterSetECIByName(f)}static decodeFallback(f,m){const x=this.encodingCharacterSet(m);if(R.isDecodeFallbackSupported(x)){let v="";for(let y=0,E=f.length;y<E;y++){let k=f[y].toString(16);k.length<2&&(k="0"+k),v+="%"+k}return decodeURIComponent(v)}if(x.equals(I.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(f.buffer));throw new V(`Encoding ${this.encodingName(m)} not supported by fallback.`)}static isDecodeFallbackSupported(f){return f.equals(I.UTF8)||f.equals(I.ISO8859_1)||f.equals(I.ASCII)}static encodeFallback(f){const x=btoa(unescape(encodeURIComponent(f))).split(""),v=[];for(let y=0;y<x.length;y++)v.push(x[y].charCodeAt(0));return new Uint8Array(v)}}class B{static castAsNonUtf8Char(f,m=null){const x=m?m.getName():this.ISO88591;return R.decode(new Uint8Array([f]),x)}static guessEncoding(f,m){if(m!=null&&m.get(G.CHARACTER_SET)!==void 0)return m.get(G.CHARACTER_SET).toString();const x=f.length;let v=!0,y=!0,E=!0,k=0,L=0,q=0,Q=0,le=0,fe=0,Re=0,$e=0,Ke=0,ot=0,Nt=0;const zt=f.length>3&&f[0]===239&&f[1]===187&&f[2]===191;for(let Gt=0;Gt<x&&(v||y||E);Gt++){const $t=f[Gt]&255;E&&(k>0?$t&128?k--:E=!1:$t&128&&($t&64?(k++,$t&32?(k++,$t&16?(k++,$t&8?E=!1:Q++):q++):L++):E=!1)),v&&($t>127&&$t<160?v=!1:$t>159&&($t<192||$t===215||$t===247)&&Nt++),y&&(le>0?$t<64||$t===127||$t>252?y=!1:le--:$t===128||$t===160||$t>239?y=!1:$t>160&&$t<224?(fe++,$e=0,Re++,Re>Ke&&(Ke=Re)):$t>127?(le++,Re=0,$e++,$e>ot&&(ot=$e)):(Re=0,$e=0))}return E&&k>0&&(E=!1),y&&le>0&&(y=!1),E&&(zt||L+q+Q>0)?B.UTF8:y&&(B.ASSUME_SHIFT_JIS||Ke>=3||ot>=3)?B.SHIFT_JIS:v&&y?Ke===2&&fe===2||Nt*10>=x?B.SHIFT_JIS:B.ISO88591:v?B.ISO88591:y?B.SHIFT_JIS:E?B.UTF8:B.PLATFORM_DEFAULT_ENCODING}static format(f,...m){let x=-1;function v(E,k,L,q,Q,le){if(E==="%%")return"%";if(m[++x]===void 0)return;E=q?parseInt(q.substr(1)):void 0;let fe=Q?parseInt(Q.substr(1)):void 0,Re;switch(le){case"s":Re=m[x];break;case"c":Re=m[x][0];break;case"f":Re=parseFloat(m[x]).toFixed(E);break;case"p":Re=parseFloat(m[x]).toPrecision(E);break;case"e":Re=parseFloat(m[x]).toExponential(E);break;case"x":Re=parseInt(m[x]).toString(fe||16);break;case"d":Re=parseFloat(parseInt(m[x],fe||10).toPrecision(E)).toFixed(0);break}Re=typeof Re=="object"?JSON.stringify(Re):(+Re).toString(fe);let $e=parseInt(L),Ke=L&&L[0]+""=="0"?"0":" ";for(;Re.length<$e;)Re=k!==void 0?Re+Ke:Ke+Re;return Re}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return f.replace(y,v)}static getBytes(f,m){return R.encode(f,m)}static getCharCode(f,m=0){return f.charCodeAt(m)}static getCharAt(f){return String.fromCharCode(f)}}B.SHIFT_JIS=I.SJIS.getName(),B.GB2312="GB2312",B.ISO88591=I.ISO8859_1.getName(),B.EUC_JP="EUC_JP",B.UTF8=I.UTF8.getName(),B.PLATFORM_DEFAULT_ENCODING=B.UTF8,B.ASSUME_SHIFT_JIS=!1;class F{constructor(f=""){this.value=f}enableDecoding(f){return this.encoding=f,this}append(f){return typeof f=="string"?this.value+=f.toString():this.encoding?this.value+=B.castAsNonUtf8Char(f,this.encoding):this.value+=String.fromCharCode(f),this}appendChars(f,m,x){for(let v=m;m<m+x;v++)this.append(f[v]);return this}length(){return this.value.length}charAt(f){return this.value.charAt(f)}deleteCharAt(f){this.value=this.value.substr(0,f)+this.value.substring(f+1)}setCharAt(f,m){this.value=this.value.substr(0,f)+m+this.value.substr(f+1)}substring(f,m){return this.value.substring(f,m)}setLengthToZero(){this.value=""}toString(){return this.value}insert(f,m){this.value=this.value.substr(0,f)+m+this.value.substr(f+m.length)}}class ee{constructor(f,m,x,v){if(this.width=f,this.height=m,this.rowSize=x,this.bits=v,m==null&&(m=f),this.height=m,f<1||m<1)throw new h("Both dimensions must be greater than 0");x==null&&(x=Math.floor((f+31)/32)),this.rowSize=x,v==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(f){const m=f.length,x=f[0].length,v=new ee(x,m);for(let y=0;y<m;y++){const E=f[y];for(let k=0;k<x;k++)E[k]&&v.set(k,y)}return v}static parseFromString(f,m,x){if(f===null)throw new h("stringRepresentation cannot be null");const v=new Array(f.length);let y=0,E=0,k=-1,L=0,q=0;for(;q<f.length;)if(f.charAt(q)===`
`||f.charAt(q)==="\r"){if(y>E){if(k===-1)k=y-E;else if(y-E!==k)throw new h("row lengths do not match");E=y,L++}q++}else if(f.substring(q,q+m.length)===m)q+=m.length,v[y]=!0,y++;else if(f.substring(q,q+x.length)===x)q+=x.length,v[y]=!1,y++;else throw new h("illegal character encountered: "+f.substring(q));if(y>E){if(k===-1)k=y-E;else if(y-E!==k)throw new h("row lengths do not match");L++}const Q=new ee(k,L);for(let le=0;le<y;le++)v[le]&&Q.set(Math.floor(le%k),Math.floor(le/k));return Q}get(f,m){const x=m*this.rowSize+Math.floor(f/32);return(this.bits[x]>>>(f&31)&1)!==0}set(f,m){const x=m*this.rowSize+Math.floor(f/32);this.bits[x]|=1<<(f&31)&4294967295}unset(f,m){const x=m*this.rowSize+Math.floor(f/32);this.bits[x]&=~(1<<(f&31)&4294967295)}flip(f,m){const x=m*this.rowSize+Math.floor(f/32);this.bits[x]^=1<<(f&31)&4294967295}xor(f){if(this.width!==f.getWidth()||this.height!==f.getHeight()||this.rowSize!==f.getRowSize())throw new h("input matrix dimensions do not match");const m=new P(Math.floor(this.width/32)+1),x=this.rowSize,v=this.bits;for(let y=0,E=this.height;y<E;y++){const k=y*x,L=f.getRow(y,m).getBitArray();for(let q=0;q<x;q++)v[k+q]^=L[q]}}clear(){const f=this.bits,m=f.length;for(let x=0;x<m;x++)f[x]=0}setRegion(f,m,x,v){if(m<0||f<0)throw new h("Left and top must be nonnegative");if(v<1||x<1)throw new h("Height and width must be at least 1");const y=f+x,E=m+v;if(E>this.height||y>this.width)throw new h("The region must fit inside the matrix");const k=this.rowSize,L=this.bits;for(let q=m;q<E;q++){const Q=q*k;for(let le=f;le<y;le++)L[Q+Math.floor(le/32)]|=1<<(le&31)&4294967295}}getRow(f,m){m==null||m.getSize()<this.width?m=new P(this.width):m.clear();const x=this.rowSize,v=this.bits,y=f*x;for(let E=0;E<x;E++)m.setBulk(E*32,v[y+E]);return m}setRow(f,m){w.arraycopy(m.getBitArray(),0,this.bits,f*this.rowSize,this.rowSize)}rotate180(){const f=this.getWidth(),m=this.getHeight();let x=new P(f),v=new P(f);for(let y=0,E=Math.floor((m+1)/2);y<E;y++)x=this.getRow(y,x),v=this.getRow(m-1-y,v),x.reverse(),v.reverse(),this.setRow(y,v),this.setRow(m-1-y,x)}getEnclosingRectangle(){const f=this.width,m=this.height,x=this.rowSize,v=this.bits;let y=f,E=m,k=-1,L=-1;for(let q=0;q<m;q++)for(let Q=0;Q<x;Q++){const le=v[q*x+Q];if(le!==0){if(q<E&&(E=q),q>L&&(L=q),Q*32<y){let fe=0;for(;!(le<<31-fe&4294967295);)fe++;Q*32+fe<y&&(y=Q*32+fe)}if(Q*32+31>k){let fe=31;for(;!(le>>>fe);)fe--;Q*32+fe>k&&(k=Q*32+fe)}}}return k<y||L<E?null:Int32Array.from([y,E,k-y+1,L-E+1])}getTopLeftOnBit(){const f=this.rowSize,m=this.bits;let x=0;for(;x<m.length&&m[x]===0;)x++;if(x===m.length)return null;const v=x/f;let y=x%f*32;const E=m[x];let k=0;for(;!(E<<31-k&4294967295);)k++;return y+=k,Int32Array.from([y,v])}getBottomRightOnBit(){const f=this.rowSize,m=this.bits;let x=m.length-1;for(;x>=0&&m[x]===0;)x--;if(x<0)return null;const v=Math.floor(x/f);let y=Math.floor(x%f)*32;const E=m[x];let k=31;for(;!(E>>>k);)k--;return y+=k,Int32Array.from([y,v])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(f){if(!(f instanceof ee))return!1;const m=f;return this.width===m.width&&this.height===m.height&&this.rowSize===m.rowSize&&A.equals(this.bits,m.bits)}hashCode(){let f=this.width;return f=31*f+this.width,f=31*f+this.height,f=31*f+this.rowSize,f=31*f+A.hashCode(this.bits),f}toString(f="X ",m="  ",x=`
`){return this.buildToString(f,m,x)}buildToString(f,m,x){let v=new F;for(let y=0,E=this.height;y<E;y++){for(let k=0,L=this.width;k<L;k++)v.append(this.get(k,y)?f:m);v.append(x)}return v.toString()}clone(){return new ee(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends u{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class ce extends b{constructor(f){super(f),this.luminances=ce.EMPTY,this.buckets=new Int32Array(ce.LUMINANCE_BUCKETS)}getBlackRow(f,m){const x=this.getLuminanceSource(),v=x.getWidth();m==null||m.getSize()<v?m=new P(v):m.clear(),this.initArrays(v);const y=x.getRow(f,this.luminances),E=this.buckets;for(let L=0;L<v;L++)E[(y[L]&255)>>ce.LUMINANCE_SHIFT]++;const k=ce.estimateBlackPoint(E);if(v<3)for(let L=0;L<v;L++)(y[L]&255)<k&&m.set(L);else{let L=y[0]&255,q=y[1]&255;for(let Q=1;Q<v-1;Q++){const le=y[Q+1]&255;(q*4-L-le)/2<k&&m.set(Q),L=q,q=le}}return m}getBlackMatrix(){const f=this.getLuminanceSource(),m=f.getWidth(),x=f.getHeight(),v=new ee(m,x);this.initArrays(m);const y=this.buckets;for(let L=1;L<5;L++){const q=Math.floor(x*L/5),Q=f.getRow(q,this.luminances),le=Math.floor(m*4/5);for(let fe=Math.floor(m/5);fe<le;fe++){const Re=Q[fe]&255;y[Re>>ce.LUMINANCE_SHIFT]++}}const E=ce.estimateBlackPoint(y),k=f.getMatrix();for(let L=0;L<x;L++){const q=L*m;for(let Q=0;Q<m;Q++)(k[q+Q]&255)<E&&v.set(Q,L)}return v}createBinarizer(f){return new ce(f)}initArrays(f){this.luminances.length<f&&(this.luminances=new Uint8ClampedArray(f));const m=this.buckets;for(let x=0;x<ce.LUMINANCE_BUCKETS;x++)m[x]=0}static estimateBlackPoint(f){const m=f.length;let x=0,v=0,y=0;for(let Q=0;Q<m;Q++)f[Q]>y&&(v=Q,y=f[Q]),f[Q]>x&&(x=f[Q]);let E=0,k=0;for(let Q=0;Q<m;Q++){const le=Q-v,fe=f[Q]*le*le;fe>k&&(E=Q,k=fe)}if(v>E){const Q=v;v=E,E=Q}if(E-v<=m/16)throw new Z;let L=E-1,q=-1;for(let Q=E-1;Q>v;Q--){const le=Q-v,fe=le*le*(E-Q)*(x-f[Q]);fe>q&&(L=Q,q=fe)}return L<<ce.LUMINANCE_SHIFT}}ce.LUMINANCE_BITS=5,ce.LUMINANCE_SHIFT=8-ce.LUMINANCE_BITS,ce.LUMINANCE_BUCKETS=1<<ce.LUMINANCE_BITS,ce.EMPTY=Uint8ClampedArray.from([0]);class ne extends ce{constructor(f){super(f),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const f=this.getLuminanceSource(),m=f.getWidth(),x=f.getHeight();if(m>=ne.MINIMUM_DIMENSION&&x>=ne.MINIMUM_DIMENSION){const v=f.getMatrix();let y=m>>ne.BLOCK_SIZE_POWER;m&ne.BLOCK_SIZE_MASK&&y++;let E=x>>ne.BLOCK_SIZE_POWER;x&ne.BLOCK_SIZE_MASK&&E++;const k=ne.calculateBlackPoints(v,y,E,m,x),L=new ee(m,x);ne.calculateThresholdForBlock(v,y,E,m,x,k,L),this.matrix=L}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(f){return new ne(f)}static calculateThresholdForBlock(f,m,x,v,y,E,k){const L=y-ne.BLOCK_SIZE,q=v-ne.BLOCK_SIZE;for(let Q=0;Q<x;Q++){let le=Q<<ne.BLOCK_SIZE_POWER;le>L&&(le=L);const fe=ne.cap(Q,2,x-3);for(let Re=0;Re<m;Re++){let $e=Re<<ne.BLOCK_SIZE_POWER;$e>q&&($e=q);const Ke=ne.cap(Re,2,m-3);let ot=0;for(let zt=-2;zt<=2;zt++){const Gt=E[fe+zt];ot+=Gt[Ke-2]+Gt[Ke-1]+Gt[Ke]+Gt[Ke+1]+Gt[Ke+2]}const Nt=ot/25;ne.thresholdBlock(f,$e,le,Nt,v,k)}}}static cap(f,m,x){return f<m?m:f>x?x:f}static thresholdBlock(f,m,x,v,y,E){for(let k=0,L=x*y+m;k<ne.BLOCK_SIZE;k++,L+=y)for(let q=0;q<ne.BLOCK_SIZE;q++)(f[L+q]&255)<=v&&E.set(m+q,x+k)}static calculateBlackPoints(f,m,x,v,y){const E=y-ne.BLOCK_SIZE,k=v-ne.BLOCK_SIZE,L=new Array(x);for(let q=0;q<x;q++){L[q]=new Int32Array(m);let Q=q<<ne.BLOCK_SIZE_POWER;Q>E&&(Q=E);for(let le=0;le<m;le++){let fe=le<<ne.BLOCK_SIZE_POWER;fe>k&&(fe=k);let Re=0,$e=255,Ke=0;for(let Nt=0,zt=Q*v+fe;Nt<ne.BLOCK_SIZE;Nt++,zt+=v){for(let Gt=0;Gt<ne.BLOCK_SIZE;Gt++){const $t=f[zt+Gt]&255;Re+=$t,$t<$e&&($e=$t),$t>Ke&&(Ke=$t)}if(Ke-$e>ne.MIN_DYNAMIC_RANGE)for(Nt++,zt+=v;Nt<ne.BLOCK_SIZE;Nt++,zt+=v)for(let Gt=0;Gt<ne.BLOCK_SIZE;Gt++)Re+=f[zt+Gt]&255}let ot=Re>>ne.BLOCK_SIZE_POWER*2;if(Ke-$e<=ne.MIN_DYNAMIC_RANGE&&(ot=$e/2,q>0&&le>0)){const Nt=(L[q-1][le]+2*L[q][le-1]+L[q-1][le-1])/4;$e<Nt&&(ot=Nt)}L[q][le]=ot}}return L}}ne.BLOCK_SIZE_POWER=3,ne.BLOCK_SIZE=1<<ne.BLOCK_SIZE_POWER,ne.BLOCK_SIZE_MASK=ne.BLOCK_SIZE-1,ne.MINIMUM_DIMENSION=ne.BLOCK_SIZE*5,ne.MIN_DYNAMIC_RANGE=24;class ae{constructor(f,m){this.width=f,this.height=m}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(f,m,x,v){throw new V("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new V("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new V("This luminance source does not support rotation by 45 degrees.")}toString(){const f=new Uint8ClampedArray(this.width);let m=new F;for(let x=0;x<this.height;x++){const v=this.getRow(x,f);for(let y=0;y<this.width;y++){const E=v[y]&255;let k;E<64?k="#":E<128?k="+":E<192?k=".":k=" ",m.append(k)}m.append(`
`)}return m.toString()}}class me extends ae{constructor(f){super(f.getWidth(),f.getHeight()),this.delegate=f}getRow(f,m){const x=this.delegate.getRow(f,m),v=this.getWidth();for(let y=0;y<v;y++)x[y]=255-(x[y]&255);return x}getMatrix(){const f=this.delegate.getMatrix(),m=this.getWidth()*this.getHeight(),x=new Uint8ClampedArray(m);for(let v=0;v<m;v++)x[v]=255-(f[v]&255);return x}isCropSupported(){return this.delegate.isCropSupported()}crop(f,m,x,v){return new me(this.delegate.crop(f,m,x,v))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new me(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new me(this.delegate.rotateCounterClockwise45())}}class Ee extends ae{constructor(f){super(f.width,f.height),this.canvas=f,this.tempCanvasElement=null,this.buffer=Ee.makeBufferFromCanvasImageData(f)}static makeBufferFromCanvasImageData(f){const m=f.getContext("2d").getImageData(0,0,f.width,f.height);return Ee.toGrayscaleBuffer(m.data,f.width,f.height)}static toGrayscaleBuffer(f,m,x){const v=new Uint8ClampedArray(m*x);for(let y=0,E=0,k=f.length;y<k;y+=4,E++){let L;if(f[y+3]===0)L=255;else{const Q=f[y],le=f[y+1],fe=f[y+2];L=306*Q+601*le+117*fe+512>>10}v[E]=L}return v}getRow(f,m){if(f<0||f>=this.getHeight())throw new h("Requested row is outside the image: "+f);const x=this.getWidth(),v=f*x;return m===null?m=this.buffer.slice(v,v+x):(m.length<x&&(m=new Uint8ClampedArray(x)),m.set(this.buffer.slice(v,v+x))),m}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(f,m,x,v){return super.crop(f,m,x,v),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const f=this.canvas.ownerDocument.createElement("canvas");f.width=this.canvas.width,f.height=this.canvas.height,this.tempCanvasElement=f}return this.tempCanvasElement}rotate(f){const m=this.getTempCanvasElement(),x=m.getContext("2d"),v=f*Ee.DEGREE_TO_RADIANS,y=this.canvas.width,E=this.canvas.height,k=Math.ceil(Math.abs(Math.cos(v))*y+Math.abs(Math.sin(v))*E),L=Math.ceil(Math.abs(Math.sin(v))*y+Math.abs(Math.cos(v))*E);return m.width=k,m.height=L,x.translate(k/2,L/2),x.rotate(v),x.drawImage(this.canvas,y/-2,E/-2),this.buffer=Ee.makeBufferFromCanvasImageData(m),this}invert(){return new me(this)}}Ee.DEGREE_TO_RADIANS=Math.PI/180;class ye{constructor(f,m,x){this.deviceId=f,this.label=m,this.kind="videoinput",this.groupId=x||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var H=(globalThis||Lv||self||window||void 0)&&(globalThis||Lv||self||window||void 0).__awaiter||function(oe,f,m,x){function v(y){return y instanceof m?y:new m(function(E){E(y)})}return new(m||(m=Promise))(function(y,E){function k(Q){try{q(x.next(Q))}catch(le){E(le)}}function L(Q){try{q(x.throw(Q))}catch(le){E(le)}}function q(Q){Q.done?y(Q.value):v(Q.value).then(k,L)}q((x=x.apply(oe,f||[])).next())})};class Y{constructor(f,m=500,x){this.reader=f,this.timeBetweenScansMillis=m,this._hints=x,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(f){this._timeBetweenDecodingAttempts=f<0?0:f}set hints(f){this._hints=f||null}get hints(){return this._hints}listVideoInputDevices(){return H(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const f=yield navigator.mediaDevices.enumerateDevices(),m=[];for(const x of f){const v=x.kind==="video"?"videoinput":x.kind;if(v!=="videoinput")continue;const y=x.deviceId||x.id,E=x.label||`Video device ${m.length+1}`,k=x.groupId,L={deviceId:y,label:E,kind:v,groupId:k};m.push(L)}return m})}getVideoInputDevices(){return H(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(m=>new ye(m.deviceId,m.label))})}findDeviceById(f){return H(this,void 0,void 0,function*(){const m=yield this.listVideoInputDevices();return m?m.find(x=>x.deviceId===f):null})}decodeFromInputVideoDevice(f,m){return H(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(f,m)})}decodeOnceFromVideoDevice(f,m){return H(this,void 0,void 0,function*(){this.reset();let x;f?x={deviceId:{exact:f}}:x={facingMode:"environment"};const v={video:x};return yield this.decodeOnceFromConstraints(v,m)})}decodeOnceFromConstraints(f,m){return H(this,void 0,void 0,function*(){const x=yield navigator.mediaDevices.getUserMedia(f);return yield this.decodeOnceFromStream(x,m)})}decodeOnceFromStream(f,m){return H(this,void 0,void 0,function*(){this.reset();const x=yield this.attachStreamToVideo(f,m);return yield this.decodeOnce(x)})}decodeFromInputVideoDeviceContinuously(f,m,x){return H(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(f,m,x)})}decodeFromVideoDevice(f,m,x){return H(this,void 0,void 0,function*(){let v;f?v={deviceId:{exact:f}}:v={facingMode:"environment"};const y={video:v};return yield this.decodeFromConstraints(y,m,x)})}decodeFromConstraints(f,m,x){return H(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(f);return yield this.decodeFromStream(v,m,x)})}decodeFromStream(f,m,x){return H(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(f,m);return yield this.decodeContinuously(v,x)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(f,m){return H(this,void 0,void 0,function*(){const x=this.prepareVideoElement(m);return this.addVideoSource(x,f),this.videoElement=x,this.stream=f,yield this.playVideoOnLoadAsync(x),x})}playVideoOnLoadAsync(f){return new Promise((m,x)=>this.playVideoOnLoad(f,()=>m()))}playVideoOnLoad(f,m){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(f),f.addEventListener("ended",this.videoEndedListener),f.addEventListener("canplay",this.videoCanPlayListener),f.addEventListener("playing",m),this.tryPlayVideo(f)}isVideoPlaying(f){return f.currentTime>0&&!f.paused&&!f.ended&&f.readyState>2}tryPlayVideo(f){return H(this,void 0,void 0,function*(){if(this.isVideoPlaying(f)){console.warn("Trying to play video that is already playing.");return}try{yield f.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(f,m){const x=document.getElementById(f);if(!x)throw new d(`element with id '${f}' not found`);if(x.nodeName.toLowerCase()!==m.toLowerCase())throw new d(`element with id '${f}' must be an ${m} element`);return x}decodeFromImage(f,m){if(!f&&!m)throw new d("either imageElement with a src set or an url must be provided");return m&&!f?this.decodeFromImageUrl(m):this.decodeFromImageElement(f)}decodeFromVideo(f,m){if(!f&&!m)throw new d("Either an element with a src set or an URL must be provided");return m&&!f?this.decodeFromVideoUrl(m):this.decodeFromVideoElement(f)}decodeFromVideoContinuously(f,m,x){if(f===void 0&&m===void 0)throw new d("Either an element with a src set or an URL must be provided");return m&&!f?this.decodeFromVideoUrlContinuously(m,x):this.decodeFromVideoElementContinuously(f,x)}decodeFromImageElement(f){if(!f)throw new d("An image element must be provided.");this.reset();const m=this.prepareImageElement(f);this.imageElement=m;let x;return this.isImageLoaded(m)?x=this.decodeOnce(m,!1,!0):x=this._decodeOnLoadImage(m),x}decodeFromVideoElement(f){const m=this._decodeFromVideoElementSetup(f);return this._decodeOnLoadVideo(m)}decodeFromVideoElementContinuously(f,m){const x=this._decodeFromVideoElementSetup(f);return this._decodeOnLoadVideoContinuously(x,m)}_decodeFromVideoElementSetup(f){if(!f)throw new d("A video element must be provided.");this.reset();const m=this.prepareVideoElement(f);return this.videoElement=m,m}decodeFromImageUrl(f){if(!f)throw new d("An URL must be provided.");this.reset();const m=this.prepareImageElement();this.imageElement=m;const x=this._decodeOnLoadImage(m);return m.src=f,x}decodeFromVideoUrl(f){if(!f)throw new d("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),x=this.decodeFromVideoElement(m);return m.src=f,x}decodeFromVideoUrlContinuously(f,m){if(!f)throw new d("An URL must be provided.");this.reset();const x=this.prepareVideoElement(),v=this.decodeFromVideoElementContinuously(x,m);return x.src=f,v}_decodeOnLoadImage(f){return new Promise((m,x)=>{this.imageLoadedListener=()=>this.decodeOnce(f,!1,!0).then(m,x),f.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(f){return H(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(f),yield this.decodeOnce(f)})}_decodeOnLoadVideoContinuously(f,m){return H(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(f),this.decodeContinuously(f,m)})}isImageLoaded(f){return!(!f.complete||f.naturalWidth===0)}prepareImageElement(f){let m;return typeof f>"u"&&(m=document.createElement("img"),m.width=200,m.height=200),typeof f=="string"&&(m=this.getMediaElement(f,"img")),f instanceof HTMLImageElement&&(m=f),m}prepareVideoElement(f){let m;return!f&&typeof document<"u"&&(m=document.createElement("video"),m.width=200,m.height=200),typeof f=="string"&&(m=this.getMediaElement(f,"video")),f instanceof HTMLVideoElement&&(m=f),m.setAttribute("autoplay","true"),m.setAttribute("muted","true"),m.setAttribute("playsinline","true"),m}decodeOnce(f,m=!0,x=!0){this._stopAsyncDecode=!1;const v=(y,E)=>{if(this._stopAsyncDecode){E(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const k=this.decode(f);y(k)}catch(k){const L=m&&k instanceof Z,Q=(k instanceof g||k instanceof O)&&x;if(L||Q)return setTimeout(v,this._timeBetweenDecodingAttempts,y,E);E(k)}};return new Promise((y,E)=>v(y,E))}decodeContinuously(f,m){this._stopContinuousDecode=!1;const x=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const v=this.decode(f);m(v,null),setTimeout(x,this.timeBetweenScansMillis)}catch(v){m(null,v);const y=v instanceof g||v instanceof O,E=v instanceof Z;(y||E)&&setTimeout(x,this._timeBetweenDecodingAttempts)}};x()}decode(f){const m=this.createBinaryBitmap(f);return this.decodeBitmap(m)}_isHTMLVideoElement(f){return f.videoWidth!==0}drawFrameOnCanvas(f,m,x){m||(m={sx:0,sy:0,sWidth:f.videoWidth,sHeight:f.videoHeight,dx:0,dy:0,dWidth:f.videoWidth,dHeight:f.videoHeight}),x||(x=this.captureCanvasContext),x.drawImage(f,m.sx,m.sy,m.sWidth,m.sHeight,m.dx,m.dy,m.dWidth,m.dHeight)}drawImageOnCanvas(f,m,x=this.captureCanvasContext){m||(m={sx:0,sy:0,sWidth:f.naturalWidth,sHeight:f.naturalHeight,dx:0,dy:0,dWidth:f.naturalWidth,dHeight:f.naturalHeight}),x||(x=this.captureCanvasContext),x.drawImage(f,m.sx,m.sy,m.sWidth,m.sHeight,m.dx,m.dy,m.dWidth,m.dHeight)}createBinaryBitmap(f){this.getCaptureCanvasContext(f),this._isHTMLVideoElement(f)?this.drawFrameOnCanvas(f):this.drawImageOnCanvas(f);const m=this.getCaptureCanvas(f),x=new Ee(m),v=new ne(x);return new p(v)}getCaptureCanvasContext(f){if(!this.captureCanvasContext){const x=this.getCaptureCanvas(f).getContext("2d");this.captureCanvasContext=x}return this.captureCanvasContext}getCaptureCanvas(f){if(!this.captureCanvas){const m=this.createCaptureCanvas(f);this.captureCanvas=m}return this.captureCanvas}decodeBitmap(f){return this.reader.decode(f,this._hints)}createCaptureCanvas(f){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const m=document.createElement("canvas");let x,v;return typeof f<"u"&&(f instanceof HTMLVideoElement?(x=f.videoWidth,v=f.videoHeight):f instanceof HTMLImageElement&&(x=f.naturalWidth||f.width,v=f.naturalHeight||f.height)),m.style.width=x+"px",m.style.height=v+"px",m.width=x,m.height=v,m}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(f=>f.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(f,m){try{f.srcObject=m}catch{f.src=URL.createObjectURL(m)}}cleanVideoSource(f){try{f.srcObject=null}catch{f.src=""}this.videoElement.removeAttribute("src")}}class X{constructor(f,m,x=m==null?0:8*m.length,v,y,E=w.currentTimeMillis()){this.text=f,this.rawBytes=m,this.numBits=x,this.resultPoints=v,this.format=y,this.timestamp=E,this.text=f,this.rawBytes=m,x==null?this.numBits=m==null?0:8*m.length:this.numBits=x,this.resultPoints=v,this.format=y,this.resultMetadata=null,E==null?this.timestamp=w.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(f,m){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(f,m)}putAllMetadata(f){f!==null&&(this.resultMetadata===null?this.resultMetadata=f:this.resultMetadata=new Map(f))}addResultPoints(f){const m=this.resultPoints;if(m===null)this.resultPoints=f;else if(f!==null&&f.length>0){const x=new Array(m.length+f.length);w.arraycopy(m,0,x,0,m.length),w.arraycopy(f,0,x,m.length,f.length),this.resultPoints=x}}getTimestamp(){return this.timestamp}toString(){return this.text}}var re;(function(oe){oe[oe.AZTEC=0]="AZTEC",oe[oe.CODABAR=1]="CODABAR",oe[oe.CODE_39=2]="CODE_39",oe[oe.CODE_93=3]="CODE_93",oe[oe.CODE_128=4]="CODE_128",oe[oe.DATA_MATRIX=5]="DATA_MATRIX",oe[oe.EAN_8=6]="EAN_8",oe[oe.EAN_13=7]="EAN_13",oe[oe.ITF=8]="ITF",oe[oe.MAXICODE=9]="MAXICODE",oe[oe.PDF_417=10]="PDF_417",oe[oe.QR_CODE=11]="QR_CODE",oe[oe.RSS_14=12]="RSS_14",oe[oe.RSS_EXPANDED=13]="RSS_EXPANDED",oe[oe.UPC_A=14]="UPC_A",oe[oe.UPC_E=15]="UPC_E",oe[oe.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(re||(re={}));var se=re,ke;(function(oe){oe[oe.OTHER=0]="OTHER",oe[oe.ORIENTATION=1]="ORIENTATION",oe[oe.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",oe[oe.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",oe[oe.ISSUE_NUMBER=4]="ISSUE_NUMBER",oe[oe.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",oe[oe.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",oe[oe.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",oe[oe.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",oe[oe.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",oe[oe.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ke||(ke={}));var Ce=ke;class xe{constructor(f,m,x,v,y=-1,E=-1){this.rawBytes=f,this.text=m,this.byteSegments=x,this.ecLevel=v,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=E,this.numBits=f==null?0:8*f.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(f){this.numBits=f}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(f){this.errorsCorrected=f}getErasures(){return this.erasures}setErasures(f){this.erasures=f}getOther(){return this.other}setOther(f){this.other=f}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ie{exp(f){return this.expTable[f]}log(f){if(f===0)throw new h;return this.logTable[f]}static addOrSubtract(f,m){return f^m}}class He{constructor(f,m){if(m.length===0)throw new h;this.field=f;const x=m.length;if(x>1&&m[0]===0){let v=1;for(;v<x&&m[v]===0;)v++;v===x?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(x-v),w.arraycopy(m,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=m}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(f){return this.coefficients[this.coefficients.length-1-f]}evaluateAt(f){if(f===0)return this.getCoefficient(0);const m=this.coefficients;let x;if(f===1){x=0;for(let E=0,k=m.length;E!==k;E++){const L=m[E];x=Ie.addOrSubtract(x,L)}return x}x=m[0];const v=m.length,y=this.field;for(let E=1;E<v;E++)x=Ie.addOrSubtract(y.multiply(f,x),m[E]);return x}addOrSubtract(f){if(!this.field.equals(f.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return f;if(f.isZero())return this;let m=this.coefficients,x=f.coefficients;if(m.length>x.length){const E=m;m=x,x=E}let v=new Int32Array(x.length);const y=x.length-m.length;w.arraycopy(x,0,v,0,y);for(let E=y;E<x.length;E++)v[E]=Ie.addOrSubtract(m[E-y],x[E]);return new He(this.field,v)}multiply(f){if(!this.field.equals(f.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||f.isZero())return this.field.getZero();const m=this.coefficients,x=m.length,v=f.coefficients,y=v.length,E=new Int32Array(x+y-1),k=this.field;for(let L=0;L<x;L++){const q=m[L];for(let Q=0;Q<y;Q++)E[L+Q]=Ie.addOrSubtract(E[L+Q],k.multiply(q,v[Q]))}return new He(k,E)}multiplyScalar(f){if(f===0)return this.field.getZero();if(f===1)return this;const m=this.coefficients.length,x=this.field,v=new Int32Array(m),y=this.coefficients;for(let E=0;E<m;E++)v[E]=x.multiply(y[E],f);return new He(x,v)}multiplyByMonomial(f,m){if(f<0)throw new h;if(m===0)return this.field.getZero();const x=this.coefficients,v=x.length,y=new Int32Array(v+f),E=this.field;for(let k=0;k<v;k++)y[k]=E.multiply(x[k],m);return new He(E,y)}divide(f){if(!this.field.equals(f.field))throw new h("GenericGFPolys do not have same GenericGF field");if(f.isZero())throw new h("Divide by 0");const m=this.field;let x=m.getZero(),v=this;const y=f.getCoefficient(f.getDegree()),E=m.inverse(y);for(;v.getDegree()>=f.getDegree()&&!v.isZero();){const k=v.getDegree()-f.getDegree(),L=m.multiply(v.getCoefficient(v.getDegree()),E),q=f.multiplyByMonomial(k,L),Q=m.buildMonomial(k,L);x=x.addOrSubtract(Q),v=v.addOrSubtract(q)}return[x,v]}toString(){let f="";for(let m=this.getDegree();m>=0;m--){let x=this.getCoefficient(m);if(x!==0){if(x<0?(f+=" - ",x=-x):f.length>0&&(f+=" + "),m===0||x!==1){const v=this.field.log(x);v===0?f+="1":v===1?f+="a":(f+="a^",f+=v)}m!==0&&(m===1?f+="x":(f+="x^",f+=m))}}return f}}class Ue extends u{}Ue.kind="ArithmeticException";class Me extends Ie{constructor(f,m,x){super(),this.primitive=f,this.size=m,this.generatorBase=x;const v=new Int32Array(m);let y=1;for(let k=0;k<m;k++)v[k]=y,y*=2,y>=m&&(y^=f,y&=m-1);this.expTable=v;const E=new Int32Array(m);for(let k=0;k<m-1;k++)E[v[k]]=k;this.logTable=E,this.zero=new He(this,Int32Array.from([0])),this.one=new He(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(f,m){if(f<0)throw new h;if(m===0)return this.zero;const x=new Int32Array(f+1);return x[0]=m,new He(this,x)}inverse(f){if(f===0)throw new Ue;return this.expTable[this.size-this.logTable[f]-1]}multiply(f,m){return f===0||m===0?0:this.expTable[(this.logTable[f]+this.logTable[m])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+j.toHexString(this.primitive)+","+this.size+")"}equals(f){return f===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class Be extends u{}Be.kind="ReedSolomonException";class be extends u{}be.kind="IllegalStateException";class Vt{constructor(f){this.field=f}decode(f,m){const x=this.field,v=new He(x,f),y=new Int32Array(m);let E=!0;for(let Re=0;Re<m;Re++){const $e=v.evaluateAt(x.exp(Re+x.getGeneratorBase()));y[y.length-1-Re]=$e,$e!==0&&(E=!1)}if(E)return;const k=new He(x,y),L=this.runEuclideanAlgorithm(x.buildMonomial(m,1),k,m),q=L[0],Q=L[1],le=this.findErrorLocations(q),fe=this.findErrorMagnitudes(Q,le);for(let Re=0;Re<le.length;Re++){const $e=f.length-1-x.log(le[Re]);if($e<0)throw new Be("Bad error location");f[$e]=Me.addOrSubtract(f[$e],fe[Re])}}runEuclideanAlgorithm(f,m,x){if(f.getDegree()<m.getDegree()){const Re=f;f=m,m=Re}const v=this.field;let y=f,E=m,k=v.getZero(),L=v.getOne();for(;E.getDegree()>=(x/2|0);){let Re=y,$e=k;if(y=E,k=L,y.isZero())throw new Be("r_{i-1} was zero");E=Re;let Ke=v.getZero();const ot=y.getCoefficient(y.getDegree()),Nt=v.inverse(ot);for(;E.getDegree()>=y.getDegree()&&!E.isZero();){const zt=E.getDegree()-y.getDegree(),Gt=v.multiply(E.getCoefficient(E.getDegree()),Nt);Ke=Ke.addOrSubtract(v.buildMonomial(zt,Gt)),E=E.addOrSubtract(y.multiplyByMonomial(zt,Gt))}if(L=Ke.multiply(k).addOrSubtract($e),E.getDegree()>=y.getDegree())throw new be("Division algorithm failed to reduce polynomial?")}const q=L.getCoefficient(0);if(q===0)throw new Be("sigmaTilde(0) was zero");const Q=v.inverse(q),le=L.multiplyScalar(Q),fe=E.multiplyScalar(Q);return[le,fe]}findErrorLocations(f){const m=f.getDegree();if(m===1)return Int32Array.from([f.getCoefficient(1)]);const x=new Int32Array(m);let v=0;const y=this.field;for(let E=1;E<y.getSize()&&v<m;E++)f.evaluateAt(E)===0&&(x[v]=y.inverse(E),v++);if(v!==m)throw new Be("Error locator degree does not match number of roots");return x}findErrorMagnitudes(f,m){const x=m.length,v=new Int32Array(x),y=this.field;for(let E=0;E<x;E++){const k=y.inverse(m[E]);let L=1;for(let q=0;q<x;q++)if(E!==q){const Q=y.multiply(m[q],k),le=Q&1?Q&-2:Q|1;L=y.multiply(L,le)}v[E]=y.multiply(f.evaluateAt(k),y.inverse(L)),y.getGeneratorBase()!==0&&(v[E]=y.multiply(v[E],k))}return v}}var ht;(function(oe){oe[oe.UPPER=0]="UPPER",oe[oe.LOWER=1]="LOWER",oe[oe.MIXED=2]="MIXED",oe[oe.DIGIT=3]="DIGIT",oe[oe.PUNCT=4]="PUNCT",oe[oe.BINARY=5]="BINARY"})(ht||(ht={}));class Lt{decode(f){this.ddata=f;let m=f.getBits(),x=this.extractBits(m),v=this.correctBits(x),y=Lt.convertBoolArrayToByteArray(v),E=Lt.getEncodedData(v),k=new xe(y,E,null,null);return k.setNumBits(v.length),k}static highLevelDecode(f){return this.getEncodedData(f)}static getEncodedData(f){let m=f.length,x=ht.UPPER,v=ht.UPPER,y="",E=0;for(;E<m;)if(v===ht.BINARY){if(m-E<5)break;let k=Lt.readCode(f,E,5);if(E+=5,k===0){if(m-E<11)break;k=Lt.readCode(f,E,11)+31,E+=11}for(let L=0;L<k;L++){if(m-E<8){E=m;break}const q=Lt.readCode(f,E,8);y+=B.castAsNonUtf8Char(q),E+=8}v=x}else{let k=v===ht.DIGIT?4:5;if(m-E<k)break;let L=Lt.readCode(f,E,k);E+=k;let q=Lt.getCharacter(v,L);q.startsWith("CTRL_")?(x=v,v=Lt.getTable(q.charAt(5)),q.charAt(6)==="L"&&(x=v)):(y+=q,v=x)}return y}static getTable(f){switch(f){case"L":return ht.LOWER;case"P":return ht.PUNCT;case"M":return ht.MIXED;case"D":return ht.DIGIT;case"B":return ht.BINARY;case"U":default:return ht.UPPER}}static getCharacter(f,m){switch(f){case ht.UPPER:return Lt.UPPER_TABLE[m];case ht.LOWER:return Lt.LOWER_TABLE[m];case ht.MIXED:return Lt.MIXED_TABLE[m];case ht.PUNCT:return Lt.PUNCT_TABLE[m];case ht.DIGIT:return Lt.DIGIT_TABLE[m];default:throw new be("Bad table")}}correctBits(f){let m,x;this.ddata.getNbLayers()<=2?(x=6,m=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(x=8,m=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(x=10,m=Me.AZTEC_DATA_10):(x=12,m=Me.AZTEC_DATA_12);let v=this.ddata.getNbDatablocks(),y=f.length/x;if(y<v)throw new O;let E=f.length%x,k=new Int32Array(y);for(let fe=0;fe<y;fe++,E+=x)k[fe]=Lt.readCode(f,E,x);try{new Vt(m).decode(k,y-v)}catch(fe){throw new O(fe)}let L=(1<<x)-1,q=0;for(let fe=0;fe<v;fe++){let Re=k[fe];if(Re===0||Re===L)throw new O;(Re===1||Re===L-1)&&q++}let Q=new Array(v*x-q),le=0;for(let fe=0;fe<v;fe++){let Re=k[fe];if(Re===1||Re===L-1)Q.fill(Re>1,le,le+x-1),le+=x-1;else for(let $e=x-1;$e>=0;--$e)Q[le++]=(Re&1<<$e)!==0}return Q}extractBits(f){let m=this.ddata.isCompact(),x=this.ddata.getNbLayers(),v=(m?11:14)+x*4,y=new Int32Array(v),E=new Array(this.totalBitsInLayer(x,m));if(m)for(let k=0;k<y.length;k++)y[k]=k;else{let k=v+1+2*j.truncDivision(j.truncDivision(v,2)-1,15),L=v/2,q=j.truncDivision(k,2);for(let Q=0;Q<L;Q++){let le=Q+j.truncDivision(Q,15);y[L-Q-1]=q-le-1,y[L+Q]=q+le+1}}for(let k=0,L=0;k<x;k++){let q=(x-k)*4+(m?9:12),Q=k*2,le=v-1-Q;for(let fe=0;fe<q;fe++){let Re=fe*2;for(let $e=0;$e<2;$e++)E[L+Re+$e]=f.get(y[Q+$e],y[Q+fe]),E[L+2*q+Re+$e]=f.get(y[Q+fe],y[le-$e]),E[L+4*q+Re+$e]=f.get(y[le-$e],y[le-fe]),E[L+6*q+Re+$e]=f.get(y[le-fe],y[Q+$e])}L+=q*8}return E}static readCode(f,m,x){let v=0;for(let y=m;y<m+x;y++)v<<=1,f[y]&&(v|=1);return v}static readByte(f,m){let x=f.length-m;return x>=8?Lt.readCode(f,m,8):Lt.readCode(f,m,x)<<8-x}static convertBoolArrayToByteArray(f){let m=new Uint8Array((f.length+7)/8);for(let x=0;x<m.length;x++)m[x]=Lt.readByte(f,8*x);return m}totalBitsInLayer(f,m){return((m?88:112)+16*f)*f}}Lt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Lt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Lt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Lt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Lt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(f){return f===NaN?0:f<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:f>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:f+(f<0?-.5:.5)|0}static distance(f,m,x,v){const y=f-x,E=m-v;return Math.sqrt(y*y+E*E)}static sum(f){let m=0;for(let x=0,v=f.length;x!==v;x++){const y=f[x];m+=y}return m}}class Jt{static floatToIntBits(f){return f}}Jt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ve{constructor(f,m){this.x=f,this.y=m}getX(){return this.x}getY(){return this.y}equals(f){if(f instanceof Ve){const m=f;return this.x===m.x&&this.y===m.y}return!1}hashCode(){return 31*Jt.floatToIntBits(this.x)+Jt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(f){const m=this.distance(f[0],f[1]),x=this.distance(f[1],f[2]),v=this.distance(f[0],f[2]);let y,E,k;if(x>=m&&x>=v?(E=f[0],y=f[1],k=f[2]):v>=x&&v>=m?(E=f[1],y=f[0],k=f[2]):(E=f[2],y=f[0],k=f[1]),this.crossProductZ(y,E,k)<0){const L=y;y=k,k=L}f[0]=y,f[1]=E,f[2]=k}static distance(f,m){return et.distance(f.x,f.y,m.x,m.y)}static crossProductZ(f,m,x){const v=m.x,y=m.y;return(x.x-v)*(f.y-y)-(x.y-y)*(f.x-v)}}class Ft{constructor(f,m){this.bits=f,this.points=m}getBits(){return this.bits}getPoints(){return this.points}}class qt extends Ft{constructor(f,m,x,v,y){super(f,m),this.compact=x,this.nbDatablocks=v,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Wt{constructor(f,m,x,v){this.image=f,this.height=f.getHeight(),this.width=f.getWidth(),m==null&&(m=Wt.INIT_SIZE),x==null&&(x=f.getWidth()/2|0),v==null&&(v=f.getHeight()/2|0);const y=m/2|0;if(this.leftInit=x-y,this.rightInit=x+y,this.upInit=v-y,this.downInit=v+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let f=this.leftInit,m=this.rightInit,x=this.upInit,v=this.downInit,y=!1,E=!0,k=!1,L=!1,q=!1,Q=!1,le=!1;const fe=this.width,Re=this.height;for(;E;){E=!1;let $e=!0;for(;($e||!L)&&m<fe;)$e=this.containsBlackPoint(x,v,m,!1),$e?(m++,E=!0,L=!0):L||m++;if(m>=fe){y=!0;break}let Ke=!0;for(;(Ke||!q)&&v<Re;)Ke=this.containsBlackPoint(f,m,v,!0),Ke?(v++,E=!0,q=!0):q||v++;if(v>=Re){y=!0;break}let ot=!0;for(;(ot||!Q)&&f>=0;)ot=this.containsBlackPoint(x,v,f,!1),ot?(f--,E=!0,Q=!0):Q||f--;if(f<0){y=!0;break}let Nt=!0;for(;(Nt||!le)&&x>=0;)Nt=this.containsBlackPoint(f,m,x,!0),Nt?(x--,E=!0,le=!0):le||x--;if(x<0){y=!0;break}E&&(k=!0)}if(!y&&k){const $e=m-f;let Ke=null;for(let Gt=1;Ke===null&&Gt<$e;Gt++)Ke=this.getBlackPointOnSegment(f,v-Gt,f+Gt,v);if(Ke==null)throw new Z;let ot=null;for(let Gt=1;ot===null&&Gt<$e;Gt++)ot=this.getBlackPointOnSegment(f,x+Gt,f+Gt,x);if(ot==null)throw new Z;let Nt=null;for(let Gt=1;Nt===null&&Gt<$e;Gt++)Nt=this.getBlackPointOnSegment(m,x+Gt,m-Gt,x);if(Nt==null)throw new Z;let zt=null;for(let Gt=1;zt===null&&Gt<$e;Gt++)zt=this.getBlackPointOnSegment(m,v-Gt,m-Gt,v);if(zt==null)throw new Z;return this.centerEdges(zt,Ke,Nt,ot)}else throw new Z}getBlackPointOnSegment(f,m,x,v){const y=et.round(et.distance(f,m,x,v)),E=(x-f)/y,k=(v-m)/y,L=this.image;for(let q=0;q<y;q++){const Q=et.round(f+q*E),le=et.round(m+q*k);if(L.get(Q,le))return new Ve(Q,le)}return null}centerEdges(f,m,x,v){const y=f.getX(),E=f.getY(),k=m.getX(),L=m.getY(),q=x.getX(),Q=x.getY(),le=v.getX(),fe=v.getY(),Re=Wt.CORR;return y<this.width/2?[new Ve(le-Re,fe+Re),new Ve(k+Re,L+Re),new Ve(q-Re,Q-Re),new Ve(y+Re,E-Re)]:[new Ve(le+Re,fe+Re),new Ve(k+Re,L-Re),new Ve(q-Re,Q+Re),new Ve(y-Re,E-Re)]}containsBlackPoint(f,m,x,v){const y=this.image;if(v){for(let E=f;E<=m;E++)if(y.get(E,x))return!0}else for(let E=f;E<=m;E++)if(y.get(x,E))return!0;return!1}}Wt.INIT_SIZE=10,Wt.CORR=1;class nr{static checkAndNudgePoints(f,m){const x=f.getWidth(),v=f.getHeight();let y=!0;for(let E=0;E<m.length&&y;E+=2){const k=Math.floor(m[E]),L=Math.floor(m[E+1]);if(k<-1||k>x||L<-1||L>v)throw new Z;y=!1,k===-1?(m[E]=0,y=!0):k===x&&(m[E]=x-1,y=!0),L===-1?(m[E+1]=0,y=!0):L===v&&(m[E+1]=v-1,y=!0)}y=!0;for(let E=m.length-2;E>=0&&y;E-=2){const k=Math.floor(m[E]),L=Math.floor(m[E+1]);if(k<-1||k>x||L<-1||L>v)throw new Z;y=!1,k===-1?(m[E]=0,y=!0):k===x&&(m[E]=x-1,y=!0),L===-1?(m[E+1]=0,y=!0):L===v&&(m[E+1]=v-1,y=!0)}}}class Xe{constructor(f,m,x,v,y,E,k,L,q){this.a11=f,this.a21=m,this.a31=x,this.a12=v,this.a22=y,this.a32=E,this.a13=k,this.a23=L,this.a33=q}static quadrilateralToQuadrilateral(f,m,x,v,y,E,k,L,q,Q,le,fe,Re,$e,Ke,ot){const Nt=Xe.quadrilateralToSquare(f,m,x,v,y,E,k,L);return Xe.squareToQuadrilateral(q,Q,le,fe,Re,$e,Ke,ot).times(Nt)}transformPoints(f){const m=f.length,x=this.a11,v=this.a12,y=this.a13,E=this.a21,k=this.a22,L=this.a23,q=this.a31,Q=this.a32,le=this.a33;for(let fe=0;fe<m;fe+=2){const Re=f[fe],$e=f[fe+1],Ke=y*Re+L*$e+le;f[fe]=(x*Re+E*$e+q)/Ke,f[fe+1]=(v*Re+k*$e+Q)/Ke}}transformPointsWithValues(f,m){const x=this.a11,v=this.a12,y=this.a13,E=this.a21,k=this.a22,L=this.a23,q=this.a31,Q=this.a32,le=this.a33,fe=f.length;for(let Re=0;Re<fe;Re++){const $e=f[Re],Ke=m[Re],ot=y*$e+L*Ke+le;f[Re]=(x*$e+E*Ke+q)/ot,m[Re]=(v*$e+k*Ke+Q)/ot}}static squareToQuadrilateral(f,m,x,v,y,E,k,L){const q=f-x+y-k,Q=m-v+E-L;if(q===0&&Q===0)return new Xe(x-f,y-x,f,v-m,E-v,m,0,0,1);{const le=x-y,fe=k-y,Re=v-E,$e=L-E,Ke=le*$e-fe*Re,ot=(q*$e-fe*Q)/Ke,Nt=(le*Q-q*Re)/Ke;return new Xe(x-f+ot*x,k-f+Nt*k,f,v-m+ot*v,L-m+Nt*L,m,ot,Nt,1)}}static quadrilateralToSquare(f,m,x,v,y,E,k,L){return Xe.squareToQuadrilateral(f,m,x,v,y,E,k,L).buildAdjoint()}buildAdjoint(){return new Xe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(f){return new Xe(this.a11*f.a11+this.a21*f.a12+this.a31*f.a13,this.a11*f.a21+this.a21*f.a22+this.a31*f.a23,this.a11*f.a31+this.a21*f.a32+this.a31*f.a33,this.a12*f.a11+this.a22*f.a12+this.a32*f.a13,this.a12*f.a21+this.a22*f.a22+this.a32*f.a23,this.a12*f.a31+this.a22*f.a32+this.a32*f.a33,this.a13*f.a11+this.a23*f.a12+this.a33*f.a13,this.a13*f.a21+this.a23*f.a22+this.a33*f.a23,this.a13*f.a31+this.a23*f.a32+this.a33*f.a33)}}class Kt extends nr{sampleGrid(f,m,x,v,y,E,k,L,q,Q,le,fe,Re,$e,Ke,ot,Nt,zt,Gt){const $t=Xe.quadrilateralToQuadrilateral(v,y,E,k,L,q,Q,le,fe,Re,$e,Ke,ot,Nt,zt,Gt);return this.sampleGridWithTransform(f,m,x,$t)}sampleGridWithTransform(f,m,x,v){if(m<=0||x<=0)throw new Z;const y=new ee(m,x),E=new Float32Array(2*m);for(let k=0;k<x;k++){const L=E.length,q=k+.5;for(let Q=0;Q<L;Q+=2)E[Q]=Q/2+.5,E[Q+1]=q;v.transformPoints(E),nr.checkAndNudgePoints(f,E);try{for(let Q=0;Q<L;Q+=2)f.get(Math.floor(E[Q]),Math.floor(E[Q+1]))&&y.set(Q/2,k)}catch{throw new Z}}return y}}class kt{static setGridSampler(f){kt.gridSampler=f}static getInstance(){return kt.gridSampler}}kt.gridSampler=new Kt;class pt{constructor(f,m){this.x=f,this.y=m}toResultPoint(){return new Ve(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ot{constructor(f){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=f}detect(){return this.detectMirror(!1)}detectMirror(f){let m=this.getMatrixCenter(),x=this.getBullsEyeCorners(m);if(f){let E=x[0];x[0]=x[2],x[2]=E}this.extractParameters(x);let v=this.sampleGrid(this.image,x[this.shift%4],x[(this.shift+1)%4],x[(this.shift+2)%4],x[(this.shift+3)%4]),y=this.getMatrixCornerPoints(x);return new qt(v,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(f){if(!this.isValidPoint(f[0])||!this.isValidPoint(f[1])||!this.isValidPoint(f[2])||!this.isValidPoint(f[3]))throw new Z;let m=2*this.nbCenterLayers,x=new Int32Array([this.sampleLine(f[0],f[1],m),this.sampleLine(f[1],f[2],m),this.sampleLine(f[2],f[3],m),this.sampleLine(f[3],f[0],m)]);this.shift=this.getRotation(x,m);let v=0;for(let E=0;E<4;E++){let k=x[(this.shift+E)%4];this.compact?(v<<=7,v+=k>>1&127):(v<<=10,v+=(k>>2&992)+(k>>1&31))}let y=this.getCorrectedParameterData(v,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(f,m){let x=0;f.forEach((v,y,E)=>{let k=(v>>m-2<<1)+(v&1);x=(x<<3)+k}),x=((x&1)<<11)+(x>>1);for(let v=0;v<4;v++)if(j.bitCount(x^this.EXPECTED_CORNER_BITS[v])<=2)return v;throw new Z}getCorrectedParameterData(f,m){let x,v;m?(x=7,v=2):(x=10,v=4);let y=x-v,E=new Int32Array(x);for(let L=x-1;L>=0;--L)E[L]=f&15,f>>=4;try{new Vt(Me.AZTEC_PARAM).decode(E,y)}catch{throw new Z}let k=0;for(let L=0;L<v;L++)k=(k<<4)+E[L];return k}getBullsEyeCorners(f){let m=f,x=f,v=f,y=f,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let le=this.getFirstDifferent(m,E,1,-1),fe=this.getFirstDifferent(x,E,1,1),Re=this.getFirstDifferent(v,E,-1,1),$e=this.getFirstDifferent(y,E,-1,-1);if(this.nbCenterLayers>2){let Ke=this.distancePoint($e,le)*this.nbCenterLayers/(this.distancePoint(y,m)*(this.nbCenterLayers+2));if(Ke<.75||Ke>1.25||!this.isWhiteOrBlackRectangle(le,fe,Re,$e))break}m=le,x=fe,v=Re,y=$e,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let k=new Ve(m.getX()+.5,m.getY()-.5),L=new Ve(x.getX()+.5,x.getY()+.5),q=new Ve(v.getX()-.5,v.getY()+.5),Q=new Ve(y.getX()-.5,y.getY()-.5);return this.expandSquare([k,L,q,Q],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let f,m,x,v;try{let k=new Wt(this.image).detect();f=k[0],m=k[1],x=k[2],v=k[3]}catch{let L=this.image.getWidth()/2,q=this.image.getHeight()/2;f=this.getFirstDifferent(new pt(L+7,q-7),!1,1,-1).toResultPoint(),m=this.getFirstDifferent(new pt(L+7,q+7),!1,1,1).toResultPoint(),x=this.getFirstDifferent(new pt(L-7,q+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new pt(L-7,q-7),!1,-1,-1).toResultPoint()}let y=et.round((f.getX()+v.getX()+m.getX()+x.getX())/4),E=et.round((f.getY()+v.getY()+m.getY()+x.getY())/4);try{let k=new Wt(this.image,15,y,E).detect();f=k[0],m=k[1],x=k[2],v=k[3]}catch{f=this.getFirstDifferent(new pt(y+7,E-7),!1,1,-1).toResultPoint(),m=this.getFirstDifferent(new pt(y+7,E+7),!1,1,1).toResultPoint(),x=this.getFirstDifferent(new pt(y-7,E+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new pt(y-7,E-7),!1,-1,-1).toResultPoint()}return y=et.round((f.getX()+v.getX()+m.getX()+x.getX())/4),E=et.round((f.getY()+v.getY()+m.getY()+x.getY())/4),new pt(y,E)}getMatrixCornerPoints(f){return this.expandSquare(f,2*this.nbCenterLayers,this.getDimension())}sampleGrid(f,m,x,v,y){let E=kt.getInstance(),k=this.getDimension(),L=k/2-this.nbCenterLayers,q=k/2+this.nbCenterLayers;return E.sampleGrid(f,k,k,L,L,q,L,q,q,L,q,m.getX(),m.getY(),x.getX(),x.getY(),v.getX(),v.getY(),y.getX(),y.getY())}sampleLine(f,m,x){let v=0,y=this.distanceResultPoint(f,m),E=y/x,k=f.getX(),L=f.getY(),q=E*(m.getX()-f.getX())/y,Q=E*(m.getY()-f.getY())/y;for(let le=0;le<x;le++)this.image.get(et.round(k+le*q),et.round(L+le*Q))&&(v|=1<<x-le-1);return v}isWhiteOrBlackRectangle(f,m,x,v){let y=3;f=new pt(f.getX()-y,f.getY()+y),m=new pt(m.getX()-y,m.getY()-y),x=new pt(x.getX()+y,x.getY()-y),v=new pt(v.getX()+y,v.getY()+y);let E=this.getColor(v,f);if(E===0)return!1;let k=this.getColor(f,m);return k!==E||(k=this.getColor(m,x),k!==E)?!1:(k=this.getColor(x,v),k===E)}getColor(f,m){let x=this.distancePoint(f,m),v=(m.getX()-f.getX())/x,y=(m.getY()-f.getY())/x,E=0,k=f.getX(),L=f.getY(),q=this.image.get(f.getX(),f.getY()),Q=Math.ceil(x);for(let fe=0;fe<Q;fe++)k+=v,L+=y,this.image.get(et.round(k),et.round(L))!==q&&E++;let le=E/x;return le>.1&&le<.9?0:le<=.1===q?1:-1}getFirstDifferent(f,m,x,v){let y=f.getX()+x,E=f.getY()+v;for(;this.isValid(y,E)&&this.image.get(y,E)===m;)y+=x,E+=v;for(y-=x,E-=v;this.isValid(y,E)&&this.image.get(y,E)===m;)y+=x;for(y-=x;this.isValid(y,E)&&this.image.get(y,E)===m;)E+=v;return E-=v,new pt(y,E)}expandSquare(f,m,x){let v=x/(2*m),y=f[0].getX()-f[2].getX(),E=f[0].getY()-f[2].getY(),k=(f[0].getX()+f[2].getX())/2,L=(f[0].getY()+f[2].getY())/2,q=new Ve(k+v*y,L+v*E),Q=new Ve(k-v*y,L-v*E);y=f[1].getX()-f[3].getX(),E=f[1].getY()-f[3].getY(),k=(f[1].getX()+f[3].getX())/2,L=(f[1].getY()+f[3].getY())/2;let le=new Ve(k+v*y,L+v*E),fe=new Ve(k-v*y,L-v*E);return[q,le,Q,fe]}isValid(f,m){return f>=0&&f<this.image.getWidth()&&m>0&&m<this.image.getHeight()}isValidPoint(f){let m=et.round(f.getX()),x=et.round(f.getY());return this.isValid(m,x)}distancePoint(f,m){return et.distance(f.getX(),f.getY(),m.getX(),m.getY())}distanceResultPoint(f,m){return et.distance(f.getX(),f.getY(),m.getX(),m.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(j.truncDivision(this.nbLayers-4,8)+1)+15}}class Ut{decode(f,m=null){let x=null,v=new Ot(f.getBlackMatrix()),y=null,E=null;try{let Q=v.detectMirror(!1);y=Q.getPoints(),this.reportFoundResultPoints(m,y),E=new Lt().decode(Q)}catch(Q){x=Q}if(E==null)try{let Q=v.detectMirror(!0);y=Q.getPoints(),this.reportFoundResultPoints(m,y),E=new Lt().decode(Q)}catch(Q){throw x??Q}let k=new X(E.getText(),E.getRawBytes(),E.getNumBits(),y,se.AZTEC,w.currentTimeMillis()),L=E.getByteSegments();L!=null&&k.putMetadata(Ce.BYTE_SEGMENTS,L);let q=E.getECLevel();return q!=null&&k.putMetadata(Ce.ERROR_CORRECTION_LEVEL,q),k}reportFoundResultPoints(f,m){if(f!=null){let x=f.get(G.NEED_RESULT_POINT_CALLBACK);x!=null&&m.forEach((v,y,E)=>{x.foundPossibleResultPoint(v)})}}reset(){}}class Nr extends Y{constructor(f=500){super(new Ut,f)}}class or{decode(f,m){try{return this.doDecode(f,m)}catch{if(m&&m.get(G.TRY_HARDER)===!0&&f.isRotateSupported()){const y=f.rotateCounterClockwise(),E=this.doDecode(y,m),k=E.getResultMetadata();let L=270;k!==null&&k.get(Ce.ORIENTATION)===!0&&(L=L+k.get(Ce.ORIENTATION)%360),E.putMetadata(Ce.ORIENTATION,L);const q=E.getResultPoints();if(q!==null){const Q=y.getHeight();for(let le=0;le<q.length;le++)q[le]=new Ve(Q-q[le].getY()-1,q[le].getX())}return E}else throw new Z}}reset(){}doDecode(f,m){const x=f.getWidth(),v=f.getHeight();let y=new P(x);const E=m&&m.get(G.TRY_HARDER)===!0,k=Math.max(1,v>>(E?8:5));let L;E?L=v:L=15;const q=Math.trunc(v/2);for(let Q=0;Q<L;Q++){const le=Math.trunc((Q+1)/2),fe=(Q&1)===0,Re=q+k*(fe?le:-le);if(Re<0||Re>=v)break;try{y=f.getBlackRow(Re,y)}catch{continue}for(let $e=0;$e<2;$e++){if($e===1&&(y.reverse(),m&&m.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const Ke=new Map;m.forEach((ot,Nt)=>Ke.set(Nt,ot)),Ke.delete(G.NEED_RESULT_POINT_CALLBACK),m=Ke}try{const Ke=this.decodeRow(Re,y,m);if($e===1){Ke.putMetadata(Ce.ORIENTATION,180);const ot=Ke.getResultPoints();ot!==null&&(ot[0]=new Ve(x-ot[0].getX()-1,ot[0].getY()),ot[1]=new Ve(x-ot[1].getX()-1,ot[1].getY()))}return Ke}catch{}}}throw new Z}static recordPattern(f,m,x){const v=x.length;for(let q=0;q<v;q++)x[q]=0;const y=f.getSize();if(m>=y)throw new Z;let E=!f.get(m),k=0,L=m;for(;L<y;){if(f.get(L)!==E)x[k]++;else{if(++k===v)break;x[k]=1,E=!E}L++}if(!(k===v||k===v-1&&L===y))throw new Z}static recordPatternInReverse(f,m,x){let v=x.length,y=f.get(m);for(;m>0&&v>=0;)f.get(--m)!==y&&(v--,y=!y);if(v>=0)throw new Z;or.recordPattern(f,m+1,x)}static patternMatchVariance(f,m,x){const v=f.length;let y=0,E=0;for(let q=0;q<v;q++)y+=f[q],E+=m[q];if(y<E)return Number.POSITIVE_INFINITY;const k=y/E;x*=k;let L=0;for(let q=0;q<v;q++){const Q=f[q],le=m[q]*k,fe=Q>le?Q-le:le-Q;if(fe>x)return Number.POSITIVE_INFINITY;L+=fe}return L/y}}class lt extends or{static findStartPattern(f){const m=f.getSize(),x=f.getNextSet(0);let v=0,y=Int32Array.from([0,0,0,0,0,0]),E=x,k=!1;const L=6;for(let q=x;q<m;q++)if(f.get(q)!==k)y[v]++;else{if(v===L-1){let Q=lt.MAX_AVG_VARIANCE,le=-1;for(let fe=lt.CODE_START_A;fe<=lt.CODE_START_C;fe++){const Re=or.patternMatchVariance(y,lt.CODE_PATTERNS[fe],lt.MAX_INDIVIDUAL_VARIANCE);Re<Q&&(Q=Re,le=fe)}if(le>=0&&f.isRange(Math.max(0,E-(q-E)/2),E,!1))return Int32Array.from([E,q,le]);E+=y[0]+y[1],y=y.slice(2,y.length-1),y[v-1]=0,y[v]=0,v--}else v++;y[v]=1,k=!k}throw new Z}static decodeCode(f,m,x){or.recordPattern(f,x,m);let v=lt.MAX_AVG_VARIANCE,y=-1;for(let E=0;E<lt.CODE_PATTERNS.length;E++){const k=lt.CODE_PATTERNS[E],L=this.patternMatchVariance(m,k,lt.MAX_INDIVIDUAL_VARIANCE);L<v&&(v=L,y=E)}if(y>=0)return y;throw new Z}decodeRow(f,m,x){const v=x&&x.get(G.ASSUME_GS1)===!0,y=lt.findStartPattern(m),E=y[2];let k=0;const L=new Uint8Array(20);L[k++]=E;let q;switch(E){case lt.CODE_START_A:q=lt.CODE_CODE_A;break;case lt.CODE_START_B:q=lt.CODE_CODE_B;break;case lt.CODE_START_C:q=lt.CODE_CODE_C;break;default:throw new O}let Q=!1,le=!1,fe="",Re=y[0],$e=y[1];const Ke=Int32Array.from([0,0,0,0,0,0]);let ot=0,Nt=0,zt=E,Gt=0,$t=!0,Wr=!1,tn=!1;for(;!Q;){const cf=le;switch(le=!1,ot=Nt,Nt=lt.decodeCode(m,Ke,$e),L[k++]=Nt,Nt!==lt.CODE_STOP&&($t=!0),Nt!==lt.CODE_STOP&&(Gt++,zt+=Gt*Nt),Re=$e,$e+=Ke.reduce((h_,Tm)=>h_+Tm,0),Nt){case lt.CODE_START_A:case lt.CODE_START_B:case lt.CODE_START_C:throw new O}switch(q){case lt.CODE_CODE_A:if(Nt<64)tn===Wr?fe+=String.fromCharCode(32+Nt):fe+=String.fromCharCode(32+Nt+128),tn=!1;else if(Nt<96)tn===Wr?fe+=String.fromCharCode(Nt-64):fe+=String.fromCharCode(Nt+64),tn=!1;else switch(Nt!==lt.CODE_STOP&&($t=!1),Nt){case lt.CODE_FNC_1:v&&(fe.length===0?fe+="]C1":fe+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_A:!Wr&&tn?(Wr=!0,tn=!1):Wr&&tn?(Wr=!1,tn=!1):tn=!0;break;case lt.CODE_SHIFT:le=!0,q=lt.CODE_CODE_B;break;case lt.CODE_CODE_B:q=lt.CODE_CODE_B;break;case lt.CODE_CODE_C:q=lt.CODE_CODE_C;break;case lt.CODE_STOP:Q=!0;break}break;case lt.CODE_CODE_B:if(Nt<96)tn===Wr?fe+=String.fromCharCode(32+Nt):fe+=String.fromCharCode(32+Nt+128),tn=!1;else switch(Nt!==lt.CODE_STOP&&($t=!1),Nt){case lt.CODE_FNC_1:v&&(fe.length===0?fe+="]C1":fe+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_B:!Wr&&tn?(Wr=!0,tn=!1):Wr&&tn?(Wr=!1,tn=!1):tn=!0;break;case lt.CODE_SHIFT:le=!0,q=lt.CODE_CODE_A;break;case lt.CODE_CODE_A:q=lt.CODE_CODE_A;break;case lt.CODE_CODE_C:q=lt.CODE_CODE_C;break;case lt.CODE_STOP:Q=!0;break}break;case lt.CODE_CODE_C:if(Nt<100)Nt<10&&(fe+="0"),fe+=Nt;else switch(Nt!==lt.CODE_STOP&&($t=!1),Nt){case lt.CODE_FNC_1:v&&(fe.length===0?fe+="]C1":fe+="");break;case lt.CODE_CODE_A:q=lt.CODE_CODE_A;break;case lt.CODE_CODE_B:q=lt.CODE_CODE_B;break;case lt.CODE_STOP:Q=!0;break}break}cf&&(q=q===lt.CODE_CODE_A?lt.CODE_CODE_B:lt.CODE_CODE_A)}const li=$e-Re;if($e=m.getNextUnset($e),!m.isRange($e,Math.min(m.getSize(),$e+($e-Re)/2),!1))throw new Z;if(zt-=Gt*ot,zt%103!==ot)throw new g;const Gi=fe.length;if(Gi===0)throw new Z;Gi>0&&$t&&(q===lt.CODE_CODE_C?fe=fe.substring(0,Gi-2):fe=fe.substring(0,Gi-1));const Ti=(y[1]+y[0])/2,ga=Re+li/2,ci=L.length,Po=new Uint8Array(ci);for(let cf=0;cf<ci;cf++)Po[cf]=L[cf];const lf=[new Ve(Ti,f),new Ve(ga,f)];return new X(fe,Po,0,lf,se.CODE_128,new Date().getTime())}}lt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],lt.MAX_AVG_VARIANCE=.25,lt.MAX_INDIVIDUAL_VARIANCE=.7,lt.CODE_SHIFT=98,lt.CODE_CODE_C=99,lt.CODE_CODE_B=100,lt.CODE_CODE_A=101,lt.CODE_FNC_1=102,lt.CODE_FNC_2=97,lt.CODE_FNC_3=96,lt.CODE_FNC_4_A=101,lt.CODE_FNC_4_B=100,lt.CODE_START_A=103,lt.CODE_START_B=104,lt.CODE_START_C=105,lt.CODE_STOP=106;class lr extends or{constructor(f=!1,m=!1){super(),this.usingCheckDigit=f,this.extendedMode=m,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(f,m,x){let v=this.counters;v.fill(0),this.decodeRowResult="";let y=lr.findAsteriskPattern(m,v),E=m.getNextSet(y[1]),k=m.getSize(),L,q;do{lr.recordPattern(m,E,v);let Ke=lr.toNarrowWidePattern(v);if(Ke<0)throw new Z;L=lr.patternToChar(Ke),this.decodeRowResult+=L,q=E;for(let ot of v)E+=ot;E=m.getNextSet(E)}while(L!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let Q=0;for(let Ke of v)Q+=Ke;let le=E-q-Q;if(E!==k&&le*2<Q)throw new Z;if(this.usingCheckDigit){let Ke=this.decodeRowResult.length-1,ot=0;for(let Nt=0;Nt<Ke;Nt++)ot+=lr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Nt));if(this.decodeRowResult.charAt(Ke)!==lr.ALPHABET_STRING.charAt(ot%43))throw new g;this.decodeRowResult=this.decodeRowResult.substring(0,Ke)}if(this.decodeRowResult.length===0)throw new Z;let fe;this.extendedMode?fe=lr.decodeExtended(this.decodeRowResult):fe=this.decodeRowResult;let Re=(y[1]+y[0])/2,$e=q+Q/2;return new X(fe,null,0,[new Ve(Re,f),new Ve($e,f)],se.CODE_39,new Date().getTime())}static findAsteriskPattern(f,m){let x=f.getSize(),v=f.getNextSet(0),y=0,E=v,k=!1,L=m.length;for(let q=v;q<x;q++)if(f.get(q)!==k)m[y]++;else{if(y===L-1){if(this.toNarrowWidePattern(m)===lr.ASTERISK_ENCODING&&f.isRange(Math.max(0,E-Math.floor((q-E)/2)),E,!1))return[E,q];E+=m[0]+m[1],m.copyWithin(0,2,2+y-1),m[y-1]=0,m[y]=0,y--}else y++;m[y]=1,k=!k}throw new Z}static toNarrowWidePattern(f){let m=f.length,x=0,v;do{let y=2147483647;for(let L of f)L<y&&L>x&&(y=L);x=y,v=0;let E=0,k=0;for(let L=0;L<m;L++){let q=f[L];q>x&&(k|=1<<m-1-L,v++,E+=q)}if(v===3){for(let L=0;L<m&&v>0;L++){let q=f[L];if(q>x&&(v--,q*2>=E))return-1}return k}}while(v>3);return-1}static patternToChar(f){for(let m=0;m<lr.CHARACTER_ENCODINGS.length;m++)if(lr.CHARACTER_ENCODINGS[m]===f)return lr.ALPHABET_STRING.charAt(m);if(f===lr.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(f){let m=f.length,x="";for(let v=0;v<m;v++){let y=f.charAt(v);if(y==="+"||y==="$"||y==="%"||y==="/"){let E=f.charAt(v+1),k="\0";switch(y){case"+":if(E>="A"&&E<="Z")k=String.fromCharCode(E.charCodeAt(0)+32);else throw new O;break;case"$":if(E>="A"&&E<="Z")k=String.fromCharCode(E.charCodeAt(0)-64);else throw new O;break;case"%":if(E>="A"&&E<="E")k=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")k=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")k=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")k=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")k="\0";else if(E==="V")k="@";else if(E==="W")k="`";else if(E==="X"||E==="Y"||E==="Z")k="";else throw new O;break;case"/":if(E>="A"&&E<="O")k=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")k=":";else throw new O;break}x+=k,v++}else x+=y}return x}}lr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",lr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],lr.ASTERISK_ENCODING=148;class ve extends or{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(f,m,x){let v=this.decodeStart(m),y=this.decodeEnd(m),E=new F;ve.decodeMiddle(m,v[1],y[0],E);let k=E.toString(),L=null;x!=null&&(L=x.get(G.ALLOWED_LENGTHS)),L==null&&(L=ve.DEFAULT_ALLOWED_LENGTHS);let q=k.length,Q=!1,le=0;for(let $e of L){if(q===$e){Q=!0;break}$e>le&&(le=$e)}if(!Q&&q>le&&(Q=!0),!Q)throw new O;const fe=[new Ve(v[1],f),new Ve(y[0],f)];return new X(k,null,0,fe,se.ITF,new Date().getTime())}static decodeMiddle(f,m,x,v){let y=new Int32Array(10),E=new Int32Array(5),k=new Int32Array(5);for(y.fill(0),E.fill(0),k.fill(0);m<x;){or.recordPattern(f,m,y);for(let q=0;q<5;q++){let Q=2*q;E[q]=y[Q],k[q]=y[Q+1]}let L=ve.decodeDigit(E);v.append(L.toString()),L=this.decodeDigit(k),v.append(L.toString()),y.forEach(function(q){m+=q})}}decodeStart(f){let m=ve.skipWhiteSpace(f),x=ve.findGuardPattern(f,m,ve.START_PATTERN);return this.narrowLineWidth=(x[1]-x[0])/4,this.validateQuietZone(f,x[0]),x}validateQuietZone(f,m){let x=this.narrowLineWidth*10;x=x<m?x:m;for(let v=m-1;x>0&&v>=0&&!f.get(v);v--)x--;if(x!==0)throw new Z}static skipWhiteSpace(f){const m=f.getSize(),x=f.getNextSet(0);if(x===m)throw new Z;return x}decodeEnd(f){f.reverse();try{let m=ve.skipWhiteSpace(f),x;try{x=ve.findGuardPattern(f,m,ve.END_PATTERN_REVERSED[0])}catch(y){y instanceof Z&&(x=ve.findGuardPattern(f,m,ve.END_PATTERN_REVERSED[1]))}this.validateQuietZone(f,x[0]);let v=x[0];return x[0]=f.getSize()-x[1],x[1]=f.getSize()-v,x}finally{f.reverse()}}static findGuardPattern(f,m,x){let v=x.length,y=new Int32Array(v),E=f.getSize(),k=!1,L=0,q=m;y.fill(0);for(let Q=m;Q<E;Q++)if(f.get(Q)!==k)y[L]++;else{if(L===v-1){if(or.patternMatchVariance(y,x,ve.MAX_INDIVIDUAL_VARIANCE)<ve.MAX_AVG_VARIANCE)return[q,Q];q+=y[0]+y[1],w.arraycopy(y,2,y,0,L-1),y[L-1]=0,y[L]=0,L--}else L++;y[L]=1,k=!k}throw new Z}static decodeDigit(f){let m=ve.MAX_AVG_VARIANCE,x=-1,v=ve.PATTERNS.length;for(let y=0;y<v;y++){let E=ve.PATTERNS[y],k=or.patternMatchVariance(f,E,ve.MAX_INDIVIDUAL_VARIANCE);k<m?(m=k,x=y):k===m&&(x=-1)}if(x>=0)return x%10;throw new Z}}ve.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ve.MAX_AVG_VARIANCE=.38,ve.MAX_INDIVIDUAL_VARIANCE=.5,ve.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ve.START_PATTERN=Int32Array.from([1,1,1,1]),ve.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ze extends or{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(f){let m=!1,x,v=0,y=Int32Array.from([0,0,0]);for(;!m;){y=Int32Array.from([0,0,0]),x=Ze.findGuardPattern(f,v,!1,this.START_END_PATTERN,y);let E=x[0];v=x[1];let k=E-(v-E);k>=0&&(m=f.isRange(k,E,!1))}return x}static checkChecksum(f){return Ze.checkStandardUPCEANChecksum(f)}static checkStandardUPCEANChecksum(f){let m=f.length;if(m===0)return!1;let x=parseInt(f.charAt(m-1),10);return Ze.getStandardUPCEANChecksum(f.substring(0,m-1))===x}static getStandardUPCEANChecksum(f){let m=f.length,x=0;for(let v=m-1;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}x*=3;for(let v=m-2;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}return(1e3-x)%10}static decodeEnd(f,m){return Ze.findGuardPattern(f,m,!1,Ze.START_END_PATTERN,new Int32Array(Ze.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(f,m,x,v){return this.findGuardPattern(f,m,x,v,new Int32Array(v.length))}static findGuardPattern(f,m,x,v,y){let E=f.getSize();m=x?f.getNextUnset(m):f.getNextSet(m);let k=0,L=m,q=v.length,Q=x;for(let le=m;le<E;le++)if(f.get(le)!==Q)y[k]++;else{if(k===q-1){if(or.patternMatchVariance(y,v,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return Int32Array.from([L,le]);L+=y[0]+y[1];let fe=y.slice(2,y.length-1);for(let Re=0;Re<k-1;Re++)y[Re]=fe[Re];y[k-1]=0,y[k]=0,k--}else k++;y[k]=1,Q=!Q}throw new Z}static decodeDigit(f,m,x,v){this.recordPattern(f,x,m);let y=this.MAX_AVG_VARIANCE,E=-1,k=v.length;for(let L=0;L<k;L++){let q=v[L],Q=or.patternMatchVariance(m,q,Ze.MAX_INDIVIDUAL_VARIANCE);Q<y&&(y=Q,E=L)}if(E>=0)return E;throw new Z}}Ze.MAX_AVG_VARIANCE=.48,Ze.MAX_INDIVIDUAL_VARIANCE=.7,Ze.START_END_PATTERN=Int32Array.from([1,1,1]),Ze.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ze.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ze.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class at{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(f,m,x){let v=this.decodeRowStringBuffer,y=this.decodeMiddle(m,x,v),E=v.toString(),k=at.parseExtensionString(E),L=[new Ve((x[0]+x[1])/2,f),new Ve(y,f)],q=new X(E,null,0,L,se.UPC_EAN_EXTENSION,new Date().getTime());return k!=null&&q.putAllMetadata(k),q}decodeMiddle(f,m,x){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1],k=0;for(let q=0;q<5&&E<y;q++){let Q=Ze.decodeDigit(f,v,E,Ze.L_AND_G_PATTERNS);x+=String.fromCharCode(48+Q%10);for(let le of v)E+=le;Q>=10&&(k|=1<<4-q),q!==4&&(E=f.getNextSet(E),E=f.getNextUnset(E))}if(x.length!==5)throw new Z;let L=this.determineCheckDigit(k);if(at.extensionChecksum(x.toString())!==L)throw new Z;return E}static extensionChecksum(f){let m=f.length,x=0;for(let v=m-2;v>=0;v-=2)x+=f.charAt(v).charCodeAt(0)-48;x*=3;for(let v=m-1;v>=0;v-=2)x+=f.charAt(v).charCodeAt(0)-48;return x*=3,x%10}determineCheckDigit(f){for(let m=0;m<10;m++)if(f===this.CHECK_DIGIT_ENCODINGS[m])return m;throw new Z}static parseExtensionString(f){if(f.length!==5)return null;let m=at.parseExtension5String(f);return m==null?null:new Map([[Ce.SUGGESTED_PRICE,m]])}static parseExtension5String(f){let m;switch(f.charAt(0)){case"0":m="";break;case"5":m="$";break;case"9":switch(f){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}m="";break;default:m="";break}let x=parseInt(f.substring(1)),v=(x/100).toString(),y=x%100,E=y<10?"0"+y:y.toString();return m+v+"."+E}}class Qe{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(f,m,x){let v=this.decodeRowStringBuffer,y=this.decodeMiddle(m,x,v),E=v.toString(),k=Qe.parseExtensionString(E),L=[new Ve((x[0]+x[1])/2,f),new Ve(y,f)],q=new X(E,null,0,L,se.UPC_EAN_EXTENSION,new Date().getTime());return k!=null&&q.putAllMetadata(k),q}decodeMiddle(f,m,x){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1],k=0;for(let L=0;L<2&&E<y;L++){let q=Ze.decodeDigit(f,v,E,Ze.L_AND_G_PATTERNS);x+=String.fromCharCode(48+q%10);for(let Q of v)E+=Q;q>=10&&(k|=1<<1-L),L!==1&&(E=f.getNextSet(E),E=f.getNextUnset(E))}if(x.length!==2)throw new Z;if(parseInt(x.toString())%4!==k)throw new Z;return E}static parseExtensionString(f){return f.length!==2?null:new Map([[Ce.ISSUE_NUMBER,parseInt(f)]])}}class ze{static decodeRow(f,m,x){let v=Ze.findGuardPattern(m,x,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new at().decodeRow(f,m,v)}catch{return new Qe().decodeRow(f,m,v)}}}ze.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class it extends Ze{constructor(){super(),this.decodeRowStringBuffer="",it.L_AND_G_PATTERNS=it.L_PATTERNS.map(f=>Int32Array.from(f));for(let f=10;f<20;f++){let m=it.L_PATTERNS[f-10],x=new Int32Array(m.length);for(let v=0;v<m.length;v++)x[v]=m[m.length-v-1];it.L_AND_G_PATTERNS[f]=x}}decodeRow(f,m,x){let v=it.findStartGuardPattern(m),y=x==null?null:x.get(G.NEED_RESULT_POINT_CALLBACK);if(y!=null){const $t=new Ve((v[0]+v[1])/2,f);y.foundPossibleResultPoint($t)}let E=this.decodeMiddle(m,v,this.decodeRowStringBuffer),k=E.rowOffset,L=E.resultString;if(y!=null){const $t=new Ve(k,f);y.foundPossibleResultPoint($t)}let q=this.decodeEnd(m,k);if(y!=null){const $t=new Ve((q[0]+q[1])/2,f);y.foundPossibleResultPoint($t)}let Q=q[1],le=Q+(Q-q[0]);if(le>=m.getSize()||!m.isRange(Q,le,!1))throw new Z;let fe=L.toString();if(fe.length<8)throw new O;if(!it.checkChecksum(fe))throw new g;let Re=(v[1]+v[0])/2,$e=(q[1]+q[0])/2,Ke=this.getBarcodeFormat(),ot=[new Ve(Re,f),new Ve($e,f)],Nt=new X(fe,null,0,ot,Ke,new Date().getTime()),zt=0;try{let $t=ze.decodeRow(f,m,q[1]);Nt.putMetadata(Ce.UPC_EAN_EXTENSION,$t.getText()),Nt.putAllMetadata($t.getResultMetadata()),Nt.addResultPoints($t.getResultPoints()),zt=$t.getText().length}catch{}let Gt=x==null?null:x.get(G.ALLOWED_EAN_EXTENSIONS);if(Gt!=null){let $t=!1;for(let Wr in Gt)if(zt.toString()===Wr){$t=!0;break}if(!$t)throw new Z}return Nt}decodeEnd(f,m){return it.findGuardPattern(f,m,!1,it.START_END_PATTERN,new Int32Array(it.START_END_PATTERN.length).fill(0))}static checkChecksum(f){return it.checkStandardUPCEANChecksum(f)}static checkStandardUPCEANChecksum(f){let m=f.length;if(m===0)return!1;let x=parseInt(f.charAt(m-1),10);return it.getStandardUPCEANChecksum(f.substring(0,m-1))===x}static getStandardUPCEANChecksum(f){let m=f.length,x=0;for(let v=m-1;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}x*=3;for(let v=m-2;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}return(1e3-x)%10}}class At extends it{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(f,m,x){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1],k=0;for(let q=0;q<6&&E<y;q++){let Q=it.decodeDigit(f,v,E,it.L_AND_G_PATTERNS);x+=String.fromCharCode(48+Q%10);for(let le of v)E+=le;Q>=10&&(k|=1<<5-q)}x=At.determineFirstDigit(x,k),E=it.findGuardPattern(f,E,!0,it.MIDDLE_PATTERN,new Int32Array(it.MIDDLE_PATTERN.length).fill(0))[1];for(let q=0;q<6&&E<y;q++){let Q=it.decodeDigit(f,v,E,it.L_PATTERNS);x+=String.fromCharCode(48+Q);for(let le of v)E+=le}return{rowOffset:E,resultString:x}}getBarcodeFormat(){return se.EAN_13}static determineFirstDigit(f,m){for(let x=0;x<10;x++)if(m===this.FIRST_DIGIT_ENCODINGS[x])return f=String.fromCharCode(48+x)+f,f;throw new Z}}At.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class er extends it{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(f,m,x){const v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1];for(let L=0;L<4&&E<y;L++){let q=it.decodeDigit(f,v,E,it.L_PATTERNS);x+=String.fromCharCode(48+q);for(let Q of v)E+=Q}E=it.findGuardPattern(f,E,!0,it.MIDDLE_PATTERN,new Int32Array(it.MIDDLE_PATTERN.length).fill(0))[1];for(let L=0;L<4&&E<y;L++){let q=it.decodeDigit(f,v,E,it.L_PATTERNS);x+=String.fromCharCode(48+q);for(let Q of v)E+=Q}return{rowOffset:E,resultString:x}}getBarcodeFormat(){return se.EAN_8}}class It extends it{constructor(){super(...arguments),this.ean13Reader=new At}getBarcodeFormat(){return se.UPC_A}decode(f,m){return this.maybeReturnResult(this.ean13Reader.decode(f))}decodeRow(f,m,x){return this.maybeReturnResult(this.ean13Reader.decodeRow(f,m,x))}decodeMiddle(f,m,x){return this.ean13Reader.decodeMiddle(f,m,x)}maybeReturnResult(f){let m=f.getText();if(m.charAt(0)==="0"){let x=new X(m.substring(1),null,null,f.getResultPoints(),se.UPC_A);return f.getResultMetadata()!=null&&x.putAllMetadata(f.getResultMetadata()),x}else throw new Z}reset(){this.ean13Reader.reset()}}class Er extends it{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(f,m,x){const v=this.decodeMiddleCounters.map(q=>q);v[0]=0,v[1]=0,v[2]=0,v[3]=0;const y=f.getSize();let E=m[1],k=0;for(let q=0;q<6&&E<y;q++){const Q=Er.decodeDigit(f,v,E,Er.L_AND_G_PATTERNS);x+=String.fromCharCode(48+Q%10);for(let le of v)E+=le;Q>=10&&(k|=1<<5-q)}let L=Er.determineNumSysAndCheckDigit(x,k);return{rowOffset:E,resultString:L}}decodeEnd(f,m){return Er.findGuardPatternWithoutCounters(f,m,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(f){return it.checkChecksum(Er.convertUPCEtoUPCA(f))}static determineNumSysAndCheckDigit(f,m){for(let x=0;x<=1;x++)for(let v=0;v<10;v++)if(m===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[x][v]){let y=String.fromCharCode(48+x),E=String.fromCharCode(48+v);return y+f+E}throw Z.getNotFoundInstance()}getBarcodeFormat(){return se.UPC_E}static convertUPCEtoUPCA(f){const m=f.slice(1,7).split("").map(y=>y.charCodeAt(0)),x=new F;x.append(f.charAt(0));let v=m[5];switch(v){case 0:case 1:case 2:x.appendChars(m,0,2),x.append(v),x.append("0000"),x.appendChars(m,2,3);break;case 3:x.appendChars(m,0,3),x.append("00000"),x.appendChars(m,3,2);break;case 4:x.appendChars(m,0,4),x.append("00000"),x.append(m[4]);break;default:x.appendChars(m,0,5),x.append("0000"),x.append(v);break}return f.length>=8&&x.append(f.charAt(7)),x.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class rn extends or{constructor(f){super();let m=f==null?null:f.get(G.POSSIBLE_FORMATS),x=[];n(m)?(x.push(new At),x.push(new It),x.push(new er),x.push(new Er)):(m.indexOf(se.EAN_13)>-1&&x.push(new At),m.indexOf(se.UPC_A)>-1&&x.push(new It),m.indexOf(se.EAN_8)>-1&&x.push(new er),m.indexOf(se.UPC_E)>-1&&x.push(new Er)),this.readers=x}decodeRow(f,m,x){for(let v of this.readers)try{const y=v.decodeRow(f,m,x),E=y.getBarcodeFormat()===se.EAN_13&&y.getText().charAt(0)==="0",k=x==null?null:x.get(G.POSSIBLE_FORMATS),L=k==null||k.includes(se.UPC_A);if(E&&L){const q=y.getRawBytes(),Q=new X(y.getText().substring(1),q,q?q.length:null,y.getResultPoints(),se.UPC_A);return Q.putAllMetadata(y.getResultMetadata()),Q}return y}catch{}throw new Z}reset(){for(let f of this.readers)f.reset()}}class Qr extends or{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(f,m){for(let x=0;x<m.length;x++)if(or.patternMatchVariance(f,m[x],Qr.MAX_INDIVIDUAL_VARIANCE)<Qr.MAX_AVG_VARIANCE)return x;throw new Z}static count(f){return et.sum(new Int32Array(f))}static increment(f,m){let x=0,v=m[0];for(let y=1;y<f.length;y++)m[y]>v&&(v=m[y],x=y);f[x]++}static decrement(f,m){let x=0,v=m[0];for(let y=1;y<f.length;y++)m[y]<v&&(v=m[y],x=y);f[x]--}static isFinderPattern(f){let m=f[0]+f[1],x=m+f[2]+f[3],v=m/x;if(v>=Qr.MIN_FINDER_PATTERN_RATIO&&v<=Qr.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let k of f)k>E&&(E=k),k<y&&(y=k);return E<10*y}return!1}}Qr.MAX_AVG_VARIANCE=.2,Qr.MAX_INDIVIDUAL_VARIANCE=.45,Qr.MIN_FINDER_PATTERN_RATIO=9.5/12,Qr.MAX_FINDER_PATTERN_RATIO=12.5/14;class En{constructor(f,m){this.value=f,this.checksumPortion=m}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(f){if(!(f instanceof En))return!1;const m=f;return this.value===m.value&&this.checksumPortion===m.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fr{constructor(f,m,x,v,y){this.value=f,this.startEnd=m,this.value=f,this.startEnd=m,this.resultPoints=new Array,this.resultPoints.push(new Ve(x,y)),this.resultPoints.push(new Ve(v,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(f){if(!(f instanceof fr))return!1;const m=f;return this.value===m.value}hashCode(){return this.value}}class nn{constructor(){}static getRSSvalue(f,m,x){let v=0;for(let L of f)v+=L;let y=0,E=0,k=f.length;for(let L=0;L<k-1;L++){let q;for(q=1,E|=1<<L;q<f[L];q++,E&=~(1<<L)){let Q=nn.combins(v-q-1,k-L-2);if(x&&E===0&&v-q-(k-L-1)>=k-L-1&&(Q-=nn.combins(v-q-(k-L),k-L-2)),k-L-1>1){let le=0;for(let fe=v-q-(k-L-2);fe>m;fe--)le+=nn.combins(v-q-fe-1,k-L-3);Q-=le*(k-1-L)}else v-q>m&&Q--;y+=Q}v-=q}return y}static combins(f,m){let x,v;f-m>m?(v=m,x=f-m):(v=f-m,x=m);let y=1,E=1;for(let k=f;k>x;k--)y*=k,E<=v&&(y/=E,E++);for(;E<=v;)y/=E,E++;return y}}class ea{static buildBitArray(f){let m=f.length*2-1;f[f.length-1].getRightChar()==null&&(m-=1);let x=12*m,v=new P(x),y=0,k=f[0].getRightChar().getValue();for(let L=11;L>=0;--L)k&1<<L&&v.set(y),y++;for(let L=1;L<f.length;++L){let q=f[L],Q=q.getLeftChar().getValue();for(let le=11;le>=0;--le)Q&1<<le&&v.set(y),y++;if(q.getRightChar()!=null){let le=q.getRightChar().getValue();for(let fe=11;fe>=0;--fe)le&1<<fe&&v.set(y),y++}}return v}}class on{constructor(f,m){m?this.decodedInformation=null:(this.finished=f,this.decodedInformation=m)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class In{constructor(f){this.newPosition=f}getNewPosition(){return this.newPosition}}class qr extends In{constructor(f,m){super(f),this.value=m}getValue(){return this.value}isFNC1(){return this.value===qr.FNC1}}qr.FNC1="$";class un extends In{constructor(f,m,x){super(f),x?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=m}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class de extends In{constructor(f,m,x){if(super(f),m<0||m>10||x<0||x>10)throw new O;this.firstDigit=m,this.secondDigit=x}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===de.FNC1}isSecondDigitFNC1(){return this.secondDigit===de.FNC1}isAnyFNC1(){return this.firstDigit===de.FNC1||this.secondDigit===de.FNC1}}de.FNC1=10;class pe{constructor(){}static parseFieldsInGeneralPurpose(f){if(!f)return null;if(f.length<2)throw new Z;let m=f.substring(0,2);for(let y of pe.TWO_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(2,y[2],f):pe.processFixedAI(2,y[1],f);if(f.length<3)throw new Z;let x=f.substring(0,3);for(let y of pe.THREE_DIGIT_DATA_LENGTH)if(y[0]===x)return y[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(3,y[2],f):pe.processFixedAI(3,y[1],f);for(let y of pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===x)return y[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,y[2],f):pe.processFixedAI(4,y[1],f);if(f.length<4)throw new Z;let v=f.substring(0,4);for(let y of pe.FOUR_DIGIT_DATA_LENGTH)if(y[0]===v)return y[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,y[2],f):pe.processFixedAI(4,y[1],f);throw new Z}static processFixedAI(f,m,x){if(x.length<f)throw new Z;let v=x.substring(0,f);if(x.length<f+m)throw new Z;let y=x.substring(f,f+m),E=x.substring(f+m),k="("+v+")"+y,L=pe.parseFieldsInGeneralPurpose(E);return L==null?k:k+L}static processVariableAI(f,m,x){let v=x.substring(0,f),y;x.length<f+m?y=x.length:y=f+m;let E=x.substring(f,y),k=x.substring(y),L="("+v+")"+E,q=pe.parseFieldsInGeneralPurpose(k);return q==null?L:L+q}}pe.VARIABLE_LENGTH=[],pe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",pe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",pe.VARIABLE_LENGTH,20],["22",pe.VARIABLE_LENGTH,29],["30",pe.VARIABLE_LENGTH,8],["37",pe.VARIABLE_LENGTH,8],["90",pe.VARIABLE_LENGTH,30],["91",pe.VARIABLE_LENGTH,30],["92",pe.VARIABLE_LENGTH,30],["93",pe.VARIABLE_LENGTH,30],["94",pe.VARIABLE_LENGTH,30],["95",pe.VARIABLE_LENGTH,30],["96",pe.VARIABLE_LENGTH,30],["97",pe.VARIABLE_LENGTH,3],["98",pe.VARIABLE_LENGTH,30],["99",pe.VARIABLE_LENGTH,30]],pe.THREE_DIGIT_DATA_LENGTH=[["240",pe.VARIABLE_LENGTH,30],["241",pe.VARIABLE_LENGTH,30],["242",pe.VARIABLE_LENGTH,6],["250",pe.VARIABLE_LENGTH,30],["251",pe.VARIABLE_LENGTH,30],["253",pe.VARIABLE_LENGTH,17],["254",pe.VARIABLE_LENGTH,20],["400",pe.VARIABLE_LENGTH,30],["401",pe.VARIABLE_LENGTH,30],["402",17],["403",pe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",pe.VARIABLE_LENGTH,20],["421",pe.VARIABLE_LENGTH,15],["422",3],["423",pe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",pe.VARIABLE_LENGTH,15],["391",pe.VARIABLE_LENGTH,18],["392",pe.VARIABLE_LENGTH,15],["393",pe.VARIABLE_LENGTH,18],["703",pe.VARIABLE_LENGTH,30]],pe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",pe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",pe.VARIABLE_LENGTH,20],["8003",pe.VARIABLE_LENGTH,30],["8004",pe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",pe.VARIABLE_LENGTH,30],["8008",pe.VARIABLE_LENGTH,12],["8018",18],["8020",pe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",pe.VARIABLE_LENGTH,70],["8200",pe.VARIABLE_LENGTH,70]];class _e{constructor(f){this.buffer=new F,this.information=f}decodeAllCodes(f,m){let x=m,v=null;do{let y=this.decodeGeneralPurposeField(x,v),E=pe.parseFieldsInGeneralPurpose(y.getNewString());if(E!=null&&f.append(E),y.isRemaining()?v=""+y.getRemainingValue():v=null,x===y.getNewPosition())break;x=y.getNewPosition()}while(!0);return f.toString()}isStillNumeric(f){if(f+7>this.information.getSize())return f+4<=this.information.getSize();for(let m=f;m<f+3;++m)if(this.information.get(m))return!0;return this.information.get(f+3)}decodeNumeric(f){if(f+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(f,4);return y===0?new de(this.information.getSize(),de.FNC1,de.FNC1):new de(this.information.getSize(),y-1,de.FNC1)}let m=this.extractNumericValueFromBitArray(f,7),x=(m-8)/11,v=(m-8)%11;return new de(f+7,x,v)}extractNumericValueFromBitArray(f,m){return _e.extractNumericValueFromBitArray(this.information,f,m)}static extractNumericValueFromBitArray(f,m,x){let v=0;for(let y=0;y<x;++y)f.get(m+y)&&(v|=1<<x-y-1);return v}decodeGeneralPurposeField(f,m){this.buffer.setLengthToZero(),m!=null&&this.buffer.append(m),this.current.setPosition(f);let x=this.parseBlocks();return x!=null&&x.isRemaining()?new un(this.current.getPosition(),this.buffer.toString(),x.getRemainingValue()):new un(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let f,m;do{let x=this.current.getPosition();if(this.current.isAlpha()?(m=this.parseAlphaBlock(),f=m.isFinished()):this.current.isIsoIec646()?(m=this.parseIsoIec646Block(),f=m.isFinished()):(m=this.parseNumericBlock(),f=m.isFinished()),!(x!==this.current.getPosition())&&!f)break}while(!f);return m.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let f=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFirstDigitFNC1()){let m;return f.isSecondDigitFNC1()?m=new un(this.current.getPosition(),this.buffer.toString()):m=new un(this.current.getPosition(),this.buffer.toString(),f.getSecondDigit()),new on(!0,m)}if(this.buffer.append(f.getFirstDigit()),f.isSecondDigitFNC1()){let m=new un(this.current.getPosition(),this.buffer.toString());return new on(!0,m)}this.buffer.append(f.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new on(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let f=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFNC1()){let m=new un(this.current.getPosition(),this.buffer.toString());return new on(!0,m)}this.buffer.append(f.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new on(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let f=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFNC1()){let m=new un(this.current.getPosition(),this.buffer.toString());return new on(!0,m)}this.buffer.append(f.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new on(!1)}isStillIsoIec646(f){if(f+5>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(f,5);if(m>=5&&m<16)return!0;if(f+7>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(f,7);if(x>=64&&x<116)return!0;if(f+8>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(f,8);return v>=232&&v<253}decodeIsoIec646(f){let m=this.extractNumericValueFromBitArray(f,5);if(m===15)return new qr(f+5,qr.FNC1);if(m>=5&&m<15)return new qr(f+5,"0"+(m-5));let x=this.extractNumericValueFromBitArray(f,7);if(x>=64&&x<90)return new qr(f+7,""+(x+1));if(x>=90&&x<116)return new qr(f+7,""+(x+7));let v=this.extractNumericValueFromBitArray(f,8),y;switch(v){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new O}return new qr(f+8,y)}isStillAlpha(f){if(f+5>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(f,5);if(m>=5&&m<16)return!0;if(f+6>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(f,6);return x>=16&&x<63}decodeAlphanumeric(f){let m=this.extractNumericValueFromBitArray(f,5);if(m===15)return new qr(f+5,qr.FNC1);if(m>=5&&m<15)return new qr(f+5,"0"+(m-5));let x=this.extractNumericValueFromBitArray(f,6);if(x>=32&&x<58)return new qr(f+6,""+(x+33));let v;switch(x){case 58:v="*";break;case 59:v=",";break;case 60:v="-";break;case 61:v=".";break;case 62:v="/";break;default:throw new be("Decoding invalid alphanumeric value: "+x)}return new qr(f+6,v)}isAlphaTo646ToAlphaLatch(f){if(f+1>this.information.getSize())return!1;for(let m=0;m<5&&m+f<this.information.getSize();++m)if(m===2){if(!this.information.get(f+2))return!1}else if(this.information.get(f+m))return!1;return!0}isAlphaOr646ToNumericLatch(f){if(f+3>this.information.getSize())return!1;for(let m=f;m<f+3;++m)if(this.information.get(m))return!1;return!0}isNumericToAlphaNumericLatch(f){if(f+1>this.information.getSize())return!1;for(let m=0;m<4&&m+f<this.information.getSize();++m)if(this.information.get(f+m))return!1;return!0}}class Se{constructor(f){this.information=f,this.generalDecoder=new _e(f)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Te extends Se{constructor(f){super(f)}encodeCompressedGtin(f,m){f.append("(01)");let x=f.length();f.append("9"),this.encodeCompressedGtinWithoutAI(f,m,x)}encodeCompressedGtinWithoutAI(f,m,x){for(let v=0;v<4;++v){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(m+10*v,10);y/100===0&&f.append("0"),y/10===0&&f.append("0"),f.append(y)}Te.appendCheckDigit(f,x)}static appendCheckDigit(f,m){let x=0;for(let v=0;v<13;v++){let y=f.charAt(v+m).charCodeAt(0)-48;x+=v&1?y:3*y}x=10-x%10,x===10&&(x=0),f.append(x)}}Te.GTIN_SIZE=40;class Pe extends Te{constructor(f){super(f)}parseInformation(){let f=new F;f.append("(01)");let m=f.length(),x=this.getGeneralDecoder().extractNumericValueFromBitArray(Pe.HEADER_SIZE,4);return f.append(x),this.encodeCompressedGtinWithoutAI(f,Pe.HEADER_SIZE+4,m),this.getGeneralDecoder().decodeAllCodes(f,Pe.HEADER_SIZE+44)}}Pe.HEADER_SIZE=4;class tt extends Se{constructor(f){super(f)}parseInformation(){let f=new F;return this.getGeneralDecoder().decodeAllCodes(f,tt.HEADER_SIZE)}}tt.HEADER_SIZE=5;class jt extends Te{constructor(f){super(f)}encodeCompressedWeight(f,m,x){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(m,x);this.addWeightCode(f,v);let y=this.checkWeight(v),E=1e5;for(let k=0;k<5;++k)y/E===0&&f.append("0"),E/=10;f.append(y)}}class st extends jt{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()!=st.HEADER_SIZE+jt.GTIN_SIZE+st.WEIGHT_SIZE)throw new Z;let f=new F;return this.encodeCompressedGtin(f,st.HEADER_SIZE),this.encodeCompressedWeight(f,st.HEADER_SIZE+jt.GTIN_SIZE,st.WEIGHT_SIZE),f.toString()}}st.HEADER_SIZE=5,st.WEIGHT_SIZE=15;class Ae extends st{constructor(f){super(f)}addWeightCode(f,m){f.append("(3103)")}checkWeight(f){return f}}class Ge extends st{constructor(f){super(f)}addWeightCode(f,m){m<1e4?f.append("(3202)"):f.append("(3203)")}checkWeight(f){return f<1e4?f:f-1e4}}class ct extends Te{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()<ct.HEADER_SIZE+Te.GTIN_SIZE)throw new Z;let f=new F;this.encodeCompressedGtin(f,ct.HEADER_SIZE);let m=this.getGeneralDecoder().extractNumericValueFromBitArray(ct.HEADER_SIZE+Te.GTIN_SIZE,ct.LAST_DIGIT_SIZE);f.append("(392"),f.append(m),f.append(")");let x=this.getGeneralDecoder().decodeGeneralPurposeField(ct.HEADER_SIZE+Te.GTIN_SIZE+ct.LAST_DIGIT_SIZE,null);return f.append(x.getNewString()),f.toString()}}ct.HEADER_SIZE=8,ct.LAST_DIGIT_SIZE=2;class St extends Te{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()<St.HEADER_SIZE+Te.GTIN_SIZE)throw new Z;let f=new F;this.encodeCompressedGtin(f,St.HEADER_SIZE);let m=this.getGeneralDecoder().extractNumericValueFromBitArray(St.HEADER_SIZE+Te.GTIN_SIZE,St.LAST_DIGIT_SIZE);f.append("(393"),f.append(m),f.append(")");let x=this.getGeneralDecoder().extractNumericValueFromBitArray(St.HEADER_SIZE+Te.GTIN_SIZE+St.LAST_DIGIT_SIZE,St.FIRST_THREE_DIGITS_SIZE);x/100==0&&f.append("0"),x/10==0&&f.append("0"),f.append(x);let v=this.getGeneralDecoder().decodeGeneralPurposeField(St.HEADER_SIZE+Te.GTIN_SIZE+St.LAST_DIGIT_SIZE+St.FIRST_THREE_DIGITS_SIZE,null);return f.append(v.getNewString()),f.toString()}}St.HEADER_SIZE=8,St.LAST_DIGIT_SIZE=2,St.FIRST_THREE_DIGITS_SIZE=10;class xt extends jt{constructor(f,m,x){super(f),this.dateCode=x,this.firstAIdigits=m}parseInformation(){if(this.getInformation().getSize()!=xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE+xt.DATE_SIZE)throw new Z;let f=new F;return this.encodeCompressedGtin(f,xt.HEADER_SIZE),this.encodeCompressedWeight(f,xt.HEADER_SIZE+xt.GTIN_SIZE,xt.WEIGHT_SIZE),this.encodeCompressedDate(f,xt.HEADER_SIZE+xt.GTIN_SIZE+xt.WEIGHT_SIZE),f.toString()}encodeCompressedDate(f,m){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(m,xt.DATE_SIZE);if(x==38400)return;f.append("("),f.append(this.dateCode),f.append(")");let v=x%32;x/=32;let y=x%12+1;x/=12;let E=x;E/10==0&&f.append("0"),f.append(E),y/10==0&&f.append("0"),f.append(y),v/10==0&&f.append("0"),f.append(v)}addWeightCode(f,m){f.append("("),f.append(this.firstAIdigits),f.append(m/1e5),f.append(")")}checkWeight(f){return f%1e5}}xt.HEADER_SIZE=8,xt.WEIGHT_SIZE=20,xt.DATE_SIZE=16;function Ct(oe){try{if(oe.get(1))return new Pe(oe);if(!oe.get(2))return new tt(oe);switch(_e.extractNumericValueFromBitArray(oe,1,4)){case 4:return new Ae(oe);case 5:return new Ge(oe)}switch(_e.extractNumericValueFromBitArray(oe,1,5)){case 12:return new ct(oe);case 13:return new St(oe)}switch(_e.extractNumericValueFromBitArray(oe,1,7)){case 56:return new xt(oe,"310","11");case 57:return new xt(oe,"320","11");case 58:return new xt(oe,"310","13");case 59:return new xt(oe,"320","13");case 60:return new xt(oe,"310","15");case 61:return new xt(oe,"320","15");case 62:return new xt(oe,"310","17");case 63:return new xt(oe,"320","17")}}catch(f){throw console.log(f),new be("unknown decoder: "+oe)}}class Xt{constructor(f,m,x,v){this.leftchar=f,this.rightchar=m,this.finderpattern=x,this.maybeLast=v}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(f,m){return f instanceof Xt?Xt.equalsOrNull(f.leftchar,m.leftchar)&&Xt.equalsOrNull(f.rightchar,m.rightchar)&&Xt.equalsOrNull(f.finderpattern,m.finderpattern):!1}static equalsOrNull(f,m){return f===null?m===null:Xt.equals(f,m)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class br{constructor(f,m,x){this.pairs=f,this.rowNumber=m,this.wasReversed=x}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(f){return this.checkEqualitity(this,f)}toString(){return"{ "+this.pairs+" }"}equals(f,m){return f instanceof br?this.checkEqualitity(f,m)&&f.wasReversed===m.wasReversed:!1}checkEqualitity(f,m){if(!f||!m)return;let x;return f.forEach((v,y)=>{m.forEach(E=>{v.getLeftChar().getValue()===E.getLeftChar().getValue()&&v.getRightChar().getValue()===E.getRightChar().getValue()&&v.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(x=!0)})}),x}}class _t extends Qr{constructor(f){super(...arguments),this.pairs=new Array(_t.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=f===!0}decodeRow(f,m,x){this.pairs.length=0,this.startFromEven=!1;try{return _t.constructResult(this.decodeRow2pairs(f,m))}catch(v){this.verbose&&console.log(v)}return this.pairs.length=0,this.startFromEven=!0,_t.constructResult(this.decodeRow2pairs(f,m))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(f,m){let x=!1;for(;!x;)try{this.pairs.push(this.retrieveNextPair(m,this.pairs,f))}catch(y){if(y instanceof Z){if(!this.pairs.length)throw new Z;x=!0}}if(this.checkChecksum())return this.pairs;let v;if(this.rows.length?v=!0:v=!1,this.storeRow(f,!1),v){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new Z}checkRowsBoolean(f){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,f&&(this.rows=this.rows.reverse());let m=null;try{m=this.checkRows(new Array,0)}catch(x){this.verbose&&console.log(x)}return f&&(this.rows=this.rows.reverse()),m}checkRows(f,m){for(let x=m;x<this.rows.length;x++){let v=this.rows[x];this.pairs.length=0;for(let E of f)this.pairs.push(E.getPairs());if(this.pairs.push(v.getPairs()),!_t.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(f);y.push(v);try{return this.checkRows(y,x+1)}catch(E){this.verbose&&console.log(E)}}throw new Z}static isValidSequence(f){for(let m of _t.FINDER_PATTERN_SEQUENCES){if(f.length>m.length)continue;let x=!0;for(let v=0;v<f.length;v++)if(f[v].getFinderPattern().getValue()!=m[v]){x=!1;break}if(x)return!0}return!1}storeRow(f,m){let x=0,v=!1,y=!1;for(;x<this.rows.length;){let E=this.rows[x];if(E.getRowNumber()>f){y=E.isEquivalent(this.pairs);break}v=E.isEquivalent(this.pairs),x++}y||v||_t.isPartialRow(this.pairs,this.rows)||(this.rows.push(x,new br(this.pairs,f,m)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(f,m){for(let x of m)if(x.getPairs().length!==f.length){for(let v of x.getPairs())for(let y of f)if(Xt.equals(v,y))break}}static isPartialRow(f,m){for(let x of m){let v=!0;for(let y of f){let E=!1;for(let k of x.getPairs())if(y.equals(k)){E=!0;break}if(!E){v=!1;break}}if(v)return!0}return!1}getRows(){return this.rows}static constructResult(f){let m=ea.buildBitArray(f),v=Ct(m).parseInformation(),y=f[0].getFinderPattern().getResultPoints(),E=f[f.length-1].getFinderPattern().getResultPoints(),k=[y[0],y[1],E[0],E[1]];return new X(v,null,null,k,se.RSS_EXPANDED,null)}checkChecksum(){let f=this.pairs.get(0),m=f.getLeftChar(),x=f.getRightChar();if(x==null)return!1;let v=x.getChecksumPortion(),y=2;for(let k=1;k<this.pairs.size();++k){let L=this.pairs.get(k);v+=L.getLeftChar().getChecksumPortion(),y++;let q=L.getRightChar();q!=null&&(v+=q.getChecksumPortion(),y++)}return v%=211,211*(y-4)+v==m.getValue()}static getNextSecondBar(f,m){let x;return f.get(m)?(x=f.getNextUnset(m),x=f.getNextSet(x)):(x=f.getNextSet(m),x=f.getNextUnset(x)),x}retrieveNextPair(f,m,x){let v=m.length%2==0;this.startFromEven&&(v=!v);let y,E=!0,k=-1;do this.findNextPair(f,m,k),y=this.parseFoundFinderPattern(f,x,v),y==null?k=_t.getNextSecondBar(f,this.startEnd[0]):E=!1;while(E);let L=this.decodeDataCharacter(f,y,v,!0);if(!this.isEmptyPair(m)&&m[m.length-1].mustBeLast())throw new Z;let q;try{q=this.decodeDataCharacter(f,y,v,!1)}catch(Q){q=null,this.verbose&&console.log(Q)}return new Xt(L,q,y,!0)}isEmptyPair(f){return f.length===0}findNextPair(f,m,x){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E;x>=0?E=x:this.isEmptyPair(m)?E=0:E=m[m.length-1].getFinderPattern().getStartEnd()[1];let k=m.length%2!=0;this.startFromEven&&(k=!k);let L=!1;for(;E<y&&(L=!f.get(E),!!L);)E++;let q=0,Q=E;for(let le=E;le<y;le++)if(f.get(le)!=L)v[q]++;else{if(q==3){if(k&&_t.reverseCounters(v),_t.isFinderPattern(v)){this.startEnd[0]=Q,this.startEnd[1]=le;return}k&&_t.reverseCounters(v),Q+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,q--}else q++;v[q]=1,L=!L}throw new Z}static reverseCounters(f){let m=f.length;for(let x=0;x<m/2;++x){let v=f[x];f[x]=f[m-x-1],f[m-x-1]=v}}parseFoundFinderPattern(f,m,x){let v,y,E;if(x){let q=this.startEnd[0]-1;for(;q>=0&&!f.get(q);)q--;q++,v=this.startEnd[0]-q,y=q,E=this.startEnd[1]}else y=this.startEnd[0],E=f.getNextUnset(this.startEnd[1]+1),v=E-this.startEnd[1];let k=this.getDecodeFinderCounters();w.arraycopy(k,0,k,1,k.length-1),k[0]=v;let L;try{L=this.parseFinderValue(k,_t.FINDER_PATTERNS)}catch{return null}return new fr(L,[y,E],y,E,m)}decodeDataCharacter(f,m,x,v){let y=this.getDataCharacterCounters();for(let ga=0;ga<y.length;ga++)y[ga]=0;if(v)_t.recordPatternInReverse(f,m.getStartEnd()[0],y);else{_t.recordPattern(f,m.getStartEnd()[1],y);for(let ga=0,ci=y.length-1;ga<ci;ga++,ci--){let Po=y[ga];y[ga]=y[ci],y[ci]=Po}}let E=17,k=et.sum(new Int32Array(y))/E,L=(m.getStartEnd()[1]-m.getStartEnd()[0])/15;if(Math.abs(k-L)/L>.3)throw new Z;let q=this.getOddCounts(),Q=this.getEvenCounts(),le=this.getOddRoundingErrors(),fe=this.getEvenRoundingErrors();for(let ga=0;ga<y.length;ga++){let ci=1*y[ga]/k,Po=ci+.5;if(Po<1){if(ci<.3)throw new Z;Po=1}else if(Po>8){if(ci>8.7)throw new Z;Po=8}let lf=ga/2;ga&1?(Q[lf]=Po,fe[lf]=ci-Po):(q[lf]=Po,le[lf]=ci-Po)}this.adjustOddEvenCounts(E);let Re=4*m.getValue()+(x?0:2)+(v?0:1)-1,$e=0,Ke=0;for(let ga=q.length-1;ga>=0;ga--){if(_t.isNotA1left(m,x,v)){let ci=_t.WEIGHTS[Re][2*ga];Ke+=q[ga]*ci}$e+=q[ga]}let ot=0;for(let ga=Q.length-1;ga>=0;ga--)if(_t.isNotA1left(m,x,v)){let ci=_t.WEIGHTS[Re][2*ga+1];ot+=Q[ga]*ci}let Nt=Ke+ot;if($e&1||$e>13||$e<4)throw new Z;let zt=(13-$e)/2,Gt=_t.SYMBOL_WIDEST[zt],$t=9-Gt,Wr=nn.getRSSvalue(q,Gt,!0),tn=nn.getRSSvalue(Q,$t,!1),li=_t.EVEN_TOTAL_SUBSET[zt],Gi=_t.GSUM[zt],Ti=Wr*li+tn+Gi;return new En(Ti,Nt)}static isNotA1left(f,m,x){return!(f.getValue()==0&&m&&x)}adjustOddEvenCounts(f){let m=et.sum(new Int32Array(this.getOddCounts())),x=et.sum(new Int32Array(this.getEvenCounts())),v=!1,y=!1;m>13?y=!0:m<4&&(v=!0);let E=!1,k=!1;x>13?k=!0:x<4&&(E=!0);let L=m+x-f,q=(m&1)==1,Q=(x&1)==0;if(L==1)if(q){if(Q)throw new Z;y=!0}else{if(!Q)throw new Z;k=!0}else if(L==-1)if(q){if(Q)throw new Z;v=!0}else{if(!Q)throw new Z;E=!0}else if(L==0){if(q){if(!Q)throw new Z;m<x?(v=!0,k=!0):(y=!0,E=!0)}else if(Q)throw new Z}else throw new Z;if(v){if(y)throw new Z;_t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&_t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(k)throw new Z;_t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}k&&_t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}_t.SYMBOL_WIDEST=[7,5,4,3,1],_t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],_t.GSUM=[0,348,1388,2948,3988],_t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],_t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],_t.FINDER_PAT_A=0,_t.FINDER_PAT_B=1,_t.FINDER_PAT_C=2,_t.FINDER_PAT_D=3,_t.FINDER_PAT_E=4,_t.FINDER_PAT_F=5,_t.FINDER_PATTERN_SEQUENCES=[[_t.FINDER_PAT_A,_t.FINDER_PAT_A],[_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B],[_t.FINDER_PAT_A,_t.FINDER_PAT_C,_t.FINDER_PAT_B,_t.FINDER_PAT_D],[_t.FINDER_PAT_A,_t.FINDER_PAT_E,_t.FINDER_PAT_B,_t.FINDER_PAT_D,_t.FINDER_PAT_C],[_t.FINDER_PAT_A,_t.FINDER_PAT_E,_t.FINDER_PAT_B,_t.FINDER_PAT_D,_t.FINDER_PAT_D,_t.FINDER_PAT_F],[_t.FINDER_PAT_A,_t.FINDER_PAT_E,_t.FINDER_PAT_B,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_F,_t.FINDER_PAT_F],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_D],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_E],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_F,_t.FINDER_PAT_F],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_E,_t.FINDER_PAT_F,_t.FINDER_PAT_F]],_t.MAX_PAIRS=11;class Yr extends En{constructor(f,m,x){super(f,m),this.count=0,this.finderPattern=x}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Gr extends Qr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(f,m,x){const v=this.decodePair(m,!1,f,x);Gr.addOrTally(this.possibleLeftPairs,v),m.reverse();let y=this.decodePair(m,!0,f,x);Gr.addOrTally(this.possibleRightPairs,y),m.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let k of this.possibleRightPairs)if(k.getCount()>1&&Gr.checkChecksum(E,k))return Gr.constructResult(E,k)}throw new Z}static addOrTally(f,m){if(m==null)return;let x=!1;for(let v of f)if(v.getValue()===m.getValue()){v.incrementCount(),x=!0;break}x||f.push(m)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(f,m){let x=4537077*f.getValue()+m.getValue(),v=new String(x).toString(),y=new F;for(let q=13-v.length;q>0;q--)y.append("0");y.append(v);let E=0;for(let q=0;q<13;q++){let Q=y.charAt(q).charCodeAt(0)-48;E+=q&1?Q:3*Q}E=10-E%10,E===10&&(E=0),y.append(E.toString());let k=f.getFinderPattern().getResultPoints(),L=m.getFinderPattern().getResultPoints();return new X(y.toString(),null,0,[k[0],k[1],L[0],L[1]],se.RSS_14,new Date().getTime())}static checkChecksum(f,m){let x=(f.getChecksumPortion()+16*m.getChecksumPortion())%79,v=9*f.getFinderPattern().getValue()+m.getFinderPattern().getValue();return v>72&&v--,v>8&&v--,x===v}decodePair(f,m,x,v){try{let y=this.findFinderPattern(f,m),E=this.parseFoundFinderPattern(f,x,m,y),k=v==null?null:v.get(G.NEED_RESULT_POINT_CALLBACK);if(k!=null){let Q=(y[0]+y[1])/2;m&&(Q=f.getSize()-1-Q),k.foundPossibleResultPoint(new Ve(Q,x))}let L=this.decodeDataCharacter(f,E,!0),q=this.decodeDataCharacter(f,E,!1);return new Yr(1597*L.getValue()+q.getValue(),L.getChecksumPortion()+4*q.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(f,m,x){let v=this.getDataCharacterCounters();for(let ot=0;ot<v.length;ot++)v[ot]=0;if(x)or.recordPatternInReverse(f,m.getStartEnd()[0],v);else{or.recordPattern(f,m.getStartEnd()[1]+1,v);for(let ot=0,Nt=v.length-1;ot<Nt;ot++,Nt--){let zt=v[ot];v[ot]=v[Nt],v[Nt]=zt}}let y=x?16:15,E=et.sum(new Int32Array(v))/y,k=this.getOddCounts(),L=this.getEvenCounts(),q=this.getOddRoundingErrors(),Q=this.getEvenRoundingErrors();for(let ot=0;ot<v.length;ot++){let Nt=v[ot]/E,zt=Math.floor(Nt+.5);zt<1?zt=1:zt>8&&(zt=8);let Gt=Math.floor(ot/2);ot&1?(L[Gt]=zt,Q[Gt]=Nt-zt):(k[Gt]=zt,q[Gt]=Nt-zt)}this.adjustOddEvenCounts(x,y);let le=0,fe=0;for(let ot=k.length-1;ot>=0;ot--)fe*=9,fe+=k[ot],le+=k[ot];let Re=0,$e=0;for(let ot=L.length-1;ot>=0;ot--)Re*=9,Re+=L[ot],$e+=L[ot];let Ke=fe+3*Re;if(x){if(le&1||le>12||le<4)throw new Z;let ot=(12-le)/2,Nt=Gr.OUTSIDE_ODD_WIDEST[ot],zt=9-Nt,Gt=nn.getRSSvalue(k,Nt,!1),$t=nn.getRSSvalue(L,zt,!0),Wr=Gr.OUTSIDE_EVEN_TOTAL_SUBSET[ot],tn=Gr.OUTSIDE_GSUM[ot];return new En(Gt*Wr+$t+tn,Ke)}else{if($e&1||$e>10||$e<4)throw new Z;let ot=(10-$e)/2,Nt=Gr.INSIDE_ODD_WIDEST[ot],zt=9-Nt,Gt=nn.getRSSvalue(k,Nt,!0),$t=nn.getRSSvalue(L,zt,!1),Wr=Gr.INSIDE_ODD_TOTAL_SUBSET[ot],tn=Gr.INSIDE_GSUM[ot];return new En($t*Wr+Gt+tn,Ke)}}findFinderPattern(f,m){let x=this.getDecodeFinderCounters();x[0]=0,x[1]=0,x[2]=0,x[3]=0;let v=f.getSize(),y=!1,E=0;for(;E<v&&(y=!f.get(E),m!==y);)E++;let k=0,L=E;for(let q=E;q<v;q++)if(f.get(q)!==y)x[k]++;else{if(k===3){if(Qr.isFinderPattern(x))return[L,q];L+=x[0]+x[1],x[0]=x[2],x[1]=x[3],x[2]=0,x[3]=0,k--}else k++;x[k]=1,y=!y}throw new Z}parseFoundFinderPattern(f,m,x,v){let y=f.get(v[0]),E=v[0]-1;for(;E>=0&&y!==f.get(E);)E--;E++;const k=v[0]-E,L=this.getDecodeFinderCounters(),q=new Int32Array(L.length);w.arraycopy(L,0,q,1,L.length-1),q[0]=k;const Q=this.parseFinderValue(q,Gr.FINDER_PATTERNS);let le=E,fe=v[1];return x&&(le=f.getSize()-1-le,fe=f.getSize()-1-fe),new fr(Q,[E,v[1]],le,fe,m)}adjustOddEvenCounts(f,m){let x=et.sum(new Int32Array(this.getOddCounts())),v=et.sum(new Int32Array(this.getEvenCounts())),y=!1,E=!1,k=!1,L=!1;f?(x>12?E=!0:x<4&&(y=!0),v>12?L=!0:v<4&&(k=!0)):(x>11?E=!0:x<5&&(y=!0),v>10?L=!0:v<4&&(k=!0));let q=x+v-m,Q=(x&1)===(f?1:0),le=(v&1)===1;if(q===1)if(Q){if(le)throw new Z;E=!0}else{if(!le)throw new Z;L=!0}else if(q===-1)if(Q){if(le)throw new Z;y=!0}else{if(!le)throw new Z;k=!0}else if(q===0){if(Q){if(!le)throw new Z;x<v?(y=!0,L=!0):(E=!0,k=!0)}else if(le)throw new Z}else throw new Z;if(y){if(E)throw new Z;Qr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&Qr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),k){if(L)throw new Z;Qr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}L&&Qr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Gr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Gr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Gr.OUTSIDE_GSUM=[0,161,961,2015,2715],Gr.INSIDE_GSUM=[0,336,1036,1516],Gr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Gr.INSIDE_ODD_WIDEST=[2,4,6,8],Gr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class $a extends or{constructor(f,m){super(),this.readers=[],this.verbose=m===!0;const x=f?f.get(G.POSSIBLE_FORMATS):null,v=f&&f.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;x?((x.includes(se.EAN_13)||x.includes(se.UPC_A)||x.includes(se.EAN_8)||x.includes(se.UPC_E))&&this.readers.push(new rn(f)),x.includes(se.CODE_39)&&this.readers.push(new lr(v)),x.includes(se.CODE_128)&&this.readers.push(new lt),x.includes(se.ITF)&&this.readers.push(new ve),x.includes(se.RSS_14)&&this.readers.push(new Gr),x.includes(se.RSS_EXPANDED)&&this.readers.push(new _t(this.verbose))):(this.readers.push(new rn(f)),this.readers.push(new lr),this.readers.push(new rn(f)),this.readers.push(new lt),this.readers.push(new ve),this.readers.push(new Gr),this.readers.push(new _t(this.verbose)))}decodeRow(f,m,x){for(let v=0;v<this.readers.length;v++)try{return this.readers[v].decodeRow(f,m,x)}catch{}throw new Z}reset(){this.readers.forEach(f=>f.reset())}}class ws extends Y{constructor(f=500,m){super(new $a(m),f,m)}}class hn{constructor(f,m,x){this.ecCodewords=f,this.ecBlocks=[m],x&&this.ecBlocks.push(x)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ln{constructor(f,m){this.count=f,this.dataCodewords=m}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class sn{constructor(f,m,x,v,y,E){this.versionNumber=f,this.symbolSizeRows=m,this.symbolSizeColumns=x,this.dataRegionSizeRows=v,this.dataRegionSizeColumns=y,this.ecBlocks=E;let k=0;const L=E.getECCodewords(),q=E.getECBlocks();for(let Q of q)k+=Q.getCount()*(Q.getDataCodewords()+L);this.totalCodewords=k}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(f,m){if(f&1||m&1)throw new O;for(let x of sn.VERSIONS)if(x.symbolSizeRows===f&&x.symbolSizeColumns===m)return x;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new sn(1,10,10,8,8,new hn(5,new ln(1,3))),new sn(2,12,12,10,10,new hn(7,new ln(1,5))),new sn(3,14,14,12,12,new hn(10,new ln(1,8))),new sn(4,16,16,14,14,new hn(12,new ln(1,12))),new sn(5,18,18,16,16,new hn(14,new ln(1,18))),new sn(6,20,20,18,18,new hn(18,new ln(1,22))),new sn(7,22,22,20,20,new hn(20,new ln(1,30))),new sn(8,24,24,22,22,new hn(24,new ln(1,36))),new sn(9,26,26,24,24,new hn(28,new ln(1,44))),new sn(10,32,32,14,14,new hn(36,new ln(1,62))),new sn(11,36,36,16,16,new hn(42,new ln(1,86))),new sn(12,40,40,18,18,new hn(48,new ln(1,114))),new sn(13,44,44,20,20,new hn(56,new ln(1,144))),new sn(14,48,48,22,22,new hn(68,new ln(1,174))),new sn(15,52,52,24,24,new hn(42,new ln(2,102))),new sn(16,64,64,14,14,new hn(56,new ln(2,140))),new sn(17,72,72,16,16,new hn(36,new ln(4,92))),new sn(18,80,80,18,18,new hn(48,new ln(4,114))),new sn(19,88,88,20,20,new hn(56,new ln(4,144))),new sn(20,96,96,22,22,new hn(68,new ln(4,174))),new sn(21,104,104,24,24,new hn(56,new ln(6,136))),new sn(22,120,120,18,18,new hn(68,new ln(6,175))),new sn(23,132,132,20,20,new hn(62,new ln(8,163))),new sn(24,144,144,22,22,new hn(62,new ln(8,156),new ln(2,155))),new sn(25,8,18,6,16,new hn(7,new ln(1,5))),new sn(26,8,32,6,14,new hn(11,new ln(1,10))),new sn(27,12,26,10,24,new hn(14,new ln(1,16))),new sn(28,12,36,10,16,new hn(18,new ln(1,22))),new sn(29,16,36,14,16,new hn(24,new ln(1,32))),new sn(30,16,48,14,22,new hn(28,new ln(1,49)))]}}sn.VERSIONS=sn.buildVersions();class ls{constructor(f){const m=f.getHeight();if(m<8||m>144||m&1)throw new O;this.version=ls.readVersion(f),this.mappingBitMatrix=this.extractDataRegion(f),this.readMappingMatrix=new ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(f){const m=f.getHeight(),x=f.getWidth();return sn.getVersionForDimensions(m,x)}readCodewords(){const f=new Int8Array(this.version.getTotalCodewords());let m=0,x=4,v=0;const y=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let k=!1,L=!1,q=!1,Q=!1;do if(x===y&&v===0&&!k)f[m++]=this.readCorner1(y,E)&255,x-=2,v+=2,k=!0;else if(x===y-2&&v===0&&E&3&&!L)f[m++]=this.readCorner2(y,E)&255,x-=2,v+=2,L=!0;else if(x===y+4&&v===2&&!(E&7)&&!q)f[m++]=this.readCorner3(y,E)&255,x-=2,v+=2,q=!0;else if(x===y-2&&v===0&&(E&7)===4&&!Q)f[m++]=this.readCorner4(y,E)&255,x-=2,v+=2,Q=!0;else{do x<y&&v>=0&&!this.readMappingMatrix.get(v,x)&&(f[m++]=this.readUtah(x,v,y,E)&255),x-=2,v+=2;while(x>=0&&v<E);x+=1,v+=3;do x>=0&&v<E&&!this.readMappingMatrix.get(v,x)&&(f[m++]=this.readUtah(x,v,y,E)&255),x+=2,v-=2;while(x<y&&v>=0);x+=3,v+=1}while(x<y||v<E);if(m!==this.version.getTotalCodewords())throw new O;return f}readModule(f,m,x,v){return f<0&&(f+=x,m+=4-(x+4&7)),m<0&&(m+=v,f+=4-(v+4&7)),this.readMappingMatrix.set(m,f),this.mappingBitMatrix.get(m,f)}readUtah(f,m,x,v){let y=0;return this.readModule(f-2,m-2,x,v)&&(y|=1),y<<=1,this.readModule(f-2,m-1,x,v)&&(y|=1),y<<=1,this.readModule(f-1,m-2,x,v)&&(y|=1),y<<=1,this.readModule(f-1,m-1,x,v)&&(y|=1),y<<=1,this.readModule(f-1,m,x,v)&&(y|=1),y<<=1,this.readModule(f,m-2,x,v)&&(y|=1),y<<=1,this.readModule(f,m-1,x,v)&&(y|=1),y<<=1,this.readModule(f,m,x,v)&&(y|=1),y}readCorner1(f,m){let x=0;return this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,1,f,m)&&(x|=1),x<<=1,this.readModule(f-1,2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x<<=1,this.readModule(2,m-1,f,m)&&(x|=1),x<<=1,this.readModule(3,m-1,f,m)&&(x|=1),x}readCorner2(f,m){let x=0;return this.readModule(f-3,0,f,m)&&(x|=1),x<<=1,this.readModule(f-2,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(0,m-4,f,m)&&(x|=1),x<<=1,this.readModule(0,m-3,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x}readCorner3(f,m){let x=0;return this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,m-1,f,m)&&(x|=1),x<<=1,this.readModule(0,m-3,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-3,f,m)&&(x|=1),x<<=1,this.readModule(1,m-2,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x}readCorner4(f,m){let x=0;return this.readModule(f-3,0,f,m)&&(x|=1),x<<=1,this.readModule(f-2,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x<<=1,this.readModule(2,m-1,f,m)&&(x|=1),x<<=1,this.readModule(3,m-1,f,m)&&(x|=1),x}extractDataRegion(f){const m=this.version.getSymbolSizeRows(),x=this.version.getSymbolSizeColumns();if(f.getHeight()!==m)throw new h("Dimension of bitMatrix must match the version size");const v=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),E=m/v|0,k=x/y|0,L=E*v,q=k*y,Q=new ee(q,L);for(let le=0;le<E;++le){const fe=le*v;for(let Re=0;Re<k;++Re){const $e=Re*y;for(let Ke=0;Ke<v;++Ke){const ot=le*(v+2)+1+Ke,Nt=fe+Ke;for(let zt=0;zt<y;++zt){const Gt=Re*(y+2)+1+zt;if(f.get(Gt,ot)){const $t=$e+zt;Q.set($t,Nt)}}}}}return Q}}class ii{constructor(f,m){this.numDataCodewords=f,this.codewords=m}static getDataBlocks(f,m){const x=m.getECBlocks();let v=0;const y=x.getECBlocks();for(let Ke of y)v+=Ke.getCount();const E=new Array(v);let k=0;for(let Ke of y)for(let ot=0;ot<Ke.getCount();ot++){const Nt=Ke.getDataCodewords(),zt=x.getECCodewords()+Nt;E[k++]=new ii(Nt,new Uint8Array(zt))}const q=E[0].codewords.length-x.getECCodewords(),Q=q-1;let le=0;for(let Ke=0;Ke<Q;Ke++)for(let ot=0;ot<k;ot++)E[ot].codewords[Ke]=f[le++];const fe=m.getVersionNumber()===24,Re=fe?8:k;for(let Ke=0;Ke<Re;Ke++)E[Ke].codewords[q-1]=f[le++];const $e=E[0].codewords.length;for(let Ke=q;Ke<$e;Ke++)for(let ot=0;ot<k;ot++){const Nt=fe?(ot+8)%k:ot,zt=fe&&Nt>7?Ke-1:Ke;E[Nt].codewords[zt]=f[le++]}if(le!==f.length)throw new h;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class On{constructor(f){this.bytes=f,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(f){if(f<1||f>32||f>this.available())throw new h(""+f);let m=0,x=this.bitOffset,v=this.byteOffset;const y=this.bytes;if(x>0){const E=8-x,k=f<E?f:E,L=E-k,q=255>>8-k<<L;m=(y[v]&q)>>L,f-=k,x+=k,x===8&&(x=0,v++)}if(f>0){for(;f>=8;)m=m<<8|y[v]&255,v++,f-=8;if(f>0){const E=8-f,k=255>>E<<E;m=m<<f|(y[v]&k)>>E,x+=f}}return this.bitOffset=x,this.byteOffset=v,m}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Yn;(function(oe){oe[oe.PAD_ENCODE=0]="PAD_ENCODE",oe[oe.ASCII_ENCODE=1]="ASCII_ENCODE",oe[oe.C40_ENCODE=2]="C40_ENCODE",oe[oe.TEXT_ENCODE=3]="TEXT_ENCODE",oe[oe.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",oe[oe.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",oe[oe.BASE256_ENCODE=6]="BASE256_ENCODE"})(Yn||(Yn={}));class Ts{static decode(f){const m=new On(f),x=new F,v=new F,y=new Array;let E=Yn.ASCII_ENCODE;do if(E===Yn.ASCII_ENCODE)E=this.decodeAsciiSegment(m,x,v);else{switch(E){case Yn.C40_ENCODE:this.decodeC40Segment(m,x);break;case Yn.TEXT_ENCODE:this.decodeTextSegment(m,x);break;case Yn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(m,x);break;case Yn.EDIFACT_ENCODE:this.decodeEdifactSegment(m,x);break;case Yn.BASE256_ENCODE:this.decodeBase256Segment(m,x,y);break;default:throw new O}E=Yn.ASCII_ENCODE}while(E!==Yn.PAD_ENCODE&&m.available()>0);return v.length()>0&&x.append(v.toString()),new xe(f,x.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(f,m,x){let v=!1;do{let y=f.readBits(8);if(y===0)throw new O;if(y<=128)return v&&(y+=128),m.append(String.fromCharCode(y-1)),Yn.ASCII_ENCODE;if(y===129)return Yn.PAD_ENCODE;if(y<=229){const E=y-130;E<10&&m.append("0"),m.append(""+E)}else switch(y){case 230:return Yn.C40_ENCODE;case 231:return Yn.BASE256_ENCODE;case 232:m.append("");break;case 233:case 234:break;case 235:v=!0;break;case 236:m.append("[)>05"),x.insert(0,"");break;case 237:m.append("[)>06"),x.insert(0,"");break;case 238:return Yn.ANSIX12_ENCODE;case 239:return Yn.TEXT_ENCODE;case 240:return Yn.EDIFACT_ENCODE;case 241:break;default:if(y!==254||f.available()!==0)throw new O;break}}while(f.available()>0);return Yn.ASCII_ENCODE}static decodeC40Segment(f,m){let x=!1;const v=[];let y=0;do{if(f.available()===8)return;const E=f.readBits(8);if(E===254)return;this.parseTwoBytes(E,f.readBits(8),v);for(let k=0;k<3;k++){const L=v[k];switch(y){case 0:if(L<3)y=L+1;else if(L<this.C40_BASIC_SET_CHARS.length){const q=this.C40_BASIC_SET_CHARS[L];x?(m.append(String.fromCharCode(q.charCodeAt(0)+128)),x=!1):m.append(q)}else throw new O;break;case 1:x?(m.append(String.fromCharCode(L+128)),x=!1):m.append(String.fromCharCode(L)),y=0;break;case 2:if(L<this.C40_SHIFT2_SET_CHARS.length){const q=this.C40_SHIFT2_SET_CHARS[L];x?(m.append(String.fromCharCode(q.charCodeAt(0)+128)),x=!1):m.append(q)}else switch(L){case 27:m.append("");break;case 30:x=!0;break;default:throw new O}y=0;break;case 3:x?(m.append(String.fromCharCode(L+224)),x=!1):m.append(String.fromCharCode(L+96)),y=0;break;default:throw new O}}}while(f.available()>0)}static decodeTextSegment(f,m){let x=!1,v=[],y=0;do{if(f.available()===8)return;const E=f.readBits(8);if(E===254)return;this.parseTwoBytes(E,f.readBits(8),v);for(let k=0;k<3;k++){const L=v[k];switch(y){case 0:if(L<3)y=L+1;else if(L<this.TEXT_BASIC_SET_CHARS.length){const q=this.TEXT_BASIC_SET_CHARS[L];x?(m.append(String.fromCharCode(q.charCodeAt(0)+128)),x=!1):m.append(q)}else throw new O;break;case 1:x?(m.append(String.fromCharCode(L+128)),x=!1):m.append(String.fromCharCode(L)),y=0;break;case 2:if(L<this.TEXT_SHIFT2_SET_CHARS.length){const q=this.TEXT_SHIFT2_SET_CHARS[L];x?(m.append(String.fromCharCode(q.charCodeAt(0)+128)),x=!1):m.append(q)}else switch(L){case 27:m.append("");break;case 30:x=!0;break;default:throw new O}y=0;break;case 3:if(L<this.TEXT_SHIFT3_SET_CHARS.length){const q=this.TEXT_SHIFT3_SET_CHARS[L];x?(m.append(String.fromCharCode(q.charCodeAt(0)+128)),x=!1):m.append(q),y=0}else throw new O;break;default:throw new O}}}while(f.available()>0)}static decodeAnsiX12Segment(f,m){const x=[];do{if(f.available()===8)return;const v=f.readBits(8);if(v===254)return;this.parseTwoBytes(v,f.readBits(8),x);for(let y=0;y<3;y++){const E=x[y];switch(E){case 0:m.append("\r");break;case 1:m.append("*");break;case 2:m.append(">");break;case 3:m.append(" ");break;default:if(E<14)m.append(String.fromCharCode(E+44));else if(E<40)m.append(String.fromCharCode(E+51));else throw new O;break}}}while(f.available()>0)}static parseTwoBytes(f,m,x){let v=(f<<8)+m-1,y=Math.floor(v/1600);x[0]=y,v-=y*1600,y=Math.floor(v/40),x[1]=y,x[2]=v-y*40}static decodeEdifactSegment(f,m){do{if(f.available()<=16)return;for(let x=0;x<4;x++){let v=f.readBits(6);if(v===31){const y=8-f.getBitOffset();y!==8&&f.readBits(y);return}v&32||(v|=64),m.append(String.fromCharCode(v))}}while(f.available()>0)}static decodeBase256Segment(f,m,x){let v=1+f.getByteOffset();const y=this.unrandomize255State(f.readBits(8),v++);let E;if(y===0?E=f.available()/8|0:y<250?E=y:E=250*(y-249)+this.unrandomize255State(f.readBits(8),v++),E<0)throw new O;const k=new Uint8Array(E);for(let L=0;L<E;L++){if(f.available()<8)throw new O;k[L]=this.unrandomize255State(f.readBits(8),v++)}x.push(k);try{m.append(R.decode(k,B.ISO88591))}catch(L){throw new be("Platform does not support required encoding: "+L.message)}}static unrandomize255State(f,m){const x=149*m%255+1,v=f-x;return v>=0?v:v+256}}Ts.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ts.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ts.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ts.TEXT_SHIFT2_SET_CHARS=Ts.C40_SHIFT2_SET_CHARS,Ts.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Vi{constructor(){this.rsDecoder=new Vt(Me.DATA_MATRIX_FIELD_256)}decode(f){const m=new ls(f),x=m.getVersion(),v=m.readCodewords(),y=ii.getDataBlocks(v,x);let E=0;for(let q of y)E+=q.getNumDataCodewords();const k=new Uint8Array(E),L=y.length;for(let q=0;q<L;q++){const Q=y[q],le=Q.getCodewords(),fe=Q.getNumDataCodewords();this.correctErrors(le,fe);for(let Re=0;Re<fe;Re++)k[Re*L+q]=le[Re]}return Ts.decode(k)}correctErrors(f,m){const x=new Int32Array(f);try{this.rsDecoder.decode(x,f.length-m)}catch{throw new g}for(let v=0;v<m;v++)f[v]=x[v]}}class zr{constructor(f){this.image=f,this.rectangleDetector=new Wt(this.image)}detect(){const f=this.rectangleDetector.detect();let m=this.detectSolid1(f);if(m=this.detectSolid2(m),m[3]=this.correctTopRight(m),!m[3])throw new Z;m=this.shiftToModuleCenter(m);const x=m[0],v=m[1],y=m[2],E=m[3];let k=this.transitionsBetween(x,E)+1,L=this.transitionsBetween(y,E)+1;(k&1)===1&&(k+=1),(L&1)===1&&(L+=1),4*k<7*L&&4*L<7*k&&(k=L=Math.max(k,L));let q=zr.sampleGrid(this.image,x,v,y,E,k,L);return new Ft(q,[x,v,y,E])}static shiftPoint(f,m,x){let v=(m.getX()-f.getX())/(x+1),y=(m.getY()-f.getY())/(x+1);return new Ve(f.getX()+v,f.getY()+y)}static moveAway(f,m,x){let v=f.getX(),y=f.getY();return v<m?v-=1:v+=1,y<x?y-=1:y+=1,new Ve(v,y)}detectSolid1(f){let m=f[0],x=f[1],v=f[3],y=f[2],E=this.transitionsBetween(m,x),k=this.transitionsBetween(x,v),L=this.transitionsBetween(v,y),q=this.transitionsBetween(y,m),Q=E,le=[y,m,x,v];return Q>k&&(Q=k,le[0]=m,le[1]=x,le[2]=v,le[3]=y),Q>L&&(Q=L,le[0]=x,le[1]=v,le[2]=y,le[3]=m),Q>q&&(le[0]=v,le[1]=y,le[2]=m,le[3]=x),le}detectSolid2(f){let m=f[0],x=f[1],v=f[2],y=f[3],E=this.transitionsBetween(m,y),k=zr.shiftPoint(x,v,(E+1)*4),L=zr.shiftPoint(v,x,(E+1)*4),q=this.transitionsBetween(k,m),Q=this.transitionsBetween(L,y);return q<Q?(f[0]=m,f[1]=x,f[2]=v,f[3]=y):(f[0]=x,f[1]=v,f[2]=y,f[3]=m),f}correctTopRight(f){let m=f[0],x=f[1],v=f[2],y=f[3],E=this.transitionsBetween(m,y),k=this.transitionsBetween(x,y),L=zr.shiftPoint(m,x,(k+1)*4),q=zr.shiftPoint(v,x,(E+1)*4);E=this.transitionsBetween(L,y),k=this.transitionsBetween(q,y);let Q=new Ve(y.getX()+(v.getX()-x.getX())/(E+1),y.getY()+(v.getY()-x.getY())/(E+1)),le=new Ve(y.getX()+(m.getX()-x.getX())/(k+1),y.getY()+(m.getY()-x.getY())/(k+1));if(!this.isValid(Q))return this.isValid(le)?le:null;if(!this.isValid(le))return Q;let fe=this.transitionsBetween(L,Q)+this.transitionsBetween(q,Q),Re=this.transitionsBetween(L,le)+this.transitionsBetween(q,le);return fe>Re?Q:le}shiftToModuleCenter(f){let m=f[0],x=f[1],v=f[2],y=f[3],E=this.transitionsBetween(m,y)+1,k=this.transitionsBetween(v,y)+1,L=zr.shiftPoint(m,x,k*4),q=zr.shiftPoint(v,x,E*4);E=this.transitionsBetween(L,y)+1,k=this.transitionsBetween(q,y)+1,(E&1)===1&&(E+=1),(k&1)===1&&(k+=1);let Q=(m.getX()+x.getX()+v.getX()+y.getX())/4,le=(m.getY()+x.getY()+v.getY()+y.getY())/4;m=zr.moveAway(m,Q,le),x=zr.moveAway(x,Q,le),v=zr.moveAway(v,Q,le),y=zr.moveAway(y,Q,le);let fe,Re;return L=zr.shiftPoint(m,x,k*4),L=zr.shiftPoint(L,y,E*4),fe=zr.shiftPoint(x,m,k*4),fe=zr.shiftPoint(fe,v,E*4),q=zr.shiftPoint(v,y,k*4),q=zr.shiftPoint(q,x,E*4),Re=zr.shiftPoint(y,v,k*4),Re=zr.shiftPoint(Re,m,E*4),[L,fe,q,Re]}isValid(f){return f.getX()>=0&&f.getX()<this.image.getWidth()&&f.getY()>0&&f.getY()<this.image.getHeight()}static sampleGrid(f,m,x,v,y,E,k){return kt.getInstance().sampleGrid(f,E,k,.5,.5,E-.5,.5,E-.5,k-.5,.5,k-.5,m.getX(),m.getY(),y.getX(),y.getY(),v.getX(),v.getY(),x.getX(),x.getY())}transitionsBetween(f,m){let x=Math.trunc(f.getX()),v=Math.trunc(f.getY()),y=Math.trunc(m.getX()),E=Math.trunc(m.getY()),k=Math.abs(E-v)>Math.abs(y-x);if(k){let Ke=x;x=v,v=Ke,Ke=y,y=E,E=Ke}let L=Math.abs(y-x),q=Math.abs(E-v),Q=-L/2,le=v<E?1:-1,fe=x<y?1:-1,Re=0,$e=this.image.get(k?v:x,k?x:v);for(let Ke=x,ot=v;Ke!==y;Ke+=fe){let Nt=this.image.get(k?ot:Ke,k?Ke:ot);if(Nt!==$e&&(Re++,$e=Nt),Q+=q,Q>0){if(ot===E)break;ot+=le,Q-=L}}return Re}}class ka{constructor(){this.decoder=new Vi}decode(f,m=null){let x,v;if(m!=null&&m.has(G.PURE_BARCODE)){const q=ka.extractPureBits(f.getBlackMatrix());x=this.decoder.decode(q),v=ka.NO_POINTS}else{const q=new zr(f.getBlackMatrix()).detect();x=this.decoder.decode(q.getBits()),v=q.getPoints()}const y=x.getRawBytes(),E=new X(x.getText(),y,8*y.length,v,se.DATA_MATRIX,w.currentTimeMillis()),k=x.getByteSegments();k!=null&&E.putMetadata(Ce.BYTE_SEGMENTS,k);const L=x.getECLevel();return L!=null&&E.putMetadata(Ce.ERROR_CORRECTION_LEVEL,L),E}reset(){}static extractPureBits(f){const m=f.getTopLeftOnBit(),x=f.getBottomRightOnBit();if(m==null||x==null)throw new Z;const v=this.moduleSize(m,f);let y=m[1];const E=x[1];let k=m[0];const q=(x[0]-k+1)/v,Q=(E-y+1)/v;if(q<=0||Q<=0)throw new Z;const le=v/2;y+=le,k+=le;const fe=new ee(q,Q);for(let Re=0;Re<Q;Re++){const $e=y+Re*v;for(let Ke=0;Ke<q;Ke++)f.get(k+Ke*v,$e)&&fe.set(Ke,Re)}return fe}static moduleSize(f,m){const x=m.getWidth();let v=f[0];const y=f[1];for(;v<x&&m.get(v,y);)v++;if(v===x)throw new Z;const E=v-f[0];if(E===0)throw new Z;return E}}ka.NO_POINTS=[];class $i extends Y{constructor(f=500){super(new ka,f)}}var Mn;(function(oe){oe[oe.L=0]="L",oe[oe.M=1]="M",oe[oe.Q=2]="Q",oe[oe.H=3]="H"})(Mn||(Mn={}));class Ln{constructor(f,m,x){this.value=f,this.stringValue=m,this.bits=x,Ln.FOR_BITS.set(x,this),Ln.FOR_VALUE.set(f,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(f){switch(f){case"L":return Ln.L;case"M":return Ln.M;case"Q":return Ln.Q;case"H":return Ln.H;default:throw new d(f+"not available")}}toString(){return this.stringValue}equals(f){if(!(f instanceof Ln))return!1;const m=f;return this.value===m.value}static forBits(f){if(f<0||f>=Ln.FOR_BITS.size)throw new h;return Ln.FOR_BITS.get(f)}}Ln.FOR_BITS=new Map,Ln.FOR_VALUE=new Map,Ln.L=new Ln(Mn.L,"L",1),Ln.M=new Ln(Mn.M,"M",0),Ln.Q=new Ln(Mn.Q,"Q",3),Ln.H=new Ln(Mn.H,"H",2);class Ha{constructor(f){this.errorCorrectionLevel=Ln.forBits(f>>3&3),this.dataMask=f&7}static numBitsDiffering(f,m){return j.bitCount(f^m)}static decodeFormatInformation(f,m){const x=Ha.doDecodeFormatInformation(f,m);return x!==null?x:Ha.doDecodeFormatInformation(f^Ha.FORMAT_INFO_MASK_QR,m^Ha.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(f,m){let x=Number.MAX_SAFE_INTEGER,v=0;for(const y of Ha.FORMAT_INFO_DECODE_LOOKUP){const E=y[0];if(E===f||E===m)return new Ha(y[1]);let k=Ha.numBitsDiffering(f,E);k<x&&(v=y[1],x=k),f!==m&&(k=Ha.numBitsDiffering(m,E),k<x&&(v=y[1],x=k))}return x<=3?new Ha(v):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(f){if(!(f instanceof Ha))return!1;const m=f;return this.errorCorrectionLevel===m.errorCorrectionLevel&&this.dataMask===m.dataMask}}Ha.FORMAT_INFO_MASK_QR=21522,Ha.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ut{constructor(f,...m){this.ecCodewordsPerBlock=f,this.ecBlocks=m}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let f=0;const m=this.ecBlocks;for(const x of m)f+=x.getCount();return f}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Oe{constructor(f,m){this.count=f,this.dataCodewords=m}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ar{constructor(f,m,...x){this.versionNumber=f,this.alignmentPatternCenters=m,this.ecBlocks=x;let v=0;const y=x[0].getECCodewordsPerBlock(),E=x[0].getECBlocks();for(const k of E)v+=k.getCount()*(k.getDataCodewords()+y);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(f){return this.ecBlocks[f.getValue()]}static getProvisionalVersionForDimension(f){if(f%4!==1)throw new O;try{return this.getVersionForNumber((f-17)/4)}catch{throw new O}}static getVersionForNumber(f){if(f<1||f>40)throw new h;return Ar.VERSIONS[f-1]}static decodeVersionInformation(f){let m=Number.MAX_SAFE_INTEGER,x=0;for(let v=0;v<Ar.VERSION_DECODE_INFO.length;v++){const y=Ar.VERSION_DECODE_INFO[v];if(y===f)return Ar.getVersionForNumber(v+7);const E=Ha.numBitsDiffering(f,y);E<m&&(x=v+7,m=E)}return m<=3?Ar.getVersionForNumber(x):null}buildFunctionPattern(){const f=this.getDimensionForVersion(),m=new ee(f);m.setRegion(0,0,9,9),m.setRegion(f-8,0,8,9),m.setRegion(0,f-8,9,8);const x=this.alignmentPatternCenters.length;for(let v=0;v<x;v++){const y=this.alignmentPatternCenters[v]-2;for(let E=0;E<x;E++)v===0&&(E===0||E===x-1)||v===x-1&&E===0||m.setRegion(this.alignmentPatternCenters[E]-2,y,5,5)}return m.setRegion(6,9,1,f-17),m.setRegion(9,6,f-17,1),this.versionNumber>6&&(m.setRegion(f-11,0,3,6),m.setRegion(0,f-11,6,3)),m}toString(){return""+this.versionNumber}}Ar.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ar.VERSIONS=[new Ar(1,new Int32Array(0),new ut(7,new Oe(1,19)),new ut(10,new Oe(1,16)),new ut(13,new Oe(1,13)),new ut(17,new Oe(1,9))),new Ar(2,Int32Array.from([6,18]),new ut(10,new Oe(1,34)),new ut(16,new Oe(1,28)),new ut(22,new Oe(1,22)),new ut(28,new Oe(1,16))),new Ar(3,Int32Array.from([6,22]),new ut(15,new Oe(1,55)),new ut(26,new Oe(1,44)),new ut(18,new Oe(2,17)),new ut(22,new Oe(2,13))),new Ar(4,Int32Array.from([6,26]),new ut(20,new Oe(1,80)),new ut(18,new Oe(2,32)),new ut(26,new Oe(2,24)),new ut(16,new Oe(4,9))),new Ar(5,Int32Array.from([6,30]),new ut(26,new Oe(1,108)),new ut(24,new Oe(2,43)),new ut(18,new Oe(2,15),new Oe(2,16)),new ut(22,new Oe(2,11),new Oe(2,12))),new Ar(6,Int32Array.from([6,34]),new ut(18,new Oe(2,68)),new ut(16,new Oe(4,27)),new ut(24,new Oe(4,19)),new ut(28,new Oe(4,15))),new Ar(7,Int32Array.from([6,22,38]),new ut(20,new Oe(2,78)),new ut(18,new Oe(4,31)),new ut(18,new Oe(2,14),new Oe(4,15)),new ut(26,new Oe(4,13),new Oe(1,14))),new Ar(8,Int32Array.from([6,24,42]),new ut(24,new Oe(2,97)),new ut(22,new Oe(2,38),new Oe(2,39)),new ut(22,new Oe(4,18),new Oe(2,19)),new ut(26,new Oe(4,14),new Oe(2,15))),new Ar(9,Int32Array.from([6,26,46]),new ut(30,new Oe(2,116)),new ut(22,new Oe(3,36),new Oe(2,37)),new ut(20,new Oe(4,16),new Oe(4,17)),new ut(24,new Oe(4,12),new Oe(4,13))),new Ar(10,Int32Array.from([6,28,50]),new ut(18,new Oe(2,68),new Oe(2,69)),new ut(26,new Oe(4,43),new Oe(1,44)),new ut(24,new Oe(6,19),new Oe(2,20)),new ut(28,new Oe(6,15),new Oe(2,16))),new Ar(11,Int32Array.from([6,30,54]),new ut(20,new Oe(4,81)),new ut(30,new Oe(1,50),new Oe(4,51)),new ut(28,new Oe(4,22),new Oe(4,23)),new ut(24,new Oe(3,12),new Oe(8,13))),new Ar(12,Int32Array.from([6,32,58]),new ut(24,new Oe(2,92),new Oe(2,93)),new ut(22,new Oe(6,36),new Oe(2,37)),new ut(26,new Oe(4,20),new Oe(6,21)),new ut(28,new Oe(7,14),new Oe(4,15))),new Ar(13,Int32Array.from([6,34,62]),new ut(26,new Oe(4,107)),new ut(22,new Oe(8,37),new Oe(1,38)),new ut(24,new Oe(8,20),new Oe(4,21)),new ut(22,new Oe(12,11),new Oe(4,12))),new Ar(14,Int32Array.from([6,26,46,66]),new ut(30,new Oe(3,115),new Oe(1,116)),new ut(24,new Oe(4,40),new Oe(5,41)),new ut(20,new Oe(11,16),new Oe(5,17)),new ut(24,new Oe(11,12),new Oe(5,13))),new Ar(15,Int32Array.from([6,26,48,70]),new ut(22,new Oe(5,87),new Oe(1,88)),new ut(24,new Oe(5,41),new Oe(5,42)),new ut(30,new Oe(5,24),new Oe(7,25)),new ut(24,new Oe(11,12),new Oe(7,13))),new Ar(16,Int32Array.from([6,26,50,74]),new ut(24,new Oe(5,98),new Oe(1,99)),new ut(28,new Oe(7,45),new Oe(3,46)),new ut(24,new Oe(15,19),new Oe(2,20)),new ut(30,new Oe(3,15),new Oe(13,16))),new Ar(17,Int32Array.from([6,30,54,78]),new ut(28,new Oe(1,107),new Oe(5,108)),new ut(28,new Oe(10,46),new Oe(1,47)),new ut(28,new Oe(1,22),new Oe(15,23)),new ut(28,new Oe(2,14),new Oe(17,15))),new Ar(18,Int32Array.from([6,30,56,82]),new ut(30,new Oe(5,120),new Oe(1,121)),new ut(26,new Oe(9,43),new Oe(4,44)),new ut(28,new Oe(17,22),new Oe(1,23)),new ut(28,new Oe(2,14),new Oe(19,15))),new Ar(19,Int32Array.from([6,30,58,86]),new ut(28,new Oe(3,113),new Oe(4,114)),new ut(26,new Oe(3,44),new Oe(11,45)),new ut(26,new Oe(17,21),new Oe(4,22)),new ut(26,new Oe(9,13),new Oe(16,14))),new Ar(20,Int32Array.from([6,34,62,90]),new ut(28,new Oe(3,107),new Oe(5,108)),new ut(26,new Oe(3,41),new Oe(13,42)),new ut(30,new Oe(15,24),new Oe(5,25)),new ut(28,new Oe(15,15),new Oe(10,16))),new Ar(21,Int32Array.from([6,28,50,72,94]),new ut(28,new Oe(4,116),new Oe(4,117)),new ut(26,new Oe(17,42)),new ut(28,new Oe(17,22),new Oe(6,23)),new ut(30,new Oe(19,16),new Oe(6,17))),new Ar(22,Int32Array.from([6,26,50,74,98]),new ut(28,new Oe(2,111),new Oe(7,112)),new ut(28,new Oe(17,46)),new ut(30,new Oe(7,24),new Oe(16,25)),new ut(24,new Oe(34,13))),new Ar(23,Int32Array.from([6,30,54,78,102]),new ut(30,new Oe(4,121),new Oe(5,122)),new ut(28,new Oe(4,47),new Oe(14,48)),new ut(30,new Oe(11,24),new Oe(14,25)),new ut(30,new Oe(16,15),new Oe(14,16))),new Ar(24,Int32Array.from([6,28,54,80,106]),new ut(30,new Oe(6,117),new Oe(4,118)),new ut(28,new Oe(6,45),new Oe(14,46)),new ut(30,new Oe(11,24),new Oe(16,25)),new ut(30,new Oe(30,16),new Oe(2,17))),new Ar(25,Int32Array.from([6,32,58,84,110]),new ut(26,new Oe(8,106),new Oe(4,107)),new ut(28,new Oe(8,47),new Oe(13,48)),new ut(30,new Oe(7,24),new Oe(22,25)),new ut(30,new Oe(22,15),new Oe(13,16))),new Ar(26,Int32Array.from([6,30,58,86,114]),new ut(28,new Oe(10,114),new Oe(2,115)),new ut(28,new Oe(19,46),new Oe(4,47)),new ut(28,new Oe(28,22),new Oe(6,23)),new ut(30,new Oe(33,16),new Oe(4,17))),new Ar(27,Int32Array.from([6,34,62,90,118]),new ut(30,new Oe(8,122),new Oe(4,123)),new ut(28,new Oe(22,45),new Oe(3,46)),new ut(30,new Oe(8,23),new Oe(26,24)),new ut(30,new Oe(12,15),new Oe(28,16))),new Ar(28,Int32Array.from([6,26,50,74,98,122]),new ut(30,new Oe(3,117),new Oe(10,118)),new ut(28,new Oe(3,45),new Oe(23,46)),new ut(30,new Oe(4,24),new Oe(31,25)),new ut(30,new Oe(11,15),new Oe(31,16))),new Ar(29,Int32Array.from([6,30,54,78,102,126]),new ut(30,new Oe(7,116),new Oe(7,117)),new ut(28,new Oe(21,45),new Oe(7,46)),new ut(30,new Oe(1,23),new Oe(37,24)),new ut(30,new Oe(19,15),new Oe(26,16))),new Ar(30,Int32Array.from([6,26,52,78,104,130]),new ut(30,new Oe(5,115),new Oe(10,116)),new ut(28,new Oe(19,47),new Oe(10,48)),new ut(30,new Oe(15,24),new Oe(25,25)),new ut(30,new Oe(23,15),new Oe(25,16))),new Ar(31,Int32Array.from([6,30,56,82,108,134]),new ut(30,new Oe(13,115),new Oe(3,116)),new ut(28,new Oe(2,46),new Oe(29,47)),new ut(30,new Oe(42,24),new Oe(1,25)),new ut(30,new Oe(23,15),new Oe(28,16))),new Ar(32,Int32Array.from([6,34,60,86,112,138]),new ut(30,new Oe(17,115)),new ut(28,new Oe(10,46),new Oe(23,47)),new ut(30,new Oe(10,24),new Oe(35,25)),new ut(30,new Oe(19,15),new Oe(35,16))),new Ar(33,Int32Array.from([6,30,58,86,114,142]),new ut(30,new Oe(17,115),new Oe(1,116)),new ut(28,new Oe(14,46),new Oe(21,47)),new ut(30,new Oe(29,24),new Oe(19,25)),new ut(30,new Oe(11,15),new Oe(46,16))),new Ar(34,Int32Array.from([6,34,62,90,118,146]),new ut(30,new Oe(13,115),new Oe(6,116)),new ut(28,new Oe(14,46),new Oe(23,47)),new ut(30,new Oe(44,24),new Oe(7,25)),new ut(30,new Oe(59,16),new Oe(1,17))),new Ar(35,Int32Array.from([6,30,54,78,102,126,150]),new ut(30,new Oe(12,121),new Oe(7,122)),new ut(28,new Oe(12,47),new Oe(26,48)),new ut(30,new Oe(39,24),new Oe(14,25)),new ut(30,new Oe(22,15),new Oe(41,16))),new Ar(36,Int32Array.from([6,24,50,76,102,128,154]),new ut(30,new Oe(6,121),new Oe(14,122)),new ut(28,new Oe(6,47),new Oe(34,48)),new ut(30,new Oe(46,24),new Oe(10,25)),new ut(30,new Oe(2,15),new Oe(64,16))),new Ar(37,Int32Array.from([6,28,54,80,106,132,158]),new ut(30,new Oe(17,122),new Oe(4,123)),new ut(28,new Oe(29,46),new Oe(14,47)),new ut(30,new Oe(49,24),new Oe(10,25)),new ut(30,new Oe(24,15),new Oe(46,16))),new Ar(38,Int32Array.from([6,32,58,84,110,136,162]),new ut(30,new Oe(4,122),new Oe(18,123)),new ut(28,new Oe(13,46),new Oe(32,47)),new ut(30,new Oe(48,24),new Oe(14,25)),new ut(30,new Oe(42,15),new Oe(32,16))),new Ar(39,Int32Array.from([6,26,54,82,110,138,166]),new ut(30,new Oe(20,117),new Oe(4,118)),new ut(28,new Oe(40,47),new Oe(7,48)),new ut(30,new Oe(43,24),new Oe(22,25)),new ut(30,new Oe(10,15),new Oe(67,16))),new Ar(40,Int32Array.from([6,30,58,86,114,142,170]),new ut(30,new Oe(19,118),new Oe(6,119)),new ut(28,new Oe(18,47),new Oe(31,48)),new ut(30,new Oe(34,24),new Oe(34,25)),new ut(30,new Oe(20,15),new Oe(61,16)))];var Ia;(function(oe){oe[oe.DATA_MASK_000=0]="DATA_MASK_000",oe[oe.DATA_MASK_001=1]="DATA_MASK_001",oe[oe.DATA_MASK_010=2]="DATA_MASK_010",oe[oe.DATA_MASK_011=3]="DATA_MASK_011",oe[oe.DATA_MASK_100=4]="DATA_MASK_100",oe[oe.DATA_MASK_101=5]="DATA_MASK_101",oe[oe.DATA_MASK_110=6]="DATA_MASK_110",oe[oe.DATA_MASK_111=7]="DATA_MASK_111"})(Ia||(Ia={}));class qa{constructor(f,m){this.value=f,this.isMasked=m}unmaskBitMatrix(f,m){for(let x=0;x<m;x++)for(let v=0;v<m;v++)this.isMasked(x,v)&&f.flip(v,x)}}qa.values=new Map([[Ia.DATA_MASK_000,new qa(Ia.DATA_MASK_000,(oe,f)=>(oe+f&1)===0)],[Ia.DATA_MASK_001,new qa(Ia.DATA_MASK_001,(oe,f)=>(oe&1)===0)],[Ia.DATA_MASK_010,new qa(Ia.DATA_MASK_010,(oe,f)=>f%3===0)],[Ia.DATA_MASK_011,new qa(Ia.DATA_MASK_011,(oe,f)=>(oe+f)%3===0)],[Ia.DATA_MASK_100,new qa(Ia.DATA_MASK_100,(oe,f)=>(Math.floor(oe/2)+Math.floor(f/3)&1)===0)],[Ia.DATA_MASK_101,new qa(Ia.DATA_MASK_101,(oe,f)=>oe*f%6===0)],[Ia.DATA_MASK_110,new qa(Ia.DATA_MASK_110,(oe,f)=>oe*f%6<3)],[Ia.DATA_MASK_111,new qa(Ia.DATA_MASK_111,(oe,f)=>(oe+f+oe*f%3&1)===0)]]);class qs{constructor(f){const m=f.getHeight();if(m<21||(m&3)!==1)throw new O;this.bitMatrix=f}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let f=0;for(let y=0;y<6;y++)f=this.copyBit(y,8,f);f=this.copyBit(7,8,f),f=this.copyBit(8,8,f),f=this.copyBit(8,7,f);for(let y=5;y>=0;y--)f=this.copyBit(8,y,f);const m=this.bitMatrix.getHeight();let x=0;const v=m-7;for(let y=m-1;y>=v;y--)x=this.copyBit(8,y,x);for(let y=m-8;y<m;y++)x=this.copyBit(y,8,x);if(this.parsedFormatInfo=Ha.decodeFormatInformation(f,x),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const f=this.bitMatrix.getHeight(),m=Math.floor((f-17)/4);if(m<=6)return Ar.getVersionForNumber(m);let x=0;const v=f-11;for(let E=5;E>=0;E--)for(let k=f-9;k>=v;k--)x=this.copyBit(k,E,x);let y=Ar.decodeVersionInformation(x);if(y!==null&&y.getDimensionForVersion()===f)return this.parsedVersion=y,y;x=0;for(let E=5;E>=0;E--)for(let k=f-9;k>=v;k--)x=this.copyBit(E,k,x);if(y=Ar.decodeVersionInformation(x),y!==null&&y.getDimensionForVersion()===f)return this.parsedVersion=y,y;throw new O}copyBit(f,m,x){return(this.isMirror?this.bitMatrix.get(m,f):this.bitMatrix.get(f,m))?x<<1|1:x<<1}readCodewords(){const f=this.readFormatInformation(),m=this.readVersion(),x=qa.values.get(f.getDataMask()),v=this.bitMatrix.getHeight();x.unmaskBitMatrix(this.bitMatrix,v);const y=m.buildFunctionPattern();let E=!0;const k=new Uint8Array(m.getTotalCodewords());let L=0,q=0,Q=0;for(let le=v-1;le>0;le-=2){le===6&&le--;for(let fe=0;fe<v;fe++){const Re=E?v-1-fe:fe;for(let $e=0;$e<2;$e++)y.get(le-$e,Re)||(Q++,q<<=1,this.bitMatrix.get(le-$e,Re)&&(q|=1),Q===8&&(k[L++]=q,Q=0,q=0))}E=!E}if(L!==m.getTotalCodewords())throw new O;return k}remask(){if(this.parsedFormatInfo===null)return;const f=qa.values[this.parsedFormatInfo.getDataMask()],m=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,m)}setMirror(f){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=f}mirror(){const f=this.bitMatrix;for(let m=0,x=f.getWidth();m<x;m++)for(let v=m+1,y=f.getHeight();v<y;v++)f.get(m,v)!==f.get(v,m)&&(f.flip(v,m),f.flip(m,v))}}class Zo{constructor(f,m){this.numDataCodewords=f,this.codewords=m}static getDataBlocks(f,m,x){if(f.length!==m.getTotalCodewords())throw new h;const v=m.getECBlocksForLevel(x);let y=0;const E=v.getECBlocks();for(const $e of E)y+=$e.getCount();const k=new Array(y);let L=0;for(const $e of E)for(let Ke=0;Ke<$e.getCount();Ke++){const ot=$e.getDataCodewords(),Nt=v.getECCodewordsPerBlock()+ot;k[L++]=new Zo(ot,new Uint8Array(Nt))}const q=k[0].codewords.length;let Q=k.length-1;for(;Q>=0&&k[Q].codewords.length!==q;)Q--;Q++;const le=q-v.getECCodewordsPerBlock();let fe=0;for(let $e=0;$e<le;$e++)for(let Ke=0;Ke<L;Ke++)k[Ke].codewords[$e]=f[fe++];for(let $e=Q;$e<L;$e++)k[$e].codewords[le]=f[fe++];const Re=k[0].codewords.length;for(let $e=le;$e<Re;$e++)for(let Ke=0;Ke<L;Ke++){const ot=Ke<Q?$e:$e+1;k[Ke].codewords[ot]=f[fe++]}return k}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Cs;(function(oe){oe[oe.TERMINATOR=0]="TERMINATOR",oe[oe.NUMERIC=1]="NUMERIC",oe[oe.ALPHANUMERIC=2]="ALPHANUMERIC",oe[oe.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",oe[oe.BYTE=4]="BYTE",oe[oe.ECI=5]="ECI",oe[oe.KANJI=6]="KANJI",oe[oe.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",oe[oe.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",oe[oe.HANZI=9]="HANZI"})(Cs||(Cs={}));class Dr{constructor(f,m,x,v){this.value=f,this.stringValue=m,this.characterCountBitsForVersions=x,this.bits=v,Dr.FOR_BITS.set(v,this),Dr.FOR_VALUE.set(f,this)}static forBits(f){const m=Dr.FOR_BITS.get(f);if(m===void 0)throw new h;return m}getCharacterCountBits(f){const m=f.getVersionNumber();let x;return m<=9?x=0:m<=26?x=1:x=2,this.characterCountBitsForVersions[x]}getValue(){return this.value}getBits(){return this.bits}equals(f){if(!(f instanceof Dr))return!1;const m=f;return this.value===m.value}toString(){return this.stringValue}}Dr.FOR_BITS=new Map,Dr.FOR_VALUE=new Map,Dr.TERMINATOR=new Dr(Cs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Dr.NUMERIC=new Dr(Cs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Dr.ALPHANUMERIC=new Dr(Cs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Dr.STRUCTURED_APPEND=new Dr(Cs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Dr.BYTE=new Dr(Cs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Dr.ECI=new Dr(Cs.ECI,"ECI",Int32Array.from([0,0,0]),7),Dr.KANJI=new Dr(Cs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Dr.FNC1_FIRST_POSITION=new Dr(Cs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Dr.FNC1_SECOND_POSITION=new Dr(Cs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Dr.HANZI=new Dr(Cs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Zn{static decode(f,m,x,v){const y=new On(f);let E=new F;const k=new Array;let L=-1,q=-1;try{let Q=null,le=!1,fe;do{if(y.available()<4)fe=Dr.TERMINATOR;else{const Re=y.readBits(4);fe=Dr.forBits(Re)}switch(fe){case Dr.TERMINATOR:break;case Dr.FNC1_FIRST_POSITION:case Dr.FNC1_SECOND_POSITION:le=!0;break;case Dr.STRUCTURED_APPEND:if(y.available()<16)throw new O;L=y.readBits(8),q=y.readBits(8);break;case Dr.ECI:const Re=Zn.parseECIValue(y);if(Q=I.getCharacterSetECIByValue(Re),Q===null)throw new O;break;case Dr.HANZI:const $e=y.readBits(4),Ke=y.readBits(fe.getCharacterCountBits(m));$e===Zn.GB2312_SUBSET&&Zn.decodeHanziSegment(y,E,Ke);break;default:const ot=y.readBits(fe.getCharacterCountBits(m));switch(fe){case Dr.NUMERIC:Zn.decodeNumericSegment(y,E,ot);break;case Dr.ALPHANUMERIC:Zn.decodeAlphanumericSegment(y,E,ot,le);break;case Dr.BYTE:Zn.decodeByteSegment(y,E,ot,Q,k,v);break;case Dr.KANJI:Zn.decodeKanjiSegment(y,E,ot);break;default:throw new O}break}}while(fe!==Dr.TERMINATOR)}catch{throw new O}return new xe(f,E.toString(),k.length===0?null:k,x===null?null:x.toString(),L,q)}static decodeHanziSegment(f,m,x){if(x*13>f.available())throw new O;const v=new Uint8Array(2*x);let y=0;for(;x>0;){const E=f.readBits(13);let k=E/96<<8&4294967295|E%96;k<959?k+=41377:k+=42657,v[y]=k>>8&255,v[y+1]=k&255,y+=2,x--}try{m.append(R.decode(v,B.GB2312))}catch(E){throw new O(E)}}static decodeKanjiSegment(f,m,x){if(x*13>f.available())throw new O;const v=new Uint8Array(2*x);let y=0;for(;x>0;){const E=f.readBits(13);let k=E/192<<8&4294967295|E%192;k<7936?k+=33088:k+=49472,v[y]=k>>8,v[y+1]=k,y+=2,x--}try{m.append(R.decode(v,B.SHIFT_JIS))}catch(E){throw new O(E)}}static decodeByteSegment(f,m,x,v,y,E){if(8*x>f.available())throw new O;const k=new Uint8Array(x);for(let q=0;q<x;q++)k[q]=f.readBits(8);let L;v===null?L=B.guessEncoding(k,E):L=v.getName();try{m.append(R.decode(k,L))}catch(q){throw new O(q)}y.push(k)}static toAlphaNumericChar(f){if(f>=Zn.ALPHANUMERIC_CHARS.length)throw new O;return Zn.ALPHANUMERIC_CHARS[f]}static decodeAlphanumericSegment(f,m,x,v){const y=m.length();for(;x>1;){if(f.available()<11)throw new O;const E=f.readBits(11);m.append(Zn.toAlphaNumericChar(Math.floor(E/45))),m.append(Zn.toAlphaNumericChar(E%45)),x-=2}if(x===1){if(f.available()<6)throw new O;m.append(Zn.toAlphaNumericChar(f.readBits(6)))}if(v)for(let E=y;E<m.length();E++)m.charAt(E)==="%"&&(E<m.length()-1&&m.charAt(E+1)==="%"?m.deleteCharAt(E+1):m.setCharAt(E,""))}static decodeNumericSegment(f,m,x){for(;x>=3;){if(f.available()<10)throw new O;const v=f.readBits(10);if(v>=1e3)throw new O;m.append(Zn.toAlphaNumericChar(Math.floor(v/100))),m.append(Zn.toAlphaNumericChar(Math.floor(v/10)%10)),m.append(Zn.toAlphaNumericChar(v%10)),x-=3}if(x===2){if(f.available()<7)throw new O;const v=f.readBits(7);if(v>=100)throw new O;m.append(Zn.toAlphaNumericChar(Math.floor(v/10))),m.append(Zn.toAlphaNumericChar(v%10))}else if(x===1){if(f.available()<4)throw new O;const v=f.readBits(4);if(v>=10)throw new O;m.append(Zn.toAlphaNumericChar(v))}}static parseECIValue(f){const m=f.readBits(8);if(!(m&128))return m&127;if((m&192)===128){const x=f.readBits(8);return(m&63)<<8&4294967295|x}if((m&224)===192){const x=f.readBits(16);return(m&31)<<16&4294967295|x}throw new O}}Zn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Zn.GB2312_SUBSET=1;class yt{constructor(f){this.mirrored=f}isMirrored(){return this.mirrored}applyMirroredCorrection(f){if(!this.mirrored||f===null||f.length<3)return;const m=f[0];f[0]=f[2],f[2]=m}}class mr{constructor(){this.rsDecoder=new Vt(Me.QR_CODE_FIELD_256)}decodeBooleanArray(f,m){return this.decodeBitMatrix(ee.parseFromBooleanArray(f),m)}decodeBitMatrix(f,m){const x=new qs(f);let v=null;try{return this.decodeBitMatrixParser(x,m)}catch(y){v=y}try{x.remask(),x.setMirror(!0),x.readVersion(),x.readFormatInformation(),x.mirror();const y=this.decodeBitMatrixParser(x,m);return y.setOther(new yt(!0)),y}catch(y){throw v!==null?v:y}}decodeBitMatrixParser(f,m){const x=f.readVersion(),v=f.readFormatInformation().getErrorCorrectionLevel(),y=f.readCodewords(),E=Zo.getDataBlocks(y,x,v);let k=0;for(const Q of E)k+=Q.getNumDataCodewords();const L=new Uint8Array(k);let q=0;for(const Q of E){const le=Q.getCodewords(),fe=Q.getNumDataCodewords();this.correctErrors(le,fe);for(let Re=0;Re<fe;Re++)L[q++]=le[Re]}return Zn.decode(L,x,v,m)}correctErrors(f,m){const x=new Int32Array(f);try{this.rsDecoder.decode(x,f.length-m)}catch{throw new g}for(let v=0;v<m;v++)f[v]=x[v]}}class jr extends Ve{constructor(f,m,x){super(f,m),this.estimatedModuleSize=x}aboutEquals(f,m,x){if(Math.abs(m-this.getY())<=f&&Math.abs(x-this.getX())<=f){const v=Math.abs(f-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(f,m,x){const v=(this.getX()+m)/2,y=(this.getY()+f)/2,E=(this.estimatedModuleSize+x)/2;return new jr(v,y,E)}}class Dn{constructor(f,m,x,v,y,E,k){this.image=f,this.startX=m,this.startY=x,this.width=v,this.height=y,this.moduleSize=E,this.resultPointCallback=k,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const f=this.startX,m=this.height,x=this.width,v=f+x,y=this.startY+m/2,E=new Int32Array(3),k=this.image;for(let L=0;L<m;L++){const q=y+(L&1?-Math.floor((L+1)/2):Math.floor((L+1)/2));E[0]=0,E[1]=0,E[2]=0;let Q=f;for(;Q<v&&!k.get(Q,q);)Q++;let le=0;for(;Q<v;){if(k.get(Q,q))if(le===1)E[1]++;else if(le===2){if(this.foundPatternCross(E)){const fe=this.handlePossibleCenter(E,q,Q);if(fe!==null)return fe}E[0]=E[2],E[1]=1,E[2]=0,le=1}else E[++le]++;else le===1&&le++,E[le]++;Q++}if(this.foundPatternCross(E)){const fe=this.handlePossibleCenter(E,q,v);if(fe!==null)return fe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(f,m){return m-f[2]-f[1]/2}foundPatternCross(f){const m=this.moduleSize,x=m/2;for(let v=0;v<3;v++)if(Math.abs(m-f[v])>=x)return!1;return!0}crossCheckVertical(f,m,x,v){const y=this.image,E=y.getHeight(),k=this.crossCheckStateCount;k[0]=0,k[1]=0,k[2]=0;let L=f;for(;L>=0&&y.get(m,L)&&k[1]<=x;)k[1]++,L--;if(L<0||k[1]>x)return NaN;for(;L>=0&&!y.get(m,L)&&k[0]<=x;)k[0]++,L--;if(k[0]>x)return NaN;for(L=f+1;L<E&&y.get(m,L)&&k[1]<=x;)k[1]++,L++;if(L===E||k[1]>x)return NaN;for(;L<E&&!y.get(m,L)&&k[2]<=x;)k[2]++,L++;if(k[2]>x)return NaN;const q=k[0]+k[1]+k[2];return 5*Math.abs(q-v)>=2*v?NaN:this.foundPatternCross(k)?Dn.centerFromEnd(k,L):NaN}handlePossibleCenter(f,m,x){const v=f[0]+f[1]+f[2],y=Dn.centerFromEnd(f,x),E=this.crossCheckVertical(m,y,2*f[1],v);if(!isNaN(E)){const k=(f[0]+f[1]+f[2])/3;for(const q of this.possibleCenters)if(q.aboutEquals(k,E,y))return q.combineEstimate(E,y,k);const L=new jr(y,E,k);this.possibleCenters.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return null}}class pn extends Ve{constructor(f,m,x,v){super(f,m),this.estimatedModuleSize=x,this.count=v,v===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(f,m,x){if(Math.abs(m-this.getY())<=f&&Math.abs(x-this.getX())<=f){const v=Math.abs(f-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(f,m,x){const v=this.count+1,y=(this.count*this.getX()+m)/v,E=(this.count*this.getY()+f)/v,k=(this.count*this.estimatedModuleSize+x)/v;return new pn(y,E,k,v)}}class Jr{constructor(f){this.bottomLeft=f[0],this.topLeft=f[1],this.topRight=f[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ur{constructor(f,m){this.image=f,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=m}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(f){const m=f!=null&&f.get(G.TRY_HARDER)!==void 0,x=f!=null&&f.get(G.PURE_BARCODE)!==void 0,v=this.image,y=v.getHeight(),E=v.getWidth();let k=Math.floor(3*y/(4*ur.MAX_MODULES));(k<ur.MIN_SKIP||m)&&(k=ur.MIN_SKIP);let L=!1;const q=new Int32Array(5);for(let le=k-1;le<y&&!L;le+=k){q[0]=0,q[1]=0,q[2]=0,q[3]=0,q[4]=0;let fe=0;for(let Re=0;Re<E;Re++)if(v.get(Re,le))(fe&1)===1&&fe++,q[fe]++;else if(fe&1)q[fe]++;else if(fe===4)if(ur.foundPatternCross(q)){if(this.handlePossibleCenter(q,le,Re,x)===!0)if(k=2,this.hasSkipped===!0)L=this.haveMultiplyConfirmedCenters();else{const Ke=this.findRowSkip();Ke>q[2]&&(le+=Ke-q[2]-k,Re=E-1)}else{q[0]=q[2],q[1]=q[3],q[2]=q[4],q[3]=1,q[4]=0,fe=3;continue}fe=0,q[0]=0,q[1]=0,q[2]=0,q[3]=0,q[4]=0}else q[0]=q[2],q[1]=q[3],q[2]=q[4],q[3]=1,q[4]=0,fe=3;else q[++fe]++;ur.foundPatternCross(q)&&this.handlePossibleCenter(q,le,E,x)===!0&&(k=q[0],this.hasSkipped&&(L=this.haveMultiplyConfirmedCenters()))}const Q=this.selectBestPatterns();return Ve.orderBestPatterns(Q),new Jr(Q)}static centerFromEnd(f,m){return m-f[4]-f[3]-f[2]/2}static foundPatternCross(f){let m=0;for(let y=0;y<5;y++){const E=f[y];if(E===0)return!1;m+=E}if(m<7)return!1;const x=m/7,v=x/2;return Math.abs(x-f[0])<v&&Math.abs(x-f[1])<v&&Math.abs(3*x-f[2])<3*v&&Math.abs(x-f[3])<v&&Math.abs(x-f[4])<v}getCrossCheckStateCount(){const f=this.crossCheckStateCount;return f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f}crossCheckDiagonal(f,m,x,v){const y=this.getCrossCheckStateCount();let E=0;const k=this.image;for(;f>=E&&m>=E&&k.get(m-E,f-E);)y[2]++,E++;if(f<E||m<E)return!1;for(;f>=E&&m>=E&&!k.get(m-E,f-E)&&y[1]<=x;)y[1]++,E++;if(f<E||m<E||y[1]>x)return!1;for(;f>=E&&m>=E&&k.get(m-E,f-E)&&y[0]<=x;)y[0]++,E++;if(y[0]>x)return!1;const L=k.getHeight(),q=k.getWidth();for(E=1;f+E<L&&m+E<q&&k.get(m+E,f+E);)y[2]++,E++;if(f+E>=L||m+E>=q)return!1;for(;f+E<L&&m+E<q&&!k.get(m+E,f+E)&&y[3]<x;)y[3]++,E++;if(f+E>=L||m+E>=q||y[3]>=x)return!1;for(;f+E<L&&m+E<q&&k.get(m+E,f+E)&&y[4]<x;)y[4]++,E++;if(y[4]>=x)return!1;const Q=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(Q-v)<2*v&&ur.foundPatternCross(y)}crossCheckVertical(f,m,x,v){const y=this.image,E=y.getHeight(),k=this.getCrossCheckStateCount();let L=f;for(;L>=0&&y.get(m,L);)k[2]++,L--;if(L<0)return NaN;for(;L>=0&&!y.get(m,L)&&k[1]<=x;)k[1]++,L--;if(L<0||k[1]>x)return NaN;for(;L>=0&&y.get(m,L)&&k[0]<=x;)k[0]++,L--;if(k[0]>x)return NaN;for(L=f+1;L<E&&y.get(m,L);)k[2]++,L++;if(L===E)return NaN;for(;L<E&&!y.get(m,L)&&k[3]<x;)k[3]++,L++;if(L===E||k[3]>=x)return NaN;for(;L<E&&y.get(m,L)&&k[4]<x;)k[4]++,L++;if(k[4]>=x)return NaN;const q=k[0]+k[1]+k[2]+k[3]+k[4];return 5*Math.abs(q-v)>=2*v?NaN:ur.foundPatternCross(k)?ur.centerFromEnd(k,L):NaN}crossCheckHorizontal(f,m,x,v){const y=this.image,E=y.getWidth(),k=this.getCrossCheckStateCount();let L=f;for(;L>=0&&y.get(L,m);)k[2]++,L--;if(L<0)return NaN;for(;L>=0&&!y.get(L,m)&&k[1]<=x;)k[1]++,L--;if(L<0||k[1]>x)return NaN;for(;L>=0&&y.get(L,m)&&k[0]<=x;)k[0]++,L--;if(k[0]>x)return NaN;for(L=f+1;L<E&&y.get(L,m);)k[2]++,L++;if(L===E)return NaN;for(;L<E&&!y.get(L,m)&&k[3]<x;)k[3]++,L++;if(L===E||k[3]>=x)return NaN;for(;L<E&&y.get(L,m)&&k[4]<x;)k[4]++,L++;if(k[4]>=x)return NaN;const q=k[0]+k[1]+k[2]+k[3]+k[4];return 5*Math.abs(q-v)>=v?NaN:ur.foundPatternCross(k)?ur.centerFromEnd(k,L):NaN}handlePossibleCenter(f,m,x,v){const y=f[0]+f[1]+f[2]+f[3]+f[4];let E=ur.centerFromEnd(f,x),k=this.crossCheckVertical(m,Math.floor(E),f[2],y);if(!isNaN(k)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(k),f[2],y),!isNaN(E)&&(!v||this.crossCheckDiagonal(Math.floor(k),Math.floor(E),f[2],y)))){const L=y/7;let q=!1;const Q=this.possibleCenters;for(let le=0,fe=Q.length;le<fe;le++){const Re=Q[le];if(Re.aboutEquals(L,k,E)){Q[le]=Re.combineEstimate(k,E,L),q=!0;break}}if(!q){const le=new pn(E,k,L);Q.push(le),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(le)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let m=null;for(const x of this.possibleCenters)if(x.getCount()>=ur.CENTER_QUORUM)if(m==null)m=x;else return this.hasSkipped=!0,Math.floor((Math.abs(m.getX()-x.getX())-Math.abs(m.getY()-x.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let f=0,m=0;const x=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=ur.CENTER_QUORUM&&(f++,m+=E.getEstimatedModuleSize());if(f<3)return!1;const v=m/x;let y=0;for(const E of this.possibleCenters)y+=Math.abs(E.getEstimatedModuleSize()-v);return y<=.05*m}selectBestPatterns(){const f=this.possibleCenters.length;if(f<3)throw new Z;const m=this.possibleCenters;let x;if(f>3){let v=0,y=0;for(const L of this.possibleCenters){const q=L.getEstimatedModuleSize();v+=q,y+=q*q}x=v/f;let E=Math.sqrt(y/f-x*x);m.sort((L,q)=>{const Q=Math.abs(q.getEstimatedModuleSize()-x),le=Math.abs(L.getEstimatedModuleSize()-x);return Q<le?-1:Q>le?1:0});const k=Math.max(.2*x,E);for(let L=0;L<m.length&&m.length>3;L++){const q=m[L];Math.abs(q.getEstimatedModuleSize()-x)>k&&(m.splice(L,1),L--)}}if(m.length>3){let v=0;for(const y of m)v+=y.getEstimatedModuleSize();x=v/m.length,m.sort((y,E)=>{if(E.getCount()===y.getCount()){const k=Math.abs(E.getEstimatedModuleSize()-x),L=Math.abs(y.getEstimatedModuleSize()-x);return k<L?1:k>L?-1:0}else return E.getCount()-y.getCount()}),m.splice(3)}return[m[0],m[1],m[2]]}}ur.CENTER_QUORUM=2,ur.MIN_SKIP=3,ur.MAX_MODULES=57;class $n{constructor(f){this.image=f}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(f){this.resultPointCallback=f==null?null:f.get(G.NEED_RESULT_POINT_CALLBACK);const x=new ur(this.image,this.resultPointCallback).find(f);return this.processFinderPatternInfo(x)}processFinderPatternInfo(f){const m=f.getTopLeft(),x=f.getTopRight(),v=f.getBottomLeft(),y=this.calculateModuleSize(m,x,v);if(y<1)throw new Z("No pattern found in proccess finder.");const E=$n.computeDimension(m,x,v,y),k=Ar.getProvisionalVersionForDimension(E),L=k.getDimensionForVersion()-7;let q=null;if(k.getAlignmentPatternCenters().length>0){const Re=x.getX()-m.getX()+v.getX(),$e=x.getY()-m.getY()+v.getY(),Ke=1-3/L,ot=Math.floor(m.getX()+Ke*(Re-m.getX())),Nt=Math.floor(m.getY()+Ke*($e-m.getY()));for(let zt=4;zt<=16;zt<<=1)try{q=this.findAlignmentInRegion(y,ot,Nt,zt);break}catch(Gt){if(!(Gt instanceof Z))throw Gt}}const Q=$n.createTransform(m,x,v,q,E),le=$n.sampleGrid(this.image,Q,E);let fe;return q===null?fe=[v,m,x]:fe=[v,m,x,q],new Ft(le,fe)}static createTransform(f,m,x,v,y){const E=y-3.5;let k,L,q,Q;return v!==null?(k=v.getX(),L=v.getY(),q=E-3,Q=q):(k=m.getX()-f.getX()+x.getX(),L=m.getY()-f.getY()+x.getY(),q=E,Q=E),Xe.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,q,Q,3.5,E,f.getX(),f.getY(),m.getX(),m.getY(),k,L,x.getX(),x.getY())}static sampleGrid(f,m,x){return kt.getInstance().sampleGridWithTransform(f,x,x,m)}static computeDimension(f,m,x,v){const y=et.round(Ve.distance(f,m)/v),E=et.round(Ve.distance(f,x)/v);let k=Math.floor((y+E)/2)+7;switch(k&3){case 0:k++;break;case 2:k--;break;case 3:throw new Z("Dimensions could be not found.")}return k}calculateModuleSize(f,m,x){return(this.calculateModuleSizeOneWay(f,m)+this.calculateModuleSizeOneWay(f,x))/2}calculateModuleSizeOneWay(f,m){const x=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(f.getX()),Math.floor(f.getY()),Math.floor(m.getX()),Math.floor(m.getY())),v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(m.getX()),Math.floor(m.getY()),Math.floor(f.getX()),Math.floor(f.getY()));return isNaN(x)?v/7:isNaN(v)?x/7:(x+v)/14}sizeOfBlackWhiteBlackRunBothWays(f,m,x,v){let y=this.sizeOfBlackWhiteBlackRun(f,m,x,v),E=1,k=f-(x-f);k<0?(E=f/(f-k),k=0):k>=this.image.getWidth()&&(E=(this.image.getWidth()-1-f)/(k-f),k=this.image.getWidth()-1);let L=Math.floor(m-(v-m)*E);return E=1,L<0?(E=m/(m-L),L=0):L>=this.image.getHeight()&&(E=(this.image.getHeight()-1-m)/(L-m),L=this.image.getHeight()-1),k=Math.floor(f+(k-f)*E),y+=this.sizeOfBlackWhiteBlackRun(f,m,k,L),y-1}sizeOfBlackWhiteBlackRun(f,m,x,v){const y=Math.abs(v-m)>Math.abs(x-f);if(y){let Re=f;f=m,m=Re,Re=x,x=v,v=Re}const E=Math.abs(x-f),k=Math.abs(v-m);let L=-E/2;const q=f<x?1:-1,Q=m<v?1:-1;let le=0;const fe=x+q;for(let Re=f,$e=m;Re!==fe;Re+=q){const Ke=y?$e:Re,ot=y?Re:$e;if(le===1===this.image.get(Ke,ot)){if(le===2)return et.distance(Re,$e,f,m);le++}if(L+=k,L>0){if($e===v)break;$e+=Q,L-=E}}return le===2?et.distance(x+q,v,f,m):NaN}findAlignmentInRegion(f,m,x,v){const y=Math.floor(v*f),E=Math.max(0,m-y),k=Math.min(this.image.getWidth()-1,m+y);if(k-E<f*3)throw new Z("Alignment top exceeds estimated module size.");const L=Math.max(0,x-y),q=Math.min(this.image.getHeight()-1,x+y);if(q-L<f*3)throw new Z("Alignment bottom exceeds estimated module size.");return new Dn(this.image,E,L,k-E,q-L,f,this.resultPointCallback).find()}}class ks{constructor(){this.decoder=new mr}getDecoder(){return this.decoder}decode(f,m){let x,v;if(m!=null&&m.get(G.PURE_BARCODE)!==void 0){const L=ks.extractPureBits(f.getBlackMatrix());x=this.decoder.decodeBitMatrix(L,m),v=ks.NO_POINTS}else{const L=new $n(f.getBlackMatrix()).detect(m);x=this.decoder.decodeBitMatrix(L.getBits(),m),v=L.getPoints()}x.getOther()instanceof yt&&x.getOther().applyMirroredCorrection(v);const y=new X(x.getText(),x.getRawBytes(),void 0,v,se.QR_CODE,void 0),E=x.getByteSegments();E!==null&&y.putMetadata(Ce.BYTE_SEGMENTS,E);const k=x.getECLevel();return k!==null&&y.putMetadata(Ce.ERROR_CORRECTION_LEVEL,k),x.hasStructuredAppend()&&(y.putMetadata(Ce.STRUCTURED_APPEND_SEQUENCE,x.getStructuredAppendSequenceNumber()),y.putMetadata(Ce.STRUCTURED_APPEND_PARITY,x.getStructuredAppendParity())),y}reset(){}static extractPureBits(f){const m=f.getTopLeftOnBit(),x=f.getBottomRightOnBit();if(m===null||x===null)throw new Z;const v=this.moduleSize(m,f);let y=m[1],E=x[1],k=m[0],L=x[0];if(k>=L||y>=E)throw new Z;if(E-y!==L-k&&(L=k+(E-y),L>=f.getWidth()))throw new Z;const q=Math.round((L-k+1)/v),Q=Math.round((E-y+1)/v);if(q<=0||Q<=0)throw new Z;if(Q!==q)throw new Z;const le=Math.floor(v/2);y+=le,k+=le;const fe=k+Math.floor((q-1)*v)-L;if(fe>0){if(fe>le)throw new Z;k-=fe}const Re=y+Math.floor((Q-1)*v)-E;if(Re>0){if(Re>le)throw new Z;y-=Re}const $e=new ee(q,Q);for(let Ke=0;Ke<Q;Ke++){const ot=y+Math.floor(Ke*v);for(let Nt=0;Nt<q;Nt++)f.get(k+Math.floor(Nt*v),ot)&&$e.set(Nt,Ke)}return $e}static moduleSize(f,m){const x=m.getHeight(),v=m.getWidth();let y=f[0],E=f[1],k=!0,L=0;for(;y<v&&E<x;){if(k!==m.get(y,E)){if(++L===5)break;k=!k}y++,E++}if(y===v||E===x)throw new Z;return(y-f[0])/7}}ks.NO_POINTS=new Array;class Ir{PDF417Common(){}static getBitCountSum(f){return et.sum(f)}static toIntArray(f){if(f==null||!f.length)return Ir.EMPTY_INT_ARRAY;const m=new Int32Array(f.length);let x=0;for(const v of f)m[x++]=v;return m}static getCodeword(f){const m=A.binarySearch(Ir.SYMBOL_TABLE,f&262143);return m<0?-1:(Ir.CODEWORD_TABLE[m]-1)%Ir.NUMBER_OF_CODEWORDS}}Ir.NUMBER_OF_CODEWORDS=929,Ir.MAX_CODEWORDS_IN_BARCODE=Ir.NUMBER_OF_CODEWORDS-1,Ir.MIN_ROWS_IN_BARCODE=3,Ir.MAX_ROWS_IN_BARCODE=90,Ir.MODULES_IN_CODEWORD=17,Ir.MODULES_IN_STOP_PATTERN=18,Ir.BARS_IN_MODULE=8,Ir.EMPTY_INT_ARRAY=new Int32Array([]),Ir.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ir.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Gs{constructor(f,m){this.bits=f,this.points=m}getBits(){return this.bits}getPoints(){return this.points}}class Ur{static detectMultiple(f,m,x){let v=f.getBlackMatrix(),y=Ur.detect(x,v);return y.length||(v=v.clone(),v.rotate180(),y=Ur.detect(x,v)),new Gs(v,y)}static detect(f,m){const x=new Array;let v=0,y=0,E=!1;for(;v<m.getHeight();){const k=Ur.findVertices(m,v,y);if(k[0]==null&&k[3]==null){if(!E)break;E=!1,y=0;for(const L of x)L[1]!=null&&(v=Math.trunc(Math.max(v,L[1].getY()))),L[3]!=null&&(v=Math.max(v,Math.trunc(L[3].getY())));v+=Ur.ROW_STEP;continue}if(E=!0,x.push(k),!f)break;k[2]!=null?(y=Math.trunc(k[2].getX()),v=Math.trunc(k[2].getY())):(y=Math.trunc(k[4].getX()),v=Math.trunc(k[4].getY()))}return x}static findVertices(f,m,x){const v=f.getHeight(),y=f.getWidth(),E=new Array(8);return Ur.copyToResult(E,Ur.findRowsWithPattern(f,v,y,m,x,Ur.START_PATTERN),Ur.INDEXES_START_PATTERN),E[4]!=null&&(x=Math.trunc(E[4].getX()),m=Math.trunc(E[4].getY())),Ur.copyToResult(E,Ur.findRowsWithPattern(f,v,y,m,x,Ur.STOP_PATTERN),Ur.INDEXES_STOP_PATTERN),E}static copyToResult(f,m,x){for(let v=0;v<x.length;v++)f[x[v]]=m[v]}static findRowsWithPattern(f,m,x,v,y,E){const k=new Array(4);let L=!1;const q=new Int32Array(E.length);for(;v<m;v+=Ur.ROW_STEP){let le=Ur.findGuardPattern(f,y,v,x,!1,E,q);if(le!=null){for(;v>0;){const fe=Ur.findGuardPattern(f,y,--v,x,!1,E,q);if(fe!=null)le=fe;else{v++;break}}k[0]=new Ve(le[0],v),k[1]=new Ve(le[1],v),L=!0;break}}let Q=v+1;if(L){let le=0,fe=Int32Array.from([Math.trunc(k[0].getX()),Math.trunc(k[1].getX())]);for(;Q<m;Q++){const Re=Ur.findGuardPattern(f,fe[0],Q,x,!1,E,q);if(Re!=null&&Math.abs(fe[0]-Re[0])<Ur.MAX_PATTERN_DRIFT&&Math.abs(fe[1]-Re[1])<Ur.MAX_PATTERN_DRIFT)fe=Re,le=0;else{if(le>Ur.SKIPPED_ROW_COUNT_MAX)break;le++}}Q-=le+1,k[2]=new Ve(fe[0],Q),k[3]=new Ve(fe[1],Q)}return Q-v<Ur.BARCODE_MIN_HEIGHT&&A.fill(k,null),k}static findGuardPattern(f,m,x,v,y,E,k){A.fillWithin(k,0,k.length,0);let L=m,q=0;for(;f.get(L,x)&&L>0&&q++<Ur.MAX_PIXEL_DRIFT;)L--;let Q=L,le=0,fe=E.length;for(let Re=y;Q<v;Q++)if(f.get(Q,x)!==Re)k[le]++;else{if(le===fe-1){if(Ur.patternMatchVariance(k,E,Ur.MAX_INDIVIDUAL_VARIANCE)<Ur.MAX_AVG_VARIANCE)return new Int32Array([L,Q]);L+=k[0]+k[1],w.arraycopy(k,2,k,0,le-1),k[le-1]=0,k[le]=0,le--}else le++;k[le]=1,Re=!Re}return le===fe-1&&Ur.patternMatchVariance(k,E,Ur.MAX_INDIVIDUAL_VARIANCE)<Ur.MAX_AVG_VARIANCE?new Int32Array([L,Q-1]):null}static patternMatchVariance(f,m,x){let v=f.length,y=0,E=0;for(let q=0;q<v;q++)y+=f[q],E+=m[q];if(y<E)return 1/0;let k=y/E;x*=k;let L=0;for(let q=0;q<v;q++){let Q=f[q],le=m[q]*k,fe=Q>le?Q-le:le-Q;if(fe>x)return 1/0;L+=fe}return L/y}}Ur.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ur.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ur.MAX_AVG_VARIANCE=.42,Ur.MAX_INDIVIDUAL_VARIANCE=.8,Ur.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ur.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ur.MAX_PIXEL_DRIFT=3,Ur.MAX_PATTERN_DRIFT=5,Ur.SKIPPED_ROW_COUNT_MAX=25,Ur.ROW_STEP=5,Ur.BARCODE_MIN_HEIGHT=10;class ha{constructor(f,m){if(m.length===0)throw new h;this.field=f;let x=m.length;if(x>1&&m[0]===0){let v=1;for(;v<x&&m[v]===0;)v++;v===x?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(x-v),w.arraycopy(m,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=m}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(f){return this.coefficients[this.coefficients.length-1-f]}evaluateAt(f){if(f===0)return this.getCoefficient(0);if(f===1){let v=0;for(let y of this.coefficients)v=this.field.add(v,y);return v}let m=this.coefficients[0],x=this.coefficients.length;for(let v=1;v<x;v++)m=this.field.add(this.field.multiply(f,m),this.coefficients[v]);return m}add(f){if(!this.field.equals(f.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return f;if(f.isZero())return this;let m=this.coefficients,x=f.coefficients;if(m.length>x.length){let E=m;m=x,x=E}let v=new Int32Array(x.length),y=x.length-m.length;w.arraycopy(x,0,v,0,y);for(let E=y;E<x.length;E++)v[E]=this.field.add(m[E-y],x[E]);return new ha(this.field,v)}subtract(f){if(!this.field.equals(f.field))throw new h("ModulusPolys do not have same ModulusGF field");return f.isZero()?this:this.add(f.negative())}multiply(f){return f instanceof ha?this.multiplyOther(f):this.multiplyScalar(f)}multiplyOther(f){if(!this.field.equals(f.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||f.isZero())return new ha(this.field,new Int32Array([0]));let m=this.coefficients,x=m.length,v=f.coefficients,y=v.length,E=new Int32Array(x+y-1);for(let k=0;k<x;k++){let L=m[k];for(let q=0;q<y;q++)E[k+q]=this.field.add(E[k+q],this.field.multiply(L,v[q]))}return new ha(this.field,E)}negative(){let f=this.coefficients.length,m=new Int32Array(f);for(let x=0;x<f;x++)m[x]=this.field.subtract(0,this.coefficients[x]);return new ha(this.field,m)}multiplyScalar(f){if(f===0)return new ha(this.field,new Int32Array([0]));if(f===1)return this;let m=this.coefficients.length,x=new Int32Array(m);for(let v=0;v<m;v++)x[v]=this.field.multiply(this.coefficients[v],f);return new ha(this.field,x)}multiplyByMonomial(f,m){if(f<0)throw new h;if(m===0)return new ha(this.field,new Int32Array([0]));let x=this.coefficients.length,v=new Int32Array(x+f);for(let y=0;y<x;y++)v[y]=this.field.multiply(this.coefficients[y],m);return new ha(this.field,v)}toString(){let f=new F;for(let m=this.getDegree();m>=0;m--){let x=this.getCoefficient(m);x!==0&&(x<0?(f.append(" - "),x=-x):f.length()>0&&f.append(" + "),(m===0||x!==1)&&f.append(x),m!==0&&(m===1?f.append("x"):(f.append("x^"),f.append(m))))}return f.toString()}}class af{add(f,m){return(f+m)%this.modulus}subtract(f,m){return(this.modulus+f-m)%this.modulus}exp(f){return this.expTable[f]}log(f){if(f===0)throw new h;return this.logTable[f]}inverse(f){if(f===0)throw new Ue;return this.expTable[this.modulus-this.logTable[f]-1]}multiply(f,m){return f===0||m===0?0:this.expTable[(this.logTable[f]+this.logTable[m])%(this.modulus-1)]}getSize(){return this.modulus}equals(f){return f===this}}class ma extends af{constructor(f,m){super(),this.modulus=f,this.expTable=new Int32Array(f),this.logTable=new Int32Array(f);let x=1;for(let v=0;v<f;v++)this.expTable[v]=x,x=x*m%f;for(let v=0;v<f-1;v++)this.logTable[this.expTable[v]]=v;this.zero=new ha(this,new Int32Array([0])),this.one=new ha(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(f,m){if(f<0)throw new h;if(m===0)return this.zero;let x=new Int32Array(f+1);return x[0]=m,new ha(this,x)}}ma.PDF417_GF=new ma(Ir.NUMBER_OF_CODEWORDS,3);class Mu{constructor(){this.field=ma.PDF417_GF}decode(f,m,x){let v=new ha(this.field,f),y=new Int32Array(m),E=!1;for(let $e=m;$e>0;$e--){let Ke=v.evaluateAt(this.field.exp($e));y[m-$e]=Ke,Ke!==0&&(E=!0)}if(!E)return 0;let k=this.field.getOne();if(x!=null)for(const $e of x){let Ke=this.field.exp(f.length-1-$e),ot=new ha(this.field,new Int32Array([this.field.subtract(0,Ke),1]));k=k.multiply(ot)}let L=new ha(this.field,y),q=this.runEuclideanAlgorithm(this.field.buildMonomial(m,1),L,m),Q=q[0],le=q[1],fe=this.findErrorLocations(Q),Re=this.findErrorMagnitudes(le,Q,fe);for(let $e=0;$e<fe.length;$e++){let Ke=f.length-1-this.field.log(fe[$e]);if(Ke<0)throw g.getChecksumInstance();f[Ke]=this.field.subtract(f[Ke],Re[$e])}return fe.length}runEuclideanAlgorithm(f,m,x){if(f.getDegree()<m.getDegree()){let fe=f;f=m,m=fe}let v=f,y=m,E=this.field.getZero(),k=this.field.getOne();for(;y.getDegree()>=Math.round(x/2);){let fe=v,Re=E;if(v=y,E=k,v.isZero())throw g.getChecksumInstance();y=fe;let $e=this.field.getZero(),Ke=v.getCoefficient(v.getDegree()),ot=this.field.inverse(Ke);for(;y.getDegree()>=v.getDegree()&&!y.isZero();){let Nt=y.getDegree()-v.getDegree(),zt=this.field.multiply(y.getCoefficient(y.getDegree()),ot);$e=$e.add(this.field.buildMonomial(Nt,zt)),y=y.subtract(v.multiplyByMonomial(Nt,zt))}k=$e.multiply(E).subtract(Re).negative()}let L=k.getCoefficient(0);if(L===0)throw g.getChecksumInstance();let q=this.field.inverse(L),Q=k.multiply(q),le=y.multiply(q);return[Q,le]}findErrorLocations(f){let m=f.getDegree(),x=new Int32Array(m),v=0;for(let y=1;y<this.field.getSize()&&v<m;y++)f.evaluateAt(y)===0&&(x[v]=this.field.inverse(y),v++);if(v!==m)throw g.getChecksumInstance();return x}findErrorMagnitudes(f,m,x){let v=m.getDegree(),y=new Int32Array(v);for(let q=1;q<=v;q++)y[v-q]=this.field.multiply(q,m.getCoefficient(q));let E=new ha(this.field,y),k=x.length,L=new Int32Array(k);for(let q=0;q<k;q++){let Q=this.field.inverse(x[q]),le=this.field.subtract(0,f.evaluateAt(Q)),fe=this.field.inverse(E.evaluateAt(Q));L[q]=this.field.multiply(le,fe)}return L}}class Qo{constructor(f,m,x,v,y){f instanceof Qo?this.constructor_2(f):this.constructor_1(f,m,x,v,y)}constructor_1(f,m,x,v,y){const E=m==null||x==null,k=v==null||y==null;if(E&&k)throw new Z;E?(m=new Ve(0,v.getY()),x=new Ve(0,y.getY())):k&&(v=new Ve(f.getWidth()-1,m.getY()),y=new Ve(f.getWidth()-1,x.getY())),this.image=f,this.topLeft=m,this.bottomLeft=x,this.topRight=v,this.bottomRight=y,this.minX=Math.trunc(Math.min(m.getX(),x.getX())),this.maxX=Math.trunc(Math.max(v.getX(),y.getX())),this.minY=Math.trunc(Math.min(m.getY(),v.getY())),this.maxY=Math.trunc(Math.max(x.getY(),y.getY()))}constructor_2(f){this.image=f.image,this.topLeft=f.getTopLeft(),this.bottomLeft=f.getBottomLeft(),this.topRight=f.getTopRight(),this.bottomRight=f.getBottomRight(),this.minX=f.getMinX(),this.maxX=f.getMaxX(),this.minY=f.getMinY(),this.maxY=f.getMaxY()}static merge(f,m){return f==null?m:m==null?f:new Qo(f.image,f.topLeft,f.bottomLeft,m.topRight,m.bottomRight)}addMissingRows(f,m,x){let v=this.topLeft,y=this.bottomLeft,E=this.topRight,k=this.bottomRight;if(f>0){let L=x?this.topLeft:this.topRight,q=Math.trunc(L.getY()-f);q<0&&(q=0);let Q=new Ve(L.getX(),q);x?v=Q:E=Q}if(m>0){let L=x?this.bottomLeft:this.bottomRight,q=Math.trunc(L.getY()+m);q>=this.image.getHeight()&&(q=this.image.getHeight()-1);let Q=new Ve(L.getX(),q);x?y=Q:k=Q}return new Qo(this.image,v,y,E,k)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Gc{constructor(f,m,x,v){this.columnCount=f,this.errorCorrectionLevel=v,this.rowCountUpperPart=m,this.rowCountLowerPart=x,this.rowCount=m+x}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Jo{constructor(){this.buffer=""}static form(f,m){let x=-1;function v(E,k,L,q,Q,le){if(E==="%%")return"%";if(m[++x]===void 0)return;E=q?parseInt(q.substr(1)):void 0;let fe=Q?parseInt(Q.substr(1)):void 0,Re;switch(le){case"s":Re=m[x];break;case"c":Re=m[x][0];break;case"f":Re=parseFloat(m[x]).toFixed(E);break;case"p":Re=parseFloat(m[x]).toPrecision(E);break;case"e":Re=parseFloat(m[x]).toExponential(E);break;case"x":Re=parseInt(m[x]).toString(fe||16);break;case"d":Re=parseFloat(parseInt(m[x],fe||10).toPrecision(E)).toFixed(0);break}Re=typeof Re=="object"?JSON.stringify(Re):(+Re).toString(fe);let $e=parseInt(L),Ke=L&&L[0]+""=="0"?"0":" ";for(;Re.length<$e;)Re=k!==void 0?Re+Ke:Ke+Re;return Re}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return f.replace(y,v)}format(f,...m){this.buffer+=Jo.form(f,m)}toString(){return this.buffer}}class el{constructor(f){this.boundingBox=new Qo(f),this.codewords=new Array(f.getMaxY()-f.getMinY()+1)}getCodewordNearby(f){let m=this.getCodeword(f);if(m!=null)return m;for(let x=1;x<el.MAX_NEARBY_DISTANCE;x++){let v=this.imageRowToCodewordIndex(f)-x;if(v>=0&&(m=this.codewords[v],m!=null)||(v=this.imageRowToCodewordIndex(f)+x,v<this.codewords.length&&(m=this.codewords[v],m!=null)))return m}return null}imageRowToCodewordIndex(f){return f-this.boundingBox.getMinY()}setCodeword(f,m){this.codewords[this.imageRowToCodewordIndex(f)]=m}getCodeword(f){return this.codewords[this.imageRowToCodewordIndex(f)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const f=new Jo;let m=0;for(const x of this.codewords){if(x==null){f.format("%3d:    |   %n",m++);continue}f.format("%3d: %3d|%3d%n",m++,x.getRowNumber(),x.getValue())}return f.toString()}}el.MAX_NEARBY_DISTANCE=5;class Al{constructor(){this.values=new Map}setValue(f){f=Math.trunc(f);let m=this.values.get(f);m==null&&(m=0),m++,this.values.set(f,m)}getValue(){let f=-1,m=new Array;for(const[x,v]of this.values.entries()){const y={getKey:()=>x,getValue:()=>v};y.getValue()>f?(f=y.getValue(),m=[],m.push(y.getKey())):y.getValue()===f&&m.push(y.getKey())}return Ir.toIntArray(m)}getConfidence(f){return this.values.get(f)}}class oo extends el{constructor(f,m){super(f),this._isLeft=m}setRowNumbers(){for(let f of this.getCodewords())f!=null&&f.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(f){let m=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(m,f);let x=this.getBoundingBox(),v=this._isLeft?x.getTopLeft():x.getTopRight(),y=this._isLeft?x.getBottomLeft():x.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(v.getY())),k=this.imageRowToCodewordIndex(Math.trunc(y.getY())),L=-1,q=1,Q=0;for(let le=E;le<k;le++){if(m[le]==null)continue;let fe=m[le],Re=fe.getRowNumber()-L;if(Re===0)Q++;else if(Re===1)q=Math.max(q,Q),Q=1,L=fe.getRowNumber();else if(Re<0||fe.getRowNumber()>=f.getRowCount()||Re>le)m[le]=null;else{let $e;q>2?$e=(q-2)*Re:$e=Re;let Ke=$e>=le;for(let ot=1;ot<=$e&&!Ke;ot++)Ke=m[le-ot]!=null;Ke?m[le]=null:(L=fe.getRowNumber(),Q=1)}}}getRowHeights(){let f=this.getBarcodeMetadata();if(f==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(f);let m=new Int32Array(f.getRowCount());for(let x of this.getCodewords())if(x!=null){let v=x.getRowNumber();if(v>=m.length)continue;m[v]++}return m}adjustIncompleteIndicatorColumnRowNumbers(f){let m=this.getBoundingBox(),x=this._isLeft?m.getTopLeft():m.getTopRight(),v=this._isLeft?m.getBottomLeft():m.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(x.getY())),E=this.imageRowToCodewordIndex(Math.trunc(v.getY())),k=this.getCodewords(),L=-1;for(let q=y;q<E;q++){if(k[q]==null)continue;let Q=k[q];Q.setRowNumberAsRowIndicatorColumn();let le=Q.getRowNumber()-L;le===0||(le===1?L=Q.getRowNumber():Q.getRowNumber()>=f.getRowCount()?k[q]=null:L=Q.getRowNumber())}}getBarcodeMetadata(){let f=this.getCodewords(),m=new Al,x=new Al,v=new Al,y=new Al;for(let k of f){if(k==null)continue;k.setRowNumberAsRowIndicatorColumn();let L=k.getValue()%30,q=k.getRowNumber();switch(this._isLeft||(q+=2),q%3){case 0:x.setValue(L*3+1);break;case 1:y.setValue(L/3),v.setValue(L%3);break;case 2:m.setValue(L+1);break}}if(m.getValue().length===0||x.getValue().length===0||v.getValue().length===0||y.getValue().length===0||m.getValue()[0]<1||x.getValue()[0]+v.getValue()[0]<Ir.MIN_ROWS_IN_BARCODE||x.getValue()[0]+v.getValue()[0]>Ir.MAX_ROWS_IN_BARCODE)return null;let E=new Gc(m.getValue()[0],x.getValue()[0],v.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(f,E),E}removeIncorrectCodewords(f,m){for(let x=0;x<f.length;x++){let v=f[x];if(f[x]==null)continue;let y=v.getValue()%30,E=v.getRowNumber();if(E>m.getRowCount()){f[x]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:y*3+1!==m.getRowCountUpperPart()&&(f[x]=null);break;case 1:(Math.trunc(y/3)!==m.getErrorCorrectionLevel()||y%3!==m.getRowCountLowerPart())&&(f[x]=null);break;case 2:y+1!==m.getColumnCount()&&(f[x]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Sl{constructor(f,m){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=f,this.barcodeColumnCount=f.getColumnCount(),this.boundingBox=m,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let f=Ir.MAX_CODEWORDS_IN_BARCODE,m;do m=f,f=this.adjustRowNumbersAndGetCount();while(f>0&&f<m);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(f){f!=null&&f.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let f=this.adjustRowNumbersByRow();if(f===0)return 0;for(let m=1;m<this.barcodeColumnCount+1;m++){let x=this.detectionResultColumns[m].getCodewords();for(let v=0;v<x.length;v++)x[v]!=null&&(x[v].hasValidRowNumber()||this.adjustRowNumbers(m,v,x))}return f}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let f=this.detectionResultColumns[0].getCodewords(),m=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let x=0;x<f.length;x++)if(f[x]!=null&&m[x]!=null&&f[x].getRowNumber()===m[x].getRowNumber())for(let v=1;v<=this.barcodeColumnCount;v++){let y=this.detectionResultColumns[v].getCodewords()[x];y!=null&&(y.setRowNumber(f[x].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[v].getCodewords()[x]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let f=0,m=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let x=0;x<m.length;x++){if(m[x]==null)continue;let v=m[x].getRowNumber(),y=0;for(let E=this.barcodeColumnCount+1;E>0&&y<this.ADJUST_ROW_NUMBER_SKIP;E--){let k=this.detectionResultColumns[E].getCodewords()[x];k!=null&&(y=Sl.adjustRowNumberIfValid(v,y,k),k.hasValidRowNumber()||f++)}}return f}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let f=0,m=this.detectionResultColumns[0].getCodewords();for(let x=0;x<m.length;x++){if(m[x]==null)continue;let v=m[x].getRowNumber(),y=0;for(let E=1;E<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;E++){let k=this.detectionResultColumns[E].getCodewords()[x];k!=null&&(y=Sl.adjustRowNumberIfValid(v,y,k),k.hasValidRowNumber()||f++)}}return f}static adjustRowNumberIfValid(f,m,x){return x==null||x.hasValidRowNumber()||(x.isValidRowNumber(f)?(x.setRowNumber(f),m=0):++m),m}adjustRowNumbers(f,m,x){if(!this.detectionResultColumns[f-1])return;let v=x[m],y=this.detectionResultColumns[f-1].getCodewords(),E=y;this.detectionResultColumns[f+1]!=null&&(E=this.detectionResultColumns[f+1].getCodewords());let k=new Array(14);k[2]=y[m],k[3]=E[m],m>0&&(k[0]=x[m-1],k[4]=y[m-1],k[5]=E[m-1]),m>1&&(k[8]=x[m-2],k[10]=y[m-2],k[11]=E[m-2]),m<x.length-1&&(k[1]=x[m+1],k[6]=y[m+1],k[7]=E[m+1]),m<x.length-2&&(k[9]=x[m+2],k[12]=y[m+2],k[13]=E[m+2]);for(let L of k)if(Sl.adjustRowNumber(v,L))return}static adjustRowNumber(f,m){return m==null?!1:m.hasValidRowNumber()&&m.getBucket()===f.getBucket()?(f.setRowNumber(m.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(f){this.boundingBox=f}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(f,m){this.detectionResultColumns[f]=m}getDetectionResultColumn(f){return this.detectionResultColumns[f]}toString(){let f=this.detectionResultColumns[0];f==null&&(f=this.detectionResultColumns[this.barcodeColumnCount+1]);let m=new Jo;for(let x=0;x<f.getCodewords().length;x++){m.format("CW %3d:",x);for(let v=0;v<this.barcodeColumnCount+2;v++){if(this.detectionResultColumns[v]==null){m.format("    |   ");continue}let y=this.detectionResultColumns[v].getCodewords()[x];if(y==null){m.format("    |   ");continue}m.format(" %3d|%3d",y.getRowNumber(),y.getValue())}m.format("%n")}return m.toString()}}class tl{constructor(f,m,x,v){this.rowNumber=tl.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(f),this.endX=Math.trunc(m),this.bucket=Math.trunc(x),this.value=Math.trunc(v)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(f){return f!==tl.BARCODE_ROW_UNKNOWN&&this.bucket===f%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(f){this.rowNumber=f}toString(){return this.rowNumber+"|"+this.value}}tl.BARCODE_ROW_UNKNOWN=-1;class Oa{static initialize(){for(let f=0;f<Ir.SYMBOL_TABLE.length;f++){let m=Ir.SYMBOL_TABLE[f],x=m&1;for(let v=0;v<Ir.BARS_IN_MODULE;v++){let y=0;for(;(m&1)===x;)y+=1,m>>=1;x=m&1,Oa.RATIOS_TABLE[f]||(Oa.RATIOS_TABLE[f]=new Array(Ir.BARS_IN_MODULE)),Oa.RATIOS_TABLE[f][Ir.BARS_IN_MODULE-v-1]=Math.fround(y/Ir.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(f){let m=Oa.getDecodedCodewordValue(Oa.sampleBitCounts(f));return m!==-1?m:Oa.getClosestDecodedValue(f)}static sampleBitCounts(f){let m=et.sum(f),x=new Int32Array(Ir.BARS_IN_MODULE),v=0,y=0;for(let E=0;E<Ir.MODULES_IN_CODEWORD;E++){let k=m/(2*Ir.MODULES_IN_CODEWORD)+E*m/Ir.MODULES_IN_CODEWORD;y+f[v]<=k&&(y+=f[v],v++),x[v]++}return x}static getDecodedCodewordValue(f){let m=Oa.getBitValue(f);return Ir.getCodeword(m)===-1?-1:m}static getBitValue(f){let m=0;for(let x=0;x<f.length;x++)for(let v=0;v<f[x];v++)m=m<<1|(x%2===0?1:0);return Math.trunc(m)}static getClosestDecodedValue(f){let m=et.sum(f),x=new Array(Ir.BARS_IN_MODULE);if(m>1)for(let E=0;E<x.length;E++)x[E]=Math.fround(f[E]/m);let v=Jt.MAX_VALUE,y=-1;this.bSymbolTableReady||Oa.initialize();for(let E=0;E<Oa.RATIOS_TABLE.length;E++){let k=0,L=Oa.RATIOS_TABLE[E];for(let q=0;q<Ir.BARS_IN_MODULE;q++){let Q=Math.fround(L[q]-x[q]);if(k+=Math.fround(Q*Q),k>=v)break}k<v&&(v=k,y=Ir.SYMBOL_TABLE[E])}return y}}Oa.bSymbolTableReady=!1,Oa.RATIOS_TABLE=new Array(Ir.SYMBOL_TABLE.length).map(oe=>new Array(Ir.BARS_IN_MODULE));class Lu{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(f){this.segmentIndex=f}getFileId(){return this.fileId}setFileId(f){this.fileId=f}getOptionalData(){return this.optionalData}setOptionalData(f){this.optionalData=f}isLastSegment(){return this.lastSegment}setLastSegment(f){this.lastSegment=f}getSegmentCount(){return this.segmentCount}setSegmentCount(f){this.segmentCount=f}getSender(){return this.sender||null}setSender(f){this.sender=f}getAddressee(){return this.addressee||null}setAddressee(f){this.addressee=f}getFileName(){return this.fileName}setFileName(f){this.fileName=f}getFileSize(){return this.fileSize}setFileSize(f){this.fileSize=f}getChecksum(){return this.checksum}setChecksum(f){this.checksum=f}getTimestamp(){return this.timestamp}setTimestamp(f){this.timestamp=f}}class nc{static parseLong(f,m=void 0){return parseInt(f,m)}}class ac extends u{}ac.kind="NullPointerException";class Wc{writeBytes(f){this.writeBytesOffset(f,0,f.length)}writeBytesOffset(f,m,x){if(f==null)throw new ac;if(m<0||m>f.length||x<0||m+x>f.length||m+x<0)throw new _;if(x===0)return;for(let v=0;v<x;v++)this.write(f[m+v])}flush(){}close(){}}class Fu extends u{}class Dh extends Wc{constructor(f=32){if(super(),this.count=0,f<0)throw new h("Negative initial size: "+f);this.buf=new Uint8Array(f)}ensureCapacity(f){f-this.buf.length>0&&this.grow(f)}grow(f){let x=this.buf.length<<1;if(x-f<0&&(x=f),x<0){if(f<0)throw new Fu;x=j.MAX_VALUE}this.buf=A.copyOfUint8Array(this.buf,x)}write(f){this.ensureCapacity(this.count+1),this.buf[this.count]=f,this.count+=1}writeBytesOffset(f,m,x){if(m<0||m>f.length||x<0||m+x-f.length>0)throw new _;this.ensureCapacity(this.count+x),w.arraycopy(f,m,this.buf,this.count,x),this.count+=x}writeTo(f){f.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return A.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(f){return f?typeof f=="string"?this.toString_string(f):this.toString_number(f):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(f){return new String(this.buf).toString()}toString_number(f){return new String(this.buf).toString()}close(){}}var An;(function(oe){oe[oe.ALPHA=0]="ALPHA",oe[oe.LOWER=1]="LOWER",oe[oe.MIXED=2]="MIXED",oe[oe.PUNCT=3]="PUNCT",oe[oe.ALPHA_SHIFT=4]="ALPHA_SHIFT",oe[oe.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(An||(An={}));function Hi(){if(typeof window<"u")return window.BigInt||null;if(typeof Lv<"u")return Lv.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Kc;function Oo(oe){if(typeof Kc>"u"&&(Kc=Hi()),Kc===null)throw new Error("BigInt is not supported!");return Kc(oe)}function sc(){let oe=[];oe[0]=Oo(1);let f=Oo(900);oe[1]=f;for(let m=2;m<16;m++)oe[m]=oe[m-1]*f;return oe}class Et{static decode(f,m){let x=new F(""),v=I.ISO8859_1;x.enableDecoding(v);let y=1,E=f[y++],k=new Lu;for(;y<f[0];){switch(E){case Et.TEXT_COMPACTION_MODE_LATCH:y=Et.textCompaction(f,y,x);break;case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:y=Et.byteCompaction(E,f,v,y,x);break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(f[y++]);break;case Et.NUMERIC_COMPACTION_MODE_LATCH:y=Et.numericCompaction(f,y,x);break;case Et.ECI_CHARSET:I.getCharacterSetECIByValue(f[y++]);break;case Et.ECI_GENERAL_PURPOSE:y+=2;break;case Et.ECI_USER_DEFINED:y++;break;case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=Et.decodeMacroBlock(f,y,k);break;case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:throw new O;default:y--,y=Et.textCompaction(f,y,x);break}if(y<f.length)E=f[y++];else throw O.getFormatInstance()}if(x.length()===0)throw O.getFormatInstance();let L=new xe(null,x.toString(),null,m);return L.setOther(k),L}static decodeMacroBlock(f,m,x){if(m+Et.NUMBER_OF_SEQUENCE_CODEWORDS>f[0])throw O.getFormatInstance();let v=new Int32Array(Et.NUMBER_OF_SEQUENCE_CODEWORDS);for(let k=0;k<Et.NUMBER_OF_SEQUENCE_CODEWORDS;k++,m++)v[k]=f[m];x.setSegmentIndex(j.parseInt(Et.decodeBase900toBase10(v,Et.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new F;m=Et.textCompaction(f,m,y),x.setFileId(y.toString());let E=-1;for(f[m]===Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=m+1);m<f[0];)switch(f[m]){case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(m++,f[m]){case Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let k=new F;m=Et.textCompaction(f,m+1,k),x.setFileName(k.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let L=new F;m=Et.textCompaction(f,m+1,L),x.setSender(L.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let q=new F;m=Et.textCompaction(f,m+1,q),x.setAddressee(q.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let Q=new F;m=Et.numericCompaction(f,m+1,Q),x.setSegmentCount(j.parseInt(Q.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let le=new F;m=Et.numericCompaction(f,m+1,le),x.setTimestamp(nc.parseLong(le.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let fe=new F;m=Et.numericCompaction(f,m+1,fe),x.setChecksum(j.parseInt(fe.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Re=new F;m=Et.numericCompaction(f,m+1,Re),x.setFileSize(nc.parseLong(Re.toString()));break;default:throw O.getFormatInstance()}break;case Et.MACRO_PDF417_TERMINATOR:m++,x.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(E!==-1){let k=m-E;x.isLastSegment()&&k--,x.setOptionalData(A.copyOfRange(f,E,E+k))}return m}static textCompaction(f,m,x){let v=new Int32Array((f[0]-m)*2),y=new Int32Array((f[0]-m)*2),E=0,k=!1;for(;m<f[0]&&!k;){let L=f[m++];if(L<Et.TEXT_COMPACTION_MODE_LATCH)v[E]=L/30,v[E+1]=L%30,E+=2;else switch(L){case Et.TEXT_COMPACTION_MODE_LATCH:v[E++]=Et.TEXT_COMPACTION_MODE_LATCH;break;case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:m--,k=!0;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v[E]=Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,L=f[m++],y[E]=L,E++;break}}return Et.decodeTextCompaction(v,y,E,x),m}static decodeTextCompaction(f,m,x,v){let y=An.ALPHA,E=An.ALPHA,k=0;for(;k<x;){let L=f[k],q="";switch(y){case An.ALPHA:if(L<26)q=String.fromCharCode(65+L);else switch(L){case 26:q=" ";break;case Et.LL:y=An.LOWER;break;case Et.ML:y=An.MIXED;break;case Et.PS:E=y,y=An.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=An.ALPHA;break}break;case An.LOWER:if(L<26)q=String.fromCharCode(97+L);else switch(L){case 26:q=" ";break;case Et.AS:E=y,y=An.ALPHA_SHIFT;break;case Et.ML:y=An.MIXED;break;case Et.PS:E=y,y=An.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=An.ALPHA;break}break;case An.MIXED:if(L<Et.PL)q=Et.MIXED_CHARS[L];else switch(L){case Et.PL:y=An.PUNCT;break;case 26:q=" ";break;case Et.LL:y=An.LOWER;break;case Et.AL:y=An.ALPHA;break;case Et.PS:E=y,y=An.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=An.ALPHA;break}break;case An.PUNCT:if(L<Et.PAL)q=Et.PUNCT_CHARS[L];else switch(L){case Et.PAL:y=An.ALPHA;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=An.ALPHA;break}break;case An.ALPHA_SHIFT:if(y=E,L<26)q=String.fromCharCode(65+L);else switch(L){case 26:q=" ";break;case Et.TEXT_COMPACTION_MODE_LATCH:y=An.ALPHA;break}break;case An.PUNCT_SHIFT:if(y=E,L<Et.PAL)q=Et.PUNCT_CHARS[L];else switch(L){case Et.PAL:y=An.ALPHA;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=An.ALPHA;break}break}q!==""&&v.append(q),k++}}static byteCompaction(f,m,x,v,y){let E=new Dh,k=0,L=0,q=!1;switch(f){case Et.BYTE_COMPACTION_MODE_LATCH:let Q=new Int32Array(6),le=m[v++];for(;v<m[0]&&!q;)switch(Q[k++]=le,L=900*L+le,le=m[v++],le){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:v--,q=!0;break;default:if(k%5===0&&k>0){for(let fe=0;fe<6;++fe)E.write(Number(Oo(L)>>Oo(8*(5-fe))));L=0,k=0}break}v===m[0]&&le<Et.TEXT_COMPACTION_MODE_LATCH&&(Q[k++]=le);for(let fe=0;fe<k;fe++)E.write(Q[fe]);break;case Et.BYTE_COMPACTION_MODE_LATCH_6:for(;v<m[0]&&!q;){let fe=m[v++];if(fe<Et.TEXT_COMPACTION_MODE_LATCH)k++,L=900*L+fe;else switch(fe){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:v--,q=!0;break}if(k%5===0&&k>0){for(let Re=0;Re<6;++Re)E.write(Number(Oo(L)>>Oo(8*(5-Re))));L=0,k=0}}break}return y.append(R.decode(E.toByteArray(),x)),v}static numericCompaction(f,m,x){let v=0,y=!1,E=new Int32Array(Et.MAX_NUMERIC_CODEWORDS);for(;m<f[0]&&!y;){let k=f[m++];if(m===f[0]&&(y=!0),k<Et.TEXT_COMPACTION_MODE_LATCH)E[v]=k,v++;else switch(k){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:m--,y=!0;break}(v%Et.MAX_NUMERIC_CODEWORDS===0||k===Et.NUMERIC_COMPACTION_MODE_LATCH||y)&&v>0&&(x.append(Et.decodeBase900toBase10(E,v)),v=0)}return m}static decodeBase900toBase10(f,m){let x=Oo(0);for(let y=0;y<m;y++)x+=Et.EXP900[m-y-1]*Oo(f[y]);let v=x.toString();if(v.charAt(0)!=="1")throw new O;return v.substring(1)}}Et.TEXT_COMPACTION_MODE_LATCH=900,Et.BYTE_COMPACTION_MODE_LATCH=901,Et.NUMERIC_COMPACTION_MODE_LATCH=902,Et.BYTE_COMPACTION_MODE_LATCH_6=924,Et.ECI_USER_DEFINED=925,Et.ECI_GENERAL_PURPOSE=926,Et.ECI_CHARSET=927,Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Et.MACRO_PDF417_TERMINATOR=922,Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Et.MAX_NUMERIC_CODEWORDS=15,Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Et.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Et.PL=25,Et.LL=27,Et.AS=27,Et.ML=28,Et.AL=28,Et.PS=29,Et.PAL=29,Et.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Et.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Et.EXP900=Hi()?sc():[],Et.NUMBER_OF_SEQUENCE_CODEWORDS=2;class z{constructor(){}static decode(f,m,x,v,y,E,k){let L=new Qo(f,m,x,v,y),q=null,Q=null,le;for(let $e=!0;;$e=!1){if(m!=null&&(q=z.getRowIndicatorColumn(f,L,m,!0,E,k)),v!=null&&(Q=z.getRowIndicatorColumn(f,L,v,!1,E,k)),le=z.merge(q,Q),le==null)throw Z.getNotFoundInstance();let Ke=le.getBoundingBox();if($e&&Ke!=null&&(Ke.getMinY()<L.getMinY()||Ke.getMaxY()>L.getMaxY()))L=Ke;else break}le.setBoundingBox(L);let fe=le.getBarcodeColumnCount()+1;le.setDetectionResultColumn(0,q),le.setDetectionResultColumn(fe,Q);let Re=q!=null;for(let $e=1;$e<=fe;$e++){let Ke=Re?$e:fe-$e;if(le.getDetectionResultColumn(Ke)!==void 0)continue;let ot;Ke===0||Ke===fe?ot=new oo(L,Ke===0):ot=new el(L),le.setDetectionResultColumn(Ke,ot);let Nt=-1,zt=Nt;for(let Gt=L.getMinY();Gt<=L.getMaxY();Gt++){if(Nt=z.getStartColumn(le,Ke,Gt,Re),Nt<0||Nt>L.getMaxX()){if(zt===-1)continue;Nt=zt}let $t=z.detectCodeword(f,L.getMinX(),L.getMaxX(),Re,Nt,Gt,E,k);$t!=null&&(ot.setCodeword(Gt,$t),zt=Nt,E=Math.min(E,$t.getWidth()),k=Math.max(k,$t.getWidth()))}}return z.createDecoderResult(le)}static merge(f,m){if(f==null&&m==null)return null;let x=z.getBarcodeMetadata(f,m);if(x==null)return null;let v=Qo.merge(z.adjustBoundingBox(f),z.adjustBoundingBox(m));return new Sl(x,v)}static adjustBoundingBox(f){if(f==null)return null;let m=f.getRowHeights();if(m==null)return null;let x=z.getMax(m),v=0;for(let k of m)if(v+=x-k,k>0)break;let y=f.getCodewords();for(let k=0;v>0&&y[k]==null;k++)v--;let E=0;for(let k=m.length-1;k>=0&&(E+=x-m[k],!(m[k]>0));k--);for(let k=y.length-1;E>0&&y[k]==null;k--)E--;return f.getBoundingBox().addMissingRows(v,E,f.isLeft())}static getMax(f){let m=-1;for(let x of f)m=Math.max(m,x);return m}static getBarcodeMetadata(f,m){let x;if(f==null||(x=f.getBarcodeMetadata())==null)return m==null?null:m.getBarcodeMetadata();let v;return m==null||(v=m.getBarcodeMetadata())==null?x:x.getColumnCount()!==v.getColumnCount()&&x.getErrorCorrectionLevel()!==v.getErrorCorrectionLevel()&&x.getRowCount()!==v.getRowCount()?null:x}static getRowIndicatorColumn(f,m,x,v,y,E){let k=new oo(m,v);for(let L=0;L<2;L++){let q=L===0?1:-1,Q=Math.trunc(Math.trunc(x.getX()));for(let le=Math.trunc(Math.trunc(x.getY()));le<=m.getMaxY()&&le>=m.getMinY();le+=q){let fe=z.detectCodeword(f,0,f.getWidth(),v,Q,le,y,E);fe!=null&&(k.setCodeword(le,fe),v?Q=fe.getStartX():Q=fe.getEndX())}}return k}static adjustCodewordCount(f,m){let x=m[0][1],v=x.getValue(),y=f.getBarcodeColumnCount()*f.getBarcodeRowCount()-z.getNumberOfECCodeWords(f.getBarcodeECLevel());if(v.length===0){if(y<1||y>Ir.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();x.setValue(y)}else v[0]!==y&&x.setValue(y)}static createDecoderResult(f){let m=z.createBarcodeMatrix(f);z.adjustCodewordCount(f,m);let x=new Array,v=new Int32Array(f.getBarcodeRowCount()*f.getBarcodeColumnCount()),y=[],E=new Array;for(let L=0;L<f.getBarcodeRowCount();L++)for(let q=0;q<f.getBarcodeColumnCount();q++){let Q=m[L][q+1].getValue(),le=L*f.getBarcodeColumnCount()+q;Q.length===0?x.push(le):Q.length===1?v[le]=Q[0]:(E.push(le),y.push(Q))}let k=new Array(y.length);for(let L=0;L<k.length;L++)k[L]=y[L];return z.createDecoderResultFromAmbiguousValues(f.getBarcodeECLevel(),v,Ir.toIntArray(x),Ir.toIntArray(E),k)}static createDecoderResultFromAmbiguousValues(f,m,x,v,y){let E=new Int32Array(v.length),k=100;for(;k-- >0;){for(let L=0;L<E.length;L++)m[v[L]]=y[L][E[L]];try{return z.decodeCodewords(m,f,x)}catch(L){if(!(L instanceof g))throw L}if(E.length===0)throw g.getChecksumInstance();for(let L=0;L<E.length;L++)if(E[L]<y[L].length-1){E[L]++;break}else if(E[L]=0,L===E.length-1)throw g.getChecksumInstance()}throw g.getChecksumInstance()}static createBarcodeMatrix(f){let m=Array.from({length:f.getBarcodeRowCount()},()=>new Array(f.getBarcodeColumnCount()+2));for(let v=0;v<m.length;v++)for(let y=0;y<m[v].length;y++)m[v][y]=new Al;let x=0;for(let v of f.getDetectionResultColumns()){if(v!=null){for(let y of v.getCodewords())if(y!=null){let E=y.getRowNumber();if(E>=0){if(E>=m.length)continue;m[E][x].setValue(y.getValue())}}}x++}return m}static isValidBarcodeColumn(f,m){return m>=0&&m<=f.getBarcodeColumnCount()+1}static getStartColumn(f,m,x,v){let y=v?1:-1,E=null;if(z.isValidBarcodeColumn(f,m-y)&&(E=f.getDetectionResultColumn(m-y).getCodeword(x)),E!=null)return v?E.getEndX():E.getStartX();if(E=f.getDetectionResultColumn(m).getCodewordNearby(x),E!=null)return v?E.getStartX():E.getEndX();if(z.isValidBarcodeColumn(f,m-y)&&(E=f.getDetectionResultColumn(m-y).getCodewordNearby(x)),E!=null)return v?E.getEndX():E.getStartX();let k=0;for(;z.isValidBarcodeColumn(f,m-y);){m-=y;for(let L of f.getDetectionResultColumn(m).getCodewords())if(L!=null)return(v?L.getEndX():L.getStartX())+y*k*(L.getEndX()-L.getStartX());k++}return v?f.getBoundingBox().getMinX():f.getBoundingBox().getMaxX()}static detectCodeword(f,m,x,v,y,E,k,L){y=z.adjustCodewordStartColumn(f,m,x,v,y,E);let q=z.getModuleBitCount(f,m,x,v,y,E);if(q==null)return null;let Q,le=et.sum(q);if(v)Q=y+le;else{for(let $e=0;$e<q.length/2;$e++){let Ke=q[$e];q[$e]=q[q.length-1-$e],q[q.length-1-$e]=Ke}Q=y,y=Q-le}if(!z.checkCodewordSkew(le,k,L))return null;let fe=Oa.getDecodedValue(q),Re=Ir.getCodeword(fe);return Re===-1?null:new tl(y,Q,z.getCodewordBucketNumber(fe),Re)}static getModuleBitCount(f,m,x,v,y,E){let k=y,L=new Int32Array(8),q=0,Q=v?1:-1,le=v;for(;(v?k<x:k>=m)&&q<L.length;)f.get(k,E)===le?(L[q]++,k+=Q):(q++,le=!le);return q===L.length||k===(v?x:m)&&q===L.length-1?L:null}static getNumberOfECCodeWords(f){return 2<<f}static adjustCodewordStartColumn(f,m,x,v,y,E){let k=y,L=v?-1:1;for(let q=0;q<2;q++){for(;(v?k>=m:k<x)&&v===f.get(k,E);){if(Math.abs(y-k)>z.CODEWORD_SKEW_SIZE)return y;k+=L}L=-L,v=!v}return k}static checkCodewordSkew(f,m,x){return m-z.CODEWORD_SKEW_SIZE<=f&&f<=x+z.CODEWORD_SKEW_SIZE}static decodeCodewords(f,m,x){if(f.length===0)throw O.getFormatInstance();let v=1<<m+1,y=z.correctErrors(f,x,v);z.verifyCodewordCount(f,v);let E=Et.decode(f,""+m);return E.setErrorsCorrected(y),E.setErasures(x.length),E}static correctErrors(f,m,x){if(m!=null&&m.length>x/2+z.MAX_ERRORS||x<0||x>z.MAX_EC_CODEWORDS)throw g.getChecksumInstance();return z.errorCorrection.decode(f,x,m)}static verifyCodewordCount(f,m){if(f.length<4)throw O.getFormatInstance();let x=f[0];if(x>f.length)throw O.getFormatInstance();if(x===0)if(m<f.length)f[0]=f.length-m;else throw O.getFormatInstance()}static getBitCountForCodeword(f){let m=new Int32Array(8),x=0,v=m.length-1;for(;!((f&1)!==x&&(x=f&1,v--,v<0));)m[v]++,f>>=1;return m}static getCodewordBucketNumber(f){return f instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(f):this.getCodewordBucketNumber_number(f)}static getCodewordBucketNumber_number(f){return z.getCodewordBucketNumber(z.getBitCountForCodeword(f))}static getCodewordBucketNumber_Int32Array(f){return(f[0]-f[2]+f[4]-f[6]+9)%9}static toString(f){let m=new Jo;for(let x=0;x<f.length;x++){m.format("Row %2d: ",x);for(let v=0;v<f[x].length;v++){let y=f[x][v];y.getValue().length===0?m.format("        ",null):m.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}m.format("%n")}return m.toString()}}z.CODEWORD_SKEW_SIZE=2,z.MAX_ERRORS=3,z.MAX_EC_CODEWORDS=512,z.errorCorrection=new Mu;class ie{decode(f,m=null){let x=ie.decode(f,m,!1);if(x==null||x.length===0||x[0]==null)throw Z.getNotFoundInstance();return x[0]}decodeMultiple(f,m=null){try{return ie.decode(f,m,!0)}catch(x){throw x instanceof O||x instanceof g?Z.getNotFoundInstance():x}}static decode(f,m,x){const v=new Array,y=Ur.detectMultiple(f,m,x);for(const E of y.getPoints()){const k=z.decode(y.getBits(),E[4],E[5],E[6],E[7],ie.getMinCodewordWidth(E),ie.getMaxCodewordWidth(E)),L=new X(k.getText(),k.getRawBytes(),void 0,E,se.PDF_417);L.putMetadata(Ce.ERROR_CORRECTION_LEVEL,k.getECLevel());const q=k.getOther();q!=null&&L.putMetadata(Ce.PDF417_EXTRA_METADATA,q),v.push(L)}return v.map(E=>E)}static getMaxWidth(f,m){return f==null||m==null?0:Math.trunc(Math.abs(f.getX()-m.getX()))}static getMinWidth(f,m){return f==null||m==null?j.MAX_VALUE:Math.trunc(Math.abs(f.getX()-m.getX()))}static getMaxCodewordWidth(f){return Math.floor(Math.max(Math.max(ie.getMaxWidth(f[0],f[4]),ie.getMaxWidth(f[6],f[2])*Ir.MODULES_IN_CODEWORD/Ir.MODULES_IN_STOP_PATTERN),Math.max(ie.getMaxWidth(f[1],f[5]),ie.getMaxWidth(f[7],f[3])*Ir.MODULES_IN_CODEWORD/Ir.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(f){return Math.floor(Math.min(Math.min(ie.getMinWidth(f[0],f[4]),ie.getMinWidth(f[6],f[2])*Ir.MODULES_IN_CODEWORD/Ir.MODULES_IN_STOP_PATTERN),Math.min(ie.getMinWidth(f[1],f[5]),ie.getMinWidth(f[7],f[3])*Ir.MODULES_IN_CODEWORD/Ir.MODULES_IN_STOP_PATTERN)))}reset(){}}class De extends u{}De.kind="ReaderException";class qe{constructor(f,m){this.verbose=f===!0,m&&this.setHints(m)}decode(f,m){return m&&this.setHints(m),this.decodeInternal(f)}decodeWithState(f){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(f)}setHints(f){this.hints=f;const m=!n(f)&&f.get(G.TRY_HARDER)===!0,x=n(f)?null:f.get(G.POSSIBLE_FORMATS),v=new Array;if(!n(x)){const y=x.some(E=>E===se.UPC_A||E===se.UPC_E||E===se.EAN_13||E===se.EAN_8||E===se.CODABAR||E===se.CODE_39||E===se.CODE_93||E===se.CODE_128||E===se.ITF||E===se.RSS_14||E===se.RSS_EXPANDED);y&&!m&&v.push(new $a(f,this.verbose)),x.includes(se.QR_CODE)&&v.push(new ks),x.includes(se.DATA_MATRIX)&&v.push(new ka),x.includes(se.AZTEC)&&v.push(new Ut),x.includes(se.PDF_417)&&v.push(new ie),y&&m&&v.push(new $a(f,this.verbose))}v.length===0&&(m||v.push(new $a(f,this.verbose)),v.push(new ks),v.push(new ka),v.push(new Ut),v.push(new ie),m&&v.push(new $a(f,this.verbose))),this.readers=v}reset(){if(this.readers!==null)for(const f of this.readers)f.reset()}decodeInternal(f){if(this.readers===null)throw new De("No readers where selected, nothing can be read.");for(const m of this.readers)try{return m.decode(f,this.hints)}catch(x){if(x instanceof De)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class rt extends Y{constructor(f=null,m=500){const x=new qe;x.setHints(f),super(x,m)}decodeBitmap(f){return this.reader.decodeWithState(f)}}class Rt extends Y{constructor(f=500){super(new ie,f)}}class Qt extends Y{constructor(f=500){super(new ks,f)}}var Sr;(function(oe){oe[oe.ERROR_CORRECTION=0]="ERROR_CORRECTION",oe[oe.CHARACTER_SET=1]="CHARACTER_SET",oe[oe.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",oe[oe.MIN_SIZE=3]="MIN_SIZE",oe[oe.MAX_SIZE=4]="MAX_SIZE",oe[oe.MARGIN=5]="MARGIN",oe[oe.PDF417_COMPACT=6]="PDF417_COMPACT",oe[oe.PDF417_COMPACTION=7]="PDF417_COMPACTION",oe[oe.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",oe[oe.AZTEC_LAYERS=9]="AZTEC_LAYERS",oe[oe.QR_VERSION=10]="QR_VERSION"})(Sr||(Sr={}));var vr=Sr;class Kr{constructor(f){this.field=f,this.cachedGenerators=[],this.cachedGenerators.push(new He(f,Int32Array.from([1])))}buildGenerator(f){const m=this.cachedGenerators;if(f>=m.length){let x=m[m.length-1];const v=this.field;for(let y=m.length;y<=f;y++){const E=x.multiply(new He(v,Int32Array.from([1,v.exp(y-1+v.getGeneratorBase())])));m.push(E),x=E}}return m[f]}encode(f,m){if(m===0)throw new h("No error correction bytes");const x=f.length-m;if(x<=0)throw new h("No data bytes provided");const v=this.buildGenerator(m),y=new Int32Array(x);w.arraycopy(f,0,y,0,x);let E=new He(this.field,y);E=E.multiplyByMonomial(m,1);const L=E.divide(v)[1].getCoefficients(),q=m-L.length;for(let Q=0;Q<q;Q++)f[x+Q]=0;w.arraycopy(L,0,f,x+q,L.length)}}class yr{constructor(){}static applyMaskPenaltyRule1(f){return yr.applyMaskPenaltyRule1Internal(f,!0)+yr.applyMaskPenaltyRule1Internal(f,!1)}static applyMaskPenaltyRule2(f){let m=0;const x=f.getArray(),v=f.getWidth(),y=f.getHeight();for(let E=0;E<y-1;E++){const k=x[E];for(let L=0;L<v-1;L++){const q=k[L];q===k[L+1]&&q===x[E+1][L]&&q===x[E+1][L+1]&&m++}}return yr.N2*m}static applyMaskPenaltyRule3(f){let m=0;const x=f.getArray(),v=f.getWidth(),y=f.getHeight();for(let E=0;E<y;E++)for(let k=0;k<v;k++){const L=x[E];k+6<v&&L[k]===1&&L[k+1]===0&&L[k+2]===1&&L[k+3]===1&&L[k+4]===1&&L[k+5]===0&&L[k+6]===1&&(yr.isWhiteHorizontal(L,k-4,k)||yr.isWhiteHorizontal(L,k+7,k+11))&&m++,E+6<y&&x[E][k]===1&&x[E+1][k]===0&&x[E+2][k]===1&&x[E+3][k]===1&&x[E+4][k]===1&&x[E+5][k]===0&&x[E+6][k]===1&&(yr.isWhiteVertical(x,k,E-4,E)||yr.isWhiteVertical(x,k,E+7,E+11))&&m++}return m*yr.N3}static isWhiteHorizontal(f,m,x){m=Math.max(m,0),x=Math.min(x,f.length);for(let v=m;v<x;v++)if(f[v]===1)return!1;return!0}static isWhiteVertical(f,m,x,v){x=Math.max(x,0),v=Math.min(v,f.length);for(let y=x;y<v;y++)if(f[y][m]===1)return!1;return!0}static applyMaskPenaltyRule4(f){let m=0;const x=f.getArray(),v=f.getWidth(),y=f.getHeight();for(let L=0;L<y;L++){const q=x[L];for(let Q=0;Q<v;Q++)q[Q]===1&&m++}const E=f.getHeight()*f.getWidth();return Math.floor(Math.abs(m*2-E)*10/E)*yr.N4}static getDataMaskBit(f,m,x){let v,y;switch(f){case 0:v=x+m&1;break;case 1:v=x&1;break;case 2:v=m%3;break;case 3:v=(x+m)%3;break;case 4:v=Math.floor(x/2)+Math.floor(m/3)&1;break;case 5:y=x*m,v=(y&1)+y%3;break;case 6:y=x*m,v=(y&1)+y%3&1;break;case 7:y=x*m,v=y%3+(x+m&1)&1;break;default:throw new h("Invalid mask pattern: "+f)}return v===0}static applyMaskPenaltyRule1Internal(f,m){let x=0;const v=m?f.getHeight():f.getWidth(),y=m?f.getWidth():f.getHeight(),E=f.getArray();for(let k=0;k<v;k++){let L=0,q=-1;for(let Q=0;Q<y;Q++){const le=m?E[k][Q]:E[Q][k];le===q?L++:(L>=5&&(x+=yr.N1+(L-5)),L=1,q=le)}L>=5&&(x+=yr.N1+(L-5))}return x}}yr.N1=3,yr.N2=3,yr.N3=40,yr.N4=10;class Pn{constructor(f,m){this.width=f,this.height=m;const x=new Array(m);for(let v=0;v!==m;v++)x[v]=new Uint8Array(f);this.bytes=x}getHeight(){return this.height}getWidth(){return this.width}get(f,m){return this.bytes[m][f]}getArray(){return this.bytes}setNumber(f,m,x){this.bytes[m][f]=x}setBoolean(f,m,x){this.bytes[m][f]=x?1:0}clear(f){for(const m of this.bytes)A.fill(m,f)}equals(f){if(!(f instanceof Pn))return!1;const m=f;if(this.width!==m.width||this.height!==m.height)return!1;for(let x=0,v=this.height;x<v;++x){const y=this.bytes[x],E=m.bytes[x];for(let k=0,L=this.width;k<L;++k)if(y[k]!==E[k])return!1}return!0}toString(){const f=new F;for(let m=0,x=this.height;m<x;++m){const v=this.bytes[m];for(let y=0,E=this.width;y<E;++y)switch(v[y]){case 0:f.append(" 0");break;case 1:f.append(" 1");break;default:f.append("  ");break}f.append(`
`)}return f.toString()}}class Gn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const f=new F;return f.append(`<<
`),f.append(" mode: "),f.append(this.mode?this.mode.toString():"null"),f.append(`
 ecLevel: `),f.append(this.ecLevel?this.ecLevel.toString():"null"),f.append(`
 version: `),f.append(this.version?this.version.toString():"null"),f.append(`
 maskPattern: `),f.append(this.maskPattern.toString()),this.matrix?(f.append(`
 matrix:
`),f.append(this.matrix.toString())):f.append(`
 matrix: null
`),f.append(`>>
`),f.toString()}setMode(f){this.mode=f}setECLevel(f){this.ecLevel=f}setVersion(f){this.version=f}setMaskPattern(f){this.maskPattern=f}setMatrix(f){this.matrix=f}static isValidMaskPattern(f){return f>=0&&f<Gn.NUM_MASK_PATTERNS}}Gn.NUM_MASK_PATTERNS=8;class Xr extends u{}Xr.kind="WriterException";class T{constructor(){}static clearMatrix(f){f.clear(255)}static buildMatrix(f,m,x,v,y){T.clearMatrix(y),T.embedBasicPatterns(x,y),T.embedTypeInfo(m,v,y),T.maybeEmbedVersionInfo(x,y),T.embedDataBits(f,v,y)}static embedBasicPatterns(f,m){T.embedPositionDetectionPatternsAndSeparators(m),T.embedDarkDotAtLeftBottomCorner(m),T.maybeEmbedPositionAdjustmentPatterns(f,m),T.embedTimingPatterns(m)}static embedTypeInfo(f,m,x){const v=new P;T.makeTypeInfoBits(f,m,v);for(let y=0,E=v.getSize();y<E;++y){const k=v.get(v.getSize()-1-y),L=T.TYPE_INFO_COORDINATES[y],q=L[0],Q=L[1];if(x.setBoolean(q,Q,k),y<8){const le=x.getWidth()-y-1;x.setBoolean(le,8,k)}else{const fe=x.getHeight()-7+(y-8);x.setBoolean(8,fe,k)}}}static maybeEmbedVersionInfo(f,m){if(f.getVersionNumber()<7)return;const x=new P;T.makeVersionInfoBits(f,x);let v=6*3-1;for(let y=0;y<6;++y)for(let E=0;E<3;++E){const k=x.get(v);v--,m.setBoolean(y,m.getHeight()-11+E,k),m.setBoolean(m.getHeight()-11+E,y,k)}}static embedDataBits(f,m,x){let v=0,y=-1,E=x.getWidth()-1,k=x.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);k>=0&&k<x.getHeight();){for(let L=0;L<2;++L){const q=E-L;if(!T.isEmpty(x.get(q,k)))continue;let Q;v<f.getSize()?(Q=f.get(v),++v):Q=!1,m!==255&&yr.getDataMaskBit(m,q,k)&&(Q=!Q),x.setBoolean(q,k,Q)}k+=y}y=-y,k+=y,E-=2}if(v!==f.getSize())throw new Xr("Not all bits consumed: "+v+"/"+f.getSize())}static findMSBSet(f){return 32-j.numberOfLeadingZeros(f)}static calculateBCHCode(f,m){if(m===0)throw new h("0 polynomial");const x=T.findMSBSet(m);for(f<<=x-1;T.findMSBSet(f)>=x;)f^=m<<T.findMSBSet(f)-x;return f}static makeTypeInfoBits(f,m,x){if(!Gn.isValidMaskPattern(m))throw new Xr("Invalid mask pattern");const v=f.getBits()<<3|m;x.appendBits(v,5);const y=T.calculateBCHCode(v,T.TYPE_INFO_POLY);x.appendBits(y,10);const E=new P;if(E.appendBits(T.TYPE_INFO_MASK_PATTERN,15),x.xor(E),x.getSize()!==15)throw new Xr("should not happen but we got: "+x.getSize())}static makeVersionInfoBits(f,m){m.appendBits(f.getVersionNumber(),6);const x=T.calculateBCHCode(f.getVersionNumber(),T.VERSION_INFO_POLY);if(m.appendBits(x,12),m.getSize()!==18)throw new Xr("should not happen but we got: "+m.getSize())}static isEmpty(f){return f===255}static embedTimingPatterns(f){for(let m=8;m<f.getWidth()-8;++m){const x=(m+1)%2;T.isEmpty(f.get(m,6))&&f.setNumber(m,6,x),T.isEmpty(f.get(6,m))&&f.setNumber(6,m,x)}}static embedDarkDotAtLeftBottomCorner(f){if(f.get(8,f.getHeight()-8)===0)throw new Xr;f.setNumber(8,f.getHeight()-8,1)}static embedHorizontalSeparationPattern(f,m,x){for(let v=0;v<8;++v){if(!T.isEmpty(x.get(f+v,m)))throw new Xr;x.setNumber(f+v,m,0)}}static embedVerticalSeparationPattern(f,m,x){for(let v=0;v<7;++v){if(!T.isEmpty(x.get(f,m+v)))throw new Xr;x.setNumber(f,m+v,0)}}static embedPositionAdjustmentPattern(f,m,x){for(let v=0;v<5;++v){const y=T.POSITION_ADJUSTMENT_PATTERN[v];for(let E=0;E<5;++E)x.setNumber(f+E,m+v,y[E])}}static embedPositionDetectionPattern(f,m,x){for(let v=0;v<7;++v){const y=T.POSITION_DETECTION_PATTERN[v];for(let E=0;E<7;++E)x.setNumber(f+E,m+v,y[E])}}static embedPositionDetectionPatternsAndSeparators(f){const m=T.POSITION_DETECTION_PATTERN[0].length;T.embedPositionDetectionPattern(0,0,f),T.embedPositionDetectionPattern(f.getWidth()-m,0,f),T.embedPositionDetectionPattern(0,f.getWidth()-m,f);const x=8;T.embedHorizontalSeparationPattern(0,x-1,f),T.embedHorizontalSeparationPattern(f.getWidth()-x,x-1,f),T.embedHorizontalSeparationPattern(0,f.getWidth()-x,f);const v=7;T.embedVerticalSeparationPattern(v,0,f),T.embedVerticalSeparationPattern(f.getHeight()-v-1,0,f),T.embedVerticalSeparationPattern(v,f.getHeight()-v,f)}static maybeEmbedPositionAdjustmentPatterns(f,m){if(f.getVersionNumber()<2)return;const x=f.getVersionNumber()-1,v=T.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[x];for(let y=0,E=v.length;y!==E;y++){const k=v[y];if(k>=0)for(let L=0;L!==E;L++){const q=v[L];q>=0&&T.isEmpty(m.get(q,k))&&T.embedPositionAdjustmentPattern(q-2,k-2,m)}}}}T.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),T.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),T.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),T.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),T.VERSION_INFO_POLY=7973,T.TYPE_INFO_POLY=1335,T.TYPE_INFO_MASK_PATTERN=21522;class K{constructor(f,m){this.dataBytes=f,this.errorCorrectionBytes=m}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class te{constructor(){}static calculateMaskPenalty(f){return yr.applyMaskPenaltyRule1(f)+yr.applyMaskPenaltyRule2(f)+yr.applyMaskPenaltyRule3(f)+yr.applyMaskPenaltyRule4(f)}static encode(f,m,x=null){let v=te.DEFAULT_BYTE_MODE_ENCODING;const y=x!==null&&x.get(vr.CHARACTER_SET)!==void 0;y&&(v=x.get(vr.CHARACTER_SET).toString());const E=this.chooseMode(f,v),k=new P;if(E===Dr.BYTE&&(y||te.DEFAULT_BYTE_MODE_ENCODING!==v)){const Gt=I.getCharacterSetECIByName(v);Gt!==void 0&&this.appendECI(Gt,k)}this.appendModeInfo(E,k);const L=new P;this.appendBytes(f,E,L,v);let q;if(x!==null&&x.get(vr.QR_VERSION)!==void 0){const Gt=Number.parseInt(x.get(vr.QR_VERSION).toString(),10);q=Ar.getVersionForNumber(Gt);const $t=this.calculateBitsNeeded(E,k,L,q);if(!this.willFit($t,q,m))throw new Xr("Data too big for requested version")}else q=this.recommendVersion(m,E,k,L);const Q=new P;Q.appendBitArray(k);const le=E===Dr.BYTE?L.getSizeInBytes():f.length;this.appendLengthInfo(le,q,E,Q),Q.appendBitArray(L);const fe=q.getECBlocksForLevel(m),Re=q.getTotalCodewords()-fe.getTotalECCodewords();this.terminateBits(Re,Q);const $e=this.interleaveWithECBytes(Q,q.getTotalCodewords(),Re,fe.getNumBlocks()),Ke=new Gn;Ke.setECLevel(m),Ke.setMode(E),Ke.setVersion(q);const ot=q.getDimensionForVersion(),Nt=new Pn(ot,ot),zt=this.chooseMaskPattern($e,m,q,Nt);return Ke.setMaskPattern(zt),T.buildMatrix($e,m,q,zt,Nt),Ke.setMatrix(Nt),Ke}static recommendVersion(f,m,x,v){const y=this.calculateBitsNeeded(m,x,v,Ar.getVersionForNumber(1)),E=this.chooseVersion(y,f),k=this.calculateBitsNeeded(m,x,v,E);return this.chooseVersion(k,f)}static calculateBitsNeeded(f,m,x,v){return m.getSize()+f.getCharacterCountBits(v)+x.getSize()}static getAlphanumericCode(f){return f<te.ALPHANUMERIC_TABLE.length?te.ALPHANUMERIC_TABLE[f]:-1}static chooseMode(f,m=null){if(I.SJIS.getName()===m&&this.isOnlyDoubleByteKanji(f))return Dr.KANJI;let x=!1,v=!1;for(let y=0,E=f.length;y<E;++y){const k=f.charAt(y);if(te.isDigit(k))x=!0;else if(this.getAlphanumericCode(k.charCodeAt(0))!==-1)v=!0;else return Dr.BYTE}return v?Dr.ALPHANUMERIC:x?Dr.NUMERIC:Dr.BYTE}static isOnlyDoubleByteKanji(f){let m;try{m=R.encode(f,I.SJIS)}catch{return!1}const x=m.length;if(x%2!==0)return!1;for(let v=0;v<x;v+=2){const y=m[v]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(f,m,x,v){let y=Number.MAX_SAFE_INTEGER,E=-1;for(let k=0;k<Gn.NUM_MASK_PATTERNS;k++){T.buildMatrix(f,m,x,k,v);let L=this.calculateMaskPenalty(v);L<y&&(y=L,E=k)}return E}static chooseVersion(f,m){for(let x=1;x<=40;x++){const v=Ar.getVersionForNumber(x);if(te.willFit(f,v,m))return v}throw new Xr("Data too big")}static willFit(f,m,x){const v=m.getTotalCodewords(),E=m.getECBlocksForLevel(x).getTotalECCodewords(),k=v-E,L=(f+7)/8;return k>=L}static terminateBits(f,m){const x=f*8;if(m.getSize()>x)throw new Xr("data bits cannot fit in the QR Code"+m.getSize()+" > "+x);for(let E=0;E<4&&m.getSize()<x;++E)m.appendBit(!1);const v=m.getSize()&7;if(v>0)for(let E=v;E<8;E++)m.appendBit(!1);const y=f-m.getSizeInBytes();for(let E=0;E<y;++E)m.appendBits(E&1?17:236,8);if(m.getSize()!==x)throw new Xr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(f,m,x,v,y,E){if(v>=x)throw new Xr("Block ID too large");const k=f%x,L=x-k,q=Math.floor(f/x),Q=q+1,le=Math.floor(m/x),fe=le+1,Re=q-le,$e=Q-fe;if(Re!==$e)throw new Xr("EC bytes mismatch");if(x!==L+k)throw new Xr("RS blocks mismatch");if(f!==(le+Re)*L+(fe+$e)*k)throw new Xr("Total bytes mismatch");v<L?(y[0]=le,E[0]=Re):(y[0]=fe,E[0]=$e)}static interleaveWithECBytes(f,m,x,v){if(f.getSizeInBytes()!==x)throw new Xr("Number of bits and data bytes does not match");let y=0,E=0,k=0;const L=new Array;for(let Q=0;Q<v;++Q){const le=new Int32Array(1),fe=new Int32Array(1);te.getNumDataBytesAndNumECBytesForBlockID(m,x,v,Q,le,fe);const Re=le[0],$e=new Uint8Array(Re);f.toBytes(8*y,$e,0,Re);const Ke=te.generateECBytes($e,fe[0]);L.push(new K($e,Ke)),E=Math.max(E,Re),k=Math.max(k,Ke.length),y+=le[0]}if(x!==y)throw new Xr("Data bytes does not match offset");const q=new P;for(let Q=0;Q<E;++Q)for(const le of L){const fe=le.getDataBytes();Q<fe.length&&q.appendBits(fe[Q],8)}for(let Q=0;Q<k;++Q)for(const le of L){const fe=le.getErrorCorrectionBytes();Q<fe.length&&q.appendBits(fe[Q],8)}if(m!==q.getSizeInBytes())throw new Xr("Interleaving error: "+m+" and "+q.getSizeInBytes()+" differ.");return q}static generateECBytes(f,m){const x=f.length,v=new Int32Array(x+m);for(let E=0;E<x;E++)v[E]=f[E]&255;new Kr(Me.QR_CODE_FIELD_256).encode(v,m);const y=new Uint8Array(m);for(let E=0;E<m;E++)y[E]=v[x+E];return y}static appendModeInfo(f,m){m.appendBits(f.getBits(),4)}static appendLengthInfo(f,m,x,v){const y=x.getCharacterCountBits(m);if(f>=1<<y)throw new Xr(f+" is bigger than "+((1<<y)-1));v.appendBits(f,y)}static appendBytes(f,m,x,v){switch(m){case Dr.NUMERIC:te.appendNumericBytes(f,x);break;case Dr.ALPHANUMERIC:te.appendAlphanumericBytes(f,x);break;case Dr.BYTE:te.append8BitBytes(f,x,v);break;case Dr.KANJI:te.appendKanjiBytes(f,x);break;default:throw new Xr("Invalid mode: "+m)}}static getDigit(f){return f.charCodeAt(0)-48}static isDigit(f){const m=te.getDigit(f);return m>=0&&m<=9}static appendNumericBytes(f,m){const x=f.length;let v=0;for(;v<x;){const y=te.getDigit(f.charAt(v));if(v+2<x){const E=te.getDigit(f.charAt(v+1)),k=te.getDigit(f.charAt(v+2));m.appendBits(y*100+E*10+k,10),v+=3}else if(v+1<x){const E=te.getDigit(f.charAt(v+1));m.appendBits(y*10+E,7),v+=2}else m.appendBits(y,4),v++}}static appendAlphanumericBytes(f,m){const x=f.length;let v=0;for(;v<x;){const y=te.getAlphanumericCode(f.charCodeAt(v));if(y===-1)throw new Xr;if(v+1<x){const E=te.getAlphanumericCode(f.charCodeAt(v+1));if(E===-1)throw new Xr;m.appendBits(y*45+E,11),v+=2}else m.appendBits(y,6),v++}}static append8BitBytes(f,m,x){let v;try{v=R.encode(f,x)}catch(y){throw new Xr(y)}for(let y=0,E=v.length;y!==E;y++){const k=v[y];m.appendBits(k,8)}}static appendKanjiBytes(f,m){let x;try{x=R.encode(f,I.SJIS)}catch(y){throw new Xr(y)}const v=x.length;for(let y=0;y<v;y+=2){const E=x[y]&255,k=x[y+1]&255,L=E<<8&4294967295|k;let q=-1;if(L>=33088&&L<=40956?q=L-33088:L>=57408&&L<=60351&&(q=L-49472),q===-1)throw new Xr("Invalid byte sequence");const Q=(q>>8)*192+(q&255);m.appendBits(Q,13)}}static appendECI(f,m){m.appendBits(Dr.ECI.getBits(),4),m.appendBits(f.getValue(),8)}}te.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),te.DEFAULT_BYTE_MODE_ENCODING=I.UTF8.getName();class we{write(f,m,x,v=null){if(f.length===0)throw new h("Found empty contents");if(m<0||x<0)throw new h("Requested dimensions are too small: "+m+"x"+x);let y=Ln.L,E=we.QUIET_ZONE_SIZE;v!==null&&(v.get(vr.ERROR_CORRECTION)!==void 0&&(y=Ln.fromString(v.get(vr.ERROR_CORRECTION).toString())),v.get(vr.MARGIN)!==void 0&&(E=Number.parseInt(v.get(vr.MARGIN).toString(),10)));const k=te.encode(f,y,v);return this.renderResult(k,m,x,E)}writeToDom(f,m,x,v,y=null){typeof f=="string"&&(f=document.querySelector(f));const E=this.write(m,x,v,y);f&&f.appendChild(E)}renderResult(f,m,x,v){const y=f.getMatrix();if(y===null)throw new be;const E=y.getWidth(),k=y.getHeight(),L=E+v*2,q=k+v*2,Q=Math.max(m,L),le=Math.max(x,q),fe=Math.min(Math.floor(Q/L),Math.floor(le/q)),Re=Math.floor((Q-E*fe)/2),$e=Math.floor((le-k*fe)/2),Ke=this.createSVGElement(Q,le);for(let ot=0,Nt=$e;ot<k;ot++,Nt+=fe)for(let zt=0,Gt=Re;zt<E;zt++,Gt+=fe)if(y.get(zt,ot)===1){const $t=this.createSvgRectElement(Gt,Nt,fe,fe);Ke.appendChild($t)}return Ke}createSVGElement(f,m){const x=document.createElementNS(we.SVG_NS,"svg");return x.setAttributeNS(null,"height",f.toString()),x.setAttributeNS(null,"width",m.toString()),x}createSvgRectElement(f,m,x,v){const y=document.createElementNS(we.SVG_NS,"rect");return y.setAttributeNS(null,"x",f.toString()),y.setAttributeNS(null,"y",m.toString()),y.setAttributeNS(null,"height",x.toString()),y.setAttributeNS(null,"width",v.toString()),y.setAttributeNS(null,"fill","#000000"),y}}we.QUIET_ZONE_SIZE=4,we.SVG_NS="http://www.w3.org/2000/svg";class nt{encode(f,m,x,v,y){if(f.length===0)throw new h("Found empty contents");if(m!==se.QR_CODE)throw new h("Can only encode QR_CODE, but got "+m);if(x<0||v<0)throw new h(`Requested dimensions are too small: ${x}x${v}`);let E=Ln.L,k=nt.QUIET_ZONE_SIZE;y!==null&&(y.get(vr.ERROR_CORRECTION)!==void 0&&(E=Ln.fromString(y.get(vr.ERROR_CORRECTION).toString())),y.get(vr.MARGIN)!==void 0&&(k=Number.parseInt(y.get(vr.MARGIN).toString(),10)));const L=te.encode(f,E,y);return nt.renderResult(L,x,v,k)}static renderResult(f,m,x,v){const y=f.getMatrix();if(y===null)throw new be;const E=y.getWidth(),k=y.getHeight(),L=E+v*2,q=k+v*2,Q=Math.max(m,L),le=Math.max(x,q),fe=Math.min(Math.floor(Q/L),Math.floor(le/q)),Re=Math.floor((Q-E*fe)/2),$e=Math.floor((le-k*fe)/2),Ke=new ee(Q,le);for(let ot=0,Nt=$e;ot<k;ot++,Nt+=fe)for(let zt=0,Gt=Re;zt<E;zt++,Gt+=fe)y.get(zt,ot)===1&&Ke.setRegion(Gt,Nt,fe,fe);return Ke}}nt.QUIET_ZONE_SIZE=4;class gt{encode(f,m,x,v,y){let E;switch(m){case se.QR_CODE:E=new nt;break;default:throw new h("No encoder available for format "+m)}return E.encode(f,m,x,v,y)}}class ar extends ae{constructor(f,m,x,v,y,E,k,L){if(super(E,k),this.yuvData=f,this.dataWidth=m,this.dataHeight=x,this.left=v,this.top=y,v+E>m||y+k>x)throw new h("Crop rectangle does not fit within image data.");L&&this.reverseHorizontal(E,k)}getRow(f,m){if(f<0||f>=this.getHeight())throw new h("Requested row is outside the image: "+f);const x=this.getWidth();(m==null||m.length<x)&&(m=new Uint8ClampedArray(x));const v=(f+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,v,m,0,x),m}getMatrix(){const f=this.getWidth(),m=this.getHeight();if(f===this.dataWidth&&m===this.dataHeight)return this.yuvData;const x=f*m,v=new Uint8ClampedArray(x);let y=this.top*this.dataWidth+this.left;if(f===this.dataWidth)return w.arraycopy(this.yuvData,y,v,0,x),v;for(let E=0;E<m;E++){const k=E*f;w.arraycopy(this.yuvData,y,v,k,f),y+=this.dataWidth}return v}isCropSupported(){return!0}crop(f,m,x,v){return new ar(this.yuvData,this.dataWidth,this.dataHeight,this.left+f,this.top+m,x,v,!1)}renderThumbnail(){const f=this.getWidth()/ar.THUMBNAIL_SCALE_FACTOR,m=this.getHeight()/ar.THUMBNAIL_SCALE_FACTOR,x=new Int32Array(f*m),v=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let E=0;E<m;E++){const k=E*f;for(let L=0;L<f;L++){const q=v[y+L*ar.THUMBNAIL_SCALE_FACTOR]&255;x[k+L]=4278190080|q*65793}y+=this.dataWidth*ar.THUMBNAIL_SCALE_FACTOR}return x}getThumbnailWidth(){return this.getWidth()/ar.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ar.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(f,m){const x=this.yuvData;for(let v=0,y=this.top*this.dataWidth+this.left;v<m;v++,y+=this.dataWidth){const E=y+f/2;for(let k=y,L=y+f-1;k<E;k++,L--){const q=x[k];x[k]=x[L],x[L]=q}}}invert(){return new me(this)}}ar.THUMBNAIL_SCALE_FACTOR=2;class an extends ae{constructor(f,m,x,v,y,E,k){if(super(m,x),this.dataWidth=v,this.dataHeight=y,this.left=E,this.top=k,f.BYTES_PER_ELEMENT===4){const L=m*x,q=new Uint8ClampedArray(L);for(let Q=0;Q<L;Q++){const le=f[Q],fe=le>>16&255,Re=le>>7&510,$e=le&255;q[Q]=(fe+Re+$e)/4&255}this.luminances=q}else this.luminances=f;if(v===void 0&&(this.dataWidth=m),y===void 0&&(this.dataHeight=x),E===void 0&&(this.left=0),k===void 0&&(this.top=0),this.left+m>this.dataWidth||this.top+x>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(f,m){if(f<0||f>=this.getHeight())throw new h("Requested row is outside the image: "+f);const x=this.getWidth();(m==null||m.length<x)&&(m=new Uint8ClampedArray(x));const v=(f+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,v,m,0,x),m}getMatrix(){const f=this.getWidth(),m=this.getHeight();if(f===this.dataWidth&&m===this.dataHeight)return this.luminances;const x=f*m,v=new Uint8ClampedArray(x);let y=this.top*this.dataWidth+this.left;if(f===this.dataWidth)return w.arraycopy(this.luminances,y,v,0,x),v;for(let E=0;E<m;E++){const k=E*f;w.arraycopy(this.luminances,y,v,k,f),y+=this.dataWidth}return v}isCropSupported(){return!0}crop(f,m,x,v){return new an(this.luminances,x,v,this.dataWidth,this.dataHeight,this.left+f,this.top+m)}invert(){return new me(this)}}class pa extends I{static forName(f){return this.getCharacterSetECIByName(f)}}class Tn{}Tn.ISO_8859_1=I.ISO8859_1;class xa{isCompact(){return this.compact}setCompact(f){this.compact=f}getSize(){return this.size}setSize(f){this.size=f}getLayers(){return this.layers}setLayers(f){this.layers=f}getCodeWords(){return this.codeWords}setCodeWords(f){this.codeWords=f}getMatrix(){return this.matrix}setMatrix(f){this.matrix=f}}class Ws{static singletonList(f){return[f]}static min(f,m){return f.sort(m)[0]}}class lo{constructor(f){this.previous=f}getPrevious(){return this.previous}}class ta extends lo{constructor(f,m,x){super(f),this.value=m,this.bitCount=x}appendTo(f,m){f.appendBits(this.value,this.bitCount)}add(f,m){return new ta(this,f,m)}addBinaryShift(f,m){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ta(this,f,m)}toString(){let f=this.value&(1<<this.bitCount)-1;return f|=1<<this.bitCount,"<"+j.toBinaryString(f|1<<this.bitCount).substring(1)+">"}}class oi extends ta{constructor(f,m,x){super(f,0,0),this.binaryShiftStart=m,this.binaryShiftByteCount=x}appendTo(f,m){for(let x=0;x<this.binaryShiftByteCount;x++)(x===0||x===31&&this.binaryShiftByteCount<=62)&&(f.appendBits(31,5),this.binaryShiftByteCount>62?f.appendBits(this.binaryShiftByteCount-31,16):x===0?f.appendBits(Math.min(this.binaryShiftByteCount,31),5):f.appendBits(this.binaryShiftByteCount-31,5)),f.appendBits(m[this.binaryShiftStart+x],8)}addBinaryShift(f,m){return new oi(this,f,m)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jl(oe,f,m){return new oi(oe,f,m)}function rl(oe,f,m){return new ta(oe,f,m)}const Am=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ia=0,Tl=1,ji=2,Sm=3,_s=4,sf=new ta(null,0,0),of=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function jm(oe){for(let f of oe)A.fill(f,-1);return oe[ia][_s]=0,oe[Tl][_s]=0,oe[Tl][ia]=28,oe[Sm][_s]=0,oe[ji][_s]=0,oe[ji][ia]=15,oe}const Bu=jm(A.createInt32Array(6,6));class qi{constructor(f,m,x,v){this.token=f,this.mode=m,this.binaryShiftByteCount=x,this.bitCount=v}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(f,m){let x=this.bitCount,v=this.token;if(f!==this.mode){let E=of[this.mode][f];v=rl(v,E&65535,E>>16),x+=E>>16}let y=f===ji?4:5;return v=rl(v,m,y),new qi(v,f,0,x+y)}shiftAndAppend(f,m){let x=this.token,v=this.mode===ji?4:5;return x=rl(x,Bu[this.mode][f],v),x=rl(x,m,5),new qi(x,this.mode,0,this.bitCount+v+5)}addBinaryShiftChar(f){let m=this.token,x=this.mode,v=this.bitCount;if(this.mode===_s||this.mode===ji){let k=of[x][ia];m=rl(m,k&65535,k>>16),v+=k>>16,x=ia}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new qi(m,x,this.binaryShiftByteCount+1,v+y);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(f+1)),E}endBinaryShift(f){if(this.binaryShiftByteCount===0)return this;let m=this.token;return m=jl(m,f-this.binaryShiftByteCount,this.binaryShiftByteCount),new qi(m,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(f){let m=this.bitCount+(of[this.mode][f.mode]>>16);return this.binaryShiftByteCount<f.binaryShiftByteCount?m+=qi.calculateBinaryShiftCost(f)-qi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>f.binaryShiftByteCount&&f.binaryShiftByteCount>0&&(m+=10),m<=f.bitCount}toBitArray(f){let m=[];for(let v=this.endBinaryShift(f.length).token;v!==null;v=v.getPrevious())m.unshift(v);let x=new P;for(const v of m)v.appendTo(x,f);return x}toString(){return B.format("%s bits=%d bytes=%d",Am[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(f){return f.binaryShiftByteCount>62?21:f.binaryShiftByteCount>31?20:f.binaryShiftByteCount>0?10:0}}qi.INITIAL_STATE=new qi(sf,ia,0,0);function nl(oe){const f=B.getCharCode(" "),m=B.getCharCode("."),x=B.getCharCode(",");oe[ia][f]=1;const v=B.getCharCode("Z"),y=B.getCharCode("A");for(let fe=y;fe<=v;fe++)oe[ia][fe]=fe-y+2;oe[Tl][f]=1;const E=B.getCharCode("z"),k=B.getCharCode("a");for(let fe=k;fe<=E;fe++)oe[Tl][fe]=fe-k+2;oe[ji][f]=1;const L=B.getCharCode("9"),q=B.getCharCode("0");for(let fe=q;fe<=L;fe++)oe[ji][fe]=fe-q+2;oe[ji][x]=12,oe[ji][m]=13;const Q=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let fe=0;fe<Q.length;fe++)oe[Sm][B.getCharCode(Q[fe])]=fe;const le=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let fe=0;fe<le.length;fe++)B.getCharCode(le[fe])>0&&(oe[_s][B.getCharCode(le[fe])]=fe);return oe}const co=nl(A.createInt32Array(5,256));class Cl{constructor(f){this.text=f}encode(){const f=B.getCharCode(" "),m=B.getCharCode(`
`);let x=Ws.singletonList(qi.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let E,k=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case B.getCharCode("\r"):E=k===m?2:0;break;case B.getCharCode("."):E=k===f?3:0;break;case B.getCharCode(","):E=k===f?4:0;break;case B.getCharCode(":"):E=k===f?5:0;break;default:E=0}E>0?(x=Cl.updateStateListForPair(x,y,E),y++):x=this.updateStateListForChar(x,y)}return Ws.min(x,(y,E)=>y.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(f,m){const x=[];for(let v of f)this.updateStateForChar(v,m,x);return Cl.simplifyStates(x)}updateStateForChar(f,m,x){let v=this.text[m]&255,y=co[f.getMode()][v]>0,E=null;for(let k=0;k<=_s;k++){let L=co[k][v];if(L>0){if(E==null&&(E=f.endBinaryShift(m)),!y||k===f.getMode()||k===ji){const q=E.latchAndAppend(k,L);x.push(q)}if(!y&&Bu[f.getMode()][k]>=0){const q=E.shiftAndAppend(k,L);x.push(q)}}}if(f.getBinaryShiftByteCount()>0||co[f.getMode()][v]===0){let k=f.addBinaryShiftChar(m);x.push(k)}}static updateStateListForPair(f,m,x){const v=[];for(let y of f)this.updateStateForPair(y,m,x,v);return this.simplifyStates(v)}static updateStateForPair(f,m,x,v){let y=f.endBinaryShift(m);if(v.push(y.latchAndAppend(_s,x)),f.getMode()!==_s&&v.push(y.shiftAndAppend(_s,x)),x===3||x===4){let E=y.latchAndAppend(ji,16-x).latchAndAppend(ji,1);v.push(E)}if(f.getBinaryShiftByteCount()>0){let E=f.addBinaryShiftChar(m).addBinaryShiftChar(m+1);v.push(E)}}static simplifyStates(f){let m=[];for(const x of f){let v=!0;for(const y of m){if(y.isBetterThanOrEqualTo(x)){v=!1;break}x.isBetterThanOrEqualTo(y)&&(m=m.filter(E=>E!==y))}v&&m.push(x)}return m}}class bn{constructor(){}static encodeBytes(f){return bn.encode(f,bn.DEFAULT_EC_PERCENT,bn.DEFAULT_AZTEC_LAYERS)}static encode(f,m,x){let v=new Cl(f).encode(),y=j.truncDivision(v.getSize()*m,100)+11,E=v.getSize()+y,k,L,q,Q,le;if(x!==bn.DEFAULT_AZTEC_LAYERS){if(k=x<0,L=Math.abs(x),L>(k?bn.MAX_NB_BITS_COMPACT:bn.MAX_NB_BITS))throw new h(B.format("Illegal value %s for layers",x));q=bn.totalBitsInLayer(L,k),Q=bn.WORD_SIZE[L];let $t=q-q%Q;if(le=bn.stuffBits(v,Q),le.getSize()+y>$t)throw new h("Data to large for user specified layer");if(k&&le.getSize()>Q*64)throw new h("Data to large for user specified layer")}else{Q=0,le=null;for(let $t=0;;$t++){if($t>bn.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(k=$t<=3,L=k?$t+1:$t,q=bn.totalBitsInLayer(L,k),E>q)continue;(le==null||Q!==bn.WORD_SIZE[L])&&(Q=bn.WORD_SIZE[L],le=bn.stuffBits(v,Q));let Wr=q-q%Q;if(!(k&&le.getSize()>Q*64)&&le.getSize()+y<=Wr)break}}let fe=bn.generateCheckWords(le,q,Q),Re=le.getSize()/Q,$e=bn.generateModeMessage(k,L,Re),Ke=(k?11:14)+L*4,ot=new Int32Array(Ke),Nt;if(k){Nt=Ke;for(let $t=0;$t<ot.length;$t++)ot[$t]=$t}else{Nt=Ke+1+2*j.truncDivision(j.truncDivision(Ke,2)-1,15);let $t=j.truncDivision(Ke,2),Wr=j.truncDivision(Nt,2);for(let tn=0;tn<$t;tn++){let li=tn+j.truncDivision(tn,15);ot[$t-tn-1]=Wr-li-1,ot[$t+tn]=Wr+li+1}}let zt=new ee(Nt);for(let $t=0,Wr=0;$t<L;$t++){let tn=(L-$t)*4+(k?9:12);for(let li=0;li<tn;li++){let Gi=li*2;for(let Ti=0;Ti<2;Ti++)fe.get(Wr+Gi+Ti)&&zt.set(ot[$t*2+Ti],ot[$t*2+li]),fe.get(Wr+tn*2+Gi+Ti)&&zt.set(ot[$t*2+li],ot[Ke-1-$t*2-Ti]),fe.get(Wr+tn*4+Gi+Ti)&&zt.set(ot[Ke-1-$t*2-Ti],ot[Ke-1-$t*2-li]),fe.get(Wr+tn*6+Gi+Ti)&&zt.set(ot[Ke-1-$t*2-li],ot[$t*2+Ti])}Wr+=tn*8}if(bn.drawModeMessage(zt,k,Nt,$e),k)bn.drawBullsEye(zt,j.truncDivision(Nt,2),5);else{bn.drawBullsEye(zt,j.truncDivision(Nt,2),7);for(let $t=0,Wr=0;$t<j.truncDivision(Ke,2)-1;$t+=15,Wr+=16)for(let tn=j.truncDivision(Nt,2)&1;tn<Nt;tn+=2)zt.set(j.truncDivision(Nt,2)-Wr,tn),zt.set(j.truncDivision(Nt,2)+Wr,tn),zt.set(tn,j.truncDivision(Nt,2)-Wr),zt.set(tn,j.truncDivision(Nt,2)+Wr)}let Gt=new xa;return Gt.setCompact(k),Gt.setSize(Nt),Gt.setLayers(L),Gt.setCodeWords(Re),Gt.setMatrix(zt),Gt}static drawBullsEye(f,m,x){for(let v=0;v<x;v+=2)for(let y=m-v;y<=m+v;y++)f.set(y,m-v),f.set(y,m+v),f.set(m-v,y),f.set(m+v,y);f.set(m-x,m-x),f.set(m-x+1,m-x),f.set(m-x,m-x+1),f.set(m+x,m-x),f.set(m+x,m-x+1),f.set(m+x,m+x-1)}static generateModeMessage(f,m,x){let v=new P;return f?(v.appendBits(m-1,2),v.appendBits(x-1,6),v=bn.generateCheckWords(v,28,4)):(v.appendBits(m-1,5),v.appendBits(x-1,11),v=bn.generateCheckWords(v,40,4)),v}static drawModeMessage(f,m,x,v){let y=j.truncDivision(x,2);if(m)for(let E=0;E<7;E++){let k=y-3+E;v.get(E)&&f.set(k,y-5),v.get(E+7)&&f.set(y+5,k),v.get(20-E)&&f.set(k,y+5),v.get(27-E)&&f.set(y-5,k)}else for(let E=0;E<10;E++){let k=y-5+E+j.truncDivision(E,5);v.get(E)&&f.set(k,y-7),v.get(E+10)&&f.set(y+7,k),v.get(29-E)&&f.set(k,y+7),v.get(39-E)&&f.set(y-7,k)}}static generateCheckWords(f,m,x){let v=f.getSize()/x,y=new Kr(bn.getGF(x)),E=j.truncDivision(m,x),k=bn.bitsToWords(f,x,E);y.encode(k,E-v);let L=m%x,q=new P;q.appendBits(0,L);for(const Q of Array.from(k))q.appendBits(Q,x);return q}static bitsToWords(f,m,x){let v=new Int32Array(x),y,E;for(y=0,E=f.getSize()/m;y<E;y++){let k=0;for(let L=0;L<m;L++)k|=f.get(y*m+L)?1<<m-L-1:0;v[y]=k}return v}static getGF(f){switch(f){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new h("Unsupported word size "+f)}}static stuffBits(f,m){let x=new P,v=f.getSize(),y=(1<<m)-2;for(let E=0;E<v;E+=m){let k=0;for(let L=0;L<m;L++)(E+L>=v||f.get(E+L))&&(k|=1<<m-1-L);(k&y)===y?(x.appendBits(k&y,m),E--):k&y?x.appendBits(k,m):(x.appendBits(k|1,m),E--)}return x}static totalBitsInLayer(f,m){return((m?88:112)+16*f)*f}}bn.DEFAULT_EC_PERCENT=33,bn.DEFAULT_AZTEC_LAYERS=0,bn.MAX_NB_BITS=32,bn.MAX_NB_BITS_COMPACT=4,bn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ic{encode(f,m,x,v){return this.encodeWithHints(f,m,x,v,null)}encodeWithHints(f,m,x,v,y){let E=Tn.ISO_8859_1,k=bn.DEFAULT_EC_PERCENT,L=bn.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(vr.CHARACTER_SET)&&(E=pa.forName(y.get(vr.CHARACTER_SET).toString())),y.has(vr.ERROR_CORRECTION)&&(k=j.parseInt(y.get(vr.ERROR_CORRECTION).toString())),y.has(vr.AZTEC_LAYERS)&&(L=j.parseInt(y.get(vr.AZTEC_LAYERS).toString()))),ic.encodeLayers(f,m,x,v,E,k,L)}static encodeLayers(f,m,x,v,y,E,k){if(m!==se.AZTEC)throw new h("Can only encode AZTEC, but got "+m);let L=bn.encode(B.getBytes(f,y),E,k);return ic.renderResult(L,x,v)}static renderResult(f,m,x){let v=f.getMatrix();if(v==null)throw new be;let y=v.getWidth(),E=v.getHeight(),k=Math.max(m,y),L=Math.max(x,E),q=Math.min(k/y,L/E),Q=(k-y*q)/2,le=(L-E*q)/2,fe=new ee(k,L);for(let Re=0,$e=le;Re<E;Re++,$e+=q)for(let Ke=0,ot=Q;Ke<y;Ke++,ot+=q)v.get(Ke,Re)&&fe.setRegion(ot,$e,q,q);return fe}}r.AbstractExpandedDecoder=Se,r.ArgumentException=d,r.ArithmeticException=Ue,r.AztecCode=xa,r.AztecCodeReader=Ut,r.AztecCodeWriter=ic,r.AztecDecoder=Lt,r.AztecDetector=Ot,r.AztecDetectorResult=qt,r.AztecEncoder=bn,r.AztecHighLevelEncoder=Cl,r.AztecPoint=pt,r.BarcodeFormat=se,r.Binarizer=b,r.BinaryBitmap=p,r.BitArray=P,r.BitMatrix=ee,r.BitSource=On,r.BrowserAztecCodeReader=Nr,r.BrowserBarcodeReader=ws,r.BrowserCodeReader=Y,r.BrowserDatamatrixCodeReader=$i,r.BrowserMultiFormatReader=rt,r.BrowserPDF417Reader=Rt,r.BrowserQRCodeReader=Qt,r.BrowserQRCodeSvgWriter=we,r.CharacterSetECI=I,r.ChecksumException=g,r.Code128Reader=lt,r.Code39Reader=lr,r.DataMatrixDecodedBitStreamParser=Ts,r.DataMatrixReader=ka,r.DecodeHintType=G,r.DecoderResult=xe,r.DefaultGridSampler=Kt,r.DetectorResult=Ft,r.EAN13Reader=At,r.EncodeHintType=vr,r.Exception=u,r.FormatException=O,r.GenericGF=Me,r.GenericGFPoly=He,r.GlobalHistogramBinarizer=ce,r.GridSampler=nr,r.GridSamplerInstance=kt,r.HTMLCanvasElementLuminanceSource=Ee,r.HybridBinarizer=ne,r.ITFReader=ve,r.IllegalArgumentException=h,r.IllegalStateException=be,r.InvertedLuminanceSource=me,r.LuminanceSource=ae,r.MathUtils=et,r.MultiFormatOneDReader=$a,r.MultiFormatReader=qe,r.MultiFormatWriter=gt,r.NotFoundException=Z,r.OneDReader=or,r.PDF417DecodedBitStreamParser=Et,r.PDF417DecoderErrorCorrection=Mu,r.PDF417Reader=ie,r.PDF417ResultMetadata=Lu,r.PerspectiveTransform=Xe,r.PlanarYUVLuminanceSource=ar,r.QRCodeByteMatrix=Pn,r.QRCodeDataMask=qa,r.QRCodeDecodedBitStreamParser=Zn,r.QRCodeDecoderErrorCorrectionLevel=Ln,r.QRCodeDecoderFormatInformation=Ha,r.QRCodeEncoder=te,r.QRCodeEncoderQRCode=Gn,r.QRCodeMaskUtil=yr,r.QRCodeMatrixUtil=T,r.QRCodeMode=Dr,r.QRCodeReader=ks,r.QRCodeVersion=Ar,r.QRCodeWriter=nt,r.RGBLuminanceSource=an,r.RSS14Reader=Gr,r.RSSExpandedReader=_t,r.ReaderException=De,r.ReedSolomonDecoder=Vt,r.ReedSolomonEncoder=Kr,r.ReedSolomonException=Be,r.Result=X,r.ResultMetadataType=Ce,r.ResultPoint=Ve,r.StringUtils=B,r.UnsupportedOperationException=V,r.VideoInputDevice=ye,r.WhiteRectangleDetector=Wt,r.WriterException=Xr,r.ZXingArrays=A,r.ZXingCharset=pa,r.ZXingInteger=j,r.ZXingStandardCharsets=Tn,r.ZXingStringBuilder=F,r.ZXingStringEncoding=R,r.ZXingSystem=w,r.createAbstractExpandedDecoder=Ct,Object.defineProperty(r,"__esModule",{value:!0})})})(Y8,Y8.exports);var Qa=Y8.exports;const C7e=Hc(Qa),k7e=iX({__proto__:null,default:C7e},[Qa]);var j$=function(){function t(e,r,n){if(this.formatMap=new Map([[Tr.QR_CODE,Qa.BarcodeFormat.QR_CODE],[Tr.AZTEC,Qa.BarcodeFormat.AZTEC],[Tr.CODABAR,Qa.BarcodeFormat.CODABAR],[Tr.CODE_39,Qa.BarcodeFormat.CODE_39],[Tr.CODE_93,Qa.BarcodeFormat.CODE_93],[Tr.CODE_128,Qa.BarcodeFormat.CODE_128],[Tr.DATA_MATRIX,Qa.BarcodeFormat.DATA_MATRIX],[Tr.MAXICODE,Qa.BarcodeFormat.MAXICODE],[Tr.ITF,Qa.BarcodeFormat.ITF],[Tr.EAN_13,Qa.BarcodeFormat.EAN_13],[Tr.EAN_8,Qa.BarcodeFormat.EAN_8],[Tr.PDF_417,Qa.BarcodeFormat.PDF_417],[Tr.RSS_14,Qa.BarcodeFormat.RSS_14],[Tr.RSS_EXPANDED,Qa.BarcodeFormat.RSS_EXPANDED],[Tr.UPC_A,Qa.BarcodeFormat.UPC_A],[Tr.UPC_E,Qa.BarcodeFormat.UPC_E],[Tr.UPC_EAN_EXTENSION,Qa.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!k7e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var a=this.createZXingFormats(e),s=new Map;s.set(Qa.DecodeHintType.POSSIBLE_FORMATS,a),s.set(Qa.DecodeHintType.TRY_HARDER,!1),this.hints=s}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,a){try{n(r.decode(e))}catch(s){a(s)}})},t.prototype.decode=function(e){var r=new Qa.MultiFormatReader(this.verbose,this.hints),n=new Qa.HTMLCanvasElementLuminanceSource(e),a=new Qa.BinaryBitmap(new Qa.HybridBinarizer(n)),s=r.decode(a);return{text:s.text,format:wse.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,a){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,a=e;n<a.length;n++){var s=a[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),I7e=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},O7e=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},T$=function(){function t(e,r,n){if(this.formatMap=new Map([[Tr.QR_CODE,"qr_code"],[Tr.AZTEC,"aztec"],[Tr.CODABAR,"codabar"],[Tr.CODE_39,"code_39"],[Tr.CODE_93,"code_93"],[Tr.CODE_128,"code_128"],[Tr.DATA_MATRIX,"data_matrix"],[Tr.ITF,"itf"],[Tr.EAN_13,"ean_13"],[Tr.EAN_8,"ean_8"],[Tr.PDF_417,"pdf417"],[Tr.UPC_A,"upc_a"],[Tr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return I7e(this,void 0,void 0,function(){var r,n;return O7e(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:wse.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,a=0,s=e;a<s.length;a++){var o=s[a],l=o.boundingBox.width*o.boundingBox.height;l>n&&(n=l,r=o)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,a=e;n<a.length;n++){var s=a[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,a){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),C$=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},k$=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},P7e=function(){function t(e,r,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&T$.isSupported()?(this.primaryDecoder=new T$(e,n,a),this.secondaryDecoder=new j$(e,n,a)):this.primaryDecoder=new j$(e,n,a)}return t.prototype.decodeAsync=function(e){return C$(this,void 0,void 0,function(){var r;return k$(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return C$(this,void 0,void 0,function(){var r,n;return k$(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var a=n[r];e+=a}var s=e/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),eD=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C3=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},k3=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Nse=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),R7e=function(t){eD(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var a={advanced:[n]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Nse),D7e=function(t){eD(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(R7e),M7e=function(t){eD(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(Nse),L7e=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new D7e(this.track)},t.prototype.torchFeature=function(){return new M7e(this.track)},t}(),F7e=function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,a),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,a){return C3(this,void 0,void 0,function(){var s,o;return k3(this,function(l){switch(l.label){case 0:return s=new t(e,r,a),n.aspectRatio?(o={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return s.setupSurface(),[2,s]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return C3(this,void 0,void 0,function(){return k3(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var a=e.mediaStream.getVideoTracks(),s=a.length,o=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++o,o>=s&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new L7e(this.getFirstTrackOrFail())},t}(),B7e=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return C3(this,void 0,void 0,function(){return k3(this,function(a){return[2,F7e.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return C3(this,void 0,void 0,function(){var r,n;return k3(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=a.sent(),[2,new t(n)]}})})},t}(),I$=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},O$=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},U7e=function(){function t(){}return t.failIfNotSupported=function(){return I$(this,void 0,void 0,function(){return O$(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return I$(this,void 0,void 0,function(){return O$(this,function(r){return[2,B7e.create(e)]})})},t}(),z7e=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},V7e=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$7e=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=E1.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=E1.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return z7e(this,void 0,void 0,function(){var e,r,n,a,s,o,l;return V7e(this,function(c){switch(c.label){case 0:return e=function(u){for(var d=u.getVideoTracks(),h=0,p=d;h<p.length;h++){var g=p[h];g.enabled=!1,g.stop(),u.removeTrack(g)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=c.sent(),a=[],s=0,o=n;s<o.length;s++)l=o[s],l.kind==="videoinput"&&a.push({id:l.deviceId,label:l.label});return e(r),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(s){for(var o=[],l=0,c=s;l<c.length;l++){var u=c[l];u.kind==="video"&&o.push({id:u.id,label:u.label})}e(o)},a=MediaStreamTrack;a.getSources(n)})},t}(),Rs;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Rs||(Rs={}));var H7e=function(){function t(){this.state=Rs.NOT_STARTED,this.onGoingTransactionNewState=Rs.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Rs.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Rs.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Rs.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Rs.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Rs.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Rs.UNKNOWN:throw"Transition from unknown is not allowed";case Rs.NOT_STARTED:this.failIfNewStateIs(e,[Rs.PAUSED]);break;case Rs.SCANNING:break;case Rs.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,a=r;n<a.length;n++){var s=a[n];if(e===s)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),q7e=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Rs.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Rs.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Rs.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Rs.PAUSED},t}(),G7e=function(){function t(){}return t.create=function(){return new q7e(new H7e)},t}(),W7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pc=function(t){W7e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(S7e),K7e=function(){function t(e,r){this.logger=r,this.fps=pc.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=pc.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?_se.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!wf(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),X7e=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new T7e(this.verbose),this.qrcode=new P7e(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=G7e.create()}return t.prototype.start=function(e,r,n,a){var s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;a?o=a:o=this.verbose?this.logger.log:function(){};var l=K7e.create(r,this.logger);this.clearElement();var c=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=c,d=document.getElementById(this.elementId);d.clientWidth?d.clientWidth:pc.DEFAULT_WIDTH,d.style.position="relative",this.shouldScan=!0,this.element=d;var h=this,p=this.stateManagerProxy.startTransition(Rs.SCANNING);return new Promise(function(g,b){var w=u?l.videoConstraints:h.createVideoConstraints(e);if(!w){p.cancel(),b("videoConstraints should be defined");return}var _={};(!u||l.aspectRatio)&&(_.aspectRatio=l.aspectRatio);var N={onRenderSurfaceReady:function(A,j){h.setupUi(A,j,l),h.isScanning=!0,h.foreverScan(l,n,o)}};U7e.failIfNotSupported().then(function(A){A.create(w).then(function(j){return j.render(s.element,_,N).then(function(P){h.renderedCamera=P,p.execute(),g(null)}).catch(function(P){p.cancel(),b(P)})}).catch(function(j){p.cancel(),b(E1.errorGettingUserMedia(j))})}).catch(function(A){p.cancel(),b(E1.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Rs.PAUSED),this.showPausedState(),(wf(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(Rs.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Rs.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var s=document.getElementById(pc.SHADED_REGION_ELEMENT_ID);s&&e.element.removeChild(s)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(wf(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var l=o.width,c=o.height,u=document.getElementById(n.elementId),d=u.clientWidth?u.clientWidth:pc.DEFAULT_WIDTH,h=Math.max(u.clientHeight?u.clientHeight:c,pc.FILE_SCAN_MIN_HEIGHT),p=n.computeCanvasDrawConfig(l,c,d,h);if(r){var g=n.createCanvasElement(d,h,"qr-canvas-visible");g.style.display="inline-block",u.appendChild(g);var b=g.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=d,b.canvas.height=h,b.drawImage(o,0,0,l,c,p.x,p.y,p.width,p.height)}var w=pc.FILE_SCAN_HIDDEN_CANVAS_PADDING,_=Math.max(o.width,p.width),N=Math.max(o.height,p.height),A=_+2*w,j=N+2*w,P=n.createCanvasElement(A,j);u.appendChild(P);var U=P.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=A,U.canvas.height=j,U.drawImage(o,0,0,l,c,w,w,_,N);try{n.qrcode.decodeRobustlyAsync(P).then(function(G){a(S$.createFromQrcodeResult(G))}).catch(s)}catch(G){s("QR code parse error, error = ".concat(G))}},o.onerror=s,o.onabort=s,o.onstalled=s,o.onsuspend=s,o.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return $7e.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!_se.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Tr.QR_CODE,Tr.AZTEC,Tr.CODABAR,Tr.CODE_39,Tr.CODE_93,Tr.CODE_128,Tr.DATA_MATRIX,Tr.MAXICODE,Tr.ITF,Tr.EAN_13,Tr.EAN_8,Tr.PDF_417,Tr.RSS_14,Tr.RSS_EXPANDED,Tr.UPC_A,Tr.UPC_E,Tr.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,s=e.formatsToSupport;a<s.length;a++){var o=s[a];A7e(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(wf(e))return!0;if(!wf(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(wf(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return wf(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var a=this,s=n.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(e,r,s),l=function(u){if(u<pc.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(pc.MIN_QR_BOX_SIZE,"px.")},c=function(u){return u>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),u=e),u};l(o.width),l(o.height),o.width=c(o.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var a=wf(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(e,r,a);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&s.height<=r,l={x:0,y:0,width:e,height:r},c=o?this.getShadedRegionBounds(e,r,s):l,u=this.createCanvasElement(c.width,c.height),d={willReadFrequently:!0},h=u.getContext("2d",d);h.canvas.width=c.width,h.canvas.height=c.height,this.element.append(u),o&&this.possiblyInsertShadingElement(this.element,e,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=h,this.canvasElement=u},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=E1.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,S$.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var s=E1.codeParseError(a);return r(s,j7e.createFrom(s)),!1})},t.prototype.foreverScan=function(e,r,n){var a=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),o=s.videoWidth/s.clientWidth,l=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*o,u=this.qrRegion.height*l,d=this.qrRegion.x*o,h=this.qrRegion.y*l;this.context.drawImage(s,d,h,c,u,0,0,this.qrRegion.width,this.qrRegion.height);var p=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,r,n)},a.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(g){!g&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,n).finally(function(){p()})):p()}).catch(function(g){a.logger.logError("Error happend while scanning context",g),p()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",a={user:!0,environment:!0},s="exact",o=function(b){if(b in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(b,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var c=Object.keys(e)[0];if(c!==r&&c!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(c===r){var u=e.facingMode;if(typeof u=="string"){if(o(u))return{facingMode:u}}else if(typeof u=="object")if(s in u){if(o(u["".concat(s)]))return{facingMode:{exact:u["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var d=typeof u;throw"Invalid type of 'facingMode' = ".concat(d)}}else{var h=e.deviceId;if(typeof h=="string")return{deviceId:h};if(typeof h=="object"){if(s in h)return{deviceId:{exact:h["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var p=typeof h;throw"Invalid type of 'deviceId' = ".concat(p)}}}var g=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(g)},t.prototype.computeCanvasDrawConfig=function(e,r,n,a){if(e<=n&&r<=a){var s=(n-e)/2,o=(a-r)/2;return{x:s,y:o,width:e,height:r}}else{var l=e,c=r;return e>n&&(r=n/e*r,e=n),r>a&&(e=a/r*e,r=a),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(c)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?pc.BORDER_SHADER_MATCH_COLOR:pc.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var a=e,s=r,o=document.createElement("canvas");return o.style.width="".concat(a,"px"),o.style.height="".concat(s,"px"),o.style.display="none",o.id=wf(n)?"qr-canvas":n,o},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,a){if(!(r-a.width<1||n-a.height<1)){var s=document.createElement("div");s.style.position="absolute";var o=(r-a.width)/2,l=(n-a.height)/2;if(s.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(pc.SHADED_REGION_ELEMENT_ID),r-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var c=5,u=40;this.insertShaderBorders(s,u,c,-c,null,0,!0),this.insertShaderBorders(s,u,c,-c,null,0,!1),this.insertShaderBorders(s,u,c,null,-c,0,!0),this.insertShaderBorders(s,u,c,null,-c,0,!1),this.insertShaderBorders(s,c,u+c,-c,null,-c,!0),this.insertShaderBorders(s,c,u+c,null,-c,-c,!0),this.insertShaderBorders(s,c,u+c,-c,null,-c,!1),this.insertShaderBorders(s,c,u+c,null,-c,-c,!1),this.hasBorderShaders=!0}e.append(s)}},t.prototype.insertShaderBorders=function(e,r,n,a,s,o,l){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=pc.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(r,"px"),c.style.height="".concat(n,"px"),a!==null&&(c.style.top="".concat(a,"px")),s!==null&&(c.style.bottom="".concat(s,"px")),l?c.style.left="".concat(o,"px"):c.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),e.appendChild(c)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),P$;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(P$||(P$={}));const Y7e=({onScan:t,onClose:e,title:r="Escanear Cdigo de Barras"})=>{const[n,a]=S.useState(!1),[s,o]=S.useState(null);S.useRef(null);const l=S.useRef(null);S.useEffect(()=>(c(),()=>{u()}),[]);const c=async()=>{try{const g={fps:10,qrbox:{width:300,height:150},aspectRatio:2,formatsToSupport:[fy.SCAN_TYPE_CAMERA]};l.current=new X7e("barcode-reader"),await l.current.start({facingMode:"environment"},g,d,h),a(!0),We.success("Cmara activada. Apunta al cdigo de barras")}catch(g){console.error("Error iniciando escner:",g),We.error("Error al acceder a la cmara. Verifica los permisos.")}},u=async()=>{if(l.current&&n)try{await l.current.stop(),l.current.clear(),a(!1)}catch(g){console.error("Error deteniendo escner:",g)}},d=(g,b)=>{console.log(" Cdigo escaneado:",g),g!==s&&(o(g),navigator.vibrate&&navigator.vibrate(200),We.success(`Cdigo: ${g}`),t&&t(g,b),setTimeout(()=>{p()},500))},h=g=>{},p=async()=>{await u(),e&&e()};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col",children:[i.jsxs("div",{className:"bg-slate-900 p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Kf,{className:"text-white",size:24}),i.jsx("h2",{className:"text-white font-semibold text-lg",children:r})]}),i.jsx("button",{onClick:p,className:"text-white hover:bg-slate-800 p-2 rounded-lg transition",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[i.jsx("div",{id:"barcode-reader",className:"w-full max-w-md rounded-lg overflow-hidden shadow-2xl"}),i.jsxs("div",{className:"mt-6 bg-slate-900/80 rounded-lg p-4 max-w-md w-full",children:[i.jsx("p",{className:"text-white text-center text-sm mb-2",children:" Apunta la cmara al cdigo de barras"}),i.jsx("p",{className:"text-slate-400 text-center text-xs",children:"El cdigo se leer automticamente"})]}),s&&i.jsxs("div",{className:"mt-4 bg-emerald-900/80 rounded-lg p-3 max-w-md w-full flex items-center gap-2",children:[i.jsx(ad,{className:"text-emerald-400",size:20}),i.jsxs("p",{className:"text-emerald-100 text-sm",children:["ltimo: ",i.jsx("strong",{children:s})]})]})]}),i.jsx("div",{className:"bg-slate-900 p-4",children:i.jsx("p",{className:"text-slate-400 text-xs text-center",children:" Tip: Asegrate de tener buena iluminacin y mantn el cdigo de barras en el centro del recuadro"})})]})},Z7e=({factura:t,onComplete:e,onCancel:r})=>{const[n,a]=S.useState(!1),[s,o]=S.useState(new Set),[l,c]=S.useState([]),[u,d]=S.useState(""),h=S.useRef(null),p=[];t.items.forEach((G,O)=>{const D=parseInt(G.cantidad)||1;for(let I=0;I<D;I++){const V=`${t.codigoTracking}-${O+1}-${I+1}`;p.push({codigo:V,itemIndex:O,unidadIndex:I,descripcion:G.producto||G.descripcion||"Item"})}});const g=p.length,b=s.size,w=g>0?b/g*100:0,_=b===g;S.useEffect(()=>{h.current&&!n&&h.current.focus()},[n]);const N=G=>{const O=G.trim().toUpperCase(),D=p.find(I=>I.codigo.toUpperCase()===O);return D?s.has(O)?(We.warning(` Ya escaneado: ${D.descripcion}`),!1):(o(I=>new Set([...I,O])),c(I=>[...I,{codigo:O,timestamp:new Date().toLocaleTimeString("es-DO"),descripcion:D.descripcion}]),navigator.vibrate&&navigator.vibrate(100),We.success(` ${D.descripcion} escaneado`),!0):(We.error(` Cdigo no vlido: ${O}`),!1)},A=G=>{N(G),a(!1)},j=G=>{G.preventDefault(),u.trim()&&N(u)&&d("")},P=G=>{G.key==="Enter"&&j(G)},U=()=>{if(!_){We.error(" Debes escanear todos los items antes de entregar");return}e(Array.from(s))};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[i.jsx(Vre,{size:28}),"Escanear Items para Entrega"]}),i.jsxs("p",{className:"text-indigo-100 mt-2",children:[" Factura: ",t.codigoTracking]})]}),i.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Progreso: ",b," / ",g," unidades"]}),i.jsxs("span",{className:`text-sm font-bold ${_?"text-emerald-600":"text-orange-600"}`,children:[w.toFixed(0),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-300 ${_?"bg-emerald-500":"bg-indigo-600"}`,style:{width:`${w}%`}})})]}),i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsx("form",{onSubmit:j,className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300",children:"Escanea o escribe el cdigo"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{ref:h,type:"text",value:u,onChange:G=>d(G.target.value),onKeyPress:P,placeholder:"ENV-2025-001-1-1",className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 font-mono",autoFocus:!0}),i.jsxs("button",{type:"button",onClick:()=>a(!0),className:"px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Kf,{size:20}),"Cmara"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:" Usa la cmara o una pistola Bluetooth/USB para escanear"})]})})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Br,{size:18}),"Items a Entregar (",g," unidades)"]}),i.jsx("div",{className:"space-y-2",children:p.map((G,O)=>{const D=s.has(G.codigo.toUpperCase());return i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${D?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-300 dark:border-emerald-700":"bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600"}`,children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:`font-mono text-sm ${D?"text-emerald-900 dark:text-emerald-100":"text-slate-700 dark:text-slate-300"}`,children:G.codigo}),i.jsxs("p",{className:`text-xs ${D?"text-emerald-700 dark:text-emerald-300":"text-slate-600 dark:text-slate-400"}`,children:[G.descripcion," - Unidad ",G.unidadIndex+1]})]}),i.jsx("div",{children:D?i.jsx(en,{className:"text-emerald-600 dark:text-emerald-400",size:24}):i.jsx(Ym,{className:"text-slate-400 dark:text-slate-500",size:24})})]},O)})})]}),l.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"ltimos Escaneados"}),i.jsx("div",{className:"space-y-2",children:[...l].reverse().slice(0,5).map((G,O)=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded border border-emerald-200 dark:border-emerald-800",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-mono text-sm text-emerald-900 dark:text-emerald-100",children:G.codigo}),i.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:G.descripcion})]}),i.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:G.timestamp})]},O))})]})]}),i.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex gap-3",children:[i.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:"Cancelar"}),i.jsxs("button",{onClick:U,disabled:!_,className:`flex-1 px-4 py-3 rounded-lg transition font-semibold flex items-center justify-center gap-2 ${_?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-400 cursor-not-allowed"}`,children:[i.jsx(en,{size:20}),_?"Confirmar Entrega":`Faltan ${g-b} items`]})]}),!_&&b>0&&i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border-t border-orange-200 dark:border-orange-800 flex items-start gap-3",children:[i.jsx(ms,{className:"text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",size:20}),i.jsxs("div",{className:"text-sm text-orange-800 dark:text-orange-200",children:[i.jsx("strong",{children:"Atencin:"})," An faltan ",g-b," unidad(es) por escanear. Verifica que todos los items estn presentes antes de entregar."]})]})]}),n&&i.jsx(Y7e,{onScan:A,onClose:()=>a(!1),title:"Escanear Cdigo de Item"})]})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const Q7e=t=>{const e=new Map;e.set("web",{name:"web"});const r=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},n=(s,o)=>{r.platforms.set(s,o)},a=s=>{r.platforms.has(s)&&(r.currentPlatform=r.platforms.get(s))};return r.addPlatform=n,r.setPlatform=a,r},J7e=t=>t.CapacitorPlatforms=Q7e(t),Ese=J7e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});Ese.addPlatform;Ese.setPlatform;var Dx;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Dx||(Dx={}));class vT extends Error{constructor(e,r,n){super(e),this.message=e,this.code=r,this.data=n}}const eDe=t=>{var e,r;return t!=null&&t.androidBridge?"android":!((r=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},tDe=t=>{var e,r,n,a,s;const o=t.CapacitorCustomPlatform||null,l=t.Capacitor||{},c=l.Plugins=l.Plugins||{},u=t.CapacitorPlatforms,d=()=>o!==null?o.name:eDe(t),h=((e=u==null?void 0:u.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||d,p=()=>h()!=="web",g=((r=u==null?void 0:u.currentPlatform)===null||r===void 0?void 0:r.isNativePlatform)||p,b=O=>{const D=P.get(O);return!!(D!=null&&D.platforms.has(h())||N(O))},w=((n=u==null?void 0:u.currentPlatform)===null||n===void 0?void 0:n.isPluginAvailable)||b,_=O=>{var D;return(D=l.PluginHeaders)===null||D===void 0?void 0:D.find(I=>I.name===O)},N=((a=u==null?void 0:u.currentPlatform)===null||a===void 0?void 0:a.getPluginHeader)||_,A=O=>t.console.error(O),j=(O,D,I)=>Promise.reject(`${I} does not have an implementation of "${D}".`),P=new Map,U=(O,D={})=>{const I=P.get(O);if(I)return console.warn(`Capacitor plugin "${O}" already registered. Cannot register plugins twice.`),I.proxy;const V=h(),R=N(O);let B;const F=async()=>(!B&&V in D?B=typeof D[V]=="function"?B=await D[V]():B=D[V]:o!==null&&!B&&"web"in D&&(B=typeof D.web=="function"?B=await D.web():B=D.web),B),ee=(Ee,ye)=>{var H,Y;if(R){const X=R==null?void 0:R.methods.find(re=>ye===re.name);if(X)return X.rtype==="promise"?re=>l.nativePromise(O,ye.toString(),re):(re,se)=>l.nativeCallback(O,ye.toString(),re,se);if(Ee)return(H=Ee[ye])===null||H===void 0?void 0:H.bind(Ee)}else{if(Ee)return(Y=Ee[ye])===null||Y===void 0?void 0:Y.bind(Ee);throw new vT(`"${O}" plugin is not implemented on ${V}`,Dx.Unimplemented)}},Z=Ee=>{let ye;const H=(...Y)=>{const X=F().then(re=>{const se=ee(re,Ee);if(se){const ke=se(...Y);return ye=ke==null?void 0:ke.remove,ke}else throw new vT(`"${O}.${Ee}()" is not implemented on ${V}`,Dx.Unimplemented)});return Ee==="addListener"&&(X.remove=async()=>ye()),X};return H.toString=()=>`${Ee.toString()}() { [capacitor code] }`,Object.defineProperty(H,"name",{value:Ee,writable:!1,configurable:!1}),H},ce=Z("addListener"),ne=Z("removeListener"),ae=(Ee,ye)=>{const H=ce({eventName:Ee},ye),Y=async()=>{const re=await H;ne({eventName:Ee,callbackId:re},ye)},X=new Promise(re=>H.then(()=>re({remove:Y})));return X.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Y()},X},me=new Proxy({},{get(Ee,ye){switch(ye){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return R?ae:ce;case"removeListener":return ne;default:return Z(ye)}}});return c[O]=me,P.set(O,{name:O,proxy:me,platforms:new Set([...Object.keys(D),...R?[V]:[]])}),me},G=((s=u==null?void 0:u.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||U;return l.convertFileSrc||(l.convertFileSrc=O=>O),l.getPlatform=h,l.handleError=A,l.isNativePlatform=g,l.isPluginAvailable=w,l.pluginMethodNoop=j,l.registerPlugin=G,l.Exception=vT,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},rDe=t=>t.Capacitor=tDe(t),Mx=rDe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),dS=Mx.registerPlugin;Mx.Plugins;class Ase{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,r){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(r);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),n&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,r);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,r,n){const a=this.listeners[e];if(!a){if(n){let s=this.retainedEventArguments[e];s||(s=[]),s.push(r),this.retainedEventArguments[e]=s}return}a.forEach(s=>s(r))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,r){this.windowListeners[r]={registered:!1,windowEventName:e,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(e="not implemented"){return new Mx.Exception(e,Dx.Unimplemented)}unavailable(e="not available"){return new Mx.Exception(e,Dx.Unavailable)}async removeListener(e,r){const n=this.listeners[e];if(!n)return;const a=n.indexOf(r);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const r=this.retainedEventArguments[e];r&&(delete this.retainedEventArguments[e],r.forEach(n=>{this.notifyListeners(e,n)}))}}const R$=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D$=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class nDe extends Ase{async getCookies(){const e=document.cookie,r={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[a,s]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=D$(a).trim(),s=D$(s).trim(),r[a]=s}),r}async setCookie(e){try{const r=R$(e.key),n=R$(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${r}=${n||""}${a}; path=${s}; ${o};`}catch(r){return Promise.reject(r)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const r of e)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}dS("CapacitorCookies",{web:()=>new nDe});const aDe=async t=>new Promise((e,r)=>{const n=new FileReader;n.onload=()=>{const a=n.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},n.onerror=a=>r(a),n.readAsDataURL(t)}),sDe=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(a=>a.toLocaleLowerCase()).reduce((a,s,o)=>(a[s]=t[e[o]],a),{})},iDe=(t,e=!0)=>t?Object.entries(t).reduce((n,a)=>{const[s,o]=a;let l,c;return Array.isArray(o)?(c="",o.forEach(u=>{l=e?encodeURIComponent(u):u,c+=`${s}=${l}&`}),c.slice(0,-1)):(l=e?encodeURIComponent(o):o,c=`${s}=${l}`),`${n}&${c}`},"").substr(1):null,oDe=(t,e={})=>{const r=Object.assign({method:t.method||"GET",headers:t.headers},e),a=sDe(t.headers)["content-type"]||"";if(typeof t.data=="string")r.body=t.data;else if(a.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,l]of Object.entries(t.data||{}))s.set(o,l);r.body=s.toString()}else if(a.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((l,c)=>{s.append(c,l)});else for(const l of Object.keys(t.data))s.append(l,t.data[l]);r.body=s;const o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(a.includes("application/json")||typeof t.data=="object")&&(r.body=JSON.stringify(t.data));return r};class lDe extends Ase{async request(e){const r=oDe(e,e.webFetchExtra),n=iDe(e.params,e.shouldEncodeUrlParams),a=n?`${e.url}?${n}`:e.url,s=await fetch(a,r),o=s.headers.get("content-type")||"";let{responseType:l="text"}=s.ok?e:{};o.includes("application/json")&&(l="json");let c,u;switch(l){case"arraybuffer":case"blob":u=await s.blob(),c=await aDe(u);break;case"json":c=await s.json();break;case"document":case"text":default:c=await s.text()}const d={};return s.headers.forEach((h,p)=>{d[p]=h}),{data:c,headers:d,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}dS("CapacitorHttp",{web:()=>new lDe});const sb=dS("Preferences",{web:()=>qf(()=>import("./web-DW-twSGl.js"),[]).then(t=>new t.PreferencesWeb)}),Ku=Mx.isNativePlatform();console.log(` Storage Service inicializado en modo: ${Ku?"NATIVO":"WEB"}`);const QN={USER_TOKEN:"auth_token",USER_DATA:"user_data",CURRENT_ROUTE:"current_route",PENDING_DELIVERIES:"pending_deliveries",OFFLINE_QUEUE:"offline_queue",LAST_SYNC:"last_sync_timestamp",COMPANY_DATA:"company_data",COMPANY_FEATURES:"company_features",CACHED_ROUTES:"cached_routes",CACHED_RECOLECCIONES:"cached_recolecciones"},JN={async setItem(t,e){try{const r=JSON.stringify(e);Ku?(await sb.set({key:t,value:r}),console.log(` [NATIVO] Guardado: ${t}`)):(localStorage.setItem(t,r),console.log(` [WEB] Guardado: ${t}`))}catch(r){throw console.error(` Error guardando ${t}:`,r),r}},async getItem(t){try{let e;if(Ku){const{value:n}=await sb.get({key:t});e=n}else e=localStorage.getItem(t);if(!e)return null;const r=JSON.parse(e);return console.log(` [${Ku?"NATIVO":"WEB"}] Ledo: ${t}`),r}catch(e){return console.error(` Error leyendo ${t}:`,e),null}},async removeItem(t){try{Ku?await sb.remove({key:t}):localStorage.removeItem(t),console.log(` [${Ku?"NATIVO":"WEB"}] Eliminado: ${t}`)}catch(e){console.error(` Error eliminando ${t}:`,e)}},async clear(){try{Ku?await sb.clear():localStorage.clear(),console.log(` [${Ku?"NATIVO":"WEB"}] Storage limpiado`)}catch(t){console.error(" Error limpiando storage:",t)}},async keys(){try{if(Ku){const{keys:t}=await sb.keys();return t}else return Object.keys(localStorage)}catch(t){return console.error(" Error obteniendo keys:",t),[]}},async hasItem(t){try{return await this.getItem(t)!==null}catch{return!1}},async getMultiple(t){const e={};return await Promise.all(t.map(async r=>{e[r]=await this.getItem(r)})),e},async setMultiple(t){await Promise.all(Object.entries(t).map(([e,r])=>this.setItem(e,r)))},async getStats(){try{const t=await this.keys(),e=await Promise.all(t.map(async n=>{const a=await this.getItem(n),s=JSON.stringify(a).length;return{key:n,size:s}})),r=e.reduce((n,a)=>n+a.size,0);return{totalKeys:t.length,totalSizeBytes:r,totalSizeKB:(r/1024).toFixed(2),totalSizeMB:(r/1024/1024).toFixed(2),items:e.sort((n,a)=>a.size-n.size)}}catch(t){return console.error(" Error obteniendo stats:",t),null}}},cDe=async()=>{if(!Ku)return;console.log(" Iniciando migracin desde localStorage...");const t=["token","user","company"];let e=0;for(const r of t)try{const n=localStorage.getItem(r);if(n){const a=r==="token"?QN.USER_TOKEN:`legacy_${r}`;await JN.setItem(a,JSON.parse(n)),localStorage.removeItem(r),e++}}catch(n){console.warn(` No se pudo migrar ${r}:`,n)}console.log(` Migracin completada: ${e} items migrados`)};Ku&&cDe();class uDe{constructor(){this.queue=[],this.isSyncing=!1,this.syncListeners=[],this.isInitialized=!1}async init(){if(!this.isInitialized)try{const e=await JN.getItem(QN.OFFLINE_QUEUE);this.queue=e||[],this.isInitialized=!0,console.log(` Cola offline inicializada: ${this.queue.length} operaciones pendientes`),this.queue.length>0&&navigator.onLine&&(console.log(" Hay conexin, sincronizando cola automticamente..."),setTimeout(()=>this.sync(),2e3)),window.addEventListener("online",()=>{console.log(" Conexin restaurada, sincronizando cola..."),this.sync()})}catch(e){console.error(" Error inicializando cola offline:",e),this.queue=[]}}async addOperation(e){const r={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString(),retries:0,status:"pending",priority:e.priority||5,...e};return this.queue.push(r),await this.saveQueue(),console.log(" Operacin agregada a cola offline:",{id:r.id,type:r.type,priority:r.priority}),this.notifyListeners({type:"operation_added",operation:r}),navigator.onLine&&setTimeout(()=>this.sync(),500),r.id}async saveQueue(){try{await JN.setItem(QN.OFFLINE_QUEUE,this.queue),await JN.setItem(QN.LAST_SYNC,new Date().toISOString())}catch(e){console.error(" Error guardando cola:",e)}}getPendingOperations(){return this.queue.filter(e=>e.status==="pending")}getOperation(e){return this.queue.find(r=>r.id===e)||null}async removeOperation(e){const r=this.queue.findIndex(n=>n.id===e);r!==-1&&(this.queue.splice(r,1),await this.saveQueue(),console.log(` Operacin ${e} eliminada de la cola`))}async clearCompleted(){const e=this.queue.length;this.queue=this.queue.filter(n=>n.status!=="completed"),await this.saveQueue();const r=e-this.queue.length;r>0&&console.log(` ${r} operaciones completadas eliminadas`)}async sync(){if(this.isSyncing)return console.log(" Ya hay una sincronizacin en progreso..."),{skipped:!0};if(!navigator.onLine)return console.log(" Sin conexin, sincronizacin pospuesta"),{skipped:!0,reason:"offline"};const e=this.getPendingOperations();if(e.length===0)return console.log(" Cola vaca, nada que sincronizar"),{success:0,failed:0,total:0};this.isSyncing=!0,this.notifyListeners({type:"sync_started",total:e.length}),console.log(` Sincronizando ${e.length} operaciones...`);const r={success:0,failed:0,errors:[]},n=[...e].sort((s,o)=>s.priority-o.priority);for(const s of n)try{console.log(` Procesando: ${s.type} (${s.id})`),await this.executeOperation(s),s.status="completed",s.completedAt=new Date().toISOString(),r.success++,this.notifyListeners({type:"operation_completed",operation:s,progress:{current:r.success+r.failed,total:n.length}})}catch(o){console.error(` Error en operacin ${s.id}:`,o),s.retries++,s.lastError=o.message,s.lastRetryAt=new Date().toISOString(),s.retries>=3&&(s.status="failed",r.failed++),r.errors.push({id:s.id,type:s.type,error:o.message}),this.notifyListeners({type:"operation_failed",operation:s,error:o.message})}await this.saveQueue(),r.success>10&&await this.clearCompleted(),this.isSyncing=!1;const a={success:r.success,failed:r.failed,total:n.length,errors:r.errors};return console.log(" Sincronizacin completada:",a),this.notifyListeners({type:"sync_completed",result:a}),a}async executeOperation(e){switch(e.type){case"UPDATE_DELIVERY_STATUS":return await this.updateDeliveryStatus(e.data);case"CREATE_RECOLECCION":return await this.createRecoleccion(e.data);case"REGISTER_EXPENSE":return await this.registerExpense(e.data);case"UPDATE_USER_LOCATION":return await this.updateUserLocation(e.data);case"MARK_DELIVERY_FAILED":return await this.markDeliveryFailed(e.data);default:throw new Error(`Tipo de operacin desconocido: ${e.type}`)}}async updateDeliveryStatus({recoleccionId:e,status:r,lat:n,lng:a,photo:s,motivo:o,companyId:l}){const c={estadoGeneral:r,updatedAt:new Date().toISOString()};n&&a&&(c.ubicacionEntrega={lat:n,lng:a}),s&&(c.fotoComprobante=s),o&&(c.motivoNoEntrega=o),await Bl.collection("recolecciones").doc(e).update(c),console.log(` Delivery ${e} actualizado a: ${r}`)}async createRecoleccion(e){const r=await Bl.collection("recolecciones").add({...e,createdAt:new Date().toISOString()});return console.log(" Recoleccin creada:",r.id),r.id}async registerExpense(e){await Bl.collection("gastos").add({...e,createdAt:new Date().toISOString()}),console.log(" Gasto registrado")}async updateUserLocation({userId:e,lat:r,lng:n}){await Bl.collection("usuarios").doc(e).update({lastLocation:{lat:r,lng:n},lastLocationUpdate:new Date().toISOString()}),console.log(" Ubicacin actualizada")}async markDeliveryFailed({recoleccionId:e,motivo:r,lat:n,lng:a}){await Bl.collection("recolecciones").doc(e).update({estadoGeneral:"no_entregada",motivoNoEntrega:r,ubicacionIntento:n&&a?{lat:n,lng:a}:null,fechaIntento:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log(` Entrega ${e} marcada como fallida`)}addSyncListener(e){return this.syncListeners.push(e),()=>this.removeSyncListener(e)}removeSyncListener(e){this.syncListeners=this.syncListeners.filter(r=>r!==e)}notifyListeners(e){this.syncListeners.forEach(r=>{try{r(e)}catch(n){console.error("Error en listener:",n)}})}getStats(){const e={},r={};this.queue.forEach(s=>{e[s.type]=(e[s.type]||0)+1,r[s.status]=(r[s.status]||0)+1});const n=this.getPendingOperations(),a=n.length>0?n[0].timestamp:null;return{total:this.queue.length,pending:n.length,completed:r.completed||0,failed:r.failed||0,byType:e,byStatus:r,oldestOperation:a,isSyncing:this.isSyncing,isOnline:navigator.onLine}}hasPendingOperations(){return this.getPendingOperations().length>0}async clearAll(){this.queue=[],await this.saveQueue(),console.log(" Cola completamente limpiada")}}const Qh=new uDe;Qh.init();const y5=dS("Network",{web:()=>qf(()=>import("./web-v_78nURd.js"),[]).then(t=>new t.NetworkWeb)});class dDe{constructor(){this.isNative=Mx.isNativePlatform(),this.listeners=[],this.currentStatus={connected:navigator.onLine,connectionType:"unknown"},this.isInitialized=!1}async init(){if(!this.isInitialized)try{if(this.isNative){const e=await y5.getStatus();this.currentStatus={connected:e.connected,connectionType:e.connectionType},console.log(" Network Service (Native):",this.currentStatus)}else this.currentStatus={connected:navigator.onLine,connectionType:navigator.onLine?"wifi":"none"},console.log(" Network Service (Web):",this.currentStatus);this.setupListeners(),this.isInitialized=!0}catch(e){console.error(" Error inicializando Network Service:",e),this.currentStatus.connected=navigator.onLine}}setupListeners(){this.isNative?y5.addListener("networkStatusChange",e=>{console.log(" Network status changed (Native):",e);const r=this.currentStatus.connected;this.currentStatus={connected:e.connected,connectionType:e.connectionType},r!==e.connected&&this.notifyListeners(this.currentStatus)}):(window.addEventListener("online",()=>{console.log(" Network online (Web)"),this.currentStatus.connected=!0,this.currentStatus.connectionType="wifi",this.notifyListeners(this.currentStatus)}),window.addEventListener("offline",()=>{console.log(" Network offline (Web)"),this.currentStatus.connected=!1,this.currentStatus.connectionType="none",this.notifyListeners(this.currentStatus)}))}async isConnected(){if(this.isNative)try{return(await y5.getStatus()).connected}catch{return console.warn(" Error checking network status, fallback to navigator.onLine"),navigator.onLine}return navigator.onLine}async getStatus(){if(this.isNative)try{return await y5.getStatus()}catch{return console.warn(" Error getting network status"),{connected:navigator.onLine,connectionType:"unknown"}}return{connected:navigator.onLine,connectionType:navigator.onLine?"wifi":"none"}}getConnectionType(){return this.currentStatus.connectionType}isWiFi(){return this.currentStatus.connectionType==="wifi"}isCellular(){return this.currentStatus.connectionType==="cellular"}addListener(e){return this.listeners.push(e),()=>this.removeListener(e)}removeListener(e){this.listeners=this.listeners.filter(r=>r!==e)}notifyListeners(e){this.listeners.forEach(r=>{try{r(e)}catch(n){console.error(" Error en network listener:",n)}})}canDoHeavyOperations(){return this.currentStatus.connected&&this.isWiFi()}getStatusDescription(){if(!this.currentStatus.connected)return"Sin conexin";switch(this.currentStatus.connectionType){case"wifi":return"WiFi";case"cellular":return"Datos mviles";case"2g":return"Datos mviles (2G)";case"3g":return"Datos mviles (3G)";case"4g":return"Datos mviles (4G)";case"5g":return"Datos mviles (5G)";default:return"Conectado"}}}const Sse=new dDe;Sse.init();const jse=()=>{const[t,e]=S.useState({total:0,pending:0,completed:0,failed:0,isSyncing:!1,isOnline:navigator.onLine}),[r,n]=S.useState({connected:navigator.onLine,connectionType:"unknown"}),[a,s]=S.useState(null),[o,l]=S.useState(null),c=S.useCallback(async A=>{try{const j=await Qh.addOperation(A);return d(),j}catch(j){throw console.error(" Error agregando operacin:",j),j}},[]),u=S.useCallback(async()=>{try{l(null);const A=await Qh.sync();return s(A),d(),A}catch(A){throw console.error(" Error en sincronizacin manual:",A),l(A.message),A}},[]),d=S.useCallback(()=>{const A=Qh.getStats();e(A)},[]),h=S.useCallback(()=>Qh.getPendingOperations(),[]),p=S.useCallback(async()=>{await Qh.clearCompleted(),d()},[d]),g=S.useCallback(()=>Qh.hasPendingOperations(),[]),b=S.useCallback(async({recoleccionId:A,lat:j,lng:P,photo:U,companyId:G})=>await c({type:"UPDATE_DELIVERY_STATUS",data:{recoleccionId:A,status:"entregada",lat:j,lng:P,photo:U,companyId:G},priority:1}),[c]),w=S.useCallback(async({recoleccionId:A,motivo:j,lat:P,lng:U,companyId:G})=>await c({type:"MARK_DELIVERY_FAILED",data:{recoleccionId:A,motivo:j,lat:P,lng:U,companyId:G},priority:2}),[c]),_=S.useCallback(async A=>await c({type:"REGISTER_EXPENSE",data:A,priority:5}),[c]),N=S.useCallback(async({userId:A,lat:j,lng:P})=>await c({type:"UPDATE_USER_LOCATION",data:{userId:A,lat:j,lng:P},priority:8}),[c]);return S.useEffect(()=>{d();const A=Qh.addSyncListener(G=>{switch(G.type){case"sync_started":console.log(" Sincronizacin iniciada:",G.total,"operaciones"),d();break;case"sync_completed":console.log(" Sincronizacin completada:",G.result),s(G.result),d();break;case"operation_added":console.log(" Operacin agregada:",G.operation.type),d();break;case"operation_completed":console.log(" Operacin completada:",G.operation.type),d();break;case"operation_failed":console.log(" Operacin fallida:",G.operation.type,G.error),d();break}}),j=Sse.addListener(G=>{console.log(" Network status changed:",G),n(G),d()}),P=()=>{console.log(" Conexin restaurada (fallback)"),d()},U=()=>{console.log(" Conexin perdida (fallback)"),d()};return window.addEventListener("online",P),window.addEventListener("offline",U),()=>{A(),j(),window.removeEventListener("online",P),window.removeEventListener("offline",U)}},[d]),S.useEffect(()=>{const A=setInterval(()=>{d()},3e4);return()=>clearInterval(A)},[d]),{stats:t,networkStatus:r,lastSyncResult:a,syncError:o,isOnline:t.isOnline,isSyncing:t.isSyncing,hasPending:t.pending>0,connectionType:r.connectionType,isWiFi:r.connectionType==="wifi",isCellular:r.connectionType==="cellular",addOperation:c,syncNow:u,getPendingOperations:h,clearCompleted:p,hasPendingOperations:g,markDeliveryCompleted:b,markDeliveryFailed:w,registerExpense:_,updateLocation:N}},fDe=()=>{const{stats:t,isOnline:e,isSyncing:r,hasPending:n,isWiFi:a,isCellular:s,syncNow:o}=jse(),[l,c]=S.useState(!1),[u,d]=S.useState(!1);return S.useEffect(()=>{if(r)d(!0);else{const h=setTimeout(()=>d(!1),1e3);return()=>clearTimeout(h)}},[r]),S.useEffect(()=>{if(l&&!r){const h=setTimeout(()=>c(!1),5e3);return()=>clearTimeout(h)}},[l,r]),i.jsxs("div",{className:"fixed bottom-20 right-3 z-40 flex flex-col gap-2 items-end",children:[i.jsxs("button",{onClick:()=>c(!l),className:`
          flex items-center gap-2 px-3 py-2 rounded-full shadow-lg
          transition-all duration-300 text-xs sm:text-sm font-medium
          ${e?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-rose-500 text-white hover:bg-rose-600"}
          ${u?"ring-4 ring-indigo-300 ring-opacity-50":""}
        `,children:[e?i.jsx(SAe,{size:16,className:"flex-shrink-0"}):i.jsx(Hre,{size:16,className:"flex-shrink-0"}),r&&i.jsx(ts,{size:14,className:"animate-spin flex-shrink-0"}),n&&!r&&i.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded-full text-xs font-bold",children:t.pending}),i.jsx("span",{className:"hidden xs:inline whitespace-nowrap",children:r?"Sincronizando...":n?`${t.pending} pendiente${t.pending>1?"s":""}`:e?"Online":"Offline"})]}),l&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl p-3 sm:p-4 max-w-xs w-72 border border-slate-200 dark:border-slate-700 animate-slide-up",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 pb-2 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("h4",{className:"font-bold text-sm text-slate-800 dark:text-white flex items-center gap-2",children:[e?i.jsx(q3e,{size:16,className:"text-emerald-600"}):i.jsx($3e,{size:16,className:"text-rose-600"}),"Cola de Sincronizacin"]}),i.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:""})]}),i.jsxs("div",{className:"space-y-2 mb-3",children:[i.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Estado:"}),i.jsx("span",{className:`font-bold ${e?"text-emerald-600":"text-rose-600"}`,children:e?i.jsxs(i.Fragment,{children:["Conectado",a&&i.jsx("span",{className:"ml-1 text-[10px] text-slate-500",children:"(WiFi)"}),s&&i.jsx("span",{className:"ml-1 text-[10px] text-amber-500",children:"(Datos)"})]}):"Sin conexin"})]}),i.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Pendientes:"}),i.jsx("span",{className:"font-bold text-amber-600",children:t.pending})]}),i.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Completadas:"}),i.jsx("span",{className:"font-bold text-emerald-600",children:t.completed})]}),t.failed>0&&i.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Fallidas:"}),i.jsx("span",{className:"font-bold text-rose-600",children:t.failed})]})]}),t.byType&&Object.keys(t.byType).length>0&&i.jsxs("div",{className:"mb-3 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Por tipo:"}),i.jsx("div",{className:"space-y-1",children:Object.entries(t.byType).map(([h,p])=>i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate",children:h.replace("_"," ").toLowerCase()}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:p})]},h))})]}),e&&n&&i.jsx("button",{onClick:()=>o(),disabled:r,className:`w-full px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\r
                       disabled:opacity-50 disabled:cursor-not-allowed\r
                       flex items-center justify-center gap-2 text-xs sm:text-sm font-medium\r
                       transition-all`,children:r?i.jsxs(i.Fragment,{children:[i.jsx(ts,{size:14,className:"animate-spin"}),"Sincronizando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(dh,{size:14}),"Sincronizar Ahora"]})}),!e&&i.jsxs("div",{className:"flex items-start gap-2 p-2 bg-amber-50 dark:bg-amber-900/20 rounded text-xs text-amber-800 dark:text-amber-200",children:[i.jsx(ms,{size:14,className:"mt-0.5 flex-shrink-0"}),i.jsx("p",{children:"Las operaciones se guardarn y sincronizarn cuando recuperes la conexin."})]}),e&&!n&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded text-xs text-emerald-800 dark:text-emerald-200",children:[i.jsx(en,{size:14,className:"flex-shrink-0"}),i.jsx("p",{children:"Todo sincronizado"})]})]})]})},bT=()=>{var Yn,Ts,Vi,zr,ka,$i,Mn,Ln,Ha,ut,Oe,Ar,Ia,qa,qs,Zo,Cs,Dr,Zn;const{data:t,loading:e,clearNewDataIndicator:r}=kCe();Aae();const{userData:n}=fa(),{markDeliveryCompleted:a,markDeliveryFailed:s,registerExpense:o}=jse(),[l,c]=S.useState(null),[u,d]=S.useState(null),[h,p]=S.useState("lista"),[g,b]=S.useState([]),[w,_]=S.useState(0),[N,A]=S.useState(!1),[j,P]=S.useState(!1),[U,G]=S.useState(!1),[O,D]=S.useState(!1),[I,V]=S.useState(""),[R,B]=S.useState(null),[F,ee]=S.useState(!1),[Z,ce]=S.useState(!1),[ne,ae]=S.useState(!1),[me,Ee]=S.useState(!1),[ye,H]=S.useState(!1),[Y,X]=S.useState(!1),[re,se]=S.useState(!1),[ke,Ce]=S.useState(!1),xe=yt=>{console.log(" Items escaneados antes de entregar:",yt),We.success(`${yt.length} items escaneados correctamente`),Ce(!1),H(!0)},[Ie,He]=S.useState([]),[Ue,Me]=S.useState(null),[Be,be]=S.useState(""),[Vt,ht]=S.useState([]),[Lt,et]=S.useState(""),[Jt,Ve]=S.useState(""),[Ft,qt]=S.useState(""),[Wt,nr]=S.useState([]),[Xe,Kt]=S.useState(!0),[kt,pt]=S.useState(""),[Ot,Ut]=S.useState("efectivo"),[Nr,or]=S.useState(""),[lt,lr]=S.useState(""),[ve,Ze]=S.useState(0),[at,Qe]=S.useState(""),[ze,it]=S.useState(""),[At,er]=S.useState(""),[It,Er]=S.useState(""),[rn,Qr]=S.useState(""),[En,fr]=S.useState("combustible"),[nn,ea]=S.useState(""),[on,In]=S.useState(""),[qr,un]=S.useState(!1),[de,pe]=S.useState(""),[_e,Se]=S.useState(""),[Te,Pe]=S.useState([]),tt=async yt=>{var mr,jr,Dn;try{A(!0);const pn=await wt.get(`/repartidores/rutas/${yt}`);if(pn.data.success){if(console.log(" Datos recibidos del servidor - Total facturas:",(mr=pn.data.data.facturas)==null?void 0:mr.length),(jr=pn.data.data.facturas)!=null&&jr[0]){const Jr=pn.data.data.facturas[0];console.log(" Primera factura completa:",{id:Jr.id,numeroFactura:Jr.numeroFactura,items:Jr.items}),console.log(" Items RAW de primera factura:",JSON.stringify(Jr.items,null,2))}if(c(pn.data.data),jt(yt),h==="factura"&&u){const Jr=pn.data.data.facturas.find(ur=>ur.id===u.id);Jr&&(console.log(" Actualizando facturaActual ID:",Jr.id),console.log(" Items RAW que se van a guardar en estado:",JSON.stringify(Jr.items,null,2)),d(Jr),console.log(" setFacturaActual llamado con items:",(Dn=Jr.items)==null?void 0:Dn.map(ur=>({desc:ur.descripcion,entregado:ur.entregado}))))}else p("ruta")}}catch(pn){We.error("Error cargando detalle de ruta"),console.error(pn)}finally{A(!1)}},jt=async yt=>{try{const mr=await wt.get(`/gastos-ruta/${yt}`);mr.data.success&&(b(mr.data.data.gastos||[]),_(mr.data.data.totalGastos||0))}catch(mr){console.error("Error cargando gastos:",mr)}},st=async()=>{l&&await tt(l.id),r()};S.useEffect(()=>{if(!O)return;const yt=mr=>{["INPUT","TEXTAREA"].includes(mr.target.tagName)||(mr.key==="Enter"?I&&(Ae(I),V("")):mr.key.length===1&&V(jr=>jr+mr.key))};return window.addEventListener("keydown",yt),()=>window.removeEventListener("keydown",yt)},[O,I,h,u,l]);const Ae=yt=>{if(B(yt),console.log(" Scan Repartidor:",yt),h==="factura"&&u){const mr=u.items.findIndex(jr=>jr.codigoBarras===yt||jr.producto===yt);if(mr!==-1){const jr=u.items[mr];jr.entregado?We.info("Item ya entregado"):(xt(mr),We.success(` Item escaneado: ${jr.descripcion}`))}else u.codigoTracking===yt||u.numeroFactura===yt?We.info("Ests en la factura correcta. Escanea los items."):We.warning("Cdigo no pertenece a esta factura")}else if(h==="ruta"&&l){let mr=null;if(mr=l.facturas.find(jr=>jr.codigoTracking===yt||jr.numeroFactura===yt),!mr){for(const jr of l.facturas)if(jr.items&&jr.items.some(Dn=>Dn.codigoBarras===yt)){mr=jr;break}}mr?(d(mr),p("factura"),We.success(` Abriendo factura: ${mr.codigoTracking}`)):We.error("Cdigo no encontrado en esta ruta")}else We.info("Entra a una ruta para usar el scanner")},Ge=async(yt,mr)=>{const jr=ny(Cx,mr);return await ty(jr,yt),await ry(jr)},ct=async(yt,mr)=>{const jr=[];if(!yt||yt.length===0)return jr;const Dn=(u==null?void 0:u.id)||(l==null?void 0:l.id)||"temp";for(let pn=0;pn<yt.length;pn++){const Jr=yt[pn],ur=Date.now();try{const $n=await yse(Jr),ks=await Ge($n.thumbnail,`${mr}/${Dn}/thumb_${Jr.name}`),Ir=await Ge($n.preview,`${mr}/${Dn}/preview_${Jr.name}`),Gs=await Ge($n.original,`${mr}/${Dn}/original_${Jr.name}`);jr.push({original:Gs,thumbnail:ks,preview:Ir,metadata:$n.metadata}),Date.now()-ur>500&&We.success(`Imagen ${pn+1}: ${$n.metadata.originalSizeKB}KB  Thumb: ${$n.metadata.thumbnailSizeKB}KB + Preview: ${$n.metadata.previewSizeKB}KB`,{duration:3e3})}catch($n){console.error(`Error procesando archivo ${Jr.name}:`,$n),We.error(`Error al procesar ${Jr.name}`)}}return jr},St=async()=>{if(l)try{P(!0),(await wt.post(`/repartidores/rutas/${l.id}/iniciar-entregas`)).data.success&&(We.success(" Ruta iniciada"),await tt(l.id))}catch(yt){We.error("Error al iniciar ruta"),console.error(yt)}finally{P(!1)}},xt=async yt=>{if(!u)return;const mr=u.items[yt];if(mr!=null&&mr.entregado||mr!=null&&mr._optimistic){console.warn(" Item ya entregado, ignorando accin duplicada");return}try{console.log(` Entregando item ${yt} de factura ${u.id}`);const jr=[...u.items];jr[yt]&&(jr[yt].entregado=!0,jr[yt]._optimistic=!0),d(pn=>({...pn,items:jr,itemsEntregados:(pn.itemsEntregados||0)+1})),(await wt.post(`/repartidores/facturas/${u.id}/items/entregar`,{itemIndex:yt})).data.success&&(console.log(` Item ${yt} entregado exitosamente en servidor`),We.success(" Item entregado"),await tt(l.id))}catch(jr){console.error(" Error al entregar item:",jr),We.error(" Error al entregar item"),await tt(l.id)}},Ct=async()=>{if(!u||Ie.length===0){We.warning("Debes seleccionar al menos una foto");return}try{P(!0),G(!0);const yt=await ct(Ie,"evidencia_entrega");if(yt.length===0){We.warning("No se subi ninguna foto con xito.");return}const mr=yt.map(Dn=>typeof Dn=="string"?Dn:Dn.original);(await wt.post(`/repartidores/facturas/${u.id}/fotos`,{fotos:mr})).data.success&&(We.success(` ${yt.length} fotos subidas`),ee(!1),He([]),await tt(l.id))}catch(yt){We.error("Error al subir fotos"),console.error(yt)}finally{P(!1),G(!1)}},Xt=async()=>{if(!u||!Ue||!Be.trim()){We.warning("La descripcin del dao es obligatoria");return}if(!Vt||Vt.length===0){We.warning("Debe tomar al menos una foto del item daado como evidencia.");return}try{P(!0);const yt=await ct(Vt,"danos_reparto");(await wt.post(`/repartidores/facturas/${u.id}/items/danado`,{itemIndex:Ue.index,descripcionDano:Be.trim(),fotos:yt})).data.success&&(We.warning(" Item daado reportado"),ce(!1),ln(),await tt(l.id))}catch(yt){We.error("Error reportando dao"),console.error(yt)}finally{P(!1)}},br=async()=>{if(!u||!Lt||!Ft.trim()){We.warning("Motivo y descripcin son obligatorios");return}if(!Wt||Wt.length===0){We.warning("Debe tomar al menos una foto como evidencia de la no entrega.");return}try{if(P(!0),!navigator.onLine){if(l){const Jr=l.facturas.map(ur=>ur.id===u.id?{...ur,estado:"no_entregada",_optimistic:!0}:ur);c(ur=>({...ur,facturas:Jr}))}let jr=null,Dn=null;try{const Jr=await new Promise((ur,$n)=>{navigator.geolocation.getCurrentPosition(ur,$n,{timeout:5e3})});jr=Jr.coords.latitude,Dn=Jr.coords.longitude}catch(Jr){console.warn(" No se pudo obtener ubicacin:",Jr)}const pn=await Promise.all(Wt.map(Jr=>new Promise(ur=>{const $n=new FileReader;$n.onloadend=()=>ur($n.result),$n.readAsDataURL(Jr)})));await s({recoleccionId:u.id,motivo:`${Lt}: ${Ft.trim()}`,lat:jr,lng:Dn,companyId:n==null?void 0:n.companyId}),We.warning(" No entrega guardada (se sincronizar cuando haya conexin)"),ae(!1),sn(),ws(),P(!1);return}const yt=await ct(Wt,"reportes_no_entrega");(await wt.post(`/repartidores/facturas/${u.id}/no-entregada`,{motivo:Lt,descripcion:Ft.trim(),fotos:yt,intentarNuevamente:Xe})).data.success&&(We.warning(" No entrega reportada"),ae(!1),sn(),ws())}catch(yt){We.error("Error reportando no entrega"),console.error(yt)}finally{P(!1)}},_t=async()=>{var yt;try{P(!0),(await wt.post(`/repartidores/facturas/${u.id}/pago-contraentrega`,{montoPagado:parseFloat(Ot==="efectivo"?ve:((yt=u.pago)==null?void 0:yt.total)||0),metodoPago:Ot,referenciaPago:Nr,notas:at})).data.success&&(We.success(" Pago confirmado"),Ee(!1),ls(),await tt(l.id))}catch(mr){We.error("Error al confirmar pago"),console.error(mr)}finally{P(!1)}},Yr=async()=>{var yt,mr,jr,Dn,pn,Jr;if(u){if(u.itemsEntregados<(((yt=u.items)==null?void 0:yt.length)||u.itemsTotal)){We.warning("Debe confirmar la entrega de todos los tems o reportar los faltantes/daados.");return}if(((mr=u.pago)==null?void 0:mr.estado)!=="pagada"&&((jr=u.pago)==null?void 0:jr.total)>0){We.warning("Debe confirmar el pago contraentrega antes de marcar como entregada.");return}if(!u.fotosEntrega||u.fotosEntrega.length===0){We.warning("Debe subir al menos una foto de evidencia antes de finalizar la entrega.");return}try{if(P(!0),!navigator.onLine){if(l){const Ir=l.facturas.map(Gs=>Gs.id===u.id?{...Gs,estado:"entregada",_optimistic:!0}:Gs);c(Gs=>({...Gs,facturas:Ir}))}let $n=null,ks=null;try{const Ir=await new Promise((Gs,Ur)=>{navigator.geolocation.getCurrentPosition(Gs,Ur,{timeout:5e3})});$n=Ir.coords.latitude,ks=Ir.coords.longitude}catch(Ir){console.warn(" No se pudo obtener ubicacin:",Ir)}await a({recoleccionId:u.id,lat:$n,lng:ks,photo:((Dn=u.fotosEntrega)==null?void 0:Dn[0])||null,companyId:n==null?void 0:n.companyId}),We.success(" Entrega guardada (se sincronizar cuando haya conexin)"),H(!1),ii(),ws(),P(!1);return}(await wt.post(`/repartidores/facturas/${u.id}/entregar`,{nombreReceptor:ze,notasEntrega:At||It,firmaCliente:null})).data.success&&(We.success(" Factura marcada como entregada"),H(!1),ii(),ws())}catch(ur){const $n=((Jr=(pn=ur.response)==null?void 0:pn.data)==null?void 0:Jr.message)||"Error al confirmar entrega";We.error($n),console.error("Error confirmando entrega:",ur),l!=null&&l.id&&await tt(l.id),$n.includes("ya fue entregada")&&(H(!1),ii())}finally{P(!1)}}},Gr=async()=>{l&&We.promise(async()=>{const yt=await wt.post(`/repartidores/rutas/${l.id}/finalizar`,{notas:rn});return yt.data.success&&(X(!1),Qr(""),hn()),yt.data},{loading:"Finalizando ruta...",success:" Ruta finalizada correctamente",error:"Error al finalizar la ruta"})},$a=async()=>{var yt,mr;if(l){if(!nn||parseFloat(nn)<=0){We.error("Ingresa un monto vlido");return}if(qr){if(!de||de.length<11){We.error("Ingrese un NCF vlido (11 caracteres)");return}if(!_e||_e.length!==9&&_e.length!==11){We.error("Ingrese un RNC vlido (9 u 11 dgitos)");return}if(Te.length===0){We.error("La foto es OBLIGATORIA para gastos con NCF");return}}try{if(P(!0),!navigator.onLine){let pn=null;Te.length>0&&(pn=await new Promise(Jr=>{const ur=new FileReader;ur.onloadend=()=>Jr(ur.result),ur.readAsDataURL(Te[0])})),await o({rutaId:l.id,tipo:En,monto:parseFloat(nn),descripcion:on,ncf:qr?de:null,rnc:qr?_e:null,fotoBase64:pn,userId:n==null?void 0:n.id,companyId:n==null?void 0:n.companyId}),We.success(" Gasto guardado (se sincronizar cuando haya conexin)"),se(!1),On(),P(!1);return}let jr=null;if(Te.length>0){const pn=await ct(Te,"gastos_fiscales");pn.length>0&&(jr=pn[0].original||pn[0])}(await wt.post(`/gastos-ruta/${l.id}`,{tipo:En,monto:parseFloat(nn),descripcion:on,ncf:qr?de:null,rnc:qr?_e:null,imgUrl:jr})).data.success&&(We.success(" Gasto registrado"),se(!1),On(),jt(l.id))}catch(jr){We.error(((mr=(yt=jr.response)==null?void 0:yt.data)==null?void 0:mr.error)||"Error al registrar gasto"),console.error(jr)}finally{P(!1)}}},ws=()=>{d(null),p("ruta"),l&&tt(l.id)},hn=()=>{c(null),p("lista")},ln=()=>{Me(null),be(""),ht([])},sn=()=>{et(""),qt(""),nr([]),Kt(!0),Ve("")},ls=()=>{pt(""),Ut("efectivo"),Ze(0),Qe("")},ii=()=>{it(""),er(""),Er("")},On=()=>{ea(""),In(""),fr("combustible"),un(!1),pe(""),Se(""),Pe([])};return i.jsx(E7e,{onRefresh:st,children:i.jsxs("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 pb-20",children:[i.jsx("div",{className:"sticky top-0 z-40 bg-white dark:bg-slate-800 shadow-sm",children:i.jsx("div",{className:"px-3 sm:px-4 py-2.5 sm:py-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("img",{src:bw,alt:"ProLogix",className:"h-8 sm:h-10 w-auto object-contain flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-sm sm:text-base font-bold bg-gradient-to-r from-indigo-600 to-indigo-800 bg-clip-text text-transparent truncate",children:"ProLogix"}),i.jsx("p",{className:"text-[10px] sm:text-xs text-slate-600 dark:text-slate-400 truncate",children:(n==null?void 0:n.nombre)||"Repartidor"})]})]}),i.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[i.jsx(jae,{}),i.jsx(Sae,{}),i.jsx("button",{className:"relative p-1.5 sm:p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",children:i.jsx(PR,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),i.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-xs sm:text-sm font-bold",children:((Yn=n==null?void 0:n.nombre)==null?void 0:Yn.charAt(0).toUpperCase())||"R"})]})]})})}),i.jsxs("div",{className:"p-3 sm:p-4",children:[h==="lista"&&i.jsxs("div",{className:"space-y-3 xxs:space-y-4",children:[i.jsx("h2",{className:"text-base xxs:text-lg xs:text-xl font-semibold text-slate-800 dark:text-slate-200",children:"Mis Rutas Asignadas"}),e?i.jsx("div",{className:"flex justify-center p-8",children:i.jsx(ts,{className:"animate-spin text-indigo-600"})}):(t==null?void 0:t.length)>0?t.map(yt=>{var mr;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 rounded-lg shadow-md border-l-4 border-indigo-600",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-bold text-base xxs:text-lg dark:text-white truncate",children:yt.nombre}),i.jsx("p",{className:"text-xs xxs:text-sm text-slate-500 dark:text-slate-400",children:new Date(yt.fecha_programada).toLocaleDateString()})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold whitespace-nowrap flex-shrink-0 ${yt.estado==="en_curso"?"bg-emerald-100 text-emerald-800":"bg-amber-100 text-amber-800"}`,children:yt.estado.toUpperCase().replace("_"," ")})]}),i.jsxs("div",{className:"flex justify-between items-center mt-3 xxs:mt-4 gap-2",children:[i.jsx("div",{className:"text-xs xxs:text-sm text-slate-600 dark:text-slate-300",children:i.jsxs("p",{children:[((mr=yt.facturas)==null?void 0:mr.length)||0," entregas"]})}),i.jsxs("button",{onClick:()=>tt(yt.id),className:"px-3 xxs:px-4 py-2 text-xs xxs:text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 transition flex items-center gap-1 xxs:gap-2 whitespace-nowrap",children:["Ver Ruta ",i.jsx(Gl,{className:"rotate-180",size:14})]})]})]},yt.id)}):i.jsxs("div",{className:"text-center p-8 bg-white dark:bg-slate-800 rounded-lg",children:[i.jsx(as,{className:"mx-auto h-12 w-12 text-slate-400 mb-2"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No tienes rutas activas asignadas"})]})]}),h==="ruta"&&l&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("button",{onClick:hn,className:"flex items-center text-slate-600 dark:text-slate-400 mb-2 text-sm sm:text-base",children:[i.jsx(Gl,{size:18,className:"mr-1 sm:mr-2"})," Volver"]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 sm:p-4 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-bold dark:text-white truncate",children:l.nombre}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-500",children:[(Ts=l.facturas)==null?void 0:Ts.filter(yt=>yt.estado==="entregada").length," / ",(Vi=l.facturas)==null?void 0:Vi.length," completadas"]})]}),l.estado==="cargada"?i.jsxs("button",{onClick:St,disabled:j,className:"w-full sm:w-auto px-3 sm:px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 flex items-center justify-center gap-2 text-sm sm:text-base",children:[i.jsx(as,{size:16})," Iniciar Entregas"]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{const yt=`${window.location.origin}/rutas/${l.id}/imprimir`;window.open(yt,"_blank")},className:"p-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200",title:"Imprimir",children:i.jsx(Wl,{size:18})}),i.jsx("button",{onClick:()=>se(!0),className:"p-2 bg-amber-100 text-amber-700 rounded hover:bg-amber-200",title:"Gasto",children:i.jsx(Ul,{size:18})}),i.jsx("button",{onClick:()=>X(!0),className:"px-2 sm:px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center gap-1 sm:gap-2 text-xs sm:text-sm whitespace-nowrap",children:"Finalizar"})]})]}),i.jsxs("div",{className:`mt-2 mb-2 p-2 rounded-lg flex items-center justify-between transition border ${O?"bg-indigo-50 border-indigo-300":"bg-white border-slate-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`p-2 rounded-full ${O?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:i.jsx(Wl,{size:20})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:["Modo Scanner ",O&&"(ACTIVO)"]}),R&&i.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["ltimo: ",R]})]})]}),i.jsx("button",{onClick:()=>D(!O),className:`text-xs px-3 py-1.5 rounded font-medium ${O?"bg-indigo-600 text-white":"bg-slate-200 text-slate-600"}`,children:O?"Apagar":"Encender"})]}),w>0&&i.jsx("div",{className:"mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-slate-100 dark:border-slate-700",children:i.jsxs("p",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300",children:["Gastos: ",i.jsxs("span",{className:"text-rose-600",children:["RD$ ",w.toFixed(2)]})]})})]}),i.jsx("div",{className:"space-y-2 sm:space-y-3",children:(zr=l.facturas)==null?void 0:zr.map((yt,mr)=>{var jr,Dn;return i.jsx("div",{onClick:()=>{d(yt),p("factura")},className:`p-3 sm:p-4 rounded-lg shadow-sm border-l-4 cursor-pointer transition-all ${yt.estado==="entregada"?"bg-emerald-50 border-emerald-500 dark:bg-emerald-900/20":yt.estado==="no_entregada"?"bg-rose-50 border-rose-500 dark:bg-rose-900/20":"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[i.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm flex-shrink-0",children:mr+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-sm sm:text-base text-slate-900 dark:text-white truncate",children:(jr=yt.destinatario)==null?void 0:jr.nombre}),i.jsx("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400 truncate",children:(Dn=yt.destinatario)==null?void 0:Dn.direccion})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-2",children:[yt.estado==="entregada"&&i.jsx(en,{className:"text-emerald-600",size:18}),yt.estado==="no_entregada"&&i.jsx(Ym,{className:"text-rose-600",size:18})]})]})},yt.id)})})]}),h==="factura"&&u&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[i.jsx("button",{onClick:ws,className:"p-1.5 sm:p-2 hover:bg-slate-100 rounded-full dark:hover:bg-slate-700",children:i.jsx(Gl,{size:20})}),i.jsx("h2",{className:"text-lg sm:text-xl font-bold dark:text-white",children:"Entrega"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:"Cliente"}),i.jsx("p",{className:"font-bold text-base sm:text-lg text-slate-900 dark:text-white break-words",children:(ka=u.destinatario)==null?void 0:ka.nombre}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-300 flex items-start gap-2 mt-1",children:[i.jsx(Fa,{size:14,className:"mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"break-words",children:($i=u.destinatario)==null?void 0:$i.direccion})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[i.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(((Mn=u.destinatario)==null?void 0:Mn.direccion)||"")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium shadow-sm text-xs sm:text-sm",children:[i.jsx(sy,{size:14}),"Maps"]}),i.jsxs("a",{href:`https://waze.com/ul?q=${encodeURIComponent(((Ln=u.destinatario)==null?void 0:Ln.direccion)||"")}&navigate=yes`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition font-medium shadow-sm text-xs sm:text-sm",children:[i.jsx(sy,{size:14}),"Waze"]})]})]}),i.jsxs("div",{className:"pt-3 sm:pt-0 border-t sm:border-t-0 sm:border-l sm:pl-4",children:[i.jsx("p",{className:"text-xs sm:text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Pago Contraentrega:"}),i.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-emerald-700 dark:text-emerald-400",children:["$",((ut=(Ha=u.pago)==null?void 0:Ha.total)==null?void 0:ut.toFixed(2))||"0.00"]}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:["Estado: ",i.jsx("span",{className:`font-bold ${((Oe=u.pago)==null?void 0:Oe.estado)==="pagada"?"text-emerald-600":"text-amber-600"}`,children:((Ar=u.pago)==null?void 0:Ar.estado)==="pagada"?"Pagado":"Pendiente"})]})]})]}),i.jsxs("h3",{className:"font-bold text-base sm:text-lg mb-2 sm:mb-3 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Br,{size:18})," Items a Entregar"]}),i.jsx("div",{className:"space-y-2 sm:space-y-3 mb-4 sm:mb-6",children:(Ia=u.items)==null?void 0:Ia.map((yt,mr)=>{const jr=yt.danado||yt.estadoItem==="danado",Dn=yt.entregado||yt.estadoItem==="entregado",pn=yt.estadoItem==="no_entregado";let Jr="bg-slate-50 border-slate-200 dark:bg-slate-700 dark:border-slate-600";return Dn?Jr="bg-emerald-50 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800":jr?Jr="bg-amber-50 border-amber-200 dark:bg-amber-900/20 dark:border-amber-800":pn&&(Jr="bg-rose-50 border-rose-200 dark:bg-rose-900/20 dark:border-rose-800"),i.jsxs("div",{className:`p-2.5 sm:p-3 border rounded-lg flex justify-between items-center gap-2 ${Jr} ${yt._optimistic?"opacity-70":""}`,children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm sm:text-base text-slate-900 dark:text-white break-words",children:yt.producto||yt.descripcion||"Item sin nombre"}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:["Cant: ",yt.cantidad]}),jr&&yt.descripcionDano&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[" ",yt.descripcionDano]})]}),i.jsx("div",{className:"flex gap-1.5 sm:gap-2 flex-shrink-0",children:Dn?i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 rounded-full",children:[i.jsx(en,{size:16,className:"fill-current"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm whitespace-nowrap",children:"Entregado"})]}):jr?i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded-full",children:[i.jsx(bi,{size:16,className:"fill-current"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm whitespace-nowrap",children:"Daado"})]}):pn?i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300 rounded-full",children:[i.jsx(Ym,{size:16,className:"fill-current"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm whitespace-nowrap",children:"No Entregado"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>xt(mr),className:"p-1.5 sm:p-2 bg-emerald-100 text-emerald-700 rounded-full hover:bg-emerald-200 transition",title:"Entregar",children:i.jsx(en,{size:18})}),i.jsx("button",{onClick:()=>{Me({...yt,index:mr}),ce(!0)},className:"p-1.5 sm:p-2 bg-rose-100 text-rose-700 rounded-full hover:bg-rose-200 transition",title:"Dao",children:i.jsx(bi,{size:18})})]})})]},mr)})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 sm:p-4 rounded-lg shadow-sm mb-4 sm:mb-6",children:[i.jsxs("h3",{className:"font-bold text-base sm:text-lg mb-2 sm:mb-3 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Kf,{size:18})," Evidencia"]}),i.jsxs("div",{className:"flex gap-2 mb-3 sm:mb-4",children:[i.jsxs("label",{className:"flex-1",children:[i.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:yt=>He(mr=>[...mr,...Array.from(yt.target.files)]),className:"hidden",id:"camera-input"}),i.jsxs("div",{className:"w-full px-2 py-2 sm:px-3 sm:py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 cursor-pointer flex items-center justify-center gap-1.5 sm:gap-2 font-medium text-sm sm:text-base",children:[i.jsx(Kf,{size:18}),i.jsx("span",{children:"Cmara"})]})]}),i.jsxs("label",{className:"flex-1",children:[i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:yt=>He(mr=>[...mr,...Array.from(yt.target.files)]),className:"hidden",id:"gallery-input"}),i.jsxs("div",{className:"w-full px-2 py-2 sm:px-3 sm:py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 cursor-pointer flex items-center justify-center gap-1.5 sm:gap-2 font-medium text-sm sm:text-base",children:[i.jsx($d,{size:18}),i.jsx("span",{children:"Galera"})]})]})]}),Ie.length>0&&i.jsxs("div",{className:"mb-3 sm:mb-4 p-2.5 sm:p-3 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[i.jsxs("p",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[" ",Ie.length," foto(s)"]}),i.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-3 gap-2",children:Ie.map((yt,mr)=>i.jsxs("div",{className:"relative aspect-square",children:[i.jsx("img",{src:URL.createObjectURL(yt),alt:`Preview ${mr+1}`,className:"w-full h-full object-cover rounded border border-slate-300 dark:border-slate-600"}),i.jsx("button",{onClick:()=>He(jr=>jr.filter((Dn,pn)=>pn!==mr)),className:"absolute -top-1 -right-1 bg-rose-600 text-white rounded-full p-1 hover:bg-rose-700",children:i.jsx(Jn,{size:12})})]},mr))}),i.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[i.jsx("button",{onClick:()=>He([]),className:"px-3 py-1.5 sm:px-4 sm:py-2 text-slate-600 dark:text-slate-400 text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:Ct,disabled:U,className:"px-3 py-1.5 sm:px-4 sm:py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 flex items-center gap-1.5 sm:gap-2 font-medium text-sm",children:[U?i.jsx(ts,{className:"animate-spin",size:14}):i.jsx(Kf,{size:14}),U?"Subiendo...":"Subir"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[i.jsxs("button",{onClick:()=>ae(!0),className:"p-3 sm:p-4 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 transition flex flex-col items-center gap-1.5 sm:gap-2",children:[i.jsx(Ym,{size:20}),i.jsx("span",{className:"font-bold text-xs sm:text-sm",children:"No Entregado"})]}),i.jsxs("button",{onClick:()=>Ee(!0),disabled:((qa=u.pago)==null?void 0:qa.estado)==="pagada"||((qs=u.pago)==null?void 0:qs.total)<=0,className:"p-3 sm:p-4 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition flex flex-col items-center gap-1.5 sm:gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Ul,{size:20}),i.jsx("span",{className:"font-bold text-xs sm:text-sm text-center",children:((Zo=u.pago)==null?void 0:Zo.estado)==="pagada"?"Pagado":"Confirmar Pago"})]}),i.jsxs("button",{onClick:()=>Ce(!0),disabled:u.estado==="entregada"||u.estadoGeneral==="entregada",className:`col-span-2 p-3 sm:p-4 rounded-lg transition flex items-center justify-center gap-2 shadow-lg ${u.estado==="entregada"||u.estadoGeneral==="entregada"?"bg-slate-400 text-slate-200 cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:[i.jsx(en,{size:20}),i.jsx("span",{className:"font-bold text-sm sm:text-base",children:u.estado==="entregada"||u.estadoGeneral==="entregada"?"Ya Entregada":"Finalizar Entrega"})]})]})]}),Z&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-rose-600 flex items-center gap-2",children:[i.jsx(bi,{})," Reportar Dao"]}),i.jsxs("p",{className:"mb-4 font-medium text-slate-800 dark:text-white",children:["Item: ",(Ue==null?void 0:Ue.producto)||(Ue==null?void 0:Ue.descripcion)||"Item sin nombre"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin del Dao"}),i.jsx("textarea",{value:Be,onChange:yt=>be(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Describa el dao..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Fotos del Dao"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:yt=>ht(Array.from(yt.target.files)),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:Xt,disabled:j,className:"px-4 py-2 bg-rose-600 text-white rounded hover:bg-rose-700 disabled:opacity-50 flex items-center gap-2",children:[j?i.jsx(ts,{className:"animate-spin",size:16}):i.jsx(bi,{size:16}),"Reportar"]})]})]})}),ne&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-rose-600 flex items-center gap-2",children:[i.jsx(Ym,{})," Reportar No Entrega"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Motivo"}),i.jsxs("select",{value:Lt,onChange:yt=>et(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"",children:"Seleccione un motivo..."}),i.jsx("option",{value:"cliente_ausente",children:"Cliente Ausente"}),i.jsx("option",{value:"direccion_incorrecta",children:"Direccin Incorrecta"}),i.jsx("option",{value:"rechazado",children:"Rechazado por Cliente"}),i.jsx("option",{value:"zona_peligrosa",children:"Zona Peligrosa / Inaccesible"}),i.jsx("option",{value:"otro",children:"Otro"})]})]}),Lt==="otro"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Especificar Motivo"}),i.jsx("textarea",{value:Jt,onChange:yt=>Ve(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"2",placeholder:"Especifique el motivo..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin"}),i.jsx("textarea",{value:Ft,onChange:yt=>qt(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Detalles adicionales..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Fotos (Fachada/Prueba)"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:yt=>nr(Array.from(yt.target.files)),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:Xe,onChange:yt=>Kt(yt.target.checked),id:"reintento"}),i.jsx("label",{htmlFor:"reintento",className:"text-sm text-slate-700 dark:text-slate-300",children:"Se puede reintentar hoy"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>ae(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:br,disabled:j,className:"px-4 py-2 bg-rose-600 text-white rounded hover:bg-rose-700 disabled:opacity-50 flex items-center gap-2",children:[j?i.jsx(ts,{className:"animate-spin",size:16}):i.jsx(Ym,{size:16}),"Reportar Fallo"]})]})]})}),me&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-emerald-600 flex items-center gap-2",children:[i.jsx(Ul,{})," Confirmar Pago"]}),i.jsxs("p",{className:"mb-4 text-slate-800 dark:text-white",children:["Monto a cobrar: ",i.jsxs("span",{className:"font-bold text-lg",children:["RD$ ",(((Cs=u.pago)==null?void 0:Cs.total)||0).toFixed(2)]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mtodo de Pago"}),i.jsxs("select",{value:Ot,onChange:yt=>Ut(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"",children:"Seleccione un mtodo..."}),i.jsx("option",{value:"efectivo",children:"Efectivo"}),i.jsx("option",{value:"transferencia",children:"Transferencia"}),i.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),Ot==="efectivo"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Monto Recibido (Efectivo)"}),i.jsx("input",{type:"number",step:"0.01",value:ve,onChange:yt=>Ze(parseFloat(yt.target.value)),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"0.00"}),ve>0&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Cambio: RD$ ",(ve-(((Dr=u.pago)==null?void 0:Dr.total)||0)).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Comentario (Opcional)"}),i.jsx("textarea",{value:at,onChange:yt=>Qe(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"2",placeholder:"Notas sobre el pago..."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>Ee(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:_t,disabled:j||!Ot||Ot==="efectivo"&&ve<(((Zn=u.pago)==null?void 0:Zn.total)||0),className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 flex items-center gap-2",children:[j?i.jsx(ts,{className:"animate-spin",size:16}):i.jsx(en,{size:16}),"Confirmar"]})]})]})}),ye&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-emerald-600 flex items-center gap-2",children:[i.jsx(en,{})," Finalizar Entrega"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Recibido por (Nombre)"}),i.jsx("input",{type:"text",value:ze,onChange:yt=>it(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Nombre de quien recibe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Notas de Entrega"}),i.jsx("textarea",{value:At,onChange:yt=>er(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"2",placeholder:"Comentarios opcionales..."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:Yr,disabled:j,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 flex items-center gap-2",children:[j?i.jsx(ts,{className:"animate-spin",size:16}):i.jsx(en,{size:16}),"Confirmar Entrega"]})]})]})}),Y&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start sm:items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md my-4 sm:my-0 flex flex-col max-h-[95vh] sm:max-h-[85vh]",children:[i.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-slate-700 flex-shrink-0",children:i.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-purple-600 flex items-center gap-2",children:[i.jsx(as,{size:20})," Finalizar Ruta"]})}),i.jsxs("div",{className:"p-3 sm:p-4 overflow-y-auto flex-1",children:[i.jsx("p",{className:"mb-3 text-sm sm:text-base text-slate-600 dark:text-slate-400",children:"Est seguro de que desea finalizar la ruta? Esto cerrar todas las facturas pendientes como no entregadas."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas Finales"}),i.jsx("textarea",{value:rn,onChange:yt=>Qr(yt.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Observaciones sobre la ruta..."})]})]}),i.jsxs("div",{className:"p-3 sm:p-4 border-t dark:border-slate-700 flex justify-end gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>X(!1),className:"px-3 py-2 text-sm text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:"Cancelar"}),i.jsxs("button",{onClick:Gr,disabled:j,className:"px-3 py-2 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2 whitespace-nowrap",children:[j?i.jsx(ts,{className:"animate-spin",size:14}):i.jsx(en,{size:14}),"Finalizar"]})]})]})}),ke&&u&&i.jsx(Z7e,{factura:u,onComplete:xe,onCancel:()=>Ce(!1)}),re&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-amber-600 flex items-center gap-2",children:[i.jsx(Ul,{})," Agregar Gasto"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tipo de Gasto"}),i.jsxs("select",{value:En,onChange:yt=>fr(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"combustible",children:" Combustible"}),i.jsx("option",{value:"peaje",children:" Peaje"}),i.jsx("option",{value:"comida",children:" Comida"}),i.jsx("option",{value:"estacionamiento",children:" Estacionamiento"}),i.jsx("option",{value:"mantenimiento",children:" Mantenimiento"}),i.jsx("option",{value:"otro",children:" Otro"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto (RD$)"}),i.jsx("input",{type:"number",step:"0.01",min:"0",value:nn,onChange:yt=>ea(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"0.00"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin (opcional)"}),i.jsx("textarea",{value:on,onChange:yt=>In(yt.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Detalles adicionales del gasto..."})]}),i.jsxs("div",{className:"mb-4 pt-2 border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("input",{type:"checkbox",id:"checkNCF",checked:qr,onChange:yt=>un(yt.target.checked),className:"w-5 h-5 rounded border-slate-300 text-amber-600 focus:ring-amber-500"}),i.jsx("label",{htmlFor:"checkNCF",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tengo Comprobante Fiscal (NCF)"})]}),qr&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg border border-slate-200 dark:border-slate-600 space-y-3 animation-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"NCF"}),i.jsx("input",{type:"text",maxLength:11,value:de,onChange:yt=>pe(yt.target.value.toUpperCase()),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-500 dark:text-white uppercase",placeholder:"B0100000001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"RNC"}),i.jsx("input",{type:"text",maxLength:11,value:_e,onChange:yt=>Se(yt.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-500 dark:text-white",placeholder:"131234567"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Foto Factura (Requerida)"}),i.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:yt=>Pe(Array.from(yt.target.files)),className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-xs file:font-semibold file:bg-amber-100 file:text-amber-700 hover:file:bg-amber-200"}),Te.length>0&&i.jsxs("p",{className:"text-xs text-emerald-600 mt-1 flex items-center gap-1",children:[i.jsx(en,{size:12})," Foto lista para subir"]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>{se(!1),On()},className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:$a,disabled:j||!nn||parseFloat(nn)<=0,className:"px-4 py-2 bg-amber-600 text-white rounded hover:bg-amber-700 disabled:opacity-50 flex items-center gap-2",children:[j?i.jsx(ts,{className:"animate-spin",size:16}):i.jsx(Ul,{size:16}),"Registrar Gasto"]})]})]})})]}),i.jsx(fDe,{})]})})},hDe=({factura:t,onClose:e,onSuccess:r})=>{var w,_,N;const[n,a]=S.useState(!1),[s,o]=S.useState("pendiente"),[l,c]=S.useState(""),[u,d]=S.useState(""),[h,p]=S.useState([]);if(S.useEffect(()=>{t!=null&&t.id&&(o("pendiente"),d(""))},[t==null?void 0:t.id]),S.useEffect(()=>{s==="nueva_ruta"&&g()},[s]),!t)return null;const g=async()=>{try{const A=await wt.get("/rutas/activas");p(A.data.data||[])}catch(A){console.error("Error al cargar rutas:",A)}},b=async()=>{var A,j;if(s==="nueva_ruta"&&!u){alert("Por favor selecciona una ruta");return}try{a(!0);const P={facturaId:t.id,accion:s,observaciones:l,...s==="nueva_ruta"&&{nuevaRutaId:u}};await wt.post("/facturacion/reasignar",P),r()}catch(P){console.error("Error:",P),alert(((j=(A=P.response)==null?void 0:A.data)==null?void 0:j.error)||"Error al reasignar la factura")}finally{a(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg w-full max-w-lg",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reasignar Factura"}),i.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg mb-6",children:[i.jsx("h3",{className:"font-medium text-slate-700 mb-2",children:"Informacin de la Factura"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Nmero/Tracking:"}),i.jsx("span",{className:"font-medium",children:t.codigoTracking||t.numeroFactura||t.id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Cliente:"}),i.jsx("span",{className:"font-medium",children:t.cliente||((w=t.destinatario)==null?void 0:w.nombre)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Direccin:"}),i.jsx("span",{className:"font-medium text-right ml-4",children:t.direccion||((_=t.destinatario)==null?void 0:_.direccion)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Motivo no entrega:"}),i.jsx("span",{className:"font-medium text-rose-600",children:t.motivoNoEntrega||((N=t.reporteNoEntrega)==null?void 0:N.motivo)||"Sin especificar"})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Qu deseas hacer con esta factura?"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"accion",value:"pendiente",checked:s==="pendiente",onChange:A=>o(A.target.value),className:"mt-1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-slate-900",children:"Marcar como pendiente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"La factura volver al estado pendiente y podr ser asignada a una nueva ruta ms adelante"})]})]}),i.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"accion",value:"nueva_ruta",checked:s==="nueva_ruta",onChange:A=>o(A.target.value),className:"mt-1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-slate-900",children:"Asignar a otra ruta activa"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Selecciona una ruta activa para reasignar esta factura inmediatamente"})]})]})]})]}),s==="nueva_ruta"&&i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Seleccionar ruta"}),i.jsxs("select",{value:u,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:n,children:[i.jsx("option",{value:"",children:"-- Selecciona una ruta --"}),h.map(A=>i.jsxs("option",{value:A.id,children:[A.nombre," - ",A.empleadoNombre," (",A.facturasEntregadas||0,"/",A.totalFacturas," entregadas)"]},A.id))]}),h.length===0&&i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"No hay rutas activas disponibles"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Observaciones (opcional)"}),i.jsx("textarea",{value:l,onChange:A=>c(A.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Agregar notas o comentarios sobre la reasignacin...",disabled:n})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",disabled:n,children:"Cancelar"}),i.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:bg-slate-400",disabled:n,children:n?"Procesando...":"Confirmar Reasignacin"})]})]})})})},w5=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(!0),[a,s]=S.useState(!1),[o,l]=S.useState(null),[c,u]=S.useState(""),[d,h]=S.useState(""),[p,g]=S.useState(""),[b,w]=S.useState([]);S.useEffect(()=>{_(),N()},[]);const _=async()=>{try{n(!0);const O=await wt.get("/facturacion/no-entregadas");if(O.data.success)e(O.data.data||[]);else throw new Error(O.data.error||"Error al cargar facturas no entregadas")}catch(O){console.error("Error:",O),alert("Error al cargar facturas no entregadas: "+O.message),e([])}finally{n(!1)}},N=async()=>{try{const O=await wt.get("/rutas");if(O.data.success)w(O.data.data||[]);else throw new Error(O.data.error||"Error al cargar rutas")}catch(O){console.error("Error al cargar rutas:",O),w([])}},A=O=>{l(O),s(!0)},j=()=>{s(!1),l(null)},P=()=>{s(!1),l(null),_()},U=t.filter(O=>{var D,I;return!(c&&O.rutaId!==c||d&&!((D=O.cliente)!=null&&D.toLowerCase().includes(d.toLowerCase()))||p&&!((I=O.fechaIntento)!=null&&I.startsWith(p)))}),G=()=>{u(""),h(""),g("")};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Facturas No Entregadas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestiona y reasigna facturas que no pudieron ser entregadas"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-lg font-medium text-slate-800 dark:text-white mb-4",children:"Filtros"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ruta"}),i.jsxs("select",{value:c,onChange:O=>u(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Todas las rutas"}),b.map(O=>i.jsx("option",{value:O.id,children:O.nombre},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cliente"}),i.jsx("input",{type:"text",value:d,onChange:O=>h(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar por nombre de cliente..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Fecha de Intento"}),i.jsx("input",{type:"date",value:p,onChange:O=>g(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),(c||d||p)&&i.jsx("div",{className:"mt-4",children:i.jsx("button",{onClick:G,className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:" Limpiar filtros"})})]}),i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-rose-800 dark:text-rose-200",children:[U.length," factura",U.length!==1?"s":""," no entregada",U.length!==1?"s":""]}),i.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400",children:c||d||p?"Con filtros aplicados":"Total en el sistema"})]})]})}),r?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando facturas..."})]}):U.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-12 text-center",children:[i.jsx("span",{className:"text-6xl mb-4 block",children:""}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:t.length===0?"Excelente! No hay facturas sin entregar":"No se encontraron facturas con los filtros aplicados"}),(c||d||p)&&i.jsx("button",{onClick:G,className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Limpiar filtros"})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cdigo Tracking"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Direccin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Sector"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Motivo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Fecha Intento"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:U.map(O=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white",children:O.codigoTracking||O.numeroFactura||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-700 dark:text-slate-300",children:O.cliente}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:O.direccion}),i.jsx("td",{className:"px-4 py-3 text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:O.sector||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:O.rutaNombre||"Sin asignar"}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:"px-2 py-1 bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200 rounded-full text-xs",children:O.motivoNoEntrega||"Sin motivo especificado"})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:O.fechaIntento?new Date(O.fechaIntento).toLocaleDateString():"-"}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("button",{onClick:()=>A(O),className:"text-sm bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700 transition",children:"Reasignar"})})]},O.id))})]})})}),a&&o&&i.jsx(hDe,{factura:o,onClose:j,onSuccess:P})]})};function yT(){var Ee;const{userData:t,user:e}=fa(),[r,n]=S.useState([]),[a,s]=S.useState(!0),[o,l]=S.useState(null),[c,u]=S.useState(!1),[d,h]=S.useState(null),[p,g]=S.useState(!1),[b,w]=S.useState(""),[_,N]=S.useState(""),[A,j]=S.useState(""),[P,U]=S.useState({nombre:"",email:"",emailPersonal:"",password:"",telefono:"",whatsappPersonal:"",whatsappFlota:"",rol:"",companyId:"",activo:!0,cedula:"",banco:"BHD",cuentaBanco:""}),[G,O]=S.useState(null),D=[{valor:"recolector",label:"Recolector",descripcion:"Recoge paquetes en origen"},{valor:"cargador",label:"Cargador",descripcion:"Prepara contenedores para embarque"},{valor:"almacen_eeuu",label:"Encargado de Almacn (EE.UU.)",descripcion:"Gestiona almacn en Estados Unidos"},{valor:"almacen_rd",label:"Encargado de Almacn (RD)",descripcion:"Gestiona almacn en Repblica Dominicana"},{valor:"repartidor",label:"Repartidor",descripcion:"Entrega paquetes a destinatarios"},{valor:"secretaria",label:"Secretaria",descripcion:"Gestin administrativa y atencin"},{valor:"secretaria_usa",label:"Secretaria USA",descripcion:"Call Center y Citas EE.UU."},{valor:"admin_general",label:"Administrador General",descripcion:"Acceso completo al sistema"},{valor:"propietario",label:"Propietario",descripcion:"Dueo de la empresa - Solo visualizacin"}],I=ye=>{const H=D.find(Y=>Y.valor===ye);return H?H.label:ye},[V,R]=S.useState([]);S.useEffect(()=>{F(),(t==null?void 0:t.rol)==="super_admin"&&B()},[t]);const B=async()=>{try{const ye=await wt.get("/companies");ye.data.success&&R(ye.data.data||[])}catch(ye){console.error("Error cargando empresas:",ye)}},F=async()=>{var ye,H,Y;try{if(s(!0),l(null),!t||!e){console.log(" Esperando autenticacin...");return}console.log(" Cargando empleados..."),console.log(" Usuario actual:",{uid:t.uid,rol:t.rol,companyId:t.companyId});let X="/empleados";t.rol==="super_admin"?console.log(" Super Admin - Viendo todos los empleados"):t.companyId?(X+=`?companyId=${t.companyId}`,console.log(" Filtrando por companyId:",t.companyId)):t.rol==="admin_general"&&console.log(" Admin General - Viendo todos los empleados");const re=await wt.get(X,{headers:{"X-User-Id":e.uid}});if(console.log(" Respuesta de empleados:",re.data),re.data.success)n(re.data.data||[]),console.log(` ${((ye=re.data.data)==null?void 0:ye.length)||0} empleados cargados`);else throw new Error(re.data.error||"Error desconocido")}catch(X){console.error(" Error cargando empleados:",X),l(((Y=(H=X.response)==null?void 0:H.data)==null?void 0:Y.error)||X.message||"Error al cargar empleados")}finally{s(!1)}},ee=ye=>{const{name:H,value:Y,type:X,checked:re}=ye.target;U(se=>({...se,[H]:X==="checkbox"?re:Y}))},Z=async ye=>{var H,Y;ye.preventDefault();try{s(!0),l(null);const X=!!d;if(!P.nombre||!P.email||!P.emailPersonal||!X&&!P.password||!P.rol)throw new Error("Por favor completa todos los campos obligatorios");if(t.rol==="super_admin"&&!P.companyId)throw new Error("Debes seleccionar una empresa para el usuario");if((!d||P.password)&&P.password.length<6)throw new Error("La contrasea debe tener al menos 6 caracteres");const re={nombre:P.nombre,email:P.email,emailPersonal:P.emailPersonal,password:P.password,telefono:P.telefono||null,whatsappPersonal:P.whatsappPersonal||null,whatsappFlota:P.whatsappFlota||null,rol:P.rol,companyId:t.rol==="super_admin"?P.companyId:t.companyId||null,cedula:P.cedula,banco:P.banco,cuentaBanco:P.cuentaBanco};console.log(" Enviando datos:",re);let se;d?(se=await wt.put(`/empleados/${d.id}`,re,{headers:{"X-User-Id":e.uid}}),O("Empleado actualizado exitosamente")):(se=await wt.post("/auth/register",re,{headers:{"X-User-Id":e.uid}}),O("Empleado creado exitosamente")),se.data.success&&(u(!1),h(null),U({nombre:"",email:"",emailPersonal:"",password:"",telefono:"",whatsappPersonal:"",whatsappFlota:"",rol:"",companyId:"",activo:!0,cedula:"",banco:"BHD",cuentaBanco:""}),F(),setTimeout(()=>O(null),3e3))}catch(X){console.error(" Error creando empleado:",X),l(((Y=(H=X.response)==null?void 0:H.data)==null?void 0:Y.error)||X.message||"Error al crear empleado")}finally{s(!1)}},ce=async ye=>{var H,Y;if(window.confirm("Ests seguro de que deseas eliminar este empleado?"))try{s(!0),await wt.delete(`/empleados/${ye}`,{headers:{"X-User-Id":e.uid}}),O("Empleado eliminado exitosamente"),F(),setTimeout(()=>O(null),3e3)}catch(X){console.error("Error eliminando empleado:",X),l(((Y=(H=X.response)==null?void 0:H.data)==null?void 0:Y.error)||"Error al eliminar empleado")}finally{s(!1)}},ne=async(ye,H)=>{var Y,X;try{s(!0),await wt.patch(`/empleados/${ye}/estado`,{activo:H},{headers:{"X-User-Id":e.uid}}),O(`Empleado ${H?"activado":"desactivado"} exitosamente`),F(),setTimeout(()=>O(null),3e3)}catch(re){console.error("Error cambiando estado:",re),l(((X=(Y=re.response)==null?void 0:Y.data)==null?void 0:X.error)||"Error al cambiar estado")}finally{s(!1)}},ae=async ye=>{var Y,X;if(!ye.emailPersonal){l("Este empleado no tiene un email personal configurado para recuperacin de contrasea"),setTimeout(()=>l(null),5e3);return}if(window.confirm(`Enviar enlace de recuperacin al email personal de ${ye.nombre}?

Se enviar a: ${ye.emailPersonal}`))try{s(!0),l(null),(await wt.post("/auth/forgot-password",{email:ye.email})).data.success&&(O(`Enlace de recuperacin enviado a ${ye.emailPersonal}`),setTimeout(()=>O(null),5e3))}catch(re){console.error("Error enviando enlace de recuperacin:",re),l(((X=(Y=re.response)==null?void 0:Y.data)==null?void 0:X.error)||"Error al enviar el enlace de recuperacin"),setTimeout(()=>l(null),5e3)}finally{s(!1)}},me=r.filter(ye=>{const H=ye.nombre.toLowerCase().includes(b.toLowerCase())||ye.email.toLowerCase().includes(b.toLowerCase()),Y=!_||ye.rol===_,X=A===""||A==="activo"&&ye.activo||A==="inactivo"&&!ye.activo;return H&&Y&&X});return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[i.jsx(cd,{className:"w-8 h-8 text-indigo-600"}),"Gestin de Empleados"]}),i.jsx("p",{className:"text-slate-600 mt-2",children:"Administra usuarios y permisos del sistema"})]}),i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-amber-800 mb-2",children:"Estado de carga:"}),i.jsxs("div",{className:"text-sm text-amber-700 space-y-1",children:[i.jsxs("p",{children:["Total empleados: ",r.length]}),i.jsxs("p",{children:["Filtrados: ",me.length]}),i.jsxs("p",{children:["Loading: ",a?"S":"No"]}),i.jsxs("p",{children:["User: ",(e==null?void 0:e.email)||"No autenticado"," (",t==null?void 0:t.rol,")"]}),i.jsxs("p",{children:["Companies: ",(t==null?void 0:t.companyId)||"Sin compaa"]})]})]}),G&&i.jsxs("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-lg p-4 flex items-center gap-3",children:[i.jsx(ad,{className:"w-5 h-5 text-emerald-600 flex-shrink-0"}),i.jsx("p",{className:"text-emerald-800",children:G})]}),o&&i.jsxs("div",{className:"mb-6 bg-rose-50 border border-rose-200 rounded-lg p-4 flex items-center gap-3",children:[i.jsx(ms,{className:"w-5 h-5 text-rose-600 flex-shrink-0"}),i.jsx("p",{className:"text-rose-800",children:o}),i.jsx("button",{onClick:()=>l(null),className:"ml-auto text-rose-600 hover:text-rose-700",children:i.jsx(Jn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow mb-6 p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("div",{className:"relative",children:[i.jsx(qd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:b,onChange:ye=>w(ye.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),i.jsxs("select",{value:_,onChange:ye=>N(ye.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos los roles"}),D.map(ye=>i.jsx("option",{value:ye.valor,children:ye.label},ye.valor))]}),i.jsxs("select",{value:A,onChange:ye=>j(ye.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos los estados"}),i.jsx("option",{value:"activo",children:"Activos"}),i.jsx("option",{value:"inactivo",children:"Inactivos"})]})]}),i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-slate-600",children:["Empleados totales: ",i.jsx("span",{className:"font-semibold",children:r.length})," | Despus de filtros: ",i.jsx("span",{className:"font-semibold",children:me.length})]}),i.jsxs("button",{onClick:()=>{h(null),U({nombre:"",email:"",emailPersonal:"",password:"",telefono:"",rol:"",companyId:"",activo:!0,cedula:"",banco:"BHD",cuentaBanco:""}),u(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(Hd,{className:"w-5 h-5"}),"Nuevo Usuario"]})]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"text-slate-600 mt-4",children:"Cargando empleados..."})]}):me.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(cd,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No se encontraron empleados"}),i.jsx("p",{className:"text-slate-600",children:b||_||A?"Intenta ajustar los filtros de bsqueda":"Comienza creando tu primer empleado"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Telfono"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Rol"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Estado"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:me.map(ye=>{var H;return i.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-indigo-600 font-semibold",children:(H=ye.nombre)==null?void 0:H.charAt(0).toUpperCase()})}),i.jsx("div",{className:"ml-4",children:i.jsx("div",{className:"text-sm font-medium text-slate-900",children:ye.nombre})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-slate-900",children:ye.email})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-slate-900",children:ye.telefono||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800",children:I(ye.rol)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("button",{onClick:()=>ne(ye.id,!ye.activo),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ye.activo?"bg-emerald-100 text-emerald-800 hover:bg-emerald-200":"bg-rose-100 text-rose-800 hover:bg-rose-200"} transition-colors cursor-pointer`,children:ye.activo?"Activo":"Inactivo"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>{h(ye),U({nombre:ye.nombre,email:ye.email,emailPersonal:ye.emailPersonal||"",password:"",telefono:ye.telefono||"",whatsappPersonal:ye.whatsappPersonal||"",whatsappFlota:ye.whatsappFlota||"",rol:ye.rol,companyId:ye.companyId,activo:ye.activo,cedula:ye.cedula||"",banco:ye.banco||"BHD",cuentaBanco:ye.cuentaBanco||""}),u(!0)},className:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"Editar",children:i.jsx(V1,{className:"w-5 h-5"})}),(t==null?void 0:t.rol)==="super_admin"&&i.jsx("button",{onClick:()=>ae(ye),className:"text-amber-600 hover:text-amber-900 transition-colors",title:"Resetear contrasea",children:i.jsx(d4e,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>ce(ye.id),className:"text-rose-600 hover:text-rose-900 transition-colors",title:"Eliminar",children:i.jsx(yp,{className:"w-5 h-5"})})]})})]},ye.id)})})]})})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:d?"Editar Empleado":"Crear Nuevo Usuario"}),i.jsx("button",{onClick:()=>{u(!1),h(null),l(null)},className:"text-slate-400 hover:text-slate-600",children:i.jsx(Jn,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:Z,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Nombre completo ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:P.nombre,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Email de Empresa ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"email",name:"email",value:P.email,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"ejemplo@empresa.com"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Email que el empleado usar para iniciar sesin"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Email Personal ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"email",name:"emailPersonal",value:P.emailPersonal,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"ejemplo@gmail.com"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Email para recuperacin de contrasea"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Contrasea ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:p?"text":"password",name:"password",value:P.password,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent pr-10",required:!d,minLength:6,disabled:!!d,placeholder:d?"Para cambiar contrasea, use el botn de 'Resetear'":""}),i.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:p?i.jsx(y8,{className:"w-5 h-5"}):i.jsx(Tu,{className:"w-5 h-5"})})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Mnimo 6 caracteres"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono"}),i.jsx("input",{type:"tel",name:"telefono",value:P.telefono,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["WhatsApp Personal ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"tel",name:"whatsappPersonal",value:P.whatsappPersonal,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"+1 809-123-4567"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Nmero personal del empleado"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["WhatsApp de la Flota ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"tel",name:"whatsappFlota",value:P.whatsappFlota,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"+1 809-987-6543"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" Nmero de la flota asignada al empleado (usado para notificaciones del sistema)"})]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[i.jsxs("h3",{className:"text-sm font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[i.jsx(ay,{className:"w-4 h-4 text-indigo-600"}),"Datos para Nmina (Opcional)"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Cdula de Identidad"}),i.jsx("input",{type:"text",name:"cedula",value:P.cedula,onChange:ee,placeholder:"001-0000000-0",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Banco"}),i.jsxs("select",{name:"banco",value:P.banco,onChange:ee,className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"BHD",children:"Banco BHD"}),i.jsx("option",{value:"POPULAR",children:"Banco Popular"}),i.jsx("option",{value:"BANRESERVAS",children:"Banreservas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"No. Cuenta"}),i.jsx("input",{type:"text",name:"cuentaBanco",value:P.cuentaBanco,onChange:ee,placeholder:"000-0000-00",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Rol / Puesto ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsxs("select",{name:"rol",value:P.rol,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Seleccionar rol"}),D.map(ye=>i.jsx("option",{value:ye.valor,children:ye.label},ye.valor))]}),P.rol&&i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:(Ee=D.find(ye=>ye.valor===P.rol))==null?void 0:Ee.descripcion})]}),(t==null?void 0:t.rol)==="super_admin"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Empresa ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsxs("select",{name:"companyId",value:P.companyId||"",onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Seleccionar empresa"}),V.map(ye=>i.jsx("option",{value:ye.id,children:ye.nombre||ye.name},ye.id))]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),l(null)},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:a?"Guardando...":d?"Actualizar":"Crear Usuario"})]})]})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var I3={};I3.version="0.18.5";var Tse=1252,mDe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Cse=function(t){mDe.indexOf(t)!=-1&&(Tse=t)};function pDe(){Cse(1252)}var hy=function(t){Cse(t)};function gDe(){hy(1200),pDe()}var _5=function(e){return String.fromCharCode(e)},M$=function(e){return String.fromCharCode(e)},O3,x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function my(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=x0.charAt(s)+x0.charAt(o)+x0.charAt(l)+x0.charAt(c);return e}function mh(t){var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=x0.indexOf(t.charAt(u++)),o=x0.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=x0.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=x0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var la=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Th=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Hp(t){return la?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function L$(t){return la?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ju=function(e){return la?Th(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function fS(t){if(typeof ArrayBuffer>"u")return Ju(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Iw(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function xDe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var So=la?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Th(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function vDe(t){for(var e=[],r=0,n=t.length+250,a=Hp(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(e.push(a.slice(0,r)),r=0,a=Hp(65535),n=65530)}return e.push(a.slice(0,r)),So(e)}var d2=/\u0000/g,N5=/[\u0001-\u0006]/g;function H1(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function sd(t,e){var r=""+t;return r.length>=e?r:Ls("0",e-r.length)+r}function tD(t,e){var r=""+t;return r.length>=e?r:Ls(" ",e-r.length)+r}function P3(t,e){var r=""+t;return r.length>=e?r:r+Ls(" ",e-r.length)}function bDe(t,e){var r=""+Math.round(t);return r.length>=e?r:Ls("0",e-r.length)+r}function yDe(t,e){var r=""+t;return r.length>=e?r:Ls("0",e-r.length)+r}var F$=Math.pow(2,32);function Mg(t,e){if(t>F$||t<-F$)return bDe(t,e);var r=Math.round(t);return yDe(r,e)}function R3(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var B$=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wT=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function wDe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var zs={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},U$={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},_De={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function D3(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,o=1,l=0,c=1,u=0,d=0,h=Math.floor(a);u<e&&(h=Math.floor(a),l=h*o+s,d=h*u+c,!(a-h<5e-8));)a=1/(a-h),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var p=Math.floor(n*l/d);return[p,n*l-p*d,d]}function E5(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=CDe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var kse=new Date(1899,11,31,0,0,0),NDe=kse.getTime(),EDe=new Date(1900,2,1,0,0,0);function Ise(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=EDe&&(r+=24*60*60*1e3),(r-(NDe+(t.getTimezoneOffset()-kse.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function rD(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ADe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SDe(t){var e=t<0?12:11,r=rD(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function jDe(t){var e=rD(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function TDe(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=SDe(t):e===10?r=t.toFixed(10).substr(0,12):r=jDe(t),rD(ADe(r.toUpperCase()))}function Z8(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):TDe(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return J0(14,Ise(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function CDe(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function kDe(t,e,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return wT[r.m-1][1];case 5:return wT[r.m-1][0];default:return wT[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return B$[r.q][0];default:return B$[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?sd(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=sd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?sd(c,u):"";return d}function v0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var Ose=/%/g;function IDe(t,e,r){var n=e.replace(Ose,""),a=e.length-n.length;return Yf(t,n,r*Math.pow(10,2*a))+Ls("%",a)}function ODe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Yf(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Pse(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Pse(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Rse=/# (\?+)( ?)\/( ?)(\d+)/;function PDe(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?Ls(" ",t[1].length+1+t[4].length):tD(o,t[1].length)+t[2]+"/"+t[3]+sd(l,t[4].length))}function RDe(t,e,r){return r+(e===0?"":""+e)+Ls(" ",t[1].length+2+t[4].length)}var Dse=/^#*0*\.([0#]+)/,Mse=/\).*[0#]/,Lse=/\(###\) ###\\?-####/;function cl(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function z$(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function V$(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function DDe(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function MDe(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function ru(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Mse)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ru("n",n,r):"("+ru("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return ODe(t,e,r);if(e.indexOf("%")!==-1)return IDe(t,e,r);if(e.indexOf("E")!==-1)return Pse(e,r);if(e.charCodeAt(0)===36)return"$"+ru(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Mg(c,e.length);if(e.match(/^[#?]+$/))return a=Mg(r,0),a==="0"&&(a=""),a.length>e.length?a:cl(e.substr(0,e.length-a.length))+a;if(s=e.match(Rse))return PDe(s,c,u);if(e.match(/^#+0+$/))return u+Mg(c,e.length-e.indexOf("0"));if(s=e.match(Dse))return a=z$(r,s[1].length).replace(/^([^\.]+)$/,"$1."+cl(s[1])).replace(/\.$/,"."+cl(s[1])).replace(/\.(\d*)$/,function(b,w){return"."+w+Ls("0",cl(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+z$(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+v0(Mg(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ru(t,e,-r):v0(""+(Math.floor(r)+DDe(r,s[1].length)))+"."+sd(V$(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return ru(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=H1(ru(t,e.replace(/[\\-]/g,""),r)),o=0,H1(H1(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<a.length?a.charAt(o++):b==="0"?"0":""}));if(e.match(Lse))return a=ru(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=D3(c,Math.pow(10,o)-1,!1),a=""+u,d=Yf("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=P3(l[2],o),d.length<s[4].length&&(d=cl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=D3(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?tD(l[1],o)+s[2]+"/"+s[3]+P3(l[2],o):Ls(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Mg(r,0),e.length<=a.length?a:cl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=e.indexOf(".")-o,p=e.length-a.length-h;return cl(e.substr(0,h)+a+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=V$(r,s[1].length),r<0?"-"+ru(t,e,-r):v0(MDe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?sd(0,3-b.length):"")+b})+"."+sd(o,s[1].length);switch(e){case"###,##0.00":return ru(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=v0(Mg(c,0));return g!=="0"?u+g:"";case"###,###.00":return ru(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ru(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function LDe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Yf(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function FDe(t,e,r){var n=e.replace(Ose,""),a=e.length-n.length;return Yf(t,n,r*Math.pow(10,2*a))+Ls("%",a)}function Fse(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Fse(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function wd(t,e,r){if(t.charCodeAt(0)===40&&!e.match(Mse)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wd("n",n,r):"("+wd("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return LDe(t,e,r);if(e.indexOf("%")!==-1)return FDe(t,e,r);if(e.indexOf("E")!==-1)return Fse(e,r);if(e.charCodeAt(0)===36)return"$"+wd(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+sd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:cl(e.substr(0,e.length-a.length))+a;if(s=e.match(Rse))return RDe(s,c,u);if(e.match(/^#+0+$/))return u+sd(c,e.length-e.indexOf("0"));if(s=e.match(Dse))return a=(""+r).replace(/^([^\.]+)$/,"$1."+cl(s[1])).replace(/\.$/,"."+cl(s[1])),a=a.replace(/\.(\d*)$/,function(b,w){return"."+w+Ls("0",cl(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+v0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wd(t,e,-r):v0(""+r)+"."+Ls("0",s[1].length);if(s=e.match(/^#,#*,#0/))return wd(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=H1(wd(t,e.replace(/[\\-]/g,""),r)),o=0,H1(H1(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<a.length?a.charAt(o++):b==="0"?"0":""}));if(e.match(Lse))return a=wd(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=D3(c,Math.pow(10,o)-1,!1),a=""+u,d=Yf("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=P3(l[2],o),d.length<s[4].length&&(d=cl(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=D3(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?tD(l[1],o)+s[2]+"/"+s[3]+P3(l[2],o):Ls(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:cl(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=e.indexOf(".")-o,p=e.length-a.length-h;return cl(e.substr(0,h)+a+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+wd(t,e,-r):v0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?sd(0,3-b.length):"")+b})+"."+sd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=v0(""+c);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return wd(t,e.slice(0,e.lastIndexOf(".")),r)+cl(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Yf(t,e,r){return(r|0)===r?wd(t,e,r):ru(t,e,r)}function BDe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Bse=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Use(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":R3(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(Bse))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function UDe(t,e,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,h,p="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!R3(t,o))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++o;break;case"\\":var g=t.charAt(++o),b=g==="("||g===")"?g:"t";a[a.length]={t:b,v:g},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=E5(e,r,t.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=E5(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var w={t:l,v:l};if(u==null&&(u=E5(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(w.v=u.H>=12?"P":"A"),w.t="T",p="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(w.v=u.H>=12?"PM":"AM"),w.t="T",o+=5,p="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(w.v=u.H>=12?"":""),w.t="T",o+=5,p="h"):(w.t="t",++o),u==null&&w.t==="T")return"";a[a.length]=w,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Bse)){if(u==null&&(u=E5(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Use(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++o;break}var _=0,N=0,A;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=p,c="h",_<1&&(_=1);break;case"s":(A=a[o].v.match(/\.0+$/))&&(N=Math.max(N,A[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&a[o].v.match(/[Hh]/)&&(_=1),_<2&&a[o].v.match(/[Mm]/)&&(_=2),_<3&&a[o].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var j="",P;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=kDe(a[o].t.charCodeAt(0),a[o].v,u,N),a[o].t="t";break;case"n":case"?":for(P=o+1;a[P]!=null&&((l=a[P].t)==="?"||l==="D"||(l===" "||l==="t")&&a[P+1]!=null&&(a[P+1].t==="?"||a[P+1].t==="t"&&a[P+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[P].v==="/"||a[P].v===" "&&a[P+1]!=null&&a[P+1].t=="?"));)a[o].v+=a[P].v,a[P]={v:"",t:";"},++P;j+=a[o].v,o=P-1;break;case"G":a[o].t="t",a[o].v=Z8(e,r);break}var U="",G,O;if(j.length>0){j.charCodeAt(0)==40?(G=e<0&&j.charCodeAt(0)===45?-e:e,O=Yf("n",j,G)):(G=e<0&&n>1?-e:e,O=Yf("n",j,G),G<0&&a[0]&&a[0].t=="t"&&(O=O.substr(1),a[0].v="-"+a[0].v)),P=O.length-1;var D=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){D=o;break}var I=a.length;if(D===a.length&&O.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(P>=a[o].v.length-1?(P-=a[o].v.length,a[o].v=O.substr(P+1,a[o].v.length)):P<0?a[o].v="":(a[o].v=O.substr(0,P+1),P=-1),a[o].t="t",I=o);P>=0&&I<a.length&&(a[I].v=O.substr(0,P+1)+a[I].v)}else if(D!==a.length&&O.indexOf("E")===-1){for(P=O.indexOf(".")-1,o=D;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===D?a[o].v.indexOf(".")-1:a[o].v.length-1,U=a[o].v.substr(d+1);d>=0;--d)P>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(U=O.charAt(P--)+U);a[o].v=U,a[o].t="t",I=o}for(P>=0&&I<a.length&&(a[I].v=O.substr(0,P+1)+a[I].v),P=O.indexOf(".")+1,o=D;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==D)){for(d=a[o].v.indexOf(".")>-1&&o===D?a[o].v.indexOf(".")+1:0,U=a[o].v.substr(0,d);d<a[o].v.length;++d)P<O.length&&(U+=O.charAt(P++));a[o].v=U,a[o].t="t",I=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(G=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=Yf(a[o].t,a[o].v,G),a[o].t="t");var V="";for(o=0;o!==a.length;++o)a[o]!=null&&(V+=a[o].v);return V}var $$=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function H$(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function zDe(t,e){var r=BDe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match($$),l=r[1].match($$);return H$(e,o)?[n,r[0]]:H$(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function J0(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:zs)[t],n==null&&(n=r.table&&r.table[U$[t]]||zs[U$[t]]),n==null&&(n=_De[t]||"General");break}if(R3(n,0))return Z8(e,r);e instanceof Date&&(e=Ise(e,r.date1904));var a=zDe(n,e);if(R3(a[1]))return Z8(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return UDe(a[1],e,r,a[0])}function zse(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(zs[r]==null){e<0&&(e=r);continue}if(zs[r]==t){e=r;break}}e<0&&(e=391)}return zs[e]=t,e}function hS(t){for(var e=0;e!=392;++e)t[e]!==void 0&&zse(t[e],e)}function mS(){zs=wDe()}var Vse=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function VDe(t){var e=typeof t=="number"?zs[t]:t;return e=e.replace(Vse,"(\\d+)"),new RegExp("^"+e+"$")}function $De(t,e,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(e.match(Vse)||[]).forEach(function(h,p){var g=parseInt(r[p+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":s=g;break;case"h":o=g;break;case"s":c=g;break;case"m":o>=0?l=g:a=g;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var HDe=function(){var t={};t.version="1.2.0";function e(){for(var O=0,D=new Array(256),I=0;I!=256;++I)O=I,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,D[I]=O;return typeof Int32Array<"u"?new Int32Array(D):D}var r=e();function n(O){var D=0,I=0,V=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(V=0;V!=256;++V)R[V]=O[V];for(V=0;V!=256;++V)for(I=O[V],D=256+V;D<4096;D+=256)I=R[D]=I>>>8^O[I&255];var B=[];for(V=1;V!=16;++V)B[V-1]=typeof Int32Array<"u"?R.subarray(V*256,V*256+256):R.slice(V*256,V*256+256);return B}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],h=a[6],p=a[7],g=a[8],b=a[9],w=a[10],_=a[11],N=a[12],A=a[13],j=a[14];function P(O,D){for(var I=D^-1,V=0,R=O.length;V<R;)I=I>>>8^r[(I^O.charCodeAt(V++))&255];return~I}function U(O,D){for(var I=D^-1,V=O.length-15,R=0;R<V;)I=j[O[R++]^I&255]^A[O[R++]^I>>8&255]^N[O[R++]^I>>16&255]^_[O[R++]^I>>>24]^w[O[R++]]^b[O[R++]]^g[O[R++]]^p[O[R++]]^h[O[R++]]^d[O[R++]]^u[O[R++]]^c[O[R++]]^l[O[R++]]^o[O[R++]]^s[O[R++]]^r[O[R++]];for(V+=15;R<V;)I=I>>>8^r[(I^O[R++])&255];return~I}function G(O,D){for(var I=D^-1,V=0,R=O.length,B=0,F=0;V<R;)B=O.charCodeAt(V++),B<128?I=I>>>8^r[(I^B)&255]:B<2048?(I=I>>>8^r[(I^(192|B>>6&31))&255],I=I>>>8^r[(I^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,F=O.charCodeAt(V++)&1023,I=I>>>8^r[(I^(240|B>>8&7))&255],I=I>>>8^r[(I^(128|B>>2&63))&255],I=I>>>8^r[(I^(128|F>>6&15|(B&3)<<4))&255],I=I>>>8^r[(I^(128|F&63))&255]):(I=I>>>8^r[(I^(224|B>>12&15))&255],I=I>>>8^r[(I^(128|B>>6&63))&255],I=I>>>8^r[(I^(128|B&63))&255]);return~I}return t.table=r,t.bstr=P,t.buf=U,t.str=G,t}(),Ra=function(){var e={};e.version="1.2.1";function r(de,pe){for(var _e=de.split("/"),Se=pe.split("/"),Te=0,Pe=0,tt=Math.min(_e.length,Se.length);Te<tt;++Te){if(Pe=_e[Te].length-Se[Te].length)return Pe;if(_e[Te]!=Se[Te])return _e[Te]<Se[Te]?-1:1}return _e.length-Se.length}function n(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:n(de.slice(0,-1));var pe=de.lastIndexOf("/");return pe===-1?de:de.slice(0,pe+1)}function a(de){if(de.charAt(de.length-1)=="/")return a(de.slice(0,-1));var pe=de.lastIndexOf("/");return pe===-1?de:de.slice(pe+1)}function s(de,pe){typeof pe=="string"&&(pe=new Date(pe));var _e=pe.getHours();_e=_e<<6|pe.getMinutes(),_e=_e<<5|pe.getSeconds()>>>1,de.write_shift(2,_e);var Se=pe.getFullYear()-1980;Se=Se<<4|pe.getMonth()+1,Se=Se<<5|pe.getDate(),de.write_shift(2,Se)}function o(de){var pe=de.read_shift(2)&65535,_e=de.read_shift(2)&65535,Se=new Date,Te=_e&31;_e>>>=5;var Pe=_e&15;_e>>>=4,Se.setMilliseconds(0),Se.setFullYear(_e+1980),Se.setMonth(Pe-1),Se.setDate(Te);var tt=pe&31;pe>>>=5;var jt=pe&63;return pe>>>=6,Se.setHours(pe),Se.setMinutes(jt),Se.setSeconds(tt<<1),Se}function l(de){bc(de,0);for(var pe={},_e=0;de.l<=de.length-4;){var Se=de.read_shift(2),Te=de.read_shift(2),Pe=de.l+Te,tt={};switch(Se){case 21589:_e=de.read_shift(1),_e&1&&(tt.mtime=de.read_shift(4)),Te>5&&(_e&2&&(tt.atime=de.read_shift(4)),_e&4&&(tt.ctime=de.read_shift(4))),tt.mtime&&(tt.mt=new Date(tt.mtime*1e3));break}de.l=Pe,pe[Se]=tt}return pe}var c;function u(){return c||(c={})}function d(de,pe){if(de[0]==80&&de[1]==75)return ze(de,pe);if((de[0]|32)==109&&(de[1]|32)==105)return fr(de,pe);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var _e=3,Se=512,Te=0,Pe=0,tt=0,jt=0,st=0,Ae=[],Ge=de.slice(0,512);bc(Ge,0);var ct=h(Ge);switch(_e=ct[0],_e){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(ct[1]==0)return ze(de,pe);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}Se!==512&&(Ge=de.slice(0,Se),bc(Ge,28));var St=de.slice(0,Se);p(Ge,_e);var xt=Ge.read_shift(4,"i");if(_e===3&&xt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+xt);Ge.l+=4,tt=Ge.read_shift(4,"i"),Ge.l+=4,Ge.chk("00100000","Mini Stream Cutoff Size: "),jt=Ge.read_shift(4,"i"),Te=Ge.read_shift(4,"i"),st=Ge.read_shift(4,"i"),Pe=Ge.read_shift(4,"i");for(var Ct=-1,Xt=0;Xt<109&&(Ct=Ge.read_shift(4,"i"),!(Ct<0));++Xt)Ae[Xt]=Ct;var br=g(de,Se);_(st,Pe,br,Se,Ae);var _t=A(br,tt,Ae,Se);_t[tt].name="!Directory",Te>0&&jt!==F&&(_t[jt].name="!MiniFAT"),_t[Ae[0]].name="!FAT",_t.fat_addrs=Ae,_t.ssz=Se;var Yr={},Gr=[],$a=[],ws=[];j(tt,_t,br,Gr,Te,Yr,$a,jt),b($a,ws,Gr),Gr.shift();var hn={FileIndex:$a,FullPaths:ws};return pe&&pe.raw&&(hn.raw={header:St,sectors:br}),hn}function h(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(ee,"Header Signature: "),de.l+=16;var pe=de.read_shift(2,"u");return[de.read_shift(2,"u"),pe]}function p(de,pe){var _e=9;switch(de.l+=2,_e=de.read_shift(2)){case 9:if(pe!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(pe!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function g(de,pe){for(var _e=Math.ceil(de.length/pe)-1,Se=[],Te=1;Te<_e;++Te)Se[Te-1]=de.slice(Te*pe,(Te+1)*pe);return Se[_e-1]=de.slice(_e*pe),Se}function b(de,pe,_e){for(var Se=0,Te=0,Pe=0,tt=0,jt=0,st=_e.length,Ae=[],Ge=[];Se<st;++Se)Ae[Se]=Ge[Se]=Se,pe[Se]=_e[Se];for(;jt<Ge.length;++jt)Se=Ge[jt],Te=de[Se].L,Pe=de[Se].R,tt=de[Se].C,Ae[Se]===Se&&(Te!==-1&&Ae[Te]!==Te&&(Ae[Se]=Ae[Te]),Pe!==-1&&Ae[Pe]!==Pe&&(Ae[Se]=Ae[Pe])),tt!==-1&&(Ae[tt]=Se),Te!==-1&&Se!=Ae[Se]&&(Ae[Te]=Ae[Se],Ge.lastIndexOf(Te)<jt&&Ge.push(Te)),Pe!==-1&&Se!=Ae[Se]&&(Ae[Pe]=Ae[Se],Ge.lastIndexOf(Pe)<jt&&Ge.push(Pe));for(Se=1;Se<st;++Se)Ae[Se]===Se&&(Pe!==-1&&Ae[Pe]!==Pe?Ae[Se]=Ae[Pe]:Te!==-1&&Ae[Te]!==Te&&(Ae[Se]=Ae[Te]));for(Se=1;Se<st;++Se)if(de[Se].type!==0){if(jt=Se,jt!=Ae[jt])do jt=Ae[jt],pe[Se]=pe[jt]+"/"+pe[Se];while(jt!==0&&Ae[jt]!==-1&&jt!=Ae[jt]);Ae[Se]=-1}for(pe[0]+="/",Se=1;Se<st;++Se)de[Se].type!==2&&(pe[Se]+="/")}function w(de,pe,_e){for(var Se=de.start,Te=de.size,Pe=[],tt=Se;_e&&Te>0&&tt>=0;)Pe.push(pe.slice(tt*B,tt*B+B)),Te-=B,tt=Zm(_e,tt*4);return Pe.length===0?Pt(0):So(Pe).slice(0,de.size)}function _(de,pe,_e,Se,Te){var Pe=F;if(de===F){if(pe!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var tt=_e[de],jt=(Se>>>2)-1;if(!tt)return;for(var st=0;st<jt&&(Pe=Zm(tt,st*4))!==F;++st)Te.push(Pe);_(Zm(tt,Se-4),pe-1,_e,Se,Te)}}function N(de,pe,_e,Se,Te){var Pe=[],tt=[];Te||(Te=[]);var jt=Se-1,st=0,Ae=0;for(st=pe;st>=0;){Te[st]=!0,Pe[Pe.length]=st,tt.push(de[st]);var Ge=_e[Math.floor(st*4/Se)];if(Ae=st*4&jt,Se<4+Ae)throw new Error("FAT boundary crossed: "+st+" 4 "+Se);if(!de[Ge])break;st=Zm(de[Ge],Ae)}return{nodes:Pe,data:Q$([tt])}}function A(de,pe,_e,Se){var Te=de.length,Pe=[],tt=[],jt=[],st=[],Ae=Se-1,Ge=0,ct=0,St=0,xt=0;for(Ge=0;Ge<Te;++Ge)if(jt=[],St=Ge+pe,St>=Te&&(St-=Te),!tt[St]){st=[];var Ct=[];for(ct=St;ct>=0;){Ct[ct]=!0,tt[ct]=!0,jt[jt.length]=ct,st.push(de[ct]);var Xt=_e[Math.floor(ct*4/Se)];if(xt=ct*4&Ae,Se<4+xt)throw new Error("FAT boundary crossed: "+ct+" 4 "+Se);if(!de[Xt]||(ct=Zm(de[Xt],xt),Ct[ct]))break}Pe[St]={nodes:jt,data:Q$([st])}}return Pe}function j(de,pe,_e,Se,Te,Pe,tt,jt){for(var st=0,Ae=Se.length?2:0,Ge=pe[de].data,ct=0,St=0,xt;ct<Ge.length;ct+=128){var Ct=Ge.slice(ct,ct+128);bc(Ct,64),St=Ct.read_shift(2),xt=oD(Ct,0,St-Ae),Se.push(xt);var Xt={name:xt,type:Ct.read_shift(1),color:Ct.read_shift(1),L:Ct.read_shift(4,"i"),R:Ct.read_shift(4,"i"),C:Ct.read_shift(4,"i"),clsid:Ct.read_shift(16),state:Ct.read_shift(4,"i"),start:0,size:0},br=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);br!==0&&(Xt.ct=P(Ct,Ct.l-8));var _t=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);_t!==0&&(Xt.mt=P(Ct,Ct.l-8)),Xt.start=Ct.read_shift(4,"i"),Xt.size=Ct.read_shift(4,"i"),Xt.size<0&&Xt.start<0&&(Xt.size=Xt.type=0,Xt.start=F,Xt.name=""),Xt.type===5?(st=Xt.start,Te>0&&st!==F&&(pe[st].name="!StreamData")):Xt.size>=4096?(Xt.storage="fat",pe[Xt.start]===void 0&&(pe[Xt.start]=N(_e,Xt.start,pe.fat_addrs,pe.ssz)),pe[Xt.start].name=Xt.name,Xt.content=pe[Xt.start].data.slice(0,Xt.size)):(Xt.storage="minifat",Xt.size<0?Xt.size=0:st!==F&&Xt.start!==F&&pe[st]&&(Xt.content=w(Xt,pe[st].data,(pe[jt]||{}).data))),Xt.content&&bc(Xt.content,0),Pe[xt]=Xt,tt.push(Xt)}}function P(de,pe){return new Date((Nc(de,pe+4)/1e7*Math.pow(2,32)+Nc(de,pe)/1e7-11644473600)*1e3)}function U(de,pe){return u(),d(c.readFileSync(de),pe)}function G(de,pe){var _e=pe&&pe.type;switch(_e||la&&Buffer.isBuffer(de)&&(_e="buffer"),_e||"base64"){case"file":return U(de,pe);case"base64":return d(Ju(mh(de)),pe);case"binary":return d(Ju(de),pe)}return d(de,pe)}function O(de,pe){var _e=pe||{},Se=_e.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=Se+"/",de.FileIndex[0]={name:Se,type:5}),_e.CLSID&&(de.FileIndex[0].clsid=_e.CLSID),D(de)}function D(de){var pe="Sh33tJ5";if(!Ra.find(de,"/"+pe)){var _e=Pt(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,de.FileIndex.push({name:pe,type:2,content:_e,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+pe),I(de)}}function I(de,pe){O(de);for(var _e=!1,Se=!1,Te=de.FullPaths.length-1;Te>=0;--Te){var Pe=de.FileIndex[Te];switch(Pe.type){case 0:Se?_e=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(Pe.R*Pe.L*Pe.C)&&(_e=!0),Pe.R>-1&&Pe.L>-1&&Pe.R==Pe.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!pe)){var tt=new Date(1987,1,19),jt=0,st=Object.create?Object.create(null):{},Ae=[];for(Te=0;Te<de.FullPaths.length;++Te)st[de.FullPaths[Te]]=!0,de.FileIndex[Te].type!==0&&Ae.push([de.FullPaths[Te],de.FileIndex[Te]]);for(Te=0;Te<Ae.length;++Te){var Ge=n(Ae[Te][0]);Se=st[Ge],Se||(Ae.push([Ge,{name:a(Ge).replace("/",""),type:1,clsid:ce,ct:tt,mt:tt,content:null}]),st[Ge]=!0)}for(Ae.sort(function(xt,Ct){return r(xt[0],Ct[0])}),de.FullPaths=[],de.FileIndex=[],Te=0;Te<Ae.length;++Te)de.FullPaths[Te]=Ae[Te][0],de.FileIndex[Te]=Ae[Te][1];for(Te=0;Te<Ae.length;++Te){var ct=de.FileIndex[Te],St=de.FullPaths[Te];if(ct.name=a(St).replace("/",""),ct.L=ct.R=ct.C=-(ct.color=1),ct.size=ct.content?ct.content.length:0,ct.start=0,ct.clsid=ct.clsid||ce,Te===0)ct.C=Ae.length>1?1:-1,ct.size=0,ct.type=5;else if(St.slice(-1)=="/"){for(jt=Te+1;jt<Ae.length&&n(de.FullPaths[jt])!=St;++jt);for(ct.C=jt>=Ae.length?-1:jt,jt=Te+1;jt<Ae.length&&n(de.FullPaths[jt])!=n(St);++jt);ct.R=jt>=Ae.length?-1:jt,ct.type=1}else n(de.FullPaths[Te+1]||"")==n(St)&&(ct.R=Te+1),ct.type=2}}}function V(de,pe){var _e=pe||{};if(_e.fileType=="mad")return nn(de,_e);switch(I(de),_e.fileType){case"zip":return At(de,_e)}var Se=function(xt){for(var Ct=0,Xt=0,br=0;br<xt.FileIndex.length;++br){var _t=xt.FileIndex[br];if(_t.content){var Yr=_t.content.length;Yr>0&&(Yr<4096?Ct+=Yr+63>>6:Xt+=Yr+511>>9)}}for(var Gr=xt.FullPaths.length+3>>2,$a=Ct+7>>3,ws=Ct+127>>7,hn=$a+Xt+Gr+ws,ln=hn+127>>7,sn=ln<=109?0:Math.ceil((ln-109)/127);hn+ln+sn+127>>7>ln;)sn=++ln<=109?0:Math.ceil((ln-109)/127);var ls=[1,sn,ln,ws,Gr,Xt,Ct,0];return xt.FileIndex[0].size=Ct<<6,ls[7]=(xt.FileIndex[0].start=ls[0]+ls[1]+ls[2]+ls[3]+ls[4]+ls[5])+(ls[6]+7>>3),ls}(de),Te=Pt(Se[7]<<9),Pe=0,tt=0;{for(Pe=0;Pe<8;++Pe)Te.write_shift(1,Z[Pe]);for(Pe=0;Pe<8;++Pe)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),Pe=0;Pe<3;++Pe)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,Se[2]),Te.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:F),Te.write_shift(4,Se[3]),Te.write_shift(-4,Se[1]?Se[0]-1:F),Te.write_shift(4,Se[1]),Pe=0;Pe<109;++Pe)Te.write_shift(-4,Pe<Se[2]?Se[1]+Pe:-1)}if(Se[1])for(tt=0;tt<Se[1];++tt){for(;Pe<236+tt*127;++Pe)Te.write_shift(-4,Pe<Se[2]?Se[1]+Pe:-1);Te.write_shift(-4,tt===Se[1]-1?F:tt+1)}var jt=function(xt){for(tt+=xt;Pe<tt-1;++Pe)Te.write_shift(-4,Pe+1);xt&&(++Pe,Te.write_shift(-4,F))};for(tt=Pe=0,tt+=Se[1];Pe<tt;++Pe)Te.write_shift(-4,ne.DIFSECT);for(tt+=Se[2];Pe<tt;++Pe)Te.write_shift(-4,ne.FATSECT);jt(Se[3]),jt(Se[4]);for(var st=0,Ae=0,Ge=de.FileIndex[0];st<de.FileIndex.length;++st)Ge=de.FileIndex[st],Ge.content&&(Ae=Ge.content.length,!(Ae<4096)&&(Ge.start=tt,jt(Ae+511>>9)));for(jt(Se[6]+7>>3);Te.l&511;)Te.write_shift(-4,ne.ENDOFCHAIN);for(tt=Pe=0,st=0;st<de.FileIndex.length;++st)Ge=de.FileIndex[st],Ge.content&&(Ae=Ge.content.length,!(!Ae||Ae>=4096)&&(Ge.start=tt,jt(Ae+63>>6)));for(;Te.l&511;)Te.write_shift(-4,ne.ENDOFCHAIN);for(Pe=0;Pe<Se[4]<<2;++Pe){var ct=de.FullPaths[Pe];if(!ct||ct.length===0){for(st=0;st<17;++st)Te.write_shift(4,0);for(st=0;st<3;++st)Te.write_shift(4,-1);for(st=0;st<12;++st)Te.write_shift(4,0);continue}Ge=de.FileIndex[Pe],Pe===0&&(Ge.start=Ge.size?Ge.start-1:F);var St=Pe===0&&_e.root||Ge.name;if(Ae=2*(St.length+1),Te.write_shift(64,St,"utf16le"),Te.write_shift(2,Ae),Te.write_shift(1,Ge.type),Te.write_shift(1,Ge.color),Te.write_shift(-4,Ge.L),Te.write_shift(-4,Ge.R),Te.write_shift(-4,Ge.C),Ge.clsid)Te.write_shift(16,Ge.clsid,"hex");else for(st=0;st<4;++st)Te.write_shift(4,0);Te.write_shift(4,Ge.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,Ge.start),Te.write_shift(4,Ge.size),Te.write_shift(4,0)}for(Pe=1;Pe<de.FileIndex.length;++Pe)if(Ge=de.FileIndex[Pe],Ge.size>=4096)if(Te.l=Ge.start+1<<9,la&&Buffer.isBuffer(Ge.content))Ge.content.copy(Te,Te.l,0,Ge.size),Te.l+=Ge.size+511&-512;else{for(st=0;st<Ge.size;++st)Te.write_shift(1,Ge.content[st]);for(;st&511;++st)Te.write_shift(1,0)}for(Pe=1;Pe<de.FileIndex.length;++Pe)if(Ge=de.FileIndex[Pe],Ge.size>0&&Ge.size<4096)if(la&&Buffer.isBuffer(Ge.content))Ge.content.copy(Te,Te.l,0,Ge.size),Te.l+=Ge.size+63&-64;else{for(st=0;st<Ge.size;++st)Te.write_shift(1,Ge.content[st]);for(;st&63;++st)Te.write_shift(1,0)}if(la)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function R(de,pe){var _e=de.FullPaths.map(function(st){return st.toUpperCase()}),Se=_e.map(function(st){var Ae=st.split("/");return Ae[Ae.length-(st.slice(-1)=="/"?2:1)]}),Te=!1;pe.charCodeAt(0)===47?(Te=!0,pe=_e[0].slice(0,-1)+pe):Te=pe.indexOf("/")!==-1;var Pe=pe.toUpperCase(),tt=Te===!0?_e.indexOf(Pe):Se.indexOf(Pe);if(tt!==-1)return de.FileIndex[tt];var jt=!Pe.match(N5);for(Pe=Pe.replace(d2,""),jt&&(Pe=Pe.replace(N5,"!")),tt=0;tt<_e.length;++tt)if((jt?_e[tt].replace(N5,"!"):_e[tt]).replace(d2,"")==Pe||(jt?Se[tt].replace(N5,"!"):Se[tt]).replace(d2,"")==Pe)return de.FileIndex[tt];return null}var B=64,F=-2,ee="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],ce="00000000000000000000000000000000",ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:ee,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ce,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ae(de,pe,_e){u();var Se=V(de,_e);c.writeFileSync(pe,Se)}function me(de){for(var pe=new Array(de.length),_e=0;_e<de.length;++_e)pe[_e]=String.fromCharCode(de[_e]);return pe.join("")}function Ee(de,pe){var _e=V(de,pe);switch(pe&&pe.type||"buffer"){case"file":return u(),c.writeFileSync(pe.filename,_e),_e;case"binary":return typeof _e=="string"?_e:me(_e);case"base64":return my(typeof _e=="string"?_e:me(_e));case"buffer":if(la)return Buffer.isBuffer(_e)?_e:Th(_e);case"array":return typeof _e=="string"?Ju(_e):_e}return _e}var ye;function H(de){try{var pe=de.InflateRaw,_e=new pe;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)ye=de;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function Y(de,pe){if(!ye)return at(de,pe);var _e=ye.InflateRaw,Se=new _e,Te=Se._processChunk(de.slice(de.l),Se._finishFlushFlag);return de.l+=Se.bytesRead,Te}function X(de){return ye?ye.deflateRawSync(de):Ot(de)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ke=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ce(de){var pe=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(pe>>16|pe>>8|pe)&255}for(var xe=typeof Uint8Array<"u",Ie=xe?new Uint8Array(256):[],He=0;He<256;++He)Ie[He]=Ce(He);function Ue(de,pe){var _e=Ie[de&255];return pe<=8?_e>>>8-pe:(_e=_e<<8|Ie[de>>8&255],pe<=16?_e>>>16-pe:(_e=_e<<8|Ie[de>>16&255],_e>>>24-pe))}function Me(de,pe){var _e=pe&7,Se=pe>>>3;return(de[Se]|(_e<=6?0:de[Se+1]<<8))>>>_e&3}function Be(de,pe){var _e=pe&7,Se=pe>>>3;return(de[Se]|(_e<=5?0:de[Se+1]<<8))>>>_e&7}function be(de,pe){var _e=pe&7,Se=pe>>>3;return(de[Se]|(_e<=4?0:de[Se+1]<<8))>>>_e&15}function Vt(de,pe){var _e=pe&7,Se=pe>>>3;return(de[Se]|(_e<=3?0:de[Se+1]<<8))>>>_e&31}function ht(de,pe){var _e=pe&7,Se=pe>>>3;return(de[Se]|(_e<=1?0:de[Se+1]<<8))>>>_e&127}function Lt(de,pe,_e){var Se=pe&7,Te=pe>>>3,Pe=(1<<_e)-1,tt=de[Te]>>>Se;return _e<8-Se||(tt|=de[Te+1]<<8-Se,_e<16-Se)||(tt|=de[Te+2]<<16-Se,_e<24-Se)||(tt|=de[Te+3]<<24-Se),tt&Pe}function et(de,pe,_e){var Se=pe&7,Te=pe>>>3;return Se<=5?de[Te]|=(_e&7)<<Se:(de[Te]|=_e<<Se&255,de[Te+1]=(_e&7)>>8-Se),pe+3}function Jt(de,pe,_e){var Se=pe&7,Te=pe>>>3;return _e=(_e&1)<<Se,de[Te]|=_e,pe+1}function Ve(de,pe,_e){var Se=pe&7,Te=pe>>>3;return _e<<=Se,de[Te]|=_e&255,_e>>>=8,de[Te+1]=_e,pe+8}function Ft(de,pe,_e){var Se=pe&7,Te=pe>>>3;return _e<<=Se,de[Te]|=_e&255,_e>>>=8,de[Te+1]=_e&255,de[Te+2]=_e>>>8,pe+16}function qt(de,pe){var _e=de.length,Se=2*_e>pe?2*_e:pe+5,Te=0;if(_e>=pe)return de;if(la){var Pe=L$(Se);if(de.copy)de.copy(Pe);else for(;Te<de.length;++Te)Pe[Te]=de[Te];return Pe}else if(xe){var tt=new Uint8Array(Se);if(tt.set)tt.set(de);else for(;Te<_e;++Te)tt[Te]=de[Te];return tt}return de.length=Se,de}function Wt(de){for(var pe=new Array(de),_e=0;_e<de;++_e)pe[_e]=0;return pe}function nr(de,pe,_e){var Se=1,Te=0,Pe=0,tt=0,jt=0,st=de.length,Ae=xe?new Uint16Array(32):Wt(32);for(Pe=0;Pe<32;++Pe)Ae[Pe]=0;for(Pe=st;Pe<_e;++Pe)de[Pe]=0;st=de.length;var Ge=xe?new Uint16Array(st):Wt(st);for(Pe=0;Pe<st;++Pe)Ae[Te=de[Pe]]++,Se<Te&&(Se=Te),Ge[Pe]=0;for(Ae[0]=0,Pe=1;Pe<=Se;++Pe)Ae[Pe+16]=jt=jt+Ae[Pe-1]<<1;for(Pe=0;Pe<st;++Pe)jt=de[Pe],jt!=0&&(Ge[Pe]=Ae[jt+16]++);var ct=0;for(Pe=0;Pe<st;++Pe)if(ct=de[Pe],ct!=0)for(jt=Ue(Ge[Pe],Se)>>Se-ct,tt=(1<<Se+4-ct)-1;tt>=0;--tt)pe[jt|tt<<ct]=ct&15|Pe<<4;return Se}var Xe=xe?new Uint16Array(512):Wt(512),Kt=xe?new Uint16Array(32):Wt(32);if(!xe){for(var kt=0;kt<512;++kt)Xe[kt]=0;for(kt=0;kt<32;++kt)Kt[kt]=0}(function(){for(var de=[],pe=0;pe<32;pe++)de.push(5);nr(de,Kt,32);var _e=[];for(pe=0;pe<=143;pe++)_e.push(8);for(;pe<=255;pe++)_e.push(9);for(;pe<=279;pe++)_e.push(7);for(;pe<=287;pe++)_e.push(8);nr(_e,Xe,288)})();var pt=function(){for(var pe=xe?new Uint8Array(32768):[],_e=0,Se=0;_e<ke.length-1;++_e)for(;Se<ke[_e+1];++Se)pe[Se]=_e;for(;Se<32768;++Se)pe[Se]=29;var Te=xe?new Uint8Array(259):[];for(_e=0,Se=0;_e<se.length-1;++_e)for(;Se<se[_e+1];++Se)Te[Se]=_e;function Pe(jt,st){for(var Ae=0;Ae<jt.length;){var Ge=Math.min(65535,jt.length-Ae),ct=Ae+Ge==jt.length;for(st.write_shift(1,+ct),st.write_shift(2,Ge),st.write_shift(2,~Ge&65535);Ge-- >0;)st[st.l++]=jt[Ae++]}return st.l}function tt(jt,st){for(var Ae=0,Ge=0,ct=xe?new Uint16Array(32768):[];Ge<jt.length;){var St=Math.min(65535,jt.length-Ge);if(St<10){for(Ae=et(st,Ae,+(Ge+St==jt.length)),Ae&7&&(Ae+=8-(Ae&7)),st.l=Ae/8|0,st.write_shift(2,St),st.write_shift(2,~St&65535);St-- >0;)st[st.l++]=jt[Ge++];Ae=st.l*8;continue}Ae=et(st,Ae,+(Ge+St==jt.length)+2);for(var xt=0;St-- >0;){var Ct=jt[Ge];xt=(xt<<5^Ct)&32767;var Xt=-1,br=0;if((Xt=ct[xt])&&(Xt|=Ge&-32768,Xt>Ge&&(Xt-=32768),Xt<Ge))for(;jt[Xt+br]==jt[Ge+br]&&br<250;)++br;if(br>2){Ct=Te[br],Ct<=22?Ae=Ve(st,Ae,Ie[Ct+1]>>1)-1:(Ve(st,Ae,3),Ae+=5,Ve(st,Ae,Ie[Ct-23]>>5),Ae+=3);var _t=Ct<8?0:Ct-4>>2;_t>0&&(Ft(st,Ae,br-se[Ct]),Ae+=_t),Ct=pe[Ge-Xt],Ae=Ve(st,Ae,Ie[Ct]>>3),Ae-=3;var Yr=Ct<4?0:Ct-2>>1;Yr>0&&(Ft(st,Ae,Ge-Xt-ke[Ct]),Ae+=Yr);for(var Gr=0;Gr<br;++Gr)ct[xt]=Ge&32767,xt=(xt<<5^jt[Ge])&32767,++Ge;St-=br-1}else Ct<=143?Ct=Ct+48:Ae=Jt(st,Ae,1),Ae=Ve(st,Ae,Ie[Ct]),ct[xt]=Ge&32767,++Ge}Ae=Ve(st,Ae,0)-1}return st.l=(Ae+7)/8|0,st.l}return function(st,Ae){return st.length<8?Pe(st,Ae):tt(st,Ae)}}();function Ot(de){var pe=Pt(50+Math.floor(de.length*1.1)),_e=pt(de,pe);return pe.slice(0,_e)}var Ut=xe?new Uint16Array(32768):Wt(32768),Nr=xe?new Uint16Array(32768):Wt(32768),or=xe?new Uint16Array(128):Wt(128),lt=1,lr=1;function ve(de,pe){var _e=Vt(de,pe)+257;pe+=5;var Se=Vt(de,pe)+1;pe+=5;var Te=be(de,pe)+4;pe+=4;for(var Pe=0,tt=xe?new Uint8Array(19):Wt(19),jt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],st=1,Ae=xe?new Uint8Array(8):Wt(8),Ge=xe?new Uint8Array(8):Wt(8),ct=tt.length,St=0;St<Te;++St)tt[re[St]]=Pe=Be(de,pe),st<Pe&&(st=Pe),Ae[Pe]++,pe+=3;var xt=0;for(Ae[0]=0,St=1;St<=st;++St)Ge[St]=xt=xt+Ae[St-1]<<1;for(St=0;St<ct;++St)(xt=tt[St])!=0&&(jt[St]=Ge[xt]++);var Ct=0;for(St=0;St<ct;++St)if(Ct=tt[St],Ct!=0){xt=Ie[jt[St]]>>8-Ct;for(var Xt=(1<<7-Ct)-1;Xt>=0;--Xt)or[xt|Xt<<Ct]=Ct&7|St<<3}var br=[];for(st=1;br.length<_e+Se;)switch(xt=or[ht(de,pe)],pe+=xt&7,xt>>>=3){case 16:for(Pe=3+Me(de,pe),pe+=2,xt=br[br.length-1];Pe-- >0;)br.push(xt);break;case 17:for(Pe=3+Be(de,pe),pe+=3;Pe-- >0;)br.push(0);break;case 18:for(Pe=11+ht(de,pe),pe+=7;Pe-- >0;)br.push(0);break;default:br.push(xt),st<xt&&(st=xt);break}var _t=br.slice(0,_e),Yr=br.slice(_e);for(St=_e;St<286;++St)_t[St]=0;for(St=Se;St<30;++St)Yr[St]=0;return lt=nr(_t,Ut,286),lr=nr(Yr,Nr,30),pe}function Ze(de,pe){if(de[0]==3&&!(de[1]&3))return[Hp(pe),2];for(var _e=0,Se=0,Te=L$(pe||1<<18),Pe=0,tt=Te.length>>>0,jt=0,st=0;!(Se&1);){if(Se=Be(de,_e),_e+=3,Se>>>1)Se>>1==1?(jt=9,st=5):(_e=ve(de,_e),jt=lt,st=lr);else{_e&7&&(_e+=8-(_e&7));var Ae=de[_e>>>3]|de[(_e>>>3)+1]<<8;if(_e+=32,Ae>0)for(!pe&&tt<Pe+Ae&&(Te=qt(Te,Pe+Ae),tt=Te.length);Ae-- >0;)Te[Pe++]=de[_e>>>3],_e+=8;continue}for(;;){!pe&&tt<Pe+32767&&(Te=qt(Te,Pe+32767),tt=Te.length);var Ge=Lt(de,_e,jt),ct=Se>>>1==1?Xe[Ge]:Ut[Ge];if(_e+=ct&15,ct>>>=4,!(ct>>>8&255))Te[Pe++]=ct;else{if(ct==256)break;ct-=257;var St=ct<8?0:ct-4>>2;St>5&&(St=0);var xt=Pe+se[ct];St>0&&(xt+=Lt(de,_e,St),_e+=St),Ge=Lt(de,_e,st),ct=Se>>>1==1?Kt[Ge]:Nr[Ge],_e+=ct&15,ct>>>=4;var Ct=ct<4?0:ct-2>>1,Xt=ke[ct];for(Ct>0&&(Xt+=Lt(de,_e,Ct),_e+=Ct),!pe&&tt<xt&&(Te=qt(Te,xt+100),tt=Te.length);Pe<xt;)Te[Pe]=Te[Pe-Xt],++Pe}}}return pe?[Te,_e+7>>>3]:[Te.slice(0,Pe),_e+7>>>3]}function at(de,pe){var _e=de.slice(de.l||0),Se=Ze(_e,pe);return de.l+=Se[1],Se[0]}function Qe(de,pe){if(de)typeof console<"u"&&console.error(pe);else throw new Error(pe)}function ze(de,pe){var _e=de;bc(_e,0);var Se=[],Te=[],Pe={FileIndex:Se,FullPaths:Te};O(Pe,{root:pe.root});for(var tt=_e.length-4;(_e[tt]!=80||_e[tt+1]!=75||_e[tt+2]!=5||_e[tt+3]!=6)&&tt>=0;)--tt;_e.l=tt+4,_e.l+=4;var jt=_e.read_shift(2);_e.l+=6;var st=_e.read_shift(4);for(_e.l=st,tt=0;tt<jt;++tt){_e.l+=20;var Ae=_e.read_shift(4),Ge=_e.read_shift(4),ct=_e.read_shift(2),St=_e.read_shift(2),xt=_e.read_shift(2);_e.l+=8;var Ct=_e.read_shift(4),Xt=l(_e.slice(_e.l+ct,_e.l+ct+St));_e.l+=ct+St+xt;var br=_e.l;_e.l=Ct+4,it(_e,Ae,Ge,Pe,Xt),_e.l=br}return Pe}function it(de,pe,_e,Se,Te){de.l+=2;var Pe=de.read_shift(2),tt=de.read_shift(2),jt=o(de);if(Pe&8257)throw new Error("Unsupported ZIP encryption");for(var st=de.read_shift(4),Ae=de.read_shift(4),Ge=de.read_shift(4),ct=de.read_shift(2),St=de.read_shift(2),xt="",Ct=0;Ct<ct;++Ct)xt+=String.fromCharCode(de[de.l++]);if(St){var Xt=l(de.slice(de.l,de.l+St));(Xt[21589]||{}).mt&&(jt=Xt[21589].mt),((Te||{})[21589]||{}).mt&&(jt=Te[21589].mt)}de.l+=St;var br=de.slice(de.l,de.l+Ae);switch(tt){case 8:br=Y(de,Ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+tt)}var _t=!1;Pe&8&&(st=de.read_shift(4),st==134695760&&(st=de.read_shift(4),_t=!0),Ae=de.read_shift(4),Ge=de.read_shift(4)),Ae!=pe&&Qe(_t,"Bad compressed size: "+pe+" != "+Ae),Ge!=_e&&Qe(_t,"Bad uncompressed size: "+_e+" != "+Ge),on(Se,xt,br,{unsafe:!0,mt:jt})}function At(de,pe){var _e=pe||{},Se=[],Te=[],Pe=Pt(1),tt=_e.compression?8:0,jt=0,st=0,Ae=0,Ge=0,ct=0,St=de.FullPaths[0],xt=St,Ct=de.FileIndex[0],Xt=[],br=0;for(st=1;st<de.FullPaths.length;++st)if(xt=de.FullPaths[st].slice(St.length),Ct=de.FileIndex[st],!(!Ct.size||!Ct.content||xt=="Sh33tJ5")){var _t=Ge,Yr=Pt(xt.length);for(Ae=0;Ae<xt.length;++Ae)Yr.write_shift(1,xt.charCodeAt(Ae)&127);Yr=Yr.slice(0,Yr.l),Xt[ct]=HDe.buf(Ct.content,0);var Gr=Ct.content;tt==8&&(Gr=X(Gr)),Pe=Pt(30),Pe.write_shift(4,67324752),Pe.write_shift(2,20),Pe.write_shift(2,jt),Pe.write_shift(2,tt),Ct.mt?s(Pe,Ct.mt):Pe.write_shift(4,0),Pe.write_shift(-4,Xt[ct]),Pe.write_shift(4,Gr.length),Pe.write_shift(4,Ct.content.length),Pe.write_shift(2,Yr.length),Pe.write_shift(2,0),Ge+=Pe.length,Se.push(Pe),Ge+=Yr.length,Se.push(Yr),Ge+=Gr.length,Se.push(Gr),Pe=Pt(46),Pe.write_shift(4,33639248),Pe.write_shift(2,0),Pe.write_shift(2,20),Pe.write_shift(2,jt),Pe.write_shift(2,tt),Pe.write_shift(4,0),Pe.write_shift(-4,Xt[ct]),Pe.write_shift(4,Gr.length),Pe.write_shift(4,Ct.content.length),Pe.write_shift(2,Yr.length),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(4,0),Pe.write_shift(4,_t),br+=Pe.l,Te.push(Pe),br+=Yr.length,Te.push(Yr),++ct}return Pe=Pt(22),Pe.write_shift(4,101010256),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(2,ct),Pe.write_shift(2,ct),Pe.write_shift(4,br),Pe.write_shift(4,Ge),Pe.write_shift(2,0),So([So(Se),So(Te),Pe])}var er={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function It(de,pe){if(de.ctype)return de.ctype;var _e=de.name||"",Se=_e.match(/\.([^\.]+)$/);return Se&&er[Se[1]]||pe&&(Se=(_e=pe).match(/[\.\\]([^\.\\])+$/),Se&&er[Se[1]])?er[Se[1]]:"application/octet-stream"}function Er(de){for(var pe=my(de),_e=[],Se=0;Se<pe.length;Se+=76)_e.push(pe.slice(Se,Se+76));return _e.join(`\r
`)+`\r
`}function rn(de){var pe=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ae){var Ge=Ae.charCodeAt(0).toString(16).toUpperCase();return"="+(Ge.length==1?"0"+Ge:Ge)});pe=pe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),pe.charAt(0)==`
`&&(pe="=0D"+pe.slice(1)),pe=pe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],Se=pe.split(`\r
`),Te=0;Te<Se.length;++Te){var Pe=Se[Te];if(Pe.length==0){_e.push("");continue}for(var tt=0;tt<Pe.length;){var jt=76,st=Pe.slice(tt,tt+jt);st.charAt(jt-1)=="="?jt--:st.charAt(jt-2)=="="?jt-=2:st.charAt(jt-3)=="="&&(jt-=3),st=Pe.slice(tt,tt+jt),tt+=jt,tt<Pe.length&&(st+="="),_e.push(st)}}return _e.join(`\r
`)}function Qr(de){for(var pe=[],_e=0;_e<de.length;++_e){for(var Se=de[_e];_e<=de.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+de[++_e];pe.push(Se)}for(var Te=0;Te<pe.length;++Te)pe[Te]=pe[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(Pe){return String.fromCharCode(parseInt(Pe.slice(1),16))});return Ju(pe.join(`\r
`))}function En(de,pe,_e){for(var Se="",Te="",Pe="",tt,jt=0;jt<10;++jt){var st=pe[jt];if(!st||st.match(/^\s*$/))break;var Ae=st.match(/^(.*?):\s*([^\s].*)$/);if(Ae)switch(Ae[1].toLowerCase()){case"content-location":Se=Ae[2].trim();break;case"content-type":Pe=Ae[2].trim();break;case"content-transfer-encoding":Te=Ae[2].trim();break}}switch(++jt,Te.toLowerCase()){case"base64":tt=Ju(mh(pe.slice(jt).join("")));break;case"quoted-printable":tt=Qr(pe.slice(jt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var Ge=on(de,Se.slice(_e.length),tt,{unsafe:!0});Pe&&(Ge.ctype=Pe)}function fr(de,pe){if(me(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=pe&&pe.root||"",Se=(la&&Buffer.isBuffer(de)?de.toString("binary"):me(de)).split(`\r
`),Te=0,Pe="";for(Te=0;Te<Se.length;++Te)if(Pe=Se[Te],!!/^Content-Location:/i.test(Pe)&&(Pe=Pe.slice(Pe.indexOf("file")),_e||(_e=Pe.slice(0,Pe.lastIndexOf("/")+1)),Pe.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),Pe.slice(0,_e.length)!=_e););var tt=(Se[1]||"").match(/boundary="(.*?)"/);if(!tt)throw new Error("MAD cannot find boundary");var jt="--"+(tt[1]||""),st=[],Ae=[],Ge={FileIndex:st,FullPaths:Ae};O(Ge);var ct,St=0;for(Te=0;Te<Se.length;++Te){var xt=Se[Te];xt!==jt&&xt!==jt+"--"||(St++&&En(Ge,Se.slice(ct,Te),_e),ct=Te)}return Ge}function nn(de,pe){var _e=pe||{},Se=_e.boundary||"SheetJS";Se="------="+Se;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],Pe=de.FullPaths[0],tt=Pe,jt=de.FileIndex[0],st=1;st<de.FullPaths.length;++st)if(tt=de.FullPaths[st].slice(Pe.length),jt=de.FileIndex[st],!(!jt.size||!jt.content||tt=="Sh33tJ5")){tt=tt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(br){return"_x"+br.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(br){return"_u"+br.charCodeAt(0).toString(16)+"_"});for(var Ae=jt.content,Ge=la&&Buffer.isBuffer(Ae)?Ae.toString("binary"):me(Ae),ct=0,St=Math.min(1024,Ge.length),xt=0,Ct=0;Ct<=St;++Ct)(xt=Ge.charCodeAt(Ct))>=32&&xt<128&&++ct;var Xt=ct>=St*4/5;Te.push(Se),Te.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+tt),Te.push("Content-Transfer-Encoding: "+(Xt?"quoted-printable":"base64")),Te.push("Content-Type: "+It(jt,tt)),Te.push(""),Te.push(Xt?rn(Ge):Er(Ge))}return Te.push(Se+`--\r
`),Te.join(`\r
`)}function ea(de){var pe={};return O(pe,de),pe}function on(de,pe,_e,Se){var Te=Se&&Se.unsafe;Te||O(de);var Pe=!Te&&Ra.find(de,pe);if(!Pe){var tt=de.FullPaths[0];pe.slice(0,tt.length)==tt?tt=pe:(tt.slice(-1)!="/"&&(tt+="/"),tt=(tt+pe).replace("//","/")),Pe={name:a(pe),type:2},de.FileIndex.push(Pe),de.FullPaths.push(tt),Te||Ra.utils.cfb_gc(de)}return Pe.content=_e,Pe.size=_e?_e.length:0,Se&&(Se.CLSID&&(Pe.clsid=Se.CLSID),Se.mt&&(Pe.mt=Se.mt),Se.ct&&(Pe.ct=Se.ct)),Pe}function In(de,pe){O(de);var _e=Ra.find(de,pe);if(_e){for(var Se=0;Se<de.FileIndex.length;++Se)if(de.FileIndex[Se]==_e)return de.FileIndex.splice(Se,1),de.FullPaths.splice(Se,1),!0}return!1}function qr(de,pe,_e){O(de);var Se=Ra.find(de,pe);if(Se){for(var Te=0;Te<de.FileIndex.length;++Te)if(de.FileIndex[Te]==Se)return de.FileIndex[Te].name=a(_e),de.FullPaths[Te]=_e,!0}return!1}function un(de){I(de,!0)}return e.find=R,e.read=G,e.parse=d,e.write=Ee,e.writeFile=ae,e.utils={cfb_new:ea,cfb_add:on,cfb_del:In,cfb_mov:qr,cfb_gc:un,ReadShift:h2,CheckField:iie,prep_blob:bc,bconcat:So,use_zlib:H,_deflateRaw:Ot,_inflateRaw:at,consts:ne},e}();function qDe(t){return typeof t=="string"?fS(t):Array.isArray(t)?xDe(t):t}function Ow(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=fS(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?gy(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([qDe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=Iw(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function Io(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function q$(t,e){for(var r=[],n=Io(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function nD(t){for(var e=[],r=Io(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function pS(t){for(var e=[],r=Io(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function GDe(t){for(var e=[],r=Io(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var M3=new Date(1899,11,30,0,0,0);function Zl(t,e){var r=t.getTime(),n=M3.getTime()+(t.getTimezoneOffset()-M3.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var $se=new Date,WDe=M3.getTime()+($se.getTimezoneOffset()-M3.getTimezoneOffset())*6e4,G$=$se.getTimezoneOffset();function Hse(t){var e=new Date;return e.setTime(t*24*60*60*1e3+WDe),e.getTimezoneOffset()!==G$&&e.setTime(e.getTime()+(e.getTimezoneOffset()-G$)*6e4),e}var W$=new Date("2017-02-19T19:06:09.000Z"),qse=isNaN(W$.getFullYear())?new Date("2/19/17"):W$,KDe=qse.getFullYear()==2017;function yl(t,e){var r=new Date(t);if(KDe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(qse.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function gS(t,e){if(la&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Ql(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Ql(t[r]));return e}function Ls(t,e){for(var r="";r.length<e;)r+=t;return r}function Zf(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var XDe=["january","february","march","april","may","june","july","august","september","october","november","december"];function py(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&XDe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function kn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return la?n=Th(r):n=vDe(r),Ra.utils.cfb_add(t,e,n)}Ra.utils.cfb_add(t,e,r)}else t.file(e,r)}function aD(){return Ra.utils.cfb_new()}var Ai=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,YDe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},sD=nD(YDe),iD=/[&<>'"]/g,ZDe=/[\u0000-\u0008\u000b-\u001f]/g;function ja(t){var e=t+"";return e.replace(iD,function(r){return sD[r]}).replace(ZDe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function K$(t){return ja(t).replace(/ /g,"_x0020_")}var Gse=/[\u0000-\u001f]/g;function QDe(t){var e=t+"";return e.replace(iD,function(r){return sD[r]}).replace(/\n/g,"<br/>").replace(Gse,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function JDe(t){var e=t+"";return e.replace(iD,function(r){return sD[r]}).replace(Gse,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function eMe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function tMe(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function _T(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function X$(t){var e=Hp(2*t.length),r,n,a=1,s=0,o=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function Y$(t){return Th(t,"binary").toString("utf8")}var A5="foo bar baz",f2=la&&(Y$(A5)==_T(A5)&&Y$||X$(A5)==_T(A5)&&X$)||_T,gy=la?function(t){return Th(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},rMe=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),Wse=/(^\s|\s$|\n)/;function jo(t,e){return"<"+t+(e.match(Wse)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function xy(t){return Io(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function hr(t,e,r){return"<"+t+(r!=null?xy(r):"")+(e!=null?(e.match(Wse)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Q8(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function nMe(t,e){switch(typeof t){case"string":var r=hr("vt:lpwstr",ja(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return hr((t|0)==t?"vt:i4":"vt:r8",ja(String(t)));case"boolean":return hr("vt:bool",t?"true":"false")}if(t instanceof Date)return hr("vt:filetime",Q8(t));throw new Error("Unable to serialize "+t)}var eo={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},xv=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],_c={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function aMe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function sMe(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var Z$=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},Q$=la?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Th(e)})):Z$(t)}:Z$,J$=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(Ib(t,a)));return n.join("").replace(d2,"")},oD=la?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(d2,""):J$(t,e,r)}:J$,eH=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Kse=la?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):eH(t,e,r)}:eH,tH=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(r1(t,a)));return n.join("")},Pw=la?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):tH(e,r,n)}:tH,Xse=function(t,e){var r=Nc(t,e);return r>0?Pw(t,e+4,e+4+r-1):""},Yse=Xse,Zse=function(t,e){var r=Nc(t,e);return r>0?Pw(t,e+4,e+4+r-1):""},Qse=Zse,Jse=function(t,e){var r=2*Nc(t,e);return r>0?Pw(t,e+4,e+4+r-1):""},eie=Jse,tie=function(e,r){var n=Nc(e,r);return n>0?oD(e,r+4,r+4+n):""},rie=tie,nie=function(t,e){var r=Nc(t,e);return r>0?Pw(t,e+4,e+4+r):""},aie=nie,sie=function(t,e){return aMe(t,e)},L3=sie,lD=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};la&&(Yse=function(e,r){if(!Buffer.isBuffer(e))return Xse(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Qse=function(e,r){if(!Buffer.isBuffer(e))return Zse(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},eie=function(e,r){if(!Buffer.isBuffer(e))return Jse(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},rie=function(e,r){if(!Buffer.isBuffer(e))return tie(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},aie=function(e,r){if(!Buffer.isBuffer(e))return nie(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},L3=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):sie(e,r)},lD=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var r1=function(t,e){return t[e]},Ib=function(t,e){return t[e+1]*256+t[e]},iMe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},Nc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Zm=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},oMe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function h2(t,e){var r="",n,a,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,la&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(Ib(this,u)),u+=2;t*=2;break;case"utf8":r=Pw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=oD(this,this.l,this.l+t);break;case"wstr":return h2.call(this,t,"dbcs");case"lpstr-ansi":r=Yse(this,this.l),t=4+Nc(this,this.l);break;case"lpstr-cp":r=Qse(this,this.l),t=4+Nc(this,this.l);break;case"lpwstr":r=eie(this,this.l),t=4+2*Nc(this,this.l);break;case"lpp4":t=4+Nc(this,this.l),r=rie(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Nc(this,this.l),r=aie(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=r1(this,this.l+t++))!==0;)s.push(_5(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=Ib(this,this.l+t))!==0;)s.push(_5(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=r1(this,u),this.l=u+1,l=h2.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(_5(Ib(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=r1(this,u),this.l=u+1,l=h2.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(_5(r1(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=r1(this,this.l),this.l++,n;case 2:return n=(e==="i"?iMe:Ib)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Zm:oMe)(this,this.l),this.l+=4,n):(a=Nc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=L3(this,this.l):a=L3([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Kse(this,this.l,t);break}}return this.l+=t,r}var lMe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},cMe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},uMe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function dMe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)uMe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,lMe(this,e,this.l);break;case 8:if(n=8,r==="f"){sMe(this,e,this.l);break}case 16:break;case-4:n=4,cMe(this,e,this.l);break}return this.l+=n,this}function iie(t,e){var r=Kse(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function bc(t,e){t.l=e,t.read_shift=h2,t.chk=iie,t.write_shift=dMe}function Yd(t,e){t.l+=e}function Pt(t){var e=Hp(t);return bc(e,0),e}function Kl(){var t=[],e=la?256:2048,r=function(u){var d=Pt(u);return bc(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},o=function(){return a(),So(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function tr(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=aze[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&lD(r)&&t.push(r)}}function m2(t,e,r){var n=Ql(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function rH(t,e,r){var n=Ql(t);return n.s=m2(n.s,e.s,r),n.e=m2(n.e,e.s,r),n}function p2(t,e){if(t.cRel&&t.c<0)for(t=Ql(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Ql(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Ca(t);return!t.cRel&&t.cRel!=null&&(r=mMe(r)),!t.rRel&&t.rRel!=null&&(r=fMe(r)),r}function NT(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Go(t.s.c)+":"+(t.e.cRel?"":"$")+Go(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ko(t.s.r)+":"+(t.e.rRel?"":"$")+ko(t.e.r):p2(t.s,e.biff)+":"+p2(t.e,e.biff)}function cD(t){return parseInt(hMe(t),10)-1}function ko(t){return""+(t+1)}function fMe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function hMe(t){return t.replace(/\$(\d+)$/,"$1")}function uD(t){for(var e=pMe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Go(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function mMe(t){return t.replace(/^([A-Z])/,"$$$1")}function pMe(t){return t.replace(/^\$([A-Z])/,"$1")}function gMe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function to(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Ca(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function zc(t){var e=t.indexOf(":");return e==-1?{s:to(t),e:to(t)}:{s:to(t.slice(0,e)),e:to(t.slice(e+1))}}function _i(t,e){return typeof e>"u"||typeof e=="number"?_i(t.s,t.e):(typeof t!="string"&&(t=Ca(t)),typeof e!="string"&&(e=Ca(e)),t==e?t:t+":"+e)}function is(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function nH(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=J0(t.z,r?Zl(e):e)}catch{}try{return t.w=J0((t.XF||{}).numFmtId||(r?14:0),r?Zl(e):e)}catch{return""+e}}function ph(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Rw[t.v]||t.v:e==null?nH(t,t.v):nH(t,e))}function pg(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function oie(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?to(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=is(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var g={v:e[h][p]},b=o+h,w=l+p;if(u.s.r>b&&(u.s.r=b),u.s.c>w&&(u.s.c=w),u.e.r<b&&(u.e.r=b),u.e.c<w&&(u.e.c=w),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))g=e[h][p];else if(Array.isArray(g.v)&&(g.f=e[h][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||zs[14],n.cellDates?(g.t="d",g.w=J0(g.z,Zl(g.v))):(g.t="n",g.v=Zl(g.v),g.w=J0(g.z,g.v))):g.t="s";if(a)s[b]||(s[b]=[]),s[b][w]&&s[b][w].z&&(g.z=s[b][w].z),s[b][w]=g;else{var _=Ca({c:w,r:b});s[_]&&s[_].z&&(g.z=s[_].z),s[_]=g}}}return u.s.c<1e7&&(s["!ref"]=_i(u)),s}function vv(t,e){return oie(null,t,e)}function xMe(t){return t.read_shift(4,"i")}function id(t,e){return e||(e=Pt(4)),e.write_shift(4,t),e}function Wo(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function ro(t,e){var r=!1;return e==null&&(r=!0,e=Pt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function vMe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function bMe(t,e){return e||(e=Pt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function dD(t,e){var r=t.l,n=t.read_shift(1),a=Wo(t),s=[],o={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(vMe(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function yMe(t,e){var r=!1;return e==null&&(r=!0,e=Pt(15+4*t.t.length)),e.write_shift(1,0),ro(t.t,e),r?e.slice(0,e.l):e}var wMe=dD;function _Me(t,e){var r=!1;return e==null&&(r=!0,e=Pt(23+4*t.t.length)),e.write_shift(1,1),ro(t.t,e),e.write_shift(4,1),bMe({},e),r?e.slice(0,e.l):e}function Pu(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function gg(t,e){return e==null&&(e=Pt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function xg(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function vg(t,e){return e==null&&(e=Pt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var NMe=Wo,lie=ro;function fD(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function F3(t,e){var r=!1;return e==null&&(r=!0,e=Pt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var EMe=Wo,J8=fD,hD=F3;function cie(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?L3([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Zm(e,0)>>2;return r?a/100:a}function uie(t,e){e==null&&(e=Pt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function die(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function AMe(t,e){return e||(e=Pt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var bg=die,bv=AMe;function yv(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function qp(t,e){return(e||Pt(8)).write_shift(8,t,"f")}function SMe(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=DMe[a];u&&(e.rgb=mH(u));break;case 2:e.rgb=mH([o,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function B3(t,e){if(e||(e=Pt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function jMe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function TMe(t,e){e||(e=Pt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var fie=2,gc=3,S5=11,U3=19,j5=64,CMe=65,kMe=71,IMe=4108,OMe=4126,yo=80,aH={1:{n:"CodePage",t:fie},2:{n:"Category",t:yo},3:{n:"PresentationFormat",t:yo},4:{n:"ByteCount",t:gc},5:{n:"LineCount",t:gc},6:{n:"ParagraphCount",t:gc},7:{n:"SlideCount",t:gc},8:{n:"NoteCount",t:gc},9:{n:"HiddenCount",t:gc},10:{n:"MultimediaClipCount",t:gc},11:{n:"ScaleCrop",t:S5},12:{n:"HeadingPairs",t:IMe},13:{n:"TitlesOfParts",t:OMe},14:{n:"Manager",t:yo},15:{n:"Company",t:yo},16:{n:"LinksUpToDate",t:S5},17:{n:"CharacterCount",t:gc},19:{n:"SharedDoc",t:S5},22:{n:"HyperlinksChanged",t:S5},23:{n:"AppVersion",t:gc,p:"version"},24:{n:"DigSig",t:CMe},26:{n:"ContentType",t:yo},27:{n:"ContentStatus",t:yo},28:{n:"Language",t:yo},29:{n:"Version",t:yo},255:{},2147483648:{n:"Locale",t:U3},2147483651:{n:"Behavior",t:U3},1919054434:{}},sH={1:{n:"CodePage",t:fie},2:{n:"Title",t:yo},3:{n:"Subject",t:yo},4:{n:"Author",t:yo},5:{n:"Keywords",t:yo},6:{n:"Comments",t:yo},7:{n:"Template",t:yo},8:{n:"LastAuthor",t:yo},9:{n:"RevNumber",t:yo},10:{n:"EditTime",t:j5},11:{n:"LastPrinted",t:j5},12:{n:"CreatedDate",t:j5},13:{n:"ModifiedDate",t:j5},14:{n:"PageCount",t:gc},15:{n:"WordCount",t:gc},16:{n:"CharCount",t:gc},17:{n:"Thumbnail",t:kMe},18:{n:"Application",t:yo},19:{n:"DocSecurity",t:gc},255:{},2147483648:{n:"Locale",t:U3},2147483651:{n:"Behavior",t:U3},1919054434:{}};function PMe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var RMe=PMe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),DMe=Ql(RMe),Rw={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},MMe={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},T5={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function hie(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function mie(t,e){var r=GDe(MMe),n=[],a;n[n.length]=Ai,n[n.length]=hr("Types",null,{xmlns:eo.CT,"xmlns:xsd":eo.xsd,"xmlns:xsi":eo.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return hr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=hr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:T5[c][e.bookType]||T5[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:T5[c][e.bookType]||T5[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ra={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function pie(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function q1(t){var e=[Ai,hr("Relationships",null,{xmlns:eo.RELS})];return Io(t["!id"]).forEach(function(r){e[e.length]=hr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function _a(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[ra.HLINK,ra.XPATH,ra.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}function LMe(t){var e=[Ai];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function iH(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function FMe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function BMe(t){var e=[Ai];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(iH(t[r][0],t[r][1])),e.push(FMe("",t[r][0]));return e.push(iH("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function gie(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+I3.version+"</meta:generator></office:meta></office:document-meta>"}var Ep=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ET(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=ja(e),n[n.length]=r?hr(t,e,r):jo(t,e))}function xie(t,e){var r=e||{},n=[Ai,hr("cp:coreProperties",null,{"xmlns:cp":eo.CORE_PROPS,"xmlns:dc":eo.dc,"xmlns:dcterms":eo.dcterms,"xmlns:dcmitype":eo.dcmitype,"xmlns:xsi":eo.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&ET("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Q8(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&ET("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Q8(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Ep.length;++s){var o=Ep[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&ET(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var G1=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],vie=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function bie(t){var e=[],r=hr;return t||(t={}),t.Application="SheetJS",e[e.length]=Ai,e[e.length]=hr("Properties",null,{xmlns:eo.EXT_PROPS,"xmlns:vt":eo.vt}),G1.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=ja(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+ja(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function yie(t){var e=[Ai,hr("Properties",null,{xmlns:eo.CUST_PROPS,"xmlns:vt":eo.vt})];if(!t)return e.join("");var r=1;return Io(t).forEach(function(a){++r,e[e.length]=hr("property",nMe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ja(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var oH={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function UMe(t,e){var r=[];return Io(oH).map(function(n){for(var a=0;a<Ep.length;++a)if(Ep[a][1]==n)return Ep[a];for(a=0;a<G1.length;++a)if(G1[a][1]==n)return G1[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(jo(oH[n[1]]||n[1],a))}}),hr("DocumentProperties",r.join(""),{xmlns:_c.o})}function zMe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Io(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<Ep.length;++o)if(s==Ep[o][1])return;for(o=0;o<G1.length;++o)if(s==G1[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(hr(K$(s),l,{"dt:dt":c}))}}),e&&Io(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(hr(K$(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+_c.o+'">'+a.join("")+"</"+n+">"}function VMe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Pt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function lH(t,e){var r=Pt(4),n=Pt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Pt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=VMe(e);break;case 31:case 80:for(n=Pt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return So([r,n])}var wie=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function $Me(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function cH(t,e,r){var n=Pt(8),a=[],s=[],o=8,l=0,c=Pt(8),u=Pt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!e){u=Pt(8),u.write_shift(4,0),a.unshift(u);var d=[Pt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var h=t[l][0];for(c=Pt(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=So(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(wie.indexOf(t[l][0])>-1||vie.indexOf(t[l][0])>-1)&&t[l][1]!=null){var p=t[l][1],g=0;if(e){g=+e[t[l][0]];var b=r[g];if(b.p=="version"&&typeof p=="string"){var w=p.split(".");p=(+w[0]<<16)+(+w[1]||0)}c=lH(b.t,p)}else{var _=$Me(p);_==-1&&(_=31,p=String(p)),c=lH(_,p)}s.push(c),u=Pt(8),u.write_shift(4,e?g:2+l),a.push(u),o+=8+c.length}var N=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,N),N+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),So([n].concat(a).concat(s))}function uH(t,e,r,n,a,s){var o=Pt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Ra.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var c=cH(t,r,n);if(l.push(c),a){var u=cH(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return So(l)}function HMe(t,e){e||(e=Pt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function qMe(t,e){return t.read_shift(e)===1}function ul(t,e){return e||(e=Pt(2)),e.write_shift(2,+!!t),e}function _ie(t){return t.read_shift(2,"u")}function ou(t,e){return e||(e=Pt(2)),e.write_shift(2,t),e}function Nie(t,e,r){return r||(r=Pt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function Eie(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?t.read_shift(n,a):"";return o}function GMe(t){var e=t.t||"",r=Pt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Pt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return So(a)}function WMe(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function KMe(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):WMe(t,n,r)}function XMe(t,e,r){if(r.biff>5)return KMe(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Aie(t,e,r){return r||(r=Pt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function dH(t,e){e||(e=Pt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function YMe(t){var e=Pt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),dH(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&dH(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Gp(t,e,r,n){return n||(n=Pt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function ZMe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[a,s,o]}function QMe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function Sie(t,e){return e||(e=Pt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function mD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Pt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function JMe(t,e){var r=!e||e.biff==8,n=Pt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function eLe(t,e){var r=!e||e.biff>=8?2:1,n=Pt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function tLe(t,e){var r=Pt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=GMe(t[a]);var s=So([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function rLe(){var t=Pt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function nLe(t){var e=Pt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function aLe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Pt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function sLe(t,e,r,n){var a=Pt(10);return Gp(t,e,n,a),a.write_shift(4,r),a}function iLe(t,e,r,n,a){var s=!a||a.biff==8,o=Pt(8+ +s+(1+s)*r.length);return Gp(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function oLe(t,e,r,n){var a=r&&r.biff==5;n||(n=Pt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function lLe(t,e){var r=e.biff==8||!e.biff?4:2,n=Pt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function fH(t,e,r,n){var a=r&&r.biff==5;n||(n=Pt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function cLe(t){var e=Pt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function uLe(t,e,r,n,a,s){var o=Pt(8);return Gp(t,e,n,o),Nie(r,s,o),o}function dLe(t,e,r,n){var a=Pt(14);return Gp(t,e,n,a),qp(r,a),a}function fLe(t,e,r){if(r.biff<8)return hLe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(ZMe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function hLe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=Eie(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function mLe(t){var e=Pt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)Sie(t[r],e);return e}function pLe(t){var e=Pt(24),r=to(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return So([e,YMe(t[1])])}function gLe(t){var e=t[1].Tooltip,r=Pt(10+2*(e.length+1));r.write_shift(2,2048);var n=to(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function xLe(t){return t||(t=Pt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function vLe(t,e,r){if(!r.cellStyles)return Yd(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function bLe(t,e){var r=Pt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function yLe(t){for(var e=Pt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function wLe(t,e,r){var n=Pt(15);return Mw(n,t,e),n.write_shift(8,r,"f"),n}function _Le(t,e,r){var n=Pt(9);return Mw(n,t,e),n.write_shift(2,r),n}var NLe=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=nD({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Hp(1);switch(c.type){case"base64":d=Ju(mh(l));break;case"binary":d=Ju(l);break;case"buffer":case"array":d=l;break}bc(d,0);var h=d.read_shift(1),p=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var w=0,_=521;h==2&&(w=d.read_shift(2)),d.l+=3,h!=2&&(w=d.read_shift(4)),w>1048576&&(w=1e6),h!=2&&(_=d.read_shift(2));var N=d.read_shift(2),A=c.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(A=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var j=[],P={},U=Math.min(d.length,h==2?521:_-10-(g?264:0)),G=b?32:11;d.l<U&&d[d.l]!=13;)switch(P={},P.name=O3.utils.decode(A,d.slice(d.l,d.l+G)).replace(/[\u0000\r\n].*$/g,""),d.l+=G,P.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(P.offset=d.read_shift(4)),P.len=d.read_shift(1),h==2&&(P.offset=d.read_shift(2)),P.dec=d.read_shift(1),P.name.length&&j.push(P),h!=2&&(d.l+=b?13:14),P.type){case"B":(!g||P.len!=8)&&c.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(d[d.l]!==13&&(d.l=_-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=_;var O=0,D=0;for(u[0]=[],D=0;D!=j.length;++D)u[0][D]=j[D].name;for(;w-- >0;){if(d[d.l]===42){d.l+=N;continue}for(++d.l,u[++O]=[],D=0,D=0;D!=j.length;++D){var I=d.slice(d.l,d.l+j[D].len);d.l+=j[D].len,bc(I,0);var V=O3.utils.decode(A,I);switch(j[D].type){case"C":V.trim().length&&(u[O][D]=V.replace(/\s+$/,""));break;case"D":V.length===8?u[O][D]=new Date(+V.slice(0,4),+V.slice(4,6)-1,+V.slice(6,8)):u[O][D]=V;break;case"F":u[O][D]=parseFloat(V.trim());break;case"+":case"I":u[O][D]=b?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(V.trim().toUpperCase()){case"Y":case"T":u[O][D]=!0;break;case"N":case"F":u[O][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+V+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[O][D]="##MEMO##"+(b?parseInt(V.trim(),10):I.read_shift(4));break;case"N":V=V.replace(/\u0000/g,"").trim(),V&&V!="."&&(u[O][D]=+V||0);break;case"@":u[O][D]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[O][D]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[O][D]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[O][D]=-I.read_shift(-8,"f");break;case"B":if(g&&j[D].len==8){u[O][D]=I.read_shift(8,"f");break}case"G":case"P":I.l+=j[D].len;break;case"0":if(j[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[D].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=j,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=vv(r(l,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function a(l,c){try{return pg(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&hy(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Kl(),h=q3(l,{header:1,raw:!0,cellDates:!0}),p=h[0],g=h.slice(1),b=l["!cols"]||[],w=0,_=0,N=0,A=1;for(w=0;w<p.length;++w){if(((b[w]||{}).DBF||{}).name){p[w]=b[w].DBF.name,++N;continue}if(p[w]!=null){if(++N,typeof p[w]=="number"&&(p[w]=p[w].toString(10)),typeof p[w]!="string")throw new Error("DBF Invalid column name "+p[w]+" |"+typeof p[w]+"|");if(p.indexOf(p[w])!==w){for(_=0;_<1024;++_)if(p.indexOf(p[w]+"_"+_)==-1){p[w]+="_"+_;break}}}}var j=is(l["!ref"]),P=[],U=[],G=[];for(w=0;w<=j.e.c-j.s.c;++w){var O="",D="",I=0,V=[];for(_=0;_<g.length;++_)g[_][w]!=null&&V.push(g[_][w]);if(V.length==0||p[w]==null){P[w]="?";continue}for(_=0;_<V.length;++_){switch(typeof V[_]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=V[_]instanceof Date?"D":"C";break;default:D="C"}I=Math.max(I,String(V[_]).length),O=O&&O!=D?"C":D}I>250&&(I=250),D=((b[w]||{}).DBF||{}).type,D=="C"&&b[w].DBF.len>I&&(I=b[w].DBF.len),O=="B"&&D=="N"&&(O="N",G[w]=b[w].DBF.dec,I=b[w].DBF.len),U[w]=O=="C"||D=="N"?I:s[O]||0,A+=U[w],P[w]=O}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,g.length),R.write_shift(2,296+32*N),R.write_shift(2,A),w=0;w<4;++w)R.write_shift(4,0);for(R.write_shift(4,0|(+e[Tse]||3)<<8),w=0,_=0;w<p.length;++w)if(p[w]!=null){var B=d.next(32),F=(p[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);B.write_shift(1,F,"sbcs"),B.write_shift(1,P[w]=="?"?"C":P[w],"sbcs"),B.write_shift(4,_),B.write_shift(1,U[w]||s[P[w]]||0),B.write_shift(1,G[w]||0),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(1,0),B.write_shift(4,0),B.write_shift(4,0),_+=U[w]||s[P[w]]||0}var ee=d.next(264);for(ee.write_shift(4,13),w=0;w<65;++w)ee.write_shift(4,0);for(w=0;w<g.length;++w){var Z=d.next(A);for(Z.write_shift(1,0),_=0;_<p.length;++_)if(p[_]!=null)switch(P[_]){case"L":Z.write_shift(1,g[w][_]==null?63:g[w][_]?84:70);break;case"B":Z.write_shift(8,g[w][_]||0,"f");break;case"N":var ce="0";for(typeof g[w][_]=="number"&&(ce=g[w][_].toFixed(G[_]||0)),N=0;N<U[_]-ce.length;++N)Z.write_shift(1,32);Z.write_shift(1,ce,"sbcs");break;case"D":g[w][_]?(Z.write_shift(4,("0000"+g[w][_].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(g[w][_].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+g[w][_].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var ne=String(g[w][_]!=null?g[w][_]:"").slice(0,U[_]);for(Z.write_shift(1,ne,"sbcs"),N=0;N<U[_]-ne.length;++N)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),ELe=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Io(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,g){var b=t[g];return typeof b=="number"?M$(b):b},n=function(p,g,b){var w=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return w==59?p:M$(w)};t["|"]=254;function a(p,g){switch(g.type){case"base64":return s(mh(p),g);case"binary":return s(p,g);case"buffer":return s(la&&Buffer.isBuffer(p)?p.toString("binary"):Iw(p),g);case"array":return s(gS(p),g)}throw new Error("Unrecognized type "+g.type)}function s(p,g){var b=p.split(/[\n\r]+/),w=-1,_=-1,N=0,A=0,j=[],P=[],U=null,G={},O=[],D=[],I=[],V=0,R;for(+g.codepage>=0&&hy(+g.codepage);N!==b.length;++N){V=0;var B=b[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),F=B.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),ee=F[0],Z;if(B.length>0)switch(ee){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&P.push(B.slice(3).replace(/;;/g,";"));break;case"C":var ce=!1,ne=!1,ae=!1,me=!1,Ee=-1,ye=-1;for(A=1;A<F.length;++A)switch(F[A].charAt(0)){case"A":break;case"X":_=parseInt(F[A].slice(1))-1,ne=!0;break;case"Y":for(w=parseInt(F[A].slice(1))-1,ne||(_=0),R=j.length;R<=w;++R)j[R]=[];break;case"K":Z=F[A].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(Zf(Z))?isNaN(py(Z).getDate())||(Z=yl(Z)):(Z=Zf(Z),U!==null&&Use(U)&&(Z=Hse(Z))),ce=!0;break;case"E":me=!0;var H=_9e(F[A].slice(1),{r:w,c:_});j[w][_]=[j[w][_],H];break;case"S":ae=!0,j[w][_]=[j[w][_],"S5S"];break;case"G":break;case"R":Ee=parseInt(F[A].slice(1))-1;break;case"C":ye=parseInt(F[A].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+B)}if(ce&&(j[w][_]&&j[w][_].length==2?j[w][_][0]=Z:j[w][_]=Z,U=null),ae){if(me)throw new Error("SYLK shared formula cannot have own formula");var Y=Ee>-1&&j[Ee][ye];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");j[w][_][1]=N9e(Y[1],{r:w-Ee,c:_-ye})}break;case"F":var X=0;for(A=1;A<F.length;++A)switch(F[A].charAt(0)){case"X":_=parseInt(F[A].slice(1))-1,++X;break;case"Y":for(w=parseInt(F[A].slice(1))-1,R=j.length;R<=w;++R)j[R]=[];break;case"M":V=parseInt(F[A].slice(1))/20;break;case"F":break;case"G":break;case"P":U=P[parseInt(F[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=F[A].slice(1).split(" "),R=parseInt(I[0],10);R<=parseInt(I[1],10);++R)V=parseInt(I[2],10),D[R-1]=V===0?{hidden:!0}:{wch:V},pD(D[R-1]);break;case"C":_=parseInt(F[A].slice(1))-1,D[_]||(D[_]={});break;case"R":w=parseInt(F[A].slice(1))-1,O[w]||(O[w]={}),V>0?(O[w].hpt=V,O[w].hpx=Iie(V)):V===0&&(O[w].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+B)}X<1&&(U=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+B)}}return O.length>0&&(G["!rows"]=O),D.length>0&&(G["!cols"]=D),g&&g.sheetRows&&(j=j.slice(0,g.sheetRows)),[j,G]}function o(p,g){var b=a(p,g),w=b[0],_=b[1],N=vv(w,g);return Io(_).forEach(function(A){N[A]=_[A]}),N}function l(p,g){return pg(o(p,g),g)}function c(p,g,b,w){var _="C;Y"+(b+1)+";X"+(w+1)+";K";switch(p.t){case"n":_+=p.v||0,p.f&&!p.F&&(_+=";E"+xD(p.f,{r:b,c:w}));break;case"b":_+=p.v?"TRUE":"FALSE";break;case"e":_+=p.w||p.v;break;case"d":_+='"'+(p.w||p.v)+'"';break;case"s":_+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function u(p,g){g.forEach(function(b,w){var _="F;W"+(w+1)+" "+(w+1)+" ";b.hidden?_+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=z3(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=V3(b.wpx)),typeof b.wch=="number"&&(_+=Math.round(b.wch))),_.charAt(_.length-1)!=" "&&p.push(_)})}function d(p,g){g.forEach(function(b,w){var _="F;";b.hidden?_+="M0;":b.hpt?_+="M"+20*b.hpt+";":b.hpx&&(_+="M"+20*$3(b.hpx)+";"),_.length>2&&p.push(_+"R"+(w+1))})}function h(p,g){var b=["ID;PWXL;N;E"],w=[],_=is(p["!ref"]),N,A=Array.isArray(p),j=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&u(b,p["!cols"]),p["!rows"]&&d(b,p["!rows"]),b.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var P=_.s.r;P<=_.e.r;++P)for(var U=_.s.c;U<=_.e.c;++U){var G=Ca({r:P,c:U});N=A?(p[P]||[])[U]:p[G],!(!N||N.v==null&&(!N.f||N.F))&&w.push(c(N,p,P,U))}return b.join(j)+j+w.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),ALe=function(){function t(s,o){switch(o.type){case"base64":return e(mh(s),o);case"binary":return e(s,o);case"buffer":return e(la&&Buffer.isBuffer(s)?s.toString("binary"):Iw(s),o);case"array":return e(gS(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,h=[];d!==l.length;++d){if(l[d].trim()==="BOT"){h[++c]=[],u=0;continue}if(!(c<0)){var p=l[d].trim().split(","),g=p[0],b=p[1];++d;for(var w=l[d]||"";(w.match(/["]/g)||[]).length&1&&d<l.length-1;)w+=`
`+l[++d];switch(w=w.trim(),+g){case-1:if(w==="BOT"){h[++c]=[],u=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?h[c][u]=!0:w==="FALSE"?h[c][u]=!1:isNaN(Zf(b))?isNaN(py(b).getDate())?h[c][u]=b:h[c][u]=yl(b):h[c][u]=Zf(b),++u;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),h[c][u++]=w!==""?w:null;break}if(w==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(s,o){return vv(t(s,o),o)}function n(s,o){return pg(r(s,o),o)}var a=function(){var s=function(c,u,d,h,p){c.push(u),c.push(d+","+h),c.push('"'+p.replace(/"/g,'""')+'"')},o=function(c,u,d,h){c.push(u+","+d),c.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var u=[],d=is(c["!ref"]),h,p=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){o(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var w=Ca({r:g,c:b});if(h=p?(c[g]||[])[b]:c[w],!h){o(u,1,0,"");continue}switch(h.t){case"n":var _=h.w;!_&&h.v!=null&&(_=h.v),_==null?h.f&&!h.F?o(u,1,0,"="+h.f):o(u,1,0,""):o(u,0,_,"V");break;case"b":o(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=J0(h.z||zs[14],Zl(yl(h.v)))),o(u,0,h.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var N=`\r
`,A=u.join(N);return A}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),jie=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,p){for(var g=h.split(`
`),b=-1,w=-1,_=0,N=[];_!==g.length;++_){var A=g[_].trim().split(":");if(A[0]==="cell"){var j=to(A[1]);if(N.length<=j.r)for(b=N.length;b<=j.r;++b)N[b]||(N[b]=[]);switch(b=j.r,w=j.c,A[2]){case"t":N[b][w]=t(A[3]);break;case"v":N[b][w]=+A[3];break;case"vtf":var P=A[A.length-1];case"vtc":switch(A[3]){case"nl":N[b][w]=!!+A[4];break;default:N[b][w]=+A[4];break}A[2]=="vtf"&&(N[b][w]=[N[b][w],P])}}}return p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),N}function n(h,p){return vv(r(h,p),p)}function a(h,p){return pg(n(h,p),p)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var p=[],g=[],b,w="",_=zc(h["!ref"]),N=Array.isArray(h),A=_.s.r;A<=_.e.r;++A)for(var j=_.s.c;j<=_.e.c;++j)if(w=Ca({r:A,c:j}),b=N?(h[A]||[])[j]:h[w],!(!b||b.v==null||b.t==="z")){switch(g=["cell",w,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var P=Zl(yl(b.v));g[2]="vtc",g[3]="nd",g[4]=""+P,g[5]=b.w||J0(b.z||zs[14],P);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(h){return[s,o,l,o,u(h),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),SLe=function(){function t(d,h,p,g,b){b.raw?h[p][g]=d:d===""||(d==="TRUE"?h[p][g]=!0:d==="FALSE"?h[p][g]=!1:isNaN(Zf(d))?isNaN(py(d).getDate())?h[p][g]=d:h[p][g]=yl(d):h[p][g]=Zf(d))}function e(d,h){var p=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),w=b.length-1;w>=0&&b[w].length===0;)--w;for(var _=10,N=0,A=0;A<=w;++A)N=b[A].indexOf(" "),N==-1?N=b[A].length:N++,_=Math.max(_,N);for(A=0;A<=w;++A){g[A]=[];var j=0;for(t(b[A].slice(0,_).trim(),g,A,j,p),j=1;j<=(b[A].length-_)/10+1;++j)t(b[A].slice(_+(j-1)*10,_+j*10).trim(),g,A,j,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var h={},p=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?p=!p:!p&&b in r&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(w,_){return w[0]-_[0]||n[w[1]]-n[_[1]]}),r[b.pop()[1]]||44}function s(d,h){var p=h||{},g="",b=p.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=a(d.slice(0,1024)):p&&p.FS?g=p.FS:g=a(d.slice(0,1024));var _=0,N=0,A=0,j=0,P=0,U=g.charCodeAt(0),G=!1,O=0,D=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var I=p.dateNF!=null?VDe(p.dateNF):null;function V(){var R=d.slice(j,P),B={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)B.t="z";else if(p.raw)B.t="s",B.v=R;else if(R.trim().length===0)B.t="s",B.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(B.t="s",B.v=R.slice(2,-1).replace(/""/g,'"')):E9e(R)?(B.t="n",B.f=R.slice(1)):(B.t="s",B.v=R);else if(R=="TRUE")B.t="b",B.v=!0;else if(R=="FALSE")B.t="b",B.v=!1;else if(!isNaN(A=Zf(R)))B.t="n",p.cellText!==!1&&(B.w=R),B.v=A;else if(!isNaN(py(R).getDate())||I&&R.match(I)){B.z=p.dateNF||zs[14];var F=0;I&&R.match(I)&&(R=$De(R,p.dateNF,R.match(I)||[]),F=1),p.cellDates?(B.t="d",B.v=yl(R,F)):(B.t="n",B.v=Zl(yl(R,F))),p.cellText!==!1&&(B.w=J0(B.z,B.v instanceof Date?Zl(B.v):B.v)),p.cellNF||delete B.z}else B.t="s",B.v=R;if(B.t=="z"||(p.dense?(b[_]||(b[_]=[]),b[_][N]=B):b[Ca({c:N,r:_})]=B),j=P+1,D=d.charCodeAt(j),w.e.c<N&&(w.e.c=N),w.e.r<_&&(w.e.r=_),O==U)++N;else if(N=0,++_,p.sheetRows&&p.sheetRows<=_)return!0}e:for(;P<d.length;++P)switch(O=d.charCodeAt(P)){case 34:D===34&&(G=!G);break;case U:case 10:case 13:if(!G&&V())break e;break}return P-j>0&&V(),b["!ref"]=_i(w),b}function o(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):vv(e(d,h),h)}function l(d,h){var p="",g=h.type=="string"?[0,0,0,0]:Fze(d,h);switch(h.type){case"base64":p=mh(d);break;case"binary":p=d;break;case"buffer":h.codepage==65001?p=d.toString("utf8"):h.codepage&&typeof O3<"u"||(p=la&&Buffer.isBuffer(d)?d.toString("binary"):Iw(d));break;case"array":p=gS(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=f2(p.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?p=f2(p):h.type=="binary"&&typeof O3<"u",p.slice(0,19)=="socialcalc:version:"?jie.to_sheet(h.type=="string"?p:f2(p),h):o(p,h)}function c(d,h){return pg(l(d,h),h)}function u(d){for(var h=[],p=is(d["!ref"]),g,b=Array.isArray(d),w=p.s.r;w<=p.e.r;++w){for(var _=[],N=p.s.c;N<=p.e.c;++N){var A=Ca({r:w,c:N});if(g=b?(d[w]||[])[N]:d[A],!g||g.v==null){_.push("          ");continue}for(var j=(g.w||(ph(g),g.w)||"").slice(0,10);j.length<10;)j+=" ";_.push(j+(N===0?" ":""))}h.push(_.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),hH=function(){function t(H,Y,X){if(H){bc(H,H.l||0);for(var re=X.Enum||Ee;H.l<H.length;){var se=H.read_shift(2),ke=re[se]||re[65535],Ce=H.read_shift(2),xe=H.l+Ce,Ie=ke.f&&ke.f(H,Ce,X);if(H.l=xe,Y(Ie,ke,se))return}}}function e(H,Y){switch(Y.type){case"base64":return r(Ju(mh(H)),Y);case"binary":return r(Ju(H),Y);case"buffer":case"array":return r(H,Y)}throw"Unsupported type "+Y.type}function r(H,Y){if(!H)return H;var X=Y||{},re=X.dense?[]:{},se="Sheet1",ke="",Ce=0,xe={},Ie=[],He=[],Ue={s:{r:0,c:0},e:{r:0,c:0}},Me=X.sheetRows||0;if(H[2]==0&&(H[3]==8||H[3]==9)&&H.length>=16&&H[14]==5&&H[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(H[2]==2)X.Enum=Ee,t(H,function(ht,Lt,et){switch(et){case 0:X.vers=ht,ht>=4096&&(X.qpro=!0);break;case 6:Ue=ht;break;case 204:ht&&(ke=ht);break;case 222:ke=ht;break;case 15:case 51:X.qpro||(ht[1].v=ht[1].v.slice(1));case 13:case 14:case 16:et==14&&(ht[2]&112)==112&&(ht[2]&15)>1&&(ht[2]&15)<15&&(ht[1].z=X.dateNF||zs[14],X.cellDates&&(ht[1].t="d",ht[1].v=Hse(ht[1].v))),X.qpro&&ht[3]>Ce&&(re["!ref"]=_i(Ue),xe[se]=re,Ie.push(se),re=X.dense?[]:{},Ue={s:{r:0,c:0},e:{r:0,c:0}},Ce=ht[3],se=ke||"Sheet"+(Ce+1),ke="");var Jt=X.dense?(re[ht[0].r]||[])[ht[0].c]:re[Ca(ht[0])];if(Jt){Jt.t=ht[1].t,Jt.v=ht[1].v,ht[1].z!=null&&(Jt.z=ht[1].z),ht[1].f!=null&&(Jt.f=ht[1].f);break}X.dense?(re[ht[0].r]||(re[ht[0].r]=[]),re[ht[0].r][ht[0].c]=ht[1]):re[Ca(ht[0])]=ht[1];break}},X);else if(H[2]==26||H[2]==14)X.Enum=ye,H[2]==14&&(X.qpro=!0,H.l=0),t(H,function(ht,Lt,et){switch(et){case 204:se=ht;break;case 22:ht[1].v=ht[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ht[3]>Ce&&(re["!ref"]=_i(Ue),xe[se]=re,Ie.push(se),re=X.dense?[]:{},Ue={s:{r:0,c:0},e:{r:0,c:0}},Ce=ht[3],se="Sheet"+(Ce+1)),Me>0&&ht[0].r>=Me)break;X.dense?(re[ht[0].r]||(re[ht[0].r]=[]),re[ht[0].r][ht[0].c]=ht[1]):re[Ca(ht[0])]=ht[1],Ue.e.c<ht[0].c&&(Ue.e.c=ht[0].c),Ue.e.r<ht[0].r&&(Ue.e.r=ht[0].r);break;case 27:ht[14e3]&&(He[ht[14e3][0]]=ht[14e3][1]);break;case 1537:He[ht[0]]=ht[1],ht[0]==Ce&&(se=ht[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+H[2]);if(re["!ref"]=_i(Ue),xe[ke||se]=re,Ie.push(ke||se),!He.length)return{SheetNames:Ie,Sheets:xe};for(var Be={},be=[],Vt=0;Vt<He.length;++Vt)xe[Ie[Vt]]?(be.push(He[Vt]||Ie[Vt]),Be[He[Vt]]=xe[He[Vt]]||xe[Ie[Vt]]):(be.push(He[Vt]),Be[He[Vt]]={"!ref":"A1"});return{SheetNames:be,Sheets:Be}}function n(H,Y){var X=Y||{};if(+X.codepage>=0&&hy(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Kl(),se=is(H["!ref"]),ke=Array.isArray(H),Ce=[];pr(re,0,s(1030)),pr(re,6,c(se));for(var xe=Math.min(se.e.r,8191),Ie=se.s.r;Ie<=xe;++Ie)for(var He=ko(Ie),Ue=se.s.c;Ue<=se.e.c;++Ue){Ie===se.s.r&&(Ce[Ue]=Go(Ue));var Me=Ce[Ue]+He,Be=ke?(H[Ie]||[])[Ue]:H[Me];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?pr(re,13,g(Ie,Ue,Be.v)):pr(re,14,w(Ie,Ue,Be.v));else{var be=ph(Be);pr(re,15,h(Ie,Ue,be.slice(0,239)))}}return pr(re,1),re.end()}function a(H,Y){var X=Y||{};if(+X.codepage>=0&&hy(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Kl();pr(re,0,o(H));for(var se=0,ke=0;se<H.SheetNames.length;++se)(H.Sheets[H.SheetNames[se]]||{})["!ref"]&&pr(re,27,me(H.SheetNames[se],ke++));var Ce=0;for(se=0;se<H.SheetNames.length;++se){var xe=H.Sheets[H.SheetNames[se]];if(!(!xe||!xe["!ref"])){for(var Ie=is(xe["!ref"]),He=Array.isArray(xe),Ue=[],Me=Math.min(Ie.e.r,8191),Be=Ie.s.r;Be<=Me;++Be)for(var be=ko(Be),Vt=Ie.s.c;Vt<=Ie.e.c;++Vt){Be===Ie.s.r&&(Ue[Vt]=Go(Vt));var ht=Ue[Vt]+be,Lt=He?(xe[Be]||[])[Vt]:xe[ht];if(!(!Lt||Lt.t=="z"))if(Lt.t=="n")pr(re,23,V(Be,Vt,Ce,Lt.v));else{var et=ph(Lt);pr(re,22,O(Be,Vt,Ce,et.slice(0,239)))}}++Ce}}return pr(re,1),re.end()}function s(H){var Y=Pt(2);return Y.write_shift(2,H),Y}function o(H){var Y=Pt(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var X=0,re=0,se=0,ke=0;ke<H.SheetNames.length;++ke){var Ce=H.SheetNames[ke],xe=H.Sheets[Ce];if(!(!xe||!xe["!ref"])){++se;var Ie=zc(xe["!ref"]);X<Ie.e.r&&(X=Ie.e.r),re<Ie.e.c&&(re=Ie.e.c)}}return X>8191&&(X=8191),Y.write_shift(2,X),Y.write_shift(1,se),Y.write_shift(1,re),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function l(H,Y,X){var re={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&X.qpro?(re.s.c=H.read_shift(1),H.l++,re.s.r=H.read_shift(2),re.e.c=H.read_shift(1),H.l++,re.e.r=H.read_shift(2),re):(re.s.c=H.read_shift(2),re.s.r=H.read_shift(2),Y==12&&X.qpro&&(H.l+=2),re.e.c=H.read_shift(2),re.e.r=H.read_shift(2),Y==12&&X.qpro&&(H.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function c(H){var Y=Pt(8);return Y.write_shift(2,H.s.c),Y.write_shift(2,H.s.r),Y.write_shift(2,H.e.c),Y.write_shift(2,H.e.r),Y}function u(H,Y,X){var re=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(re[0].c=H.read_shift(1),re[3]=H.read_shift(1),re[0].r=H.read_shift(2),H.l+=2):(re[2]=H.read_shift(1),re[0].c=H.read_shift(2),re[0].r=H.read_shift(2)),re}function d(H,Y,X){var re=H.l+Y,se=u(H,Y,X);if(se[1].t="s",X.vers==20768){H.l++;var ke=H.read_shift(1);return se[1].v=H.read_shift(ke,"utf8"),se}return X.qpro&&H.l++,se[1].v=H.read_shift(re-H.l,"cstr"),se}function h(H,Y,X){var re=Pt(7+X.length);re.write_shift(1,255),re.write_shift(2,Y),re.write_shift(2,H),re.write_shift(1,39);for(var se=0;se<re.length;++se){var ke=X.charCodeAt(se);re.write_shift(1,ke>=128?95:ke)}return re.write_shift(1,0),re}function p(H,Y,X){var re=u(H,Y,X);return re[1].v=H.read_shift(2,"i"),re}function g(H,Y,X){var re=Pt(7);return re.write_shift(1,255),re.write_shift(2,Y),re.write_shift(2,H),re.write_shift(2,X,"i"),re}function b(H,Y,X){var re=u(H,Y,X);return re[1].v=H.read_shift(8,"f"),re}function w(H,Y,X){var re=Pt(13);return re.write_shift(1,255),re.write_shift(2,Y),re.write_shift(2,H),re.write_shift(8,X,"f"),re}function _(H,Y,X){var re=H.l+Y,se=u(H,Y,X);if(se[1].v=H.read_shift(8,"f"),X.qpro)H.l=re;else{var ke=H.read_shift(2);P(H.slice(H.l,H.l+ke),se),H.l+=ke}return se}function N(H,Y,X){var re=Y&32768;return Y&=-32769,Y=(re?H:0)+(Y>=8192?Y-16384:Y),(re?"":"$")+(X?Go(Y):ko(Y))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(H,Y){bc(H,0);for(var X=[],re=0,se="",ke="",Ce="",xe="";H.l<H.length;){var Ie=H[H.l++];switch(Ie){case 0:X.push(H.read_shift(8,"f"));break;case 1:ke=N(Y[0].c,H.read_shift(2),!0),se=N(Y[0].r,H.read_shift(2),!1),X.push(ke+se);break;case 2:{var He=N(Y[0].c,H.read_shift(2),!0),Ue=N(Y[0].r,H.read_shift(2),!1);ke=N(Y[0].c,H.read_shift(2),!0),se=N(Y[0].r,H.read_shift(2),!1),X.push(He+Ue+":"+ke+se)}break;case 3:if(H.l<H.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(H.read_shift(2));break;case 6:{for(var Me="";Ie=H[H.l++];)Me+=String.fromCharCode(Ie);X.push('"'+Me.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:xe=X.pop(),Ce=X.pop(),X.push(["AND","OR"][Ie-20]+"("+Ce+","+xe+")");break;default:if(Ie<32&&j[Ie])xe=X.pop(),Ce=X.pop(),X.push(Ce+j[Ie]+xe);else if(A[Ie]){if(re=A[Ie][1],re==69&&(re=H[H.l++]),re>X.length){console.error("WK1 bad formula parse 0x"+Ie.toString(16)+":|"+X.join("|")+"|");return}var Be=X.slice(-re);X.length-=re,X.push(A[Ie][0]+"("+Be.join(",")+")")}else return Ie<=7?console.error("WK1 invalid opcode "+Ie.toString(16)):Ie<=24?console.error("WK1 unsupported op "+Ie.toString(16)):Ie<=30?console.error("WK1 invalid opcode "+Ie.toString(16)):Ie<=115?console.error("WK1 unsupported function opcode "+Ie.toString(16)):console.error("WK1 unrecognized opcode "+Ie.toString(16))}}X.length==1?Y[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function U(H){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=H.read_shift(2),Y[3]=H[H.l++],Y[0].c=H[H.l++],Y}function G(H,Y){var X=U(H);return X[1].t="s",X[1].v=H.read_shift(Y-4,"cstr"),X}function O(H,Y,X,re){var se=Pt(6+re.length);se.write_shift(2,H),se.write_shift(1,X),se.write_shift(1,Y),se.write_shift(1,39);for(var ke=0;ke<re.length;++ke){var Ce=re.charCodeAt(ke);se.write_shift(1,Ce>=128?95:Ce)}return se.write_shift(1,0),se}function D(H,Y){var X=U(H);X[1].v=H.read_shift(2);var re=X[1].v>>1;if(X[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return X[1].v=re,X}function I(H,Y){var X=U(H),re=H.read_shift(4),se=H.read_shift(4),ke=H.read_shift(2);if(ke==65535)return re===0&&se===3221225472?(X[1].t="e",X[1].v=15):re===0&&se===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var Ce=ke&32768;return ke=(ke&32767)-16446,X[1].v=(1-Ce*2)*(se*Math.pow(2,ke+32)+re*Math.pow(2,ke)),X}function V(H,Y,X,re){var se=Pt(14);if(se.write_shift(2,H),se.write_shift(1,X),se.write_shift(1,Y),re==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var ke=0,Ce=0,xe=0,Ie=0;return re<0&&(ke=1,re=-re),Ce=Math.log2(re)|0,re/=Math.pow(2,Ce-31),Ie=re>>>0,Ie&2147483648||(re/=2,++Ce,Ie=re>>>0),re-=Ie,Ie|=2147483648,Ie>>>=0,re*=Math.pow(2,32),xe=re>>>0,se.write_shift(4,xe),se.write_shift(4,Ie),Ce+=16383+(ke?32768:0),se.write_shift(2,Ce),se}function R(H,Y){var X=I(H);return H.l+=Y-14,X}function B(H,Y){var X=U(H),re=H.read_shift(4);return X[1].v=re>>6,X}function F(H,Y){var X=U(H),re=H.read_shift(8,"f");return X[1].v=re,X}function ee(H,Y){var X=F(H);return H.l+=Y-10,X}function Z(H,Y){return H[H.l+Y-1]==0?H.read_shift(Y,"cstr"):""}function ce(H,Y){var X=H[H.l++];X>Y-1&&(X=Y-1);for(var re="";re.length<X;)re+=String.fromCharCode(H[H.l++]);return re}function ne(H,Y,X){if(!(!X.qpro||Y<21)){var re=H.read_shift(1);H.l+=17,H.l+=1,H.l+=2;var se=H.read_shift(Y-21,"cstr");return[re,se]}}function ae(H,Y){for(var X={},re=H.l+Y;H.l<re;){var se=H.read_shift(2);if(se==14e3){for(X[se]=[0,""],X[se][0]=H.read_shift(2);H[H.l];)X[se][1]+=String.fromCharCode(H[H.l]),H.l++;H.l++}}return X}function me(H,Y){var X=Pt(5+H.length);X.write_shift(2,14e3),X.write_shift(2,Y);for(var re=0;re<H.length;++re){var se=H.charCodeAt(re);X[X.l++]=se>127?95:se}return X[X.l++]=0,X}var Ee={0:{n:"BOF",f:_ie},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:ce},65535:{n:""}},ye={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ae},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:B},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:ee},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}(),jLe=/^\s|\s$|[\t\n\r]/;function Tie(t,e){if(!e.bookSST)return"";var r=[Ai];r[r.length]=hr("sst",null,{xmlns:xv[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(jLe)&&(s+=' xml:space="preserve"'),s+=">"+ja(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function TLe(t){return[t.read_shift(4),t.read_shift(4)]}function CLe(t,e){return e||(e=Pt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var kLe=yMe;function ILe(t){var e=Kl();tr(e,159,CLe(t));for(var r=0;r<t.length;++r)tr(e,19,kLe(t[r]));return tr(e,160),e.end()}function OLe(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function Cie(t){var e=0,r,n=OLe(t),a=n.length+1,s,o,l,c,u;for(r=Hp(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var PLe=function(){function t(a,s){switch(s.type){case"base64":return e(mh(a),s);case"binary":return e(a,s);case"buffer":return e(la&&Buffer.isBuffer(a)?a.toString("binary"):Iw(a),s);case"array":return e(gS(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,h){Array.isArray(l)&&(l[h]=[]);for(var p=/\\\w+\b/g,g=0,b,w=-1;b=p.exec(d);){switch(b[0]){case"\\cell":var _=d.slice(g,p.lastIndex-b[0].length);if(_[0]==" "&&(_=_.slice(1)),++w,_.length){var N={v:_,t:"s"};Array.isArray(l)?l[h][w]=N:l[Ca({r:h,c:w})]=N}break}g=p.lastIndex}w>u.e.c&&(u.e.c=w)}),l["!ref"]=_i(u),l}function r(a,s){return pg(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=is(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var h=Ca({r:u,c:d});l=c?(a[u]||[])[d]:a[h],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(ph(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function mH(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var RLe=6,Qf=RLe;function z3(t){return Math.floor((t+Math.round(128/Qf)/256)*Qf)}function V3(t){return Math.floor((t-5)/Qf*100+.5)/100}function eI(t){return Math.round((t*Qf+5)/Qf*256)/256}function pD(t){t.width?(t.wpx=z3(t.width),t.wch=V3(t.wpx),t.MDW=Qf):t.wpx?(t.wch=V3(t.wpx),t.width=eI(t.wch),t.MDW=Qf):typeof t.wch=="number"&&(t.width=eI(t.wch),t.wpx=z3(t.width),t.MDW=Qf),t.customWidth&&delete t.customWidth}var DLe=96,kie=DLe;function $3(t){return t*96/kie}function Iie(t){return t*kie/96}function MLe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=hr("numFmt",null,{numFmtId:n,formatCode:ja(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=hr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function LLe(t){var e=[];return e[e.length]=hr("cellXfs",null),t.forEach(function(r){e[e.length]=hr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=hr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Oie(t,e){var r=[Ai,hr("styleSheet",null,{xmlns:xv[0],"xmlns:vt":eo.vt})],n;return t.SSF&&(n=MLe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=LLe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function FLe(t,e){var r=t.read_shift(2),n=Wo(t);return[r,n]}function BLe(t,e,r){r||(r=Pt(6+4*e.length)),r.write_shift(2,t),ro(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function ULe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=jMe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=SMe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Wo(t),n}function zLe(t,e){e||(e=Pt(25+4*32)),e.write_shift(2,t.sz*20),TMe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),B3(t.color,e);var n=0;return n=2,e.write_shift(1,n),ro(t.name,e),e.length>e.l?e.slice(0,e.l):e}var VLe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],AT,$Le=Yd;function pH(t,e){e||(e=Pt(4*3+8*7+16*1)),AT||(AT=nD(VLe));var r=AT[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(B3({auto:1},e),B3({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function HLe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function Pie(t,e,r){r||(r=Pt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function ib(t,e){return e||(e=Pt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var qLe=Yd;function GLe(t,e){return e||(e=Pt(51)),e.write_shift(1,0),ib(null,e),ib(null,e),ib(null,e),ib(null,e),ib(null,e),e.length>e.l?e.slice(0,e.l):e}function WLe(t,e){return e||(e=Pt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),F3(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function KLe(t,e,r){var n=Pt(2052);return n.write_shift(4,t),F3(e,n),F3(r,n),n.length>n.l?n.slice(0,n.l):n}function XLe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(tr(t,615,id(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&tr(t,44,BLe(a,e[a]))}),tr(t,616))}}function YLe(t){var e=1;tr(t,611,id(e)),tr(t,43,zLe({sz:12,color:{theme:1},name:"Calibri",family:2})),tr(t,612)}function ZLe(t){var e=2;tr(t,603,id(e)),tr(t,45,pH({patternType:"none"})),tr(t,45,pH({patternType:"gray125"})),tr(t,604)}function QLe(t){var e=1;tr(t,613,id(e)),tr(t,46,GLe()),tr(t,614)}function JLe(t){var e=1;tr(t,626,id(e)),tr(t,47,Pie({numFmtId:0},65535)),tr(t,627)}function e9e(t,e){tr(t,617,id(e.length)),e.forEach(function(r){tr(t,47,Pie(r,0))}),tr(t,618)}function t9e(t){var e=1;tr(t,619,id(e)),tr(t,48,WLe({xfId:0,name:"Normal"})),tr(t,620)}function r9e(t){var e=0;tr(t,505,id(e)),tr(t,506)}function n9e(t){var e=0;tr(t,508,KLe(e,"TableStyleMedium9","PivotStyleMedium4")),tr(t,509)}function a9e(t,e){var r=Kl();return tr(r,278),XLe(r,t.SSF),YLe(r),ZLe(r),QLe(r),JLe(r),e9e(r,e.cellXfs),t9e(r),r9e(r),n9e(r),tr(r,279),r.end()}function Rie(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Ai];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function s9e(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Wo(t)}}function i9e(t){var e=Pt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),ro(t.name,e),e.slice(0,e.l)}function o9e(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function l9e(t){var e=Pt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function c9e(t,e){var r=Pt(8+2*e.length);return r.write_shift(4,t),ro(e,r),r.slice(0,r.l)}function u9e(t){return t.l+=4,t.read_shift(4)!=0}function d9e(t,e){var r=Pt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function f9e(){var t=Kl();return tr(t,332),tr(t,334,id(1)),tr(t,335,i9e({name:"XLDAPR",version:12e4,flags:3496657072})),tr(t,336),tr(t,339,c9e(1,"XLDAPR")),tr(t,52),tr(t,35,id(514)),tr(t,4096,id(0)),tr(t,4097,ou(1)),tr(t,36),tr(t,53),tr(t,340),tr(t,337,d9e(1)),tr(t,51,l9e([[1,0]])),tr(t,338),tr(t,333),t.end()}function Die(){var t=[Ai];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function h9e(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Ca(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var A1=1024;function Mie(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[hr("xml",null,{"xmlns:v":_c.v,"xmlns:o":_c.o,"xmlns:x":_c.x,"xmlns:mv":_c.mv}).replace(/\/>/,">"),hr("o:shapelayout",hr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),hr("v:shapetype",[hr("v:stroke",null,{joinstyle:"miter"}),hr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];A1<t*1e3;)A1+=1e3;return e.forEach(function(s){var o=to(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?hr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=hr("v:fill",c,l),d={on:"t",obscured:"t"};++A1,a=a.concat(["<v:shape"+xy({id:"_x0000_s"+A1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,hr("v:shadow",null,d),hr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",jo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),jo("x:AutoFill","False"),jo("x:Row",String(o.r)),jo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function Lie(t){var e=[Ai,hr("comments",null,{xmlns:xv[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=ja(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(ja(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(jo("t",ja(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(jo("t",ja(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function m9e(t,e,r){var n=[Ai,hr("ThreadedComments",null,{xmlns:eo.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(hr("threadedComment",jo("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function p9e(t){var e=[Ai,hr("personList",null,{xmlns:eo.TCMNT,"xmlns:x":xv[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(hr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function g9e(t){var e={};e.iauthor=t.read_shift(4);var r=bg(t);return e.rfx=r.s,e.ref=Ca(r.s),t.l+=16,e}function x9e(t,e){return e==null&&(e=Pt(36)),e.write_shift(4,t[1].iauthor),bv(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var v9e=Wo;function b9e(t){return ro(t.slice(0,54))}function y9e(t){var e=Kl(),r=[];return tr(e,628),tr(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),tr(e,632,b9e(a.a)))})}),tr(e,631),tr(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:to(n[0]),e:to(n[0])};tr(e,635,x9e([s,a])),a.t&&a.t.length>0&&tr(e,637,_Me(a)),tr(e,636),delete a.iauthor})}),tr(e,634),tr(e,629),e.end()}function w9e(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Ra.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var Fie=["xlsb","xlsm","xlam","biff8","xla"],_9e=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Go(d)+(c?"":"$")+ko(u)}return function(a,s){return e=s,a.replace(t,r)}}(),gD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,xD=function(){return function(e,r){return e.replace(gD,function(n,a,s,o,l,c){var u=uD(o)-(s?0:r.c),d=cD(c)-(l?0:r.r),h=d==0?"":l?d+1:"["+d+"]",p=u==0?"":s?u+1:"["+u+"]";return a+"R"+h+"C"+p})}}();function N9e(t,e){return t.replace(gD,function(r,n,a,s,o,l){return n+(a=="$"?a+s:Go(uD(s)+e.c))+(o=="$"?o+l:ko(cD(l)+e.r))})}function E9e(t){return t.length!=1}function ui(t){t.l+=1}function em(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Bie(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Uie(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),o=em(t),l=em(t);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Uie(t){var e=em(t),r=em(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function A9e(t,e,r){if(r.biff<8)return Uie(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=em(t),o=em(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function zie(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return S9e(t);var n=t.read_shift(r&&r.biff==12?4:2),a=em(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function S9e(t){var e=em(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function j9e(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function T9e(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return C9e(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function C9e(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function k9e(t,e,r){var n=(t[t.l++]&96)>>5,a=Bie(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function I9e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=Bie(t,s,r);return[n,a,o]}function O9e(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function P9e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function R9e(t,e,r){var n=(t[t.l++]&96)>>5,a=A9e(t,e-1,r);return[n,a]}function D9e(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function gH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function M9e(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function L9e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function F9e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function B9e(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function U9e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Vie(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function z9e(t){return t.read_shift(2),Vie(t)}function V9e(t){return t.read_shift(2),Vie(t)}function $9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=zie(t,0,r);return[n,a]}function H9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=T9e(t,0,r);return[n,a]}function q9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=zie(t,0,r);return[n,a,s]}function G9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[GFe[a],qie[a],n]}function W9e(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:K9e(t);return[a,(s[0]===0?qie:qFe)[s[1]]]}function K9e(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function X9e(t,e,r){t.l+=r&&r.biff==2?3:4}function Y9e(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function Z9e(t){return t.l++,Rw[t.read_shift(1)]}function Q9e(t){return t.l++,t.read_shift(2)}function J9e(t){return t.l++,t.read_shift(1)!==0}function eFe(t){return t.l++,yv(t)}function tFe(t,e,r){return t.l++,Eie(t,e-1,r)}function rFe(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=qMe(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Rw[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=yv(t);break;case 2:r[1]=XMe(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function nFe(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?bg:QMe)(t));return a}function aFe(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=rFe(t,r.biff);return o}function sFe(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function iFe(t,e,r){if(r.biff==5)return oFe(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function oFe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function lFe(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function cFe(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function uFe(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function dFe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var fFe=Yd,hFe=Yd,mFe=Yd;function Dw(t,e,r){return t.l+=2,[j9e(t)]}function vD(t){return t.l+=6,[]}var pFe=Dw,gFe=vD,xFe=vD,vFe=Dw;function $ie(t){return t.l+=2,[_ie(t),t.read_shift(2)&1]}var bFe=Dw,yFe=$ie,wFe=vD,_Fe=Dw,NFe=Dw,EFe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function AFe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),o=EFe[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:a,C:s}}function SFe(t){return t.l+=2,[t.read_shift(4)]}function jFe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function TFe(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function CFe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function kFe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function IFe(t){return t.l+=4,[0,0]}var xH={1:{n:"PtgExp",f:Y9e},2:{n:"PtgTbl",f:mFe},3:{n:"PtgAdd",f:ui},4:{n:"PtgSub",f:ui},5:{n:"PtgMul",f:ui},6:{n:"PtgDiv",f:ui},7:{n:"PtgPower",f:ui},8:{n:"PtgConcat",f:ui},9:{n:"PtgLt",f:ui},10:{n:"PtgLe",f:ui},11:{n:"PtgEq",f:ui},12:{n:"PtgGe",f:ui},13:{n:"PtgGt",f:ui},14:{n:"PtgNe",f:ui},15:{n:"PtgIsect",f:ui},16:{n:"PtgUnion",f:ui},17:{n:"PtgRange",f:ui},18:{n:"PtgUplus",f:ui},19:{n:"PtgUminus",f:ui},20:{n:"PtgPercent",f:ui},21:{n:"PtgParen",f:ui},22:{n:"PtgMissArg",f:ui},23:{n:"PtgStr",f:tFe},26:{n:"PtgSheet",f:jFe},27:{n:"PtgEndSheet",f:TFe},28:{n:"PtgErr",f:Z9e},29:{n:"PtgBool",f:J9e},30:{n:"PtgInt",f:Q9e},31:{n:"PtgNum",f:eFe},32:{n:"PtgArray",f:D9e},33:{n:"PtgFunc",f:G9e},34:{n:"PtgFuncVar",f:W9e},35:{n:"PtgName",f:sFe},36:{n:"PtgRef",f:$9e},37:{n:"PtgArea",f:k9e},38:{n:"PtgMemArea",f:lFe},39:{n:"PtgMemErr",f:fFe},40:{n:"PtgMemNoMem",f:hFe},41:{n:"PtgMemFunc",f:cFe},42:{n:"PtgRefErr",f:uFe},43:{n:"PtgAreaErr",f:O9e},44:{n:"PtgRefN",f:H9e},45:{n:"PtgAreaN",f:R9e},46:{n:"PtgMemAreaN",f:CFe},47:{n:"PtgMemNoMemN",f:kFe},57:{n:"PtgNameX",f:iFe},58:{n:"PtgRef3d",f:q9e},59:{n:"PtgArea3d",f:I9e},60:{n:"PtgRefErr3d",f:dFe},61:{n:"PtgAreaErr3d",f:P9e},255:{}},OFe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},PFe={1:{n:"PtgElfLel",f:$ie},2:{n:"PtgElfRw",f:_Fe},3:{n:"PtgElfCol",f:pFe},6:{n:"PtgElfRwV",f:NFe},7:{n:"PtgElfColV",f:vFe},10:{n:"PtgElfRadical",f:bFe},11:{n:"PtgElfRadicalS",f:wFe},13:{n:"PtgElfColS",f:gFe},15:{n:"PtgElfColSV",f:xFe},16:{n:"PtgElfRadicalLel",f:yFe},25:{n:"PtgList",f:AFe},29:{n:"PtgSxName",f:SFe},255:{}},RFe={0:{n:"PtgAttrNoop",f:IFe},1:{n:"PtgAttrSemi",f:U9e},2:{n:"PtgAttrIf",f:F9e},4:{n:"PtgAttrChoose",f:M9e},8:{n:"PtgAttrGoto",f:L9e},16:{n:"PtgAttrSum",f:X9e},32:{n:"PtgAttrBaxcel",f:gH},33:{n:"PtgAttrBaxcel",f:gH},64:{n:"PtgAttrSpace",f:z9e},65:{n:"PtgAttrSpaceSemi",f:V9e},128:{n:"PtgAttrIfError",f:B9e},255:{}};function DFe(t,e,r,n){if(n.biff<8)return Yd(t,e);for(var a=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=aFe(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=nFe(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=a-t.l,e!==0&&s.push(Yd(t,e)),s}function MFe(t,e,r){for(var n=t.l+e,a,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],a=xH[s]||xH[OFe[s]],(s===24||s===25)&&(a=(s===24?PFe:RFe)[t[t.l+1]]),!a||!a.f?Yd(t,e):o.push([a.n,a.f(t,e,r)]);return o}function LFe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var FFe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function BFe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Hie(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function vH(t,e,r){var n=Hie(t,e,r);return n=="#REF"?n:BFe(n,r)}function Lx(t,e,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,h=0,p=0,g,b="";if(!t[0]||!t[0][0])return"";for(var w=-1,_="",N=0,A=t[0].length;N<A;++N){var j=t[0][N];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),w>=0){switch(t[0][w][1][0]){case 0:_=Ls(" ",t[0][w][1][1]);break;case 1:_=Ls("\r",t[0][w][1][1]);break;default:if(_="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}u=u+_,w=-1}l.push(u+FFe[j[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=m2(j[1][1],o,a),l.push(p2(d,s));break;case"PtgRefN":d=r?m2(j[1][1],r,a):j[1][1],l.push(p2(d,s));break;case"PtgRef3d":h=j[1][1],d=m2(j[1][2],o,a),b=vH(n,h,a),l.push(b+"!"+p2(d,s));break;case"PtgFunc":case"PtgFuncVar":var P=j[1][0],U=j[1][1];P||(P=0),P&=127;var G=P==0?[]:l.slice(-P);l.length-=P,U==="User"&&(U=G.shift()),l.push(U+"("+G.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":g=rH(j[1][1],r?{s:r}:o,a),l.push(NT(g,a));break;case"PtgArea":g=rH(j[1][1],o,a),l.push(NT(g,a));break;case"PtgArea3d":h=j[1][1],g=j[1][2],b=vH(n,h,a),l.push(b+"!"+NT(g,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=j[1][2];var O=(n.names||[])[p-1]||(n[0]||[])[p],D=O?O.Name:"SH33TJSNAME"+String(p);D&&D.slice(0,6)=="_xlfn."&&!a.xlfn&&(D=D.slice(6)),l.push(D);break;case"PtgNameX":var I=j[1][1];p=j[1][2];var V;if(a.biff<=5)I<0&&(I=-I),n[I]&&(V=n[I][p]);else{var R="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][p]&&n[I][p].itab>0&&(R=n.SheetNames[n[I][p].itab-1]+"!"):R=n.SheetNames[p-1]+"!"),n[I]&&n[I][p])R+=n[I][p].Name;else if(n[0]&&n[0][p])R+=n[0][p].Name;else{var B=(Hie(n,I,a)||"").split(";;");B[p-1]?R=B[p-1]:R+="SH33TJSERRX"}l.push(R);break}V||(V={Name:"SH33TJSERRY"}),l.push(V.Name);break;case"PtgParen":var F="(",ee=")";if(w>=0){switch(_="",t[0][w][1][0]){case 2:F=Ls(" ",t[0][w][1][1])+F;break;case 3:F=Ls("\r",t[0][w][1][1])+F;break;case 4:ee=Ls(" ",t[0][w][1][1])+ee;break;case 5:ee=Ls("\r",t[0][w][1][1])+ee;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}l.push(F+l.pop()+ee);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:j[1][1],r:j[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[Ca(d)]){var ce=n.sharedf[Ca(d)];l.push(Lx(ce,o,Z,n,a))}else{var ne=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Lx(u[1],o,Z,n,a)),ne=!0;break}ne||l.push(j[1])}break;case"PtgArray":l.push("{"+LFe(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&w>=0&&ae.indexOf(t[0][N][0])==-1){j=t[0][w];var me=!0;switch(j[1][0]){case 4:me=!1;case 0:_=Ls(" ",j[1][1]);break;case 5:me=!1;case 1:_=Ls("\r",j[1][1]);break;default:if(_="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((me?_:"")+l.pop()+(me?"":_)),w=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function UFe(t){if(t==null){var e=Pt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return qp(t);return qp(0)}function zFe(t,e,r,n,a){var s=Gp(e,r,a),o=UFe(t.v),l=Pt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Pt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=So([s,o,l,u]);return h}function xS(t,e,r){var n=t.read_shift(4),a=MFe(t,n,r),s=t.read_shift(4),o=s>0?DFe(t,s,a,r):null;return[a,o]}var VFe=xS,vS=xS,$Fe=xS,HFe=xS,qFe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},qie={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},GFe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function WFe(t){var e="of:="+t.replace(gD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function KFe(t){return t.replace(/\./,"!")}var g2=typeof Map<"u";function bD(t,e,r){var n=0,a=t.length;if(r){if(g2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=g2?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(g2?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function bS(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Qf=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=V3(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=eI(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Gie(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function ym(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){zse(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function XFe(t,e,r){if(t&&t["!ref"]){var n=is(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function YFe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+_i(t[r])+'"/>';return e+"</mergeCells>"}function ZFe(t,e,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=gy(ja(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+hr("outlinePr",null,u)}!s&&!l||(a[a.length]=hr("sheetPr",l,o))}var QFe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],JFe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function eBe(t){var e={sheet:1};return QFe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),JFe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=Cie(t.password).toString(16).toUpperCase()),hr("sheetProtection",null,e)}function tBe(t){return Gie(t),hr("pageMargins",null,t)}function rBe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=hr("col",null,bS(a,n)));return r[r.length]="</cols>",r.join("")}function nBe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:_i(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=zc(a);o.s.r==o.e.r&&(o.e.r=zc(e["!ref"]).e.r,a=_i(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),hr("autoFilter",null,{ref:a})}function aBe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),hr("sheetViews",hr("sheetView",null,a),{})}function sBe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=Rw[t.v];break;case"d":n&&n.cellDates?a=yl(t.v,-1).toISOString():(t=Ql(t),t.t="n",a=""+(t.v=Zl(yl(t.v)))),typeof t.z>"u"&&(t.z=zs[14]);break;default:a=t.v;break}var l=jo("v",ja(a)),c={r:e},u=ym(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=jo("v",""+bD(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=hr("f",ja(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),hr("c",l,c)}function iBe(t,e,r,n){var a=[],s=[],o=is(t["!ref"]),l="",c,u="",d=[],h=0,p=0,g=t["!rows"],b=Array.isArray(t),w={r:u},_,N=-1;for(p=o.s.c;p<=o.e.c;++p)d[p]=Go(p);for(h=o.s.r;h<=o.e.r;++h){for(s=[],u=ko(h),p=o.s.c;p<=o.e.c;++p){c=d[p]+u;var A=b?(t[h]||[])[p]:t[c];A!==void 0&&(l=sBe(A,c,t,e))!=null&&s.push(l)}(s.length>0||g&&g[h])&&(w={r:u},g&&g[h]&&(_=g[h],_.hidden&&(w.hidden=1),N=-1,_.hpx?N=$3(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(w.ht=N,w.customHeight=1),_.level&&(w.outlineLevel=_.level)),a[a.length]=hr("row",s.join(""),w))}if(g)for(;h<g.length;++h)g&&g[h]&&(w={r:h+1},_=g[h],_.hidden&&(w.hidden=1),N=-1,_.hpx?N=$3(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(w.ht=N,w.customHeight=1),_.level&&(w.outlineLevel=_.level),a[a.length]=hr("row","",w));return a.join("")}function Wie(t,e,r,n){var a=[Ai,hr("worksheet",null,{xmlns:xv[0],"xmlns:r":eo.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=is(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=_i(d)}n||(n={}),c["!comments"]=[];var h=[];ZFe(c,r,t,e,a),a[a.length]=hr("dimension",null,{ref:u}),a[a.length]=aBe(c,e,t,r),e.sheetFormat&&(a[a.length]=hr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=rBe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=iBe(c,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=eBe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=nBe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=YFe(c["!merges"]));var p=-1,g,b=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(w){w[1].Target&&(g={ref:w[0]},w[1].Target.charAt(0)!="#"&&(b=_a(n,-1,ja(w[1].Target).replace(/#.*$/,""),ra.HLINK),g["r:id"]="rId"+b),(p=w[1].Target.indexOf("#"))>-1&&(g.location=ja(w[1].Target.slice(p+1))),w[1].Tooltip&&(g.tooltip=ja(w[1].Tooltip)),a[a.length]=hr("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=tBe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=jo("ignoredErrors",hr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=_a(n,-1,"../drawings/drawing"+(t+1)+".xml",ra.DRAW),a[a.length]=hr("drawing",null,{"r:id":"rId"+b}),c["!drawing"]=h),c["!comments"].length>0&&(b=_a(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",ra.VML),a[a.length]=hr("legacyDrawing",null,{"r:id":"rId"+b}),c["!legacy"]=b),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function oBe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function lBe(t,e,r){var n=Pt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=$3(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,p=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ca(u)];b&&(h<0&&(h=g),p=g)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,p))}var w=n.l;return n.l=c,n.write_shift(4,l),n.l=w,n.length>n.l?n.slice(0,n.l):n}function cBe(t,e,r,n){var a=lBe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&tr(t,0,a)}var uBe=bg,dBe=bv;function fBe(){}function hBe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=NMe(t),r}function mBe(t,e,r){r==null&&(r=Pt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return B3({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),lie(t,r),r.slice(0,r.l)}function pBe(t){var e=Pu(t);return[e]}function gBe(t,e,r){return r==null&&(r=Pt(8)),gg(e,r)}function xBe(t){var e=xg(t);return[e]}function vBe(t,e,r){return r==null&&(r=Pt(4)),vg(e,r)}function bBe(t){var e=Pu(t),r=t.read_shift(1);return[e,r,"b"]}function yBe(t,e,r){return r==null&&(r=Pt(9)),gg(e,r),r.write_shift(1,t.v?1:0),r}function wBe(t){var e=xg(t),r=t.read_shift(1);return[e,r,"b"]}function _Be(t,e,r){return r==null&&(r=Pt(5)),vg(e,r),r.write_shift(1,t.v?1:0),r}function NBe(t){var e=Pu(t),r=t.read_shift(1);return[e,r,"e"]}function EBe(t,e,r){return r==null&&(r=Pt(9)),gg(e,r),r.write_shift(1,t.v),r}function ABe(t){var e=xg(t),r=t.read_shift(1);return[e,r,"e"]}function SBe(t,e,r){return r==null&&(r=Pt(8)),vg(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function jBe(t){var e=Pu(t),r=t.read_shift(4);return[e,r,"s"]}function TBe(t,e,r){return r==null&&(r=Pt(12)),gg(e,r),r.write_shift(4,e.v),r}function CBe(t){var e=xg(t),r=t.read_shift(4);return[e,r,"s"]}function kBe(t,e,r){return r==null&&(r=Pt(8)),vg(e,r),r.write_shift(4,e.v),r}function IBe(t){var e=Pu(t),r=yv(t);return[e,r,"n"]}function OBe(t,e,r){return r==null&&(r=Pt(16)),gg(e,r),qp(t.v,r),r}function PBe(t){var e=xg(t),r=yv(t);return[e,r,"n"]}function RBe(t,e,r){return r==null&&(r=Pt(12)),vg(e,r),qp(t.v,r),r}function DBe(t){var e=Pu(t),r=cie(t);return[e,r,"n"]}function MBe(t,e,r){return r==null&&(r=Pt(12)),gg(e,r),uie(t.v,r),r}function LBe(t){var e=xg(t),r=cie(t);return[e,r,"n"]}function FBe(t,e,r){return r==null&&(r=Pt(8)),vg(e,r),uie(t.v,r),r}function BBe(t){var e=Pu(t),r=dD(t);return[e,r,"is"]}function UBe(t){var e=Pu(t),r=Wo(t);return[e,r,"str"]}function zBe(t,e,r){return r==null&&(r=Pt(12+4*t.v.length)),gg(e,r),ro(t.v,r),r.length>r.l?r.slice(0,r.l):r}function VBe(t){var e=xg(t),r=Wo(t);return[e,r,"str"]}function $Be(t,e,r){return r==null&&(r=Pt(8+4*t.v.length)),vg(e,r),ro(t.v,r),r.length>r.l?r.slice(0,r.l):r}function HBe(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=vS(t,n-t.l,r);o[3]=Lx(l,null,a,r.supbooks,r)}else t.l=n;return o}function qBe(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=vS(t,n-t.l,r);o[3]=Lx(l,null,a,r.supbooks,r)}else t.l=n;return o}function GBe(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=yv(t),o=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=vS(t,n-t.l,r);o[3]=Lx(l,null,a,r.supbooks,r)}else t.l=n;return o}function WBe(t,e,r){var n=t.l+e,a=Pu(t);a.r=r["!row"];var s=Wo(t),o=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=vS(t,n-t.l,r);o[3]=Lx(l,null,a,r.supbooks,r)}else t.l=n;return o}var KBe=bg,XBe=bv;function YBe(t,e){return e==null&&(e=Pt(4)),e.write_shift(4,t),e}function ZBe(t,e){var r=t.l+e,n=bg(t),a=fD(t),s=Wo(t),o=Wo(t),l=Wo(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function QBe(t,e){var r=Pt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));bv({s:to(t[0]),e:to(t[0])},r),hD("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return ro(a||"",r),ro(t[1].Tooltip||"",r),ro("",r),r.slice(0,r.l)}function JBe(){}function eUe(t,e,r){var n=t.l+e,a=die(t),s=t.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=VFe(t,n-t.l,r);o[1]=l}else t.l=n;return o}function tUe(t,e,r){var n=t.l+e,a=bg(t),s=[a];if(r.cellFormula){var o=HFe(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function rUe(t,e,r){r==null&&(r=Pt(18));var n=bS(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Kie=["left","right","top","bottom","header","footer"];function nUe(t){var e={};return Kie.forEach(function(r){e[r]=yv(t)}),e}function aUe(t,e){return e==null&&(e=Pt(6*8)),Gie(t),Kie.forEach(function(r){qp(t[r],e)}),e}function sUe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function iUe(t,e,r){r==null&&(r=Pt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function oUe(t){var e=Pt(24);return e.write_shift(4,4),e.write_shift(4,1),bv(t,e),e}function lUe(t,e){return e==null&&(e=Pt(16*4+2)),e.write_shift(2,t.password?Cie(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function cUe(){}function uUe(){}function dUe(t,e,r,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=Ql(e),e.z=e.z||zs[14],e.v=Zl(yl(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=ym(a.cellXfs,e,a),e.l&&s["!links"].push([Ca(c),e.l]),e.c&&s["!comments"].push([Ca(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=bD(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,o?tr(t,18,kBe(e,c)):tr(t,7,TBe(e,c))):(c.t="str",o?tr(t,17,$Be(e,c)):tr(t,6,zBe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?tr(t,13,FBe(e,c)):tr(t,2,MBe(e,c)):o?tr(t,16,RBe(e,c)):tr(t,5,OBe(e,c)),!0;case"b":return c.t="b",o?tr(t,15,_Be(e,c)):tr(t,4,yBe(e,c)),!0;case"e":return c.t="e",o?tr(t,14,SBe(e,c)):tr(t,3,EBe(e,c)),!0}return o?tr(t,12,vBe(e,c)):tr(t,1,gBe(e,c)),!0}function fUe(t,e,r,n){var a=is(e["!ref"]||"A1"),s,o="",l=[];tr(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=ko(d),cBe(t,e,a,d);var h=!1;if(d<=a.e.r)for(var p=a.s.c;p<=a.e.c;++p){d===a.s.r&&(l[p]=Go(p)),s=l[p]+o;var g=c?(e[d]||[])[p]:e[s];if(!g){h=!1;continue}h=dUe(t,g,d,p,n,e,h)}}tr(t,146)}function hUe(t,e){!e||!e["!merges"]||(tr(t,177,YBe(e["!merges"].length)),e["!merges"].forEach(function(r){tr(t,176,XBe(r))}),tr(t,178))}function mUe(t,e){!e||!e["!cols"]||(tr(t,390),e["!cols"].forEach(function(r,n){r&&tr(t,60,rUe(n,r))}),tr(t,391))}function pUe(t,e){!e||!e["!ref"]||(tr(t,648),tr(t,649,oUe(is(e["!ref"]))),tr(t,650))}function gUe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=_a(r,-1,n[1].Target.replace(/#.*$/,""),ra.HLINK);tr(t,494,QBe(n,a))}}),delete e["!links"]}function xUe(t,e,r,n){if(e["!comments"].length>0){var a=_a(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ra.VML);tr(t,551,hD("rId"+a)),e["!legacy"]=a}}function vUe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:_i(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=zc(s);l.s.r==l.e.r&&(l.e.r=zc(e["!ref"]).e.r,s=_i(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),tr(t,161,bv(is(s))),tr(t,162)}}function bUe(t,e,r){tr(t,133),tr(t,137,iUe(e,r)),tr(t,138),tr(t,134)}function yUe(t,e){e["!protect"]&&tr(t,535,lUe(e["!protect"]))}function wUe(t,e,r,n){var a=Kl(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=is(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],tr(a,129),(r.vbaraw||o["!outline"])&&tr(a,147,mBe(l,o["!outline"])),tr(a,148,dBe(c)),bUe(a,o,r.Workbook),mUe(a,o),fUe(a,o,t,e),yUe(a,o),vUe(a,o,r,t),hUe(a,o),gUe(a,o,n),o["!margins"]&&tr(a,476,aUe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&pUe(a,o),xUe(a,o,t,n),tr(a,130),a.end()}function _Ue(t,e){t.l+=10;var r=Wo(t);return{name:r}}var NUe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function EUe(t){return!t.Workbook||!t.Workbook.WBProps?"false":tMe(t.Workbook.WBProps.date1904)?"true":"false"}var AUe="][*?/\\".split("");function Xie(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return AUe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function SUe(t,e,r){t.forEach(function(n,a){Xie(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function jUe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];SUe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)XFe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function Yie(t){var e=[Ai];e[e.length]=hr("workbook",null,{xmlns:xv[0],"xmlns:r":eo.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(NUe.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=hr("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:ja(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=hr("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=hr("definedName",ja(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function TUe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=J8(t),r.name=Wo(t),r}function CUe(t,e){return e||(e=Pt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),hD(t.strRelID,e),ro(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function kUe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?Wo(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function IUe(t,e){e||(e=Pt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),lie(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function OUe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=EMe(t),o=$Fe(t,0,r),l=fD(t);t.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function PUe(t,e){tr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};tr(t,156,CUe(a))}tr(t,144)}function RUe(t,e){e||(e=Pt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return ro("SheetJS",e),ro(I3.version,e),ro(I3.version,e),ro("7262",e),e.length>e.l?e.slice(0,e.l):e}function DUe(t,e){e||(e=Pt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function MUe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(tr(t,135),tr(t,158,DUe(a)),tr(t,136))}}function LUe(t,e){var r=Kl();return tr(r,131),tr(r,128,RUe()),tr(r,153,IUe(t.Workbook&&t.Workbook.WBProps||null)),MUe(r,t),PUe(r,t),tr(r,132),r.end()}function FUe(t,e,r){return(e.slice(-4)===".bin"?LUe:Yie)(t)}function BUe(t,e,r,n,a){return(e.slice(-4)===".bin"?wUe:Wie)(t,r,n,a)}function UUe(t,e,r){return(e.slice(-4)===".bin"?a9e:Oie)(t,r)}function zUe(t,e,r){return(e.slice(-4)===".bin"?ILe:Tie)(t,r)}function VUe(t,e,r){return(e.slice(-4)===".bin"?y9e:Lie)(t)}function $Ue(t){return(t.slice(-4)===".bin"?f9e:Die)()}function HUe(t,e){var r=[];return t.Props&&r.push(UMe(t.Props,e)),t.Custprops&&r.push(zMe(t.Props,t.Custprops)),r.join("")}function qUe(){return""}function GUe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(hr("NumberFormat",null,{"ss:Format":ja(zs[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(hr("Style",s.join(""),o))}),hr("Styles",r.join(""))}function Zie(t){return hr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+xD(t.Ref,{r:0,c:0})})}function WUe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Zie(a)))}return hr("Names",r.join(""))}function KUe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(Zie(l)))}return s.join("")}function XUe(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(hr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(hr("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(hr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(hr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(jo("ProtectContents","True")),t["!protect"].objects&&a.push(jo("ProtectObjects","True")),t["!protect"].scenarios&&a.push(jo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(jo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(jo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":hr("WorksheetOptions",a.join(""),{xmlns:_c.x})}function YUe(t){return t.map(function(e){var r=eMe(e.t||""),n=hr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return hr("Comment",n,{"ss:Author":e.a})}).join("")}function ZUe(t,e,r,n,a,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+ja(xD(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=to(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=ja(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=ja(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",p=String(t.v);break;case"b":h="Boolean",p=t.v?"1":"0";break;case"e":h="Error",p=Rw[t.v];break;case"d":h="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||zs[14]);break;case"s":h="String",p=JDe(t.v||"");break}var g=ym(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+g),l["ss:Index"]=o.c+1;var b=t.v!=null?p:"",w=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(w+=YUe(t.c)),hr("Cell",w,l)}function QUe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Iie(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function JUe(t,e,r,n){if(!t["!ref"])return"";var a=is(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(_,N){pD(_);var A=!!_.width,j=bS(N,_),P={"ss:Index":N+1};A&&(P["ss:Width"]=z3(j.width)),_.hidden&&(P["ss:Hidden"]="1"),l.push(hr("Column",null,P))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[QUe(u,(t["!rows"]||[])[u])],h=a.s.c;h<=a.e.c;++h){var p=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>u)&&!(s[o].e.c<h)&&!(s[o].e.r<u)){(s[o].s.c!=h||s[o].s.r!=u)&&(p=!0);break}if(!p){var g={r:u,c:h},b=Ca(g),w=c?(t[u]||[])[h]:t[b];d.push(ZUe(w,b,t,e,r,n,g))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function eze(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],o=s?KUe(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?JUe(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(XUe(s,e,t,r)),n.join("")}function tze(t,e){e||(e={}),t.SSF||(t.SSF=Ql(zs)),t.SSF&&(mS(),hS(t.SSF),e.revssf=pS(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],ym(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(HUe(t,e)),r.push(qUe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(hr("Worksheet",eze(n,e,t),{"ss:Name":ja(t.SheetNames[n])}));return r[2]=GUe(t,e),r[3]=WUe(t),Ai+hr("Workbook",r.join(""),{xmlns:_c.ss,"xmlns:o":_c.o,"xmlns:x":_c.x,"xmlns:ss":_c.ss,"xmlns:dt":_c.dt,"xmlns:html":_c.html})}var ST={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function rze(t,e){var r=[],n=[],a=[],s=0,o,l=q$(aH,"n"),c=q$(sH,"n");if(t.Props)for(o=Io(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=Io(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)wie.indexOf(a[s][0])>-1||vie.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Ra.utils.cfb_add(e,"/SummaryInformation",uH(n,ST.SI,c,sH)),(r.length||u.length)&&Ra.utils.cfb_add(e,"/DocumentSummaryInformation",uH(r,ST.DSI,l,aH,u.length?u:null,ST.UDI))}function nze(t,e){var r=e||{},n=Ra.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Ra.utils.cfb_add(n,a,Qie(t,r)),r.biff==8&&(t.Props||t.Custprops)&&rze(t,n),r.biff==8&&t.vbaraw&&w9e(n,Ra.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var aze={0:{f:oBe},1:{f:pBe},2:{f:DBe},3:{f:NBe},4:{f:bBe},5:{f:IBe},6:{f:UBe},7:{f:jBe},8:{f:WBe},9:{f:GBe},10:{f:HBe},11:{f:qBe},12:{f:xBe},13:{f:LBe},14:{f:ABe},15:{f:wBe},16:{f:PBe},17:{f:VBe},18:{f:CBe},19:{f:dD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:OUe},40:{},42:{},43:{f:ULe},44:{f:FLe},45:{f:$Le},46:{f:qLe},47:{f:HLe},48:{},49:{f:xMe},50:{},51:{f:o9e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:vLe},62:{f:BBe},63:{f:h9e},64:{f:cUe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Yd,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:sUe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:hBe},148:{f:uBe,p:16},151:{f:JBe},152:{},153:{f:kUe},154:{},155:{},156:{f:TUe},157:{},158:{},159:{T:1,f:TLe},160:{T:-1},161:{T:1,f:bg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:KBe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:s9e},336:{T:-1},337:{f:u9e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:J8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:fLe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:eUe},427:{f:tUe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:nUe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:fBe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:ZBe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:J8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:v9e},633:{T:1},634:{T:-1},635:{T:1,f:g9e},636:{T:-1},637:{f:wMe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:_Ue},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:uUe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function pr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&lD(r)&&t.push(r)}}function sze(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return pr(t,e,r,a);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function Mw(t,e,r){return t||(t=Pt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function ize(t,e,r,n){var a=Pt(9);return Mw(a,t,e),Nie(r,n||"b",a),a}function oze(t,e,r){var n=Pt(8+2*r.length);return Mw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function lze(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Zl(yl(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?pr(t,2,_Le(r,n,a)):pr(t,3,wLe(r,n,a));return;case"b":case"e":pr(t,5,ize(r,n,e.v,e.t));return;case"s":case"str":pr(t,4,oze(r,n,(e.v||"").slice(0,255)));return}pr(t,1,Mw(null,r,n))}function cze(t,e,r,n){var a=Array.isArray(e),s=is(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=_i(s)}for(var u=s.s.r;u<=s.e.r;++u){l=ko(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Go(d)),o=c[d]+l;var h=a?(e[u]||[])[d]:e[o];h&&lze(t,h,u,d)}}}function uze(t,e){for(var r=e||{},n=Kl(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return pr(n,r.biff==4?1033:r.biff==3?521:9,mD(t,16,r)),cze(n,t.Sheets[t.SheetNames[a]],a,r),pr(n,10),n.end()}function dze(t,e,r){pr(t,49,aLe({sz:12,name:"Arial"},r))}function fze(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&pr(t,1054,oLe(a,e[a],r))})}function hze(t,e){var r=Pt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),pr(t,2151,r),r=Pt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Sie(is(e["!ref"]||"A1"),r),r.write_shift(4,4),pr(t,2152,r)}function mze(t,e){for(var r=0;r<16;++r)pr(t,224,fH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){pr(t,224,fH(n,0,e))})}function pze(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];pr(t,440,pLe(n)),n[1].Tooltip&&pr(t,2048,gLe(n))}delete e["!links"]}function gze(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&pr(t,125,bLe(bS(a,n),a))})}}function xze(t,e,r,n,a){var s=16+ym(a.cellXfs,e,a);if(e.v==null&&!e.bf){pr(t,513,Gp(r,n,s));return}if(e.bf)pr(t,6,zFe(e,r,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Zl(yl(e.v)):e.v;pr(t,515,dLe(r,n,o,s));break;case"b":case"e":pr(t,517,uLe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=bD(a.Strings,e.v,a.revStrings);pr(t,253,sLe(r,n,l,s))}else pr(t,516,iLe(r,n,(e.v||"").slice(0,255),s,a));break;default:pr(t,513,Gp(r,n,s))}}function vze(t,e,r){var n=Kl(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,h="",p=[],g=is(s["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}pr(n,2057,mD(r,16,e)),pr(n,13,ou(1)),pr(n,12,ou(100)),pr(n,15,ul(!0)),pr(n,17,ul(!1)),pr(n,16,qp(.001)),pr(n,95,ul(!0)),pr(n,42,ul(!1)),pr(n,43,ul(!1)),pr(n,130,ou(1)),pr(n,128,cLe()),pr(n,131,ul(!1)),pr(n,132,ul(!1)),u&&gze(n,s["!cols"]),pr(n,512,lLe(g,e)),u&&(s["!links"]=[]);for(var w=g.s.r;w<=g.e.r;++w){h=ko(w);for(var _=g.s.c;_<=g.e.c;++_){w===g.s.r&&(p[_]=Go(_)),d=p[_]+h;var N=c?(s[w]||[])[_]:s[d];N&&(xze(n,N,w,_,e),u&&N.l&&s["!links"].push([d,N.l]))}}var A=l.CodeName||l.name||a;return u&&pr(n,574,nLe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&pr(n,229,mLe(s["!merges"])),u&&pze(n,s),pr(n,442,Aie(A)),u&&hze(n,s),pr(n,10),n.end()}function bze(t,e,r){var n=Kl(),a=(t||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(pr(n,2057,mD(t,5,r)),r.bookType=="xla"&&pr(n,135),pr(n,225,l?ou(1200):null),pr(n,193,HMe(2)),c&&pr(n,191),c&&pr(n,192),pr(n,226),pr(n,92,JMe("SheetJS",r)),pr(n,66,ou(l?1200:1252)),l&&pr(n,353,ou(0)),l&&pr(n,448),pr(n,317,yLe(t.SheetNames.length)),l&&t.vbaraw&&pr(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";pr(n,442,Aie(u))}pr(n,156,ou(17)),pr(n,25,ul(!1)),pr(n,18,ul(!1)),pr(n,19,ou(0)),l&&pr(n,431,ul(!1)),l&&pr(n,444,ou(0)),pr(n,61,rLe()),pr(n,64,ul(!1)),pr(n,141,ou(0)),pr(n,34,ul(EUe(t)=="true")),pr(n,14,ul(!0)),l&&pr(n,439,ul(!1)),pr(n,218,ou(0)),dze(n,t,r),fze(n,t.SSF,r),mze(n,r),l&&pr(n,352,ul(!1));var d=n.end(),h=Kl();l&&pr(h,140,xLe()),l&&r.Strings&&sze(h,252,tLe(r.Strings)),pr(h,10);var p=h.end(),g=Kl(),b=0,w=0;for(w=0;w<t.SheetNames.length;++w)b+=(l?12:11)+(l?2:1)*t.SheetNames[w].length;var _=d.length+b+p.length;for(w=0;w<t.SheetNames.length;++w){var N=s[w]||{};pr(g,133,eLe({pos:_,hs:N.Hidden||0,dt:0,name:t.SheetNames[w]},r)),_+=e[w].length}var A=g.end();if(b!=A.length)throw new Error("BS8 "+b+" != "+A.length);var j=[];return d.length&&j.push(d),A.length&&j.push(A),p.length&&j.push(p),So(j)}function yze(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Ql(zs)),t&&t.SSF&&(mS(),hS(t.SSF),r.revssf=pS(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,yD(r),r.cellXfs=[],ym(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=vze(a,r,t);return n.unshift(bze(t,n,r)),So(n)}function Qie(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=zc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return yze(t,e);case 4:case 3:case 2:return uze(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function wze(t,e,r,n){for(var a=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Ca({r,c:o}),h=n.dense?(t[r]||[])[o]:t[d],p=h&&h.v!=null&&(h.h||QDe(h.w||(ph(h),h.w)||""))||"",g={};l>1&&(g.rowspan=l),c>1&&(g.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+h.l.Target+'">'+p+"</a>")),g.id=(n.id||"sjs")+"-"+d,s.push(hr("td",p,g))}}var b="<tr>";return b+s.join("")+"</tr>"}var _ze='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Nze="</body></html>";function Eze(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Jie(t,e){var r=e||{},n=r.header!=null?r.header:_ze,a=r.footer!=null?r.footer:Nze,s=[n],o=zc(t["!ref"]);r.dense=Array.isArray(t),s.push(Eze(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(wze(t,o,l,r));return s.push("</table>"+a),s.join("")}function eoe(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?to(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=zc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var h=[],p=0,g=t["!rows"]||(t["!rows"]=[]),b=0,w=0,_=0,N=0,A=0,j=0;for(t["!cols"]||(t["!cols"]=[]);b<l.length&&w<c;++b){var P=l[b];if(bH(P)){if(n.display)continue;g[w]={hidden:!0}}var U=P.children;for(_=N=0;_<U.length;++_){var G=U[_];if(!(n.display&&bH(G))){var O=G.hasAttribute("data-v")?G.getAttribute("data-v"):G.hasAttribute("v")?G.getAttribute("v"):rMe(G.innerHTML),D=G.getAttribute("data-z")||G.getAttribute("z");for(p=0;p<h.length;++p){var I=h[p];I.s.c==N+s&&I.s.r<w+a&&w+a<=I.e.r&&(N=I.e.c+1-s,p=-1)}j=+G.getAttribute("colspan")||1,((A=+G.getAttribute("rowspan")||1)>1||j>1)&&h.push({s:{r:w+a,c:N+s},e:{r:w+a+(A||1)-1,c:N+s+(j||1)-1}});var V={t:"s",v:O},R=G.getAttribute("data-t")||G.getAttribute("t")||"";O!=null&&(O.length==0?V.t=R||"z":n.raw||O.trim().length==0||R=="s"||(O==="TRUE"?V={t:"b",v:!0}:O==="FALSE"?V={t:"b",v:!1}:isNaN(Zf(O))?isNaN(py(O).getDate())||(V={t:"d",v:yl(O)},n.cellDates||(V={t:"n",v:Zl(V.v)}),V.z=n.dateNF||zs[14]):V={t:"n",v:Zf(O)})),V.z===void 0&&D!=null&&(V.z=D);var B="",F=G.getElementsByTagName("A");if(F&&F.length)for(var ee=0;ee<F.length&&!(F[ee].hasAttribute("href")&&(B=F[ee].getAttribute("href"),B.charAt(0)!="#"));++ee);B&&B.charAt(0)!="#"&&(V.l={Target:B}),n.dense?(t[w+a]||(t[w+a]=[]),t[w+a][N+s]=V):t[Ca({c:N+s,r:w+a})]=V,u.e.c<N+s&&(u.e.c=N+s),N+=j}}++w}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,w-1+a),t["!ref"]=_i(u),w>=c&&(t["!fullref"]=_i((u.e.r=l.length-b+w-1+a,u))),t}function toe(t,e){var r=e||{},n=r.dense?[]:{};return eoe(n,t,e)}function Aze(t,e){return pg(toe(t,e),e)}function bH(t){var e="",r=Sze(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Sze(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var jze=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+xy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ai+e}}(),yH=function(){var t=function(s){return ja(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+ja(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,h=zc(s["!ref"]||"A1"),p=s["!merges"]||[],g=0,b=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var w="",_=s["!rows"]||[];for(u=0;u<h.s.r;++u)w=_[u]?' table:style-name="ro'+_[u].ods+'"':"",c.push("        <table:table-row"+w+`></table:table-row>
`);for(;u<=h.e.r;++u){for(w=_[u]?' table:style-name="ro'+_[u].ods+'"':"",c.push("        <table:table-row"+w+`>
`),d=0;d<h.s.c;++d)c.push(e);for(;d<=h.e.c;++d){var N=!1,A={},j="";for(g=0;g!=p.length;++g)if(!(p[g].s.c>d)&&!(p[g].s.r>u)&&!(p[g].e.c<d)&&!(p[g].e.r<u)){(p[g].s.c!=d||p[g].s.r!=u)&&(N=!0),A["table:number-columns-spanned"]=p[g].e.c-p[g].s.c+1,A["table:number-rows-spanned"]=p[g].e.r-p[g].s.r+1;break}if(N){c.push(r);continue}var P=Ca({r:u,c:d}),U=b?(s[u]||[])[d]:s[P];if(U&&U.f&&(A["table:formula"]=ja(WFe(U.f)),U.F&&U.F.slice(0,P.length)==P)){var G=zc(U.F);A["table:number-matrix-columns-spanned"]=G.e.c-G.s.c+1,A["table:number-matrix-rows-spanned"]=G.e.r-G.s.r+1}if(!U){c.push(e);continue}switch(U.t){case"b":j=U.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=U.v?"true":"false";break;case"n":j=U.w||String(U.v||0),A["office:value-type"]="float",A["office:value"]=U.v||0;break;case"s":case"str":j=U.v==null?"":U.v,A["office:value-type"]="string";break;case"d":j=U.w||yl(U.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=yl(U.v).toISOString(),A["table:style-name"]="ce1";break;default:c.push(e);continue}var O=t(j);if(U.l&&U.l.Target){var D=U.l.Target;D=D.charAt(0)=="#"?"#"+KFe(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),O=hr("text:a",O,{"xlink:href":D.replace(/&/g,"&amp;")})}c.push("          "+hr("table:table-cell",hr("text:p",O,{}),A)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;pD(h),h.ods=l;var p=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var h=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Ai],u=xy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=xy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(gie().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(n(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function roe(t,e){if(e.bookType=="fods")return yH(t,e);var r=aD(),n="",a=[],s=[];return n="mimetype",kn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",kn(r,n,yH(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",kn(r,n,jze(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",kn(r,n,Ai+gie()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",kn(r,n,BMe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",kn(r,n,LMe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function H3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Tze(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ju(gy(t))}function Cze(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function tm(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function kze(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function vy(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function ya(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function W1(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Oi(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=vy(t,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=vy(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function go(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(ya(n*8+a.type)),a.type==2&&e.push(ya(a.data.length)),e.push(a.data))})}),tm(e)}function Hu(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=vy(t,n),s=Oi(t.slice(n[0],n[0]+a));n[0]+=a;var o={id:W1(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Oi(l.data),u=W1(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=W1(s[3][0].data)>>>0>0),r.push(o)}return r}function Lg(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:ya(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ya(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:ya(o.data.length)}],n[2].push({data:go(o.meta),type:2})});var s=go(n);e.push(ya(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),tm(e)}function Ize(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=vy(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[tm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=tm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function qu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(Ize(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return tm(e)}function Fg(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=ya(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return tm(e)}function jT(t,e){var r=new Uint8Array(32),n=H3(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,kze(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function TT(t,e){var r=new Uint8Array(32),n=H3(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function Kh(t){var e=Oi(t);return vy(e[1][0].data)}function Oze(t,e,r){var n,a,s,o;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&W1(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=H3(t[7][0].data),d=0,h=[],p=H3(t[4][0].data),g=0,b=[],w=0;w<e.length;++w){if(e[w]==null){u.setUint16(w*2,65535,!0),p.setUint16(w*2,65535);continue}u.setUint16(w*2,d,!0),p.setUint16(w*2,g,!0);var _,N;switch(typeof e[w]){case"string":_=jT({t:"s",v:e[w]},r),N=TT({t:"s",v:e[w]},r);break;case"number":_=jT({t:"n",v:e[w]},r),N=TT({t:"n",v:e[w]},r);break;case"boolean":_=jT({t:"b",v:e[w]},r),N=TT({t:"b",v:e[w]},r);break;default:throw new Error("Unsupported value "+e[w])}h.push(_),d+=_.length,b.push(N),g+=N.length,++c}for(t[2][0].data=ya(c);w<t[7][0].data.length/2;++w)u.setUint16(w*2,65535,!0),p.setUint16(w*2,65535,!0);return t[6][0].data=tm(h),t[3][0].data=tm(b),c}function Pze(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=zc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(_i(n)));var s=q3(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(Y){return Y.forEach(function(X){typeof X=="string"&&o.push(X)})});var l={},c=[],u=Ra.read(e.numbers,{type:"base64"});u.FileIndex.map(function(Y,X){return[Y,u.FullPaths[X]]}).forEach(function(Y){var X=Y[0],re=Y[1];if(X.type==2&&X.name.match(/\.iwa/)){var se=X.content,ke=qu(se),Ce=Hu(ke);Ce.forEach(function(xe){c.push(xe.id),l[xe.id]={deps:[],location:re,type:W1(xe.messages[0].meta[1][0].data)}})}}),c.sort(function(Y,X){return Y-X});var d=c.filter(function(Y){return Y>1}).map(function(Y){return[Y,ya(Y)]});u.FileIndex.map(function(Y,X){return[Y,u.FullPaths[X]]}).forEach(function(Y){var X=Y[0];if(Y[1],!!X.name.match(/\.iwa/)){var re=Hu(qu(X.content));re.forEach(function(se){se.messages.forEach(function(ke){d.forEach(function(Ce){se.messages.some(function(xe){return W1(xe.meta[1][0].data)!=11006&&Cze(xe.data,Ce[1])})&&l[Ce[0]].deps.push(se.id)})})})}});for(var h=Ra.find(u,l[1].location),p=Hu(qu(h.content)),g,b=0;b<p.length;++b){var w=p[b];w.id==1&&(g=w)}var _=Kh(Oi(g.messages[0].data)[1][0].data);for(h=Ra.find(u,l[_].location),p=Hu(qu(h.content)),b=0;b<p.length;++b)w=p[b],w.id==_&&(g=w);for(_=Kh(Oi(g.messages[0].data)[2][0].data),h=Ra.find(u,l[_].location),p=Hu(qu(h.content)),b=0;b<p.length;++b)w=p[b],w.id==_&&(g=w);for(_=Kh(Oi(g.messages[0].data)[2][0].data),h=Ra.find(u,l[_].location),p=Hu(qu(h.content)),b=0;b<p.length;++b)w=p[b],w.id==_&&(g=w);var N=Oi(g.messages[0].data);{N[6][0].data=ya(n.e.r+1),N[7][0].data=ya(n.e.c+1);var A=Kh(N[46][0].data),j=Ra.find(u,l[A].location),P=Hu(qu(j.content));{for(var U=0;U<P.length&&P[U].id!=A;++U);if(P[U].id!=A)throw"Bad ColumnRowUIDMapArchive";var G=Oi(P[U].messages[0].data);G[1]=[],G[2]=[],G[3]=[];for(var O=0;O<=n.e.c;++O){var D=[];D[1]=D[2]=[{type:0,data:ya(O+420690)}],G[1].push({type:2,data:go(D)}),G[2].push({type:0,data:ya(O)}),G[3].push({type:0,data:ya(O)})}G[4]=[],G[5]=[],G[6]=[];for(var I=0;I<=n.e.r;++I)D=[],D[1]=D[2]=[{type:0,data:ya(I+726270)}],G[4].push({type:2,data:go(D)}),G[5].push({type:0,data:ya(I)}),G[6].push({type:0,data:ya(I)});P[U].messages[0].data=go(G)}j.content=Fg(Lg(P)),j.size=j.content.length,delete N[46];var V=Oi(N[4][0].data);{V[7][0].data=ya(n.e.r+1);var R=Oi(V[1][0].data),B=Kh(R[2][0].data);j=Ra.find(u,l[B].location),P=Hu(qu(j.content));{if(P[0].id!=B)throw"Bad HeaderStorageBucket";var F=Oi(P[0].messages[0].data);for(I=0;I<s.length;++I){var ee=Oi(F[2][0].data);ee[1][0].data=ya(I),ee[4][0].data=ya(s[I].length),F[2][I]={type:F[2][0].type,data:go(ee)}}P[0].messages[0].data=go(F)}j.content=Fg(Lg(P)),j.size=j.content.length;var Z=Kh(V[2][0].data);j=Ra.find(u,l[Z].location),P=Hu(qu(j.content));{if(P[0].id!=Z)throw"Bad HeaderStorageBucket";for(F=Oi(P[0].messages[0].data),O=0;O<=n.e.c;++O)ee=Oi(F[2][0].data),ee[1][0].data=ya(O),ee[4][0].data=ya(n.e.r+1),F[2][O]={type:F[2][0].type,data:go(ee)};P[0].messages[0].data=go(F)}j.content=Fg(Lg(P)),j.size=j.content.length;var ce=Kh(V[4][0].data);(function(){for(var Y=Ra.find(u,l[ce].location),X=Hu(qu(Y.content)),re,se=0;se<X.length;++se){var ke=X[se];ke.id==ce&&(re=ke)}var Ce=Oi(re.messages[0].data);{Ce[3]=[];var xe=[];o.forEach(function(Ue,Me){xe[1]=[{type:0,data:ya(Me)}],xe[2]=[{type:0,data:ya(1)}],xe[3]=[{type:2,data:Tze(Ue)}],Ce[3].push({type:2,data:go(xe)})})}re.messages[0].data=go(Ce);var Ie=Lg(X),He=Fg(Ie);Y.content=He,Y.size=Y.content.length})();var ne=Oi(V[3][0].data);{var ae=ne[1][0];delete ne[2];var me=Oi(ae.data);{var Ee=Kh(me[2][0].data);(function(){for(var Y=Ra.find(u,l[Ee].location),X=Hu(qu(Y.content)),re,se=0;se<X.length;++se){var ke=X[se];ke.id==Ee&&(re=ke)}var Ce=Oi(re.messages[0].data);{delete Ce[6],delete ne[7];var xe=new Uint8Array(Ce[5][0].data);Ce[5]=[];for(var Ie=0,He=0;He<=n.e.r;++He){var Ue=Oi(xe);Ie+=Oze(Ue,s[He],o),Ue[1][0].data=ya(He),Ce[5].push({data:go(Ue),type:2})}Ce[1]=[{type:0,data:ya(n.e.c+1)}],Ce[2]=[{type:0,data:ya(n.e.r+1)}],Ce[3]=[{type:0,data:ya(Ie)}],Ce[4]=[{type:0,data:ya(n.e.r+1)}]}re.messages[0].data=go(Ce);var Me=Lg(X),Be=Fg(Me);Y.content=Be,Y.size=Y.content.length})()}ae.data=go(me)}V[3][0].data=go(ne)}N[4][0].data=go(V)}g.messages[0].data=go(N);var ye=Lg(p),H=Fg(ye);return h.content=H,h.size=h.content.length,u}function Rze(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function yD(t){Rze([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Dze(t,e){return e.bookType=="ods"?roe(t,e):e.bookType=="numbers"?Pze(t,e):e.bookType=="xlsb"?Mze(t,e):Lze(t,e)}function Mze(t,e){A1=1024,t&&!t.SSF&&(t.SSF=Ql(zs)),t&&t.SSF&&(mS(),hS(t.SSF),e.revssf=pS(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,g2?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=Fie.indexOf(e.bookType)>-1,a=hie();yD(e=e||{});var s=aD(),o="",l=0;if(e.cellXfs=[],ym(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",kn(s,o,xie(t.Props,e)),a.coreprops.push(o),_a(e.rels,2,o,ra.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,kn(s,o,bie(t.Props)),a.extprops.push(o),_a(e.rels,3,o,ra.EXT_PROPS),t.Custprops!==t.Props&&Io(t.Custprops||{}).length>0&&(o="docProps/custom.xml",kn(s,o,yie(t.Custprops)),a.custprops.push(o),_a(e.rels,4,o,ra.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,kn(s,o,BUe(l-1,o,e,t,d)),a.sheets.push(o),_a(e.wbrels,-1,"worksheets/sheet"+l+"."+r,ra.WS[0])}if(h){var g=h["!comments"],b=!1,w="";g&&g.length>0&&(w="xl/comments"+l+"."+r,kn(s,w,VUe(g,w)),a.comments.push(w),_a(d,-1,"../comments"+l+"."+r,ra.CMNT),b=!0),h["!legacy"]&&b&&kn(s,"xl/drawings/vmlDrawing"+l+".vml",Mie(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&kn(s,pie(o),q1(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,kn(s,o,zUe(e.Strings,o,e)),a.strs.push(o),_a(e.wbrels,-1,"sharedStrings."+r,ra.SST)),o="xl/workbook."+r,kn(s,o,FUe(t,o)),a.workbooks.push(o),_a(e.rels,1,o,ra.WB),o="xl/theme/theme1.xml",kn(s,o,Rie(t.Themes,e)),a.themes.push(o),_a(e.wbrels,-1,"theme/theme1.xml",ra.THEME),o="xl/styles."+r,kn(s,o,UUe(t,o,e)),a.styles.push(o),_a(e.wbrels,-1,"styles."+r,ra.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",kn(s,o,t.vbaraw),a.vba.push(o),_a(e.wbrels,-1,"vbaProject.bin",ra.VBA)),o="xl/metadata."+r,kn(s,o,$Ue(o)),a.metadata.push(o),_a(e.wbrels,-1,"metadata."+r,ra.XLMETA),kn(s,"[Content_Types].xml",mie(a,e)),kn(s,"_rels/.rels",q1(e.rels)),kn(s,"xl/_rels/workbook."+r+".rels",q1(e.wbrels)),delete e.revssf,delete e.ssf,s}function Lze(t,e){A1=1024,t&&!t.SSF&&(t.SSF=Ql(zs)),t&&t.SSF&&(mS(),hS(t.SSF),e.revssf=pS(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,g2?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=Fie.indexOf(e.bookType)>-1,a=hie();yD(e=e||{});var s=aD(),o="",l=0;if(e.cellXfs=[],ym(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",kn(s,o,xie(t.Props,e)),a.coreprops.push(o),_a(e.rels,2,o,ra.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,kn(s,o,bie(t.Props)),a.extprops.push(o),_a(e.rels,3,o,ra.EXT_PROPS),t.Custprops!==t.Props&&Io(t.Custprops||{}).length>0&&(o="docProps/custom.xml",kn(s,o,yie(t.Custprops)),a.custprops.push(o),_a(e.rels,4,o,ra.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var h={"!id":{}},p=t.Sheets[t.SheetNames[l-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,kn(s,o,Wie(l-1,e,t,h)),a.sheets.push(o),_a(e.wbrels,-1,"worksheets/sheet"+l+"."+r,ra.WS[0])}if(p){var b=p["!comments"],w=!1,_="";if(b&&b.length>0){var N=!1;b.forEach(function(A){A[1].forEach(function(j){j.T==!0&&(N=!0)})}),N&&(_="xl/threadedComments/threadedComment"+l+"."+r,kn(s,_,m9e(b,d,e)),a.threadedcomments.push(_),_a(h,-1,"../threadedComments/threadedComment"+l+"."+r,ra.TCMNT)),_="xl/comments"+l+"."+r,kn(s,_,Lie(b)),a.comments.push(_),_a(h,-1,"../comments"+l+"."+r,ra.CMNT),w=!0}p["!legacy"]&&w&&kn(s,"xl/drawings/vmlDrawing"+l+".vml",Mie(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&kn(s,pie(o),q1(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,kn(s,o,Tie(e.Strings,e)),a.strs.push(o),_a(e.wbrels,-1,"sharedStrings."+r,ra.SST)),o="xl/workbook."+r,kn(s,o,Yie(t)),a.workbooks.push(o),_a(e.rels,1,o,ra.WB),o="xl/theme/theme1.xml",kn(s,o,Rie(t.Themes,e)),a.themes.push(o),_a(e.wbrels,-1,"theme/theme1.xml",ra.THEME),o="xl/styles."+r,kn(s,o,Oie(t,e)),a.styles.push(o),_a(e.wbrels,-1,"styles."+r,ra.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",kn(s,o,t.vbaraw),a.vba.push(o),_a(e.wbrels,-1,"vbaProject.bin",ra.VBA)),o="xl/metadata."+r,kn(s,o,Die()),a.metadata.push(o),_a(e.wbrels,-1,"metadata."+r,ra.XLMETA),d.length>1&&(o="xl/persons/person.xml",kn(s,o,p9e(d)),a.people.push(o),_a(e.wbrels,-1,"persons/person.xml",ra.PEOPLE)),kn(s,"[Content_Types].xml",mie(a,e)),kn(s,"_rels/.rels",q1(e.rels)),kn(s,"xl/_rels/workbook."+r+".rels",q1(e.wbrels)),delete e.revssf,delete e.ssf,s}function Fze(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=mh(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function noe(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Ow(e.file,Ra.write(t,{type:la?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ra.write(t,e)}function Bze(t,e){var r=Ql(e||{}),n=Dze(t,r);return Uze(n,r)}function Uze(t,e){var r={},n=la?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Ra.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(fS(a))}return e.password&&typeof encrypt_agile<"u"?noe(encrypt_agile(a,e.password),e):e.type==="file"?Ow(e.file,a):e.type=="string"?f2(a):a}function zze(t,e){var r=e||{},n=nze(t,r);return noe(n,r)}function _d(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return my(gy(n));case"binary":return gy(n);case"string":return t;case"file":return Ow(e.file,n,"utf8");case"buffer":return la?Th(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):_d(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Vze(t,e){switch(e.type){case"base64":return my(t);case"binary":return t;case"string":return t;case"file":return Ow(e.file,t,"binary");case"buffer":return la?Th(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function C5(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?my(r):e.type=="string"?f2(r):r;case"file":return Ow(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function aoe(t,e){gDe(),jUe(t);var r=Ql(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=aoe(t,r);return r.type="array",fS(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return _d(tze(t,r),r);case"slk":case"sylk":return _d(ELe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return _d(Jie(t.Sheets[t.SheetNames[a]],r),r);case"txt":return Vze(soe(t.Sheets[t.SheetNames[a]],r),r);case"csv":return _d(wD(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return _d(ALe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return C5(NLe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return _d(SLe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return _d(PLe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return _d(jie.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return _d(roe(t,r),r);case"wk1":return C5(hH.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return C5(hH.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),C5(Qie(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),zze(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Bze(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function $ze(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function Hze(t,e,r){var n={};return n.type="file",n.file=e,$ze(n),aoe(t,n)}function qze(t,e,r,n,a,s,o,l){var c=ko(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,p=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=o?t[r][g]:t[n[g]+c];if(b===void 0||b.t===void 0){if(u===void 0)continue;s[g]!=null&&(p[s[g]]=u);continue}var w=b.v;switch(b.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(s[g]!=null){if(w==null)if(b.t=="e"&&w===null)p[s[g]]=null;else if(u!==void 0)p[s[g]]=u;else if(d&&w===null)p[s[g]]=null;else continue;else p[s[g]]=d&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?w:ph(b,w,l);w!=null&&(h=!1)}}return{row:p,isempty:h}}function q3(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=is(d);break;case"number":c=is(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var h=ko(c.s.r),p=[],g=[],b=0,w=0,_=Array.isArray(t),N=c.s.r,A=0,j={};_&&!t[N]&&(t[N]=[]);var P=u.skipHidden&&t["!cols"]||[],U=u.skipHidden&&t["!rows"]||[];for(A=c.s.c;A<=c.e.c;++A)if(!(P[A]||{}).hidden)switch(p[A]=Go(A),r=_?t[N][A]:t[p[A]+h],n){case 1:s[A]=A-c.s.c;break;case 2:s[A]=p[A];break;case 3:s[A]=u.header[A-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=ph(r,null,u),w=j[o]||0,!w)j[o]=1;else{do l=o+"_"+w++;while(j[l]);j[o]=w,j[l]=1}s[A]=l}for(N=c.s.r+a;N<=c.e.r;++N)if(!(U[N]||{}).hidden){var G=qze(t,c,N,p,n,s,_,u);(G.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=G.row)}return g.length=b,g}var wH=/"/g;function Gze(t,e,r,n,a,s,o,l){for(var c=!0,u=[],d="",h=ko(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var g=l.dense?(t[r]||[])[p]:t[n[p]+h];if(g==null)d="";else if(g.v!=null){c=!1,d=""+(l.rawNumbers&&g.t=="n"?g.v:ph(g,null,l));for(var b=0,w=0;b!==d.length;++b)if((w=d.charCodeAt(b))===a||w===s||w===34||l.forceQuotes){d='"'+d.replace(wH,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(c=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(wH,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function wD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=is(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=a.s.c;b<=a.e.c;++b)(p[b]||{}).hidden||(h[b]=Go(b));for(var w=0,_=a.s.r;_<=a.e.r;++_)(g[_]||{}).hidden||(d=Gze(t,a,_,h,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((w++?l:"")+d)));return delete n.dense,r.join("")}function soe(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=wD(t,e);return r}function Wze(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=is(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)o[l]=Go(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=ko(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function ioe(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?to(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var h=is(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),o==-1&&(o=h.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var p=n.header||[],g=0;e.forEach(function(w,_){Io(w).forEach(function(N){(g=p.indexOf(N))==-1&&(p[g=p.length]=N);var A=w[N],j="z",P="",U=Ca({c:l+g,r:o+_+a});u=by(s,U),A&&typeof A=="object"&&!(A instanceof Date)?s[U]=A:(typeof A=="number"?j="n":typeof A=="boolean"?j="b":typeof A=="string"?j="s":A instanceof Date?(j="d",n.cellDates||(j="n",A=Zl(A)),P=n.dateNF||zs[14]):A===null&&n.nullError&&(j="e",A=0),u?(u.t=j,u.v=A,delete u.w,delete u.R,P&&(u.z=P)):s[U]=u={t:j,v:A},P&&(u.z=P))})}),d.e.c=Math.max(d.e.c,l+p.length-1);var b=ko(o);if(a)for(g=0;g<p.length;++g)s[Go(g+l)+b]={t:"s",v:p[g]};return s["!ref"]=_i(d),s}function Kze(t,e){return ioe(null,t,e)}function by(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=to(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?by(t,Ca(e)):by(t,Ca({r:e,c:r||0}))}function Xze(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Yze(){return{SheetNames:[],Sheets:{}}}function Zze(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Xie(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Qze(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=Xze(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Jze(t,e){return t.z=e,t}function ooe(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function eVe(t,e,r){return ooe(t,"#"+e,r)}function tVe(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function rVe(t,e,r,n){for(var a=typeof e!="string"?e:is(e),s=typeof e=="string"?e:_i(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=by(t,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var CT={encode_col:Go,encode_row:ko,encode_cell:Ca,encode_range:_i,decode_col:uD,decode_row:cD,split_cell:gMe,decode_cell:to,decode_range:zc,format_cell:ph,sheet_add_aoa:oie,sheet_add_json:ioe,sheet_add_dom:eoe,aoa_to_sheet:vv,json_to_sheet:Kze,table_to_sheet:toe,table_to_book:Aze,sheet_to_csv:wD,sheet_to_txt:soe,sheet_to_json:q3,sheet_to_html:Jie,sheet_to_formulae:Wze,sheet_to_row_object_array:q3,sheet_get_cell:by,book_new:Yze,book_append_sheet:Zze,book_set_sheet_visibility:Qze,cell_set_number_format:Jze,cell_set_hyperlink:ooe,cell_set_internal_link:eVe,cell_add_comment:tVe,sheet_set_array_formula:rVe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function Ea(t){"@babel/helpers - typeof";return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(t)}var ud=Uint8Array,Ic=Uint16Array,_D=Int32Array,ND=new ud([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ED=new ud([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_H=new ud([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),loe=function(t,e){for(var r=new Ic(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new _D(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},coe=loe(ND,2),nVe=coe.b,tI=coe.r;nVe[28]=258,tI[258]=28;var aVe=loe(ED,0),NH=aVe.r,rI=new Ic(32768);for(var rs=0;rs<32768;++rs){var Xh=(rs&43690)>>1|(rs&21845)<<1;Xh=(Xh&52428)>>2|(Xh&13107)<<2,Xh=(Xh&61680)>>4|(Xh&3855)<<4,rI[rs]=((Xh&65280)>>8|(Xh&255)<<8)>>1}var x2=function(t,e,r){for(var n=t.length,a=0,s=new Ic(e);a<n;++a)t[a]&&++s[t[a]-1];var o=new Ic(e);for(a=1;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Ic(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],h=o[t[a]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)l[rI[h]>>c]=u}else for(l=new Ic(n),a=0;a<n;++a)t[a]&&(l[a]=rI[o[t[a]-1]++]>>15-t[a]);return l},Wp=new ud(288);for(var rs=0;rs<144;++rs)Wp[rs]=8;for(var rs=144;rs<256;++rs)Wp[rs]=9;for(var rs=256;rs<280;++rs)Wp[rs]=7;for(var rs=280;rs<288;++rs)Wp[rs]=8;var G3=new ud(32);for(var rs=0;rs<32;++rs)G3[rs]=5;var sVe=x2(Wp,9,0),iVe=x2(G3,5,0),uoe=function(t){return(t+7)/8|0},oVe=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new ud(t.subarray(e,r))},vf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},ob=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},kT=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:foe,l:0};if(a==1){var o=new ud(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(U,G){return U.f-G.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[h].f?u++:h++],c=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var p=s[0].s,n=1;n<a;++n)s[n].s>p&&(p=s[n].s);var g=new Ic(p+1),b=nI(r[d-1],g,0);if(b>e){var n=0,w=0,_=b-e,N=1<<_;for(s.sort(function(G,O){return g[O.s]-g[G.s]||G.f-O.f});n<a;++n){var A=s[n].s;if(g[A]>e)w+=N-(1<<b-g[A]),g[A]=e;else break}for(w>>=_;w>0;){var j=s[n].s;g[j]<e?w-=1<<e-g[j]++-1:++n}for(;n>=0&&w;--n){var P=s[n].s;g[P]==e&&(--g[P],++w)}b=e}return{t:new ud(g),l:b}},nI=function(t,e,r){return t.s==-1?Math.max(nI(t.l,e,r+1),nI(t.r,e,r+1)):e[t.s]=r},EH=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Ic(++e),n=0,a=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},lb=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},doe=function(t,e,r){var n=r.length,a=uoe(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},AH=function(t,e,r,n,a,s,o,l,c,u,d){vf(e,d++,r),++a[256];for(var h=kT(a,15),p=h.t,g=h.l,b=kT(s,15),w=b.t,_=b.l,N=EH(p),A=N.c,j=N.n,P=EH(w),U=P.c,G=P.n,O=new Ic(19),D=0;D<A.length;++D)++O[A[D]&31];for(var D=0;D<U.length;++D)++O[U[D]&31];for(var I=kT(O,7),V=I.t,R=I.l,B=19;B>4&&!V[_H[B-1]];--B);var F=u+5<<3,ee=lb(a,Wp)+lb(s,G3)+o,Z=lb(a,p)+lb(s,w)+o+14+3*B+lb(O,V)+2*O[16]+3*O[17]+7*O[18];if(c>=0&&F<=ee&&F<=Z)return doe(e,d,t.subarray(c,c+u));var ce,ne,ae,me;if(vf(e,d,1+(Z<ee)),d+=2,Z<ee){ce=x2(p,g,0),ne=p,ae=x2(w,_,0),me=w;var Ee=x2(V,R,0);vf(e,d,j-257),vf(e,d+5,G-1),vf(e,d+10,B-4),d+=14;for(var D=0;D<B;++D)vf(e,d+3*D,V[_H[D]]);d+=3*B;for(var ye=[A,U],H=0;H<2;++H)for(var Y=ye[H],D=0;D<Y.length;++D){var X=Y[D]&31;vf(e,d,Ee[X]),d+=V[X],X>15&&(vf(e,d,Y[D]>>5&127),d+=Y[D]>>12)}}else ce=sVe,ne=Wp,ae=iVe,me=G3;for(var D=0;D<l;++D){var re=n[D];if(re>255){var X=re>>18&31;ob(e,d,ce[X+257]),d+=ne[X+257],X>7&&(vf(e,d,re>>23&31),d+=ND[X]);var se=re&31;ob(e,d,ae[se]),d+=me[se],se>3&&(ob(e,d,re>>5&8191),d+=ED[se])}else ob(e,d,ce[re]),d+=ne[re]}return ob(e,d,ce[256]),d+ne[256]},lVe=new _D([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),foe=new ud(0),cVe=function(t,e,r,n,a,s){var o=s.z||t.length,l=new ud(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var h=lVe[e-1],p=h>>13,g=h&8191,b=(1<<r)-1,w=s.p||new Ic(32768),_=s.h||new Ic(b+1),N=Math.ceil(r/3),A=2*N,j=function(Be){return(t[Be]^t[Be+1]<<N^t[Be+2]<<A)&b},P=new _D(25e3),U=new Ic(288),G=new Ic(32),O=0,D=0,I=s.i||0,V=0,R=s.w||0,B=0;I+2<o;++I){var F=j(I),ee=I&32767,Z=_[F];if(w[ee]=Z,_[F]=ee,R<=I){var ce=o-I;if((O>7e3||V>24576)&&(ce>423||!u)){d=AH(t,c,0,P,U,G,D,V,B,I-B,d),V=O=D=0,B=I;for(var ne=0;ne<286;++ne)U[ne]=0;for(var ne=0;ne<30;++ne)G[ne]=0}var ae=2,me=0,Ee=g,ye=ee-Z&32767;if(ce>2&&F==j(I-ye))for(var H=Math.min(p,ce)-1,Y=Math.min(32767,I),X=Math.min(258,ce);ye<=Y&&--Ee&&ee!=Z;){if(t[I+ae]==t[I+ae-ye]){for(var re=0;re<X&&t[I+re]==t[I+re-ye];++re);if(re>ae){if(ae=re,me=ye,re>H)break;for(var se=Math.min(ye,re-2),ke=0,ne=0;ne<se;++ne){var Ce=I-ye+ne&32767,xe=w[Ce],Ie=Ce-xe&32767;Ie>ke&&(ke=Ie,Z=Ce)}}}ee=Z,Z=w[ee],ye+=ee-Z&32767}if(me){P[V++]=268435456|tI[ae]<<18|NH[me];var He=tI[ae]&31,Ue=NH[me]&31;D+=ND[He]+ED[Ue],++U[257+He],++G[Ue],R=I+ae,++O}else P[V++]=t[I],++U[t[I]]}}for(I=Math.max(I,R);I<o;++I)P[V++]=t[I],++U[t[I]];d=AH(t,c,u,P,U,G,D,V,B,I-B,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=_,s.p=w,s.i=I,s.w=R)}else{for(var I=s.w||0;I<o+u;I+=65535){var Me=I+65535;Me>=o&&(c[d/8|0]=u,Me=o),d=doe(c,d+1,t.subarray(I,Me))}s.i=o}return oVe(l,0,n+uoe(d)+a)},hoe=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},uVe=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ud(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return cVe(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},moe=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},dVe=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=hoe();a.p(e.dictionary),moe(t,2,a.d())}};function aI(t,e){e||(e={});var r=hoe();r.p(t);var n=uVe(t,e,e.dictionary?6:2,4);return dVe(n,e),moe(n,n.length-4,r.d()),n}var fVe=typeof TextDecoder<"u"&&new TextDecoder,hVe=0;try{fVe.decode(foe,{stream:!0}),hVe=1}catch{}function mVe(t){if(Array.isArray(t))return t}function pVe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function SH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function gVe(t,e){if(t){if(typeof t=="string")return SH(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?SH(t,e):void 0}}function xVe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jH(t,e){return mVe(t)||pVe(t,e)||gVe(t,e)||xVe()}function TH(t,e="utf8"){return new TextDecoder(e).decode(t)}const vVe=new TextEncoder;function bVe(t){return vVe.encode(t)}const yVe=1024*8,wVe=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),IT={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class AD{constructor(e=yVe,r={}){oa(this,"buffer");oa(this,"byteLength");oa(this,"byteOffset");oa(this,"length");oa(this,"offset");oa(this,"lastWrittenByte");oa(this,"littleEndian");oa(this,"_data");oa(this,"_mark");oa(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof AD)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=IT[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===wVe&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new IT[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new IT[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return TH(this.readBytes(e))}decodeText(e=1,r="utf8"){return TH(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(bVe(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function wv(t){let e=t.length;for(;--e>=0;)t[e]=0}const _Ve=3,NVe=258,poe=29,EVe=256,AVe=EVe+1+poe,goe=30,SVe=512,jVe=new Array((AVe+2)*2);wv(jVe);const TVe=new Array(goe*2);wv(TVe);const CVe=new Array(SVe);wv(CVe);const kVe=new Array(NVe-_Ve+1);wv(kVe);const IVe=new Array(poe);wv(IVe);const OVe=new Array(goe);wv(OVe);const PVe=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var sI=PVe;const RVe=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},DVe=new Uint32Array(RVe()),MVe=(t,e,r,n)=>{const a=DVe,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var yd=MVe,iI={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},xoe={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const LVe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var FVe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)LVe(r,n)&&(t[n]=r[n])}}return t},BVe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let o=t[n];r.set(o,a),a+=o.length}return r},voe={assign:FVe,flattenChunks:BVe};let boe=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{boe=!1}const yy=new Uint8Array(256);for(let t=0;t<256;t++)yy[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;yy[254]=yy[254]=1;var UVe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const zVe=(t,e)=>{if(e<65534&&t.subarray&&boe)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var VVe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){s[a++]=o;continue}let l=yy[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return zVe(s,a)},$Ve=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+yy[t[r]]>e?r:e},oI={string2buf:UVe,buf2string:VVe,utf8border:$Ve};function HVe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var qVe=HVe;const k5=16209,GVe=16191;var WVe=function(e,r){let n,a,s,o,l,c,u,d,h,p,g,b,w,_,N,A,j,P,U,G,O,D,I,V;const R=e.state;n=e.next_in,I=e.input,a=n+(e.avail_in-5),s=e.next_out,V=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=R.dmax,u=R.wsize,d=R.whave,h=R.wnext,p=R.window,g=R.hold,b=R.bits,w=R.lencode,_=R.distcode,N=(1<<R.lenbits)-1,A=(1<<R.distbits)-1;e:do{b<15&&(g+=I[n++]<<b,b+=8,g+=I[n++]<<b,b+=8),j=w[g&N];t:for(;;){if(P=j>>>24,g>>>=P,b-=P,P=j>>>16&255,P===0)V[s++]=j&65535;else if(P&16){U=j&65535,P&=15,P&&(b<P&&(g+=I[n++]<<b,b+=8),U+=g&(1<<P)-1,g>>>=P,b-=P),b<15&&(g+=I[n++]<<b,b+=8,g+=I[n++]<<b,b+=8),j=_[g&A];r:for(;;){if(P=j>>>24,g>>>=P,b-=P,P=j>>>16&255,P&16){if(G=j&65535,P&=15,b<P&&(g+=I[n++]<<b,b+=8,b<P&&(g+=I[n++]<<b,b+=8)),G+=g&(1<<P)-1,G>c){e.msg="invalid distance too far back",R.mode=k5;break e}if(g>>>=P,b-=P,P=s-o,G>P){if(P=G-P,P>d&&R.sane){e.msg="invalid distance too far back",R.mode=k5;break e}if(O=0,D=p,h===0){if(O+=u-P,P<U){U-=P;do V[s++]=p[O++];while(--P);O=s-G,D=V}}else if(h<P){if(O+=u+h-P,P-=h,P<U){U-=P;do V[s++]=p[O++];while(--P);if(O=0,h<U){P=h,U-=P;do V[s++]=p[O++];while(--P);O=s-G,D=V}}}else if(O+=h-P,P<U){U-=P;do V[s++]=p[O++];while(--P);O=s-G,D=V}for(;U>2;)V[s++]=D[O++],V[s++]=D[O++],V[s++]=D[O++],U-=3;U&&(V[s++]=D[O++],U>1&&(V[s++]=D[O++]))}else{O=s-G;do V[s++]=V[O++],V[s++]=V[O++],V[s++]=V[O++],U-=3;while(U>2);U&&(V[s++]=V[O++],U>1&&(V[s++]=V[O++]))}}else if(P&64){e.msg="invalid distance code",R.mode=k5;break e}else{j=_[(j&65535)+(g&(1<<P)-1)];continue r}break}}else if(P&64)if(P&32){R.mode=GVe;break e}else{e.msg="invalid literal/length code",R.mode=k5;break e}else{j=w[(j&65535)+(g&(1<<P)-1)];continue t}break}}while(n<a&&s<l);U=b>>3,n-=U,b-=U<<3,g&=(1<<b)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),R.hold=g,R.bits=b};const Bg=15,CH=852,kH=592,IH=0,OT=1,OH=2,KVe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),XVe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),YVe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ZVe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),QVe=(t,e,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,h=0,p=0,g=0,b=0,w=0,_=0,N=0,A=0,j,P,U,G,O,D=null,I;const V=new Uint16Array(Bg+1),R=new Uint16Array(Bg+1);let B=null,F,ee,Z;for(u=0;u<=Bg;u++)V[u]=0;for(d=0;d<n;d++)V[e[r+d]]++;for(g=c,p=Bg;p>=1&&V[p]===0;p--);if(g>p&&(g=p),p===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<p&&V[h]===0;h++);for(g<h&&(g=h),_=1,u=1;u<=Bg;u++)if(_<<=1,_-=V[u],_<0)return-1;if(_>0&&(t===IH||p!==1))return-1;for(R[1]=0,u=1;u<Bg;u++)R[u+1]=R[u]+V[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[R[e[r+d]]++]=d);if(t===IH?(D=B=o,I=20):t===OT?(D=KVe,B=XVe,I=257):(D=YVe,B=ZVe,I=0),A=0,d=0,u=h,O=s,b=g,w=0,U=-1,N=1<<g,G=N-1,t===OT&&N>CH||t===OH&&N>kH)return 1;for(;;){F=u-w,o[d]+1<I?(ee=0,Z=o[d]):o[d]>=I?(ee=B[o[d]-I],Z=D[o[d]-I]):(ee=96,Z=0),j=1<<u-w,P=1<<b,h=P;do P-=j,a[O+(A>>w)+P]=F<<24|ee<<16|Z|0;while(P!==0);for(j=1<<u-1;A&j;)j>>=1;if(j!==0?(A&=j-1,A+=j):A=0,d++,--V[u]===0){if(u===p)break;u=e[r+o[d]]}if(u>g&&(A&G)!==U){for(w===0&&(w=g),O+=h,b=u-w,_=1<<b;b+w<p&&(_-=V[b+w],!(_<=0));)b++,_<<=1;if(N+=1<<b,t===OT&&N>CH||t===OH&&N>kH)return 1;U=A&G,a[U]=g<<24|b<<16|O-s|0}}return A!==0&&(a[O+A]=u-w<<24|64<<16|0),l.bits=g,0};var v2=QVe;const JVe=0,yoe=1,woe=2,{Z_FINISH:PH,Z_BLOCK:e$e,Z_TREES:I5,Z_OK:Kp,Z_STREAM_END:t$e,Z_NEED_DICT:r$e,Z_STREAM_ERROR:Cu,Z_DATA_ERROR:_oe,Z_MEM_ERROR:Noe,Z_BUF_ERROR:n$e,Z_DEFLATED:RH}=xoe,yS=16180,DH=16181,MH=16182,LH=16183,FH=16184,BH=16185,UH=16186,zH=16187,VH=16188,$H=16189,W3=16190,bf=16191,PT=16192,HH=16193,RT=16194,qH=16195,GH=16196,WH=16197,KH=16198,O5=16199,P5=16200,XH=16201,YH=16202,ZH=16203,QH=16204,JH=16205,DT=16206,eq=16207,tq=16208,cs=16209,Eoe=16210,Aoe=16211,a$e=852,s$e=592,i$e=15,o$e=i$e,rq=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function l$e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const yg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<yS||e.mode>Aoe?1:0},Soe=t=>{if(yg(t))return Cu;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=yS,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(a$e),e.distcode=e.distdyn=new Int32Array(s$e),e.sane=1,e.back=-1,Kp},joe=t=>{if(yg(t))return Cu;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Soe(t)},Toe=(t,e)=>{let r;if(yg(t))return Cu;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Cu:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,joe(t))},Coe=(t,e)=>{if(!t)return Cu;const r=new l$e;t.state=r,r.strm=t,r.window=null,r.mode=yS;const n=Toe(t,e);return n!==Kp&&(t.state=null),n},c$e=t=>Coe(t,o$e);let nq=!0,MT,LT;const u$e=t=>{if(nq){MT=new Int32Array(512),LT=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(v2(yoe,t.lens,0,288,MT,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;v2(woe,t.lens,0,32,LT,0,t.work,{bits:5}),nq=!1}t.lencode=MT,t.lenbits=9,t.distcode=LT,t.distbits=5},koe=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},d$e=(t,e)=>{let r,n,a,s,o,l,c,u,d,h,p,g,b,w,_=0,N,A,j,P,U,G,O,D;const I=new Uint8Array(4);let V,R;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(yg(t)||!t.output||!t.input&&t.avail_in!==0)return Cu;r=t.state,r.mode===bf&&(r.mode=PT),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,h=l,p=c,D=Kp;e:for(;;)switch(r.mode){case yS:if(r.wrap===0){r.mode=PT;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,I[0]=u&255,I[1]=u>>>8&255,r.check=yd(r.check,I,2,0),u=0,d=0,r.mode=DH;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=cs;break}if((u&15)!==RH){t.msg="unknown compression method",r.mode=cs;break}if(u>>>=4,d-=4,O=(u&15)+8,r.wbits===0&&(r.wbits=O),O>15||O>r.wbits){t.msg="invalid window size",r.mode=cs;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?$H:bf,u=0,d=0;break;case DH:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==RH){t.msg="unknown compression method",r.mode=cs;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=cs;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=yd(r.check,I,2,0)),u=0,d=0,r.mode=MH;case MH:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,r.check=yd(r.check,I,4,0)),u=0,d=0,r.mode=LH;case LH:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=yd(r.check,I,2,0)),u=0,d=0,r.mode=FH;case FH:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=yd(r.check,I,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=BH;case BH:if(r.flags&1024&&(g=r.length,g>l&&(g=l),g&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+g),O)),r.flags&512&&r.wrap&4&&(r.check=yd(r.check,n,g,s)),l-=g,s+=g,r.length-=g),r.length))break e;r.length=0,r.mode=UH;case UH:if(r.flags&2048){if(l===0)break e;g=0;do O=n[s+g++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O));while(O&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=yd(r.check,n,g,s)),l-=g,s+=g,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=zH;case zH:if(r.flags&4096){if(l===0)break e;g=0;do O=n[s+g++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O));while(O&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=yd(r.check,n,g,s)),l-=g,s+=g,O)break e}else r.head&&(r.head.comment=null);r.mode=VH;case VH:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=cs;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=bf;break;case $H:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=rq(u),u=0,d=0,r.mode=W3;case W3:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,r$e;t.adler=r.check=1,r.mode=bf;case bf:if(e===e$e||e===I5)break e;case PT:if(r.last){u>>>=d&7,d-=d&7,r.mode=DT;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=HH;break;case 1:if(u$e(r),r.mode=O5,e===I5){u>>>=2,d-=2;break e}break;case 2:r.mode=GH;break;case 3:t.msg="invalid block type",r.mode=cs}u>>>=2,d-=2;break;case HH:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=cs;break}if(r.length=u&65535,u=0,d=0,r.mode=RT,e===I5)break e;case RT:r.mode=qH;case qH:if(g=r.length,g){if(g>l&&(g=l),g>c&&(g=c),g===0)break e;a.set(n.subarray(s,s+g),o),l-=g,s+=g,c-=g,o+=g,r.length-=g;break}r.mode=bf;break;case GH:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=cs;break}r.have=0,r.mode=WH;case WH:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[B[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,V={bits:r.lenbits},D=v2(JVe,r.lens,0,19,r.lencode,0,r.work,V),r.lenbits=V.bits,D){t.msg="invalid code lengths set",r.mode=cs;break}r.have=0,r.mode=KH;case KH:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[u&(1<<r.lenbits)-1],N=_>>>24,A=_>>>16&255,j=_&65535,!(N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(j<16)u>>>=N,d-=N,r.lens[r.have++]=j;else{if(j===16){for(R=N+2;d<R;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=N,d-=N,r.have===0){t.msg="invalid bit length repeat",r.mode=cs;break}O=r.lens[r.have-1],g=3+(u&3),u>>>=2,d-=2}else if(j===17){for(R=N+3;d<R;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=N,d-=N,O=0,g=3+(u&7),u>>>=3,d-=3}else{for(R=N+7;d<R;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=N,d-=N,O=0,g=11+(u&127),u>>>=7,d-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=cs;break}for(;g--;)r.lens[r.have++]=O}}if(r.mode===cs)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=cs;break}if(r.lenbits=9,V={bits:r.lenbits},D=v2(yoe,r.lens,0,r.nlen,r.lencode,0,r.work,V),r.lenbits=V.bits,D){t.msg="invalid literal/lengths set",r.mode=cs;break}if(r.distbits=6,r.distcode=r.distdyn,V={bits:r.distbits},D=v2(woe,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,V),r.distbits=V.bits,D){t.msg="invalid distances set",r.mode=cs;break}if(r.mode=O5,e===I5)break e;case O5:r.mode=P5;case P5:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,WVe(t,p),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===bf&&(r.back=-1);break}for(r.back=0;_=r.lencode[u&(1<<r.lenbits)-1],N=_>>>24,A=_>>>16&255,j=_&65535,!(N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(A&&!(A&240)){for(P=N,U=A,G=j;_=r.lencode[G+((u&(1<<P+U)-1)>>P)],N=_>>>24,A=_>>>16&255,j=_&65535,!(P+N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=P,d-=P,r.back+=P}if(u>>>=N,d-=N,r.back+=N,r.length=j,A===0){r.mode=JH;break}if(A&32){r.back=-1,r.mode=bf;break}if(A&64){t.msg="invalid literal/length code",r.mode=cs;break}r.extra=A&15,r.mode=XH;case XH:if(r.extra){for(R=r.extra;d<R;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=YH;case YH:for(;_=r.distcode[u&(1<<r.distbits)-1],N=_>>>24,A=_>>>16&255,j=_&65535,!(N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(A&240)){for(P=N,U=A,G=j;_=r.distcode[G+((u&(1<<P+U)-1)>>P)],N=_>>>24,A=_>>>16&255,j=_&65535,!(P+N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=P,d-=P,r.back+=P}if(u>>>=N,d-=N,r.back+=N,A&64){t.msg="invalid distance code",r.mode=cs;break}r.offset=j,r.extra=A&15,r.mode=ZH;case ZH:if(r.extra){for(R=r.extra;d<R;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=cs;break}r.mode=QH;case QH:if(c===0)break e;if(g=p-c,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=cs;break}g>r.wnext?(g-=r.wnext,b=r.wsize-g):b=r.wnext-g,g>r.length&&(g=r.length),w=r.window}else w=a,b=o-r.offset,g=r.length;g>c&&(g=c),c-=g,r.length-=g;do a[o++]=w[b++];while(--g);r.length===0&&(r.mode=P5);break;case JH:if(c===0)break e;a[o++]=r.length,c--,r.mode=P5;break;case DT:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(p-=c,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?yd(r.check,a,p,o-p):sI(r.check,a,p,o-p)),p=c,r.wrap&4&&(r.flags?u:rq(u))!==r.check){t.msg="incorrect data check",r.mode=cs;break}u=0,d=0}r.mode=eq;case eq:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=cs;break}u=0,d=0}r.mode=tq;case tq:D=t$e;break e;case cs:D=_oe;break e;case Eoe:return Noe;case Aoe:default:return Cu}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||p!==t.avail_out&&r.mode<cs&&(r.mode<DT||e!==PH))&&koe(t,t.output,t.next_out,p-t.avail_out),h-=t.avail_in,p-=t.avail_out,t.total_in+=h,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?yd(r.check,a,p,t.next_out-p):sI(r.check,a,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===bf?128:0)+(r.mode===O5||r.mode===RT?256:0),(h===0&&p===0||e===PH)&&D===Kp&&(D=n$e),D},f$e=t=>{if(yg(t))return Cu;let e=t.state;return e.window&&(e.window=null),t.state=null,Kp},h$e=(t,e)=>{if(yg(t))return Cu;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Kp):Cu},m$e=(t,e)=>{const r=e.length;let n,a,s;return yg(t)||(n=t.state,n.wrap!==0&&n.mode!==W3)?Cu:n.mode===W3&&(a=1,a=sI(a,e,r,0),a!==n.check)?_oe:(s=koe(t,e,r,r),s?(n.mode=Eoe,Noe):(n.havedict=1,Kp))};var p$e=joe,g$e=Toe,x$e=Soe,v$e=c$e,b$e=Coe,y$e=d$e,w$e=f$e,_$e=h$e,N$e=m$e,E$e="pako inflate (from Nodeca project)",Nf={inflateReset:p$e,inflateReset2:g$e,inflateResetKeep:x$e,inflateInit:v$e,inflateInit2:b$e,inflate:y$e,inflateEnd:w$e,inflateGetHeader:_$e,inflateSetDictionary:N$e,inflateInfo:E$e};function A$e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var S$e=A$e;const Ioe=Object.prototype.toString,{Z_NO_FLUSH:j$e,Z_FINISH:T$e,Z_OK:wy,Z_STREAM_END:FT,Z_NEED_DICT:BT,Z_STREAM_ERROR:C$e,Z_DATA_ERROR:aq,Z_MEM_ERROR:k$e}=xoe;function Lw(t){this.options=voe.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qVe,this.strm.avail_out=0;let r=Nf.inflateInit2(this.strm,e.windowBits);if(r!==wy)throw new Error(iI[r]);if(this.header=new S$e,Nf.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=oI.string2buf(e.dictionary):Ioe.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Nf.inflateSetDictionary(this.strm,e.dictionary),r!==wy)))throw new Error(iI[r])}Lw.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?T$e:j$e,Ioe.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Nf.inflate(r,o),s===BT&&a&&(s=Nf.inflateSetDictionary(r,a),s===wy?s=Nf.inflate(r,o):s===aq&&(s=BT));r.avail_in>0&&s===FT&&r.state.wrap>0&&t[r.next_in]!==0;)Nf.inflateReset(r),s=Nf.inflate(r,o);switch(s){case C$e:case aq:case BT:case k$e:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===FT))if(this.options.to==="string"){let c=oI.utf8border(r.output,r.next_out),u=r.next_out-c,d=oI.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===wy&&l===0)){if(s===FT)return s=Nf.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Lw.prototype.onData=function(t){this.chunks.push(t)};Lw.prototype.onEnd=function(t){t===wy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=voe.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function I$e(t,e){const r=new Lw(e);if(r.push(t),r.err)throw r.msg||iI[r.err];return r.result}var O$e=Lw,P$e=I$e,R$e={Inflate:O$e,inflate:P$e};const{Inflate:D$e,inflate:M$e}=R$e;var sq=D$e,L$e=M$e;const Ooe=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;Ooe[t]=e}const iq=4294967295;function F$e(t,e,r){let n=t;for(let a=0;a<r;a++)n=Ooe[(n^e[a])&255]^n>>>8;return n}function B$e(t,e){return(F$e(iq,t,e)^iq)>>>0}function oq(t,e,r){const n=t.readUint32(),a=B$e(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function Poe(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function Roe(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function Doe(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function Moe(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function Loe(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+U$e(e[s-a],r[s],r[s-a])&255}}function U$e(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return a<=s&&a<=o?t:s<=o?e:r}function z$e(t,e,r,n,a,s){switch(t){case 0:Poe(e,r,a);break;case 1:Roe(e,r,a,s);break;case 2:Doe(e,r,n,a);break;case 3:Moe(e,r,n,a,s);break;case 4:Loe(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const V$e=new Uint16Array([255]),$$e=new Uint8Array(V$e.buffer),H$e=$$e[0]===255;function q$e(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const h=o[d],p=Math.ceil((r-h.x)/h.xStep),g=Math.ceil((n-h.y)/h.yStep);if(p<=0||g<=0)continue;const b=p*l,w=new Uint8Array(b);for(let _=0;_<g;_++){const N=e[u++],A=e.subarray(u,u+b);u+=b;const j=new Uint8Array(b);z$e(N,A,j,w,b,l),w.set(j);for(let P=0;P<p;P++){const U=h.x+P*h.xStep,G=h.y+_*h.yStep;if(!(U>=r||G>=n))for(let O=0;O<l;O++)c[(G*r+U)*l+O]=j[P*l+O]}}}if(s===16){const d=new Uint16Array(c.buffer);if(H$e)for(let h=0;h<d.length;h++)d[h]=G$e(d[h]);return d}else return c}function G$e(t){return(t&255)<<8|t>>8&255}const W$e=new Uint16Array([255]),K$e=new Uint8Array(W$e.buffer),X$e=K$e[0]===255,Y$e=new Uint8Array(0);function lq(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=Y$e,d=0,h,p;for(let g=0;g<n;g++){switch(h=e.subarray(d+1,d+1+l),p=c.subarray(g*l,(g+1)*l),e[d]){case 0:Poe(h,p,l);break;case 1:Roe(h,p,l,o);break;case 2:Doe(h,p,u,l);break;case 3:Moe(h,p,u,l,o);break;case 4:Loe(h,p,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=p,d+=l+1}if(s===16){const g=new Uint16Array(c.buffer);if(X$e)for(let b=0;b<g.length;b++)g[b]=Z$e(g[b]);return g}else return c}function Z$e(t){return(t&255)<<8|t>>8&255}const eE=Uint8Array.of(137,80,78,71,13,10,26,10);function cq(t){if(!Q$e(t.readBytes(eE.length)))throw new Error("wrong PNG signature")}function Q$e(t){if(t.length<eE.length)return!1;for(let e=0;e<eE.length;e++)if(t[e]!==eE[e])return!1;return!0}const J$e="tEXt",eHe=0,Foe=new TextDecoder("latin1");function tHe(t){if(nHe(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const rHe=/^[\u0000-\u00FF]*$/;function nHe(t){if(!rHe.test(t))throw new Error("invalid latin1 text")}function aHe(t,e,r){const n=Boe(e);t[n]=sHe(e,r-n.length-1)}function Boe(t){for(t.mark();t.readByte()!==eHe;);const e=t.offset;t.reset();const r=Foe.decode(t.readBytes(e-t.offset-1));return t.skip(1),tHe(r),r}function sHe(t,e){return Foe.decode(t.readBytes(e))}const mc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},UT={UNKNOWN:-1,DEFLATE:0},uq={UNKNOWN:-1,ADAPTIVE:0},zT={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},R5={NONE:0,BACKGROUND:1,PREVIOUS:2},VT={SOURCE:0,OVER:1};class iHe extends AD{constructor(r,n={}){super(r);oa(this,"_checkCrc");oa(this,"_inflator");oa(this,"_png");oa(this,"_apng");oa(this,"_end");oa(this,"_hasPalette");oa(this,"_palette");oa(this,"_hasTransparency");oa(this,"_transparency");oa(this,"_compressionMethod");oa(this,"_filterMethod");oa(this,"_interlaceMethod");oa(this,"_colorType");oa(this,"_isAnimated");oa(this,"_numberOfFrames");oa(this,"_numberOfPlays");oa(this,"_frames");oa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new sq,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=UT.UNKNOWN,this._filterMethod=uq.UNKNOWN,this._interlaceMethod=zT.UNKNOWN,this._colorType=mc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(cq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(cq(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case J$e:aHe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?oq(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?oq(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=oHe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case mc.GREYSCALE:a=1;break;case mc.TRUECOLOUR:a=3;break;case mc.INDEXED_COLOUR:a=1;break;case mc.GREYSCALE_ALPHA:a=2;break;case mc.TRUECOLOUR_ALPHA:a=4;break;case mc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==UT.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case mc.GREYSCALE:case mc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case mc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case mc.UNKNOWN:case mc.GREYSCALE_ALPHA:case mc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Boe(this),a=this.readUint8();if(a!==UT.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:L$e(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=lq({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case R5.NONE:break;case R5.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case R5.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case VT.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case VT.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const h=n.data[u+this._png.channels-1]/a,p=d%(this._png.channels-1)===0?1:n.data[u+d],g=Math.floor(h*p+(1-h)*r.data[c+d]);r.data[c+d]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==uq.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===zT.NO_INTERLACE)this._png.data=lq({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===zT.ADAM7)this._png.data=q$e({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:R5.NONE,blendOp:VT.SOURCE,data:r}),this._inflator=new sq,this._writingDataChunks=!1}}function oHe(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var dq;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(dq||(dq={}));function lHe(t,e){return new iHe(t,e).decode()}var mn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $T(){mn.console&&typeof mn.console.log=="function"&&mn.console.log.apply(mn.console,arguments)}var La={log:$T,warn:function(t){mn.console&&(typeof mn.console.warn=="function"?mn.console.warn.apply(mn.console,arguments):$T.call(null,arguments))},error:function(t){mn.console&&(typeof mn.console.error=="function"?mn.console.error.apply(mn.console,arguments):$T(t))}};function HT(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Vm(n.response,e,r)},n.onerror=function(){La.error("could not download file")},n.send()}function fq(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function D5(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Vm=mn.saveAs||((typeof window>"u"?"undefined":Ea(window))!=="object"||window!==mn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=mn.URL||mn.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?fq(a.href)?HT(t,e,r):D5(a,a.target="_blank"):D5(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){D5(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(fq(t))HT(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){D5(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Ea(s)!=="object"&&(La.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return HT(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(mn.HTMLElement)||mn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":Ea(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=mn.URL||mn.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Uoe(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var tE=mn.atob.bind(mn),hq=mn.btoa.bind(mn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function qT(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Mo(r,n,a,s,e[0],7,-680876936),s=Mo(s,r,n,a,e[1],12,-389564586),a=Mo(a,s,r,n,e[2],17,606105819),n=Mo(n,a,s,r,e[3],22,-1044525330),r=Mo(r,n,a,s,e[4],7,-176418897),s=Mo(s,r,n,a,e[5],12,1200080426),a=Mo(a,s,r,n,e[6],17,-1473231341),n=Mo(n,a,s,r,e[7],22,-45705983),r=Mo(r,n,a,s,e[8],7,1770035416),s=Mo(s,r,n,a,e[9],12,-1958414417),a=Mo(a,s,r,n,e[10],17,-42063),n=Mo(n,a,s,r,e[11],22,-1990404162),r=Mo(r,n,a,s,e[12],7,1804603682),s=Mo(s,r,n,a,e[13],12,-40341101),a=Mo(a,s,r,n,e[14],17,-1502002290),r=Lo(r,n=Mo(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Lo(s,r,n,a,e[6],9,-1069501632),a=Lo(a,s,r,n,e[11],14,643717713),n=Lo(n,a,s,r,e[0],20,-373897302),r=Lo(r,n,a,s,e[5],5,-701558691),s=Lo(s,r,n,a,e[10],9,38016083),a=Lo(a,s,r,n,e[15],14,-660478335),n=Lo(n,a,s,r,e[4],20,-405537848),r=Lo(r,n,a,s,e[9],5,568446438),s=Lo(s,r,n,a,e[14],9,-1019803690),a=Lo(a,s,r,n,e[3],14,-187363961),n=Lo(n,a,s,r,e[8],20,1163531501),r=Lo(r,n,a,s,e[13],5,-1444681467),s=Lo(s,r,n,a,e[2],9,-51403784),a=Lo(a,s,r,n,e[7],14,1735328473),r=Fo(r,n=Lo(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Fo(s,r,n,a,e[8],11,-2022574463),a=Fo(a,s,r,n,e[11],16,1839030562),n=Fo(n,a,s,r,e[14],23,-35309556),r=Fo(r,n,a,s,e[1],4,-1530992060),s=Fo(s,r,n,a,e[4],11,1272893353),a=Fo(a,s,r,n,e[7],16,-155497632),n=Fo(n,a,s,r,e[10],23,-1094730640),r=Fo(r,n,a,s,e[13],4,681279174),s=Fo(s,r,n,a,e[0],11,-358537222),a=Fo(a,s,r,n,e[3],16,-722521979),n=Fo(n,a,s,r,e[6],23,76029189),r=Fo(r,n,a,s,e[9],4,-640364487),s=Fo(s,r,n,a,e[12],11,-421815835),a=Fo(a,s,r,n,e[15],16,530742520),r=Bo(r,n=Fo(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Bo(s,r,n,a,e[7],10,1126891415),a=Bo(a,s,r,n,e[14],15,-1416354905),n=Bo(n,a,s,r,e[5],21,-57434055),r=Bo(r,n,a,s,e[12],6,1700485571),s=Bo(s,r,n,a,e[3],10,-1894986606),a=Bo(a,s,r,n,e[10],15,-1051523),n=Bo(n,a,s,r,e[1],21,-2054922799),r=Bo(r,n,a,s,e[8],6,1873313359),s=Bo(s,r,n,a,e[15],10,-30611744),a=Bo(a,s,r,n,e[6],15,-1560198380),n=Bo(n,a,s,r,e[13],21,1309151649),r=Bo(r,n,a,s,e[4],6,-145523070),s=Bo(s,r,n,a,e[11],10,-1120210379),a=Bo(a,s,r,n,e[2],15,718787259),n=Bo(n,a,s,r,e[9],21,-343485551),t[0]=b0(r,t[0]),t[1]=b0(n,t[1]),t[2]=b0(a,t[2]),t[3]=b0(s,t[3])}function wS(t,e,r,n,a,s){return e=b0(b0(e,t),b0(n,s)),b0(e<<a|e>>>32-a,r)}function Mo(t,e,r,n,a,s,o){return wS(e&r|~e&n,t,e,a,s,o)}function Lo(t,e,r,n,a,s,o){return wS(e&n|r&~n,t,e,a,s,o)}function Fo(t,e,r,n,a,s,o){return wS(e^r^n,t,e,a,s,o)}function Bo(t,e,r,n,a,s,o){return wS(r^(e|~n),t,e,a,s,o)}function zoe(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)qT(n,cHe(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(qT(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,qT(n,a),n}function cHe(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var mq="0123456789abcdef".split("");function uHe(t){for(var e="",r=0;r<4;r++)e+=mq[t>>8*r+4&15]+mq[t>>8*r&15];return e}function dHe(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function lI(t){return zoe(t).map(dHe).join("")}var fHe=function(t){for(var e=0;e<t.length;e++)t[e]=uHe(t[e]);return t.join("")}(zoe("hello"))!="5d41402abc4b2a76b9719d911017c592";function b0(t,e){if(fHe){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function cI(t,e){var r,n,a,s;if(t!==r){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var h=e.length,p=0,g=0,b="";for(c=0;c<h;c++)g=(g+(d=l[p=(p+1)%256]))%256,l[p]=l[g],l[g]=d,o=l[(l[p]+l[g])%256],b+=String.fromCharCode(e.charCodeAt(c)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var pq={print:4,modify:8,copy:16,"annot-forms":32};function n1(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(pq.perm!==void 0)throw new Error("Invalid permission: "+l);a+=pq[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=lI(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=cI(this.encryptionKey,this.padding)}function a1(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function gq(t){if(Ea(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){mn.console&&La.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function K3(t){if(!(this instanceof K3))return new K3(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Voe(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Qm(t,e,r,n,a){if(!(this instanceof Qm))return new Qm(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Voe.call(this,n,a)}function S1(t,e,r,n,a){if(!(this instanceof S1))return new S1(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Voe.call(this,n,a)}function $r(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;Ea(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=gq;var b="1.3",w=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(z){b=z};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return _};var N=g.__private__.getPageFormat=function(z){return _[z]};a=a||"a4";var A="compat",j="advanced",P=A;function U(){this.saveGraphicsState(),be(new fr(Ot,0,0,-Ot,0,sc()*Ot).toString()+" cm"),this.setFontSize(this.getFontSize()/Ot),u="n",P=j}function G(){this.restoreGraphicsState(),u="S",P=A}var O=g.__private__.combineFontStyleAndFontWeight=function(z,ie){if(z=="bold"&&ie=="normal"||z=="bold"&&ie==400||z=="normal"&&ie=="italic"||z=="bold"&&ie=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ie&&(z=ie==400||ie==="normal"?z==="italic"?"italic":"normal":ie!=700&&ie!=="bold"||z!=="normal"?(ie==700?"bold":ie)+""+z:"bold"),z};g.advancedAPI=function(z){var ie=P===A;return ie&&U.call(this),typeof z!="function"||(z(this),ie&&G.call(this)),this},g.compatAPI=function(z){var ie=P===j;return ie&&G.call(this),typeof z!="function"||(z(this),ie&&U.call(this)),this},g.isAdvancedAPI=function(){return P===j};var D,I=function(z){if(P!==j)throw new Error(z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=g.roundToPrecision=g.__private__.roundToPrecision=function(z,ie){var De=e||ie;if(isNaN(z)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return z.toFixed(De).replace(/0+$/,"")};D=g.hpf=g.__private__.hpf=typeof c=="number"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return V(z,c)}:c==="smart"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return V(z,z>-1&&z<1?16:5)}:function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return V(z,16)};var R=g.f2=g.__private__.f2=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f2");return V(z,2)},B=g.__private__.f3=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f3");return V(z,3)},F=g.scale=g.__private__.scale=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.scale");return P===A?z*Ot:P===j?z:void 0},ee=function(z){return F(function(ie){return P===A?sc()-ie:P===j?ie:void 0}(z))};g.__private__.setPrecision=g.setPrecision=function(z){typeof parseInt(z,10)=="number"&&(e=parseInt(z,10))};var Z,ce="00000000000000000000000000000000",ne=g.__private__.getFileId=function(){return ce},ae=g.__private__.setFileId=function(z){return ce=z!==void 0&&/^[a-fA-F0-9]{32}$/.test(z)?z.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Mn=new n1(d.userPermissions,d.userPassword,d.ownerPassword,ce)),ce};g.setFileId=function(z){return ae(z),this},g.getFileId=function(){return ne()};var me=g.__private__.convertDateToPDFDate=function(z){var ie=z.getTimezoneOffset(),De=ie<0?"+":"-",qe=Math.floor(Math.abs(ie/60)),rt=Math.abs(ie%60),Rt=[De,X(qe),"'",X(rt),"'"].join("");return["D:",z.getFullYear(),X(z.getMonth()+1),X(z.getDate()),X(z.getHours()),X(z.getMinutes()),X(z.getSeconds()),Rt].join("")},Ee=g.__private__.convertPDFDateToDate=function(z){var ie=parseInt(z.substr(2,4),10),De=parseInt(z.substr(6,2),10)-1,qe=parseInt(z.substr(8,2),10),rt=parseInt(z.substr(10,2),10),Rt=parseInt(z.substr(12,2),10),Qt=parseInt(z.substr(14,2),10);return new Date(ie,De,qe,rt,Rt,Qt,0)},ye=g.__private__.setCreationDate=function(z){var ie;if(z===void 0&&(z=new Date),z instanceof Date)ie=me(z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ie=z}return Z=ie},H=g.__private__.getCreationDate=function(z){var ie=Z;return z==="jsDate"&&(ie=Ee(Z)),ie};g.setCreationDate=function(z){return ye(z),this},g.getCreationDate=function(z){return H(z)};var Y,X=g.__private__.padd2=function(z){return("0"+parseInt(z)).slice(-2)},re=g.__private__.padd2Hex=function(z){return("00"+(z=z.toString())).substr(z.length)},se=0,ke=[],Ce=[],xe=0,Ie=[],He=[],Ue=!1,Me=Ce;g.__private__.setCustomOutputDestination=function(z){Ue=!0,Me=z};var Be=function(z){Ue||(Me=z)};g.__private__.resetCustomOutputDestination=function(){Ue=!1,Me=Ce};var be=g.__private__.out=function(z){return z=z.toString(),xe+=z.length+1,Me.push(z),Me},Vt=g.__private__.write=function(z){return be(arguments.length===1?z.toString():Array.prototype.join.call(arguments," "))},ht=g.__private__.getArrayBuffer=function(z){for(var ie=z.length,De=new ArrayBuffer(ie),qe=new Uint8Array(De);ie--;)qe[ie]=z.charCodeAt(ie);return De},Lt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Lt};var et=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(z){return et=P===j?z/Ot:z,this};var Jt,Ve=g.__private__.getFontSize=g.getFontSize=function(){return P===A?et:et*Ot},Ft=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(z){return Ft=z,this},g.__private__.getR2L=g.getR2L=function(){return Ft};var qt,Wt=g.__private__.setZoomMode=function(z){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(z))Jt=z;else if(isNaN(z)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+z+'" is not recognized.');Jt=z}else Jt=parseInt(z,10)};g.__private__.getZoomMode=function(){return Jt};var nr,Xe=g.__private__.setPageMode=function(z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+z+'" is not recognized.');qt=z};g.__private__.getPageMode=function(){return qt};var Kt=g.__private__.setLayoutMode=function(z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+z+'" is not recognized.');nr=z};g.__private__.getLayoutMode=function(){return nr},g.__private__.setDisplayMode=g.setDisplayMode=function(z,ie,De){return Wt(z),Kt(ie),Xe(De),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(z){if(Object.keys(kt).indexOf(z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[z]},g.__private__.getDocumentProperties=function(){return kt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(z){for(var ie in kt)kt.hasOwnProperty(ie)&&z[ie]&&(kt[ie]=z[ie]);return this},g.__private__.setDocumentProperty=function(z,ie){if(Object.keys(kt).indexOf(z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[z]=ie};var pt,Ot,Ut,Nr,or,lt={},lr={},ve=[],Ze={},at={},Qe={},ze={},it=null,At=0,er=[],It=new gq(g),Er=t.hotfixes||[],rn={},Qr={},En=[],fr=function z(ie,De,qe,rt,Rt,Qt){if(!(this instanceof z))return new z(ie,De,qe,rt,Rt,Qt);isNaN(ie)&&(ie=1),isNaN(De)&&(De=0),isNaN(qe)&&(qe=0),isNaN(rt)&&(rt=1),isNaN(Rt)&&(Rt=0),isNaN(Qt)&&(Qt=0),this._matrix=[ie,De,qe,rt,Rt,Qt]};Object.defineProperty(fr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(fr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(fr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(fr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(fr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(fr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(fr.prototype,"a",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(fr.prototype,"b",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(fr.prototype,"c",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(fr.prototype,"d",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(fr.prototype,"e",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(fr.prototype,"f",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(fr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(fr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(fr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(fr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),fr.prototype.join=function(z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(z)},fr.prototype.multiply=function(z){var ie=z.sx*this.sx+z.shy*this.shx,De=z.sx*this.shy+z.shy*this.sy,qe=z.shx*this.sx+z.sy*this.shx,rt=z.shx*this.shy+z.sy*this.sy,Rt=z.tx*this.sx+z.ty*this.shx+this.tx,Qt=z.tx*this.shy+z.ty*this.sy+this.ty;return new fr(ie,De,qe,rt,Rt,Qt)},fr.prototype.decompose=function(){var z=this.sx,ie=this.shy,De=this.shx,qe=this.sy,rt=this.tx,Rt=this.ty,Qt=Math.sqrt(z*z+ie*ie),Sr=(z/=Qt)*De+(ie/=Qt)*qe;De-=z*Sr,qe-=ie*Sr;var vr=Math.sqrt(De*De+qe*qe);return Sr/=vr,z*(qe/=vr)<ie*(De/=vr)&&(z=-z,ie=-ie,Sr=-Sr,Qt=-Qt),{scale:new fr(Qt,0,0,vr,0,0),translate:new fr(1,0,0,1,rt,Rt),rotate:new fr(z,ie,-ie,z,0,0),skew:new fr(1,0,Sr,1,0,0)}},fr.prototype.toString=function(z){return this.join(" ")},fr.prototype.inversed=function(){var z=this.sx,ie=this.shy,De=this.shx,qe=this.sy,rt=this.tx,Rt=this.ty,Qt=1/(z*qe-ie*De),Sr=qe*Qt,vr=-ie*Qt,Kr=-De*Qt,yr=z*Qt;return new fr(Sr,vr,Kr,yr,-Sr*rt-Kr*Rt,-vr*rt-yr*Rt)},fr.prototype.applyToPoint=function(z){var ie=z.x*this.sx+z.y*this.shx+this.tx,De=z.x*this.shy+z.y*this.sy+this.ty;return new Oa(ie,De)},fr.prototype.applyToRectangle=function(z){var ie=this.applyToPoint(z),De=this.applyToPoint(new Oa(z.x+z.w,z.y+z.h));return new Lu(ie.x,ie.y,De.x-ie.x,De.y-ie.y)},fr.prototype.clone=function(){var z=this.sx,ie=this.shy,De=this.shx,qe=this.sy,rt=this.tx,Rt=this.ty;return new fr(z,ie,De,qe,rt,Rt)},g.Matrix=fr;var nn=g.matrixMult=function(z,ie){return ie.multiply(z)},ea=new fr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=ea;var on=function(z,ie){if(!at[z]){var De=(ie instanceof Qm?"Sh":"P")+(Object.keys(Ze).length+1).toString(10);ie.id=De,at[z]=De,Ze[De]=ie,It.publish("addPattern",ie)}};g.ShadingPattern=Qm,g.TilingPattern=S1,g.addShadingPattern=function(z,ie){return I("addShadingPattern()"),on(z,ie),this},g.beginTilingPattern=function(z){I("beginTilingPattern()"),ac(z.boundingBox[0],z.boundingBox[1],z.boundingBox[2]-z.boundingBox[0],z.boundingBox[3]-z.boundingBox[1],z.matrix)},g.endTilingPattern=function(z,ie){I("endTilingPattern()"),ie.stream=He[Y].join(`
`),on(z,ie),It.publish("endTilingPattern",ie),En.pop().restore()};var In,qr=g.__private__.newObject=function(){var z=un();return de(z,!0),z},un=g.__private__.newObjectDeferred=function(){return se++,ke[se]=function(){return xe},se},de=function(z,ie){return ie=typeof ie=="boolean"&&ie,ke[z]=xe,ie&&be(z+" 0 obj"),z},pe=g.__private__.newAdditionalObject=function(){var z={objId:un(),content:""};return Ie.push(z),z},_e=un(),Se=un(),Te=g.__private__.decodeColorString=function(z){var ie=z.split(" ");if(ie.length!==2||ie[1]!=="g"&&ie[1]!=="G")ie.length!==5||ie[4]!=="k"&&ie[4]!=="K"||(ie=[(1-ie[0])*(1-ie[3]),(1-ie[1])*(1-ie[3]),(1-ie[2])*(1-ie[3]),"r"]);else{var De=parseFloat(ie[0]);ie=[De,De,De,"r"]}for(var qe="#",rt=0;rt<3;rt++)qe+=("0"+Math.floor(255*parseFloat(ie[rt])).toString(16)).slice(-2);return qe},Pe=g.__private__.encodeColorString=function(z){var ie;typeof z=="string"&&(z={ch1:z});var De=z.ch1,qe=z.ch2,rt=z.ch3,Rt=z.ch4,Qt=z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var Sr=new Uoe(De);if(Sr.ok)De=Sr.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var vr=parseInt(De.substr(1),16);De=vr>>16&255,qe=vr>>8&255,rt=255&vr}if(qe===void 0||Rt===void 0&&De===qe&&qe===rt)ie=typeof De=="string"?De+" "+Qt[0]:z.precision===2?R(De/255)+" "+Qt[0]:B(De/255)+" "+Qt[0];else if(Rt===void 0||Ea(Rt)==="object"){if(Rt&&!isNaN(Rt.a)&&Rt.a===0)return["1.","1.","1.",Qt[1]].join(" ");ie=typeof De=="string"?[De,qe,rt,Qt[1]].join(" "):z.precision===2?[R(De/255),R(qe/255),R(rt/255),Qt[1]].join(" "):[B(De/255),B(qe/255),B(rt/255),Qt[1]].join(" ")}else ie=typeof De=="string"?[De,qe,rt,Rt,Qt[2]].join(" "):z.precision===2?[R(De),R(qe),R(rt),R(Rt),Qt[2]].join(" "):[B(De),B(qe),B(rt),B(Rt),Qt[2]].join(" ");return ie},tt=g.__private__.getFilters=function(){return o},jt=g.__private__.putStream=function(z){var ie=(z=z||{}).data||"",De=z.filters||tt(),qe=z.alreadyAppliedFilters||[],rt=z.addLength1||!1,Rt=ie.length,Qt=z.objectId,Sr=function(K){return K};if(d!==null&&Qt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Sr=Mn.encryptor(Qt,0));var vr={};De===!0&&(De=["FlateEncode"]);var Kr=z.additionalKeyValues||[],yr=(vr=$r.API.processDataByFilters!==void 0?$r.API.processDataByFilters(ie,De):{data:ie,reverseChain:[]}).reverseChain+(Array.isArray(qe)?qe.join(" "):qe.toString());if(vr.data.length!==0&&(Kr.push({key:"Length",value:vr.data.length}),rt===!0&&Kr.push({key:"Length1",value:Rt})),yr.length!=0)if(yr.split("/").length-1==1)Kr.push({key:"Filter",value:yr});else{Kr.push({key:"Filter",value:"["+yr+"]"});for(var Pn=0;Pn<Kr.length;Pn+=1)if(Kr[Pn].key==="DecodeParms"){for(var Gn=[],Xr=0;Xr<vr.reverseChain.split("/").length-1;Xr+=1)Gn.push("null");Gn.push(Kr[Pn].value),Kr[Pn].value="["+Gn.join(" ")+"]"}}be("<<");for(var T=0;T<Kr.length;T++)be("/"+Kr[T].key+" "+Kr[T].value);be(">>"),vr.data.length!==0&&(be("stream"),be(Sr(vr.data)),be("endstream"))},st=g.__private__.putPage=function(z){var ie=z.number,De=z.data,qe=z.objId,rt=z.contentsObjId;de(qe,!0),be("<</Type /Page"),be("/Parent "+z.rootDictionaryObjId+" 0 R"),be("/Resources "+z.resourceDictionaryObjId+" 0 R"),be("/MediaBox ["+parseFloat(D(z.mediaBox.bottomLeftX))+" "+parseFloat(D(z.mediaBox.bottomLeftY))+" "+D(z.mediaBox.topRightX)+" "+D(z.mediaBox.topRightY)+"]"),z.cropBox!==null&&be("/CropBox ["+D(z.cropBox.bottomLeftX)+" "+D(z.cropBox.bottomLeftY)+" "+D(z.cropBox.topRightX)+" "+D(z.cropBox.topRightY)+"]"),z.bleedBox!==null&&be("/BleedBox ["+D(z.bleedBox.bottomLeftX)+" "+D(z.bleedBox.bottomLeftY)+" "+D(z.bleedBox.topRightX)+" "+D(z.bleedBox.topRightY)+"]"),z.trimBox!==null&&be("/TrimBox ["+D(z.trimBox.bottomLeftX)+" "+D(z.trimBox.bottomLeftY)+" "+D(z.trimBox.topRightX)+" "+D(z.trimBox.topRightY)+"]"),z.artBox!==null&&be("/ArtBox ["+D(z.artBox.bottomLeftX)+" "+D(z.artBox.bottomLeftY)+" "+D(z.artBox.topRightX)+" "+D(z.artBox.topRightY)+"]"),typeof z.userUnit=="number"&&z.userUnit!==1&&be("/UserUnit "+z.userUnit),It.publish("putPage",{objId:qe,pageContext:er[ie],pageNumber:ie,page:De}),be("/Contents "+rt+" 0 R"),be(">>"),be("endobj");var Rt=De.join(`
`);return P===j&&(Rt+=`
Q`),de(rt,!0),jt({data:Rt,filters:tt(),objectId:rt}),be("endobj"),qe},Ae=g.__private__.putPages=function(){var z,ie,De=[];for(z=1;z<=At;z++)er[z].objId=un(),er[z].contentsObjId=un();for(z=1;z<=At;z++)De.push(st({number:z,data:He[z],objId:er[z].objId,contentsObjId:er[z].contentsObjId,mediaBox:er[z].mediaBox,cropBox:er[z].cropBox,bleedBox:er[z].bleedBox,trimBox:er[z].trimBox,artBox:er[z].artBox,userUnit:er[z].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:Se}));de(_e,!0),be("<</Type /Pages");var qe="/Kids [";for(ie=0;ie<At;ie++)qe+=De[ie]+" 0 R ";be(qe+"]"),be("/Count "+At),be(">>"),be("endobj"),It.publish("postPutPages")},Ge=function(z){It.publish("putFont",{font:z,out:be,newObject:qr,putStream:jt}),z.isAlreadyPutted!==!0&&(z.objectNumber=qr(),be("<<"),be("/Type /Font"),be("/BaseFont /"+a1(z.postScriptName)),be("/Subtype /Type1"),typeof z.encoding=="string"&&be("/Encoding /"+z.encoding),be("/FirstChar 32"),be("/LastChar 255"),be(">>"),be("endobj"))},ct=function(z){z.objectNumber=qr();var ie=[];ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Form"}),ie.push({key:"BBox",value:"["+[D(z.x),D(z.y),D(z.x+z.width),D(z.y+z.height)].join(" ")+"]"}),ie.push({key:"Matrix",value:"["+z.matrix.toString()+"]"});var De=z.pages[1].join(`
`);jt({data:De,additionalKeyValues:ie,objectId:z.objectNumber}),be("endobj")},St=function(z,ie){ie||(ie=21);var De=qr(),qe=function(Qt,Sr){var vr,Kr=[],yr=1/(Sr-1);for(vr=0;vr<1;vr+=yr)Kr.push(vr);if(Kr.push(1),Qt[0].offset!=0){var Pn={offset:0,color:Qt[0].color};Qt.unshift(Pn)}if(Qt[Qt.length-1].offset!=1){var Gn={offset:1,color:Qt[Qt.length-1].color};Qt.push(Gn)}for(var Xr="",T=0,K=0;K<Kr.length;K++){for(vr=Kr[K];vr>Qt[T+1].offset;)T++;var te=Qt[T].offset,we=(vr-te)/(Qt[T+1].offset-te),nt=Qt[T].color,gt=Qt[T+1].color;Xr+=re(Math.round((1-we)*nt[0]+we*gt[0]).toString(16))+re(Math.round((1-we)*nt[1]+we*gt[1]).toString(16))+re(Math.round((1-we)*nt[2]+we*gt[2]).toString(16))}return Xr.trim()}(z.colors,ie),rt=[];rt.push({key:"FunctionType",value:"0"}),rt.push({key:"Domain",value:"[0.0 1.0]"}),rt.push({key:"Size",value:"["+ie+"]"}),rt.push({key:"BitsPerSample",value:"8"}),rt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jt({data:qe,additionalKeyValues:rt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),be("endobj"),z.objectNumber=qr(),be("<< /ShadingType "+z.type),be("/ColorSpace /DeviceRGB");var Rt="/Coords ["+D(parseFloat(z.coords[0]))+" "+D(parseFloat(z.coords[1]))+" ";z.type===2?Rt+=D(parseFloat(z.coords[2]))+" "+D(parseFloat(z.coords[3])):Rt+=D(parseFloat(z.coords[2]))+" "+D(parseFloat(z.coords[3]))+" "+D(parseFloat(z.coords[4]))+" "+D(parseFloat(z.coords[5])),be(Rt+="]"),z.matrix&&be("/Matrix ["+z.matrix.toString()+"]"),be("/Function "+De+" 0 R"),be("/Extend [true true]"),be(">>"),be("endobj")},xt=function(z,ie){var De=un(),qe=qr();ie.push({resourcesOid:De,objectOid:qe}),z.objectNumber=qe;var rt=[];rt.push({key:"Type",value:"/Pattern"}),rt.push({key:"PatternType",value:"1"}),rt.push({key:"PaintType",value:"1"}),rt.push({key:"TilingType",value:"1"}),rt.push({key:"BBox",value:"["+z.boundingBox.map(D).join(" ")+"]"}),rt.push({key:"XStep",value:D(z.xStep)}),rt.push({key:"YStep",value:D(z.yStep)}),rt.push({key:"Resources",value:De+" 0 R"}),z.matrix&&rt.push({key:"Matrix",value:"["+z.matrix.toString()+"]"}),jt({data:z.stream,additionalKeyValues:rt,objectId:z.objectNumber}),be("endobj")},Ct=function(z){for(var ie in z.objectNumber=qr(),be("<<"),z)switch(ie){case"opacity":be("/ca "+R(z[ie]));break;case"stroke-opacity":be("/CA "+R(z[ie]))}be(">>"),be("endobj")},Xt=function(z){de(z.resourcesOid,!0),be("<<"),be("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ie in be("/Font <<"),lt)lt.hasOwnProperty(ie)&&(h===!1||h===!0&&p.hasOwnProperty(ie))&&be("/"+ie+" "+lt[ie].objectNumber+" 0 R");be(">>")}(),function(){if(Object.keys(Ze).length>0){for(var ie in be("/Shading <<"),Ze)Ze.hasOwnProperty(ie)&&Ze[ie]instanceof Qm&&Ze[ie].objectNumber>=0&&be("/"+ie+" "+Ze[ie].objectNumber+" 0 R");It.publish("putShadingPatternDict"),be(">>")}}(),function(ie){if(Object.keys(Ze).length>0){for(var De in be("/Pattern <<"),Ze)Ze.hasOwnProperty(De)&&Ze[De]instanceof g.TilingPattern&&Ze[De].objectNumber>=0&&Ze[De].objectNumber<ie&&be("/"+De+" "+Ze[De].objectNumber+" 0 R");It.publish("putTilingPatternDict"),be(">>")}}(z.objectOid),function(){if(Object.keys(Qe).length>0){var ie;for(ie in be("/ExtGState <<"),Qe)Qe.hasOwnProperty(ie)&&Qe[ie].objectNumber>=0&&be("/"+ie+" "+Qe[ie].objectNumber+" 0 R");It.publish("putGStateDict"),be(">>")}}(),function(){for(var ie in be("/XObject <<"),rn)rn.hasOwnProperty(ie)&&rn[ie].objectNumber>=0&&be("/"+ie+" "+rn[ie].objectNumber+" 0 R");It.publish("putXobjectDict"),be(">>")}(),be(">>"),be("endobj")},br=function(z){lr[z.fontName]=lr[z.fontName]||{},lr[z.fontName][z.fontStyle]=z.id},_t=function(z,ie,De,qe,rt){var Rt={id:"F"+(Object.keys(lt).length+1).toString(10),postScriptName:z,fontName:ie,fontStyle:De,encoding:qe,isStandardFont:rt||!1,metadata:{}};return It.publish("addFont",{font:Rt,instance:this}),lt[Rt.id]=Rt,br(Rt),Rt.id},Yr=g.__private__.pdfEscape=g.pdfEscape=function(z,ie){return function(De,qe){var rt,Rt,Qt,Sr,vr,Kr,yr,Pn,Gn;if(Qt=(qe=qe||{}).sourceEncoding||"Unicode",vr=qe.outputEncoding,(qe.autoencode||vr)&&lt[pt].metadata&&lt[pt].metadata[Qt]&&lt[pt].metadata[Qt].encoding&&(Sr=lt[pt].metadata[Qt].encoding,!vr&&lt[pt].encoding&&(vr=lt[pt].encoding),!vr&&Sr.codePages&&(vr=Sr.codePages[0]),typeof vr=="string"&&(vr=Sr[vr]),vr)){for(yr=!1,Kr=[],rt=0,Rt=De.length;rt<Rt;rt++)(Pn=vr[De.charCodeAt(rt)])?Kr.push(String.fromCharCode(Pn)):Kr.push(De[rt]),Kr[rt].charCodeAt(0)>>8&&(yr=!0);De=Kr.join("")}for(rt=De.length;yr===void 0&&rt!==0;)De.charCodeAt(rt-1)>>8&&(yr=!0),rt--;if(!yr)return De;for(Kr=qe.noBOM?[]:[254,255],rt=0,Rt=De.length;rt<Rt;rt++){if((Gn=(Pn=De.charCodeAt(rt))>>8)>>8)throw new Error("Character at position "+rt+" of string '"+De+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Kr.push(Gn),Kr.push(Pn-(Gn<<8))}return String.fromCharCode.apply(void 0,Kr)}(z,ie).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gr=g.__private__.beginPage=function(z){He[++At]=[],er[At]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(z[0]),topRightY:Number(z[1])}},hn(At),Be(He[Y])},$a=function(z,ie){var De,qe,rt;switch(r=ie||r,typeof z=="string"&&(De=N(z.toLowerCase()),Array.isArray(De)&&(qe=De[0],rt=De[1])),Array.isArray(z)&&(qe=z[0]*Ot,rt=z[1]*Ot),isNaN(qe)&&(qe=a[0],rt=a[1]),(qe>14400||rt>14400)&&(La.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),qe=Math.min(14400,qe),rt=Math.min(14400,rt)),a=[qe,rt],r.substr(0,1)){case"l":rt>qe&&(a=[rt,qe]);break;case"p":qe>rt&&(a=[rt,qe])}Gr(a),$n(Jr),be(Mu),oo!==0&&be(oo+" J"),Sl!==0&&be(Sl+" j"),It.publish("addPage",{pageNumber:At})},ws=function(z){z>0&&z<=At&&(He.splice(z,1),er.splice(z,1),At--,Y>At&&(Y=At),this.setPage(Y))},hn=function(z){z>0&&z<=At&&(Y=z)},ln=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return He.length-1},sn=function(z,ie,De){var qe,rt=void 0;return De=De||{},z=z!==void 0?z:lt[pt].fontName,ie=ie!==void 0?ie:lt[pt].fontStyle,qe=z.toLowerCase(),lr[qe]!==void 0&&lr[qe][ie]!==void 0?rt=lr[qe][ie]:lr[z]!==void 0&&lr[z][ie]!==void 0?rt=lr[z][ie]:De.disableWarning===!1&&La.warn("Unable to look up font label for font '"+z+"', '"+ie+"'. Refer to getFontList() for available fonts."),rt||De.noFallback||(rt=lr.times[ie])==null&&(rt=lr.times.normal),rt},ls=g.__private__.putInfo=function(){var z=qr(),ie=function(qe){return qe};for(var De in d!==null&&(ie=Mn.encryptor(z,0)),be("<<"),be("/Producer ("+Yr(ie("jsPDF "+$r.version))+")"),kt)kt.hasOwnProperty(De)&&kt[De]&&be("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+Yr(ie(kt[De]))+")");be("/CreationDate ("+Yr(ie(Z))+")"),be(">>"),be("endobj")},ii=g.__private__.putCatalog=function(z){var ie=(z=z||{}).rootDictionaryObjId||_e;switch(qr(),be("<<"),be("/Type /Catalog"),be("/Pages "+ie+" 0 R"),Jt||(Jt="fullwidth"),Jt){case"fullwidth":be("/OpenAction [3 0 R /FitH null]");break;case"fullheight":be("/OpenAction [3 0 R /FitV null]");break;case"fullpage":be("/OpenAction [3 0 R /Fit]");break;case"original":be("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+Jt;De.substr(De.length-1)==="%"&&(Jt=parseInt(Jt)/100),typeof Jt=="number"&&be("/OpenAction [3 0 R /XYZ null null "+R(Jt)+"]")}switch(nr||(nr="continuous"),nr){case"continuous":be("/PageLayout /OneColumn");break;case"single":be("/PageLayout /SinglePage");break;case"two":case"twoleft":be("/PageLayout /TwoColumnLeft");break;case"tworight":be("/PageLayout /TwoColumnRight")}qt&&be("/PageMode /"+qt),It.publish("putCatalog"),be(">>"),be("endobj")},On=g.__private__.putTrailer=function(){be("trailer"),be("<<"),be("/Size "+(se+1)),be("/Root "+se+" 0 R"),be("/Info "+(se-1)+" 0 R"),d!==null&&be("/Encrypt "+Mn.oid+" 0 R"),be("/ID [ <"+ce+"> <"+ce+"> ]"),be(">>")},Yn=g.__private__.putHeader=function(){be("%PDF-"+b),be("%")},Ts=g.__private__.putXRef=function(){var z="0000000000";be("xref"),be("0 "+(se+1)),be("0000000000 65535 f ");for(var ie=1;ie<=se;ie++)typeof ke[ie]=="function"?be((z+ke[ie]()).slice(-10)+" 00000 n "):ke[ie]!==void 0?be((z+ke[ie]).slice(-10)+" 00000 n "):be("0000000000 00000 n ")},Vi=g.__private__.buildDocument=function(){var z;se=0,xe=0,Ce=[],ke=[],Ie=[],_e=un(),Se=un(),Be(Ce),It.publish("buildDocument"),Yn(),Ae(),function(){It.publish("putAdditionalObjects");for(var De=0;De<Ie.length;De++){var qe=Ie[De];de(qe.objId,!0),be(qe.content),be("endobj")}It.publish("postPutAdditionalObjects")}(),z=[],function(){for(var De in lt)lt.hasOwnProperty(De)&&(h===!1||h===!0&&p.hasOwnProperty(De))&&Ge(lt[De])}(),function(){var De;for(De in Qe)Qe.hasOwnProperty(De)&&Ct(Qe[De])}(),function(){for(var De in rn)rn.hasOwnProperty(De)&&ct(rn[De])}(),function(De){var qe;for(qe in Ze)Ze.hasOwnProperty(qe)&&(Ze[qe]instanceof Qm?St(Ze[qe]):Ze[qe]instanceof S1&&xt(Ze[qe],De))}(z),It.publish("putResources"),z.forEach(Xt),Xt({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources"),d!==null&&(Mn.oid=qr(),be("<<"),be("/Filter /Standard"),be("/V "+Mn.v),be("/R "+Mn.r),be("/U <"+Mn.toHexString(Mn.U)+">"),be("/O <"+Mn.toHexString(Mn.O)+">"),be("/P "+Mn.P),be(">>"),be("endobj")),ls(),ii();var ie=xe;return Ts(),On(),be("startxref"),be(""+ie),be("%%EOF"),Be(He[Y]),Ce.join(`
`)},zr=g.__private__.getBlob=function(z){return new Blob([ht(z)],{type:"application/pdf"})},ka=g.output=g.__private__.output=(In=function(z,ie){switch(typeof(ie=ie||{})=="string"?ie={filename:ie}:ie.filename=ie.filename||"generated.pdf",z){case void 0:return Vi();case"save":g.save(ie.filename);break;case"arraybuffer":return ht(Vi());case"blob":return zr(Vi());case"bloburi":case"bloburl":if(mn.URL!==void 0&&typeof mn.URL.createObjectURL=="function")return mn.URL&&mn.URL.createObjectURL(zr(Vi()))||void 0;La.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",qe=Vi();try{De=hq(qe)}catch{De=hq(unescape(encodeURIComponent(qe)))}return"data:application/pdf;filename="+ie.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(mn)==="[object Window]"){var rt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Rt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ie.pdfObjectUrl&&(rt=ie.pdfObjectUrl,Rt="");var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+rt+'"'+Rt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ie)+");<\/script></body></html>",Sr=mn.open();return Sr!==null&&Sr.document.write(Qt),Sr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(mn)==="[object Window]"){var vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ie.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ie.filename+'" width="500px" height="400px" /></body></html>',Kr=mn.open();if(Kr!==null){Kr.document.write(vr);var yr=this;Kr.document.documentElement.querySelector("#pdfViewer").onload=function(){Kr.document.title=ie.filename,Kr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yr.output("bloburl"))}}return Kr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(mn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ie)+'"></iframe></body></html>',Gn=mn.open();if(Gn!==null&&(Gn.document.write(Pn),Gn.document.title=ie.filename),Gn||typeof safari>"u")return Gn;break;case"datauri":case"dataurl":return mn.document.location.href=this.output("datauristring",ie);default:return null}},In.foo=function(){try{return In.apply(this,arguments)}catch(De){var z=De.stack||"";~z.indexOf(" at ")&&(z=z.split(" at ")[1]);var ie="Error in function "+z.split(`
`)[0].split("<")[0]+": "+De.message;if(!mn.console)throw new Error(ie);mn.console.error(ie,De),mn.alert&&alert(ie)}},In.foo.bar=In,In.foo),$i=function(z){return Array.isArray(Er)===!0&&Er.indexOf(z)>-1};switch(n){case"pt":Ot=1;break;case"mm":Ot=72/25.4;break;case"cm":Ot=72/2.54;break;case"in":Ot=72;break;case"px":Ot=$i("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ot=12;break;case"ex":Ot=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ot=n}var Mn=null;ye(),ae();var Ln=g.__private__.getPageInfo=g.getPageInfo=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:er[z].objId,pageNumber:z,pageContext:er[z]}},Ha=g.__private__.getPageInfoByObjId=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ie in er)if(er[ie].objId===z)break;return Ln(ie)},ut=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:er[Y].objId,pageNumber:Y,pageContext:er[Y]}};g.addPage=function(){return $a.apply(this,arguments),this},g.setPage=function(){return hn.apply(this,arguments),Be.call(this,He[Y]),this},g.insertPage=function(z){return this.addPage(),this.movePage(Y,z),this},g.movePage=function(z,ie){var De,qe;if(z>ie){De=He[z],qe=er[z];for(var rt=z;rt>ie;rt--)He[rt]=He[rt-1],er[rt]=er[rt-1];He[ie]=De,er[ie]=qe,this.setPage(ie)}else if(z<ie){De=He[z],qe=er[z];for(var Rt=z;Rt<ie;Rt++)He[Rt]=He[Rt+1],er[Rt]=er[Rt+1];He[ie]=De,er[ie]=qe,this.setPage(ie)}return this},g.deletePage=function(){return ws.apply(this,arguments),this},g.__private__.text=g.text=function(z,ie,De,qe,rt){var Rt,Qt,Sr,vr,Kr,yr,Pn,Gn,Xr,T=(qe=qe||{}).scope||this;if(typeof z=="number"&&typeof ie=="number"&&(typeof De=="string"||Array.isArray(De))){var K=De;De=ie,ie=z,z=K}if(arguments[3]instanceof fr==0?(Sr=arguments[4],vr=arguments[5],Ea(Pn=arguments[3])==="object"&&Pn!==null||(typeof Sr=="string"&&(vr=Sr,Sr=null),typeof Pn=="string"&&(vr=Pn,Pn=null),typeof Pn=="number"&&(Sr=Pn,Pn=null),qe={flags:Pn,angle:Sr,align:vr})):(I("The transform parameter of text() with a Matrix value"),Xr=rt),isNaN(ie)||isNaN(De)||z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(z.length===0)return T;var te,we="",nt=typeof qe.lineHeightFactor=="number"?qe.lineHeightFactor:pn,gt=T.internal.scaleFactor;function ar(zt){return zt=zt.split("	").join(Array(qe.TabLen||9).join(" ")),Yr(zt,Pn)}function an(zt){for(var Gt,$t=zt.concat(),Wr=[],tn=$t.length;tn--;)typeof(Gt=$t.shift())=="string"?Wr.push(Gt):Array.isArray(zt)&&(Gt.length===1||Gt[1]===void 0&&Gt[2]===void 0)?Wr.push(Gt[0]):Wr.push([Gt[0],Gt[1],Gt[2]]);return Wr}function pa(zt,Gt){var $t;if(typeof zt=="string")$t=Gt(zt)[0];else if(Array.isArray(zt)){for(var Wr,tn,li=zt.concat(),Gi=[],Ti=li.length;Ti--;)typeof(Wr=li.shift())=="string"?Gi.push(Gt(Wr)[0]):Array.isArray(Wr)&&typeof Wr[0]=="string"&&(tn=Gt(Wr[0],Wr[1],Wr[2]),Gi.push([tn[0],tn[1],tn[2]]));$t=Gi}return $t}var Tn=!1,xa=!0;if(typeof z=="string")Tn=!0;else if(Array.isArray(z)){var Ws=z.concat();Qt=[];for(var lo,ta=Ws.length;ta--;)(typeof(lo=Ws.shift())!="string"||Array.isArray(lo)&&typeof lo[0]!="string")&&(xa=!1);Tn=xa}if(Tn===!1)throw new Error('Type of text must be string or Array. "'+z+'" is not recognized.');typeof z=="string"&&(z=z.match(/[\r?\n]/)?z.split(/\r\n|\r|\n/g):[z]);var oi=et/T.internal.scaleFactor,jl=oi*(nt-1);switch(qe.baseline){case"bottom":De-=jl;break;case"top":De+=oi-jl;break;case"hanging":De+=oi-2*jl;break;case"middle":De+=oi/2-jl}if((yr=qe.maxWidth||0)>0&&(typeof z=="string"?z=T.splitTextToSize(z,yr):Object.prototype.toString.call(z)==="[object Array]"&&(z=z.reduce(function(zt,Gt){return zt.concat(T.splitTextToSize(Gt,yr))},[]))),Rt={text:z,x:ie,y:De,options:qe,mutex:{pdfEscape:Yr,activeFontKey:pt,fonts:lt,activeFontSize:et}},It.publish("preProcessText",Rt),z=Rt.text,Sr=(qe=Rt.options).angle,Xr instanceof fr==0&&Sr&&typeof Sr=="number"){Sr*=Math.PI/180,qe.rotationDirection===0&&(Sr=-Sr),P===j&&(Sr=-Sr);var rl=Math.cos(Sr),Am=Math.sin(Sr);Xr=new fr(rl,Am,-Am,rl,0,0)}else Sr&&Sr instanceof fr&&(Xr=Sr);P!==j||Xr||(Xr=ea),(Kr=qe.charSpace||el)!==void 0&&(we+=D(F(Kr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Gn=qe.horizontalScale)!==void 0&&(we+=D(100*Gn)+` Tz
`),qe.lang;var ia=-1,Tl=qe.renderingMode!==void 0?qe.renderingMode:qe.stroke,ji=T.internal.getCurrentPageInfo().pageContext;switch(Tl){case 0:case!1:case"fill":ia=0;break;case 1:case!0:case"stroke":ia=1;break;case 2:case"fillThenStroke":ia=2;break;case 3:case"invisible":ia=3;break;case 4:case"fillAndAddForClipping":ia=4;break;case 5:case"strokeAndAddPathForClipping":ia=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ia=6;break;case 7:case"addToPathForClipping":ia=7}var Sm=ji.usedRenderingMode!==void 0?ji.usedRenderingMode:-1;ia!==-1?we+=ia+` Tr
`:Sm!==-1&&(we+=`0 Tr
`),ia!==-1&&(ji.usedRenderingMode=ia),vr=qe.align||"left";var _s,sf=et*nt,of=T.internal.pageSize.getWidth(),jm=lt[pt];Kr=qe.charSpace||el,yr=qe.maxWidth||0,Pn=Object.assign({autoencode:!0,noBOM:!0},qe.flags);var Bu=[],qi=function(zt){return T.getStringUnitWidth(zt,{font:jm,charSpace:Kr,fontSize:et,doKerning:!1})*et/gt};if(Object.prototype.toString.call(z)==="[object Array]"){var nl;Qt=an(z),vr!=="left"&&(_s=Qt.map(qi));var co,Cl=0;if(vr==="right"){ie-=_s[0],z=[],ta=Qt.length;for(var bn=0;bn<ta;bn++)bn===0?(co=Ur(ie),nl=ha(De)):(co=F(Cl-_s[bn]),nl=-sf),z.push([Qt[bn],co,nl]),Cl=_s[bn]}else if(vr==="center"){ie-=_s[0]/2,z=[],ta=Qt.length;for(var ic=0;ic<ta;ic++)ic===0?(co=Ur(ie),nl=ha(De)):(co=F((Cl-_s[ic])/2),nl=-sf),z.push([Qt[ic],co,nl]),Cl=_s[ic]}else if(vr==="left"){z=[],ta=Qt.length;for(var oe=0;oe<ta;oe++)z.push(Qt[oe])}else if(vr==="justify"&&jm.encoding==="Identity-H"){z=[],ta=Qt.length,yr=yr!==0?yr:of;for(var f=0,m=0;m<ta;m++)if(nl=m===0?ha(De):-sf,co=m===0?Ur(ie):f,m<ta-1){var x=F((yr-_s[m])/(Qt[m].split(" ").length-1)),v=Qt[m].split(" ");z.push([v[0]+" ",co,nl]),f=0;for(var y=1;y<v.length;y++){var E=(qi(v[y-1]+" "+v[y])-qi(v[y]))*gt+x;y==v.length-1?z.push([v[y],E,0]):z.push([v[y]+" ",E,0]),f-=E}}else z.push([Qt[m],co,nl]);z.push(["",f,0])}else{if(vr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(z=[],ta=Qt.length,yr=yr!==0?yr:of,m=0;m<ta;m++){nl=m===0?ha(De):-sf,co=m===0?Ur(ie):0;var k=Qt[m].split(" ").length-1,L=k>0?(yr-_s[m])/k:0;m<ta-1?Bu.push(D(F(L))):Bu.push(0),z.push([Qt[m],co,nl])}}}(typeof qe.R2L=="boolean"?qe.R2L:Ft)===!0&&(z=pa(z,function(zt,Gt,$t){return[zt.split("").reverse().join(""),Gt,$t]})),Rt={text:z,x:ie,y:De,options:qe,mutex:{pdfEscape:Yr,activeFontKey:pt,fonts:lt,activeFontSize:et}},It.publish("postProcessText",Rt),z=Rt.text,te=Rt.mutex.isHex||!1;var q=lt[pt].encoding;q!=="WinAnsiEncoding"&&q!=="StandardEncoding"||(z=pa(z,function(zt,Gt,$t){return[ar(zt),Gt,$t]})),Qt=an(z),z=[];for(var Q,le,fe,Re=Array.isArray(Qt[0])?1:0,$e="",Ke=function(zt,Gt,$t){var Wr="";return $t instanceof fr?($t=typeof qe.angle=="number"?nn($t,new fr(1,0,0,1,zt,Gt)):nn(new fr(1,0,0,1,zt,Gt),$t),P===j&&($t=nn(new fr(1,0,0,-1,0,0),$t)),Wr=$t.join(" ")+` Tm
`):Wr=D(zt)+" "+D(Gt)+` Td
`,Wr},ot=0;ot<Qt.length;ot++){switch($e="",Re){case 1:fe=(te?"<":"(")+Qt[ot][0]+(te?">":")"),Q=parseFloat(Qt[ot][1]),le=parseFloat(Qt[ot][2]);break;case 0:fe=(te?"<":"(")+Qt[ot]+(te?">":")"),Q=Ur(ie),le=ha(De)}Bu!==void 0&&Bu[ot]!==void 0&&($e=Bu[ot]+` Tw
`),ot===0?z.push($e+Ke(Q,le,Xr)+fe):Re===0?z.push($e+fe):Re===1&&z.push($e+Ke(Q,le,Xr)+fe)}z=Re===0?z.join(` Tj
T* `):z.join(` Tj
`),z+=` Tj
`;var Nt=`BT
/`;return Nt+=pt+" "+et+` Tf
`,Nt+=D(et*nt)+` TL
`,Nt+=Gc+`
`,Nt+=we,Nt+=z,be(Nt+="ET"),p[pt]=!0,T};var Oe=g.__private__.clip=g.clip=function(z){return be(z==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Oe("evenodd")},g.__private__.discardPath=g.discardPath=function(){return be("n"),this};var Ar=g.__private__.isValidStyle=function(z){var ie=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(z)!==-1&&(ie=!0),ie};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(z){return Ar(z)&&(u=z),this};var Ia=g.__private__.getStyle=g.getStyle=function(z){var ie=u;switch(z){case"D":case"S":ie="S";break;case"F":ie="f";break;case"FD":case"DF":ie="B";break;case"f":case"f*":case"B":case"B*":ie=z}return ie},qa=g.close=function(){return be("h"),this};g.stroke=function(){return be("S"),this},g.fill=function(z){return qs("f",z),this},g.fillEvenOdd=function(z){return qs("f*",z),this},g.fillStroke=function(z){return qs("B",z),this},g.fillStrokeEvenOdd=function(z){return qs("B*",z),this};var qs=function(z,ie){Ea(ie)==="object"?Dr(ie,z):be(z)},Zo=function(z){z===null||P===j&&z===void 0||(z=Ia(z),be(z))};function Cs(z,ie,De,qe,rt){var Rt=new S1(ie||this.boundingBox,De||this.xStep,qe||this.yStep,this.gState,rt||this.matrix);Rt.stream=this.stream;var Qt=z+"$$"+this.cloneIndex+++"$$";return on(Qt,Rt),Rt}var Dr=function(z,ie){var De=at[z.key],qe=Ze[De];if(qe instanceof Qm)be("q"),be(Zn(ie)),qe.gState&&g.setGState(qe.gState),be(z.matrix.toString()+" cm"),be("/"+De+" sh"),be("Q");else if(qe instanceof S1){var rt=new fr(1,0,0,-1,0,sc());z.matrix&&(rt=rt.multiply(z.matrix||ea),De=Cs.call(qe,z.key,z.boundingBox,z.xStep,z.yStep,rt).id),be("q"),be("/Pattern cs"),be("/"+De+" scn"),qe.gState&&g.setGState(qe.gState),be(ie),be("Q")}},Zn=function(z){switch(z){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},yt=g.moveTo=function(z,ie){return be(D(F(z))+" "+D(ee(ie))+" m"),this},mr=g.lineTo=function(z,ie){return be(D(F(z))+" "+D(ee(ie))+" l"),this},jr=g.curveTo=function(z,ie,De,qe,rt,Rt){return be([D(F(z)),D(ee(ie)),D(F(De)),D(ee(qe)),D(F(rt)),D(ee(Rt)),"c"].join(" ")),this};g.__private__.line=g.line=function(z,ie,De,qe,rt){if(isNaN(z)||isNaN(ie)||isNaN(De)||isNaN(qe)||!Ar(rt))throw new Error("Invalid arguments passed to jsPDF.line");return P===A?this.lines([[De-z,qe-ie]],z,ie,[1,1],rt||"S"):this.lines([[De-z,qe-ie]],z,ie,[1,1]).stroke()},g.__private__.lines=g.lines=function(z,ie,De,qe,rt,Rt){var Qt,Sr,vr,Kr,yr,Pn,Gn,Xr,T,K,te,we;if(typeof z=="number"&&(we=De,De=ie,ie=z,z=we),qe=qe||[1,1],Rt=Rt||!1,isNaN(ie)||isNaN(De)||!Array.isArray(z)||!Array.isArray(qe)||!Ar(rt)||typeof Rt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(yt(ie,De),Qt=qe[0],Sr=qe[1],Kr=z.length,K=ie,te=De,vr=0;vr<Kr;vr++)(yr=z[vr]).length===2?(K=yr[0]*Qt+K,te=yr[1]*Sr+te,mr(K,te)):(Pn=yr[0]*Qt+K,Gn=yr[1]*Sr+te,Xr=yr[2]*Qt+K,T=yr[3]*Sr+te,K=yr[4]*Qt+K,te=yr[5]*Sr+te,jr(Pn,Gn,Xr,T,K,te));return Rt&&qa(),Zo(rt),this},g.path=function(z){for(var ie=0;ie<z.length;ie++){var De=z[ie],qe=De.c;switch(De.op){case"m":yt(qe[0],qe[1]);break;case"l":mr(qe[0],qe[1]);break;case"c":jr.apply(this,qe);break;case"h":qa()}}return this},g.__private__.rect=g.rect=function(z,ie,De,qe,rt){if(isNaN(z)||isNaN(ie)||isNaN(De)||isNaN(qe)||!Ar(rt))throw new Error("Invalid arguments passed to jsPDF.rect");return P===A&&(qe=-qe),be([D(F(z)),D(ee(ie)),D(F(De)),D(F(qe)),"re"].join(" ")),Zo(rt),this},g.__private__.triangle=g.triangle=function(z,ie,De,qe,rt,Rt,Qt){if(isNaN(z)||isNaN(ie)||isNaN(De)||isNaN(qe)||isNaN(rt)||isNaN(Rt)||!Ar(Qt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-z,qe-ie],[rt-De,Rt-qe],[z-rt,ie-Rt]],z,ie,[1,1],Qt,!0),this},g.__private__.roundedRect=g.roundedRect=function(z,ie,De,qe,rt,Rt,Qt){if(isNaN(z)||isNaN(ie)||isNaN(De)||isNaN(qe)||isNaN(rt)||isNaN(Rt)||!Ar(Qt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Sr=4/3*(Math.SQRT2-1);return rt=Math.min(rt,.5*De),Rt=Math.min(Rt,.5*qe),this.lines([[De-2*rt,0],[rt*Sr,0,rt,Rt-Rt*Sr,rt,Rt],[0,qe-2*Rt],[0,Rt*Sr,-rt*Sr,Rt,-rt,Rt],[2*rt-De,0],[-rt*Sr,0,-rt,-Rt*Sr,-rt,-Rt],[0,2*Rt-qe],[0,-Rt*Sr,rt*Sr,-Rt,rt,-Rt]],z+rt,ie,[1,1],Qt,!0),this},g.__private__.ellipse=g.ellipse=function(z,ie,De,qe,rt){if(isNaN(z)||isNaN(ie)||isNaN(De)||isNaN(qe)||!Ar(rt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Rt=4/3*(Math.SQRT2-1)*De,Qt=4/3*(Math.SQRT2-1)*qe;return yt(z+De,ie),jr(z+De,ie-Qt,z+Rt,ie-qe,z,ie-qe),jr(z-Rt,ie-qe,z-De,ie-Qt,z-De,ie),jr(z-De,ie+Qt,z-Rt,ie+qe,z,ie+qe),jr(z+Rt,ie+qe,z+De,ie+Qt,z+De,ie),Zo(rt),this},g.__private__.circle=g.circle=function(z,ie,De,qe){if(isNaN(z)||isNaN(ie)||isNaN(De)||!Ar(qe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(z,ie,De,De,qe)},g.setFont=function(z,ie,De){return De&&(ie=O(ie,De)),pt=sn(z,ie,{disableWarning:!1}),this};var Dn=g.__private__.getFont=g.getFont=function(){return lt[sn.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var z,ie,De={};for(z in lr)if(lr.hasOwnProperty(z))for(ie in De[z]=[],lr[z])lr[z].hasOwnProperty(ie)&&De[z].push(ie);return De},g.addFont=function(z,ie,De,qe,rt){var Rt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Rt.indexOf(arguments[3])!==-1?rt=arguments[3]:arguments[3]&&Rt.indexOf(arguments[3])==-1&&(De=O(De,qe)),_t.call(this,z,ie,De,rt=rt||"Identity-H")};var pn,Jr=t.lineWidth||.200025,ur=g.__private__.getLineWidth=g.getLineWidth=function(){return Jr},$n=g.__private__.setLineWidth=g.setLineWidth=function(z){return Jr=z,be(D(F(z))+" w"),this};g.__private__.setLineDash=$r.API.setLineDash=$r.API.setLineDashPattern=function(z,ie){if(z=z||[],ie=ie||0,isNaN(ie)||!Array.isArray(z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return z=z.map(function(De){return D(F(De))}).join(" "),ie=D(F(ie)),be("["+z+"] "+ie+" d"),this};var ks=g.__private__.getLineHeight=g.getLineHeight=function(){return et*pn};g.__private__.getLineHeight=g.getLineHeight=function(){return et*pn};var Ir=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(z){return typeof(z=z||1.15)=="number"&&(pn=z),this},Gs=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return pn};Ir(t.lineHeight);var Ur=g.__private__.getHorizontalCoordinate=function(z){return F(z)},ha=g.__private__.getVerticalCoordinate=function(z){return P===j?z:er[Y].mediaBox.topRightY-er[Y].mediaBox.bottomLeftY-F(z)},af=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(z){return D(Ur(z))},ma=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(z){return D(ha(z))},Mu=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Te(Mu)},g.__private__.setStrokeColor=g.setDrawColor=function(z,ie,De,qe){return Mu=Pe({ch1:z,ch2:ie,ch3:De,ch4:qe,pdfColorType:"draw",precision:2}),be(Mu),this};var Qo=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Te(Qo)},g.__private__.setFillColor=g.setFillColor=function(z,ie,De,qe){return Qo=Pe({ch1:z,ch2:ie,ch3:De,ch4:qe,pdfColorType:"fill",precision:2}),be(Qo),this};var Gc=t.textColor||"0 g",Jo=g.__private__.getTextColor=g.getTextColor=function(){return Te(Gc)};g.__private__.setTextColor=g.setTextColor=function(z,ie,De,qe){return Gc=Pe({ch1:z,ch2:ie,ch3:De,ch4:qe,pdfColorType:"text",precision:3}),this};var el=t.charSpace,Al=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(el||0)};g.__private__.setCharSpace=g.setCharSpace=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return el=z,this};var oo=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(z){var ie=g.CapJoinStyles[z];if(ie===void 0)throw new Error("Line cap style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return oo=ie,be(ie+" J"),this};var Sl=0;g.__private__.setLineJoin=g.setLineJoin=function(z){var ie=g.CapJoinStyles[z];if(ie===void 0)throw new Error("Line join style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Sl=ie,be(ie+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(z){if(z=z||0,isNaN(z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return be(D(F(z))+" M"),this},g.GState=K3,g.setGState=function(z){(z=typeof z=="string"?Qe[ze[z]]:tl(null,z)).equals(it)||(be("/"+z.id+" gs"),it=z)};var tl=function(z,ie){if(!z||!ze[z]){var De=!1;for(var qe in Qe)if(Qe.hasOwnProperty(qe)&&Qe[qe].equals(ie)){De=!0;break}if(De)ie=Qe[qe];else{var rt="GS"+(Object.keys(Qe).length+1).toString(10);Qe[rt]=ie,ie.id=rt}return z&&(ze[z]=ie.id),It.publish("addGState",ie),ie}};g.addGState=function(z,ie){return tl(z,ie),this},g.saveGraphicsState=function(){return be("q"),ve.push({key:pt,size:et,color:Gc}),this},g.restoreGraphicsState=function(){be("Q");var z=ve.pop();return pt=z.key,et=z.size,Gc=z.color,it=null,this},g.setCurrentTransformationMatrix=function(z){return be(z.toString()+" cm"),this},g.comment=function(z){return be("#"+z),this};var Oa=function(z,ie){var De=z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(Rt){isNaN(Rt)||(De=parseFloat(Rt))}});var qe=ie||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return qe},set:function(Rt){isNaN(Rt)||(qe=parseFloat(Rt))}});var rt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return rt},set:function(Rt){rt=Rt.toString()}}),this},Lu=function(z,ie,De,qe){Oa.call(this,z,ie),this.type="rect";var rt=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return rt},set:function(Qt){isNaN(Qt)||(rt=parseFloat(Qt))}});var Rt=qe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Rt},set:function(Qt){isNaN(Qt)||(Rt=parseFloat(Qt))}}),this},nc=function(){this.page=At,this.currentPage=Y,this.pages=He.slice(0),this.pagesContext=er.slice(0),this.x=Ut,this.y=Nr,this.matrix=or,this.width=Fu(Y),this.height=An(Y),this.outputDestination=Me,this.id="",this.objectNumber=-1};nc.prototype.restore=function(){At=this.page,Y=this.currentPage,er=this.pagesContext,He=this.pages,Ut=this.x,Nr=this.y,or=this.matrix,Dh(Y,this.width),Hi(Y,this.height),Me=this.outputDestination};var ac=function(z,ie,De,qe,rt){En.push(new nc),At=Y=0,He=[],Ut=z,Nr=ie,or=rt,Gr([De,qe])};for(var Wc in g.beginFormObject=function(z,ie,De,qe,rt){return ac(z,ie,De,qe,rt),this},g.endFormObject=function(z){return function(ie){if(Qr[ie])En.pop().restore();else{var De=new nc,qe="Xo"+(Object.keys(rn).length+1).toString(10);De.id=qe,Qr[ie]=qe,rn[qe]=De,It.publish("addFormObject",De),En.pop().restore()}}(z),this},g.doFormObject=function(z,ie){var De=rn[Qr[z]];return be("q"),be(ie.toString()+" cm"),be("/"+De.id+" Do"),be("Q"),this},g.getFormObject=function(z){var ie=rn[Qr[z]];return{x:ie.x,y:ie.y,width:ie.width,height:ie.height,matrix:ie.matrix}},g.save=function(z,ie){return z=z||"generated.pdf",(ie=ie||{}).returnPromise=ie.returnPromise||!1,ie.returnPromise===!1?(Vm(zr(Vi()),z),typeof Vm.unload=="function"&&mn.setTimeout&&setTimeout(Vm.unload,911),this):new Promise(function(De,qe){try{var rt=Vm(zr(Vi()),z);typeof Vm.unload=="function"&&mn.setTimeout&&setTimeout(Vm.unload,911),De(rt)}catch(Rt){qe(Rt.message)}})},$r.API)$r.API.hasOwnProperty(Wc)&&(Wc==="events"&&$r.API.events.length?function(z,ie){var De,qe,rt;for(rt=ie.length-1;rt!==-1;rt--)De=ie[rt][0],qe=ie[rt][1],z.subscribe.apply(z,[De].concat(typeof qe=="function"?[qe]:qe))}(It,$r.API.events):g[Wc]=$r.API[Wc]);function Fu(z){return er[z].mediaBox.topRightX-er[z].mediaBox.bottomLeftX}function Dh(z,ie){er[z].mediaBox.topRightX=ie+er[z].mediaBox.bottomLeftX}function An(z){return er[z].mediaBox.topRightY-er[z].mediaBox.bottomLeftY}function Hi(z,ie){er[z].mediaBox.topRightY=ie+er[z].mediaBox.bottomLeftY}var Kc=g.getPageWidth=function(z){return Fu(z=z||Y)/Ot},Oo=g.setPageWidth=function(z,ie){Dh(z,ie*Ot)},sc=g.getPageHeight=function(z){return An(z=z||Y)/Ot},Et=g.setPageHeight=function(z,ie){Hi(z,ie*Ot)};return g.internal={pdfEscape:Yr,getStyle:Ia,getFont:Dn,getFontSize:Ve,getCharSpace:Al,getTextColor:Jo,getLineHeight:ks,getLineHeightFactor:Gs,getLineWidth:ur,write:Vt,getHorizontalCoordinate:Ur,getVerticalCoordinate:ha,getCoordinateString:af,getVerticalCoordinateString:ma,collections:{},newObject:qr,newAdditionalObject:pe,newObjectDeferred:un,newObjectDeferredBegin:de,getFilters:tt,putStream:jt,events:It,scaleFactor:Ot,pageSize:{getWidth:function(){return Kc(Y)},setWidth:function(z){Oo(Y,z)},getHeight:function(){return sc(Y)},setHeight:function(z){Et(Y,z)}},encryptionOptions:d,encryption:Mn,getEncryptor:function(z){return d!==null?Mn.encryptor(z,0):function(ie){return ie}},output:ka,getNumberOfPages:ln,pages:He,out:be,f2:R,f3:B,getPageInfo:Ln,getPageInfoByObjId:Ha,getCurrentPageInfo:ut,getPDFVersion:w,Point:Oa,Rectangle:Lu,Matrix:fr,hasHotfix:$i},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Kc(Y)},set:function(z){Oo(Y,z)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return sc(Y)},set:function(z){Et(Y,z)},enumerable:!0,configurable:!0}),(function(z){for(var ie=0,De=Lt.length;ie<De;ie++){var qe=_t.call(this,z[ie][0],z[ie][1],z[ie][2],Lt[ie][3],!0);h===!1&&(p[qe]=!0);var rt=z[ie][0].split("-");br({id:qe,fontName:rt[0],fontStyle:rt[1]||""})}It.publish("addFonts",{fonts:lt,dictionary:lr})}).call(g,Lt),pt="F1",$a(a,r),It.publish("initialized"),g}n1.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},n1.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},n1.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},n1.prototype.processOwnerPassword=function(t,e){return cI(lI(e).substr(0,5),t)},n1.prototype.encryptor=function(t,e){var r=lI(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return cI(r,n)}},K3.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Ea(t)!==Ea(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},$r.API={events:[]},$r.version="3.0.3";var Ds=$r.API,SD=1,wg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ug=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vn=function(t){return t.toFixed(2)},Yh=function(t){return t.toFixed(5)};Ds.__acroform__={};var ec=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},xq=function(t){return t*SD},Nd=function(t){var e=new Hoe,r=Pr.internal.getHeight(t)||0,n=Pr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(vn(n)),Number(vn(r))],e},hHe=Ds.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},mHe=Ds.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},pHe=Ds.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Qs=Ds.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pHe(t,e-1)},Js=Ds.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return hHe(t,e-1)},ei=Ds.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mHe(t,e-1)},gHe=Ds.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(vn(c.lowerLeft_X)),Number(vn(c.lowerLeft_Y)),Number(vn(c.upperRight_X)),Number(vn(c.upperRight_Y))]},xHe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=uI(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+vn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Nd(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},uI=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(R){return R.split(`
`)}):a.map(function(R){return[R]});var s=r,o=Pr.internal.getHeight(t)||0;o=o<0?-o:o;var l=Pr.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(R,B,F){if(R+1<a.length){var ee=B+" "+a[R+1][0];return M5(ee,t,F).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,h=M5("3",t,s).height,p=t.multiline?o-s:(o-h)/2,g=p+=2,b=0,w=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+M5(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var N="",A=0,j=0;j<a.length;j++)if(a.hasOwnProperty(j)){var P=!1;if(a[j].length!==1&&_!==a[j].length-1){if((h+2)*(A+2)+2>o)continue e;N+=a[j][_],P=!0,w=j,j--}else{N=(N+=a[j][_]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var U=parseInt(j),G=c(U,N,s),O=j>=a.length-1;if(G&&!O){N+=" ",_=0;continue}if(G||O){if(O)w=U;else if(t.multiline&&(h+2)*(A+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(A+2)+2>o)continue e;w=U}}for(var D="",I=b;I<=w;I++){var V=a[I];if(t.multiline){if(I===w){D+=V[_]+" ",_=(_+1)%V.length;continue}if(I===b){D+=V[V.length-1]+" ";continue}}D+=V[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,d=M5(D,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=vn(u)+" "+vn(g)+` Td
`,e+="("+wg(D)+`) Tj
`,e+=-vn(u)+` 0 Td
`,g=-(s+2),d=0,b=P?w:w+1,A++,N=""}break}return n.text=e,n.fontSize=s,n},M5=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},vHe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bHe=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},yHe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(pd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(vHe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");SD=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new qoe,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&bHe(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=gHe(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Pr.createDefaultAppearanceStream(l),Ea(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=xHe(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var h="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var g=l.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var b=g[o];typeof b=="function"&&(b=b.call(a,l)),h+="/"+o+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(a,l)),h+="/"+o+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(w,_){for(var N in w)if(w.hasOwnProperty(N)){var A=N,j=w[N];_.internal.newObjectDeferredBegin(j.objId,!0),Ea(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete w[A]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},$oe=Ds.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),Ea(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+wg(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},GT=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+wg(n(t))+")"},Dd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Dd.prototype.toString=function(){return this.objId+" 0 R"},Dd.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Dd.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:$oe(a,this.objId,this.scope)}):a instanceof Dd?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var Hoe=function(){Dd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ec(Hoe,Dd);var qoe=function(){Dd.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+wg(r(t))+")"}},set:function(r){t=r}})};ec(qoe,Dd);var pd=function t(){Dd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qs(e,3)},set:function(N){N?this.F=Js(e,3):this.F=ei(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof X3)return;s="FieldObject"+t.FieldNum++}var N=function(A){return A};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+wg(N(s))+")"},set:function(N){s=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(N){s=N}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/SD:u},set:function(N){u=N}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(N){d=N}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof X3||this instanceof Ap))return GT(h,this.objId,this.scope)},set:function(N){N=N.toString(),h=N}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Qi==0?GT(p,this.objId,this.scope):p},set:function(N){N=N.toString(),p=this instanceof Qi==0?N.substr(0,1)==="("?Ug(N.substr(1,N.length-2)):Ug(N):N}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi==1?Ug(p.substr(1,p.length-1)):p},set:function(N){N=N.toString(),p=this instanceof Qi==1?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Qi==0?GT(g,this.objId,this.scope):g},set:function(N){N=N.toString(),g=this instanceof Qi==0?N.substr(0,1)==="("?Ug(N.substr(1,N.length-2)):Ug(N):N}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qi==1?Ug(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof Qi==1?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(N){N=!!N,w=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(N){b=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,1)},set:function(N){N?this.Ff=Js(this.Ff,1):this.Ff=ei(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,2)},set:function(N){N?this.Ff=Js(this.Ff,2):this.Ff=ei(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,3)},set:function(N){N?this.Ff=Js(this.Ff,3):this.Ff=ei(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');_=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(_){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};ec(pd,Dd);var K1=function(){pd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $oe(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,18)},set:function(r){r?this.Ff=Js(this.Ff,18):this.Ff=ei(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Js(this.Ff,19):this.Ff=ei(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,20)},set:function(r){r?(this.Ff=Js(this.Ff,20),e.sort()):this.Ff=ei(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,22)},set:function(r){r?this.Ff=Js(this.Ff,22):this.Ff=ei(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,23)},set:function(r){r?this.Ff=Js(this.Ff,23):this.Ff=ei(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,27)},set:function(r){r?this.Ff=Js(this.Ff,27):this.Ff=ei(this.Ff,27)}}),this.hasAppearanceStream=!1};ec(K1,pd);var X1=function(){K1.call(this),this.fontName="helvetica",this.combo=!1};ec(X1,K1);var Y1=function(){X1.call(this),this.combo=!0};ec(Y1,X1);var rE=function(){Y1.call(this),this.edit=!0};ec(rE,Y1);var Qi=function(){pd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,15)},set:function(r){r?this.Ff=Js(this.Ff,15):this.Ff=ei(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,16)},set:function(r){r?this.Ff=Js(this.Ff,16):this.Ff=ei(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,17)},set:function(r){r?this.Ff=Js(this.Ff,17):this.Ff=ei(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,26)},set:function(r){r?this.Ff=Js(this.Ff,26):this.Ff=ei(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+wg(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Ea(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ec(Qi,pd);var nE=function(){Qi.call(this),this.pushButton=!0};ec(nE,Qi);var Z1=function(){Qi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ec(Z1,Qi);var X3=function(){var t,e;pd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+wg(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Ea(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ec(X3,pd),Z1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Z1.prototype.createOption=function(t){var e=new X3;return e.Parent=this,e.optionName=t,this.Kids.push(e),wHe.call(this.scope,e),e};var aE=function(){Qi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pr.CheckBox.createAppearanceStream()};ec(aE,Qi);var Ap=function(){pd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,13)},set:function(e){e?this.Ff=Js(this.Ff,13):this.Ff=ei(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,21)},set:function(e){e?this.Ff=Js(this.Ff,21):this.Ff=ei(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,23)},set:function(e){e?this.Ff=Js(this.Ff,23):this.Ff=ei(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,24)},set:function(e){e?this.Ff=Js(this.Ff,24):this.Ff=ei(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,25)},set:function(e){e?this.Ff=Js(this.Ff,25):this.Ff=ei(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,26)},set:function(e){e?this.Ff=Js(this.Ff,26):this.Ff=ei(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ec(Ap,pd);var sE=function(){Ap.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qs(this.Ff,14)},set:function(t){t?this.Ff=Js(this.Ff,14):this.Ff=ei(this.Ff,14)}}),this.password=!0};ec(sE,Ap);var Pr={CheckBox:{createAppearanceStream:function(){return{N:{On:Pr.CheckBox.YesNormal},D:{On:Pr.CheckBox.YesPushDown,Off:Pr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Nd(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=uI(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+vn(Pr.internal.getWidth(t))+" "+vn(Pr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+vn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Nd(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Pr.internal.getHeight(t),o=Pr.internal.getWidth(t),l=uI(t,t.caption);return a.push("1 g"),a.push("0 0 "+vn(o)+" "+vn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vn(o-1)+" "+vn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+vn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Nd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vn(Pr.internal.getWidth(t))+" "+vn(Pr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Pr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Pr.RadioButton.Circle.YesNormal,e.D[t]=Pr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Nd(t);e.scope=t.scope;var r=[],n=Pr.internal.getWidth(t)<=Pr.internal.getHeight(t)?Pr.internal.getWidth(t)/4:Pr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Pr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Yh(Pr.internal.getWidth(t)/2)+" "+Yh(Pr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Nd(t);e.scope=t.scope;var r=[],n=Pr.internal.getWidth(t)<=Pr.internal.getHeight(t)?Pr.internal.getWidth(t)/4:Pr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Pr.internal.Bezier_C).toFixed(5)),o=Number((n*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Yh(Pr.internal.getWidth(t)/2)+" "+Yh(Pr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Yh(Pr.internal.getWidth(t)/2)+" "+Yh(Pr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Nd(t);e.scope=t.scope;var r=[],n=Pr.internal.getWidth(t)<=Pr.internal.getHeight(t)?Pr.internal.getWidth(t)/4:Pr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Yh(Pr.internal.getWidth(t)/2)+" "+Yh(Pr.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Pr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Pr.RadioButton.Cross.YesNormal,e.D[t]=Pr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Nd(t);e.scope=t.scope;var r=[],n=Pr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+vn(Pr.internal.getWidth(t)-2)+" "+vn(Pr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(vn(n.x1.x)+" "+vn(n.x1.y)+" m"),r.push(vn(n.x2.x)+" "+vn(n.x2.y)+" l"),r.push(vn(n.x4.x)+" "+vn(n.x4.y)+" m"),r.push(vn(n.x3.x)+" "+vn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Nd(t);e.scope=t.scope;var r=Pr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+vn(Pr.internal.getWidth(t))+" "+vn(Pr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vn(Pr.internal.getWidth(t)-2)+" "+vn(Pr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(vn(r.x1.x)+" "+vn(r.x1.y)+" m"),n.push(vn(r.x2.x)+" "+vn(r.x2.y)+" l"),n.push(vn(r.x4.x)+" "+vn(r.x4.y)+" m"),n.push(vn(r.x3.x)+" "+vn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Nd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vn(Pr.internal.getWidth(t))+" "+vn(Pr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Pr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Pr.internal.getWidth(t),r=Pr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Pr.internal.getWidth=function(t){var e=0;return Ea(t)==="object"&&(e=xq(t.Rect[2])),e},Pr.internal.getHeight=function(t){var e=0;return Ea(t)==="object"&&(e=xq(t.Rect[3])),e};var wHe=Ds.addField=function(t){if(yHe(this,t),!(t instanceof pd))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ds.AcroFormChoiceField=K1,Ds.AcroFormListBox=X1,Ds.AcroFormComboBox=Y1,Ds.AcroFormEditBox=rE,Ds.AcroFormButton=Qi,Ds.AcroFormPushButton=nE,Ds.AcroFormRadioButton=Z1,Ds.AcroFormCheckBox=aE,Ds.AcroFormTextField=Ap,Ds.AcroFormPasswordField=sE,Ds.AcroFormAppearance=Pr,Ds.AcroForm={ChoiceField:K1,ListBox:X1,ComboBox:Y1,EditBox:rE,Button:Qi,PushButton:nE,RadioButton:Z1,CheckBox:aE,TextField:Ap,PasswordField:sE,Appearance:Pr},$r.AcroForm={ChoiceField:K1,ListBox:X1,ComboBox:Y1,EditBox:rE,Button:Qi,PushButton:nE,RadioButton:Z1,CheckBox:aE,TextField:Ap,PasswordField:sE,Appearance:Pr};$r.AcroForm;function Goe(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(R,B){var F,ee,Z,ce,ne,ae=r;if((B=B||r)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(G(R))for(ne in n)for(Z=n[ne],F=0;F<Z.length;F+=1){for(ce=!0,ee=0;ee<Z[F].length;ee+=1)if(Z[F][ee]!==void 0&&Z[F][ee]!==R[ee]){ce=!1;break}if(ce===!0){ae=ne;break}}else for(ne in n)for(Z=n[ne],F=0;F<Z.length;F+=1){for(ce=!0,ee=0;ee<Z[F].length;ee+=1)if(Z[F][ee]!==void 0&&Z[F][ee]!==R.charCodeAt(ee)){ce=!1;break}if(ce===!0){ae=ne;break}}return ae===r&&B!==r&&(ae=B),ae},s=function R(B){for(var F=this.internal.write,ee=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:B.width}),ce.push({key:"Height",value:B.height}),B.colorSpace===N.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===N.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var ne="",ae=0,me=B.transparency.length;ae<me;ae++)ne+=B.transparency[ae]+" "+B.transparency[ae]+" ";ce.push({key:"Mask",value:"["+ne+"]"})}B.sMask!==void 0&&ce.push({key:"SMask",value:B.objectId+1+" 0 R"});var Ee=B.filter!==void 0?["/"+B.filter]:void 0;if(ee({data:B.data,additionalKeyValues:ce,alreadyAppliedFilters:Ee,objectId:B.objectId}),F("endobj"),"sMask"in B&&B.sMask!==void 0){var ye,H=(ye=B.sMaskBitsPerComponent)!==null&&ye!==void 0?ye:B.bitsPerComponent,Y={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:H,data:B.sMask};"filter"in B&&(Y.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(H," /Columns ").concat(B.width),Y.filter=B.filter),R.call(this,Y)}if(B.colorSpace===N.INDEXED){var X=this.internal.newObject();ee({data:D(new Uint8Array(B.palette)),objectId:X}),F("endobj")}},o=function(){var R=this.internal.collections[e+"images"];for(var B in R)s.call(this,R[B])},l=function(){var R,B=this.internal.collections[e+"images"],F=this.internal.write;for(var ee in B)F("/I"+(R=B[ee]).index,R.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var R=this.internal.collections[e+"images"];return c.call(this),R},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(R){return typeof t["process"+R.toUpperCase()]=="function"},p=function(R){return Ea(R)==="object"&&R.nodeType===1},g=function(R,B){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var F=""+R.getAttribute("src");if(F.indexOf("data:image/")===0)return tE(unescape(F).split("base64,").pop());var ee=t.loadFile(F,!0);if(ee!==void 0)return ee}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var Z;switch(B){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return tE(R.toDataURL(Z,1).split("base64,").pop())}},b=function(R){var B=this.internal.collections[e+"images"];if(B){for(var F in B)if(R===B[F].alias)return B[F]}},w=function(R,B,F){return R||B||(R=-96,B=-96),R<0&&(R=-1*F.width*72/R/this.internal.scaleFactor),B<0&&(B=-1*F.height*72/B/this.internal.scaleFactor),R===0&&(R=B*F.width/F.height),B===0&&(B=R*F.height/F.width),[R,B]},_=function(R,B,F,ee,Z,ce){var ne=w.call(this,F,ee,Z),ae=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,Ee=u.call(this);if(F=ne[0],ee=ne[1],Ee[Z.index]=Z,ce){ce*=Math.PI/180;var ye=Math.cos(ce),H=Math.sin(ce),Y=function(re){return re.toFixed(4)},X=[Y(ye),Y(H),Y(-1*H),Y(ye),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,ae(R),me(B+ee),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([ae(F),"0","0",ae(ee),"0","0","cm"].join(" "))):this.internal.write([ae(F),"0","0",ae(ee),ae(R),me(B+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},N=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=t.__addimage__.sHashCode=function(R){var B,F,ee=0;if(typeof R=="string")for(F=R.length,B=0;B<F;B++)ee=(ee<<5)-ee+R.charCodeAt(B),ee|=0;else if(G(R))for(F=R.byteLength/2,B=0;B<F;B++)ee=(ee<<5)-ee+R[B],ee|=0;return ee},P=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var B=!0;return R.length===0&&(B=!1),R.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(B=!1),B},U=t.__addimage__.extractImageFromDataUrl=function(R){if(R==null||!(R=R.trim()).startsWith("data:"))return null;var B=R.indexOf(",");return B<0?null:R.substring(0,B).trim().endsWith("base64")?R.substring(B+1):null};t.__addimage__.isArrayBuffer=function(R){return R instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(R){return R instanceof Int8Array||R instanceof Uint8Array||R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array},O=t.__addimage__.binaryStringToUint8Array=function(R){for(var B=R.length,F=new Uint8Array(B),ee=0;ee<B;ee++)F[ee]=R.charCodeAt(ee);return F},D=t.__addimage__.arrayBufferToBinaryString=function(R){for(var B="",F=G(R)?R:new Uint8Array(R),ee=0;ee<F.length;ee+=8192)B+=String.fromCharCode.apply(null,F.subarray(ee,ee+8192));return B};t.addImage=function(){var R,B,F,ee,Z,ce,ne,ae,me;if(typeof arguments[1]=="number"?(B=r,F=arguments[1],ee=arguments[2],Z=arguments[3],ce=arguments[4],ne=arguments[5],ae=arguments[6],me=arguments[7]):(B=arguments[1],F=arguments[2],ee=arguments[3],Z=arguments[4],ce=arguments[5],ne=arguments[6],ae=arguments[7],me=arguments[8]),Ea(R=arguments[0])==="object"&&!p(R)&&"imageData"in R){var Ee=R;R=Ee.imageData,B=Ee.format||B||r,F=Ee.x||F||0,ee=Ee.y||ee||0,Z=Ee.w||Ee.width||Z,ce=Ee.h||Ee.height||ce,ne=Ee.alias||ne,ae=Ee.compression||ae,me=Ee.rotation||Ee.angle||me}var ye=this.internal.getFilters();if(ae===void 0&&ye.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(F)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var H=I.call(this,R,B,ne,ae);return _.call(this,F,ee,Z,ce,H,me),this};var I=function(R,B,F,ee){var Z,ce,ne;if(typeof R=="string"&&a(R)===r){R=unescape(R);var ae=V(R,!1);(ae!==""||(ae=t.loadFile(R,!0))!==void 0)&&(R=ae)}if(p(R)&&(R=g(R,B)),B=a(R,B),!h(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((ne=F)==null||ne.length===0)&&(F=function(me){return typeof me=="string"||G(me)?j(me):G(me.data)?j(me.data):null}(R)),(Z=b.call(this,F))||(R instanceof Uint8Array||B==="RGBA"||(ce=R,R=O(R)),Z=this["process"+B.toUpperCase()](R,d.call(this),F,function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in t.image_compression?me:A.NONE}(ee),ce)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},V=t.__addimage__.convertBase64ToBinaryString=function(R,B){B=typeof B!="boolean"||B;var F,ee="";if(typeof R=="string"){var Z;F=(Z=U(R))!==null&&Z!==void 0?Z:R;try{ee=tE(F)}catch(ce){if(B)throw P(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(R){var B,F,ee="";if(p(R)&&(R=g(R)),typeof R=="string"&&a(R)===r&&((ee=V(R,!1))===""&&(ee=t.loadFile(R)||""),R=ee),F=a(R),!h(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(R instanceof Uint8Array||(R=O(R)),!(B=this["process"+F.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=F,B}})($r.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};$r.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(w.objId),A=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+g(N(n.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(N(A))+") >>",w.content=s;var j=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+j,n.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(w.objId,"0 R",_.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var P=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(b(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var U=this.annotations._nameMap[n.options.name];n.options.pageNumber=U.page,n.options.top=U.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var G=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+G+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}($r.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=t.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&a.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(w){var _=0,N=r,A="",j=0;for(_=0;_<w.length;_+=1)N[w.charCodeAt(_)]!==void 0?(j++,typeof(N=N[w.charCodeAt(_)])=="number"&&(A+=String.fromCharCode(N),N=r,j=0),_===w.length-1&&(N=r,A+=w.charAt(_-(j-1)),_-=j-1,j=0)):(N=r,A+=w.charAt(_-j),_-=j,j=0);return A};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(w,_,N){return o(w)?s(w)===!1?-1:!u(w)||!o(_)&&!o(N)||!o(N)&&l(_)||l(w)&&!o(_)||l(w)&&c(_)||l(w)&&l(_)?0:d(w)&&o(_)&&!l(_)&&o(N)&&u(N)?3:l(w)||!o(N)?1:2:-1},g=function(w){var _=0,N=0,A=0,j="",P="",U="",G=(w=w||"").split("\\s+"),O=[];for(_=0;_<G.length;_+=1){for(O.push(""),N=0;N<G[_].length;N+=1)j=G[_][N],P=G[_][N-1],U=G[_][N+1],o(j)?(A=p(j,P,U),O[_]+=A!==-1?String.fromCharCode(e[j.charCodeAt(0)][A]):j):O[_]+=j;O[_]=h(O[_])}return O.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var w,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(_)){var A=0;for(N=[],A=0;A<_.length;A+=1)Array.isArray(_[A])?N.push([g(_[A][0]),_[A][1],_[A][2]]):N.push([g(_[A])]);w=N}else w=g(_);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",b])}($r.API),$r.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}($r.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,w=0,_=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var N=u.maxWidth;N>0?typeof c=="string"?c=this.splitTextToSize(c,N):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,P){return j.concat(_.splitTextToSize(P,N))},[])):c=Array.isArray(c)?c:[c];for(var A=0;A<c.length;A++)g<(w=this.getStringUnitWidth(c[A],{font:h})*d)&&(g=w);return g!==0&&(b=c.length),{w:g/=p,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,g&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,h,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,b,w,_,N=[],A=[],j=[],P={},U={},G=[],O=[],D=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,V=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,R=p.margins||Object.assign({width:this.getPageWidth()},e),B=typeof p.padding=="number"?p.padding:3,F=p.headerBackgroundColor||"#c8c8c8",ee=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=ee,this.setFontSize(V),h==null)A=N=Object.keys(d[0]),j=N.map(function(){return"left"});else if(Array.isArray(h)&&Ea(h[0])==="object")for(N=h.map(function(Ee){return Ee.name}),A=h.map(function(Ee){return Ee.prompt||Ee.name||""}),j=h.map(function(Ee){return Ee.align||"left"}),g=0;g<h.length;g+=1)U[h[g].name]=.7499990551181103*h[g].width;else Array.isArray(h)&&typeof h[0]=="string"&&(A=N=h,j=N.map(function(){return"left"}));if(D||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<N.length;g+=1){for(P[_=N[g]]=d.map(function(Ee){return Ee[_]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(A[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=P[_],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)G.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[_]=Math.max.apply(null,G)+B+B,G=[]}if(I){var Z={};for(g=0;g<N.length;g+=1)Z[N[g]]={},Z[N[g]].text=A[g],Z[N[g]].align=j[g];var ce=l.call(this,Z,U);O=N.map(function(Ee){return new s(c,u,U[Ee],ce,Z[Ee].text,void 0,Z[Ee].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var ne=h.reduce(function(Ee,ye){return Ee[ye.name]=ye.align,Ee},{});for(g=0;g<d.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:d[g]},this);var ae=l.call(this,d[g],U);for(w=0;w<N.length;w+=1){var me=d[g][N[w]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:w,data:me},this),o.call(this,new s(c,u,U[N[w]],ae,me,g+2,ne[N[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(g){var b=c[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/p+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}($r.API);var Woe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Koe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dI=Goe(Koe),Xoe=[100,200,300,400,500,600,700,800,900],_He=Goe(Xoe);function WT(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Woe[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof dI[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function vq(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var NHe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},bq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yq(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function wq(t){return t.trimLeft()}function EHe(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function AHe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var L5,_q,Nq,zg,F5,Eq,Aq,Sq,KT=["times"];function jq(t,e,r,n,a){var s=4,o=Cq;switch(a){case $r.API.image_compression.FAST:s=1,o=Tq;break;case $r.API.image_compression.MEDIUM:s=6,o=kq;break;case $r.API.image_compression.SLOW:s=9,o=Iq}t=function(c,u,d,h){for(var p,g=c.length/u,b=new Uint8Array(c.length+g),w=[SHe,Tq,Cq,kq,Iq],_=0;_<g;_+=1){var N=_*u,A=c.subarray(N,N+u);if(h)b.set(h(A,d,p),N+_);else{for(var j=w.length,P=[],U=0;U<j;U+=1)P[U]=w[U](A,d,p);var G=THe(P.concat());b.set(P[G],N+_)}p=A}return b}(t,e,Math.ceil(r*n/8),o);var l=aI(t,{level:s});return $r.API.__addimage__.arrayBufferToBinaryString(l)}function SHe(t){var e=Array.apply([],t);return e.unshift(0),e}function Tq(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function Cq(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=t[s]-o+256&255}return a}function kq(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function Iq(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=jHe(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-o+256&255}return a}function jHe(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function THe(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function XT(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return Yoe(t,a)>>s&o}function Oq(t,e,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,h){if(d+1<u.byteLength)u.setUint16(d,h,!1);else{var p=h>>8&255;u.setUint8(d,p)}})(t,s,Yoe(t,s)&~(l<<o)&65535|c)}function Yoe(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function CHe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],h=0,p=null,g=0,b=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],1&w||(p=null),g=w>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,P=t[e++],U=P>>6&1,G=1<<1+(7&P),O=l,D=c,I=!1;P>>7&&(I=!0,O=e,D=G,e+=3*G);var V=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:_,y:N,width:A,height:j,has_local_palette:I,palette_offset:O,palette_size:D,data_offset:V,data_length:e-V,transparent_index:p,interlaced:!!U,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(B){if(B<0||B>=d.length)throw new Error("Frame index out of range.");return d[B]},this.decodeAndBlitFrameBGRA=function(B,F){var ee=this.frameInfo(B),Z=ee.width*ee.height,ce=new Uint8Array(Z);Pq(t,ee.data_offset,ce,Z);var ne=ee.palette_offset,ae=ee.transparent_index;ae===null&&(ae=256);var me=ee.width,Ee=r-me,ye=me,H=4*(ee.y*r+ee.x),Y=4*((ee.y+ee.height)*r+ee.x),X=H,re=4*Ee;ee.interlaced===!0&&(re+=4*r*7);for(var se=8,ke=0,Ce=ce.length;ke<Ce;++ke){var xe=ce[ke];if(ye===0&&(ye=me,(X+=re)>=Y&&(re=4*Ee+4*r*(se-1),X=H+(me+Ee)*(se<<1),se>>=1)),xe===ae)X+=4;else{var Ie=t[ne+3*xe],He=t[ne+3*xe+1],Ue=t[ne+3*xe+2];F[X++]=Ue,F[X++]=He,F[X++]=Ie,F[X++]=255}--ye}},this.decodeAndBlitFrameRGBA=function(B,F){var ee=this.frameInfo(B),Z=ee.width*ee.height,ce=new Uint8Array(Z);Pq(t,ee.data_offset,ce,Z);var ne=ee.palette_offset,ae=ee.transparent_index;ae===null&&(ae=256);var me=ee.width,Ee=r-me,ye=me,H=4*(ee.y*r+ee.x),Y=4*((ee.y+ee.height)*r+ee.x),X=H,re=4*Ee;ee.interlaced===!0&&(re+=4*r*7);for(var se=8,ke=0,Ce=ce.length;ke<Ce;++ke){var xe=ce[ke];if(ye===0&&(ye=me,(X+=re)>=Y&&(re=4*Ee+4*r*(se-1),X=H+(me+Ee)*(se<<1),se>>=1)),xe===ae)X+=4;else{var Ie=t[ne+3*xe],He=t[ne+3*xe+1],Ue=t[ne+3*xe+2];F[X++]=Ie,F[X++]=He,F[X++]=Ue,F[X++]=255}--ye}}}function Pq(t,e,r,n){for(var a=t[e++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,h=0,p=0,g=t[e++],b=new Int32Array(4096),w=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<c)break;var _=h&u;if(h>>=c,d-=c,_!==s){if(_===o)break;for(var N=_<l?_:w,A=0,j=N;j>s;)j=b[j]>>8,++A;var P=j;if(p+A+(N!==_?1:0)>n)return void La.log("Warning, gif stream longer than expected.");r[p++]=P;var U=p+=A;for(N!==_&&(r[p++]=P),j=N;A--;)j=b[j],r[--U]=255&j,j>>=8;w!==null&&l<4096&&(b[l++]=w<<8|P,l>=u+1&&c<12&&(++c,u=u<<1|1)),w=_}else l=o+1,u=(1<<(c=a+1))-1,w=null}return p!==n&&La.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function YT(t){var e,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),p=new Array(65535),g=new Array(64),b=new Array(64),w=[],_=0,N=7,A=new Array(64),j=new Array(64),P=new Array(64),U=new Array(256),G=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(H,Y){for(var X=0,re=0,se=new Array,ke=1;ke<=16;ke++){for(var Ce=1;Ce<=H[ke];Ce++)se[Y[re]]=[],se[Y[re]][0]=X,se[Y[re]][1]=ke,re++,X++;X*=2}return se}function ne(H){for(var Y=H[0],X=H[1]-1;X>=0;)Y&1<<X&&(_|=1<<N),X--,--N<0&&(_==255?(ae(255),ae(0)):ae(_),N=7,_=0)}function ae(H){w.push(H)}function me(H){ae(H>>8&255),ae(255&H)}function Ee(H,Y,X,re,se){for(var ke,Ce=se[0],xe=se[240],Ie=function(et,Jt){var Ve,Ft,qt,Wt,nr,Xe,Kt,kt,pt,Ot,Ut=0;for(pt=0;pt<8;++pt){Ve=et[Ut],Ft=et[Ut+1],qt=et[Ut+2],Wt=et[Ut+3],nr=et[Ut+4],Xe=et[Ut+5],Kt=et[Ut+6];var Nr=Ve+(kt=et[Ut+7]),or=Ve-kt,lt=Ft+Kt,lr=Ft-Kt,ve=qt+Xe,Ze=qt-Xe,at=Wt+nr,Qe=Wt-nr,ze=Nr+at,it=Nr-at,At=lt+ve,er=lt-ve;et[Ut]=ze+At,et[Ut+4]=ze-At;var It=.707106781*(er+it);et[Ut+2]=it+It,et[Ut+6]=it-It;var Er=.382683433*((ze=Qe+Ze)-(er=lr+or)),rn=.5411961*ze+Er,Qr=1.306562965*er+Er,En=.707106781*(At=Ze+lr),fr=or+En,nn=or-En;et[Ut+5]=nn+rn,et[Ut+3]=nn-rn,et[Ut+1]=fr+Qr,et[Ut+7]=fr-Qr,Ut+=8}for(Ut=0,pt=0;pt<8;++pt){Ve=et[Ut],Ft=et[Ut+8],qt=et[Ut+16],Wt=et[Ut+24],nr=et[Ut+32],Xe=et[Ut+40],Kt=et[Ut+48];var ea=Ve+(kt=et[Ut+56]),on=Ve-kt,In=Ft+Kt,qr=Ft-Kt,un=qt+Xe,de=qt-Xe,pe=Wt+nr,_e=Wt-nr,Se=ea+pe,Te=ea-pe,Pe=In+un,tt=In-un;et[Ut]=Se+Pe,et[Ut+32]=Se-Pe;var jt=.707106781*(tt+Te);et[Ut+16]=Te+jt,et[Ut+48]=Te-jt;var st=.382683433*((Se=_e+de)-(tt=qr+on)),Ae=.5411961*Se+st,Ge=1.306562965*tt+st,ct=.707106781*(Pe=de+qr),St=on+ct,xt=on-ct;et[Ut+40]=xt+Ae,et[Ut+24]=xt-Ae,et[Ut+8]=St+Ge,et[Ut+56]=St-Ge,Ut++}for(pt=0;pt<64;++pt)Ot=et[pt]*Jt[pt],g[pt]=Ot>0?Ot+.5|0:Ot-.5|0;return g}(H,Y),He=0;He<64;++He)b[O[He]]=Ie[He];var Ue=b[0]-X;X=b[0],Ue==0?ne(re[0]):(ne(re[p[ke=32767+Ue]]),ne(h[ke]));for(var Me=63;Me>0&&b[Me]==0;)Me--;if(Me==0)return ne(Ce),X;for(var Be,be=1;be<=Me;){for(var Vt=be;b[be]==0&&be<=Me;)++be;var ht=be-Vt;if(ht>=16){Be=ht>>4;for(var Lt=1;Lt<=Be;++Lt)ne(xe);ht&=15}ke=32767+b[be],ne(se[(ht<<4)+p[ke]]),ne(h[ke]),be++}return Me!=63&&ne(Ce),X}function ye(H){H=Math.min(Math.max(H,1),100),s!=H&&(function(Y){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var se=o((X[re]*Y+50)/100);se=Math.min(Math.max(se,1),255),l[O[re]]=se}for(var ke=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var xe=o((ke[Ce]*Y+50)/100);xe=Math.min(Math.max(xe,1),255),c[O[Ce]]=xe}for(var Ie=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Ue=0;Ue<8;Ue++)for(var Me=0;Me<8;Me++)u[He]=1/(l[O[He]]*Ie[Ue]*Ie[Me]*8),d[He]=1/(c[O[He]]*Ie[Ue]*Ie[Me]*8),He++}(H<50?Math.floor(5e3/H):Math.floor(200-2*H)),s=H)}this.encode=function(H,Y){Y&&ye(Y),w=new Array,_=0,N=7,me(65496),me(65504),me(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),me(1),me(1),ae(0),ae(0),function(){me(65499),me(132),ae(0);for(var Ft=0;Ft<64;Ft++)ae(l[Ft]);ae(1);for(var qt=0;qt<64;qt++)ae(c[qt])}(),function(Ft,qt){me(65472),me(17),ae(8),me(qt),me(Ft),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)}(H.width,H.height),function(){me(65476),me(418),ae(0);for(var Ft=0;Ft<16;Ft++)ae(D[Ft+1]);for(var qt=0;qt<=11;qt++)ae(I[qt]);ae(16);for(var Wt=0;Wt<16;Wt++)ae(V[Wt+1]);for(var nr=0;nr<=161;nr++)ae(R[nr]);ae(1);for(var Xe=0;Xe<16;Xe++)ae(B[Xe+1]);for(var Kt=0;Kt<=11;Kt++)ae(F[Kt]);ae(17);for(var kt=0;kt<16;kt++)ae(ee[kt+1]);for(var pt=0;pt<=161;pt++)ae(Z[pt])}(),me(65498),me(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var X=0,re=0,se=0;_=0,N=7,this.encode.displayName="_encode_";for(var ke,Ce,xe,Ie,He,Ue,Me,Be,be,Vt=H.data,ht=H.width,Lt=H.height,et=4*ht,Jt=0;Jt<Lt;){for(ke=0;ke<et;){for(He=et*Jt+ke,Me=-1,Be=0,be=0;be<64;be++)Ue=He+(Be=be>>3)*et+(Me=4*(7&be)),Jt+Be>=Lt&&(Ue-=et*(Jt+1+Be-Lt)),ke+Me>=et&&(Ue-=ke+Me-et+4),Ce=Vt[Ue++],xe=Vt[Ue++],Ie=Vt[Ue++],A[be]=(G[Ce]+G[xe+256|0]+G[Ie+512|0]>>16)-128,j[be]=(G[Ce+768|0]+G[xe+1024|0]+G[Ie+1280|0]>>16)-128,P[be]=(G[Ce+1280|0]+G[xe+1536|0]+G[Ie+1792|0]>>16)-128;X=Ee(A,u,X,e,n),re=Ee(j,d,re,r,a),se=Ee(P,d,se,r,a),ke+=32}Jt+=8}if(N>=0){var Ve=[];Ve[1]=N+1,Ve[0]=(1<<N+1)-1,ne(Ve)}return me(65497),new Uint8Array(w)},t=t||50,function(){for(var H=String.fromCharCode,Y=0;Y<256;Y++)U[Y]=H(Y)}(),e=ce(D,I),r=ce(B,F),n=ce(V,R),a=ce(ee,Z),function(){for(var H=1,Y=2,X=1;X<=15;X++){for(var re=H;re<Y;re++)p[32767+re]=X,h[32767+re]=[],h[32767+re][1]=X,h[32767+re][0]=re;for(var se=-(Y-1);se<=-H;se++)p[32767+se]=X,h[32767+se]=[],h[32767+se][1]=X,h[32767+se][0]=Y-1+se;H<<=1,Y<<=1}}(),function(){for(var H=0;H<256;H++)G[H]=19595*H,G[H+256|0]=38470*H,G[H+512|0]=7471*H+32768,G[H+768|0]=-11059*H,G[H+1024|0]=-21709*H,G[H+1280|0]=32768*H+8421375,G[H+1536|0]=-27439*H,G[H+1792|0]=-5329*H}(),ye(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Gu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Rq(t){function e(I){if(!I)throw Error("assert :P")}function r(I,V,R){for(var B=0;4>B;B++)if(I[V+B]!=R.charCodeAt(B))return!0;return!1}function n(I,V,R,B,F){for(var ee=0;ee<F;ee++)I[V+ee]=R[B+ee]}function a(I,V,R,B){for(var F=0;F<B;F++)I[V+F]=R}function s(I){return new Int32Array(I)}function o(I,V){for(var R=[],B=0;B<I;B++)R.push(new V);return R}function l(I,V){var R=[];return function B(F,ee,Z){for(var ce=Z[ee],ne=0;ne<ce&&(F.push(Z.length>ee+1?[]:new V),!(Z.length<ee+1));ne++)B(F[ne],ee+1,Z)}(R,0,I),R}var c=function(){var I=this;function V(C,M){for(var W=1<<M-1>>>0;C&W;)W>>>=1;return W?(C&W-1)+W:C}function R(C,M,W,J,ue){e(!(J%W));do C[M+(J-=W)]=ue;while(0<J)}function B(C,M,W,J,ue){if(e(2328>=ue),512>=ue)var he=s(512);else if((he=s(ue))==null)return 0;return function(ge,Ne,je,Le,Ye,vt){var Fe,Je,dt=Ne,Dt=1<<je,mt=s(16),Bt=s(16);for(e(Ye!=0),e(Le!=null),e(ge!=null),e(0<je),Je=0;Je<Ye;++Je){if(15<Le[Je])return 0;++mt[Le[Je]]}if(mt[0]==Ye)return 0;for(Bt[1]=0,Fe=1;15>Fe;++Fe){if(mt[Fe]>1<<Fe)return 0;Bt[Fe+1]=Bt[Fe]+mt[Fe]}for(Je=0;Je<Ye;++Je)Fe=Le[Je],0<Le[Je]&&(vt[Bt[Fe]++]=Je);if(Bt[15]==1)return(Le=new F).g=0,Le.value=vt[0],R(ge,dt,1,Dt,Le),Dt;var Ht,sr=-1,rr=Dt-1,Vr=0,Or=1,Sn=1,Lr=1<<je;for(Je=0,Fe=1,Ye=2;Fe<=je;++Fe,Ye<<=1){if(Or+=Sn<<=1,0>(Sn-=mt[Fe]))return 0;for(;0<mt[Fe];--mt[Fe])(Le=new F).g=Fe,Le.value=vt[Je++],R(ge,dt+Vr,Ye,Lr,Le),Vr=V(Vr,Fe)}for(Fe=je+1,Ye=2;15>=Fe;++Fe,Ye<<=1){if(Or+=Sn<<=1,0>(Sn-=mt[Fe]))return 0;for(;0<mt[Fe];--mt[Fe]){if(Le=new F,(Vr&rr)!=sr){for(dt+=Lr,Ht=1<<(sr=Fe)-je;15>sr&&!(0>=(Ht-=mt[sr]));)++sr,Ht<<=1;Dt+=Lr=1<<(Ht=sr-je),ge[Ne+(sr=Vr&rr)].g=Ht+je,ge[Ne+sr].value=dt-Ne-sr}Le.g=Fe-je,Le.value=vt[Je++],R(ge,dt+(Vr>>je),Ye,Lr,Le),Vr=V(Vr,Fe)}}return Or!=2*Bt[15]-1?0:Dt}(C,M,W,J,ue,he)}function F(){this.value=this.g=0}function ee(){this.value=this.g=0}function Z(){this.G=o(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(qi,ee)}function ce(C,M,W,J){e(C!=null),e(M!=null),e(2147483648>J),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=M,C.pa=W,C.Jd=M,C.Yc=W+J,C.Zc=4<=J?W+J-4+1:W,Ce(C)}function ne(C,M){for(var W=0;0<M--;)W|=Ie(C,128)<<M;return W}function ae(C,M){var W=ne(C,M);return xe(C)?-W:W}function me(C,M,W,J){var ue,he=0;for(e(C!=null),e(M!=null),e(4294967288>J),C.Sb=J,C.Ra=0,C.u=0,C.h=0,4<J&&(J=4),ue=0;ue<J;++ue)he+=M[W+ue]<<8*ue;C.Ra=he,C.bb=J,C.oa=M,C.pa=W}function Ee(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<Cl-8>>>0,++C.bb,C.u-=8;re(C)&&(C.h=1,C.u=0)}function ye(C,M){if(e(0<=M),!C.h&&M<=co){var W=X(C)&nl[M];return C.u+=M,Ee(C),W}return C.h=1,C.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(C){return C.Ra>>>(C.u&Cl-1)>>>0}function re(C){return e(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>Cl}function se(C,M){C.u=M,C.h=re(C)}function ke(C){C.u>=bn&&(e(C.u>=bn),Ee(C))}function Ce(C){e(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(e(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function xe(C){return ne(C,1)}function Ie(C,M){var W=C.Ca;0>C.b&&Ce(C);var J=C.b,ue=W*M>>>8,he=(C.I>>>J>ue)+0;for(he?(W-=ue,C.I-=ue+1<<J>>>0):W=ue+1,J=W,ue=0;256<=J;)ue+=8,J>>=8;return J=7^ue+ic[J],C.b-=J,C.Ca=(W<<J)-1,he}function He(C,M,W){C[M+0]=W>>24&255,C[M+1]=W>>16&255,C[M+2]=W>>8&255,C[M+3]=255&W}function Ue(C,M){return C[M+0]|C[M+1]<<8}function Me(C,M){return Ue(C,M)|C[M+2]<<16}function Be(C,M){return Ue(C,M)|Ue(C,M+2)<<16}function be(C,M){var W=1<<M;return e(C!=null),e(0<M),C.X=s(W),C.X==null?0:(C.Mb=32-M,C.Xa=M,1)}function Vt(C,M){e(C!=null),e(M!=null),e(C.Xa==M.Xa),n(M.X,0,C.X,0,1<<M.Xa)}function ht(){this.X=[],this.Xa=this.Mb=0}function Lt(C,M,W,J){e(W!=null),e(J!=null);var ue=W[0],he=J[0];return ue==0&&(ue=(C*he+M/2)/M),he==0&&(he=(M*ue+C/2)/C),0>=ue||0>=he?0:(W[0]=ue,J[0]=he,1)}function et(C,M){return C+(1<<M)-1>>>M}function Jt(C,M){return((4278255360&C)+(4278255360&M)>>>0&4278255360)+((16711935&C)+(16711935&M)>>>0&16711935)>>>0}function Ve(C,M){I[M]=function(W,J,ue,he,ge,Ne,je){var Le;for(Le=0;Le<ge;++Le){var Ye=I[C](Ne[je+Le-1],ue,he+Le);Ne[je+Le]=Jt(W[J+Le],Ye)}}}function Ft(){this.ud=this.hd=this.jd=0}function qt(C,M){return((4278124286&(C^M))>>>1)+(C&M)>>>0}function Wt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function nr(C,M){return Wt(C+(C-M+.5>>1))}function Xe(C,M,W){return Math.abs(M-W)-Math.abs(C-W)}function Kt(C,M,W,J,ue,he,ge){for(J=he[ge-1],W=0;W<ue;++W)he[ge+W]=J=Jt(C[M+W],J)}function kt(C,M,W,J,ue){var he;for(he=0;he<W;++he){var ge=C[M+he],Ne=ge>>8&255,je=16711935&(je=(je=16711935&ge)+((Ne<<16)+Ne));J[ue+he]=(4278255360&ge)+je>>>0}}function pt(C,M){M.jd=255&C,M.hd=C>>8&255,M.ud=C>>16&255}function Ot(C,M,W,J,ue,he){var ge;for(ge=0;ge<J;++ge){var Ne=M[W+ge],je=Ne>>>8,Le=Ne,Ye=255&(Ye=(Ye=Ne>>>16)+((C.jd<<24>>24)*(je<<24>>24)>>>5));Le=255&(Le=(Le+=(C.hd<<24>>24)*(je<<24>>24)>>>5)+((C.ud<<24>>24)*(Ye<<24>>24)>>>5)),ue[he+ge]=(4278255360&Ne)+(Ye<<16)+Le}}function Ut(C,M,W,J,ue){I[M]=function(he,ge,Ne,je,Le,Ye,vt,Fe,Je){for(je=vt;je<Fe;++je)for(vt=0;vt<Je;++vt)Le[Ye++]=ue(Ne[J(he[ge++])])},I[C]=function(he,ge,Ne,je,Le,Ye,vt){var Fe=8>>he.b,Je=he.Ea,dt=he.K[0],Dt=he.w;if(8>Fe)for(he=(1<<he.b)-1,Dt=(1<<Fe)-1;ge<Ne;++ge){var mt,Bt=0;for(mt=0;mt<Je;++mt)mt&he||(Bt=J(je[Le++])),Ye[vt++]=ue(dt[Bt&Dt]),Bt>>=Fe}else I["VP8LMapColor"+W](je,Le,dt,Dt,Ye,vt,ge,Ne,Je)}}function Nr(C,M,W,J,ue){for(W=M+W;M<W;){var he=C[M++];J[ue++]=he>>16&255,J[ue++]=he>>8&255,J[ue++]=255&he}}function or(C,M,W,J,ue){for(W=M+W;M<W;){var he=C[M++];J[ue++]=he>>16&255,J[ue++]=he>>8&255,J[ue++]=255&he,J[ue++]=he>>24&255}}function lt(C,M,W,J,ue){for(W=M+W;M<W;){var he=(ge=C[M++])>>16&240|ge>>12&15,ge=240&ge|ge>>28&15;J[ue++]=he,J[ue++]=ge}}function lr(C,M,W,J,ue){for(W=M+W;M<W;){var he=(ge=C[M++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;J[ue++]=he,J[ue++]=ge}}function ve(C,M,W,J,ue){for(W=M+W;M<W;){var he=C[M++];J[ue++]=255&he,J[ue++]=he>>8&255,J[ue++]=he>>16&255}}function Ze(C,M,W,J,ue,he){if(he==0)for(W=M+W;M<W;)He(J,((he=C[M++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ue+=32;else n(J,ue,C,M,W)}function at(C,M){I[M][0]=I[C+"0"],I[M][1]=I[C+"1"],I[M][2]=I[C+"2"],I[M][3]=I[C+"3"],I[M][4]=I[C+"4"],I[M][5]=I[C+"5"],I[M][6]=I[C+"6"],I[M][7]=I[C+"7"],I[M][8]=I[C+"8"],I[M][9]=I[C+"9"],I[M][10]=I[C+"10"],I[M][11]=I[C+"11"],I[M][12]=I[C+"12"],I[M][13]=I[C+"13"],I[M][14]=I[C+"0"],I[M][15]=I[C+"0"]}function Qe(C){return C==C6||C==k6||C==b_||C==I6}function ze(){this.eb=[],this.size=this.A=this.fb=0}function it(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function At(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ze,this.f.kb=new it,this.sd=null}function er(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Er(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function rn(C,M){var W=C.T,J=M.ba.f.RGBA,ue=J.eb,he=J.fb+C.ka*J.A,ge=Yc[M.ba.S],Ne=C.y,je=C.O,Le=C.f,Ye=C.N,vt=C.ea,Fe=C.W,Je=M.cc,dt=M.dc,Dt=M.Mc,mt=M.Nc,Bt=C.ka,Ht=C.ka+C.T,sr=C.U,rr=sr+1>>1;for(Bt==0?ge(Ne,je,null,null,Le,Ye,vt,Fe,Le,Ye,vt,Fe,ue,he,null,null,sr):(ge(M.ec,M.fc,Ne,je,Je,dt,Dt,mt,Le,Ye,vt,Fe,ue,he-J.A,ue,he,sr),++W);Bt+2<Ht;Bt+=2)Je=Le,dt=Ye,Dt=vt,mt=Fe,Ye+=C.Rc,Fe+=C.Rc,he+=2*J.A,ge(Ne,(je+=2*C.fa)-C.fa,Ne,je,Je,dt,Dt,mt,Le,Ye,vt,Fe,ue,he-J.A,ue,he,sr);return je+=C.fa,C.j+Ht<C.o?(n(M.ec,M.fc,Ne,je,sr),n(M.cc,M.dc,Le,Ye,rr),n(M.Mc,M.Nc,vt,Fe,rr),W--):1&Ht||ge(Ne,je,null,null,Le,Ye,vt,Fe,Le,Ye,vt,Fe,ue,he+J.A,null,null,sr),W}function Qr(C,M,W){var J=C.F,ue=[C.J];if(J!=null){var he=C.U,ge=M.ba.S,Ne=ge==v_||ge==b_;M=M.ba.f.RGBA;var je=[0],Le=C.ka;je[0]=C.T,C.Kb&&(Le==0?--je[0]:(--Le,ue[0]-=C.width),C.j+C.ka+C.T==C.o&&(je[0]=C.o-C.j-Le));var Ye=M.eb;Le=M.fb+Le*M.A,C=VL(J,ue[0],C.width,he,je,Ye,Le+(Ne?0:3),M.A),e(W==je),C&&Qe(ge)&&Tm(Ye,Le,Ne,he,je,M.A)}return 0}function En(C){var M=C.ma,W=M.ba.S,J=11>W,ue=W==g_||W==x_||W==v_||W==T6||W==12||Qe(W);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!of(M.Oa,C,ue?11:12))return 0;if(ue&&Qe(W)&&ar(),C.da)alert("todo:use_scaling");else{if(J){if(M.Ib=Er,C.Kb){if(W=C.U+1>>1,M.memory=s(C.U+2*W),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+C.U,M.Mc=M.cc,M.Nc=M.dc+W,M.Ib=rn,ar()}}else alert("todo:EmitYUV");ue&&(M.Jb=Qr,J&&nt())}if(J&&!a9){for(C=0;256>C;++C)a0e[C]=89858*(C-128)+w_>>y_,o0e[C]=-22014*(C-128)+w_,i0e[C]=-45773*(C-128),s0e[C]=113618*(C-128)+w_>>y_;for(C=Pv;C<R6;++C)M=76283*(C-16)+w_>>y_,l0e[C-Pv]=ia(M,255),c0e[C-Pv]=ia(M+8>>4,15);a9=1}return 1}function fr(C){var M=C.ma,W=C.U,J=C.T;return e(!(1&C.ka)),0>=W||0>=J?0:(W=M.Ib(C,M),M.Jb!=null&&M.Jb(C,M,W),M.Dc+=W,1)}function nn(C){C.ma.memory=null}function ea(C,M,W,J){return ye(C,8)!=47?0:(M[0]=ye(C,14)+1,W[0]=ye(C,14)+1,J[0]=ye(C,1),ye(C,3)!=0?0:!C.h)}function on(C,M){if(4>C)return C+1;var W=C-2>>1;return(2+(1&C)<<W)+ye(M,W)+1}function In(C,M){return 120<M?M-120:1<=(W=((W=Hhe[M-1])>>4)*C+(8-(15&W)))?W:1;var W}function qr(C,M,W){var J=X(W),ue=C[M+=255&J].g-8;return 0<ue&&(se(W,W.u+8),J=X(W),M+=C[M].value,M+=J&(1<<ue)-1),se(W,W.u+C[M].g),C[M].value}function un(C,M,W){return W.g+=C.g,W.value+=C.value<<M>>>0,e(8>=W.g),C.g}function de(C,M,W){var J=C.xc;return e((M=J==0?0:C.vc[C.md*(W>>J)+(M>>J)])<C.Wb),C.Ya[M]}function pe(C,M,W,J){var ue=C.ab,he=C.c*M,ge=C.C;M=ge+M;var Ne=W,je=J;for(J=C.Ta,W=C.Ua;0<ue--;){var Le=C.gc[ue],Ye=ge,vt=M,Fe=Ne,Je=je,dt=(je=J,Ne=W,Le.Ea);switch(e(Ye<vt),e(vt<=Le.nc),Le.hc){case 2:m(Fe,Je,(vt-Ye)*dt,je,Ne);break;case 0:var Dt=Ye,mt=vt,Bt=je,Ht=Ne,sr=(Lr=Le).Ea;Dt==0&&(oe(Fe,Je,null,null,1,Bt,Ht),Kt(Fe,Je+1,0,0,sr-1,Bt,Ht+1),Je+=sr,Ht+=sr,++Dt);for(var rr=1<<Lr.b,Vr=rr-1,Or=et(sr,Lr.b),Sn=Lr.K,Lr=Lr.w+(Dt>>Lr.b)*Or;Dt<mt;){var Hn=Sn,Ci=Lr,jn=1;for(f(Fe,Je,Bt,Ht-sr,1,Bt,Ht);jn<sr;){var Fr=(jn&~Vr)+rr;Fr>sr&&(Fr=sr),(0,k[Hn[Ci++]>>8&15])(Fe,Je+ +jn,Bt,Ht+jn-sr,Fr-jn,Bt,Ht+jn),jn=Fr}Je+=sr,Ht+=sr,++Dt&Vr||(Lr+=Or)}vt!=Le.nc&&n(je,Ne-dt,je,Ne+(vt-Ye-1)*dt,dt);break;case 1:for(dt=Fe,mt=Je,sr=(Fe=Le.Ea)-(Ht=Fe&~(Bt=(Je=1<<Le.b)-1)),Dt=et(Fe,Le.b),rr=Le.K,Le=Le.w+(Ye>>Le.b)*Dt;Ye<vt;){for(Vr=rr,Or=Le,Sn=new Ft,Lr=mt+Ht,Hn=mt+Fe;mt<Lr;)pt(Vr[Or++],Sn),L(Sn,dt,mt,Je,je,Ne),mt+=Je,Ne+=Je;mt<Hn&&(pt(Vr[Or++],Sn),L(Sn,dt,mt,sr,je,Ne),mt+=sr,Ne+=sr),++Ye&Bt||(Le+=Dt)}break;case 3:if(Fe==je&&Je==Ne&&0<Le.b){for(mt=je,Fe=dt=Ne+(vt-Ye)*dt-(Ht=(vt-Ye)*et(Le.Ea,Le.b)),Je=je,Bt=Ne,Dt=[],Ht=(sr=Ht)-1;0<=Ht;--Ht)Dt[Ht]=Je[Bt+Ht];for(Ht=sr-1;0<=Ht;--Ht)mt[Fe+Ht]=Dt[Ht];x(Le,Ye,vt,je,dt,je,Ne)}else x(Le,Ye,vt,Fe,Je,je,Ne)}Ne=J,je=W}je!=W&&n(J,W,Ne,je,he)}function _e(C,M){var W=C.V,J=C.Ba+C.c*C.C,ue=M-C.C;if(e(M<=C.l.o),e(16>=ue),0<ue){var he=C.l,ge=C.Ta,Ne=C.Ua,je=he.width;if(pe(C,ue,W,J),ue=Ne=[Ne],e((W=C.C)<(J=M)),e(he.v<he.va),J>he.o&&(J=he.o),W<he.j){var Le=he.j-W;W=he.j,ue[0]+=Le*je}if(W>=J?W=0:(ue[0]+=4*he.v,he.ka=W-he.j,he.U=he.va-he.v,he.T=J-W,W=1),W){if(Ne=Ne[0],11>(W=C.ca).S){var Ye=W.f.RGBA,vt=(J=W.S,ue=he.U,he=he.T,Le=Ye.eb,Ye.A),Fe=he;for(Ye=Ye.fb+C.Ma*Ye.A;0<Fe--;){var Je=ge,dt=Ne,Dt=ue,mt=Le,Bt=Ye;switch(J){case p_:q(Je,dt,Dt,mt,Bt);break;case g_:Q(Je,dt,Dt,mt,Bt);break;case C6:Q(Je,dt,Dt,mt,Bt),Tm(mt,Bt,0,Dt,1,0);break;case XL:Re(Je,dt,Dt,mt,Bt);break;case x_:Ze(Je,dt,Dt,mt,Bt,1);break;case k6:Ze(Je,dt,Dt,mt,Bt,1),Tm(mt,Bt,0,Dt,1,0);break;case v_:Ze(Je,dt,Dt,mt,Bt,0);break;case b_:Ze(Je,dt,Dt,mt,Bt,0),Tm(mt,Bt,1,Dt,1,0);break;case T6:le(Je,dt,Dt,mt,Bt);break;case I6:le(Je,dt,Dt,mt,Bt),zL(mt,Bt,Dt,1,0);break;case YL:fe(Je,dt,Dt,mt,Bt);break;default:e(0)}Ne+=je,Ye+=vt}C.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(C.Ma<=W.height)}}C.C=M,e(C.C<=C.i)}function Se(C){var M;if(0<C.ua)return 0;for(M=0;M<C.Wb;++M){var W=C.Ya[M].G,J=C.Ya[M].H;if(0<W[1][J[1]+0].g||0<W[2][J[2]+0].g||0<W[3][J[3]+0].g)return 0}return 1}function Te(C,M,W,J,ue,he){if(C.Z!=0){var ge=C.qd,Ne=C.rd;for(e(Lh[C.Z]!=null);M<W;++M)Lh[C.Z](ge,Ne,J,ue,J,ue,he),ge=J,Ne=ue,ue+=he;C.qd=ge,C.rd=Ne}}function Pe(C,M){var W=C.l.ma,J=W.Z==0||W.Z==1?C.l.j:C.C;if(J=C.C<J?J:C.C,e(M<=C.l.o),M>J){var ue=C.l.width,he=W.ca,ge=W.tb+ue*J,Ne=C.V,je=C.Ba+C.c*J,Le=C.gc;e(C.ab==1),e(Le[0].hc==3),y(Le[0],J,M,Ne,je,he,ge),Te(W,J,M,he,ge,ue)}C.C=C.Ma=M}function tt(C,M,W,J,ue,he,ge){var Ne=C.$/J,je=C.$%J,Le=C.m,Ye=C.s,vt=W+C.$,Fe=vt;ue=W+J*ue;var Je=W+J*he,dt=280+Ye.ua,Dt=C.Pb?Ne:16777216,mt=0<Ye.ua?Ye.Wa:null,Bt=Ye.wc,Ht=vt<Je?de(Ye,je,Ne):null;e(C.C<he),e(Je<=ue);var sr=!1;e:for(;;){for(;sr||vt<Je;){var rr=0;if(Ne>=Dt){var Vr=vt-W;e((Dt=C).Pb),Dt.wd=Dt.m,Dt.xd=Vr,0<Dt.s.ua&&Vt(Dt.s.Wa,Dt.s.vb),Dt=Ne+Ghe}if(je&Bt||(Ht=de(Ye,je,Ne)),e(Ht!=null),Ht.Qb&&(M[vt]=Ht.qb,sr=!0),!sr)if(ke(Le),Ht.jc){rr=Le,Vr=M;var Or=vt,Sn=Ht.pd[X(rr)&qi-1];e(Ht.jc),256>Sn.g?(se(rr,rr.u+Sn.g),Vr[Or]=Sn.value,rr=0):(se(rr,rr.u+Sn.g-256),e(256<=Sn.value),rr=Sn.value),rr==0&&(sr=!0)}else rr=qr(Ht.G[0],Ht.H[0],Le);if(Le.h)break;if(sr||256>rr){if(!sr)if(Ht.nd)M[vt]=(Ht.qb|rr<<8)>>>0;else{if(ke(Le),sr=qr(Ht.G[1],Ht.H[1],Le),ke(Le),Vr=qr(Ht.G[2],Ht.H[2],Le),Or=qr(Ht.G[3],Ht.H[3],Le),Le.h)break;M[vt]=(Or<<24|sr<<16|rr<<8|Vr)>>>0}if(sr=!1,++vt,++je>=J&&(je=0,++Ne,ge!=null&&Ne<=he&&!(Ne%16)&&ge(C,Ne),mt!=null))for(;Fe<vt;)rr=M[Fe++],mt.X[(506832829*rr&4294967295)>>>mt.Mb]=rr}else if(280>rr){if(rr=on(rr-256,Le),Vr=qr(Ht.G[4],Ht.H[4],Le),ke(Le),Vr=In(J,Vr=on(Vr,Le)),Le.h)break;if(vt-W<Vr||ue-vt<rr)break e;for(Or=0;Or<rr;++Or)M[vt+Or]=M[vt+Or-Vr];for(vt+=rr,je+=rr;je>=J;)je-=J,++Ne,ge!=null&&Ne<=he&&!(Ne%16)&&ge(C,Ne);if(e(vt<=ue),je&Bt&&(Ht=de(Ye,je,Ne)),mt!=null)for(;Fe<vt;)rr=M[Fe++],mt.X[(506832829*rr&4294967295)>>>mt.Mb]=rr}else{if(!(rr<dt))break e;for(sr=rr-280,e(mt!=null);Fe<vt;)rr=M[Fe++],mt.X[(506832829*rr&4294967295)>>>mt.Mb]=rr;rr=vt,e(!(sr>>>(Vr=mt).Xa)),M[rr]=Vr.X[sr],sr=!0}sr||e(Le.h==re(Le))}if(C.Pb&&Le.h&&vt<ue)e(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&Vt(C.s.vb,C.s.Wa);else{if(Le.h)break e;ge!=null&&ge(C,Ne>he?he:Ne),C.a=0,C.$=vt-W}return 1}return C.a=3,0}function jt(C){e(C!=null),C.vc=null,C.yc=null,C.Ya=null;var M=C.Wa;M!=null&&(M.X=null),C.vb=null,e(C!=null)}function st(){var C=new vr;return C==null?null:(C.a=0,C.xb=JL,at("Predictor","VP8LPredictors"),at("Predictor","VP8LPredictors_C"),at("PredictorAdd","VP8LPredictorsAdd"),at("PredictorAdd","VP8LPredictorsAdd_C"),m=kt,L=Ot,q=Nr,Q=or,le=lt,fe=lr,Re=ve,I.VP8LMapColor32b=v,I.VP8LMapColor8b=E,C)}function Ae(C,M,W,J,ue){var he=1,ge=[C],Ne=[M],je=J.m,Le=J.s,Ye=null,vt=0;e:for(;;){if(W)for(;he&&ye(je,1);){var Fe=ge,Je=Ne,dt=J,Dt=1,mt=dt.m,Bt=dt.gc[dt.ab],Ht=ye(mt,2);if(dt.Oc&1<<Ht)he=0;else{switch(dt.Oc|=1<<Ht,Bt.hc=Ht,Bt.Ea=Fe[0],Bt.nc=Je[0],Bt.K=[null],++dt.ab,e(4>=dt.ab),Ht){case 0:case 1:Bt.b=ye(mt,3)+2,Dt=Ae(et(Bt.Ea,Bt.b),et(Bt.nc,Bt.b),0,dt,Bt.K),Bt.K=Bt.K[0];break;case 3:var sr,rr=ye(mt,8)+1,Vr=16<rr?0:4<rr?1:2<rr?2:3;if(Fe[0]=et(Bt.Ea,Vr),Bt.b=Vr,sr=Dt=Ae(rr,1,0,dt,Bt.K)){var Or,Sn=rr,Lr=Bt,Hn=1<<(8>>Lr.b),Ci=s(Hn);if(Ci==null)sr=0;else{var jn=Lr.K[0],Fr=Lr.w;for(Ci[0]=Lr.K[0][0],Or=1;Or<1*Sn;++Or)Ci[Or]=Jt(jn[Fr+Or],Ci[Or-1]);for(;Or<4*Hn;++Or)Ci[Or]=0;Lr.K[0]=null,Lr.K[0]=Ci,sr=1}}Dt=sr;break;case 2:break;default:e(0)}he=Dt}}if(ge=ge[0],Ne=Ne[0],he&&ye(je,1)&&!(he=1<=(vt=ye(je,4))&&11>=vt)){J.a=3;break e}var wr;if(wr=he)t:{var Ks,yn,Wn,Ya=J,uo=ge,al=Ne,Is=vt,Ro=W,sl=Ya.m,ki=Ya.s,Qn=[null],va=1,Os=0,ba=qhe[Is];r:for(;;){if(Ro&&ye(sl,1)){var fo=ye(sl,3)+2,zu=et(uo,fo),Xs=et(al,fo),kl=zu*Xs;if(!Ae(zu,Xs,0,Ya,Qn))break r;for(Qn=Qn[0],ki.xc=fo,Ks=0;Ks<kl;++Ks){var Ma=Qn[Ks]>>8&65535;Qn[Ks]=Ma,Ma>=va&&(va=Ma+1)}}if(sl.h)break r;for(yn=0;5>yn;++yn){var Ii=ZL[yn];!yn&&0<Is&&(Ii+=1<<Is),Os<Ii&&(Os=Ii)}var lc=o(va*ba,F),il=va,cc=o(il,Z);if(cc==null)var uc=null;else e(65536>=il),uc=cc;var Il=s(Os);if(uc==null||Il==null||lc==null){Ya.a=1;break r}var dc=lc;for(Ks=Wn=0;Ks<va;++Ks){var Ga=uc[Ks],fc=Ga.G,Vu=Ga.H,Cm=0,df=1,ho=0;for(yn=0;5>yn;++yn){Ii=ZL[yn],fc[yn]=dc,Vu[yn]=Wn,!yn&&0<Is&&(Ii+=1<<Is);a:{var N_,D6=Ii,E_=Ya,Rv=Il,f0e=dc,h0e=Wn,M6=0,Fh=E_.m,m0e=ye(Fh,1);if(a(Rv,0,0,D6),m0e){var p0e=ye(Fh,1)+1,g0e=ye(Fh,1),o9=ye(Fh,g0e==0?1:8);Rv[o9]=1,p0e==2&&(Rv[o9=ye(Fh,8)]=1);var A_=1}else{var l9=s(19),c9=ye(Fh,4)+4;if(19<c9){E_.a=3;var S_=0;break a}for(N_=0;N_<c9;++N_)l9[$he[N_]]=ye(Fh,3);var L6=void 0,Dv=void 0,u9=E_,x0e=l9,j_=D6,d9=Rv,F6=0,Bh=u9.m,f9=8,h9=o(128,F);n:for(;B(h9,0,7,x0e,19);){if(ye(Bh,1)){var v0e=2+2*ye(Bh,3);if((L6=2+ye(Bh,v0e))>j_)break n}else L6=j_;for(Dv=0;Dv<j_&&L6--;){ke(Bh);var m9=h9[0+(127&X(Bh))];se(Bh,Bh.u+m9.g);var Eg=m9.value;if(16>Eg)d9[Dv++]=Eg,Eg!=0&&(f9=Eg);else{var b0e=Eg==16,p9=Eg-16,y0e=zhe[p9],g9=ye(Bh,Uhe[p9])+y0e;if(Dv+g9>j_)break n;for(var w0e=b0e?f9:0;0<g9--;)d9[Dv++]=w0e}}F6=1;break n}F6||(u9.a=3),A_=F6}(A_=A_&&!Fh.h)&&(M6=B(f0e,h0e,8,Rv,D6)),A_&&M6!=0?S_=M6:(E_.a=3,S_=0)}if(S_==0)break r;if(df&&Vhe[yn]==1&&(df=dc[Wn].g==0),Cm+=dc[Wn].g,Wn+=S_,3>=yn){var Mv,B6=Il[0];for(Mv=1;Mv<Ii;++Mv)Il[Mv]>B6&&(B6=Il[Mv]);ho+=B6}}if(Ga.nd=df,Ga.Qb=0,df&&(Ga.qb=(fc[3][Vu[3]+0].value<<24|fc[1][Vu[1]+0].value<<16|fc[2][Vu[2]+0].value)>>>0,Cm==0&&256>fc[0][Vu[0]+0].value&&(Ga.Qb=1,Ga.qb+=fc[0][Vu[0]+0].value<<8)),Ga.jc=!Ga.Qb&&6>ho,Ga.jc){var T_,ff=Ga;for(T_=0;T_<qi;++T_){var Uh=T_,zh=ff.pd[Uh],C_=ff.G[0][ff.H[0]+Uh];256<=C_.value?(zh.g=C_.g+256,zh.value=C_.value):(zh.g=0,zh.value=0,Uh>>=un(C_,8,zh),Uh>>=un(ff.G[1][ff.H[1]+Uh],16,zh),Uh>>=un(ff.G[2][ff.H[2]+Uh],0,zh),un(ff.G[3][ff.H[3]+Uh],24,zh))}}}ki.vc=Qn,ki.Wb=va,ki.Ya=uc,ki.yc=lc,wr=1;break t}wr=0}if(!(he=wr)){J.a=3;break e}if(0<vt){if(Le.ua=1<<vt,!be(Le.Wa,vt)){J.a=1,he=0;break e}}else Le.ua=0;var U6=J,x9=ge,_0e=Ne,z6=U6.s,V6=z6.xc;if(U6.c=x9,U6.i=_0e,z6.md=et(x9,V6),z6.wc=V6==0?-1:(1<<V6)-1,W){J.xb=Jhe;break e}if((Ye=s(ge*Ne))==null){J.a=1,he=0;break e}he=(he=tt(J,Ye,0,ge,Ne,Ne,null))&&!je.h;break e}return he?(ue!=null?ue[0]=Ye:(e(Ye==null),e(W)),J.$=0,W||jt(Le)):jt(Le),he}function Ge(C,M){var W=C.c*C.i,J=W+M+16*M;return e(C.c<=M),C.V=s(J),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+W+M,1)}function ct(C,M){var W=C.C,J=M-W,ue=C.V,he=C.Ba+C.c*W;for(e(M<=C.l.o);0<J;){var ge=16<J?16:J,Ne=C.l.ma,je=C.l.width,Le=je*ge,Ye=Ne.ca,vt=Ne.tb+je*W,Fe=C.Ta,Je=C.Ua;pe(C,ge,ue,he),$L(Fe,Je,Ye,vt,Le),Te(Ne,W,W+ge,Ye,vt,je),J-=ge,ue+=ge*C.c,W+=ge}e(W==M),C.C=C.Ma=M}function St(){this.ub=this.yd=this.td=this.Rb=0}function xt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Xt(){this.Yb=function(){var C=[];return function M(W,J,ue){for(var he=ue[J],ge=0;ge<he&&(W.push(ue.length>J+1?[]:0),!(ue.length<J+1));ge++)M(W[ge],J+1,ue)}(C,0,[3,11]),C}()}function br(){this.jb=s(3),this.Wc=l([4,8],Xt),this.Xc=l([4,17],Xt)}function _t(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Yr(){this.ld=this.La=this.dd=this.tc=0}function Gr(){this.Na=this.la=0}function $a(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ws(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function hn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Yr),this.Y=0,this.ya=Array(new ws),this.aa=0,this.l=new ls}function ln(){this.y=s(16),this.f=s(8),this.ea=s(8)}function sn(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new St,this.Kc=new xt,this.ed=new _t,this.Qa=new Ct,this.Ic=this.$c=this.Aa=0,this.D=new hn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,H),this.ia=0,this.pb=o(4,$a),this.Pa=new br,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ln),this.Hd=0,this.rb=Array(new Gr),this.sb=0,this.wa=Array(new Yr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ws),this.L=this.aa=0,this.gd=l([4,2],Yr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ls(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ii(){var C=new sn;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,Ov||(Ov=Vi)),C}function On(C,M,W){return C.a==0&&(C.a=M,C.sc=W,C.cb=0),0}function Yn(C,M,W){return 3<=W&&C[M+0]==157&&C[M+1]==1&&C[M+2]==42}function Ts(C,M){if(C==null)return 0;if(C.a=0,C.sc="OK",M==null)return On(C,2,"null VP8Io passed to VP8GetHeaders()");var W=M.data,J=M.w,ue=M.ha;if(4>ue)return On(C,7,"Truncated header.");var he=W[J+0]|W[J+1]<<8|W[J+2]<<16,ge=C.Od;if(ge.Rb=!(1&he),ge.td=he>>1&7,ge.yd=he>>4&1,ge.ub=he>>5,3<ge.td)return On(C,3,"Incorrect keyframe parameters.");if(!ge.yd)return On(C,4,"Frame not displayable.");J+=3,ue-=3;var Ne=C.Kc;if(ge.Rb){if(7>ue)return On(C,7,"cannot parse picture header");if(!Yn(W,J,ue))return On(C,3,"Bad code word");Ne.c=16383&(W[J+4]<<8|W[J+3]),Ne.Td=W[J+4]>>6,Ne.i=16383&(W[J+6]<<8|W[J+5]),Ne.Ud=W[J+6]>>6,J+=7,ue-=7,C.za=Ne.c+15>>4,C.Ub=Ne.i+15>>4,M.width=Ne.c,M.height=Ne.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,a((he=C.Pa).jb,0,255,he.jb.length),e((he=C.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(ge.ub>ue)return On(C,7,"bad partition length");ce(he=C.m,W,J,ge.ub),J+=ge.ub,ue-=ge.ub,ge.Rb&&(Ne.Ld=xe(he),Ne.Kd=xe(he)),Ne=C.Qa;var je,Le=C.Pa;if(e(he!=null),e(Ne!=null),Ne.Cb=xe(he),Ne.Cb){if(Ne.Bb=xe(he),xe(he)){for(Ne.Fb=xe(he),je=0;4>je;++je)Ne.Zb[je]=xe(he)?ae(he,7):0;for(je=0;4>je;++je)Ne.Lb[je]=xe(he)?ae(he,6):0}if(Ne.Bb)for(je=0;3>je;++je)Le.jb[je]=xe(he)?ne(he,8):255}else Ne.Bb=0;if(he.Ka)return On(C,3,"cannot parse segment header");if((Ne=C.ed).zd=xe(he),Ne.Tb=ne(he,6),Ne.wb=ne(he,3),Ne.Pc=xe(he),Ne.Pc&&xe(he)){for(Le=0;4>Le;++Le)xe(he)&&(Ne.vd[Le]=ae(he,6));for(Le=0;4>Le;++Le)xe(he)&&(Ne.od[Le]=ae(he,6))}if(C.L=Ne.Tb==0?0:Ne.zd?1:2,he.Ka)return On(C,3,"cannot parse filter header");var Ye=ue;if(ue=je=J,J=je+Ye,Ne=Ye,C.Xb=(1<<ne(C.m,2))-1,Ye<3*(Le=C.Xb))W=7;else{for(je+=3*Le,Ne-=3*Le,Ye=0;Ye<Le;++Ye){var vt=W[ue+0]|W[ue+1]<<8|W[ue+2]<<16;vt>Ne&&(vt=Ne),ce(C.Jc[+Ye],W,je,vt),je+=vt,Ne-=vt,ue+=3}ce(C.Jc[+Le],W,je,Ne),W=je<J?0:5}if(W!=0)return On(C,W,"cannot parse partitions");for(W=ne(je=C.m,7),ue=xe(je)?ae(je,4):0,J=xe(je)?ae(je,4):0,Ne=xe(je)?ae(je,4):0,Le=xe(je)?ae(je,4):0,je=xe(je)?ae(je,4):0,Ye=C.Qa,vt=0;4>vt;++vt){if(Ye.Cb){var Fe=Ye.Zb[vt];Ye.Fb||(Fe+=W)}else{if(0<vt){C.pb[vt]=C.pb[0];continue}Fe=W}var Je=C.pb[vt];Je.Sc[0]=O6[ia(Fe+ue,127)],Je.Sc[1]=P6[ia(Fe+0,127)],Je.Eb[0]=2*O6[ia(Fe+J,127)],Je.Eb[1]=101581*P6[ia(Fe+Ne,127)]>>16,8>Je.Eb[1]&&(Je.Eb[1]=8),Je.Qc[0]=O6[ia(Fe+Le,117)],Je.Qc[1]=P6[ia(Fe+je,127)],Je.lc=Fe+je}if(!ge.Rb)return On(C,4,"Not a key frame.");for(xe(he),ge=C.Pa,W=0;4>W;++W){for(ue=0;8>ue;++ue)for(J=0;3>J;++J)for(Ne=0;11>Ne;++Ne)Le=Ie(he,Zhe[W][ue][J][Ne])?ne(he,8):Xhe[W][ue][J][Ne],ge.Wc[W][ue].Yb[J][Ne]=Le;for(ue=0;17>ue;++ue)ge.Xc[W][ue]=ge.Wc[W][Qhe[ue]]}return C.kc=xe(he),C.kc&&(C.Bd=ne(he,8)),C.cb=1}function Vi(C,M,W,J,ue,he,ge){var Ne=M[ue].Yb[W];for(W=0;16>ue;++ue){if(!Ie(C,Ne[W+0]))return ue;for(;!Ie(C,Ne[W+1]);)if(Ne=M[++ue].Yb[0],W=0,ue==16)return 16;var je=M[ue+1].Yb;if(Ie(C,Ne[W+2])){var Le=C,Ye=0;if(Ie(Le,(Fe=Ne)[(vt=W)+3]))if(Ie(Le,Fe[vt+6])){for(Ne=0,vt=2*(Ye=Ie(Le,Fe[vt+8]))+(Fe=Ie(Le,Fe[vt+9+Ye])),Ye=0,Fe=Whe[vt];Fe[Ne];++Ne)Ye+=Ye+Ie(Le,Fe[Ne]);Ye+=3+(8<<vt)}else Ie(Le,Fe[vt+7])?(Ye=7+2*Ie(Le,165),Ye+=Ie(Le,145)):Ye=5+Ie(Le,159);else Ye=Ie(Le,Fe[vt+4])?3+Ie(Le,Fe[vt+5]):2;Ne=je[2]}else Ye=1,Ne=je[1];je=ge+Khe[ue],0>(Le=C).b&&Ce(Le);var vt,Fe=Le.b,Je=(vt=Le.Ca>>1)-(Le.I>>Fe)>>31;--Le.b,Le.Ca+=Je,Le.Ca|=1,Le.I-=(vt+1&Je)<<Fe,he[je]=((Ye^Je)-Je)*J[(0<ue)+0]}return 16}function zr(C){var M=C.rb[C.sb-1];M.la=0,M.Na=0,a(C.zc,0,0,C.zc.length),C.ja=0}function ka(C,M,W,J,ue){ue=C[M+W+32*J]+(ue>>3),C[M+W+32*J]=-256&ue?0>ue?0:255:ue}function $i(C,M,W,J,ue,he){ka(C,M,0,W,J+ue),ka(C,M,1,W,J+he),ka(C,M,2,W,J-he),ka(C,M,3,W,J-ue)}function Mn(C){return(20091*C>>16)+C}function Ln(C,M,W,J){var ue,he=0,ge=s(16);for(ue=0;4>ue;++ue){var Ne=C[M+0]+C[M+8],je=C[M+0]-C[M+8],Le=(35468*C[M+4]>>16)-Mn(C[M+12]),Ye=Mn(C[M+4])+(35468*C[M+12]>>16);ge[he+0]=Ne+Ye,ge[he+1]=je+Le,ge[he+2]=je-Le,ge[he+3]=Ne-Ye,he+=4,M++}for(ue=he=0;4>ue;++ue)Ne=(C=ge[he+0]+4)+ge[he+8],je=C-ge[he+8],Le=(35468*ge[he+4]>>16)-Mn(ge[he+12]),ka(W,J,0,0,Ne+(Ye=Mn(ge[he+4])+(35468*ge[he+12]>>16))),ka(W,J,1,0,je+Le),ka(W,J,2,0,je-Le),ka(W,J,3,0,Ne-Ye),he++,J+=32}function Ha(C,M,W,J){var ue=C[M+0]+4,he=35468*C[M+4]>>16,ge=Mn(C[M+4]),Ne=35468*C[M+1]>>16;$i(W,J,0,ue+ge,C=Mn(C[M+1]),Ne),$i(W,J,1,ue+he,C,Ne),$i(W,J,2,ue-he,C,Ne),$i(W,J,3,ue-ge,C,Ne)}function ut(C,M,W,J,ue){Ln(C,M,W,J),ue&&Ln(C,M+16,W,J+4)}function Oe(C,M,W,J){Ke(C,M+0,W,J,1),Ke(C,M+32,W,J+128,1)}function Ar(C,M,W,J){var ue;for(C=C[M+0]+4,ue=0;4>ue;++ue)for(M=0;4>M;++M)ka(W,J,M,ue,C)}function Ia(C,M,W,J){C[M+0]&&zt(C,M+0,W,J),C[M+16]&&zt(C,M+16,W,J+4),C[M+32]&&zt(C,M+32,W,J+128),C[M+48]&&zt(C,M+48,W,J+128+4)}function qa(C,M,W,J){var ue,he=s(16);for(ue=0;4>ue;++ue){var ge=C[M+0+ue]+C[M+12+ue],Ne=C[M+4+ue]+C[M+8+ue],je=C[M+4+ue]-C[M+8+ue],Le=C[M+0+ue]-C[M+12+ue];he[0+ue]=ge+Ne,he[8+ue]=ge-Ne,he[4+ue]=Le+je,he[12+ue]=Le-je}for(ue=0;4>ue;++ue)ge=(C=he[0+4*ue]+3)+he[3+4*ue],Ne=he[1+4*ue]+he[2+4*ue],je=he[1+4*ue]-he[2+4*ue],Le=C-he[3+4*ue],W[J+0]=ge+Ne>>3,W[J+16]=Le+je>>3,W[J+32]=ge-Ne>>3,W[J+48]=Le-je>>3,J+=64}function qs(C,M,W){var J,ue=M-32,he=oc,ge=255-C[ue-1];for(J=0;J<W;++J){var Ne,je=he,Le=ge+C[M-1];for(Ne=0;Ne<W;++Ne)C[M+Ne]=je[Le+C[ue+Ne]];M+=32}}function Zo(C,M){qs(C,M,4)}function Cs(C,M){qs(C,M,8)}function Dr(C,M){qs(C,M,16)}function Zn(C,M){var W;for(W=0;16>W;++W)n(C,M+32*W,C,M-32,16)}function yt(C,M){var W;for(W=16;0<W;--W)a(C,M,C[M-1],16),M+=32}function mr(C,M,W){var J;for(J=0;16>J;++J)a(M,W+32*J,C,16)}function jr(C,M){var W,J=16;for(W=0;16>W;++W)J+=C[M-1+32*W]+C[M+W-32];mr(J>>5,C,M)}function Dn(C,M){var W,J=8;for(W=0;16>W;++W)J+=C[M-1+32*W];mr(J>>4,C,M)}function pn(C,M){var W,J=8;for(W=0;16>W;++W)J+=C[M+W-32];mr(J>>4,C,M)}function Jr(C,M){mr(128,C,M)}function ur(C,M,W){return C+2*M+W+2>>2}function $n(C,M){var W,J=M-32;for(J=new Uint8Array([ur(C[J-1],C[J+0],C[J+1]),ur(C[J+0],C[J+1],C[J+2]),ur(C[J+1],C[J+2],C[J+3]),ur(C[J+2],C[J+3],C[J+4])]),W=0;4>W;++W)n(C,M+32*W,J,0,J.length)}function ks(C,M){var W=C[M-1],J=C[M-1+32],ue=C[M-1+64],he=C[M-1+96];He(C,M+0,16843009*ur(C[M-1-32],W,J)),He(C,M+32,16843009*ur(W,J,ue)),He(C,M+64,16843009*ur(J,ue,he)),He(C,M+96,16843009*ur(ue,he,he))}function Ir(C,M){var W,J=4;for(W=0;4>W;++W)J+=C[M+W-32]+C[M-1+32*W];for(J>>=3,W=0;4>W;++W)a(C,M+32*W,J,4)}function Gs(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1-32],ge=C[M+0-32],Ne=C[M+1-32],je=C[M+2-32],Le=C[M+3-32];C[M+0+96]=ur(J,ue,C[M-1+96]),C[M+1+96]=C[M+0+64]=ur(W,J,ue),C[M+2+96]=C[M+1+64]=C[M+0+32]=ur(he,W,J),C[M+3+96]=C[M+2+64]=C[M+1+32]=C[M+0+0]=ur(ge,he,W),C[M+3+64]=C[M+2+32]=C[M+1+0]=ur(Ne,ge,he),C[M+3+32]=C[M+2+0]=ur(je,Ne,ge),C[M+3+0]=ur(Le,je,Ne)}function Ur(C,M){var W=C[M+1-32],J=C[M+2-32],ue=C[M+3-32],he=C[M+4-32],ge=C[M+5-32],Ne=C[M+6-32],je=C[M+7-32];C[M+0+0]=ur(C[M+0-32],W,J),C[M+1+0]=C[M+0+32]=ur(W,J,ue),C[M+2+0]=C[M+1+32]=C[M+0+64]=ur(J,ue,he),C[M+3+0]=C[M+2+32]=C[M+1+64]=C[M+0+96]=ur(ue,he,ge),C[M+3+32]=C[M+2+64]=C[M+1+96]=ur(he,ge,Ne),C[M+3+64]=C[M+2+96]=ur(ge,Ne,je),C[M+3+96]=ur(Ne,je,je)}function ha(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1-32],ge=C[M+0-32],Ne=C[M+1-32],je=C[M+2-32],Le=C[M+3-32];C[M+0+0]=C[M+1+64]=he+ge+1>>1,C[M+1+0]=C[M+2+64]=ge+Ne+1>>1,C[M+2+0]=C[M+3+64]=Ne+je+1>>1,C[M+3+0]=je+Le+1>>1,C[M+0+96]=ur(ue,J,W),C[M+0+64]=ur(J,W,he),C[M+0+32]=C[M+1+96]=ur(W,he,ge),C[M+1+32]=C[M+2+96]=ur(he,ge,Ne),C[M+2+32]=C[M+3+96]=ur(ge,Ne,je),C[M+3+32]=ur(Ne,je,Le)}function af(C,M){var W=C[M+0-32],J=C[M+1-32],ue=C[M+2-32],he=C[M+3-32],ge=C[M+4-32],Ne=C[M+5-32],je=C[M+6-32],Le=C[M+7-32];C[M+0+0]=W+J+1>>1,C[M+1+0]=C[M+0+64]=J+ue+1>>1,C[M+2+0]=C[M+1+64]=ue+he+1>>1,C[M+3+0]=C[M+2+64]=he+ge+1>>1,C[M+0+32]=ur(W,J,ue),C[M+1+32]=C[M+0+96]=ur(J,ue,he),C[M+2+32]=C[M+1+96]=ur(ue,he,ge),C[M+3+32]=C[M+2+96]=ur(he,ge,Ne),C[M+3+64]=ur(ge,Ne,je),C[M+3+96]=ur(Ne,je,Le)}function ma(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1+96];C[M+0+0]=W+J+1>>1,C[M+2+0]=C[M+0+32]=J+ue+1>>1,C[M+2+32]=C[M+0+64]=ue+he+1>>1,C[M+1+0]=ur(W,J,ue),C[M+3+0]=C[M+1+32]=ur(J,ue,he),C[M+3+32]=C[M+1+64]=ur(ue,he,he),C[M+3+64]=C[M+2+64]=C[M+0+96]=C[M+1+96]=C[M+2+96]=C[M+3+96]=he}function Mu(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1+96],ge=C[M-1-32],Ne=C[M+0-32],je=C[M+1-32],Le=C[M+2-32];C[M+0+0]=C[M+2+32]=W+ge+1>>1,C[M+0+32]=C[M+2+64]=J+W+1>>1,C[M+0+64]=C[M+2+96]=ue+J+1>>1,C[M+0+96]=he+ue+1>>1,C[M+3+0]=ur(Ne,je,Le),C[M+2+0]=ur(ge,Ne,je),C[M+1+0]=C[M+3+32]=ur(W,ge,Ne),C[M+1+32]=C[M+3+64]=ur(J,W,ge),C[M+1+64]=C[M+3+96]=ur(ue,J,W),C[M+1+96]=ur(he,ue,J)}function Qo(C,M){var W;for(W=0;8>W;++W)n(C,M+32*W,C,M-32,8)}function Gc(C,M){var W;for(W=0;8>W;++W)a(C,M,C[M-1],8),M+=32}function Jo(C,M,W){var J;for(J=0;8>J;++J)a(M,W+32*J,C,8)}function el(C,M){var W,J=8;for(W=0;8>W;++W)J+=C[M+W-32]+C[M-1+32*W];Jo(J>>4,C,M)}function Al(C,M){var W,J=4;for(W=0;8>W;++W)J+=C[M+W-32];Jo(J>>3,C,M)}function oo(C,M){var W,J=4;for(W=0;8>W;++W)J+=C[M-1+32*W];Jo(J>>3,C,M)}function Sl(C,M){Jo(128,C,M)}function tl(C,M,W){var J=C[M-W],ue=C[M+0],he=3*(ue-J)+j6[1020+C[M-2*W]-C[M+W]],ge=m_[112+(he+4>>3)];C[M-W]=oc[255+J+m_[112+(he+3>>3)]],C[M+0]=oc[255+ue-ge]}function Oa(C,M,W,J){var ue=C[M+0],he=C[M+W];return Xc[255+C[M-2*W]-C[M-W]]>J||Xc[255+he-ue]>J}function Lu(C,M,W,J){return 4*Xc[255+C[M-W]-C[M+0]]+Xc[255+C[M-2*W]-C[M+W]]<=J}function nc(C,M,W,J,ue){var he=C[M-3*W],ge=C[M-2*W],Ne=C[M-W],je=C[M+0],Le=C[M+W],Ye=C[M+2*W],vt=C[M+3*W];return 4*Xc[255+Ne-je]+Xc[255+ge-Le]>J?0:Xc[255+C[M-4*W]-he]<=ue&&Xc[255+he-ge]<=ue&&Xc[255+ge-Ne]<=ue&&Xc[255+vt-Ye]<=ue&&Xc[255+Ye-Le]<=ue&&Xc[255+Le-je]<=ue}function ac(C,M,W,J){var ue=2*J+1;for(J=0;16>J;++J)Lu(C,M+J,W,ue)&&tl(C,M+J,W)}function Wc(C,M,W,J){var ue=2*J+1;for(J=0;16>J;++J)Lu(C,M+J*W,1,ue)&&tl(C,M+J*W,1)}function Fu(C,M,W,J){var ue;for(ue=3;0<ue;--ue)ac(C,M+=4*W,W,J)}function Dh(C,M,W,J){var ue;for(ue=3;0<ue;--ue)Wc(C,M+=4,W,J)}function An(C,M,W,J,ue,he,ge,Ne){for(he=2*he+1;0<ue--;){if(nc(C,M,W,he,ge))if(Oa(C,M,W,Ne))tl(C,M,W);else{var je=C,Le=M,Ye=W,vt=je[Le-2*Ye],Fe=je[Le-Ye],Je=je[Le+0],dt=je[Le+Ye],Dt=je[Le+2*Ye],mt=27*(Ht=j6[1020+3*(Je-Fe)+j6[1020+vt-dt]])+63>>7,Bt=18*Ht+63>>7,Ht=9*Ht+63>>7;je[Le-3*Ye]=oc[255+je[Le-3*Ye]+Ht],je[Le-2*Ye]=oc[255+vt+Bt],je[Le-Ye]=oc[255+Fe+mt],je[Le+0]=oc[255+Je-mt],je[Le+Ye]=oc[255+dt-Bt],je[Le+2*Ye]=oc[255+Dt-Ht]}M+=J}}function Hi(C,M,W,J,ue,he,ge,Ne){for(he=2*he+1;0<ue--;){if(nc(C,M,W,he,ge))if(Oa(C,M,W,Ne))tl(C,M,W);else{var je=C,Le=M,Ye=W,vt=je[Le-Ye],Fe=je[Le+0],Je=je[Le+Ye],dt=m_[112+(4+(Dt=3*(Fe-vt))>>3)],Dt=m_[112+(Dt+3>>3)],mt=dt+1>>1;je[Le-2*Ye]=oc[255+je[Le-2*Ye]+mt],je[Le-Ye]=oc[255+vt+Dt],je[Le+0]=oc[255+Fe-dt],je[Le+Ye]=oc[255+Je-mt]}M+=J}}function Kc(C,M,W,J,ue,he){An(C,M,W,1,16,J,ue,he)}function Oo(C,M,W,J,ue,he){An(C,M,1,W,16,J,ue,he)}function sc(C,M,W,J,ue,he){var ge;for(ge=3;0<ge;--ge)Hi(C,M+=4*W,W,1,16,J,ue,he)}function Et(C,M,W,J,ue,he){var ge;for(ge=3;0<ge;--ge)Hi(C,M+=4,1,W,16,J,ue,he)}function z(C,M,W,J,ue,he,ge,Ne){An(C,M,ue,1,8,he,ge,Ne),An(W,J,ue,1,8,he,ge,Ne)}function ie(C,M,W,J,ue,he,ge,Ne){An(C,M,1,ue,8,he,ge,Ne),An(W,J,1,ue,8,he,ge,Ne)}function De(C,M,W,J,ue,he,ge,Ne){Hi(C,M+4*ue,ue,1,8,he,ge,Ne),Hi(W,J+4*ue,ue,1,8,he,ge,Ne)}function qe(C,M,W,J,ue,he,ge,Ne){Hi(C,M+4,1,ue,8,he,ge,Ne),Hi(W,J+4,1,ue,8,he,ge,Ne)}function rt(){this.ba=new At,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Sr(){this.ua=0,this.Wa=new ht,this.vb=new ht,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new F}function vr(){this.xb=this.a=0,this.l=new ls,this.ca=new At,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Sr,this.ab=0,this.gc=o(4,Qt),this.Oc=0}function Kr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ls,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(C,M,W,J,ue,he,ge){for(C=C==null?0:C[M+0],M=0;M<ge;++M)ue[he+M]=C+W[J+M]&255,C=ue[he+M]}function Pn(C,M,W,J,ue,he,ge){var Ne;if(C==null)yr(null,null,W,J,ue,he,ge);else for(Ne=0;Ne<ge;++Ne)ue[he+Ne]=C[M+Ne]+W[J+Ne]&255}function Gn(C,M,W,J,ue,he,ge){if(C==null)yr(null,null,W,J,ue,he,ge);else{var Ne,je=C[M+0],Le=je,Ye=je;for(Ne=0;Ne<ge;++Ne)Le=Ye+(je=C[M+Ne])-Le,Ye=W[J+Ne]+(-256&Le?0>Le?0:255:Le)&255,Le=je,ue[he+Ne]=Ye}}function Xr(C,M,W,J){var ue=M.width,he=M.o;if(e(C!=null&&M!=null),0>W||0>=J||W+J>he)return null;if(!C.Cc){if(C.ga==null){var ge;if(C.ga=new Kr,(ge=C.ga==null)||(ge=M.width*M.o,e(C.Gb.length==0),C.Gb=s(ge),C.Uc=0,C.Gb==null?ge=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,ge=1),ge=!ge),!ge){ge=C.ga;var Ne=C.Fa,je=C.P,Le=C.qc,Ye=C.mb,vt=C.nb,Fe=je+1,Je=Le-1,dt=ge.l;if(e(Ne!=null&&Ye!=null&&M!=null),Lh[0]=null,Lh[1]=yr,Lh[2]=Pn,Lh[3]=Gn,ge.ca=Ye,ge.tb=vt,ge.c=M.width,ge.i=M.height,e(0<ge.c&&0<ge.i),1>=Le)M=0;else if(ge.$a=3&Ne[je+0],ge.Z=Ne[je+0]>>2&3,ge.Lc=Ne[je+0]>>4&3,je=Ne[je+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||je)M=0;else if(dt.put=fr,dt.ac=En,dt.bc=nn,dt.ma=ge,dt.width=M.width,dt.height=M.height,dt.Da=M.Da,dt.v=M.v,dt.va=M.va,dt.j=M.j,dt.o=M.o,ge.$a)e:{e(ge.$a==1),M=st();t:for(;;){if(M==null){M=0;break e}if(e(ge!=null),ge.mc=M,M.c=ge.c,M.i=ge.i,M.l=ge.l,M.l.ma=ge,M.l.width=ge.c,M.l.height=ge.i,M.a=0,me(M.m,Ne,Fe,Je),!Ae(ge.c,ge.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Se(M.s)?(ge.ic=1,Ne=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(Ne),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(ge.ic=0,M=Ge(M,ge.c)),!M))break t;M=1;break e}ge.mc=null,M=0}else M=Je>=ge.c*ge.i;ge=!M}if(ge)return null;C.ga.Lc!=1?C.Ga=0:J=he-W}e(C.ga!=null),e(W+J<=he);e:{if(M=(Ne=C.ga).c,he=Ne.l.o,Ne.$a==0){if(Fe=C.rc,Je=C.Vc,dt=C.Fa,je=C.P+1+W*M,Le=C.mb,Ye=C.nb+W*M,e(je<=C.P+C.qc),Ne.Z!=0)for(e(Lh[Ne.Z]!=null),ge=0;ge<J;++ge)Lh[Ne.Z](Fe,Je,dt,je,Le,Ye,M),Fe=Le,Je=Ye,Ye+=M,je+=M;else for(ge=0;ge<J;++ge)n(Le,Ye,dt,je,M),Fe=Le,Je=Ye,Ye+=M,je+=M;C.rc=Fe,C.Vc=Je}else{if(e(Ne.mc!=null),M=W+J,e((ge=Ne.mc)!=null),e(M<=ge.i),ge.C>=M)M=1;else if(Ne.ic||nt(),Ne.ic){Ne=ge.V,Fe=ge.Ba,Je=ge.c;var Dt=ge.i,mt=(dt=1,je=ge.$/Je,Le=ge.$%Je,Ye=ge.m,vt=ge.s,ge.$),Bt=Je*Dt,Ht=Je*M,sr=vt.wc,rr=mt<Ht?de(vt,Le,je):null;e(mt<=Bt),e(M<=Dt),e(Se(vt));t:for(;;){for(;!Ye.h&&mt<Ht;){if(Le&sr||(rr=de(vt,Le,je)),e(rr!=null),ke(Ye),256>(Dt=qr(rr.G[0],rr.H[0],Ye)))Ne[Fe+mt]=Dt,++mt,++Le>=Je&&(Le=0,++je<=M&&!(je%16)&&Pe(ge,je));else{if(!(280>Dt)){dt=0;break t}Dt=on(Dt-256,Ye);var Vr,Or=qr(rr.G[4],rr.H[4],Ye);if(ke(Ye),!(mt>=(Or=In(Je,Or=on(Or,Ye)))&&Bt-mt>=Dt)){dt=0;break t}for(Vr=0;Vr<Dt;++Vr)Ne[Fe+mt+Vr]=Ne[Fe+mt+Vr-Or];for(mt+=Dt,Le+=Dt;Le>=Je;)Le-=Je,++je<=M&&!(je%16)&&Pe(ge,je);mt<Ht&&Le&sr&&(rr=de(vt,Le,je))}e(Ye.h==re(Ye))}Pe(ge,je>M?M:je);break t}!dt||Ye.h&&mt<Bt?(dt=0,ge.a=Ye.h?5:3):ge.$=mt,M=dt}else M=tt(ge,ge.V,ge.Ba,ge.c,ge.i,M,ct);if(!M){J=0;break e}}W+J>=he&&(C.Cc=1),J=1}if(!J)return null;if(C.Cc&&((J=C.ga)!=null&&(J.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+W*ue}function T(C,M,W,J,ue,he){for(;0<ue--;){var ge,Ne=C,je=M+(W?1:0),Le=C,Ye=M+(W?0:3);for(ge=0;ge<J;++ge){var vt=Le[Ye+4*ge];vt!=255&&(vt*=32897,Ne[je+4*ge+0]=Ne[je+4*ge+0]*vt>>23,Ne[je+4*ge+1]=Ne[je+4*ge+1]*vt>>23,Ne[je+4*ge+2]=Ne[je+4*ge+2]*vt>>23)}M+=he}}function K(C,M,W,J,ue){for(;0<J--;){var he;for(he=0;he<W;++he){var ge=C[M+2*he+0],Ne=15&(Le=C[M+2*he+1]),je=4369*Ne,Le=(240&Le|Le>>4)*je>>16;C[M+2*he+0]=(240&ge|ge>>4)*je>>16&240|(15&ge|ge<<4)*je>>16>>4&15,C[M+2*he+1]=240&Le|Ne}M+=ue}}function te(C,M,W,J,ue,he,ge,Ne){var je,Le,Ye=255;for(Le=0;Le<ue;++Le){for(je=0;je<J;++je){var vt=C[M+je];he[ge+4*je]=vt,Ye&=vt}M+=W,ge+=Ne}return Ye!=255}function we(C,M,W,J,ue){var he;for(he=0;he<ue;++he)W[J+he]=C[M+he]>>8}function nt(){Tm=T,zL=K,VL=te,$L=we}function gt(C,M,W){I[C]=function(J,ue,he,ge,Ne,je,Le,Ye,vt,Fe,Je,dt,Dt,mt,Bt,Ht,sr){var rr,Vr=sr-1>>1,Or=Ne[je+0]|Le[Ye+0]<<16,Sn=vt[Fe+0]|Je[dt+0]<<16;e(J!=null);var Lr=3*Or+Sn+131074>>2;for(M(J[ue+0],255&Lr,Lr>>16,Dt,mt),he!=null&&(Lr=3*Sn+Or+131074>>2,M(he[ge+0],255&Lr,Lr>>16,Bt,Ht)),rr=1;rr<=Vr;++rr){var Hn=Ne[je+rr]|Le[Ye+rr]<<16,Ci=vt[Fe+rr]|Je[dt+rr]<<16,jn=Or+Hn+Sn+Ci+524296,Fr=jn+2*(Hn+Sn)>>3;Lr=Fr+Or>>1,Or=(jn=jn+2*(Or+Ci)>>3)+Hn>>1,M(J[ue+2*rr-1],255&Lr,Lr>>16,Dt,mt+(2*rr-1)*W),M(J[ue+2*rr-0],255&Or,Or>>16,Dt,mt+(2*rr-0)*W),he!=null&&(Lr=jn+Sn>>1,Or=Fr+Ci>>1,M(he[ge+2*rr-1],255&Lr,Lr>>16,Bt,Ht+(2*rr-1)*W),M(he[ge+2*rr+0],255&Or,Or>>16,Bt,Ht+(2*rr+0)*W)),Or=Hn,Sn=Ci}1&sr||(Lr=3*Or+Sn+131074>>2,M(J[ue+sr-1],255&Lr,Lr>>16,Dt,mt+(sr-1)*W),he!=null&&(Lr=3*Sn+Or+131074>>2,M(he[ge+sr-1],255&Lr,Lr>>16,Bt,Ht+(sr-1)*W)))}}function ar(){Yc[p_]=e0e,Yc[g_]=e9,Yc[XL]=t0e,Yc[x_]=t9,Yc[v_]=r9,Yc[T6]=n9,Yc[YL]=r0e,Yc[C6]=e9,Yc[k6]=t9,Yc[b_]=r9,Yc[I6]=n9}function an(C){return C&-16384?0>C?0:255:C>>n0e}function pa(C,M){return an((19077*C>>8)+(26149*M>>8)-14234)}function Tn(C,M,W){return an((19077*C>>8)-(6419*M>>8)-(13320*W>>8)+8708)}function xa(C,M){return an((19077*C>>8)+(33050*M>>8)-17685)}function Ws(C,M,W,J,ue){J[ue+0]=pa(C,W),J[ue+1]=Tn(C,M,W),J[ue+2]=xa(C,M)}function lo(C,M,W,J,ue){J[ue+0]=xa(C,M),J[ue+1]=Tn(C,M,W),J[ue+2]=pa(C,W)}function ta(C,M,W,J,ue){var he=Tn(C,M,W);M=he<<3&224|xa(C,M)>>3,J[ue+0]=248&pa(C,W)|he>>5,J[ue+1]=M}function oi(C,M,W,J,ue){var he=240&xa(C,M)|15;J[ue+0]=240&pa(C,W)|Tn(C,M,W)>>4,J[ue+1]=he}function jl(C,M,W,J,ue){J[ue+0]=255,Ws(C,M,W,J,ue+1)}function rl(C,M,W,J,ue){lo(C,M,W,J,ue),J[ue+3]=255}function Am(C,M,W,J,ue){Ws(C,M,W,J,ue),J[ue+3]=255}function ia(C,M){return 0>C?0:C>M?M:C}function Tl(C,M,W){I[C]=function(J,ue,he,ge,Ne,je,Le,Ye,vt){for(var Fe=Ye+(-2&vt)*W;Ye!=Fe;)M(J[ue+0],he[ge+0],Ne[je+0],Le,Ye),M(J[ue+1],he[ge+0],Ne[je+0],Le,Ye+W),ue+=2,++ge,++je,Ye+=2*W;1&vt&&M(J[ue+0],he[ge+0],Ne[je+0],Le,Ye)}}function ji(C,M,W){return W==0?C==0?M==0?6:5:M==0?4:0:W}function Sm(C,M,W,J,ue){switch(C>>>30){case 3:Ke(M,W,J,ue,0);break;case 2:ot(M,W,J,ue);break;case 1:zt(M,W,J,ue)}}function _s(C,M){var W,J,ue=M.M,he=M.Nb,ge=C.oc,Ne=C.pc+40,je=C.oc,Le=C.pc+584,Ye=C.oc,vt=C.pc+600;for(W=0;16>W;++W)ge[Ne+32*W-1]=129;for(W=0;8>W;++W)je[Le+32*W-1]=129,Ye[vt+32*W-1]=129;for(0<ue?ge[Ne-1-32]=je[Le-1-32]=Ye[vt-1-32]=129:(a(ge,Ne-32-1,127,21),a(je,Le-32-1,127,9),a(Ye,vt-32-1,127,9)),J=0;J<C.za;++J){var Fe=M.ya[M.aa+J];if(0<J){for(W=-1;16>W;++W)n(ge,Ne+32*W-4,ge,Ne+32*W+12,4);for(W=-1;8>W;++W)n(je,Le+32*W-4,je,Le+32*W+4,4),n(Ye,vt+32*W-4,Ye,vt+32*W+4,4)}var Je=C.Gd,dt=C.Hd+J,Dt=Fe.ad,mt=Fe.Hc;if(0<ue&&(n(ge,Ne-32,Je[dt].y,0,16),n(je,Le-32,Je[dt].f,0,8),n(Ye,vt-32,Je[dt].ea,0,8)),Fe.Za){var Bt=ge,Ht=Ne-32+16;for(0<ue&&(J>=C.za-1?a(Bt,Ht,Je[dt].y[15],4):n(Bt,Ht,Je[dt+1].y,0,4)),W=0;4>W;W++)Bt[Ht+128+W]=Bt[Ht+256+W]=Bt[Ht+384+W]=Bt[Ht+0+W];for(W=0;16>W;++W,mt<<=2)Bt=ge,Ht=Ne+s9[W],Uu[Fe.Ob[W]](Bt,Ht),Sm(mt,Dt,16*+W,Bt,Ht)}else if(Bt=ji(J,ue,Fe.Ob[0]),Mh[Bt](ge,Ne),mt!=0)for(W=0;16>W;++W,mt<<=2)Sm(mt,Dt,16*+W,ge,Ne+s9[W]);for(W=Fe.Gc,Bt=ji(J,ue,Fe.Dd),uf[Bt](je,Le),uf[Bt](Ye,vt),mt=Dt,Bt=je,Ht=Le,255&(Fe=0|W)&&(170&Fe?Nt(mt,256,Bt,Ht):Gt(mt,256,Bt,Ht)),Fe=Ye,mt=vt,255&(W>>=8)&&(170&W?Nt(Dt,320,Fe,mt):Gt(Dt,320,Fe,mt)),ue<C.Ub-1&&(n(Je[dt].y,0,ge,Ne+480,16),n(Je[dt].f,0,je,Le+224,8),n(Je[dt].ea,0,Ye,vt+224,8)),W=8*he*C.B,Je=C.sa,dt=C.ta+16*J+16*he*C.R,Dt=C.qa,Fe=C.ra+8*J+W,mt=C.Ha,Bt=C.Ia+8*J+W,W=0;16>W;++W)n(Je,dt+W*C.R,ge,Ne+32*W,16);for(W=0;8>W;++W)n(Dt,Fe+W*C.B,je,Le+32*W,8),n(mt,Bt+W*C.B,Ye,vt+32*W,8)}}function sf(C,M,W,J,ue,he,ge,Ne,je){var Le=[0],Ye=[0],vt=0,Fe=je!=null?je.kd:0,Je=je??new Rt;if(C==null||12>W)return 7;Je.data=C,Je.w=M,Je.ha=W,M=[M],W=[W],Je.gb=[Je.gb];e:{var dt=M,Dt=W,mt=Je.gb;if(e(C!=null),e(Dt!=null),e(mt!=null),mt[0]=0,12<=Dt[0]&&!r(C,dt[0],"RIFF")){if(r(C,dt[0]+8,"WEBP")){mt=3;break e}var Bt=Be(C,dt[0]+4);if(12>Bt||4294967286<Bt){mt=3;break e}if(Fe&&Bt>Dt[0]-8){mt=7;break e}mt[0]=Bt,dt[0]+=12,Dt[0]-=12}mt=0}if(mt!=0)return mt;for(Bt=0<Je.gb[0],W=W[0];;){e:{var Ht=C;Dt=M,mt=W;var sr=Le,rr=Ye,Vr=dt=[0];if((Lr=vt=[vt])[0]=0,8>mt[0])mt=7;else{if(!r(Ht,Dt[0],"VP8X")){if(Be(Ht,Dt[0]+4)!=10){mt=3;break e}if(18>mt[0]){mt=7;break e}var Or=Be(Ht,Dt[0]+8),Sn=1+Me(Ht,Dt[0]+12);if(2147483648<=Sn*(Ht=1+Me(Ht,Dt[0]+15))){mt=3;break e}Vr!=null&&(Vr[0]=Or),sr!=null&&(sr[0]=Sn),rr!=null&&(rr[0]=Ht),Dt[0]+=18,mt[0]-=18,Lr[0]=1}mt=0}}if(vt=vt[0],dt=dt[0],mt!=0)return mt;if(Dt=!!(2&dt),!Bt&&vt)return 3;if(he!=null&&(he[0]=!!(16&dt)),ge!=null&&(ge[0]=Dt),Ne!=null&&(Ne[0]=0),ge=Le[0],dt=Ye[0],vt&&Dt&&je==null){mt=0;break}if(4>W){mt=7;break}if(Bt&&vt||!Bt&&!vt&&!r(C,M[0],"ALPH")){W=[W],Je.na=[Je.na],Je.P=[Je.P],Je.Sa=[Je.Sa];e:{Or=C,mt=M,Bt=W;var Lr=Je.gb;sr=Je.na,rr=Je.P,Vr=Je.Sa,Sn=22,e(Or!=null),e(Bt!=null),Ht=mt[0];var Hn=Bt[0];for(e(sr!=null),e(Vr!=null),sr[0]=null,rr[0]=null,Vr[0]=0;;){if(mt[0]=Ht,Bt[0]=Hn,8>Hn){mt=7;break e}var Ci=Be(Or,Ht+4);if(4294967286<Ci){mt=3;break e}var jn=8+Ci+1&-2;if(Sn+=jn,0<Lr&&Sn>Lr){mt=3;break e}if(!r(Or,Ht,"VP8 ")||!r(Or,Ht,"VP8L")){mt=0;break e}if(Hn[0]<jn){mt=7;break e}r(Or,Ht,"ALPH")||(sr[0]=Or,rr[0]=Ht+8,Vr[0]=Ci),Ht+=jn,Hn-=jn}}if(W=W[0],Je.na=Je.na[0],Je.P=Je.P[0],Je.Sa=Je.Sa[0],mt!=0)break}W=[W],Je.Ja=[Je.Ja],Je.xa=[Je.xa];e:if(Lr=C,mt=M,Bt=W,sr=Je.gb[0],rr=Je.Ja,Vr=Je.xa,Or=mt[0],Ht=!r(Lr,Or,"VP8 "),Sn=!r(Lr,Or,"VP8L"),e(Lr!=null),e(Bt!=null),e(rr!=null),e(Vr!=null),8>Bt[0])mt=7;else{if(Ht||Sn){if(Lr=Be(Lr,Or+4),12<=sr&&Lr>sr-12){mt=3;break e}if(Fe&&Lr>Bt[0]-8){mt=7;break e}rr[0]=Lr,mt[0]+=8,Bt[0]-=8,Vr[0]=Sn}else Vr[0]=5<=Bt[0]&&Lr[Or+0]==47&&!(Lr[Or+4]>>5),rr[0]=Bt[0];mt=0}if(W=W[0],Je.Ja=Je.Ja[0],Je.xa=Je.xa[0],M=M[0],mt!=0)break;if(4294967286<Je.Ja)return 3;if(Ne==null||Dt||(Ne[0]=Je.xa?2:1),ge=[ge],dt=[dt],Je.xa){if(5>W){mt=7;break}Ne=ge,Fe=dt,Dt=he,C==null||5>W?C=0:5<=W&&C[M+0]==47&&!(C[M+4]>>5)?(Bt=[0],Lr=[0],sr=[0],me(rr=new Y,C,M,W),ea(rr,Bt,Lr,sr)?(Ne!=null&&(Ne[0]=Bt[0]),Fe!=null&&(Fe[0]=Lr[0]),Dt!=null&&(Dt[0]=sr[0]),C=1):C=0):C=0}else{if(10>W){mt=7;break}Ne=dt,C==null||10>W||!Yn(C,M+3,W-3)?C=0:(Fe=C[M+0]|C[M+1]<<8|C[M+2]<<16,Dt=16383&(C[M+7]<<8|C[M+6]),C=16383&(C[M+9]<<8|C[M+8]),1&Fe||3<(Fe>>1&7)||!(Fe>>4&1)||Fe>>5>=Je.Ja||!Dt||!C?C=0:(ge&&(ge[0]=Dt),Ne&&(Ne[0]=C),C=1))}if(!C||(ge=ge[0],dt=dt[0],vt&&(Le[0]!=ge||Ye[0]!=dt)))return 3;je!=null&&(je[0]=Je,je.offset=M-je.w,e(4294967286>M-je.w),e(je.offset==je.ha-W));break}return mt==0||mt==7&&vt&&je==null?(he!=null&&(he[0]|=Je.na!=null&&0<Je.na.length),J!=null&&(J[0]=ge),ue!=null&&(ue[0]=dt),0):mt}function of(C,M,W){var J=M.width,ue=M.height,he=0,ge=0,Ne=J,je=ue;if(M.Da=C!=null&&0<C.Da,M.Da&&(Ne=C.cd,je=C.bd,he=C.v,ge=C.j,11>W||(he&=-2,ge&=-2),0>he||0>ge||0>=Ne||0>=je||he+Ne>J||ge+je>ue))return 0;if(M.v=he,M.j=ge,M.va=he+Ne,M.o=ge+je,M.U=Ne,M.T=je,M.da=C!=null&&0<C.da,M.da){if(!Lt(Ne,je,W=[C.ib],he=[C.hb]))return 0;M.ib=W[0],M.hb=he[0]}return M.ob=C!=null&&C.ob,M.Kb=C==null||!C.Sd,M.da&&(M.ob=M.ib<3*J/4&&M.hb<3*ue/4,M.Kb=0),1}function jm(C){if(C==null)return 2;if(11>C.S){var M=C.f.RGBA;M.fb+=(C.height-1)*M.A,M.A=-M.A}else M=C.f.kb,C=C.height,M.O+=(C-1)*M.fa,M.fa=-M.fa,M.N+=(C-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(C-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(C-1)*M.lb,M.lb=-M.lb);return 0}function Bu(C,M,W,J){if(J==null||0>=C||0>=M)return 2;if(W!=null){if(W.Da){var ue=W.cd,he=W.bd,ge=-2&W.v,Ne=-2&W.j;if(0>ge||0>Ne||0>=ue||0>=he||ge+ue>C||Ne+he>M)return 2;C=ue,M=he}if(W.da){if(!Lt(C,M,ue=[W.ib],he=[W.hb]))return 2;C=ue[0],M=he[0]}}J.width=C,J.height=M;e:{var je=J.width,Le=J.height;if(C=J.S,0>=je||0>=Le||!(C>=p_&&13>C))C=2;else{if(0>=J.Rd&&J.sd==null){ge=he=ue=M=0;var Ye=(Ne=je*i9[C])*Le;if(11>C||(he=(Le+1)/2*(M=(je+1)/2),C==12&&(ge=(ue=je)*Le)),(Le=s(Ye+2*he+ge))==null){C=1;break e}J.sd=Le,11>C?((je=J.f.RGBA).eb=Le,je.fb=0,je.A=Ne,je.size=Ye):((je=J.f.kb).y=Le,je.O=0,je.fa=Ne,je.Fd=Ye,je.f=Le,je.N=0+Ye,je.Ab=M,je.Cd=he,je.ea=Le,je.W=0+Ye+he,je.Db=M,je.Ed=he,C==12&&(je.F=Le,je.J=0+Ye+2*he),je.Tc=ge,je.lb=ue)}if(M=1,ue=J.S,he=J.width,ge=J.height,ue>=p_&&13>ue)if(11>ue)C=J.f.RGBA,M&=(Ne=Math.abs(C.A))*(ge-1)+he<=C.size,M&=Ne>=he*i9[ue],M&=C.eb!=null;else{C=J.f.kb,Ne=(he+1)/2,Ye=(ge+1)/2,je=Math.abs(C.fa),Le=Math.abs(C.Ab);var vt=Math.abs(C.Db),Fe=Math.abs(C.lb),Je=Fe*(ge-1)+he;M&=je*(ge-1)+he<=C.Fd,M&=Le*(Ye-1)+Ne<=C.Cd,M=(M&=vt*(Ye-1)+Ne<=C.Ed)&je>=he&Le>=Ne&vt>=Ne,M&=C.y!=null,M&=C.f!=null,M&=C.ea!=null,ue==12&&(M&=Fe>=he,M&=Je<=C.Tc,M&=C.F!=null)}else M=0;C=M?0:2}}return C!=0||W!=null&&W.fd&&(C=jm(J)),C}var qi=64,nl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],co=24,Cl=32,bn=8,ic=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(C){return C},I.Predictor2=function(C,M,W){return M[W+0]},I.Predictor3=function(C,M,W){return M[W+1]},I.Predictor4=function(C,M,W){return M[W-1]},I.Predictor5=function(C,M,W){return qt(qt(C,M[W+1]),M[W+0])},I.Predictor6=function(C,M,W){return qt(C,M[W-1])},I.Predictor7=function(C,M,W){return qt(C,M[W+0])},I.Predictor8=function(C,M,W){return qt(M[W-1],M[W+0])},I.Predictor9=function(C,M,W){return qt(M[W+0],M[W+1])},I.Predictor10=function(C,M,W){return qt(qt(C,M[W-1]),qt(M[W+0],M[W+1]))},I.Predictor11=function(C,M,W){var J=M[W+0];return 0>=Xe(J>>24&255,C>>24&255,(M=M[W-1])>>24&255)+Xe(J>>16&255,C>>16&255,M>>16&255)+Xe(J>>8&255,C>>8&255,M>>8&255)+Xe(255&J,255&C,255&M)?J:C},I.Predictor12=function(C,M,W){var J=M[W+0];return(Wt((C>>24&255)+(J>>24&255)-((M=M[W-1])>>24&255))<<24|Wt((C>>16&255)+(J>>16&255)-(M>>16&255))<<16|Wt((C>>8&255)+(J>>8&255)-(M>>8&255))<<8|Wt((255&C)+(255&J)-(255&M)))>>>0},I.Predictor13=function(C,M,W){var J=M[W-1];return(nr((C=qt(C,M[W+0]))>>24&255,J>>24&255)<<24|nr(C>>16&255,J>>16&255)<<16|nr(C>>8&255,J>>8&255)<<8|nr(255&C,255&J))>>>0};var oe=I.PredictorAdd0;I.PredictorAdd1=Kt,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var f=I.PredictorAdd2;Ut("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),Ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var m,x=I.ColorIndexInverseTransform,v=I.MapARGB,y=I.VP8LColorIndexInverseTransformAlpha,E=I.MapAlpha,k=I.VP8LPredictorsAdd=[];k.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var L,q,Q,le,fe,Re,$e,Ke,ot,Nt,zt,Gt,$t,Wr,tn,li,Gi,Ti,ga,ci,Po,lf,cf,h_,Tm,zL,VL,$L,HL=s(511),qL=s(2041),GL=s(225),WL=s(767),KL=0,j6=qL,m_=GL,oc=WL,Xc=HL,p_=0,g_=1,XL=2,x_=3,v_=4,T6=5,YL=6,C6=7,k6=8,b_=9,I6=10,Uhe=[2,3,7],zhe=[3,3,11],ZL=[280,256,256,256,40],Vhe=[0,1,1,1,0],$he=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Hhe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qhe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ghe=8,O6=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],P6=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ov=null,Whe=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Khe=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],QL=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Xhe=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Yhe=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Zhe=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Qhe=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mh=[],Uu=[],uf=[],Jhe=1,JL=2,Lh=[],Yc=[];gt("UpsampleRgbLinePair",Ws,3),gt("UpsampleBgrLinePair",lo,3),gt("UpsampleRgbaLinePair",Am,4),gt("UpsampleBgraLinePair",rl,4),gt("UpsampleArgbLinePair",jl,4),gt("UpsampleRgba4444LinePair",oi,2),gt("UpsampleRgb565LinePair",ta,2);var e0e=I.UpsampleRgbLinePair,t0e=I.UpsampleBgrLinePair,e9=I.UpsampleRgbaLinePair,t9=I.UpsampleBgraLinePair,r9=I.UpsampleArgbLinePair,n9=I.UpsampleRgba4444LinePair,r0e=I.UpsampleRgb565LinePair,y_=16,w_=1<<y_-1,Pv=-227,R6=482,n0e=6,a9=0,a0e=s(256),s0e=s(256),i0e=s(256),o0e=s(256),l0e=s(R6-Pv),c0e=s(R6-Pv);Tl("YuvToRgbRow",Ws,3),Tl("YuvToBgrRow",lo,3),Tl("YuvToRgbaRow",Am,4),Tl("YuvToBgraRow",rl,4),Tl("YuvToArgbRow",jl,4),Tl("YuvToRgba4444Row",oi,2),Tl("YuvToRgb565Row",ta,2);var s9=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],__=[0,2,8],u0e=[8,7,6,4,4,2,2,2,1,1,1,1],d0e=1;this.WebPDecodeRGBA=function(C,M,W,J,ue){var he=g_,ge=new rt,Ne=new At;ge.ba=Ne,Ne.S=he,Ne.width=[Ne.width],Ne.height=[Ne.height];var je=Ne.width,Le=Ne.height,Ye=new er;if(Ye==null||C==null)var vt=2;else e(Ye!=null),vt=sf(C,M,W,Ye.width,Ye.height,Ye.Pd,Ye.Qd,Ye.format,null);if(vt!=0?je=0:(je!=null&&(je[0]=Ye.width[0]),Le!=null&&(Le[0]=Ye.height[0]),je=1),je){Ne.width=Ne.width[0],Ne.height=Ne.height[0],J!=null&&(J[0]=Ne.width),ue!=null&&(ue[0]=Ne.height);e:{if(J=new ls,(ue=new Rt).data=C,ue.w=M,ue.ha=W,ue.kd=1,M=[0],e(ue!=null),((C=sf(ue.data,ue.w,ue.ha,null,null,null,M,null,ue))==0||C==7)&&M[0]&&(C=4),(M=C)==0){if(e(ge!=null),J.data=ue.data,J.w=ue.w+ue.offset,J.ha=ue.ha-ue.offset,J.put=fr,J.ac=En,J.bc=nn,J.ma=ge,ue.xa){if((C=st())==null){ge=1;break e}if(function(Fe,Je){var dt=[0],Dt=[0],mt=[0];t:for(;;){if(Fe==null)return 0;if(Je==null)return Fe.a=2,0;if(Fe.l=Je,Fe.a=0,me(Fe.m,Je.data,Je.w,Je.ha),!ea(Fe.m,dt,Dt,mt)){Fe.a=3;break t}if(Fe.xb=JL,Je.width=dt[0],Je.height=Dt[0],!Ae(dt[0],Dt[0],1,Fe,null))break t;return 1}return e(Fe.a!=0),0}(C,J)){if(J=(M=Bu(J.width,J.height,ge.Oa,ge.ba))==0){t:{J=C;r:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((W=J.l)!=null),e((ue=W.ma)!=null),J.xb!=0){if(J.ca=ue.ba,J.tb=ue.tb,e(J.ca!=null),!of(ue.Oa,W,x_)){J.a=2;break r}if(!Ge(J,W.width)||W.da)break r;if((W.da||Qe(J.ca.S))&&nt(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&nt()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!be(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!tt(J,J.V,J.Ba,J.c,J.i,W.o,_e))break r;ue.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(M=C.a)}else M=C.a}else{if((C=new ii)==null){ge=1;break e}if(C.Fa=ue.na,C.P=ue.P,C.qc=ue.Sa,Ts(C,J)){if((M=Bu(J.width,J.height,ge.Oa,ge.ba))==0){if(C.Aa=0,W=ge.Oa,e((ue=C)!=null),W!=null){if(0<(je=0>(je=W.Md)?0:100<je?255:255*je/100)){for(Le=Ye=0;4>Le;++Le)12>(vt=ue.pb[Le]).lc&&(vt.ia=je*u0e[0>vt.lc?0:vt.lc]>>3),Ye|=vt.ia;Ye&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=W.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}(function(Fe,Je){if(Fe==null)return 0;if(Je==null)return On(Fe,2,"NULL VP8Io parameter in VP8Decode().");if(!Fe.cb&&!Ts(Fe,Je))return 0;if(e(Fe.cb),Je.ac==null||Je.ac(Je)){Je.ob&&(Fe.L=0);var dt=__[Fe.L];if(Fe.L==2?(Fe.yb=0,Fe.zb=0):(Fe.yb=Je.v-dt>>4,Fe.zb=Je.j-dt>>4,0>Fe.yb&&(Fe.yb=0),0>Fe.zb&&(Fe.zb=0)),Fe.Va=Je.o+15+dt>>4,Fe.Hb=Je.va+15+dt>>4,Fe.Hb>Fe.za&&(Fe.Hb=Fe.za),Fe.Va>Fe.Ub&&(Fe.Va=Fe.Ub),0<Fe.L){var Dt=Fe.ed;for(dt=0;4>dt;++dt){var mt;if(Fe.Qa.Cb){var Bt=Fe.Qa.Lb[dt];Fe.Qa.Fb||(Bt+=Dt.Tb)}else Bt=Dt.Tb;for(mt=0;1>=mt;++mt){var Ht=Fe.gd[dt][mt],sr=Bt;if(Dt.Pc&&(sr+=Dt.vd[0],mt&&(sr+=Dt.od[0])),0<(sr=0>sr?0:63<sr?63:sr)){var rr=sr;0<Dt.wb&&(rr=4<Dt.wb?rr>>2:rr>>1)>9-Dt.wb&&(rr=9-Dt.wb),1>rr&&(rr=1),Ht.dd=rr,Ht.tc=2*sr+rr,Ht.ld=40<=sr?2:15<=sr?1:0}else Ht.tc=0;Ht.La=mt}}}dt=0}else On(Fe,6,"Frame setup failed"),dt=Fe.a;if(dt=dt==0){if(dt){Fe.$c=0,0<Fe.Aa||(Fe.Ic=d0e);t:{dt=Fe.Ic,Dt=4*(rr=Fe.za);var Vr=32*rr,Or=rr+1,Sn=0<Fe.L?rr*(0<Fe.Aa?2:1):0,Lr=(Fe.Aa==2?2:1)*rr;if((Ht=Dt+832+(mt=3*(16*dt+__[Fe.L])/2*Vr)+(Bt=Fe.Fa!=null&&0<Fe.Fa.length?Fe.Kc.c*Fe.Kc.i:0))!=Ht)dt=0;else{if(Ht>Fe.Vb){if(Fe.Vb=0,Fe.Ec=s(Ht),Fe.Fc=0,Fe.Ec==null){dt=On(Fe,1,"no memory during frame initialization.");break t}Fe.Vb=Ht}Ht=Fe.Ec,sr=Fe.Fc,Fe.Ac=Ht,Fe.Bc=sr,sr+=Dt,Fe.Gd=o(Vr,ln),Fe.Hd=0,Fe.rb=o(Or+1,Gr),Fe.sb=1,Fe.wa=Sn?o(Sn,Yr):null,Fe.Y=0,Fe.D.Nb=0,Fe.D.wa=Fe.wa,Fe.D.Y=Fe.Y,0<Fe.Aa&&(Fe.D.Y+=rr),e(!0),Fe.oc=Ht,Fe.pc=sr,sr+=832,Fe.ya=o(Lr,ws),Fe.aa=0,Fe.D.ya=Fe.ya,Fe.D.aa=Fe.aa,Fe.Aa==2&&(Fe.D.aa+=rr),Fe.R=16*rr,Fe.B=8*rr,rr=(Vr=__[Fe.L])*Fe.R,Vr=Vr/2*Fe.B,Fe.sa=Ht,Fe.ta=sr+rr,Fe.qa=Fe.sa,Fe.ra=Fe.ta+16*dt*Fe.R+Vr,Fe.Ha=Fe.qa,Fe.Ia=Fe.ra+8*dt*Fe.B+Vr,Fe.$c=0,sr+=mt,Fe.mb=Bt?Ht:null,Fe.nb=Bt?sr:null,e(sr+Bt<=Fe.Fc+Fe.Vb),zr(Fe),a(Fe.Ac,Fe.Bc,0,Dt),dt=1}}if(dt){if(Je.ka=0,Je.y=Fe.sa,Je.O=Fe.ta,Je.f=Fe.qa,Je.N=Fe.ra,Je.ea=Fe.Ha,Je.Vd=Fe.Ia,Je.fa=Fe.R,Je.Rc=Fe.B,Je.F=null,Je.J=0,!KL){for(dt=-255;255>=dt;++dt)HL[255+dt]=0>dt?-dt:dt;for(dt=-1020;1020>=dt;++dt)qL[1020+dt]=-128>dt?-128:127<dt?127:dt;for(dt=-112;112>=dt;++dt)GL[112+dt]=-16>dt?-16:15<dt?15:dt;for(dt=-255;510>=dt;++dt)WL[255+dt]=0>dt?0:255<dt?255:dt;KL=1}$e=qa,Ke=ut,Nt=Oe,zt=Ar,Gt=Ia,ot=Ha,$t=Kc,Wr=Oo,tn=z,li=ie,Gi=sc,Ti=Et,ga=De,ci=qe,Po=ac,lf=Wc,cf=Fu,h_=Dh,Uu[0]=Ir,Uu[1]=Zo,Uu[2]=$n,Uu[3]=ks,Uu[4]=Gs,Uu[5]=ha,Uu[6]=Ur,Uu[7]=af,Uu[8]=Mu,Uu[9]=ma,Mh[0]=jr,Mh[1]=Dr,Mh[2]=Zn,Mh[3]=yt,Mh[4]=Dn,Mh[5]=pn,Mh[6]=Jr,uf[0]=el,uf[1]=Cs,uf[2]=Qo,uf[3]=Gc,uf[4]=oo,uf[5]=Al,uf[6]=Sl,dt=1}else dt=0}dt&&(dt=function(Hn,Ci){for(Hn.M=0;Hn.M<Hn.Va;++Hn.M){var jn,Fr=Hn.Jc[Hn.M&Hn.Xb],wr=Hn.m,Ks=Hn;for(jn=0;jn<Ks.za;++jn){var yn=wr,Wn=Ks,Ya=Wn.Ac,uo=Wn.Bc+4*jn,al=Wn.zc,Is=Wn.ya[Wn.aa+jn];if(Wn.Qa.Bb?Is.$b=Ie(yn,Wn.Pa.jb[0])?2+Ie(yn,Wn.Pa.jb[2]):Ie(yn,Wn.Pa.jb[1]):Is.$b=0,Wn.kc&&(Is.Ad=Ie(yn,Wn.Bd)),Is.Za=!Ie(yn,145)+0,Is.Za){var Ro=Is.Ob,sl=0;for(Wn=0;4>Wn;++Wn){var ki,Qn=al[0+Wn];for(ki=0;4>ki;++ki){Qn=Yhe[Ya[uo+ki]][Qn];for(var va=QL[Ie(yn,Qn[0])];0<va;)va=QL[2*va+Ie(yn,Qn[va])];Qn=-va,Ya[uo+ki]=Qn}n(Ro,sl,Ya,uo,4),sl+=4,al[0+Wn]=Qn}}else Qn=Ie(yn,156)?Ie(yn,128)?1:3:Ie(yn,163)?2:0,Is.Ob[0]=Qn,a(Ya,uo,Qn,4),a(al,0,Qn,4);Is.Dd=Ie(yn,142)?Ie(yn,114)?Ie(yn,183)?1:3:2:0}if(Ks.m.Ka)return On(Hn,7,"Premature end-of-partition0 encountered.");for(;Hn.ja<Hn.za;++Hn.ja){if(Ks=Fr,yn=(wr=Hn).rb[wr.sb-1],Ya=wr.rb[wr.sb+wr.ja],jn=wr.ya[wr.aa+wr.ja],uo=wr.kc?jn.Ad:0)yn.la=Ya.la=0,jn.Za||(yn.Na=Ya.Na=0),jn.Hc=0,jn.Gc=0,jn.ia=0;else{var Os,ba;if(yn=Ya,Ya=Ks,uo=wr.Pa.Xc,al=wr.ya[wr.aa+wr.ja],Is=wr.pb[al.$b],Wn=al.ad,Ro=0,sl=wr.rb[wr.sb-1],Qn=ki=0,a(Wn,Ro,0,384),al.Za)var fo=0,zu=uo[3];else{va=s(16);var Xs=yn.Na+sl.Na;if(Xs=Ov(Ya,uo[1],Xs,Is.Eb,0,va,0),yn.Na=sl.Na=(0<Xs)+0,1<Xs)$e(va,0,Wn,Ro);else{var kl=va[0]+3>>3;for(va=0;256>va;va+=16)Wn[Ro+va]=kl}fo=1,zu=uo[0]}var Ma=15&yn.la,Ii=15&sl.la;for(va=0;4>va;++va){var lc=1&Ii;for(kl=ba=0;4>kl;++kl)Ma=Ma>>1|(lc=(Xs=Ov(Ya,zu,Xs=lc+(1&Ma),Is.Sc,fo,Wn,Ro))>fo)<<7,ba=ba<<2|(3<Xs?3:1<Xs?2:Wn[Ro+0]!=0),Ro+=16;Ma>>=4,Ii=Ii>>1|lc<<7,ki=(ki<<8|ba)>>>0}for(zu=Ma,fo=Ii>>4,Os=0;4>Os;Os+=2){for(ba=0,Ma=yn.la>>4+Os,Ii=sl.la>>4+Os,va=0;2>va;++va){for(lc=1&Ii,kl=0;2>kl;++kl)Xs=lc+(1&Ma),Ma=Ma>>1|(lc=0<(Xs=Ov(Ya,uo[2],Xs,Is.Qc,0,Wn,Ro)))<<3,ba=ba<<2|(3<Xs?3:1<Xs?2:Wn[Ro+0]!=0),Ro+=16;Ma>>=2,Ii=Ii>>1|lc<<5}Qn|=ba<<4*Os,zu|=Ma<<4<<Os,fo|=(240&Ii)<<Os}yn.la=zu,sl.la=fo,al.Hc=ki,al.Gc=Qn,al.ia=43690&Qn?0:Is.ia,uo=!(ki|Qn)}if(0<wr.L&&(wr.wa[wr.Y+wr.ja]=wr.gd[jn.$b][jn.Za],wr.wa[wr.Y+wr.ja].La|=!uo),Ks.Ka)return On(Hn,7,"Premature end-of-file encountered.")}if(zr(Hn),wr=Ci,Ks=1,jn=(Fr=Hn).D,yn=0<Fr.L&&Fr.M>=Fr.zb&&Fr.M<=Fr.Va,Fr.Aa==0)t:{if(jn.M=Fr.M,jn.uc=yn,_s(Fr,jn),Ks=1,jn=(ba=Fr.D).Nb,yn=(Qn=__[Fr.L])*Fr.R,Ya=Qn/2*Fr.B,va=16*jn*Fr.R,kl=8*jn*Fr.B,uo=Fr.sa,al=Fr.ta-yn+va,Is=Fr.qa,Wn=Fr.ra-Ya+kl,Ro=Fr.Ha,sl=Fr.Ia-Ya+kl,Ii=(Ma=ba.M)==0,ki=Ma>=Fr.Va-1,Fr.Aa==2&&_s(Fr,ba),ba.uc)for(lc=(Xs=Fr).D.M,e(Xs.D.uc),ba=Xs.yb;ba<Xs.Hb;++ba){fo=ba,zu=lc;var il=(cc=(ho=Xs).D).Nb;Os=ho.R;var cc=cc.wa[cc.Y+fo],uc=ho.sa,Il=ho.ta+16*il*Os+16*fo,dc=cc.dd,Ga=cc.tc;if(Ga!=0)if(e(3<=Ga),ho.L==1)0<fo&&lf(uc,Il,Os,Ga+4),cc.La&&h_(uc,Il,Os,Ga),0<zu&&Po(uc,Il,Os,Ga+4),cc.La&&cf(uc,Il,Os,Ga);else{var fc=ho.B,Vu=ho.qa,Cm=ho.ra+8*il*fc+8*fo,df=ho.Ha,ho=ho.Ia+8*il*fc+8*fo;il=cc.ld,0<fo&&(Wr(uc,Il,Os,Ga+4,dc,il),li(Vu,Cm,df,ho,fc,Ga+4,dc,il)),cc.La&&(Ti(uc,Il,Os,Ga,dc,il),ci(Vu,Cm,df,ho,fc,Ga,dc,il)),0<zu&&($t(uc,Il,Os,Ga+4,dc,il),tn(Vu,Cm,df,ho,fc,Ga+4,dc,il)),cc.La&&(Gi(uc,Il,Os,Ga,dc,il),ga(Vu,Cm,df,ho,fc,Ga,dc,il))}}if(Fr.ia&&alert("todo:DitherRow"),wr.put!=null){if(ba=16*Ma,Ma=16*(Ma+1),Ii?(wr.y=Fr.sa,wr.O=Fr.ta+va,wr.f=Fr.qa,wr.N=Fr.ra+kl,wr.ea=Fr.Ha,wr.W=Fr.Ia+kl):(ba-=Qn,wr.y=uo,wr.O=al,wr.f=Is,wr.N=Wn,wr.ea=Ro,wr.W=sl),ki||(Ma-=Qn),Ma>wr.o&&(Ma=wr.o),wr.F=null,wr.J=null,Fr.Fa!=null&&0<Fr.Fa.length&&ba<Ma&&(wr.J=Xr(Fr,wr,ba,Ma-ba),wr.F=Fr.mb,wr.F==null&&wr.F.length==0)){Ks=On(Fr,3,"Could not decode alpha data.");break t}ba<wr.j&&(Qn=wr.j-ba,ba=wr.j,e(!(1&Qn)),wr.O+=Fr.R*Qn,wr.N+=Fr.B*(Qn>>1),wr.W+=Fr.B*(Qn>>1),wr.F!=null&&(wr.J+=wr.width*Qn)),ba<Ma&&(wr.O+=wr.v,wr.N+=wr.v>>1,wr.W+=wr.v>>1,wr.F!=null&&(wr.J+=wr.v),wr.ka=ba-wr.j,wr.U=wr.va-wr.v,wr.T=Ma-ba,Ks=wr.put(wr))}jn+1!=Fr.Ic||ki||(n(Fr.sa,Fr.ta-yn,uo,al+16*Fr.R,yn),n(Fr.qa,Fr.ra-Ya,Is,Wn+8*Fr.B,Ya),n(Fr.Ha,Fr.Ia-Ya,Ro,sl+8*Fr.B,Ya))}if(!Ks)return On(Hn,6,"Output aborted.")}return 1}(Fe,Je)),Je.bc!=null&&Je.bc(Je),dt&=1}return dt?(Fe.cb=0,dt):0})(C,J)||(M=C.a)}}else M=C.a}M==0&&ge.Oa!=null&&ge.Oa.fd&&(M=jm(ge.ba))}ge=M}he=ge!=0?null:11>he?Ne.f.RGBA.eb:Ne.f.kb.y}else he=null;return he};var i9=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(I,V){for(var R="",B=0;B<4;B++)R+=String.fromCharCode(I[V++]);return R}function d(I,V){return I[V+0]|I[V+1]<<8}function h(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16)>>>0}function p(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16|I[V+3]<<24)>>>0}new c;var g=[0],b=[0],w=[],_=new c,N=t,A=function(I,V){var R={},B=0,F=!1,ee=0,Z=0;if(R.frames=[],!function(H,Y){for(var X=0;X<4;X++)if(H[Y+X]!="RIFF".charCodeAt(X))return!0;return!1}(I,V)){for(p(I,V+=4),V+=8;V<I.length;){var ce=u(I,V),ne=p(I,V+=4);V+=4;var ae=ne+(1&ne);switch(ce){case"VP8 ":case"VP8L":R.frames[B]===void 0&&(R.frames[B]={}),(ye=R.frames[B]).src_off=F?Z:V-8,ye.src_size=ee+ne+8,B++,F&&(F=!1,ee=0,Z=0);break;case"VP8X":(ye=R.header={}).feature_flags=I[V];var me=V+4;ye.canvas_width=1+h(I,me),me+=3,ye.canvas_height=1+h(I,me),me+=3;break;case"ALPH":F=!0,ee=ae+8,Z=V-8;break;case"ANIM":(ye=R.header).bgcolor=p(I,V),me=V+4,ye.loop_count=d(I,me),me+=2;break;case"ANMF":var Ee,ye;(ye=R.frames[B]={}).offset_x=2*h(I,V),V+=3,ye.offset_y=2*h(I,V),V+=3,ye.width=1+h(I,V),V+=3,ye.height=1+h(I,V),V+=3,ye.duration=h(I,V),V+=3,Ee=I[V++],ye.dispose=1&Ee,ye.blend=Ee>>1&1}ce!="ANMF"&&(V+=ae)}return R}}(N,0);A.response=N,A.rgbaoutput=!0,A.dataurl=!1;var j=A.header?A.header:null,P=A.frames?A.frames:null;if(j){j.loop_counter=j.loop_count,g=[j.canvas_height],b=[j.canvas_width];for(var U=0;U<P.length&&P[U].blend!=0;U++);}var G=P[0],O=_.WebPDecodeRGBA(N,G.src_off,G.src_size,b,g);G.rgba=O,G.imgwidth=b[0],G.imgheight=g[0];for(var D=0;D<b[0]*g[0]*4;D++)w[D]=O[D];return this.width=b,this.height=g,this.data=w,this}(function(t){var e,r,n,a,s,o,l,c,u,d=function(H){return H=H||{},this.isStrokeTransparent=H.isStrokeTransparent||!1,this.strokeOpacity=H.strokeOpacity||1,this.strokeStyle=H.strokeStyle||"#000000",this.fillStyle=H.fillStyle||"#000000",this.isFillTransparent=H.isFillTransparent||!1,this.fillOpacity=H.fillOpacity||1,this.font=H.font||"10px sans-serif",this.textBaseline=H.textBaseline||"alphabetic",this.textAlign=H.textAlign||"left",this.lineWidth=H.lineWidth||1,this.lineJoin=H.lineJoin||"miter",this.lineCap=H.lineCap||"butt",this.path=H.path||[],this.transform=H.transform!==void 0?H.transform.clone():new c,this.globalCompositeOperation=H.globalCompositeOperation||"normal",this.globalAlpha=H.globalAlpha||1,this.clip_path=H.clip_path||[],this.currentPoint=H.currentPoint||new o,this.miterLimit=H.miterLimit||10,this.lastPoint=H.lastPoint||new o,this.lineDashOffset=H.lineDashOffset||0,this.lineDash=H.lineDash||[],this.margin=H.margin||[0,0,0,0],this.prevPageLastElemOffset=H.prevPageLastElemOffset||0,this.ignoreClearRect=typeof H.ignoreClearRect!="boolean"||H.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var h=function(H){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=H;Object.defineProperty(this,"pdf",{get:function(){return Y}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Be){X=!!Be}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Be){re=!!Be}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Be){isNaN(Be)||(se=Be)}});var ke=0;Object.defineProperty(this,"posY",{get:function(){return ke},set:function(Be){isNaN(Be)||(ke=Be)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Be){var be;typeof Be=="number"?be=[Be,Be,Be,Be]:((be=new Array(4))[0]=Be[0],be[1]=Be.length>=2?Be[1]:be[0],be[2]=Be.length>=3?Be[2]:be[0],be[3]=Be.length>=4?Be[3]:be[1]),u.margin=be}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(Be){Ce=Be}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Be){xe=Be}});var Ie=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ie},set:function(Be){Ie=Be}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Be){Be instanceof d&&(u=Be)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Be){u.path=Be}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(Be){He=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var be;be=p(Be),this.ctx.fillStyle=be.style,this.ctx.isFillTransparent=be.a===0,this.ctx.fillOpacity=be.a,this.pdf.setFillColor(be.r,be.g,be.b,{a:be.a}),this.pdf.setTextColor(be.r,be.g,be.b,{a:be.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var be=p(Be);this.ctx.strokeStyle=be.style,this.ctx.isStrokeTransparent=be.a===0,this.ctx.strokeOpacity=be.a,be.a===0?this.pdf.setDrawColor(255,255,255):(be.a,this.pdf.setDrawColor(be.r,be.g,be.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var Ue=null,Me=null;Object.defineProperty(this,"fontFaces",{get:function(){return Me},set:function(Be){Ue=null,Me=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var be;if(this.ctx.font=Be,(be=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var Vt=be[1];be[2];var ht=be[3],Lt=be[4];be[5];var et=be[6],Jt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Lt)[2];Lt=Math.floor(Jt==="px"?parseFloat(Lt)*this.pdf.internal.scaleFactor:Jt==="em"?parseFloat(Lt)*this.pdf.getFontSize():parseFloat(Lt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Lt);var Ve=function(Ot){var Ut,Nr,or=[],lt=Ot.trim();if(lt==="")return KT;if(lt in bq)return[bq[lt]];for(;lt!=="";){switch(Nr=null,Ut=(lt=wq(lt)).charAt(0)){case'"':case"'":Nr=EHe(lt.substring(1),Ut);break;default:Nr=AHe(lt)}if(Nr===null||(or.push(Nr[0]),(lt=wq(Nr[1]))!==""&&lt.charAt(0)!==","))return KT;lt=lt.replace(/^,/,"")}return or}(et);if(this.fontFaces){var Ft=function(Ot,Ut){if(Ue===null){var Nr=function(or){var lt=[];return Object.keys(or).forEach(function(lr){or[lr].forEach(function(ve){var Ze=null;switch(ve){case"bold":Ze={family:lr,weight:"bold"};break;case"italic":Ze={family:lr,style:"italic"};break;case"bolditalic":Ze={family:lr,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:lr}}Ze!==null&&(Ze.ref={name:lr,style:ve},lt.push(Ze))})}),lt}(Ot.getFontList());Ue=function(or){for(var lt={},lr=0;lr<or.length;++lr){var ve=WT(or[lr]),Ze=ve.family,at=ve.stretch,Qe=ve.style,ze=ve.weight;lt[Ze]=lt[Ze]||{},lt[Ze][at]=lt[Ze][at]||{},lt[Ze][at][Qe]=lt[Ze][at][Qe]||{},lt[Ze][at][Qe][ze]=ve}return lt}(Nr.concat(Ut))}return Ue}(this.pdf,this.fontFaces),qt=Ve.map(function(Ot){return{family:Ot,stretch:"normal",weight:ht,style:Vt}}),Wt=function(Ot,Ut,Nr){for(var or=(Nr=Nr||{}).defaultFontFamily||"times",lt=Object.assign({},NHe,Nr.genericFontFamilies||{}),lr=null,ve=null,Ze=0;Ze<Ut.length;++Ze)if(lt[(lr=WT(Ut[Ze])).family]&&(lr.family=lt[lr.family]),Ot.hasOwnProperty(lr.family)){ve=Ot[lr.family];break}if(!(ve=ve||Ot[or]))throw new Error("Could not find a font-family for the rule '"+yq(lr)+"' and default family '"+or+"'.");if(ve=function(at,Qe){if(Qe[at])return Qe[at];var ze=dI[at],it=ze<=dI.normal?-1:1,At=vq(Qe,Koe,ze,it);if(!At)throw new Error("Could not find a matching font-stretch value for "+at);return At}(lr.stretch,ve),ve=function(at,Qe){if(Qe[at])return Qe[at];for(var ze=Woe[at],it=0;it<ze.length;++it)if(Qe[ze[it]])return Qe[ze[it]];throw new Error("Could not find a matching font-style for "+at)}(lr.style,ve),!(ve=function(at,Qe){if(Qe[at])return Qe[at];if(at===400&&Qe[500])return Qe[500];if(at===500&&Qe[400])return Qe[400];var ze=_He[at],it=vq(Qe,Xoe,ze,at<400?-1:1);if(!it)throw new Error("Could not find a matching font-weight for value "+at);return it}(lr.weight,ve)))throw new Error("Failed to resolve a font for the rule '"+yq(lr)+"'.");return ve}(Ft,qt);this.pdf.setFont(Wt.ref.name,Wt.ref.style)}else{var nr="";(ht==="bold"||parseInt(ht,10)>=700||Vt==="bold")&&(nr="bold"),Vt==="italic"&&(nr+="italic"),nr.length===0&&(nr="normal");for(var Xe="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<Ve.length;kt++){if(this.pdf.internal.getFont(Ve[kt],nr,{noFallback:!0,disableWarning:!0})!==void 0){Xe=Ve[kt];break}if(nr==="bolditalic"&&this.pdf.internal.getFont(Ve[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xe=Ve[kt],nr="bold";else if(this.pdf.internal.getFont(Ve[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xe=Ve[kt],nr="normal";break}}if(Xe===""){for(var pt=0;pt<Ve.length;pt++)if(Kt[Ve[pt]]){Xe=Kt[Ve[pt]];break}}Xe=Xe===""?"Times":Xe,this.pdf.setFont(Xe,nr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,ye.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,ye.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};h.prototype.setLineDash=function(H){this.lineDash=H},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){P.call(this,"fill",!1)},h.prototype.stroke=function(){P.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(H,Y){if(isNaN(H)||isNaN(Y))throw La.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(H,Y));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(H,Y)},h.prototype.closePath=function(){var H=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&Ea(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){H=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(H.x,H.y)},h.prototype.lineTo=function(H,Y){if(isNaN(H)||isNaN(Y))throw La.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(H,Y));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},h.prototype.quadraticCurveTo=function(H,Y,X,re){if(isNaN(X)||isNaN(re)||isNaN(H)||isNaN(Y))throw La.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(X,re)),ke=this.ctx.transform.applyToPoint(new o(H,Y));this.path.push({type:"qct",x1:ke.x,y1:ke.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.bezierCurveTo=function(H,Y,X,re,se,ke){if(isNaN(se)||isNaN(ke)||isNaN(H)||isNaN(Y)||isNaN(X)||isNaN(re))throw La.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new o(se,ke)),xe=this.ctx.transform.applyToPoint(new o(H,Y)),Ie=this.ctx.transform.applyToPoint(new o(X,re));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Ie.x,y2:Ie.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new o(Ce.x,Ce.y)},h.prototype.arc=function(H,Y,X,re,se,ke){if(isNaN(H)||isNaN(Y)||isNaN(X)||isNaN(re)||isNaN(se))throw La.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ke=!!ke,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new o(H,Y));H=Ce.x,Y=Ce.y;var xe=this.ctx.transform.applyToPoint(new o(0,X)),Ie=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(xe.x-Ie.x,2)+Math.pow(xe.y-Ie.y,2))}Math.abs(se-re)>=2*Math.PI&&(re=0,se=2*Math.PI),this.path.push({type:"arc",x:H,y:Y,radius:X,startAngle:re,endAngle:se,counterclockwise:ke})},h.prototype.arcTo=function(H,Y,X,re,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(H,Y,X,re){if(isNaN(H)||isNaN(Y)||isNaN(X)||isNaN(re))throw La.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(H,Y),this.lineTo(H+X,Y),this.lineTo(H+X,Y+re),this.lineTo(H,Y+re),this.lineTo(H,Y),this.lineTo(H+X,Y),this.lineTo(H,Y)},h.prototype.fillRect=function(H,Y,X,re){if(isNaN(H)||isNaN(Y)||isNaN(X)||isNaN(re))throw La.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(H,Y,X,re),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(H,Y,X,re){if(isNaN(H)||isNaN(Y)||isNaN(X)||isNaN(re))throw La.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(H,Y,X,re),this.stroke())},h.prototype.clearRect=function(H,Y,X,re){if(isNaN(H)||isNaN(Y)||isNaN(X)||isNaN(re))throw La.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(H,Y,X,re))},h.prototype.save=function(H){H=typeof H!="boolean"||H;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),H){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},h.prototype.restore=function(H){H=typeof H!="boolean"||H;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),H&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(H){var Y,X,re,se;if(H.isCanvasGradient===!0&&(H=H.getColor()),!H)return{r:0,g:0,b:0,a:0,style:H};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(H))Y=0,X=0,re=0,se=0;else{var ke=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(H);if(ke!==null)Y=parseInt(ke[1]),X=parseInt(ke[2]),re=parseInt(ke[3]),se=1;else if((ke=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(H))!==null)Y=parseInt(ke[1]),X=parseInt(ke[2]),re=parseInt(ke[3]),se=parseFloat(ke[4]);else{if(se=1,typeof H=="string"&&H.charAt(0)!=="#"){var Ce=new Uoe(H);H=Ce.ok?Ce.toHex():"#000000"}H.length===4?(Y=H.substring(1,2),Y+=Y,X=H.substring(2,3),X+=X,re=H.substring(3,4),re+=re):(Y=H.substring(1,3),X=H.substring(3,5),re=H.substring(5,7)),Y=parseInt(Y,16),X=parseInt(X,16),re=parseInt(re,16)}}return{r:Y,g:X,b:re,a:se,style:H}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(H,Y,X,re){if(isNaN(Y)||isNaN(X)||typeof H!="string")throw La.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var se=ae(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;B.call(this,{text:H,x:Y,y:X,scale:ke,angle:se,align:this.textAlign,maxWidth:re})}},h.prototype.strokeText=function(H,Y,X,re){if(isNaN(Y)||isNaN(X)||typeof H!="string")throw La.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){re=isNaN(re)?void 0:re;var se=ae(this.ctx.transform.rotation),ke=this.ctx.transform.scaleX;B.call(this,{text:H,x:Y,y:X,scale:ke,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:re})}},h.prototype.measureText=function(H){if(typeof H!="string")throw La.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,X=this.pdf.internal.scaleFactor,re=Y.internal.getFontSize(),se=Y.getStringUnitWidth(H)*re/Y.internal.scaleFactor;return new function(ke){var Ce=(ke=ke||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this}({width:se*=Math.round(96*X/72*1e4)/1e4})},h.prototype.scale=function(H,Y){if(isNaN(H)||isNaN(Y))throw La.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(H,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.rotate=function(H){if(isNaN(H))throw La.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new c(Math.cos(H),Math.sin(H),-Math.sin(H),Math.cos(H),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.translate=function(H,Y){if(isNaN(H)||isNaN(Y))throw La.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,H,Y);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.transform=function(H,Y,X,re,se,ke){if(isNaN(H)||isNaN(Y)||isNaN(X)||isNaN(re)||isNaN(se)||isNaN(ke))throw La.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new c(H,Y,X,re,se,ke);this.ctx.transform=this.ctx.transform.multiply(Ce)},h.prototype.setTransform=function(H,Y,X,re,se,ke){H=isNaN(H)?1:H,Y=isNaN(Y)?0:Y,X=isNaN(X)?0:X,re=isNaN(re)?1:re,se=isNaN(se)?0:se,ke=isNaN(ke)?0:ke,this.ctx.transform=new c(H,Y,X,re,se,ke)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(H,Y,X,re,se,ke,Ce,xe,Ie){var He=this.pdf.getImageProperties(H),Ue=1,Me=1,Be=1,be=1;re!==void 0&&xe!==void 0&&(Be=xe/re,be=Ie/se,Ue=He.width/re*xe/re,Me=He.height/se*Ie/se),ke===void 0&&(ke=Y,Ce=X,Y=0,X=0),re!==void 0&&xe===void 0&&(xe=re,Ie=se),re===void 0&&xe===void 0&&(xe=He.width,Ie=He.height);for(var Vt,ht=this.ctx.transform.decompose(),Lt=ae(ht.rotate.shx),et=new c,Jt=(et=(et=(et=et.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new l(ke-Y*Be,Ce-X*be,re*Ue,se*Me)),Ve=_.call(this,Jt),Ft=[],qt=0;qt<Ve.length;qt+=1)Ft.indexOf(Ve[qt])===-1&&Ft.push(Ve[qt]);if(j(Ft),this.autoPaging)for(var Wt=Ft[0],nr=Ft[Ft.length-1],Xe=Wt;Xe<nr+1;Xe++){this.pdf.setPage(Xe);var Kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Xe===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=Xe===1?0:pt+(Xe-2)*Ot;if(this.ctx.clip_path.length!==0){var Nr=this.path;Vt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Vt,this.posX+this.margin[3],-Ut+kt+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=Nr}var or=JSON.parse(JSON.stringify(Jt));or=A([or],this.posX+this.margin[3],-Ut+kt+this.ctx.prevPageLastElemOffset)[0];var lt=(Xe>Wt||Xe<nr)&&w.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,Ot,null).clip().discardPath()),this.pdf.addImage(H,"JPEG",or.x,or.y,or.w,or.h,null,null,Lt),lt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(H,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,Lt)};var _=function(H,Y,X){var re=[];Y=Y||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(H.type){default:case"mt":case"lt":re.push(Math.floor((H.y+se)/X)+1);break;case"arc":re.push(Math.floor((H.y+se-H.radius)/X)+1),re.push(Math.floor((H.y+se+H.radius)/X)+1);break;case"qct":var ke=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x,H.y);re.push(Math.floor((ke.y+se)/X)+1),re.push(Math.floor((ke.y+ke.h+se)/X)+1);break;case"bct":var Ce=Ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x2,H.y2,H.x,H.y);re.push(Math.floor((Ce.y+se)/X)+1),re.push(Math.floor((Ce.y+Ce.h+se)/X)+1);break;case"rect":re.push(Math.floor((H.y+se)/X)+1),re.push(Math.floor((H.y+H.h+se)/X)+1)}for(var xe=0;xe<re.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<re[xe];)N.call(this);return re},N=function(){var H=this.fillStyle,Y=this.strokeStyle,X=this.font,re=this.lineCap,se=this.lineWidth,ke=this.lineJoin;this.pdf.addPage(),this.fillStyle=H,this.strokeStyle=Y,this.font=X,this.lineCap=re,this.lineWidth=se,this.lineJoin=ke},A=function(H,Y,X){for(var re=0;re<H.length;re++)switch(H[re].type){case"bct":H[re].x2+=Y,H[re].y2+=X;case"qct":H[re].x1+=Y,H[re].y1+=X;default:H[re].x+=Y,H[re].y+=X}return H},j=function(H){return H.sort(function(Y,X){return Y-X})},P=function(H,Y){for(var X,re,se=this.fillStyle,ke=this.strokeStyle,Ce=this.lineCap,xe=this.lineWidth,Ie=Math.abs(xe*this.ctx.transform.scaleX),He=this.lineJoin,Ue=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),Be=[],be=0;be<Me.length;be++)if(Me[be].x!==void 0)for(var Vt=_.call(this,Me[be]),ht=0;ht<Vt.length;ht+=1)Be.indexOf(Vt[ht])===-1&&Be.push(Vt[ht]);for(var Lt=0;Lt<Be.length;Lt++)for(;this.pdf.internal.getNumberOfPages()<Be[Lt];)N.call(this);if(j(Be),this.autoPaging)for(var et=Be[0],Jt=Be[Be.length-1],Ve=et;Ve<Jt+1;Ve++){this.pdf.setPage(Ve),this.fillStyle=se,this.strokeStyle=ke,this.lineCap=Ce,this.lineWidth=Ie,this.lineJoin=He;var Ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=Ve===1?this.posY+this.margin[0]:this.margin[0],Wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Ve===1?0:Wt+(Ve-2)*nr;if(this.ctx.clip_path.length!==0){var Kt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(X,this.posX+this.margin[3],-Xe+qt+this.ctx.prevPageLastElemOffset),U.call(this,H,!0),this.path=Kt}if(re=JSON.parse(JSON.stringify(Ue)),this.path=A(re,this.posX+this.margin[3],-Xe+qt+this.ctx.prevPageLastElemOffset),Y===!1||Ve===0){var kt=(Ve>et||Ve<Jt)&&w.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ft,nr,null).clip().discardPath()),U.call(this,H,Y),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Ie,U.call(this,H,Y),this.lineWidth=xe;this.path=Ue},U=function(H,Y){if((H!=="stroke"||Y||!b.call(this))&&(H==="stroke"||Y||!g.call(this))){for(var X,re,se=[],ke=this.path,Ce=0;Ce<ke.length;Ce++){var xe=ke[Ce];switch(xe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:xe,deltas:[],abs:[]});break;case"lt":var Ie=se.length;if(ke[Ce-1]&&!isNaN(ke[Ce-1].x)&&(X=[xe.x-ke[Ce-1].x,xe.y-ke[Ce-1].y],Ie>0)){for(;Ie>=0;Ie--)if(se[Ie-1].close!==!0&&se[Ie-1].begin!==!0){se[Ie-1].deltas.push(X),se[Ie-1].abs.push(xe);break}}break;case"bct":X=[xe.x1-ke[Ce-1].x,xe.y1-ke[Ce-1].y,xe.x2-ke[Ce-1].x,xe.y2-ke[Ce-1].y,xe.x-ke[Ce-1].x,xe.y-ke[Ce-1].y],se[se.length-1].deltas.push(X);break;case"qct":var He=ke[Ce-1].x+2/3*(xe.x1-ke[Ce-1].x),Ue=ke[Ce-1].y+2/3*(xe.y1-ke[Ce-1].y),Me=xe.x+2/3*(xe.x1-xe.x),Be=xe.y+2/3*(xe.y1-xe.y),be=xe.x,Vt=xe.y;X=[He-ke[Ce-1].x,Ue-ke[Ce-1].y,Me-ke[Ce-1].x,Be-ke[Ce-1].y,be-ke[Ce-1].x,Vt-ke[Ce-1].y],se[se.length-1].deltas.push(X);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(xe)}}re=Y?null:H==="stroke"?"stroke":"fill";for(var ht=!1,Lt=0;Lt<se.length;Lt++)if(se[Lt].arc)for(var et=se[Lt].abs,Jt=0;Jt<et.length;Jt++){var Ve=et[Jt];Ve.type==="arc"?D.call(this,Ve.x,Ve.y,Ve.radius,Ve.startAngle,Ve.endAngle,Ve.counterclockwise,void 0,Y,!ht):F.call(this,Ve.x,Ve.y),ht=!0}else if(se[Lt].close===!0)this.pdf.internal.out("h"),ht=!1;else if(se[Lt].begin!==!0){var Ft=se[Lt].start.x,qt=se[Lt].start.y;ee.call(this,se[Lt].deltas,Ft,qt),ht=!0}re&&I.call(this,re),Y&&V.call(this)}},G=function(H){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return H-X;case"top":return H+Y-X;case"hanging":return H+Y-2*X;case"middle":return H+Y/2-X;default:return H}},O=function(H){return H+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var H=function(){};return H.colorStops=[],H.addColorStop=function(Y,X){this.colorStops.push([Y,X])},H.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},H.isCanvasGradient=!0,H},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(H,Y,X,re,se,ke,Ce,xe,Ie){for(var He=ce.call(this,X,re,se,ke),Ue=0;Ue<He.length;Ue++){var Me=He[Ue];Ue===0&&(Ie?R.call(this,Me.x1+H,Me.y1+Y):F.call(this,Me.x1+H,Me.y1+Y)),Z.call(this,H,Y,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}xe?V.call(this):I.call(this,Ce)},I=function(H){switch(H){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(H,Y){this.pdf.internal.out(r(H)+" "+n(Y)+" m")},B=function(H){var Y;switch(H.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var X=this.pdf.getTextDimensions(H.text),re=G.call(this,H.y),se=O.call(this,re)-X.h,ke=this.ctx.transform.applyToPoint(new o(H.x,re)),Ce=this.ctx.transform.decompose(),xe=new c;xe=(xe=(xe=xe.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale);for(var Ie,He,Ue,Me=this.ctx.transform.applyToRectangle(new l(H.x,re,X.w,X.h)),Be=xe.applyToRectangle(new l(H.x,se,X.w,X.h)),be=_.call(this,Be),Vt=[],ht=0;ht<be.length;ht+=1)Vt.indexOf(be[ht])===-1&&Vt.push(be[ht]);if(j(Vt),this.autoPaging)for(var Lt=Vt[0],et=Vt[Vt.length-1],Jt=Lt;Jt<et+1;Jt++){this.pdf.setPage(Jt);var Ve=Jt===1?this.posY+this.margin[0]:this.margin[0],Ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[2],Wt=qt-this.margin[0],nr=this.pdf.internal.pageSize.width-this.margin[1],Xe=nr-this.margin[3],Kt=Jt===1?0:Ft+(Jt-2)*Wt;if(this.ctx.clip_path.length!==0){var kt=this.path;Ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Ie,this.posX+this.margin[3],-1*Kt+Ve),U.call(this,"fill",!0),this.path=kt}var pt=A([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-Kt+Ve+this.ctx.prevPageLastElemOffset)[0];H.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*H.scale),Ue=this.lineWidth,this.lineWidth=Ue*H.scale);var Ot=this.autoPaging!=="text";if(Ot||pt.y+pt.h<=qt){if(Ot||pt.y>=Ve&&pt.x<=nr){var Ut=Ot?H.text:this.pdf.splitTextToSize(H.text,H.maxWidth||nr-pt.x)[0],Nr=A([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-Kt+Ve+this.ctx.prevPageLastElemOffset)[0],or=Ot&&(Jt>Lt||Jt<et)&&w.call(this);or&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Wt,null).clip().discardPath()),this.pdf.text(Ut,Nr.x,Nr.y,{angle:H.angle,align:Y,renderingMode:H.renderingMode}),or&&this.pdf.restoreGraphicsState()}}else pt.y<qt&&(this.ctx.prevPageLastElemOffset+=qt-pt.y);H.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ue)}else H.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*H.scale),Ue=this.lineWidth,this.lineWidth=Ue*H.scale),this.pdf.text(H.text,ke.x+this.posX,ke.y+this.posY,{angle:H.angle,align:Y,renderingMode:H.renderingMode,maxWidth:H.maxWidth}),H.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Ue)},F=function(H,Y,X,re){X=X||0,re=re||0,this.pdf.internal.out(r(H+X)+" "+n(Y+re)+" l")},ee=function(H,Y,X){return this.pdf.lines(H,Y,X,null,null)},Z=function(H,Y,X,re,se,ke,Ce,xe){this.pdf.internal.out([e(a(X+H)),e(s(re+Y)),e(a(se+H)),e(s(ke+Y)),e(a(Ce+H)),e(s(xe+Y)),"c"].join(" "))},ce=function(H,Y,X,re){for(var se=2*Math.PI,ke=Math.PI/2;Y>X;)Y-=se;var Ce=Math.abs(X-Y);Ce<se&&re&&(Ce=se-Ce);for(var xe=[],Ie=re?-1:1,He=Y;Ce>1e-5;){var Ue=He+Ie*Math.min(Ce,ke);xe.push(ne.call(this,H,He,Ue)),Ce-=Math.abs(Ue-He),He=Ue}return xe},ne=function(H,Y,X){var re=(X-Y)/2,se=H*Math.cos(re),ke=H*Math.sin(re),Ce=se,xe=-ke,Ie=Ce*Ce+xe*xe,He=Ie+Ce*se+xe*ke,Ue=4/3*(Math.sqrt(2*Ie*He)-He)/(Ce*ke-xe*se),Me=Ce-Ue*xe,Be=xe+Ue*Ce,be=Me,Vt=-Be,ht=re+Y,Lt=Math.cos(ht),et=Math.sin(ht);return{x1:H*Math.cos(Y),y1:H*Math.sin(Y),x2:Me*Lt-Be*et,y2:Me*et+Be*Lt,x3:be*Lt-Vt*et,y3:be*et+Vt*Lt,x4:H*Math.cos(X),y4:H*Math.sin(X)}},ae=function(H){return 180*H/Math.PI},me=function(H,Y,X,re,se,ke){var Ce=H+.5*(X-H),xe=Y+.5*(re-Y),Ie=se+.5*(X-se),He=ke+.5*(re-ke),Ue=Math.min(H,se,Ce,Ie),Me=Math.max(H,se,Ce,Ie),Be=Math.min(Y,ke,xe,He),be=Math.max(Y,ke,xe,He);return new l(Ue,Be,Me-Ue,be-Be)},Ee=function(H,Y,X,re,se,ke,Ce,xe){var Ie,He,Ue,Me,Be,be,Vt,ht,Lt,et,Jt,Ve,Ft,qt,Wt=X-H,nr=re-Y,Xe=se-X,Kt=ke-re,kt=Ce-se,pt=xe-ke;for(He=0;He<41;He++)Lt=(Vt=(Ue=H+(Ie=He/40)*Wt)+Ie*((Be=X+Ie*Xe)-Ue))+Ie*(Be+Ie*(se+Ie*kt-Be)-Vt),et=(ht=(Me=Y+Ie*nr)+Ie*((be=re+Ie*Kt)-Me))+Ie*(be+Ie*(ke+Ie*pt-be)-ht),He==0?(Jt=Lt,Ve=et,Ft=Lt,qt=et):(Jt=Math.min(Jt,Lt),Ve=Math.min(Ve,et),Ft=Math.max(Ft,Lt),qt=Math.max(qt,et));return new l(Math.round(Jt),Math.round(Ve),Math.round(Ft-Jt),Math.round(qt-Ve))},ye=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var H,Y,X=(H=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:H,lineDashOffset:Y}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})($r.API),function(t){var e=function(o){var l,c,u,d,h,p,g,b,w,_;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(h=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(p=(h=((h=((h=((h=(h-(_=h%85))/85)-(w=h%85))/85)-(b=h%85))/85)-(g=h%85))/85)%85,c.push(p+33,g+33,b+33,w+33,_+33)):c.push(122);return function(N,A){for(var j=A;j>0;j--)N.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,h,p=String,g="length",b=255,w="charCodeAt",_="slice",N="replace";for(o[_](-2),o=o[_](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),u=[],d=0,h=(o+=l="uuuuu"[_](o[g]%5||5))[g];h>d;d+=5)c=52200625*(o[w](d)-33)+614125*(o[w](d+1)-33)+7225*(o[w](d+2)-33)+85*(o[w](d+3)-33)+(o[w](d+4)-33),u.push(b&c>>24,b&c>>16,b&c>>8,b&c);return function(A,j){for(var P=j;P>0;P--)A.pop()}(u,l[g]),p.fromCharCode.apply(p,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=aI(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}($r.API),function(t){t.loadFile=function(e,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var h=new XMLHttpRequest,p=0,g=function(b){var w=b.length,_=[],N=String.fromCharCode;for(p=0;p<w;p+=1)_.push(N(255&b.charCodeAt(p)));return _.join("")};if(h.open("GET",c,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(a,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}($r.API),function(t){function e(){return(mn.html2canvas?Promise.resolve(mn.html2canvas):qf(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(mn.DOMPurify?Promise.resolve(mn.DOMPurify):qf(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Ea(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var b=d[g],w=b.src.find(function(_){return _.format==="truetype"});w&&u.addFont(w.url,b.ref.name,b.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||$r.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,h){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,h).then(function(p){return u.updateProgress(1),p})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),p=u.call(h,l,c);return o.convert(p,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,$r.getPageSize=function(l,c,u){if(Ea(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var h,p=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var b,w=0,_=0;if(g.hasOwnProperty(p))w=g[p][1]/h,_=g[p][0]/h;else try{w=u[1],_=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",_>w&&(b=_,_=w,w=b);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>_&&(b=_,_=w,w=b)}return{width:_,height:w,unit:c,k:h,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(WT):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}($r.API),$r.API.addJS=function(t){return Nq=t,this.internal.events.subscribe("postPutResources",function(){L5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(L5+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),_q=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Nq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){L5!==void 0&&_q!==void 0&&this.internal.out("/Names <</JavaScript "+L5+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var h=r.internal.newObject();d.push(h);var p=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}($r.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(h){for(var p,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,w={width:0,height:0,numcomponents:1},_=4;_<b;_+=2){if(_+=g,e.indexOf(h.charCodeAt(_+1))!==-1){p=256*h.charCodeAt(_+5)+h.charCodeAt(_+6),w={width:256*h.charCodeAt(_+7)+h.charCodeAt(_+8),height:p,numcomponents:h.charCodeAt(_+9)};break}g=256*h.charCodeAt(_+2)+h.charCodeAt(_+3)}return w}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}($r.API),$r.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=lHe(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(D){for(var I=D.width,V=D.height,R=D.data,B=D.palette,F=D.depth,ee=!1,Z=[],ce=[],ne=void 0,ae=!1,me=0,Ee=0;Ee<B.length;Ee++){var ye=jH(B[Ee],4),H=ye[0],Y=ye[1],X=ye[2],re=ye[3];Z.push(H,Y,X),re!=null&&(re===0?(me++,ce.length<1&&ce.push(Ee)):re<255&&(ae=!0))}if(ae||me>1){ee=!0,ce=void 0;var se=I*V;ne=new Uint8Array(se);for(var ke=new DataView(R.buffer),Ce=0;Ce<se;Ce++){var xe=XT(ke,Ce,F),Ie=jH(B[xe],4)[3];ne[Ce]=Ie}}else me===0&&(ce=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:R,alphaBytes:ne,needSMask:ee,palette:Z,mask:ce}}(s):c===2||c===4?function(D){for(var I=D.data,V=D.width,R=D.height,B=D.channels,F=D.depth,ee=B===2?"DeviceGray":"DeviceRGB",Z=B-1,ce=V*R,ne=Z,ae=ce*ne,me=1*ce,Ee=Math.ceil(ae*F/8),ye=Math.ceil(me*F/8),H=new Uint8Array(Ee),Y=new Uint8Array(ye),X=new DataView(I.buffer),re=new DataView(H.buffer),se=new DataView(Y.buffer),ke=!1,Ce=0;Ce<ce;Ce++){for(var xe=Ce*B,Ie=0;Ie<ne;Ie++)Oq(re,XT(X,xe+Ie,F),Ce*ne+Ie,F);var He=XT(X,xe+ne,F);He<(1<<F)-1&&(ke=!0),Oq(se,He,1*Ce,F)}return{colorSpace:ee,colorsPerPixel:Z,sMaskBitsPerComponent:ke?F:void 0,colorBytes:H,alphaBytes:Y,needSMask:ke}}(s):function(D){var I=D.data,V=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(R){for(var B=R.length,F=new Uint8Array(2*B),ee=new DataView(F.buffer,F.byteOffset,F.byteLength),Z=0;Z<B;Z++)ee.setUint16(2*Z,R[Z],!1);return F}(I):I,needSMask:!1}}(s);var h,p,g,b=a,w=b.colorSpace,_=b.colorsPerPixel,N=b.sMaskBitsPerComponent,A=b.colorBytes,j=b.alphaBytes,P=b.needSMask,U=b.palette,G=b.mask,O=null;return n!==$r.API.image_compression.NONE&&typeof aI=="function"?(O=function(D){var I;switch(D){case $r.API.image_compression.FAST:I=11;break;case $r.API.image_compression.MEDIUM:I=13;break;case $r.API.image_compression.SLOW:I=14;break;default:I=12}return I}(n),h=this.decode.FLATE_DECODE,p="/Predictor ".concat(O," /Colors ").concat(_," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=jq(A,Math.ceil(o*_*d/8),_,d,n),P&&(g=jq(j,Math.ceil(o*N/8),1,N,n))):(h=void 0,p=void 0,t=A,P&&(g=j)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:t,index:e,filter:h,decodeParameters:p,transparency:G,palette:U,sMask:g,predictor:O,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:N,colorSpace:w}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new CHe(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new YT(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}($r.API),Gu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Gu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){La.log("bit decode error:"+r)}},Gu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Gu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Gu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Gu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},Gu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},Gu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Gu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Gu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new Gu(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new YT(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}($r.API),Rq.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new Rq(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new YT(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}($r.API),$r.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],h=n[u+1],p=n[u+2],g=n[u+3];s[l++]=d,s[l++]=h,s[l++]=p,o[c++]=g}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},$r.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zg=$r.API,F5=zg.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,p=0,g=t.length,b=0,w=l[0]||c,_=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?_.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(p=h&&Ea(u[n])==="object"&&!isNaN(parseInt(u[n][b],10))?u[n][b]/d:0,_.push((l[n]||w)/c+p)),b=n;return _},Eq=zg.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return zg.processArabic&&(t=zg.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:F5.apply(this,arguments).reduce(function(s,o){return s+o},0)},Aq=function(t,e,r,n){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},Sq=function(t,e,r){r||(r={});var n,a,s,o,l,c,u,d=[],h=[d],p=r.textIndent||0,g=0,b=0,w=t.split(" "),_=F5.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var N=Array(c).join(" "),A=[];w.map(function(P){(P=P.split(/\s*\n/)).length>1?A=A.concat(P.map(function(U,G){return(G&&U.length?`
`:"")+U})):A.push(P[0])}),w=A,c=Eq.apply(this,[N,r])}for(s=0,o=w.length;s<o;s++){var j=0;if(n=w[s],c&&n[0]==`
`&&(n=n.substr(1),j=1),p+g+(b=(a=F5.apply(this,[n,r])).reduce(function(P,U){return P+U},0))>e||j){if(b>e){for(l=Aq.apply(this,[n,a,e-(p+g),e]),d.push(l.shift()),d=[l.pop()];l.length;)h.push([l.shift()]);b=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(P,U){return P+U},0)}else d=[n];h.push(d),p=b+c,g=_}else d.push(n),p+=g+b,g=_}return u=c?function(P,U){return(U?N:"")+P.join(" ")}:function(P){return P.join(" ")},h.map(u)},zg.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return h.metadata[p]?{widths:h.metadata[p].widths||{0:1},kerning:h.metadata[p].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(Sq.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var o=function(p){return"0x"+parseInt(p,10).toString(16)},l=t.__fontmetrics__.compress=function(p){var g,b,w,_,N=["{"];for(var A in p){if(g=p[A],isNaN(parseInt(A,10))?b="'"+A+"'":(A=parseInt(A,10),b=(b=o(A).slice(2)).slice(0,-1)+a[b.slice(-1)]),typeof g=="number")g<0?(w=o(g).slice(3),_="-"):(w=o(g).slice(2),_=""),w=_+w.slice(0,-1)+a[w.slice(-1)];else{if(Ea(g)!=="object")throw new Error("Don't know what to do with value type "+Ea(g)+".");w=l(g)}N.push(b+w)}return N.push("}"),N.join("")},c=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,b,w,_,N={},A=1,j=N,P=[],U="",G="",O=p.length-1,D=1;D<O;D+=1)(_=p[D])=="'"?g?(w=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(P.push([j,w]),j={},w=void 0):_=="}"?((b=P.pop())[0][b[1]]=j,w=void 0,j=b[0]):_=="-"?A=-1:w===void 0?n.hasOwnProperty(_)?(U+=n[_],w=parseInt(U,16)*A,A=1,U=""):U+=_:n.hasOwnProperty(_)?(G+=n[_],j[w]=parseInt(G,16)*A,A=1,w=void 0,G=""):G+=_;return N},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var g=p.font,b=h.Unicode[g.postScriptName];b&&(g.metadata.Unicode={},g.metadata.Unicode.widths=b.widths,g.metadata.Unicode.kerning=b.kerning);var w=d.Unicode[g.postScriptName];w&&(g.metadata.Unicode.encoding=w,g.encoding=w.codePages[0])}])}($r.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(tE(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}($r),$r.API.addSvgAsImage=function(t,e,r,n,a,s,o,l){if(isNaN(e)||isNaN(r))throw La.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw La.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(mn.canvg?Promise.resolve(mn.canvg):qf(()=>import("./index.es-BuIFCb4R.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},$r.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},$r.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,h=0;function p(b,w){var _,N=!1;for(_=0;_<b.length;_+=1)b[_]===w&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=l.length;for(h=0;h<g;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Ea(t)==="object"){for(a in t)if(s=t[a],p(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&p(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?w.push("/"+b+" /"+r[b].value):w.push("/"+b+" "+r[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}($r.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,p=s.length;h<p;++h){if(l=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,h,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,p=(l=Object.keys(s).sort(function(g,b){return g-b})).length;h<p;h++)o=l[h],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",b=0;b<p.length;b++)g+=String.fromCharCode(p[b]);var w=u();d({data:g,addLength1:!0,objectId:w}),c("endobj");var _=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var N=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+a1(l.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var A=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+a1(l.fontName)),c("/FontDescriptor "+N+" 0 R"),c("/W "+t.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+_+" 0 R"),c("/BaseFont /"+a1(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+A+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var b=u();d({data:p,addLength1:!0,objectId:b}),c("endobj");var w=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var _=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+a1(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var N=0;N<l.metadata.hmtx.widths.length;N++)l.metadata.hmtx.widths[N]=parseInt(l.metadata.hmtx.widths[N]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+a1(l.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},h=s.mutex||{},p=h.pdfEscape,g=h.activeFontKey,b=h.fonts,w=g,_="",N=0,A="",j=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:h};for(A=l,w=g,Array.isArray(l)&&(A=l[0]),N=0;N<A.length;N+=1)b[w].metadata.hasOwnProperty("cmap")&&(o=b[w].metadata.cmap.unicode.codeMap[A[N].charCodeAt(0)]),o||A[N].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?_+=A[N]:_+="";var P="";return parseInt(w.slice(1))<14||j==="WinAnsiEncoding"?P=p(_,w).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(P=r(_,b[w])),h.isHex=!0,{text:P,x:c,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}($r),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}($r.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,j=0;this.__bidiEngine__={};var P=function(R){var B=R.charCodeAt(),F=B>>8,ee=w[F];return ee!==void 0?h[256*ee+(255&B)]:F===252||F===253?"AL":N.test(F)?"L":F===8?"R":"N"},U=function(R){for(var B,F=0;F<R.length;F++){if((B=P(R.charAt(F)))==="L")return!1;if(B==="R")return!0}return!1},G=function(R,B,F,ee){var Z,ce,ne,ae,me=B[ee];switch(me){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"N":case"AN":break;case"EN":A&&(me="AN");break;case"AL":A=!0,me="R";break;case"WS":case"BN":me="N";break;case"CS":ee<1||ee+1>=B.length||(Z=F[ee-1])!=="EN"&&Z!=="AN"||(ce=B[ee+1])!=="EN"&&ce!=="AN"?me="N":A&&(ce="AN"),me=ce===Z?ce:"N";break;case"ES":me=(Z=ee>0?F[ee-1]:"B")==="EN"&&ee+1<B.length&&B[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&F[ee-1]==="EN"){me="EN";break}if(A){me="N";break}for(ne=ee+1,ae=B.length;ne<ae&&B[ne]==="ET";)ne++;me=ne<ae&&B[ne]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ae=B.length,ne=ee+1;ne<ae&&B[ne]==="NSM";)ne++;if(ne<ae){var Ee=R[ee],ye=Ee>=1425&&Ee<=2303||Ee===64286;if(Z=B[ne],ye&&(Z==="R"||Z==="AL")){me="R";break}}}me=ee<1||(Z=B[ee-1])==="B"?"N":F[ee-1];break;case"B":A=!1,a=!0,me=j;break;case"S":s=!0,me="N"}return me},O=function(R,B,F){var ee=R.split("");return F&&D(ee,F,{hiLevel:j}),ee.reverse(),B&&B.reverse(),ee.join("")},D=function(R,B,F){var ee,Z,ce,ne,ae,me=-1,Ee=R.length,ye=0,H=[],Y=j?g:p,X=[];for(A=!1,a=!1,s=!1,Z=0;Z<Ee;Z++)X[Z]=P(R[Z]);for(ce=0;ce<Ee;ce++){if(ae=ye,H[ce]=G(R,X,H,ce),ee=240&(ye=Y[ae][b[H[ce]]]),ye&=15,B[ce]=ne=Y[ye][5],ee>0)if(ee===16){for(Z=me;Z<ce;Z++)B[Z]=1;me=-1}else me=-1;if(Y[ye][6])me===-1&&(me=ce);else if(me>-1){for(Z=me;Z<ce;Z++)B[Z]=ne;me=-1}X[ce]==="B"&&(B[ce]=0),F.hiLevel|=ne}s&&function(re,se,ke){for(var Ce=0;Ce<ke;Ce++)if(re[Ce]==="S"){se[Ce]=j;for(var xe=Ce-1;xe>=0&&re[xe]==="WS";xe--)se[xe]=j}}(X,B,Ee)},I=function(R,B,F,ee,Z){if(!(Z.hiLevel<R)){if(R===1&&j===1&&!a)return B.reverse(),void(F&&F.reverse());for(var ce,ne,ae,me,Ee=B.length,ye=0;ye<Ee;){if(ee[ye]>=R){for(ae=ye+1;ae<Ee&&ee[ae]>=R;)ae++;for(me=ye,ne=ae-1;me<ne;me++,ne--)ce=B[me],B[me]=B[ne],B[ne]=ce,F&&(ce=F[me],F[me]=F[ne],F[ne]=ce);ye=ae}ye++}}},V=function(R,B,F){var ee=R.split(""),Z={hiLevel:j};return F||(F=[]),D(ee,F,Z),function(ce,ne,ae){if(ae.hiLevel!==0&&d)for(var me,Ee=0;Ee<ce.length;Ee++)ne[Ee]===1&&(me=_.indexOf(ce[Ee]))>=0&&(ce[Ee]=_[me+1])}(ee,F,Z),I(2,ee,B,F,Z),I(1,ee,B,F,Z),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(R,B,F){if(function(Z,ce){if(ce)for(var ne=0;ne<Z.length;ne++)ce[ne]=ne;l===void 0&&(l=U(Z)),u===void 0&&(u=U(Z))}(R,B),o||!c||u)if(o&&c&&l^u)j=l?1:0,R=O(R,B,F);else if(!o&&c&&u)j=l?1:0,R=V(R,B,F),R=O(R,B);else if(!o||l||c||u){if(o&&!c&&l^u)R=O(R,B),l?(j=0,R=V(R,B,F)):(j=1,R=V(R,B,F),R=O(R,B));else if(o&&l&&!c&&u)j=1,R=V(R,B,F),R=O(R,B);else if(!o&&!c&&l^u){var ee=d;l?(j=1,R=V(R,B,F),j=0,d=!1,R=V(R,B,F),d=ee):(j=0,R=V(R,B,F),R=O(R,B),j=1,d=!1,R=V(R,B,F),d=ee,R=O(R,B))}}else j=0,R=V(R,B,F);else j=l?1:0,R=V(R,B,F);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,c=R.isOutputVisual,l=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}($r),$r.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new rm(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new HHe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new kHe(this.contents),this.head=new OHe(this),this.name=new LHe(this),this.cmap=new Zoe(this),this.toUnicode={},this.hhea=new PHe(this),this.maxp=new FHe(this),this.hmtx=new BHe(this),this.post=new DHe(this),this.os2=new RHe(this),this.loca=new $He(this),this.glyf=new UHe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var gd,rm=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),kHe=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,o,l,c,u,d,h,p,g,b,w;for(w in g=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(g)/c),o=Math.floor(h/c),d=16*g-h,(a=new rm).writeInt(this.scalarType),a.writeShort(g),a.writeShort(h),a.writeShort(o),a.writeShort(d),s=16*g,u=a.pos+s,l=null,b=[],r)for(p=r[w],a.writeString(w),a.writeInt(t(p)),a.writeInt(u),a.writeInt(p.length),b=b.concat(p),w==="head"&&(l=u),u+=p.length;u%4;)b.push(0),u++;return a.write(b),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,o;for(r=Qoe.call(r);r.length%4;)r.push(0);for(s=new rm(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),IHe={}.hasOwnProperty,nf=function(t,e){for(var r in e)IHe.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};gd=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var OHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new rm).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),Dq=function(){function t(e,r){var n,a,s,o,l,c,u,d,h,p,g,b,w,_,N,A,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,s=function(){var P,U;for(U=[],c=P=0;0<=p?P<p:P>p;c=0<=p?++P:--P)U.push(e.readUInt16());return U}(),e.pos+=2,w=function(){var P,U;for(U=[],c=P=0;0<=p?P<p:P>p;c=0<=p?++P:--P)U.push(e.readUInt16());return U}(),u=function(){var P,U;for(U=[],c=P=0;0<=p?P<p:P>p;c=0<=p?++P:--P)U.push(e.readUInt16());return U}(),d=function(){var P,U;for(U=[],c=P=0;0<=p?P<p:P>p;c=0<=p?++P:--P)U.push(e.readUInt16());return U}(),a=(this.length-e.pos+this.offset)/2,l=function(){var P,U;for(U=[],c=P=0;0<=a?P<a:P>a;c=0<=a?++P:--P)U.push(e.readUInt16());return U}(),c=N=0,j=s.length;N<j;c=++N)for(_=s[c],n=A=b=w[c];b<=_?A<=_:A>=_;n=b<=_?++A:--A)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-b)-(p-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=h}return t.encode=function(e,r){var n,a,s,o,l,c,u,d,h,p,g,b,w,_,N,A,j,P,U,G,O,D,I,V,R,B,F,ee,Z,ce,ne,ae,me,Ee,ye,H,Y,X,re,se,ke,Ce,xe,Ie,He,Ue;switch(ee=new rm,o=Object.keys(e).sort(function(Me,Be){return Me-Be}),r){case"macroman":for(w=0,_=function(){var Me=[];for(b=0;b<256;++b)Me.push(0);return Me}(),A={0:0},s={},Z=0,me=o.length;Z<me;Z++)A[xe=e[a=o[Z]]]==null&&(A[xe]=++w),s[a]={old:e[a],new:A[e[a]]},_[a]=A[e[a]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(_),{charMap:s,subtable:ee.data,maxGlyphID:w+1};case"unicode":for(B=[],h=[],j=0,A={},n={},N=u=null,ce=0,Ee=o.length;ce<Ee;ce++)A[U=e[a=o[ce]]]==null&&(A[U]=++j),n[a]={old:U,new:A[U]},l=A[U]-a,N!=null&&l===u||(N&&h.push(N),B.push(a),u=l),N=a;for(N&&h.push(N),h.push(65535),B.push(65535),V=2*(I=B.length),D=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(D/2)/Math.LN2,O=2*I-D,c=[],G=[],g=[],b=ne=0,ye=B.length;ne<ye;b=++ne){if(R=B[b],d=h[b],R===65535){c.push(0),G.push(0);break}if(R-(F=n[R].new)>=32768)for(c.push(0),G.push(2*(g.length+I-b)),a=ae=R;R<=d?ae<=d:ae>=d;a=R<=d?++ae:--ae)g.push(n[a].new);else c.push(F-R),G.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*I+2*g.length),ee.writeUInt16(0),ee.writeUInt16(V),ee.writeUInt16(D),ee.writeUInt16(p),ee.writeUInt16(O),ke=0,H=h.length;ke<H;ke++)a=h[ke],ee.writeUInt16(a);for(ee.writeUInt16(0),Ce=0,Y=B.length;Ce<Y;Ce++)a=B[Ce],ee.writeUInt16(a);for(Ie=0,X=c.length;Ie<X;Ie++)l=c[Ie],ee.writeUInt16(l);for(He=0,re=G.length;He<re;He++)P=G[He],ee.writeUInt16(P);for(Ue=0,se=g.length;Ue<se;Ue++)w=g[Ue],ee.writeUInt16(w);return{charMap:n,subtable:ee.data,maxGlyphID:j+1}}},t}(),Zoe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new Dq(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=Dq.encode(e,r),(a=new rm).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),PHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),RHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),DHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),MHe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},LHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,o,l,c,u,d,h,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,h=n.length;d<h;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),o=new MHe(u,a),c[p=a.nameID]==null&&(c[p]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),FHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),BHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,h,p;for(p=[],u=0,d=(h=this.metrics).length;u<d;u++)s=h[u],p.push(s.advance);return p}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Qoe=[].slice,UHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,o,l,c,u,d,h;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new rm(r.read(a))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new VHe(l,u,h,c,d):new zHe(l,o,u,h,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),zHe=function(){function t(e,r,n,a,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),VHe=function(){function t(e,r,n,a,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new rm(Qoe.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),$He=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,gd),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),HHe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,o,l,c,u,d,h,p,g,b,w,_,N;for(a in n=Zoe.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},N=n.charMap)g[(c=N[a]).old]=c.new;for(b in p=n.maxGlyphID,o)b in g||(g[b]=p++);return d=function(A){var j,P;for(j in P={},A)P[A[j]]=j;return P}(g),h=Object.keys(d).sort(function(A,j){return A-j}),w=function(){var A,j,P;for(P=[],A=0,j=h.length;A<j;A++)l=h[A],P.push(d[l]);return P}(),s=this.font.glyf.encode(o,w,g),u=this.font.loca.encode(s.offsets,w),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();$r.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();function Joe(t,e,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,h="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,p=h.length||1),r+=l*(2-s),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var g=l;if(n.halign==="center"&&(g*=.5),h&&p>=1){for(var b=0;b<h.length;b++)a.text(h[b],e-a.getStringUnitWidth(h[b])*g,r),r+=u;return a}e-=a.getStringUnitWidth(t)*g}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var Mq={},Q1=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:Mq=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return Mq||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),fI=function(t,e){return fI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},fI(t,e)};function ele(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");fI(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var tle=function(t){ele(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function qHe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function GHe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Y3(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function rle(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var o=nle(a,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function nle(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function _S(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function ale(t,e){var r=_S(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function WHe(t,e,r,n,a){var s={},o=1.3333333333333333,l=ZT(e,function(j){return a.getComputedStyle(j).backgroundColor});l!=null&&(s.fillColor=l);var c=ZT(e,function(j){return a.getComputedStyle(j).color});c!=null&&(s.textColor=c);var u=XHe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",h=o*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var g=(parseFloat(p)||0)/h;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var b=ZT(e,function(j){return a.getComputedStyle(j)[d]});b!=null&&(s.lineColor=b);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(s.fontSize=_/o);var N=KHe(n);N&&(s.fontStyle=N);var A=(n.fontFamily||"").toLowerCase();return t.indexOf(A)!==-1&&(s.font=A),s}function KHe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function ZT(t,e){var r=sle(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function sle(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:sle(t.parentElement,e):r}function XHe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=_S(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function ile(t,e,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],p=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:p};for(var g=0;g<l.rows.length;g++){var b=l.rows[g],w=(o=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),_=YHe(c,u,r,b,n,a);_&&(w==="thead"?d.push(_):w==="tfoot"?p.push(_):h.push(_))}return{head:d,body:h,foot:p}}function YHe(t,e,r,n,a,s){for(var o=new tle(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=WHe(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:ZHe(c)})}}var h=r.getComputedStyle(n);if(o.length>0&&(a||h.display!=="none"))return o}function ZHe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function QHe(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Bf(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function JHe(t,e){var r=new Q1(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();QHe(a,n,e);var s=Bf({},a,n,e),o;typeof window<"u"&&(o=window);var l=eqe(a,n,e),c=tqe(a,n,e),u=rqe(r,s),d=aqe(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function eqe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],h=r[c];n.columnStyles=Bf({},u,d,h)}else{var p=[t,e,r],g=p.map(function(b){return b[c]||{}});n[c]=Bf({},g[0],g[1],g[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function tqe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function rqe(t,e){var r,n,a,s,o,l,c,u,d,h,p,g,b=_S(e.margin,40/t.scaleFactor()),w=(r=nqe(t,e.startY))!==null&&r!==void 0?r:b.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var N;e.showHead===!0?N="everyPage":e.showHead===!1?N="never":N=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var A=(s=e.useCss)!==null&&s!==void 0?s:!1,j=e.theme||(A?"plain":"striped"),P=!!e.horizontalPageBreak,U=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:A,theme:j,startY:w,margin:b,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:N,showFoot:_,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:P,horizontalPageBreakRepeat:U,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function nqe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function aqe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=ile(t,e.html,r,o,e.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||sqe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function sqe(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var hI=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),iqe=function(t){ele(e,t);function e(r,n,a,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return e}(hI),oqe=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new iqe(e,this,n,a,s,o),h=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new hI(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new hI(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),ole=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof tle&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},t}(),lle=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=_S(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),lqe=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function cqe(t,e){uqe(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=mI(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=mI(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),fqe(e),hqe(e,t),dqe(e)}function uqe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=ale(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var h=u.padding("horizontal");u.contentWidth=Y3(u.text,u.styles,t)+h;var p=Y3(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function mI(t,e,r){for(var n=e,a=t.reduce(function(g,b){return g+b.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),h=u<d?d:u;e-=h-o.width,o.width=h}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(g){return e<0?g.width>r(g):!0});p.length&&(e=mI(p,e,r))}return e}function dqe(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var h=n.length-a,p=d.rowSpan>h?h:d.rowSpan;e[c.index]={cell:d,left:p,row:s}}}}}function fqe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function hqe(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Lq(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Lq(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>s.height&&(s.height=p)}}r.count--}}function Lq(t,e,r,n,a){return t.map(function(s){return mqe(s,e,r,n,a)})}function mqe(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Y3(t,r,n))return t;for(;e<Y3(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function pqe(t,e){var r=new Q1(t),n=gqe(e,r.scaleFactor()),a=new oqe(e,n);return cqe(r,a),r.applyStyles(r.userStyles),a}function gqe(t,e){var r=t.content,n=vqe(r.columns);if(r.head.length===0){var a=Fq(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=Fq(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,o=t.styles;return{columns:n,head:QT("head",r.head,n,o,s,e),body:QT("body",r.body,n,o,s,e),foot:QT("foot",r.foot,n,o,s,e)}}function QT(t,e,r,n,a,s){var o={},l=e.map(function(c,u){for(var d=0,h={},p=0,g=0,b=0,w=r;b<w.length;b++){var _=w[b];if(o[_.index]==null||o[_.index].left===0)if(g===0){var N=void 0;Array.isArray(c)?N=c[_.index-p-d]:N=c[_.dataKey];var A={};typeof N=="object"&&!Array.isArray(N)&&(A=(N==null?void 0:N.styles)||{});var j=bqe(t,_,u,a,n,s,A),P=new lle(N,j,t);h[_.dataKey]=P,h[_.index]=P,g=P.colSpan-1,o[_.index]={left:P.rowSpan-1,times:g}}else g--,p++;else o[_.index].left--,g=o[_.index].times,d++}return new ole(c,u,t,h)});return l}function Fq(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=xqe(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function xqe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function vqe(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new lqe(a,e,r)})}function bqe(t,e,r,n,a,s,o){var l=GHe(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=Bf({},l.table,l[t],a.styles,c),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},h=t==="body"?d:{},p=t==="body"&&r%2===0?Bf({},l.alternateRow,a.alternateRowStyles):{},g=qHe(s),b=Bf({},g,u,p,h);return Bf(b,o)}function yqe(t,e,r){var n;r===void 0&&(r={});var a=ale(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var g=e.columns.find(function(b){return b.dataKey===p||b.index===p});g&&!s.has(g.index)&&(s.set(g.index,!0),o.push(g.index),l.push(e.columns[g.index]),a-=g.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||a>=h)u=!1,o.push(d),l.push(e.columns[d]),a-=h;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function wqe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=yqe(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function _qe(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(p,g){return p+g.height},0);l+=u}var d=new Q1(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(ule(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var h=Bf({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Nqe(d,e,h,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(p){return gh(d,e,p,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,g){var b=g===e.body.length-1;Z3(d,e,p,b,h,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(p){return gh(d,e,p,s,e.columns)})),rle(d,e,h,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Nqe(t,e,r,n){var a=wqe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?b2(t,e,r,n,u.columns,!0):Bq(t,e,n,u.columns),Eqe(t,e,r,n,u.columns),JT(t,e,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?b2(t,e,r,n,d,!0):Bq(t,e,n,d),u=Uq(t,e,o+1,n,d),JT(t,e,n,d)}var h=u-o;a.slice(1).forEach(function(p){t.applyStyles(t.userStyles),b2(t,e,r,n,p.columns,!0),Uq(t,e,o+1,n,p.columns,h),JT(t,e,n,p.columns)}),o=u};o<e.body.length-1;)c()}function Bq(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return gh(t,e,s,r,n)})}function Eqe(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;Z3(t,e,s,l,r,n,a)})}function Uq(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,h=cle(t,e,d,n);c.canEntireRowFit(h,a)&&(gh(t,e,c,n,a),l=r+u)}),l}function JT(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return gh(t,e,s,r,n)})}function Aqe(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function Sqe(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new lle(u.raw,u.styles,u.section);d=Bf(d,u),d.text=[];var h=Aqe(u,e,n);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var p=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,g),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var b=new ole(t.raw,-1,t.section,a,!0);b.height=s;for(var w=0,_=r.columns;w<_.length;w++){var c=_[w],d=b.cells[c.index];d&&(d.height=b.height);var u=t.cells[c.index];u&&(u.height=t.height)}return b}function jqe(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>l;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function Z3(t,e,r,n,a,s,o){var l=cle(t,e,n,s);if(r.canEntireRowFit(l,o))gh(t,e,r,s,o);else if(jqe(t,r,l,e)){var c=Sqe(r,l,e,t);gh(t,e,r,s,o),b2(t,e,a,s,o),Z3(t,e,c,n,a,s,o)}else b2(t,e,a,s,o),Z3(t,e,r,n,a,s,o)}function gh(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}Tqe(t,c,n);var d=c.getTextPos();Joe(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function Tqe(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=nle(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Cqe(t,e,r,n.lineWidth))}function Cqe(t,e,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,h,p,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,p,g,"S")}}function cle(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function b2(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return gh(t,e,l,n,a)}),e.callEndPageHooks(t,n);var o=e.settings.margin;rle(t,e,r,n),ule(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return gh(t,e,l,n,a)}),t.applyStyles(t.userStyles))}function ule(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function kqe(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=JHe(this,n),s=pqe(this,a);return _qe(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){Joe(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return Q1.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Q1.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Q1(this),s=ile(a,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var eC;try{if(typeof window<"u"&&window){var zq=window,Vq=zq.jsPDF||((eC=zq.jspdf)===null||eC===void 0?void 0:eC.jsPDF);Vq&&kqe(Vq)}}catch(t){console.error("Could not apply autoTable plugin",t)}const B5=()=>{const[t,e]=S.useState("rutas"),[r,n]=S.useState(!1),[a,s]=S.useState(null),o=R=>R==null?"0":Math.round(R).toLocaleString("en-US"),[l,c]=S.useState(""),[u,d]=S.useState(""),[h,p]=S.useState(""),[g,b]=S.useState(""),[w,_]=S.useState([]),[N,A]=S.useState([]);S.useEffect(()=>{j()},[]);const j=async()=>{try{const[R,B]=await Promise.all([wt.get("/empleados/repartidores"),wt.get("/rutas")]);if(R.data.success)_(R.data.data||[]);else throw new Error(R.data.error||"Error al cargar empleados");if(B.data.success)A(B.data.data||[]);else throw new Error(B.data.error||"Error al cargar rutas")}catch(R){console.error("Error cargando datos:",R),alert("Error al cargar datos iniciales")}},P=async()=>{try{n(!0);const R={fechaDesde:l,fechaHasta:u,...h&&{empleadoId:h},...g&&{rutaId:g}};let B;switch(t){case"rutas":B=await wt.get("/reportes/rutas",{params:R});break;case"gastos":B=await wt.get("/reportes/gastos",{params:R});break;case"facturas":B=await wt.get("/reportes/facturas",{params:R});break;default:throw new Error("Tipo de reporte no vlido")}if(B.data.success)s(B.data.data);else throw new Error(B.data.error||"Error al generar el reporte")}catch(R){console.error("Error:",R),alert(R.message||"Error al generar el reporte")}finally{n(!1)}},U=()=>{if(!a)return;let R=[],B="";switch(t){case"rutas":B="reporte_rutas",R=a.rutas.map(Z=>({Fecha:new Date(Z.fecha).toLocaleDateString(),Ruta:Z.nombre,Repartidor:Z.empleadoNombre,"Total Facturas":Z.totalFacturas,Entregadas:Z.facturasEntregadas,"No Entregadas":Z.facturasNoEntregadas,"Porcentaje Entrega":`${Z.porcentajeEntrega}%`,"Monto Asignado":Z.montoAsignado,"Total Gastos":Z.totalGastos,Balance:Z.balance,Cobros:Z.totalCobros||0,"A Entregar":Z.efectivoAEntregar||0}));break;case"gastos":B="reporte_gastos",R=a.gastos.map(Z=>({Fecha:new Date(Z.fecha).toLocaleDateString(),Ruta:Z.rutaNombre,Repartidor:Z.empleadoNombre,Tipo:Z.tipoGasto,Descripcin:Z.descripcion,Monto:Z.monto}));break;case"facturas":B="reporte_facturas",R=a.facturas.map(Z=>({"Cdigo Tracking":Z.codigoTracking||Z.numeroFactura||"-",Cliente:Z.cliente,Direccin:Z.direccion,Monto:Z.monto,Estado:Z.estado,Ruta:Z.rutaNombre||"Sin asignar","Fecha Intento":Z.fechaIntento?new Date(Z.fechaIntento).toLocaleDateString():"","Motivo No Entrega":Z.motivoNoEntrega||""}));break}const F=CT.json_to_sheet(R),ee=CT.book_new();CT.book_append_sheet(ee,F,"Reporte"),Hze(ee,`${B}_${new Date().toISOString().split("T")[0]}.xlsx`)},G=()=>{if(!a)return;const R=new $r;let B="",F=[],ee=[];switch(R.setFontSize(18),R.setFont(void 0,"bold"),t){case"rutas":B="Reporte de Rutas",F=["Fecha","Ruta","Repartidor","Facturas","Entregadas","% Entrega","Balance"],ee=a.rutas.map(Z=>[new Date(Z.fecha).toLocaleDateString(),Z.nombre,Z.empleadoNombre,Z.totalFacturas,Z.facturasEntregadas,`${Z.porcentajeEntrega}%`,`$${Z.balance}`]);break;case"gastos":B="Reporte de Gastos",F=["Fecha","Ruta","Repartidor","Tipo","Descripcin","Monto"],ee=a.gastos.map(Z=>[new Date(Z.fecha).toLocaleDateString(),Z.rutaNombre,Z.empleadoNombre,Z.tipoGasto,Z.descripcion,`$${Z.monto}`]);break;case"facturas":B="Reporte de Facturas",F=["Tracking","Cliente","Estado","Ruta","Monto"],ee=a.facturas.map(Z=>[Z.codigoTracking||Z.numeroFactura||"-",Z.cliente,Z.estado,Z.rutaNombre||"Sin asignar",`$${Z.monto}`]);break}if(R.text(B,14,15),R.setFontSize(12),R.setFont(void 0,"normal"),R.text(`Perodo: ${l} al ${u}`,14,25),R.autoTable({head:[F],body:ee,startY:35,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[66,139,202]}}),a.resumen){const Z=R.lastAutoTable.finalY+10;R.setFont(void 0,"bold"),R.text("Resumen:",14,Z),R.setFont(void 0,"normal");let ce=Z+7;Object.entries(a.resumen).forEach(([ne,ae])=>{R.text(`${ne}: ${ae}`,14,ce),ce+=7})}R.save(`${B.toLowerCase().replace(/ /g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`)},O=()=>{if(!(a!=null&&a.resumen))return null;const R=B=>["monto","gastos","balance","asignado","cobros","efectivo","entregar","cobrado"].some(ee=>B.toLowerCase().includes(ee));return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:Object.entries(a.resumen).map(([B,F])=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 capitalize",children:B.replace(/_/g," ")}),i.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white mt-1",children:typeof F=="number"&&R(B)?`$${o(F)}`:F})]},B))})},D=()=>a!=null&&a.rutas?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Repartidor"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Facturas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Entregadas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"% Entrega"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Asignado"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Gastos"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Balance"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cobros"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"A Entregar"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.rutas.map((R,B)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:new Date(R.fecha).toLocaleDateString()}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white",children:R.nombre}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:R.empleadoNombre}),i.jsx("td",{className:"px-4 py-3 text-sm text-center text-slate-900 dark:text-slate-100",children:R.totalFacturas}),i.jsx("td",{className:"px-4 py-3 text-sm text-center text-emerald-600 dark:text-emerald-400",children:R.facturasEntregadas}),i.jsx("td",{className:"px-4 py-3 text-sm text-center",children:i.jsxs("span",{className:`px-2 py-1 rounded-full text-xs ${R.porcentajeEntrega>=90?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":R.porcentajeEntrega>=70?"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200":"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"}`,children:[R.porcentajeEntrega,"%"]})}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:["$",o(R.montoAsignado)]}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-rose-600 dark:text-rose-400",children:["$",o(R.totalGastos)]}),i.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium",children:i.jsxs("span",{className:R.balance>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400",children:["$",o(R.balance)]})}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-blue-600 dark:text-blue-400",children:["$",o(R.totalCobros||0)]}),i.jsx("td",{className:"px-4 py-3 text-sm text-right font-bold",children:i.jsxs("span",{className:R.efectivoAEntregar>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400",children:["$",o(R.efectivoAEntregar||0)]})})]},B))})]})})}):null,I=()=>a!=null&&a.gastos?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Repartidor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Descripcin"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Monto"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.gastos.map((R,B)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:new Date(R.fecha).toLocaleDateString()}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:R.rutaNombre}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:R.empleadoNombre}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200",children:R.tipoGasto})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:R.descripcion}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right font-medium text-slate-900 dark:text-white",children:["$",R.monto]})]},B))})]})}),a.gastosPorTipo&&i.jsxs("div",{className:"p-4 border-t dark:border-slate-700",children:[i.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Gastos por Tipo"}),i.jsx("div",{className:"space-y-2",children:Object.entries(a.gastosPorTipo).map(([R,B])=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:R}),i.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["$",B]})]},R))})]})]}):null,V=()=>a!=null&&a.facturas?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Tracking"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Direccin"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Monto"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.facturas.map((R,B)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white",children:R.codigoTracking||R.numeroFactura||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:R.cliente}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:R.direccion}),i.jsx("td",{className:"px-4 py-3 text-sm text-center",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${R.estado==="entregado"?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":R.estado==="no_entregado"?"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200":"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200"}`,children:R.estado})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:R.rutaNombre||"Sin asignar"}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-white",children:["$",R.monto]})]},B))})]})})}):null;return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Reportes"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Genera reportes detallados del sistema"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-lg font-medium text-slate-800 dark:text-white mb-4",children:"Configurar Reporte"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Tipo de Reporte"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>e("rutas"),className:`p-4 rounded-lg border-2 transition-all ${t==="rutas"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"text-2xl mb-2 block",children:""}),i.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Reporte de Rutas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Desempeo por ruta y repartidor"})]}),i.jsxs("button",{onClick:()=>e("gastos"),className:`p-4 rounded-lg border-2 transition-all ${t==="gastos"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"text-2xl mb-2 block",children:""}),i.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Reporte de Gastos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Gastos detallados por tipo"})]}),i.jsxs("button",{onClick:()=>e("facturas"),className:`p-4 rounded-lg border-2 transition-all ${t==="facturas"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"text-2xl mb-2 block",children:""}),i.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Reporte de Facturas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Estado de todas las facturas"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha Desde"}),i.jsx("input",{type:"date",value:l,onChange:R=>c(R.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha Hasta"}),i.jsx("input",{type:"date",value:u,onChange:R=>d(R.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Empleado (opcional)"}),i.jsxs("select",{value:h,onChange:R=>p(R.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Todos"}),w.map(R=>i.jsx("option",{value:R.id,children:R.nombre},R.id))]})]}),t!=="rutas"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ruta (opcional)"}),i.jsxs("select",{value:g,onChange:R=>b(R.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Todas"}),N.map(R=>i.jsx("option",{value:R.id,children:R.nombre},R.id))]})]})]}),i.jsx("button",{onClick:P,disabled:r,className:"w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:bg-slate-400",children:r?"Generando...":"Generar Reporte"})]}),a&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex gap-3 mb-6 justify-end",children:[i.jsxs("button",{onClick:U,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2",children:[i.jsx("span",{children:""}),"Exportar Excel"]}),i.jsxs("button",{onClick:G,className:"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition flex items-center gap-2",children:[i.jsx("span",{children:""}),"Exportar PDF"]})]}),O(),t==="rutas"&&D(),t==="gastos"&&I(),t==="facturas"&&V()]})]})},Iqe=()=>{const{userData:t}=fa(),[e,r]=S.useState([]),[n,a]=S.useState(!0),[s,o]=S.useState(null),[l,c]=S.useState(""),[u,d]=S.useState("all");S.useEffect(()=>{(t==null?void 0:t.rol)==="super_admin"&&h()},[t]);const h=async()=>{try{a(!0);const N=await wt.get("/tickets/all");if(N.data.success)r(N.data.data||[]);else throw new Error(N.data.error||"Error al cargar tickets")}catch(N){console.error("Error cargando tickets:",N),r([]),alert("Error al cargar tickets")}finally{a(!1)}},p=async N=>{if(!l.trim()){alert(" Escribe una respuesta");return}try{(await wt.patch(`/tickets/${N}/respond`,{respuesta:l})).data.success&&(alert(" Ticket respondido exitosamente"),c(""),o(null),h())}catch(A){console.error("Error respondiendo ticket:",A),alert(" Error al responder ticket")}},g=e.filter(N=>u==="all"?!0:N.estado===u),b=e.filter(N=>N.estado==="abierto").length,w=e.filter(N=>N.estado==="respondido").length,_=e.filter(N=>N.estado==="cerrado").length;return(t==null?void 0:t.rol)!=="super_admin"?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg p-4",children:i.jsx("p",{className:"text-rose-800 dark:text-rose-200",children:" No tienes permisos para ver esta pgina"})})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Gestin de Tickets"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Administra todas las solicitudes de ayuda"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Tickets"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:e.length})]}),i.jsx(HN,{className:"text-indigo-500 dark:text-indigo-400",size:32})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Abiertos"}),i.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:b})]}),i.jsx(Xo,{className:"text-amber-500 dark:text-amber-400",size:32})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Respondidos"}),i.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:w})]}),i.jsx(HN,{className:"text-indigo-500 dark:text-indigo-400",size:32})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Cerrados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-600 dark:text-slate-400",children:_})]}),i.jsx(en,{className:"text-slate-500 dark:text-slate-400",size:32})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-lg transition ${u==="all"?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Todos (",e.length,")"]}),i.jsxs("button",{onClick:()=>d("abierto"),className:`px-4 py-2 rounded-lg transition ${u==="abierto"?"bg-amber-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Abiertos (",b,")"]}),i.jsxs("button",{onClick:()=>d("respondido"),className:`px-4 py-2 rounded-lg transition ${u==="respondido"?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Respondidos (",w,")"]}),i.jsxs("button",{onClick:()=>d("cerrado"),className:`px-4 py-2 rounded-lg transition ${u==="cerrado"?"bg-slate-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Cerrados (",_,")"]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md",children:n?i.jsx("div",{className:"p-12 text-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"})}):g.length===0?i.jsx("div",{className:"p-12 text-center text-slate-500 dark:text-slate-400",children:"No hay tickets en esta categora"}):i.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:g.map(N=>i.jsxs("div",{className:"p-6 hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:N.asunto}),i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N.estado==="abierto"?"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200":N.estado==="respondido"?"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"}`,children:N.estado}),i.jsxs("span",{className:`text-xs font-medium ${N.prioridad==="alta"?"text-rose-600 dark:text-rose-400":N.prioridad==="media"?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"}`,children:["Prioridad ",N.prioridad]})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-3",children:N.mensaje}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(bl,{size:14}),N.usuarioNombre]}),i.jsx("span",{children:N.usuarioEmail}),i.jsxs("span",{children:[" ",new Date(N.createdAt).toLocaleString()]}),i.jsxs("span",{children:[" ",N.categoria]})]})]})}),N.respuesta&&i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border-l-4 border-emerald-500 dark:border-emerald-400 p-4 rounded mb-3",children:[i.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-200 mb-1",children:"Tu respuesta:"}),i.jsx("p",{className:"text-sm text-emerald-800 dark:text-emerald-300",children:N.respuesta})]}),N.estado==="abierto"&&i.jsx("div",{className:"mt-4 pt-4 border-t dark:border-slate-700",children:s===N.id?i.jsxs("div",{children:[i.jsx("textarea",{value:l,onChange:A=>c(A.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2",placeholder:"Escribe tu respuesta..."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{o(null),c("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsxs("button",{onClick:()=>p(N.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[i.jsx($4e,{size:16}),"Enviar Respuesta"]})]})]}):i.jsxs("button",{onClick:()=>o(N.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[i.jsx(HN,{size:16}),"Responder"]})})]},N.id))})})]})},Oqe=()=>{const{userData:t}=fa(),[e,r]=S.useState(!1),[n,a]=S.useState(!0),[s,o]=S.useState(!1),[l,c]=S.useState(!0),[u,d]=S.useState("claro"),[h,p]=S.useState("blue"),[g,b]=S.useState("es"),[w,_]=S.useState("America/Santo_Domingo"),N=async()=>{try{r(!0);const A={notificaciones:{email:n,push:s,tickets:l},apariencia:{tema:u,colorAccent:h},idioma:g,zonaHoraria:w};localStorage.setItem("userConfig",JSON.stringify(A)),u==="oscuro"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),alert(" Configuracin guardada exitosamente")}catch(A){console.error("Error guardando configuracin:",A),alert(" Error al guardar configuracin")}finally{r(!1)}};return i.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Configuracin"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Personaliza tu experiencia en el sistema"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(PR,{className:"text-indigo-600 dark:text-indigo-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Notificaciones"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Notificaciones por email"}),i.jsx("input",{type:"checkbox",checked:n,onChange:A=>a(A.target.checked),className:"w-5 h-5 text-indigo-600 rounded"})]}),i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Notificaciones push"}),i.jsx("input",{type:"checkbox",checked:s,onChange:A=>o(A.target.checked),className:"w-5 h-5 text-indigo-600 rounded"})]}),i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Alertas de nuevos tickets"}),i.jsx("input",{type:"checkbox",checked:l,onChange:A=>c(A.target.checked),className:"w-5 h-5 text-indigo-600 rounded"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(s2,{className:"text-rose-600 dark:text-rose-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Seguridad"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>alert("Funcin de cambio de contrasea en desarrollo"),className:"w-full text-left px-4 py-3 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 rounded-lg transition",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Cambiar contrasea"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Actualiza tu contrasea regularmente"})]}),i.jsxs("button",{onClick:()=>alert("Funcin de 2FA en desarrollo"),className:"w-full text-left px-4 py-3 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 rounded-lg transition",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Autenticacin de dos factores"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Agrega una capa extra de seguridad"})]}),i.jsxs("button",{onClick:()=>alert("Funcin de cerrar sesiones en desarrollo"),className:"w-full text-left px-4 py-3 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 rounded-lg transition",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Cerrar otras sesiones"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Desconecta todos los dems dispositivos"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(j4e,{className:"text-purple-600 dark:text-purple-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Apariencia"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tema"}),i.jsxs("select",{value:u,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"claro",children:"Claro"}),i.jsx("option",{value:"oscuro",children:"Oscuro"}),i.jsx("option",{value:"automatico",children:"Automtico"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Color de acento"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>p("blue"),className:`w-10 h-10 bg-indigo-600 rounded-lg border-2 ${h==="blue"?"border-indigo-800":"border-transparent hover:border-indigo-800"}`}),i.jsx("button",{onClick:()=>p("purple"),className:`w-10 h-10 bg-purple-600 rounded-lg border-2 ${h==="purple"?"border-purple-800":"border-transparent hover:border-purple-800"}`}),i.jsx("button",{onClick:()=>p("green"),className:`w-10 h-10 bg-emerald-600 rounded-lg border-2 ${h==="green"?"border-emerald-800":"border-transparent hover:border-emerald-800"}`}),i.jsx("button",{onClick:()=>p("red"),className:`w-10 h-10 bg-rose-600 rounded-lg border-2 ${h==="red"?"border-rose-800":"border-transparent hover:border-rose-800"}`})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(n4e,{className:"text-emerald-600 dark:text-emerald-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Idioma y regin"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Idioma"}),i.jsxs("select",{value:g,onChange:A=>b(A.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"es",children:"Espaol"}),i.jsx("option",{value:"en",children:"English"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona horaria"}),i.jsxs("select",{value:w,onChange:A=>_(A.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"America/Santo_Domingo",children:"Amrica/Santo Domingo (GMT-4)"}),i.jsx("option",{value:"America/New_York",children:"Amrica/New York (GMT-5)"}),i.jsx("option",{value:"America/Los_Angeles",children:"Amrica/Los Angeles (GMT-8)"})]})]})]})]})]}),i.jsx("div",{className:"mt-6",children:i.jsx("button",{onClick:N,disabled:e,className:"w-full px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium disabled:bg-slate-400 disabled:cursor-not-allowed",children:e?"Guardando...":"Guardar Cambios"})})]})},Pqe=()=>{const{userData:t}=fa(),[e,r]=S.useState(""),[n,a]=S.useState("all"),s=[{id:"all",name:"Todas",icon:Tz},{id:"embarques",name:"Embarques",icon:Au},{id:"rutas",name:"Rutas",icon:$N},{id:"facturas",name:"Facturas",icon:Au},{id:"cuenta",name:"Mi Cuenta",icon:$N}],l=[{category:"embarques",question:"Cmo crear un nuevo embarque?",answer:'Para crear un embarque, ve a la seccin "Embarques" y haz clic en "Nuevo Embarque". Completa los campos requeridos como cdigo de tracking, origen, destino y fechas.'},{category:"embarques",question:"Cmo importar facturas desde un Excel?",answer:'En la pgina de embarques, selecciona un embarque y haz clic en "Importar Facturas". Sube un archivo Excel con las columnas: cliente, direccin, telfono, monto, etc.'},{category:"rutas",question:"Cmo asignar facturas a una ruta?",answer:'Ve a "Rutas" > "Nueva Ruta". Selecciona un embarque, elige las facturas que deseas incluir, asigna un repartidor y establece el monto para gastos.'},{category:"rutas",question:"Cmo cerrar una ruta completada?",answer:'En la lista de rutas activas, haz clic en "Cerrar Ruta". Vers un resumen del balance y confirmacin antes de cerrarla definitivamente.'},{category:"facturas",question:"Qu hacer con facturas no entregadas?",answer:'Las facturas no entregadas aparecen en "Facturas No Entregadas". Desde ah puedes reasignarlas a otra ruta o contactar nuevamente al cliente.'},{category:"facturas",question:"Cmo confirmar una factura antes de crear rutas?",answer:'Usa el "Panel de Secretarias" para verificar datos de contacto, confirmar direcciones y marcar facturas como listas para entrega.'},{category:"cuenta",question:"Cmo cambiar mi contrasea?",answer:'Ve a "Configuracin" en el men lateral, luego selecciona "Seguridad" y haz clic en "Cambiar Contrasea".'},{category:"cuenta",question:"Qu permisos tiene mi rol?",answer:"Los permisos varan segn tu rol: Admin tiene acceso completo, Secretarias manejan confirmaciones, Almacn gestiona embarques, y Repartidores ven sus rutas."}].filter(c=>{const u=n==="all"||c.category===n,d=c.question.toLowerCase().includes(e.toLowerCase())||c.answer.toLowerCase().includes(e.toLowerCase());return u&&d});return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Centro de Ayuda"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Encuentra respuestas y soporte para el sistema"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(qd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),i.jsx("input",{type:"text",placeholder:"Buscar en el centro de ayuda...",value:e,onChange:c=>r(c.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900 rounded-full inline-block mb-3",children:i.jsx($N,{className:"text-indigo-600 dark:text-indigo-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Chat en Vivo"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Chatea con nuestro equipo de soporte"}),i.jsx("span",{className:"text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:"Iniciar Chat "})]}),i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900 rounded-full inline-block mb-3",children:i.jsx(uh,{className:"text-emerald-600 dark:text-emerald-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Email"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"soporte@sistemaenvios.com"}),i.jsx("span",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-medium",children:"Enviar Email "})]}),i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-full inline-block mb-3",children:i.jsx(vl,{className:"text-purple-600 dark:text-purple-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Telfono"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"+1 (809) 555-0123"}),i.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Llamar "})]}),i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900 rounded-full inline-block mb-3",children:i.jsx(Oz,{className:"text-amber-600 dark:text-amber-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Videoconferencia"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Agenda una sesin con soporte"}),i.jsx("span",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"Agendar "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"Preguntas Frecuentes"}),i.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:s.map(c=>{const u=c.icon;return i.jsxs("button",{onClick:()=>a(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition ${n===c.id?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[i.jsx(u,{size:16}),c.name]},c.id)})}),i.jsx("div",{className:"space-y-4",children:l.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Tz,{className:"mx-auto text-slate-400 dark:text-slate-600 mb-3",size:48}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No se encontraron resultados"})]}):l.map((c,u)=>i.jsxs("details",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("summary",{className:"font-medium text-slate-900 dark:text-white",children:c.question}),i.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:c.answer})]},u))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Recursos tiles"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("a",{href:"#",className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:i.jsx(_3e,{className:"text-indigo-600 dark:text-indigo-300",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"Documentacin Completa"}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Guas detalladas de uso del sistema"})]})]}),i.jsxs("a",{href:"#",className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:i.jsx(Oz,{className:"text-indigo-600 dark:text-indigo-300",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"Video Tutoriales"}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Aprende con videos paso a paso"})]})]}),i.jsxs("a",{href:"#",className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:i.jsx(Au,{className:"text-indigo-600 dark:text-indigo-300",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"Notas de Versin"}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"ltimas actualizaciones y mejoras"})]})]})]})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-200 mb-2",children:"Tu Cuenta"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-indigo-800 dark:text-indigo-300",children:[i.jsx("strong",{children:"Usuario:"})," ",t==null?void 0:t.nombre]}),i.jsxs("p",{className:"text-indigo-800 dark:text-indigo-300",children:[i.jsx("strong",{children:"Rol:"})," ",t==null?void 0:t.rol]}),i.jsxs("p",{className:"text-indigo-800 dark:text-indigo-300",children:[i.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]})]})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("h3",{className:"text-lg font-semibold text-emerald-900 dark:text-emerald-200",children:"Sistema Operativo"})]}),i.jsx("p",{className:"text-sm text-emerald-800 dark:text-emerald-300",children:"Todos los servicios funcionando correctamente"})]})]})]})]})},Rqe=({onScan:t,isActive:e=!0,minChars:r=3,className:n="",ignoreIfFocusOnInput:a=!0,showStatus:s=!0})=>{const[o,l]=S.useState(null),[c,u]=S.useState(!1),d=S.useRef(""),h=S.useRef(0),p=S.useRef(null);return S.useEffect(()=>{if(!e)return;const g=b=>{if(a){const N=b.target.tagName.toLowerCase();if(N==="input"||N==="textarea")return}const w=Date.now(),_=w-h.current;if(_>100&&d.current.length>0&&(d.current="",u(!1)),_<50&&d.current.length>0&&(u(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>u(!1),500)),h.current=w,b.key==="Enter"){const N=d.current;N.length>=r&&(console.log("Barcode scanned:",N),l(N),t&&t(N),d.current="",b.preventDefault())}else b.key.length===1&&(d.current+=b.key)};return window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g),p.current&&clearTimeout(p.current)}},[e,t,r,a]),s?i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${c?"bg-blue-100 text-blue-700 border border-blue-200 shadow-sm":o?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-50 text-slate-500 border border-slate-200"} ${n}`,children:[i.jsx(Vre,{className:`w-4 h-4 ${c?"animate-pulse":""}`}),i.jsx("span",{children:c?"Recibiendo datos...":o?`ltimo: ${o}`:"Listo para escanear"})]}):null},Dqe=({factura:t,onClose:e,companyName:r="PROLOGIX"})=>{var l;const[n,a]=S.useState("4x2"),s=S.useMemo(()=>{if(!t)return[];let c=[];return t.items&&t.items.forEach((u,d)=>{var p;const h=u.cantidad||1;for(let g=0;g<h;g++)c.push({uniqueCode:`${t.codigoTracking}-${d}-${g}`,tracking:t.codigoTracking,itemDesc:u.descripcion||u.producto||"Item Sin Descripcin",itemIndex:d,unitIndex:g,totalUnits:h,recipientName:((p=t.destinatario)==null?void 0:p.nombre)||"Cliente General",date:new Date().toLocaleDateString("es-DO")})}),c},[t]),o=()=>{window.print()};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[9000]",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg no-print animate-in fade-in zoom-in duration-200",children:[i.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600 dark:text-indigo-400",children:i.jsx(nAe,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Imprimir Etiquetas"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.codigoTracking})]})]}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:[i.jsx(RR,{size:16}),"Configuracin de Impresin"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>a("4x2"),className:`flex flex-col items-center justify-center p-3 border-2 rounded-xl transition-all ${n==="4x2"?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"font-bold text-lg",children:'4" x 2"'}),i.jsx("span",{className:"text-xs opacity-80",children:"Etiqueta Item"})]}),i.jsxs("button",{onClick:()=>a("4x6"),className:`flex flex-col items-center justify-center p-3 border-2 rounded-xl transition-all ${n==="4x6"?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"font-bold text-lg",children:'4" x 6"'}),i.jsx("span",{className:"text-xs opacity-80",children:"Etiqueta Envo"})]})]}),i.jsxs("p",{className:"text-xs text-slate-500 mt-2 text-center",children:["Asegrate de configurar tu impresora trmica con el tamao de papel correcto (",n==="4x2"?"101x50mm":"101x152mm",")."]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-200 dark:border-slate-600 mb-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Resumen de Impresin"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Items:"}),i.jsx("strong",{className:"text-slate-900 dark:text-white",children:((l=t.items)==null?void 0:l.length)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Etiquetas a Generar:"}),i.jsx("strong",{className:"text-emerald-600 font-bold",children:s.length})]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"w-1/3 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),i.jsxs("button",{onClick:o,className:"w-2/3 bg-indigo-600 text-white py-2 rounded-lg font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-500/30 transition-all active:scale-95",children:[i.jsx(Wl,{size:20}),"Imprimir ",s.length," Etiquetas"]})]})]})]}),i.jsx(bse,{labels:s,companyName:r,size:n})]})},tC=()=>{var Ve,Ft,qt,Wt,nr,Xe,Kt,kt,pt,Ot,Ut,Nr,or,lt,lr;$s();const[t,e]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState("lista"),[o,l]=S.useState("activos"),[c,u]=S.useState(""),[d,h]=S.useState(""),[p,g]=S.useState(null),[b,w]=S.useState(null),[_,N]=S.useState({}),[A,j]=S.useState(""),[P,U]=S.useState(null),[G,O]=S.useState(!1),[D,I]=S.useState(!1),[V,R]=S.useState(null),[B,F]=S.useState(null),[ee,Z]=S.useState(!1),[ce,ne]=S.useState(null),[ae,me]=S.useState(null),[Ee,ye]=S.useState(null),[H,Y]=S.useState(null),[X,re]=S.useState([]);S.useEffect(()=>{se()},[]);const se=async()=>{try{I(!0);const ve=await wt.get("/almacen-usa/contenedores");ve.data.success&&e(ve.data.data)}catch(ve){console.error("Error cargando contenedores:",ve),R("Error al cargar los contenedores")}finally{I(!1)}},ke=t.filter(ve=>o==="activos"?ve.estado!=="trabajado":ve.estado==="trabajado"),Ce=async ve=>{var Ze,at;ve.preventDefault();try{I(!0),R(null);const Qe=await wt.post("/almacen-usa/contenedores",{});Qe.data.success&&(F("Contenedor creado exitosamente"),u(""),n(Qe.data.data),s("trabajar"),await se())}catch(Qe){console.error("Error creando contenedor:",Qe),R(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al crear el contenedor")}finally{I(!1)}},xe=async ve=>{var Ze,at;if(ve.preventDefault(),!d.trim()){R("Ingresa un cdigo de tracking");return}try{I(!0),R(null),g(null);const Qe=await wt.get(`/almacen-usa/facturas/buscar/${d.trim()}`);Qe.data.success&&(g(Qe.data.data),F("Factura encontrada"))}catch(Qe){console.error("Error buscando factura:",Qe),R(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Factura no encontrada")}finally{I(!1)}},Ie=async ve=>{var Ze,at;if(ve.preventDefault(),!A.trim()){R("Ingresa un cdigo de tracking");return}try{I(!0),R(null),U(null);const Qe=await wt.get(`/almacen-usa/facturas/buscar/${A.trim()}`);Qe.data.success&&(U(Qe.data.data),O(!0))}catch(Qe){console.error("Error en bsqueda global:",Qe),R(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Factura no encontrada")}finally{I(!1)}},He=async()=>{var ve,Ze;if(!(!p||!r))try{I(!0),R(null),(await wt.post(`/almacen-usa/contenedores/${r.id}/facturas`,{facturaId:p.id})).data.success&&(F("Factura agregada al contenedor"),await Ue(r.id),g(null),h(""))}catch(at){console.error("Error agregando factura:",at),R(((Ze=(ve=at.response)==null?void 0:ve.data)==null?void 0:Ze.message)||"Error al agregar la factura")}finally{I(!1)}},Ue=async ve=>{try{const Ze=await wt.get(`/almacen-usa/contenedores/${ve}`);Ze.data.success&&n(Ze.data.data)}catch(Ze){console.error("Error cargando contenedor:",Ze),R("Error al cargar el contenedor")}},Me=async ve=>{var Ze,at;try{I(!0),R(null),(await wt.delete(`/almacen-usa/contenedores/${r.id}/facturas/${ve}`)).data.success&&(F("Factura quitada del contenedor"),await Ue(r.id),me(null),(b==null?void 0:b.id)===ve&&w(null))}catch(Qe){console.error("Error quitando factura:",Qe),R(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al quitar la factura")}finally{I(!1)}},Be=async(ve,Ze,at)=>{var Qe,ze;try{if(I(!0),R(null),(await wt.post(`/almacen-usa/contenedores/${r.id}/unidades/marcar`,{facturaId:ve,itemIndex:Ze,unidadIndex:at})).data.success&&(await Ue(r.id),b&&b.id===ve)){const At=r.facturas.find(er=>er.id===ve);At&&w(At)}}catch(it){console.error("Error marcando unidad:",it),R(((ze=(Qe=it.response)==null?void 0:Qe.data)==null?void 0:ze.message)||"Error al marcar la unidad")}finally{I(!1)}},be=async(ve=!1)=>{var Ze,at,Qe,ze;try{I(!0),R(null),(await wt.post(`/almacen-usa/contenedores/${r.id}/cerrar`,{forzarCierre:ve})).data.success&&(F("Contenedor cerrado exitosamente"),Z(!1),re([]),s("lista"),n(null),await se())}catch(it){console.error("Error cerrando contenedor:",it),(at=(Ze=it.response)==null?void 0:Ze.data)!=null&&at.requiereConfirmacion?(re(it.response.data.facturasIncompletas),Z(!0)):R(((ze=(Qe=it.response)==null?void 0:Qe.data)==null?void 0:ze.message)||"Error al cerrar el contenedor")}finally{I(!1)}},Vt=async ve=>{var Ze,at;try{I(!0),R(null),(await wt.delete(`/almacen-usa/contenedores/${ve}`)).data.success&&(F("Contenedor eliminado exitosamente"),ne(null),(r==null?void 0:r.id)===ve&&(s("lista"),n(null)),await se())}catch(Qe){console.error("Error eliminando contenedor:",Qe),R(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al eliminar el contenedor"),ne(null)}finally{I(!1)}},ht=async ve=>{var Ze,at;try{I(!0),R(null),(await wt.post(`/almacen-usa/contenedores/${ve}/trabajado`)).data.success&&(F("Contenedor marcado como trabajado"),ye(null),(r==null?void 0:r.id)===ve&&(s("lista"),n(null)),await se())}catch(Qe){console.error("Error marcando como trabajado:",Qe),R(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al marcar como trabajado"),ye(null)}finally{I(!1)}},Lt=async ve=>{n(ve),await Ue(ve.id),s("trabajar")},et=()=>{s("lista"),n(null),w(null),h(""),g(null),se()};S.useEffect(()=>{if(V||B){const ve=setTimeout(()=>{R(null),F(null)},5e3);return()=>clearTimeout(ve)}},[V,B]);const Jt=async ve=>{if(!r){We.error("Debes abrir un contenedor para escanear items");return}console.log("Escaneado:",ve);const Ze=ve.match(/^(.*)-(\d+)-(\d+)$/);if(Ze){const[at,Qe,ze,it]=Ze,At=parseInt(ze),er=parseInt(it),It=r.facturas.find(Er=>Er.codigoTracking===Qe);It?(We.promise(Be(It.id,At,er),{loading:"Marcando unidad...",success:`Item escaneado: ${Qe} [${er+1}]`,error:"Error al marcar unidad"}),(!b||b.id!==It.id)&&w(It)):We.error(`Factura ${Qe} no encontrada en este contenedor`)}else{const at=r.facturas.find(Qe=>Qe.codigoTracking===ve);at?(w(at),We.success("Factura localizada en el contenedor")):(h(ve),We.info("Factura no est en contenedor. Buscando..."))}};return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6",children:[i.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Zu,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Almacn USA"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestin de contenedores y escaneo de items"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[a==="lista"&&i.jsxs("form",{onSubmit:Ie,className:"flex gap-2",children:[i.jsx("input",{type:"text",value:A,onChange:ve=>j(ve.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar factura..."}),i.jsx("button",{type:"submit",disabled:D,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:i.jsx(qd,{size:20})})]}),a!=="lista"&&i.jsxs("button",{onClick:et,className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:[i.jsx(Gl,{size:20}),"Volver"]})]})]})}),V&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-rose-100 border border-rose-400 text-rose-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(bi,{size:20}),i.jsx("span",{children:V})]})}),B&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-emerald-100 border border-emerald-400 text-emerald-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(ad,{size:20}),i.jsx("span",{children:B})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto",children:[a==="lista"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>l("activos"),className:`px-6 py-3 rounded-lg transition font-semibold ${o==="activos"?"bg-indigo-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zu,{size:20}),"Activos (",t.filter(ve=>ve.estado!=="trabajado").length,")"]})}),i.jsx("button",{onClick:()=>l("historial"),className:`px-6 py-3 rounded-lg transition font-semibold ${o==="historial"?"bg-indigo-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zre,{size:20}),"Historial (",t.filter(ve=>ve.estado==="trabajado").length,")"]})})]}),o==="activos"&&i.jsxs("button",{onClick:()=>s("crear"),className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[i.jsx(Hd,{size:20}),"Nuevo Contenedor"]})]}),D?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx(ts,{className:"animate-spin text-indigo-600",size:48})}):ke.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-12 text-center",children:[i.jsx(Br,{className:"mx-auto text-slate-400 mb-4",size:64}),i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:["No hay contenedores ",o==="historial"?"en el historial":""]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:o==="activos"?"Crea tu primer contenedor para empezar a gestionar el inventario":"Los contenedores trabajados aparecern aqu"}),o==="activos"&&i.jsx("button",{onClick:()=>s("crear"),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Crear Contenedor"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ke.map(ve=>{var Ze,at,Qe,ze,it,At;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow hover:shadow-lg transition p-6",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Zu,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:ve.numeroContenedor}),i.jsx("span",{className:`text-sm px-2 py-1 rounded ${ve.estado==="abierto"?"bg-emerald-100 text-emerald-800":ve.estado==="trabajado"?"bg-slate-100 text-slate-800":ve.estado==="recibido_rd"?"bg-purple-100 text-purple-800":"bg-indigo-100 text-indigo-800"}`,children:ve.estado==="abierto"?"Abierto":ve.estado==="trabajado"?"Trabajado":ve.estado==="recibido_rd"?"Recibido RD":ve.estado==="en_transito_rd"?"En Trnsito":"Cerrado"})]})]})}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Facturas:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:((Ze=ve.estadisticas)==null?void 0:Ze.totalFacturas)||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Unidades:"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[((at=ve.estadisticas)==null?void 0:at.unidadesMarcadas)||((Qe=ve.estadisticas)==null?void 0:Qe.itemsMarcados)||0," / ",((ze=ve.estadisticas)==null?void 0:ze.unidadesTotales)||((it=ve.estadisticas)==null?void 0:it.totalItems)||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Monto:"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:["$",(((At=ve.estadisticas)==null?void 0:At.montoTotal)||0).toFixed(2)]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>Lt(ve),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[i.jsx(Tu,{size:20}),"Ver"]}),ve.estado==="abierto"&&i.jsx("button",{onClick:()=>ne(ve),className:"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition",children:i.jsx(Iz,{size:20})}),ve.estado==="recibido_rd"&&i.jsx("button",{onClick:()=>ye(ve),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition",children:i.jsx(en,{size:20})})]})]},ve.id)})})]}),a==="crear"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-white mb-6",children:"Crear Nuevo Contenedor"}),i.jsxs("form",{onSubmit:Ce,className:"space-y-6",children:[i.jsxs("div",{className:"bg-blue-50 text-blue-800 p-4 rounded-lg flex items-start gap-3",children:[i.jsx(Zu,{className:"mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:"Generacin Automtica"}),i.jsxs("p",{className:"text-sm mt-1",children:["El nmero de contenedor ser generado automticamente por el sistema siguiendo el formato: ",i.jsx("strong",{children:"[PREFIJO]-CNT-[NMERO]"}),i.jsx("br",{}),"Ejemplo: EMI-CNT-0001"]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:D,className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:D?i.jsxs(i.Fragment,{children:[i.jsx(ts,{className:"animate-spin",size:20}),"Creando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Hd,{size:20}),"Crear Contenedor"]})}),i.jsx("button",{type:"button",onClick:et,className:"px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})]}),a==="trabajar"&&r&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Zu,{className:"text-indigo-600",size:40}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.numeroContenedor}),i.jsx("span",{className:`text-sm px-3 py-1 rounded inline-block mt-1 ${r.estado==="abierto"?"bg-emerald-100 text-emerald-800":r.estado==="trabajado"?"bg-slate-100 text-slate-800":r.estado==="recibido_rd"?"bg-purple-100 text-purple-800":"bg-indigo-100 text-indigo-800"}`,children:r.estado==="abierto"?"Abierto":r.estado==="trabajado"?"Trabajado":r.estado==="recibido_rd"?"Recibido RD":r.estado==="en_transito_rd"?"En Trnsito":"Cerrado"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((Ve=r.estadisticas)==null?void 0:Ve.totalFacturas)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Facturas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((Ft=r.estadisticas)==null?void 0:Ft.unidadesTotales)||((qt=r.estadisticas)==null?void 0:qt.totalItems)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Unidades"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:((Wt=r.estadisticas)==null?void 0:Wt.unidadesMarcadas)||((nr=r.estadisticas)==null?void 0:nr.itemsMarcados)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Marcadas"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:["$",(((Xe=r.estadisticas)==null?void 0:Xe.montoTotal)||0).toFixed(2)]}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Total"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[r.estado==="abierto"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>be(!1),disabled:D||!((Kt=r.facturas)!=null&&Kt.length),className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2 disabled:opacity-50",children:[i.jsx(s2,{size:20}),"Cerrar"]}),i.jsxs("button",{onClick:()=>ne(r),disabled:D,className:"px-6 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition flex items-center gap-2 disabled:opacity-50",children:[i.jsx(Iz,{size:20}),"Eliminar"]})]}),r.estado==="recibido_rd"&&i.jsxs("button",{onClick:()=>ye(r),disabled:D,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2 disabled:opacity-50",children:[i.jsx(en,{size:20}),"Marcar Trabajado"]})]})]})}),r.estado==="abierto"&&!b&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"Buscar Factura"}),i.jsxs("form",{onSubmit:xe,className:"flex flex-col sm:flex-row gap-3 mb-4",children:[i.jsx("input",{type:"text",value:d,onChange:ve=>h(ve.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Cdigo de tracking (Ej: RC-20250130-0001)"}),i.jsxs("button",{type:"submit",disabled:D,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:[D?i.jsx(ts,{className:"animate-spin",size:20}):i.jsx(qd,{size:20}),"Buscar"]})]}),p&&i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-indigo-50 dark:bg-indigo-900/20",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:p.codigoTracking}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:((kt=p.destinatario)==null?void 0:kt.nombre)||"Destinatario"})]}),i.jsxs("span",{className:"text-sm font-medium px-2 py-1 bg-indigo-100 text-indigo-800 rounded",children:[((pt=p.items)==null?void 0:pt.length)||0," items"]})]}),i.jsxs("button",{onClick:He,disabled:D,className:"w-full px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:[i.jsx(Hd,{size:20}),"Agregar al Contenedor"]})]})]}),!b&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:["Facturas en el Contenedor (",((Ot=r.facturas)==null?void 0:Ot.length)||0,")"]}),r.facturas&&r.facturas.length>0?i.jsx("div",{className:"space-y-3",children:r.facturas.map(ve=>i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:ve.codigoTracking}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Unidades: ",ve.unidadesMarcadas||ve.itemsMarcados||0," / ",ve.unidadesTotales||ve.itemsTotal||0]})]}),i.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[i.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium flex-1 sm:flex-none text-center ${ve.estadoItems==="completo"?"bg-emerald-100 text-emerald-800":ve.estadoItems==="incompleto"?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-800"}`,children:ve.estadoItems==="completo"?"Completa":ve.estadoItems==="incompleto"?"Incompleta":"Pendiente"}),i.jsx("button",{onClick:()=>Y(ve),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition flex items-center gap-2",title:"Imprimir Etiquetas",children:i.jsx(Wl,{size:18})}),i.jsxs("button",{onClick:()=>w(ve),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Tu,{size:18}),"Ver"]}),r.estado==="abierto"&&i.jsx("button",{onClick:()=>me(ve),className:"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition flex items-center gap-2",children:i.jsx(Jn,{size:18})})]})]})},ve.id))}):i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(Br,{className:"mx-auto mb-3 text-slate-400",size:48}),i.jsx("p",{children:"No hay facturas en este contenedor"}),i.jsx("p",{className:"text-sm mt-1",children:"Usa el buscador para agregar facturas"})]})]}),b&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Items de ",b.codigoTracking]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:r.estado==="abierto"?"Marca cada item escaneado":"Vista de solo lectura"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>Y(b),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Wl,{size:20}),"Imprimir Etiquetas"]}),i.jsxs("button",{onClick:()=>w(null),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition flex items-center gap-2",children:[i.jsx(Gl,{size:20}),"Volver"]})]})]}),i.jsx("div",{className:"space-y-4",children:b.items&&b.items.length>0?b.items.map((ve,Ze)=>{const at=ve.cantidad||1,Qe=ve.unidades||Array.from({length:at},(ze,it)=>({numero:it+1,marcado:!1,fechaMarcado:null}));return i.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4 bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3 pb-3 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:["Item #",Ze+1]}),i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white flex-1",children:ve.descripcion||ve.producto||"Sin descripcin"}),i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["$",ve.precio]})]}),i.jsx("div",{className:"space-y-2",children:Qe.map((ze,it)=>{const At=ze.marcado;return i.jsx("div",{className:`border rounded-lg p-3 transition ${At?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-slate-200 dark:border-slate-600 hover:border-indigo-300"}`,children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:`text-sm font-medium px-2 py-1 rounded ${At?"bg-emerald-200 text-emerald-900":"bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}`,children:["Unidad ",ze.numero,"/",at]}),At&&ze.fechaMarcado&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(ze.fechaMarcado).toLocaleTimeString("es-DO",{hour:"2-digit",minute:"2-digit"})})]})}),r.estado==="abierto"?i.jsx("button",{onClick:()=>Be(b.id,Ze,it),disabled:D,className:`px-4 py-2 rounded-lg transition flex items-center gap-2 disabled:opacity-50 whitespace-nowrap ${At?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:At?i.jsxs(i.Fragment,{children:[i.jsx(ad,{size:18}),"Escaneado"]}):i.jsxs(i.Fragment,{children:[i.jsx(qd,{size:18}),"Escanear"]})}):i.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-medium ${At?"bg-emerald-100 text-emerald-800":"bg-slate-100 text-slate-800"}`,children:At?"Escaneado":"Pendiente"})]})},it)})})]},Ze)}):i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No hay items en esta factura"})})]})]})]}),ee&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(bi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Facturas Incompletas"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Hay ",i.jsx("strong",{children:X.length})," factura(s) con items sin marcar:"]}),i.jsx("ul",{className:"space-y-2 mb-4 max-h-40 overflow-y-auto",children:X.map(ve=>i.jsxs("li",{className:"text-sm bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[i.jsx("span",{className:"font-medium",children:ve.codigoTracking}),i.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[" "," ",ve.itemsMarcados,"/",ve.itemsTotal," marcados"]})]},ve.id))}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:["Si cierras el contenedor ahora, estas facturas quedarn marcadas como ",i.jsx("strong",{children:"INCOMPLETAS"}),"."]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>be(!0),disabled:D,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition disabled:opacity-50",children:D?"Cerrando...":"Cerrar de Todas Formas"}),i.jsx("button",{onClick:()=>{Z(!1),re([])},className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),ce&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(bi,{className:"text-rose-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Eliminar Contenedor"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Ests seguro de que deseas eliminar el contenedor ",i.jsx("strong",{children:ce.numeroContenedor}),"?"]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:((Ut=ce.estadisticas)==null?void 0:Ut.totalFacturas)>0?i.jsxs(i.Fragment,{children:["Este contenedor tiene ",i.jsx("strong",{children:ce.estadisticas.totalFacturas})," factura(s). Las facturas volvern a estar disponibles."]}):i.jsx(i.Fragment,{children:"Esta accin no se puede deshacer."})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>Vt(ce.id),disabled:D,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition disabled:opacity-50",children:D?"Eliminando...":"Eliminar"}),i.jsx("button",{onClick:()=>ne(null),className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(bi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Quitar Factura"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Ests seguro de que deseas quitar la factura ",i.jsx("strong",{children:ae.codigoTracking})," del contenedor?"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:["La factura volver a estar disponible y podr ser agregada a otro contenedor.",ae.itemsMarcados>0&&i.jsxs(i.Fragment,{children:[" Los ",ae.itemsMarcados," item(s) marcados se resetearn."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>Me(ae.id),disabled:D,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition disabled:opacity-50",children:D?"Quitando...":"Quitar Factura"}),i.jsx("button",{onClick:()=>me(null),className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),Ee&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(en,{className:"text-emerald-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Marcar como Trabajado"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Ests seguro de que deseas marcar el contenedor ",i.jsx("strong",{children:Ee.numeroContenedor})," como trabajado?"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:["El contenedor se mover al ",i.jsx("strong",{children:"HISTORIAL"})," y ya no aparecer en la lista de activos. Esta accin indica que todas las facturas han sido procesadas correctamente."]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>ht(Ee.id),disabled:D,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50",children:D?"Procesando...":"Marcar Trabajado"}),i.jsx("button",{onClick:()=>ye(null),className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),G&&P&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Resultado de Bsqueda"}),i.jsx("button",{onClick:()=>{O(!1),U(null),j("")},className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg text-slate-900 dark:text-white",children:P.codigoTracking}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Cliente: ",((Nr=P.destinatario)==null?void 0:Nr.nombre)||"N/A"]})]}),i.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${P.estado==="pendiente"?"bg-emerald-100 text-emerald-800":P.estado==="en_contenedor"?"bg-indigo-100 text-indigo-800":"bg-slate-100 text-slate-800"}`,children:(or=P.estado)==null?void 0:or.toUpperCase().replace(/_/g," ")})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Items:"}),i.jsx("span",{className:"ml-2 font-semibold text-slate-900 dark:text-white",children:((lt=P.items)==null?void 0:lt.length)||0})]}),P.contenedorId&&i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Contenedor:"}),i.jsx("span",{className:"ml-2 font-semibold text-indigo-600",children:((lr=t.find(ve=>ve.id===P.contenedorId))==null?void 0:lr.numeroContenedor)||"N/A"})]})]})]}),P.estado==="pendiente"&&i.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-emerald-800 dark:text-emerald-200 text-sm",children:" Esta factura est disponible para ser agregada a un contenedor"})}),P.estado==="en_contenedor"&&i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-sm",children:" Esta factura ya est en un contenedor"})}),i.jsx("div",{className:"flex gap-3",children:i.jsx("button",{onClick:()=>{O(!1),U(null),j("")},className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cerrar"})})]})}),H&&i.jsx(Dqe,{factura:H,onClose:()=>Y(null)}),i.jsx(Rqe,{onScan:Jt,isActive:!!r&&a==="trabajar",minChars:3})]})},rC=()=>{var Ze,at,Qe,ze,it,At,er,It,Er,rn,Qr,En,fr,nn,ea,on,In,qr,un,de,pe,_e,Se,Te,Pe,tt,jt,st;$s();const[t,e]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState("en_transito"),[o,l]=S.useState("lista"),[c,u]=S.useState(null),[d,h]=S.useState(0),[p,g]=S.useState(0),[b,w]=S.useState(!1),[_,N]=S.useState(null),[A,j]=S.useState(null),[P,U]=S.useState(null),[G,O]=S.useState(null),[D,I]=S.useState(null),[V,R]=S.useState(!1),[B,F]=S.useState(!1),[ee,Z]=S.useState(""),[ce,ne]=S.useState(""),[ae,me]=S.useState(""),[Ee,ye]=S.useState(""),[H,Y]=S.useState(""),[X,re]=S.useState(""),[se,ke]=S.useState(""),[Ce,xe]=S.useState({metodoPago:"",montoPago:"",estadoPago:"pendiente",referenciaPago:"",notasPago:""}),[Ie,He]=S.useState(!1),[Ue,Me]=S.useState(null),[Be,be]=S.useState(null),[Vt,ht]=S.useState(!1),[Lt,et]=S.useState(""),[Jt,Ve]=S.useState(null),Ft=[{value:"Capital",label:" Capital (Santo Domingo)",color:"blue"},{value:"Sur",label:" Sur",color:"green"},{value:"Cibao",label:" Cibao (Santiago)",color:"purple"},{value:"Este",label:" Este (Punta Cana)",color:"yellow"},{value:"Local",label:" Local (Ban)",color:"orange"}];S.useEffect(()=>{Wt()},[a]),S.useEffect(()=>{if(!Vt||!r)return;const Ae=Ge=>{["INPUT","TEXTAREA"].includes(Ge.target.tagName)||(Ge.key==="Enter"?Lt&&(qt(Lt),et("")):Ge.key.length===1&&et(ct=>ct+Ge.key))};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[Vt,Lt,r]);const qt=async Ae=>{if(Ve(Ae),console.log(" Cdigo escaneado en Almacn RD:",Ae),!r.facturas)return;let Ge=!1,ct=null,St=-1;for(const xt of r.facturas)if(xt.items){const Ct=xt.codigoTracking===Ae||xt.numeroFactura===Ae,Xt=xt.items.map((br,_t)=>({item:br,index:_t})).filter(({item:br})=>br.codigoBarras===Ae||Ct);if(Xt.length>0){const br=Xt.find(({item:_t})=>_t.estado!=="recibido_rd"&&_t.estado!=="entregado");if(br){ct=xt,St=br.index,Ge=!0;break}else if(Xt.length>0){We.info(`Item(s) ya recibido(s) para: ${Ae}`);return}}}if(Ge&&ct)try{const xt=ct.id||ct.facturaId||ct.recoleccionId;if((await wt.post(`/almacen-rd/facturas/${xt}/items/recibir`,{itemIndex:St})).data.success){We.success(` Item recibido: ${ct.codigoTracking} - Item #${St+1}`);const Xt=r.facturas.map(br=>{if((br.id||br.facturaId||br.recoleccionId)===xt){const Yr=[...br.items];Yr[St]={...Yr[St],estado:"recibido_rd"};const Gr=Yr.every($a=>$a.estado==="recibido_rd"||$a.estado==="entregado");return{...br,items:Yr,estado:Gr?"recibida_rd":br.estado,itemsMarcados:(br.itemsMarcados||0)+1}}return br});n({...r,facturas:Xt})}}catch(xt){console.error("Error al recibir item escaneado:",xt),We.error("Error al procesar scan")}else We.error(`Cdigo no encontrado o ya procesado: ${Ae}`)},Wt=async()=>{try{He(!0),Me(null);const Ae=a==="en_transito"?"/almacen-rd/contenedores/en-transito":"/almacen-rd/contenedores/recibidos",Ge=await wt.get(Ae);Ge.data.success&&e(Ge.data.data);const[ct,St]=await Promise.all([wt.get("/almacen-rd/contenedores/en-transito"),wt.get("/almacen-rd/contenedores/recibidos")]);ct.data.success&&h(ct.data.data.length),St.data.success&&g(St.data.data.length)}catch(Ae){Me("Error al cargar los contenedores"),console.error("Error:",Ae)}finally{He(!1)}},nr=async()=>{var Ae,Ge,ct,St;if(r)try{He(!0),Me(null),console.log(" Confirmando recepcin del contenedor:",r.id);const xt=await wt.post(`/almacen-rd/contenedores/${r.id}/confirmar-recepcion`,{notas:ee});if(xt.data.success){if(be("Contenedor recibido exitosamente en RD"),w(!1),Z(""),(Ge=(Ae=xt.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)console.log(" Usando contenedor del response"),n(xt.data.data.contenedor);else{console.log(" Fallback: Consultando endpoint");const Ct=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Ct.data.data)}await Wt()}}catch(xt){Me(((St=(ct=xt.response)==null?void 0:ct.data)==null?void 0:St.message)||"Error al confirmar recepcin"),console.error("Error confirmando recepcin:",xt)}finally{He(!1)}},Xe=async(Ae,Ge)=>{var ct,St,xt,Ct,Xt;if(!(!r||!c))try{He(!0);const br=c.id||c.facturaId,_t=await wt.post(`/almacen-rd/facturas/${br}/items/danado`,{itemIndex:Ae,danado:Ge,notasDano:ce});if(_t.data.success){if(be(Ge?"Item marcado como daado":"Item marcado como normal"),N(null),ne(""),(St=(ct=_t.data)==null?void 0:ct.data)!=null&&St.contenedor)n(_t.data.data.contenedor);else{const Gr=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Gr.data.data)}const Yr=(xt=r.facturas)==null?void 0:xt.find(Gr=>(Gr.id||Gr.facturaId)===br);Yr&&u(Yr)}}catch(br){Me(((Xt=(Ct=br.response)==null?void 0:Ct.data)==null?void 0:Xt.message)||"Error al marcar item"),console.error("Error:",br)}finally{He(!1)}},Kt=async()=>{var Ae,Ge,ct,St;if(!(!r||!A||!ae))try{He(!0);const xt=A.id||A.facturaId,Ct=await wt.post(`/almacen-rd/facturas/${xt}/asignar-ruta`,{ruta:ae});if(Ct.data.success)if(be(`Factura asignada a ruta ${ae}`),j(null),me(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(xt){Me(((St=(ct=xt.response)==null?void 0:ct.data)==null?void 0:St.message)||"Error al asignar ruta"),console.error("Error:",xt)}finally{He(!1)}},kt=async()=>{var Ae,Ge,ct,St;if(!(!P||!ae))try{He(!0);const xt=P.id||P.facturaId,Ct=await wt.put(`/almacen-rd/facturas/${xt}/reasignar-ruta`,{nuevaRuta:ae,motivo:Ee});if(Ct.data.success)if(be(`Factura reasignada a ${ae}`),U(null),me(""),ye(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(xt){Me(((St=(ct=xt.response)==null?void 0:ct.data)==null?void 0:St.message)||"Error al reasignar factura"),console.error("Error:",xt)}finally{He(!1)}},pt=async()=>{var Ae,Ge,ct,St;if(G)try{He(!0);const xt=G.id||G.facturaId,Ct=await wt.delete(`/almacen-rd/facturas/${xt}/ruta`,{data:{motivo:H}});if(Ct.data.success)if(be("Factura quitada de la ruta"),O(null),Y(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(xt){Me(((St=(ct=xt.response)==null?void 0:ct.data)==null?void 0:St.message)||"Error al quitar de ruta"),console.error("Error:",xt)}finally{He(!1)}},Ot=async()=>{var Ae,Ge,ct,St;if(!(!r||!D))try{He(!0);const xt=D.id||D.facturaId,Ct=await wt.post(`/almacen-rd/facturas/${xt}/reportar-incompleta`,{motivo:X,itemsFaltantes:se.split(",").map(Xt=>Xt.trim()).filter(Xt=>Xt)});if(Ct.data.success)if(be("Factura reportada como incompleta"),I(null),re(""),ke(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(xt){Me(((St=(ct=xt.response)==null?void 0:ct.data)==null?void 0:St.message)||"Error al reportar factura"),console.error("Error:",xt)}finally{He(!1)}},Ut=async Ae=>{var Ge,ct;try{He(!0);const St=await wt.get(`/almacen-rd/facturas/${Ae}/detalle`);St.data.success&&(u(St.data.data),R(!0))}catch(St){Me(((ct=(Ge=St.response)==null?void 0:Ge.data)==null?void 0:ct.message)||"Error al cargar el detalle"),console.error("Error:",St)}finally{He(!1)}},Nr=Ae=>{var Ge,ct,St,xt,Ct;u(Ae),xe({metodoPago:((Ge=Ae.pago)==null?void 0:Ge.metodoPago)||"",montoPago:((ct=Ae.pago)==null?void 0:ct.montoPagado)||"",estadoPago:((St=Ae.pago)==null?void 0:St.estado)||"pendiente",referenciaPago:((xt=Ae.pago)==null?void 0:xt.referenciaPago)||"",notasPago:((Ct=Ae.pago)==null?void 0:Ct.notasPago)||""}),F(!0)},or=async()=>{var Ae,Ge;try{He(!0);const ct=c.id||c.facturaId;if((await wt.put(`/almacen-rd/facturas/${ct}/pago`,{estado:Ce.estadoPago,metodoPago:Ce.metodoPago,montoPagado:parseFloat(Ce.montoPago)||0,referenciaPago:Ce.referenciaPago,notasPago:Ce.notasPago})).data.success){if(be("Informacin de pago actualizada"),F(!1),V&&await Ut(ct),r){const xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(xt.data.data)}await Wt()}}catch(ct){Me(((Ge=(Ae=ct.response)==null?void 0:Ae.data)==null?void 0:Ge.message)||"Error al actualizar el pago"),console.error("Error:",ct)}finally{He(!1)}},lt=Ae=>{n(Ae),l("detalle"),u(null)};S.useEffect(()=>{if(Ue||Be){const Ae=setTimeout(()=>{Me(null),be(null)},5e3);return()=>clearTimeout(Ae)}},[Ue,Be]);const lr=({estado:Ae})=>{const Ge={pendiente:"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-400",parcial:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",pagada:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",contraentrega:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400"},ct={pendiente:"Pendiente",parcial:"Pago Parcial",pagada:"Pagada",contraentrega:"Contra Entrega"};return i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Ge[Ae]||Ge.pendiente}`,children:ct[Ae]||Ae})},ve=Ae=>(Ae==null?void 0:Ae.id)||(Ae==null?void 0:Ae.facturaId)||(Ae==null?void 0:Ae.recoleccionId)||null;return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6",children:[i.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(as,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Almacn RD"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestin de contenedores recibidos en Repblica Dominicana"})]})]}),o==="detalle"&&i.jsxs("button",{onClick:()=>{l("lista"),n(null),u(null)},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:[i.jsx(Gl,{size:20}),"Volver"]})]})}),Ue&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-rose-100 border border-rose-400 text-rose-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(bi,{size:20}),i.jsx("span",{children:Ue})]})}),Be&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-emerald-100 border border-emerald-400 text-emerald-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(en,{size:20}),i.jsx("span",{children:Be})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto",children:[o==="lista"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsxs("button",{onClick:()=>s("en_transito"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${a==="en_transito"?"bg-indigo-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(as,{size:20}),"En Trnsito (",d,")"]}),i.jsxs("button",{onClick:()=>s("recibidos"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${a==="recibidos"?"bg-emerald-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(en,{size:20}),"Recibidos (",p,")"]})]}),Ie?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx(ts,{className:"animate-spin text-indigo-600",size:48})}):t.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-12 text-center",children:[i.jsx(Br,{className:"mx-auto text-slate-400 mb-4",size:64}),i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:["No hay contenedores ",a==="recibidos"?"recibidos":"en trnsito"]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(Ae=>{var Ge,ct,St;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow hover:shadow-lg transition p-6",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Zu,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:Ae.numeroContenedor}),i.jsx("span",{className:`text-sm px-2 py-1 rounded ${Ae.estado==="en_transito_rd"?"bg-indigo-100 text-indigo-800":"bg-emerald-100 text-emerald-800"}`,children:Ae.estado==="en_transito_rd"?"En Trnsito":"Recibido"})]})]})}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Facturas:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:((Ge=Ae.estadisticas)==null?void 0:Ge.totalFacturas)||((ct=Ae.facturas)==null?void 0:ct.length)||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Completas:"}),i.jsx("span",{className:"font-semibold text-emerald-600",children:((St=Ae.estadoFacturas)==null?void 0:St.completas)||0})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>lt(Ae),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[i.jsx(Tu,{size:20}),"Ver Detalles"]}),Ae.estado==="en_transito_rd"&&i.jsxs("button",{onClick:()=>{n(Ae),w(!0)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition",children:[i.jsx(en,{size:20}),"Confirmar"]})]})]},Ae.id)})})]}),o==="detalle"&&r&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Zu,{className:"text-indigo-600",size:40}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.numeroContenedor}),i.jsx("span",{className:`text-sm px-3 py-1 rounded inline-block mt-1 ${r.estado==="en_transito_rd"?"bg-indigo-100 text-indigo-800":"bg-emerald-100 text-emerald-800"}`,children:r.estado==="en_transito_rd"?"En Trnsito":"Recibido en RD"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((Ze=r.estadisticas)==null?void 0:Ze.totalFacturas)||((at=r.facturas)==null?void 0:at.length)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Facturas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:((Qe=r.estadoFacturas)==null?void 0:Qe.completas)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Completas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-amber-600",children:((ze=r.estadoFacturas)==null?void 0:ze.incompletas)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Incompletas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:((it=r.estadisticas)==null?void 0:it.totalItems)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Items"})]})]}),r.estado==="en_transito_rd"&&i.jsxs("button",{onClick:()=>w(!0),className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2",children:[i.jsx(en,{size:20}),"Confirmar Recepcin Total"]})]}),r.estado==="en_transito_rd"&&i.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-center justify-between transition border-2 ${Vt?"bg-indigo-50 border-indigo-400":"bg-slate-50 border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:`p-3 rounded-full ${Vt?"bg-indigo-100 text-indigo-600 animate-pulse":"bg-slate-200 text-slate-500"}`,children:[i.jsx(Wl,{size:24})," "]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:"Modo Scanner - Recepcin de Items"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:Vt?"LISTO... Escanea tracking o barcode de item para recibir individualmente.":"Activa para recibir items uno por uno usando el scanner."})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[Jt&&i.jsxs("span",{className:"text-xs bg-white px-2 py-1 rounded border font-mono",children:["ltimo: ",Jt]}),i.jsx("button",{onClick:()=>ht(!Vt),className:`px-4 py-2 rounded-lg font-bold transition ${Vt?"bg-indigo-600 text-white shadow-lg scale-105":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:Vt?"DESACTIVAR SCANNER":"ACTIVAR SCANNER"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:["Facturas del Contenedor (",((At=r.facturas)==null?void 0:At.length)||0,")"]}),r.facturas&&r.facturas.length>0?i.jsx("div",{className:"space-y-3",children:r.facturas.map(Ae=>{var xt,Ct,Xt,br,_t,Yr;const Ge=ve(Ae),ct=Ae.estadoItems||Ae.estadoFactura||Ae.estado||"pendiente",St=ct==="completo"||ct==="completa";return i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:Ae.numeroFactura||Ae.codigoTracking}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${St?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:St?" Completa":" Incompleta"}),i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs font-medium",children:[" ",Ae.itemsMarcados||0,"/",Ae.itemsTotal||((xt=Ae.items)==null?void 0:xt.length)||0]}),Ae.rutaAsignada&&i.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded text-xs font-medium flex items-center gap-1",children:[i.jsx(Fa,{size:14}),Ae.rutaAsignada]}),i.jsx(lr,{estado:((Ct=Ae.pago)==null?void 0:Ct.estado)||"pendiente"})]})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>Ut(Ge),className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition text-sm flex items-center gap-1",children:[i.jsx(Tu,{size:16}),"Detalle"]}),i.jsxs("button",{onClick:()=>u(Ae),className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 transition text-sm flex items-center gap-1",children:[i.jsx(Br,{size:16}),"Items"]}),i.jsxs("button",{onClick:()=>Nr(Ae),disabled:((Xt=Ae.pago)==null?void 0:Xt.estado)==="pagada",className:`px-3 py-1 rounded transition text-sm flex items-center gap-1 ${((br=Ae.pago)==null?void 0:br.estado)==="pagada"?"bg-slate-300 text-slate-500 cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"}`,title:((_t=Ae.pago)==null?void 0:_t.estado)==="pagada"?"Factura ya pagada":"Editar pago",children:[i.jsx(ay,{size:16}),((Yr=Ae.pago)==null?void 0:Yr.estado)==="pagada"?"Pagado":"Pago"]}),r.estado==="recibido_rd"&&St&&i.jsxs(i.Fragment,{children:[Ae.rutaAsignada?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>window.open(`/rutas/${Ae.rutaAsignada}/imprimir`,"_blank"),className:"px-3 py-1 bg-slate-600 text-white rounded hover:bg-slate-700 transition text-sm flex items-center gap-1",title:"Imprimir Ruta",children:[i.jsx(Wl,{size:16}),"Imprimir"]}),i.jsxs("button",{onClick:()=>U(Ae),className:"px-3 py-1 bg-amber-600 text-white rounded hover:bg-amber-700 transition text-sm flex items-center gap-1",children:[i.jsx(V1,{size:16}),"Reasignar"]}),i.jsxs("button",{onClick:()=>O(Ae),className:"px-3 py-1 bg-rose-600 text-white rounded hover:bg-rose-700 transition text-sm flex items-center gap-1",children:[i.jsx(Jn,{size:16}),"Quitar"]})]}):i.jsxs("button",{onClick:()=>j(Ae),className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition text-sm flex items-center gap-1",children:[i.jsx(Fa,{size:16}),"Asignar"]}),i.jsxs("button",{onClick:()=>I(Ae),className:"px-3 py-1 bg-amber-600 text-white rounded hover:bg-amber-700 transition text-sm flex items-center gap-1",children:[i.jsx(bi,{size:16}),"Reportar"]})]})]})]})},Ge)})}):i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No hay facturas en este contenedor"})]}),c&&!V&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Items de ",c.numeroFactura||c.codigoTracking]}),i.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cerrar"})]}),i.jsx("div",{className:"space-y-3",children:c.items&&c.items.length>0?c.items.map((Ae,Ge)=>i.jsx("div",{className:`border rounded-lg p-4 ${Ae.danado?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-200 dark:border-slate-700"}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-slate-500",children:["#",Ge+1]}),i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:Ae.descripcion||Ae.producto||"Sin descripcin"}),Ae.danado&&i.jsx("span",{className:"px-2 py-1 bg-rose-100 text-rose-800 rounded text-xs font-medium",children:" DAADO"})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Cantidad: ",Ae.cantidad]}),Ae.notasDano&&i.jsxs("p",{className:"mt-1 text-rose-600 dark:text-rose-400",children:[" ",Ae.notasDano]})]})]}),r.estado==="recibido_rd"&&i.jsx("button",{onClick:()=>N({item:Ae,itemIndex:Ge,danado:!Ae.danado}),className:`px-3 py-1 rounded transition text-sm ${Ae.danado?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-rose-600 text-white hover:bg-rose-700"}`,children:Ae.danado?" Marcar Normal":" Marcar Daado"})]})},Ge)):i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No hay items en esta factura"})})]})]})]}),b&&r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(en,{className:"text-emerald-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Confirmar Recepcin"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Confirma que has recibido el contenedor ",i.jsx("strong",{children:r.numeroContenedor})," en el almacn de Repblica Dominicana."]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas (opcional)"}),i.jsx("textarea",{value:ee,onChange:Ae=>Z(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Observaciones sobre la recepcin..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{w(!1),Z("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:nr,disabled:Ie,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:Ie?"Confirmando...":"Confirmar Recepcin"})]})]})}),_&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(bi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:_.danado?"Marcar Item como Daado":"Marcar Item como Normal"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Item: ",i.jsx("strong",{children:_.item.descripcion})]}),_.danado&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin del dao *"}),i.jsx("textarea",{value:ce,onChange:Ae=>ne(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Describe el dao encontrado..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{N(null),ne("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:()=>Xe(_.itemIndex,_.danado),disabled:Ie||_.danado&&!ce,className:`flex-1 px-4 py-2 text-white rounded-lg disabled:opacity-50 ${_.danado?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:Ie?"Guardando...":"Confirmar"})]})]})}),A&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Fa,{className:"text-emerald-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Asignar a Ruta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Factura: ",i.jsx("strong",{children:A.numeroFactura||A.codigoTracking})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Ruta *"}),i.jsxs("select",{value:ae,onChange:Ae=>me(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),Ft.map(Ae=>i.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{j(null),me("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:Kt,disabled:Ie||!ae,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:Ie?"Asignando...":"Asignar"})]})]})}),P&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(V1,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reasignar Ruta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Factura: ",i.jsx("strong",{children:P.numeroFactura||P.codigoTracking})]}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Ruta actual: ",i.jsx("strong",{children:P.rutaAsignada})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nueva Ruta *"}),i.jsxs("select",{value:ae,onChange:Ae=>me(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),Ft.filter(Ae=>Ae.value!==P.rutaAsignada).map(Ae=>i.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Motivo (opcional)"}),i.jsx("textarea",{value:Ee,onChange:Ae=>ye(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"2",placeholder:"Razn de la reasignacin..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{U(null),me(""),ye("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:kt,disabled:Ie||!ae,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50",children:Ie?"Reasignando...":"Reasignar"})]})]})}),G&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Jn,{className:"text-rose-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Quitar de Ruta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Deseas quitar la factura ",i.jsx("strong",{children:G.numeroFactura||G.codigoTracking})," de su ruta actual?"]}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Ruta actual: ",i.jsx("strong",{children:G.rutaAsignada})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Motivo (opcional)"}),i.jsx("textarea",{value:H,onChange:Ae=>Y(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"2",placeholder:"Razn para quitar de la ruta..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{O(null),Y("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:pt,disabled:Ie,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 disabled:opacity-50",children:Ie?"Quitando...":"Quitar de Ruta"})]})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(bi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reportar Factura Incompleta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Factura: ",i.jsx("strong",{children:D.numeroFactura||D.codigoTracking})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Motivo *"}),i.jsx("textarea",{value:X,onChange:Ae=>re(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Describe por qu la factura est incompleta..."})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Items Faltantes (separados por coma)"}),i.jsx("input",{type:"text",value:se,onChange:Ae=>ke(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: Caja 1, TV Samsung, etc."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{I(null),re(""),ke("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:Ot,disabled:Ie||!X,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50",children:Ie?"Reportando...":"Reportar"})]})]})}),V&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full my-8",children:[i.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Detalle de Factura"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:c.codigoTracking})]}),i.jsx("button",{onClick:()=>{R(!1),u(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(bl,{size:18}),"Remitente"]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",((er=c.remitente)==null?void 0:er.nombre)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(vl,{size:14}),((It=c.remitente)==null?void 0:It.telefono)||"N/A"]}),((Er=c.remitente)==null?void 0:Er.email)&&i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(uh,{size:14}),c.remitente.email]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-start gap-2",children:[i.jsx(Fa,{size:14,className:"mt-1 flex-shrink-0"}),((rn=c.remitente)==null?void 0:rn.direccion)||"N/A"]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(bl,{size:18}),"Destinatario"]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",((Qr=c.destinatario)==null?void 0:Qr.nombre)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(vl,{size:14}),((En=c.destinatario)==null?void 0:En.telefono)||"N/A"]}),((fr=c.destinatario)==null?void 0:fr.email)&&i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(uh,{size:14}),c.destinatario.email]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-start gap-2",children:[i.jsx(Fa,{size:14,className:"mt-1 flex-shrink-0"}),((nn=c.destinatario)==null?void 0:nn.direccion)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Zona:"})," ",((ea=c.destinatario)==null?void 0:ea.zona)||"N/A"]})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Br,{size:18}),"Items (",((on=c.items)==null?void 0:on.length)||0,")"]}),i.jsx("div",{className:"space-y-2",children:c.items&&c.items.length>0?c.items.map((Ae,Ge)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:Ae.descripcion||Ae.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",Ae.cantidad]})]}),i.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["$",Ae.precio]})]},Ge)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-4",children:"No hay items"})})]}),i.jsxs("div",{className:"mt-6 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Ul,{size:18}),"Facturacin"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["$",(((In=c.facturacion)==null?void 0:In.subtotal)||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"ITBIS (18%):"}),i.jsxs("span",{children:["$",(((qr=c.facturacion)==null?void 0:qr.itbis)||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900 dark:text-white border-t border-slate-300 dark:border-slate-600 pt-2",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",(((un=c.facturacion)==null?void 0:un.total)||0).toFixed(2)," ",((de=c.facturacion)==null?void 0:de.moneda)||"USD"]})]})]})]}),i.jsxs("div",{className:"mt-6 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(ay,{size:18}),"Informacin de Pago"]}),((pe=c.pago)==null?void 0:pe.estado)!=="pagada"&&i.jsxs("button",{onClick:()=>Nr(c),className:"px-3 py-1 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 text-sm flex items-center gap-1",children:[i.jsx(V1,{size:14}),"Editar"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Estado:"}),i.jsx(lr,{estado:((_e=c.pago)==null?void 0:_e.estado)||"pendiente"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Mtodo de Pago:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((Se=c.pago)==null?void 0:Se.metodoPago)||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Referencia:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((Te=c.pago)==null?void 0:Te.referenciaPago)||"N/A"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Monto Pagado:"}),i.jsxs("p",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:["$",(((Pe=c.pago)==null?void 0:Pe.montoPagado)||0).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Monto Pendiente:"}),i.jsxs("p",{className:"font-medium text-rose-600 dark:text-rose-400",children:["$",(((tt=c.pago)==null?void 0:tt.montoPendiente)||0).toFixed(2)]})]})]}),((jt=c.pago)==null?void 0:jt.notasPago)&&i.jsx("div",{className:"mt-3 p-3 bg-slate-100 dark:bg-slate-700 rounded",children:i.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Notas:"})," ",c.pago.notasPago]})})]})]})]}),i.jsx("div",{className:"flex justify-end p-6 border-t border-slate-200 dark:border-slate-700",children:i.jsx("button",{onClick:()=>{R(!1),u(null)},className:"px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Cerrar"})})]})}),B&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full",children:[i.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Editar Informacin de Pago"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:c.codigoTracking||c.numeroFactura})]}),i.jsx("button",{onClick:()=>{F(!1),xe({metodoPago:"",montoPago:"",estadoPago:"pendiente",referenciaPago:"",notasPago:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Jn,{size:24})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total de la Factura"}),i.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["$",(((st=c.facturacion)==null?void 0:st.total)||0).toFixed(2)]})]}),Ue&&i.jsx("div",{className:"mb-4 p-3 bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400 rounded-lg text-sm",children:Ue}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Estado de Pago *"}),i.jsxs("select",{value:Ce.estadoPago,onChange:Ae=>xe({...Ce,estadoPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"pendiente",children:" Pago al recibir"}),i.jsx("option",{value:"parcial",children:" Pago Parcial"}),i.jsx("option",{value:"pagada",children:" Ya pagado"}),i.jsx("option",{value:"contraentrega",children:" Contra Entrega"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto Pagado"}),i.jsx("input",{type:"number",step:"0.01",value:Ce.montoPago,onChange:Ae=>xe({...Ce,montoPago:Ae.target.value}),className:`w-full px-3 py-2 border dark:bg-slate-700 dark:text-white rounded-lg ${!Ce.montoPago||Ce.montoPago===""?"border-rose-500 focus:border-rose-500 focus:ring-rose-500":"border-slate-300 dark:border-slate-600"}`,placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mtodo de Pago"}),i.jsxs("select",{value:Ce.metodoPago,onChange:Ae=>xe({...Ce,metodoPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),i.jsx("option",{value:"efectivo",children:"Efectivo"}),i.jsx("option",{value:"transferencia",children:"Transferencia"}),i.jsx("option",{value:"tarjeta",children:"Tarjeta"}),i.jsx("option",{value:"cheque",children:"Cheque"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Referencia/Nmero de Transaccin"}),i.jsx("input",{type:"text",value:Ce.referenciaPago,onChange:Ae=>xe({...Ce,referenciaPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: TRF-12345"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas"}),i.jsx("textarea",{value:Ce.notasPago,onChange:Ae=>xe({...Ce,notasPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Notas adicionales sobre el pago..."})]})]})]}),i.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>{F(!1),xe({metodoPago:"",montoPago:"",estadoPago:"pendiente",referenciaPago:"",notasPago:""})},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:or,disabled:Ie,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 flex items-center justify-center gap-2",children:Ie?i.jsxs(i.Fragment,{children:[i.jsx(ts,{className:"animate-spin",size:18}),"Guardando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(en,{size:18}),"Guardar"]})})]})]})})]})},Mqe=({factura:t,onClose:e,onUpdate:r})=>{const[n,a]=S.useState(!1),[s,o]=S.useState(t.facturacion||{}),[l,c]=S.useState(t.items||[]),u=async()=>{var p;const d=((p=t.facturacion)==null?void 0:p.estadoPago)||t.estadoPago,h=s.estadoPago;if(d==="pagada"&&h!=="pagada"){alert(" No se puede cambiar el estado de una factura que ya est pagada.");return}a(!0);try{const g=localStorage.getItem("token"),_=await(await fetch(`https://proyecto-envios-production.up.railway.app/api/facturacion/recolecciones/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify({...s,items:l})})).json();_.success?(alert("Facturacin actualizada exitosamente"),r&&r(),e()):alert("Error: "+(_.error||"No se pudo guardar"))}catch(g){console.error("Error guardando facturacin:",g),alert("Error al guardar los cambios")}finally{a(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800 z-10",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Gestionar Factura - ",t.codigoTracking||t.id]}),i.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:i.jsx(Jn,{size:24})})]}),i.jsx("div",{className:"p-6",children:i.jsx(Iae,{items:l,onItemsChange:c,facturacion:s,onFacturacionChange:o,recoleccionId:t.id,mostrarPagos:!0})}),i.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 sticky bottom-0",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",disabled:n,children:"Cancelar"}),i.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-indigo-400 transition",disabled:n,children:[i.jsx(y3,{size:18}),n?"Guardando...":"Guardar Cambios"]})]})]})})},U5=()=>{var ce,ne,ae,me;const[t,e]=S.useState([]),[r,n]=S.useState("todos"),[a,s]=S.useState([]),[o,l]=S.useState(!0),[c,u]=S.useState({}),[d,h]=S.useState(!1),[p,g]=S.useState(null),[b,w]=S.useState(""),[_,N]=S.useState(""),[A,j]=S.useState(""),[P,U]=S.useState(""),[G,O]=S.useState(!1),[D,I]=S.useState(null);S.useEffect(()=>{R(),V()},[r]);const V=async()=>{try{const Ee=await wt.get("/contenedores/disponibles");s(Ee.data.data||[])}catch(Ee){console.error("Error al cargar contenedores:",Ee)}},R=async()=>{l(!0);try{const Ee=r==="todos"?"/facturacion/pendientes":`/facturacion/pendientes?contenedorId=${r}`,ye=await wt.get(Ee);e(ye.data.data||[]);const H=(ye.data.data||[]).reduce((X,re)=>{var se;return X+(((se=re.facturacion)==null?void 0:se.totalFactura)||0)},0),Y=(ye.data.data||[]).reduce((X,re)=>{var se;return X+(((se=re.facturacion)==null?void 0:se.montoPagado)||0)},0);u({totalFacturado:H,totalPagado:Y,saldoPendiente:H-Y,totalFacturas:(ye.data.data||[]).length})}catch(Ee){console.error("Error al cargar facturas pendientes:",Ee)}finally{l(!1)}},B=Ee=>{g(Ee),w(""),N(""),j(""),U(""),h(!0)},F=Ee=>{I(Ee),O(!0)},ee=async()=>{var Ee,ye;if(p){if(!b||parseFloat(b)<=0||!_){alert("Por favor ingrese un monto y seleccione un mtodo de pago vlidos.");return}try{l(!0),await wt.post(`/facturacion/recolecciones/${p.id}/pago`,{montoPago:parseFloat(b),metodoPago:_,referencia:A,notas:P}),alert("Pago registrado exitosamente. La lista se actualizar."),h(!1),R()}catch(H){console.error("Error al registrar pago:",H),alert(((ye=(Ee=H.response)==null?void 0:Ee.data)==null?void 0:ye.error)||"Error al registrar el pago.")}finally{l(!1)}}},Z=Ee=>{const ye={pagada:"bg-emerald-100 text-emerald-800",pendiente_pago:"bg-rose-100 text-rose-800",pago_parcial:"bg-amber-100 text-amber-800",cobro_contra_entrega:"bg-indigo-100 text-indigo-800"},H={pagada:"Pagada",pendiente_pago:"Pendiente",pago_parcial:"Parcial",cobro_contra_entrega:"Contra Entrega"};return i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ye[Ee]||"bg-slate-100 text-slate-800"}`,children:H[Ee]||Ee})};return o&&t.length===0?i.jsx("div",{className:"text-center py-12",children:"Cargando facturas pendientes..."}):i.jsxs("div",{className:"max-w-7xl mx-auto p-6 dark:text-white",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Facturas Pendientes de Pago"}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-indigo-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Facturado"}),i.jsxs("p",{className:"text-2xl font-bold mt-1",children:["$",(c.totalFacturado||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-emerald-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Pagado"}),i.jsxs("p",{className:"text-2xl font-bold mt-1 text-emerald-600",children:["$",(c.totalPagado||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-rose-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Saldo Pendiente"}),i.jsxs("p",{className:"text-2xl font-bold mt-1 text-rose-600",children:["$",(c.saldoPendiente||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-amber-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"# Facturas"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:c.totalFacturas||0})]})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx(Ure,{className:"w-5 h-5 text-slate-500 dark:text-slate-400"}),i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Filtrar por Contenedor:"}),i.jsxs("select",{value:r,onChange:Ee=>n(Ee.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"todos",children:"Todos los Contenedores"}),a.map(Ee=>i.jsxs("option",{value:Ee.id,children:[Ee.numeroContenedor," (",Ee.facturasPendientes," facturas)"]},Ee.id))]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-600",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Tracking"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Total"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Pagado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Pendiente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Estado Pago"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Accin"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-600",children:t.length===0&&!o?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"No hay facturas con saldo pendiente para mostrar."})}):t.map(Ee=>{var ye,H,Y,X,re,se,ke,Ce,xe,Ie;return i.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition duration-150",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-white",children:Ee.codigoTracking}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:((ye=Ee.destinatario)==null?void 0:ye.nombre)||Ee.cliente||"N/A"}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-indigo-600 dark:text-indigo-400",children:["$",(((H=Ee.facturacion)==null?void 0:H.totalFactura)||0).toLocaleString("es-DO")]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-emerald-600 dark:text-emerald-400",children:["$",(((Y=Ee.facturacion)==null?void 0:Y.montoPagado)||0).toLocaleString("es-DO")]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold text-rose-600 dark:text-rose-400",children:["$",((((X=Ee.facturacion)==null?void 0:X.totalFactura)||0)-(((re=Ee.facturacion)==null?void 0:re.montoPagado)||0)).toLocaleString("es-DO")]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Z(((se=Ee.facturacion)==null?void 0:se.estadoPago)||"pendiente_pago")}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>F(Ee),className:"p-1 text-indigo-600 hover:text-indigo-800 hover:bg-indigo-50 rounded transition",title:"Gestionar Factura",children:i.jsx(V1,{size:18})}),i.jsxs("button",{onClick:()=>B(Ee),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition disabled:bg-slate-400 disabled:cursor-not-allowed",disabled:o||((ke=Ee.facturacion)==null?void 0:ke.estadoPago)==="pagada"||(((Ce=Ee.facturacion)==null?void 0:Ce.totalFactura)||0)-(((xe=Ee.facturacion)==null?void 0:xe.montoPagado)||0)<=0,title:((Ie=Ee.facturacion)==null?void 0:Ie.estadoPago)==="pagada"?"Factura ya pagada":"Registrar Pago",children:[i.jsx(Ul,{className:"w-4 h-4 mr-1"}),"Registrar Pago"]})]})]},Ee.id||Ee.codigoTracking||Math.random())})})]})})}),d&&p&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-900 dark:text-white",children:"Registrar Pago"}),i.jsxs("div",{className:"space-y-4 mb-6 bg-slate-50 dark:bg-slate-700 p-4 rounded-lg",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 flex items-center",children:[i.jsx(Au,{className:"w-5 h-5 mr-2"}),"Factura: ",p.codigoTracking||p.id]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cliente"}),i.jsx("p",{className:"font-medium",children:((ce=p.destinatario)==null?void 0:ce.nombre)||p.cliente||"N/A"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Total a Cobrar"}),i.jsxs("p",{className:"font-bold text-lg text-indigo-600 dark:text-indigo-400",children:["$",(((ne=p.facturacion)==null?void 0:ne.totalFactura)||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Saldo Pendiente"}),i.jsxs("p",{className:"font-bold text-lg text-rose-600 dark:text-rose-400",children:["$",((((ae=p.facturacion)==null?void 0:ae.totalFactura)||0)-(((me=p.facturacion)==null?void 0:me.montoPagado)||0)).toLocaleString("es-DO")]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto del Pago"}),i.jsxs("select",{value:_,onChange:Ee=>N(Ee.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"Seleccione..."}),i.jsx("option",{value:"efectivo",children:"Efectivo"}),i.jsx("option",{value:"transferencia",children:"Transferencia"}),i.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Referencia (Opcional)"}),i.jsx("input",{type:"text",value:A,onChange:Ee=>j(Ee.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: 123456789"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas"}),i.jsx("textarea",{value:P,onChange:Ee=>U(Ee.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"2",placeholder:"Observaciones..."})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",disabled:o,children:"Cancelar"}),i.jsx("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:bg-slate-400",disabled:o,children:o?"Procesando...":"Confirmar Pago"})]})]})})}),G&&D&&i.jsx(Mqe,{factura:D,onClose:()=>O(!1),onUpdate:R})]})},dle=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[i.jsx(Zt.ellipse,{cx:"100",cy:"160",rx:"40",ry:"8",fill:"#000",opacity:"0.1",animate:{scale:[1,.9,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),i.jsx("rect",{x:"70",y:"80",width:"60",height:"60",fill:"#FFA500",rx:"4"}),i.jsx("path",{d:"M 70 80 L 85 65 L 145 65 L 130 80 Z",fill:"#FFB833"}),i.jsx("path",{d:"M 130 80 L 145 65 L 145 125 L 130 140 Z",fill:"#FF8C00"}),i.jsx("rect",{x:"70",y:"105",width:"60",height:"8",fill:"#FFD700",opacity:"0.6"}),i.jsx("rect",{x:"95",y:"80",width:"10",height:"60",fill:"#FFD700",opacity:"0.6"})]}),i.jsxs(Zt.g,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:[i.jsx("circle",{cx:"150",cy:"50",r:"15",fill:"#fff",stroke:"#FFA500",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"50",x2:"150",y2:"42",stroke:"#FFA500",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"150",y1:"50",x2:"155",y2:"50",stroke:"#FFA500",strokeWidth:"2",strokeLinecap:"round"})]}),[0,1,2].map(e=>i.jsx(Zt.circle,{cx:40+e*15,cy:"180",r:"4",fill:"#FFA500",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:1.5,repeat:1/0,delay:e*.2}},e))]}),Lqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,repeat:1/0,repeatDelay:3},children:[i.jsx("rect",{x:"70",y:"80",width:"60",height:"60",fill:"#4CAF50",rx:"4"}),i.jsx("path",{d:"M 70 80 L 85 65 L 145 65 L 130 80 Z",fill:"#66BB6A"}),i.jsx("path",{d:"M 130 80 L 145 65 L 145 125 L 130 140 Z",fill:"#388E3C"})]}),i.jsx(Zt.g,{initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.5,delay:.3,repeat:1/0,repeatDelay:3},children:i.jsx(Zt.path,{d:"M 85 110 L 95 120 L 115 95",stroke:"#fff",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),[...Array(8)].map((e,r)=>{const n=r*360/8,a=100+Math.cos(n*Math.PI/180)*50,s=110+Math.sin(n*Math.PI/180)*50;return i.jsx(Zt.circle,{cx:100,cy:110,r:"3",fill:"#4CAF50",initial:{cx:100,cy:110,opacity:0},animate:{cx:a,cy:s,opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,repeatDelay:2,delay:r*.1}},r)})]}),Fqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{animate:{scale:[1,1.02,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[i.jsx("rect",{x:"30",y:"60",width:"140",height:"100",fill:"#2196F3",rx:"4",stroke:"#1976D2",strokeWidth:"3"}),i.jsx("line",{x1:"100",y1:"60",x2:"100",y2:"160",stroke:"#1976D2",strokeWidth:"2"}),i.jsx("rect",{x:"95",y:"105",width:"10",height:"15",fill:"#1565C0",rx:"2"})]}),i.jsxs(Zt.g,{animate:{rotate:[0,5,0,-5,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"150",y:"40",width:"30",height:"20",fill:"#fff",stroke:"#333",strokeWidth:"1"}),i.jsx("rect",{x:"150",y:"40",width:"12",height:"8",fill:"#1E3A8A"}),i.jsx("line",{x1:"150",y1:"48",x2:"180",y2:"48",stroke:"#DC2626",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"52",x2:"180",y2:"52",stroke:"#DC2626",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"56",x2:"180",y2:"56",stroke:"#DC2626",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"40",x2:"150",y2:"20",stroke:"#666",strokeWidth:"2"})]}),[0,1,2].map(e=>i.jsx(Zt.g,{animate:{y:[0,-3,0]},transition:{duration:2,repeat:1/0,delay:e*.3},children:i.jsx("rect",{x:45+e*35,y:120-e*10,width:"25",height:"25",fill:"#FFB74D",stroke:"#F57C00",strokeWidth:"1",rx:"2"})},e)),i.jsx("text",{x:"100",y:"180",fontSize:"16",fontWeight:"bold",fill:"#2196F3",textAnchor:"middle",children:"USA"})]}),Bqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{animate:{rotate:[0,-2,2,-2,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"70",y:"100",width:"60",height:"40",fill:"#FF9800",rx:"4"}),i.jsx(Zt.path,{d:"M 70 100 L 60 85 L 120 85 L 110 100",fill:"#FFB74D",animate:{y:[-5,0,-5]},transition:{duration:1.5,repeat:1/0}}),i.jsx(Zt.path,{d:"M 130 100 L 140 85 L 120 85 L 110 100",fill:"#FFA726",animate:{y:[-3,2,-3]},transition:{duration:1.5,repeat:1/0,delay:.2}})]}),i.jsxs(Zt.g,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:[i.jsx("path",{d:"M 150 50 L 170 80 L 130 80 Z",fill:"#FFC107",stroke:"#F57C00",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"60",x2:"150",y2:"70",stroke:"#F57C00",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("circle",{cx:"150",cy:"75",r:"2",fill:"#F57C00"})]}),[0,1].map(e=>i.jsx(Zt.rect,{x:40+e*25,y:135,width:"18",height:"18",fill:"none",stroke:"#FF9800",strokeWidth:"2",strokeDasharray:"3 3",animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,delay:e*.5},rx:"2"},e))]}),Uqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[[0,1,2].map(e=>i.jsx(Zt.path,{d:`M ${20+e*60} 140 Q ${40+e*60} 135 ${60+e*60} 140 T ${100+e*60} 140`,stroke:"#64B5F6",strokeWidth:"3",fill:"none",animate:{x:[-20,20]},transition:{duration:3,repeat:1/0,ease:"linear",delay:e*.3}},e)),i.jsxs(Zt.g,{animate:{y:[0,-8,0],rotate:[-1,1,-1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[i.jsx("path",{d:"M 60 100 L 140 100 L 135 120 L 65 120 Z",fill:"#1976D2",stroke:"#0D47A1",strokeWidth:"2"}),i.jsx("rect",{x:"80",y:"70",width:"40",height:"30",fill:"#2196F3",stroke:"#1565C0",strokeWidth:"2",rx:"2"}),i.jsx("rect",{x:"130",y:"85",width:"8",height:"15",fill:"#F44336",rx:"1"})]}),i.jsx(Zt.g,{animate:{x:[0,10,0],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:i.jsx("path",{d:"M 30 50 L 50 50 L 45 45 M 50 50 L 45 55",stroke:"#2196F3",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),i.jsx(Zt.circle,{cx:"170",cy:"30",r:"15",fill:"#FDD835",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0}}),[0,1,2,3].map(e=>{const r=e*90,n=170+Math.cos(r*Math.PI/180)*18,a=30+Math.sin(r*Math.PI/180)*18,s=170+Math.cos(r*Math.PI/180)*25,o=30+Math.sin(r*Math.PI/180)*25;return i.jsx(Zt.line,{x1:n,y1:a,x2:s,y2:o,stroke:"#FDD835",strokeWidth:"2",strokeLinecap:"round",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,delay:e*.2}},e)}),i.jsx("text",{x:"100",y:"180",fontSize:"14",fontWeight:"bold",fill:"#2196F3",textAnchor:"middle",children:"USA  RD"})]}),zqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,repeat:1/0,repeatDelay:4},children:[i.jsx("rect",{x:"50",y:"80",width:"100",height:"80",fill:"#4CAF50",stroke:"#388E3C",strokeWidth:"2",rx:"4"}),i.jsx("path",{d:"M 40 80 L 100 50 L 160 80 Z",fill:"#66BB6A",stroke:"#388E3C",strokeWidth:"2"}),i.jsx("rect",{x:"80",y:"120",width:"40",height:"40",fill:"#2E7D32",rx:"2"}),i.jsx("rect",{x:"60",y:"95",width:"15",height:"15",fill:"#A5D6A7",rx:"1"}),i.jsx("rect",{x:"125",y:"95",width:"15",height:"15",fill:"#A5D6A7",rx:"1"})]}),i.jsxs(Zt.g,{animate:{rotate:[0,3,0,-3,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"150",y:"30",width:"30",height:"20",fill:"#fff",stroke:"#333",strokeWidth:"1"}),i.jsx("rect",{x:"163",y:"30",width:"4",height:"20",fill:"#002D62"}),i.jsx("rect",{x:"150",y:"38",width:"30",height:"4",fill:"#002D62"}),i.jsx("rect",{x:"150",y:"30",width:"13",height:"8",fill:"#CE1126"}),i.jsx("rect",{x:"167",y:"30",width:"13",height:"8",fill:"#002D62"}),i.jsx("rect",{x:"150",y:"42",width:"13",height:"8",fill:"#002D62"}),i.jsx("rect",{x:"167",y:"42",width:"13",height:"8",fill:"#CE1126"}),i.jsx("line",{x1:"150",y1:"30",x2:"150",y2:"15",stroke:"#666",strokeWidth:"2"})]}),i.jsx(Zt.g,{animate:{x:[-30,0],y:[0,20]},transition:{duration:2,repeat:1/0,repeatDelay:2},children:i.jsx("rect",{x:"60",y:"100",width:"25",height:"25",fill:"#FFB74D",stroke:"#F57C00",strokeWidth:"2",rx:"2"})}),i.jsxs(Zt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:1.5,type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("circle",{cx:"30",cy:"40",r:"18",fill:"#4CAF50"}),i.jsx("path",{d:"M 22 40 L 28 46 L 38 34",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})]}),Vqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[i.jsx("rect",{x:"60",y:"60",width:"80",height:"100",fill:"#fff",stroke:"#FF9800",strokeWidth:"3",rx:"4"}),i.jsx("line",{x1:"75",y1:"80",x2:"125",y2:"80",stroke:"#FF9800",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"95",x2:"115",y2:"95",stroke:"#FFB74D",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"110",x2:"120",y2:"110",stroke:"#FFB74D",strokeWidth:"2"})]}),i.jsxs(Zt.g,{animate:{rotate:[0,180,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[i.jsx("path",{d:"M 145 40 L 165 40 L 155 55 L 165 70 L 145 70 L 155 55 Z",fill:"#FFC107",stroke:"#F57C00",strokeWidth:"2"}),i.jsx(Zt.rect,{x:"150",y:"42",width:"10",height:"8",fill:"#F57C00",animate:{height:[8,0],y:[42,50]},transition:{duration:3,repeat:1/0}})]}),i.jsx(Zt.text,{x:"100",y:"185",fontSize:"24",fontWeight:"bold",fill:"#FF9800",textAnchor:"middle",animate:{opacity:[.5,1,.5],scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},children:"?"})]}),$qe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("rect",{x:"60",y:"60",width:"80",height:"100",fill:"#fff",stroke:"#4CAF50",strokeWidth:"3",rx:"4"}),i.jsx("line",{x1:"75",y1:"80",x2:"125",y2:"80",stroke:"#66BB6A",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"95",x2:"115",y2:"95",stroke:"#A5D6A7",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"110",x2:"120",y2:"110",stroke:"#A5D6A7",strokeWidth:"2"})]}),i.jsxs(Zt.g,{initial:{scale:0,rotate:-45},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("circle",{cx:"110",cy:"120",r:"25",fill:"none",stroke:"#4CAF50",strokeWidth:"4",strokeDasharray:"5 3"}),i.jsx("text",{x:"110",y:"125",fontSize:"12",fontWeight:"bold",fill:"#4CAF50",textAnchor:"middle",children:"OK"})]}),[0,1,2].map(e=>i.jsx(Zt.path,{d:"M 0 0 L 4 4 L 10 -2",stroke:"#4CAF50",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",initial:{x:100,y:100,opacity:0},animate:{x:[100,120+e*15],y:[100,40-e*10],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:e*.4}},e))]}),Hqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{animate:{x:[0,20,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[i.jsx("rect",{x:"70",y:"90",width:"30",height:"30",fill:"#2196F3",rx:"3"}),i.jsx("rect",{x:"75",y:"95",width:"10",height:"10",fill:"#64B5F6",rx:"1"}),i.jsx("rect",{x:"100",y:"85",width:"45",height:"35",fill:"#1976D2",rx:"3"}),i.jsx(Zt.circle,{cx:"85",cy:"125",r:"8",fill:"#333",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),i.jsx("circle",{cx:"85",cy:"125",r:"3",fill:"#666"}),i.jsx(Zt.circle,{cx:"130",cy:"125",r:"8",fill:"#333",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),i.jsx("circle",{cx:"130",cy:"125",r:"3",fill:"#666"})]}),i.jsx("line",{x1:"20",y1:"135",x2:"180",y2:"135",stroke:"#999",strokeWidth:"3"}),[0,1,2,3].map(e=>i.jsx(Zt.line,{x1:40+e*40,y1:"135",x2:55+e*40,y2:"135",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",animate:{x:[-20,20],opacity:[1,0,1]},transition:{duration:1.5,repeat:1/0,ease:"linear",delay:e*.2}},e)),[0,1].map(e=>i.jsx(Zt.ellipse,{cx:55-e*10,cy:95+e*10,rx:"12",ry:"6",fill:"#E3F2FD",animate:{x:[-20,-40],opacity:[.8,0]},transition:{duration:1,repeat:1/0,delay:e*.3}},e)),i.jsxs(Zt.g,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},children:[i.jsx("path",{d:"M 165 50 C 165 40 155 40 155 50 C 155 55 165 65 165 65 C 165 65 175 55 175 50 C 175 40 165 40 165 50 Z",fill:"#F44336",stroke:"#C62828",strokeWidth:"1"}),i.jsx("circle",{cx:"165",cy:"50",r:"3",fill:"#fff"})]})]}),qqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"70",y:"80",width:"60",height:"60",fill:"#4CAF50",rx:"4"}),i.jsx("path",{d:"M 70 80 L 85 65 L 145 65 L 130 80 Z",fill:"#66BB6A"}),i.jsx("path",{d:"M 130 80 L 145 65 L 145 125 L 130 140 Z",fill:"#388E3C"}),i.jsx("rect",{x:"95",y:"80",width:"10",height:"60",fill:"#FFD700",opacity:"0.8"}),i.jsx("rect",{x:"70",y:"105",width:"60",height:"10",fill:"#FFD700",opacity:"0.8"})]}),i.jsxs("g",{children:[i.jsx("rect",{x:"140",y:"110",width:"40",height:"35",fill:"#FFF59D",stroke:"#F57C00",strokeWidth:"2",rx:"2"}),i.jsx("path",{d:"M 135 110 L 160 90 L 185 110 Z",fill:"#FF6F00",stroke:"#E65100",strokeWidth:"2"}),i.jsx("rect",{x:"155",y:"125",width:"10",height:"20",fill:"#8D6E63"})]}),i.jsx(Zt.g,{animate:{x:[0,10,0]},transition:{duration:1.5,repeat:1/0},children:i.jsx("path",{d:"M 110 100 L 130 100 L 125 95 M 130 100 L 125 105",stroke:"#4CAF50",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),[0,1,2,3].map(e=>{const r=e*90,n=100+Math.cos(r*Math.PI/180)*55,a=110+Math.sin(r*Math.PI/180)*55;return i.jsx(Zt.path,{d:"M 0 -4 L 1 -1 L 4 0 L 1 1 L 0 4 L -1 1 L -4 0 L -1 -1 Z",fill:"#FFC107",initial:{x:n,y:a,scale:0},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:e*.3}},e)})]}),Gqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",repeat:1/0,repeatDelay:4},children:[i.jsx("rect",{x:"70",y:"110",width:"60",height:"40",fill:"#4CAF50",rx:"4"}),i.jsx(Zt.path,{d:"M 70 110 L 60 95 L 120 95 L 110 110",fill:"#66BB6A",animate:{y:[-10,-15,-10]},transition:{duration:2,repeat:1/0}}),i.jsx(Zt.path,{d:"M 130 110 L 140 95 L 120 95 L 110 110",fill:"#81C784",animate:{y:[-10,-15,-10]},transition:{duration:2,repeat:1/0,delay:.2}})]}),i.jsxs(Zt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.5,type:"spring",stiffness:200,damping:10,repeat:1/0,repeatDelay:3.5},children:[i.jsx("circle",{cx:"100",cy:"70",r:"35",fill:"#4CAF50"}),i.jsx(Zt.path,{d:"M 82 70 L 95 83 L 118 57",stroke:"#fff",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.7,repeat:1/0,repeatDelay:3.5}})]}),[...Array(12)].map((e,r)=>{const n=r*360/12,a=60+r%3*10,s=100+Math.cos(n*Math.PI/180)*a,o=70+Math.sin(n*Math.PI/180)*a,l=["#FFC107","#FF5722","#2196F3","#4CAF50","#E91E63"];return i.jsx(Zt.rect,{width:"4",height:"8",rx:"1",fill:l[r%l.length],initial:{x:100,y:70,opacity:0,rotate:0},animate:{x:s,y:o,opacity:[0,1,0],rotate:[0,360]},transition:{duration:1.5,repeat:1/0,repeatDelay:2.5,delay:r*.05}},r)}),i.jsx(Zt.text,{x:"100",y:"180",fontSize:"16",fontWeight:"bold",fill:"#4CAF50",textAnchor:"middle",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"ENTREGADO!"})]}),Wqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Zt.g,{animate:{rotate:[0,-5,5,-5,0],x:[0,-2,2,-2,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"70",y:"90",width:"60",height:"60",fill:"#F44336",rx:"4",opacity:"0.8"}),i.jsx("path",{d:"M 70 90 L 85 75 L 145 75 L 130 90 Z",fill:"#E57373"}),i.jsx("path",{d:"M 130 90 L 145 75 L 145 135 L 130 150 Z",fill:"#C62828"})]}),i.jsxs(Zt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("circle",{cx:"100",cy:"50",r:"30",fill:"#F44336"}),i.jsx("line",{x1:"85",y1:"35",x2:"115",y2:"65",stroke:"#fff",strokeWidth:"6",strokeLinecap:"round"}),i.jsx("line",{x1:"115",y1:"35",x2:"85",y2:"65",stroke:"#fff",strokeWidth:"6",strokeLinecap:"round"})]}),i.jsx("text",{x:"100",y:"180",fontSize:"14",fontWeight:"bold",fill:"#F44336",textAnchor:"middle",children:"NO ENTREGADO"})]}),Kqe={pendiente_recoleccion:dle,recolectada:Lqe,en_contenedor_usa:Fqe,incompleta_usa:Bqe,en_transito_rd:Uqe,recibida_rd:zqe,pendiente_confirmacion:Vqe,confirmada:$qe,en_ruta:Hqe,lista_para_entregar:qqe,entregada:Gqe,no_entregada:Wqe},Xqe=({estado:t,size:e=200})=>{const r=Kqe[t]||dle;return i.jsx(r,{size:e})},Yqe="https://proyecto-envios-production.up.railway.app/api",$q=()=>{const{codigo:t}=Yy(),e=$s(),[r,n]=S.useState(null),[a,s]=S.useState(!0),[o,l]=S.useState(null),[c,u]=S.useState(t||""),[d,h]=S.useState(!1);S.useEffect(()=>{t?p(t):s(!1)},[t]);const p=async j=>{var P,U;s(!0),l(null);try{const G=await bs.get(`${Yqe}/tracking/public/${j}`);G.data.success?n(G.data):l(G.data.error||"No se pudo obtener la informacin")}catch(G){console.error("Error al buscar tracking:",G),((P=G.response)==null?void 0:P.status)===404?l("Cdigo de tracking no encontrado"):((U=G.response)==null?void 0:U.status)===400?l("Cdigo de tracking invlido"):l("Error al conectar con el servidor")}finally{s(!1)}},g=j=>{j.preventDefault();const P=c.trim();P&&(P===t?p(P):e(`/tracking/${P}`))},b=()=>{const j=window.location.href;navigator.clipboard.writeText(j),h(!0),setTimeout(()=>h(!1),2e3)},w=async()=>{var U;const j=window.location.href,P=`Rastrear mi paquete: ${(U=r==null?void 0:r.recoleccion)==null?void 0:U.codigoTracking}`;if(navigator.share)try{await navigator.share({title:"Rastreo de Paquete",text:P,url:j})}catch(G){console.log("Error al compartir:",G)}else b()},_=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[i.jsx(Br,{className:"w-6 h-6 text-indigo-600"}),"Rastrear Paquete"]}),i.jsxs("form",{onSubmit:g,className:"flex gap-3",children:[i.jsx("input",{type:"text",value:c,onChange:j=>u(j.target.value),placeholder:"Ingresa tu cdigo de tracking (ej: EMI-0001)",className:"flex-1 px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),i.jsx("button",{type:"submit",disabled:!c.trim(),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Buscar"})]}),t&&i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[i.jsx(W3e,{className:"w-4 h-4"}),d?"Copiado!":"Copiar link"]}),i.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[i.jsx(G4e,{className:"w-4 h-4"}),"Compartir"]})]})]}),N=()=>{const{estadoActual:j}=r;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",style:{borderTop:`4px solid ${j.color}`},children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(Xqe,{estado:j.codigo,size:250})}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"text-4xl",children:j.icono}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:j.nombre}),i.jsx("p",{className:"text-slate-600 mb-3",children:j.descripcion}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Yl,{className:"w-4 h-4"}),i.jsxs("span",{children:["ltima actualizacin: ",r.recoleccion.updatedAt?new Date(r.recoleccion.updatedAt).toLocaleString("es-DO"):"No disponible"]})]})]})]})]})},A=()=>{const{timeline:j}=r;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Historial de Estados"}),i.jsx("div",{className:"space-y-4",children:j.map((P,U)=>{const G=P.completado===!0,O=P.actual===!0;return i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-md ${G?"bg-emerald-500 text-white ring-4 ring-emerald-100":"bg-slate-200 text-slate-400"}`,children:G?i.jsx(en,{className:"w-6 h-6 fill-current"}):i.jsx(Xo,{className:"w-6 h-6"})}),U<j.length-1&&i.jsx("div",{className:`w-1 h-12 transition-all ${G?"bg-emerald-400":"bg-slate-200"}`})]}),i.jsxs("div",{className:"flex-1 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-lg",children:P.icono}),i.jsx("h4",{className:`font-semibold ${O?"text-indigo-600 font-bold":G?"text-slate-800":"text-slate-400"}`,children:P.nombre}),O&&i.jsx("span",{className:"px-3 py-1 text-xs bg-indigo-500 text-white rounded-full font-semibold animate-pulse",children:"ACTUAL"}),G&&!O&&i.jsx(en,{className:"w-4 h-4 text-emerald-500"})]}),i.jsx("p",{className:`text-sm ${G?"text-slate-600":"text-slate-400"}`,children:P.descripcion||P.producto||"Sin descripcin"}),P.fecha&&i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(P.fecha).toLocaleString("es-DO")})]})]},U)})})]})};return a?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent mb-4"}),i.jsx("p",{className:"text-slate-600",children:"Buscando informacin..."})]})}):o&&!a?i.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[_(),i.jsxs("div",{className:"bg-rose-50 border border-rose-200 rounded-lg p-6 text-center",children:[i.jsx(ms,{className:"w-12 h-12 text-rose-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-rose-800 mb-2",children:"No se encontr el paquete"}),i.jsx("p",{className:"text-rose-700",children:o}),i.jsx("p",{className:"text-sm text-rose-600 mt-2",children:"Verifica que el cdigo de tracking sea correcto"})]})]})}):!t&&!a?i.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx(Br,{className:"w-16 h-16 text-indigo-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Sistema de Rastreo de Paquetes"}),i.jsx("p",{className:"text-slate-600",children:"Ingresa tu cdigo de tracking para ver el estado de tu envo"})]}),_(),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"font-semibold text-slate-800 mb-3",children:"Cmo funciona?"}),i.jsxs("ol",{className:"space-y-2 text-slate-700",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold text-indigo-600",children:"1."}),"Ingresa tu cdigo de tracking en el campo de bsqueda"]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold text-indigo-600",children:"2."}),'Haz clic en "Buscar" para ver el estado de tu paquete']}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold text-indigo-600",children:"3."}),"Puedes compartir el link de rastreo con otras personas"]})]})]})]})}):r?i.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-1",children:"Rastreo de Paquete"}),i.jsx("p",{className:"text-slate-600",children:r.recoleccion.codigoTracking})]}),_(),N(),A()]})}):null},iE="https://proyecto-envios-production.up.railway.app/api";console.log("PublicBooking using API_URL:",iE);function Hq(){var R;const{companyId:t}=Yy(),e=$s(),[r,n]=S.useState(!!t),[a,s]=S.useState(""),[o,l]=S.useState(null),[c,u]=S.useState(!1),[d,h]=S.useState(!1),[p,g]=S.useState(""),[b,w]=S.useState(!1),[_,N]=S.useState({remitenteNombre:"",remitenteTelefono:"",remitenteEmail:"",remitenteDireccion:"",fechaPreferida:"",horaPreferida:"",items:[],fotos:[],notasAdicionales:""}),[A,j]=S.useState({descripcion:"",cantidad:1,pesoAproximado:"",dimensionesAproximadas:""});S.useEffect(()=>{P()},[t]);const P=async()=>{try{if(!t)return;const B=await bs.get(`${iE}/companies/public/${t}`);B.data.success?l(B.data.data):We.error("Empresa no encontrada")}catch(B){console.error("Error fetching company:",B),We.error("No se pudo cargar la informacin de la empresa")}finally{n(!1)}},U=()=>{if(!A.descripcion){We.error("Ingresa una descripcin del artculo");return}N({..._,items:[..._.items,A]}),j({descripcion:"",cantidad:1,pesoAproximado:"",dimensionesAproximadas:""})},G=B=>{N({..._,items:_.items.filter((F,ee)=>ee!==B)})},O=async B=>{console.log(" handlePhotoUpload iniciado");const F=Array.from(B.target.files);if(console.log(" Archivos seleccionados:",F.length),F.length===0){console.log(" No se seleccionaron archivos");return}if(_.fotos.length+F.length>5){We.error("Mximo 5 fotos permitidas");return}const ee=5*1024*1024;for(const Z of F)if(Z.size>ee){We.error(`La foto "${Z.name}" es muy grande. Mximo 5MB por foto.`);return}w(!0),We.info("Subiendo fotos...");try{const Z=F.map(async ne=>{const ae=Date.now(),me=Math.floor(Math.random()*1e4),Ee=`solicitudes/${t}/${ae}-${me}-${ne.name}`,ye=ny(Cx,Ee);return await ty(ye,ne),await ry(ye)}),ce=await Promise.all(Z);N(ne=>({...ne,fotos:[...ne.fotos,...ce]})),console.log(" Fotos subidas exitosamente:",ce),We.success(`${F.length} foto(s) subida(s) correctamente`)}catch(Z){console.error(" Error uploading photos:",Z),console.error("Error details:",{message:Z.message,code:Z.code,stack:Z.stack}),We.error(`Error al subir las fotos: ${Z.message||"Intenta nuevamente"}`)}finally{w(!1)}},D=B=>{N(F=>({...F,fotos:F.fotos.filter((ee,Z)=>Z!==B)})),We.success("Foto eliminada")},I=async B=>{var F,ee,Z,ce,ne,ae,me,Ee;B.preventDefault(),console.log(" [PublicBooking] handleSubmit iniciado"),u(!0);try{const ye={companyId:t,remitenteNombre:_.remitenteNombre,remitenteTelefono:_.remitenteTelefono,remitenteEmail:_.remitenteEmail,remitenteDireccion:_.remitenteDireccion,fechaPreferida:_.fechaPreferida,horaPreferida:_.horaPreferida,items:_.items,fotos:_.fotos,notasAdicionales:_.notasAdicionales,tipoServicio:"standard"};console.log(" [PublicBooking] Enviando payload:",ye),console.log(" [PublicBooking] API URL:",`${iE}/solicitudes/public`);const H=await bs.post(`${iE}/solicitudes/public`,ye);console.log(" [PublicBooking] Respuesta recibida:",H.data),H.data.success&&(h(!0),g(((F=H.data.data)==null?void 0:F.codigoRastreo)||((ee=H.data.data)==null?void 0:ee.id)||"N/A"),We.success("Solicitud enviada exitosamente! Te contactaremos pronto."))}catch(ye){console.error(" [PublicBooking] Error completo:",ye),console.error(" [PublicBooking] Error response:",(Z=ye.response)==null?void 0:Z.data),console.error(" [PublicBooking] Error status:",(ce=ye.response)==null?void 0:ce.status),We.error(((ae=(ne=ye.response)==null?void 0:ne.data)==null?void 0:ae.error)||((Ee=(me=ye.response)==null?void 0:me.data)==null?void 0:Ee.message)||"Error enviando solicitud")}finally{u(!1)}};if(r)return i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx(bp,{className:"animate-spin text-indigo-600"})});if(!t&&!o)return i.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:[i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-slate-100",children:[i.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Br,{className:"w-8 h-8 text-indigo-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Agendar Recoleccin"}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Ingresa el ID de la compaa para iniciar tu solicitud."}),i.jsxs("form",{onSubmit:B=>{B.preventDefault(),a.trim()&&e(`/agendar/${a.trim()}`)},children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx(qd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"text",value:a,onChange:B=>s(B.target.value),placeholder:"Ej: embarques_ivan",className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all bg-slate-50 focus:bg-white",required:!0})]}),i.jsxs("button",{type:"submit",disabled:!a.trim(),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:["Continuar ",i.jsx(x3e,{className:"w-4 h-4"})]})]}),i.jsx("p",{className:"mt-6 text-xs text-slate-400",children:"No sabes el ID? Pdelo a tu proveedor de envos."})]}),i.jsx("div",{className:"mt-8 text-slate-400 text-sm font-medium",children:"Powered by ProLogix"})]});if(!o)return i.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-500 font-medium",children:"Empresa no encontrada o enlace invlido"});const V=((R=o.colors)==null?void 0:R.primary)||"#3b82f6";return d?i.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Br,{className:"w-8 h-8 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Solicitud Recibida!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Tu cdigo de rastreo es:"}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-xl mb-6",children:i.jsx("span",{className:"text-3xl font-mono font-bold text-gray-800 tracking-wider",children:p})}),i.jsx("p",{className:"text-sm text-gray-500",children:"Hemos enviado una confirmacin a tu WhatsApp."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"mt-8 text-blue-600 hover:underline",children:"Nueva Solicitud"})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",style:{"--primary":V},children:[i.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 flex items-center gap-4",children:[o.logo&&i.jsx("img",{src:o.logo,alt:o.name,className:"h-10 w-10 rounded-full object-cover"}),i.jsxs("div",{children:[i.jsx("h1",{className:"font-bold text-xl text-gray-800",children:o.name||"Solicitud de Recoleccin"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Nueva Solicitud"})]})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:i.jsxs("form",{onSubmit:I,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Fa,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Tus Datos"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("input",{required:!0,placeholder:"Tu Nombre Completo",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.remitenteNombre,onChange:B=>N({..._,remitenteNombre:B.target.value})}),i.jsx("input",{required:!0,placeholder:"Telfono / WhatsApp",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.remitenteTelefono,onChange:B=>N({..._,remitenteTelefono:B.target.value})}),i.jsx("input",{type:"email",placeholder:"Email (Opcional)",className:"p-3 border border-gray-300 rounded-lg w-full md:col-span-2 focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.remitenteEmail,onChange:B=>N({..._,remitenteEmail:B.target.value})})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Fa,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Direccin de Recoleccin"]}),i.jsx("textarea",{required:!0,placeholder:"Direccin exacta donde recogeremos (Calle, nmero, sector, referencias)",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",rows:"3",value:_.remitenteDireccion,onChange:B=>N({..._,remitenteDireccion:B.target.value})}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" S lo ms especfico posible para que nuestro equipo te encuentre fcilmente"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Yl,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Fecha y Hora Preferida"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Fecha"}),i.jsx("input",{type:"date",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.fechaPreferida,onChange:B=>N({..._,fechaPreferida:B.target.value}),min:new Date().toISOString().split("T")[0]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Hora"}),i.jsx("input",{type:"time",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.horaPreferida,onChange:B=>N({..._,horaPreferida:B.target.value})})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Opcional: Si no especificas, te contactaremos para coordinar"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Br,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Qu necesitas enviar?"]}),_.items.length>0&&i.jsx("div",{className:"space-y-2 mb-4",children:_.items.map((B,F)=>i.jsxs("div",{className:"flex justify-between items-start bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"font-medium text-gray-700",children:[B.cantidad,"x ",B.descripcion]}),B.pesoAproximado&&i.jsxs("div",{className:"text-xs text-gray-500",children:["Peso: ",B.pesoAproximado]}),B.dimensionesAproximadas&&i.jsxs("div",{className:"text-xs text-gray-500",children:["Dimensiones: ",B.dimensionesAproximadas]})]}),i.jsx("button",{type:"button",onClick:()=>G(F),className:"text-red-500 hover:text-red-700 text-sm font-medium ml-2",children:"Eliminar"})]},F))}),i.jsxs("div",{className:"space-y-3 border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Descripcin del artculo *"}),i.jsx("input",{value:A.descripcion,onChange:B=>j({...A,descripcion:B.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",placeholder:"Ej: Caja de zapatos, Electrodomstico, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Cantidad *"}),i.jsx("input",{type:"number",min:"1",value:A.cantidad,onChange:B=>j({...A,cantidad:parseInt(B.target.value)||1}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Peso aproximado (opcional)"}),i.jsx("input",{value:A.pesoAproximado,onChange:B=>j({...A,pesoAproximado:B.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",placeholder:"Ej: 5kg, 10 libras"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Dimensiones aproximadas (opcional)"}),i.jsx("input",{value:A.dimensionesAproximadas,onChange:B=>j({...A,dimensionesAproximadas:B.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",placeholder:"Ej: 30x20x15cm"})]})]}),i.jsx("button",{type:"button",onClick:U,className:"w-full bg-[color:var(--primary)] text-white py-2 px-4 rounded-lg hover:opacity-90 transition-opacity font-medium",children:"+ Agregar Artculo"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Esta informacin nos ayuda a estimar el espacio necesario en el vehculo"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Kf,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Fotos (Opcional)"]}),_.fotos.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4",children:_.fotos.map((B,F)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:B,alt:`Foto ${F+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),i.jsx("button",{type:"button",onClick:()=>D(F),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(Jn,{className:"w-4 h-4"})})]},F))}),i.jsxs("label",{className:`border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[color:var(--primary)] transition-colors cursor-pointer block ${b?"opacity-50 pointer-events-none":""}`,children:[i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:O,className:"hidden",disabled:b||_.fotos.length>=5}),b?i.jsxs(i.Fragment,{children:[i.jsx(bp,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2 animate-spin"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Subiendo fotos..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(_3,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:_.fotos.length>=5?"Mximo 5 fotos alcanzado":"Toca para subir fotos de tus artculos"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:_.fotos.length>=5?"Elimina algunas fotos para subir ms":`Mximo 5 fotos, 5MB cada una (${_.fotos.length}/5)`})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(_3,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Notas Adicionales"]}),i.jsx("textarea",{placeholder:"Algo ms que debamos saber? (instrucciones especiales, acceso al lugar, etc.)",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",rows:"3",value:_.notasAdicionales,onChange:B=>N({..._,notasAdicionales:B.target.value})})]}),i.jsx("button",{disabled:c,type:"submit",className:"w-full bg-[color:var(--primary)] text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx(bp,{className:"w-5 h-5 animate-spin"}),"Enviando solicitud..."]}):" Solicitar Recoleccin"})]})}),i.jsx("div",{className:"text-center py-6 text-gray-400 text-sm",children:"Powered by ProLogix"})]})}const Zqe=()=>{const{rutaId:t}=Yy(),e=$s(),[r,n]=S.useState(!0),[a,s]=S.useState(null),[o,l]=S.useState(null);S.useEffect(()=>{const A=L0.onAuthStateChanged(j=>{j?(console.log(" Usuario autenticado, cargando datos de impresin..."),c()):(console.error(" No hay usuario autenticado para imprimir"),s("Debes estar autenticado para imprimir. Por favor, inicia sesin."),n(!1))});return()=>A()},[t]);const c=async()=>{var A,j;try{n(!0),s(null),console.log(` Solicitando datos de impresin para ruta ${t}...`);const P=await wt.get(`/repartidores/rutas/${t}/exportar-impresion`);P.data.success?(console.log(" Datos de impresin recibidos:",P.data.data),console.log(" Informacin de compaa:",P.data.data.company),l(P.data.data)):s("No se pudieron cargar los datos")}catch(P){console.error(" Error cargando datos para impresin:",P),s(((j=(A=P.response)==null?void 0:A.data)==null?void 0:j.message)||"Error al cargar los datos. Por favor, intenta nuevamente.")}finally{n(!1)}},u=()=>{window.print()},d=()=>{e(-1)},h=A=>A?(A instanceof Date?A:new Date(A)).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric"}):"-",p=A=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(A||0),g=A=>({pendiente:"bg-amber-100 text-amber-800",en_ruta:"bg-indigo-100 text-indigo-800",entregada:"bg-emerald-100 text-emerald-800",no_entregada:"bg-rose-100 text-rose-800",pagada:"bg-emerald-100 text-emerald-800",pendiente_pago:"bg-amber-100 text-amber-800"})[A]||"bg-slate-100 text-slate-800";if(r)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ts,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600",children:"Cargando datos para impresin..."})]})});if(a)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx(ms,{className:"w-16 h-16 text-rose-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Error"}),i.jsx("p",{className:"text-slate-600 mb-6",children:a}),i.jsx("button",{onClick:d,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Volver"})]})});if(!o)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx("p",{className:"text-slate-600",children:"No hay datos disponibles"})});const{ruta:b,company:w,facturas:_,stats:N}=o;return i.jsxs("div",{className:"min-h-screen bg-slate-50",children:[i.jsxs("div",{className:"no-print fixed top-4 right-4 flex gap-2 z-50",children:[i.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition shadow-lg",children:[i.jsx(Wl,{size:20}),"Imprimir"]}),i.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition shadow-lg",children:[i.jsx(Jn,{size:20}),"Cerrar"]})]}),_.map((A,j)=>{var P,U,G;return i.jsxs("div",{className:"page-break w-[210mm] h-[297mm] mx-auto bg-white shadow-lg print:shadow-none p-6 print:p-4 mb-8 print:mb-0 overflow-hidden",children:[i.jsx("div",{className:"mb-4 pb-3 border-b-2 border-slate-300",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[w.logo?i.jsx("img",{src:w.logo,alt:w.nombre,className:"h-12 w-auto object-contain"}):i.jsx("div",{className:"h-12 w-12 bg-indigo-600 text-white flex items-center justify-center rounded-lg text-xl font-bold",children:((P=w.nombre)==null?void 0:P.charAt(0))||"E"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-slate-800",children:w.nombre}),i.jsxs("div",{className:"flex gap-3 text-xs text-slate-600",children:[w.telefono&&i.jsxs("span",{children:["Tel: ",w.telefono]}),w.email&&i.jsx("span",{children:w.email})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"HOJA DE ENTREGA"}),i.jsxs("p",{className:"text-xs text-slate-600",children:["Fecha: ",h(new Date)]}),i.jsx("p",{className:"text-sm font-semibold text-slate-700",children:b.nombre}),b.zona&&i.jsxs("p",{className:"text-xs text-slate-600",children:["Zona: ",b.zona]})]})]})}),i.jsxs("div",{className:"mb-3 p-2 bg-slate-50 rounded print:bg-slate-100 flex justify-between items-center",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-slate-600",children:"Repartidor: "}),i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:((U=b.repartidor)==null?void 0:U.nombre)||"No asignado"}),((G=b.repartidor)==null?void 0:G.telefono)&&i.jsxs("span",{className:"text-xs text-slate-600 ml-2",children:["Tel: ",b.repartidor.telefono]})]})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs text-slate-600",children:"Factura "}),i.jsxs("span",{className:"text-base font-bold text-slate-800",children:["#",j+1,"/",_.length]})]})]}),i.jsxs("div",{className:"border-2 border-slate-300 rounded-lg p-3 mb-3",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2 pb-2 border-b border-slate-200",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800",children:A.codigoTracking}),i.jsxs("p",{className:"text-xs text-slate-600",children:["Factura: ",A.numeroFactura]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-semibold ${g(A.estado)}`,children:A.estado.replace("_"," ").toUpperCase()}),A.pago&&i.jsx("p",{className:"text-base font-bold text-slate-800 mt-1",children:p(A.pago.total)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[A.remitente&&i.jsxs("div",{className:"p-2 bg-emerald-50 rounded print:bg-emerald-100",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-1",children:"REMITENTE"}),i.jsx("p",{className:"text-xs font-semibold text-slate-800",children:A.remitente.nombre}),A.remitente.telefono&&i.jsxs("p",{className:"text-xs text-slate-600",children:["Tel: ",A.remitente.telefono]})]}),i.jsxs("div",{className:`p-2 bg-indigo-50 rounded print:bg-indigo-100 ${A.remitente?"":"col-span-2"}`,children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-1",children:"DESTINATARIO"}),i.jsx("p",{className:"text-sm font-bold text-slate-800",children:A.destinatario.nombre}),i.jsx("p",{className:"text-xs text-slate-700",children:A.destinatario.direccion}),i.jsxs("div",{className:"flex gap-2 text-xs text-slate-600 mt-1",children:[A.destinatario.sector&&i.jsxs("span",{children:["Sector: ",A.destinatario.sector]}),A.destinatario.telefono&&i.jsxs("span",{children:["Tel: ",A.destinatario.telefono]})]})]})]}),A.items&&A.items.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 text-xs mb-2 pb-1 border-b border-slate-300",children:["ITEMS A ENTREGAR (",A.items.length,")"]}),i.jsx("div",{className:"space-y-1.5",children:A.items.map((O,D)=>i.jsxs("div",{className:"flex items-start gap-2 p-1.5 bg-slate-50 rounded print:bg-white print:border print:border-slate-300",children:[i.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 rounded print:border-black"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-800 leading-tight",children:O.descripcion||O.producto||"Sin descripcin"}),i.jsxs("div",{className:"flex gap-2 text-xs text-slate-600",children:[O.cantidad>1&&i.jsxs("span",{children:["Cant: ",O.cantidad]}),O.peso&&i.jsxs("span",{children:["Peso: ",O.peso]})]})]}),O.entregado&&i.jsx("span",{className:"text-emerald-600 font-semibold text-xs bg-emerald-100 px-1.5 py-0.5 rounded",children:""})]})})]},D))})]}),A.pago&&i.jsxs("div",{className:"mb-2 p-2 bg-amber-50 border border-amber-300 rounded print:bg-amber-100",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-1",children:"INFORMACIN DE PAGO"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600",children:"Monto Total: "}),i.jsx("span",{className:"font-bold text-slate-900",children:p(A.pago.total)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600",children:"Estado: "}),i.jsx("span",{className:`font-semibold ${A.pago.estado==="pagada"?"text-emerald-600":"text-amber-700"}`,children:A.pago.estado==="pagada"?" PAGADO":"PENDIENTE"})]}),A.pago.montoPendiente>0&&i.jsxs("div",{className:"col-span-2 pt-1 border-t border-amber-400",children:[i.jsx("span",{className:"text-slate-700 font-semibold",children:"Monto a Cobrar: "}),i.jsx("span",{className:"font-bold text-rose-600 text-sm",children:p(A.pago.montoPendiente)})]})]})]}),(A.notas||A.notasInternas)&&i.jsxs("div",{className:"mb-2 p-2 bg-amber-50 border-l-2 border-amber-400 rounded print:bg-amber-100",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-0.5",children:" NOTAS"}),A.notas&&i.jsx("p",{className:"text-xs text-slate-800",children:A.notas}),A.notasInternas&&i.jsx("p",{className:"text-xs text-slate-600 italic",children:A.notasInternas})]})]}),i.jsxs("div",{className:"border-2 border-slate-300 rounded-lg p-3 bg-slate-50 print:bg-white",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-2",children:"CONFIRMACIN DE ENTREGA"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Nombre de quien recibe:"}),i.jsx("div",{className:"border-b-2 border-slate-400 h-8"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Cdula / ID:"}),i.jsx("div",{className:"border-b-2 border-slate-400 h-8"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Firma del cliente:"}),i.jsx("div",{className:"border-2 border-slate-400 h-16 rounded"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Hora de entrega:"}),i.jsx("div",{className:"border-b-2 border-slate-400 h-8 mt-1"}),i.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Fecha: ",h(new Date)]})]})]})]}),i.jsx("div",{className:"absolute bottom-4 left-6 right-6 pt-2 border-t border-slate-300 text-center text-xs text-slate-500",children:i.jsxs("p",{children:[w.nombre," - Sistema de Gestin de Envos"]})})]},A.id)}),i.jsx("style",{children:`
        @media print {
          body {
            margin: 0;
            padding: 0;
          }

          .no-print {
            display: none !important;
          }

          /* Configuracin para papel A4 (210mm x 297mm) */
          @page {
            size: A4;
            margin: 0;
          }

          .print\\:break-inside-avoid {
            break-inside: avoid;
            page-break-inside: avoid;
          }

          .print\\:page-break-inside-avoid {
            page-break-inside: avoid;
          }

          /* Cada factura en su propia pgina */
          .page-break {
            page-break-after: always;
            break-after: page;
          }

          .page-break:last-child {
            page-break-after: avoid;
            break-after: avoid;
          }

          /* Estilos especficos para impresin */
          .print\\:shadow-none {
            box-shadow: none !important;
          }

          .print\\:p-6 {
            padding: 1.5rem !important;
          }

          .print\\:mb-0 {
            margin-bottom: 0 !important;
          }

          .print\\:bg-slate-100 {
            background-color: #f3f4f6 !important;
          }

          .print\\:bg-indigo-100 {
            background-color: #dbeafe !important;
          }

          .print\\:bg-emerald-100 {
            background-color: #dcfce7 !important;
          }

          .print\\:bg-amber-100 {
            background-color: #fef3c7 !important;
          }

          .print\\:bg-amber-100 {
            background-color: #ffedd5 !important;
          }

          .print\\:bg-white {
            background-color: white !important;
          }

          .print\\:border {
            border-width: 1px !important;
          }

          .print\\:border-slate-300 {
            border-color: #d1d5db !important;
          }

          .print\\:border-black {
            border: 2px solid black !important;
          }

          /* Asegurar que el contenido no se corte */
          * {
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
          }
        }

        /* Estilos para pantalla */
        @media screen {
          .page-break {
            margin-bottom: 2rem;
          }
        }
      `})]})};function Qqe(){const t=$s(),[e,r]=S.useState(""),[n,a]=S.useState(!1),[s,o]=S.useState(""),[l,c]=S.useState(!1),u=async d=>{var h,p;d.preventDefault(),o(""),a(!0);try{(await wt.post("/auth/forgot-password",{email:e})).data.success&&c(!0)}catch(g){console.error("Error al solicitar recuperacion:",g),o(((p=(h=g.response)==null?void 0:h.data)==null?void 0:p.error)||"Error al procesar la solicitud. Intenta nuevamente.")}finally{a(!1)}};return l?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsx("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-emerald-500/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(en,{className:"w-12 h-12 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Revisa tu correo"}),i.jsx("p",{className:"text-indigo-200/80 mb-6",children:"Si el email existe en nuestro sistema, recibirs un enlace de recuperacin en tu correo personal en los prximos minutos."}),i.jsx("p",{className:"text-sm text-indigo-300/60 mb-8",children:"El enlace ser vlido por 10 minutos."}),i.jsxs("button",{onClick:()=>t("/"),className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:[i.jsx(Gl,{className:"w-5 h-5"}),"Volver al inicio de sesin"]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ring-4 ring-white/10 p-4",children:i.jsx("img",{src:bw,alt:"ProLogix",className:"w-full h-full object-contain"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Olvidaste tu contrasea?"}),i.jsx("p",{className:"text-indigo-200/80 text-sm",children:"Ingresa tu email de empresa y te enviaremos un enlace de recuperacin a tu correo personal."})]}),s&&i.jsxs("div",{className:"bg-rose-500/20 border border-rose-500/50 text-white p-3 rounded-lg mb-6 flex items-center gap-2",children:[i.jsx(ms,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:s})]}),i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-2 uppercase tracking-wider",children:"Email de Empresa"}),i.jsxs("div",{className:"relative",children:[i.jsx(uh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400 w-5 h-5"}),i.jsx("input",{type:"email",value:e,onChange:d=>r(d.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"usuario@empresa.com",required:!0})]})]}),i.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:n?i.jsxs(i.Fragment,{children:[i.jsx(bp,{className:"animate-spin w-5 h-5"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(uh,{className:"w-5 h-5"}),i.jsx("span",{children:"Enviar enlace de recuperacin"})]})}),i.jsxs("button",{type:"button",onClick:()=>t("/"),className:"w-full text-indigo-300 hover:text-white transition-colors flex items-center justify-center gap-2 py-2",children:[i.jsx(Gl,{className:"w-4 h-4"}),"Volver al inicio de sesin"]})]})]})})}function Jqe(){const t=$s(),[e]=E1e(),r=e.get("token"),[n,a]=S.useState(""),[s,o]=S.useState(""),[l,c]=S.useState(!1),[u,d]=S.useState(!1),[h,p]=S.useState(!1),[g,b]=S.useState(""),[w,_]=S.useState(!1);S.useEffect(()=>{r||b("Token de recuperacin no vlido. Por favor solicita un nuevo enlace.")},[r]);const N=async A=>{var j,P;if(A.preventDefault(),b(""),n.length<6){b("La contrasea debe tener al menos 6 caracteres");return}if(n!==s){b("Las contraseas no coinciden");return}p(!0);try{(await wt.post("/auth/reset-password",{token:r,newPassword:n})).data.success&&(_(!0),setTimeout(()=>{t("/")},3e3))}catch(U){console.error("Error al restablecer contrasea:",U),b(((P=(j=U.response)==null?void 0:j.data)==null?void 0:P.error)||"Error al restablecer la contrasea. El enlace puede haber expirado.")}finally{p(!1)}};return w?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsx("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-emerald-500/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(en,{className:"w-12 h-12 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Contrasea actualizada"}),i.jsx("p",{className:"text-indigo-200/80 mb-6",children:"Tu contrasea ha sido actualizada exitosamente. Ya puedes iniciar sesin con tu nueva contrasea."}),i.jsx("p",{className:"text-sm text-indigo-300/60 mb-8",children:"Redirigiendo al inicio de sesin..."}),i.jsxs("button",{onClick:()=>t("/"),className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:[i.jsx(Gl,{className:"w-5 h-5"}),"Ir al inicio de sesin"]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ring-4 ring-white/10 p-4",children:i.jsx("img",{src:bw,alt:"ProLogix",className:"w-full h-full object-contain"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Restablecer contrasea"}),i.jsx("p",{className:"text-indigo-200/80 text-sm",children:"Ingresa tu nueva contrasea"})]}),g&&i.jsxs("div",{className:"bg-rose-500/20 border border-rose-500/50 text-white p-3 rounded-lg mb-6 flex items-center gap-2",children:[i.jsx(ms,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:g})]}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-2 uppercase tracking-wider",children:"Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(s2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400 w-5 h-5"}),i.jsx("input",{type:l?"text":"password",value:n,onChange:A=>a(A.target.value),className:"w-full pl-10 pr-12 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Mnimo 6 caracteres",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-indigo-400 hover:text-indigo-300 transition-colors",children:l?i.jsx(y8,{className:"w-5 h-5"}):i.jsx(Tu,{className:"w-5 h-5"})})]}),i.jsx("p",{className:"text-xs text-indigo-300/60 mt-1",children:"La contrasea debe tener al menos 6 caracteres"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-2 uppercase tracking-wider",children:"Confirmar Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(s2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400 w-5 h-5"}),i.jsx("input",{type:u?"text":"password",value:s,onChange:A=>o(A.target.value),className:"w-full pl-10 pr-12 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Repite la contrasea",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-indigo-400 hover:text-indigo-300 transition-colors",children:u?i.jsx(y8,{className:"w-5 h-5"}):i.jsx(Tu,{className:"w-5 h-5"})})]})]}),i.jsx("button",{type:"submit",disabled:h||!r,className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:h?i.jsxs(i.Fragment,{children:[i.jsx(bp,{className:"animate-spin w-5 h-5"}),i.jsx("span",{children:"Actualizando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(s2,{className:"w-5 h-5"}),i.jsx("span",{children:"Restablecer contrasea"})]})}),i.jsxs("button",{type:"button",onClick:()=>t("/"),className:"w-full text-indigo-300 hover:text-white transition-colors flex items-center justify-center gap-2 py-2",children:[i.jsx(Gl,{className:"w-4 h-4"}),"Volver al inicio de sesin"]})]})]})})}const eGe=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState({}),[o,l]=S.useState(!0),[c,u]=S.useState(!1),[d,h]=S.useState(!1),[p,g]=S.useState(new Date().getMonth()+1),[b,w]=S.useState(new Date().getFullYear()),[_,N]=S.useState([]);S.useEffect(()=>{A(),j()},[]);const A=async()=>{try{l(!0);const I=await wt.get("/finanzas/saas/planes");I.data.success&&e(I.data.data.planes)}catch(I){console.error("Error al cargar planes:",I),We.error("Error al cargar planes SaaS")}finally{l(!1)}},j=async()=>{try{const I=await wt.get("/finanzas/saas/facturas?limit=20");I.data.success&&N(I.data.data)}catch(I){console.error("Error al cargar facturas SaaS:",I)}},P=I=>{n(I.id),s({precio:I.precio,precioUSD:I.precioUSD})},U=()=>{n(null),s({})},G=async I=>{var V,R;try{u(!0),(await wt.put(`/finanzas/saas/planes/${I}`,a)).data.success&&(We.success("Plan actualizado exitosamente"),n(null),s({}),A())}catch(B){console.error("Error al actualizar plan:",B),We.error(((R=(V=B.response)==null?void 0:V.data)==null?void 0:R.message)||"Error al actualizar plan")}finally{u(!1)}},O=async()=>{var I,V;if(confirm(`Generar facturas de suscripcin para TODAS las empresas activas del mes ${p}/${b}?`))try{h(!0);const R=await wt.post("/finanzas/saas/generar-facturas-masivas",{mes:p,anio:b});if(R.data.success){const{exitosas:B,fallidas:F,duplicadas:ee}=R.data.data;We.success(` ${B.length} facturas generadas`),ee.length>0&&We.info(` ${ee.length} facturas ya existan`),F.length>0&&We.error(` ${F.length} facturas fallaron`),j()}}catch(R){console.error("Error al generar facturas masivas:",R),We.error(((V=(I=R.response)==null?void 0:I.data)==null?void 0:V.message)||"Error al generar facturas")}finally{h(!1)}},D=I=>`RD$ ${I.toLocaleString("es-DO")}`;return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Administracin de Planes SaaS"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestiona precios, caractersticas y facturacin de suscripciones"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center",children:i.jsx(Ul,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Precios de Planes"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(I=>{const V=r===I.id;return i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border-2 border-slate-200 dark:border-slate-700 rounded-xl p-6 hover:shadow-lg transition-all",style:{borderColor:I.color+"40"},children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3",style:{backgroundColor:I.color+"20",color:I.color},children:i.jsx(Br,{className:"w-5 h-5"})}),i.jsx("h4",{className:"font-bold text-lg text-slate-900 dark:text-white",children:I.nombre}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:I.descripcion})]}),!V&&i.jsx("button",{onClick:()=>P(I),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(V1,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]}),V?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Precio (RD$)"}),i.jsx("input",{type:"number",value:a.precio,onChange:R=>s({...a,precio:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Precio (USD)"}),i.jsx("input",{type:"number",value:a.precioUSD,onChange:R=>s({...a,precioUSD:parseInt(R.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>G(I.id),disabled:c,className:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:[i.jsx(y3,{className:"w-4 h-4"}),"Guardar"]}),i.jsx("button",{onClick:U,disabled:c,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg font-medium disabled:opacity-50",children:i.jsx(Jn,{className:"w-4 h-4"})})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsx("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:D(I.precio)}),i.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"/mes"})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["~$",I.precioUSD," USD"]}),i.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 mt-4",children:i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Camiones:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:I.limites.camiones===-1?"Ilimitados":I.limites.camiones})]}),i.jsxs("div",{className:"flex items-center justify-between mt-1",children:[i.jsx("span",{children:"Usuarios:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:I.limites.usuarios===-1?"Ilimitados":I.limites.usuarios})]})]})})]})]},I.id)})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:i.jsx(Au,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Generacin de Facturas"})]}),i.jsxs("div",{className:"flex items-end gap-4 mb-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mes"}),i.jsx("select",{value:p,onChange:I=>g(parseInt(I.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:Array.from({length:12},(I,V)=>V+1).map(I=>i.jsx("option",{value:I,children:new Date(2e3,I-1).toLocaleString("es",{month:"long"})},I))})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ao"}),i.jsx("input",{type:"number",value:b,onChange:I=>w(parseInt(I.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("button",{onClick:O,disabled:d,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:[i.jsx(Yl,{className:"w-4 h-4"}),d?"Generando...":"Generar Facturas Masivas"]})]}),_.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Facturas Recientes"}),i.jsx("div",{className:"space-y-2",children:_.slice(0,10).map(I=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${I.estado==="pagada"?"bg-emerald-100 dark:bg-emerald-900":I.estado==="vencida"?"bg-rose-100 dark:bg-rose-900":"bg-amber-100 dark:bg-amber-900"}`,children:I.estado==="pagada"?i.jsx(en,{className:`w-5 h-5 ${I.estado==="pagada"?"text-emerald-600":"text-amber-600"}`}):i.jsx(ms,{className:`w-5 h-5 ${I.estado==="vencida"?"text-rose-600":"text-amber-600"}`})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:I.companyName}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[I.numeroFactura,"  ",I.planNombre]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:D(I.monto)}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 capitalize",children:I.estado})]})]},I.id))})]})]})]})},tGe=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=S.useState(0);return S.useEffect(()=>{const c=t/60;let u=0;const d=setInterval(()=>{u+=c,u>=t?(s(t),clearInterval(d)):s(u)},1e3/60);return()=>clearInterval(d)},[t]),i.jsxs("span",{children:[e,a.toLocaleString("en-US",{minimumFractionDigits:n,maximumFractionDigits:n}),r]})},z5=({title:t,value:e,change:r,icon:n,prefix:a="",suffix:s="",delay:o=0})=>i.jsx(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),i.jsx("div",{className:"mt-2 flex items-baseline gap-2",children:i.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:i.jsx(tGe,{value:e,prefix:a,suffix:s,decimals:a==="$"?2:0})})}),r!==void 0&&i.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[i.jsx(Mre,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),i.jsxs("span",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:[r,"%"]}),i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"vs mes anterior"})]})]}),i.jsx("div",{className:"p-3 rounded-lg bg-indigo-50 dark:bg-indigo-900/20",children:i.jsx(n,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400",strokeWidth:1.5})})]})}),rGe=()=>{const[t,e]=S.useState("overview"),[r,n]=S.useState("30"),[a,s]=S.useState(!0),[o,l]=S.useState({mrr:{total:0,change:0},empresasActivas:{total:0,change:0},facturasGeneradas:{total:0,change:0},arr:{total:0,change:0},empresasPorPlan:[]}),[c,u]=S.useState([]);return S.useEffect(()=>{(async()=>{s(!0);try{const[h,p]=await Promise.all([wt.get(`/finanzas/saas/overview?dateRange=${r}`),wt.get("/finanzas/saas/empresas?limit=5")]);h.data.success&&l(h.data.data),p.data.success&&u(p.data.data)}catch(h){console.error("Error fetching SaaS data:",h),We.error("Error al cargar datos financieros")}finally{s(!1)}})()},[r]),S.useEffect(()=>{setTimeout(()=>s(!1),500)},[r]),a?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"h-full overflow-auto bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10",children:i.jsx("div",{className:"px-8 py-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" Finanzas SaaS"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Mtricas de ingresos por suscripciones empresariales"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>e("overview"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${t==="overview"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(vp,{className:"w-4 h-4"}),"Overview"]}),i.jsxs("button",{onClick:()=>e("admin"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${t==="admin"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(RR,{className:"w-4 h-4"}),"Administracin"]})]}),t==="overview"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[{value:"7",label:"7 das"},{value:"30",label:"30 das"},{value:"90",label:"90 das"}].map(d=>i.jsx("button",{onClick:()=>n(d.value),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${r===d.value?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:d.label},d.value))}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[i.jsx(WA,{className:"w-4 h-4"}),"Exportar Reporte"]})]})]})]})})}),i.jsxs("div",{className:"p-8 space-y-6",children:[t==="admin"&&i.jsx(eGe,{}),t==="overview"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(z5,{title:"MRR (Ingreso Mensual Recurrente)",value:o.mrr.total,prefix:"$",change:o.mrr.change,icon:Ul,delay:0}),i.jsx(z5,{title:"Empresas Activas",value:o.empresasActivas.total,change:o.empresasActivas.change,icon:tp,delay:.1}),i.jsx(z5,{title:"Facturas Generadas",value:o.facturasGeneradas.total,change:o.facturasGeneradas.change,icon:ay,delay:.2}),i.jsx(z5,{title:"ARR (Ingreso Anual)",value:o.arr.total,prefix:"$",change:o.arr.change,icon:kf,delay:.3})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Crecimiento MRR"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Ingresos mensuales recurrentes"})]}),i.jsx("div",{className:"h-64 flex items-center justify-center bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700 border-dashed",children:i.jsxs("div",{className:"text-center",children:[i.jsx(vp,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Grfico de MRR (Prximamente)"})]})})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Distribucin por Plan"}),i.jsx("div",{className:"space-y-4",children:[{plan:"Enterprise",count:5,mrr:5e3,color:"bg-indigo-500"},{plan:"Professional",count:12,mrr:4800,color:"bg-emerald-500"},{plan:"Basic",count:7,mrr:2700,color:"bg-amber-500"}].map((d,h)=>{var p;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:d.plan}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:["$",d.mrr]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${d.mrr/(((p=o.mrr)==null?void 0:p.total)||1)*100}%`},transition:{duration:.8,delay:.6+h*.1},className:`h-full ${d.color}`})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:[d.count," empresas"]})]})]},h)})})]})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Empresas Suscritas"}),i.jsx("button",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-700",children:"Ver todas "})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Plan"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"MRR"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Fecha Suscripcin"}),i.jsx("th",{className:"text-center py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Estado"})]})}),i.jsx("tbody",{children:c.map((d,h)=>i.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium text-slate-900 dark:text-white",children:d.nombre}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400",children:d.plan})}),i.jsxs("td",{className:"py-3 px-4 text-sm font-semibold text-slate-900 dark:text-white",children:["$",d.mrr,"/mes"]}),i.jsx("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:new Date(d.fechaSuscripcion).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d.estado==="activo"?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"bg-rose-50 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400"}`,children:d.estado==="activo"?" Activo":" Inactivo"})})]},h))})]})})]})]})]})]})};function fle(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=fle(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function aa(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=fle(t))&&(n&&(n+=" "),n+=e);return n}var nGe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function jD(t){if(typeof t!="string")return!1;var e=nGe;return e.includes(t)}var aGe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sGe=new Set(aGe);function hle(t){return typeof t!="string"?!1:sGe.has(t)}function mle(t){return typeof t=="string"&&t.startsWith("data-")}function Vc(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(hle(r)||mle(r))&&(e[r]=t[r]);return e}function Xp(t){if(t==null)return null;if(S.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Vc(e)}return typeof t=="object"&&!Array.isArray(t)?Vc(t):null}function wl(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(hle(r)||mle(r)||jD(r))&&(e[r]=t[r]);return e}function iGe(t){return t==null?null:S.isValidElement(t)?wl(t.props):typeof t=="object"&&!Array.isArray(t)?wl(t):null}var oGe=["children","width","height","viewBox","className","style","title","desc"];function pI(){return pI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pI.apply(null,arguments)}function lGe(t,e){if(t==null)return{};var r,n,a=cGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function cGe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var TD=S.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=t,d=lGe(t,oGe),h=s||{width:n,height:a,x:0,y:0},p=aa("recharts-surface",o);return S.createElement("svg",pI({},wl(d),{className:p,width:n,height:a,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),S.createElement("title",null,c),S.createElement("desc",null,u),r)}),uGe=["children","className"];function gI(){return gI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gI.apply(null,arguments)}function dGe(t,e){if(t==null)return{};var r,n,a=fGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fGe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var so=S.forwardRef((t,e)=>{var{children:r,className:n}=t,a=dGe(t,uGe),s=aa("recharts-layer",n);return S.createElement("g",gI({className:s},wl(a),{ref:e}),r)}),ple=S.createContext(null),hGe=()=>S.useContext(ple);function Wa(t){return function(){return t}}const gle=Math.cos,Q3=Math.sin,xd=Math.sqrt,J3=Math.PI,NS=2*J3,xI=Math.PI,vI=2*xI,$m=1e-6,mGe=vI-$m;function xle(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function pGe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xle;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class gGe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xle:pGe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,h=l-r,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(p>$m)if(!(Math.abs(h*c-u*d)>$m)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-o,b=a-l,w=c*c+u*u,_=g*g+b*b,N=Math.sqrt(w),A=Math.sqrt(p),j=s*Math.tan((xI-Math.acos((w+p-_)/(2*N*A)))/2),P=j/A,U=j/N;Math.abs(P-1)>$m&&this._append`L${e+P*d},${r+P*h}`,this._append`A${s},${s},0,0,${+(h*g>d*b)},${this._x1=e+U*c},${this._y1=r+U*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,h=1^o,p=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>$m||Math.abs(this._y1-d)>$m)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%vI+vI),p>mGe?this._append`A${n},${n},0,1,${h},${e-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:p>$m&&this._append`A${n},${n},0,${+(p>=xI)},${h},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function CD(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new gGe(e)}function kD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vle(t){this._context=t}vle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ES(t){return new vle(t)}function ble(t){return t[0]}function yle(t){return t[1]}function wle(t,e){var r=Wa(!0),n=null,a=ES,s=null,o=CD(l);t=typeof t=="function"?t:t===void 0?ble:Wa(t),e=typeof e=="function"?e:e===void 0?yle:Wa(e);function l(c){var u,d=(c=kD(c)).length,h,p=!1,g;for(n==null&&(s=a(g=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(h,u,c),+e(h,u,c));if(g)return s=null,g+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Wa(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Wa(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Wa(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function V5(t,e,r){var n=null,a=Wa(!0),s=null,o=ES,l=null,c=CD(u);t=typeof t=="function"?t:t===void 0?ble:Wa(+t),e=typeof e=="function"?e:Wa(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?yle:Wa(+r);function u(h){var p,g,b,w=(h=kD(h)).length,_,N=!1,A,j=new Array(w),P=new Array(w);for(s==null&&(l=o(A=c())),p=0;p<=w;++p){if(!(p<w&&a(_=h[p],p,h))===N)if(N=!N)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=g;--b)l.point(j[b],P[b]);l.lineEnd(),l.areaEnd()}N&&(j[p]=+t(_,p,h),P[p]=+e(_,p,h),l.point(n?+n(_,p,h):j[p],r?+r(_,p,h):P[p]))}if(A)return l=null,A+""||null}function d(){return wle().defined(a).curve(o).context(s)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Wa(+h),n=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Wa(+h),u):t},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Wa(+h),u):n},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Wa(+h),r=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Wa(+h),u):e},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Wa(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Wa(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,s!=null&&(l=o(s)),u):o},u.context=function(h){return arguments.length?(h==null?s=l=null:l=o(s=h),u):s},u}class _le{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function xGe(t){return new _le(t,!0)}function vGe(t){return new _le(t,!1)}const ID={draw(t,e){const r=xd(e/J3);t.moveTo(r,0),t.arc(0,0,r,0,NS)}},bGe={draw(t,e){const r=xd(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Nle=xd(1/3),yGe=Nle*2,wGe={draw(t,e){const r=xd(e/yGe),n=r*Nle;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},_Ge={draw(t,e){const r=xd(e),n=-r/2;t.rect(n,n,r,r)}},NGe=.8908130915292852,Ele=Q3(J3/10)/Q3(7*J3/10),EGe=Q3(NS/10)*Ele,AGe=-gle(NS/10)*Ele,SGe={draw(t,e){const r=xd(e*NGe),n=EGe*r,a=AGe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=NS*s/5,l=gle(o),c=Q3(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},nC=xd(3),jGe={draw(t,e){const r=-xd(e/(nC*3));t.moveTo(0,r*2),t.lineTo(-nC*r,-r),t.lineTo(nC*r,-r),t.closePath()}},eu=-.5,tu=xd(3)/2,bI=1/xd(12),TGe=(bI/2+1)*3,CGe={draw(t,e){const r=xd(e/TGe),n=r/2,a=r*bI,s=n,o=r*bI+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(eu*n-tu*a,tu*n+eu*a),t.lineTo(eu*s-tu*o,tu*s+eu*o),t.lineTo(eu*l-tu*c,tu*l+eu*c),t.lineTo(eu*n+tu*a,eu*a-tu*n),t.lineTo(eu*s+tu*o,eu*o-tu*s),t.lineTo(eu*l+tu*c,eu*c-tu*l),t.closePath()}};function kGe(t,e){let r=null,n=CD(a);t=typeof t=="function"?t:Wa(t||ID),e=typeof e=="function"?e:Wa(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Wa(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Wa(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function e4(){}function t4(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Ale(t){this._context=t}Ale.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:t4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:t4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function IGe(t){return new Ale(t)}function Sle(t){this._context=t}Sle.prototype={areaStart:e4,areaEnd:e4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:t4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function OGe(t){return new Sle(t)}function jle(t){this._context=t}jle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:t4(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PGe(t){return new jle(t)}function Tle(t){this._context=t}Tle.prototype={areaStart:e4,areaEnd:e4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function RGe(t){return new Tle(t)}function qq(t){return t<0?-1:1}function Gq(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(qq(s)+qq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function Wq(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function aC(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function r4(t){this._context=t}r4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:aC(this,this._t0,Wq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,aC(this,Wq(this,r=Gq(this,t,e)),r);break;default:aC(this,this._t0,r=Gq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Cle(t){this._context=new kle(t)}(Cle.prototype=Object.create(r4.prototype)).point=function(t,e){r4.prototype.point.call(this,e,t)};function kle(t){this._context=t}kle.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function DGe(t){return new r4(t)}function MGe(t){return new Cle(t)}function Ile(t){this._context=t}Ile.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=Kq(t),a=Kq(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Kq(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function LGe(t){return new Ile(t)}function AS(t,e){this._context=t,this._t=e}AS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function FGe(t){return new AS(t,.5)}function BGe(t){return new AS(t,0)}function UGe(t){return new AS(t,1)}function Fx(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function yI(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function zGe(t,e){return t[e]}function VGe(t){const e=[];return e.key=t,e}function $Ge(){var t=Wa([]),e=yI,r=Fx,n=zGe;function a(s){var o=Array.from(t.apply(this,arguments),VGe),l,c=o.length,u=-1,d;for(const h of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(h,o[l].key,u,s)]).data=h;for(l=0,d=kD(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Wa(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Wa(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?yI:typeof s=="function"?s:Wa(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Fx,a):r},a}function HGe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}Fx(t,e)}}function qGe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Fx(t,e)}}function GGe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[n][1]||0,p=d[n-1][1]||0,g=(h-p)/2,b=0;b<l;++b){var w=t[e[b]],_=w[n][1]||0,N=w[n-1][1]||0;g+=_-N}c+=h,u+=g*h}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Fx(t,e)}}var SS={},Ole={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(Ole);var OD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(OD);var jS={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(jS);var TS={},Ple={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(Ple);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ple,r=jS;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const h=a[l];u?h==="\\"&&l+1<o?(l++,c+=a[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,s.push(c),c=""):c+=h:h==="["?(d=!0,c&&(s.push(c),c="")):h==="."?c&&(s.push(c),c=""):c+=h,l++}return c&&s.push(c),s}t.toPath=n})(TS);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ole,r=OD,n=jS,a=TS;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||e.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}t.get=s})(SS);var WGe=SS.get;const Yp=Hc(WGe);var no=t=>t===0?0:t>0?1:-1,dd=t=>typeof t=="number"&&t!=+t,xh=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Mr=t=>(typeof t=="number"||t instanceof Number)&&!dd(t),Zd=t=>Mr(t)||typeof t=="string",KGe=0,_y=t=>{var e=++KGe;return"".concat(t||"").concat(e)},Ko=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Mr(e)&&typeof e!="string")return n;var s;if(xh(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return dd(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Rle=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function hs(t,e,r){return Mr(t)&&Mr(e)?t+r*(e-t):e}function Dle(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Yp(n,e))===r)}var xs=t=>t===null||typeof t>"u",Fw=t=>xs(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function XGe(t){return t!=null}function Bw(){}var YGe=["type","size","sizeType"];function wI(){return wI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wI.apply(null,arguments)}function Xq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xq(Object(r),!0).forEach(function(n){ZGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZGe(t,e,r){return(e=QGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QGe(t){var e=JGe(t,"string");return typeof e=="symbol"?e:e+""}function JGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eWe(t,e){if(t==null)return{};var r,n,a=tWe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function tWe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Mle={symbolCircle:ID,symbolCross:bGe,symbolDiamond:wGe,symbolSquare:_Ge,symbolStar:SGe,symbolTriangle:jGe,symbolWye:CGe},rWe=Math.PI/180,nWe=t=>{var e="symbol".concat(Fw(t));return Mle[e]||ID},aWe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*rWe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},sWe=(t,e)=>{Mle["symbol".concat(Fw(t))]=e},PD=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=eWe(t,YGe),s=Yq(Yq({},a),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var p=nWe(o),g=kGe().type(p).size(aWe(r,n,o)),b=g();if(b!==null)return b},{className:c,cx:u,cy:d}=s,h=wl(s);return Mr(u)&&Mr(d)&&Mr(r)?S.createElement("path",wI({},h,{className:aa("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};PD.registerSymbol=sWe;var Lle=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,RD=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(S.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{jD(a)&&(n[a]=s=>r[a](r,s))}),n},iWe=(t,e,r)=>n=>(t(e,r,n),null),Uw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];jD(a)&&typeof s=="function"&&(n||(n={}),n[a]=iWe(s,e,r))}),n};function Zq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oWe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zq(Object(r),!0).forEach(function(n){lWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lWe(t,e,r){return(e=cWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cWe(t){var e=uWe(t,"string");return typeof e=="symbol"?e:e+""}function uWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Si(t,e){var r=oWe({},t),n=e,a=Object.keys(e),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function n4(){return n4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},n4.apply(null,arguments)}function Qq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dWe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qq(Object(r),!0).forEach(function(n){fWe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fWe(t,e,r){return(e=hWe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hWe(t){var e=mWe(t,"string");return typeof e=="symbol"?e:e+""}function mWe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var su=32,pWe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function gWe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=su/2,s=su/6,o=su/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return S.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:su,y2:a,className:"recharts-legend-icon"})}if(c==="line")return S.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(su,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return S.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(su/8,"h").concat(su,"v").concat(su*3/4,"h").concat(-su,"z"),className:"recharts-legend-icon"});if(S.isValidElement(e.legendIcon)){var d=dWe({},e);return delete d.legendIcon,S.cloneElement(e.legendIcon,d)}return S.createElement(PD,{fill:l,cx:a,cy:a,size:su,sizeType:"diameter",type:c})}function xWe(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:su,height:su},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,h)=>{var p=d.formatter||a,g=aa({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:d.inactive});if(d.type==="none")return null;var b=d.inactive?s:d.color,w=p?p(d.value,d,h):d.value;return S.createElement("li",n4({className:g,style:c,key:"legend-item-".concat(h)},Uw(t,d,h)),S.createElement(TD,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(w," legend icon")},S.createElement(gWe,{data:d,iconType:o,inactiveColor:s})),S.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},w))})}var vWe=t=>{var e=Si(t,pWe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return S.createElement("ul",{className:"recharts-default-legend",style:s},S.createElement(xWe,n4({},e,{payload:r})))},Fle={},Ble={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=e})(Ble);var DD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(DD);var Ule={},CS={},zle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(zle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zle;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(CS);var Vle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Vle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CS,r=Vle;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Ule);var $le={},Hle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SS;function r(n){return function(a){return e.get(a,n)}}t.property=r})(Hle);var qle={},MD={},Gle={},LD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(LD);var FD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(FD);var BD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(BD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LD,r=FD,n=BD;function a(d,h,p){return typeof p!="function"?a(d,h,()=>{}):s(d,h,function g(b,w,_,N,A,j){const P=p(b,w,_,N,A,j);return P!==void 0?!!P:s(b,w,g,j)},new Map)}function s(d,h,p,g){if(h===d)return!0;switch(typeof h){case"object":return o(d,h,p,g);case"function":return Object.keys(h).length>0?s(d,{...h},p,g):n.eq(d,h);default:return e.isObject(d)?typeof h=="string"?h==="":!0:n.eq(d,h)}}function o(d,h,p,g){if(h==null)return!0;if(Array.isArray(h))return c(d,h,p,g);if(h instanceof Map)return l(d,h,p,g);if(h instanceof Set)return u(d,h,p,g);const b=Object.keys(h);if(d==null)return b.length===0;if(b.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===d;g==null||g.set(h,d);try{for(let w=0;w<b.length;w++){const _=b[w];if(!r.isPrimitive(d)&&!(_ in d)||h[_]===void 0&&d[_]!==void 0||h[_]===null&&d[_]!==null||!p(d[_],h[_],_,d,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function l(d,h,p,g){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[b,w]of h.entries()){const _=d.get(b);if(p(_,w,b,d,h,g)===!1)return!1}return!0}function c(d,h,p,g){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const b=new Set;for(let w=0;w<h.length;w++){const _=h[w];let N=!1;for(let A=0;A<d.length;A++){if(b.has(A))continue;const j=d[A];let P=!1;if(p(j,_,w,d,h,g)&&(P=!0),P){b.add(A),N=!0;break}}if(!N)return!1}return!0}function u(d,h,p,g){return h.size===0?!0:d instanceof Set?c([...d],[...h],p,g):!1}t.isMatchWith=a,t.isSetMatch=u})(Gle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gle;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(MD);var Wle={},UD={},Kle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(Kle);var zD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(zD);var VD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",p="[object ArrayBuffer]",g="[object Object]",b="[object Error]",w="[object DataView]",_="[object Uint8Array]",N="[object Uint8ClampedArray]",A="[object Uint16Array]",j="[object Uint32Array]",P="[object BigUint64Array]",U="[object Int8Array]",G="[object Int16Array]",O="[object Int32Array]",D="[object BigInt64Array]",I="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=p,t.arrayTag=d,t.bigInt64ArrayTag=D,t.bigUint64ArrayTag=P,t.booleanTag=a,t.dataViewTag=w,t.dateTag=l,t.errorTag=b,t.float32ArrayTag=I,t.float64ArrayTag=V,t.functionTag=h,t.int16ArrayTag=G,t.int32ArrayTag=O,t.int8ArrayTag=U,t.mapTag=c,t.numberTag=n,t.objectTag=g,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=A,t.uint32ArrayTag=j,t.uint8ArrayTag=_,t.uint8ClampedArrayTag=N})(VD);var Xle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(Xle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Kle,r=zD,n=VD,a=FD,s=Xle;function o(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,p,g=new Map,b=void 0){const w=b==null?void 0:b(d,h,p,g);if(w!==void 0)return w;if(a.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const _=new Array(d.length);g.set(d,_);for(let N=0;N<d.length;N++)_[N]=l(d[N],N,p,g,b);return Object.hasOwn(d,"index")&&(_.index=d.index),Object.hasOwn(d,"input")&&(_.input=d.input),_}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const _=new RegExp(d.source,d.flags);return _.lastIndex=d.lastIndex,_}if(d instanceof Map){const _=new Map;g.set(d,_);for(const[N,A]of d)_.set(N,l(A,N,p,g,b));return _}if(d instanceof Set){const _=new Set;g.set(d,_);for(const N of d)_.add(l(N,void 0,p,g,b));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const _=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,_);for(let N=0;N<d.length;N++)_[N]=l(d[N],N,p,g,b);return _}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const _=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,_),c(_,d,p,g,b),_}if(typeof File<"u"&&d instanceof File){const _=new File([d],d.name,{type:d.type});return g.set(d,_),c(_,d,p,g,b),_}if(typeof Blob<"u"&&d instanceof Blob){const _=new Blob([d],{type:d.type});return g.set(d,_),c(_,d,p,g,b),_}if(d instanceof Error){const _=new d.constructor;return g.set(d,_),_.message=d.message,_.name=d.name,_.stack=d.stack,_.cause=d.cause,c(_,d,p,g,b),_}if(d instanceof Boolean){const _=new Boolean(d.valueOf());return g.set(d,_),c(_,d,p,g,b),_}if(d instanceof Number){const _=new Number(d.valueOf());return g.set(d,_),c(_,d,p,g,b),_}if(d instanceof String){const _=new String(d.valueOf());return g.set(d,_),c(_,d,p,g,b),_}if(typeof d=="object"&&u(d)){const _=Object.create(Object.getPrototypeOf(d));return g.set(d,_),c(_,d,p,g,b),_}return d}function c(d,h,p=d,g,b){const w=[...Object.keys(h),...e.getSymbols(h)];for(let _=0;_<w.length;_++){const N=w[_],A=Object.getOwnPropertyDescriptor(d,N);(A==null||A.writable)&&(d[N]=l(h[N],N,p,g,b))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(UD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UD;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(Wle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD,r=Wle;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(qle);var Yle={},Zle={},Qle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UD,r=VD;function n(a,s){return e.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(h,a),h}case r.argumentsTag:{const h={};return e.copyProperties(h,a),h.length=a.length,h[Symbol.iterator]=a[Symbol.iterator],h}default:return}})}t.cloneDeepWith=n})(Qle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qle;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Zle);var Jle={},$D={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})($D);var ece={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zD;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(ece);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OD,r=$D,n=ece,a=TS;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=s})(Jle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD,r=jS,n=Zle,a=SS,s=Jle;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(Yle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD,r=Hle,n=qle,a=Yle;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})($le);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ble,r=DD,n=Ule,a=$le;function s(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),a.iteratee(l)):[]}t.uniqBy=s})(Fle);var bWe=Fle.uniqBy;const Jq=Hc(bWe);function tce(t,e,r){return e===!0?Jq(t,r):typeof e=="function"?Jq(t,e):t}var rce={exports:{}},nce={},ace={exports:{}},sce={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=S;function yWe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wWe=typeof Object.is=="function"?Object.is:yWe,_We=Bx.useState,NWe=Bx.useEffect,EWe=Bx.useLayoutEffect,AWe=Bx.useDebugValue;function SWe(t,e){var r=e(),n=_We({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return EWe(function(){a.value=r,a.getSnapshot=e,sC(a)&&s({inst:a})},[t,r,e]),NWe(function(){return sC(a)&&s({inst:a}),t(function(){sC(a)&&s({inst:a})})},[t]),AWe(r),r}function sC(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!wWe(t,r)}catch{return!0}}function jWe(t,e){return e()}var TWe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jWe:SWe;sce.useSyncExternalStore=Bx.useSyncExternalStore!==void 0?Bx.useSyncExternalStore:TWe;ace.exports=sce;var CWe=ace.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kS=S,kWe=CWe;function IWe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var OWe=typeof Object.is=="function"?Object.is:IWe,PWe=kWe.useSyncExternalStore,RWe=kS.useRef,DWe=kS.useEffect,MWe=kS.useMemo,LWe=kS.useDebugValue;nce.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=RWe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=MWe(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),a!==void 0&&o.hasValue){var b=o.value;if(a(b,g))return h=b}return h=g}if(b=h,OWe(d,g))return b;var w=n(g);return a!==void 0&&a(b,w)?(d=g,b):(d=g,h=w)}var u=!1,d,h,p=r===void 0?null:r;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,r,n,a]);var l=PWe(t,s[0],s[1]);return DWe(function(){o.hasValue=!0,o.value=l},[l]),LWe(l),l};rce.exports=nce;var FWe=rce.exports,HD=S.createContext(null),BWe=t=>t,Xa=()=>{var t=S.useContext(HD);return t?t.store.dispatch:BWe},oE=()=>{},UWe=()=>oE,zWe=(t,e)=>t===e;function Cr(t){var e=S.useContext(HD);return FWe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:UWe,e?e.store.getState:oE,e?e.store.getState:oE,e?t:oE,zWe)}function VWe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function $We(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function HWe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var eG=t=>Array.isArray(t)?t:[t];function qWe(t){const e=Array.isArray(t[0])?t[0]:t;return HWe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function GWe(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var WWe=class{constructor(t){this.value=t}deref(){return this.value}},KWe=typeof WeakRef<"u"?WeakRef:WWe,XWe=0,tG=1;function $5(){return{s:XWe,v:void 0,o:null,p:null}}function ice(t,e={}){let r=$5();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var h;let l=r;const{length:c}=arguments;for(let p=0,g=c;p<g;p++){const b=arguments[p];if(typeof b=="function"||typeof b=="object"&&b!==null){let w=l.o;w===null&&(l.o=w=new WeakMap);const _=w.get(b);_===void 0?(l=$5(),w.set(b,l)):l=_}else{let w=l.p;w===null&&(l.p=w=new Map);const _=w.get(b);_===void 0?(l=$5(),w.set(b,l)):l=_}}const u=l;let d;if(l.s===tG)d=l.v;else if(d=t.apply(null,arguments),s++,n){const p=((h=a==null?void 0:a.deref)==null?void 0:h.call(a))??a;p!=null&&n(p,d)&&(d=p,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new KWe(d):d}return u.s=tG,u.v=d,d}return o.clearCache=()=>{r=$5(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function YWe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),VWe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:h,memoizeOptions:p=[],argsMemoize:g=ice,argsMemoizeOptions:b=[]}=d,w=eG(p),_=eG(b),N=qWe(a),A=h(function(){return s++,u.apply(null,arguments)},...w),j=g(function(){o++;const U=GWe(N,arguments);return l=A.apply(null,U),l},..._);return Object.assign(j,{resultFunc:u,memoizedResultFunc:A,dependencies:N,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var bt=YWe(ice),ZWe=Object.assign((t,e=bt)=>{$We(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>ZWe}),oce={},lce={},cce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=e(n),l=e(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=r})(cce);var uce={},qD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(qD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qD,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(uce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cce,r=uce,n=TS;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(g=>String(g));const u=(g,b)=>{let w=g;for(let _=0;_<b.length&&w!=null;++_)w=w[b[_]];return w},d=(g,b)=>b==null||g==null?b:typeof g=="object"&&"key"in g?Object.hasOwn(b,g.key)?b[g.key]:u(b,g.path):typeof g=="function"?g(b):Array.isArray(g)?u(b,g):typeof b=="object"?b[g]:b,h=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return s.map(g=>({original:g,criteria:h.map(b=>d(b,g))})).slice().sort((g,b)=>{for(let w=0;w<h.length;w++){const _=e.compareValues(g.criteria[w],b.criteria[w],l[w]);if(_!==0)return _}return 0}).map(g=>g.original)}t.orderBy=a})(lce);var dce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}t.flatten=e})(dce);var GD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$D,r=CS,n=LD,a=BD;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}t.isIterateeCall=s})(GD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lce,r=dce,n=GD;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=a})(oce);var QWe=oce.sortBy;const IS=Hc(QWe);var fce=t=>t.legend.settings,JWe=t=>t.legend.size,eKe=t=>t.legend.payload,tKe=bt([eKe,fce],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?IS(n,r):n});function rKe(){return Cr(tKe)}var H5=1;function hce(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>H5||Math.abs(o.left-e.left)>H5||Math.abs(o.top-e.top)>H5||Math.abs(o.width-e.width)>H5)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function xo(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var nKe=typeof Symbol=="function"&&Symbol.observable||"@@observable",rG=nKe,iC=()=>Math.random().toString(36).substring(7).split("").join("."),aKe={INIT:`@@redux/INIT${iC()}`,REPLACE:`@@redux/REPLACE${iC()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${iC()}`},a4=aKe;function WD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function mce(t,e,r){if(typeof t!="function")throw new Error(xo(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(xo(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(xo(1));return r(mce)(t,e)}let n=t,a=e,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((_,N)=>{o.set(N,_)}))}function d(){if(c)throw new Error(xo(3));return a}function h(_){if(typeof _!="function")throw new Error(xo(4));if(c)throw new Error(xo(5));let N=!0;u();const A=l++;return o.set(A,_),function(){if(N){if(c)throw new Error(xo(6));N=!1,u(),o.delete(A),s=null}}}function p(_){if(!WD(_))throw new Error(xo(7));if(typeof _.type>"u")throw new Error(xo(8));if(typeof _.type!="string")throw new Error(xo(17));if(c)throw new Error(xo(9));try{c=!0,a=n(a,_)}finally{c=!1}return(s=o).forEach(A=>{A()}),_}function g(_){if(typeof _!="function")throw new Error(xo(10));n=_,p({type:a4.REPLACE})}function b(){const _=h;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(xo(11));function A(){const P=N;P.next&&P.next(d())}return A(),{unsubscribe:_(A)}},[rG](){return this}}}return p({type:a4.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:g,[rG]:b}}function sKe(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:a4.INIT})>"u")throw new Error(xo(12));if(typeof r(void 0,{type:a4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xo(13))})}function pce(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let a;try{sKe(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const h=n[d],p=r[h],g=o[h],b=p(g,l);if(typeof b>"u")throw l&&l.type,new Error(xo(14));u[h]=b,c=c||b!==g}return c=c||n.length!==Object.keys(o).length,c?u:o}}function s4(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function iKe(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(xo(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(o));return s=s4(...l)(a.dispatch),{...a,dispatch:s}}}function gce(t){return WD(t)&&"type"in t&&typeof t.type=="string"}var xce=Symbol.for("immer-nothing"),nG=Symbol.for("immer-draftable"),_l=Symbol.for("immer-state");function ed(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Oc=Object,Ux=Oc.getPrototypeOf,i4="constructor",OS="prototype",_I="configurable",o4="enumerable",lE="writable",Ny="value",vh=t=>!!t&&!!t[_l];function fd(t){var e;return t?vce(t)||PS(t)||!!t[nG]||!!((e=t[i4])!=null&&e[nG])||RS(t)||DS(t):!1}var oKe=Oc[OS][i4].toString(),aG=new WeakMap;function vce(t){if(!t||!KD(t))return!1;const e=Ux(t);if(e===null||e===Oc[OS])return!0;const r=Oc.hasOwnProperty.call(e,i4)&&e[i4];if(r===Object)return!0;if(!s1(r))return!1;let n=aG.get(r);return n===void 0&&(n=Function.toString.call(r),aG.set(r,n)),n===oKe}function zw(t,e,r=!0){Vw(t)===0?(r?Reflect.ownKeys(t):Oc.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function Vw(t){const e=t[_l];return e?e.type_:PS(t)?1:RS(t)?2:DS(t)?3:0}var sG=(t,e,r=Vw(t))=>r===2?t.has(e):Oc[OS].hasOwnProperty.call(t,e),NI=(t,e,r=Vw(t))=>r===2?t.get(e):t[e],l4=(t,e,r,n=Vw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function lKe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var PS=Array.isArray,RS=t=>t instanceof Map,DS=t=>t instanceof Set,KD=t=>typeof t=="object",s1=t=>typeof t=="function",oC=t=>typeof t=="boolean",Ef=t=>t.copy_||t.base_,XD=t=>t.modified_?t.copy_:t.base_;function EI(t,e){if(RS(t))return new Map(t);if(DS(t))return new Set(t);if(PS(t))return Array[OS].slice.call(t);const r=vce(t);if(e===!0||e==="class_only"&&!r){const n=Oc.getOwnPropertyDescriptors(t);delete n[_l];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[lE]===!1&&(l[lE]=!0,l[_I]=!0),(l.get||l.set)&&(n[o]={[_I]:!0,[lE]:!0,[o4]:l[o4],[Ny]:t[o]})}return Oc.create(Ux(t),n)}else{const n=Ux(t);if(n!==null&&r)return{...t};const a=Oc.create(n);return Oc.assign(a,t)}}function YD(t,e=!1){return MS(t)||vh(t)||!fd(t)||(Vw(t)>1&&Oc.defineProperties(t,{set:q5,add:q5,clear:q5,delete:q5}),Oc.freeze(t),e&&zw(t,(r,n)=>{YD(n,!0)},!1)),t}function cKe(){ed(2)}var q5={[Ny]:cKe};function MS(t){return t===null||!KD(t)?!0:Oc.isFrozen(t)}var c4="MapSet",AI="Patches",bce={};function zx(t){const e=bce[t];return e||ed(0,t),e}var uKe=t=>!!bce[t],Ey,yce=()=>Ey,dKe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:uKe(c4)?zx(c4):void 0});function iG(t,e){e&&(t.patchPlugin_=zx(AI),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function SI(t){jI(t),t.drafts_.forEach(fKe),t.drafts_=null}function jI(t){t===Ey&&(Ey=t.parent_)}var oG=t=>Ey=dKe(Ey,t);function fKe(t){const e=t[_l];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function lG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[_l].modified_&&(SI(e),ed(4)),fd(t)&&(t=cG(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[_l].base_,t,e)}else t=cG(e,r);return hKe(e,t,!0),SI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==xce?t:void 0}function cG(t,e){if(MS(e))return e;const r=e[_l];if(!r)return ZD(e,t.handledSet_,t);if(!LS(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);Nce(r,t)}return r.copy_}function hKe(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&YD(e,r)}function wce(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var LS=(t,e)=>t.scope_===e,mKe=[];function _ce(t,e,r,n){const a=Ef(t),s=t.type_;if(n!==void 0&&NI(a,n,s)===e){l4(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;zw(a,(c,u)=>{if(vh(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=t.draftLocations_.get(e)??mKe;for(const l of o)l4(a,l,r,s)}function pKe(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!LS(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=XD(s);_ce(t,s.draft_??s,o,r),Nce(s,a)})}function Nce(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}wce(t)}}function gKe(t,e,r){const{scope_:n}=t;if(vh(r)){const a=r[_l];LS(a,n)&&a.callbacks_.push(function(){cE(t);const o=XD(a);_ce(t,r,o,e)})}else fd(r)&&t.callbacks_.push(function(){const s=Ef(t);NI(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&ZD(NI(t.copy_,e,t.type_),n.handledSet_,n)})}function ZD(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||vh(t)||e.has(t)||!fd(t)||MS(t)||(e.add(t),zw(t,(n,a)=>{if(vh(a)){const s=a[_l];if(LS(s,r)){const o=XD(s);l4(t,n,o,t.type_),wce(s)}}else fd(a)&&ZD(a,e,r)})),t}function xKe(t,e){const r=PS(t),n={type_:r?1:0,scope_:e?e.scope_:yce(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=QD;r&&(a=[n],s=Ay);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var QD={get(t,e){if(e===_l)return t;const r=Ef(t);if(!sG(r,e,t.type_))return vKe(t,r,e);const n=r[e];if(t.finalized_||!fd(n))return n;if(n===lC(t.base_,e)){cE(t);const a=t.type_===1?+e:e,s=CI(t.scope_,n,t,a);return t.copy_[a]=s}return n},has(t,e){return e in Ef(t)},ownKeys(t){return Reflect.ownKeys(Ef(t))},set(t,e,r){const n=Ece(Ef(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=lC(Ef(t),e),s=a==null?void 0:a[_l];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(lKe(r,a)&&(r!==void 0||sG(t.base_,e,t.type_)))return!0;cE(t),TI(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),gKe(t,e,r)),!0},deleteProperty(t,e){return cE(t),lC(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),TI(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Ef(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[lE]:!0,[_I]:t.type_!==1||e!=="length",[o4]:n[o4],[Ny]:r[e]}},defineProperty(){ed(11)},getPrototypeOf(t){return Ux(t.base_)},setPrototypeOf(){ed(12)}},Ay={};zw(QD,(t,e)=>{Ay[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}});Ay.deleteProperty=function(t,e){return Ay.set.call(this,t,e,void 0)};Ay.set=function(t,e,r){return QD.set.call(this,t[0],e,r,t[0])};function lC(t,e){const r=t[_l];return(r?Ef(r):t)[e]}function vKe(t,e,r){var a;const n=Ece(e,r);return n?Ny in n?n[Ny]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Ece(t,e){if(!(e in t))return;let r=Ux(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Ux(r)}}function TI(t){t.modified_||(t.modified_=!0,t.parent_&&TI(t.parent_))}function cE(t){t.copy_||(t.assigned_=new Map,t.copy_=EI(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var bKe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(s1(r)&&!s1(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,h=>n.call(this,h,...d))}}s1(n)||ed(6),a!==void 0&&!s1(a)&&ed(7);let s;if(fd(r)){const o=oG(this),l=CI(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?SI(o):jI(o)}return iG(o,a),lG(s,o)}else if(!r||!KD(r)){if(s=n(r),s===void 0&&(s=r),s===xce&&(s=void 0),this.autoFreeze_&&YD(s,!0),a){const o=[],l=[];zx(AI).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else ed(1,r)},this.produceWithPatches=(r,n)=>{if(s1(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},oC(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),oC(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),oC(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){fd(e)||ed(8),vh(e)&&(e=od(e));const r=oG(this),n=CI(r,e,void 0);return n[_l].isManual_=!0,jI(r),n}finishDraft(e,r){const n=e&&e[_l];(!n||!n.isManual_)&&ed(9);const{scope_:a}=n;return iG(a,r),lG(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=zx(AI).applyPatches_;return vh(e)?a(e,r):this.produce(e,s=>a(s,r))}};function CI(t,e,r,n){const[a,s]=RS(e)?zx(c4).proxyMap_(e,r):DS(e)?zx(c4).proxySet_(e,r):xKe(e,r);return((r==null?void 0:r.scope_)??yce()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?pKe(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function od(t){return vh(t)||ed(10,t),Ace(t)}function Ace(t){if(!fd(t)||MS(t))return t;const e=t[_l];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=EI(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=EI(t,!0);return zw(r,(a,s)=>{l4(r,a,Ace(s))},n),e&&(e.finalized_=!1),r}var yKe=new bKe,Sce=yKe.produce;function jce(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var wKe=jce(),_Ke=jce,NKe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?s4:s4.apply(null,arguments)};function ku(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Lc(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>gce(n)&&n.type===t,r}var Tce=class Ob extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ob.prototype)}static get[Symbol.species](){return Ob}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ob(...e[0].concat(this)):new Ob(...e.concat(this))}};function uG(t){return fd(t)?Sce(t,()=>{}):t}function G5(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function EKe(t){return typeof t=="boolean"}var AKe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new Tce;return r&&(EKe(r)?o.push(wKe):o.push(_Ke(r.extraArgument))),o},Cce="RTK_autoBatch",ds=()=>t=>({payload:t,meta:{[Cce]:!0}}),dG=t=>e=>{setTimeout(e,t)},kce=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:dG(10):t.type==="callback"?t.queueNotification:dG(t.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>a&&d(),p=n.subscribe(h);return l.add(d),()=>{p(),l.delete(d)}},dispatch(d){var h;try{return a=!((h=d==null?void 0:d.meta)!=null&&h[Cce]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},SKe=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new Tce(t);return n&&a.push(kce(typeof n=="object"?n:void 0)),a};function jKe(t){const e=AKe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(WD(r))l=pce(r);else throw new Error(Lc(1));let c;typeof n=="function"?c=n(e):c=e();let u=s4;a&&(u=NKe({trace:!1,...typeof a=="object"&&a}));const d=iKe(...c),h=SKe(d);let p=typeof o=="function"?o(h):h();const g=u(...p);return mce(l,s,g)}function Ice(t){const e={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Lc(28));if(l in e)throw new Error(Lc(29));return e[l]=o,a},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function TKe(t){return typeof t=="function"}function CKe(t,e){let[r,n,a]=Ice(e),s;if(TKe(t))s=()=>uG(t());else{const l=uG(t);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,h)=>{if(h)if(vh(d)){const g=h(d,c);return g===void 0?d:g}else{if(fd(d))return Sce(d,p=>h(p,c));{const p=h(d,c);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},l)}return o.getInitialState=s,o}var kKe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",IKe=(t=21)=>{let e="",r=t;for(;r--;)e+=kKe[Math.random()*64|0];return e},OKe=Symbol.for("rtk-slice-createasyncthunk");function PKe(t,e){return`${t}/${e}`}function RKe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[OKe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(Lc(11));const l=(typeof a.reducers=="function"?a.reducers(MKe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(P,U){const G=typeof P=="string"?P:P.type;if(!G)throw new Error(Lc(12));if(G in u.sliceCaseReducersByType)throw new Error(Lc(13));return u.sliceCaseReducersByType[G]=U,d},addMatcher(P,U){return u.sliceMatchers.push({matcher:P,reducer:U}),d},exposeAction(P,U){return u.actionCreators[P]=U,d},exposeCaseReducer(P,U){return u.sliceCaseReducersByName[P]=U,d}};c.forEach(P=>{const U=l[P],G={reducerName:P,type:PKe(s,P),createNotation:typeof a.reducers=="function"};FKe(U)?UKe(G,U,d,e):LKe(G,U,d)});function h(){const[P={},U=[],G=void 0]=typeof a.extraReducers=="function"?Ice(a.extraReducers):[a.extraReducers],O={...P,...u.sliceCaseReducersByType};return CKe(a.initialState,D=>{for(let I in O)D.addCase(I,O[I]);for(let I of u.sliceMatchers)D.addMatcher(I.matcher,I.reducer);for(let I of U)D.addMatcher(I.matcher,I.reducer);G&&D.addDefaultCase(G)})}const p=P=>P,g=new Map,b=new WeakMap;let w;function _(P,U){return w||(w=h()),w(P,U)}function N(){return w||(w=h()),w.getInitialState()}function A(P,U=!1){function G(D){let I=D[P];return typeof I>"u"&&U&&(I=G5(b,G,N)),I}function O(D=p){const I=G5(g,U,()=>new WeakMap);return G5(I,D,()=>{const V={};for(const[R,B]of Object.entries(a.selectors??{}))V[R]=DKe(B,D,()=>G5(b,D,N),U);return V})}return{reducerPath:P,getSelectors:O,get selectors(){return O(G)},selectSlice:G}}const j={name:s,reducer:_,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:N,...A(o),injectInto(P,{reducerPath:U,...G}={}){const O=U??o;return P.inject({reducerPath:O,reducer:_},G),{...j,...A(O,!0)}}};return j}}function DKe(t,e,r,n){function a(s,...o){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return a.unwrapped=t,a}var tc=RKe();function MKe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function LKe({type:t,reducerName:e,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!BKe(n))throw new Error(Lc(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?ku(t,o):ku(t))}function FKe(t){return t._reducerDefinitionType==="asyncThunk"}function BKe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function UKe({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Lc(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,h=a(t,s,d);n.exposeAction(e,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(e,{fulfilled:o||W5,pending:l||W5,rejected:c||W5,settled:u||W5})}function W5(){}var zKe="task",Oce="listener",Pce="completed",JD="cancelled",VKe=`task-${JD}`,$Ke=`task-${Pce}`,kI=`${Oce}-${JD}`,HKe=`${Oce}-${Pce}`,FS=class{constructor(t){oa(this,"name","TaskAbortError");oa(this,"message");this.code=t,this.message=`${zKe} ${JD} (reason: ${t})`}},eM=(t,e)=>{if(typeof t!="function")throw new TypeError(Lc(32))},u4=()=>{},Rce=(t,e=u4)=>(t.catch(e),t),Dce=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Sp=t=>{if(t.aborted)throw new FS(t.reason)};function Mce(t,e){let r=u4;return new Promise((n,a)=>{const s=()=>a(new FS(t.reason));if(t.aborted){s();return}r=Dce(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=u4})}var qKe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof FS?"cancelled":"rejected",error:r}}finally{e==null||e()}},d4=t=>e=>Rce(Mce(t,e).then(r=>(Sp(t),r))),Lce=t=>{const e=d4(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:J1}=Object,fG={},BS="listenerMiddleware",GKe=(t,e)=>{const r=n=>Dce(t,()=>n.abort(t.reason));return(n,a)=>{eM(n);const s=new AbortController;r(s);const o=qKe(async()=>{Sp(t),Sp(s.signal);const l=await n({pause:d4(s.signal),delay:Lce(s.signal),signal:s.signal});return Sp(s.signal),l},()=>s.abort($Ke));return a!=null&&a.autoJoin&&e.push(o.catch(u4)),{result:d4(t)(o),cancel(){s.abort(VKe)}}}},WKe=(t,e)=>{const r=async(n,a)=>{Sp(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(h,p)=>{p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Mce(e,Promise.race(l));return Sp(e),c}finally{s()}};return(n,a)=>Rce(r(n,a))},Fce=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=ku(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Lc(21));return eM(s),{predicate:a,type:e,effect:s}},Bce=J1(t=>{const{type:e,predicate:r,effect:n}=Fce(t);return{id:IKe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Lc(22))}}},{withTypes:()=>Bce}),hG=(t,e)=>{const{type:r,effect:n,predicate:a}=Fce(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},II=t=>{t.pending.forEach(e=>{e.abort(kI)})},KKe=(t,e)=>()=>{for(const r of e.keys())II(r);t.clear()},mG=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Uce=J1(ku(`${BS}/add`),{withTypes:()=>Uce}),XKe=ku(`${BS}/removeAll`),zce=J1(ku(`${BS}/remove`),{withTypes:()=>zce}),YKe=(...t)=>{console.error(`${BS}/error`,...t)},$w=(t={})=>{const e=new Map,r=new Map,n=g=>{const b=r.get(g)??0;r.set(g,b+1)},a=g=>{const b=r.get(g)??1;b===1?r.delete(g):r.set(g,b-1)},{extra:s,onError:o=YKe}=t;eM(o);const l=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),b=>{g.unsubscribe(),b!=null&&b.cancelActive&&II(g)}),c=g=>{const b=hG(e,g)??Bce(g);return l(b)};J1(c,{withTypes:()=>c});const u=g=>{const b=hG(e,g);return b&&(b.unsubscribe(),g.cancelActive&&II(b)),!!b};J1(u,{withTypes:()=>u});const d=async(g,b,w,_)=>{const N=new AbortController,A=WKe(c,N.signal),j=[];try{g.pending.add(N),n(g),await Promise.resolve(g.effect(b,J1({},w,{getOriginalState:_,condition:(P,U)=>A(P,U).then(Boolean),take:A,delay:Lce(N.signal),pause:d4(N.signal),extra:s,signal:N.signal,fork:GKe(N.signal,j),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((P,U,G)=>{P!==N&&(P.abort(kI),G.delete(P))})},cancel:()=>{N.abort(kI),g.pending.delete(N)},throwIfCancelled:()=>{Sp(N.signal)}})))}catch(P){P instanceof FS||mG(o,P,{raisedBy:"effect"})}finally{await Promise.all(j),N.abort(HKe),a(g),g.pending.delete(N)}},h=KKe(e,r);return{middleware:g=>b=>w=>{if(!gce(w))return b(w);if(Uce.match(w))return c(w.payload);if(XKe.match(w)){h();return}if(zce.match(w))return u(w.payload);let _=g.getState();const N=()=>{if(_===fG)throw new Error(Lc(23));return _};let A;try{if(A=b(w),e.size>0){const j=g.getState(),P=Array.from(e.values());for(const U of P){let G=!1;try{G=U.predicate(w,j,_)}catch(O){G=!1,mG(o,O,{raisedBy:"predicate"})}G&&d(U,w,g,N)}}}finally{_=fG}return A},startListening:c,stopListening:u,clearListeners:h}};function Lc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var ZKe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Vce=tc({name:"chartLayout",initialState:ZKe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:QKe,setLayout:JKe,setChartSize:eXe,setScale:tXe}=Vce.actions,rXe=Vce.reducer;function $ce(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function pG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function j1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pG(Object(r),!0).forEach(function(n){nXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nXe(t,e,r){return(e=aXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aXe(t){var e=sXe(t,"string");return typeof e=="symbol"?e:e+""}function sXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ba(t,e,r){return xs(t)||xs(e)?r:Zd(e)?Yp(t,e,r):typeof e=="function"?e(t):r}var iXe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&Mr(t[s]))return j1(j1({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&Mr(t[o]))return j1(j1({},t),{},{[o]:t[o]+(a||0)})}return t},wm=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",Hce=(t,e,r,n)=>{if(n)return t.map(l=>l.coordinate);var a,s,o=t.map(l=>(l.coordinate===e&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(e),s||o.push(r),o},qce=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:p,axisType:g}=t;if(!o)return null;var b=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=a==="category"&&o.bandwidth?o.bandwidth()/b:0;if(w=g==="angleAxis"&&s&&s.length>=2?no(s[0]-s[1])*2*w:w,h||p){var _=(h||p||[]).map((N,A)=>{var j=n?n.indexOf(N):N;return{coordinate:o(j)+w,value:N,offset:w,index:A}});return _.filter(N=>!dd(N.coordinate))}return c&&u?u.map((N,A)=>({coordinate:o(N)+w,value:N,index:A,offset:w})):o.ticks&&d!=null?o.ticks(d).map((N,A)=>({coordinate:o(N)+w,value:N,offset:w,index:A})):o.domain().map((N,A)=>({coordinate:o(N)+w,value:n?n[N]:N,index:A,offset:w}))},gG=1e-4,oXe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-gG,s=Math.max(n[0],n[1])+gG,o=t(e[0]),l=t(e[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},lXe=(t,e)=>{if(!e||e.length!==2||!Mr(e[0])||!Mr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Mr(t[0])||t[0]<r)&&(a[0]=r),(!Mr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},cXe=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var a=0,s=0,o=0;o<e;++o){var l=dd(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=a,t[o][r][1]=a+l,a=t[o][r][1]):(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1])}},uXe=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var a=0,s=0;s<e;++s){var o=dd(t[s][r][1])?t[s][r][0]:t[s][r][1];o>=0?(t[s][r][0]=a,t[s][r][1]=a+o,a=t[s][r][1]):(t[s][r][0]=0,t[s][r][1]=0)}},dXe={sign:cXe,expand:HGe,none:Fx,silhouette:qGe,wiggle:GGe,positive:uXe},fXe=(t,e,r)=>{var n=dXe[r],a=$Ge().keys(e).value((s,o)=>Number(Ba(s,o,0))).order(yI).offset(n);return a(t)};function hXe(t){return t==null?void 0:String(t)}function xG(t){var{axis:e,ticks:r,bandSize:n,entry:a,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xs(a[e.dataKey])){var l=Dle(r,"value",a[e.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=Ba(a,xs(o)?e.dataKey:o);return xs(c)?null:e.scale(c)}var vG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ba(s,e.dataKey,e.scale.domain()[o]);return xs(l)?null:e.scale(l)-a/2+n},mXe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},pXe=t=>{var e=t.flat(2).filter(Mr);return[Math.min(...e),Math.max(...e)]},gXe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],xXe=(t,e,r)=>{if(t!=null)return gXe(Object.keys(t).reduce((n,a)=>{var s=t[a],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=$ce(u,e,r),h=pXe(d);return[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},bG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Vx=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=IS(e,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function wG(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return j1(j1({},e),{},{dataKey:r,payload:n,value:a,name:s})}function _v(t,e){if(t)return String(t);if(typeof e=="string")return e}var vXe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},bXe=(t,e)=>e==="centric"?t.angle:t.radius,Ch=t=>t.layout.width,kh=t=>t.layout.height,yXe=t=>t.layout.scale,Gce=t=>t.layout.margin,US=bt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),zS=bt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Wce="data-recharts-item-index",Kce="data-recharts-item-data-key",Hw=60;function _G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function K5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_G(Object(r),!0).forEach(function(n){wXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wXe(t,e,r){return(e=_Xe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _Xe(t){var e=NXe(t,"string");return typeof e=="symbol"?e:e+""}function NXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EXe=t=>t.brush.height;function AXe(t){var e=zS(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Hw;return r+a}return r},0)}function SXe(t){var e=zS(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Hw;return r+a}return r},0)}function jXe(t){var e=US(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function TXe(t){var e=US(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Fi=bt([Ch,kh,Gce,EXe,AXe,SXe,jXe,TXe,fce,JWe],(t,e,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},h={top:(r.top||0)+o,bottom:(r.bottom||0)+l},p=K5(K5({},h),d),g=p.bottom;p.bottom+=n,p=iXe(p,c,u);var b=t-p.left-p.right,w=e-p.top-p.bottom;return K5(K5({brushBottom:g},p),{},{width:Math.max(b,0),height:Math.max(w,0)})}),CXe=bt(Fi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),tM=bt(Ch,kh,(t,e)=>({x:0,y:0,width:t,height:e})),kXe=S.createContext(null),Yo=()=>S.useContext(kXe)!=null,VS=t=>t.brush,$S=bt([VS,Fi,Gce],(t,e,r)=>({height:t.height,x:Mr(t.x)?t.x:e.left,y:Mr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Mr(t.width)?t.width:e.width})),Xce={},Yce={},Zce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},h=()=>{u&&d(),w()};let p=null;const g=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},n)},b=()=>{p!==null&&(clearTimeout(p),p=null)},w=()=>{b(),o=void 0,l=null},_=()=>{d()},N=function(...A){if(a!=null&&a.aborted)return;o=this,l=A;const j=p==null;g(),c&&j&&d()};return N.schedule=g,N.cancel=w,N.flush=_,a==null||a.addEventListener("abort",w,{once:!0}),N}t.debounce=e})(Zce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zce;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const p=e.debounce(function(...w){d=n.apply(this,w),h=null},a,{edges:u}),g=function(...w){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=n.apply(this,w),h=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,w),d)},b=()=>(p.flush(),d);return g.cancel=p.cancel,g.flush=b,g}t.debounce=r})(Yce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yce;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:o,maxWait:a,trailing:l})}t.throttle=r})(Xce);var IXe=Xce.throttle;const OXe=Hc(IXe);var f4=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},Qce=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=xh(n)?t:Number(n),c=xh(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},PXe={width:0,height:0,overflow:"visible"},RXe={width:0,overflowX:"visible"},DXe={height:0,overflowY:"visible"},MXe={},LXe=t=>{var{width:e,height:r}=t,n=xh(e),a=xh(r);return n&&a?PXe:n?RXe:a?DXe:MXe};function FXe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function si(t){return Number.isFinite(t)}function Qd(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OI.apply(null,arguments)}function NG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NG(Object(r),!0).forEach(function(n){BXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BXe(t,e,r){return(e=UXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UXe(t){var e=zXe(t,"string");return typeof e=="symbol"?e:e+""}function zXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jce=S.createContext({width:-1,height:-1});function VXe(t){return Qd(t.width)&&Qd(t.height)}function eue(t){var{children:e,width:r,height:n}=t,a=S.useMemo(()=>({width:r,height:n}),[r,n]);return VXe(a)?S.createElement(Jce.Provider,{value:a},e):null}var rM=()=>S.useContext(Jce),$Xe=S.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:p,onResize:g,style:b={}}=t,w=S.useRef(null),_=S.useRef();_.current=g,S.useImperativeHandle(e,()=>w.current);var[N,A]=S.useState({containerWidth:n.width,containerHeight:n.height}),j=S.useCallback((D,I)=>{A(V=>{var R=Math.round(D),B=Math.round(I);return V.containerWidth===R&&V.containerHeight===B?V:{containerWidth:R,containerHeight:B}})},[]);S.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Bw;var D=B=>{var F,{width:ee,height:Z}=B[0].contentRect;j(ee,Z),(F=_.current)===null||F===void 0||F.call(_,ee,Z)};d>0&&(D=OXe(D,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(D),{width:V,height:R}=w.current.getBoundingClientRect();return j(V,R),I.observe(w.current),()=>{I.disconnect()}},[j,d]);var{containerWidth:P,containerHeight:U}=N;f4(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:G,calculatedHeight:O}=Qce(P,U,{width:a,height:s,aspect:r,maxHeight:c});return f4(G!=null&&G>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,O,a,s,o,l,r),S.createElement("div",{id:h?"".concat(h):void 0,className:aa("recharts-responsive-container",p),style:EG(EG({},b),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:w},S.createElement("div",{style:LXe({width:a,height:s})},S.createElement(eue,{width:G,height:O},u)))}),X5=S.forwardRef((t,e)=>{var r=rM();if(Qd(r.width)&&Qd(r.height))return t.children;var{width:n,height:a}=FXe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=Qce(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Mr(s)&&Mr(o)?S.createElement(eue,{width:s,height:o},t.children):S.createElement($Xe,OI({},t,{width:n,height:a,ref:e}))});function tue(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var HS=()=>{var t,e=Yo(),r=Cr(CXe),n=Cr($S),a=(t=Cr(VS))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},HXe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},rue=()=>{var t;return(t=Cr(Fi))!==null&&t!==void 0?t:HXe},nM=()=>Cr(Ch),aM=()=>Cr(kh),qXe=()=>Cr(t=>t.layout.margin),Xn=t=>t.layout.layoutType,qw=()=>Cr(Xn),GXe=()=>{var t=qw();return t!==void 0},qS=t=>{var e=Xa(),r=Yo(),{width:n,height:a}=t,s=rM(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),S.useEffect(()=>{!r&&Qd(o)&&Qd(l)&&e(eXe({width:o,height:l}))},[e,r,o,l]),null},nue=Symbol.for("immer-nothing"),AG=Symbol.for("immer-draftable"),$c=Symbol.for("immer-state");function td(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Sy=Object.getPrototypeOf;function $x(t){return!!t&&!!t[$c]}function Zp(t){var e;return t?aue(t)||Array.isArray(t)||!!t[AG]||!!((e=t.constructor)!=null&&e[AG])||Gw(t)||WS(t):!1}var WXe=Object.prototype.constructor.toString(),SG=new WeakMap;function aue(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=SG.get(r);return n===void 0&&(n=Function.toString.call(r),SG.set(r,n)),n===WXe}function h4(t,e,r=!0){GS(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function GS(t){const e=t[$c];return e?e.type_:Array.isArray(t)?1:Gw(t)?2:WS(t)?3:0}function PI(t,e){return GS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function sue(t,e,r){const n=GS(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function KXe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Gw(t){return t instanceof Map}function WS(t){return t instanceof Set}function Hm(t){return t.copy_||t.base_}function RI(t,e){if(Gw(t))return new Map(t);if(WS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=aue(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[$c];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(Sy(t),n)}else{const n=Sy(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function sM(t,e=!1){return KS(t)||$x(t)||!Zp(t)||(GS(t)>1&&Object.defineProperties(t,{set:Y5,add:Y5,clear:Y5,delete:Y5}),Object.freeze(t),e&&Object.values(t).forEach(r=>sM(r,!0))),t}function XXe(){td(2)}var Y5={value:XXe};function KS(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var YXe={};function Qp(t){const e=YXe[t];return e||td(0,t),e}var jy;function iue(){return jy}function ZXe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jG(t,e){e&&(Qp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function DI(t){MI(t),t.drafts_.forEach(QXe),t.drafts_=null}function MI(t){t===jy&&(jy=t.parent_)}function TG(t){return jy=ZXe(jy,t)}function QXe(t){const e=t[$c];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function CG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[$c].modified_&&(DI(e),td(4)),Zp(t)&&(t=m4(e,t),e.parent_||p4(e,t)),e.patches_&&Qp("Patches").generateReplacementPatches_(r[$c].base_,t,e.patches_,e.inversePatches_)):t=m4(e,r,[]),DI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==nue?t:void 0}function m4(t,e,r){if(KS(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[$c];if(!a)return h4(e,(s,o)=>kG(t,a,e,s,o,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return p4(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),h4(o,(c,u)=>kG(t,a,s,c,u,r,l),n),p4(t,s,!1),r&&t.patches_&&Qp("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function kG(t,e,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=KS(a);if(!(l&&!o)){if($x(a)){const c=s&&e&&e.type_!==3&&!PI(e.assigned_,n)?s.concat(n):void 0,u=m4(t,a,c);if(sue(r,n,u),$x(u))t.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Zp(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;m4(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(Gw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&p4(t,a)}}}function p4(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&sM(e,r)}function JXe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:iue(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=iM;r&&(a=[n],s=Ty);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var iM={get(t,e){if(e===$c)return t;const r=Hm(t);if(!PI(r,e))return eYe(t,r,e);const n=r[e];return t.finalized_||!Zp(n)?n:n===cC(t.base_,e)?(uC(t),t.copy_[e]=FI(n,t)):n},has(t,e){return e in Hm(t)},ownKeys(t){return Reflect.ownKeys(Hm(t))},set(t,e,r){const n=oue(Hm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=cC(Hm(t),e),s=a==null?void 0:a[$c];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(KXe(r,a)&&(r!==void 0||PI(t.base_,e)))return!0;uC(t),LI(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return cC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,uC(t),LI(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Hm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){td(11)},getPrototypeOf(t){return Sy(t.base_)},setPrototypeOf(){td(12)}},Ty={};h4(iM,(t,e)=>{Ty[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ty.deleteProperty=function(t,e){return Ty.set.call(this,t,e,void 0)};Ty.set=function(t,e,r){return iM.set.call(this,t[0],e,r,t[0])};function cC(t,e){const r=t[$c];return(r?Hm(r):t)[e]}function eYe(t,e,r){var a;const n=oue(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function oue(t,e){if(!(e in t))return;let r=Sy(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Sy(r)}}function LI(t){t.modified_||(t.modified_=!0,t.parent_&&LI(t.parent_))}function uC(t){t.copy_||(t.copy_=RI(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var tYe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&td(6),n!==void 0&&typeof n!="function"&&td(7);let a;if(Zp(e)){const s=TG(this),o=FI(e,void 0);let l=!0;try{a=r(o),l=!1}finally{l?DI(s):MI(s)}return jG(s,n),CG(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===nue&&(a=void 0),this.autoFreeze_&&sM(a,!0),n){const s=[],o=[];Qp("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else td(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,a;return[this.produce(e,r,(o,l)=>{n=o,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Zp(t)||td(8),$x(t)&&(t=rYe(t));const e=TG(this),r=FI(t,void 0);return r[$c].isManual_=!0,MI(e),r}finishDraft(t,e){const r=t&&t[$c];(!r||!r.isManual_)&&td(9);const{scope_:n}=r;return jG(n,e),CG(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=Qp("Patches").applyPatches_;return $x(t)?n(t,e):this.produce(t,a=>n(a,e))}};function FI(t,e){const r=Gw(t)?Qp("MapSet").proxyMap_(t,e):WS(t)?Qp("MapSet").proxySet_(t,e):JXe(t,e);return(e?e.scope_:iue()).drafts_.push(r),r}function rYe(t){return $x(t)||td(10,t),lue(t)}function lue(t){if(!Zp(t)||KS(t))return t;const e=t[$c];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=RI(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=RI(t,!0);return h4(r,(a,s)=>{sue(r,a,lue(s))},n),e&&(e.finalized_=!1),r}var nYe=new tYe;nYe.produce;var aYe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},cue=tc({name:"legend",initialState:aYe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:ds()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=od(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:ds()},removeLegendPayload:{reducer(t,e){var r=od(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:ds()}}}),{setLegendSize:IG,setLegendSettings:sYe,addLegendPayload:uue,replaceLegendPayload:due,removeLegendPayload:fue}=cue.actions,iYe=cue.reducer,oYe=["contextPayload"];function BI(){return BI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},BI.apply(null,arguments)}function OG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OG(Object(r),!0).forEach(function(n){lYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lYe(t,e,r){return(e=cYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cYe(t){var e=uYe(t,"string");return typeof e=="symbol"?e:e+""}function uYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dYe(t,e){if(t==null)return{};var r,n,a=fYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function hYe(t){return t.value}function mYe(t){var{contextPayload:e}=t,r=dYe(t,oYe),n=tce(e,t.payloadUniqBy,hYe),a=Hx(Hx({},r),{},{payload:n});return S.isValidElement(t.content)?S.cloneElement(t.content,a):typeof t.content=="function"?S.createElement(t.content,a):S.createElement(vWe,a)}function pYe(t,e,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Hx(Hx({},u),d)}function gYe(t){var e=Xa();return S.useEffect(()=>{e(sYe(t))},[e,t]),null}function xYe(t){var e=Xa();return S.useEffect(()=>(e(IG(t)),()=>{e(IG({width:0,height:0}))}),[e,t]),null}function vYe(t,e,r,n){return t==="vertical"&&Mr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var bYe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function uE(t){var e=Si(t,bYe),r=rKe(),n=hGe(),a=qXe(),{width:s,height:o,wrapperStyle:l,portal:c}=e,[u,d]=hce([r]),h=nM(),p=aM();if(h==null||p==null)return null;var g=h-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),b=vYe(e.layout,o,s,g),w=c?l:Hx(Hx({position:"absolute",width:(b==null?void 0:b.width)||s||"auto",height:(b==null?void 0:b.height)||o||"auto"},pYe(l,e,a,h,p,u)),l),_=c??n;if(_==null||r==null)return null;var N=S.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:d},S.createElement(gYe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&S.createElement(xYe,{width:u.width,height:u.height}),S.createElement(mYe,BI({},e,b,{margin:a,chartWidth:h,chartHeight:p,contextPayload:r})));return Ly.createPortal(N,_)}uE.displayName="Legend";function UI(){return UI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UI.apply(null,arguments)}function PG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PG(Object(r),!0).forEach(function(n){yYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yYe(t,e,r){return(e=wYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wYe(t){var e=_Ye(t,"string");return typeof e=="symbol"?e:e+""}function _Ye(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NYe(t){return Array.isArray(t)&&Zd(t[0])&&Zd(t[1])?t.join(" ~ "):t}var EYe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:p=!1}=t,g=()=>{if(s&&s.length){var U={padding:0,margin:0},G=(l?IS(s,l):s).map((O,D)=>{if(O.type==="none")return null;var I=O.formatter||o||NYe,{value:V,name:R}=O,B=V,F=R;if(I){var ee=I(V,R,O,D,s);if(Array.isArray(ee))[B,F]=ee;else if(ee!=null)B=ee;else return null}var Z=dC({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:Z},Zd(F)?S.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Zd(F)?S.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,S.createElement("span",{className:"recharts-tooltip-item-value"},B),S.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:U},G)}return null},b=dC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=dC({margin:0},a),_=!xs(d),N=_?d:"",A=aa("recharts-default-tooltip",c),j=aa("recharts-tooltip-label",u);_&&h&&s!==void 0&&s!==null&&(N=h(d,s));var P=p?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",UI({className:A,style:b},P),S.createElement("p",{className:j,style:w},S.isValidElement(N)?N:"".concat(N)),g())},cb="recharts-tooltip-wrapper",AYe={visibility:"hidden"};function SYe(t){var{coordinate:e,translateX:r,translateY:n}=t;return aa(cb,{["".concat(cb,"-right")]:Mr(r)&&e&&Mr(e.x)&&r>=e.x,["".concat(cb,"-left")]:Mr(r)&&e&&Mr(e.x)&&r<e.x,["".concat(cb,"-bottom")]:Mr(n)&&e&&Mr(e.y)&&n>=e.y,["".concat(cb,"-top")]:Mr(n)&&e&&Mr(e.y)&&n<e.y})}function RG(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Mr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),h=r[n]+a;if(e[n])return o[n]?d:h;var p=c[n];if(p==null)return 0;if(o[n]){var g=d,b=p;return g<b?Math.max(h,p):Math.max(d,p)}if(u==null)return 0;var w=h+l,_=p+u;return w>_?Math.max(d,p):Math.max(h,p)}function jYe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function TYe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,h;return o.height>0&&o.width>0&&r?(d=RG({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=RG({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=jYe({translateX:d,translateY:h,useTranslate3d:l})):u=AYe,{cssProperties:u,cssClasses:SYe({translateX:d,translateY:h,coordinate:r})}}function DG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Z5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DG(Object(r),!0).forEach(function(n){zI(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zI(t,e,r){return(e=CYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CYe(t){var e=kYe(t,"string");return typeof e=="symbol"?e:e+""}function kYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class IYe extends S.PureComponent{constructor(){super(...arguments),zI(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),zI(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:p,viewBox:g,wrapperStyle:b,lastBoundingBox:w,innerRef:_,hasPortalFromProps:N}=this.props,{cssClasses:A,cssProperties:j}=TYe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:w.height,width:w.width},useTranslate3d:p,viewBox:g}),P=N?{}:Z5(Z5({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),U=Z5(Z5({},P),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:A,style:U,ref:_},s)}}var hue=()=>{var t;return(t=Cr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function VI(){return VI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},VI.apply(null,arguments)}function MG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MG(Object(r),!0).forEach(function(n){OYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OYe(t,e,r){return(e=PYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PYe(t){var e=RYe(t,"string");return typeof e=="symbol"?e:e+""}function RYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FG={curveBasisClosed:OGe,curveBasisOpen:PGe,curveBasis:IGe,curveBumpX:xGe,curveBumpY:vGe,curveLinearClosed:RGe,curveLinear:ES,curveMonotoneX:DGe,curveMonotoneY:MGe,curveNatural:LGe,curveStep:FGe,curveStepAfter:UGe,curveStepBefore:BGe},g4=t=>si(t.x)&&si(t.y),BG=t=>t.base!=null&&g4(t.base)&&g4(t),ub=t=>t.x,db=t=>t.y,DYe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Fw(t));return(r==="curveMonotone"||r==="curveBump")&&e?FG["".concat(r).concat(e==="vertical"?"Y":"X")]:FG[r]||ES},MYe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,o=DYe(e,a),l=s?r.filter(g4):r,c;if(Array.isArray(n)){var u=r.map((g,b)=>LG(LG({},g),{},{base:n[b]}));a==="vertical"?c=V5().y(db).x1(ub).x0(g=>g.base.x):c=V5().x(ub).y1(db).y0(g=>g.base.y);var d=c.defined(BG).curve(o),h=s?u.filter(BG):u;return d(h)}a==="vertical"&&Mr(n)?c=V5().y(db).x1(ub).x0(n):Mr(n)?c=V5().x(ub).y1(db).y0(n):c=wle().x(ub).y(db);var p=c.defined(g4).curve(o);return p(l)},oM=t=>{var{className:e,points:r,path:n,pathRef:a}=t;if((!r||!r.length)&&!n)return null;var s=r&&r.length?MYe(t):n;return S.createElement("path",VI({},Vc(t),RD(t),{className:aa("recharts-curve",e),d:s===null?void 0:s,ref:a}))},LYe=["x","y","top","left","width","height","className"];function $I(){return $I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$I.apply(null,arguments)}function UG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function FYe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UG(Object(r),!0).forEach(function(n){BYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BYe(t,e,r){return(e=UYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UYe(t){var e=zYe(t,"string");return typeof e=="symbol"?e:e+""}function zYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VYe(t,e){if(t==null)return{};var r,n,a=$Ye(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function $Ye(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var HYe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),qYe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=t,c=VYe(t,LYe),u=FYe({x:e,y:r,top:n,left:a,width:s,height:o},c);return!Mr(e)||!Mr(r)||!Mr(s)||!Mr(o)||!Mr(n)||!Mr(a)?null:S.createElement("path",$I({},wl(u),{className:aa("recharts-cross",l),d:HYe(e,r,s,o,n,a)}))};function GYe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function zG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function VG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zG(Object(r),!0).forEach(function(n){WYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WYe(t,e,r){return(e=KYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KYe(t){var e=XYe(t,"string");return typeof e=="symbol"?e:e+""}function XYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YYe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),mue=(t,e,r)=>t.map(n=>"".concat(YYe(n)," ").concat(e,"ms ").concat(r)).join(","),ZYe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),Cy=(t,e)=>Object.keys(e).reduce((r,n)=>VG(VG({},r),{},{[n]:t(n,e[n])}),{});function $G(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$G(Object(r),!0).forEach(function(n){QYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$G(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function QYe(t,e,r){return(e=JYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JYe(t){var e=eZe(t,"string");return typeof e=="symbol"?e:e+""}function eZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x4=(t,e,r)=>t+(e-t)*r,HI=t=>{var{from:e,to:r}=t;return e!==r},pue=(t,e,r)=>{var n=Cy((a,s)=>{if(HI(s)){var[o,l]=t(s.from,s.to,s.velocity);return Pi(Pi({},s),{},{from:o,velocity:l})}return s},e);return r<1?Cy((a,s)=>HI(s)?Pi(Pi({},s),{},{velocity:x4(s.velocity,n[a].velocity,r),from:x4(s.from,n[a].from,r)}):s,e):pue(t,n,r-1)};function tZe(t,e,r,n,a,s){var o,l=n.reduce((p,g)=>Pi(Pi({},p),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),c=()=>Cy((p,g)=>g.from,l),u=()=>!Object.values(l).filter(HI).length,d=null,h=p=>{o||(o=p);var g=p-o,b=g/r.dt;l=pue(r,l,b),a(Pi(Pi(Pi({},t),e),c())),o=p,u()||(d=s.setTimeout(h))};return()=>(d=s.setTimeout(h),()=>{var p;(p=d)===null||p===void 0||p()})}function rZe(t,e,r,n,a,s,o){var l=null,c=a.reduce((h,p)=>Pi(Pi({},h),{},{[p]:[t[p],e[p]]}),{}),u,d=h=>{u||(u=h);var p=(h-u)/n,g=Cy((w,_)=>x4(..._,r(p)),c);if(s(Pi(Pi(Pi({},t),e),g)),p<1)l=o.setTimeout(d);else{var b=Cy((w,_)=>x4(..._,r(1)),c);s(Pi(Pi(Pi({},t),e),b))}};return()=>(l=o.setTimeout(d),()=>{var h;(h=l)===null||h===void 0||h()})}const nZe=(t,e,r,n,a,s)=>{var o=ZYe(t,e);return r==null?()=>(a(Pi(Pi({},t),e)),()=>{}):r.isStepper===!0?tZe(t,e,r,o,a,s):rZe(t,e,r,n,o,a,s)};var v4=1e-4,gue=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],xue=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),HG=(t,e)=>r=>{var n=gue(t,e);return xue(n,r)},aZe=(t,e)=>r=>{var n=gue(t,e),a=[...n.map((s,o)=>s*o).slice(1),0];return xue(a,r)},sZe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,s=r[0].split("(");if(s[0]==="cubic-bezier"&&((a=s[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var o=s[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return r.length===4?r:[0,0,1,1]},iZe=(t,e,r,n)=>{var a=HG(t,r),s=HG(e,n),o=aZe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,h=d,p=0;p<8;++p){var g=a(h)-d,b=o(h);if(Math.abs(g-d)<v4||b<v4)return s(h);h=l(h-g/b)}return s(h)};return c.isStepper=!1,c},qG=function(){return iZe(...sZe(...arguments))},oZe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,h=c+(u-d)*a/1e3,p=c*a/1e3+o;return Math.abs(p-l)<v4&&Math.abs(h)<v4?[l,0]:[p,h]};return s.isStepper=!0,s.dt=a,s},lZe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qG(t);case"spring":return oZe();default:if(t.split("(")[0]==="cubic-bezier")return qG(t)}return typeof t=="function"?t:null};function cZe(t){var e,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class uZe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function dZe(){return cZe(new uZe)}var fZe=S.createContext(dZe);function hZe(t,e){var r=S.useContext(fZe);return S.useMemo(()=>e??r(t),[t,e,r])}var mZe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ww={devToolsEnabled:!1,isSsr:mZe()},pZe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},GG={t:0},fC={t:1};function Kw(t){var e=Si(t,pZe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!Ww.isSsr:r,h=hZe(e.animationId,e.animationManager),[p,g]=S.useState(d?GG:fC),b=S.useRef(null);return S.useEffect(()=>{d||g(fC)},[d]),S.useEffect(()=>{if(!d||!n)return Bw;var w=nZe(GG,fC,lZe(s),a,g,h.getTimeoutController()),_=()=>{b.current=w()};return h.start([c,o,_,a,l]),()=>{h.stop(),b.current&&b.current(),l()}},[d,n,a,s,o,c,l,h]),u(p.t)}function Xw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(_y(e)),n=S.useRef(t);return n.current!==t&&(r.current=_y(e),n.current=t),r.current}var gZe=["radius"],xZe=["radius"];function WG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function KG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WG(Object(r),!0).forEach(function(n){vZe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vZe(t,e,r){return(e=bZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bZe(t){var e=yZe(t,"string");return typeof e=="symbol"?e:e+""}function yZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b4(){return b4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b4.apply(null,arguments)}function XG(t,e){if(t==null)return{};var r,n,a=wZe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function wZe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var YG=(t,e,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=a[h]>s?s:a[h];u="M".concat(t,",").concat(e+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+l*d[0],",").concat(e)),u+="L ".concat(t+r-l*d[1],",").concat(e),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(e+o*d[1])),u+="L ".concat(t+r,",").concat(e+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-l*d[2],",").concat(e+n)),u+="L ".concat(t+l*d[3],",").concat(e+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+n-o*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var g=Math.min(s,a);u="M ".concat(t,",").concat(e+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+l*g,",").concat(e,`
            L `).concat(t+r-l*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+r,",").concat(e+o*g,`
            L `).concat(t+r,",").concat(e+n-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+r-l*g,",").concat(e+n,`
            L `).concat(t+l*g,",").concat(e+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t,",").concat(e+n-o*g," Z")}else u="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},ZG={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vue=t=>{var e=Si(t,ZG),r=S.useRef(null),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ne=r.current.getTotalLength();ne&&a(ne)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:h,animationDuration:p,animationBegin:g,isAnimationActive:b,isUpdateAnimationActive:w}=e,_=S.useRef(l),N=S.useRef(c),A=S.useRef(s),j=S.useRef(o),P=S.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),U=Xw(P,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var G=aa("recharts-rectangle",d);if(!w){var O=wl(e),{radius:D}=O,I=XG(O,gZe);return S.createElement("path",b4({},I,{radius:typeof u=="number"?u:void 0,className:G,d:YG(s,o,l,c,u)}))}var V=_.current,R=N.current,B=A.current,F=j.current,ee="0px ".concat(n===-1?1:n,"px"),Z="".concat(n,"px 0px"),ce=mue(["strokeDasharray"],p,typeof h=="string"?h:ZG.animationEasing);return S.createElement(Kw,{animationId:U,key:U,canBegin:n>0,duration:p,easing:h,isActive:w,begin:g},ne=>{var ae=hs(V,l,ne),me=hs(R,c,ne),Ee=hs(B,s,ne),ye=hs(F,o,ne);r.current&&(_.current=ae,N.current=me,A.current=Ee,j.current=ye);var H;b?ne>0?H={transition:ce,strokeDasharray:Z}:H={strokeDasharray:ee}:H={strokeDasharray:Z};var Y=wl(e),{radius:X}=Y,re=XG(Y,xZe);return S.createElement("path",b4({},re,{radius:typeof u=="number"?u:void 0,className:G,d:YG(Ee,ye,ae,me,u),ref:r,style:KG(KG({},H),e.style)}))})};function QG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function JG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?QG(Object(r),!0).forEach(function(n){_Ze(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Ze(t,e,r){return(e=NZe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NZe(t){var e=EZe(t,"string");return typeof e=="symbol"?e:e+""}function EZe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y4=Math.PI/180,AZe=t=>t*180/Math.PI,yi=(t,e,r,n)=>({x:t+Math.cos(-y4*n)*r,y:e+Math.sin(-y4*n)*r}),bue=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},SZe=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},jZe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,o=SZe({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:AZe(c),angleInRadian:c}},TZe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},CZe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return t+o*360},kZe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=jZe({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=TZe(e),d=s,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?JG(JG({},e),{},{radius:a,angle:CZe(d,e)}):null};function yue(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,o=yi(e,r,n,a),l=yi(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}function qI(){return qI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qI.apply(null,arguments)}var IZe=(t,e)=>{var r=no(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},Q5=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/y4,h=c?a:a+s*d,p=yi(e,r,u,h),g=yi(e,r,n,h),b=c?a-s*d:a,w=yi(e,r,u*Math.cos(d*y4),b);return{center:p,circleTangency:g,lineTangency:w,theta:d}},wue=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=t,l=IZe(s,o),c=s+l,u=yi(e,r,a,s),d=yi(e,r,a,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var p=yi(e,r,n,s),g=yi(e,r,n,c);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(e,",").concat(r," Z");return h},OZe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=no(u-c),{circleTangency:h,lineTangency:p,theta:g}=Q5({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:b,lineTangency:w,theta:_}=Q5({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),N=l?Math.abs(c-u):Math.abs(c-u)-g-_;if(N<0)return o?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):wue({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var A="M ".concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(N>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:j,lineTangency:P,theta:U}=Q5({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:G,lineTangency:O,theta:D}=Q5({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),I=l?Math.abs(c-u):Math.abs(c-u)-U-D;if(I<0&&s===0)return"".concat(A,"L").concat(e,",").concat(r,"Z");A+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(G.x,",").concat(G.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(I>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else A+="L".concat(e,",").concat(r,"Z");return A},PZe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},_ue=t=>{var e=Si(t,PZe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=e;if(s<a||u===d)return null;var p=aa("recharts-sector",h),g=s-a,b=Ko(o,g,0,!0),w;return b>0&&Math.abs(u-d)<360?w=OZe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(b,g/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):w=wue({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),S.createElement("path",qI({},wl(e),{className:p,d:w}))};function RZe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(Lle(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=e,c=yi(n,a,s,l),u=yi(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return yue(e)}}var Nue={},Eue={},Aue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qD;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(Aue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Aue;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(Eue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GD,r=Eue;function n(a,s,o){o&&typeof o!="number"&&e.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}t.range=n})(Nue);var DZe=Nue.range;const Sue=Hc(DZe);function B0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function MZe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function lM(t){let e,r,n;t.length!==2?(e=B0,r=(l,c)=>B0(t(l),c),n=(l,c)=>t(l)-c):(e=t===B0||t===MZe?t:LZe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:a,center:o,right:s}}function LZe(){return 0}function jue(t){return t===null?NaN:+t}function*FZe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const BZe=lM(B0),Yw=BZe.right;lM(jue).center;class eW extends Map{constructor(e,r=VZe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(tW(this,e))}has(e){return super.has(tW(this,e))}set(e,r){return super.set(UZe(this,e),r)}delete(e){return super.delete(zZe(this,e))}}function tW({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function UZe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function zZe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function VZe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function $Ze(t=B0){if(t===B0)return Tue;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function Tue(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const HZe=Math.sqrt(50),qZe=Math.sqrt(10),GZe=Math.sqrt(2);function w4(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=HZe?10:s>=qZe?5:s>=GZe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?w4(t,e,r*2):[l,c,u]}function GI(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?w4(e,t,r):w4(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function WI(t,e,r){return e=+e,t=+t,r=+r,w4(t,e,r)[2]}function KI(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?WI(e,t,r):WI(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function rW(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function nW(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Cue(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?Tue:$Ze(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(e-u*h/c+p)),b=Math.min(n,Math.floor(e+(c-u)*h/c+p));Cue(t,e,g,b,a)}const s=t[e];let o=r,l=n;for(fb(t,r,e),a(t[n],s)>0&&fb(t,r,n);o<l;){for(fb(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?fb(t,r,l):(++l,fb(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function fb(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function WZe(t,e,r){if(t=Float64Array.from(FZe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return nW(t);if(e>=1)return rW(t);var n,a=(n-1)*e,s=Math.floor(a),o=rW(Cue(t,s).subarray(0,s+1)),l=nW(t.subarray(s+1));return o+(l-o)*(a-s)}}function KZe(t,e,r=jue){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function XZe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Ru(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ih(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const XI=Symbol("implicit");function cM(){var t=new eW,e=[],r=[],n=XI;function a(s){let o=t.get(s);if(o===void 0){if(n!==XI)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new eW;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return cM(e,r).unknown(n)},Ru.apply(a,arguments),a}function uM(){var t=cM().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var p=e().length,g=a<n,b=g?a:n,w=g?n:a;s=(w-b)/Math.max(1,p-c+u*2),l&&(s=Math.floor(s)),b+=(w-b-s*(p-c))*d,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var _=XZe(p).map(function(N){return b+s*N});return r(g?_.reverse():_)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(l=!!p,h()):l},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),h()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,h()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),h()):d},t.copy=function(){return uM(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ru.apply(h(),arguments)}function kue(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return kue(e())},t}function YZe(){return kue(uM.apply(null,arguments).paddingInner(1))}function dM(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Iue(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Zw(){}var ky=.7,_4=1/ky,ex="\\s*([+-]?\\d+)\\s*",Iy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ZZe=/^#([0-9a-f]{3,8})$/,QZe=new RegExp(`^rgb\\(${ex},${ex},${ex}\\)$`),JZe=new RegExp(`^rgb\\(${Kd},${Kd},${Kd}\\)$`),eQe=new RegExp(`^rgba\\(${ex},${ex},${ex},${Iy}\\)$`),tQe=new RegExp(`^rgba\\(${Kd},${Kd},${Kd},${Iy}\\)$`),rQe=new RegExp(`^hsl\\(${Iy},${Kd},${Kd}\\)$`),nQe=new RegExp(`^hsla\\(${Iy},${Kd},${Kd},${Iy}\\)$`),aW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dM(Zw,Oy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sW,formatHex:sW,formatHex8:aQe,formatHsl:sQe,formatRgb:iW,toString:iW});function sW(){return this.rgb().formatHex()}function aQe(){return this.rgb().formatHex8()}function sQe(){return Oue(this).formatHsl()}function iW(){return this.rgb().formatRgb()}function Oy(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ZZe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?oW(e):r===3?new Vl(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?J5(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?J5(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=QZe.exec(t))?new Vl(e[1],e[2],e[3],1):(e=JZe.exec(t))?new Vl(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=eQe.exec(t))?J5(e[1],e[2],e[3],e[4]):(e=tQe.exec(t))?J5(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rQe.exec(t))?uW(e[1],e[2]/100,e[3]/100,1):(e=nQe.exec(t))?uW(e[1],e[2]/100,e[3]/100,e[4]):aW.hasOwnProperty(t)?oW(aW[t]):t==="transparent"?new Vl(NaN,NaN,NaN,0):null}function oW(t){return new Vl(t>>16&255,t>>8&255,t&255,1)}function J5(t,e,r,n){return n<=0&&(t=e=r=NaN),new Vl(t,e,r,n)}function iQe(t){return t instanceof Zw||(t=Oy(t)),t?(t=t.rgb(),new Vl(t.r,t.g,t.b,t.opacity)):new Vl}function YI(t,e,r,n){return arguments.length===1?iQe(t):new Vl(t,e,r,n??1)}function Vl(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}dM(Vl,YI,Iue(Zw,{brighter(t){return t=t==null?_4:Math.pow(_4,t),new Vl(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ky:Math.pow(ky,t),new Vl(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Vl(jp(this.r),jp(this.g),jp(this.b),N4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lW,formatHex:lW,formatHex8:oQe,formatRgb:cW,toString:cW}));function lW(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}`}function oQe(){return`#${ap(this.r)}${ap(this.g)}${ap(this.b)}${ap((isNaN(this.opacity)?1:this.opacity)*255)}`}function cW(){const t=N4(this.opacity);return`${t===1?"rgb(":"rgba("}${jp(this.r)}, ${jp(this.g)}, ${jp(this.b)}${t===1?")":`, ${t})`}`}function N4(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function jp(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ap(t){return t=jp(t),(t<16?"0":"")+t.toString(16)}function uW(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new rd(t,e,r,n)}function Oue(t){if(t instanceof rd)return new rd(t.h,t.s,t.l,t.opacity);if(t instanceof Zw||(t=Oy(t)),!t)return new rd;if(t instanceof rd)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new rd(o,l,c,t.opacity)}function lQe(t,e,r,n){return arguments.length===1?Oue(t):new rd(t,e,r,n??1)}function rd(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}dM(rd,lQe,Iue(Zw,{brighter(t){return t=t==null?_4:Math.pow(_4,t),new rd(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ky:Math.pow(ky,t),new rd(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Vl(hC(t>=240?t-240:t+120,a,n),hC(t,a,n),hC(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new rd(dW(this.h),eN(this.s),eN(this.l),N4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=N4(this.opacity);return`${t===1?"hsl(":"hsla("}${dW(this.h)}, ${eN(this.s)*100}%, ${eN(this.l)*100}%${t===1?")":`, ${t})`}`}}));function dW(t){return t=(t||0)%360,t<0?t+360:t}function eN(t){return Math.max(0,Math.min(1,t||0))}function hC(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const fM=t=>()=>t;function cQe(t,e){return function(r){return t+r*e}}function uQe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function dQe(t){return(t=+t)==1?Pue:function(e,r){return r-e?uQe(e,r,t):fM(isNaN(e)?r:e)}}function Pue(t,e){var r=e-t;return r?cQe(t,r):fM(isNaN(t)?e:t)}const fW=function t(e){var r=dQe(e);function n(a,s){var o=r((a=YI(a)).r,(s=YI(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=Pue(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function fQe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function hQe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mQe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=Nv(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function pQe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function E4(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function gQe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Nv(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var ZI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mC=new RegExp(ZI.source,"g");function xQe(t){return function(){return t}}function vQe(t){return function(e){return t(e)+""}}function bQe(t,e){var r=ZI.lastIndex=mC.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=ZI.exec(t))&&(a=mC.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:E4(n,a)})),r=mC.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?vQe(c[0].x):xQe(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Nv(t,e){var r=typeof e,n;return e==null||r==="boolean"?fM(e):(r==="number"?E4:r==="string"?(n=Oy(e))?(e=n,fW):bQe:e instanceof Oy?fW:e instanceof Date?pQe:hQe(e)?fQe:Array.isArray(e)?mQe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gQe:E4)(t,e)}function hM(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function yQe(t,e){e===void 0&&(e=t,t=Nv);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function wQe(t){return function(){return t}}function A4(t){return+t}var hW=[0,1];function gl(t){return t}function QI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:wQe(isNaN(e)?NaN:.5)}function _Qe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function NQe(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=QI(a,n),s=r(o,s)):(n=QI(n,a),s=r(s,o)),function(l){return s(n(l))}}function EQe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=QI(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Yw(t,l,1,n)-1;return s[c](a[c](l))}}function Qw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function XS(){var t=hW,e=hW,r=Nv,n,a,s,o=gl,l,c,u;function d(){var p=Math.min(t.length,e.length);return o!==gl&&(o=_Qe(t[0],t[p-1])),l=p>2?EQe:NQe,c=u=null,h}function h(p){return p==null||isNaN(p=+p)?s:(c||(c=l(t.map(n),e,r)))(n(o(p)))}return h.invert=function(p){return o(a((u||(u=l(e,t.map(n),E4)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,A4),d()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),r=hM,d()},h.clamp=function(p){return arguments.length?(o=p?!0:gl,d()):o!==gl},h.interpolate=function(p){return arguments.length?(r=p,d()):r},h.unknown=function(p){return arguments.length?(s=p,h):s},function(p,g){return n=p,a=g,d()}}function mM(){return XS()(gl,gl)}function AQe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function S4(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function qx(t){return t=S4(Math.abs(t)),t?t[1]:NaN}function SQe(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function jQe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var TQe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Py(t){if(!(e=TQe.exec(t)))throw new Error("invalid format: "+t);var e;return new pM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Py.prototype=pM.prototype;function pM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}pM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function CQe(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var Rue;function kQe(t,e){var r=S4(t,e);if(!r)return t+"";var n=r[0],a=r[1],s=a-(Rue=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+S4(t,Math.max(0,e+s-1))[0]}function mW(t,e){var r=S4(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const pW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:AQe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>mW(t*100,e),r:mW,s:kQe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gW(t){return t}var xW=Array.prototype.map,vW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function IQe(t){var e=t.grouping===void 0||t.thousands===void 0?gW:SQe(xW.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?gW:jQe(xW.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Py(h);var p=h.fill,g=h.align,b=h.sign,w=h.symbol,_=h.zero,N=h.width,A=h.comma,j=h.precision,P=h.trim,U=h.type;U==="n"?(A=!0,U="g"):pW[U]||(j===void 0&&(j=12),P=!0,U="g"),(_||p==="0"&&g==="=")&&(_=!0,p="0",g="=");var G=w==="$"?r:w==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",O=w==="$"?n:/[%p]/.test(U)?o:"",D=pW[U],I=/[defgprs%]/.test(U);j=j===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function V(R){var B=G,F=O,ee,Z,ce;if(U==="c")F=D(R)+F,R="";else{R=+R;var ne=R<0||1/R<0;if(R=isNaN(R)?c:D(Math.abs(R),j),P&&(R=CQe(R)),ne&&+R==0&&b!=="+"&&(ne=!1),B=(ne?b==="("?b:l:b==="-"||b==="("?"":b)+B,F=(U==="s"?vW[8+Rue/3]:"")+F+(ne&&b==="("?")":""),I){for(ee=-1,Z=R.length;++ee<Z;)if(ce=R.charCodeAt(ee),48>ce||ce>57){F=(ce===46?a+R.slice(ee+1):R.slice(ee))+F,R=R.slice(0,ee);break}}}A&&!_&&(R=e(R,1/0));var ae=B.length+R.length+F.length,me=ae<N?new Array(N-ae+1).join(p):"";switch(A&&_&&(R=e(me+R,me.length?N-F.length:1/0),me=""),g){case"<":R=B+R+F+me;break;case"=":R=B+me+R+F;break;case"^":R=me.slice(0,ae=me.length>>1)+B+R+F+me.slice(ae);break;default:R=me+B+R+F;break}return s(R)}return V.toString=function(){return h+""},V}function d(h,p){var g=u((h=Py(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(qx(p)/3)))*3,w=Math.pow(10,-b),_=vW[8+b/3];return function(N){return g(w*N)+_}}return{format:u,formatPrefix:d}}var tN,gM,Due;OQe({thousands:",",grouping:[3],currency:["$",""]});function OQe(t){return tN=IQe(t),gM=tN.format,Due=tN.formatPrefix,tN}function PQe(t){return Math.max(0,-qx(Math.abs(t)))}function RQe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qx(e)/3)))*3-qx(Math.abs(t)))}function DQe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qx(e)-qx(t))+1}function Mue(t,e,r,n){var a=KI(t,e,r),s;switch(n=Py(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=RQe(a,o))&&(n.precision=s),Due(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=DQe(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=PQe(a))&&(n.precision=s-(n.type==="%")*2);break}}return gM(n)}function _m(t){var e=t.domain;return t.ticks=function(r){var n=e();return GI(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return Mue(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=WI(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Lue(){var t=mM();return t.copy=function(){return Qw(t,Lue())},Ru.apply(t,arguments),_m(t)}function Fue(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,A4),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return Fue(t).unknown(e)},t=arguments.length?Array.from(t,A4):[0,1],_m(r)}function Bue(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function bW(t){return Math.log(t)}function yW(t){return Math.exp(t)}function MQe(t){return-Math.log(-t)}function LQe(t){return-Math.exp(-t)}function FQe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function BQe(t){return t===10?FQe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function UQe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function wW(t){return(e,r)=>-t(-e,r)}function xM(t){const e=t(bW,yW),r=e.domain;let n=10,a,s;function o(){return a=UQe(n),s=BQe(n),r()[0]<0?(a=wW(a),s=wW(s),t(MQe,LQe)):t(bW,yW),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let p=a(u),g=a(d),b,w;const _=l==null?10:+l;let N=[];if(!(n%1)&&g-p<_){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(b=1;b<n;++b)if(w=p<0?b/s(-p):b*s(p),!(w<u)){if(w>d)break;N.push(w)}}else for(;p<=g;++p)for(b=n-1;b>=1;--b)if(w=p>0?b/s(-p):b*s(p),!(w<u)){if(w>d)break;N.push(w)}N.length*2<_&&(N=GI(u,d,_))}else N=GI(p,g,Math.min(g-p,_)).map(s);return h?N.reverse():N},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Py(c)).precision==null&&(c.trim=!0),c=gM(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let h=d/s(Math.round(a(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},e.nice=()=>r(Bue(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function Uue(){const t=xM(XS()).domain([1,10]);return t.copy=()=>Qw(t,Uue()).base(t.base()),Ru.apply(t,arguments),t}function _W(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function NW(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function vM(t){var e=1,r=t(_W(e),NW(e));return r.constant=function(n){return arguments.length?t(_W(e=+n),NW(e)):e},_m(r)}function zue(){var t=vM(XS());return t.copy=function(){return Qw(t,zue()).constant(t.constant())},Ru.apply(t,arguments)}function EW(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zQe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function VQe(t){return t<0?-t*t:t*t}function bM(t){var e=t(gl,gl),r=1;function n(){return r===1?t(gl,gl):r===.5?t(zQe,VQe):t(EW(r),EW(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},_m(e)}function yM(){var t=bM(XS());return t.copy=function(){return Qw(t,yM()).exponent(t.exponent())},Ru.apply(t,arguments),t}function $Qe(){return yM.apply(null,arguments).exponent(.5)}function AW(t){return Math.sign(t)*t*t}function HQe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Vue(){var t=mM(),e=[0,1],r=!1,n;function a(s){var o=HQe(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(AW(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,A4)).map(AW)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Vue(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Ru.apply(a,arguments),_m(a)}function $ue(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=KZe(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Yw(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(B0),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return $ue().domain(t).range(e).unknown(n)},Ru.apply(s,arguments)}function Hue(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Yw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Hue().domain([t,e]).range(a).unknown(s)},Ru.apply(_m(o),arguments)}function que(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Yw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return que().domain(t).range(e).unknown(r)},Ru.apply(a,arguments)}const pC=new Date,gC=new Date;function Bi(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>Bi(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(pC.setTime(+s),gC.setTime(+o),t(pC),t(gC),Math.floor(r(pC,gC))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const j4=Bi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);j4.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Bi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):j4);j4.range;const Uf=1e3,wu=Uf*60,zf=wu*60,bh=zf*24,wM=bh*7,SW=bh*30,xC=bh*365,sp=Bi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Uf)},(t,e)=>(e-t)/Uf,t=>t.getUTCSeconds());sp.range;const _M=Bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uf)},(t,e)=>{t.setTime(+t+e*wu)},(t,e)=>(e-t)/wu,t=>t.getMinutes());_M.range;const NM=Bi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wu)},(t,e)=>(e-t)/wu,t=>t.getUTCMinutes());NM.range;const EM=Bi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Uf-t.getMinutes()*wu)},(t,e)=>{t.setTime(+t+e*zf)},(t,e)=>(e-t)/zf,t=>t.getHours());EM.range;const AM=Bi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*zf)},(t,e)=>(e-t)/zf,t=>t.getUTCHours());AM.range;const Jw=Bi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wu)/bh,t=>t.getDate()-1);Jw.range;const YS=Bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bh,t=>t.getUTCDate()-1);YS.range;const Gue=Bi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/bh,t=>Math.floor(t/bh));Gue.range;function _g(t){return Bi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*wu)/wM)}const ZS=_g(0),T4=_g(1),qQe=_g(2),GQe=_g(3),Gx=_g(4),WQe=_g(5),KQe=_g(6);ZS.range;T4.range;qQe.range;GQe.range;Gx.range;WQe.range;KQe.range;function Ng(t){return Bi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/wM)}const QS=Ng(0),C4=Ng(1),XQe=Ng(2),YQe=Ng(3),Wx=Ng(4),ZQe=Ng(5),QQe=Ng(6);QS.range;C4.range;XQe.range;YQe.range;Wx.range;ZQe.range;QQe.range;const SM=Bi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());SM.range;const jM=Bi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());jM.range;const yh=Bi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());yh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});yh.range;const wh=Bi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());wh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});wh.range;function Wue(t,e,r,n,a,s){const o=[[sp,1,Uf],[sp,5,5*Uf],[sp,15,15*Uf],[sp,30,30*Uf],[s,1,wu],[s,5,5*wu],[s,15,15*wu],[s,30,30*wu],[a,1,zf],[a,3,3*zf],[a,6,6*zf],[a,12,12*zf],[n,1,bh],[n,2,2*bh],[r,1,wM],[e,1,SW],[e,3,3*SW],[t,1,xC]];function l(u,d,h){const p=d<u;p&&([u,d]=[d,u]);const g=h&&typeof h.range=="function"?h:c(u,d,h),b=g?g.range(u,+d+1):[];return p?b.reverse():b}function c(u,d,h){const p=Math.abs(d-u)/h,g=lM(([,,_])=>_).right(o,p);if(g===o.length)return t.every(KI(u/xC,d/xC,h));if(g===0)return j4.every(Math.max(KI(u,d,h),1));const[b,w]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return b.every(w)}return[l,c]}const[JQe,eJe]=Wue(wh,jM,QS,Gue,AM,NM),[tJe,rJe]=Wue(yh,SM,ZS,Jw,EM,_M);function vC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function hb(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function nJe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=mb(a),d=pb(a),h=mb(s),p=pb(s),g=mb(o),b=pb(o),w=mb(l),_=pb(l),N=mb(c),A=pb(c),j={a:ne,A:ae,b:me,B:Ee,c:null,d:OW,e:OW,f:SJe,g:MJe,G:FJe,H:NJe,I:EJe,j:AJe,L:Kue,m:jJe,M:TJe,p:ye,q:H,Q:DW,s:MW,S:CJe,u:kJe,U:IJe,V:OJe,w:PJe,W:RJe,x:null,X:null,y:DJe,Y:LJe,Z:BJe,"%":RW},P={a:Y,A:X,b:re,B:se,c:null,d:PW,e:PW,f:$Je,g:JJe,G:tet,H:UJe,I:zJe,j:VJe,L:Yue,m:HJe,M:qJe,p:ke,q:Ce,Q:DW,s:MW,S:GJe,u:WJe,U:KJe,V:XJe,w:YJe,W:ZJe,x:null,X:null,y:QJe,Y:eet,Z:ret,"%":RW},U={a:V,A:R,b:B,B:F,c:ee,d:kW,e:kW,f:bJe,g:CW,G:TW,H:IW,I:IW,j:pJe,L:vJe,m:mJe,M:gJe,p:I,q:hJe,Q:wJe,s:_Je,S:xJe,u:lJe,U:cJe,V:uJe,w:oJe,W:dJe,x:Z,X:ce,y:CW,Y:TW,Z:fJe,"%":yJe};j.x=G(r,j),j.X=G(n,j),j.c=G(e,j),P.x=G(r,P),P.X=G(n,P),P.c=G(e,P);function G(xe,Ie){return function(He){var Ue=[],Me=-1,Be=0,be=xe.length,Vt,ht,Lt;for(He instanceof Date||(He=new Date(+He));++Me<be;)xe.charCodeAt(Me)===37&&(Ue.push(xe.slice(Be,Me)),(ht=jW[Vt=xe.charAt(++Me)])!=null?Vt=xe.charAt(++Me):ht=Vt==="e"?" ":"0",(Lt=Ie[Vt])&&(Vt=Lt(He,ht)),Ue.push(Vt),Be=Me+1);return Ue.push(xe.slice(Be,Me)),Ue.join("")}}function O(xe,Ie){return function(He){var Ue=hb(1900,void 0,1),Me=D(Ue,xe,He+="",0),Be,be;if(Me!=He.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(Ie&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(Be=bC(hb(Ue.y,0,1)),be=Be.getUTCDay(),Be=be>4||be===0?C4.ceil(Be):C4(Be),Be=YS.offset(Be,(Ue.V-1)*7),Ue.y=Be.getUTCFullYear(),Ue.m=Be.getUTCMonth(),Ue.d=Be.getUTCDate()+(Ue.w+6)%7):(Be=vC(hb(Ue.y,0,1)),be=Be.getDay(),Be=be>4||be===0?T4.ceil(Be):T4(Be),Be=Jw.offset(Be,(Ue.V-1)*7),Ue.y=Be.getFullYear(),Ue.m=Be.getMonth(),Ue.d=Be.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),be="Z"in Ue?bC(hb(Ue.y,0,1)).getUTCDay():vC(hb(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(be+5)%7:Ue.w+Ue.U*7-(be+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,bC(Ue)):vC(Ue)}}function D(xe,Ie,He,Ue){for(var Me=0,Be=Ie.length,be=He.length,Vt,ht;Me<Be;){if(Ue>=be)return-1;if(Vt=Ie.charCodeAt(Me++),Vt===37){if(Vt=Ie.charAt(Me++),ht=U[Vt in jW?Ie.charAt(Me++):Vt],!ht||(Ue=ht(xe,He,Ue))<0)return-1}else if(Vt!=He.charCodeAt(Ue++))return-1}return Ue}function I(xe,Ie,He){var Ue=u.exec(Ie.slice(He));return Ue?(xe.p=d.get(Ue[0].toLowerCase()),He+Ue[0].length):-1}function V(xe,Ie,He){var Ue=g.exec(Ie.slice(He));return Ue?(xe.w=b.get(Ue[0].toLowerCase()),He+Ue[0].length):-1}function R(xe,Ie,He){var Ue=h.exec(Ie.slice(He));return Ue?(xe.w=p.get(Ue[0].toLowerCase()),He+Ue[0].length):-1}function B(xe,Ie,He){var Ue=N.exec(Ie.slice(He));return Ue?(xe.m=A.get(Ue[0].toLowerCase()),He+Ue[0].length):-1}function F(xe,Ie,He){var Ue=w.exec(Ie.slice(He));return Ue?(xe.m=_.get(Ue[0].toLowerCase()),He+Ue[0].length):-1}function ee(xe,Ie,He){return D(xe,e,Ie,He)}function Z(xe,Ie,He){return D(xe,r,Ie,He)}function ce(xe,Ie,He){return D(xe,n,Ie,He)}function ne(xe){return o[xe.getDay()]}function ae(xe){return s[xe.getDay()]}function me(xe){return c[xe.getMonth()]}function Ee(xe){return l[xe.getMonth()]}function ye(xe){return a[+(xe.getHours()>=12)]}function H(xe){return 1+~~(xe.getMonth()/3)}function Y(xe){return o[xe.getUTCDay()]}function X(xe){return s[xe.getUTCDay()]}function re(xe){return c[xe.getUTCMonth()]}function se(xe){return l[xe.getUTCMonth()]}function ke(xe){return a[+(xe.getUTCHours()>=12)]}function Ce(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Ie=G(xe+="",j);return Ie.toString=function(){return xe},Ie},parse:function(xe){var Ie=O(xe+="",!1);return Ie.toString=function(){return xe},Ie},utcFormat:function(xe){var Ie=G(xe+="",P);return Ie.toString=function(){return xe},Ie},utcParse:function(xe){var Ie=O(xe+="",!0);return Ie.toString=function(){return xe},Ie}}}var jW={"-":"",_:" ",0:"0"},io=/^\s*\d+/,aJe=/^%/,sJe=/[\\^$*+?|[\]().{}]/g;function sa(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function iJe(t){return t.replace(sJe,"\\$&")}function mb(t){return new RegExp("^(?:"+t.map(iJe).join("|")+")","i")}function pb(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function oJe(t,e,r){var n=io.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function lJe(t,e,r){var n=io.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function cJe(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function uJe(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function dJe(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function TW(t,e,r){var n=io.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function CW(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function fJe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function hJe(t,e,r){var n=io.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function mJe(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function kW(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function pJe(t,e,r){var n=io.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function IW(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function gJe(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function xJe(t,e,r){var n=io.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function vJe(t,e,r){var n=io.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function bJe(t,e,r){var n=io.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function yJe(t,e,r){var n=aJe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function wJe(t,e,r){var n=io.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function _Je(t,e,r){var n=io.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function OW(t,e){return sa(t.getDate(),e,2)}function NJe(t,e){return sa(t.getHours(),e,2)}function EJe(t,e){return sa(t.getHours()%12||12,e,2)}function AJe(t,e){return sa(1+Jw.count(yh(t),t),e,3)}function Kue(t,e){return sa(t.getMilliseconds(),e,3)}function SJe(t,e){return Kue(t,e)+"000"}function jJe(t,e){return sa(t.getMonth()+1,e,2)}function TJe(t,e){return sa(t.getMinutes(),e,2)}function CJe(t,e){return sa(t.getSeconds(),e,2)}function kJe(t){var e=t.getDay();return e===0?7:e}function IJe(t,e){return sa(ZS.count(yh(t)-1,t),e,2)}function Xue(t){var e=t.getDay();return e>=4||e===0?Gx(t):Gx.ceil(t)}function OJe(t,e){return t=Xue(t),sa(Gx.count(yh(t),t)+(yh(t).getDay()===4),e,2)}function PJe(t){return t.getDay()}function RJe(t,e){return sa(T4.count(yh(t)-1,t),e,2)}function DJe(t,e){return sa(t.getFullYear()%100,e,2)}function MJe(t,e){return t=Xue(t),sa(t.getFullYear()%100,e,2)}function LJe(t,e){return sa(t.getFullYear()%1e4,e,4)}function FJe(t,e){var r=t.getDay();return t=r>=4||r===0?Gx(t):Gx.ceil(t),sa(t.getFullYear()%1e4,e,4)}function BJe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+sa(e/60|0,"0",2)+sa(e%60,"0",2)}function PW(t,e){return sa(t.getUTCDate(),e,2)}function UJe(t,e){return sa(t.getUTCHours(),e,2)}function zJe(t,e){return sa(t.getUTCHours()%12||12,e,2)}function VJe(t,e){return sa(1+YS.count(wh(t),t),e,3)}function Yue(t,e){return sa(t.getUTCMilliseconds(),e,3)}function $Je(t,e){return Yue(t,e)+"000"}function HJe(t,e){return sa(t.getUTCMonth()+1,e,2)}function qJe(t,e){return sa(t.getUTCMinutes(),e,2)}function GJe(t,e){return sa(t.getUTCSeconds(),e,2)}function WJe(t){var e=t.getUTCDay();return e===0?7:e}function KJe(t,e){return sa(QS.count(wh(t)-1,t),e,2)}function Zue(t){var e=t.getUTCDay();return e>=4||e===0?Wx(t):Wx.ceil(t)}function XJe(t,e){return t=Zue(t),sa(Wx.count(wh(t),t)+(wh(t).getUTCDay()===4),e,2)}function YJe(t){return t.getUTCDay()}function ZJe(t,e){return sa(C4.count(wh(t)-1,t),e,2)}function QJe(t,e){return sa(t.getUTCFullYear()%100,e,2)}function JJe(t,e){return t=Zue(t),sa(t.getUTCFullYear()%100,e,2)}function eet(t,e){return sa(t.getUTCFullYear()%1e4,e,4)}function tet(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Wx(t):Wx.ceil(t),sa(t.getUTCFullYear()%1e4,e,4)}function ret(){return"+0000"}function RW(){return"%"}function DW(t){return+t}function MW(t){return Math.floor(+t/1e3)}var Vg,Que,Jue;net({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function net(t){return Vg=nJe(t),Que=Vg.format,Vg.parse,Jue=Vg.utcFormat,Vg.utcParse,Vg}function aet(t){return new Date(t)}function set(t){return t instanceof Date?+t:+new Date(+t)}function TM(t,e,r,n,a,s,o,l,c,u){var d=mM(),h=d.invert,p=d.domain,g=u(".%L"),b=u(":%S"),w=u("%I:%M"),_=u("%I %p"),N=u("%a %d"),A=u("%b %d"),j=u("%B"),P=u("%Y");function U(G){return(c(G)<G?g:l(G)<G?b:o(G)<G?w:s(G)<G?_:n(G)<G?a(G)<G?N:A:r(G)<G?j:P)(G)}return d.invert=function(G){return new Date(h(G))},d.domain=function(G){return arguments.length?p(Array.from(G,set)):p().map(aet)},d.ticks=function(G){var O=p();return t(O[0],O[O.length-1],G??10)},d.tickFormat=function(G,O){return O==null?U:u(O)},d.nice=function(G){var O=p();return(!G||typeof G.range!="function")&&(G=e(O[0],O[O.length-1],G??10)),G?p(Bue(O,G)):d},d.copy=function(){return Qw(d,TM(t,e,r,n,a,s,o,l,c,u))},d}function iet(){return Ru.apply(TM(tJe,rJe,yh,SM,ZS,Jw,EM,_M,sp,Que).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oet(){return Ru.apply(TM(JQe,eJe,wh,jM,QS,YS,AM,NM,sp,Jue).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function JS(){var t=0,e=1,r,n,a,s,o=gl,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(s(h)-r)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(p){var g,b;return arguments.length?([g,b]=p,o=h(g,b),u):[o(0),o(1)]}}return u.range=d(Nv),u.rangeRound=d(hM),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return s=h,r=h(t),n=h(e),a=r===n?0:1/(n-r),u}}function Nm(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ede(){var t=_m(JS()(gl));return t.copy=function(){return Nm(t,ede())},Ih.apply(t,arguments)}function tde(){var t=xM(JS()).domain([1,10]);return t.copy=function(){return Nm(t,tde()).base(t.base())},Ih.apply(t,arguments)}function rde(){var t=vM(JS());return t.copy=function(){return Nm(t,rde()).constant(t.constant())},Ih.apply(t,arguments)}function CM(){var t=bM(JS());return t.copy=function(){return Nm(t,CM()).exponent(t.exponent())},Ih.apply(t,arguments)}function cet(){return CM.apply(null,arguments).exponent(.5)}function nde(){var t=[],e=gl;function r(n){if(n!=null&&!isNaN(n=+n))return e((Yw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(B0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>WZe(t,s/n))},r.copy=function(){return nde(e).domain(t)},Ih.apply(r,arguments)}function e6(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=gl,d,h=!1,p;function g(w){return isNaN(w=+w)?p:(w=.5+((w=+d(w))-s)*(n*w<n*s?l:c),u(h?Math.max(0,Math.min(1,w)):w))}g.domain=function(w){return arguments.length?([t,e,r]=w,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,g):[t,e,r]},g.clamp=function(w){return arguments.length?(h=!!w,g):h},g.interpolator=function(w){return arguments.length?(u=w,g):u};function b(w){return function(_){var N,A,j;return arguments.length?([N,A,j]=_,u=yQe(w,[N,A,j]),g):[u(0),u(.5),u(1)]}}return g.range=b(Nv),g.rangeRound=b(hM),g.unknown=function(w){return arguments.length?(p=w,g):p},function(w){return d=w,a=w(t),s=w(e),o=w(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,g}}function ade(){var t=_m(e6()(gl));return t.copy=function(){return Nm(t,ade())},Ih.apply(t,arguments)}function sde(){var t=xM(e6()).domain([.1,1,10]);return t.copy=function(){return Nm(t,sde()).base(t.base())},Ih.apply(t,arguments)}function ide(){var t=vM(e6());return t.copy=function(){return Nm(t,ide()).constant(t.constant())},Ih.apply(t,arguments)}function kM(){var t=bM(e6());return t.copy=function(){return Nm(t,kM()).exponent(t.exponent())},Ih.apply(t,arguments)}function uet(){return kM.apply(null,arguments).exponent(.5)}const Pb=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:uM,scaleDiverging:ade,scaleDivergingLog:sde,scaleDivergingPow:kM,scaleDivergingSqrt:uet,scaleDivergingSymlog:ide,scaleIdentity:Fue,scaleImplicit:XI,scaleLinear:Lue,scaleLog:Uue,scaleOrdinal:cM,scalePoint:YZe,scalePow:yM,scaleQuantile:$ue,scaleQuantize:Hue,scaleRadial:Vue,scaleSequential:ede,scaleSequentialLog:tde,scaleSequentialPow:CM,scaleSequentialQuantile:nde,scaleSequentialSqrt:cet,scaleSequentialSymlog:rde,scaleSqrt:$Qe,scaleSymlog:zue,scaleThreshold:que,scaleTime:iet,scaleUtc:oet,tickFormat:Mue},Symbol.toStringTag,{value:"Module"}));var Em=t=>t.chartData,IM=bt([Em],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),t6=(t,e,r,n)=>n?IM(t):Em(t);function nm(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(si(e)&&si(r))return!0}return!1}function LW(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function ode(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(si(r))a=r;else if(typeof r=="function")return;if(si(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(nm(o))return o}}function det(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(nm(n))return LW(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")e!=null&&(o=Math.min(...e));else if(Mr(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&bG.test(a)){var c=bG.exec(a);if(c==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Mr(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&yG.test(s)){var d=yG.exec(s);if(d==null||e==null)l=void 0;else{var h=+d[1];l=e[1]+h}}else l=e==null?void 0:e[1];var p=[o,l];if(nm(p))return e==null?p:LW(p,e,r)}}}var Ev=1e9,fet={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},PM,gs=!0,Iu="[DecimalError] ",Tp=Iu+"Invalid argument: ",OM=Iu+"Exponent out of range: ",Av=Math.floor,qm=Math.pow,het=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Sc,Yi=1e7,Ja=7,lde=9007199254740991,k4=Av(lde/Ja),kr={};kr.absoluteValue=kr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kr.comparedTo=kr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};kr.decimalPlaces=kr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Ja;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kr.dividedBy=kr.div=function(t){return Jf(this,new this.constructor(t))};kr.dividedToIntegerBy=kr.idiv=function(t){var e=this,r=e.constructor;return Ua(Jf(e,new r(t),0,1),r.precision)};kr.equals=kr.eq=function(t){return!this.cmp(t)};kr.exponent=function(){return Ni(this)};kr.greaterThan=kr.gt=function(t){return this.cmp(t)>0};kr.greaterThanOrEqualTo=kr.gte=function(t){return this.cmp(t)>=0};kr.isInteger=kr.isint=function(){return this.e>this.d.length-2};kr.isNegative=kr.isneg=function(){return this.s<0};kr.isPositive=kr.ispos=function(){return this.s>0};kr.isZero=function(){return this.s===0};kr.lessThan=kr.lt=function(t){return this.cmp(t)<0};kr.lessThanOrEqualTo=kr.lte=function(t){return this.cmp(t)<1};kr.logarithm=kr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Sc))throw Error(Iu+"NaN");if(r.s<1)throw Error(Iu+(r.s?"NaN":"-Infinity"));return r.eq(Sc)?new n(0):(gs=!1,e=Jf(Ry(r,s),Ry(t,s),s),gs=!0,Ua(e,a))};kr.minus=kr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?dde(e,t):cde(e,(t.s=-t.s,t))};kr.modulo=kr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Iu+"NaN");return r.s?(gs=!1,e=Jf(r,t,0,1).times(t),gs=!0,r.minus(e)):Ua(new n(r),a)};kr.naturalExponential=kr.exp=function(){return ude(this)};kr.naturalLogarithm=kr.ln=function(){return Ry(this)};kr.negated=kr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kr.plus=kr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?cde(e,t):dde(e,(t.s=-t.s,t))};kr.precision=kr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Tp+t);if(e=Ni(a)+1,n=a.d.length-1,r=n*Ja+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kr.squareRoot=kr.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Iu+"NaN")}for(t=Ni(l),gs=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Md(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Av((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(Jf(l,s,o+2)).times(.5),Md(s.d).slice(0,o)===(e=Md(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(Ua(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return gs=!0,Ua(n,r)};kr.times=kr.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,h=d.constructor,p=d.d,g=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,r=d.e+t.e,c=p.length,u=g.length,c<u&&(s=p,p=g,g=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+g[n]*p[a-n-1]+e,s[a--]=l%Yi|0,e=l/Yi|0;s[a]=(s[a]+e)%Yi|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,gs?Ua(t,h.precision):t};kr.toDecimalPlaces=kr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Jd(t,0,Ev),e===void 0?e=n.rounding:Jd(e,0,8),Ua(r,t+Ni(r)+1,e))};kr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Jp(n,!0):(Jd(t,0,Ev),e===void 0?e=a.rounding:Jd(e,0,8),n=Ua(new a(n),t+1,e),r=Jp(n,!0,t+1)),r};kr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Jp(a):(Jd(t,0,Ev),e===void 0?e=s.rounding:Jd(e,0,8),n=Ua(new s(a),t+Ni(a)+1,e),r=Jp(n.abs(),!1,t+Ni(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kr.toInteger=kr.toint=function(){var t=this,e=t.constructor;return Ua(new e(t),Ni(t)+1,e.rounding)};kr.toNumber=function(){return+this};kr.toPower=kr.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Sc);if(l=new c(l),!l.s){if(t.s<1)throw Error(Iu+"Infinity");return l}if(l.eq(Sc))return l;if(n=c.precision,t.eq(Sc))return Ua(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=lde){for(a=new c(Sc),e=Math.ceil(n/Ja+4),gs=!1;r%2&&(a=a.times(l),BW(a.d,e)),r=Av(r/2),r!==0;)l=l.times(l),BW(l.d,e);return gs=!0,t.s<0?new c(Sc).div(a):Ua(a,n)}}else if(s<0)throw Error(Iu+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,gs=!1,a=t.times(Ry(l,n+u)),gs=!0,a=ude(a),a.s=s,a};kr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=Ni(a),n=Jp(a,r<=s.toExpNeg||r>=s.toExpPos)):(Jd(t,1,Ev),e===void 0?e=s.rounding:Jd(e,0,8),a=Ua(new s(a),t,e),r=Ni(a),n=Jp(a,t<=r||r<=s.toExpNeg,t)),n};kr.toSignificantDigits=kr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Jd(t,1,Ev),e===void 0?e=n.rounding:Jd(e,0,8)),Ua(new n(r),t,e)};kr.toString=kr.valueOf=kr.val=kr.toJSON=kr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ni(t),r=t.constructor;return Jp(t,e<=r.toExpNeg||e>=r.toExpPos)};function cde(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),gs?Ua(e,h):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(h/Ja),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Yi|0,c[s]%=Yi;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,gs?Ua(e,h):e}function Jd(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Tp+t)}function Md(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=Ja-n.length,r&&(s+=t0(r)),s+=n;o=t[e],n=o+"",r=Ja-n.length,r&&(s+=t0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Jf=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Yi|0,o=s/Yi|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Yi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,h,p,g,b,w,_,N,A,j,P,U,G,O,D,I=n.constructor,V=n.s==a.s?1:-1,R=n.d,B=a.d;if(!n.s)return new I(n);if(!a.s)throw Error(Iu+"Division by zero");for(c=n.e-a.e,O=B.length,U=R.length,g=new I(V),b=g.d=[],u=0;B[u]==(R[u]||0);)++u;if(B[u]>(R[u]||0)&&--c,s==null?A=s=I.precision:o?A=s+(Ni(n)-Ni(a))+1:A=s,A<0)return new I(0);if(A=A/Ja+2|0,u=0,O==1)for(d=0,B=B[0],A++;(u<U||d)&&A--;u++)j=d*Yi+(R[u]||0),b[u]=j/B|0,d=j%B|0;else{for(d=Yi/(B[0]+1)|0,d>1&&(B=t(B,d),R=t(R,d),O=B.length,U=R.length),P=O,w=R.slice(0,O),_=w.length;_<O;)w[_++]=0;D=B.slice(),D.unshift(0),G=B[0],B[1]>=Yi/2&&++G;do d=0,l=e(B,w,O,_),l<0?(N=w[0],O!=_&&(N=N*Yi+(w[1]||0)),d=N/G|0,d>1?(d>=Yi&&(d=Yi-1),h=t(B,d),p=h.length,_=w.length,l=e(h,w,p,_),l==1&&(d--,r(h,O<p?D:B,p))):(d==0&&(l=d=1),h=B.slice()),p=h.length,p<_&&h.unshift(0),r(w,h,_),l==-1&&(_=w.length,l=e(B,w,O,_),l<1&&(d++,r(w,O<_?D:B,_))),_=w.length):l===0&&(d++,w=[0]),b[u++]=d,l&&w[0]?w[_++]=R[P]||0:(w=[R[P]],_=1);while((P++<U||w[0]!==void 0)&&A--)}return b[0]||b.shift(),g.e=c,Ua(g,o?s+Ni(g)+1:s)}}();function ude(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(Ni(t)>16)throw Error(OM+Ni(t));if(!t.s)return new d(Sc);for(gs=!1,l=h,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(qm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Sc),d.precision=l;;){if(a=Ua(a.times(t),l),r=r.times(++c),o=s.plus(Jf(a,r,l)),Md(o.d).slice(0,l)===Md(s.d).slice(0,l)){for(;u--;)s=Ua(s.times(s),l);return d.precision=h,e==null?(gs=!0,Ua(s,h)):s}s=o}}function Ni(t){for(var e=t.e*Ja,r=t.d[0];r>=10;r/=10)e++;return e}function yC(t,e,r){if(e>t.LN10.sd())throw gs=!0,r&&(t.precision=r),Error(Iu+"LN10 precision limit exceeded");return Ua(new t(t.LN10),e)}function t0(t){for(var e="";t--;)e+="0";return e}function Ry(t,e){var r,n,a,s,o,l,c,u,d,h=1,p=10,g=t,b=g.d,w=g.constructor,_=w.precision;if(g.s<1)throw Error(Iu+(g.s?"NaN":"-Infinity"));if(g.eq(Sc))return new w(0);if(e==null?(gs=!1,u=_):u=e,g.eq(10))return e==null&&(gs=!0),yC(w,u);if(u+=p,w.precision=u,r=Md(b),n=r.charAt(0),s=Ni(g),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=Md(g.d),n=r.charAt(0),h++;s=Ni(g),n>1?(g=new w("0."+r),s++):g=new w(n+"."+r.slice(1))}else return c=yC(w,u+2,_).times(s+""),g=Ry(new w(n+"."+r.slice(1)),u-p).plus(c),w.precision=_,e==null?(gs=!0,Ua(g,_)):g;for(l=o=g=Jf(g.minus(Sc),g.plus(Sc),u),d=Ua(g.times(g),u),a=3;;){if(o=Ua(o.times(d),u),c=l.plus(Jf(o,new w(a),u)),Md(c.d).slice(0,u)===Md(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(yC(w,u+2,_).times(s+""))),l=Jf(l,new w(h),u),w.precision=_,e==null?(gs=!0,Ua(l,_)):l;l=c,a+=2}}function FW(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Av(r/Ja),t.d=[],n=(r+1)%Ja,r<0&&(n+=Ja),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Ja;n<a;)t.d.push(+e.slice(n,n+=Ja));e=e.slice(n),n=Ja-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),gs&&(t.e>k4||t.e<-k4))throw Error(OM+r)}else t.s=0,t.e=0,t.d=[0];return t}function Ua(t,e,r){var n,a,s,o,l,c,u,d,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Ja,a=e,u=h[d=0];else{if(d=Math.ceil((n+1)/Ja),s=h.length,d>=s)return t;for(u=s=h[d],o=1;s>=10;s/=10)o++;n%=Ja,a=n-Ja+o}if(r!==void 0&&(s=qm(10,o-a-1),l=u/s%10|0,c=e<0||h[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/qm(10,o-a):0:h[d-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(s=Ni(t),h.length=1,e=e-s-1,h[0]=qm(10,(Ja-e%Ja)%Ja),t.e=Av(-e/Ja)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=d,s=1,d--):(h.length=d+1,s=qm(10,Ja-n),h[d]=a>0?(u/qm(10,o-a)%qm(10,a)|0)*s:0),c)for(;;)if(d==0){(h[0]+=s)==Yi&&(h[0]=1,++t.e);break}else{if(h[d]+=s,h[d]!=Yi)break;h[d--]=0,s=1}for(n=h.length;h[--n]===0;)h.pop();if(gs&&(t.e>k4||t.e<-k4))throw Error(OM+Ni(t));return t}function dde(t,e){var r,n,a,s,o,l,c,u,d,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),gs?Ua(e,g):e;if(c=t.d,h=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),a=Math.max(Math.ceil(g/Ja),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(s=a;s&&c[--s]===0;)c[s]=Yi-1;--c[s],c[a]+=Yi}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,gs?Ua(e,g):e):new p(0)}function Jp(t,e,r){var n,a=Ni(t),s=Md(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+t0(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+t0(-a-1)+s,r&&(n=r-o)>0&&(s+=t0(n))):a>=o?(s+=t0(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+t0(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=t0(n))),t.s<0?"-"+s:s}function BW(t,e){if(t.length>e)return t.length=e,!0}function fde(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Tp+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return FW(o,s.toString())}else if(typeof s!="string")throw Error(Tp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,het.test(s))FW(o,s);else throw Error(Tp+s)}if(a.prototype=kr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=fde,a.config=a.set=met,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function met(t){if(!t||typeof t!="object")throw Error(Iu+"Object expected");var e,r,n,a=["precision",1,Ev,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Av(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Tp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Tp+r+": "+n);return this}var PM=fde(fet);Sc=new PM(1);const Na=PM;var pet=t=>t,hde={},mde=t=>t===hde,UW=t=>function e(){return arguments.length===0||arguments.length===1&&mde(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},pde=(t,e)=>t===1?e:UW(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==hde).length;return s>=t?e(...n):pde(t-s,UW(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>mde(d)?l.shift():d);return e(...u,...l)}))}),get=t=>pde(t.length,t),JI=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},xet=get((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),vet=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return pet;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},eO=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function gde(t){var e;return t===0?e=1:e=Math.floor(new Na(t).abs().log(10).toNumber())+1,e}function xde(t,e,r){for(var n=new Na(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var vde=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},bde=(t,e,r)=>{if(t.lte(0))return new Na(0);var n=gde(t.toNumber()),a=new Na(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new Na(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?new Na(c.toNumber()):new Na(Math.ceil(c.toNumber()))},bet=(t,e,r)=>{var n=new Na(1),a=new Na(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new Na(10).pow(gde(t)-1),a=new Na(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Na(Math.floor(t)))}else t===0?a=new Na(Math.floor((e-1)/2)):r||(a=new Na(Math.floor(t)));var o=Math.floor((e-1)/2),l=vet(xet(c=>a.add(new Na(c-o).mul(n)).toNumber()),JI);return l(0,e)},yde=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new Na(0),tickMin:new Na(0),tickMax:new Na(0)};var o=bde(new Na(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new Na(0):(l=new Na(e).add(r).div(2),l=l.sub(new Na(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new Na(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?yde(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new Na(c).mul(o)),tickMax:l.add(new Na(u).mul(o))})},yet=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=vde([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...JI(0,a-1).map(()=>1/0)]:[...JI(0,a-1).map(()=>-1/0),c];return r>n?eO(u):u}if(l===c)return bet(l,a,s);var{step:d,tickMin:h,tickMax:p}=yde(l,c,o,s,0),g=xde(h,p.add(new Na(.1).mul(d)),d);return r>n?eO(g):g},wet=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=vde([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=bde(new Na(l).sub(o).div(c-1),s,0),d=[...xde(new Na(o),new Na(l),u),l];return s===!1&&(d=d.map(h=>Math.round(h))),n>a?eO(d):d},wde=t=>t.rootProps.maxBarSize,_et=t=>t.rootProps.barGap,_de=t=>t.rootProps.barCategoryGap,Net=t=>t.rootProps.barSize,e_=t=>t.rootProps.stackOffset,Nde=t=>t.rootProps.reverseStackOrder,RM=t=>t.options.chartName,DM=t=>t.rootProps.syncId,Ede=t=>t.rootProps.syncMethod,MM=t=>t.options.eventEmitter,wi={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},If={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},yc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},r6=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Eet={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:If.angleAxisId,includeHidden:!1,name:void 0,reversed:If.reversed,scale:If.scale,tick:If.tick,tickCount:void 0,ticks:void 0,type:If.type,unit:void 0},Aet={allowDataOverflow:yc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yc.scale,tick:yc.tick,tickCount:yc.tickCount,ticks:void 0,type:yc.type,unit:void 0},jet={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:If.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:If.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:If.scale,tick:If.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Tet={allowDataOverflow:yc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yc.scale,tick:yc.tick,tickCount:yc.tickCount,ticks:void 0,type:"category",unit:void 0},LM=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?jet:Eet,FM=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Tet:Aet,n6=t=>t.polarOptions,BM=bt([Ch,kh,Fi],bue),Ade=bt([n6,BM],(t,e)=>{if(t!=null)return Ko(t.innerRadius,e,0)}),Sde=bt([n6,BM],(t,e)=>{if(t!=null)return Ko(t.outerRadius,e,e*.8)}),Cet=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},jde=bt([n6],Cet);bt([LM,jde],r6);var Tde=bt([BM,Ade,Sde],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});bt([FM,Tde],r6);var Cde=bt([Xn,n6,Ade,Sde,Ch,kh],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:Ko(o,a,a/2),cy:Ko(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ys=(t,e)=>e,t_=(t,e,r)=>r;function UM(t){return t==null?void 0:t.id}function kde(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=UM(l);u.forEach((h,p)=>{var g=s==null||a?p:String(Ba(h,s,null)),b=Ba(h,l.dataKey,0),w;o.has(g)?w=o.get(g):w={},Object.assign(w,{[d]:b}),o.set(g,w)})}}),Array.from(o.values())}function a6(t){return t.stackId!=null&&t.dataKey!=null}var s6=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function i6(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function ket(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Ui=t=>{var e=Xn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Sv=t=>t.tooltip.settings.axisId;function zW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function I4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zW(Object(r),!0).forEach(function(n){Iet(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Iet(t,e,r){return(e=Oet(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oet(t){var e=Pet(t,"string");return typeof e=="symbol"?e:e+""}function Pet(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tO=[0,"auto"],Wi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Ide=(t,e)=>t.cartesianAxis.xAxis[e],Oh=(t,e)=>{var r=Ide(t,e);return r??Wi},Ki={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:tO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Hw},Ode=(t,e)=>t.cartesianAxis.yAxis[e],Ph=(t,e)=>{var r=Ode(t,e);return r??Ki},Ret={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},zM=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??Ret},js=(t,e,r)=>{switch(e){case"xAxis":return Oh(t,r);case"yAxis":return Ph(t,r);case"zAxis":return zM(t,r);case"angleAxis":return LM(t,r);case"radiusAxis":return FM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Det=(t,e,r)=>{switch(e){case"xAxis":return Oh(t,r);case"yAxis":return Ph(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},r_=(t,e,r)=>{switch(e){case"xAxis":return Oh(t,r);case"yAxis":return Ph(t,r);case"angleAxis":return LM(t,r);case"radiusAxis":return FM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Pde=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function VM(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var o6=t=>t.graphicalItems.cartesianItems,Met=bt([ys,t_],VM),$M=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),n_=bt([o6,js,Met],$M,{memoizeOptions:{resultEqualityCheck:i6}}),Rde=bt([n_],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(a6)),Dde=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Let=bt([n_],Dde),HM=t=>t.map(e=>e.data).filter(Boolean).flat(1),Fet=bt([n_],HM,{memoizeOptions:{resultEqualityCheck:i6}}),qM=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},GM=bt([Fet,t6],qM),WM=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Ba(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:Ba(a,n)}))):t.map(n=>({value:n})),l6=bt([GM,js,n_],WM);function Mde(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function dE(t){if(Zd(t)||t instanceof Date){var e=Number(t);if(si(e))return e}}function VW(t){if(Array.isArray(t)){var e=[dE(t[0]),dE(t[1])];return nm(e)?e:void 0}var r=dE(t);if(r!=null)return[r,r]}function _h(t){return t.map(dE).filter(XGe)}function Bet(t,e,r){return!r||typeof e!="number"||dd(e)?[]:r.length?_h(r.flatMap(n=>{var a=Ba(t,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!si(s)||!si(o)))return[e-s,e+o]})):[]}var zi=t=>{var e=Ui(t),r=Sv(t);return r_(t,e,r)},a_=bt([zi],t=>t==null?void 0:t.dataKey),Uet=bt([Rde,t6,zi],kde),Lde=(t,e,r,n)=>{var a={},s=e.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(UM);return[l,{stackedData:fXe(t,d,r),graphicalItems:u}]}))},rO=bt([Uet,Rde,e_,Nde],Lde),Fde=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=xXe(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},zet=bt([js],t=>t.allowDataOverflow),KM=t=>{var e;if(t==null||!("domain"in t))return tO;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=_h(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:tO},XM=bt([js],KM),YM=bt([XM,zet],ode),Vet=bt([rO,Em,ys,YM],Fde,{memoizeOptions:{resultEqualityCheck:s6}}),c6=t=>t.errorBars,$et=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>Mde(r,n)),O4=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},ZM=(t,e,r,n,a)=>{var s,o;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,h=(u=n[c.id])===null||u===void 0?void 0:u.filter(N=>Mde(a,N)),p=Ba(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),g=Bet(l,p,h);if(g.length>=2){var b=Math.min(...g),w=Math.max(...g);(s==null||b<s)&&(s=b),(o==null||w>o)&&(o=w)}var _=VW(p);_!=null&&(s=s==null?_[0]:Math.min(s,_[0]),o=o==null?_[1]:Math.max(o,_[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=VW(Ba(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),si(s)&&si(o))return[s,o]},Het=bt([GM,js,Let,c6,ys],ZM,{memoizeOptions:{resultEqualityCheck:s6}});function qet(t){var{value:e}=t;if(Zd(e)||e instanceof Date)return e}var Get=(t,e,r)=>{var n=t.map(qet).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&Rle(n))?Sue(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},Bde=t=>t.referenceElements.dots,jv=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),Wet=bt([Bde,ys,t_],jv),Ude=t=>t.referenceElements.areas,Ket=bt([Ude,ys,t_],jv),zde=t=>t.referenceElements.lines,Xet=bt([zde,ys,t_],jv),Vde=(t,e)=>{var r=_h(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Yet=bt(Wet,ys,Vde),$de=(t,e)=>{var r=_h(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Zet=bt([Ket,ys],$de);function Qet(t){var e;if(t.x!=null)return _h([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:_h(r)}function Jet(t){var e;if(t.y!=null)return _h([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:_h(r)}var Hde=(t,e)=>{var r=t.flatMap(n=>e==="xAxis"?Qet(n):Jet(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ett=bt([Xet,ys],Hde),ttt=bt(Yet,ett,Zet,(t,e,r)=>O4(t,r,e)),QM=(t,e,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?O4(n,s,a):O4(s,a);return det(e,u,t.allowDataOverflow)},rtt=bt([js,XM,YM,Vet,Het,ttt,Xn,ys],QM,{memoizeOptions:{resultEqualityCheck:s6}}),ntt=[0,1],JM=(t,e,r,n,a,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=wm(e,s);if(u&&l==null){var d;return Sue(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?Get(n,t,u):a==="expand"?ntt:o}},eL=bt([js,Xn,GM,l6,e_,ys,rtt],JM),qde=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Fw(s));return l in Pb?l:"point"}}},Tv=bt([js,Xn,Pde,RM,ys],qde);function att(t){if(t!=null){if(t in Pb)return Pb[t]();var e="scale".concat(Fw(t));if(e in Pb)return Pb[e]()}}function tL(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=att(e);if(a!=null){var s=a.domain(r).range(n);return oXe(s),s}}}var rL=(t,e,r)=>{var n=KM(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&nm(t))return yet(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&nm(t))return wet(t,e.tickCount,e.allowDecimals)}},nL=bt([eL,r_,Tv],rL),aL=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&nm(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],o=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return e},stt=bt([js,eL,nL,ys],aL),itt=bt(l6,js,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(_h(t.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),Gde=bt(itt,Xn,_de,Fi,(t,e,r,n)=>n,(t,e,r,n,a)=>{if(!si(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=Ko(r,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),ott=(t,e)=>{var r=Oh(t,e);return r==null||typeof r.padding!="string"?0:Gde(t,"xAxis",e,r.padding)},ltt=(t,e)=>{var r=Ph(t,e);return r==null||typeof r.padding!="string"?0:Gde(t,"yAxis",e,r.padding)},ctt=bt(Oh,ott,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),utt=bt(Ph,ltt,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),dtt=bt([Fi,ctt,$S,VS,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),ftt=bt([Fi,Xn,utt,$S,VS,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),s_=(t,e,r,n)=>{var a;switch(e){case"xAxis":return dtt(t,r,n);case"yAxis":return ftt(t,r,n);case"zAxis":return(a=zM(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return jde(t);case"radiusAxis":return Tde(t,r);default:return}},Wde=bt([js,s_],r6),Cv=bt([js,Tv,stt,Wde],tL);bt([n_,c6,ys],$et);function Kde(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var u6=(t,e)=>e,d6=(t,e,r)=>r,htt=bt(US,u6,d6,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Kde)),mtt=bt(zS,u6,d6,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Kde)),Xde=(t,e)=>({width:t.width,height:e.height}),ptt=(t,e)=>{var r=typeof e.width=="number"?e.width:Hw;return{width:r,height:t.height}},Yde=bt(Fi,Oh,Xde),gtt=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},xtt=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},vtt=bt(kh,Fi,htt,u6,d6,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Xde(e,l);o==null&&(o=gtt(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),btt=bt(Ch,Fi,mtt,u6,d6,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=ptt(e,l);o==null&&(o=xtt(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),ytt=(t,e)=>{var r=Oh(t,e);if(r!=null)return vtt(t,r.orientation,r.mirror)},wtt=bt([Fi,Oh,ytt,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),_tt=(t,e)=>{var r=Ph(t,e);if(r!=null)return btt(t,r.orientation,r.mirror)},Ntt=bt([Fi,Ph,_tt,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),Zde=bt(Fi,Ph,(t,e)=>{var r=typeof e.width=="number"?e.width:Hw;return{width:r,height:t.height}}),$W=(t,e,r)=>{switch(e){case"xAxis":return Yde(t,r).width;case"yAxis":return Zde(t,r).height;default:return}},Qde=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=wm(t,n),c=e.map(u=>u.value);if(o&&l&&s==="category"&&a&&Rle(c))return c}},sL=bt([Xn,l6,js,ys],Qde),Jde=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=wm(t,n);if(o&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},iL=bt([Xn,l6,r_,ys],Jde),HW=bt([Xn,Det,Tv,Cv,sL,iL,s_,nL,ys],(t,e,r,n,a,s,o,l,c)=>{if(e!=null){var u=wm(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}}),Ett=(t,e,r,n,a,s,o,l,c)=>{if(!(e==null||n==null)){var u=wm(t,c),{type:d,ticks:h,tickCount:p}=e,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=d==="category"&&n.bandwidth?n.bandwidth()/g:0;b=c==="angleAxis"&&s!=null&&s.length>=2?no(s[0]-s[1])*2*b:b;var w=h||a;if(w){var _=w.map((N,A)=>{var j=o?o.indexOf(N):N;return{index:A,coordinate:n(j)+b,value:N,offset:b}});return _.filter(N=>si(N.coordinate))}return u&&l?l.map((N,A)=>({coordinate:n(N)+b,value:N,index:A,offset:b})).filter(N=>si(N.coordinate)):n.ticks?n.ticks(p).map(N=>({coordinate:n(N)+b,value:N,offset:b})):n.domain().map((N,A)=>({coordinate:n(N)+b,value:o?o[N]:N,index:A,offset:b}))}},efe=bt([Xn,r_,Tv,Cv,nL,s_,sL,iL,ys],Ett),Att=(t,e,r,n,a,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=wm(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?no(n[0]-n[1])*2*u:u,l&&s?s.map((d,h)=>({coordinate:r(d)+u,value:d,index:h,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,h)=>({coordinate:r(d)+u,value:a?a[d]:d,index:h,offset:u}))}},am=bt([Xn,r_,Cv,s_,sL,iL,ys],Att),sm=bt(js,Cv,(t,e)=>{if(!(t==null||e==null))return I4(I4({},t),{},{scale:e})}),Stt=bt([js,Tv,eL,Wde],tL);bt((t,e,r)=>zM(t,r),Stt,(t,e)=>{if(!(t==null||e==null))return I4(I4({},t),{},{scale:e})});var jtt=bt([Xn,US,zS],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),tfe=t=>t.options.defaultTooltipEventType,rfe=t=>t.options.validateTooltipEventTypes;function nfe(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function oL(t,e){var r=tfe(t),n=rfe(t);return nfe(e,r,n)}function Ttt(t){return Cr(e=>oL(e,t))}var afe=(t,e)=>{var r,n=Number(e);if(!(dd(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},Ctt=t=>t.tooltip.settings,c0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},ktt={itemInteraction:{click:c0,hover:c0},axisInteraction:{click:c0,hover:c0},keyboardInteraction:c0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},sfe=tc({name:"tooltip",initialState:ktt,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:ds()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=od(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:ds()},removeTooltipEntrySettings:{reducer(t,e){var r=od(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:ds()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Itt,replaceTooltipEntrySettings:Ott,removeTooltipEntrySettings:Ptt,setTooltipSettingsState:Rtt,setActiveMouseOverItemIndex:ife,mouseLeaveItem:Dtt,mouseLeaveChart:ofe,setActiveClickItemIndex:Mtt,setMouseOverAxisIndex:lfe,setMouseClickAxisIndex:Ltt,setSyncInteraction:nO,setKeyboardInteraction:aO}=sfe.actions,Ftt=sfe.reducer;function qW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qW(Object(r),!0).forEach(function(n){Btt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Btt(t,e,r){return(e=Utt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Utt(t){var e=ztt(t,"string");return typeof e=="symbol"?e:e+""}function ztt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vtt(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function $tt(t){return t.index!=null}var cfe=(t,e,r,n)=>{if(e==null)return c0;var a=Vtt(t,e,r);if(a==null)return c0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if($tt(a)){if(s)return rN(rN({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return rN(rN({},c0),{},{coordinate:a.coordinate})};function Htt(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function qtt(t,e){var r=Htt(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function Gtt(t,e,r){if(r==null||e==null)return!0;var n=Ba(t,e);return n==null||!nm(r)?!0:qtt(n,r)}var lL=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!si(s))return a;var o=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(o,Math.min(s,l)),u=e[c];return u==null||Gtt(u,r,n)?String(c):null},ufe=(t,e,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},dfe=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=t.itemInteraction.hover.dataKey:a=t.itemInteraction.click.dataKey,a==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},i_=t=>t.options.tooltipPayloadSearcher,kv=t=>t.tooltip;function GW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GW(Object(r),!0).forEach(function(n){Wtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wtt(t,e,r){return(e=Ktt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ktt(t){var e=Xtt(t,"string");return typeof e=="symbol"?e:e+""}function Xtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ytt(t,e){return t??e}var ffe=(t,e,r,n,a,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,h=[];return t.reduce((p,g)=>{var b,{dataDefinedOnItem:w,settings:_}=g,N=Ytt(w,l),A=Array.isArray(N)?$ce(N,u,d):N,j=(b=_==null?void 0:_.dataKey)!==null&&b!==void 0?b:n,P=_==null?void 0:_.nameKey,U;if(n&&Array.isArray(A)&&!Array.isArray(A[0])&&o==="axis"?U=Dle(A,n,a):U=s(A,e,c,P),Array.isArray(U))U.forEach(O=>{var D=WW(WW({},_),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});p.push(wG({tooltipEntrySettings:D,dataKey:O.dataKey,payload:O.payload,value:Ba(O.payload,O.dataKey),name:O.name}))});else{var G;p.push(wG({tooltipEntrySettings:_,dataKey:j,payload:U,value:Ba(U,j),name:(G=Ba(U,P))!==null&&G!==void 0?G:_==null?void 0:_.name}))}return p},h)}},cL=bt([zi,Xn,Pde,RM,Ui],qde),Ztt=bt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Qtt=bt([Ui,Sv],VM),o_=bt([Ztt,zi,Qtt],$M,{memoizeOptions:{resultEqualityCheck:i6}}),Jtt=bt([o_],t=>t.filter(a6)),ert=bt([o_],HM,{memoizeOptions:{resultEqualityCheck:i6}}),Iv=bt([ert,Em],qM),trt=bt([Jtt,Em,zi],kde),uL=bt([Iv,zi,o_],WM),hfe=bt([zi],KM),rrt=bt([zi],t=>t.allowDataOverflow),mfe=bt([hfe,rrt],ode),nrt=bt([o_],t=>t.filter(a6)),art=bt([trt,nrt,e_,Nde],Lde),srt=bt([art,Em,Ui,mfe],Fde),irt=bt([o_],Dde),ort=bt([Iv,zi,irt,c6,Ui],ZM,{memoizeOptions:{resultEqualityCheck:s6}}),lrt=bt([Bde,Ui,Sv],jv),crt=bt([lrt,Ui],Vde),urt=bt([Ude,Ui,Sv],jv),drt=bt([urt,Ui],$de),frt=bt([zde,Ui,Sv],jv),hrt=bt([frt,Ui],Hde),mrt=bt([crt,hrt,drt],O4),prt=bt([zi,hfe,mfe,srt,ort,mrt,Xn,Ui],QM),l_=bt([zi,Xn,Iv,uL,e_,Ui,prt],JM),grt=bt([l_,zi,cL],rL),xrt=bt([zi,l_,grt,Ui],aL),pfe=t=>{var e=Ui(t),r=Sv(t),n=!1;return s_(t,e,r,n)},gfe=bt([zi,pfe],r6),xfe=bt([zi,cL,xrt,gfe],tL),vrt=bt([Xn,uL,zi,Ui],Qde),brt=bt([Xn,uL,zi,Ui],Jde),yrt=(t,e,r,n,a,s,o,l)=>{if(e){var{type:c}=e,u=wm(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return h=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?no(a[0]-a[1])*2*h:h,u&&o?o.map((p,g)=>({coordinate:n(p)+h,value:p,index:g,offset:h})):n.domain().map((p,g)=>({coordinate:n(p)+h,value:s?s[p]:p,index:g,offset:h}))}}},Rh=bt([Xn,zi,cL,xfe,pfe,vrt,brt,Ui],yrt),dL=bt([tfe,rfe,Ctt],(t,e,r)=>nfe(r.shared,t,e)),vfe=t=>t.tooltip.settings.trigger,fL=t=>t.tooltip.settings.defaultIndex,c_=bt([kv,dL,vfe,fL],cfe),im=bt([c_,Iv,a_,l_],lL),bfe=bt([Rh,im],afe),hL=bt([c_],t=>{if(t)return t.dataKey}),wrt=bt([c_],t=>{if(t)return t.graphicalItemId}),yfe=bt([kv,dL,vfe,fL],dfe),_rt=bt([Ch,kh,Xn,Fi,Rh,fL,yfe,i_],ufe),Nrt=bt([c_,_rt],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Ert=bt([c_],t=>t.active),Art=bt([yfe,im,Em,a_,bfe,i_,dL],ffe),Srt=bt([Art],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function KW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function XW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(r),!0).forEach(function(n){jrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jrt(t,e,r){return(e=Trt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Trt(t){var e=Crt(t,"string");return typeof e=="symbol"?e:e+""}function Crt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var krt=()=>Cr(zi),Irt=()=>{var t=krt(),e=Cr(Rh),r=Cr(xfe);return Vx(!t||!r?void 0:XW(XW({},t),{},{scale:r}),e)};function YW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $g(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YW(Object(r),!0).forEach(function(n){Ort(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ort(t,e,r){return(e=Prt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Prt(t){var e=Rrt(t,"string");return typeof e=="symbol"?e:e+""}function Rrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Drt=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},Mrt=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=n;return $g($g($g({},n),yi(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return $g($g($g({},n),yi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Lrt(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var wfe=(t,e,r,n,a)=>{var s,o=-1,l=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(l<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,p=void 0;if(no(d-u)!==no(h-d)){var g=[];if(no(h-d)===no(a[1]-a[0])){p=h;var b=d+a[1]-a[0];g[0]=Math.min(b,(b+u)/2),g[1]=Math.max(b,(b+u)/2)}else{p=u;var w=h+a[1]-a[0];g[0]=Math.min(d,(w+d)/2),g[1]=Math.max(d,(w+d)/2)}var _=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>_[0]&&t<=_[1]||t>=g[0]&&t<=g[1]){({index:o}=r[c]);break}}else{var N=Math.min(u,h),A=Math.max(u,h);if(t>(N+d)/2&&t<=(A+d)/2){({index:o}=r[c]);break}}}else if(e){for(var j=0;j<l;j++)if(j===0&&t<=(e[j].coordinate+e[j+1].coordinate)/2||j>0&&j<l-1&&t>(e[j].coordinate+e[j-1].coordinate)/2&&t<=(e[j].coordinate+e[j+1].coordinate)/2||j===l-1&&t>(e[j].coordinate+e[j-1].coordinate)/2){({index:o}=e[j]);break}}return o},Frt=()=>Cr(RM),mL=(t,e)=>e,_fe=(t,e,r)=>r,pL=(t,e,r,n)=>n,Brt=bt(Rh,t=>IS(t,e=>e.coordinate)),gL=bt([kv,mL,_fe,pL],cfe),xL=bt([gL,Iv,a_,l_],lL),Urt=(t,e,r)=>{if(e!=null){var n=kv(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Nfe=bt([kv,mL,_fe,pL],dfe),P4=bt([Ch,kh,Xn,Fi,Rh,pL,Nfe,i_],ufe),zrt=bt([gL,P4],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),Efe=bt([Rh,xL],afe),Vrt=bt([Nfe,xL,Em,a_,Efe,i_,mL],ffe),$rt=bt([gL,xL],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Hrt=(t,e,r,n,a,s,o)=>{if(!(!t||!r||!n||!a)&&Lrt(t,o)){var l=vXe(t,e),c=wfe(l,s,a,r,n),u=Drt(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},qrt=(t,e,r,n,a,s,o)=>{if(!(!t||!n||!a||!s||!r)){var l=kZe(t,r);if(l){var c=bXe(l,e),u=wfe(c,o,s,n,a),d=Mrt(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},Grt=(t,e,r,n,a,s,o,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?Hrt(t,e,n,a,s,o,l):qrt(t,e,r,n,a,s,o)},Wrt=bt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElementId:n.elementId}}),Krt=bt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(wi)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:ket}});function ZW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function QW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZW(Object(r),!0).forEach(function(n){Xrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xrt(t,e,r){return(e=Yrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yrt(t){var e=Zrt(t,"string");return typeof e=="symbol"?e:e+""}function Zrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qrt={},Jrt={zIndexMap:Object.values(wi).reduce((t,e)=>QW(QW({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Qrt)},ent=new Set(Object.values(wi));function tnt(t){return ent.has(t)}var Afe=tc({name:"zIndex",initialState:Jrt,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:ds()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!tnt(r)&&delete t.zIndexMap[r])},prepare:ds()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r,elementId:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElementId=n:t.zIndexMap[r].elementId=n:t.zIndexMap[r]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:ds()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElementId=void 0:t.zIndexMap[r].elementId=void 0)},prepare:ds()}}}),{registerZIndexPortal:rnt,unregisterZIndexPortal:nnt,registerZIndexPortalId:ant,unregisterZIndexPortalId:snt}=Afe.actions,int=Afe.reducer;function rc(t){var{zIndex:e,children:r}=t,n=GXe(),a=n&&e!==void 0&&e!==0,s=Yo(),o=Xa();S.useLayoutEffect(()=>a?(o(rnt({zIndex:e})),()=>{o(nnt({zIndex:e}))}):Bw,[o,e,a]);var l=Cr(u=>Wrt(u,e,s));if(!a)return r;if(!l)return null;var c=document.getElementById(l);return c?Ly.createPortal(r,c):null}function sO(){return sO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sO.apply(null,arguments)}function JW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function nN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JW(Object(r),!0).forEach(function(n){ont(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ont(t,e,r){return(e=lnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lnt(t){var e=cnt(t,"string");return typeof e=="symbol"?e:e+""}function cnt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function unt(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return S.isValidElement(e)?S.cloneElement(e,n):S.createElement(r,n)}function dnt(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,h=r,p=n,g=a;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var b,w,_;if(d==="ScatterChart")b=h,w=qYe,_=wi.cursorLine;else if(d==="BarChart")b=GYe(l,h,s,o),w=vue,_=wi.cursorRectangle;else if(l==="radial"&&Lle(h)){var{cx:N,cy:A,radius:j,startAngle:P,endAngle:U}=yue(h);b={cx:N,cy:A,startAngle:P,endAngle:U,innerRadius:j,outerRadius:j},w=_ue,_=wi.cursorLine}else b={points:RZe(l,h,s)},w=oM,_=wi.cursorLine;var G=typeof c=="object"&&"className"in c?c.className:void 0,O=nN(nN(nN(nN({stroke:"#ccc",pointerEvents:"none"},s),b),Xp(c)),{},{payload:p,payloadIndex:g,className:aa("recharts-tooltip-cursor",G)});return S.createElement(rc,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:_},S.createElement(unt,{cursor:c,cursorComp:w,cursorProps:O}))}function fnt(t){var e=Irt(),r=rue(),n=qw(),a=Frt();return e==null||r==null||n==null||a==null?null:S.createElement(dnt,sO({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var Sfe=S.createContext(null),hnt=()=>S.useContext(Sfe),jfe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||c,p),b=r?r+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],g]:c._events[b].push(g):(c._events[b]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,b=new Array(g);p<g;p++)b[p]=h[p].fn;return b},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,p,g,b){var w=r?r+u:u;if(!this._events[w])return!1;var _=this._events[w],N=arguments.length,A,j;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),N){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,p),!0;case 5:return _.fn.call(_.context,d,h,p,g),!0;case 6:return _.fn.call(_.context,d,h,p,g,b),!0}for(j=1,A=new Array(N-1);j<N;j++)A[j-1]=arguments[j];_.fn.apply(_.context,A)}else{var P=_.length,U;for(j=0;j<P;j++)switch(_[j].once&&this.removeListener(u,_[j].fn,void 0,!0),N){case 1:_[j].fn.call(_[j].context);break;case 2:_[j].fn.call(_[j].context,d);break;case 3:_[j].fn.call(_[j].context,d,h);break;case 4:_[j].fn.call(_[j].context,d,h,p);break;default:if(!A)for(U=1,A=new Array(N-1);U<N;U++)A[U-1]=arguments[U];_[j].fn.apply(_[j].context,A)}}return!0},l.prototype.on=function(u,d,h){return s(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return s(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,p){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===d&&(!p||b.once)&&(!h||b.context===h)&&o(this,g);else{for(var w=0,_=[],N=b.length;w<N;w++)(b[w].fn!==d||p&&!b[w].once||h&&b[w].context!==h)&&_.push(b[w]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(jfe);var mnt=jfe.exports;const pnt=Hc(mnt);var Dy=new pnt,iO="recharts.syncEvent.tooltip",eK="recharts.syncEvent.brush";function vL(t,e){if(e){var r=Number.parseInt(e,10);if(!dd(r))return t==null?void 0:t[r]}}var gnt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},Tfe=tc({name:"options",initialState:gnt,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),xnt=Tfe.reducer,{createEventEmitter:vnt}=Tfe.actions;function bnt(t){return t.tooltip.syncInteraction}var ynt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Cfe=tc({name:"chartData",initialState:ynt,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:tK,setDataStartEndIndexes:wnt,setComputedData:Bdt}=Cfe.actions,_nt=Cfe.reducer,Nnt=["x","y"];function rK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rK(Object(r),!0).forEach(function(n){Ent(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ent(t,e,r){return(e=Ant(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ant(t){var e=Snt(t,"string");return typeof e=="symbol"?e:e+""}function Snt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jnt(t,e){if(t==null)return{};var r,n,a=Tnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Tnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Cnt(){var t=Cr(DM),e=Cr(MM),r=Xa(),n=Cr(Ede),a=Cr(Rh),s=qw(),o=HS(),l=Cr(c=>c.rootProps.className);S.useEffect(()=>{if(t==null)return Bw;var c=(u,d,h)=>{if(e!==h&&t===u){if(n==="index"){var p;if(o&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var g=d.payload.coordinate,{x:b,y:w}=g,_=jnt(g,Nnt),{x:N,y:A,width:j,height:P}=d.payload.sourceViewBox,U=Hg(Hg({},_),{},{x:o.x+(j?(b-N)/j:0)*o.width,y:o.y+(P?(w-A)/P:0)*o.height});r(Hg(Hg({},d),{},{payload:Hg(Hg({},d.payload),{},{coordinate:U})}))}else r(d);return}if(a!=null){var G;if(typeof n=="function"){var O={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},D=n(a,O);G=a[D]}else n==="value"&&(G=a.find(ce=>String(ce.value)===d.payload.label));var{coordinate:I}=d.payload;if(G==null||d.payload.active===!1||I==null||o==null){r(nO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:V,y:R}=I,B=Math.min(V,o.x+o.width),F=Math.min(R,o.y+o.height),ee={x:s==="horizontal"?G.coordinate:B,y:s==="horizontal"?F:G.coordinate},Z=nO({active:d.payload.active,coordinate:ee,dataKey:d.payload.dataKey,index:String(G.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(Z)}}};return Dy.on(iO,c),()=>{Dy.off(iO,c)}},[l,r,e,t,n,a,s,o])}function knt(){var t=Cr(DM),e=Cr(MM),r=Xa();S.useEffect(()=>{if(t==null)return Bw;var n=(a,s,o)=>{e!==o&&t===a&&r(wnt(s))};return Dy.on(eK,n),()=>{Dy.off(eK,n)}},[r,e,t])}function Int(){var t=Xa();S.useEffect(()=>{t(vnt())},[t]),Cnt(),knt()}function Ont(t,e,r,n,a,s){var o=Cr(g=>Urt(g,t,e)),l=Cr(MM),c=Cr(DM),u=Cr(Ede),d=Cr(bnt),h=d==null?void 0:d.active,p=HS();S.useEffect(()=>{if(!h&&c!=null&&l!=null){var g=nO({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:p,graphicalItemId:void 0});Dy.emit(iO,c,g,l)}},[h,r,o,a,n,l,c,u,s,p])}function nK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function aK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nK(Object(r),!0).forEach(function(n){Pnt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pnt(t,e,r){return(e=Rnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rnt(t){var e=Dnt(t,"string");return typeof e=="symbol"?e:e+""}function Dnt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mnt(t){return t.dataKey}function Lnt(t,e){return S.isValidElement(t)?S.cloneElement(t,e):typeof t=="function"?S.createElement(t,e):S.createElement(EYe,e)}var sK=[],Fnt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function aN(t){var e,r,n=Si(t,Fnt),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:g,reverseDirection:b,useTranslate3d:w,wrapperStyle:_,cursor:N,shared:A,trigger:j,defaultIndex:P,portal:U,axisId:G}=n,O=Xa(),D=typeof P=="number"?String(P):P;S.useEffect(()=>{O(Rtt({shared:A,trigger:j,axisId:G,active:a,defaultIndex:D}))},[O,A,j,G,a,D]);var I=HS(),V=hue(),R=Ttt(A),{activeIndex:B,isActive:F}=(e=Cr(ke=>$rt(ke,R,j,D)))!==null&&e!==void 0?e:{},ee=Cr(ke=>Vrt(ke,R,j,D)),Z=Cr(ke=>Efe(ke,R,j,D)),ce=Cr(ke=>zrt(ke,R,j,D)),ne=ee,ae=hnt(),me=(r=a??F)!==null&&r!==void 0?r:!1,[Ee,ye]=hce([ne,me]),H=R==="axis"?Z:void 0;Ont(R,j,ce,H,B,me);var Y=U??ae;if(Y==null||I==null||R==null)return null;var X=ne??sK;me||(X=sK),u&&X.length&&(X=tce(X.filter(ke=>ke.value!=null&&(ke.hide!==!0||n.includeHidden)),p,Mnt));var re=X.length>0,se=S.createElement(IYe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:me,coordinate:ce,hasPayload:re,offset:h,position:g,reverseDirection:b,useTranslate3d:w,viewBox:I,wrapperStyle:_,lastBoundingBox:Ee,innerRef:ye,hasPortalFromProps:!!U},Lnt(c,aK(aK({},n),{},{payload:X,label:H,active:me,activeIndex:B,coordinate:ce,accessibilityLayer:V})));return S.createElement(S.Fragment,null,Ly.createPortal(se,Y),me&&S.createElement(fnt,{cursor:N,tooltipEventType:R,coordinate:ce,payload:X,index:B}))}var u_=t=>null;u_.displayName="Cell";function Bnt(t,e,r){return(e=Unt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Unt(t){var e=znt(t,"string");return typeof e=="symbol"?e:e+""}function znt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Vnt{constructor(e){Bnt(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function iK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function $nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iK(Object(r),!0).forEach(function(n){Hnt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hnt(t,e,r){return(e=qnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qnt(t){var e=Gnt(t,"string");return typeof e=="symbol"?e:e+""}function Gnt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wnt={cacheSize:2e3,enableCache:!0},kfe=$nt({},Wnt),oK=new Vnt(kfe.cacheSize),Knt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},lK="recharts_measurement_span";function Xnt(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var cK=(t,e)=>{try{var r=document.getElementById(lK);r||(r=document.createElement("span"),r.setAttribute("id",lK),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Knt,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},y2=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ww.isSsr)return{width:0,height:0};if(!kfe.enableCache)return cK(e,r);var n=Xnt(e,r),a=oK.get(n);if(a)return a;var s=cK(e,r);return oK.set(n,s),s},uK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Ynt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Znt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Ife={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Qnt=Object.keys(Ife),T1="NaN";function Jnt(t,e){return t*Ife[e]}class Ll{static parse(e){var r,[,n,a]=(r=Znt.exec(e))!==null&&r!==void 0?r:[];return new Ll(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,dd(e)&&(this.unit=""),r!==""&&!Ynt.test(r)&&(this.num=NaN,this.unit=""),Qnt.includes(r)&&(this.num=Jnt(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Ll(NaN,""):new Ll(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ll(NaN,""):new Ll(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ll(NaN,""):new Ll(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ll(NaN,""):new Ll(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return dd(this.num)}}function Ofe(t){if(t.includes(T1))return T1;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=uK.exec(e))!==null&&r!==void 0?r:[],o=Ll.parse(n??""),l=Ll.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return T1;e=e.replace(uK,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,h,p]=(u=dK.exec(e))!==null&&u!==void 0?u:[],g=Ll.parse(d??""),b=Ll.parse(p??""),w=h==="+"?g.add(b):g.subtract(b);if(w.isNaN())return T1;e=e.replace(dK,w.toString())}return e}var fK=/\(([^()]*)\)/;function eat(t){for(var e=t,r;(r=fK.exec(e))!=null;){var[,n]=r;e=e.replace(fK,Ofe(n))}return e}function tat(t){var e=t.replace(/\s+/g,"");return e=eat(e),e=Ofe(e),e}function rat(t){try{return tat(t)}catch{return T1}}function wC(t){var e=rat(t.slice(5,-1));return e===T1?"":e}var nat=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],aat=["dx","dy","angle","className","breakAll"];function oO(){return oO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oO.apply(null,arguments)}function hK(t,e){if(t==null)return{};var r,n,a=sat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function sat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Pfe=/[ \f\n\r\t\v\u2028\u2029]+/,Rfe=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];xs(e)||(r?a=e.toString().split(""):a=e.toString().split(Pfe));var s=a.map(l=>({word:l,width:y2(l,n).width})),o=r?0:y2("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function iat(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var Dfe=(t,e,r,n)=>t.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),Mfe=t=>t.reduce((e,r)=>e.width>r.width?e:r),oat="",mK=(t,e,r,n,a,s,o,l)=>{var c=t.slice(0,e),u=Rfe({breakAll:r,style:n,children:c+oat});if(!u)return[!1,[]];var d=Dfe(u.wordsWithComputedWidth,s,o,l),h=d.length>a||Mfe(d).width>Number(s);return[h,d]},lat=(t,e,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=t,u=Mr(s),d=String(o),h=Dfe(e,n,r,a);if(!u||a)return h;var p=h.length>s||Mfe(h).width>Number(n);if(!p)return h;for(var g=0,b=d.length-1,w=0,_;g<=b&&w<=d.length-1;){var N=Math.floor((g+b)/2),A=N-1,[j,P]=mK(d,A,c,l,s,n,r,a),[U]=mK(d,N,c,l,s,n,r,a);if(!j&&!U&&(g=N+1),j&&U&&(b=N-1),!j&&U){_=P;break}w++}return _||h},pK=t=>{var e=xs(t)?[]:t.toString().split(Pfe);return[{words:e,width:void 0}]},cat=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=t;if((e||r)&&!Ww.isSsr){var l,c,u=Rfe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return pK(n);return lat({breakAll:s,children:n,maxLines:o,style:a},l,c,e,!!r)}return pK(n)},Lfe="#808080",uat={angle:0,breakAll:!1,capHeight:"0.71em",fill:Lfe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},f6=S.forwardRef((t,e)=>{var r=Si(t,uat),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,h=hK(r,nat),p=S.useMemo(()=>cat({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:g,dy:b,angle:w,className:_,breakAll:N}=h,A=hK(h,aat);if(!Zd(n)||!Zd(a)||p.length===0)return null;var j=Number(n)+(Mr(g)?g:0),P=Number(a)+(Mr(b)?b:0);if(!si(j)||!si(P))return null;var U;switch(d){case"start":U=wC("calc(".concat(o,")"));break;case"middle":U=wC("calc(".concat((p.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:U=wC("calc(".concat(p.length-1," * -").concat(s,")"));break}var G=[];if(c){var O=p[0].width,{width:D}=h;G.push("scale(".concat(Mr(D)&&Mr(O)?D/O:1,")"))}return w&&G.push("rotate(".concat(w,", ").concat(j,", ").concat(P,")")),G.length&&(A.transform=G.join(" ")),S.createElement("text",oO({},wl(A),{ref:e,x:j,y:P,className:aa("recharts-text",_),textAnchor:u,fill:l.includes("url")?Lfe:l}),p.map((I,V)=>{var R=I.words.join(N?"":" ");return S.createElement("tspan",{x:j,dy:V===0?U:s,key:"".concat(R,"-").concat(V)},R)}))});f6.displayName="Text";var dat=["labelRef"];function fat(t,e){if(t==null)return{};var r,n,a=hat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function hat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function gK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gK(Object(r),!0).forEach(function(n){mat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mat(t,e,r){return(e=pat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pat(t){var e=gat(t,"string");return typeof e=="symbol"?e:e+""}function gat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Of.apply(null,arguments)}var Ffe=S.createContext(null),xat=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=t,c=S.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[e,r,n,a,s,o]);return S.createElement(Ffe.Provider,{value:c},l)},Bfe=()=>{var t=S.useContext(Ffe),e=HS();return t||tue(e)},vat=S.createContext(null),bat=()=>{var t=S.useContext(vat),e=Cr(Cde);return t||e},yat=t=>{var{value:e,formatter:r}=t,n=xs(t.children)?e:t.children;return typeof r=="function"?r(n):n},bL=t=>t!=null&&typeof t=="function",wat=(t,e)=>{var r=no(e-t),n=Math.min(Math.abs(e-t),360);return r*n},_at=(t,e,r,n,a)=>{var{offset:s,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:p,clockWise:g}=a,b=(u+d)/2,w=wat(h,p),_=w>=0?1:-1,N,A;switch(e){case"insideStart":N=h+_*s,A=g;break;case"insideEnd":N=p-_*s,A=!g;break;case"end":N=p+_*s,A=g;break;default:throw new Error("Unsupported position ".concat(e))}A=w<=0?A:!A;var j=yi(l,c,b,N),P=yi(l,c,b,N+(A?1:-1)*359),U="M".concat(j.x,",").concat(j.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(A?0:1,`,
    `).concat(P.x,",").concat(P.y),G=xs(t.id)?_y("recharts-radial-line-"):t.id;return S.createElement("text",Of({},n,{dominantBaseline:"central",className:aa("recharts-radial-bar-label",o)}),S.createElement("defs",null,S.createElement("path",{id:G,d:U})),S.createElement("textPath",{xlinkHref:"#".concat(G)},r))},Nat=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:h}=yi(n,a,o+e,u);return{x:d,y:h,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var p=(s+o)/2,{x:g,y:b}=yi(n,a,p,u);return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},lO=t=>"cx"in t&&Mr(t.cx),Eat=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!lO(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=e,h=o,p=o+(c-u)/2,g=(h+p)/2,b=(c+u)/2,w=h+c/2,_=d>=0?1:-1,N=_*n,A=_>0?"end":"start",j=_>0?"start":"end",P=c>=0?1:-1,U=P*n,G=P>0?"end":"start",O=P>0?"start":"end";if(a==="top"){var D={x:h+c/2,y:l-N,textAnchor:"middle",verticalAnchor:A};return Ys(Ys({},D),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var I={x:p+u/2,y:l+d+N,textAnchor:"middle",verticalAnchor:j};return Ys(Ys({},I),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var V={x:g-U,y:l+d/2,textAnchor:G,verticalAnchor:"middle"};return Ys(Ys({},V),s?{width:Math.max(V.x-s.x,0),height:d}:{})}if(a==="right"){var R={x:g+b+U,y:l+d/2,textAnchor:O,verticalAnchor:"middle"};return Ys(Ys({},R),s?{width:Math.max(s.x+s.width-R.x,0),height:d}:{})}var B=s?{width:b,height:d}:{};return a==="insideLeft"?Ys({x:g+U,y:l+d/2,textAnchor:O,verticalAnchor:"middle"},B):a==="insideRight"?Ys({x:g+b-U,y:l+d/2,textAnchor:G,verticalAnchor:"middle"},B):a==="insideTop"?Ys({x:h+c/2,y:l+N,textAnchor:"middle",verticalAnchor:j},B):a==="insideBottom"?Ys({x:p+u/2,y:l+d-N,textAnchor:"middle",verticalAnchor:A},B):a==="insideTopLeft"?Ys({x:h+U,y:l+N,textAnchor:O,verticalAnchor:j},B):a==="insideTopRight"?Ys({x:h+c-U,y:l+N,textAnchor:G,verticalAnchor:j},B):a==="insideBottomLeft"?Ys({x:p+U,y:l+d-N,textAnchor:O,verticalAnchor:A},B):a==="insideBottomRight"?Ys({x:p+u-U,y:l+d-N,textAnchor:G,verticalAnchor:A},B):a&&typeof a=="object"&&(Mr(a.x)||xh(a.x))&&(Mr(a.y)||xh(a.y))?Ys({x:o+Ko(a.x,b),y:l+Ko(a.y,d),textAnchor:"end",verticalAnchor:"end"},B):Ys({x:w,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Aat={angle:0,offset:5,zIndex:wi.label,position:"middle",textBreakAll:!1};function r0(t){var e=Si(t,Aat),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=bat(),h=Bfe(),p=n==="center"?h:d??h,g,b,w;if(r==null?g=p:lO(r)?g=r:g=tue(r),!g||xs(a)&&xs(s)&&!S.isValidElement(o)&&typeof o!="function")return null;var _=Ys(Ys({},e),{},{viewBox:g});if(S.isValidElement(o)){var{labelRef:N}=_,A=fat(_,dat);return S.cloneElement(o,A)}if(typeof o=="function"){if(b=S.createElement(o,_),S.isValidElement(b))return b}else b=yat(e);var j=wl(e);if(lO(g)){if(n==="insideStart"||n==="insideEnd"||n==="end")return _at(e,n,b,j,g);w=Nat(g,e.offset,e.position)}else w=Eat(e,g);return S.createElement(rc,{zIndex:e.zIndex},S.createElement(f6,Of({ref:u,className:aa("recharts-label",l)},j,w,{textAnchor:iat(j.textAnchor)?j.textAnchor:w.textAnchor,breakAll:c}),b))}r0.displayName="Label";var Sat=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?S.createElement(r0,Of({key:"label-implicit"},n)):Zd(t)?S.createElement(r0,Of({key:"label-implicit",value:t},n)):S.isValidElement(t)?t.type===r0?S.cloneElement(t,Ys({key:"label-implicit"},n)):S.createElement(r0,Of({key:"label-implicit",content:t},n)):bL(t)?S.createElement(r0,Of({key:"label-implicit",content:t},n)):t&&typeof t=="object"?S.createElement(r0,Of({},t,{key:"label-implicit"},n)):null};function jat(t){var{label:e,labelRef:r}=t,n=Bfe();return Sat(e,n,r)||null}var Ufe={},zfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(zfe);var Vfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Vfe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zfe,r=Vfe,n=CS;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Ufe);var Tat=Ufe.last;const Cat=Hc(Tat);var kat=["valueAccessor"],Iat=["dataKey","clockWise","id","textBreakAll","zIndex"];function R4(){return R4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R4.apply(null,arguments)}function xK(t,e){if(t==null)return{};var r,n,a=Oat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Oat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Pat=t=>Array.isArray(t.value)?Cat(t.value):t.value,$fe=S.createContext(void 0),Hfe=$fe.Provider,qfe=S.createContext(void 0),Rat=qfe.Provider;function Dat(){return S.useContext($fe)}function Mat(){return S.useContext(qfe)}function fE(t){var{valueAccessor:e=Pat}=t,r=xK(t,kat),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=xK(r,Iat),u=Dat(),d=Mat(),h=u||d;return!h||!h.length?null:S.createElement(rc,{zIndex:l??wi.label},S.createElement(so,{className:"recharts-label-list"},h.map((p,g)=>{var b,w=xs(n)?e(p,g):Ba(p&&p.payload,n),_=xs(s)?{}:{id:"".concat(s,"-").concat(g)};return S.createElement(r0,R4({key:"label-".concat(g)},wl(p),c,_,{fill:(b=r.fill)!==null&&b!==void 0?b:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:o,viewBox:p.viewBox,index:g,zIndex:0}))})))}fE.displayName="LabelList";function yL(t){var{label:e}=t;return e?e===!0?S.createElement(fE,{key:"labelList-implicit"}):S.isValidElement(e)||bL(e)?S.createElement(fE,{key:"labelList-implicit",content:e}):typeof e=="object"?S.createElement(fE,R4({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function cO(){return cO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cO.apply(null,arguments)}var Gfe=t=>{var{cx:e,cy:r,r:n,className:a}=t,s=aa("recharts-dot",a);return Mr(e)&&Mr(r)&&Mr(n)?S.createElement("circle",cO({},Vc(t),RD(t),{className:s,cx:e,cy:r,r:n})):null},Wfe=t=>t.graphicalItems.polarItems,Lat=bt([ys,t_],VM),h6=bt([Wfe,js,Lat],$M),Fat=bt([h6],HM),m6=bt([Fat,IM],qM),Bat=bt([m6,js,h6],WM);bt([m6,js,h6],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,o=Ba(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Ba(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var vK=()=>{},Uat=bt([m6,js,h6,c6,ys],ZM),zat=bt([js,XM,YM,vK,Uat,vK,Xn,ys],QM),Kfe=bt([js,Xn,m6,Bat,e_,ys,zat],JM),Vat=bt([Kfe,js,Tv],rL);bt([js,Kfe,Vat,ys],aL);var $at={radiusAxis:{},angleAxis:{}},Xfe=tc({name:"polarAxis",initialState:$at,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Udt,removeRadiusAxis:zdt,addAngleAxis:Vdt,removeAngleAxis:$dt}=Xfe.actions,Hat=Xfe.reducer;function bK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bK(Object(r),!0).forEach(function(n){qat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qat(t,e,r){return(e=Gat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gat(t){var e=Wat(t,"string");return typeof e=="symbol"?e:e+""}function Wat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kat=(t,e)=>e,wL=bt([Wfe,Kat],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),Xat=[],_L=(t,e,r)=>(r==null?void 0:r.length)===0?Xat:r,Yfe=bt([IM,wL,_L],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>yK(yK({},e.presentationProps),s.props))),a!=null)return a}}),Yat=bt([Yfe,wL,_L],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,o=Ba(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:_v(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),Zat=bt([Yfe,wL,_L,Fi],(t,e,r,n)=>{if(!(e==null||t==null))return Yst({offset:n,pieSettings:e,displayedData:t,cells:r})}),Zfe={exports:{}},Va={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NL=Symbol.for("react.transitional.element"),EL=Symbol.for("react.portal"),p6=Symbol.for("react.fragment"),g6=Symbol.for("react.strict_mode"),x6=Symbol.for("react.profiler"),v6=Symbol.for("react.consumer"),b6=Symbol.for("react.context"),y6=Symbol.for("react.forward_ref"),w6=Symbol.for("react.suspense"),_6=Symbol.for("react.suspense_list"),N6=Symbol.for("react.memo"),E6=Symbol.for("react.lazy"),Qat=Symbol.for("react.view_transition"),Jat=Symbol.for("react.client.reference");function Du(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case NL:switch(t=t.type,t){case p6:case x6:case g6:case w6:case _6:case Qat:return t;default:switch(t=t&&t.$$typeof,t){case b6:case y6:case E6:case N6:return t;case v6:return t;default:return e}}case EL:return e}}}Va.ContextConsumer=v6;Va.ContextProvider=b6;Va.Element=NL;Va.ForwardRef=y6;Va.Fragment=p6;Va.Lazy=E6;Va.Memo=N6;Va.Portal=EL;Va.Profiler=x6;Va.StrictMode=g6;Va.Suspense=w6;Va.SuspenseList=_6;Va.isContextConsumer=function(t){return Du(t)===v6};Va.isContextProvider=function(t){return Du(t)===b6};Va.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===NL};Va.isForwardRef=function(t){return Du(t)===y6};Va.isFragment=function(t){return Du(t)===p6};Va.isLazy=function(t){return Du(t)===E6};Va.isMemo=function(t){return Du(t)===N6};Va.isPortal=function(t){return Du(t)===EL};Va.isProfiler=function(t){return Du(t)===x6};Va.isStrictMode=function(t){return Du(t)===g6};Va.isSuspense=function(t){return Du(t)===w6};Va.isSuspenseList=function(t){return Du(t)===_6};Va.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===p6||t===x6||t===g6||t===w6||t===_6||typeof t=="object"&&t!==null&&(t.$$typeof===E6||t.$$typeof===N6||t.$$typeof===b6||t.$$typeof===v6||t.$$typeof===y6||t.$$typeof===Jat||t.getModuleId!==void 0)};Va.typeOf=Du;Zfe.exports=Va;var est=Zfe.exports,wK=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",_K=null,_C=null,Qfe=t=>{if(t===_K&&Array.isArray(_C))return _C;var e=[];return S.Children.forEach(t,r=>{xs(r)||(est.isFragment(r)?e=e.concat(Qfe(r.props.children)):e.push(r))}),_C=e,_K=t,e};function AL(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>wK(a)):n=[wK(e)],Qfe(t).forEach(a=>{var s=Yp(a,"type.displayName")||Yp(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var Jfe=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,ehe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(ehe);var tst=ehe.isPlainObject;const rst=Hc(tst);function NK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NK(Object(r),!0).forEach(function(n){nst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nst(t,e,r){return(e=ast(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ast(t){var e=sst(t,"string");return typeof e=="symbol"?e:e+""}function sst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D4(){return D4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D4.apply(null,arguments)}var AK=(t,e,r,n,a)=>{var s=r-n,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+r,",").concat(e),o+="L ".concat(t+r-s/2,",").concat(e+a),o+="L ".concat(t+r-s/2-n,",").concat(e+a),o+="L ".concat(t,",").concat(e," Z"),o},ist={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ost=t=>{var e=Si(t,ist),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=e,p=S.useRef(null),[g,b]=S.useState(-1),w=S.useRef(a),_=S.useRef(s),N=S.useRef(o),A=S.useRef(r),j=S.useRef(n),P=Xw(t,"trapezoid-");if(S.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var ee=p.current.getTotalLength();ee&&b(ee)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var U=aa("recharts-trapezoid",l);if(!h)return S.createElement("g",null,S.createElement("path",D4({},wl(e),{className:U,d:AK(r,n,a,s,o)})));var G=w.current,O=_.current,D=N.current,I=A.current,V=j.current,R="0px ".concat(g===-1?1:g,"px"),B="".concat(g,"px 0px"),F=mue(["strokeDasharray"],u,c);return S.createElement(Kw,{animationId:P,key:P,canBegin:g>0,duration:u,easing:c,isActive:h,begin:d},ee=>{var Z=hs(G,a,ee),ce=hs(O,s,ee),ne=hs(D,o,ee),ae=hs(I,r,ee),me=hs(V,n,ee);p.current&&(w.current=Z,_.current=ce,N.current=ne,A.current=ae,j.current=me);var Ee=ee>0?{transition:F,strokeDasharray:B}:{strokeDasharray:R};return S.createElement("path",D4({},wl(e),{className:U,d:AK(ae,me,Z,ce,ne),ref:p,style:EK(EK({},Ee),e.style)}))})},lst=["option","shapeType","propTransformer","activeClassName"];function cst(t,e){if(t==null)return{};var r,n,a=ust(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ust(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function SK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function M4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SK(Object(r),!0).forEach(function(n){dst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dst(t,e,r){return(e=fst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fst(t){var e=hst(t,"string");return typeof e=="symbol"?e:e+""}function hst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mst(t,e){return M4(M4({},e),t)}function pst(t,e){return t==="symbols"}function jK(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return S.createElement(vue,r);case"trapezoid":return S.createElement(ost,r);case"sector":return S.createElement(_ue,r);case"symbols":if(pst(e))return S.createElement(PD,r);break;case"curve":return S.createElement(oM,r);default:return null}}function gst(t){return S.isValidElement(t)?t.props:t}function SL(t){var{option:e,shapeType:r,propTransformer:n=mst,activeClassName:a="recharts-active-shape"}=t,s=cst(t,lst),o;if(S.isValidElement(e))o=S.cloneElement(e,M4(M4({},s),gst(e)));else if(typeof e=="function")o=e(s,s.index);else if(rst(e)&&typeof e!="boolean"){var l=n(e,s);o=S.createElement(jK,{shapeType:r,elementProps:l})}else{var c=s;o=S.createElement(jK,{shapeType:r,elementProps:c})}return s.isActive?S.createElement(so,{className:a},o):o}var jL=(t,e,r)=>{var n=Xa();return(a,s)=>o=>{t==null||t(a,s,o),n(ife({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},TL=t=>{var e=Xa();return(r,n)=>a=>{t==null||t(r,n,a),e(Dtt())}},CL=(t,e,r)=>{var n=Xa();return(a,s)=>o=>{t==null||t(a,s,o),n(Mtt({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function kL(t){var{tooltipEntrySettings:e}=t,r=Xa(),n=Yo(),a=S.useRef(null);return S.useLayoutEffect(()=>{n||(a.current===null?r(Itt(e)):a.current!==e&&r(Ott({prev:a.current,next:e})),a.current=e)},[e,r,n]),S.useLayoutEffect(()=>()=>{a.current&&(r(Ptt(a.current)),a.current=null)},[r]),null}function the(t){var{legendPayload:e}=t,r=Xa(),n=Yo(),a=S.useRef(null);return S.useLayoutEffect(()=>{n||(a.current===null?r(uue(e)):a.current!==e&&r(due({prev:a.current,next:e})),a.current=e)},[r,n,e]),S.useLayoutEffect(()=>()=>{a.current&&(r(fue(a.current)),a.current=null)},[r]),null}function xst(t){var{legendPayload:e}=t,r=Xa(),n=Cr(Xn),a=S.useRef(null);return S.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(uue(e)):a.current!==e&&r(due({prev:a.current,next:e})),a.current=e)},[r,n,e]),S.useLayoutEffect(()=>()=>{a.current&&(r(fue(a.current)),a.current=null)},[r]),null}var NC,vst=()=>{var[t]=S.useState(()=>_y("uid-"));return t},bst=(NC=gX.useId)!==null&&NC!==void 0?NC:vst;function rhe(t,e){var r=bst();return e||(t?"".concat(t,"-").concat(r):r)}var yst=S.createContext(void 0),IL=t=>{var{id:e,type:r,children:n}=t,a=rhe("recharts-".concat(r),e);return S.createElement(yst.Provider,{value:a},n(a))},wst={cartesianItems:[],polarItems:[]},nhe=tc({name:"graphicalItems",initialState:wst,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:ds()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=od(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:ds()},removeCartesianGraphicalItem:{reducer(t,e){var r=od(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:ds()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:ds()},removePolarGraphicalItem:{reducer(t,e){var r=od(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:ds()}}}),{addCartesianGraphicalItem:_st,replaceCartesianGraphicalItem:Nst,removeCartesianGraphicalItem:Est,addPolarGraphicalItem:Ast,removePolarGraphicalItem:Sst}=nhe.actions,jst=nhe.reducer,Tst=t=>{var e=Xa(),r=S.useRef(null);return S.useLayoutEffect(()=>{r.current===null?e(_st(t)):r.current!==t&&e(Nst({prev:r.current,next:t})),r.current=t},[e,t]),S.useLayoutEffect(()=>()=>{r.current&&(e(Est(r.current)),r.current=null)},[e]),null},ahe=S.memo(Tst);function Cst(t){var e=Xa();return S.useLayoutEffect(()=>(e(Ast(t)),()=>{e(Sst(t))}),[e,t]),null}var kst=["key"],Ist=["onMouseEnter","onClick","onMouseLeave"],Ost=["id"],Pst=["id"];function TK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TK(Object(r),!0).forEach(function(n){Rst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rst(t,e,r){return(e=Dst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dst(t){var e=Mst(t,"string");return typeof e=="symbol"?e:e+""}function Mst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},om.apply(null,arguments)}function A6(t,e){if(t==null)return{};var r,n,a=Lst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Lst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Fst(t){var e=S.useMemo(()=>AL(t.children,u_),[t.children]),r=Cr(n=>Yat(n,t.id,e));return r==null?null:S.createElement(xst,{legendPayload:r})}var Bst=S.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=t,d={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:_v(l,e),hide:c,type:u,color:o,unit:""}};return S.createElement(kL,{tooltipEntrySettings:d})}),Ust=(t,e)=>t>e?"start":t<e?"end":"middle",zst=(t,e,r)=>Ko(typeof e=="function"?e(t):e,r,r*.8),Vst=(t,e,r)=>{var{top:n,left:a,width:s,height:o}=e,l=bue(s,o),c=a+Ko(t.cx,s,s/2),u=n+Ko(t.cy,o,o/2),d=Ko(t.innerRadius,l,0),h=zst(r,t.outerRadius,l),p=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:h,maxRadius:p}},$st=(t,e)=>{var r=no(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function Hst(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var qst=(t,e)=>{if(S.isValidElement(t))return S.cloneElement(t,e);if(typeof t=="function")return t(e);var r=aa("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=A6(e,kst);return S.createElement(oM,om({},a,{type:"linear",className:r}))},Gst=(t,e,r)=>{if(S.isValidElement(t))return S.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),S.isValidElement(n)))return n;var a=aa("recharts-pie-label-text",Hst(t));return S.createElement(f6,om({},e,{alignmentBaseline:"middle",className:a}),n)};function Wst(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!e)return null;var l=Vc(r),c=Xp(a),u=Xp(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,h=e.map((p,g)=>{var b=(p.startAngle+p.endAngle)/2,w=yi(p.cx,p.cy,p.outerRadius+d,b),_=Fs(Fs(Fs(Fs({},l),p),{},{stroke:"none"},c),{},{index:g,textAnchor:Ust(w.x,p.cx)},w),N=Fs(Fs(Fs(Fs({},l),p),{},{fill:"none",stroke:p.fill},u),{},{index:g,points:[yi(p.cx,p.cy,p.outerRadius,b),w],key:"line"});return S.createElement(rc,{zIndex:wi.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},S.createElement(so,null,s&&qst(s,N),Gst(a,_,Ba(p,o))))});return S.createElement(so,{className:"recharts-pie-labels"},h)}function Kst(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?S.createElement(yL,{label:a}):S.createElement(Wst,{sectors:e,props:r,showLabels:n})}function Xst(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=t,l=Cr(im),c=Cr(hL),u=Cr(wrt),{onMouseEnter:d,onClick:h,onMouseLeave:p}=a,g=A6(a,Ist),b=jL(d,a.dataKey,o),w=TL(p),_=CL(h,a.dataKey,o);return e==null||e.length===0?null:S.createElement(S.Fragment,null,e.map((N,A)=>{if((N==null?void 0:N.startAngle)===0&&(N==null?void 0:N.endAngle)===0&&e.length!==1)return null;var j=u==null||u===o,P=String(A)===l&&(c==null||a.dataKey===c)&&j,U=l?n:null,G=r&&P?r:U,O=Fs(Fs({},N),{},{stroke:N.stroke,tabIndex:-1,[Wce]:A,[Kce]:a.dataKey});return S.createElement(so,om({key:"sector-".concat(N==null?void 0:N.startAngle,"-").concat(N==null?void 0:N.endAngle,"-").concat(N.midAngle,"-").concat(A),tabIndex:-1,className:"recharts-pie-sector"},Uw(g,N,A),{onMouseEnter:b(N,A),onMouseLeave:w(N,A),onClick:_(N,A)}),S.createElement(SL,om({option:s??G,index:A,shapeType:"sector",isActive:P},O)))}))}function Yst(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:h}=r,p=Math.abs(r.minAngle),g=$st(l,c),b=Math.abs(g),w=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,_=n.filter(G=>Ba(G,u,0)!==0).length,N=(b>=360?_:_-1)*w,A=b-_*p-N,j=n.reduce((G,O)=>{var D=Ba(O,u,0);return G+(Mr(D)?D:0)},0),P;if(j>0){var U;P=n.map((G,O)=>{var D=Ba(G,u,0),I=Ba(G,d,O),V=Vst(r,s,G),R=(Mr(D)?D:0)/j,B,F=Fs(Fs({},G),a&&a[O]&&a[O].props);O?B=U.endAngle+no(g)*w*(D!==0?1:0):B=l;var ee=B+no(g)*((D!==0?p:0)+R*A),Z=(B+ee)/2,ce=(V.innerRadius+V.outerRadius)/2,ne=[{name:I,value:D,payload:F,dataKey:u,type:h}],ae=yi(V.cx,V.cy,ce,Z);return U=Fs(Fs(Fs(Fs({},r.presentationProps),{},{percent:R,cornerRadius:typeof o=="string"?parseFloat(o):o,name:I,tooltipPayload:ne,midAngle:Z,middleRadius:ce,tooltipPosition:ae},F),V),{},{value:D,dataKey:u,startAngle:B,endAngle:ee,payload:F,paddingAngle:no(g)*w}),U})}return P}function Zst(t){var{showLabels:e,sectors:r,children:n}=t,a=S.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return S.createElement(Rat,{value:e?a:void 0},n)}function Qst(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:h,onAnimationEnd:p}=e,g=Xw(e,"recharts-pie-"),b=r.current,[w,_]=S.useState(!1),N=S.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),A=S.useCallback(()=>{typeof h=="function"&&h(),_(!0)},[h]);return S.createElement(Zst,{showLabels:!w,sectors:a},S.createElement(Kw,{animationId:g,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:A,onAnimationEnd:N,key:g},j=>{var P=[],U=a&&a[0],G=U==null?void 0:U.startAngle;return a==null||a.forEach((O,D)=>{var I=b&&b[D],V=D>0?Yp(O,"paddingAngle",0):0;if(I){var R=hs(I.endAngle-I.startAngle,O.endAngle-O.startAngle,j),B=Fs(Fs({},O),{},{startAngle:G+V,endAngle:G+R+V});P.push(B),G=B.endAngle}else{var{endAngle:F,startAngle:ee}=O,Z=hs(0,F-ee,j),ce=Fs(Fs({},O),{},{startAngle:G+V,endAngle:G+Z+V});P.push(ce),G=ce.endAngle}}),r.current=P,S.createElement(so,null,S.createElement(Xst,{sectors:P,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),S.createElement(Kst,{showLabels:!w,sectors:a,props:e}),e.children)}var Jst={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:wi.area};function eit(t){var{id:e}=t,r=A6(t,Ost),{hide:n,className:a,rootTabIndex:s}=t,o=S.useMemo(()=>AL(t.children,u_),[t.children]),l=Cr(d=>Zat(d,e,o)),c=S.useRef(null),u=aa("recharts-pie",a);return n||l==null?(c.current=null,S.createElement(so,{tabIndex:s,className:u})):S.createElement(rc,{zIndex:t.zIndex},S.createElement(Bst,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),S.createElement(so,{tabIndex:s,className:u},S.createElement(Qst,{props:Fs(Fs({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function she(t){var e=Si(t,Jst),{id:r}=e,n=A6(e,Pst),a=Vc(n);return S.createElement(IL,{id:r,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(Cst,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),S.createElement(Fst,om({},n,{id:s})),S.createElement(eit,om({},n,{id:s}))))}she.displayName="Pie";var tit=["points"];function CK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CK(Object(r),!0).forEach(function(n){rit(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rit(t,e,r){return(e=nit(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nit(t){var e=ait(t,"string");return typeof e=="symbol"?e:e+""}function ait(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L4(){return L4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},L4.apply(null,arguments)}function sit(t,e){if(t==null)return{};var r,n,a=iit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function iit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function oit(t){var{option:e,dotProps:r,className:n}=t;if(S.isValidElement(e))return S.cloneElement(e,r);if(typeof e=="function")return e(r);var a=aa(n,typeof e!="boolean"?e.className:""),s=r??{},{points:o}=s,l=sit(s,tit);return S.createElement(Gfe,L4({},l,{className:a}))}function lit(t,e){return t==null?!1:e?!0:t.length===1}function cit(t){var{points:e,dot:r,className:n,dotClassName:a,dataKey:s,baseProps:o,needClip:l,clipPathId:c,zIndex:u=wi.scatter}=t;if(!lit(e,r))return null;var d=Jfe(r),h=iGe(r),p=e.map((b,w)=>{var _,N,A=EC(EC(EC({r:3},o),h),{},{index:w,cx:(_=b.x)!==null&&_!==void 0?_:void 0,cy:(N=b.y)!==null&&N!==void 0?N:void 0,dataKey:s,value:b.value,payload:b.payload,points:e});return S.createElement(oit,{key:"dot-".concat(w),option:r,dotProps:A,className:a})}),g={};return l&&c!=null&&(g.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),S.createElement(rc,{zIndex:u},S.createElement(so,L4({className:n},g),p))}function kK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function IK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kK(Object(r),!0).forEach(function(n){uit(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uit(t,e,r){return(e=dit(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dit(t){var e=fit(t,"string");return typeof e=="symbol"?e:e+""}function fit(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hit={xAxis:{},yAxis:{},zAxis:{}},ihe=tc({name:"cartesianAxis",initialState:hit,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:ds()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:ds()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:ds()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:ds()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:ds()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:ds()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:ds()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:ds()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:ds()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);t.yAxis[r]=IK(IK({},t.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:mit,replaceXAxis:pit,removeXAxis:git,addYAxis:xit,replaceYAxis:vit,removeYAxis:bit,addZAxis:Hdt,replaceZAxis:qdt,removeZAxis:Gdt,updateYAxisWidth:yit}=ihe.actions,wit=ihe.reducer,_it=bt([Fi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Nit=bt([_it,Ch,kh],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),OL=()=>Cr(Nit),Eit=()=>Cr(Srt);function OK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function AC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OK(Object(r),!0).forEach(function(n){Ait(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ait(t,e,r){return(e=Sit(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sit(t){var e=jit(t,"string");return typeof e=="symbol"?e:e+""}function jit(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tit=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:a,dataKey:s,clipPath:o}=t;if(a===!1||e.x==null||e.y==null)return null;var l={index:r,dataKey:s,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=AC(AC(AC({},l),Xp(a)),RD(a)),u;return S.isValidElement(a)?u=S.cloneElement(a,c):typeof a=="function"?u=a(c):u=S.createElement(Gfe,c),S.createElement(so,{className:"recharts-active-dot",clipPath:o},u)};function Cit(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:a,clipPath:s,zIndex:o=wi.activeDot}=t,l=Cr(im),c=Eit();if(e==null||c==null)return null;var u=e.find(d=>c.includes(d.payload));return xs(u)?null:S.createElement(rc,{zIndex:o},S.createElement(Tit,{point:u,childIndex:Number(l),mainColor:r,dataKey:a,activeDot:n,clipPath:s}))}var kit="Invariant failed";function Iit(t,e){throw new Error(kit)}var Oit=["x","y"];function uO(){return uO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uO.apply(null,arguments)}function PK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PK(Object(r),!0).forEach(function(n){Pit(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pit(t,e,r){return(e=Rit(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rit(t){var e=Dit(t,"string");return typeof e=="symbol"?e:e+""}function Dit(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mit(t,e){if(t==null)return{};var r,n,a=Lit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Lit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Fit(t,e){var{x:r,y:n}=t,a=Mit(t,Oit),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||a.height),d=parseInt(u,10),h="".concat(e.width||a.width),p=parseInt(h,10);return gb(gb(gb(gb(gb({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function F4(t){return S.createElement(SL,uO({shapeType:"rectangle",propTransformer:Fit,activeClassName:"recharts-active-bar"},t))}var Bit=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Mr(e))return e;var s=Mr(n)||xs(n);return s?e(n,a):(s||Iit(),r)}},Uit={},ohe=tc({name:"errorBars",initialState:Uit,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Wdt,replaceErrorBar:Kdt,removeErrorBar:Xdt}=ohe.actions,zit=ohe.reducer,Vit=["children"];function $it(t,e){if(t==null)return{};var r,n,a=Hit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Hit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var qit={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Git=S.createContext(qit);function lhe(t){var{children:e}=t,r=$it(t,Vit);return S.createElement(Git.Provider,{value:r},e)}function PL(t,e){var r,n,a=Cr(u=>Oh(u,t)),s=Cr(u=>Ph(u,e)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Wi.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Ki.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function che(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=OL(),{needClipX:s,needClipY:o,needClip:l}=PL(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:h}=a;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:s?c:c-d/2,y:o?u:u-h/2,width:s?d:d*2,height:o?h:h*2}))}function Wit(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&si(t.zIndex)?t.zIndex:e}var Kit={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_=S;function Xit(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yit=typeof Object.is=="function"?Object.is:Xit,Zit=d_.useSyncExternalStore,Qit=d_.useRef,Jit=d_.useEffect,eot=d_.useMemo,tot=d_.useDebugValue;Kit.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=Qit(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=eot(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),a!==void 0&&o.hasValue){var b=o.value;if(a(b,g))return h=b}return h=g}if(b=h,Yit(d,g))return b;var w=n(g);return a!==void 0&&a(b,w)?(d=g,b):(d=g,h=w)}var u=!1,d,h,p=r===void 0?null:r;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,r,n,a]);var l=Zit(t,s[0],s[1]);return Jit(function(){o.hasValue=!0,o.value=l},[l]),tot(l),l};function rot(t){t()}function not(){let t=null,e=null;return{clear(){t=null,e=null},notify(){rot(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var RK={notify(){},get:()=>[]};function aot(t,e){let r,n=RK,a=0,s=!1;function o(w){d();const _=n.subscribe(w);let N=!1;return()=>{N||(N=!0,_(),h())}}function l(){n.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=not())}function h(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=RK)}function p(){s||(s=!0,d())}function g(){s&&(s=!1,h())}const b={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>n};return b}var sot=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iot=sot(),oot=()=>typeof navigator<"u"&&navigator.product==="ReactNative",lot=oot(),cot=()=>iot||lot?S.useLayoutEffect:S.useEffect,uot=cot();function DK(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function dot(t,e){if(DK(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!DK(t[r[a]],e[r[a]]))return!1;return!0}var SC=Symbol.for("react-redux-context"),jC=typeof globalThis<"u"?globalThis:{};function fot(){if(!S.createContext)return{};const t=jC[SC]??(jC[SC]=new Map);let e=t.get(S.createContext);return e||(e=S.createContext(null),t.set(S.createContext,e)),e}var hot=fot();function mot(t){const{children:e,context:r,serverState:n,store:a}=t,s=S.useMemo(()=>{const c=aot(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=S.useMemo(()=>a.getState(),[a]);uot(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||hot;return S.createElement(l.Provider,{value:s},e)}var pot=mot,got=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function xot(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function S6(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(got.has(n)){if(t[n]==null&&e[n]==null)continue;if(!dot(t[n],e[n]))return!1}else if(!xot(t[n],e[n]))return!1;return!0}var vot=["onMouseEnter","onMouseLeave","onClick"],bot=["value","background","tooltipPosition"],yot=["id"],wot=["onMouseEnter","onClick","onMouseLeave"];function Nh(){return Nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nh.apply(null,arguments)}function MK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function dl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MK(Object(r),!0).forEach(function(n){_ot(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _ot(t,e,r){return(e=Not(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Not(t){var e=Eot(t,"string");return typeof e=="symbol"?e:e+""}function Eot(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B4(t,e){if(t==null)return{};var r,n,a=Aot(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Aot(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Sot=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:_v(r,e),payload:t}]},jot=S.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c}=t,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:_v(s,e),hide:o,type:c,color:a,unit:l}};return S.createElement(kL,{tooltipEntrySettings:u})});function Tot(t){var e=Cr(im),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=B4(s,vot),d=jL(o,n),h=TL(l),p=CL(c,n);if(!a||r==null)return null;var g=Xp(a);return S.createElement(rc,{zIndex:Wit(a,wi.barBackground)},r.map((b,w)=>{var{value:_,background:N,tooltipPosition:A}=b,j=B4(b,bot);if(!N)return null;var P=d(b,w),U=h(b,w),G=p(b,w),O=dl(dl(dl(dl(dl({option:a,isActive:String(w)===e},j),{},{fill:"#eee"},N),g),Uw(u,b,w)),{},{onMouseEnter:P,onMouseLeave:U,onClick:G,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return S.createElement(F4,Nh({key:"background-bar-".concat(w)},O))}))}function Cot(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return dl(dl({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return S.createElement(Hfe,{value:e?a:void 0},r)}function kot(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=t,l=Cr(im),c=Cr(hL),u=r&&String(s)===l&&(c==null||o===c),d=u?r:e;return u?S.createElement(rc,{zIndex:wi.activeBar},S.createElement(F4,Nh({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):S.createElement(F4,Nh({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function Iot(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return S.createElement(F4,Nh({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Oot(t){var e,{data:r,props:n}=t,a=(e=Vc(n))!==null&&e!==void 0?e:{},{id:s}=a,o=B4(a,yot),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:h,onMouseLeave:p}=n,g=B4(n,wot),b=jL(d,c),w=TL(p),_=CL(h,c);return r?S.createElement(S.Fragment,null,r.map((N,A)=>S.createElement(so,Nh({key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(A),className:"recharts-bar-rectangle"},Uw(g,N,A),{onMouseEnter:b(N,A),onMouseLeave:w(N,A),onClick:_(N,A)}),u?S.createElement(kot,{shape:l,activeBar:u,baseProps:o,entry:N,index:A,dataKey:c}):S.createElement(Iot,{shape:l,baseProps:o,entry:N,index:A,dataKey:c})))):null}function Pot(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,h=r.current,p=Xw(e,"recharts-bar-"),[g,b]=S.useState(!1),w=!g,_=S.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),N=S.useCallback(()=>{typeof d=="function"&&d(),b(!0)},[d]);return S.createElement(Cot,{showLabels:w,rects:n},S.createElement(Kw,{animationId:p,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:_,onAnimationStart:N,key:p},A=>{var j=A===1?n:n==null?void 0:n.map((P,U)=>{var G=h&&h[U];if(G)return dl(dl({},P),{},{x:hs(G.x,P.x,A),y:hs(G.y,P.y,A),width:hs(G.width,P.width,A),height:hs(G.height,P.height,A)});if(a==="horizontal"){var O=hs(0,P.height,A),D=hs(P.stackedBarStart,P.y,A);return dl(dl({},P),{},{y:D,height:O})}var I=hs(0,P.width,A),V=hs(P.stackedBarStart,P.x,A);return dl(dl({},P),{},{width:I,x:V})});return A>0&&(r.current=j??null),j==null?null:S.createElement(so,null,S.createElement(Oot,{props:e,data:j}))}),S.createElement(yL,{label:e.label}),e.children)}function Rot(t){var e=S.useRef(null);return S.createElement(Pot,{previousRectanglesRef:e,props:t})}var uhe=0,Dot=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Ba(t,e)}};class Mot extends S.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=aa("recharts-bar",a),h=u;return S.createElement(so,{className:d,id:u},l&&S.createElement("defs",null,S.createElement(che,{clipPathId:h,xAxisId:s,yAxisId:o})),S.createElement(so,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},S.createElement(Tot,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),S.createElement(Rot,this.props)))}}var Lot={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:uhe,xAxisId:0,yAxisId:0,zIndex:wi.bar};function Fot(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:h}=PL(e,r),p=qw(),g=Yo(),b=AL(t.children,u_),w=Cr(A=>flt(A,e,r,g,t.id,b));if(p!=="vertical"&&p!=="horizontal")return null;var _,N=w==null?void 0:w[0];return N==null||N.height==null||N.width==null?_=0:_=p==="vertical"?N.height/2:N.width/2,S.createElement(lhe,{xAxisId:e,yAxisId:r,data:w,dataPointFormatter:Dot,errorBarOffset:_},S.createElement(Mot,Nh({},t,{layout:p,needClip:h,data:w,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Bot(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:p,cells:g,parentViewBox:b,dataStartIndex:w}=t,_=e==="horizontal"?l:o,N=d?_.scale.domain():null,A=mXe({numericAxis:_}),j=_.scale(A);return h.map((P,U)=>{var G,O,D,I,V,R;d?G=lXe(d[U+w],N):(G=Ba(P,r),Array.isArray(G)||(G=[A,G]));var B=Bit(n,uhe)(G[1],U);if(e==="horizontal"){var F,[ee,Z]=[l.scale(G[0]),l.scale(G[1])];O=vG({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:P,index:U}),D=(F=Z??ee)!==null&&F!==void 0?F:void 0,I=a.size;var ce=ee-Z;if(V=dd(ce)?0:ce,R={x:O,y:p.top,width:I,height:p.height},Math.abs(B)>0&&Math.abs(V)<Math.abs(B)){var ne=no(V||B)*(Math.abs(B)-Math.abs(V));D-=ne,V+=ne}}else{var[ae,me]=[o.scale(G[0]),o.scale(G[1])];if(O=ae,D=vG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:P,index:U}),I=me-ae,V=a.size,R={x:p.left,y:D,width:p.width,height:V},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var Ee=no(I||B)*(Math.abs(B)-Math.abs(I));I+=Ee}}if(O==null||D==null||I==null||V==null)return null;var ye=dl(dl({},P),{},{stackedBarStart:j,x:O,y:D,width:I,height:V,value:d?G:G[1],payload:P,background:R,tooltipPosition:{x:O+I/2,y:D+V/2},parentViewBox:b},g&&g[U]&&g[U].props);return ye}).filter(Boolean)}function Uot(t){var e=Si(t,Lot),r=Yo();return S.createElement(IL,{id:e.id,type:"bar"},n=>S.createElement(S.Fragment,null,S.createElement(the,{legendPayload:Sot(e)}),S.createElement(jot,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),S.createElement(ahe,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:hXe(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),S.createElement(rc,{zIndex:e.zIndex},S.createElement(Fot,Nh({},e,{id:n})))))}var dO=S.memo(Uot,S6);dO.displayName="Bar";function LK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LK(Object(r),!0).forEach(function(n){zot(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zot(t,e,r){return(e=Vot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vot(t){var e=$ot(t,"string");return typeof e=="symbol"?e:e+""}function $ot(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hot=(t,e)=>e,qot=(t,e,r)=>r,Got=(t,e,r,n)=>n,Wot=(t,e,r,n,a)=>a,f_=bt([o6,Wot],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),Kot=bt([f_],t=>t==null?void 0:t.maxBarSize),Xot=(t,e,r,n,a,s)=>s,FK=(t,e,r)=>{var n=r??t;if(!xs(n))return Ko(n,e,0)},Yot=bt([Xn,o6,Hot,qot,Got],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Zot=(t,e,r,n)=>{var a=Xn(t);return a==="horizontal"?rO(t,"yAxis",r,n):rO(t,"xAxis",e,n)},Qot=(t,e,r)=>{var n=Xn(t);return n==="horizontal"?$W(t,"xAxis",e):$W(t,"yAxis",r)},Jot=(t,e,r)=>{var n={},a=t.filter(a6),s=t.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,h]=u,p=h.map(b=>b.dataKey),g=FK(e,r,h[0].barSize);return{stackId:d,dataKeys:p,barSize:g}}),c=s.map(u=>{var d=[u.dataKey].filter(p=>p!=null),h=FK(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...l,...c]},elt=bt([Yot,Net,Qot],Jot),tlt=(t,e,r,n,a)=>{var s,o,l=f_(t,e,r,n,a);if(l!=null){var c=Xn(t),u=wde(t),{maxBarSize:d}=l,h=xs(d)?u:d,p,g;return c==="horizontal"?(p=sm(t,"xAxis",e,n),g=am(t,"xAxis",e,n)):(p=sm(t,"yAxis",r,n),g=am(t,"yAxis",r,n)),(s=(o=Vx(p,g,!0))!==null&&o!==void 0?o:h)!==null&&s!==void 0?s:0}},dhe=(t,e,r,n)=>{var a=Xn(t),s,o;return a==="horizontal"?(s=sm(t,"xAxis",e,n),o=am(t,"xAxis",e,n)):(s=sm(t,"yAxis",r,n),o=am(t,"yAxis",r,n)),Vx(s,o)};function rlt(t,e,r,n,a){var s=n.length;if(!(s<1)){var o=Ko(t,r,0,!0),l,c=[];if(si(n[0].barSize)){var u=!1,d=r/s,h=n.reduce((N,A)=>N+(A.barSize||0),0);h+=(s-1)*o,h>=r&&(h-=(s-1)*o,o=0),h>=r&&d>0&&(u=!0,d*=.9,h=s*d);var p=(r-h)/2>>0,g={offset:p-o,size:0};l=n.reduce((N,A)=>{var j,P={stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:g.offset+g.size+o,size:u?d:(j=A.barSize)!==null&&j!==void 0?j:0}},U=[...N,P];return g=U[U.length-1].position,U},c)}else{var b=Ko(e,r,0,!0);r-2*b-(s-1)*o<=0&&(o=0);var w=(r-2*b-(s-1)*o)/s;w>1&&(w>>=0);var _=si(a)?Math.min(w,a):w;l=n.reduce((N,A,j)=>[...N,{stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:b+(w+o)*j+(w-_)/2,size:_}}],c)}return l}}var nlt=(t,e,r,n,a,s,o)=>{var l=xs(o)?e:o,c=rlt(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>sN(sN({},u),{},{position:sN(sN({},u.position),{},{offset:u.position.offset-a/2})}))),c},alt=bt([elt,wde,_et,_de,tlt,dhe,Kot],nlt),slt=(t,e,r,n)=>sm(t,"xAxis",e,n),ilt=(t,e,r,n)=>sm(t,"yAxis",r,n),olt=(t,e,r,n)=>am(t,"xAxis",e,n),llt=(t,e,r,n)=>am(t,"yAxis",r,n),clt=bt([alt,f_],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),ult=(t,e)=>{var r=UM(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},dlt=bt([Zot,f_],ult),flt=bt([Fi,tM,slt,ilt,olt,llt,clt,Xn,t6,dhe,dlt,f_,Xot],(t,e,r,n,a,s,o,l,c,u,d,h,p)=>{var{chartData:g,dataStartIndex:b,dataEndIndex:w}=c;if(!(h==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:_}=h,N;if(_!=null&&_.length>0?N=_:N=g==null?void 0:g.slice(b,w+1),N!=null)return Bot({layout:l,barSettings:h,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:N,offset:t,cells:p,dataStartIndex:b})}}),fhe=t=>{var{chartData:e}=t,r=Xa(),n=Yo();return S.useEffect(()=>n?()=>{}:(r(tK(e)),()=>{r(tK(void 0))}),[e,r,n]),null},BK={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},hhe=tc({name:"brush",initialState:BK,reducers:{setBrushSettings(t,e){return e.payload==null?BK:e.payload}}}),{setBrushSettings:Ydt}=hhe.actions,hlt=hhe.reducer;function mlt(t,e,r){return(e=plt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function plt(t){var e=glt(t,"string");return typeof e=="symbol"?e:e+""}function glt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class RL{static create(e){return new RL(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}mlt(RL,"EPS",1e-4);function xlt(t){return(t%180+180)%180}var vlt=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=xlt(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},blt={dots:[],areas:[],lines:[]},mhe=tc({name:"referenceElements",initialState:blt,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=od(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=od(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=od(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:Zdt,removeDot:Qdt,addArea:Jdt,removeArea:eft,addLine:tft,removeLine:rft}=mhe.actions,ylt=mhe.reducer,wlt=S.createContext(void 0),_lt=t=>{var{children:e}=t,[r]=S.useState("".concat(_y("recharts"),"-clip")),n=OL();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return S.createElement(wlt.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:a,y:s,height:l,width:o}))),e)};function phe(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e)r.push(t[n]);return r}function Nlt(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return vlt(n,r)}function Elt(t,e,r){var n=r==="width",{x:a,y:s,width:o,height:l}=t;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function U4(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Alt(t,e){return phe(t,e+1)}function Slt(t,e,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,h=function(){var b=n==null?void 0:n[c];if(b===void 0)return{v:phe(n,u)};var w=c,_,N=()=>(_===void 0&&(_=r(b,w)),_),A=b.coordinate,j=c===0||U4(t,A,N,d,l);j||(c=0,d=o,u+=1),j&&(d=A+t*(N()/2+a),c+=u)},p;u<=s.length;)if(p=h(),p)return p.v;return[]}function UK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Uo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UK(Object(r),!0).forEach(function(n){jlt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jlt(t,e,r){return(e=Tlt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tlt(t){var e=Clt(t,"string");return typeof e=="symbol"?e:e+""}function Clt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function klt(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=e,{end:c}=e,u=function(p){var g=s[p],b,w=()=>(b===void 0&&(b=r(g,p)),b);if(p===o-1){var _=t*(g.coordinate+t*w()/2-c);s[p]=g=Uo(Uo({},g),{},{tickCoord:_>0?g.coordinate-_*t:g.coordinate})}else s[p]=g=Uo(Uo({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var N=U4(t,g.tickCoord,w,l,c);N&&(c=g.tickCoord-t*(w()/2+a),s[p]=Uo(Uo({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function Ilt(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(s){var d=n[l-1],h=r(d,l-1),p=t*(d.coordinate+t*h/2-u);if(o[l-1]=d=Uo(Uo({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate}),d.tickCoord!=null){var g=U4(t,d.tickCoord,()=>h,c,u);g&&(u=d.tickCoord-t*(h/2+a),o[l-1]=Uo(Uo({},d),{},{isShow:!0}))}}for(var b=s?l-1:l,w=function(A){var j=o[A],P,U=()=>(P===void 0&&(P=r(j,A)),P);if(A===0){var G=t*(j.coordinate-t*U()/2-c);o[A]=j=Uo(Uo({},j),{},{tickCoord:G<0?j.coordinate-G*t:j.coordinate})}else o[A]=j=Uo(Uo({},j),{},{tickCoord:j.coordinate});if(j.tickCoord!=null){var O=U4(t,j.tickCoord,U,c,u);O&&(c=j.tickCoord+t*(U()/2+a),o[A]=Uo(Uo({},j),{},{isShow:!0}))}},_=0;_<b;_++)w(_);return o}function DL(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=t;if(!a||!a.length||!n)return[];if(Mr(c)||Ww.isSsr){var p;return(p=Alt(a,Mr(c)?c:0))!==null&&p!==void 0?p:[]}var g=[],b=l==="top"||l==="bottom"?"width":"height",w=d&&b==="width"?y2(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},_=(j,P)=>{var U=typeof u=="function"?u(j.value,P):j.value;return b==="width"?Nlt(y2(U,{fontSize:e,letterSpacing:r}),w,h):y2(U,{fontSize:e,letterSpacing:r})[b]},N=a.length>=2?no(a[1].coordinate-a[0].coordinate):1,A=Elt(s,N,b);return c==="equidistantPreserveStart"?Slt(N,A,_,a,o):(c==="preserveStart"||c==="preserveStartEnd"?g=Ilt(N,A,_,a,o,c==="preserveStartEnd"):g=klt(N,A,_,a,o),g.filter(j=>j.isShow))}var Olt=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},Plt=["axisLine","width","height","className","hide","ticks","axisType"];function Rlt(t,e){if(t==null)return{};var r,n,a=Dlt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Dlt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function eg(){return eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eg.apply(null,arguments)}function zK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function hi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zK(Object(r),!0).forEach(function(n){Mlt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mlt(t,e,r){return(e=Llt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Llt(t){var e=Flt(t,"string");return typeof e=="symbol"?e:e+""}function Flt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:wi.axis};function Blt(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=hi(hi(hi({},c),Vc(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=hi(hi({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var h=+(s==="left"&&!o||s==="right"&&o);u=hi(hi({},u),{},{x1:e+h*n,y1:r,x2:e+h*n,y2:r+a})}return S.createElement("line",eg({},u,{className:aa("recharts-cartesian-axis-line",Yp(l,"className"))}))}function Ult(t,e,r,n,a,s,o,l,c){var u,d,h,p,g,b,w=l?-1:1,_=t.tickSize||o,N=Mr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,p=r+ +!l*a,h=p-w*_,b=h-w*c,g=N;break;case"left":h=p=t.coordinate,d=e+ +!l*n,u=d-w*_,g=u-w*c,b=N;break;case"right":h=p=t.coordinate,d=e+ +l*n,u=d+w*_,g=u+w*c,b=N;break;default:u=d=t.coordinate,p=r+ +l*a,h=p+w*_,b=h+w*c,g=N;break}return{line:{x1:u,y1:h,x2:d,y2:p},tick:{x:g,y:b}}}function zlt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Vlt(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function $lt(t){var{option:e,tickProps:r,value:n}=t,a,s=aa(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(e))a=S.cloneElement(e,hi(hi({},r),{},{className:s}));else if(typeof e=="function")a=e(hi(hi({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=aa(o,e==null?void 0:e.className)),a=S.createElement(f6,eg({},r,{className:o}),n)}return a}var Hlt=S.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:p,y:g,width:b,height:w,tickSize:_,tickMargin:N,fontSize:A,letterSpacing:j,getTicksConfig:P,events:U,axisType:G}=t,O=DL(hi(hi({},P),{},{ticks:r}),A,j),D=zlt(d,h),I=Vlt(d,h),V=Vc(P),R=Xp(n),B={};typeof a=="object"&&(B=a);var F=hi(hi({},V),{},{fill:"none"},B),ee=O.map(ne=>hi({entry:ne},Ult(ne,p,g,b,w,d,_,h,N))),Z=ee.map(ne=>{var{entry:ae,line:me}=ne;return S.createElement(so,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},a&&S.createElement("line",eg({},F,me,{className:aa("recharts-cartesian-axis-tick-line",Yp(a,"className"))})))}),ce=ee.map((ne,ae)=>{var{entry:me,tick:Ee}=ne,ye=hi(hi(hi(hi({textAnchor:D,verticalAnchor:I},V),{},{stroke:"none",fill:s},R),Ee),{},{index:ae,payload:me,visibleTicksCount:O.length,tickFormatter:o,padding:c},u);return S.createElement(so,eg({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},Uw(U,me,ae)),n&&S.createElement($lt,{option:n,tickProps:ye,value:"".concat(typeof o=="function"?o(me.value,ae):me.value).concat(l||"")}))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(G,"-ticks")},ce.length>0&&S.createElement(rc,{zIndex:wi.label},S.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(G,"-tick-labels"),ref:e},ce)),Z.length>0&&S.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(G,"-tick-lines")},Z))}),qlt=S.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=t,u=Rlt(t,Plt),[d,h]=S.useState(""),[p,g]=S.useState(""),b=S.useRef(null);S.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var _;return Olt({ticks:b.current,label:(_=t.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=S.useCallback(_=>{if(_){var N=_.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=N;var A=N[0];if(A){var j=window.getComputedStyle(A),P=j.fontSize,U=j.letterSpacing;(P!==d||U!==p)&&(h(P),g(U))}}},[d,p]);return o||n!=null&&n<=0||a!=null&&a<=0?null:S.createElement(rc,{zIndex:t.zIndex},S.createElement(so,{className:aa("recharts-cartesian-axis",s)},S.createElement(Blt,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Vc(t)}),S.createElement(Hlt,{ref:w,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:p,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),S.createElement(xat,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},S.createElement(jat,{label:t.label,labelRef:t.labelRef}),t.children)))}),ML=S.forwardRef((t,e)=>{var r=Si(t,eh);return S.createElement(qlt,eg({},r,{ref:e}))});ML.displayName="CartesianAxis";var Glt=["x1","y1","x2","y2","key"],Wlt=["offset"],Klt=["xAxisId","yAxisId"],Xlt=["xAxisId","yAxisId"];function VK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VK(Object(r),!0).forEach(function(n){Ylt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ylt(t,e,r){return(e=Zlt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zlt(t){var e=Qlt(t,"string");return typeof e=="symbol"?e:e+""}function Qlt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ip.apply(null,arguments)}function z4(t,e){if(t==null)return{};var r,n,a=Jlt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Jlt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ect=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=t;return S.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function ghe(t){var{option:e,lineItemProps:r}=t,n;if(S.isValidElement(e))n=S.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var a,{x1:s,y1:o,x2:l,y2:c,key:u}=r,d=z4(r,Glt),h=(a=Vc(d))!==null&&a!==void 0?a:{},{offset:p}=h,g=z4(h,Wlt);n=S.createElement("line",ip({},g,{x1:s,y1:o,x2:l,y2:c,fill:"none",key:u}))}return n}function tct(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:a}=t;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=t,l=z4(t,Klt),c=a.map((u,d)=>{var h=Vo(Vo({},l),{},{x1:e,y1:u,x2:e+r,y2:u,key:"line-".concat(d),index:d});return S.createElement(ghe,{key:"line-".concat(d),option:n,lineItemProps:h})});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function rct(t){var{y:e,height:r,vertical:n=!0,verticalPoints:a}=t;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=t,l=z4(t,Xlt),c=a.map((u,d)=>{var h=Vo(Vo({},l),{},{x1:u,y1:e,x2:u,y2:e+r,key:"line-".concat(d),index:d});return S.createElement(ghe,{option:n,lineItemProps:h,key:"line-".concat(d)})});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function nct(t){var{horizontalFill:e,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length||l==null)return null;var u=l.map(h=>Math.round(h+a-a)).sort((h,p)=>h-p);a!==u[0]&&u.unshift(0);var d=u.map((h,p)=>{var g=!u[p+1],b=g?a+o-h:u[p+1]-h;if(b<=0)return null;var w=p%e.length;return S.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:b,width:s,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function act(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=t;if(!e||!r||!r.length)return null;var u=c.map(h=>Math.round(h+a-a)).sort((h,p)=>h-p);a!==u[0]&&u.unshift(0);var d=u.map((h,p)=>{var g=!u[p+1],b=g?a+o-h:u[p+1]-h;if(b<=0)return null;var w=p%r.length;return S.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:b,height:l,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var sct=(t,e)=>{var{xAxis:r,width:n,height:a,offset:s}=t;return Hce(DL(Vo(Vo(Vo({},eh),r),{},{ticks:qce(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,e)},ict=(t,e)=>{var{yAxis:r,width:n,height:a,offset:s}=t;return Hce(DL(Vo(Vo(Vo({},eh),r),{},{ticks:qce(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,e)},oct={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:wi.grid};function hE(t){var e=nM(),r=aM(),n=rue(),a=Vo(Vo({},Si(t,oct)),{},{x:Mr(t.x)?t.x:n.left,y:Mr(t.y)?t.y:n.top,width:Mr(t.width)?t.width:n.width,height:Mr(t.height)?t.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:p,verticalValues:g}=a,b=Yo(),w=Cr(I=>HW(I,"xAxis",s,b)),_=Cr(I=>HW(I,"yAxis",o,b));if(!Qd(u)||!Qd(d)||!Mr(l)||!Mr(c))return null;var N=a.verticalCoordinatesGenerator||sct,A=a.horizontalCoordinatesGenerator||ict,{horizontalPoints:j,verticalPoints:P}=a;if((!j||!j.length)&&typeof A=="function"){var U=p&&p.length,G=A({yAxis:_?Vo(Vo({},_),{},{ticks:U?p:_.ticks}):void 0,width:e??u,height:r??d,offset:n},U?!0:h);f4(Array.isArray(G),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof G,"]")),Array.isArray(G)&&(j=G)}if((!P||!P.length)&&typeof N=="function"){var O=g&&g.length,D=N({xAxis:w?Vo(Vo({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:r??d,offset:n},O?!0:h);f4(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(P=D)}return S.createElement(rc,{zIndex:a.zIndex},S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(ect,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),S.createElement(nct,ip({},a,{horizontalPoints:j})),S.createElement(act,ip({},a,{verticalPoints:P})),S.createElement(tct,ip({},a,{offset:n,horizontalPoints:j,xAxis:w,yAxis:_})),S.createElement(rct,ip({},a,{offset:n,verticalPoints:P,xAxis:w,yAxis:_}))))}hE.displayName="CartesianGrid";var xhe=(t,e,r,n)=>sm(t,"xAxis",e,n),vhe=(t,e,r,n)=>am(t,"xAxis",e,n),bhe=(t,e,r,n)=>sm(t,"yAxis",r,n),yhe=(t,e,r,n)=>am(t,"yAxis",r,n),lct=bt([Xn,xhe,bhe,vhe,yhe],(t,e,r,n,a)=>wm(t,"xAxis")?Vx(e,n,!1):Vx(r,a,!1)),cct=(t,e,r,n,a)=>a;function uct(t){return t.type==="line"}var dct=bt([o6,cct],(t,e)=>t.filter(uct).find(r=>r.id===e)),fct=bt([Xn,xhe,bhe,vhe,yhe,dct,lct,t6],(t,e,r,n,a,s,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(s==null||e==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:h,data:p}=s,g;if(p!=null&&p.length>0?g=p:g=c==null?void 0:c.slice(u,d+1),g!=null)return Pct({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:h,bandSize:o,displayedData:g})}});function hct(t){var e=Xp(t),r=3,n=2;if(e!=null){var{r:a,strokeWidth:s}=e,o=Number(a),l=Number(s);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(l)||l<0)&&(l=n),{r:o,strokeWidth:l}}return{r,strokeWidth:n}}var mct=["id"],pct=["type","layout","connectNulls","needClip","shape"],gct=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function My(){return My=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},My.apply(null,arguments)}function $K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ad(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$K(Object(r),!0).forEach(function(n){xct(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$K(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xct(t,e,r){return(e=vct(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vct(t){var e=bct(t,"string");return typeof e=="symbol"?e:e+""}function bct(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LL(t,e){if(t==null)return{};var r,n,a=yct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function yct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var wct=t=>{var{dataKey:e,name:r,stroke:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:_v(r,e),payload:t}]},_ct=S.memo(t=>{var{dataKey:e,data:r,stroke:n,strokeWidth:a,fill:s,name:o,hide:l,unit:c,tooltipType:u}=t,d={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:e,nameKey:void 0,name:_v(o,e),hide:l,type:u,color:n,unit:c}};return S.createElement(kL,{tooltipEntrySettings:d})}),whe=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Nct(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],a=0;a<e;++a)n=[...n,...r];return n}var Ect=(t,e,r)=>{var n=r.reduce((h,p)=>h+p);if(!n)return whe(e,t);for(var a=Math.floor(t/n),s=t%n,o=e-t,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>s){l=[...r.slice(0,c),s-u];break}var d=l.length%2===0?[0,o]:[o];return[...Nct(r,a),...l,...d].map(h=>"".concat(h,"px")).join(", ")};function Act(t){var{clipPathId:e,points:r,props:n}=t,{dot:a,dataKey:s,needClip:o}=n,{id:l}=n,c=LL(n,mct),u=Vc(c);return S.createElement(cit,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:u,needClip:o,clipPathId:e})}function Sct(t){var{showLabels:e,children:r,points:n}=t,a=S.useMemo(()=>n==null?void 0:n.map(s=>{var o,l,c={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Ad(Ad({},c),{},{value:s.value,payload:s.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return S.createElement(Hfe,{value:e?a:void 0},r)}function HK(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:a,props:s}=t,{type:o,layout:l,connectNulls:c,needClip:u,shape:d}=s,h=LL(s,pct),p=Ad(Ad({},wl(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:a??s.strokeDasharray});return S.createElement(S.Fragment,null,(n==null?void 0:n.length)>1&&S.createElement(SL,My({shapeType:"curve",option:d},p,{pathRef:r})),S.createElement(Act,{points:n,clipPathId:e,props:s}))}function jct(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Tct(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:p,width:g,height:b,onAnimationEnd:w,onAnimationStart:_}=r,N=a.current,A=Xw(o,"recharts-line-"),j=S.useRef(A),[P,U]=S.useState(!1),G=!P,O=S.useCallback(()=>{typeof w=="function"&&w(),U(!1)},[w]),D=S.useCallback(()=>{typeof _=="function"&&_(),U(!0)},[_]),I=jct(n.current),V=S.useRef(0);j.current!==A&&(V.current=s.current,j.current=A);var R=V.current;return S.createElement(Sct,{points:o,showLabels:G},r.children,S.createElement(Kw,{animationId:A,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:O,onAnimationStart:D,key:A},B=>{var F=hs(R,I+R,B),ee=Math.min(F,I),Z;if(c)if(l){var ce="".concat(l).split(/[,\s]+/gim).map(me=>parseFloat(me));Z=Ect(ee,I,ce)}else Z=whe(I,ee);else Z=l==null?void 0:String(l);if(B>0&&I>0&&(a.current=o,s.current=Math.max(s.current,ee)),N){var ne=N.length/o.length,ae=B===1?o:o.map((me,Ee)=>{var ye=Math.floor(Ee*ne);if(N[ye]){var H=N[ye];return Ad(Ad({},me),{},{x:hs(H.x,me.x,B),y:hs(H.y,me.y,B)})}return p?Ad(Ad({},me),{},{x:hs(g*2,me.x,B),y:hs(b/2,me.y,B)}):Ad(Ad({},me),{},{x:me.x,y:me.y})});return a.current=ae,S.createElement(HK,{props:r,points:ae,clipPathId:e,pathRef:n,strokeDasharray:Z})}return S.createElement(HK,{props:r,points:o,clipPathId:e,pathRef:n,strokeDasharray:Z})}),S.createElement(yL,{label:r.label}))}function Cct(t){var{clipPathId:e,props:r}=t,n=S.useRef(null),a=S.useRef(0),s=S.useRef(null);return S.createElement(Tct,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:s})}var kct=(t,e)=>{var r,n;return{x:(r=t.x)!==null&&r!==void 0?r:void 0,y:(n=t.y)!==null&&n!==void 0?n:void 0,value:t.value,errorVal:Ba(t.payload,e)}};class Ict extends S.Component{render(){var{hide:e,dot:r,points:n,className:a,xAxisId:s,yAxisId:o,top:l,left:c,width:u,height:d,id:h,needClip:p,zIndex:g}=this.props;if(e)return null;var b=aa("recharts-line",a),w=h,{r:_,strokeWidth:N}=hct(r),A=Jfe(r),j=_*2+N,P=p?"url(#clipPath-".concat(A?"":"dots-").concat(w,")"):void 0;return S.createElement(rc,{zIndex:g},S.createElement(so,{className:b},p&&S.createElement("defs",null,S.createElement(che,{clipPathId:w,xAxisId:s,yAxisId:o}),!A&&S.createElement("clipPath",{id:"clipPath-dots-".concat(w)},S.createElement("rect",{x:c-j/2,y:l-j/2,width:u+j,height:d+j}))),S.createElement(lhe,{xAxisId:s,yAxisId:o,data:n,dataPointFormatter:kct,errorBarOffset:0},S.createElement(Cct,{props:this.props,clipPathId:w}))),S.createElement(Cit,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:P}))}}var _he={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:wi.line,type:"linear"};function Oct(t){var e=Si(t,_he),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:p,xAxisId:g,yAxisId:b,id:w}=e,_=LL(e,gct),{needClip:N}=PL(g,b),A=OL(),j=qw(),P=Yo(),U=Cr(V=>fct(V,g,b,P,w));if(j!=="horizontal"&&j!=="vertical"||U==null||A==null)return null;var{height:G,width:O,x:D,y:I}=A;return S.createElement(Ict,My({},_,{id:w,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:o,isAnimationActive:d,hide:u,label:h,legendType:p,xAxisId:g,yAxisId:b,points:U,layout:j,height:G,width:O,left:D,top:I,needClip:N}))}function Pct(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:o,bandSize:l,displayedData:c}=t;return c.map((u,d)=>{var h=Ba(u,o);if(e==="horizontal"){var p=xG({axis:r,ticks:a,bandSize:l,entry:u,index:d}),g=xs(h)?null:n.scale(h);return{x:p,y:g,value:h,payload:u}}var b=xs(h)?null:r.scale(h),w=xG({axis:n,ticks:s,bandSize:l,entry:u,index:d});return b==null||w==null?null:{x:b,y:w,value:h,payload:u}}).filter(Boolean)}function Rct(t){var e=Si(t,_he),r=Yo();return S.createElement(IL,{id:e.id,type:"line"},n=>S.createElement(S.Fragment,null,S.createElement(the,{legendPayload:wct(e)}),S.createElement(_ct,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),S.createElement(ahe,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),S.createElement(Oct,My({},e,{id:n}))))}var fO=S.memo(Rct,S6);fO.displayName="Line";var Dct=["domain","range"],Mct=["domain","range"];function qK(t,e){if(t==null)return{};var r,n,a=Lct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Lct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function GK(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function Nhe(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=qK(t,Dct),{domain:s,range:o}=e,l=qK(e,Mct);return!GK(r,s)||!GK(n,o)?!1:S6(a,l)}var Fct=["dangerouslySetInnerHTML","ticks"],Bct=["id"];function hO(){return hO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hO.apply(null,arguments)}function WK(t,e){if(t==null)return{};var r,n,a=Uct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Uct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function zct(t){var e=Xa(),r=S.useRef(null);return S.useLayoutEffect(()=>{r.current===null?e(mit(t)):r.current!==t&&e(pit({prev:r.current,next:t})),r.current=t},[t,e]),S.useLayoutEffect(()=>()=>{r.current&&(e(git(r.current)),r.current=null)},[e]),null}var Vct=t=>{var{xAxisId:e,className:r}=t,n=Cr(tM),a=Yo(),s="xAxis",o=Cr(_=>Cv(_,s,e,a)),l=Cr(_=>efe(_,s,e,a)),c=Cr(_=>Yde(_,e)),u=Cr(_=>wtt(_,e)),d=Cr(_=>Ide(_,e));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:h,ticks:p}=t,g=WK(t,Fct),{id:b}=d,w=WK(d,Bct);return S.createElement(ML,hO({},g,w,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:aa("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l,axisType:s}))},$ct={allowDataOverflow:Wi.allowDataOverflow,allowDecimals:Wi.allowDecimals,allowDuplicatedCategory:Wi.allowDuplicatedCategory,angle:Wi.angle,axisLine:eh.axisLine,height:Wi.height,hide:!1,includeHidden:Wi.includeHidden,interval:Wi.interval,minTickGap:Wi.minTickGap,mirror:Wi.mirror,orientation:Wi.orientation,padding:Wi.padding,reversed:Wi.reversed,scale:Wi.scale,tick:Wi.tick,tickCount:Wi.tickCount,tickLine:eh.tickLine,tickSize:eh.tickSize,type:Wi.type,xAxisId:0},Hct=t=>{var e=Si(t,$ct);return S.createElement(S.Fragment,null,S.createElement(zct,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),S.createElement(Vct,e))},mE=S.memo(Hct,Nhe);mE.displayName="XAxis";var qct=["dangerouslySetInnerHTML","ticks"],Gct=["id"];function mO(){return mO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mO.apply(null,arguments)}function KK(t,e){if(t==null)return{};var r,n,a=Wct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Wct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Kct(t){var e=Xa(),r=S.useRef(null);return S.useLayoutEffect(()=>{r.current===null?e(xit(t)):r.current!==t&&e(vit({prev:r.current,next:t})),r.current=t},[t,e]),S.useLayoutEffect(()=>()=>{r.current&&(e(bit(r.current)),r.current=null)},[e]),null}var Xct=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=S.useRef(null),o=S.useRef(null),l=Cr(tM),c=Yo(),u=Xa(),d="yAxis",h=Cr(U=>Cv(U,d,e,c)),p=Cr(U=>Zde(U,e)),g=Cr(U=>Ntt(U,e)),b=Cr(U=>efe(U,d,e,c)),w=Cr(U=>Ode(U,e));if(S.useLayoutEffect(()=>{if(!(n!=="auto"||!p||bL(a)||S.isValidElement(a)||w==null)){var U=s.current;if(U){var G=U.getCalculatedWidth();Math.round(p.width)!==Math.round(G)&&u(yit({id:e,width:G}))}}},[b,p,u,a,e,n,w]),p==null||g==null||w==null)return null;var{dangerouslySetInnerHTML:_,ticks:N}=t,A=KK(t,qct),{id:j}=w,P=KK(w,Gct);return S.createElement(ML,mO({},A,P,{ref:s,labelRef:o,scale:h,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:aa("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:b,axisType:d}))},Yct={allowDataOverflow:Ki.allowDataOverflow,allowDecimals:Ki.allowDecimals,allowDuplicatedCategory:Ki.allowDuplicatedCategory,angle:Ki.angle,axisLine:eh.axisLine,hide:!1,includeHidden:Ki.includeHidden,interval:Ki.interval,minTickGap:Ki.minTickGap,mirror:Ki.mirror,orientation:Ki.orientation,padding:Ki.padding,reversed:Ki.reversed,scale:Ki.scale,tick:Ki.tick,tickCount:Ki.tickCount,tickLine:eh.tickLine,tickSize:eh.tickSize,type:Ki.type,width:Ki.width,yAxisId:0},Zct=t=>{var e=Si(t,Yct);return S.createElement(S.Fragment,null,S.createElement(Kct,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),S.createElement(Xct,e))},pE=S.memo(Zct,Nhe);pE.displayName="YAxis";var Qct=(t,e)=>e,FL=bt([Qct,Xn,Cde,Ui,gfe,Rh,Brt,Fi],Grt),BL=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},Ehe=ku("mouseClick"),Ahe=$w();Ahe.startListening({actionCreator:Ehe,effect:(t,e)=>{var r=t.payload,n=FL(e.getState(),BL(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(Ltt({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var pO=ku("mouseMove"),She=$w(),iN=null;She.startListening({actionCreator:pO,effect:(t,e)=>{var r=t.payload;iN!==null&&cancelAnimationFrame(iN);var n=BL(r);iN=requestAnimationFrame(()=>{var a=e.getState(),s=oL(a,a.tooltip.settings.shared);if(s==="axis"){var o=FL(a,n);(o==null?void 0:o.activeIndex)!=null?e.dispatch(lfe({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(ofe())}iN=null})}});var XK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},jhe=tc({name:"rootProps",initialState:XK,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:XK.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),Jct=jhe.reducer,{updateOptions:eut}=jhe.actions,The=tc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:tut}=The.actions,rut=The.reducer,Che=ku("keyDown"),khe=ku("focus"),UL=$w();UL.startListening({actionCreator:Che,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=lL(a,Iv(r),a_(r),l_(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=Rh(r);if(s==="Enter"){var u=P4(r,"axis","hover",String(a.index));e.dispatch(aO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:u}));return}var d=jtt(r),h=d==="left-to-right"?1:-1,p=s==="ArrowRight"?1:-1,g=l+p*h;if(!(c==null||g>=c.length||g<0)){var b=P4(r,"axis","hover",String(g));e.dispatch(aO({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}}});UL.startListening({actionCreator:khe,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=P4(r,"axis","hover",String(s));e.dispatch(aO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var nu=ku("externalEvent"),Ihe=$w(),TC=new Map;Ihe.startListening({actionCreator:nu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=TC.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Nrt(l),activeDataKey:hL(l),activeIndex:im(l),activeLabel:bfe(l),activeTooltipIndex:im(l),isTooltipActive:Ert(l)};r(c,n)}finally{TC.delete(a)}});TC.set(a,o)}}});var nut=bt([kv],t=>t.tooltipItemPayloads),aut=bt([nut,i_,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=e(s,r);return o}}}),Ohe=ku("touchMove"),Phe=$w();Phe.startListening({actionCreator:Ohe,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=oL(n,n.tooltip.settings.shared);if(a==="axis"){var s=FL(n,BL({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(lfe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Wce),d=(o=c.getAttribute(Kce))!==null&&o!==void 0?o:void 0,h=aut(e.getState(),u,d);e.dispatch(ife({activeDataKey:d,activeIndex:u,activeCoordinate:h}))}}}});var sut=pce({brush:hlt,cartesianAxis:wit,chartData:_nt,errorBars:zit,graphicalItems:jst,layout:rXe,legend:iYe,options:xnt,polarAxis:Hat,polarOptions:rut,referenceElements:ylt,rootProps:Jct,tooltip:Ftt,zIndex:int}),iut=function(e){return jKe({reducer:sut,preloadedState:e,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([Ahe.middleware,She.middleware,UL.middleware,Ihe.middleware,Phe.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(kce({type:"raf"}))},devTools:Ww.devToolsEnabled})};function Rhe(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=Yo(),s=S.useRef(null);if(a)return r;s.current==null&&(s.current=iut(e));var o=HD;return S.createElement(pot,{context:o,store:s.current},r)}function out(t){var{layout:e,margin:r}=t,n=Xa(),a=Yo();return S.useEffect(()=>{a||(n(JKe(e)),n(QKe(r)))},[n,a,e,r]),null}var Dhe=S.memo(out,S6);function Mhe(t){var e=Xa();return S.useEffect(()=>{e(eut(t))},[e,t]),null}function YK(t){var{zIndex:e,isPanorama:r}=t,n=r?"recharts-zindex-panorama-":"recharts-zindex-",a=rhe("".concat(n).concat(e)),s=Xa();return S.useLayoutEffect(()=>(s(ant({zIndex:e,elementId:a,isPanorama:r})),()=>{s(snt({zIndex:e,isPanorama:r}))}),[s,e,a,r]),S.createElement("g",{tabIndex:-1,id:a})}function ZK(t){var{children:e,isPanorama:r}=t,n=Cr(Krt);if(!n||n.length===0)return e;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return S.createElement(S.Fragment,null,a.map(o=>S.createElement(YK,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>S.createElement(YK,{key:o,zIndex:o,isPanorama:r})))}var lut=["children"];function cut(t,e){if(t==null)return{};var r,n,a=uut(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function uut(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function V4(){return V4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},V4.apply(null,arguments)}var dut={width:"100%",height:"100%",display:"block"},fut=S.forwardRef((t,e)=>{var r=nM(),n=aM(),a=hue();if(!Qd(r)||!Qd(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=t,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),S.createElement(TD,V4({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:dut,ref:e}),s)}),hut=t=>{var{children:e}=t,r=Cr($S);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return S.createElement(TD,{width:n,height:a,x:o,y:s},e)},QK=S.forwardRef((t,e)=>{var{children:r}=t,n=cut(t,lut),a=Yo();return a?S.createElement(hut,null,S.createElement(ZK,{isPanorama:!0},r)):S.createElement(fut,V4({ref:e},n),S.createElement(ZK,{isPanorama:!1},r))});function mut(){var t=Xa(),[e,r]=S.useState(null),n=Cr(yXe);return S.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;si(s)&&s!==n&&t(tXe(s))}},[e,t,n]),r}function JK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function put(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JK(Object(r),!0).forEach(function(n){gut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gut(t,e,r){return(e=xut(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xut(t){var e=vut(t,"string");return typeof e=="symbol"?e:e+""}function vut(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tg(){return tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tg.apply(null,arguments)}var but=()=>(Int(),null);function $4(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var yut=S.forwardRef((t,e)=>{var r,n,a=S.useRef(null),[s,o]=S.useState({containerWidth:$4((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:$4((n=t.style)===null||n===void 0?void 0:n.height)}),l=S.useCallback((u,d)=>{o(h=>{var p=Math.round(u),g=Math.round(d);return h.containerWidth===p&&h.containerHeight===g?h:{containerWidth:p,containerHeight:g}})},[]),c=S.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=u.getBoundingClientRect();l(d,h);var p=b=>{var{width:w,height:_}=b[0].contentRect;l(w,_)},g=new ResizeObserver(p);g.observe(u),a.current=g}},[e,l]);return S.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),S.createElement(S.Fragment,null,S.createElement(qS,{width:s.containerWidth,height:s.containerHeight}),S.createElement("div",tg({ref:c},t)))}),wut=S.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=S.useState({containerWidth:$4(r),containerHeight:$4(n)}),o=S.useCallback((c,u)=>{s(d=>{var h=Math.round(c),p=Math.round(u);return d.containerWidth===h&&d.containerHeight===p?d:{containerWidth:h,containerHeight:p}})},[]),l=S.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[e,o]);return S.createElement(S.Fragment,null,S.createElement(qS,{width:a.containerWidth,height:a.containerHeight}),S.createElement("div",tg({ref:l},t)))}),_ut=S.forwardRef((t,e)=>{var{width:r,height:n}=t;return S.createElement(S.Fragment,null,S.createElement(qS,{width:r,height:n}),S.createElement("div",tg({ref:e},t)))}),Nut=S.forwardRef((t,e)=>{var{width:r,height:n}=t;return xh(r)||xh(n)?S.createElement(wut,tg({},t,{ref:e})):S.createElement(_ut,tg({},t,{ref:e}))});function Eut(t){return t===!0?yut:Nut}var Aut=S.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:g,onTouchMove:b,onTouchStart:w,style:_,width:N,responsive:A,dispatchTouchEvents:j=!0}=t,P=S.useRef(null),U=Xa(),[G,O]=S.useState(null),[D,I]=S.useState(null),V=mut(),R=rM(),B=(R==null?void 0:R.width)>0?R.width:N,F=(R==null?void 0:R.height)>0?R.height:a,ee=S.useCallback(xe=>{V(xe),typeof e=="function"&&e(xe),O(xe),I(xe),xe!=null&&(P.current=xe)},[V,e,O,I]),Z=S.useCallback(xe=>{U(Ehe(xe)),U(nu({handler:s,reactEvent:xe}))},[U,s]),ce=S.useCallback(xe=>{U(pO(xe)),U(nu({handler:u,reactEvent:xe}))},[U,u]),ne=S.useCallback(xe=>{U(ofe()),U(nu({handler:d,reactEvent:xe}))},[U,d]),ae=S.useCallback(xe=>{U(pO(xe)),U(nu({handler:h,reactEvent:xe}))},[U,h]),me=S.useCallback(()=>{U(khe())},[U]),Ee=S.useCallback(xe=>{U(Che(xe.key))},[U]),ye=S.useCallback(xe=>{U(nu({handler:o,reactEvent:xe}))},[U,o]),H=S.useCallback(xe=>{U(nu({handler:l,reactEvent:xe}))},[U,l]),Y=S.useCallback(xe=>{U(nu({handler:c,reactEvent:xe}))},[U,c]),X=S.useCallback(xe=>{U(nu({handler:p,reactEvent:xe}))},[U,p]),re=S.useCallback(xe=>{U(nu({handler:w,reactEvent:xe}))},[U,w]),se=S.useCallback(xe=>{j&&U(Ohe(xe)),U(nu({handler:b,reactEvent:xe}))},[U,j,b]),ke=S.useCallback(xe=>{U(nu({handler:g,reactEvent:xe}))},[U,g]),Ce=Eut(A);return S.createElement(Sfe.Provider,{value:G},S.createElement(ple.Provider,{value:D},S.createElement(Ce,{width:B??(_==null?void 0:_.width),height:F??(_==null?void 0:_.height),className:aa("recharts-wrapper",n),style:put({position:"relative",cursor:"default",width:B,height:F},_),onClick:Z,onContextMenu:ye,onDoubleClick:H,onFocus:me,onKeyDown:Ee,onMouseDown:Y,onMouseEnter:ce,onMouseLeave:ne,onMouseMove:ae,onMouseUp:X,onTouchEnd:ke,onTouchMove:se,onTouchStart:re,ref:ee},S.createElement(but,null),r)))}),Sut=["width","height","responsive","children","className","style","compact","title","desc"];function jut(t,e){if(t==null)return{};var r,n,a=Tut(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Tut(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Lhe=S.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=t,h=jut(t,Sut),p=Vc(h);return c?S.createElement(S.Fragment,null,S.createElement(qS,{width:r,height:n}),S.createElement(QK,{otherAttributes:p,title:u,desc:d},s)):S.createElement(Aut,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},S.createElement(QK,{otherAttributes:p,title:u,desc:d,ref:e},S.createElement(_lt,null,s)))});function gO(){return gO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gO.apply(null,arguments)}var Cut={top:5,right:5,bottom:5,left:5},kut={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Cut,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Fhe=S.forwardRef(function(e,r){var n,a=Si(e.categoricalChartProps,kut),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return S.createElement(Rhe,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},S.createElement(fhe,{chartData:u.data}),S.createElement(Dhe,{layout:a.layout,margin:a.margin}),S.createElement(Mhe,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),S.createElement(Lhe,gO({},a,{ref:r})))}),Iut=["axis"],Out=S.forwardRef((t,e)=>S.createElement(Fhe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Iut,tooltipPayloadSearcher:vL,categoricalChartProps:t,ref:e})),Put=["axis","item"],eX=S.forwardRef((t,e)=>S.createElement(Fhe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Put,tooltipPayloadSearcher:vL,categoricalChartProps:t,ref:e}));function Rut(t){var e=Xa();return S.useEffect(()=>{e(tut(t))},[e,t]),null}var Dut=["layout"];function xO(){return xO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xO.apply(null,arguments)}function Mut(t,e){if(t==null)return{};var r,n,a=Lut(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Lut(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Fut={top:5,right:5,bottom:5,left:5},Bhe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Fut,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},But=S.forwardRef(function(e,r){var n,a=Si(e.categoricalChartProps,Bhe),{layout:s}=a,o=Mut(a,Dut),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,h={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return S.createElement(Rhe,{preloadedState:{options:h},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},S.createElement(fhe,{chartData:a.data}),S.createElement(Dhe,{layout:s,margin:a.margin}),S.createElement(Mhe,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),S.createElement(Rut,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),S.createElement(Lhe,xO({},o,{ref:r})))});function tX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rX(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tX(Object(r),!0).forEach(function(n){Uut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tX(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uut(t,e,r){return(e=zut(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zut(t){var e=Vut(t,"string");return typeof e=="symbol"?e:e+""}function Vut(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $ut=["item"],Hut=rX(rX({},Bhe),{},{layout:"centric",startAngle:0,endAngle:360}),qut=S.forwardRef((t,e)=>{var r=Si(t,Hut);return S.createElement(But,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:$ut,tooltipPayloadSearcher:vL,categoricalChartProps:r,ref:e})});const Gut=()=>{const[t,e]=S.useState([]),[r,n]=S.useState(!0),[a,s]=S.useState([]),[o,l]=S.useState("BHD");S.useEffect(()=>{c()},[]);const c=async()=>{n(!0);try{const p=await wt.get("/empleados");if(p.data.success){const g=p.data.data.map(b=>({...b,salary:b.salarioBase||0,montoAPagar:b.salarioBase||0,banco:b.banco||"BHD",cuenta:b.cuentaBanco||""}));e(g)}}catch(p){console.error("Error cargando empleados:",p),We.error("Error cargando empleados")}finally{n(!1)}},u=p=>{p.target.checked?s(t.map(g=>g.id)):s([])},d=p=>{a.includes(p)?s(a.filter(g=>g!==p)):s([...a,p])},h=async()=>{var b,w;if(a.length===0){We.warning("Seleccione al menos un empleado");return}const p=t.filter(_=>a.includes(_.id)).map(_=>({userId:_.id,monto:parseFloat(_.montoAPagar),nombre:_.nombre,cuenta:_.cuenta})),g=p.filter(_=>!_.cuenta);if(g.length>0){We.error(`Hay ${g.length} empleados seleccionados sin cuenta bancaria.`);return}try{const _=await wt.post("/nomina/generar-archivo-banco",{banco:o,nomina:p});if(_.data.success){const N=new Blob([_.data.content],{type:"text/plain"}),A=window.URL.createObjectURL(N),j=document.createElement("a");j.href=A,j.download=_.data.fileName,document.body.appendChild(j),j.click(),window.URL.revokeObjectURL(A),We.success(`Archivo de Nmina (${o}) generado exitosamente`)}}catch(_){console.error("Error generando nmina:",_),We.error(((w=(b=_.response)==null?void 0:b.data)==null?void 0:w.error)||"Error generando archivo")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Generar Archivo de Nmina"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione el banco, los empleados y genere el archivo."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none",children:[i.jsx("option",{value:"BHD",children:"Banco BHD"}),i.jsx("option",{value:"POPULAR",children:"Banco Popular"}),i.jsx("option",{value:"BANRESERVAS",children:"Banreservas"})]}),i.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[i.jsx(WA,{className:"w-4 h-4"}),"Generar TXT"]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-400",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 w-10",children:i.jsx("input",{type:"checkbox",onChange:u,checked:a.length===t.length&&t.length>0})}),i.jsx("th",{className:"p-4",children:"Empleado"}),i.jsx("th",{className:"p-4",children:"Cdula"}),i.jsx("th",{className:"p-4",children:"Banco"}),i.jsx("th",{className:"p-4",children:"Cuenta"}),i.jsx("th",{className:"p-4 text-right",children:"Monto a Pagar"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"p-8 text-center",children:"Cargando empleados..."})}):t.map(p=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"p-4",children:i.jsx("input",{type:"checkbox",checked:a.includes(p.id),onChange:()=>d(p.id)})}),i.jsx("td",{className:"p-4 font-medium text-slate-900 dark:text-white",children:p.nombre}),i.jsx("td",{className:"p-4 text-slate-500",children:p.cedula||"---"}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:"BHD"})}),i.jsx("td",{className:`p-4 font-mono ${p.cuenta?"text-slate-600 dark:text-slate-400":"text-rose-500"}`,children:p.cuenta||"Sin Cuenta Configurada"}),i.jsxs("td",{className:"p-4 text-right font-medium text-slate-900 dark:text-white",children:["RD$ ",i.jsx("input",{type:"number",className:"w-24 text-right border-b border-slate-300 bg-transparent focus:outline-none focus:border-indigo-500",value:p.montoAPagar,onChange:g=>{const b=g.target.value;e(t.map(w=>w.id===p.id?{...w,montoAPagar:b}:w))}})]})]},p.id))})]})})]})},Wut=({userData:t})=>{const[e,r]=S.useState([]),[n,a]=S.useState(!1),[s,o]=S.useState(new Date().getFullYear()),[l,c]=S.useState(new Date().getMonth()+1),u=async()=>{if(t!=null&&t.companyId){a(!0);try{const h=await wt.get(`/companies/${t.companyId}/reporte-606?year=${s}&month=${l}`);h.data.success&&(r(h.data.data),h.data.data.length===0&&We.info("No se encontraron gastos fiscales en este periodo"))}catch(h){console.error("Error cargando 606:",h),We.error("Error al consultar reporte 606")}finally{a(!1)}}},d=()=>{var A;if(e.length===0){We.warning("No hay datos para exportar");return}const h=`${s}${String(l).padStart(2,"0")}`,p=`606|${((A=t.companyConfig)==null?void 0:A.rnc)||"000000000"}|${h}|${e.length}`,g=e.map(j=>`${j.rnc}|${j.tipoId}|${j.tipoBienes}|${j.ncf}|${j.ncfModificado}|${j.fechaComprobante}|${j.fechaPago}|${j.montoFacturado}|${j.itbisFacturado}|${j.itbisRetenido}|${j.montoTotal}|${j.tipoPago}`),b=[p,...g].join(`
`),w=new Blob([b],{type:"text/plain"}),_=window.URL.createObjectURL(w),N=document.createElement("a");N.href=_,N.download=`DGII_606_${h}.txt`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(_),We.success("Archivo 606 generado")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Generar Reporte 606"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione el periodo para generar el reporte de compras y gastos."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("select",{value:l,onChange:h=>c(h.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm",children:Array.from({length:12},(h,p)=>i.jsx("option",{value:p+1,children:new Date(0,p).toLocaleString("es",{month:"long"})},p+1))}),i.jsx("input",{type:"number",value:s,onChange:h=>o(h.target.value),className:"w-20 px-3 py-2 border border-slate-300 rounded-lg text-sm"}),i.jsxs("button",{onClick:u,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[i.jsx(qd,{className:"w-4 h-4"}),n?"...":"Consultar"]}),e.length>0&&i.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[i.jsx(WA,{className:"w-4 h-4"}),"TXT"]})]})]}),e.length>0&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Total Facturado"}),i.jsxs("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["RD$ ",e.reduce((h,p)=>h+parseFloat(p.montoTotal),0).toLocaleString()]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold",children:"ITBIS Total"}),i.jsxs("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["RD$ ",e.reduce((h,p)=>h+parseFloat(p.itbisFacturado),0).toLocaleString()]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Registros"}),i.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e.length})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-400",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4",children:"Fecha"}),i.jsx("th",{className:"p-4",children:"NCF"}),i.jsx("th",{className:"p-4",children:"RNC"}),i.jsx("th",{className:"p-4",children:"Concepto"}),i.jsx("th",{className:"p-4 text-right",children:"Monto"}),i.jsx("th",{className:"p-4 text-center",children:"Evidencia"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:n?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"p-8 text-center",children:"Cargando gastos..."})}):e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"p-8 text-center text-slate-500",children:"No hay gastos fiscales registrados."})}):e.map(h=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"p-4 text-slate-600",children:new Date(h.fecha).toLocaleDateString()}),i.jsx("td",{className:"p-4 font-mono font-medium text-slate-900 dark:text-white",children:h.ncf||"---"}),i.jsx("td",{className:"p-4 text-slate-500",children:h.rnc||"---"}),i.jsxs("td",{className:"p-4 text-slate-700 dark:text-slate-300",children:[i.jsx("div",{className:"font-medium capitalize",children:h.tipo}),i.jsx("div",{className:"text-xs text-slate-500",children:h.descripcion})]}),i.jsxs("td",{className:"p-4 text-right font-medium text-slate-900 dark:text-white",children:["RD$ ",(h.monto||0).toLocaleString()]}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-800 text-xs rounded-full font-medium",children:"S"})})]},h.id))})]})})]})},Kut=({userData:t})=>{const[e,r]=S.useState("nomina");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex gap-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>r("nomina"),className:`pb-3 px-1 text-sm font-medium transition-colors relative ${e==="nomina"?"text-indigo-600 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:["Nomina & Pagos",e==="nomina"&&i.jsx(Zt.div,{layoutId:"subtab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 dark:bg-indigo-400"})]}),i.jsxs("button",{onClick:()=>r("gastos"),className:`pb-3 px-1 text-sm font-medium transition-colors relative ${e==="gastos"?"text-indigo-600 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:["Gastos Fiscales (606)",e==="gastos"&&i.jsx(Zt.div,{layoutId:"subtab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 dark:bg-indigo-400"})]})]}),i.jsx("div",{className:"min-h-[400px]",children:e==="nomina"?i.jsx(Gut,{}):i.jsx(Wut,{userData:t})})]})},Xut=({planes:t,planActual:e,onCambiarPlan:r,cambiando:n})=>{const[a,s]=S.useState(null);if(!t||t.length===0)return i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planes..."})});const o=[...t].sort((c,u)=>c.precio-u.precio),l=c=>{switch(c){case"operativo":return i.jsx(ad,{className:"w-5 h-5"});case"automatizado":return i.jsx(CAe,{className:"w-5 h-5"});case"smart":return i.jsx(Bre,{className:"w-5 h-5"});default:return i.jsx(ad,{className:"w-5 h-5"})}};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Elige el Plan Perfecto para tu Empresa"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Compara caractersticas y selecciona el plan que mejor se adapte a tus necesidades"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((c,u)=>{const d=e===c.id,h=c.popular;return i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},className:`relative rounded-2xl border-2 ${h?"border-emerald-500 shadow-xl shadow-emerald-500/20":d?"border-indigo-500 shadow-lg":"border-slate-200 dark:border-slate-700"} bg-white dark:bg-slate-800 overflow-hidden hover:shadow-2xl transition-all duration-300`,children:[h&&i.jsxs("div",{className:"absolute top-0 right-0 bg-emerald-500 text-white px-4 py-1 rounded-bl-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(w3,{className:"w-3 h-3"}),"RECOMENDADO"]}),d&&!h&&i.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white px-4 py-1 rounded-bl-lg text-xs font-bold",children:"TU PLAN ACTUAL"}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-3",style:{backgroundColor:`${c.color}20`,color:c.color},children:l(c.id)}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:c.nombre}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:c.descripcion})]}),i.jsxs("div",{className:"text-center mb-6 pb-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsxs("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["RD$ ",c.precio.toLocaleString()]}),i.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"/mes"})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["~$",c.precioUSD," USD"]})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Camiones:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:c.limites.camiones===-1?"Ilimitados":`Hasta ${c.limites.camiones}`})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Usuarios:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:c.limites.usuarios===-1?"Ilimitados":c.limites.usuarios})]})]}),i.jsxs("div",{className:"space-y-2 mb-6",children:[c.caracteristicas.slice(0,8).map((p,g)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[p.incluido?i.jsx(ad,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${p.destacado?"text-emerald-500":"text-slate-400"}`}):i.jsx(Jn,{className:"w-4 h-4 mt-0.5 text-slate-300 dark:text-slate-600 flex-shrink-0"}),i.jsx("span",{className:p.incluido?p.destacado?"text-slate-900 dark:text-white font-medium":"text-slate-600 dark:text-slate-400":"text-slate-400 dark:text-slate-600 line-through",children:p.nombre})]},g)),c.caracteristicas.length>8&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2",children:["+ ",c.caracteristicas.length-8," caractersticas ms"]})]}),i.jsx("button",{onClick:()=>{d||r(c.id)},disabled:d||n,className:`w-full py-3 px-4 rounded-lg font-semibold transition-all ${d?"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed":h?"bg-emerald-500 hover:bg-emerald-600 text-white shadow-lg hover:shadow-xl":"bg-indigo-600 hover:bg-indigo-700 text-white"} ${n?"opacity-50 cursor-wait":""}`,children:n?"Cambiando...":d?"Plan Actual":"Seleccionar Plan"})]})]},c.id)})}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6 text-center",children:"Comparacin Detallada de Caractersticas"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-900 dark:text-white",children:"Caracterstica"}),o.map(c=>i.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-900 dark:text-white",children:c.nombre},c.id))]})}),i.jsx("tbody",{children:Array.from(new Set(o.flatMap(c=>c.caracteristicas.map(u=>u.nombre)))).map((c,u)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"p-4 text-sm text-slate-600 dark:text-slate-400",children:c}),o.map(d=>{const h=d.caracteristicas.find(p=>p.nombre===c);return i.jsx("td",{className:"p-4 text-center",children:h?h.incluido?i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx(ad,{className:"w-5 h-5 text-emerald-500"}),h.valor&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:h.valor})]}):i.jsx(Jn,{className:"w-5 h-5 text-slate-300 dark:text-slate-600 mx-auto"}):i.jsx(Jn,{className:"w-5 h-5 text-slate-300 dark:text-slate-600 mx-auto"})},d.id)})]},u))})]})})]})]})},Yut=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=S.useState(0);return S.useEffect(()=>{const c=t/60;let u=0;const d=setInterval(()=>{u+=c,u>=t?(s(t),clearInterval(d)):s(u)},1e3/60);return()=>clearInterval(d)},[t]),i.jsxs("span",{children:[e,a.toLocaleString("en-US",{minimumFractionDigits:n,maximumFractionDigits:n}),r]})},oN=({title:t,value:e,change:r,changeType:n,icon:a,prefix:s="",suffix:o="",delay:l=0})=>i.jsx(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:l},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),i.jsx("div",{className:"mt-2 flex items-baseline gap-2",children:i.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:i.jsx(Yut,{value:e,prefix:s,suffix:o,decimals:s==="$"?2:0})})}),r!==void 0&&i.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[n==="up"?i.jsx(Mre,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}):i.jsx(h3e,{className:"w-4 h-4 text-rose-600 dark:text-rose-400"}),i.jsxs("span",{className:`text-sm font-medium ${n==="up"?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:[r,"%"]}),i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"vs mes anterior"})]})]}),i.jsx("div",{className:`p-3 rounded-lg ${n==="up"?"bg-emerald-50 dark:bg-emerald-900/20":"bg-indigo-50 dark:bg-indigo-900/20"}`,children:i.jsx(a,{className:`w-6 h-6 ${n==="up"?"text-emerald-600 dark:text-emerald-400":"text-indigo-600 dark:text-indigo-400"}`,strokeWidth:1.5})})]})}),Zut=()=>{var Z,ce,ne;const{userData:t}=fa(),[e,r]=S.useState("30"),[n,a]=S.useState(!0),[s,o]=S.useState("todos"),[l,c]=S.useState([]),[u,d]=S.useState(!1),[h,p]=S.useState("overview"),[g,b]=S.useState(58.5),[w,_]=S.useState({ingresos:{total:0,change:0,changeType:"up"},gastos:{total:0,change:0,changeType:"down",desglose:{repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0}},utilidad:{total:0,change:0,changeType:"up"},facturasActivas:{total:0,change:0,changeType:"up"},tasaDolar:58.5,companyConfig:{rnc:"",ncfSequences:{},ncfExpiry:""}}),[N,A]=S.useState({plan:"Basic",precio:300,fechaInicio:new Date,proximoPago:new Date,estado:"activo",limites:{recolecciones:100,usuarios:5,almacenamiento:"10 GB"},uso:{recolecciones:45,usuarios:3,almacenamiento:"3.2 GB"}}),[j,P]=S.useState([]),[U,G]=S.useState([]),[O,D]=S.useState([]),[I,V]=S.useState(null),[R,B]=S.useState(!1);S.useEffect(()=>{(async()=>{a(!0);try{const me=await wt.get(`/finanzas/empresa/overview?dateRange=${e}`);if(me.data.success){_(me.data.data),b(me.data.data.tasaDolar||58.5);const X=await wt.get(`/companies/${t.companyId}`);X.data&&_(re=>({...re,companyConfig:{rnc:X.data.rnc||"",ncfSequences:X.data.ncfSequences||{B01:"",B02:"",B14:"",B15:""},ncfExpiry:X.data.ncfExpiry||""}}))}const Ee=await wt.get("/finanzas/empresa/suscripcion");Ee.data.success&&A(Ee.data.data);const ye=await wt.get("/finanzas/empresa/facturas-pendientes");ye.data.success&&P(ye.data.data);const H=await wt.get("/finanzas/empresa/metricas-mensuales?meses=12");H.data.success&&G(H.data.data);const Y=await wt.get("/finanzas/empresa/planes-disponibles");Y.data.success&&D(Y.data.data.planes)}catch(me){console.error("Error fetching company finance data:",me);const Ee=me.userMessage||me.message||"Error al cargar finanzas de la empresa";We.error(Ee),_({ingresos:{total:0,change:0,changeType:"neutral"},gastos:{total:0,change:0,changeType:"neutral",desglose:{repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0,detalleOtros:{gasolina:0,comida:0,peaje:0,otros:0}}},utilidad:{total:0,change:0,changeType:"neutral"},facturasActivas:{total:0,change:0,changeType:"neutral"},tasaDolar:58.5,companyConfig:{rnc:"",ncfSequences:{},ncfExpiry:""}})}finally{a(!1)}})()},[e]);const F=async ae=>{var me,Ee,ye,H;try{B(!0);const Y=await wt.post("/finanzas/empresa/cambiar-plan",{nuevoPlanId:ae});Y.data.success&&(We.success(Y.data.message),A(X=>({...X,plan:Y.data.data.planNombre})),V(ae))}catch(Y){console.error("Error al cambiar plan:",Y),(Ee=(me=Y.response)==null?void 0:me.data)!=null&&Ee.advertencias?(We.error(Y.response.data.message),Y.response.data.advertencias.forEach(X=>{We.warning(X)})):We.error(((H=(ye=Y.response)==null?void 0:ye.data)==null?void 0:H.message)||"Error al cambiar plan")}finally{B(!1)}},ee=async()=>{try{(await wt.put(`/companies/${t.companyId}/ncf-config`,{rnc:w.companyConfig.rnc,ncfSequences:w.companyConfig.ncfSequences,ncfExpiry:w.companyConfig.ncfExpiry})).data.success&&We.success("Configuracin Fiscal guardada correctamente")}catch(ae){console.error("Error guardando config fiscal:",ae),We.error("Error guardando configuracin")}};return n?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-8 py-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Finanzas de la Empresa"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Gestiona tus ingresos, gastos y suscripcin al sistema"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 rounded-md",children:[i.jsx(dh,{className:"w-3.5 h-3.5 text-indigo-600 dark:text-indigo-400"}),i.jsxs("span",{className:"text-xs font-medium text-indigo-600 dark:text-indigo-400",children:["Tasa: RD$ ",g.toFixed(2)," / USD"]})]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[i.jsx(WA,{className:"w-4 h-4"}),"Exportar Reporte"]})]})]}),i.jsx("div",{className:"mt-6 flex items-center gap-4",children:i.jsxs("div",{className:"relative inline-block text-left",children:[i.jsxs("select",{value:s,onChange:ae=>o(ae.target.value),disabled:u,className:"appearance-none bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm font-medium transition-all cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("option",{value:"todos",children:"Todos los Contenedores"}),l.map(ae=>i.jsx("option",{value:ae.id,children:ae.nombre},ae.id))]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-500",children:i.jsx(Fre,{className:"h-4 w-4"})})]})}),i.jsx("div",{className:"flex gap-2 mt-6",children:[{id:"overview",label:"Resumen Financiero",icon:vp},{id:"suscripcion",label:"Suscripcin SaaS",icon:ay},{id:"facturas",label:"Facturas Pendientes",icon:L4e},{id:"fiscal",label:"Contabilidad & Nmina",icon:tp},{id:"config_fiscal",label:"Configuracin Fiscal",icon:Au}].map(ae=>i.jsxs("button",{onClick:()=>p(ae.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${h===ae.id?"bg-indigo-600 text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[i.jsx(ae.icon,{className:"w-4 h-4"}),ae.label]},ae.id))})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[h==="fiscal"&&i.jsx(Kut,{userData:t}),h==="config_fiscal"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 max-w-4xl",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Configuracin de Comprobantes Fiscales (NCF)"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"RNC de la Empresa"}),i.jsx("input",{type:"text",className:"w-full max-w-md px-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Ej: 101000000",value:((Z=w.companyConfig)==null?void 0:Z.rnc)||"",onChange:ae=>_({...w,companyConfig:{...w.companyConfig,rnc:ae.target.value}})}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Este RNC aparecer en todas las facturas generadas."})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Secuencias Activas (Prximo NCF a emitir)"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["B01","B02","B14","B15"].map(ae=>{var me,Ee;return i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[ae," - ",ae==="B01"?"Crdito Fiscal":ae==="B02"?"Consumidor Final":ae==="B14"?"Especial":"Gubernamental"]}),i.jsx("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white font-mono",placeholder:`${ae}00000001`,value:((Ee=(me=w.companyConfig)==null?void 0:me.ncfSequences)==null?void 0:Ee[ae])||"",onChange:ye=>_({...w,companyConfig:{...w.companyConfig,ncfSequences:{...w.companyConfig.ncfSequences,[ae]:ye.target.value}}})})]},ae)})})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Fecha de Vencimiento Secuencia Actual"}),i.jsx("input",{type:"date",className:"w-full max-w-md px-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:((ce=w.companyConfig)==null?void 0:ce.ncfExpiry)||"",onChange:ae=>_({...w,companyConfig:{...w.companyConfig,ncfExpiry:ae.target.value}})})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{onClick:ee,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Guardar Configuracin"})})]})]}),h==="overview"&&(()=>{var me,Ee,ye,H,Y,X,re,se;if(!w)return i.jsx("div",{className:"p-4 text-center text-slate-500",children:"Cargando datos..."});const ae={ingresos:w.ingresos||{total:0,change:0,changeType:"neutral"},gastos:w.gastos||{total:0,change:0,changeType:"neutral",desglose:{repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0}},utilidad:w.utilidad||{total:0,change:0,changeType:"neutral"},facturasActivas:w.facturasActivas||{total:0,change:0,changeType:"neutral"},tasaDolar:w.tasaDolar||g};return ae.gastos&&!ae.gastos.desglose&&(ae.gastos.desglose={repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0,detalleOtros:{gasolina:0,comida:0,peaje:0,otros:0}}),ae.gastos.desglose||(ae.gastos.desglose={repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Finanzas Operativas"}),i.jsx("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[{value:"7",label:"7 das"},{value:"30",label:"30 das"},{value:"90",label:"90 das"}].map(ke=>i.jsx("button",{onClick:()=>r(ke.value),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${e===ke.value?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:ke.label},ke.value))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(oN,{title:"Ingresos Totales",value:ae.ingresos.total,prefix:"$",change:ae.ingresos.change,changeType:ae.ingresos.changeType,icon:kf,delay:0}),i.jsx(oN,{title:"Gastos Totales",value:ae.gastos.total,prefix:"$",change:ae.gastos.change,changeType:ae.gastos.changeType,icon:hAe,delay:.1}),i.jsx(oN,{title:"Utilidad Neta",value:ae.utilidad.total,prefix:"$",change:ae.utilidad.change,changeType:ae.utilidad.changeType,icon:Ul,delay:.2}),i.jsx(oN,{title:"Facturas Activas",value:ae.facturasActivas.total,change:ae.facturasActivas.change,changeType:ae.facturasActivas.changeType,icon:Br,delay:.3})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Desglose de Gastos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Todos los valores convertidos a USD. Repartidores cobran en RD$, Recolectores en USD."}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(X5,{width:"100%",height:250,children:i.jsxs(qut,{children:[i.jsx(she,{data:[{name:"Repartidores",value:ae.gastos.desglose.repartidoresUSD||0,color:"#4f46e5"},{name:"Recolectores",value:ae.gastos.desglose.recolectoresUSD||0,color:"#10b981"},{name:"Gasolina",value:((me=ae.gastos.desglose.detalleOtros)==null?void 0:me.gasolina)||0,color:"#8b5cf6"},{name:"Comida",value:((Ee=ae.gastos.desglose.detalleOtros)==null?void 0:Ee.comida)||0,color:"#f97316"},{name:"Peaje",value:((ye=ae.gastos.desglose.detalleOtros)==null?void 0:ye.peaje)||0,color:"#06b6d4"},{name:"Otros",value:((H=ae.gastos.desglose.detalleOtros)==null?void 0:H.otros)||0,color:"#f59e0b"}].filter(ke=>ke.value>0),cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{color:"#4f46e5"},{color:"#10b981"},{color:"#8b5cf6"},{color:"#f97316"},{color:"#06b6d4"},{color:"#f59e0b"}].map((ke,Ce)=>i.jsx(u_,{fill:ke.color,stroke:ke.color},`cell-${Ce}`))}),i.jsx(aN,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:ke=>`$${(ke||0).toLocaleString("en-US",{maximumFractionDigits:2})}`})]})})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(as,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Repartidores"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",(ae.gastos.desglose.repartidoresUSD||0).toLocaleString("en-US",{maximumFractionDigits:2})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:["RD$ ",(ae.gastos.desglose.repartidoresRD||0).toLocaleString("es-DO")]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${(ae.gastos.desglose.repartidoresUSD||0)/(ae.gastos.total||1)*100}%`},transition:{duration:.8,delay:.6},className:"h-full bg-indigo-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round((ae.gastos.desglose.repartidoresUSD||0)/(ae.gastos.total||1)*100),"%"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Br,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Recolectores"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",(ae.gastos.desglose.recolectoresUSD||0).toLocaleString("en-US",{maximumFractionDigits:2})]}),i.jsx("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"USD"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${(ae.gastos.desglose.recolectoresUSD||0)/(ae.gastos.total||1)*100}%`},transition:{duration:.8,delay:.7},className:"h-full bg-emerald-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round((ae.gastos.desglose.recolectoresUSD||0)/(ae.gastos.total||1)*100),"%"]})]})]}),((Y=ae.gastos.desglose.detalleOtros)==null?void 0:Y.gasolina)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(as,{className:"w-4 h-4 text-violet-600 dark:text-violet-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Gasolina"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.gasolina.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.gasolina/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-violet-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.gasolina/(ae.gastos.total||1)*100),"%"]})]})]}),((X=ae.gastos.desglose.detalleOtros)==null?void 0:X.comida)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cd,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Comida"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.comida.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.comida/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-orange-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.comida/(ae.gastos.total||1)*100),"%"]})]})]}),((re=ae.gastos.desglose.detalleOtros)==null?void 0:re.peaje)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(sAe,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Peaje"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.peaje.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.peaje/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-cyan-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.peaje/(ae.gastos.total||1)*100),"%"]})]})]}),((se=ae.gastos.desglose.detalleOtros)==null?void 0:se.otros)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cd,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Miscelneos"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.otros.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Zt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.otros/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-amber-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.otros/(ae.gastos.total||1)*100),"%"]})]})]})]})]})]}),U.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Tendencia Mensual: Ingresos vs Gastos"}),i.jsx(X5,{width:"100%",height:300,children:i.jsxs(Out,{data:U,children:[i.jsx(hE,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(mE,{dataKey:"mes",stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(pE,{stroke:"#64748b",style:{fontSize:"12px"},tickFormatter:ke=>`$${ke.toLocaleString()}`}),i.jsx(aN,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:ke=>`$${ke.toLocaleString("en-US",{maximumFractionDigits:2})}`}),i.jsx(uE,{}),i.jsx(fO,{type:"monotone",dataKey:"ingresos",stroke:"#10b981",strokeWidth:2,name:"Ingresos",dot:{fill:"#10b981",r:4},activeDot:{r:6}}),i.jsx(fO,{type:"monotone",dataKey:"gastos",stroke:"#ef4444",strokeWidth:2,name:"Gastos",dot:{fill:"#ef4444",r:4},activeDot:{r:6}})]})})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Utilidad Neta Mensual"}),i.jsx(X5,{width:"100%",height:300,children:i.jsxs(eX,{data:U,children:[i.jsx(hE,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(mE,{dataKey:"mes",stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(pE,{stroke:"#64748b",style:{fontSize:"12px"},tickFormatter:ke=>`$${ke.toLocaleString()}`}),i.jsx(aN,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:ke=>`$${ke.toLocaleString("en-US",{maximumFractionDigits:2})}`}),i.jsx(uE,{}),i.jsx(dO,{dataKey:"utilidad",fill:"#6366f1",name:"Utilidad Neta",radius:[8,8,0,0]})]})})]})]}),U.length>0&&i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.7},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Entregas Mensuales"}),i.jsx(X5,{width:"100%",height:300,children:i.jsxs(eX,{data:U,children:[i.jsx(hE,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(mE,{dataKey:"mes",stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(pE,{stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(aN,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"}}),i.jsx(uE,{}),i.jsx(dO,{dataKey:"entregas",fill:"#10b981",name:"Total Entregas",radius:[8,8,0,0]})]})})]})]})})(),h==="suscripcion"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(Xut,{planes:O,planActual:(ne=N.plan)==null?void 0:ne.toLowerCase(),onCambiarPlan:F,cambiando:R}),i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mt-12",children:"Plan Actual - Detalles"}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg p-8 text-white",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("h3",{className:"text-2xl font-bold",children:["Plan ",N.plan]}),i.jsx("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:N.estado==="activo"?" Activo":"Inactivo"})]}),i.jsx("p",{className:"text-indigo-100",children:"Acceso completo al sistema de gestin de envos"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-4xl font-bold",children:["$",N.precio]}),i.jsx("div",{className:"text-indigo-100 text-sm",children:"por mes"})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Yl,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm text-indigo-100",children:"Fecha de Inicio"})]}),i.jsx("div",{className:"font-semibold",children:new Date(N.fechaInicio).toLocaleDateString()})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Xo,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm text-indigo-100",children:"Prximo Pago"})]}),i.jsx("div",{className:"font-semibold",children:new Date(N.proximoPago).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Recolecciones"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Uso actual"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[N.uso.recolecciones," / ",N.limites.recolecciones===-1?"Ilimitado":N.limites.recolecciones]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-indigo-500 transition-all",style:{width:N.limites.recolecciones===-1?"0%":`${N.uso.recolecciones/N.limites.recolecciones*100}%`}})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:N.limites.recolecciones===-1?"Sin lmite":`${(N.uso.recolecciones/N.limites.recolecciones*100).toFixed(1)}% utilizado`})]})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Usuarios"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Uso actual"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[N.uso.usuarios," / ",N.limites.usuarios===-1?"Ilimitado":N.limites.usuarios]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-emerald-500 transition-all",style:{width:N.limites.usuarios===-1?"0%":`${N.uso.usuarios/N.limites.usuarios*100}%`}})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:N.limites.usuarios===-1?"Sin lmite":`${(N.uso.usuarios/N.limites.usuarios*100).toFixed(1)}% utilizado`})]})]}),i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Almacenamiento"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Uso actual"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[N.uso.almacenamiento," / ",N.limites.almacenamiento]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-amber-500 transition-all",style:{width:"32%"}})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:"32% utilizado"})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium shadow-sm",children:"Actualizar Plan"}),i.jsx("button",{className:"px-6 py-3 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-medium",children:"Ver Historial de Pagos"})]})]}),h==="facturas"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Facturas Pendientes de Pago"}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[i.jsx(ms,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),i.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:[j.length," facturas pendientes"]})]})]}),j.length===0?i.jsxs(Zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-12 text-center",children:[i.jsx(en,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"Todo al da!"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No tienes facturas pendientes de pago en este momento"})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Nmero"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Concepto"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Fecha"}),i.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Monto"}),i.jsx("th",{className:"text-center py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{children:j.map((ae,me)=>i.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium text-slate-900 dark:text-white",children:ae.numero}),i.jsx("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:ae.concepto}),i.jsx("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:ae.fecha}),i.jsxs("td",{className:"py-3 px-4 text-sm font-semibold text-right text-slate-900 dark:text-white",children:["$",ae.monto]}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:"Pendiente"})}),i.jsx("td",{className:"py-3 px-4 text-right",children:i.jsx("button",{className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 text-sm font-medium",children:"Pagar Ahora"})})]},me))})]})})]})]})]})},Qut=()=>{const{userData:t}=fa();return(t==null?void 0:t.rol)==="super_admin"?i.jsx(rGe,{}):(t==null?void 0:t.rol)==="propietario"?i.jsx(Zut,{}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Acceso No Autorizado"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No tienes permisos para acceder a este mdulo"})]})})},lN=()=>{const[t,e]=S.useState(!1),[r,n]=S.useState([]),[a,s]=S.useState([]),[o,l]=S.useState(null),[c,u]=S.useState(null),[d,h]=S.useState(!1),[p,g]=S.useState({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:new Date().toISOString().split("T")[0],horaPreferida:"",notas:""});S.useEffect(()=>{b(),w()},[]);const b=async()=>{try{const O=await wt.get("/solicitudes");if(O.data.success){const D=O.data.data.filter(I=>I.estado==="pendiente"||I.estado==="asignada");n(D)}}catch(O){console.error("Error cargando solicitudes:",O),We.error("Error al cargar solicitudes")}},w=async()=>{try{const O=await wt.get("/solicitudes/recolectores");O.data.success&&s(O.data.data)}catch(O){console.error("Error cargando recolectores:",O),We.error("Error al cargar recolectores")}},_=O=>{g({...p,[O.target.name]:O.target.value})},N=async O=>{if(O.preventDefault(),e(!0),!p.clienteNombre||!p.direccion){We.warning("Nombre y Direccin son obligatorios"),e(!1);return}try{(await wt.post("/solicitudes",p)).data.success&&(We.success("Solicitud de recoleccin creada"),g({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:new Date().toISOString().split("T")[0],horaPreferida:"",notas:""}),b())}catch(D){console.error("Error creando solicitud:",D),We.error("Error al agendar la cita")}finally{e(!1)}},A=(O,D)=>{l(D),O.dataTransfer.effectAllowed="move",O.target.style.opacity="0.5"},j=O=>{O.target.style.opacity="1",l(null),u(null)},P=(O,D)=>{O.preventDefault(),O.dataTransfer.dropEffect="move",u(D)},U=()=>{u(null)},G=async(O,D)=>{var I,V;if(O.preventDefault(),u(null),!!o){h(!0);try{const R=await wt.put(`/solicitudes/${o.id}/asignar`,{recolectorId:D});R.data.success&&(We.success(`Cita asignada a ${R.data.data.recolectorNombre}`),b())}catch(R){console.error("Error asignando solicitud:",R),We.error(((V=(I=R.response)==null?void 0:I.data)==null?void 0:V.error)||"Error al asignar la cita")}finally{h(!1),l(null)}}};return i.jsxs("div",{className:"p-6 max-w-[1800px] mx-auto space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(vl,{className:"text-indigo-600"}),"Call Center USA"]}),i.jsx("p",{className:"text-slate-500",children:"Agendamiento de Citas de Recoleccin"})]})}),r.filter(O=>O.estado==="pendiente").length>0&&i.jsx(Zt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ms,{className:"w-5 h-5 text-blue-600"}),i.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100 font-medium",children:"Arrastra las citas pendientes y sultalas en la tarjeta del recolector para asignarlas automticamente"})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 sticky top-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Hd,{className:"w-5 h-5 text-indigo-600"}),"Nueva Cita"]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(bl,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{name:"clienteNombre",value:p.clienteNombre,onChange:_,placeholder:"Nombre del Cliente",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(vl,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{name:"clienteTelefono",value:p.clienteTelefono,onChange:_,placeholder:"Telfono (Opcional)",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsx("hr",{className:"border-slate-100 dark:border-slate-700"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Fa,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{name:"direccion",value:p.direccion,onChange:_,placeholder:"Direccin Completa (Calle, Casa, Apto)",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{name:"sector",value:p.sector,onChange:_,placeholder:"Sector / Ciudad",className:"w-full px-3 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"}),i.jsx("input",{name:"referencia",value:p.referencia,onChange:_,placeholder:"Referencia (Ej: Casa azul)",className:"w-full px-3 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]})]}),i.jsx("hr",{className:"border-slate-100 dark:border-slate-700"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Yl,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"date",name:"fechaPreferida",value:p.fechaPreferida,onChange:_,className:"w-full pl-10 pr-2 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Xo,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"time",name:"horaPreferida",value:p.horaPreferida,onChange:_,className:"w-full pl-10 pr-2 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Au,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("textarea",{name:"notas",value:p.notas,onChange:_,placeholder:"Notas adicionales (Ej: Cajas pesadas, Tocar timbre)",rows:"2",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]}),i.jsx("button",{type:"submit",disabled:t,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2",children:t?"Agendando...":i.jsxs(i.Fragment,{children:[i.jsx(en,{className:"w-5 h-5"}),"Agendar Cita"]})})]})]})}),i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Citas Agendadas"}),i.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold",children:["Total: ",r.length]})]}),i.jsx("div",{className:"grid gap-3 max-h-[calc(100vh-200px)] overflow-y-auto pr-2",children:r.length===0?i.jsx("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-dashed border-slate-300",children:i.jsx("p",{className:"text-slate-500",children:"No hay citas agendadas."})}):r.map(O=>{var D,I,V,R,B,F;return i.jsxs(Zt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},draggable:O.estado==="pendiente",onDragStart:ee=>A(ee,O),onDragEnd:j,className:`bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col gap-3 transition-all ${O.estado==="pendiente"?"cursor-grab active:cursor-grabbing hover:shadow-lg hover:scale-[1.02]":"opacity-75"}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:(D=O.cliente)==null?void 0:D.nombre}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium uppercase ${O.estado==="pendiente"?"bg-amber-100 text-amber-800":O.estado==="asignada"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:O.estado})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{className:"flex items-center gap-1",children:[i.jsx(Fa,{className:"w-3 h-3"}),(I=O.ubicacion)==null?void 0:I.direccion," ",((V=O.ubicacion)==null?void 0:V.sector)&&`(${O.ubicacion.sector})`]}),i.jsxs("p",{className:"flex items-center gap-1",children:[i.jsx(vl,{className:"w-3 h-3"}),((R=O.cliente)==null?void 0:R.telefono)||"N/A"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white flex items-center gap-1",children:[i.jsx(Yl,{className:"w-3 h-3 text-slate-400"}),(B=O.programacion)==null?void 0:B.fecha]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[i.jsx(Xo,{className:"w-3 h-3"}),((F=O.programacion)==null?void 0:F.hora)||"Por definir"]})]})]}),O.recolectorNombre&&i.jsxs("div",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded flex items-center gap-1 w-fit",children:[i.jsx(as,{className:"w-3 h-3"}),"Asignado a: ",O.recolectorNombre]})]},O.id)})})]}),i.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(cd,{className:"w-5 h-5 text-green-600"}),"Recolectores"]}),i.jsx("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold",children:a.length})]}),i.jsx("div",{className:"grid gap-3 max-h-[calc(100vh-200px)] overflow-y-auto pr-2",children:a.length===0?i.jsx("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-dashed border-slate-300",children:i.jsx("p",{className:"text-slate-500",children:"No hay recolectores activos"})}):a.map(O=>{var D;return i.jsxs(Zt.div,{onDragOver:I=>P(I,O.id),onDragLeave:U,onDrop:I=>G(I,O.id),className:`bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border-2 transition-all ${c===O.id?"border-green-500 bg-green-50 dark:bg-green-900/20 scale-105 shadow-lg":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white font-bold text-lg",children:(D=O.nombre)==null?void 0:D.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:O.nombre}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[i.jsx(as,{className:"w-3 h-3"}),O.vehiculo||"Sin vehculo"]})]})]}),c===O.id&&i.jsx(Zt.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-green-700 dark:text-green-400 mt-2 font-medium",children:"Suelta aqu para asignar"})]},O.id)})})]})]})]})},CC=()=>{const{userData:t}=fa(),[e,r]=S.useState(!0),[n,a]=S.useState([]),[s,o]=S.useState(null);S.useEffect(()=>{l();const u=setInterval(l,15e3);return()=>clearInterval(u)},[]);const l=async()=>{try{const u=await wt.get("/solicitudes?estado=pendiente");u.data.success&&a(u.data.data)}catch(u){console.error("Error cargando pool:",u)}finally{r(!1)}},c=async(u,d)=>{var h,p;if(confirm(`Ests seguro de que puedes recolectar en: ${d}?`)){o(u);try{(await wt.put(`/solicitudes/${u}/asignar`)).data.success&&(We.success('Solicitud asignada a ti! Ve a "Nueva Recoleccin" cuando llegues.'),a(b=>b.filter(w=>w.id!==u)))}catch(g){console.error("Error asignando:",g),We.error(((p=(h=g.response)==null?void 0:h.data)==null?void 0:p.error)||"Error al tomar la solicitud")}finally{o(null)}}};return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Fa,{className:"text-emerald-500"}),"Bolsa de Recolecciones"]}),i.jsx("p",{className:"text-slate-500",children:"Citas disponibles en tu zona. Tmalas antes que otro!"})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 px-4 py-2 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[i.jsx("span",{className:"text-emerald-700 dark:text-emerald-300 font-bold text-lg",children:n.length}),i.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 text-sm ml-2",children:"disponibles ahora"})]})]}),e?i.jsx("div",{className:"flex justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-emerald-500"})}):n.length===0?i.jsxs("div",{className:"text-center py-20 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-300 dark:border-slate-700",children:[i.jsx(Br,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700 dark:text-slate-300",children:"No hay recolecciones pendientes"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Reljate un poco, pronto caern ms."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.jsx(Nw,{children:n.map(u=>{var d,h,p,g,b,w;return i.jsxs(Zt.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-xl transition-shadow relative",children:[i.jsx("div",{className:"absolute top-0 right-0 bg-indigo-600 text-white text-xs font-bold px-3 py-1 rounded-bl-lg",children:((d=u.ubicacion)==null?void 0:d.sector)||"Zona General"}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-full text-indigo-600 dark:text-indigo-400",children:i.jsx(sy,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",children:(h=u.ubicacion)==null?void 0:h.direccion}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-ellipsis overflow-hidden",children:((p=u.ubicacion)==null?void 0:p.referencia)||"Sin referencia"})]})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(bl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:(g=u.cliente)==null?void 0:g.nombre})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(Yl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:(b=u.programacion)==null?void 0:b.fecha}),i.jsx(Xo,{size:16,className:"text-slate-400 ml-2"}),i.jsx("span",{className:"font-medium text-indigo-600 dark:text-indigo-400",children:((w=u.programacion)==null?void 0:w.hora)||"Flexible"})]}),u.notas&&i.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx(ms,{size:14,className:"flex-shrink-0 mt-0.5"}),i.jsx("span",{children:u.notas})]})]}),i.jsx("button",{onClick:()=>{var _;return c(u.id,(_=u.ubicacion)==null?void 0:_.direccion)},disabled:s===u.id,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 disabled:bg-slate-400 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2",children:s===u.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(en,{size:20}),"LO TOMO!"]})})]})]},u.id)})})})]})},Jut=()=>{const{userData:t}=fa(),[e,r]=S.useState(!0),[n,a]=S.useState([]),[s,o]=S.useState([]),[l,c]=S.useState("pendiente"),[u,d]=S.useState(!1),[h,p]=S.useState(null),[g,b]=S.useState(null),[w,_]=S.useState(!1),[N,A]=S.useState({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:"",horaPreferida:"09:00",notas:""});S.useEffect(()=>{j(),P();const F=setInterval(()=>{j(),P()},3e4);return()=>clearInterval(F)},[l]),S.useEffect(()=>{console.log(" Estado actual:",{solicitudes:n.length,solicitudesPendientes:n.filter(F=>F.estado==="pendiente").length,recolectores:s.length,filtroActual:l})},[n,s,l]);const j=async()=>{try{const F=l!=="todas"?`?estado=${l}`:"",ee=await wt.get(`/solicitudes${F}`);ee.data.success&&a(ee.data.data)}catch(F){console.error("Error cargando solicitudes:",F),We.error("Error al cargar solicitudes")}finally{r(!1)}},P=async()=>{try{const F=await wt.get("/solicitudes/recolectores");F.data.success&&o(F.data.data)}catch(F){console.error("Error cargando recolectores:",F)}},U=(F,ee)=>{p(ee),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/html",F.target),F.target.style.opacity="0.5"},G=F=>{F.target.style.opacity="1",p(null),b(null)},O=(F,ee)=>{F.preventDefault(),F.dataTransfer.dropEffect="move",b(ee)},D=()=>{b(null)},I=async(F,ee)=>{var Z,ce,ne;if(F.preventDefault(),F.stopPropagation(),!!h){b(null),_(!0);try{(await wt.put(`/solicitudes/${h.id}/asignar`,{recolectorId:ee})).data.success&&(We.success(` ${(Z=h.cliente)==null?void 0:Z.nombre} asignado correctamente`),j())}catch(ae){console.error("Error asignando:",ae),We.error(((ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:ne.error)||"Error al asignar solicitud")}finally{_(!1),p(null)}}},V=async F=>{var ee,Z;if(F.preventDefault(),!N.clienteNombre||!N.direccion){We.error("Nombre del cliente y direccin son obligatorios");return}try{(await wt.post("/solicitudes",N)).data.success&&(We.success(" Solicitud creada exitosamente"),d(!1),A({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:"",horaPreferida:"09:00",notas:""}),j())}catch(ce){console.error("Error creando solicitud:",ce),We.error(((Z=(ee=ce.response)==null?void 0:ee.data)==null?void 0:Z.error)||"Error al crear solicitud")}},R=F=>{const ee={pendiente:"bg-yellow-100 text-yellow-800 border-yellow-200",asignada:"bg-blue-100 text-blue-800 border-blue-200",asignada_pendiente:"bg-purple-100 text-purple-800 border-purple-200",completada:"bg-green-100 text-green-800 border-green-200",cancelada:"bg-red-100 text-red-800 border-red-200"};return ee[F]||ee.pendiente},B=n.filter(F=>F.estado==="pendiente");return i.jsxs("div",{className:"p-6 max-w-[1800px] mx-auto",children:[i.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Br,{className:"text-indigo-500"}),"Gestin de Solicitudes - Drag & Drop"]}),i.jsx("p",{className:"text-slate-500",children:"Arrastra solicitudes y sultalas en los recolectores para asignarlas"})]}),i.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all",children:[i.jsx(F3e,{size:20}),"Nueva Solicitud"]})]}),B.length>0&&s.length>0&&i.jsx("div",{className:"mb-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:i.jsx(Cz,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-1",children:" Cmo usar el Drag & Drop"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[i.jsx("strong",{children:"1."})," Haz clic y mantn presionado sobre una solicitud (izquierda)",i.jsx("br",{}),i.jsx("strong",{children:"2."})," Arrastra hacia un recolector (derecha)",i.jsx("br",{}),i.jsx("strong",{children:"3."}),' Suelta cuando veas el mensaje " Suelta aqu para asignar"']})]})]})}),i.jsx("div",{className:"mb-6 flex gap-2 flex-wrap",children:["pendiente","asignada","completada","todas"].map(F=>i.jsxs("button",{onClick:()=>c(F),className:`px-4 py-2 rounded-lg font-medium transition-all ${l===F?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[F.charAt(0).toUpperCase()+F.slice(1),F==="pendiente"&&B.length>0&&i.jsx("span",{className:"ml-2 bg-white text-indigo-600 px-2 py-0.5 rounded-full text-xs font-bold",children:B.length})]},F))}),e?i.jsx("div",{className:"flex justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-2 border-indigo-200 dark:border-slate-600 shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-indigo-600 rounded-xl",children:i.jsx(c4e,{size:24,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Solicitudes Pendientes"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Arrastra para asignar  ",B.length," disponibles"]})]})]}),B.length===0?i.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-800/50 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600",children:[i.jsx(Br,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"No hay solicitudes pendientes"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Crea una nueva solicitud para comenzar"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[800px] overflow-y-auto pr-2",children:i.jsx(Nw,{children:B.map(F=>{var ee,Z,ce,ne,ae,me;return i.jsxs(Zt.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},draggable:!0,onDragStart:Ee=>U(Ee,F),onDragEnd:G,className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border-2 border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-2xl hover:scale-[1.02] transition-all cursor-grab active:cursor-grabbing relative group",children:[i.jsx("div",{className:"absolute top-2 left-2 opacity-40 group-hover:opacity-100 transition-opacity",children:i.jsx(Cz,{size:20,className:"text-slate-400"})}),i.jsx("div",{className:`absolute top-0 right-0 text-xs font-bold px-3 py-1 rounded-bl-lg border ${R(F.estado)}`,children:F.estado}),i.jsxs("div",{className:"p-5 pt-8",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[i.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:i.jsx(sy,{size:20})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-base text-slate-800 dark:text-white line-clamp-2",children:(ee=F.ubicacion)==null?void 0:ee.direccion}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:((Z=F.ubicacion)==null?void 0:Z.sector)||"Sin sector"})]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx(bl,{size:14,className:"text-slate-400"}),i.jsx("span",{className:"font-medium",children:(ce=F.cliente)==null?void 0:ce.nombre})]}),((ne=F.cliente)==null?void 0:ne.telefono)&&i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx(vl,{size:14,className:"text-slate-400"}),i.jsx("span",{className:"text-xs",children:F.cliente.telefono})]}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx(Yl,{size:14,className:"text-slate-400"}),i.jsx("span",{className:"text-xs",children:(ae=F.programacion)==null?void 0:ae.fecha}),i.jsx(Xo,{size:14,className:"text-slate-400 ml-1"}),i.jsx("span",{className:"text-xs font-medium text-indigo-600 dark:text-indigo-400",children:((me=F.programacion)==null?void 0:me.hora)||"Flexible"})]}),F.notas&&i.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-700 bg-amber-50 dark:bg-amber-900/20 p-2 rounded mt-2",children:[i.jsx(ms,{size:12,className:"flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"line-clamp-2",children:F.notas})]})]})]})]},F.id)})})})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-2 border-emerald-200 dark:border-slate-600 shadow-xl sticky top-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-emerald-600 rounded-xl",children:i.jsx(cd,{size:24,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Recolectores Activos"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Suelta aqu para asignar  ",s.length]})]})]}),s.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800/50 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600",children:[i.jsx(cd,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No hay recolectores activos"})]}):i.jsx("div",{className:"space-y-4 max-h-[800px] overflow-y-auto pr-2",children:s.map(F=>{const ee=g===F.id;return i.jsxs(Zt.div,{onDragOver:Z=>O(Z,F.id),onDragLeave:D,onDrop:Z=>I(Z,F.id),animate:{scale:ee?1.05:1,borderColor:ee?"#10b981":void 0},className:`
                                                    bg-white dark:bg-slate-800 rounded-xl p-5 border-3 transition-all shadow-lg
                                                    ${ee?"border-emerald-500 shadow-2xl shadow-emerald-200 dark:shadow-emerald-900/50 bg-emerald-50 dark:bg-emerald-900/20":"border-slate-200 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-600"}
                                                `,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:`p-3 rounded-full ${ee?"bg-emerald-500":"bg-emerald-100 dark:bg-emerald-900/50"}`,children:i.jsx(as,{size:24,className:ee?"text-white":"text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:F.nombre}),F.telefono&&i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[i.jsx(vl,{size:12}),F.telefono]})]})]}),F.zonaAsignada&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 px-3 py-1.5 rounded-lg",children:[i.jsx(Fa,{size:12,className:"text-emerald-600 dark:text-emerald-400"}),i.jsxs("span",{children:["Zona: ",F.zonaAsignada]})]}),ee&&i.jsx(Zt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-center text-sm font-bold text-emerald-700 dark:text-emerald-300 bg-emerald-100 dark:bg-emerald-900/30 py-2 rounded-lg",children:" Suelta aqu para asignar"})]},F.id)})})]})})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs(Zt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full p-6 my-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Nueva Solicitud de Recoleccin"}),i.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Jn,{size:24})})]}),i.jsxs("form",{onSubmit:V,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nombre del Cliente *"}),i.jsx("input",{type:"text",required:!0,value:N.clienteNombre,onChange:F=>A({...N,clienteNombre:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telfono"}),i.jsx("input",{type:"tel",value:N.clienteTelefono,onChange:F=>A({...N,clienteTelefono:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Direccin *"}),i.jsx("input",{type:"text",required:!0,value:N.direccion,onChange:F=>A({...N,direccion:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Sector"}),i.jsx("input",{type:"text",value:N.sector,onChange:F=>A({...N,sector:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Referencia"}),i.jsx("input",{type:"text",value:N.referencia,onChange:F=>A({...N,referencia:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha Preferida"}),i.jsx("input",{type:"date",value:N.fechaPreferida,onChange:F=>A({...N,fechaPreferida:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Hora Preferida"}),i.jsx("input",{type:"time",value:N.horaPreferida,onChange:F=>A({...N,horaPreferida:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Notas"}),i.jsx("textarea",{value:N.notas,onChange:F=>A({...N,notas:F.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-3 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white font-semibold rounded-lg transition-all",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all",children:"Crear Solicitud"})]})]})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 shadow-2xl flex items-center gap-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"}),i.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:"Asignando..."})]})})]})},edt=()=>{const{userData:t}=fa(),e=$s(),[r,n]=S.useState(!0),[a,s]=S.useState([]);S.useEffect(()=>{o();const u=setInterval(o,15e3);return()=>clearInterval(u)},[]);const o=async()=>{try{const u=await wt.get(`/solicitudes?recolectorId=${t.uid}&estado=asignada`);u.data.success&&s(u.data.data)}catch(u){console.error("Error cargando mis solicitudes:",u)}finally{n(!1)}},l=u=>{e("/recolecciones/nueva",{state:{solicitud:u}})},c=u=>{const d=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(u)}`;window.open(d,"_blank")};return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Br,{className:"text-indigo-500"}),"Mis Solicitudes Asignadas"]}),i.jsx("p",{className:"text-slate-500",children:"Recolecciones que la secretaria te ha asignado"})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-lg border border-indigo-100 dark:border-indigo-800",children:[i.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-bold text-lg",children:a.length}),i.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 text-sm ml-2",children:"asignadas"})]})]}),r?i.jsx("div",{className:"flex justify-center py-20",children:i.jsx(bp,{className:"animate-spin w-12 h-12 text-indigo-500"})}):a.length===0?i.jsxs("div",{className:"text-center py-20 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-300 dark:border-slate-700",children:[i.jsx(Br,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700 dark:text-slate-300",children:"No tienes solicitudes asignadas"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Cuando la secretaria te asigne una recoleccin, aparecer aqu."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.jsx(Nw,{children:a.map(u=>{var d,h,p,g,b,w,_,N;return i.jsxs(Zt.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-xl transition-shadow",children:[i.jsx("div",{className:"bg-indigo-600 text-white text-center py-2 text-xs font-bold",children:" ASIGNADA - Lista para recolectar"}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-full text-indigo-600 dark:text-indigo-400",children:i.jsx(Fa,{size:24})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-2",children:((d=u.ubicacion)==null?void 0:d.direccion)||((h=u.cliente)==null?void 0:h.direccion)}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:((p=u.ubicacion)==null?void 0:p.sector)||"Sin sector"})]})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(bl,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"font-medium",children:(g=u.cliente)==null?void 0:g.nombre})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(vl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:((b=u.cliente)==null?void 0:b.telefono)||"Sin telfono"})]}),((w=u.cliente)==null?void 0:w.email)&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(uh,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"text-xs",children:u.cliente.email})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(Yl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:(_=u.programacion)==null?void 0:_.fecha}),i.jsx(Xo,{size:16,className:"text-slate-400 ml-2"}),i.jsx("span",{className:"font-medium text-indigo-600 dark:text-indigo-400",children:((N=u.programacion)==null?void 0:N.hora)||"Flexible"})]}),u.notas&&i.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx(ms,{size:14,className:"flex-shrink-0 mt-0.5"}),i.jsx("span",{children:u.notas})]})]}),u.fotos&&u.fotos.length>0&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3 mt-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Kf,{size:16,className:"text-indigo-600"}),i.jsxs("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Fotos del Cliente (",u.fotos.length,")"]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.fotos.slice(0,3).map((A,j)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:A,alt:`Foto ${j+1}`,className:"w-full h-20 object-cover rounded-lg border border-slate-200 dark:border-slate-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.open(A,"_blank")}),i.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:i.jsx($d,{className:"text-white",size:20})})]},j))}),u.fotos.length>3&&i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["+",u.fotos.length-3," foto(s) ms (vers todas al iniciar)"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("button",{onClick:()=>{var A,j;return c(((A=u.ubicacion)==null?void 0:A.direccion)||((j=u.cliente)==null?void 0:j.direccion))},className:"py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2 text-sm",children:[i.jsx(sy,{size:18}),"Ver Mapa"]}),i.jsxs("button",{onClick:()=>l(u),className:"py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2 text-sm",children:[i.jsx(en,{size:18}),"Iniciar"]})]})]})]},u.id)})})})]})};function tdt(){const[t,e]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[o,l]=S.useState(null),[c,u]=S.useState(null),[d,h]=S.useState(!1);S.useEffect(()=>{p()},[]);const p=async()=>{s(!0);try{await Promise.all([g(),b()])}catch(D){console.error(D),We.error("Error cargando datos")}finally{s(!1)}},g=async()=>{const D=await wt.get("/companies");D.data.success&&e(D.data.data||[])},b=async()=>{try{const D=await wt.get("/whatsapp/instances");n(D.data)}catch(D){console.error("Error fetching instances:",D),n([])}},w=D=>`company_${D.nombre.toLowerCase().replace(/[^a-z0-9]/g,"_")}_${D.id}`,_=D=>{var B,F;const I=w(D),V=r.find(ee=>{var Z;return ee.name===I||((Z=ee.instance)==null?void 0:Z.instanceName)===I});return V?V.connectionStatus==="open"||((B=V.instance)==null?void 0:B.state)==="open"||((F=V.instance)==null?void 0:F.status)==="open"?"connected":"disconnected":"not_created"},N=async D=>{const I=w(D);l(D),u(null),h(!0);const V={instanceName:I,token:"secret_token_"+D.id,qrcode:!0,integration:"WHATSAPP-BAILEYS"};try{const R=await wt.post("/whatsapp/instance",V);R.data.qrcode&&R.data.qrcode.base64?(u(R.data.qrcode.base64),j(I)):A(I)}catch(R){if(R.response&&R.response.status===403){console.warn("Instancia Zombie detectada. Eliminando y recreando...",R),We.loading("Reiniciando instancia antigua...");try{await wt.delete(`/whatsapp/instance/${I}`),await new Promise(F=>setTimeout(F,4e3));const B=await wt.post("/whatsapp/instance",V);We.dismiss(),B.data.qrcode&&B.data.qrcode.base64?(u(B.data.qrcode.base64),j(I),We.success("Instancia reiniciada correctamente")):(await new Promise(F=>setTimeout(F,2e3)),A(I))}catch(B){console.error("Fallo al recrear:",B),We.dismiss(),We.error("No se pudo reiniciar la instancia. Intenta esperar unos segundos.")}}else console.warn("Error creando, intentando conectar...",R),A(I)}},A=async(D,I=0)=>{var V,R,B;try{const ee=(await wt.get(`/whatsapp/instance/${D}/connect`)).data;ee.base64||(V=ee.qrcode)!=null&&V.base64?(u(ee.base64||ee.qrcode.base64),j(D)):((R=ee.instance)==null?void 0:R.state)==="open"||((B=ee.instance)==null?void 0:B.status)==="open"?(We.success("Esta instancia ya estaba conectada!"),U(),b()):I<10?(console.log(`No se recibi QR, reintentando (${I+1}/10)...`),setTimeout(()=>A(D,I+1),3e3)):(console.warn("Respuesta connect inesperada (Final):",ee),We.warning("No se pudo obtener el QR tras varios intentos. La API puede estar lenta."),j(D))}catch(F){console.error("Error conectando:",F),I<10?setTimeout(()=>A(D,I+1),3e3):We.error("Error conectando: "+F.message)}},j=D=>{let I=0;const V=40,R=setInterval(async()=>{var B,F,ee;if(I++,I>V){clearInterval(R),We.error('Tiempo de espera agotado. Por favor intenta "Forzar Reinicio".');return}try{const ce=(await wt.get(`/whatsapp/instance/${D}/connect`)).data;(ce.base64||(B=ce.qrcode)!=null&&B.base64)&&u(ce.base64||ce.qrcode.base64),(((F=ce.instance)==null?void 0:F.state)==="open"||((ee=ce.instance)==null?void 0:ee.status)==="open")&&(clearInterval(R),We.success(`${o==null?void 0:o.nombre} conectado exitosamente!`),U(),b())}catch(Z){console.warn("Polling error",Z)}},3e3)},P=async D=>{if(!confirm(`Eliminar la conexin de WhatsApp de ${D.nombre}? Dejarn de enviarse mensajes.`))return;const I=w(D);try{await wt.delete(`/whatsapp/instance/${I}`),We.success("Instancia eliminada"),b()}catch{We.error("Error eliminando instancia")}},U=()=>{l(null),u(null),h(!1)},G=t.filter(D=>["automatizado","smart"].includes(D.plan)),O=t.filter(D=>!["automatizado","smart"].includes(D.plan));return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx($re,{className:"text-green-600"})," Gestin Multi-Tenant WhatsApp"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Administra las conexiones de WhatsApp para clientes con Plan Automatizado (75k) o Superior."})]}),i.jsx("button",{onClick:p,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition",children:i.jsx(dh,{size:20,className:a?"animate-spin text-indigo-600":"text-slate-500"})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:i.jsxs("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Compaas Habilitadas (",G.length,")"]})}),i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Compaa"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Plan"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado WhatsApp"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:[a&&i.jsx("tr",{children:i.jsx("td",{colSpan:"4",className:"px-6 py-10 text-center",children:"Cargando datos..."})}),!a&&G.map(D=>{const I=_(D);return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-10 w-10 flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:i.jsx(tp,{size:20})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:D.nombre}),i.jsx("div",{className:"text-sm text-slate-500",children:D.adminEmail})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${D.plan==="smart"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:D.plan.toUpperCase()})}),i.jsxs("td",{className:"px-6 py-4",children:[I==="connected"&&i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:[i.jsx("span",{className:"w-2 h-2 mr-1 bg-green-500 rounded-full animate-pulse"}),"Conectado"]}),I==="disconnected"&&i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:[i.jsx("span",{className:"w-2 h-2 mr-1 bg-yellow-500 rounded-full"}),"Requiere Escaneo"]}),I==="not_created"&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-300",children:"Sin Configurar"})]}),i.jsx("td",{className:"px-6 py-4 text-right space-x-2",children:I==="connected"?i.jsx("button",{onClick:()=>P(D),className:"text-red-500 hover:text-red-700 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",title:"Desconectar / Eliminar",children:i.jsx(yp,{size:18})}):i.jsxs("button",{onClick:()=>N(D),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[i.jsx(R4e,{size:16,className:"mr-1.5"}),I==="disconnected"?"Escanear QR":"Crear & Conectar"]})})]},D.id)})]})]})]}),O.length>0&&i.jsx("div",{className:"opacity-60",children:i.jsxs("h3",{className:"text-sm font-medium text-slate-500 mb-2 px-2",children:["Compaas sin acceso a Automation (Plan Operativo) - ",O.length]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:["Conectar ",o.nombre]}),i.jsx("button",{onClick:U,className:"text-slate-400 hover:text-slate-600",children:i.jsx("span",{className:"text-2xl",children:""})})]}),i.jsx("div",{className:"p-8 flex flex-col items-center",children:c?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),i.jsx("img",{src:c,alt:"QR",className:"relative w-64 h-64 rounded-lg bg-white p-2 shadow-sm"})]}),i.jsxs("p",{className:"mt-6 text-center text-slate-600 dark:text-slate-300 text-sm",children:["Abre WhatsApp  Dispositivos Vinculados  ",i.jsx("strong",{children:"Escanear Cdigo"})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-green-600 bg-green-50 px-3 py-1 rounded-full animate-pulse",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Esperando conexin..."]})]}):i.jsxs("div",{className:"py-12 flex flex-col items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mb-4"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Conectando con Evolution API..."}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Esto puede tomar hasta 30 segundos"}),d&&i.jsx("button",{onClick:()=>{confirm("Reiniciar conexin? Esto borrar la sesin actual.")&&N(o)},className:"mt-6 text-xs text-red-500 hover:text-red-700 underline",children:"Tarda demasiado? Forzar Reinicio"})]})})]})})]})}const kC=()=>{var R,B;const{user:t}=fa(),[e,r]=S.useState(!1),[n,a]=S.useState([]),[s,o]=S.useState([]),[l,c]=S.useState(!0),[u,d]=S.useState({busqueda:"",contenedor:"",fechaInicio:"",fechaFin:"",tipo:"",estado:"",repartidor:"",zona:""}),[h,p]=S.useState(null),[g,b]=S.useState(!1),[w,_]=S.useState(!1),[N,A]=S.useState(null);S.useEffect(()=>{j()},[t]);const j=async()=>{r(!0);try{const F=await t.getIdToken(),ee=await fetch("https://proyecto-envios-production.up.railway.app/api/api/rutas/historial",{headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(ee.ok){const Z=await ee.json();a(Z.rutas||[]),o(Z.rutas||[])}}catch(F){console.error("Error cargando historial:",F)}finally{r(!1)}};S.useEffect(()=>{P()},[u,n]);const P=()=>{let F=[...n];if(u.busqueda){const ee=u.busqueda.toLowerCase();F=F.filter(Z=>{var ce,ne,ae,me;return((ce=Z.nombre)==null?void 0:ce.toLowerCase().includes(ee))||((ne=Z.id)==null?void 0:ne.toLowerCase().includes(ee))||((ae=Z.repartidorNombre)==null?void 0:ae.toLowerCase().includes(ee))||((me=Z.zona)==null?void 0:me.toLowerCase().includes(ee))})}u.contenedor&&(F=F.filter(ee=>{var Z;return(Z=ee.numeroContenedor)==null?void 0:Z.toLowerCase().includes(u.contenedor.toLowerCase())})),u.fechaInicio&&(F=F.filter(ee=>{const Z=new Date(ee.fechaCreacion||ee.createdAt),ce=new Date(u.fechaInicio);return Z>=ce})),u.fechaFin&&(F=F.filter(ee=>{const Z=new Date(ee.fechaCreacion||ee.createdAt),ce=new Date(u.fechaFin);return ce.setHours(23,59,59),Z<=ce})),u.tipo&&(F=F.filter(ee=>ee.tipo===u.tipo)),u.estado&&(F=F.filter(ee=>ee.estado===u.estado)),u.repartidor&&(F=F.filter(ee=>{var Z;return(Z=ee.repartidorNombre)==null?void 0:Z.toLowerCase().includes(u.repartidor.toLowerCase())})),u.zona&&(F=F.filter(ee=>{var Z;return(Z=ee.zona)==null?void 0:Z.toLowerCase().includes(u.zona.toLowerCase())})),o(F)},U=()=>{d({busqueda:"",contenedor:"",fechaInicio:"",fechaFin:"",tipo:"",estado:"",repartidor:"",zona:""})},G=(F,ee)=>{d(Z=>({...Z,[F]:ee}))},O=F=>{p(F),b(!0)},D=F=>{A(F),_(!0)},I=F=>({pendiente:"bg-yellow-100 text-yellow-800",en_curso:"bg-blue-100 text-blue-800",en_ruta:"bg-indigo-100 text-indigo-800",cargada:"bg-purple-100 text-purple-800",completada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"})[F]||"bg-gray-100 text-gray-800",V=F=>F==="recoleccion"?i.jsx(Br,{className:"h-5 w-5 text-indigo-600"}):i.jsx(as,{className:"h-5 w-5 text-emerald-600"});return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 p-6",children:[i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:" Historial de Rutas"}),i.jsx("p",{className:"text-slate-600",children:"Consulta y filtra el historial completo de rutas, contenedores y fotos"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 mb-6 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-purple-50 cursor-pointer",onClick:()=>c(!l),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ure,{className:"h-6 w-6 text-indigo-600"}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Filtros Avanzados"}),i.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:[s.length," resultados"]})]}),l?i.jsx(P3e,{className:"h-5 w-5 text-slate-600"}):i.jsx(Fre,{className:"h-5 w-5 text-slate-600"})]}),l&&i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Bsqueda General"}),i.jsxs("div",{className:"relative",children:[i.jsx(qd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),i.jsx("input",{type:"text",value:u.busqueda,onChange:F=>G("busqueda",F.target.value),placeholder:"Buscar por cdigo, repartidor, zona...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"N Contenedor"}),i.jsx("input",{type:"text",value:u.contenedor,onChange:F=>G("contenedor",F.target.value),placeholder:"EMI-CNT-XXXX",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fecha Inicio"}),i.jsx("input",{type:"date",value:u.fechaInicio,onChange:F=>G("fechaInicio",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fecha Fin"}),i.jsx("input",{type:"date",value:u.fechaFin,onChange:F=>G("fechaFin",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Ruta"}),i.jsxs("select",{value:u.tipo,onChange:F=>G("tipo",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"recoleccion",children:"Recoleccin"}),i.jsx("option",{value:"entrega",children:"Entrega"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado"}),i.jsxs("select",{value:u.estado,onChange:F=>G("estado",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"pendiente",children:"Pendiente"}),i.jsx("option",{value:"en_curso",children:"En Curso"}),i.jsx("option",{value:"en_ruta",children:"En Ruta"}),i.jsx("option",{value:"cargada",children:"Cargada"}),i.jsx("option",{value:"completada",children:"Completada"}),i.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Repartidor"}),i.jsx("input",{type:"text",value:u.repartidor,onChange:F=>G("repartidor",F.target.value),placeholder:"Nombre del repartidor",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Zona"}),i.jsx("input",{type:"text",value:u.zona,onChange:F=>G("zona",F.target.value),placeholder:"Zona de entrega",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:[i.jsx(Jn,{className:"h-5 w-5"}),"Limpiar Filtros"]})})]})]}),e?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):s.length===0?i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-12 text-center",children:[i.jsx(Au,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 text-lg",children:"No se encontraron rutas con los filtros aplicados"})]}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(F=>{var ee,Z;return i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6 hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>O(F),children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl",children:V(F.tipo)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800",children:F.nombre||F.id}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${I(F.estado)}`,children:(ee=F.estado)==null?void 0:ee.replace("_"," ").toUpperCase()}),F.numeroContenedor&&i.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:[" ",F.numeroContenedor]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(bl,{className:"h-4 w-4"}),F.repartidorNombre||"Sin asignar"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Fa,{className:"h-4 w-4"}),F.zona||"Sin zona"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Yl,{className:"h-4 w-4"}),new Date(F.fechaCreacion||F.createdAt).toLocaleDateString("es-DO")]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Br,{className:"h-4 w-4"}),((Z=F.facturas)==null?void 0:Z.length)||0," paquetes"]})]}),F.fotos&&F.fotos.length>0&&i.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-indigo-600",children:[i.jsx($d,{className:"h-4 w-4"}),F.fotos.length," foto",F.fotos.length>1?"s":""," disponible",F.fotos.length>1?"s":""]})]})]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[i.jsx(Tu,{className:"h-5 w-5"}),"Ver Detalles"]})]})},F.id)})})]}),g&&h&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:h.nombre||h.id}),i.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"Detalles completos de la ruta"})]}),i.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:i.jsx(Jn,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Informacin General"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-xl",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Tipo"}),i.jsx("p",{className:"font-medium text-slate-800",children:h.tipo==="recoleccion"?"Recoleccin":"Entrega"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Estado"}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${I(h.estado)}`,children:(R=h.estado)==null?void 0:R.replace("_"," ").toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Repartidor"}),i.jsx("p",{className:"font-medium text-slate-800",children:h.repartidorNombre||"Sin asignar"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Zona"}),i.jsx("p",{className:"font-medium text-slate-800",children:h.zona||"Sin zona"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Fecha Creacin"}),i.jsx("p",{className:"font-medium text-slate-800",children:new Date(h.fechaCreacion||h.createdAt).toLocaleString("es-DO")})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Paquetes"}),i.jsx("p",{className:"font-medium text-slate-800",children:((B=h.facturas)==null?void 0:B.length)||0})]}),h.numeroContenedor&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"N Contenedor"}),i.jsx("p",{className:"font-medium text-indigo-600",children:h.numeroContenedor})]})]})]}),h.facturas&&h.facturas.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Paquetes en la Ruta"}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:h.facturas.map((F,ee)=>i.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800",children:F.codigoTracking||`Paquete ${ee+1}`}),F.destinatario&&i.jsx("p",{className:"text-sm text-slate-600",children:F.destinatario.nombre})]}),F.estadoGeneral&&i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(F.estadoGeneral)}`,children:F.estadoGeneral.replace("_"," ")})]},ee))})]}),h.fotos&&h.fotos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Fotos de la Ruta"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.fotos.map((F,ee)=>i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>D(F),children:[i.jsx("img",{src:F.url||F,alt:`Foto ${ee+1}`,className:"w-full h-32 object-cover rounded-lg border border-slate-200"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:i.jsx(Tu,{className:"h-8 w-8 text-white opacity-0 group-hover:opacity-100 transition-all"})}),F.descripcion&&i.jsx("p",{className:"text-xs text-slate-600 mt-1",children:F.descripcion})]},ee))})]}),h.historial&&h.historial.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Historial de Eventos"}),i.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:h.historial.map((F,ee)=>i.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[i.jsx(Xo,{className:"h-5 w-5 text-indigo-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-slate-800",children:F.descripcion||F.accion}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(F.fecha).toLocaleString("es-DO")})]})]},ee))})]}),(h.notas||h.notasCargador||h.notasRepartidor)&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Notas"}),i.jsxs("div",{className:"space-y-2",children:[h.notas&&i.jsxs("div",{className:"bg-amber-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-medium text-amber-900 mb-1",children:"Notas Generales:"}),i.jsx("p",{className:"text-sm text-amber-800",children:h.notas})]}),h.notasCargador&&i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Notas del Cargador:"}),i.jsx("p",{className:"text-sm text-blue-800",children:h.notasCargador})]}),h.notasRepartidor&&i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Notas del Repartidor:"}),i.jsx("p",{className:"text-sm text-green-800",children:h.notasRepartidor})]})]})]})]})]})}),w&&N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:()=>_(!1),children:i.jsxs("div",{className:"relative max-w-5xl w-full",children:[i.jsx("button",{onClick:()=>_(!1),className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors z-10",children:i.jsx(Jn,{className:"h-6 w-6 text-white"})}),i.jsx("img",{src:N.url||N,alt:"Foto ampliada",className:"w-full h-auto rounded-xl shadow-2xl",onClick:F=>F.stopPropagation()}),N.descripcion&&i.jsx("div",{className:"mt-4 bg-white/10 backdrop-blur-sm p-4 rounded-xl",children:i.jsx("p",{className:"text-white text-center",children:N.descripcion})})]})})]})},qg={RFID_ZEBRA:"rfid_zebra_automatic",BARCODE_MANUAL:"barcode_manual_scanner"},nX=[{value:"munbyn",label:"MUNBYN",precio:60},{value:"netum",label:"NETUM",precio:35},{value:"honeywell",label:"Honeywell",precio:120},{value:"zebra_scanner",label:"Zebra Scanner",precio:200},{value:"otro",label:"Otro",precio:0}],aX=[{value:"munbyn",label:"MUNBYN",precio:140},{value:"netum",label:"NETUM",precio:90},{value:"zebra",label:"Zebra",precio:350},{value:"dymo",label:"DYMO",precio:250},{value:"brother",label:"Brother",precio:180},{value:"otro",label:"Otro",precio:0}],rdt=()=>{var me,Ee,ye,H,Y,X,re,se,ke,Ce,xe,Ie,He,Ue;const[t,e]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState(null),[o,l]=S.useState(!1),[c,u]=S.useState(!1),[d,h]=S.useState(!1),[p,g]=S.useState(!1),[b,w]=S.useState(""),[_,N]=S.useState(""),[A,j]=S.useState({marca:"munbyn",modelo:"",nombre:"",ubicacion:"",conexion:"wireless",precio:60}),[P,U]=S.useState({marca:"netum",modelo:"",nombre:"",ubicacion:"",conexion:"usb",precio:90}),[G,O]=S.useState(!1),[D,I]=S.useState({nombre:"Etiquetas Adhesivas",tipo:"etiquetas",cantidad:1,costoUnitario:10,descripcion:"Rollo de etiquetas (1000 u)"});S.useEffect(()=>{V()},[]),S.useEffect(()=>{r&&R(r.id)},[r]);const V=async()=>{try{l(!0);const Me=await wt.get("/companies");Me.data.success&&e(Me.data.data)}catch(Me){console.error("Error cargando compaas:",Me),We.error("Error al cargar compaas")}finally{l(!1)}},R=async Me=>{try{l(!0);const Be=await wt.get(`/hardware/${Me}`);Be.data.success&&s(Be.data.data)}catch(Be){console.error("Error cargando configuracin:",Be),We.error("Error al cargar configuracin de hardware")}finally{l(!1)}},B=async()=>{var Me,Be;if(!(!r||!b))try{l(!0);const be=await wt.post(`/hardware/${r.id}/cambiar-sistema`,{nuevoSistema:b,motivo:_});be.data.success&&(We.success(be.data.message),await R(r.id),u(!1),w(""),N(""))}catch(be){console.error("Error cambiando sistema:",be),We.error(((Be=(Me=be.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al cambiar sistema")}finally{l(!1)}},F=async()=>{var Me,Be;if(!r||!A.nombre){We.error("Completa todos los campos requeridos");return}try{l(!0),(await wt.post(`/hardware/${r.id}/scanners`,A)).data.success&&(We.success("Scanner agregado exitosamente"),await R(r.id),h(!1),j({marca:"munbyn",modelo:"",nombre:"",ubicacion:"",conexion:"wireless",precio:60}))}catch(be){console.error("Error agregando scanner:",be),We.error(((Be=(Me=be.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al agregar scanner")}finally{l(!1)}},ee=async()=>{var Me,Be;if(!r||!P.nombre){We.error("Completa todos los campos requeridos");return}try{l(!0),(await wt.post(`/hardware/${r.id}/impresoras`,P)).data.success&&(We.success("Impresora agregada exitosamente"),await R(r.id),g(!1),U({marca:"netum",modelo:"",nombre:"",ubicacion:"",conexion:"usb",precio:90}))}catch(be){console.error("Error agregando impresora:",be),We.error(((Be=(Me=be.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al agregar impresora")}finally{l(!1)}},Z=async()=>{var Me,Be;if(!r||!D.nombre){We.error("Completa todos los campos");return}try{l(!0),(await wt.post(`/hardware/${r.id}/consumibles`,D)).data.success&&(We.success("Consumible agregado exitosamente"),await R(r.id),O(!1),I({nombre:"Etiquetas Adhesivas",tipo:"etiquetas",cantidad:1,costoUnitario:10,descripcion:"Rollo de etiquetas (1000 u)"}))}catch(be){console.error("Error agregando consumible:",be),We.error(((Be=(Me=be.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al agregar consumible")}finally{l(!1)}},ce=async(Me,Be)=>{if(confirm(`Eliminar este ${Be}?`))try{l(!0),(await wt.delete(`/hardware/${r.id}/dispositivos/${Me}?tipo=${Be}`)).data.success&&(We.success(`${Be==="scanner"?"Scanner":"Impresora"} eliminado`),await R(r.id))}catch(be){console.error("Error eliminando dispositivo:",be),We.error("Error al eliminar dispositivo")}finally{l(!1)}},ne=async()=>{if(r)try{l(!0);const Me=!a.enabled;(await wt.patch(`/hardware/${r.id}/toggle`,{enabled:Me})).data.success&&(We.success(Me?"Sistema activado":"Sistema desactivado"),await R(r.id))}catch(Me){console.error("Error cambiando estado:",Me),We.error("Error al cambiar estado del sistema")}finally{l(!1)}},ae=(a==null?void 0:a.sistemaActivo)===qg.RFID_ZEBRA?"Zebra RFID Automtico":"Scanners Manuales";return i.jsx("div",{className:"h-full overflow-auto bg-slate-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[i.jsx(RR,{className:"text-indigo-600",size:32}),"Gestin de Hardware"]}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Configura sistemas Zebra RFID y Scanners Manuales"})]}),r&&a&&i.jsxs("button",{onClick:ne,className:`px-6 py-3 rounded-lg font-semibold transition flex items-center gap-2 ${a.enabled?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:[a.enabled?i.jsx(en,{size:20}):i.jsx(ms,{size:20}),a.enabled?"Sistema Activo":"Sistema Inactivo"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Seleccionar Compaa"}),i.jsxs("select",{value:(r==null?void 0:r.id)||"",onChange:Me=>{const Be=t.find(be=>be.id===Me.target.value);n(Be)},className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"-- Selecciona una compaa --"}),t.map(Me=>i.jsx("option",{value:Me.id,children:Me.nombre},Me.id))]})]}),r&&a&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-slate-900 flex items-center gap-2",children:[a.sistemaActivo===qg.RFID_ZEBRA?i.jsx(kz,{className:"text-purple-600",size:24}):i.jsx(Lre,{className:"text-indigo-600",size:24}),"Sistema Activo: ",ae]}),i.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(jz,{size:18}),"Cambiar Sistema"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Tipo"}),i.jsx("p",{className:"text-lg font-bold text-slate-900",children:ae})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Estado"}),i.jsx("p",{className:`text-lg font-bold ${a.enabled?"text-emerald-600":"text-slate-400"}`,children:a.enabled?"Activo":"Inactivo"})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Inversin Total"}),i.jsxs("p",{className:"text-lg font-bold text-indigo-600",children:["$",((Ee=(me=a.barcodeManual)==null?void 0:me.estadisticasGenerales)==null?void 0:Ee.costoTotalInversion)||0," USD"]})]})]})]}),a.sistemaActivo===qg.BARCODE_MANUAL&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[i.jsx(Gj,{className:"text-indigo-600",size:20}),"Scanners Manuales (",((H=(ye=a.barcodeManual)==null?void 0:ye.scanners)==null?void 0:H.length)||0,")"]}),i.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Hd,{size:18}),"Agregar Scanner"]})]}),((X=(Y=a.barcodeManual)==null?void 0:Y.scanners)==null?void 0:X.length)>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.barcodeManual.scanners.map(Me=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:Me.nombre}),i.jsxs("p",{className:"text-sm text-slate-600",children:[Me.marca.toUpperCase()," - ",Me.modelo]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Me.ubicacion})]}),i.jsx("button",{onClick:()=>ce(Me.id,"scanner"),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition",children:i.jsx(yp,{size:18})})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Me.activo?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:Me.activo?"Activo":"Inactivo"}),i.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Me.precio," USD"]})]})]},Me.id))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Gj,{className:"mx-auto mb-2 text-slate-400",size:48}),i.jsx("p",{children:"No hay scanners configurados"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[i.jsx(Wl,{className:"text-indigo-600",size:20}),"Impresoras Trmicas (",((se=(re=a.barcodeManual)==null?void 0:re.impresoras)==null?void 0:se.length)||0,")"]}),i.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Hd,{size:18}),"Agregar Impresora"]})]}),((Ce=(ke=a.barcodeManual)==null?void 0:ke.impresoras)==null?void 0:Ce.length)>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.barcodeManual.impresoras.map(Me=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:Me.nombre}),i.jsxs("p",{className:"text-sm text-slate-600",children:[Me.marca.toUpperCase()," - ",Me.modelo]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Me.ubicacion})]}),i.jsx("button",{onClick:()=>ce(Me.id,"impresora"),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition",children:i.jsx(yp,{size:18})})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Me.activo?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:Me.activo?"Activa":"Inactiva"}),i.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Me.precio," USD"]})]})]},Me.id))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Wl,{className:"mx-auto mb-2 text-slate-400",size:48}),i.jsx("p",{children:"No hay impresoras configuradas"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[i.jsx(Br,{className:"text-indigo-600",size:20}),"Consumibles (",((Ie=(xe=a.barcodeManual)==null?void 0:xe.consumibles)==null?void 0:Ie.length)||0,")"]}),i.jsxs("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Hd,{size:18}),"Agregar Consumible"]})]}),((Ue=(He=a.barcodeManual)==null?void 0:He.consumibles)==null?void 0:Ue.length)>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.barcodeManual.consumibles.map(Me=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:Me.nombre}),i.jsx("p",{className:"text-sm text-slate-600",children:Me.descripcion||Me.tipo})]}),i.jsx("button",{onClick:()=>ce(Me.id,"consumible"),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition",children:i.jsx(yp,{size:18})})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"bg-slate-100 px-2 py-1 rounded text-slate-600",children:["Cant: ",Me.cantidad]}),i.jsxs("span",{className:"text-slate-500 text-xs",children:["($",Me.costoUnitario,"/u)"]})]}),i.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Me.costoTotal," USD"]})]})]},Me.id))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Br,{className:"mx-auto mb-2 text-slate-400",size:48}),i.jsx("p",{children:"No hay consumibles registrados"})]})]})]}),a.sistemaActivo===qg.RFID_ZEBRA&&i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(kz,{className:"mx-auto mb-4 text-purple-600",size:64}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Sistema Zebra RFID Automtico"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"Configuracin avanzada de dispositivos Zebra RFID"}),i.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 max-w-md mx-auto",children:i.jsx("p",{className:"text-sm text-indigo-800",children:"La configuracin detallada de dispositivos Zebra RFID estar disponible prximamente."})})]})})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(jz,{className:"text-indigo-600"}),"Cambiar Sistema de Hardware"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nuevo Sistema"}),i.jsxs("select",{value:b,onChange:Me=>w(Me.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Selecciona..."}),i.jsx("option",{value:qg.BARCODE_MANUAL,children:"Scanners Manuales (Econmico)"}),i.jsx("option",{value:qg.RFID_ZEBRA,children:"Zebra RFID (Premium)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Motivo del Cambio"}),i.jsx("textarea",{value:_,onChange:Me=>N(Me.target.value),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Cliente adquiri equipos Zebra Premium"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:B,disabled:o||!b,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:o?"Cambiando...":"Cambiar Sistema"}),i.jsx("button",{onClick:()=>{u(!1),w(""),N("")},className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(Gj,{className:"text-indigo-600"}),"Agregar Scanner Manual"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Marca *"}),i.jsx("select",{value:A.marca,onChange:Me=>{const Be=Me.target.value,be=nX.find(Vt=>Vt.value===Be);j({...A,marca:Be,precio:(be==null?void 0:be.precio)||0})},className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:nX.map(Me=>i.jsxs("option",{value:Me.value,children:[Me.label," ($",Me.precio," USD)"]},Me.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Modelo"}),i.jsx("input",{type:"text",value:A.modelo,onChange:Me=>j({...A,modelo:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: 2D Wireless Scanner"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre *"}),i.jsx("input",{type:"text",value:A.nombre,onChange:Me=>j({...A,nombre:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Scanner Almacn USA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ubicacin"}),i.jsx("input",{type:"text",value:A.ubicacion,onChange:Me=>j({...A,ubicacion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: almacen_usa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Conexin"}),i.jsxs("select",{value:A.conexion,onChange:Me=>j({...A,conexion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"wireless",children:"Inalmbrico"}),i.jsx("option",{value:"usb",children:"USB"}),i.jsx("option",{value:"bluetooth",children:"Bluetooth"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Precio (USD)"}),i.jsx("input",{type:"number",value:A.precio,onChange:Me=>j({...A,precio:parseFloat(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:F,disabled:o||!A.nombre,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:o?"Agregando...":"Agregar Scanner"}),i.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),p&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(Wl,{className:"text-indigo-600"}),"Agregar Impresora Trmica"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Marca *"}),i.jsx("select",{value:P.marca,onChange:Me=>{const Be=Me.target.value,be=aX.find(Vt=>Vt.value===Be);U({...P,marca:Be,precio:(be==null?void 0:be.precio)||0})},className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:aX.map(Me=>i.jsxs("option",{value:Me.value,children:[Me.label," ($",Me.precio," USD)"]},Me.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Modelo"}),i.jsx("input",{type:"text",value:P.modelo,onChange:Me=>U({...P,modelo:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: NT-P31"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre *"}),i.jsx("input",{type:"text",value:P.nombre,onChange:Me=>U({...P,nombre:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Impresora Etiquetas USA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ubicacin"}),i.jsx("input",{type:"text",value:P.ubicacion,onChange:Me=>U({...P,ubicacion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: almacen_usa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Conexin"}),i.jsxs("select",{value:P.conexion,onChange:Me=>U({...P,conexion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"usb",children:"USB"}),i.jsx("option",{value:"bluetooth",children:"Bluetooth"}),i.jsx("option",{value:"wifi",children:"WiFi"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Precio (USD)"}),i.jsx("input",{type:"number",value:P.precio,onChange:Me=>U({...P,precio:parseFloat(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:ee,disabled:o||!P.nombre,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:o?"Agregando...":"Agregar Impresora"}),i.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),G&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(Br,{className:"text-indigo-600"}),"Agregar Consumible"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre"}),i.jsx("input",{type:"text",value:D.nombre,onChange:Me=>I({...D,nombre:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descripcin"}),i.jsx("input",{type:"text",value:D.descripcion,onChange:Me=>I({...D,descripcion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cantidad"}),i.jsx("input",{type:"number",value:D.cantidad,onChange:Me=>I({...D,cantidad:parseInt(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Costo Unitario"}),i.jsx("input",{type:"number",value:D.costoUnitario,onChange:Me=>I({...D,costoUnitario:parseFloat(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-right",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Inversin"}),i.jsxs("p",{className:"text-lg font-bold text-indigo-600",children:["$",(D.cantidad*D.costoUnitario).toFixed(2)," USD"]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:Z,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Agregar"}),i.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})})]})})},ndt=()=>{const{companyId:t}=Yy(),e=$s(),[r,n]=S.useState(!0),[a,s]=S.useState(!1),[o,l]=S.useState(null),[c,u]=S.useState({}),[d,h]=S.useState({}),[p,g]=S.useState({}),[b,w]=S.useState({});S.useEffect(()=>{t&&_()},[t]);const _=async()=>{n(!0);try{const G=await wt.get(`/companies/${t}/features`);if(G.data.success){const O=G.data.data;l({id:O.companyId,name:O.companyName,plan:O.plan}),u(O.planFeatures),h(O.customFeatures),g(O.effectiveFeatures)}}catch(G){console.error("Error cargando features:",G),We.error("Error al cargar features de la compaa")}finally{n(!1)}},N=G=>{const D=!p[G];w(I=>({...I,[G]:D})),g(I=>({...I,[G]:D}))},A=async()=>{if(Object.keys(b).length===0){We.info("No hay cambios para guardar");return}s(!0);try{(await wt.put(`/companies/${t}/features`,{features:b})).data.success&&(We.success(`${Object.keys(b).length} features actualizadas`),w({}),await _())}catch(G){console.error("Error guardando cambios:",G),We.error("Error al guardar cambios")}finally{s(!1)}},j=async()=>{if(confirm("Resetear todas las features personalizadas? La compaa volver a usar las features de su plan base.")){s(!0);try{(await wt.delete(`/companies/${t}/features`)).data.success&&(We.success("Features reseteadas al plan base"),w({}),await _())}catch(G){console.error("Error reseteando features:",G),We.error("Error al resetear features")}finally{s(!1)}}},P=Object.keys(b).length>0,U={" Gestin y Reportes":{importarCSV:"Importar desde CSV",importarExcel:"Importar desde Excel",exportarReportes:"Exportar reportes",dashboardAvanzado:"Dashboard con grficas",trackingPublico:"Tracking pblico (sin login)"}," Notificaciones":{notificacionesWeb:"Notificaciones Web",emailBasico:"Email bsico",emailAutomatizado:"Email automtico (eventos)",whatsappBusiness:"WhatsApp Business (Evolution API)",smsCliente:"SMS a clientes (no implementado)"}," Hardware y Escaneo":{escanerCodigoBarras:"Escner de cdigos de barras",escaneoConCamara:"Escaneo con cmara del celular",impresionEtiquetas:"Impresin de etiquetas",impresorasBluetooth:"Impresoras Bluetooth (Phomemo/Zebra)"}," App Mvil":{appMovilBasica:"App mvil (Capacitor WebView)",fotoComprobante:"Subir fotos de comprobante",modoOffline:"Modo offline avanzado (no implementado)",firmaDigital:"Firma digital (no implementado)"}," GPS y Tracking":{trackingBasico:"Tracking de paquetes",gpsEnTiempoReal:"GPS en tiempo real (roadmap)",historialRutas:"Historial de rutas (roadmap)"}," API y Webhooks":{apiPublica:"API REST pblica",webhooks:"Webhooks para eventos",integraciones:"Integraciones con terceros"}," Seguridad":{autenticacion2FA:"Autenticacin 2FA (roadmap)",logsAuditoria:"Logs de auditora"}};return r?i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx(ts,{className:"animate-spin",size:40})}):i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>e("/dashboard-super-admin"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:i.jsx(Gl,{size:20})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Gestin de Features"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[o==null?void 0:o.name," - Plan: ",i.jsx("span",{className:"font-semibold",children:o==null?void 0:o.plan})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[P&&i.jsxs("button",{onClick:A,disabled:a,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[a?i.jsx(ts,{className:"animate-spin",size:16}):i.jsx(y3,{size:16}),"Guardar Cambios (",Object.keys(b).length,")"]}),i.jsxs("button",{onClick:j,disabled:a||Object.keys(d).length===0,className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 disabled:opacity-50 flex items-center gap-2",children:[i.jsx(dh,{size:16}),"Resetear"]})]})]}),Object.keys(d).length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2",children:[i.jsx(w3,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:18}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium text-amber-800",children:["Esta compaa tiene ",Object.keys(d).length," features personalizadas"]}),i.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Las features marcadas con  son overrides del plan base"})]})]})]}),i.jsx("div",{className:"space-y-6",children:Object.entries(U).map(([G,O])=>{const D=Object.entries(O).filter(([I])=>I in c||I in p);return D.length===0?null:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Br,{size:20}),G]}),i.jsx("div",{className:"space-y-3",children:D.map(([I,V])=>{const R=p[I],B=c[I]&&!d[I],F=I in d,ee=I in b;return i.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition ${ee?"border-indigo-300 bg-indigo-50 dark:bg-indigo-900/20":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${R?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:R?i.jsx(ad,{size:20}):i.jsx(Jn,{size:20})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:V}),F&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:" Custom"}),ee&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded-full",children:"Sin guardar"})]}),i.jsx("span",{className:"text-xs text-slate-500",children:B?"Incluido en el plan":F?"Override personalizado":"No incluido"})]})]}),i.jsx("button",{onClick:()=>N(I),className:`p-2 rounded-lg transition ${R?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-slate-300 hover:bg-slate-400 text-slate-600"}`,children:R?i.jsx(cAe,{size:24}):i.jsx(oAe,{size:24})})]},I)})})]},G)})}),P&&i.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:i.jsxs("button",{onClick:A,disabled:a,className:"px-6 py-3 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2 text-sm font-medium",children:[a?i.jsx(ts,{className:"animate-spin",size:18}):i.jsx(y3,{size:18}),"Guardar ",Object.keys(b).length," Cambios"]})})]})},sX=()=>{const{userData:t}=fa(),[e,r]=S.useState(!0),[n,a]=S.useState(null),[s,o]=S.useState({}),[l,c]=S.useState({}),[u,d]=S.useState({});S.useEffect(()=>{t!=null&&t.companyId&&h()},[t]);const h=async()=>{r(!0);try{const N=await wt.get(`/companies/${t.companyId}/features`);if(N.data.success){const A=N.data.data;a({id:A.companyId,name:A.companyName,plan:A.plan}),o(A.planFeatures),c(A.customFeatures),d(A.effectiveFeatures)}}catch(N){console.error("Error cargando features:",N),We.error("Error al cargar caractersticas de la compaa")}finally{r(!1)}},p=N=>({operativo:"Operativo",automatizado:"Automatizado",smart:"Smart"})[N]||N,g=N=>({operativo:"bg-blue-100 text-blue-700 border-blue-300",automatizado:"bg-purple-100 text-purple-700 border-purple-300",smart:"bg-amber-100 text-amber-700 border-amber-300"})[N]||"bg-slate-100 text-slate-700",b=[{name:"Gestin y Reportes",icon:Br,color:"text-blue-600",features:{importarCSV:"Importar desde CSV",importarExcel:"Importar desde Excel",exportarReportes:"Exportar reportes",dashboardAvanzado:"Dashboard con grficas",trackingPublico:"Tracking pblico (sin login)"}},{name:"Notificaciones",icon:HN,color:"text-indigo-600",features:{notificacionesWeb:"Notificaciones Web",emailBasico:"Email bsico",emailAutomatizado:"Email automtico (eventos)",whatsappBusiness:"WhatsApp Business (Evolution API)",smsCliente:"SMS a clientes (roadmap)"}},{name:"Hardware y Escaneo",icon:Kf,color:"text-emerald-600",features:{escanerCodigoBarras:"Escner de cdigos de barras",escaneoConCamara:"Escaneo con cmara del celular",impresionEtiquetas:"Impresin de etiquetas",impresorasBluetooth:"Impresoras Bluetooth (Phomemo/Zebra)"}},{name:"App Mvil",icon:$re,color:"text-blue-600",features:{appMovilBasica:"App mvil (Capacitor WebView)",fotoComprobante:"Subir fotos de comprobante",modoOffline:"Modo offline avanzado (roadmap)",firmaDigital:"Firma digital (roadmap)"}},{name:"GPS y Tracking",icon:Fa,color:"text-rose-600",features:{trackingBasico:"Tracking de paquetes",gpsEnTiempoReal:"GPS en tiempo real (roadmap)",historialRutas:"Historial de rutas (roadmap)"}},{name:"API y Webhooks",icon:k4e,color:"text-orange-600",features:{apiPublica:"API REST pblica",webhooks:"Webhooks para eventos",integraciones:"Integraciones con terceros"}},{name:"Seguridad",icon:Y4e,color:"text-slate-600",features:{autenticacion2FA:"Autenticacin 2FA (roadmap)",logsAuditoria:"Logs de auditora"}}],w=()=>Object.values(u).filter(N=>N===!0||N===-1).length,_=()=>Object.keys(l).length;return e?i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx(ts,{className:"animate-spin",size:40})}):i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Br,{size:28}),"Caractersticas de Mi Compaa"]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:n==null?void 0:n.name})]}),i.jsxs("div",{className:`px-4 py-2 rounded-lg border-2 ${g(n==null?void 0:n.plan)} font-bold flex items-center gap-2`,children:[i.jsx(Bre,{size:20}),"Plan ",p(n==null?void 0:n.plan)]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-600 rounded-lg",children:i.jsx(ad,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Features Activas"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:w()})]})]})}),i.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4 border border-emerald-200 dark:border-emerald-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-600 rounded-lg",children:i.jsx(Br,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Del Plan Base"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:Object.values(s).filter(N=>N===!0||N===-1).length})]})]})}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-600 rounded-lg",children:i.jsx(w3,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Personalizadas"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:_()})]})]})})]}),_()>0&&i.jsxs("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[i.jsx(w3,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium text-amber-800",children:["Tu compaa tiene ",_()," caractersticas personalizadas!"]}),i.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Estas features extras fueron habilitadas especialmente para ti. Las features marcadas con  son personalizadas."})]})]})]}),i.jsx("div",{className:"space-y-6",children:b.map(N=>{const A=N.icon,j=Object.entries(N.features).filter(([P])=>P in s||P in u);return j.length===0?null:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md",children:[i.jsxs("h2",{className:`text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2 ${N.color}`,children:[i.jsx(A,{size:22}),N.name]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:j.map(([P,U])=>{const G=u[P],O=P in l;return i.jsx("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 ${G?"border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"border-slate-200 bg-slate-50 dark:bg-slate-900/20"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${G?"bg-emerald-500 text-white":"bg-slate-300 text-slate-600"}`,children:G?i.jsx(ad,{size:18}):i.jsx(Jn,{size:18})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`font-medium ${G?"text-slate-900 dark:text-white":"text-slate-500"}`,children:U}),O&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:" Extra"})]}),i.jsx("span",{className:"text-xs text-slate-500",children:G?"Disponible":"No disponible"})]})]})},P)})})]},N.name)})}),i.jsx("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(kf,{className:"text-blue-600 flex-shrink-0 mt-0.5",size:20}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Necesitas ms funcionalidades?"}),i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Contacta a tu administrador del sistema para explorar opciones de upgrade o caractersticas personalizadas."})]})]})})]})},Cn={SUPER_ADMIN:"super_admin",PROPIETARIO:"propietario",ADMIN_GENERAL:"admin_general",SECRETARIA:"secretaria",CARGADOR:"cargador",REPARTIDOR:"repartidor"},adt={dashboard:[Cn.SUPER_ADMIN,Cn.PROPIETARIO,Cn.ADMIN_GENERAL,Cn.SECRETARIA],finanzas:[Cn.SUPER_ADMIN,Cn.PROPIETARIO],recolecciones:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],embarques:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],almacenUSA:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],almacenRD:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],rutas:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL],panelRepartidores:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.REPARTIDOR],panelCargadores:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.CARGADOR],panelSecretarias:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],noEntregadas:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL],facturasClientesPendientes:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA]},sdt=(t,e)=>{const r=adt[e];return r?r.includes(t):!1},idt=t=>({[Cn.SUPER_ADMIN]:"Super Administrador",[Cn.PROPIETARIO]:"Propietario",[Cn.ADMIN_GENERAL]:"Administrador General",[Cn.SECRETARIA]:"Secretaria",[Cn.CARGADOR]:"Cargador",[Cn.REPARTIDOR]:"Repartidor"})[t]||"Usuario",odt=({children:t,modulo:e,redirectTo:r="/access-denied"})=>{const{user:n,userData:a,loading:s}=fa();if(s)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 font-medium",children:"Verificando permisos..."})]})});if(!n)return i.jsx(GE,{to:"/login",replace:!0});if(!e)return t;const o=(a==null?void 0:a.role)||(a==null?void 0:a.rol);return sdt(o,e)?t:(console.warn(` Acceso denegado: Usuario con rol "${o}" intent acceder a mdulo "${e}"`),i.jsx(GE,{to:r,replace:!0}))},ldt=()=>{const t=$s(),{userData:e}=fa(),r=(e==null?void 0:e.role)||(e==null?void 0:e.rol),n=idt(r);return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-200 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-rose-600 px-8 py-6",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:"p-3 bg-white/20 rounded-full backdrop-blur-sm",children:i.jsx(K4e,{className:"w-12 h-12 text-white",strokeWidth:1.5})})})}),i.jsxs("div",{className:"px-8 py-8 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acceso Denegado"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:["Tu rol actual ",i.jsxs("span",{className:"font-semibold text-slate-900",children:['"',n,'"']})," no tiene permisos para acceder a esta seccin."]}),i.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-6 border border-slate-200",children:i.jsx("p",{className:"text-sm text-slate-600",children:"Si crees que esto es un error, contacta al administrador de tu empresa para solicitar los permisos necesarios."})}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("button",{onClick:()=>t(-1),className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors font-medium",children:[i.jsx(Gl,{className:"w-5 h-5"}),"Volver atrs"]}),i.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium shadow-sm",children:[i.jsx(w8,{className:"w-5 h-5"}),"Ir al Dashboard"]})]})]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-slate-500",children:"ProLogix - Sistema de Gestin de Envos"})})]})})},cdt=()=>{const{userData:t}=fa();return(t==null?void 0:t.rol)==="super_admin"?i.jsx(wCe,{}):(t==null?void 0:t.rol)==="propietario"?i.jsx(_Ce,{}):i.jsx(yCe,{})};function udt(){const{userData:t,loading:e}=fa(),[r,n]=S.useState(!1);if(s3e(9e4),e)return i.jsx("div",{className:"h-screen w-screen bg-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(!t||r)return i.jsx(mCe,{onLoginStart:()=>n(!0),onExitComplete:()=>n(!1)});const a=t.rol==="admin"?"admin_general":t.rol;return i.jsxs(hCe,{children:[i.jsx(a3e,{richColors:!0,position:"top-right",expand:!0,closeButton:!0,duration:4e3}),i.jsxs(yQ,{children:[i.jsx(dr,{path:"/dashboard",element:i.jsx(cdt,{})}),a==="super_admin"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/companies",element:i.jsx(NCe,{})}),i.jsx(dr,{path:"/empleados",element:i.jsx(yT,{})}),i.jsx(dr,{path:"/tickets-admin",element:i.jsx(Iqe,{})}),i.jsx(dr,{path:"/configuracion/whatsapp",element:i.jsx(tdt,{})}),i.jsx(dr,{path:"/hardware",element:i.jsx(rdt,{})}),i.jsx(dr,{path:"/companies/:companyId/features",element:i.jsx(ndt,{})})]}),a==="admin_general"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(d5,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(b5,{})}),i.jsx(dr,{path:"/embarques",element:i.jsx(Jv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(eb,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(tb,{})}),i.jsx(dr,{path:"/secretarias",element:i.jsx(gT,{})}),i.jsx(dr,{path:"/cargadores",element:i.jsx(xT,{})}),i.jsx(dr,{path:"/repartidores",element:i.jsx(bT,{})}),i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(w5,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(U5,{})}),i.jsx(dr,{path:"/empleados",element:i.jsx(yT,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(B5,{})}),i.jsx(dr,{path:"/almacen-usa",element:i.jsx(tC,{})}),i.jsx(dr,{path:"/almacen-rd",element:i.jsx(rC,{})}),i.jsx(dr,{path:"/call-center",element:i.jsx(lN,{})})," ",i.jsx(dr,{path:"/pool",element:i.jsx(CC,{})})," ",i.jsx(dr,{path:"/historial",element:i.jsx(kC,{})})," ",i.jsx(dr,{path:"/mis-features",element:i.jsx(sX,{})})," "]}),i.jsx(dr,{path:"/finanzas",element:i.jsx(odt,{modulo:"finanzas",children:i.jsx(Qut,{})})}),a==="propietario"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(d5,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(b5,{})}),i.jsx(dr,{path:"/embarques",element:i.jsx(Jv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(eb,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(tb,{})}),i.jsx(dr,{path:"/secretarias",element:i.jsx(gT,{})}),i.jsx(dr,{path:"/cargadores",element:i.jsx(xT,{})}),i.jsx(dr,{path:"/repartidores",element:i.jsx(bT,{})}),i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(w5,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(U5,{})}),i.jsx(dr,{path:"/empleados",element:i.jsx(yT,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(B5,{})}),i.jsx(dr,{path:"/almacen-usa",element:i.jsx(tC,{})}),i.jsx(dr,{path:"/almacen-rd",element:i.jsx(rC,{})}),i.jsx(dr,{path:"/call-center",element:i.jsx(lN,{})})," ",i.jsx(dr,{path:"/pool",element:i.jsx(CC,{})})," ",i.jsx(dr,{path:"/historial",element:i.jsx(kC,{})})," ",i.jsx(dr,{path:"/mis-features",element:i.jsx(sX,{})})," "]}),a==="recolector"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(d5,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(b5,{})}),i.jsx(dr,{path:"/pool",element:i.jsx(CC,{})})," ",i.jsx(dr,{path:"/mis-solicitudes",element:i.jsx(edt,{})})," "]}),a==="almacen_eeuu"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(d5,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(b5,{})}),i.jsx(dr,{path:"/embarques",element:i.jsx(Jv,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(B5,{})}),i.jsx(dr,{path:"/almacen-usa",element:i.jsx(tC,{})})]}),a==="secretaria"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/embarques",element:i.jsx(Jv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(eb,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(tb,{})}),i.jsx(dr,{path:"/secretarias",element:i.jsx(gT,{})}),i.jsx(dr,{path:"/solicitudes",element:i.jsx(Jut,{})})," ",i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(w5,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(U5,{})}),i.jsx(dr,{path:"/call-center",element:i.jsx(lN,{})})," "]}),a==="secretaria_usa"&&i.jsx(i.Fragment,{children:i.jsx(dr,{path:"/call-center",element:i.jsx(lN,{})})}),a==="cargador"&&i.jsx(i.Fragment,{children:i.jsx(dr,{path:"/cargadores",element:i.jsx(xT,{})})}),a==="almacen_rd"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/embarques",element:i.jsx(Jv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(eb,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(tb,{})}),i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(w5,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(B5,{})}),i.jsx(dr,{path:"/almacen-rd",element:i.jsx(rC,{})}),i.jsx(dr,{path:"/historial",element:i.jsx(kC,{})})," "]}),a==="repartidor"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/rutas",element:i.jsx(eb,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(tb,{})}),i.jsx(dr,{path:"/repartidores",element:i.jsx(bT,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(U5,{})})]}),i.jsx(dr,{path:"/configuracion",element:i.jsx(Oqe,{})}),i.jsx(dr,{path:"/ayuda",element:i.jsx(Pqe,{})}),i.jsx(dr,{path:"/access-denied",element:i.jsx(ldt,{})}),i.jsx(dr,{path:"/",element:i.jsx(GE,{to:"/dashboard",replace:!0})}),i.jsx(dr,{path:"*",element:i.jsx(GE,{to:"/dashboard",replace:!0})})]})]})}function ddt(){return i.jsx(y1e,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:i.jsx(IEe,{children:i.jsxs(yQ,{children:[i.jsx(dr,{path:"/tracking",element:i.jsx($q,{})}),i.jsx(dr,{path:"/tracking/:codigo",element:i.jsx($q,{})}),i.jsx(dr,{path:"/agendar",element:i.jsx(Hq,{})}),i.jsx(dr,{path:"/agendar/:companyId",element:i.jsx(Hq,{})}),i.jsx(dr,{path:"/forgot-password",element:i.jsx(Qqe,{})}),i.jsx(dr,{path:"/reset-password",element:i.jsx(Jqe,{})}),i.jsx(dr,{path:"/rutas/:rutaId/imprimir",element:i.jsx(Zqe,{})}),i.jsx(dr,{path:"/*",element:i.jsx(udt,{})})]})})})}function fdt(t={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:a,onRegisteredSW:s,onRegisterError:o}=t;let l,c;const u=async(h=!0)=>{await c};async function d(){if("serviceWorker"in navigator){if(l=await qf(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!l)return;l.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),l.addEventListener("installed",h=>{h.isUpdate||n==null||n()}),l.register({immediate:e}).then(h=>{s?s("/sw.js",h):a==null||a(h)}).catch(h=>{o==null||o(h)})}}return c=d(),u}const hdt=fdt({onNeedRefresh(){confirm("Nueva versin disponible. Deseas actualizar ahora?")&&hdt(!0)},onOfflineReady(){console.log(" App lista para funcionar offline")},onRegistered(t){console.log(" Service Worker registrado")},onRegisterError(t){console.error(" Error registrando Service Worker:",t)}});_ge.createRoot(document.getElementById("root")).render(i.jsx(xr.StrictMode,{children:i.jsx(ddt,{})}));export{Ase as W,Ea as _,Lv as c,Bl as d,vdt as e,Hc as g,We as t};
