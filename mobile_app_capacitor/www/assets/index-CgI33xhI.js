var i0e=Object.defineProperty;var o0e=(t,e,r)=>e in t?i0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var aa=(t,e,r)=>o0e(t,typeof e!="symbol"?e+"":e,r);function KK(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var XK={exports:{}},M4={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0e=Symbol.for("react.transitional.element"),c0e=Symbol.for("react.fragment");function YK(t,e,r){var n=null;if(r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),"key"in e){r={};for(var a in e)a!=="key"&&(r[a]=e[a])}else r=e;return e=r.ref,{$$typeof:l0e,type:t,key:n,ref:e!==void 0?e:null,props:r}}M4.Fragment=c0e;M4.jsx=YK;M4.jsxs=YK;XK.exports=M4;var i=XK.exports,ZK={exports:{}},bn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lO=Symbol.for("react.transitional.element"),u0e=Symbol.for("react.portal"),d0e=Symbol.for("react.fragment"),f0e=Symbol.for("react.strict_mode"),h0e=Symbol.for("react.profiler"),m0e=Symbol.for("react.consumer"),p0e=Symbol.for("react.context"),g0e=Symbol.for("react.forward_ref"),x0e=Symbol.for("react.suspense"),v0e=Symbol.for("react.memo"),QK=Symbol.for("react.lazy"),b0e=Symbol.for("react.activity"),l9=Symbol.iterator;function y0e(t){return t===null||typeof t!="object"?null:(t=l9&&t[l9]||t["@@iterator"],typeof t=="function"?t:null)}var JK={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eX=Object.assign,tX={};function Hx(t,e,r){this.props=t,this.context=e,this.refs=tX,this.updater=r||JK}Hx.prototype.isReactComponent={};Hx.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Hx.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rX(){}rX.prototype=Hx.prototype;function cO(t,e,r){this.props=t,this.context=e,this.refs=tX,this.updater=r||JK}var uO=cO.prototype=new rX;uO.constructor=cO;eX(uO,Hx.prototype);uO.isPureReactComponent=!0;var c9=Array.isArray;function wC(){}var es={H:null,A:null,T:null,S:null},nX=Object.prototype.hasOwnProperty;function dO(t,e,r){var n=r.ref;return{$$typeof:lO,type:t,key:e,ref:n!==void 0?n:null,props:r}}function w0e(t,e){return dO(t.type,e,t.props)}function fO(t){return typeof t=="object"&&t!==null&&t.$$typeof===lO}function _0e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var u9=/\/+/g;function P6(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_0e(""+t.key):e.toString(36)}function N0e(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(wC,wC):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Hg(t,e,r,n,a){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lO:case u0e:o=!0;break;case QK:return o=t._init,Hg(o(t._payload),e,r,n,a)}}if(o)return a=a(t),o=n===""?"."+P6(t,0):n,c9(a)?(r="",o!=null&&(r=o.replace(u9,"$&/")+"/"),Hg(a,e,r,"",function(u){return u})):a!=null&&(fO(a)&&(a=w0e(a,r+(a.key==null||t&&t.key===a.key?"":(""+a.key).replace(u9,"$&/")+"/")+o)),e.push(a)),1;o=0;var l=n===""?".":n+":";if(c9(t))for(var c=0;c<t.length;c++)n=t[c],s=l+P6(n,c),o+=Hg(n,e,r,s,a);else if(c=y0e(t),typeof c=="function")for(t=c.call(t),c=0;!(n=t.next()).done;)n=n.value,s=l+P6(n,c++),o+=Hg(n,e,r,s,a);else if(s==="object"){if(typeof t.then=="function")return Hg(N0e(t),e,r,n,a);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function A5(t,e,r){if(t==null)return t;var n=[],a=0;return Hg(t,n,"","",function(s){return e.call(r,s,a++)}),n}function E0e(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var d9=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},A0e={map:A5,forEach:function(t,e,r){A5(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return A5(t,function(){e++}),e},toArray:function(t){return A5(t,function(e){return e})||[]},only:function(t){if(!fO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};bn.Activity=b0e;bn.Children=A0e;bn.Component=Hx;bn.Fragment=d0e;bn.Profiler=h0e;bn.PureComponent=cO;bn.StrictMode=f0e;bn.Suspense=x0e;bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=es;bn.__COMPILER_RUNTIME={__proto__:null,c:function(t){return es.H.useMemoCache(t)}};bn.cache=function(t){return function(){return t.apply(null,arguments)}};bn.cacheSignal=function(){return null};bn.cloneElement=function(t,e,r){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var n=eX({},t.props),a=t.key;if(e!=null)for(s in e.key!==void 0&&(a=""+e.key),e)!nX.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(n[s]=e[s]);var s=arguments.length-2;if(s===1)n.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];n.children=o}return dO(t.type,a,n)};bn.createContext=function(t){return t={$$typeof:p0e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:m0e,_context:t},t};bn.createElement=function(t,e,r){var n,a={},s=null;if(e!=null)for(n in e.key!==void 0&&(s=""+e.key),e)nX.call(e,n)&&n!=="key"&&n!=="__self"&&n!=="__source"&&(a[n]=e[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];a.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return dO(t,s,a)};bn.createRef=function(){return{current:null}};bn.forwardRef=function(t){return{$$typeof:g0e,render:t}};bn.isValidElement=fO;bn.lazy=function(t){return{$$typeof:QK,_payload:{_status:-1,_result:t},_init:E0e}};bn.memo=function(t,e){return{$$typeof:v0e,type:t,compare:e===void 0?null:e}};bn.startTransition=function(t){var e=es.T,r={};es.T=r;try{var n=t(),a=es.S;a!==null&&a(r,n),typeof n=="object"&&n!==null&&typeof n.then=="function"&&n.then(wC,d9)}catch(s){d9(s)}finally{e!==null&&r.types!==null&&(e.types=r.types),es.T=e}};bn.unstable_useCacheRefresh=function(){return es.H.useCacheRefresh()};bn.use=function(t){return es.H.use(t)};bn.useActionState=function(t,e,r){return es.H.useActionState(t,e,r)};bn.useCallback=function(t,e){return es.H.useCallback(t,e)};bn.useContext=function(t){return es.H.useContext(t)};bn.useDebugValue=function(){};bn.useDeferredValue=function(t,e){return es.H.useDeferredValue(t,e)};bn.useEffect=function(t,e){return es.H.useEffect(t,e)};bn.useEffectEvent=function(t){return es.H.useEffectEvent(t)};bn.useId=function(){return es.H.useId()};bn.useImperativeHandle=function(t,e,r){return es.H.useImperativeHandle(t,e,r)};bn.useInsertionEffect=function(t,e){return es.H.useInsertionEffect(t,e)};bn.useLayoutEffect=function(t,e){return es.H.useLayoutEffect(t,e)};bn.useMemo=function(t,e){return es.H.useMemo(t,e)};bn.useOptimistic=function(t,e){return es.H.useOptimistic(t,e)};bn.useReducer=function(t,e,r){return es.H.useReducer(t,e,r)};bn.useRef=function(t){return es.H.useRef(t)};bn.useState=function(t){return es.H.useState(t)};bn.useSyncExternalStore=function(t,e,r){return es.H.useSyncExternalStore(t,e,r)};bn.useTransition=function(){return es.H.useTransition()};bn.version="19.2.0";ZK.exports=bn;var A=ZK.exports;const gr=Vc(A),aX=KK({__proto__:null,default:gr},[A]);var sX={exports:{}},L4={},iX={exports:{}},oX={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ce,ne){var ae=ce.length;ce.push(ne);e:for(;0<ae;){var me=ae-1>>>1,Te=ce[me];if(0<a(Te,ne))ce[me]=ne,ce[ae]=Te,ae=me;else break e}}function r(ce){return ce.length===0?null:ce[0]}function n(ce){if(ce.length===0)return null;var ne=ce[0],ae=ce.pop();if(ae!==ne){ce[0]=ae;e:for(var me=0,Te=ce.length,we=Te>>>1;me<we;){var q=2*(me+1)-1,Y=ce[q],X=q+1,re=ce[X];if(0>a(Y,ae))X<Te&&0>a(re,Y)?(ce[me]=re,ce[X]=ae,me=X):(ce[me]=Y,ce[q]=ae,me=q);else if(X<Te&&0>a(re,ae))ce[me]=re,ce[X]=ae,me=X;else break e}}return ne}function a(ce,ne){var ae=ce.sortIndex-ne.sortIndex;return ae!==0?ae:ce.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,g=!1,b=!1,w=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R(ce){for(var ne=r(u);ne!==null;){if(ne.callback===null)n(u);else if(ne.startTime<=ce)n(u),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=r(u)}}function z(ce){if(w=!1,R(ce),!b)if(r(c)!==null)b=!0,G||(G=!0,B());else{var ne=r(u);ne!==null&&Z(z,ne.startTime-ce)}}var G=!1,O=-1,D=5,I=-1;function V(){return _?!0:!(t.unstable_now()-I<D)}function P(){if(_=!1,G){var ce=t.unstable_now();I=ce;var ne=!0;try{e:{b=!1,w&&(w=!1,S(O),O=-1),g=!0;var ae=p;try{t:{for(R(ce),h=r(c);h!==null&&!(h.expirationTime>ce&&V());){var me=h.callback;if(typeof me=="function"){h.callback=null,p=h.priorityLevel;var Te=me(h.expirationTime<=ce);if(ce=t.unstable_now(),typeof Te=="function"){h.callback=Te,R(ce),ne=!0;break t}h===r(c)&&n(c),R(ce)}else n(c);h=r(c)}if(h!==null)ne=!0;else{var we=r(u);we!==null&&Z(z,we.startTime-ce),ne=!1}}break e}finally{h=null,p=ae,g=!1}ne=void 0}}finally{ne?B():G=!1}}}var B;if(typeof T=="function")B=function(){T(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ee=F.port2;F.port1.onmessage=P,B=function(){ee.postMessage(null)}}else B=function(){N(P,0)};function Z(ce,ne){O=N(function(){ce(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ce){ce.callback=null},t.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ce?Math.floor(1e3/ce):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(ce){switch(p){case 1:case 2:case 3:var ne=3;break;default:ne=p}var ae=p;p=ne;try{return ce()}finally{p=ae}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(ce,ne){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var ae=p;p=ce;try{return ne()}finally{p=ae}},t.unstable_scheduleCallback=function(ce,ne,ae){var me=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?me+ae:me):ae=me,ce){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ae+Te,ce={id:d++,callback:ne,priorityLevel:ce,startTime:ae,expirationTime:Te,sortIndex:-1},ae>me?(ce.sortIndex=ae,e(u,ce),r(c)===null&&ce===r(u)&&(w?(S(O),O=-1):w=!0,Z(z,ae-me))):(ce.sortIndex=Te,e(c,ce),b||g||(b=!0,G||(G=!0,B()))),ce},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(ce){var ne=p;return function(){var ae=p;p=ne;try{return ce.apply(this,arguments)}finally{p=ae}}}})(oX);iX.exports=oX;var S0e=iX.exports,lX={exports:{}},_l={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0e=A;function cX(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Bh(){}var hl={d:{f:Bh,r:function(){throw Error(cX(522))},D:Bh,C:Bh,L:Bh,m:Bh,X:Bh,S:Bh,M:Bh},p:0,findDOMNode:null},T0e=Symbol.for("react.portal");function C0e(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T0e,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}var C2=j0e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function F4(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}_l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=hl;_l.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(cX(299));return C0e(t,e,null,r)};_l.flushSync=function(t){var e=C2.T,r=hl.p;try{if(C2.T=null,hl.p=2,t)return t()}finally{C2.T=e,hl.p=r,hl.d.f()}};_l.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,hl.d.C(t,e))};_l.prefetchDNS=function(t){typeof t=="string"&&hl.d.D(t)};_l.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var r=e.as,n=F4(r,e.crossOrigin),a=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;r==="style"?hl.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:s}):r==="script"&&hl.d.X(t,{crossOrigin:n,integrity:a,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};_l.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var r=F4(e.as,e.crossOrigin);hl.d.M(t,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&hl.d.M(t)};_l.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var r=e.as,n=F4(r,e.crossOrigin);hl.d.L(t,r,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};_l.preloadModule=function(t,e){if(typeof t=="string")if(e){var r=F4(e.as,e.crossOrigin);hl.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else hl.d.m(t)};_l.requestFormReset=function(t){hl.d.r(t)};_l.unstable_batchedUpdates=function(t,e){return t(e)};_l.useFormState=function(t,e,r){return C2.H.useFormState(t,e,r)};_l.useFormStatus=function(){return C2.H.useHostTransitionStatus()};_l.version="19.2.0";function uX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uX)}catch(t){console.error(t)}}uX(),lX.exports=_l;var Oy=lX.exports;const k0e=Vc(Oy);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=S0e,dX=A,I0e=Oy;function Zt(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function fX(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ry(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function hX(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mX(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f9(t){if(Ry(t)!==t)throw Error(Zt(188))}function O0e(t){var e=t.alternate;if(!e){if(e=Ry(t),e===null)throw Error(Zt(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return f9(a),t;if(s===n)return f9(a),e;s=s.sibling}throw Error(Zt(188))}if(r.return!==n.return)r=a,n=s;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o)throw Error(Zt(189))}}if(r.alternate!==n)throw Error(Zt(190))}if(r.tag!==3)throw Error(Zt(188));return r.stateNode.current===r?t:e}function pX(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=pX(t),e!==null)return e;t=t.sibling}return null}var rs=Object.assign,R0e=Symbol.for("react.element"),S5=Symbol.for("react.transitional.element"),f2=Symbol.for("react.portal"),a1=Symbol.for("react.fragment"),gX=Symbol.for("react.strict_mode"),_C=Symbol.for("react.profiler"),xX=Symbol.for("react.consumer"),If=Symbol.for("react.context"),hO=Symbol.for("react.forward_ref"),NC=Symbol.for("react.suspense"),EC=Symbol.for("react.suspense_list"),mO=Symbol.for("react.memo"),Xh=Symbol.for("react.lazy"),AC=Symbol.for("react.activity"),P0e=Symbol.for("react.memo_cache_sentinel"),h9=Symbol.iterator;function Pv(t){return t===null||typeof t!="object"?null:(t=h9&&t[h9]||t["@@iterator"],typeof t=="function"?t:null)}var D0e=Symbol.for("react.client.reference");function SC(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D0e?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case a1:return"Fragment";case _C:return"Profiler";case gX:return"StrictMode";case NC:return"Suspense";case EC:return"SuspenseList";case AC:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case f2:return"Portal";case If:return t.displayName||"Context";case xX:return(t._context.displayName||"Context")+".Consumer";case hO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case mO:return e=t.displayName||null,e!==null?e:SC(t.type)||"Memo";case Xh:e=t._payload,t=t._init;try{return SC(t(e))}catch{}}return null}var h2=Array.isArray,cn=dX.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,la=I0e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ap={pending:!1,data:null,method:null,action:null},jC=[],s1=-1;function Qd(t){return{current:t}}function ro(t){0>s1||(t.current=jC[s1],jC[s1]=null,s1--)}function qa(t,e){s1++,jC[s1]=t.current,t.current=e}var Dd=Qd(null),gb=Qd(null),g0=Qd(null),lE=Qd(null);function cE(t,e){switch(qa(g0,e),qa(gb,t),qa(Dd,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?bF(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=bF(e),t=LZ(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ro(Dd),qa(Dd,t)}function J1(){ro(Dd),ro(gb),ro(g0)}function TC(t){t.memoizedState!==null&&qa(lE,t);var e=Dd.current,r=LZ(e,t.type);e!==r&&(qa(gb,t),qa(Dd,r))}function uE(t){gb.current===t&&(ro(Dd),ro(gb)),lE.current===t&&(ro(lE),jb._currentValue=ap)}var D6,m9;function Im(t){if(D6===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);D6=e&&e[1]||"",m9=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+D6+t+m9}var M6=!1;function L6(t,e){if(!t||M6)return"";M6=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(g){var p=g}Reflect.construct(t,[],h)}else{try{h.call()}catch(g){p=g}t.call(h.prototype)}}else{try{throw Error()}catch(g){p=g}(h=t())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(g){if(g&&p&&typeof g.stack=="string")return[g.stack,p.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=n.DetermineComponentFrameRoot(),o=s[0],l=s[1];if(o&&l){var c=o.split(`
`),u=l.split(`
`);for(a=n=0;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(n===c.length||a===u.length)for(n=c.length-1,a=u.length-1;1<=n&&0<=a&&c[n]!==u[a];)a--;for(;1<=n&&0<=a;n--,a--)if(c[n]!==u[a]){if(n!==1||a!==1)do if(n--,a--,0>a||c[n]!==u[a]){var d=`
`+c[n].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=n&&0<=a);break}}}finally{M6=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Im(r):""}function M0e(t,e){switch(t.tag){case 26:case 27:case 5:return Im(t.type);case 16:return Im("Lazy");case 13:return t.child!==e&&e!==null?Im("Suspense Fallback"):Im("Suspense");case 19:return Im("SuspenseList");case 0:case 15:return L6(t.type,!1);case 11:return L6(t.type.render,!1);case 1:return L6(t.type,!0);case 31:return Im("Activity");default:return""}}function p9(t){try{var e="",r=null;do e+=M0e(t,r),r=t,t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var CC=Object.prototype.hasOwnProperty,pO=Ii.unstable_scheduleCallback,F6=Ii.unstable_cancelCallback,L0e=Ii.unstable_shouldYield,F0e=Ii.unstable_requestPaint,Ic=Ii.unstable_now,B0e=Ii.unstable_getCurrentPriorityLevel,vX=Ii.unstable_ImmediatePriority,bX=Ii.unstable_UserBlockingPriority,dE=Ii.unstable_NormalPriority,U0e=Ii.unstable_LowPriority,yX=Ii.unstable_IdlePriority,z0e=Ii.log,V0e=Ii.unstable_setDisableYieldValue,Py=null,Oc=null;function i0(t){if(typeof z0e=="function"&&V0e(t),Oc&&typeof Oc.setStrictMode=="function")try{Oc.setStrictMode(Py,t)}catch{}}var Rc=Math.clz32?Math.clz32:q0e,$0e=Math.log,H0e=Math.LN2;function q0e(t){return t>>>=0,t===0?32:31-($0e(t)/H0e|0)|0}var j5=256,T5=262144,C5=4194304;function Om(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function B4(t,e,r){var n=t.pendingLanes;if(n===0)return 0;var a=0,s=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var l=n&134217727;return l!==0?(n=l&~s,n!==0?a=Om(n):(o&=l,o!==0?a=Om(o):r||(r=l&~t,r!==0&&(a=Om(r))))):(l=n&~s,l!==0?a=Om(l):o!==0?a=Om(o):r||(r=n&~t,r!==0&&(a=Om(r)))),a===0?0:e!==0&&e!==a&&!(e&s)&&(s=a&-a,r=e&-e,s>=r||s===32&&(r&4194048)!==0)?e:a}function Dy(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function G0e(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wX(){var t=C5;return C5<<=1,!(C5&62914560)&&(C5=4194304),t}function B6(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function My(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function W0e(t,e,r,n,a,s){var o=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var l=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(r=o&~r;0<r;){var d=31-Rc(r),h=1<<d;l[d]=0,c[d]=-1;var p=u[d];if(p!==null)for(u[d]=null,d=0;d<p.length;d++){var g=p[d];g!==null&&(g.lane&=-536870913)}r&=~h}n!==0&&_X(t,n,0),s!==0&&a===0&&t.tag!==0&&(t.suspendedLanes|=s&~(o&~e))}function _X(t,e,r){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Rc(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|r&261930}function NX(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Rc(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}function EX(t,e){var r=e&-e;return r=r&42?1:gO(r),r&(t.suspendedLanes|e)?0:r}function gO(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xO(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function AX(){var t=la.p;return t!==0?t:(t=window.event,t===void 0?32:KZ(t.type))}function g9(t,e){var r=la.p;try{return la.p=t,e()}finally{la.p=r}}var sm=Math.random().toString(36).slice(2),_o="__reactFiber$"+sm,Wl="__reactProps$"+sm,qx="__reactContainer$"+sm,kC="__reactEvents$"+sm,K0e="__reactListeners$"+sm,X0e="__reactHandles$"+sm,x9="__reactResources$"+sm,Ly="__reactMarker$"+sm;function vO(t){delete t[_o],delete t[Wl],delete t[kC],delete t[K0e],delete t[X0e]}function i1(t){var e=t[_o];if(e)return e;for(var r=t.parentNode;r;){if(e=r[qx]||r[_o]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=EF(t);t!==null;){if(r=t[_o])return r;t=EF(t)}return e}t=r,r=t.parentNode}return null}function Gx(t){if(t=t[_o]||t[qx]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function m2(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(Zt(33))}function j1(t){var e=t[x9];return e||(e=t[x9]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Zi(t){t[Ly]=!0}var SX=new Set,jX={};function eg(t,e){ex(t,e),ex(t+"Capture",e)}function ex(t,e){for(jX[t]=e,t=0;t<e.length;t++)SX.add(e[t])}var Y0e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),v9={},b9={};function Z0e(t){return CC.call(b9,t)?!0:CC.call(v9,t)?!1:Y0e.test(t)?b9[t]=!0:(v9[t]=!0,!1)}function nN(t,e,r){if(Z0e(e))if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var n=e.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+r)}}function k5(t,e,r){if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+r)}}function df(t,e,r,n){if(n===null)t.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(e,r,""+n)}}function iu(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TX(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q0e(t,e,r){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function IC(t){if(!t._valueTracker){var e=TX(t)?"checked":"value";t._valueTracker=Q0e(t,e,""+t[e])}}function CX(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=TX(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function fE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var J0e=/[\n"\\]/g;function cu(t){return t.replace(J0e,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function OC(t,e,r,n,a,s,o,l){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+iu(e)):t.value!==""+iu(e)&&(t.value=""+iu(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?RC(t,o,iu(e)):r!=null?RC(t,o,iu(r)):n!=null&&t.removeAttribute("value"),a==null&&s!=null&&(t.defaultChecked=!!s),a!=null&&(t.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+iu(l):t.removeAttribute("name")}function kX(t,e,r,n,a,s,o,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||r!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){IC(t);return}r=r!=null?""+iu(r):"",e=e!=null?""+iu(e):r,l||e===t.value||(t.value=e),t.defaultValue=e}n=n??a,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=l?t.checked:!!n,t.defaultChecked=!!n,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),IC(t)}function RC(t,e,r){e==="number"&&fE(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function T1(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+iu(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function IX(t,e,r){if(e!=null&&(e=""+iu(e),e!==t.value&&(t.value=e),r==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=r!=null?""+iu(r):""}function OX(t,e,r,n){if(e==null){if(n!=null){if(r!=null)throw Error(Zt(92));if(h2(n)){if(1<n.length)throw Error(Zt(93));n=n[0]}r=n}r==null&&(r=""),e=r}r=iu(e),t.defaultValue=r,n=t.textContent,n===r&&n!==""&&n!==null&&(t.value=n),IC(t)}function tx(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var eme=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function y9(t,e,r){var n=e.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?n?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":n?t.setProperty(e,r):typeof r!="number"||r===0||eme.has(e)?e==="float"?t.cssFloat=r:t[e]=(""+r).trim():t[e]=r+"px"}function RX(t,e,r){if(e!=null&&typeof e!="object")throw Error(Zt(62));if(t=t.style,r!=null){for(var n in r)!r.hasOwnProperty(n)||e!=null&&e.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var a in e)n=e[a],e.hasOwnProperty(a)&&r[a]!==n&&y9(t,a,n)}else for(var s in e)e.hasOwnProperty(s)&&y9(t,s,e[s])}function bO(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tme=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rme=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function aN(t){return rme.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Of(){}var PC=null;function yO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var o1=null,C1=null;function w9(t){var e=Gx(t);if(e&&(t=e.stateNode)){var r=t[Wl]||null;e:switch(t=e.stateNode,e.type){case"input":if(OC(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+cu(""+e)+'"][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=n[Wl]||null;if(!a)throw Error(Zt(90));OC(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(e=0;e<r.length;e++)n=r[e],n.form===t.form&&CX(n)}break e;case"textarea":IX(t,r.value,r.defaultValue);break e;case"select":e=r.value,e!=null&&T1(t,!!r.multiple,e,!1)}}}var U6=!1;function PX(t,e,r){if(U6)return t(e,r);U6=!0;try{var n=t(e);return n}finally{if(U6=!1,(o1!==null||C1!==null)&&(Z4(),o1&&(e=o1,t=C1,C1=o1=null,w9(e),t)))for(e=0;e<t.length;e++)w9(t[e])}}function xb(t,e){var r=t.stateNode;if(r===null)return null;var n=r[Wl]||null;if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Zt(231,e,typeof r));return r}var Jf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),DC=!1;if(Jf)try{var Dv={};Object.defineProperty(Dv,"passive",{get:function(){DC=!0}}),window.addEventListener("test",Dv,Dv),window.removeEventListener("test",Dv,Dv)}catch{DC=!1}var o0=null,wO=null,sN=null;function DX(){if(sN)return sN;var t,e=wO,r=e.length,n,a="value"in o0?o0.value:o0.textContent,s=a.length;for(t=0;t<r&&e[t]===a[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===a[s-n];n++);return sN=a.slice(t,1<n?1-n:void 0)}function iN(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function I5(){return!0}function _9(){return!1}function Zl(t){function e(r,n,a,s,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?I5:_9,this.isPropagationStopped=_9,this}return rs(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=I5)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=I5)},persist:function(){},isPersistent:I5}),e}var tg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U4=Zl(tg),Fy=rs({},tg,{view:0,detail:0}),nme=Zl(Fy),z6,V6,Mv,z4=rs({},Fy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_O,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mv&&(Mv&&t.type==="mousemove"?(z6=t.screenX-Mv.screenX,V6=t.screenY-Mv.screenY):V6=z6=0,Mv=t),z6)},movementY:function(t){return"movementY"in t?t.movementY:V6}}),N9=Zl(z4),ame=rs({},z4,{dataTransfer:0}),sme=Zl(ame),ime=rs({},Fy,{relatedTarget:0}),$6=Zl(ime),ome=rs({},tg,{animationName:0,elapsedTime:0,pseudoElement:0}),lme=Zl(ome),cme=rs({},tg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ume=Zl(cme),dme=rs({},tg,{data:0}),E9=Zl(dme),fme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pme(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mme[t])?!!e[t]:!1}function _O(){return pme}var gme=rs({},Fy,{key:function(t){if(t.key){var e=fme[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iN(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hme[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_O,charCode:function(t){return t.type==="keypress"?iN(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iN(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xme=Zl(gme),vme=rs({},z4,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A9=Zl(vme),bme=rs({},Fy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_O}),yme=Zl(bme),wme=rs({},tg,{propertyName:0,elapsedTime:0,pseudoElement:0}),_me=Zl(wme),Nme=rs({},z4,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Eme=Zl(Nme),Ame=rs({},tg,{newState:0,oldState:0}),Sme=Zl(Ame),jme=[9,13,27,32],NO=Jf&&"CompositionEvent"in window,k2=null;Jf&&"documentMode"in document&&(k2=document.documentMode);var Tme=Jf&&"TextEvent"in window&&!k2,MX=Jf&&(!NO||k2&&8<k2&&11>=k2),S9=" ",j9=!1;function LX(t,e){switch(t){case"keyup":return jme.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FX(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var l1=!1;function Cme(t,e){switch(t){case"compositionend":return FX(e);case"keypress":return e.which!==32?null:(j9=!0,S9);case"textInput":return t=e.data,t===S9&&j9?null:t;default:return null}}function kme(t,e){if(l1)return t==="compositionend"||!NO&&LX(t,e)?(t=DX(),sN=wO=o0=null,l1=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MX&&e.locale!=="ko"?null:e.data;default:return null}}var Ime={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function T9(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ime[t.type]:e==="textarea"}function BX(t,e,r,n){o1?C1?C1.push(n):C1=[n]:o1=n,e=kE(e,"onChange"),0<e.length&&(r=new U4("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var I2=null,vb=null;function Ome(t){PZ(t,0)}function V4(t){var e=m2(t);if(CX(e))return t}function C9(t,e){if(t==="change")return e}var UX=!1;if(Jf){var H6;if(Jf){var q6="oninput"in document;if(!q6){var k9=document.createElement("div");k9.setAttribute("oninput","return;"),q6=typeof k9.oninput=="function"}H6=q6}else H6=!1;UX=H6&&(!document.documentMode||9<document.documentMode)}function I9(){I2&&(I2.detachEvent("onpropertychange",zX),vb=I2=null)}function zX(t){if(t.propertyName==="value"&&V4(vb)){var e=[];BX(e,vb,t,yO(t)),PX(Ome,e)}}function Rme(t,e,r){t==="focusin"?(I9(),I2=e,vb=r,I2.attachEvent("onpropertychange",zX)):t==="focusout"&&I9()}function Pme(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return V4(vb)}function Dme(t,e){if(t==="click")return V4(e)}function Mme(t,e){if(t==="input"||t==="change")return V4(e)}function Lme(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mc=typeof Object.is=="function"?Object.is:Lme;function bb(t,e){if(Mc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!CC.call(e,a)||!Mc(t[a],e[a]))return!1}return!0}function O9(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function R9(t,e){var r=O9(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=O9(r)}}function VX(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VX(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $X(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=fE(t.document);e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=fE(t.document)}return e}function EO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Fme=Jf&&"documentMode"in document&&11>=document.documentMode,c1=null,MC=null,O2=null,LC=!1;function P9(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;LC||c1==null||c1!==fE(n)||(n=c1,"selectionStart"in n&&EO(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),O2&&bb(O2,n)||(O2=n,n=kE(MC,"onSelect"),0<n.length&&(e=new U4("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=c1)))}function jm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var u1={animationend:jm("Animation","AnimationEnd"),animationiteration:jm("Animation","AnimationIteration"),animationstart:jm("Animation","AnimationStart"),transitionrun:jm("Transition","TransitionRun"),transitionstart:jm("Transition","TransitionStart"),transitioncancel:jm("Transition","TransitionCancel"),transitionend:jm("Transition","TransitionEnd")},G6={},HX={};Jf&&(HX=document.createElement("div").style,"AnimationEvent"in window||(delete u1.animationend.animation,delete u1.animationiteration.animation,delete u1.animationstart.animation),"TransitionEvent"in window||delete u1.transitionend.transition);function rg(t){if(G6[t])return G6[t];if(!u1[t])return t;var e=u1[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in HX)return G6[t]=e[r];return t}var qX=rg("animationend"),GX=rg("animationiteration"),WX=rg("animationstart"),Bme=rg("transitionrun"),Ume=rg("transitionstart"),zme=rg("transitioncancel"),KX=rg("transitionend"),XX=new Map,FC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");FC.push("scrollEnd");function dd(t,e){XX.set(t,e),eg(e,[t])}var hE=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},au=[],d1=0,AO=0;function $4(){for(var t=d1,e=AO=d1=0;e<t;){var r=au[e];au[e++]=null;var n=au[e];au[e++]=null;var a=au[e];au[e++]=null;var s=au[e];if(au[e++]=null,n!==null&&a!==null){var o=n.pending;o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a}s!==0&&YX(r,a,s)}}function H4(t,e,r,n){au[d1++]=t,au[d1++]=e,au[d1++]=r,au[d1++]=n,AO|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function SO(t,e,r,n){return H4(t,e,r,n),mE(t)}function ng(t,e){return H4(t,null,null,e),mE(t)}function YX(t,e,r){t.lanes|=r;var n=t.alternate;n!==null&&(n.lanes|=r);for(var a=!1,s=t.return;s!==null;)s.childLanes|=r,n=s.alternate,n!==null&&(n.childLanes|=r),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(a=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,a&&e!==null&&(a=31-Rc(r),t=s.hiddenUpdates,n=t[a],n===null?t[a]=[e]:n.push(e),e.lane=r|536870912),s):null}function mE(t){if(50<z2)throw z2=0,sk=null,Error(Zt(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var f1={};function Vme(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(t,e,r,n){return new Vme(t,e,r,n)}function jO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uf(t,e){var r=t.alternate;return r===null?(r=_c(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function ZX(t,e){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function oN(t,e,r,n,a,s){var o=0;if(n=t,typeof t=="function")jO(t)&&(o=1);else if(typeof t=="string")o=Wpe(t,r,Dd.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case AC:return t=_c(31,r,e,a),t.elementType=AC,t.lanes=s,t;case a1:return sp(r.children,a,s,e);case gX:o=8,a|=24;break;case _C:return t=_c(12,r,e,a|2),t.elementType=_C,t.lanes=s,t;case NC:return t=_c(13,r,e,a),t.elementType=NC,t.lanes=s,t;case EC:return t=_c(19,r,e,a),t.elementType=EC,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case If:o=10;break e;case xX:o=9;break e;case hO:o=11;break e;case mO:o=14;break e;case Xh:o=16,n=null;break e}o=29,r=Error(Zt(130,t===null?"null":typeof t,"")),n=null}return e=_c(o,r,e,a),e.elementType=t,e.type=n,e.lanes=s,e}function sp(t,e,r,n){return t=_c(7,t,n,e),t.lanes=r,t}function W6(t,e,r){return t=_c(6,t,null,e),t.lanes=r,t}function QX(t){var e=_c(18,null,null,0);return e.stateNode=t,e}function K6(t,e,r){return e=_c(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var D9=new WeakMap;function uu(t,e){if(typeof t=="object"&&t!==null){var r=D9.get(t);return r!==void 0?r:(e={value:t,source:e,stack:p9(e)},D9.set(t,e),e)}return{value:t,source:e,stack:p9(e)}}var h1=[],m1=0,pE=null,yb=0,ou=[],lu=0,M0=null,Ad=1,Sd="";function yf(t,e){h1[m1++]=yb,h1[m1++]=pE,pE=t,yb=e}function JX(t,e,r){ou[lu++]=Ad,ou[lu++]=Sd,ou[lu++]=M0,M0=t;var n=Ad;t=Sd;var a=32-Rc(n)-1;n&=~(1<<a),r+=1;var s=32-Rc(e)+a;if(30<s){var o=a-a%5;s=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Ad=1<<32-Rc(e)+a|r<<a|n,Sd=s+t}else Ad=1<<s|r<<a|n,Sd=t}function TO(t){t.return!==null&&(yf(t,1),JX(t,1,0))}function CO(t){for(;t===pE;)pE=h1[--m1],h1[m1]=null,yb=h1[--m1],h1[m1]=null;for(;t===M0;)M0=ou[--lu],ou[lu]=null,Sd=ou[--lu],ou[lu]=null,Ad=ou[--lu],ou[lu]=null}function eY(t,e){ou[lu++]=Ad,ou[lu++]=Sd,ou[lu++]=M0,Ad=e.id,Sd=e.overflow,M0=t}var No=null,Qa=null,Hn=!1,x0=null,du=!1,BC=Error(Zt(519));function L0(t){var e=Error(Zt(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw wb(uu(e,t)),BC}function M9(t){var e=t.stateNode,r=t.type,n=t.memoizedProps;switch(e[_o]=t,e[Wl]=n,r){case"dialog":Mn("cancel",e),Mn("close",e);break;case"iframe":case"object":case"embed":Mn("load",e);break;case"video":case"audio":for(r=0;r<Ab.length;r++)Mn(Ab[r],e);break;case"source":Mn("error",e);break;case"img":case"image":case"link":Mn("error",e),Mn("load",e);break;case"details":Mn("toggle",e);break;case"input":Mn("invalid",e),kX(e,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Mn("invalid",e);break;case"textarea":Mn("invalid",e),OX(e,n.value,n.defaultValue,n.children)}r=n.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||e.textContent===""+r||n.suppressHydrationWarning===!0||MZ(e.textContent,r)?(n.popover!=null&&(Mn("beforetoggle",e),Mn("toggle",e)),n.onScroll!=null&&Mn("scroll",e),n.onScrollEnd!=null&&Mn("scrollend",e),n.onClick!=null&&(e.onclick=Of),e=!0):e=!1,e||L0(t,!0)}function L9(t){for(No=t.return;No;)switch(No.tag){case 5:case 31:case 13:du=!1;return;case 27:case 3:du=!0;return;default:No=No.return}}function Ng(t){if(t!==No)return!1;if(!Hn)return L9(t),Hn=!0,!1;var e=t.tag,r;if((r=e!==3&&e!==27)&&((r=e===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||uk(t.type,t.memoizedProps)),r=!r),r&&Qa&&L0(t),L9(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Zt(317));Qa=NF(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Zt(317));Qa=NF(t)}else e===27?(e=Qa,im(t.type)?(t=mk,mk=null,Qa=t):Qa=e):Qa=No?wu(t.stateNode.nextSibling):null;return!0}function jp(){Qa=No=null,Hn=!1}function X6(){var t=x0;return t!==null&&(Pl===null?Pl=t:Pl.push.apply(Pl,t),x0=null),t}function wb(t){x0===null?x0=[t]:x0.push(t)}var UC=Qd(null),ag=null,Rf=null;function Jh(t,e,r){qa(UC,e._currentValue),e._currentValue=r}function zf(t){t._currentValue=UC.current,ro(UC)}function zC(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function VC(t,e,r,n){var a=t.child;for(a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){var o=a.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=a;for(var c=0;c<e.length;c++)if(l.context===e[c]){s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),zC(s.return,r,t),n||(o=null);break e}s=l.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error(Zt(341));o.lanes|=r,s=o.alternate,s!==null&&(s.lanes|=r),zC(o,r,t),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function Wx(t,e,r,n){t=null;for(var a=e,s=!1;a!==null;){if(!s){if(a.flags&524288)s=!0;else if(a.flags&262144)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error(Zt(387));if(o=o.memoizedProps,o!==null){var l=a.type;Mc(a.pendingProps.value,o.value)||(t!==null?t.push(l):t=[l])}}else if(a===lE.current){if(o=a.alternate,o===null)throw Error(Zt(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(t!==null?t.push(jb):t=[jb])}a=a.return}t!==null&&VC(e,t,r,n),e.flags|=262144}function gE(t){for(t=t.firstContext;t!==null;){if(!Mc(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Tp(t){ag=t,Rf=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function So(t){return tY(ag,t)}function O5(t,e){return ag===null&&Tp(t),tY(t,e)}function tY(t,e){var r=e._currentValue;if(e={context:e,memoizedValue:r,next:null},Rf===null){if(t===null)throw Error(Zt(308));Rf=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Rf=Rf.next=e;return r}var $me=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(r,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(r){return r()})}},Hme=Ii.unstable_scheduleCallback,qme=Ii.unstable_NormalPriority,ui={$$typeof:If,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kO(){return{controller:new $me,data:new Map,refCount:0}}function By(t){t.refCount--,t.refCount===0&&Hme(qme,function(){t.controller.abort()})}var R2=null,$C=0,rx=0,k1=null;function Gme(t,e){if(R2===null){var r=R2=[];$C=0,rx=tR(),k1={status:"pending",value:void 0,then:function(n){r.push(n)}}}return $C++,e.then(F9,F9),e}function F9(){if(--$C===0&&R2!==null){k1!==null&&(k1.status="fulfilled");var t=R2;R2=null,rx=0,k1=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Wme(t,e){var r=[],n={status:"pending",value:null,reason:null,then:function(a){r.push(a)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var a=0;a<r.length;a++)(0,r[a])(e)},function(a){for(n.status="rejected",n.reason=a,a=0;a<r.length;a++)(0,r[a])(void 0)}),n}var B9=cn.S;cn.S=function(t,e){pZ=Ic(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Gme(t,e),B9!==null&&B9(t,e)};var ip=Qd(null);function IO(){var t=ip.current;return t!==null?t:Fa.pooledCache}function lN(t,e){e===null?qa(ip,ip.current):qa(ip,e.pool)}function rY(){var t=IO();return t===null?null:{parent:ui._currentValue,pool:t}}var Kx=Error(Zt(460)),OO=Error(Zt(474)),q4=Error(Zt(542)),xE={then:function(){}};function U9(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nY(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(Of,Of),e=r),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,V9(t),t;default:if(typeof e.status=="string")e.then(Of,Of);else{if(t=Fa,t!==null&&100<t.shellSuspendCounter)throw Error(Zt(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var a=e;a.status="fulfilled",a.value=n}},function(n){if(e.status==="pending"){var a=e;a.status="rejected",a.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,V9(t),t}throw op=e,Kx}}function Rm(t){try{var e=t._init;return e(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(op=r,Kx):r}}var op=null;function z9(){if(op===null)throw Error(Zt(459));var t=op;return op=null,t}function V9(t){if(t===Kx||t===q4)throw Error(Zt(483))}var I1=null,_b=0;function R5(t){var e=_b;return _b+=1,I1===null&&(I1=[]),nY(I1,t,e)}function Lv(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function P5(t,e){throw e.$$typeof===R0e?Error(Zt(525)):(t=Object.prototype.toString.call(e),Error(Zt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function aY(t){function e(N,S){if(t){var T=N.deletions;T===null?(N.deletions=[S],N.flags|=16):T.push(S)}}function r(N,S){if(!t)return null;for(;S!==null;)e(N,S),S=S.sibling;return null}function n(N){for(var S=new Map;N!==null;)N.key!==null?S.set(N.key,N):S.set(N.index,N),N=N.sibling;return S}function a(N,S){return N=Uf(N,S),N.index=0,N.sibling=null,N}function s(N,S,T){return N.index=T,t?(T=N.alternate,T!==null?(T=T.index,T<S?(N.flags|=67108866,S):T):(N.flags|=67108866,S)):(N.flags|=1048576,S)}function o(N){return t&&N.alternate===null&&(N.flags|=67108866),N}function l(N,S,T,R){return S===null||S.tag!==6?(S=W6(T,N.mode,R),S.return=N,S):(S=a(S,T),S.return=N,S)}function c(N,S,T,R){var z=T.type;return z===a1?d(N,S,T.props.children,R,T.key):S!==null&&(S.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Xh&&Rm(z)===S.type)?(S=a(S,T.props),Lv(S,T),S.return=N,S):(S=oN(T.type,T.key,T.props,null,N.mode,R),Lv(S,T),S.return=N,S)}function u(N,S,T,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==T.containerInfo||S.stateNode.implementation!==T.implementation?(S=K6(T,N.mode,R),S.return=N,S):(S=a(S,T.children||[]),S.return=N,S)}function d(N,S,T,R,z){return S===null||S.tag!==7?(S=sp(T,N.mode,R,z),S.return=N,S):(S=a(S,T),S.return=N,S)}function h(N,S,T){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=W6(""+S,N.mode,T),S.return=N,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case S5:return T=oN(S.type,S.key,S.props,null,N.mode,T),Lv(T,S),T.return=N,T;case f2:return S=K6(S,N.mode,T),S.return=N,S;case Xh:return S=Rm(S),h(N,S,T)}if(h2(S)||Pv(S))return S=sp(S,N.mode,T,null),S.return=N,S;if(typeof S.then=="function")return h(N,R5(S),T);if(S.$$typeof===If)return h(N,O5(N,S),T);P5(N,S)}return null}function p(N,S,T,R){var z=S!==null?S.key:null;if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return z!==null?null:l(N,S,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case S5:return T.key===z?c(N,S,T,R):null;case f2:return T.key===z?u(N,S,T,R):null;case Xh:return T=Rm(T),p(N,S,T,R)}if(h2(T)||Pv(T))return z!==null?null:d(N,S,T,R,null);if(typeof T.then=="function")return p(N,S,R5(T),R);if(T.$$typeof===If)return p(N,S,O5(N,T),R);P5(N,T)}return null}function g(N,S,T,R,z){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return N=N.get(T)||null,l(S,N,""+R,z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case S5:return N=N.get(R.key===null?T:R.key)||null,c(S,N,R,z);case f2:return N=N.get(R.key===null?T:R.key)||null,u(S,N,R,z);case Xh:return R=Rm(R),g(N,S,T,R,z)}if(h2(R)||Pv(R))return N=N.get(T)||null,d(S,N,R,z,null);if(typeof R.then=="function")return g(N,S,T,R5(R),z);if(R.$$typeof===If)return g(N,S,T,O5(S,R),z);P5(S,R)}return null}function b(N,S,T,R){for(var z=null,G=null,O=S,D=S=0,I=null;O!==null&&D<T.length;D++){O.index>D?(I=O,O=null):I=O.sibling;var V=p(N,O,T[D],R);if(V===null){O===null&&(O=I);break}t&&O&&V.alternate===null&&e(N,O),S=s(V,S,D),G===null?z=V:G.sibling=V,G=V,O=I}if(D===T.length)return r(N,O),Hn&&yf(N,D),z;if(O===null){for(;D<T.length;D++)O=h(N,T[D],R),O!==null&&(S=s(O,S,D),G===null?z=O:G.sibling=O,G=O);return Hn&&yf(N,D),z}for(O=n(O);D<T.length;D++)I=g(O,N,D,T[D],R),I!==null&&(t&&I.alternate!==null&&O.delete(I.key===null?D:I.key),S=s(I,S,D),G===null?z=I:G.sibling=I,G=I);return t&&O.forEach(function(P){return e(N,P)}),Hn&&yf(N,D),z}function w(N,S,T,R){if(T==null)throw Error(Zt(151));for(var z=null,G=null,O=S,D=S=0,I=null,V=T.next();O!==null&&!V.done;D++,V=T.next()){O.index>D?(I=O,O=null):I=O.sibling;var P=p(N,O,V.value,R);if(P===null){O===null&&(O=I);break}t&&O&&P.alternate===null&&e(N,O),S=s(P,S,D),G===null?z=P:G.sibling=P,G=P,O=I}if(V.done)return r(N,O),Hn&&yf(N,D),z;if(O===null){for(;!V.done;D++,V=T.next())V=h(N,V.value,R),V!==null&&(S=s(V,S,D),G===null?z=V:G.sibling=V,G=V);return Hn&&yf(N,D),z}for(O=n(O);!V.done;D++,V=T.next())V=g(O,N,D,V.value,R),V!==null&&(t&&V.alternate!==null&&O.delete(V.key===null?D:V.key),S=s(V,S,D),G===null?z=V:G.sibling=V,G=V);return t&&O.forEach(function(B){return e(N,B)}),Hn&&yf(N,D),z}function _(N,S,T,R){if(typeof T=="object"&&T!==null&&T.type===a1&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case S5:e:{for(var z=T.key;S!==null;){if(S.key===z){if(z=T.type,z===a1){if(S.tag===7){r(N,S.sibling),R=a(S,T.props.children),R.return=N,N=R;break e}}else if(S.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Xh&&Rm(z)===S.type){r(N,S.sibling),R=a(S,T.props),Lv(R,T),R.return=N,N=R;break e}r(N,S);break}else e(N,S);S=S.sibling}T.type===a1?(R=sp(T.props.children,N.mode,R,T.key),R.return=N,N=R):(R=oN(T.type,T.key,T.props,null,N.mode,R),Lv(R,T),R.return=N,N=R)}return o(N);case f2:e:{for(z=T.key;S!==null;){if(S.key===z)if(S.tag===4&&S.stateNode.containerInfo===T.containerInfo&&S.stateNode.implementation===T.implementation){r(N,S.sibling),R=a(S,T.children||[]),R.return=N,N=R;break e}else{r(N,S);break}else e(N,S);S=S.sibling}R=K6(T,N.mode,R),R.return=N,N=R}return o(N);case Xh:return T=Rm(T),_(N,S,T,R)}if(h2(T))return b(N,S,T,R);if(Pv(T)){if(z=Pv(T),typeof z!="function")throw Error(Zt(150));return T=z.call(T),w(N,S,T,R)}if(typeof T.then=="function")return _(N,S,R5(T),R);if(T.$$typeof===If)return _(N,S,O5(N,T),R);P5(N,T)}return typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint"?(T=""+T,S!==null&&S.tag===6?(r(N,S.sibling),R=a(S,T),R.return=N,N=R):(r(N,S),R=W6(T,N.mode,R),R.return=N,N=R),o(N)):r(N,S)}return function(N,S,T,R){try{_b=0;var z=_(N,S,T,R);return I1=null,z}catch(O){if(O===Kx||O===q4)throw O;var G=_c(29,O,null,N.mode);return G.lanes=R,G.return=N,G}finally{}}}var Cp=aY(!0),sY=aY(!1),Yh=!1;function RO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function HC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function v0(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function b0(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,oa&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,e=mE(t),YX(t,null,r),e}return H4(t,n,e,r),mE(t)}function P2(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,NX(t,r)}}function Y6(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};s===null?a=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?a=s=e:s=s.next=e}else a=s=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:n.shared,callbacks:n.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}var qC=!1;function D2(){if(qC){var t=k1;if(t!==null)throw t}}function M2(t,e,r,n){qC=!1;var a=t.updateQueue;Yh=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=a.baseState;o=0,d=u=c=null,l=s;do{var p=l.lane&-536870913,g=p!==l.lane;if(g?(Un&p)===p:(n&p)===p){p!==0&&p===rx&&(qC=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=t,w=l;p=e;var _=r;switch(w.tag){case 1:if(b=w.payload,typeof b=="function"){h=b.call(_,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=w.payload,p=typeof b=="function"?b.call(_,h,p):b,p==null)break e;h=rs({},h,p);break e;case 2:Yh=!0}}p=l.callback,p!==null&&(t.flags|=64,g&&(t.flags|=8192),g=a.callbacks,g===null?a.callbacks=[p]:g.push(p))}else g={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,o|=p;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;g=l,l=g.next,g.next=null,a.lastBaseUpdate=g,a.shared.pending=null}}while(!0);d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,s===null&&(a.shared.lanes=0),B0|=o,t.lanes=o,t.memoizedState=h}}function iY(t,e){if(typeof t!="function")throw Error(Zt(191,t));t.call(e)}function oY(t,e){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)iY(r[t],e)}var nx=Qd(null),vE=Qd(0);function $9(t,e){t=nh,qa(vE,t),qa(nx,e),nh=t|e.baseLanes}function GC(){qa(vE,nh),qa(nx,nx.current)}function PO(){nh=vE.current,ro(nx),ro(vE)}var Lc=Qd(null),yu=null;function e0(t){var e=t.alternate;qa(Xs,Xs.current&1),qa(Lc,t),yu===null&&(e===null||nx.current!==null||e.memoizedState!==null)&&(yu=t)}function WC(t){qa(Xs,Xs.current),qa(Lc,t),yu===null&&(yu=t)}function lY(t){t.tag===22?(qa(Xs,Xs.current),qa(Lc,t),yu===null&&(yu=t)):t0()}function t0(){qa(Xs,Xs.current),qa(Lc,Lc.current)}function bc(t){ro(Lc),yu===t&&(yu=null),ro(Xs)}var Xs=Qd(0);function bE(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||fk(r)||hk(r)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eh=0,wn=null,Oa=null,li=null,yE=!1,O1=!1,kp=!1,wE=0,Nb=0,R1=null,Kme=0;function Ts(){throw Error(Zt(321))}function DO(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Mc(t[r],e[r]))return!1;return!0}function MO(t,e,r,n,a,s){return eh=s,wn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cn.H=t===null||t.memoizedState===null?BY:WO,kp=!1,s=r(n,a),kp=!1,O1&&(s=uY(e,r,n,a)),cY(t),s}function cY(t){cn.H=Eb;var e=Oa!==null&&Oa.next!==null;if(eh=0,li=Oa=wn=null,yE=!1,Nb=0,R1=null,e)throw Error(Zt(300));t===null||di||(t=t.dependencies,t!==null&&gE(t)&&(di=!0))}function uY(t,e,r,n){wn=t;var a=0;do{if(O1&&(R1=null),Nb=0,O1=!1,25<=a)throw Error(Zt(301));if(a+=1,li=Oa=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}cn.H=UY,s=e(r,n)}while(O1);return s}function Xme(){var t=cn.H,e=t.useState()[0];return e=typeof e.then=="function"?Uy(e):e,t=t.useState()[0],(Oa!==null?Oa.memoizedState:null)!==t&&(wn.flags|=1024),e}function LO(){var t=wE!==0;return wE=0,t}function FO(t,e,r){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r}function BO(t){if(yE){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}yE=!1}eh=0,li=Oa=wn=null,O1=!1,Nb=wE=0,R1=null}function ol(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return li===null?wn.memoizedState=li=t:li=li.next=t,li}function Zs(){if(Oa===null){var t=wn.alternate;t=t!==null?t.memoizedState:null}else t=Oa.next;var e=li===null?wn.memoizedState:li.next;if(e!==null)li=e,Oa=t;else{if(t===null)throw wn.alternate===null?Error(Zt(467)):Error(Zt(310));Oa=t,t={memoizedState:Oa.memoizedState,baseState:Oa.baseState,baseQueue:Oa.baseQueue,queue:Oa.queue,next:null},li===null?wn.memoizedState=li=t:li=li.next=t}return li}function G4(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uy(t){var e=Nb;return Nb+=1,R1===null&&(R1=[]),t=nY(R1,t,e),e=wn,(li===null?e.memoizedState:li.next)===null&&(e=e.alternate,cn.H=e===null||e.memoizedState===null?BY:WO),t}function W4(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Uy(t);if(t.$$typeof===If)return So(t)}throw Error(Zt(438,String(t)))}function UO(t){var e=null,r=wn.updateQueue;if(r!==null&&(e=r.memoCache),e==null){var n=wn.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(a){return a.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),r===null&&(r=G4(),wn.updateQueue=r),r.memoCache=e,r=e.data[e.index],r===void 0)for(r=e.data[e.index]=Array(t),n=0;n<t;n++)r[n]=P0e;return e.index++,r}function th(t,e){return typeof e=="function"?e(t):e}function cN(t){var e=Zs();return zO(e,Oa,t)}function zO(t,e,r){var n=t.queue;if(n===null)throw Error(Zt(311));n.lastRenderedReducer=r;var a=t.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}e.baseQueue=a=s,n.pending=null}if(s=t.baseState,a===null)t.memoizedState=s;else{e=a.next;var l=o=null,c=null,u=e,d=!1;do{var h=u.lane&-536870913;if(h!==u.lane?(Un&h)===h:(eh&h)===h){var p=u.revertLane;if(p===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===rx&&(d=!0);else if((eh&p)===p){u=u.next,p===rx&&(d=!0);continue}else h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=h,o=s):c=c.next=h,wn.lanes|=p,B0|=p;h=u.action,kp&&r(s,h),s=u.hasEagerState?u.eagerState:r(s,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(l=c=p,o=s):c=c.next=p,wn.lanes|=h,B0|=h;u=u.next}while(u!==null&&u!==e);if(c===null?o=s:c.next=l,!Mc(s,t.memoizedState)&&(di=!0,d&&(r=k1,r!==null)))throw r;t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}return a===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function Z6(t){var e=Zs(),r=e.queue;if(r===null)throw Error(Zt(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,s=e.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do s=t(s,o.action),o=o.next;while(o!==a);Mc(s,e.memoizedState)||(di=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function dY(t,e,r){var n=wn,a=Zs(),s=Hn;if(s){if(r===void 0)throw Error(Zt(407));r=r()}else r=e();var o=!Mc((Oa||a).memoizedState,r);if(o&&(a.memoizedState=r,di=!0),a=a.queue,VO(mY.bind(null,n,a,t),[t]),a.getSnapshot!==e||o||li!==null&&li.memoizedState.tag&1){if(n.flags|=2048,ax(9,{destroy:void 0},hY.bind(null,n,a,r,e),null),Fa===null)throw Error(Zt(349));s||eh&127||fY(n,e,r)}return r}function fY(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=wn.updateQueue,e===null?(e=G4(),wn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function hY(t,e,r,n){e.value=r,e.getSnapshot=n,pY(e)&&gY(t)}function mY(t,e,r){return r(function(){pY(e)&&gY(t)})}function pY(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Mc(t,r)}catch{return!0}}function gY(t){var e=ng(t,2);e!==null&&zl(e,t,2)}function KC(t){var e=ol();if(typeof t=="function"){var r=t;if(t=r(),kp){i0(!0);try{r()}finally{i0(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:t},e}function xY(t,e,r,n){return t.baseState=r,zO(t,Oa,typeof n=="function"?n:th)}function Yme(t,e,r,n,a){if(X4(t))throw Error(Zt(485));if(t=e.action,t!==null){var s={payload:a,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};cn.T!==null?r(!0):s.isTransition=!1,n(s),r=e.pending,r===null?(s.next=e.pending=s,vY(e,s)):(s.next=r.next,e.pending=r.next=s)}}function vY(t,e){var r=e.action,n=e.payload,a=t.state;if(e.isTransition){var s=cn.T,o={};cn.T=o;try{var l=r(a,n),c=cn.S;c!==null&&c(o,l),H9(t,e,l)}catch(u){XC(t,e,u)}finally{s!==null&&o.types!==null&&(s.types=o.types),cn.T=s}}else try{s=r(a,n),H9(t,e,s)}catch(u){XC(t,e,u)}}function H9(t,e,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(n){q9(t,e,n)},function(n){return XC(t,e,n)}):q9(t,e,r)}function q9(t,e,r){e.status="fulfilled",e.value=r,bY(e),t.state=r,e=t.pending,e!==null&&(r=e.next,r===e?t.pending=null:(r=r.next,e.next=r,vY(t,r)))}function XC(t,e,r){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=r,bY(e),e=e.next;while(e!==n)}t.action=null}function bY(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function yY(t,e){return e}function G9(t,e){if(Hn){var r=Fa.formState;if(r!==null){e:{var n=wn;if(Hn){if(Qa){t:{for(var a=Qa,s=du;a.nodeType!==8;){if(!s){a=null;break t}if(a=wu(a.nextSibling),a===null){a=null;break t}}s=a.data,a=s==="F!"||s==="F"?a:null}if(a){Qa=wu(a.nextSibling),n=a.data==="F!";break e}}L0(n)}n=!1}n&&(e=r[0])}}return r=ol(),r.memoizedState=r.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yY,lastRenderedState:e},r.queue=n,r=MY.bind(null,wn,n),n.dispatch=r,n=KC(!1),s=GO.bind(null,wn,!1,n.queue),n=ol(),a={state:e,dispatch:null,action:t,pending:null},n.queue=a,r=Yme.bind(null,wn,a,s,r),a.dispatch=r,n.memoizedState=t,[e,r,!1]}function W9(t){var e=Zs();return wY(e,Oa,t)}function wY(t,e,r){if(e=zO(t,e,yY)[0],t=cN(th)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=Uy(e)}catch(o){throw o===Kx?q4:o}else n=e;e=Zs();var a=e.queue,s=a.dispatch;return r!==e.memoizedState&&(wn.flags|=2048,ax(9,{destroy:void 0},Zme.bind(null,a,r),null)),[n,s,t]}function Zme(t,e){t.action=e}function K9(t){var e=Zs(),r=Oa;if(r!==null)return wY(e,r,t);Zs(),e=e.memoizedState,r=Zs();var n=r.queue.dispatch;return r.memoizedState=t,[e,n,!1]}function ax(t,e,r,n){return t={tag:t,create:r,deps:n,inst:e,next:null},e=wn.updateQueue,e===null&&(e=G4(),wn.updateQueue=e),r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function _Y(){return Zs().memoizedState}function uN(t,e,r,n){var a=ol();wn.flags|=t,a.memoizedState=ax(1|e,{destroy:void 0},r,n===void 0?null:n)}function K4(t,e,r,n){var a=Zs();n=n===void 0?null:n;var s=a.memoizedState.inst;Oa!==null&&n!==null&&DO(n,Oa.memoizedState.deps)?a.memoizedState=ax(e,s,r,n):(wn.flags|=t,a.memoizedState=ax(1|e,s,r,n))}function X9(t,e){uN(8390656,8,t,e)}function VO(t,e){K4(2048,8,t,e)}function Qme(t){wn.flags|=4;var e=wn.updateQueue;if(e===null)e=G4(),wn.updateQueue=e,e.events=[t];else{var r=e.events;r===null?e.events=[t]:r.push(t)}}function NY(t){var e=Zs().memoizedState;return Qme({ref:e,nextImpl:t}),function(){if(oa&2)throw Error(Zt(440));return e.impl.apply(void 0,arguments)}}function EY(t,e){return K4(4,2,t,e)}function AY(t,e){return K4(4,4,t,e)}function SY(t,e){if(typeof e=="function"){t=t();var r=e(t);return function(){typeof r=="function"?r():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jY(t,e,r){r=r!=null?r.concat([t]):null,K4(4,4,SY.bind(null,e,t),r)}function $O(){}function TY(t,e){var r=Zs();e=e===void 0?null:e;var n=r.memoizedState;return e!==null&&DO(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function CY(t,e){var r=Zs();e=e===void 0?null:e;var n=r.memoizedState;if(e!==null&&DO(e,n[1]))return n[0];if(n=t(),kp){i0(!0);try{t()}finally{i0(!1)}}return r.memoizedState=[n,e],n}function HO(t,e,r){return r===void 0||eh&1073741824&&!(Un&261930)?t.memoizedState=e:(t.memoizedState=r,t=xZ(),wn.lanes|=t,B0|=t,r)}function kY(t,e,r,n){return Mc(r,e)?r:nx.current!==null?(t=HO(t,r,n),Mc(t,e)||(di=!0),t):!(eh&42)||eh&1073741824&&!(Un&261930)?(di=!0,t.memoizedState=r):(t=xZ(),wn.lanes|=t,B0|=t,e)}function IY(t,e,r,n,a){var s=la.p;la.p=s!==0&&8>s?s:8;var o=cn.T,l={};cn.T=l,GO(t,!1,e,r);try{var c=a(),u=cn.S;if(u!==null&&u(l,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=Wme(c,n);L2(t,e,d,Pc(t))}else L2(t,e,n,Pc(t))}catch(h){L2(t,e,{then:function(){},status:"rejected",reason:h},Pc())}finally{la.p=s,o!==null&&l.types!==null&&(o.types=l.types),cn.T=o}}function Jme(){}function YC(t,e,r,n){if(t.tag!==5)throw Error(Zt(476));var a=OY(t).queue;IY(t,a,e,ap,r===null?Jme:function(){return RY(t),r(n)})}function OY(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:ap,baseState:ap,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:ap},next:null};var r={};return e.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:th,lastRenderedState:r},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function RY(t){var e=OY(t);e.next===null&&(e=t.alternate.memoizedState),L2(t,e.next.queue,{},Pc())}function qO(){return So(jb)}function PY(){return Zs().memoizedState}function DY(){return Zs().memoizedState}function epe(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var r=Pc();t=v0(r);var n=b0(e,t,r);n!==null&&(zl(n,e,r),P2(n,e,r)),e={cache:kO()},t.payload=e;return}e=e.return}}function tpe(t,e,r){var n=Pc();r={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},X4(t)?LY(e,r):(r=SO(t,e,r,n),r!==null&&(zl(r,t,n),FY(r,e,n)))}function MY(t,e,r){var n=Pc();L2(t,e,r,n)}function L2(t,e,r,n){var a={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(X4(t))LY(e,a);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,r);if(a.hasEagerState=!0,a.eagerState=l,Mc(l,o))return H4(t,e,a,0),Fa===null&&$4(),!1}catch{}finally{}if(r=SO(t,e,a,n),r!==null)return zl(r,t,n),FY(r,e,n),!0}return!1}function GO(t,e,r,n){if(n={lane:2,revertLane:tR(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},X4(t)){if(e)throw Error(Zt(479))}else e=SO(t,r,n,2),e!==null&&zl(e,t,2)}function X4(t){var e=t.alternate;return t===wn||e!==null&&e===wn}function LY(t,e){O1=yE=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function FY(t,e,r){if(r&4194048){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,NX(t,r)}}var Eb={readContext:So,use:W4,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts};Eb.useEffectEvent=Ts;var BY={readContext:So,use:W4,useCallback:function(t,e){return ol().memoizedState=[t,e===void 0?null:e],t},useContext:So,useEffect:X9,useImperativeHandle:function(t,e,r){r=r!=null?r.concat([t]):null,uN(4194308,4,SY.bind(null,e,t),r)},useLayoutEffect:function(t,e){return uN(4194308,4,t,e)},useInsertionEffect:function(t,e){uN(4,2,t,e)},useMemo:function(t,e){var r=ol();e=e===void 0?null:e;var n=t();if(kp){i0(!0);try{t()}finally{i0(!1)}}return r.memoizedState=[n,e],n},useReducer:function(t,e,r){var n=ol();if(r!==void 0){var a=r(e);if(kp){i0(!0);try{r(e)}finally{i0(!1)}}}else a=e;return n.memoizedState=n.baseState=a,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:a},n.queue=t,t=t.dispatch=tpe.bind(null,wn,t),[n.memoizedState,t]},useRef:function(t){var e=ol();return t={current:t},e.memoizedState=t},useState:function(t){t=KC(t);var e=t.queue,r=MY.bind(null,wn,e);return e.dispatch=r,[t.memoizedState,r]},useDebugValue:$O,useDeferredValue:function(t,e){var r=ol();return HO(r,t,e)},useTransition:function(){var t=KC(!1);return t=IY.bind(null,wn,t.queue,!0,!1),ol().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,r){var n=wn,a=ol();if(Hn){if(r===void 0)throw Error(Zt(407));r=r()}else{if(r=e(),Fa===null)throw Error(Zt(349));Un&127||fY(n,e,r)}a.memoizedState=r;var s={value:r,getSnapshot:e};return a.queue=s,X9(mY.bind(null,n,s,t),[t]),n.flags|=2048,ax(9,{destroy:void 0},hY.bind(null,n,s,r,e),null),r},useId:function(){var t=ol(),e=Fa.identifierPrefix;if(Hn){var r=Sd,n=Ad;r=(n&~(1<<32-Rc(n)-1)).toString(32)+r,e="_"+e+"R_"+r,r=wE++,0<r&&(e+="H"+r.toString(32)),e+="_"}else r=Kme++,e="_"+e+"r_"+r.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:qO,useFormState:G9,useActionState:G9,useOptimistic:function(t){var e=ol();e.memoizedState=e.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=r,e=GO.bind(null,wn,!0,r),r.dispatch=e,[t,e]},useMemoCache:UO,useCacheRefresh:function(){return ol().memoizedState=epe.bind(null,wn)},useEffectEvent:function(t){var e=ol(),r={impl:t};return e.memoizedState=r,function(){if(oa&2)throw Error(Zt(440));return r.impl.apply(void 0,arguments)}}},WO={readContext:So,use:W4,useCallback:TY,useContext:So,useEffect:VO,useImperativeHandle:jY,useInsertionEffect:EY,useLayoutEffect:AY,useMemo:CY,useReducer:cN,useRef:_Y,useState:function(){return cN(th)},useDebugValue:$O,useDeferredValue:function(t,e){var r=Zs();return kY(r,Oa.memoizedState,t,e)},useTransition:function(){var t=cN(th)[0],e=Zs().memoizedState;return[typeof t=="boolean"?t:Uy(t),e]},useSyncExternalStore:dY,useId:PY,useHostTransitionStatus:qO,useFormState:W9,useActionState:W9,useOptimistic:function(t,e){var r=Zs();return xY(r,Oa,t,e)},useMemoCache:UO,useCacheRefresh:DY};WO.useEffectEvent=NY;var UY={readContext:So,use:W4,useCallback:TY,useContext:So,useEffect:VO,useImperativeHandle:jY,useInsertionEffect:EY,useLayoutEffect:AY,useMemo:CY,useReducer:Z6,useRef:_Y,useState:function(){return Z6(th)},useDebugValue:$O,useDeferredValue:function(t,e){var r=Zs();return Oa===null?HO(r,t,e):kY(r,Oa.memoizedState,t,e)},useTransition:function(){var t=Z6(th)[0],e=Zs().memoizedState;return[typeof t=="boolean"?t:Uy(t),e]},useSyncExternalStore:dY,useId:PY,useHostTransitionStatus:qO,useFormState:K9,useActionState:K9,useOptimistic:function(t,e){var r=Zs();return Oa!==null?xY(r,Oa,t,e):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:UO,useCacheRefresh:DY};UY.useEffectEvent=NY;function Q6(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:rs({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ZC={enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pc(),a=v0(n);a.payload=e,r!=null&&(a.callback=r),e=b0(t,a,n),e!==null&&(zl(e,t,n),P2(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pc(),a=v0(n);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=b0(t,a,n),e!==null&&(zl(e,t,n),P2(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pc(),n=v0(r);n.tag=2,e!=null&&(n.callback=e),e=b0(t,n,r),e!==null&&(zl(e,t,r),P2(e,t,r))}};function Y9(t,e,r,n,a,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!bb(r,n)||!bb(a,s):!0}function Z9(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ZC.enqueueReplaceState(e,e.state,null)}function Ip(t,e){var r=e;if("ref"in e){r={};for(var n in e)n!=="ref"&&(r[n]=e[n])}if(t=t.defaultProps){r===e&&(r=rs({},r));for(var a in t)r[a]===void 0&&(r[a]=t[a])}return r}function zY(t){hE(t)}function VY(t){console.error(t)}function $Y(t){hE(t)}function _E(t,e){try{var r=t.onUncaughtError;r(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function Q9(t,e,r){try{var n=t.onCaughtError;n(r.value,{componentStack:r.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function QC(t,e,r){return r=v0(r),r.tag=3,r.payload={element:null},r.callback=function(){_E(t,e)},r}function HY(t){return t=v0(t),t.tag=3,t}function qY(t,e,r,n){var a=r.type.getDerivedStateFromError;if(typeof a=="function"){var s=n.value;t.payload=function(){return a(s)},t.callback=function(){Q9(e,r,n)}}var o=r.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Q9(e,r,n),typeof a!="function"&&(y0===null?y0=new Set([this]):y0.add(this));var l=n.stack;this.componentDidCatch(n.value,{componentStack:l!==null?l:""})})}function rpe(t,e,r,n,a){if(r.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=r.alternate,e!==null&&Wx(e,r,a,!0),r=Lc.current,r!==null){switch(r.tag){case 31:case 13:return yu===null?jE():r.alternate===null&&Ps===0&&(Ps=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===xE?r.flags|=16384:(e=r.updateQueue,e===null?r.updateQueue=new Set([n]):e.add(n),cj(t,n,a)),!1;case 22:return r.flags|=65536,n===xE?r.flags|=16384:(e=r.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=e):(r=e.retryQueue,r===null?e.retryQueue=new Set([n]):r.add(n)),cj(t,n,a)),!1}throw Error(Zt(435,r.tag))}return cj(t,n,a),jE(),!1}if(Hn)return e=Lc.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=a,n!==BC&&(t=Error(Zt(422),{cause:n}),wb(uu(t,r)))):(n!==BC&&(e=Error(Zt(423),{cause:n}),wb(uu(e,r))),t=t.current.alternate,t.flags|=65536,a&=-a,t.lanes|=a,n=uu(n,r),a=QC(t.stateNode,n,a),Y6(t,a),Ps!==4&&(Ps=2)),!1;var s=Error(Zt(520),{cause:n});if(s=uu(s,r),U2===null?U2=[s]:U2.push(s),Ps!==4&&(Ps=2),e===null)return!0;n=uu(n,r),r=e;do{switch(r.tag){case 3:return r.flags|=65536,t=a&-a,r.lanes|=t,t=QC(r.stateNode,n,t),Y6(r,t),!1;case 1:if(e=r.type,s=r.stateNode,(r.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(y0===null||!y0.has(s))))return r.flags|=65536,a&=-a,r.lanes|=a,a=HY(a),qY(a,t,r,n),Y6(r,a),!1}r=r.return}while(r!==null);return!1}var KO=Error(Zt(461)),di=!1;function xo(t,e,r,n){e.child=t===null?sY(e,null,r,n):Cp(e,t.child,r,n)}function J9(t,e,r,n,a){r=r.render;var s=e.ref;if("ref"in n){var o={};for(var l in n)l!=="ref"&&(o[l]=n[l])}else o=n;return Tp(e),n=MO(t,e,r,o,s,a),l=LO(),t!==null&&!di?(FO(t,e,a),rh(t,e,a)):(Hn&&l&&TO(e),e.flags|=1,xo(t,e,n,a),e.child)}function eF(t,e,r,n,a){if(t===null){var s=r.type;return typeof s=="function"&&!jO(s)&&s.defaultProps===void 0&&r.compare===null?(e.tag=15,e.type=s,GY(t,e,s,n,a)):(t=oN(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!XO(t,a)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:bb,r(o,n)&&t.ref===e.ref)return rh(t,e,a)}return e.flags|=1,t=Uf(s,n),t.ref=e.ref,t.return=e,e.child=t}function GY(t,e,r,n,a){if(t!==null){var s=t.memoizedProps;if(bb(s,n)&&t.ref===e.ref)if(di=!1,e.pendingProps=n=s,XO(t,a))t.flags&131072&&(di=!0);else return e.lanes=t.lanes,rh(t,e,a)}return JC(t,e,r,n,a)}function WY(t,e,r,n){var a=n.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|r:r,t!==null){for(n=e.child=t.child,a=0;n!==null;)a=a|n.lanes|n.childLanes,n=n.sibling;n=a&~s}else n=0,e.child=null;return tF(t,e,s,r,n)}if(r&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&lN(e,s!==null?s.cachePool:null),s!==null?$9(e,s):GC(),lY(e);else return n=e.lanes=536870912,tF(t,e,s!==null?s.baseLanes|r:r,r,n)}else s!==null?(lN(e,s.cachePool),$9(e,s),t0(),e.memoizedState=null):(t!==null&&lN(e,null),GC(),t0());return xo(t,e,a,r),e.child}function p2(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function tF(t,e,r,n,a){var s=IO();return s=s===null?null:{parent:ui._currentValue,pool:s},e.memoizedState={baseLanes:r,cachePool:s},t!==null&&lN(e,null),GC(),lY(e),t!==null&&Wx(t,e,n,!0),e.childLanes=a,null}function dN(t,e){return e=NE({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function rF(t,e,r){return Cp(e,t.child,null,r),t=dN(e,e.pendingProps),t.flags|=2,bc(e),e.memoizedState=null,t}function npe(t,e,r){var n=e.pendingProps,a=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Hn){if(n.mode==="hidden")return t=dN(e,n),e.lanes=536870912,p2(null,t);if(WC(e),(t=Qa)?(t=BZ(t,du),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:M0!==null?{id:Ad,overflow:Sd}:null,retryLane:536870912,hydrationErrors:null},r=QX(t),r.return=e,e.child=r,No=e,Qa=null)):t=null,t===null)throw L0(e);return e.lanes=536870912,null}return dN(e,n)}var s=t.memoizedState;if(s!==null){var o=s.dehydrated;if(WC(e),a)if(e.flags&256)e.flags&=-257,e=rF(t,e,r);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(Zt(558));else if(di||Wx(t,e,r,!1),a=(r&t.childLanes)!==0,di||a){if(n=Fa,n!==null&&(o=EX(n,r),o!==0&&o!==s.retryLane))throw s.retryLane=o,ng(t,o),zl(n,t,o),KO;jE(),e=rF(t,e,r)}else t=s.treeContext,Qa=wu(o.nextSibling),No=e,Hn=!0,x0=null,du=!1,t!==null&&eY(e,t),e=dN(e,n),e.flags|=4096;return e}return t=Uf(t.child,{mode:n.mode,children:n.children}),t.ref=e.ref,e.child=t,t.return=e,t}function fN(t,e){var r=e.ref;if(r===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(Zt(284));(t===null||t.ref!==r)&&(e.flags|=4194816)}}function JC(t,e,r,n,a){return Tp(e),r=MO(t,e,r,n,void 0,a),n=LO(),t!==null&&!di?(FO(t,e,a),rh(t,e,a)):(Hn&&n&&TO(e),e.flags|=1,xo(t,e,r,a),e.child)}function nF(t,e,r,n,a,s){return Tp(e),e.updateQueue=null,r=uY(e,n,r,a),cY(t),n=LO(),t!==null&&!di?(FO(t,e,s),rh(t,e,s)):(Hn&&n&&TO(e),e.flags|=1,xo(t,e,r,s),e.child)}function aF(t,e,r,n,a){if(Tp(e),e.stateNode===null){var s=f1,o=r.contextType;typeof o=="object"&&o!==null&&(s=So(o)),s=new r(n,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ZC,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=n,s.state=e.memoizedState,s.refs={},RO(e),o=r.contextType,s.context=typeof o=="object"&&o!==null?So(o):f1,s.state=e.memoizedState,o=r.getDerivedStateFromProps,typeof o=="function"&&(Q6(e,r,o,n),s.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(o=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),o!==s.state&&ZC.enqueueReplaceState(s,s.state,null),M2(e,n,s,a),D2(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,c=Ip(r,l);s.props=c;var u=s.context,d=r.contextType;o=f1,typeof d=="object"&&d!==null&&(o=So(d));var h=r.getDerivedStateFromProps;d=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||u!==o)&&Z9(e,s,n,o),Yh=!1;var p=e.memoizedState;s.state=p,M2(e,n,s,a),D2(),u=e.memoizedState,l||p!==u||Yh?(typeof h=="function"&&(Q6(e,r,h,n),u=e.memoizedState),(c=Yh||Y9(e,r,c,n,p,u,o))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),s.props=n,s.state=u,s.context=o,n=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,HC(t,e),o=e.memoizedProps,d=Ip(r,o),s.props=d,h=e.pendingProps,p=s.context,u=r.contextType,c=f1,typeof u=="object"&&u!==null&&(c=So(u)),l=r.getDerivedStateFromProps,(u=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==h||p!==c)&&Z9(e,s,n,c),Yh=!1,p=e.memoizedState,s.state=p,M2(e,n,s,a),D2();var g=e.memoizedState;o!==h||p!==g||Yh||t!==null&&t.dependencies!==null&&gE(t.dependencies)?(typeof l=="function"&&(Q6(e,r,l,n),g=e.memoizedState),(d=Yh||Y9(e,r,d,n,p,g,c)||t!==null&&t.dependencies!==null&&gE(t.dependencies))?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),s.props=n,s.state=g,s.context=c,n=d):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return s=n,fN(t,e),n=(e.flags&128)!==0,s||n?(s=e.stateNode,r=n&&typeof r.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&n?(e.child=Cp(e,t.child,null,a),e.child=Cp(e,null,r,a)):xo(t,e,r,a),e.memoizedState=s.state,t=e.child):t=rh(t,e,a),t}function sF(t,e,r,n){return jp(),e.flags|=256,xo(t,e,r,n),e.child}var J6={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ej(t){return{baseLanes:t,cachePool:rY()}}function tj(t,e,r){return t=t!==null?t.childLanes&~r:0,e&&(t|=Ac),t}function KY(t,e,r){var n=e.pendingProps,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(Xs.current&2)!==0),o&&(a=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(Hn){if(a?e0(e):t0(),(t=Qa)?(t=BZ(t,du),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:M0!==null?{id:Ad,overflow:Sd}:null,retryLane:536870912,hydrationErrors:null},r=QX(t),r.return=e,e.child=r,No=e,Qa=null)):t=null,t===null)throw L0(e);return hk(t)?e.lanes=32:e.lanes=536870912,null}var l=n.children;return n=n.fallback,a?(t0(),a=e.mode,l=NE({mode:"hidden",children:l},a),n=sp(n,a,r,null),l.return=e,n.return=e,l.sibling=n,e.child=l,n=e.child,n.memoizedState=ej(r),n.childLanes=tj(t,o,r),e.memoizedState=J6,p2(null,n)):(e0(e),ek(e,l))}var c=t.memoizedState;if(c!==null&&(l=c.dehydrated,l!==null)){if(s)e.flags&256?(e0(e),e.flags&=-257,e=rj(t,e,r)):e.memoizedState!==null?(t0(),e.child=t.child,e.flags|=128,e=null):(t0(),l=n.fallback,a=e.mode,n=NE({mode:"visible",children:n.children},a),l=sp(l,a,r,null),l.flags|=2,n.return=e,l.return=e,n.sibling=l,e.child=n,Cp(e,t.child,null,r),n=e.child,n.memoizedState=ej(r),n.childLanes=tj(t,o,r),e.memoizedState=J6,e=p2(null,n));else if(e0(e),hk(l)){if(o=l.nextSibling&&l.nextSibling.dataset,o)var u=o.dgst;o=u,n=Error(Zt(419)),n.stack="",n.digest=o,wb({value:n,source:null,stack:null}),e=rj(t,e,r)}else if(di||Wx(t,e,r,!1),o=(r&t.childLanes)!==0,di||o){if(o=Fa,o!==null&&(n=EX(o,r),n!==0&&n!==c.retryLane))throw c.retryLane=n,ng(t,n),zl(o,t,n),KO;fk(l)||jE(),e=rj(t,e,r)}else fk(l)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,Qa=wu(l.nextSibling),No=e,Hn=!0,x0=null,du=!1,t!==null&&eY(e,t),e=ek(e,n.children),e.flags|=4096);return e}return a?(t0(),l=n.fallback,a=e.mode,c=t.child,u=c.sibling,n=Uf(c,{mode:"hidden",children:n.children}),n.subtreeFlags=c.subtreeFlags&65011712,u!==null?l=Uf(u,l):(l=sp(l,a,r,null),l.flags|=2),l.return=e,n.return=e,n.sibling=l,e.child=n,p2(null,n),n=e.child,l=t.child.memoizedState,l===null?l=ej(r):(a=l.cachePool,a!==null?(c=ui._currentValue,a=a.parent!==c?{parent:c,pool:c}:a):a=rY(),l={baseLanes:l.baseLanes|r,cachePool:a}),n.memoizedState=l,n.childLanes=tj(t,o,r),e.memoizedState=J6,p2(t.child,n)):(e0(e),r=t.child,t=r.sibling,r=Uf(r,{mode:"visible",children:n.children}),r.return=e,r.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=r,e.memoizedState=null,r)}function ek(t,e){return e=NE({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function NE(t,e){return t=_c(22,t,null,e),t.lanes=0,t}function rj(t,e,r){return Cp(e,t.child,null,r),t=ek(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iF(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zC(t.return,e,r)}function nj(t,e,r,n,a,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a,treeForkCount:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a,o.treeForkCount=s)}function XY(t,e,r){var n=e.pendingProps,a=n.revealOrder,s=n.tail;n=n.children;var o=Xs.current,l=(o&2)!==0;if(l?(o=o&1|2,e.flags|=128):o&=1,qa(Xs,o),xo(t,e,n,r),n=Hn?yb:0,!l&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iF(t,r,e);else if(t.tag===19)iF(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&bE(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),nj(e,!1,a,r,s,n);break;case"backwards":case"unstable_legacy-backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&bE(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}nj(e,!0,r,null,s,n);break;case"together":nj(e,!1,null,null,void 0,n);break;default:e.memoizedState=null}return e.child}function rh(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),B0|=e.lanes,!(r&e.childLanes))if(t!==null){if(Wx(t,e,r,!1),(r&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(Zt(153));if(e.child!==null){for(t=e.child,r=Uf(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Uf(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function XO(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&gE(t)))}function ape(t,e,r){switch(e.tag){case 3:cE(e,e.stateNode.containerInfo),Jh(e,ui,t.memoizedState.cache),jp();break;case 27:case 5:TC(e);break;case 4:cE(e,e.stateNode.containerInfo);break;case 10:Jh(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,WC(e),null;break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(e0(e),e.flags|=128,null):r&e.child.childLanes?KY(t,e,r):(e0(e),t=rh(t,e,r),t!==null?t.sibling:null);e0(e);break;case 19:var a=(t.flags&128)!==0;if(n=(r&e.childLanes)!==0,n||(Wx(t,e,r,!1),n=(r&e.childLanes)!==0),a){if(n)return XY(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),qa(Xs,Xs.current),n)break;return null;case 22:return e.lanes=0,WY(t,e,r,e.pendingProps);case 24:Jh(e,ui,t.memoizedState.cache)}return rh(t,e,r)}function YY(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps)di=!0;else{if(!XO(t,r)&&!(e.flags&128))return di=!1,ape(t,e,r);di=!!(t.flags&131072)}else di=!1,Hn&&e.flags&1048576&&JX(e,yb,e.index);switch(e.lanes=0,e.tag){case 16:e:{var n=e.pendingProps;if(t=Rm(e.elementType),e.type=t,typeof t=="function")jO(t)?(n=Ip(t,n),e.tag=1,e=aF(null,e,t,n,r)):(e.tag=0,e=JC(null,e,t,n,r));else{if(t!=null){var a=t.$$typeof;if(a===hO){e.tag=11,e=J9(null,e,t,n,r);break e}else if(a===mO){e.tag=14,e=eF(null,e,t,n,r);break e}}throw e=SC(t)||t,Error(Zt(306,e,""))}}return e;case 0:return JC(t,e,e.type,e.pendingProps,r);case 1:return n=e.type,a=Ip(n,e.pendingProps),aF(t,e,n,a,r);case 3:e:{if(cE(e,e.stateNode.containerInfo),t===null)throw Error(Zt(387));n=e.pendingProps;var s=e.memoizedState;a=s.element,HC(t,e),M2(e,n,null,r);var o=e.memoizedState;if(n=o.cache,Jh(e,ui,n),n!==s.cache&&VC(e,[ui],r,!0),D2(),n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=sF(t,e,n,r);break e}else if(n!==a){a=uu(Error(Zt(424)),e),wb(a),e=sF(t,e,n,r);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qa=wu(t.firstChild),No=e,Hn=!0,x0=null,du=!0,r=sY(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(jp(),n===a){e=rh(t,e,r);break e}xo(t,e,n,r)}e=e.child}return e;case 26:return fN(t,e),t===null?(r=SF(e.type,null,e.pendingProps,null))?e.memoizedState=r:Hn||(r=e.type,t=e.pendingProps,n=IE(g0.current).createElement(r),n[_o]=e,n[Wl]=t,jo(n,r,t),Zi(n),e.stateNode=n):e.memoizedState=SF(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return TC(e),t===null&&Hn&&(n=e.stateNode=UZ(e.type,e.pendingProps,g0.current),No=e,du=!0,a=Qa,im(e.type)?(mk=a,Qa=wu(n.firstChild)):Qa=a),xo(t,e,e.pendingProps.children,r),fN(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Hn&&((a=n=Qa)&&(n=Ppe(n,e.type,e.pendingProps,du),n!==null?(e.stateNode=n,No=e,Qa=wu(n.firstChild),du=!1,a=!0):a=!1),a||L0(e)),TC(e),a=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,n=s.children,uk(a,s)?n=null:o!==null&&uk(a,o)&&(e.flags|=32),e.memoizedState!==null&&(a=MO(t,e,Xme,null,null,r),jb._currentValue=a),fN(t,e),xo(t,e,n,r),e.child;case 6:return t===null&&Hn&&((t=r=Qa)&&(r=Dpe(r,e.pendingProps,du),r!==null?(e.stateNode=r,No=e,Qa=null,t=!0):t=!1),t||L0(e)),null;case 13:return KY(t,e,r);case 4:return cE(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Cp(e,null,n,r):xo(t,e,n,r),e.child;case 11:return J9(t,e,e.type,e.pendingProps,r);case 7:return xo(t,e,e.pendingProps,r),e.child;case 8:return xo(t,e,e.pendingProps.children,r),e.child;case 12:return xo(t,e,e.pendingProps.children,r),e.child;case 10:return n=e.pendingProps,Jh(e,e.type,n.value),xo(t,e,n.children,r),e.child;case 9:return a=e.type._context,n=e.pendingProps.children,Tp(e),a=So(a),n=n(a),e.flags|=1,xo(t,e,n,r),e.child;case 14:return eF(t,e,e.type,e.pendingProps,r);case 15:return GY(t,e,e.type,e.pendingProps,r);case 19:return XY(t,e,r);case 31:return npe(t,e,r);case 22:return WY(t,e,r,e.pendingProps);case 24:return Tp(e),n=So(ui),t===null?(a=IO(),a===null&&(a=Fa,s=kO(),a.pooledCache=s,s.refCount++,s!==null&&(a.pooledCacheLanes|=r),a=s),e.memoizedState={parent:n,cache:a},RO(e),Jh(e,ui,a)):(t.lanes&r&&(HC(t,e),M2(e,null,null,r),D2()),a=t.memoizedState,s=e.memoizedState,a.parent!==n?(a={parent:n,cache:n},e.memoizedState=a,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=a),Jh(e,ui,n)):(n=s.cache,Jh(e,ui,n),n!==a.cache&&VC(e,[ui],r,!0))),xo(t,e,e.pendingProps.children,r),e.child;case 29:throw e.pendingProps}throw Error(Zt(156,e.tag))}function ff(t){t.flags|=4}function aj(t,e,r,n,a){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(a&335544128)===a)if(t.stateNode.complete)t.flags|=8192;else if(yZ())t.flags|=8192;else throw op=xE,OO}else t.flags&=-16777217}function oF(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!$Z(e))if(yZ())t.flags|=8192;else throw op=xE,OO}function D5(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?wX():536870912,t.lanes|=e,sx|=e)}function Fv(t,e){if(!Hn)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Xa(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&65011712,n|=a.flags&65011712,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function spe(t,e,r){var n=e.pendingProps;switch(CO(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(e),null;case 1:return Xa(e),null;case 3:return r=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),zf(ui),J1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ng(e)?ff(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,X6())),Xa(e),null;case 26:var a=e.type,s=e.memoizedState;return t===null?(ff(e),s!==null?(Xa(e),oF(e,s)):(Xa(e),aj(e,a,null,n,r))):s?s!==t.memoizedState?(ff(e),Xa(e),oF(e,s)):(Xa(e),e.flags&=-16777217):(t=t.memoizedProps,t!==n&&ff(e),Xa(e),aj(e,a,t,n,r)),null;case 27:if(uE(e),r=g0.current,a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&ff(e);else{if(!n){if(e.stateNode===null)throw Error(Zt(166));return Xa(e),null}t=Dd.current,Ng(e)?M9(e):(t=UZ(a,n,r),e.stateNode=t,ff(e))}return Xa(e),null;case 5:if(uE(e),a=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==n&&ff(e);else{if(!n){if(e.stateNode===null)throw Error(Zt(166));return Xa(e),null}if(s=Dd.current,Ng(e))M9(e);else{var o=IE(g0.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof n.is=="string"?o.createElement("select",{is:n.is}):o.createElement("select"),n.multiple?s.multiple=!0:n.size&&(s.size=n.size);break;default:s=typeof n.is=="string"?o.createElement(a,{is:n.is}):o.createElement(a)}}s[_o]=e,s[Wl]=n;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)s.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=s;e:switch(jo(s,a,n),a){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ff(e)}}return Xa(e),aj(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,r),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==n&&ff(e);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Zt(166));if(t=g0.current,Ng(e)){if(t=e.stateNode,r=e.memoizedProps,n=null,a=No,a!==null)switch(a.tag){case 27:case 5:n=a.memoizedProps}t[_o]=e,t=!!(t.nodeValue===r||n!==null&&n.suppressHydrationWarning===!0||MZ(t.nodeValue,r)),t||L0(e,!0)}else t=IE(t).createTextNode(n),t[_o]=e,e.stateNode=t}return Xa(e),null;case 31:if(r=e.memoizedState,t===null||t.memoizedState!==null){if(n=Ng(e),r!==null){if(t===null){if(!n)throw Error(Zt(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Zt(557));t[_o]=e}else jp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xa(e),t=!1}else r=X6(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return e.flags&256?(bc(e),e):(bc(e),null);if(e.flags&128)throw Error(Zt(558))}return Xa(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(a=Ng(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Zt(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Zt(317));a[_o]=e}else jp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xa(e),a=!1}else a=X6(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),a=!0;if(!a)return e.flags&256?(bc(e),e):(bc(e),null)}return bc(e),e.flags&128?(e.lanes=r,e):(r=n!==null,t=t!==null&&t.memoizedState!==null,r&&(n=e.child,a=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(a=n.alternate.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==a&&(n.flags|=2048)),r!==t&&r&&(e.child.flags|=8192),D5(e,e.updateQueue),Xa(e),null);case 4:return J1(),t===null&&rR(e.stateNode.containerInfo),Xa(e),null;case 10:return zf(e.type),Xa(e),null;case 19:if(ro(Xs),n=e.memoizedState,n===null)return Xa(e),null;if(a=(e.flags&128)!==0,s=n.rendering,s===null)if(a)Fv(n,!1);else{if(Ps!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=bE(t),s!==null){for(e.flags|=128,Fv(n,!1),t=s.updateQueue,e.updateQueue=t,D5(e,t),e.subtreeFlags=0,t=r,r=e.child;r!==null;)ZX(r,t),r=r.sibling;return qa(Xs,Xs.current&1|2),Hn&&yf(e,n.treeForkCount),e.child}t=t.sibling}n.tail!==null&&Ic()>AE&&(e.flags|=128,a=!0,Fv(n,!1),e.lanes=4194304)}else{if(!a)if(t=bE(s),t!==null){if(e.flags|=128,a=!0,t=t.updateQueue,e.updateQueue=t,D5(e,t),Fv(n,!0),n.tail===null&&n.tailMode==="hidden"&&!s.alternate&&!Hn)return Xa(e),null}else 2*Ic()-n.renderingStartTime>AE&&r!==536870912&&(e.flags|=128,a=!0,Fv(n,!1),e.lanes=4194304);n.isBackwards?(s.sibling=e.child,e.child=s):(t=n.last,t!==null?t.sibling=s:e.child=s,n.last=s)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Ic(),t.sibling=null,r=Xs.current,qa(Xs,a?r&1|2:r&1),Hn&&yf(e,n.treeForkCount),t):(Xa(e),null);case 22:case 23:return bc(e),PO(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?r&536870912&&!(e.flags&128)&&(Xa(e),e.subtreeFlags&6&&(e.flags|=8192)):Xa(e),r=e.updateQueue,r!==null&&D5(e,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==r&&(e.flags|=2048),t!==null&&ro(ip),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),zf(ui),Xa(e),null;case 25:return null;case 30:return null}throw Error(Zt(156,e.tag))}function ipe(t,e){switch(CO(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zf(ui),J1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return uE(e),null;case 31:if(e.memoizedState!==null){if(bc(e),e.alternate===null)throw Error(Zt(340));jp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(bc(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Zt(340));jp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ro(Xs),null;case 4:return J1(),null;case 10:return zf(e.type),null;case 22:case 23:return bc(e),PO(),t!==null&&ro(ip),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return zf(ui),null;case 25:return null;default:return null}}function ZY(t,e){switch(CO(e),e.tag){case 3:zf(ui),J1();break;case 26:case 27:case 5:uE(e);break;case 4:J1();break;case 31:e.memoizedState!==null&&bc(e);break;case 13:bc(e);break;case 19:ro(Xs);break;case 10:zf(e.type);break;case 22:case 23:bc(e),PO(),t!==null&&ro(ip);break;case 24:zf(ui)}}function zy(t,e){try{var r=e.updateQueue,n=r!==null?r.lastEffect:null;if(n!==null){var a=n.next;r=a;do{if((r.tag&t)===t){n=void 0;var s=r.create,o=r.inst;n=s(),o.destroy=n}r=r.next}while(r!==a)}}catch(l){_a(e,e.return,l)}}function F0(t,e,r){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var s=a.next;n=s;do{if((n.tag&t)===t){var o=n.inst,l=o.destroy;if(l!==void 0){o.destroy=void 0,a=e;var c=r,u=l;try{u()}catch(d){_a(a,c,d)}}}n=n.next}while(n!==s)}}catch(d){_a(e,e.return,d)}}function QY(t){var e=t.updateQueue;if(e!==null){var r=t.stateNode;try{oY(e,r)}catch(n){_a(t,t.return,n)}}}function JY(t,e,r){r.props=Ip(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(n){_a(t,e,n)}}function F2(t,e){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof r=="function"?t.refCleanup=r(n):r.current=n}}catch(a){_a(t,e,a)}}function jd(t,e){var r=t.ref,n=t.refCleanup;if(r!==null)if(typeof n=="function")try{n()}catch(a){_a(t,e,a)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(a){_a(t,e,a)}else r.current=null}function eZ(t){var e=t.type,r=t.memoizedProps,n=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(a){_a(t,t.return,a)}}function sj(t,e,r){try{var n=t.stateNode;Tpe(n,t.type,r,e),n[Wl]=e}catch(a){_a(t,t.return,a)}}function tZ(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&im(t.type)||t.tag===4}function ij(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tZ(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&im(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tk(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,e):(e=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,e.appendChild(t),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Of));else if(n!==4&&(n===27&&im(t.type)&&(r=t.stateNode,e=null),t=t.child,t!==null))for(tk(t,e,r),t=t.sibling;t!==null;)tk(t,e,r),t=t.sibling}function EE(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(n===27&&im(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(EE(t,e,r),t=t.sibling;t!==null;)EE(t,e,r),t=t.sibling}function rZ(t){var e=t.stateNode,r=t.memoizedProps;try{for(var n=t.type,a=e.attributes;a.length;)e.removeAttributeNode(a[0]);jo(e,n,r),e[_o]=t,e[Wl]=r}catch(s){_a(t,t.return,s)}}var Nf=!1,ci=!1,oj=!1,lF=typeof WeakSet=="function"?WeakSet:Set,Xi=null;function ope(t,e){if(t=t.containerInfo,lk=DE,t=$X(t),EO(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==r||a!==0&&h.nodeType!==3||(l=o+a),h!==s||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===r&&++u===a&&(l=o),p===s&&++d===n&&(c=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ck={focusedElem:t,selectionRange:r},DE=!1,Xi=e;Xi!==null;)if(e=Xi,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Xi=t;else for(;Xi!==null;){switch(e=Xi,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)a=t[r],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,r=e,a=s.memoizedProps,s=s.memoizedState,n=r.stateNode;try{var b=Ip(r.type,a);t=n.getSnapshotBeforeUpdate(b,s),n.__reactInternalSnapshotBeforeUpdate=t}catch(w){_a(r,r.return,w)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,r=t.nodeType,r===9)dk(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dk(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(Zt(163))}if(t=e.sibling,t!==null){t.return=e.return,Xi=t;break}Xi=e.return}}function nZ(t,e,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:mf(t,r),n&4&&zy(5,r);break;case 1:if(mf(t,r),n&4)if(t=r.stateNode,e===null)try{t.componentDidMount()}catch(o){_a(r,r.return,o)}else{var a=Ip(r.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(a,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){_a(r,r.return,o)}}n&64&&QY(r),n&512&&F2(r,r.return);break;case 3:if(mf(t,r),n&64&&(t=r.updateQueue,t!==null)){if(e=null,r.child!==null)switch(r.child.tag){case 27:case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}try{oY(t,e)}catch(o){_a(r,r.return,o)}}break;case 27:e===null&&n&4&&rZ(r);case 26:case 5:mf(t,r),e===null&&n&4&&eZ(r),n&512&&F2(r,r.return);break;case 12:mf(t,r);break;case 31:mf(t,r),n&4&&iZ(t,r);break;case 13:mf(t,r),n&4&&oZ(t,r),n&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=gpe.bind(null,r),Mpe(t,r))));break;case 22:if(n=r.memoizedState!==null||Nf,!n){e=e!==null&&e.memoizedState!==null||ci,a=Nf;var s=ci;Nf=n,(ci=e)&&!s?vf(t,r,(r.subtreeFlags&8772)!==0):mf(t,r),Nf=a,ci=s}break;case 30:break;default:mf(t,r)}}function aZ(t){var e=t.alternate;e!==null&&(t.alternate=null,aZ(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&vO(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var is=null,Rl=!1;function hf(t,e,r){for(r=r.child;r!==null;)sZ(t,e,r),r=r.sibling}function sZ(t,e,r){if(Oc&&typeof Oc.onCommitFiberUnmount=="function")try{Oc.onCommitFiberUnmount(Py,r)}catch{}switch(r.tag){case 26:ci||jd(r,e),hf(t,e,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ci||jd(r,e);var n=is,a=Rl;im(r.type)&&(is=r.stateNode,Rl=!1),hf(t,e,r),V2(r.stateNode),is=n,Rl=a;break;case 5:ci||jd(r,e);case 6:if(n=is,a=Rl,is=null,hf(t,e,r),is=n,Rl=a,is!==null)if(Rl)try{(is.nodeType===9?is.body:is.nodeName==="HTML"?is.ownerDocument.body:is).removeChild(r.stateNode)}catch(s){_a(r,e,s)}else try{is.removeChild(r.stateNode)}catch(s){_a(r,e,s)}break;case 18:is!==null&&(Rl?(t=is,wF(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),cx(t)):wF(is,r.stateNode));break;case 4:n=is,a=Rl,is=r.stateNode.containerInfo,Rl=!0,hf(t,e,r),is=n,Rl=a;break;case 0:case 11:case 14:case 15:F0(2,r,e),ci||F0(4,r,e),hf(t,e,r);break;case 1:ci||(jd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"&&JY(r,e,n)),hf(t,e,r);break;case 21:hf(t,e,r);break;case 22:ci=(n=ci)||r.memoizedState!==null,hf(t,e,r),ci=n;break;default:hf(t,e,r)}}function iZ(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{cx(t)}catch(r){_a(e,e.return,r)}}}function oZ(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{cx(t)}catch(r){_a(e,e.return,r)}}function lpe(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new lF),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new lF),e;default:throw Error(Zt(435,t.tag))}}function M5(t,e){var r=lpe(t);e.forEach(function(n){if(!r.has(n)){r.add(n);var a=xpe.bind(null,t,n);n.then(a,a)}})}function Il(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n],s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 27:if(im(l.type)){is=l.stateNode,Rl=!1;break e}break;case 5:is=l.stateNode,Rl=!1;break e;case 3:case 4:is=l.stateNode.containerInfo,Rl=!0;break e}l=l.return}if(is===null)throw Error(Zt(160));sZ(s,o,a),is=null,Rl=!1,s=a.alternate,s!==null&&(s.return=null),a.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)lZ(e,t),e=e.sibling}var Wu=null;function lZ(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Il(e,t),Ol(t),n&4&&(F0(3,t,t.return),zy(3,t),F0(5,t,t.return));break;case 1:Il(e,t),Ol(t),n&512&&(ci||r===null||jd(r,r.return)),n&64&&Nf&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?n:r.concat(n))));break;case 26:var a=Wu;if(Il(e,t),Ol(t),n&512&&(ci||r===null||jd(r,r.return)),n&4){var s=r!==null?r.memoizedState:null;if(n=t.memoizedState,r===null)if(n===null)if(t.stateNode===null){e:{n=t.type,r=t.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":s=a.getElementsByTagName("title")[0],(!s||s[Ly]||s[_o]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=a.createElement(n),a.head.insertBefore(s,a.querySelector("head > title"))),jo(s,n,r),s[_o]=t,Zi(s),n=s;break e;case"link":var o=TF("link","href",a).get(n+(r.href||""));if(o){for(var l=0;l<o.length;l++)if(s=o[l],s.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&s.getAttribute("rel")===(r.rel==null?null:r.rel)&&s.getAttribute("title")===(r.title==null?null:r.title)&&s.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){o.splice(l,1);break t}}s=a.createElement(n),jo(s,n,r),a.head.appendChild(s);break;case"meta":if(o=TF("meta","content",a).get(n+(r.content||""))){for(l=0;l<o.length;l++)if(s=o[l],s.getAttribute("content")===(r.content==null?null:""+r.content)&&s.getAttribute("name")===(r.name==null?null:r.name)&&s.getAttribute("property")===(r.property==null?null:r.property)&&s.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&s.getAttribute("charset")===(r.charSet==null?null:r.charSet)){o.splice(l,1);break t}}s=a.createElement(n),jo(s,n,r),a.head.appendChild(s);break;default:throw Error(Zt(468,n))}s[_o]=t,Zi(s),n=s}t.stateNode=n}else CF(a,t.type,t.stateNode);else t.stateNode=jF(a,n,t.memoizedProps);else s!==n?(s===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):s.count--,n===null?CF(a,t.type,t.stateNode):jF(a,n,t.memoizedProps)):n===null&&t.stateNode!==null&&sj(t,t.memoizedProps,r.memoizedProps)}break;case 27:Il(e,t),Ol(t),n&512&&(ci||r===null||jd(r,r.return)),r!==null&&n&4&&sj(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Il(e,t),Ol(t),n&512&&(ci||r===null||jd(r,r.return)),t.flags&32){a=t.stateNode;try{tx(a,"")}catch(b){_a(t,t.return,b)}}n&4&&t.stateNode!=null&&(a=t.memoizedProps,sj(t,a,r!==null?r.memoizedProps:a)),n&1024&&(oj=!0);break;case 6:if(Il(e,t),Ol(t),n&4){if(t.stateNode===null)throw Error(Zt(162));n=t.memoizedProps,r=t.stateNode;try{r.nodeValue=n}catch(b){_a(t,t.return,b)}}break;case 3:if(pN=null,a=Wu,Wu=OE(e.containerInfo),Il(e,t),Wu=a,Ol(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{cx(e.containerInfo)}catch(b){_a(t,t.return,b)}oj&&(oj=!1,cZ(t));break;case 4:n=Wu,Wu=OE(t.stateNode.containerInfo),Il(e,t),Ol(t),Wu=n;break;case 12:Il(e,t),Ol(t);break;case 31:Il(e,t),Ol(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,M5(t,n)));break;case 13:Il(e,t),Ol(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Y4=Ic()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,M5(t,n)));break;case 22:a=t.memoizedState!==null;var c=r!==null&&r.memoizedState!==null,u=Nf,d=ci;if(Nf=u||a,ci=d||c,Il(e,t),ci=d,Nf=u,Ol(t),n&8192)e:for(e=t.stateNode,e._visibility=a?e._visibility&-2:e._visibility|1,a&&(r===null||c||Nf||ci||Pm(t)),r=null,e=t;;){if(e.tag===5||e.tag===26){if(r===null){c=r=e;try{if(s=c.stateNode,a)o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(b){_a(c,c.return,b)}}}else if(e.tag===6){if(r===null){c=e;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(b){_a(c,c.return,b)}}}else if(e.tag===18){if(r===null){c=e;try{var g=c.stateNode;a?_F(g,!0):_F(c.stateNode,!1)}catch(b){_a(c,c.return,b)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}n&4&&(n=t.updateQueue,n!==null&&(r=n.retryQueue,r!==null&&(n.retryQueue=null,M5(t,r))));break;case 19:Il(e,t),Ol(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,M5(t,n)));break;case 30:break;case 21:break;default:Il(e,t),Ol(t)}}function Ol(t){var e=t.flags;if(e&2){try{for(var r,n=t.return;n!==null;){if(tZ(n)){r=n;break}n=n.return}if(r==null)throw Error(Zt(160));switch(r.tag){case 27:var a=r.stateNode,s=ij(t);EE(t,s,a);break;case 5:var o=r.stateNode;r.flags&32&&(tx(o,""),r.flags&=-33);var l=ij(t);EE(t,l,o);break;case 3:case 4:var c=r.stateNode.containerInfo,u=ij(t);tk(t,u,c);break;default:throw Error(Zt(161))}}catch(d){_a(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cZ(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;cZ(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function mf(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)nZ(t,e.alternate,e),e=e.sibling}function Pm(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:F0(4,e,e.return),Pm(e);break;case 1:jd(e,e.return);var r=e.stateNode;typeof r.componentWillUnmount=="function"&&JY(e,e.return,r),Pm(e);break;case 27:V2(e.stateNode);case 26:case 5:jd(e,e.return),Pm(e);break;case 22:e.memoizedState===null&&Pm(e);break;case 30:Pm(e);break;default:Pm(e)}t=t.sibling}}function vf(t,e,r){for(r=r&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,a=t,s=e,o=s.flags;switch(s.tag){case 0:case 11:case 15:vf(a,s,r),zy(4,s);break;case 1:if(vf(a,s,r),n=s,a=n.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(u){_a(n,n.return,u)}if(n=s,a=n.updateQueue,a!==null){var l=n.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a<c.length;a++)iY(c[a],l)}catch(u){_a(n,n.return,u)}}r&&o&64&&QY(s),F2(s,s.return);break;case 27:rZ(s);case 26:case 5:vf(a,s,r),r&&n===null&&o&4&&eZ(s),F2(s,s.return);break;case 12:vf(a,s,r);break;case 31:vf(a,s,r),r&&o&4&&iZ(a,s);break;case 13:vf(a,s,r),r&&o&4&&oZ(a,s);break;case 22:s.memoizedState===null&&vf(a,s,r),F2(s,s.return);break;case 30:break;default:vf(a,s,r)}e=e.sibling}}function YO(t,e){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&By(r))}function ZO(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&By(t))}function Vu(t,e,r,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)uZ(t,e,r,n),e=e.sibling}function uZ(t,e,r,n){var a=e.flags;switch(e.tag){case 0:case 11:case 15:Vu(t,e,r,n),a&2048&&zy(9,e);break;case 1:Vu(t,e,r,n);break;case 3:Vu(t,e,r,n),a&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&By(t)));break;case 12:if(a&2048){Vu(t,e,r,n),t=e.stateNode;try{var s=e.memoizedProps,o=s.id,l=s.onPostCommit;typeof l=="function"&&l(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){_a(e,e.return,c)}}else Vu(t,e,r,n);break;case 31:Vu(t,e,r,n);break;case 13:Vu(t,e,r,n);break;case 23:break;case 22:s=e.stateNode,o=e.alternate,e.memoizedState!==null?s._visibility&2?Vu(t,e,r,n):B2(t,e):s._visibility&2?Vu(t,e,r,n):(s._visibility|=2,qg(t,e,r,n,(e.subtreeFlags&10256)!==0||!1)),a&2048&&YO(o,e);break;case 24:Vu(t,e,r,n),a&2048&&ZO(e.alternate,e);break;default:Vu(t,e,r,n)}}function qg(t,e,r,n,a){for(a=a&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,o=e,l=r,c=n,u=o.flags;switch(o.tag){case 0:case 11:case 15:qg(s,o,l,c,a),zy(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&2?qg(s,o,l,c,a):B2(s,o):(d._visibility|=2,qg(s,o,l,c,a)),a&&u&2048&&YO(o.alternate,o);break;case 24:qg(s,o,l,c,a),a&&u&2048&&ZO(o.alternate,o);break;default:qg(s,o,l,c,a)}e=e.sibling}}function B2(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var r=t,n=e,a=n.flags;switch(n.tag){case 22:B2(r,n),a&2048&&YO(n.alternate,n);break;case 24:B2(r,n),a&2048&&ZO(n.alternate,n);break;default:B2(r,n)}e=e.sibling}}var g2=8192;function Eg(t,e,r){if(t.subtreeFlags&g2)for(t=t.child;t!==null;)dZ(t,e,r),t=t.sibling}function dZ(t,e,r){switch(t.tag){case 26:Eg(t,e,r),t.flags&g2&&t.memoizedState!==null&&Kpe(r,Wu,t.memoizedState,t.memoizedProps);break;case 5:Eg(t,e,r);break;case 3:case 4:var n=Wu;Wu=OE(t.stateNode.containerInfo),Eg(t,e,r),Wu=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=g2,g2=16777216,Eg(t,e,r),g2=n):Eg(t,e,r));break;default:Eg(t,e,r)}}function fZ(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Bv(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];Xi=n,mZ(n,t)}fZ(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)hZ(t),t=t.sibling}function hZ(t){switch(t.tag){case 0:case 11:case 15:Bv(t),t.flags&2048&&F0(9,t,t.return);break;case 3:Bv(t);break;case 12:Bv(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,hN(t)):Bv(t);break;default:Bv(t)}}function hN(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var r=0;r<e.length;r++){var n=e[r];Xi=n,mZ(n,t)}fZ(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:F0(8,e,e.return),hN(e);break;case 22:r=e.stateNode,r._visibility&2&&(r._visibility&=-3,hN(e));break;default:hN(e)}t=t.sibling}}function mZ(t,e){for(;Xi!==null;){var r=Xi;switch(r.tag){case 0:case 11:case 15:F0(8,r,e);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var n=r.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:By(r.memoizedState.cache)}if(n=r.child,n!==null)n.return=r,Xi=n;else e:for(r=t;Xi!==null;){n=Xi;var a=n.sibling,s=n.return;if(aZ(n),n===r){Xi=null;break e}if(a!==null){a.return=s,Xi=a;break e}Xi=s}}}var cpe={getCacheForType:function(t){var e=So(ui),r=e.data.get(t);return r===void 0&&(r=t(),e.data.set(t,r)),r},cacheSignal:function(){return So(ui).controller.signal}},upe=typeof WeakMap=="function"?WeakMap:Map,oa=0,Fa=null,Ln=null,Un=0,va=0,pc=null,l0=!1,Xx=!1,QO=!1,nh=0,Ps=0,B0=0,lp=0,JO=0,Ac=0,sx=0,U2=null,Pl=null,rk=!1,Y4=0,pZ=0,AE=1/0,SE=null,y0=null,ki=0,w0=null,ix=null,Vf=0,nk=0,ak=null,gZ=null,z2=0,sk=null;function Pc(){return oa&2&&Un!==0?Un&-Un:cn.T!==null?tR():AX()}function xZ(){if(Ac===0)if(!(Un&536870912)||Hn){var t=T5;T5<<=1,!(T5&3932160)&&(T5=262144),Ac=t}else Ac=536870912;return t=Lc.current,t!==null&&(t.flags|=32),Ac}function zl(t,e,r){(t===Fa&&(va===2||va===9)||t.cancelPendingCommit!==null)&&(ox(t,0),c0(t,Un,Ac,!1)),My(t,r),(!(oa&2)||t!==Fa)&&(t===Fa&&(!(oa&2)&&(lp|=r),Ps===4&&c0(t,Un,Ac,!1)),Jd(t))}function vZ(t,e,r){if(oa&6)throw Error(Zt(327));var n=!r&&(e&127)===0&&(e&t.expiredLanes)===0||Dy(t,e),a=n?hpe(t,e):lj(t,e,!0),s=n;do{if(a===0){Xx&&!n&&c0(t,e,0,!1);break}else{if(r=t.current.alternate,s&&!dpe(r)){a=lj(t,e,!1),s=!1;continue}if(a===2){if(s=e,t.errorRecoveryDisabledLanes&s)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var l=t;a=U2;var c=l.current.memoizedState.isDehydrated;if(c&&(ox(l,o).flags|=256),o=lj(l,o,!1),o!==2){if(QO&&!c){l.errorRecoveryDisabledLanes|=s,lp|=s,a=4;break e}s=Pl,Pl=a,s!==null&&(Pl===null?Pl=s:Pl.push.apply(Pl,s))}a=o}if(s=!1,a!==2)continue}}if(a===1){ox(t,0),c0(t,e,0,!0);break}e:{switch(n=t,s=a,s){case 0:case 1:throw Error(Zt(345));case 4:if((e&4194048)!==e)break;case 6:c0(n,e,Ac,!l0);break e;case 2:Pl=null;break;case 3:case 5:break;default:throw Error(Zt(329))}if((e&62914560)===e&&(a=Y4+300-Ic(),10<a)){if(c0(n,e,Ac,!l0),B4(n,0,!0)!==0)break e;Vf=e,n.timeoutHandle=FZ(cF.bind(null,n,r,Pl,SE,rk,e,Ac,lp,sx,l0,s,"Throttled",-0,0),a);break e}cF(n,r,Pl,SE,rk,e,Ac,lp,sx,l0,s,null,-0,0)}}break}while(!0);Jd(t)}function cF(t,e,r,n,a,s,o,l,c,u,d,h,p,g){if(t.timeoutHandle=-1,h=e.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Of},dZ(e,s,h);var b=(s&62914560)===s?Y4-Ic():(s&4194048)===s?pZ-Ic():0;if(b=Xpe(h,b),b!==null){Vf=s,t.cancelPendingCommit=b(dF.bind(null,t,e,s,r,n,a,o,l,c,d,h,null,p,g)),c0(t,s,o,!u);return}}dF(t,e,s,r,n,a,o,l,c)}function dpe(t){for(var e=t;;){var r=e.tag;if((r===0||r===11||r===15)&&e.flags&16384&&(r=e.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var n=0;n<r.length;n++){var a=r[n],s=a.getSnapshot;a=a.value;try{if(!Mc(s(),a))return!1}catch{return!1}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function c0(t,e,r,n){e&=~JO,e&=~lp,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var a=e;0<a;){var s=31-Rc(a),o=1<<s;n[s]=-1,a&=~o}r!==0&&_X(t,r,e)}function Z4(){return oa&6?!0:(Vy(0),!1)}function eR(){if(Ln!==null){if(va===0)var t=Ln.return;else t=Ln,Rf=ag=null,BO(t),I1=null,_b=0,t=Ln;for(;t!==null;)ZY(t.alternate,t),t=t.return;Ln=null}}function ox(t,e){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Ipe(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Vf=0,eR(),Fa=t,Ln=r=Uf(t.current,null),Un=e,va=0,pc=null,l0=!1,Xx=Dy(t,e),QO=!1,sx=Ac=JO=lp=B0=Ps=0,Pl=U2=null,rk=!1,e&8&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var a=31-Rc(n),s=1<<a;e|=t[a],n&=~s}return nh=e,$4(),r}function bZ(t,e){wn=null,cn.H=Eb,e===Kx||e===q4?(e=z9(),va=3):e===OO?(e=z9(),va=4):va=e===KO?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,pc=e,Ln===null&&(Ps=1,_E(t,uu(e,t.current)))}function yZ(){var t=Lc.current;return t===null?!0:(Un&4194048)===Un?yu===null:(Un&62914560)===Un||Un&536870912?t===yu:!1}function wZ(){var t=cn.H;return cn.H=Eb,t===null?Eb:t}function _Z(){var t=cn.A;return cn.A=cpe,t}function jE(){Ps=4,l0||(Un&4194048)!==Un&&Lc.current!==null||(Xx=!0),!(B0&134217727)&&!(lp&134217727)||Fa===null||c0(Fa,Un,Ac,!1)}function lj(t,e,r){var n=oa;oa|=2;var a=wZ(),s=_Z();(Fa!==t||Un!==e)&&(SE=null,ox(t,e)),e=!1;var o=Ps;e:do try{if(va!==0&&Ln!==null){var l=Ln,c=pc;switch(va){case 8:eR(),o=6;break e;case 3:case 2:case 9:case 6:Lc.current===null&&(e=!0);var u=va;if(va=0,pc=null,p1(t,l,c,u),r&&Xx){o=0;break e}break;default:u=va,va=0,pc=null,p1(t,l,c,u)}}fpe(),o=Ps;break}catch(d){bZ(t,d)}while(!0);return e&&t.shellSuspendCounter++,Rf=ag=null,oa=n,cn.H=a,cn.A=s,Ln===null&&(Fa=null,Un=0,$4()),o}function fpe(){for(;Ln!==null;)NZ(Ln)}function hpe(t,e){var r=oa;oa|=2;var n=wZ(),a=_Z();Fa!==t||Un!==e?(SE=null,AE=Ic()+500,ox(t,e)):Xx=Dy(t,e);e:do try{if(va!==0&&Ln!==null){e=Ln;var s=pc;t:switch(va){case 1:va=0,pc=null,p1(t,e,s,1);break;case 2:case 9:if(U9(s)){va=0,pc=null,uF(e);break}e=function(){va!==2&&va!==9||Fa!==t||(va=7),Jd(t)},s.then(e,e);break e;case 3:va=7;break e;case 4:va=5;break e;case 7:U9(s)?(va=0,pc=null,uF(e)):(va=0,pc=null,p1(t,e,s,7));break;case 5:var o=null;switch(Ln.tag){case 26:o=Ln.memoizedState;case 5:case 27:var l=Ln;if(o?$Z(o):l.stateNode.complete){va=0,pc=null;var c=l.sibling;if(c!==null)Ln=c;else{var u=l.return;u!==null?(Ln=u,Q4(u)):Ln=null}break t}}va=0,pc=null,p1(t,e,s,5);break;case 6:va=0,pc=null,p1(t,e,s,6);break;case 8:eR(),Ps=6;break e;default:throw Error(Zt(462))}}mpe();break}catch(d){bZ(t,d)}while(!0);return Rf=ag=null,cn.H=n,cn.A=a,oa=r,Ln!==null?0:(Fa=null,Un=0,$4(),Ps)}function mpe(){for(;Ln!==null&&!L0e();)NZ(Ln)}function NZ(t){var e=YY(t.alternate,t,nh);t.memoizedProps=t.pendingProps,e===null?Q4(t):Ln=e}function uF(t){var e=t,r=e.alternate;switch(e.tag){case 15:case 0:e=nF(r,e,e.pendingProps,e.type,void 0,Un);break;case 11:e=nF(r,e,e.pendingProps,e.type.render,e.ref,Un);break;case 5:BO(e);default:ZY(r,e),e=Ln=ZX(e,nh),e=YY(r,e,nh)}t.memoizedProps=t.pendingProps,e===null?Q4(t):Ln=e}function p1(t,e,r,n){Rf=ag=null,BO(e),I1=null,_b=0;var a=e.return;try{if(rpe(t,a,e,r,Un)){Ps=1,_E(t,uu(r,t.current)),Ln=null;return}}catch(s){if(a!==null)throw Ln=a,s;Ps=1,_E(t,uu(r,t.current)),Ln=null;return}e.flags&32768?(Hn||n===1?t=!0:Xx||Un&536870912?t=!1:(l0=t=!0,(n===2||n===9||n===3||n===6)&&(n=Lc.current,n!==null&&n.tag===13&&(n.flags|=16384))),EZ(e,t)):Q4(e)}function Q4(t){var e=t;do{if(e.flags&32768){EZ(e,l0);return}t=e.return;var r=spe(e.alternate,e,nh);if(r!==null){Ln=r;return}if(e=e.sibling,e!==null){Ln=e;return}Ln=e=t}while(e!==null);Ps===0&&(Ps=5)}function EZ(t,e){do{var r=ipe(t.alternate,t);if(r!==null){r.flags&=32767,Ln=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!e&&(t=t.sibling,t!==null)){Ln=t;return}Ln=t=r}while(t!==null);Ps=6,Ln=null}function dF(t,e,r,n,a,s,o,l,c){t.cancelPendingCommit=null;do J4();while(ki!==0);if(oa&6)throw Error(Zt(327));if(e!==null){if(e===t.current)throw Error(Zt(177));if(s=e.lanes|e.childLanes,s|=AO,W0e(t,r,s,o,l,c),t===Fa&&(Ln=Fa=null,Un=0),ix=e,w0=t,Vf=r,nk=s,ak=a,gZ=n,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,vpe(dE,function(){return CZ(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,e.subtreeFlags&13878||n){n=cn.T,cn.T=null,a=la.p,la.p=2,o=oa,oa|=4;try{ope(t,e,r)}finally{oa=o,la.p=a,cn.T=n}}ki=1,AZ(),SZ(),jZ()}}function AZ(){if(ki===1){ki=0;var t=w0,e=ix,r=(e.flags&13878)!==0;if(e.subtreeFlags&13878||r){r=cn.T,cn.T=null;var n=la.p;la.p=2;var a=oa;oa|=4;try{lZ(e,t);var s=ck,o=$X(t.containerInfo),l=s.focusedElem,c=s.selectionRange;if(o!==l&&l&&l.ownerDocument&&VX(l.ownerDocument.documentElement,l)){if(c!==null&&EO(l)){var u=c.start,d=c.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var h=l.ownerDocument||document,p=h&&h.defaultView||window;if(p.getSelection){var g=p.getSelection(),b=l.textContent.length,w=Math.min(c.start,b),_=c.end===void 0?w:Math.min(c.end,b);!g.extend&&w>_&&(o=_,_=w,w=o);var N=R9(l,w),S=R9(l,_);if(N&&S&&(g.rangeCount!==1||g.anchorNode!==N.node||g.anchorOffset!==N.offset||g.focusNode!==S.node||g.focusOffset!==S.offset)){var T=h.createRange();T.setStart(N.node,N.offset),g.removeAllRanges(),w>_?(g.addRange(T),g.extend(S.node,S.offset)):(T.setEnd(S.node,S.offset),g.addRange(T))}}}}for(h=[],g=l;g=g.parentNode;)g.nodeType===1&&h.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var R=h[l];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}DE=!!lk,ck=lk=null}finally{oa=a,la.p=n,cn.T=r}}t.current=e,ki=2}}function SZ(){if(ki===2){ki=0;var t=w0,e=ix,r=(e.flags&8772)!==0;if(e.subtreeFlags&8772||r){r=cn.T,cn.T=null;var n=la.p;la.p=2;var a=oa;oa|=4;try{nZ(t,e.alternate,e)}finally{oa=a,la.p=n,cn.T=r}}ki=3}}function jZ(){if(ki===4||ki===3){ki=0,F0e();var t=w0,e=ix,r=Vf,n=gZ;e.subtreeFlags&10256||e.flags&10256?ki=5:(ki=0,ix=w0=null,TZ(t,t.pendingLanes));var a=t.pendingLanes;if(a===0&&(y0=null),xO(r),e=e.stateNode,Oc&&typeof Oc.onCommitFiberRoot=="function")try{Oc.onCommitFiberRoot(Py,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=cn.T,a=la.p,la.p=2,cn.T=null;try{for(var s=t.onRecoverableError,o=0;o<n.length;o++){var l=n[o];s(l.value,{componentStack:l.stack})}}finally{cn.T=e,la.p=a}}Vf&3&&J4(),Jd(t),a=t.pendingLanes,r&261930&&a&42?t===sk?z2++:(z2=0,sk=t):z2=0,Vy(0)}}function TZ(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,By(e)))}function J4(){return AZ(),SZ(),jZ(),CZ()}function CZ(){if(ki!==5)return!1;var t=w0,e=nk;nk=0;var r=xO(Vf),n=cn.T,a=la.p;try{la.p=32>r?32:r,cn.T=null,r=ak,ak=null;var s=w0,o=Vf;if(ki=0,ix=w0=null,Vf=0,oa&6)throw Error(Zt(331));var l=oa;if(oa|=4,hZ(s.current),uZ(s,s.current,o,r),oa=l,Vy(0,!1),Oc&&typeof Oc.onPostCommitFiberRoot=="function")try{Oc.onPostCommitFiberRoot(Py,s)}catch{}return!0}finally{la.p=a,cn.T=n,TZ(t,e)}}function fF(t,e,r){e=uu(r,e),e=QC(t.stateNode,e,2),t=b0(t,e,2),t!==null&&(My(t,2),Jd(t))}function _a(t,e,r){if(t.tag===3)fF(t,t,r);else for(;e!==null;){if(e.tag===3){fF(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(y0===null||!y0.has(n))){t=uu(r,t),r=HY(2),n=b0(e,r,2),n!==null&&(qY(r,n,e,t),My(n,2),Jd(n));break}}e=e.return}}function cj(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new upe;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(QO=!0,a.add(r),t=ppe.bind(null,t,e,r),e.then(t,t))}function ppe(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Fa===t&&(Un&r)===r&&(Ps===4||Ps===3&&(Un&62914560)===Un&&300>Ic()-Y4?!(oa&2)&&ox(t,0):JO|=r,sx===Un&&(sx=0)),Jd(t)}function kZ(t,e){e===0&&(e=wX()),t=ng(t,e),t!==null&&(My(t,e),Jd(t))}function gpe(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),kZ(t,r)}function xpe(t,e){var r=0;switch(t.tag){case 31:case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(Zt(314))}n!==null&&n.delete(e),kZ(t,r)}function vpe(t,e){return pO(t,e)}var TE=null,Gg=null,ik=!1,CE=!1,uj=!1,u0=0;function Jd(t){t!==Gg&&t.next===null&&(Gg===null?TE=Gg=t:Gg=Gg.next=t),CE=!0,ik||(ik=!0,ype())}function Vy(t,e){if(!uj&&CE){uj=!0;do for(var r=!1,n=TE;n!==null;){if(t!==0){var a=n.pendingLanes;if(a===0)var s=0;else{var o=n.suspendedLanes,l=n.pingedLanes;s=(1<<31-Rc(42|t)+1)-1,s&=a&~(o&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(r=!0,hF(n,s))}else s=Un,s=B4(n,n===Fa?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),!(s&3)||Dy(n,s)||(r=!0,hF(n,s));n=n.next}while(r);uj=!1}}function bpe(){IZ()}function IZ(){CE=ik=!1;var t=0;u0!==0&&kpe()&&(t=u0);for(var e=Ic(),r=null,n=TE;n!==null;){var a=n.next,s=OZ(n,e);s===0?(n.next=null,r===null?TE=a:r.next=a,a===null&&(Gg=r)):(r=n,(t!==0||s&3)&&(CE=!0)),n=a}ki!==0&&ki!==5||Vy(t),u0!==0&&(u0=0)}function OZ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var o=31-Rc(s),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=G0e(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}if(e=Fa,r=Un,r=B4(t,t===e?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,r===0||t===e&&(va===2||va===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&F6(n),t.callbackNode=null,t.callbackPriority=0;if(!(r&3)||Dy(t,r)){if(e=r&-r,e===t.callbackPriority)return e;switch(n!==null&&F6(n),xO(r)){case 2:case 8:r=bX;break;case 32:r=dE;break;case 268435456:r=yX;break;default:r=dE}return n=RZ.bind(null,t),r=pO(r,n),t.callbackPriority=e,t.callbackNode=r,e}return n!==null&&n!==null&&F6(n),t.callbackPriority=2,t.callbackNode=null,2}function RZ(t,e){if(ki!==0&&ki!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(J4()&&t.callbackNode!==r)return null;var n=Un;return n=B4(t,t===Fa?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(vZ(t,n,e),OZ(t,Ic()),t.callbackNode!=null&&t.callbackNode===r?RZ.bind(null,t):null)}function hF(t,e){if(J4())return null;vZ(t,e,!0)}function ype(){Ope(function(){oa&6?pO(vX,bpe):IZ()})}function tR(){if(u0===0){var t=rx;t===0&&(t=j5,j5<<=1,!(j5&261888)&&(j5=256)),u0=t}return u0}function mF(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:aN(""+t)}function pF(t,e){var r=e.ownerDocument.createElement("input");return r.name=e.name,r.value=e.value,t.id&&r.setAttribute("form",t.id),e.parentNode.insertBefore(r,e),t=new FormData(t),r.parentNode.removeChild(r),t}function wpe(t,e,r,n,a){if(e==="submit"&&r&&r.stateNode===a){var s=mF((a[Wl]||null).action),o=n.submitter;o&&(e=(e=o[Wl]||null)?mF(e.formAction):o.getAttribute("formAction"),e!==null&&(s=e,o=null));var l=new U4("action","action",null,n,a);t.push({event:l,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(u0!==0){var c=o?pF(a,o):new FormData(a);YC(r,{pending:!0,data:c,method:a.method,action:s},null,c)}}else typeof s=="function"&&(l.preventDefault(),c=o?pF(a,o):new FormData(a),YC(r,{pending:!0,data:c,method:a.method,action:s},s,c))},currentTarget:a}]})}}for(var dj=0;dj<FC.length;dj++){var fj=FC[dj],_pe=fj.toLowerCase(),Npe=fj[0].toUpperCase()+fj.slice(1);dd(_pe,"on"+Npe)}dd(qX,"onAnimationEnd");dd(GX,"onAnimationIteration");dd(WX,"onAnimationStart");dd("dblclick","onDoubleClick");dd("focusin","onFocus");dd("focusout","onBlur");dd(Bme,"onTransitionRun");dd(Ume,"onTransitionStart");dd(zme,"onTransitionCancel");dd(KX,"onTransitionEnd");ex("onMouseEnter",["mouseout","mouseover"]);ex("onMouseLeave",["mouseout","mouseover"]);ex("onPointerEnter",["pointerout","pointerover"]);ex("onPointerLeave",["pointerout","pointerover"]);eg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eg("onBeforeInput",["compositionend","keypress","textInput","paste"]);eg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ab="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Epe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ab));function PZ(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=u;try{s(a)}catch(d){hE(d)}a.currentTarget=null,s=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=u;try{s(a)}catch(d){hE(d)}a.currentTarget=null,s=c}}}}function Mn(t,e){var r=e[kC];r===void 0&&(r=e[kC]=new Set);var n=t+"__bubble";r.has(n)||(DZ(e,t,2,!1),r.add(n))}function hj(t,e,r){var n=0;e&&(n|=4),DZ(r,t,n,e)}var L5="_reactListening"+Math.random().toString(36).slice(2);function rR(t){if(!t[L5]){t[L5]=!0,SX.forEach(function(r){r!=="selectionchange"&&(Epe.has(r)||hj(r,!1,t),hj(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[L5]||(e[L5]=!0,hj("selectionchange",!1,e))}}function DZ(t,e,r,n){switch(KZ(e)){case 2:var a=Qpe;break;case 8:a=Jpe;break;default:a=iR}r=a.bind(null,e,r,t),a=void 0,!DC||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function mj(t,e,r,n,a){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===a)return;o=o.return}for(;l!==null;){if(o=i1(l),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){n=s=o;continue e}l=l.parentNode}}n=n.return}PX(function(){var u=s,d=yO(r),h=[];e:{var p=XX.get(t);if(p!==void 0){var g=U4,b=t;switch(t){case"keypress":if(iN(r)===0)break e;case"keydown":case"keyup":g=xme;break;case"focusin":b="focus",g=$6;break;case"focusout":b="blur",g=$6;break;case"beforeblur":case"afterblur":g=$6;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=N9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=sme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=yme;break;case qX:case GX:case WX:g=lme;break;case KX:g=_me;break;case"scroll":case"scrollend":g=nme;break;case"wheel":g=Eme;break;case"copy":case"cut":case"paste":g=ume;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=A9;break;case"toggle":case"beforetoggle":g=Sme}var w=(e&4)!==0,_=!w&&(t==="scroll"||t==="scrollend"),N=w?p!==null?p+"Capture":null:p;w=[];for(var S=u,T;S!==null;){var R=S;if(T=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||T===null||N===null||(R=xb(S,N),R!=null&&w.push(Sb(S,R,T))),_)break;S=S.return}0<w.length&&(p=new g(p,b,null,r,d),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==PC&&(b=r.relatedTarget||r.fromElement)&&(i1(b)||b[qx]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(b=r.relatedTarget||r.toElement,g=u,b=b?i1(b):null,b!==null&&(_=Ry(b),w=b.tag,b!==_||w!==5&&w!==27&&w!==6)&&(b=null)):(g=null,b=u),g!==b)){if(w=N9,R="onMouseLeave",N="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=A9,R="onPointerLeave",N="onPointerEnter",S="pointer"),_=g==null?p:m2(g),T=b==null?p:m2(b),p=new w(R,S+"leave",g,r,d),p.target=_,p.relatedTarget=T,R=null,i1(d)===u&&(w=new w(N,S+"enter",b,r,d),w.target=T,w.relatedTarget=_,R=w),_=R,g&&b)t:{for(w=Ape,N=g,S=b,T=0,R=N;R;R=w(R))T++;R=0;for(var z=S;z;z=w(z))R++;for(;0<T-R;)N=w(N),T--;for(;0<R-T;)S=w(S),R--;for(;T--;){if(N===S||S!==null&&N===S.alternate){w=N;break t}N=w(N),S=w(S)}w=null}else w=null;g!==null&&gF(h,p,g,w,!1),b!==null&&_!==null&&gF(h,_,b,w,!0)}}e:{if(p=u?m2(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var G=C9;else if(T9(p))if(UX)G=Mme;else{G=Pme;var O=Rme}else g=p.nodeName,!g||g.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?u&&bO(u.elementType)&&(G=C9):G=Dme;if(G&&(G=G(t,u))){BX(h,G,r,d);break e}O&&O(t,p,u),t==="focusout"&&u&&p.type==="number"&&u.memoizedProps.value!=null&&RC(p,"number",p.value)}switch(O=u?m2(u):window,t){case"focusin":(T9(O)||O.contentEditable==="true")&&(c1=O,MC=u,O2=null);break;case"focusout":O2=MC=c1=null;break;case"mousedown":LC=!0;break;case"contextmenu":case"mouseup":case"dragend":LC=!1,P9(h,r,d);break;case"selectionchange":if(Fme)break;case"keydown":case"keyup":P9(h,r,d)}var D;if(NO)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else l1?LX(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(MX&&r.locale!=="ko"&&(l1||I!=="onCompositionStart"?I==="onCompositionEnd"&&l1&&(D=DX()):(o0=d,wO="value"in o0?o0.value:o0.textContent,l1=!0)),O=kE(u,I),0<O.length&&(I=new E9(I,t,null,r,d),h.push({event:I,listeners:O}),D?I.data=D:(D=FX(r),D!==null&&(I.data=D)))),(D=Tme?Cme(t,r):kme(t,r))&&(I=kE(u,"onBeforeInput"),0<I.length&&(O=new E9("onBeforeInput","beforeinput",null,r,d),h.push({event:O,listeners:I}),O.data=D)),wpe(h,t,u,r,d)}PZ(h,e)})}function Sb(t,e,r){return{instance:t,listener:e,currentTarget:r}}function kE(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,s=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||s===null||(a=xb(t,r),a!=null&&n.unshift(Sb(t,a,s)),a=xb(t,e),a!=null&&n.push(Sb(t,a,s))),t.tag===3)return n;t=t.return}return[]}function Ape(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function gF(t,e,r,n,a){for(var s=e._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(l=l.tag,c!==null&&c===n)break;l!==5&&l!==26&&l!==27||u===null||(c=u,a?(u=xb(r,s),u!=null&&o.unshift(Sb(r,u,c))):a||(u=xb(r,s),u!=null&&o.push(Sb(r,u,c)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var Spe=/\r\n?/g,jpe=/\u0000|\uFFFD/g;function xF(t){return(typeof t=="string"?t:""+t).replace(Spe,`
`).replace(jpe,"")}function MZ(t,e){return e=xF(e),xF(t)===e}function ka(t,e,r,n,a,s){switch(r){case"children":typeof n=="string"?e==="body"||e==="textarea"&&n===""||tx(t,n):(typeof n=="number"||typeof n=="bigint")&&e!=="body"&&tx(t,""+n);break;case"className":k5(t,"class",n);break;case"tabIndex":k5(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":k5(t,r,n);break;case"style":RX(t,n,s);break;case"data":if(e!=="object"){k5(t,"data",n);break}case"src":case"href":if(n===""&&(e!=="a"||r!=="href")){t.removeAttribute(r);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=aN(""+n),t.setAttribute(r,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(r==="formAction"?(e!=="input"&&ka(t,e,"name",a.name,a,null),ka(t,e,"formEncType",a.formEncType,a,null),ka(t,e,"formMethod",a.formMethod,a,null),ka(t,e,"formTarget",a.formTarget,a,null)):(ka(t,e,"encType",a.encType,a,null),ka(t,e,"method",a.method,a,null),ka(t,e,"target",a.target,a,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(r);break}n=aN(""+n),t.setAttribute(r,n);break;case"onClick":n!=null&&(t.onclick=Of);break;case"onScroll":n!=null&&Mn("scroll",t);break;case"onScrollEnd":n!=null&&Mn("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(Zt(61));if(r=n.__html,r!=null){if(a.children!=null)throw Error(Zt(60));t.innerHTML=r}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}r=aN(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""+n):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":n===!0?t.setAttribute(r,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(r,n):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(r,n):t.removeAttribute(r);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(r):t.setAttribute(r,n);break;case"popover":Mn("beforetoggle",t),Mn("toggle",t),nN(t,"popover",n);break;case"xlinkActuate":df(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":df(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":df(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":df(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":df(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":df(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":df(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":df(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":df(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":nN(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=tme.get(r)||r,nN(t,r,n))}}function ok(t,e,r,n,a,s){switch(r){case"style":RX(t,n,s);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(Zt(61));if(r=n.__html,r!=null){if(a.children!=null)throw Error(Zt(60));t.innerHTML=r}}break;case"children":typeof n=="string"?tx(t,n):(typeof n=="number"||typeof n=="bigint")&&tx(t,""+n);break;case"onScroll":n!=null&&Mn("scroll",t);break;case"onScrollEnd":n!=null&&Mn("scrollend",t);break;case"onClick":n!=null&&(t.onclick=Of);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jX.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(a=r.endsWith("Capture"),e=r.slice(2,a?r.length-7:void 0),s=t[Wl]||null,s=s!=null?s[r]:null,typeof s=="function"&&t.removeEventListener(e,s,a),typeof n=="function")){typeof s!="function"&&s!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(e,n,a);break e}r in t?t[r]=n:n===!0?t.setAttribute(r,""):nN(t,r,n)}}}function jo(t,e,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mn("error",t),Mn("load",t);var n=!1,a=!1,s;for(s in r)if(r.hasOwnProperty(s)){var o=r[s];if(o!=null)switch(s){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(Zt(137,e));default:ka(t,e,s,o,r,null)}}a&&ka(t,e,"srcSet",r.srcSet,r,null),n&&ka(t,e,"src",r.src,r,null);return;case"input":Mn("invalid",t);var l=s=o=a=null,c=null,u=null;for(n in r)if(r.hasOwnProperty(n)){var d=r[n];if(d!=null)switch(n){case"name":a=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(Zt(137,e));break;default:ka(t,e,n,d,r,null)}}kX(t,s,l,c,u,o,a,!1);return;case"select":Mn("invalid",t),n=o=s=null;for(a in r)if(r.hasOwnProperty(a)&&(l=r[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":n=l;default:ka(t,e,a,l,r,null)}e=s,r=o,t.multiple=!!n,e!=null?T1(t,!!n,e,!1):r!=null&&T1(t,!!n,r,!0);return;case"textarea":Mn("invalid",t),s=a=n=null;for(o in r)if(r.hasOwnProperty(o)&&(l=r[o],l!=null))switch(o){case"value":n=l;break;case"defaultValue":a=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(Zt(91));break;default:ka(t,e,o,l,r,null)}OX(t,n,a,s);return;case"option":for(c in r)if(r.hasOwnProperty(c)&&(n=r[c],n!=null))switch(c){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:ka(t,e,c,n,r,null)}return;case"dialog":Mn("beforetoggle",t),Mn("toggle",t),Mn("cancel",t),Mn("close",t);break;case"iframe":case"object":Mn("load",t);break;case"video":case"audio":for(n=0;n<Ab.length;n++)Mn(Ab[n],t);break;case"image":Mn("error",t),Mn("load",t);break;case"details":Mn("toggle",t);break;case"embed":case"source":case"link":Mn("error",t),Mn("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&(n=r[u],n!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(Zt(137,e));default:ka(t,e,u,n,r,null)}return;default:if(bO(e)){for(d in r)r.hasOwnProperty(d)&&(n=r[d],n!==void 0&&ok(t,e,d,n,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(n=r[l],n!=null&&ka(t,e,l,n,r,null))}function Tpe(t,e,r,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,o=null,l=null,c=null,u=null,d=null;for(g in r){var h=r[g];if(r.hasOwnProperty(g)&&h!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":c=h;default:n.hasOwnProperty(g)||ka(t,e,g,null,n,h)}}for(var p in n){var g=n[p];if(h=r[p],n.hasOwnProperty(p)&&(g!=null||h!=null))switch(p){case"type":s=g;break;case"name":a=g;break;case"checked":u=g;break;case"defaultChecked":d=g;break;case"value":o=g;break;case"defaultValue":l=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(Zt(137,e));break;default:g!==h&&ka(t,e,p,g,n,h)}}OC(t,o,l,c,u,d,s,a);return;case"select":g=o=l=p=null;for(s in r)if(c=r[s],r.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":g=c;default:n.hasOwnProperty(s)||ka(t,e,s,null,n,c)}for(a in n)if(s=n[a],c=r[a],n.hasOwnProperty(a)&&(s!=null||c!=null))switch(a){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&ka(t,e,a,s,n,c)}e=l,r=o,n=g,p!=null?T1(t,!!r,p,!1):!!n!=!!r&&(e!=null?T1(t,!!r,e,!0):T1(t,!!r,r?[]:"",!1));return;case"textarea":g=p=null;for(l in r)if(a=r[l],r.hasOwnProperty(l)&&a!=null&&!n.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ka(t,e,l,null,n,a)}for(o in n)if(a=n[o],s=r[o],n.hasOwnProperty(o)&&(a!=null||s!=null))switch(o){case"value":p=a;break;case"defaultValue":g=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(Zt(91));break;default:a!==s&&ka(t,e,o,a,n,s)}IX(t,p,g);return;case"option":for(var b in r)if(p=r[b],r.hasOwnProperty(b)&&p!=null&&!n.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:ka(t,e,b,null,n,p)}for(c in n)if(p=n[c],g=r[c],n.hasOwnProperty(c)&&p!==g&&(p!=null||g!=null))switch(c){case"selected":t.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:ka(t,e,c,p,n,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w in r)p=r[w],r.hasOwnProperty(w)&&p!=null&&!n.hasOwnProperty(w)&&ka(t,e,w,null,n,p);for(u in n)if(p=n[u],g=r[u],n.hasOwnProperty(u)&&p!==g&&(p!=null||g!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(Zt(137,e));break;default:ka(t,e,u,p,n,g)}return;default:if(bO(e)){for(var _ in r)p=r[_],r.hasOwnProperty(_)&&p!==void 0&&!n.hasOwnProperty(_)&&ok(t,e,_,void 0,n,p);for(d in n)p=n[d],g=r[d],!n.hasOwnProperty(d)||p===g||p===void 0&&g===void 0||ok(t,e,d,p,n,g);return}}for(var N in r)p=r[N],r.hasOwnProperty(N)&&p!=null&&!n.hasOwnProperty(N)&&ka(t,e,N,null,n,p);for(h in n)p=n[h],g=r[h],!n.hasOwnProperty(h)||p===g||p==null&&g==null||ka(t,e,h,p,n,g)}function vF(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cpe(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,r=performance.getEntriesByType("resource"),n=0;n<r.length;n++){var a=r[n],s=a.transferSize,o=a.initiatorType,l=a.duration;if(s&&l&&vF(o)){for(o=0,l=a.responseEnd,n+=1;n<r.length;n++){var c=r[n],u=c.startTime;if(u>l)break;var d=c.transferSize,h=c.initiatorType;d&&vF(h)&&(c=c.responseEnd,o+=d*(c<l?1:(l-u)/(c-u)))}if(--n,e+=8*(s+o)/(a.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var lk=null,ck=null;function IE(t){return t.nodeType===9?t:t.ownerDocument}function bF(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function LZ(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function uk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pj=null;function kpe(){var t=window.event;return t&&t.type==="popstate"?t===pj?!1:(pj=t,!0):(pj=null,!1)}var FZ=typeof setTimeout=="function"?setTimeout:void 0,Ipe=typeof clearTimeout=="function"?clearTimeout:void 0,yF=typeof Promise=="function"?Promise:void 0,Ope=typeof queueMicrotask=="function"?queueMicrotask:typeof yF<"u"?function(t){return yF.resolve(null).then(t).catch(Rpe)}:FZ;function Rpe(t){setTimeout(function(){throw t})}function im(t){return t==="head"}function wF(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"||r==="/&"){if(n===0){t.removeChild(a),cx(e);return}n--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")n++;else if(r==="html")V2(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,V2(r);for(var s=r.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[Ly]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||r.removeChild(s),s=o}}else r==="body"&&V2(t.ownerDocument.body);r=a}while(r);cx(e)}function _F(t,e){var r=t;t=0;do{var n=r.nextSibling;if(r.nodeType===1?e?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(e?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=n}while(r)}function dk(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var r=e;switch(e=e.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":dk(r),vO(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Ppe(t,e,r,n){for(;t.nodeType===1;){var a=r;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[Ly])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==a.rel||t.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||t.getAttribute("title")!==(a.title==null?null:a.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(a.src==null?null:a.src)||t.getAttribute("type")!==(a.type==null?null:a.type)||t.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=a.name==null?null:""+a.name;if(a.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=wu(t.nextSibling),t===null)break}return null}function Dpe(t,e,r){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=wu(t.nextSibling),t===null))return null;return t}function BZ(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=wu(t.nextSibling),t===null))return null;return t}function fk(t){return t.data==="$?"||t.data==="$~"}function hk(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Mpe(t,e){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||r.readyState!=="loading")e();else{var n=function(){e(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function wu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var mk=null;function NF(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(e===0)return wu(t.nextSibling);e--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||e++}t=t.nextSibling}return null}function EF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(e===0)return t;e--}else r!=="/$"&&r!=="/&"||e++}t=t.previousSibling}return null}function UZ(t,e,r){switch(e=IE(r),t){case"html":if(t=e.documentElement,!t)throw Error(Zt(452));return t;case"head":if(t=e.head,!t)throw Error(Zt(453));return t;case"body":if(t=e.body,!t)throw Error(Zt(454));return t;default:throw Error(Zt(451))}}function V2(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);vO(t)}var Au=new Map,AF=new Set;function OE(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var wh=la.d;la.d={f:Lpe,r:Fpe,D:Bpe,C:Upe,L:zpe,m:Vpe,X:Hpe,S:$pe,M:qpe};function Lpe(){var t=wh.f(),e=Z4();return t||e}function Fpe(t){var e=Gx(t);e!==null&&e.tag===5&&e.type==="form"?RY(e):wh.r(t)}var Yx=typeof document>"u"?null:document;function zZ(t,e,r){var n=Yx;if(n&&typeof e=="string"&&e){var a=cu(e);a='link[rel="'+t+'"][href="'+a+'"]',typeof r=="string"&&(a+='[crossorigin="'+r+'"]'),AF.has(a)||(AF.add(a),t={rel:t,crossOrigin:r,href:e},n.querySelector(a)===null&&(e=n.createElement("link"),jo(e,"link",t),Zi(e),n.head.appendChild(e)))}}function Bpe(t){wh.D(t),zZ("dns-prefetch",t,null)}function Upe(t,e){wh.C(t,e),zZ("preconnect",t,e)}function zpe(t,e,r){wh.L(t,e,r);var n=Yx;if(n&&t&&e){var a='link[rel="preload"][as="'+cu(e)+'"]';e==="image"&&r&&r.imageSrcSet?(a+='[imagesrcset="'+cu(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(a+='[imagesizes="'+cu(r.imageSizes)+'"]')):a+='[href="'+cu(t)+'"]';var s=a;switch(e){case"style":s=lx(t);break;case"script":s=Zx(t)}Au.has(s)||(t=rs({rel:"preload",href:e==="image"&&r&&r.imageSrcSet?void 0:t,as:e},r),Au.set(s,t),n.querySelector(a)!==null||e==="style"&&n.querySelector($y(s))||e==="script"&&n.querySelector(Hy(s))||(e=n.createElement("link"),jo(e,"link",t),Zi(e),n.head.appendChild(e)))}}function Vpe(t,e){wh.m(t,e);var r=Yx;if(r&&t){var n=e&&typeof e.as=="string"?e.as:"script",a='link[rel="modulepreload"][as="'+cu(n)+'"][href="'+cu(t)+'"]',s=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Zx(t)}if(!Au.has(s)&&(t=rs({rel:"modulepreload",href:t},e),Au.set(s,t),r.querySelector(a)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Hy(s)))return}n=r.createElement("link"),jo(n,"link",t),Zi(n),r.head.appendChild(n)}}}function $pe(t,e,r){wh.S(t,e,r);var n=Yx;if(n&&t){var a=j1(n).hoistableStyles,s=lx(t);e=e||"default";var o=a.get(s);if(!o){var l={loading:0,preload:null};if(o=n.querySelector($y(s)))l.loading=5;else{t=rs({rel:"stylesheet",href:t,"data-precedence":e},r),(r=Au.get(s))&&nR(t,r);var c=o=n.createElement("link");Zi(c),jo(c,"link",t),c._p=new Promise(function(u,d){c.onload=u,c.onerror=d}),c.addEventListener("load",function(){l.loading|=1}),c.addEventListener("error",function(){l.loading|=2}),l.loading|=4,mN(o,e,n)}o={type:"stylesheet",instance:o,count:1,state:l},a.set(s,o)}}}function Hpe(t,e){wh.X(t,e);var r=Yx;if(r&&t){var n=j1(r).hoistableScripts,a=Zx(t),s=n.get(a);s||(s=r.querySelector(Hy(a)),s||(t=rs({src:t,async:!0},e),(e=Au.get(a))&&aR(t,e),s=r.createElement("script"),Zi(s),jo(s,"link",t),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}function qpe(t,e){wh.M(t,e);var r=Yx;if(r&&t){var n=j1(r).hoistableScripts,a=Zx(t),s=n.get(a);s||(s=r.querySelector(Hy(a)),s||(t=rs({src:t,async:!0,type:"module"},e),(e=Au.get(a))&&aR(t,e),s=r.createElement("script"),Zi(s),jo(s,"link",t),r.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},n.set(a,s))}}function SF(t,e,r,n){var a=(a=g0.current)?OE(a):null;if(!a)throw Error(Zt(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(e=lx(r.href),r=j1(a).hoistableStyles,n=r.get(e),n||(n={type:"style",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=lx(r.href);var s=j1(a).hoistableStyles,o=s.get(t);if(o||(a=a.ownerDocument||a,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,o),(s=a.querySelector($y(t)))&&!s._p&&(o.instance=s,o.state.loading=5),Au.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Au.set(t,r),s||Gpe(a,t,r,o.state))),e&&n===null)throw Error(Zt(528,""));return o}if(e&&n!==null)throw Error(Zt(529,""));return null;case"script":return e=r.async,r=r.src,typeof r=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Zx(r),r=j1(a).hoistableScripts,n=r.get(e),n||(n={type:"script",instance:null,count:0,state:null},r.set(e,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(Zt(444,t))}}function lx(t){return'href="'+cu(t)+'"'}function $y(t){return'link[rel="stylesheet"]['+t+"]"}function VZ(t){return rs({},t,{"data-precedence":t.precedence,precedence:null})}function Gpe(t,e,r,n){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?n.loading=1:(e=t.createElement("link"),n.preload=e,e.addEventListener("load",function(){return n.loading|=1}),e.addEventListener("error",function(){return n.loading|=2}),jo(e,"link",r),Zi(e),t.head.appendChild(e))}function Zx(t){return'[src="'+cu(t)+'"]'}function Hy(t){return"script[async]"+t}function jF(t,e,r){if(e.count++,e.instance===null)switch(e.type){case"style":var n=t.querySelector('style[data-href~="'+cu(r.href)+'"]');if(n)return e.instance=n,Zi(n),n;var a=rs({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),Zi(n),jo(n,"style",a),mN(n,r.precedence,t),e.instance=n;case"stylesheet":a=lx(r.href);var s=t.querySelector($y(a));if(s)return e.state.loading|=4,e.instance=s,Zi(s),s;n=VZ(r),(a=Au.get(a))&&nR(n,a),s=(t.ownerDocument||t).createElement("link"),Zi(s);var o=s;return o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),jo(s,"link",n),e.state.loading|=4,mN(s,r.precedence,t),e.instance=s;case"script":return s=Zx(r.src),(a=t.querySelector(Hy(s)))?(e.instance=a,Zi(a),a):(n=r,(a=Au.get(s))&&(n=rs({},r),aR(n,a)),t=t.ownerDocument||t,a=t.createElement("script"),Zi(a),jo(a,"link",n),t.head.appendChild(a),e.instance=a);case"void":return null;default:throw Error(Zt(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(n=e.instance,e.state.loading|=4,mN(n,r.precedence,t));return e.instance}function mN(t,e,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,s=a,o=0;o<n.length;o++){var l=n[o];if(l.dataset.precedence===e)s=l;else if(s!==a)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=r.nodeType===9?r.head:r,e.insertBefore(t,e.firstChild))}function nR(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function aR(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var pN=null;function TF(t,e,r){if(pN===null){var n=new Map,a=pN=new Map;a.set(r,n)}else a=pN,n=a.get(r),n||(n=new Map,a.set(r,n));if(n.has(t))return n;for(n.set(t,null),r=r.getElementsByTagName(t),a=0;a<r.length;a++){var s=r[a];if(!(s[Ly]||s[_o]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var o=s.getAttribute(e)||"";o=t+o;var l=n.get(o);l?l.push(s):n.set(o,[s])}}return n}function CF(t,e,r){t=t.ownerDocument||t,t.head.insertBefore(r,e==="title"?t.querySelector("head > title"):null)}function Wpe(t,e,r){if(r===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function $Z(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function Kpe(t,e,r,n){if(r.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(r.state.loading&4)){if(r.instance===null){var a=lx(n.href),s=e.querySelector($y(a));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=RE.bind(t),e.then(t,t)),r.state.loading|=4,r.instance=s,Zi(s);return}s=e.ownerDocument||e,n=VZ(n),(a=Au.get(a))&&nR(n,a),s=s.createElement("link"),Zi(s);var o=s;o._p=new Promise(function(l,c){o.onload=l,o.onerror=c}),jo(s,"link",n),r.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,e),(e=r.state.preload)&&!(r.state.loading&3)&&(t.count++,r=RE.bind(t),e.addEventListener("load",r),e.addEventListener("error",r))}}var gj=0;function Xpe(t,e){return t.stylesheets&&t.count===0&&gN(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var n=setTimeout(function(){if(t.stylesheets&&gN(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&gj===0&&(gj=62500*Cpe());var a=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&gN(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>gj?50:800)+e);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(a)}}:null}function RE(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gN(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var PE=null;function gN(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,PE=new Map,e.forEach(Ype,t),PE=null,RE.call(t))}function Ype(t,e){if(!(e.state.loading&4)){var r=PE.get(t);if(r)var n=r.get(null);else{r=new Map,PE.set(t,r);for(var a=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var o=a[s];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(r.set(o.dataset.precedence,o),n=o)}n&&r.set(null,n)}a=e.instance,o=a.getAttribute("data-precedence"),s=r.get(o)||n,s===n&&r.set(null,a),r.set(o,a),this.count++,n=RE.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),s?s.parentNode.insertBefore(a,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(a,t.firstChild)),e.state.loading|=4}}var jb={$$typeof:If,Provider:null,Consumer:null,_currentValue:ap,_currentValue2:ap,_threadCount:0};function Zpe(t,e,r,n,a,s,o,l,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=B6(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=B6(0),this.hiddenUpdates=B6(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function HZ(t,e,r,n,a,s,o,l,c,u,d,h){return t=new Zpe(t,e,r,o,c,u,d,h,l),e=1,s===!0&&(e|=24),s=_c(3,null,null,e),t.current=s,s.stateNode=t,e=kO(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:n,isDehydrated:r,cache:e},RO(s),t}function qZ(t){return t?(t=f1,t):f1}function GZ(t,e,r,n,a,s){a=qZ(a),n.context===null?n.context=a:n.pendingContext=a,n=v0(e),n.payload={element:r},s=s===void 0?null:s,s!==null&&(n.callback=s),r=b0(t,n,e),r!==null&&(zl(r,t,e),P2(r,t,e))}function kF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function sR(t,e){kF(t,e),(t=t.alternate)&&kF(t,e)}function WZ(t){if(t.tag===13||t.tag===31){var e=ng(t,67108864);e!==null&&zl(e,t,67108864),sR(t,67108864)}}function IF(t){if(t.tag===13||t.tag===31){var e=Pc();e=gO(e);var r=ng(t,e);r!==null&&zl(r,t,e),sR(t,e)}}var DE=!0;function Qpe(t,e,r,n){var a=cn.T;cn.T=null;var s=la.p;try{la.p=2,iR(t,e,r,n)}finally{la.p=s,cn.T=a}}function Jpe(t,e,r,n){var a=cn.T;cn.T=null;var s=la.p;try{la.p=8,iR(t,e,r,n)}finally{la.p=s,cn.T=a}}function iR(t,e,r,n){if(DE){var a=pk(n);if(a===null)mj(t,e,n,ME,r),OF(t,n);else if(tge(a,t,e,r,n))n.stopPropagation();else if(OF(t,n),e&4&&-1<ege.indexOf(t)){for(;a!==null;){var s=Gx(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=Om(s.pendingLanes);if(o!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;o;){var c=1<<31-Rc(o);l.entanglements[1]|=c,o&=~c}Jd(s),!(oa&6)&&(AE=Ic()+500,Vy(0))}}break;case 31:case 13:l=ng(s,2),l!==null&&zl(l,s,2),Z4(),sR(s,2)}if(s=pk(n),s===null&&mj(t,e,n,ME,r),s===a)break;a=s}a!==null&&n.stopPropagation()}else mj(t,e,n,null,r)}}function pk(t){return t=yO(t),oR(t)}var ME=null;function oR(t){if(ME=null,t=i1(t),t!==null){var e=Ry(t);if(e===null)t=null;else{var r=e.tag;if(r===13){if(t=hX(e),t!==null)return t;t=null}else if(r===31){if(t=mX(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ME=t,null}function KZ(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(B0e()){case vX:return 2;case bX:return 8;case dE:case U0e:return 32;case yX:return 268435456;default:return 32}default:return 32}}var gk=!1,_0=null,N0=null,E0=null,Tb=new Map,Cb=new Map,r0=[],ege="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OF(t,e){switch(t){case"focusin":case"focusout":_0=null;break;case"dragenter":case"dragleave":N0=null;break;case"mouseover":case"mouseout":E0=null;break;case"pointerover":case"pointerout":Tb.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cb.delete(e.pointerId)}}function Uv(t,e,r,n,a,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[a]},e!==null&&(e=Gx(e),e!==null&&WZ(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function tge(t,e,r,n,a){switch(e){case"focusin":return _0=Uv(_0,t,e,r,n,a),!0;case"dragenter":return N0=Uv(N0,t,e,r,n,a),!0;case"mouseover":return E0=Uv(E0,t,e,r,n,a),!0;case"pointerover":var s=a.pointerId;return Tb.set(s,Uv(Tb.get(s)||null,t,e,r,n,a)),!0;case"gotpointercapture":return s=a.pointerId,Cb.set(s,Uv(Cb.get(s)||null,t,e,r,n,a)),!0}return!1}function XZ(t){var e=i1(t.target);if(e!==null){var r=Ry(e);if(r!==null){if(e=r.tag,e===13){if(e=hX(r),e!==null){t.blockedOn=e,g9(t.priority,function(){IF(r)});return}}else if(e===31){if(e=mX(r),e!==null){t.blockedOn=e,g9(t.priority,function(){IF(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xN(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=pk(t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);PC=n,r.target.dispatchEvent(n),PC=null}else return e=Gx(r),e!==null&&WZ(e),t.blockedOn=r,!1;e.shift()}return!0}function RF(t,e,r){xN(t)&&r.delete(e)}function rge(){gk=!1,_0!==null&&xN(_0)&&(_0=null),N0!==null&&xN(N0)&&(N0=null),E0!==null&&xN(E0)&&(E0=null),Tb.forEach(RF),Cb.forEach(RF)}function F5(t,e){t.blockedOn===e&&(t.blockedOn=null,gk||(gk=!0,Ii.unstable_scheduleCallback(Ii.unstable_NormalPriority,rge)))}var B5=null;function PF(t){B5!==t&&(B5=t,Ii.unstable_scheduleCallback(Ii.unstable_NormalPriority,function(){B5===t&&(B5=null);for(var e=0;e<t.length;e+=3){var r=t[e],n=t[e+1],a=t[e+2];if(typeof n!="function"){if(oR(n||r)===null)continue;break}var s=Gx(r);s!==null&&(t.splice(e,3),e-=3,YC(s,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function cx(t){function e(c){return F5(c,t)}_0!==null&&F5(_0,t),N0!==null&&F5(N0,t),E0!==null&&F5(E0,t),Tb.forEach(e),Cb.forEach(e);for(var r=0;r<r0.length;r++){var n=r0[r];n.blockedOn===t&&(n.blockedOn=null)}for(;0<r0.length&&(r=r0[0],r.blockedOn===null);)XZ(r),r.blockedOn===null&&r0.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(n=0;n<r.length;n+=3){var a=r[n],s=r[n+1],o=a[Wl]||null;if(typeof s=="function")o||PF(r);else if(o){var l=null;if(s&&s.hasAttribute("formAction")){if(a=s,o=s[Wl]||null)l=o.formAction;else if(oR(a)!==null)continue}else l=o.action;typeof l=="function"?r[n+1]=l:(r.splice(n,3),n-=3),PF(r)}}}function YZ(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(o){return a=o})},focusReset:"manual",scroll:"manual"})}function e(){a!==null&&(a(),a=null),n||setTimeout(r,20)}function r(){if(!n&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,a=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(r,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),a!==null&&(a(),a=null)}}}function lR(t){this._internalRoot=t}eA.prototype.render=lR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Zt(409));var r=e.current,n=Pc();GZ(r,n,t,e,null,null)};eA.prototype.unmount=lR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;GZ(t.current,2,null,t,null,null),Z4(),e[qx]=null}};function eA(t){this._internalRoot=t}eA.prototype.unstable_scheduleHydration=function(t){if(t){var e=AX();t={blockedOn:null,target:t,priority:e};for(var r=0;r<r0.length&&e!==0&&e<r0[r].priority;r++);r0.splice(r,0,t),r===0&&XZ(t)}};var DF=dX.version;if(DF!=="19.2.0")throw Error(Zt(527,DF,"19.2.0"));la.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Zt(188)):(t=Object.keys(t).join(","),Error(Zt(268,t)));return t=O0e(e),t=t!==null?pX(t):null,t=t===null?null:t.stateNode,t};var nge={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:cn,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var U5=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!U5.isDisabled&&U5.supportsFiber)try{Py=U5.inject(nge),Oc=U5}catch{}}L4.createRoot=function(t,e){if(!fX(t))throw Error(Zt(299));var r=!1,n="",a=zY,s=VY,o=$Y;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onUncaughtError!==void 0&&(a=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=HZ(t,1,!1,null,null,r,n,null,a,s,o,YZ),t[qx]=e.current,rR(t),new lR(e)};L4.hydrateRoot=function(t,e,r){if(!fX(t))throw Error(Zt(299));var n=!1,a="",s=zY,o=VY,l=$Y,c=null;return r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onUncaughtError!==void 0&&(s=r.onUncaughtError),r.onCaughtError!==void 0&&(o=r.onCaughtError),r.onRecoverableError!==void 0&&(l=r.onRecoverableError),r.formState!==void 0&&(c=r.formState)),e=HZ(t,1,!0,e,r??null,n,a,c,s,o,l,YZ),e.context=qZ(null),r=e.current,n=Pc(),n=gO(n),a=v0(n),a.callback=null,b0(r,a,n),r=n,e.current.lanes=r,My(e,r),Jd(e),t[qx]=e.current,rR(t),new eA(e)};L4.version="19.2.0";function ZZ(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZZ)}catch(t){console.error(t)}}ZZ(),sX.exports=L4;var age=sX.exports;const sge=Vc(age);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kb.apply(this,arguments)}var d0;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(d0||(d0={}));const MF="popstate";function ige(t){t===void 0&&(t={});function e(n,a){let{pathname:s,search:o,hash:l}=n.location;return xk("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:LE(a)}return lge(e,r,null,t)}function Qs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QZ(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oge(){return Math.random().toString(36).substr(2,8)}function LF(t,e){return{usr:t.state,key:t.key,idx:e}}function xk(t,e,r,n){return r===void 0&&(r=null),kb({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qx(e):e,{state:r,key:e&&e.key||n||oge()})}function LE(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Qx(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function lge(t,e,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:s=!1}=n,o=a.history,l=d0.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(kb({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=d0.Pop;let _=d(),N=_==null?null:_-u;u=_,c&&c({action:l,location:w.location,delta:N})}function p(_,N){l=d0.Push;let S=xk(w.location,_,N);u=d()+1;let T=LF(S,u),R=w.createHref(S);try{o.pushState(T,"",R)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;a.location.assign(R)}s&&c&&c({action:l,location:w.location,delta:1})}function g(_,N){l=d0.Replace;let S=xk(w.location,_,N);u=d();let T=LF(S,u),R=w.createHref(S);o.replaceState(T,"",R),s&&c&&c({action:l,location:w.location,delta:0})}function b(_){let N=a.location.origin!=="null"?a.location.origin:a.location.href,S=typeof _=="string"?_:LE(_);return S=S.replace(/ $/,"%20"),Qs(N,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,N)}let w={get action(){return l},get location(){return t(a,o)},listen(_){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(MF,h),c=_,()=>{a.removeEventListener(MF,h),c=null}},createHref(_){return e(a,_)},createURL:b,encodeLocation(_){let N=b(_);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:p,replace:g,go(_){return o.go(_)}};return w}var FF;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(FF||(FF={}));function cge(t,e,r){return r===void 0&&(r="/"),uge(t,e,r)}function uge(t,e,r,n){let a=typeof e=="string"?Qx(e):e,s=cR(a.pathname||"/",r);if(s==null)return null;let o=JZ(t);dge(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Nge(s);l=yge(o[c],u)}return l}function JZ(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Qs(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=A0([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(Qs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),JZ(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:vge(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of eQ(s.path))a(s,o,c)}),e}function eQ(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let o=eQ(n.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function dge(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:bge(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const fge=/^:[\w-]+$/,hge=3,mge=2,pge=1,gge=10,xge=-2,BF=t=>t==="*";function vge(t,e){let r=t.split("/"),n=r.length;return r.some(BF)&&(n+=xge),e&&(n+=mge),r.filter(a=>!BF(a)).reduce((a,s)=>a+(fge.test(s)?hge:s===""?pge:gge),n)}function bge(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function yge(t,e,r){let{routesMeta:n}=t,a={},s="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=wge({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:A0([s,h.pathname]),pathnameBase:jge(A0([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=A0([s,h.pathnameBase]))}return o}function wge(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=_ge(t.path,t.caseSensitive,t.end),a=e.match(r);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:p,isOptional:g}=d;if(p==="*"){let w=l[h]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const b=l[h];return g&&!b?u[p]=void 0:u[p]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function _ge(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),QZ(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function Nge(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QZ(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function cR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Ege(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:a=""}=typeof t=="string"?Qx(t):t;return{pathname:r?r.startsWith("/")?r:Age(r,e):e,search:Tge(n),hash:Cge(a)}}function Age(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function xj(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sge(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function uR(t,e){let r=Sge(t);return e?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function dR(t,e,r,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Qx(t):(a=kb({},t),Qs(!a.pathname||!a.pathname.includes("?"),xj("?","pathname","search",a)),Qs(!a.pathname||!a.pathname.includes("#"),xj("#","pathname","hash",a)),Qs(!a.search||!a.search.includes("#"),xj("#","search","hash",a)));let s=t===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;a.pathname=p.join("/")}l=h>=0?e[h]:"/"}let c=Ege(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const A0=t=>t.join("/").replace(/\/\/+/g,"/"),jge=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Tge=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cge=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kge(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tQ=["post","put","patch","delete"];new Set(tQ);const Ige=["get",...tQ];new Set(Ige);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ib(){return Ib=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ib.apply(this,arguments)}const fR=A.createContext(null),Oge=A.createContext(null),om=A.createContext(null),tA=A.createContext(null),_h=A.createContext({outlet:null,matches:[],isDataRoute:!1}),rQ=A.createContext(null);function Rge(t,e){let{relative:r}=e===void 0?{}:e;Jx()||Qs(!1);let{basename:n,navigator:a}=A.useContext(om),{hash:s,pathname:o,search:l}=aQ(t,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:A0([n,o])),a.createHref({pathname:c,search:l,hash:s})}function Jx(){return A.useContext(tA)!=null}function lm(){return Jx()||Qs(!1),A.useContext(tA).location}function nQ(t){A.useContext(om).static||A.useLayoutEffect(t)}function Fs(){let{isDataRoute:t}=A.useContext(_h);return t?Gge():Pge()}function Pge(){Jx()||Qs(!1);let t=A.useContext(fR),{basename:e,future:r,navigator:n}=A.useContext(om),{matches:a}=A.useContext(_h),{pathname:s}=lm(),o=JSON.stringify(uR(a,r.v7_relativeSplatPath)),l=A.useRef(!1);return nQ(()=>{l.current=!0}),A.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=dR(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:A0([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,s,t])}function qy(){let{matches:t}=A.useContext(_h),e=t[t.length-1];return e?e.params:{}}function aQ(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=A.useContext(om),{matches:a}=A.useContext(_h),{pathname:s}=lm(),o=JSON.stringify(uR(a,n.v7_relativeSplatPath));return A.useMemo(()=>dR(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function Dge(t,e){return Mge(t,e)}function Mge(t,e,r,n){Jx()||Qs(!1);let{navigator:a}=A.useContext(om),{matches:s}=A.useContext(_h),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=lm(),d;if(e){var h;let _=typeof e=="string"?Qx(e):e;c==="/"||(h=_.pathname)!=null&&h.startsWith(c)||Qs(!1),d=_}else d=u;let p=d.pathname||"/",g=p;if(c!=="/"){let _=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=cge(t,{pathname:g}),w=zge(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:A0([c,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:A0([c,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,r,n);return e&&w?A.createElement(tA.Provider,{value:{location:Ib({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:d0.Pop}},w):w}function Lge(){let t=qge(),e=kge(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),r?A.createElement("pre",{style:a},r):null,null)}const Fge=A.createElement(Lge,null);class Bge extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?A.createElement(_h.Provider,{value:this.props.routeContext},A.createElement(rQ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Uge(t){let{routeContext:e,match:r,children:n}=t,a=A.useContext(fR);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(_h.Provider,{value:e},n)}function zge(t,e,r,n){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Qs(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:g}=r,b=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let g,b=!1,w=null,_=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||Fge,c&&(u<0&&p===0?(Wge("route-fallback"),b=!0,_=null):u===p&&(b=!0,_=h.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,p+1)),S=()=>{let T;return g?T=w:b?T=_:h.route.Component?T=A.createElement(h.route.Component,null):h.route.element?T=h.route.element:T=d,A.createElement(Uge,{match:h,routeContext:{outlet:d,matches:N,isDataRoute:r!=null},children:T})};return r&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?A.createElement(Bge,{location:r.location,revalidation:r.revalidation,component:w,error:g,children:S(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):S()},null)}var sQ=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sQ||{}),iQ=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(iQ||{});function Vge(t){let e=A.useContext(fR);return e||Qs(!1),e}function $ge(t){let e=A.useContext(Oge);return e||Qs(!1),e}function Hge(t){let e=A.useContext(_h);return e||Qs(!1),e}function oQ(t){let e=Hge(),r=e.matches[e.matches.length-1];return r.route.id||Qs(!1),r.route.id}function qge(){var t;let e=A.useContext(rQ),r=$ge(),n=oQ();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Gge(){let{router:t}=Vge(sQ.UseNavigateStable),e=oQ(iQ.UseNavigateStable),r=A.useRef(!1);return nQ(()=>{r.current=!0}),A.useCallback(function(a,s){s===void 0&&(s={}),r.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Ib({fromRouteId:e},s)))},[t,e])}const UF={};function Wge(t,e,r){UF[t]||(UF[t]=!0)}function Kge(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function FE(t){let{to:e,replace:r,state:n,relative:a}=t;Jx()||Qs(!1);let{future:s,static:o}=A.useContext(om),{matches:l}=A.useContext(_h),{pathname:c}=lm(),u=Fs(),d=dR(e,uR(l,s.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return A.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:a}),[u,h,a,r,n]),null}function dr(t){Qs(!1)}function Xge(t){let{basename:e="/",children:r=null,location:n,navigationType:a=d0.Pop,navigator:s,static:o=!1,future:l}=t;Jx()&&Qs(!1);let c=e.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:c,navigator:s,static:o,future:Ib({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof n=="string"&&(n=Qx(n));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:b="default"}=n,w=A.useMemo(()=>{let _=cR(d,c);return _==null?null:{location:{pathname:_,search:h,hash:p,state:g,key:b},navigationType:a}},[c,d,h,p,g,b,a]);return w==null?null:A.createElement(om.Provider,{value:u},A.createElement(tA.Provider,{children:r,value:w}))}function lQ(t){let{children:e,location:r}=t;return Dge(vk(e),r)}new Promise(()=>{});function vk(t,e){e===void 0&&(e=[]);let r=[];return A.Children.forEach(t,(n,a)=>{if(!A.isValidElement(n))return;let s=[...e,a];if(n.type===A.Fragment){r.push.apply(r,vk(n.props.children,s));return}n.type!==dr&&Qs(!1),!n.props.index||!n.props.children||Qs(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vk(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bk(){return bk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bk.apply(this,arguments)}function Yge(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function Zge(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Qge(t,e){return t.button===0&&(!e||e==="_self")&&!Zge(t)}function yk(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function Jge(t,e){let r=yk(t);return e&&e.forEach((n,a)=>{r.has(a)||e.getAll(a).forEach(s=>{r.append(a,s)})}),r}const e1e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t1e="6";try{window.__reactRouterVersion=t1e}catch{}const r1e="startTransition",zF=aX[r1e];function n1e(t){let{basename:e,children:r,future:n,window:a}=t,s=A.useRef();s.current==null&&(s.current=ige({window:a,v5Compat:!0}));let o=s.current,[l,c]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=A.useCallback(h=>{u&&zF?zF(()=>c(h)):c(h)},[c,u]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>Kge(n),[n]),A.createElement(Xge,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const a1e=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",s1e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cQ=A.forwardRef(function(e,r){let{onClick:n,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=e,p=Yge(e,e1e),{basename:g}=A.useContext(om),b,w=!1;if(typeof u=="string"&&s1e.test(u)&&(b=u,a1e))try{let T=new URL(window.location.href),R=u.startsWith("//")?new URL(T.protocol+u):new URL(u),z=cR(R.pathname,g);R.origin===T.origin&&z!=null?u=z+R.search+R.hash:w=!0}catch{}let _=Rge(u,{relative:a}),N=i1e(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function S(T){n&&n(T),T.defaultPrevented||N(T)}return A.createElement("a",bk({},p,{href:b||_,onClick:w||s?n:S,ref:r,target:c}))});var VF;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(VF||(VF={}));var $F;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($F||($F={}));function i1e(t,e){let{target:r,replace:n,state:a,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=Fs(),u=lm(),d=aQ(t,{relative:o});return A.useCallback(h=>{if(Qge(h,r)){h.preventDefault();let p=n!==void 0?n:LE(u)===LE(d);c(t,{replace:p,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,n,a,r,t,s,o,l])}function o1e(t){let e=A.useRef(yk(t)),r=A.useRef(!1),n=lm(),a=A.useMemo(()=>Jge(n.search,r.current?null:e.current),[n.search]),s=Fs(),o=A.useCallback((l,c)=>{const u=yk(typeof l=="function"?l(a):l);r.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const l1e=()=>{};var HF={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uQ=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},c1e=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=t[r++];e[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=t[r++],o=t[r++],l=t[r++],c=((a&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=t[r++],o=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|o&63)}}return e.join("")},dQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const s=t[a],o=a+1<t.length,l=o?t[a+1]:0,c=a+2<t.length,u=c?t[a+2]:0,d=s>>2,h=(s&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),n.push(r[d],r[h],r[p],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uQ(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):c1e(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const s=r[t.charAt(a++)],l=a<t.length?r[t.charAt(a)]:0;++a;const u=a<t.length?r[t.charAt(a)]:64;++a;const h=a<t.length?r[t.charAt(a)]:64;if(++a,s==null||l==null||u==null||h==null)throw new u1e;const p=s<<2|l>>4;if(n.push(p),u!==64){const g=l<<4&240|u>>2;if(n.push(g),h!==64){const b=u<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u1e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d1e=function(t){const e=uQ(t);return dQ.encodeByteArray(e,!0)},BE=function(t){return d1e(t).replace(/\./g,"")},fQ=function(t){try{return dQ.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1e=()=>hQ().__FIREBASE_DEFAULTS__,h1e=()=>{if(typeof process>"u"||typeof HF>"u")return;const t=HF.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m1e=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fQ(t[1]);return e&&JSON.parse(e)},rA=()=>{try{return l1e()||f1e()||h1e()||m1e()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mQ=t=>{var e,r;return(r=(e=rA())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},pQ=t=>{const e=mQ(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},gQ=()=>{var t;return(t=rA())==null?void 0:t.config},xQ=t=>{var e;return(e=rA())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vQ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[BE(JSON.stringify(r)),BE(JSON.stringify(o)),""].join(".")}const $2={};function g1e(){const t={prod:[],emulator:[]};for(const e of Object.keys($2))$2[e]?t.emulator.push(e):t.prod.push(e);return t}function x1e(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let qF=!1;function hR(t,e){if(typeof window>"u"||typeof document>"u"||!Nh(window.location.host)||$2[t]===e||$2[t]||qF)return;$2[t]=e;function r(p){return`__firebase__banner__${p}`}const n="__firebase__banner",s=g1e().prod.length>0;function o(){const p=document.getElementById(n);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{qF=!0,o()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=x1e(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),w=r("learnmore"),_=document.getElementById(w)||document.createElement("a"),N=r("preprendIcon"),S=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;l(T),d(_,w);const R=u();c(S,N),T.append(S,b,_,R),document.body.appendChild(T)}s?(b.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v1e(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oi())}function bQ(){var e;const t=(e=rA())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function b1e(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function y1e(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function w1e(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _1e(){const t=Oi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yQ(){return!bQ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wQ(){return!bQ()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function _Q(){try{return typeof indexedDB=="object"}catch{return!1}}function N1e(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;e(((s=a.error)==null?void 0:s.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1e="FirebaseError";class ef extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=E1e,Object.setPrototypeOf(this,ef.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gy.prototype.create)}}class Gy{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,s=this.errors[e],o=s?A1e(s,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new ef(a,l,n)}}function A1e(t,e){return t.replace(S1e,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const S1e=/\{\$([^}]+)}/g;function j1e(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U0(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const s=t[a],o=e[a];if(GF(s)&&GF(o)){if(!U0(s,o))return!1}else if(s!==o)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function GF(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function x2(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(s)}}),e}function v2(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function T1e(t,e){const r=new C1e(t,e);return r.subscribe.bind(r)}class C1e{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");k1e(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=vj),a.error===void 0&&(a.error=vj),a.complete===void 0&&(a.complete=vj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function k1e(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function vj(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){return t&&t._delegate?t._delegate:t}class z0{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I1e=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new p1e;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R1e(e))try{this.getOrInitializeService({instanceIdentifier:Dm})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(e=Dm){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dm){return this.instances.has(e)}getOptions(e=Dm){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&e(s,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:O1e(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Dm){return this.component?this.component.multipleInstances?e:Dm:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function O1e(t){return t===Dm?void 0:t}function R1e(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new I1e(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Bn||(Bn={}));const D1e={debug:Bn.DEBUG,verbose:Bn.VERBOSE,info:Bn.INFO,warn:Bn.WARN,error:Bn.ERROR,silent:Bn.SILENT},M1e=Bn.INFO,L1e={[Bn.DEBUG]:"log",[Bn.VERBOSE]:"log",[Bn.INFO]:"info",[Bn.WARN]:"warn",[Bn.ERROR]:"error"},F1e=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=L1e[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mR{constructor(e){this.name=e,this._logLevel=M1e,this._logHandler=F1e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Bn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D1e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Bn.DEBUG,...e),this._logHandler(this,Bn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Bn.VERBOSE,...e),this._logHandler(this,Bn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Bn.INFO,...e),this._logHandler(this,Bn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Bn.WARN,...e),this._logHandler(this,Bn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Bn.ERROR,...e),this._logHandler(this,Bn.ERROR,...e)}}const B1e=(t,e)=>e.some(r=>t instanceof r);let WF,KF;function U1e(){return WF||(WF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z1e(){return KF||(KF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NQ=new WeakMap,wk=new WeakMap,EQ=new WeakMap,bj=new WeakMap,pR=new WeakMap;function V1e(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(S0(t.result)),a()},o=()=>{n(t.error),a()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&NQ.set(r,t)}).catch(()=>{}),pR.set(e,t),e}function $1e(t){if(wk.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),a()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wk.set(t,e)}let _k={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return wk.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EQ.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return S0(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function H1e(t){_k=t(_k)}function q1e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(yj(this),e,...r);return EQ.set(n,e.sort?e.sort():[e]),S0(n)}:z1e().includes(t)?function(...e){return t.apply(yj(this),e),S0(NQ.get(this))}:function(...e){return S0(t.apply(yj(this),e))}}function G1e(t){return typeof t=="function"?q1e(t):(t instanceof IDBTransaction&&$1e(t),B1e(t,U1e())?new Proxy(t,_k):t)}function S0(t){if(t instanceof IDBRequest)return V1e(t);if(bj.has(t))return bj.get(t);const e=G1e(t);return e!==t&&(bj.set(t,e),pR.set(e,t)),e}const yj=t=>pR.get(t);function W1e(t,e,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const o=indexedDB.open(t,e),l=S0(o);return n&&o.addEventListener("upgradeneeded",c=>{n(S0(o.result),c.oldVersion,c.newVersion,S0(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const K1e=["get","getKey","getAll","getAllKeys","count"],X1e=["put","add","delete","clear"],wj=new Map;function XF(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wj.get(e))return wj.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=X1e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||K1e.includes(r)))return;const s=async function(o,...l){const c=this.transaction(o,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),a&&c.done]))[0]};return wj.set(e,s),s}H1e(t=>({...t,get:(e,r,n)=>XF(e,r)||t.get(e,r,n),has:(e,r)=>!!XF(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Z1e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Z1e(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nk="@firebase/app",YF="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new mR("@firebase/app"),Q1e="@firebase/app-compat",J1e="@firebase/analytics-compat",exe="@firebase/analytics",txe="@firebase/app-check-compat",rxe="@firebase/app-check",nxe="@firebase/auth",axe="@firebase/auth-compat",sxe="@firebase/database",ixe="@firebase/data-connect",oxe="@firebase/database-compat",lxe="@firebase/functions",cxe="@firebase/functions-compat",uxe="@firebase/installations",dxe="@firebase/installations-compat",fxe="@firebase/messaging",hxe="@firebase/messaging-compat",mxe="@firebase/performance",pxe="@firebase/performance-compat",gxe="@firebase/remote-config",xxe="@firebase/remote-config-compat",vxe="@firebase/storage",bxe="@firebase/storage-compat",yxe="@firebase/firestore",wxe="@firebase/ai",_xe="@firebase/firestore-compat",Nxe="firebase",Exe="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="[DEFAULT]",Axe={[Nk]:"fire-core",[Q1e]:"fire-core-compat",[exe]:"fire-analytics",[J1e]:"fire-analytics-compat",[rxe]:"fire-app-check",[txe]:"fire-app-check-compat",[nxe]:"fire-auth",[axe]:"fire-auth-compat",[sxe]:"fire-rtdb",[ixe]:"fire-data-connect",[oxe]:"fire-rtdb-compat",[lxe]:"fire-fn",[cxe]:"fire-fn-compat",[uxe]:"fire-iid",[dxe]:"fire-iid-compat",[fxe]:"fire-fcm",[hxe]:"fire-fcm-compat",[mxe]:"fire-perf",[pxe]:"fire-perf-compat",[gxe]:"fire-rc",[xxe]:"fire-rc-compat",[vxe]:"fire-gcs",[bxe]:"fire-gcs-compat",[yxe]:"fire-fst",[_xe]:"fire-fst-compat",[wxe]:"fire-vertex","fire-js":"fire-js",[Nxe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Map,Sxe=new Map,Ak=new Map;function ZF(t,e){try{t.container.addComponent(e)}catch(r){ah.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Op(t){const e=t.name;if(Ak.has(e))return ah.debug(`There were multiple attempts to register component ${e}.`),!1;Ak.set(e,t);for(const r of UE.values())ZF(r,t);for(const r of Sxe.values())ZF(r,t);return!0}function Ky(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function fu(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jxe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},j0=new Gy("app","Firebase",jxe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new z0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw j0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=Exe;function AQ(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Ek,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw j0.create("bad-app-name",{appName:String(a)});if(r||(r=gQ()),!r)throw j0.create("no-options");const s=UE.get(a);if(s){if(U0(r,s.options)&&U0(n,s.config))return s;throw j0.create("duplicate-app",{appName:a})}const o=new P1e(a);for(const c of Ak.values())o.addComponent(c);const l=new Txe(r,n,o);return UE.set(a,l),l}function gR(t=Ek){const e=UE.get(t);if(!e&&t===Ek&&gQ())return AQ();if(!e)throw j0.create("no-app",{appName:t});return e}function Md(t,e,r){let n=Axe[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${n}" with version "${e}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ah.warn(o.join(" "));return}Op(new z0(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cxe="firebase-heartbeat-database",kxe=1,Ob="firebase-heartbeat-store";let _j=null;function SQ(){return _j||(_j=W1e(Cxe,kxe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ob)}catch(r){console.warn(r)}}}}).catch(t=>{throw j0.create("idb-open",{originalErrorMessage:t.message})})),_j}async function Ixe(t){try{const r=(await SQ()).transaction(Ob),n=await r.objectStore(Ob).get(jQ(t));return await r.done,n}catch(e){if(e instanceof ef)ah.warn(e.message);else{const r=j0.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ah.warn(r.message)}}}async function QF(t,e){try{const n=(await SQ()).transaction(Ob,"readwrite");await n.objectStore(Ob).put(e,jQ(t)),await n.done}catch(r){if(r instanceof ef)ah.warn(r.message);else{const n=j0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ah.warn(n.message)}}}function jQ(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oxe=1024,Rxe=30;class Pxe{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Mxe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=JF();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Rxe){const o=Lxe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ah.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=JF(),{heartbeatsToSend:n,unsentEntries:a}=Dxe(this._heartbeatsCache.heartbeats),s=BE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return ah.warn(r),""}}}function JF(){return new Date().toISOString().substring(0,10)}function Dxe(t,e=Oxe){const r=[];let n=t.slice();for(const a of t){const s=r.find(o=>o.agent===a.agent);if(s){if(s.dates.push(a.date),eB(r)>e){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),eB(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Mxe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _Q()?N1e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Ixe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return QF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return QF(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function eB(t){return BE(JSON.stringify({version:2,heartbeats:t})).length}function Lxe(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fxe(t){Op(new z0("platform-logger",e=>new Y1e(e),"PRIVATE")),Op(new z0("heartbeat",e=>new Pxe(e),"PRIVATE")),Md(Nk,YF,t),Md(Nk,YF,"esm2020"),Md("fire-js","")}Fxe("");function TQ(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CQ=TQ,kQ=new Gy("auth","Firebase",TQ());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new mR("@firebase/auth");function Bxe(t,...e){zE.logLevel<=Bn.WARN&&zE.warn(`Auth (${sg}): ${t}`,...e)}function vN(t,...e){zE.logLevel<=Bn.ERROR&&zE.error(`Auth (${sg}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t,...e){throw xR(t,...e)}function Ld(t,...e){return xR(t,...e)}function IQ(t,e,r){const n={...CQ(),[e]:r};return new Gy("auth","Firebase",n).create(e,{appName:t.name})}function T0(t){return IQ(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xR(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return kQ.create(t,...e)}function sn(t,e,...r){if(!t)throw xR(e,...r)}function Pf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vN(e),new Error(e)}function sh(t,e){t||Pf(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Uxe(){return tB()==="http:"||tB()==="https:"}function tB(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zxe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Uxe()||y1e()||"connection"in navigator)?navigator.onLine:!0}function Vxe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,r){this.shortDelay=e,this.longDelay=r,sh(r>e,"Short delay should be less than long delay!"),this.isMobile=v1e()||w1e()}get(){return zxe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t,e){sh(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $xe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hxe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qxe=new Xy(3e4,6e4);function ig(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function cm(t,e,r,n,a={}){return RQ(t,a,async()=>{let s={},o={};n&&(e==="GET"?o=n:s={body:JSON.stringify(n)});const l=Wy({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return b1e()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Nh(t.emulatorConfig.host)&&(u.credentials="include"),OQ.fetch()(await PQ(t,t.config.apiHost,r,l),u)})}async function RQ(t,e,r){t._canInitEmulator=!1;const n={...$xe,...e};try{const a=new Wxe(t),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw z5(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw z5(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw z5(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw z5(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw IQ(t,d,u);id(t,d)}}catch(a){if(a instanceof ef)throw a;id(t,"network-request-failed",{message:String(a)})}}async function aA(t,e,r,n,a={}){const s=await cm(t,e,r,n,a);return"mfaPendingCredential"in s&&id(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function PQ(t,e,r,n){const a=`${e}${r}?${n}`,s=t,o=s.config.emulator?vR(t.config,a):`${t.config.apiScheme}://${a}`;return Hxe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Gxe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wxe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ld(this.auth,"network-request-failed")),qxe.get())})}}function z5(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=Ld(t,e,n);return a.customData._tokenResponse=r,a}function rB(t){return t!==void 0&&t.enterprise!==void 0}class Kxe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return Gxe(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xxe(t,e){return cm(t,"GET","/v2/recaptchaConfig",ig(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yxe(t,e){return cm(t,"POST","/v1/accounts:delete",e)}async function VE(t,e){return cm(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function DQ(t,e=!1){const r=Ns(t),n=await r.getIdToken(e),a=bR(n);sn(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:H2(Nj(a.auth_time)),issuedAtTime:H2(Nj(a.iat)),expirationTime:H2(Nj(a.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Nj(t){return Number(t)*1e3}function bR(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return vN("JWT malformed, contained fewer than 3 sections"),null;try{const a=fQ(r);return a?JSON.parse(a):(vN("Failed to decode base64 JWT payload"),null)}catch(a){return vN("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function nB(t){const e=bR(t);return sn(e,"internal-error"),sn(typeof e.exp<"u","internal-error"),sn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof ef&&Zxe(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function Zxe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qxe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=H2(this.lastLoginAt),this.creationTime=H2(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $E(t){var h;const e=t.auth,r=await t.getIdToken(),n=await Rb(t,VE(e,{idToken:r}));sn(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];t._notifyReloadListener(a);const s=(h=a.providerUserInfo)!=null&&h.length?LQ(a.providerUserInfo):[],o=Jxe(t.providerData,s),l=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new jk(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function MQ(t){const e=Ns(t);await $E(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Jxe(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function LQ(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eve(t,e){const r=await RQ(t,{},async()=>{const n=Wy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:s}=t.config,o=await PQ(t,a,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:n};return t.emulatorConfig&&Nh(t.emulatorConfig.host)&&(c.credentials="include"),OQ.fetch()(o,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function tve(t,e){return cm(t,"POST","/v2/accounts:revokeToken",ig(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){sn(e.idToken,"internal-error"),sn(typeof e.idToken<"u","internal-error"),sn(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){sn(e.length!==0,"internal-error");const r=nB(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(sn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await eve(e,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,o=new P1;return n&&(sn(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),a&&(sn(typeof a=="string","internal-error",{appName:e}),o.accessToken=a),s&&(sn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new P1,this.toJSON())}_performRefresh(){return Pf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t,e){sn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class td{constructor({uid:e,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new Qxe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jk(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Rb(this,this.stsTokenManager.getToken(this.auth,e));return sn(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return DQ(this,e)}reload(){return MQ(this)}_assign(e){this!==e&&(sn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new td({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){sn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await $E(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fu(this.auth.app))return Promise.reject(T0(this.auth));const e=await this.getIdToken();return await Rb(this,Yxe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,o=r.photoURL??void 0,l=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:g,providerData:b,stsTokenManager:w}=r;sn(h&&w,e,"internal-error");const _=P1.fromJSON(this.name,w);sn(typeof h=="string",e,"internal-error"),Uh(n,e.name),Uh(a,e.name),sn(typeof p=="boolean",e,"internal-error"),sn(typeof g=="boolean",e,"internal-error"),Uh(s,e.name),Uh(o,e.name),Uh(l,e.name),Uh(c,e.name),Uh(u,e.name),Uh(d,e.name);const N=new td({uid:h,auth:e,email:a,emailVerified:p,displayName:n,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(N.providerData=b.map(S=>({...S}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,r,n=!1){const a=new P1;a.updateFromServerResponse(r);const s=new td({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await $E(s),s}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];sn(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?LQ(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),l=new P1;l.updateFromIdToken(n);const c=new td({uid:a.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new jk(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=new Map;function Df(t){sh(t instanceof Function,"Expected a class definition");let e=aB.get(t);return e?(sh(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,aB.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}FQ.type="NONE";const Tk=FQ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e,r){return`firebase:${t}:${e}:${r}`}class D1{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=bN(this.userKey,a.apiKey,s),this.fullPersistenceKey=bN("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await VE(this.auth,{idToken:e}).catch(()=>{});return r?td._fromGetAccountInfoResponse(this.auth,r,e):null}return td._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new D1(Df(Tk),e,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Df(Tk);const o=bN(n,e.config.apiKey,e.name);let l=null;for(const u of r)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const p=await VE(e,{idToken:d}).catch(()=>{});if(!p)break;h=await td._fromGetAccountInfoResponse(e,p,d)}else h=td._fromJSON(e,d);u!==s&&(l=h),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new D1(s,e,n):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new D1(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VQ(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HQ(e))return"Blackberry";if(qQ(e))return"Webos";if(UQ(e))return"Safari";if((e.includes("chrome/")||zQ(e))&&!e.includes("edge/"))return"Chrome";if($Q(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function BQ(t=Oi()){return/firefox\//i.test(t)}function UQ(t=Oi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zQ(t=Oi()){return/crios\//i.test(t)}function VQ(t=Oi()){return/iemobile/i.test(t)}function $Q(t=Oi()){return/android/i.test(t)}function HQ(t=Oi()){return/blackberry/i.test(t)}function qQ(t=Oi()){return/webos/i.test(t)}function yR(t=Oi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rve(t=Oi()){var e;return yR(t)&&!!((e=window.navigator)!=null&&e.standalone)}function nve(){return _1e()&&document.documentMode===10}function GQ(t=Oi()){return yR(t)||$Q(t)||qQ(t)||HQ(t)||/windows phone/i.test(t)||VQ(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WQ(t,e=[]){let r;switch(t){case"Browser":r=sB(Oi());break;case"Worker":r=`${sB(Oi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${sg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ave{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sve(t,e={}){return cm(t,"GET","/v2/passwordPolicy",ig(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ive=6;class ove{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??ive,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lve{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iB(this),this.idTokenSubscription=new iB(this),this.beforeStateQueue=new ave(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kQ,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Df(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await D1.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await VE(this,{idToken:e}),n=await td._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(fu(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return sn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await $E(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vxe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fu(this.app))return Promise.reject(T0(this));const r=e?Ns(e):null;return r&&sn(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&sn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fu(this.app)?Promise.reject(T0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fu(this.app)?Promise.reject(T0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Df(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sve(this),r=new ove(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gy("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await tve(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Df(e)||this._popupRedirectResolver;sn(r,this,"argument-error"),this.redirectPersistenceManager=await D1.create(this,[Df(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(sn(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof r=="function"){const c=e.addObserver(r,n,a);return()=>{o=!0,c()}}else{const c=e.addObserver(r);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return sn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WQ(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(fu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&Bxe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ev(t){return Ns(t)}class iB{constructor(e){this.auth=e,this.observer=null,this.addObserver=T1e(r=>this.observer=r)}get next(){return sn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cve(t){sA=t}function KQ(t){return sA.loadJS(t)}function uve(){return sA.recaptchaEnterpriseScript}function dve(){return sA.gapiScript}function fve(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hve{constructor(){this.enterprise=new mve}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class mve{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const pve="recaptcha-enterprise",XQ="NO_RECAPTCHA";class gve{constructor(e){this.type=pve,this.auth=ev(e)}async verify(e="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Xxe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new Kxe(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function a(s,o,l){const c=window.grecaptcha;rB(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(XQ)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hve().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{n(this.auth).then(l=>{if(!r&&rB(window.grecaptcha))a(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=uve();c.length!==0&&(c+=l),KQ(c).then(()=>{a(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function oB(t,e,r,n=!1,a=!1){const s=new gve(t);let o;if(a)o=XQ;else try{o=await s.verify(r)}catch{o=await s.verify(r,!0)}const l={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function lB(t,e,r,n,a){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await oB(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await oB(t,e,r,r==="getOobCode");return n(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YQ(t,e){const r=Ky(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(U0(s,e??{}))return a;id(a,"already-initialized")}return r.initialize({options:e})}function xve(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Df);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function ZQ(t,e,r){const n=ev(t);sn(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,s=QQ(e),{host:o,port:l}=vve(e),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){sn(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),sn(U0(u,n.config.emulator)&&U0(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Nh(o)?(nA(`${s}//${o}${c}`),hR("Auth",!0)):bve()}function QQ(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vve(t){const e=QQ(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:cB(n.substr(s.length+1))}}else{const[s,o]=n.split(":");return{host:s,port:cB(o)}}}function cB(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bve(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Pf("not implemented")}_getIdTokenResponse(e){return Pf("not implemented")}_linkToIdToken(e,r){return Pf("not implemented")}_getReauthenticationResolver(e){return Pf("not implemented")}}async function yve(t,e){return cm(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wve(t,e){return aA(t,"POST","/v1/accounts:signInWithPassword",ig(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _ve(t,e){return aA(t,"POST","/v1/accounts:signInWithEmailLink",ig(t,e))}async function Nve(t,e){return aA(t,"POST","/v1/accounts:signInWithEmailLink",ig(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends iA{constructor(e,r,n,a=null){super("password",n),this._email=e,this._password=r,this._tenantId=a}static _fromEmailAndPassword(e,r){return new ux(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ux(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lB(e,r,"signInWithPassword",wve);case"emailLink":return _ve(e,{email:this._email,oobCode:this._password});default:id(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lB(e,n,"signUpPassword",yve);case"emailLink":return Nve(e,{idToken:r,email:this._email,oobCode:this._password});default:id(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(t,e){return aA(t,"POST","/v1/accounts:signInWithIdp",ig(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eve="http://localhost";class V0 extends iA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new V0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):id("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const o=new V0(n,a);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return M1(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,M1(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,M1(e,r)}buildRequest(){const e={requestUri:Eve,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Wy(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ave(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Sve(t){const e=x2(v2(t)).link,r=e?x2(v2(e)).deep_link_id:null,n=x2(v2(t)).deep_link_id;return(n?x2(v2(n)).link:null)||n||r||e||t}class oA{constructor(e){const r=x2(v2(e)),n=r.apiKey??null,a=r.oobCode??null,s=Ave(r.mode??null);sn(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=Sve(e);try{return new oA(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.providerId=og.PROVIDER_ID}static credential(e,r){return ux._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=oA.parseLink(r);return sn(n,"argument-error"),ux._fromEmailAndCode(e,n.code,n.tenantId)}}og.PROVIDER_ID="password";og.EMAIL_PASSWORD_SIGN_IN_METHOD="password";og.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy extends JQ{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef extends Yy{constructor(){super("facebook.com")}static credential(e){return V0._fromParams({providerId:Ef.PROVIDER_ID,signInMethod:Ef.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ef.credentialFromTaggedObject(e)}static credentialFromError(e){return Ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ef.credential(e.oauthAccessToken)}catch{return null}}}Ef.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ef.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Yy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return V0._fromParams({providerId:Af.PROVIDER_ID,signInMethod:Af.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Af.credentialFromTaggedObject(e)}static credentialFromError(e){return Af.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Af.credential(r,n)}catch{return null}}}Af.GOOGLE_SIGN_IN_METHOD="google.com";Af.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends Yy{constructor(){super("github.com")}static credential(e){return V0._fromParams({providerId:Sf.PROVIDER_ID,signInMethod:Sf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sf.credentialFromTaggedObject(e)}static credentialFromError(e){return Sf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sf.credential(e.oauthAccessToken)}catch{return null}}}Sf.GITHUB_SIGN_IN_METHOD="github.com";Sf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends Yy{constructor(){super("twitter.com")}static credential(e,r){return V0._fromParams({providerId:jf.PROVIDER_ID,signInMethod:jf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return jf.credentialFromTaggedObject(e)}static credentialFromError(e){return jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return jf.credential(r,n)}catch{return null}}}jf.TWITTER_SIGN_IN_METHOD="twitter.com";jf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const s=await td._fromIdTokenResponse(e,n,a),o=uB(n);return new dx({user:s,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=uB(n);return new dx({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function uB(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE extends ef{constructor(e,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,HE.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new HE(e,r,n,a)}}function eJ(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?HE._fromErrorAndOperation(t,s,e,n):s})}async function jve(t,e,r=!1){const n=await Rb(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return dx._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tve(t,e,r=!1){const{auth:n}=t;if(fu(n.app))return Promise.reject(T0(n));const a="reauthenticate";try{const s=await Rb(t,eJ(n,a,e,t),r);sn(s.idToken,n,"internal-error");const o=bR(s.idToken);sn(o,n,"internal-error");const{sub:l}=o;return sn(t.uid===l,n,"user-mismatch"),dx._forOperation(t,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&id(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tJ(t,e,r=!1){if(fu(t.app))return Promise.reject(T0(t));const n="signIn",a=await eJ(t,n,e),s=await dx._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(s.user),s}async function rJ(t,e){return tJ(ev(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cve(t){const e=ev(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function nJ(t,e,r){return fu(t.app)?Promise.reject(T0(t)):rJ(Ns(t),og.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Cve(t),n})}function aJ(t,e,r,n){return Ns(t).onIdTokenChanged(e,r,n)}function sJ(t,e,r){return Ns(t).beforeAuthStateChanged(e,r)}function iJ(t,e,r,n){return Ns(t).onAuthStateChanged(e,r,n)}function wR(t){return Ns(t).signOut()}const qE="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(qE,"1"),this.storage.removeItem(qE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kve=1e3,Ive=10;class lJ extends oJ{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GQ(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},s=this.storage.getItem(n);nve()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Ive):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},kve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}lJ.type="LOCAL";const cJ=lJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uJ extends oJ{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}uJ.type="SESSION";const _R=uJ;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ove(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new lA(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:s}=r.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async u=>u(r.origin,s)),c=await Ove(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lA.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=NR("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(){return window}function Pve(t){Fd().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dJ(){return typeof Fd().WorkerGlobalScope<"u"&&typeof Fd().importScripts=="function"}async function Dve(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mve(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Lve(){return dJ()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ="firebaseLocalStorageDb",Fve=1,GE="firebaseLocalStorage",hJ="fbase_key";class Zy{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function cA(t,e){return t.transaction([GE],e?"readwrite":"readonly").objectStore(GE)}function Bve(){const t=indexedDB.deleteDatabase(fJ);return new Zy(t).toPromise()}function Ck(){const t=indexedDB.open(fJ,Fve);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(GE,{keyPath:hJ})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(GE)?e(n):(n.close(),await Bve(),e(await Ck()))})})}async function dB(t,e,r){const n=cA(t,!0).put({[hJ]:e,value:r});return new Zy(n).toPromise()}async function Uve(t,e){const r=cA(t,!1).get(e),n=await new Zy(r).toPromise();return n===void 0?null:n.value}function fB(t,e){const r=cA(t,!0).delete(e);return new Zy(r).toPromise()}const zve=800,Vve=3;class mJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ck(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Vve)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dJ()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lA._getInstance(Lve()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Dve(),!this.activeServiceWorker)return;this.sender=new Rve(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mve()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ck();return await dB(e,qE,"1"),await fB(e,qE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>dB(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Uve(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>fB(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const s=cA(a,!1).getAll();return new Zy(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:s}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zve)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mJ.type="LOCAL";const pJ=mJ;new Xy(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ve(t,e){return e?Df(e):(sn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER extends iA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return M1(e,this._buildIdpRequest())}_linkToIdToken(e,r){return M1(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return M1(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Hve(t){return tJ(t.auth,new ER(t),t.bypassAuthState)}function qve(t){const{auth:e,user:r}=t;return sn(r,e,"internal-error"),Tve(r,new ER(t),t.bypassAuthState)}async function Gve(t){const{auth:e,user:r}=t;return sn(r,e,"internal-error"),jve(r,new ER(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(e,r,n,a,s=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hve;case"linkViaPopup":case"linkViaRedirect":return Gve;case"reauthViaPopup":case"reauthViaRedirect":return qve;default:id(this.auth,"internal-error")}}resolve(e){sh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wve=new Xy(2e3,1e4);class g1 extends gJ{constructor(e,r,n,a,s){super(e,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,g1.currentPopupAction&&g1.currentPopupAction.cancel(),g1.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return sn(e,this.auth,"internal-error"),e}async onExecution(){sh(this.filter.length===1,"Popup operations only handle one event");const e=NR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ld(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ld(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g1.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ld(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wve.get())};e()}}g1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kve="pendingRedirect",yN=new Map;class Xve extends gJ{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=yN.get(this.auth._key());if(!e){try{const n=await Yve(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}yN.set(this.auth._key(),e)}return this.bypassAuthState||yN.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Yve(t,e){const r=Jve(e),n=Qve(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Zve(t,e){yN.set(t._key(),e)}function Qve(t){return Df(t._redirectPersistence)}function Jve(t){return bN(Kve,t.config.apiKey,t.name)}async function e2e(t,e,r=!1){if(fu(t.app))return Promise.reject(T0(t));const n=ev(t),a=$ve(n,e),o=await new Xve(n,a,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2e=10*60*1e3;class r2e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n2e(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!xJ(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ld(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=t2e&&this.cachedEventUids.clear(),this.cachedEventUids.has(hB(e))}saveEventToCache(e){this.cachedEventUids.add(hB(e)),this.lastProcessedEventTime=Date.now()}}function hB(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xJ({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function n2e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xJ(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2e(t,e={}){return cm(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i2e=/^https?/;async function o2e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await a2e(t);for(const r of e)try{if(l2e(r))return}catch{}id(t,"unauthorized-domain")}function l2e(t){const e=Sk(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!i2e.test(r))return!1;if(s2e.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2e=new Xy(3e4,6e4);function mB(){const t=Fd().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function u2e(t){return new Promise((e,r)=>{var a,s,o;function n(){mB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mB(),r(Ld(t,"network-request-failed"))},timeout:c2e.get()})}if((s=(a=Fd().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Fd().gapi)!=null&&o.load)n();else{const l=fve("iframefcb");return Fd()[l]=()=>{gapi.load?n():r(Ld(t,"network-request-failed"))},KQ(`${dve()}?onload=${l}`).catch(c=>r(c))}}).catch(e=>{throw wN=null,e})}let wN=null;function d2e(t){return wN=wN||u2e(t),wN}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2e=new Xy(5e3,15e3),h2e="__/auth/iframe",m2e="emulator/auth/iframe",p2e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g2e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function x2e(t){const e=t.config;sn(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?vR(e,m2e):`https://${t.config.authDomain}/${h2e}`,n={apiKey:e.apiKey,appName:t.name,v:sg},a=g2e.get(t.config.apiHost);a&&(n.eid=a);const s=t._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${Wy(n).slice(1)}`}async function v2e(t){const e=await d2e(t),r=Fd().gapi;return sn(r,t,"internal-error"),e.open({where:document.body,url:x2e(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p2e,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const o=Ld(t,"network-request-failed"),l=Fd().setTimeout(()=>{s(o)},f2e.get());function c(){Fd().clearTimeout(l),a(n)}n.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y2e=500,w2e=600,_2e="_blank",N2e="http://localhost";class pB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E2e(t,e,r,n=y2e,a=w2e){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c={...b2e,width:n.toString(),height:a.toString(),top:s,left:o},u=Oi().toLowerCase();r&&(l=zQ(u)?_2e:r),BQ(u)&&(e=e||N2e,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(rve(u)&&l!=="_self")return A2e(e||"",l),new pB(null);const h=window.open(e||"",l,d);sn(h,t,"popup-blocked");try{h.focus()}catch{}return new pB(h)}function A2e(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2e="__/auth/handler",j2e="emulator/auth/handler",T2e=encodeURIComponent("fac");async function gB(t,e,r,n,a,s){sn(t.config.authDomain,t,"auth-domain-config-required"),sn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:sg,eventId:a};if(e instanceof JQ){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",j1e(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Yy){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${T2e}=${encodeURIComponent(c)}`:"";return`${C2e(t)}?${Wy(l).slice(1)}${u}`}function C2e({config:t}){return t.emulator?vR(t,j2e):`https://${t.authDomain}/${S2e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej="webStorageSupport";class k2e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_R,this._completeRedirectFn=e2e,this._overrideRedirectResult=Zve}async _openPopup(e,r,n,a){var o;sh((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await gB(e,r,n,Sk(),a);return E2e(e,s,NR())}async _openRedirect(e,r,n,a){await this._originValidation(e);const s=await gB(e,r,n,Sk(),a);return Pve(s),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(sh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await v2e(e),n=new r2e(e);return r.register("authEvent",a=>(sn(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Ej,{type:Ej},a=>{var o;const s=(o=a==null?void 0:a[0])==null?void 0:o[Ej];s!==void 0&&r(!!s),id(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=o2e(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return GQ()||UQ()||yR()}}const vJ=k2e;var xB="@firebase/auth",vB="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){sn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R2e(t){Op(new z0("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;sn(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WQ(t)},u=new lve(n,a,s,c);return xve(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Op(new z0("auth-internal",e=>{const r=ev(e.getProvider("auth").getImmediate());return(n=>new I2e(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Md(xB,vB,O2e(t)),Md(xB,vB,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2e=5*60,D2e=xQ("authIdTokenMaxAge")||P2e;let bB=null;const M2e=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>D2e)return;const a=r==null?void 0:r.token;bB!==a&&(bB=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function bJ(t=gR()){const e=Ky(t,"auth");if(e.isInitialized())return e.getImmediate();const r=YQ(t,{popupRedirectResolver:vJ,persistence:[pJ,cJ,_R]}),n=xQ("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const o=M2e(s.toString());sJ(r,o,()=>o(r.currentUser)),aJ(r,l=>o(l))}}const a=mQ("auth");return a&&ZQ(r,`http://${a}`),r}function L2e(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}cve({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const s=Ld("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",L2e().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R2e("Browser");const F2e=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:oA,AuthCredential:iA,EmailAuthCredential:ux,EmailAuthProvider:og,FacebookAuthProvider:Ef,GithubAuthProvider:Sf,GoogleAuthProvider:Af,OAuthCredential:V0,TwitterAuthProvider:jf,beforeAuthStateChanged:sJ,browserLocalPersistence:cJ,browserPopupRedirectResolver:vJ,browserSessionPersistence:_R,connectAuthEmulator:ZQ,getAuth:bJ,getIdTokenResult:DQ,inMemoryPersistence:Tk,indexedDBLocalPersistence:pJ,initializeAuth:YQ,onAuthStateChanged:iJ,onIdTokenChanged:aJ,prodErrorMap:CQ,reload:MQ,signInWithCredential:rJ,signInWithEmailAndPassword:nJ,signOut:wR},Symbol.toStringTag,{value:"Module"})),B2e="modulepreload",U2e=function(t){return"/"+t},yB={},cp=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=U2e(c),c in yB)return;yB[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":B2e,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var z2e="firebase",V2e="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Md(z2e,V2e,"app");var wB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C0,yJ;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,D){function I(){}I.prototype=D.prototype,O.F=D.prototype,O.prototype=new I,O.prototype.constructor=O,O.D=function(V,P,B){for(var F=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)F[ee-2]=arguments[ee];return D.prototype[P].apply(V,F)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,D,I){I||(I=0);const V=Array(16);if(typeof D=="string")for(var P=0;P<16;++P)V[P]=D.charCodeAt(I++)|D.charCodeAt(I++)<<8|D.charCodeAt(I++)<<16|D.charCodeAt(I++)<<24;else for(P=0;P<16;++P)V[P]=D[I++]|D[I++]<<8|D[I++]<<16|D[I++]<<24;D=O.g[0],I=O.g[1],P=O.g[2];let B=O.g[3],F;F=D+(B^I&(P^B))+V[0]+3614090360&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(P^D&(I^P))+V[1]+3905402710&4294967295,B=D+(F<<12&4294967295|F>>>20),F=P+(I^B&(D^I))+V[2]+606105819&4294967295,P=B+(F<<17&4294967295|F>>>15),F=I+(D^P&(B^D))+V[3]+3250441966&4294967295,I=P+(F<<22&4294967295|F>>>10),F=D+(B^I&(P^B))+V[4]+4118548399&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(P^D&(I^P))+V[5]+1200080426&4294967295,B=D+(F<<12&4294967295|F>>>20),F=P+(I^B&(D^I))+V[6]+2821735955&4294967295,P=B+(F<<17&4294967295|F>>>15),F=I+(D^P&(B^D))+V[7]+4249261313&4294967295,I=P+(F<<22&4294967295|F>>>10),F=D+(B^I&(P^B))+V[8]+1770035416&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(P^D&(I^P))+V[9]+2336552879&4294967295,B=D+(F<<12&4294967295|F>>>20),F=P+(I^B&(D^I))+V[10]+4294925233&4294967295,P=B+(F<<17&4294967295|F>>>15),F=I+(D^P&(B^D))+V[11]+2304563134&4294967295,I=P+(F<<22&4294967295|F>>>10),F=D+(B^I&(P^B))+V[12]+1804603682&4294967295,D=I+(F<<7&4294967295|F>>>25),F=B+(P^D&(I^P))+V[13]+4254626195&4294967295,B=D+(F<<12&4294967295|F>>>20),F=P+(I^B&(D^I))+V[14]+2792965006&4294967295,P=B+(F<<17&4294967295|F>>>15),F=I+(D^P&(B^D))+V[15]+1236535329&4294967295,I=P+(F<<22&4294967295|F>>>10),F=D+(P^B&(I^P))+V[1]+4129170786&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^P&(D^I))+V[6]+3225465664&4294967295,B=D+(F<<9&4294967295|F>>>23),F=P+(D^I&(B^D))+V[11]+643717713&4294967295,P=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(P^B))+V[0]+3921069994&4294967295,I=P+(F<<20&4294967295|F>>>12),F=D+(P^B&(I^P))+V[5]+3593408605&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^P&(D^I))+V[10]+38016083&4294967295,B=D+(F<<9&4294967295|F>>>23),F=P+(D^I&(B^D))+V[15]+3634488961&4294967295,P=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(P^B))+V[4]+3889429448&4294967295,I=P+(F<<20&4294967295|F>>>12),F=D+(P^B&(I^P))+V[9]+568446438&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^P&(D^I))+V[14]+3275163606&4294967295,B=D+(F<<9&4294967295|F>>>23),F=P+(D^I&(B^D))+V[3]+4107603335&4294967295,P=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(P^B))+V[8]+1163531501&4294967295,I=P+(F<<20&4294967295|F>>>12),F=D+(P^B&(I^P))+V[13]+2850285829&4294967295,D=I+(F<<5&4294967295|F>>>27),F=B+(I^P&(D^I))+V[2]+4243563512&4294967295,B=D+(F<<9&4294967295|F>>>23),F=P+(D^I&(B^D))+V[7]+1735328473&4294967295,P=B+(F<<14&4294967295|F>>>18),F=I+(B^D&(P^B))+V[12]+2368359562&4294967295,I=P+(F<<20&4294967295|F>>>12),F=D+(I^P^B)+V[5]+4294588738&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^P)+V[8]+2272392833&4294967295,B=D+(F<<11&4294967295|F>>>21),F=P+(B^D^I)+V[11]+1839030562&4294967295,P=B+(F<<16&4294967295|F>>>16),F=I+(P^B^D)+V[14]+4259657740&4294967295,I=P+(F<<23&4294967295|F>>>9),F=D+(I^P^B)+V[1]+2763975236&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^P)+V[4]+1272893353&4294967295,B=D+(F<<11&4294967295|F>>>21),F=P+(B^D^I)+V[7]+4139469664&4294967295,P=B+(F<<16&4294967295|F>>>16),F=I+(P^B^D)+V[10]+3200236656&4294967295,I=P+(F<<23&4294967295|F>>>9),F=D+(I^P^B)+V[13]+681279174&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^P)+V[0]+3936430074&4294967295,B=D+(F<<11&4294967295|F>>>21),F=P+(B^D^I)+V[3]+3572445317&4294967295,P=B+(F<<16&4294967295|F>>>16),F=I+(P^B^D)+V[6]+76029189&4294967295,I=P+(F<<23&4294967295|F>>>9),F=D+(I^P^B)+V[9]+3654602809&4294967295,D=I+(F<<4&4294967295|F>>>28),F=B+(D^I^P)+V[12]+3873151461&4294967295,B=D+(F<<11&4294967295|F>>>21),F=P+(B^D^I)+V[15]+530742520&4294967295,P=B+(F<<16&4294967295|F>>>16),F=I+(P^B^D)+V[2]+3299628645&4294967295,I=P+(F<<23&4294967295|F>>>9),F=D+(P^(I|~B))+V[0]+4096336452&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~P))+V[7]+1126891415&4294967295,B=D+(F<<10&4294967295|F>>>22),F=P+(D^(B|~I))+V[14]+2878612391&4294967295,P=B+(F<<15&4294967295|F>>>17),F=I+(B^(P|~D))+V[5]+4237533241&4294967295,I=P+(F<<21&4294967295|F>>>11),F=D+(P^(I|~B))+V[12]+1700485571&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~P))+V[3]+2399980690&4294967295,B=D+(F<<10&4294967295|F>>>22),F=P+(D^(B|~I))+V[10]+4293915773&4294967295,P=B+(F<<15&4294967295|F>>>17),F=I+(B^(P|~D))+V[1]+2240044497&4294967295,I=P+(F<<21&4294967295|F>>>11),F=D+(P^(I|~B))+V[8]+1873313359&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~P))+V[15]+4264355552&4294967295,B=D+(F<<10&4294967295|F>>>22),F=P+(D^(B|~I))+V[6]+2734768916&4294967295,P=B+(F<<15&4294967295|F>>>17),F=I+(B^(P|~D))+V[13]+1309151649&4294967295,I=P+(F<<21&4294967295|F>>>11),F=D+(P^(I|~B))+V[4]+4149444226&4294967295,D=I+(F<<6&4294967295|F>>>26),F=B+(I^(D|~P))+V[11]+3174756917&4294967295,B=D+(F<<10&4294967295|F>>>22),F=P+(D^(B|~I))+V[2]+718787259&4294967295,P=B+(F<<15&4294967295|F>>>17),F=I+(B^(P|~D))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+D&4294967295,O.g[1]=O.g[1]+(P+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+P&4294967295,O.g[3]=O.g[3]+B&4294967295}n.prototype.v=function(O,D){D===void 0&&(D=O.length);const I=D-this.blockSize,V=this.C;let P=this.h,B=0;for(;B<D;){if(P==0)for(;B<=I;)a(this,O,B),B+=this.blockSize;if(typeof O=="string"){for(;B<D;)if(V[P++]=O.charCodeAt(B++),P==this.blockSize){a(this,V),P=0;break}}else for(;B<D;)if(V[P++]=O[B++],P==this.blockSize){a(this,V),P=0;break}}this.h=P,this.o+=D},n.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var D=1;D<O.length-8;++D)O[D]=0;D=this.o*8;for(var I=O.length-8;I<O.length;++I)O[I]=D&255,D/=256;for(this.v(O),O=Array(16),D=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)O[D++]=this.g[I]>>>V&255;return O};function s(O,D){var I=l;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=D(O)}function o(O,D){this.h=D;const I=[];let V=!0;for(let P=O.length-1;P>=0;P--){const B=O[P]|0;V&&B==D||(I[P]=B,V=!1)}this.g=I}var l={};function c(O){return-128<=O&&O<128?s(O,function(D){return new o([D|0],D<0?-1:0)}):new o([O|0],O<0?-1:0)}function u(O){if(isNaN(O)||!isFinite(O))return h;if(O<0)return _(u(-O));const D=[];let I=1;for(let V=0;O>=I;V++)D[V]=O/I|0,I*=4294967296;return new o(D,0)}function d(O,D){if(O.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(O.charAt(0)=="-")return _(d(O.substring(1),D));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(D,8));let V=h;for(let B=0;B<O.length;B+=8){var P=Math.min(8,O.length-B);const F=parseInt(O.substring(B,B+P),D);P<8?(P=u(Math.pow(D,P)),V=V.j(P).add(u(F))):(V=V.j(I),V=V.add(u(F)))}return V}var h=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-_(this).m();let O=0,D=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);O+=(V>=0?V:4294967296+V)*D,D*=4294967296}return O},t.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(b(this))return"0";if(w(this))return"-"+_(this).toString(O);const D=u(Math.pow(O,6));var I=this;let V="";for(;;){const P=R(I,D).g;I=N(I,P.j(D));let B=((I.g.length>0?I.g[0]:I.h)>>>0).toString(O);if(I=P,b(I))return B+V;for(;B.length<6;)B="0"+B;V=B+V}},t.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function b(O){if(O.h!=0)return!1;for(let D=0;D<O.g.length;D++)if(O.g[D]!=0)return!1;return!0}function w(O){return O.h==-1}t.l=function(O){return O=N(this,O),w(O)?-1:b(O)?0:1};function _(O){const D=O.g.length,I=[];for(let V=0;V<D;V++)I[V]=~O.g[V];return new o(I,~O.h).add(p)}t.abs=function(){return w(this)?_(this):this},t.add=function(O){const D=Math.max(this.g.length,O.g.length),I=[];let V=0;for(let P=0;P<=D;P++){let B=V+(this.i(P)&65535)+(O.i(P)&65535),F=(B>>>16)+(this.i(P)>>>16)+(O.i(P)>>>16);V=F>>>16,B&=65535,F&=65535,I[P]=F<<16|B}return new o(I,I[I.length-1]&-2147483648?-1:0)};function N(O,D){return O.add(_(D))}t.j=function(O){if(b(this)||b(O))return h;if(w(this))return w(O)?_(this).j(_(O)):_(_(this).j(O));if(w(O))return _(this.j(_(O)));if(this.l(g)<0&&O.l(g)<0)return u(this.m()*O.m());const D=this.g.length+O.g.length,I=[];for(var V=0;V<2*D;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let P=0;P<O.g.length;P++){const B=this.i(V)>>>16,F=this.i(V)&65535,ee=O.i(P)>>>16,Z=O.i(P)&65535;I[2*V+2*P]+=F*Z,S(I,2*V+2*P),I[2*V+2*P+1]+=B*Z,S(I,2*V+2*P+1),I[2*V+2*P+1]+=F*ee,S(I,2*V+2*P+1),I[2*V+2*P+2]+=B*ee,S(I,2*V+2*P+2)}for(O=0;O<D;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=D;O<2*D;O++)I[O]=0;return new o(I,0)};function S(O,D){for(;(O[D]&65535)!=O[D];)O[D+1]+=O[D]>>>16,O[D]&=65535,D++}function T(O,D){this.g=O,this.h=D}function R(O,D){if(b(D))throw Error("division by zero");if(b(O))return new T(h,h);if(w(O))return D=R(_(O),D),new T(_(D.g),_(D.h));if(w(D))return D=R(O,_(D)),new T(_(D.g),D.h);if(O.g.length>30){if(w(O)||w(D))throw Error("slowDivide_ only works with positive integers.");for(var I=p,V=D;V.l(O)<=0;)I=z(I),V=z(V);var P=G(I,1),B=G(V,1);for(V=G(V,2),I=G(I,2);!b(V);){var F=B.add(V);F.l(O)<=0&&(P=P.add(I),B=F),V=G(V,1),I=G(I,1)}return D=N(O,P.j(D)),new T(P,D)}for(P=h;O.l(D)>=0;){for(I=Math.max(1,Math.floor(O.m()/D.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),B=u(I),F=B.j(D);w(F)||F.l(O)>0;)I-=V,B=u(I),F=B.j(D);b(B)&&(B=p),P=P.add(B),O=N(O,F)}return new T(P,O)}t.B=function(O){return R(this,O).h},t.and=function(O){const D=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)&O.i(V);return new o(I,this.h&O.h)},t.or=function(O){const D=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)|O.i(V);return new o(I,this.h|O.h)},t.xor=function(O){const D=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)^O.i(V);return new o(I,this.h^O.h)};function z(O){const D=O.g.length+1,I=[];for(let V=0;V<D;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new o(I,O.h)}function G(O,D){const I=D>>5;D%=32;const V=O.g.length-I,P=[];for(let B=0;B<V;B++)P[B]=D>0?O.i(B+I)>>>D|O.i(B+I+1)<<32-D:O.i(B+I);return new o(P,O.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,yJ=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,C0=o}).apply(typeof wB<"u"?wB:typeof self<"u"?self:typeof window<"u"?window:{});var V5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wJ,b2,_J,_N,kk,NJ,EJ,AJ;(function(){var t,e=Object.defineProperty;function r(j){j=[typeof globalThis=="object"&&globalThis,j,typeof window=="object"&&window,typeof self=="object"&&self,typeof V5=="object"&&V5];for(var K=0;K<j.length;++K){var te=j[K];if(te&&te.Math==Math)return te}throw Error("Cannot find global object")}var n=r(this);function a(j,K){if(K)e:{var te=n;j=j.split(".");for(var ye=0;ye<j.length-1;ye++){var nt=j[ye];if(!(nt in te))break e;te=te[nt]}j=j[j.length-1],ye=te[j],K=K(ye),K!=ye&&K!=null&&e(te,j,{configurable:!0,writable:!0,value:K})}}a("Symbol.dispose",function(j){return j||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(j){return j||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(j){return j||function(K){var te=[],ye;for(ye in K)Object.prototype.hasOwnProperty.call(K,ye)&&te.push([ye,K[ye]]);return te}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(j){var K=typeof j;return K=="object"&&j!=null||K=="function"}function c(j,K,te){return j.call.apply(j.bind,arguments)}function u(j,K,te){return u=c,u.apply(null,arguments)}function d(j,K){var te=Array.prototype.slice.call(arguments,1);return function(){var ye=te.slice();return ye.push.apply(ye,arguments),j.apply(this,ye)}}function h(j,K){function te(){}te.prototype=K.prototype,j.Z=K.prototype,j.prototype=new te,j.prototype.constructor=j,j.Ob=function(ye,nt,xt){for(var or=Array(arguments.length-2),rn=2;rn<arguments.length;rn++)or[rn-2]=arguments[rn];return K.prototype[nt].apply(ye,or)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?j=>j&&AsyncContext.Snapshot.wrap(j):j=>j;function g(j){const K=j.length;if(K>0){const te=Array(K);for(let ye=0;ye<K;ye++)te[ye]=j[ye];return te}return[]}function b(j,K){for(let ye=1;ye<arguments.length;ye++){const nt=arguments[ye];var te=typeof nt;if(te=te!="object"?te:nt?Array.isArray(nt)?"array":te:"null",te=="array"||te=="object"&&typeof nt.length=="number"){te=j.length||0;const xt=nt.length||0;j.length=te+xt;for(let or=0;or<xt;or++)j[te+or]=nt[or]}else j.push(nt)}}class w{constructor(K,te){this.i=K,this.j=te,this.h=0,this.g=null}get(){let K;return this.h>0?(this.h--,K=this.g,this.g=K.next,K.next=null):K=this.i(),K}}function _(j){o.setTimeout(()=>{throw j},0)}function N(){var j=O;let K=null;return j.g&&(K=j.g,j.g=j.g.next,j.g||(j.h=null),K.next=null),K}class S{constructor(){this.h=this.g=null}add(K,te){const ye=T.get();ye.set(K,te),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var T=new w(()=>new R,j=>j.reset());class R{constructor(){this.next=this.g=this.h=null}set(K,te){this.h=K,this.g=te,this.next=null}reset(){this.next=this.g=this.h=null}}let z,G=!1,O=new S,D=()=>{const j=Promise.resolve(void 0);z=()=>{j.then(I)}};function I(){for(var j;j=N();){try{j.h.call(j.g)}catch(te){_(te)}var K=T;K.j(j),K.h<100&&(K.h++,j.next=K.g,K.g=j)}G=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(j,K){this.type=j,this.g=this.target=K,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var j=!1,K=Object.defineProperty({},"passive",{get:function(){j=!0}});try{const te=()=>{};o.addEventListener("test",te,K),o.removeEventListener("test",te,K)}catch{}return j}();function F(j){return/^[\s\xa0]*$/.test(j)}function ee(j,K){P.call(this,j?j.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,j&&this.init(j,K)}h(ee,P),ee.prototype.init=function(j,K){const te=this.type=j.type,ye=j.changedTouches&&j.changedTouches.length?j.changedTouches[0]:null;this.target=j.target||j.srcElement,this.g=K,K=j.relatedTarget,K||(te=="mouseover"?K=j.fromElement:te=="mouseout"&&(K=j.toElement)),this.relatedTarget=K,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0),this.button=j.button,this.key=j.key||"",this.ctrlKey=j.ctrlKey,this.altKey=j.altKey,this.shiftKey=j.shiftKey,this.metaKey=j.metaKey,this.pointerId=j.pointerId||0,this.pointerType=j.pointerType,this.state=j.state,this.i=j,j.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const j=this.i;j.preventDefault?j.preventDefault():j.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ce=0;function ne(j,K,te,ye,nt){this.listener=j,this.proxy=null,this.src=K,this.type=te,this.capture=!!ye,this.ha=nt,this.key=++ce,this.da=this.fa=!1}function ae(j){j.da=!0,j.listener=null,j.proxy=null,j.src=null,j.ha=null}function me(j,K,te){for(const ye in j)K.call(te,j[ye],ye,j)}function Te(j,K){for(const te in j)K.call(void 0,j[te],te,j)}function we(j){const K={};for(const te in j)K[te]=j[te];return K}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(j,K){let te,ye;for(let nt=1;nt<arguments.length;nt++){ye=arguments[nt];for(te in ye)j[te]=ye[te];for(let xt=0;xt<q.length;xt++)te=q[xt],Object.prototype.hasOwnProperty.call(ye,te)&&(j[te]=ye[te])}}function X(j){this.src=j,this.g={},this.h=0}X.prototype.add=function(j,K,te,ye,nt){const xt=j.toString();j=this.g[xt],j||(j=this.g[xt]=[],this.h++);const or=se(j,K,ye,nt);return or>-1?(K=j[or],te||(K.fa=!1)):(K=new ne(K,this.src,xt,!!ye,nt),K.fa=te,j.push(K)),K};function re(j,K){const te=K.type;if(te in j.g){var ye=j.g[te],nt=Array.prototype.indexOf.call(ye,K,void 0),xt;(xt=nt>=0)&&Array.prototype.splice.call(ye,nt,1),xt&&(ae(K),j.g[te].length==0&&(delete j.g[te],j.h--))}}function se(j,K,te,ye){for(let nt=0;nt<j.length;++nt){const xt=j[nt];if(!xt.da&&xt.listener==K&&xt.capture==!!te&&xt.ha==ye)return nt}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),je={};function pe(j,K,te,ye,nt){if(Array.isArray(K)){for(let xt=0;xt<K.length;xt++)pe(j,K[xt],te,ye,nt);return null}return te=Ut(te),j&&j[Z]?j.J(K,te,l(ye)?!!ye.capture:!1,nt):Oe(j,K,te,!1,ye,nt)}function Oe(j,K,te,ye,nt,xt){if(!K)throw Error("Invalid event type");const or=l(nt)?!!nt.capture:!!nt;let rn=Ht(j);if(rn||(j[Ce]=rn=new X(j)),te=rn.add(K,te,ye,or,xt),te.proxy)return te;if(ye=qe(),te.proxy=ye,ye.src=j,ye.listener=te,j.addEventListener)B||(nt=or),nt===void 0&&(nt=!1),j.addEventListener(K.toString(),ye,nt);else if(j.attachEvent)j.attachEvent(Be(K.toString()),ye);else if(j.addListener&&j.removeListener)j.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return te}function qe(){function j(te){return K.call(j.src,j.listener,te)}const K=ve;return j}function Ue(j,K,te,ye,nt){if(Array.isArray(K))for(var xt=0;xt<K.length;xt++)Ue(j,K[xt],te,ye,nt);else ye=l(ye)?!!ye.capture:!!ye,te=Ut(te),j&&j[Z]?(j=j.i,xt=String(K).toString(),xt in j.g&&(K=j.g[xt],te=se(K,te,ye,nt),te>-1&&(ae(K[te]),Array.prototype.splice.call(K,te,1),K.length==0&&(delete j.g[xt],j.h--)))):j&&(j=Ht(j))&&(K=j.g[K.toString()],j=-1,K&&(j=se(K,te,ye,nt)),(te=j>-1?K[j]:null)&&Me(te))}function Me(j){if(typeof j!="number"&&j&&!j.da){var K=j.src;if(K&&K[Z])re(K.i,j);else{var te=j.type,ye=j.proxy;K.removeEventListener?K.removeEventListener(te,ye,j.capture):K.detachEvent?K.detachEvent(Be(te),ye):K.addListener&&K.removeListener&&K.removeListener(ye),(te=Ht(K))?(re(te,j),te.h==0&&(te.src=null,K[Ce]=null)):ae(j)}}}function Be(j){return j in je?je[j]:je[j]="on"+j}function ve(j,K){if(j.da)j=!0;else{K=new ee(K,this);const te=j.listener,ye=j.ha||j.src;j.fa&&Me(j),j=te.call(ye,K)}return j}function Ht(j){return j=j[Ce],j instanceof X?j:null}var mt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ut(j){return typeof j=="function"?j:(j[mt]||(j[mt]=function(K){return j.handleEvent(K)}),j[mt])}function et(){V.call(this),this.i=new X(this),this.M=this,this.G=null}h(et,V),et.prototype[Z]=!0,et.prototype.removeEventListener=function(j,K,te,ye){Ue(this,j,K,te,ye)};function er(j,K){var te,ye=j.G;if(ye)for(te=[];ye;ye=ye.G)te.push(ye);if(j=j.M,ye=K.type||K,typeof K=="string")K=new P(K,j);else if(K instanceof P)K.target=K.target||j;else{var nt=K;K=new P(ye,j),Y(K,nt)}nt=!0;let xt,or;if(te)for(or=te.length-1;or>=0;or--)xt=K.g=te[or],nt=Ve(xt,ye,!0,K)&&nt;if(xt=K.g=j,nt=Ve(xt,ye,!0,K)&&nt,nt=Ve(xt,ye,!1,K)&&nt,te)for(or=0;or<te.length;or++)xt=K.g=te[or],nt=Ve(xt,ye,!1,K)&&nt}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var j=this.i;for(const K in j.g){const te=j.g[K];for(let ye=0;ye<te.length;ye++)ae(te[ye]);delete j.g[K],j.h--}}this.G=null},et.prototype.J=function(j,K,te,ye){return this.i.add(String(j),K,!1,te,ye)},et.prototype.K=function(j,K,te,ye){return this.i.add(String(j),K,!0,te,ye)};function Ve(j,K,te,ye){if(K=j.i.g[String(K)],!K)return!0;K=K.concat();let nt=!0;for(let xt=0;xt<K.length;++xt){const or=K[xt];if(or&&!or.da&&or.capture==te){const rn=or.listener,fa=or.ha||or.src;or.fa&&re(j.i,or),nt=rn.call(fa,ye)!==!1&&nt}}return nt&&!ye.defaultPrevented}function zt(j,K){if(typeof j!="function")if(j&&typeof j.handleEvent=="function")j=u(j.handleEvent,j);else throw Error("Invalid listener argument");return Number(K)>2147483647?-1:o.setTimeout(j,K||0)}function Wt(j){j.g=zt(()=>{j.g=null,j.i&&(j.i=!1,Wt(j))},j.l);const K=j.h;j.h=null,j.m.apply(null,K)}class Yt extends V{constructor(K,te){super(),this.m=K,this.l=te,this.h=null,this.i=!1,this.g=null}j(K){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ar(j){V.call(this),this.h=j,this.g={}}h(ar,V);var Xe=[];function qt(j){me(j.g,function(K,te){this.g.hasOwnProperty(te)&&Me(K)},j),j.g={}}ar.prototype.N=function(){ar.Z.N.call(this),qt(this)},ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kt=o.JSON.stringify,gt=o.JSON.parse,Ft=class{stringify(j){return o.JSON.stringify(j,void 0)}parse(j){return o.JSON.parse(j,void 0)}};function Vt(){}function Nr(){}var sr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function it(){P.call(this,"d")}h(it,P);function ir(){P.call(this,"c")}h(ir,P);var be={},Ze=null;function at(){return Ze=Ze||new et}be.Ia="serverreachability";function Qe(j){P.call(this,be.Ia,j)}h(Qe,P);function ze(j){const K=at();er(K,new Qe(K))}be.STAT_EVENT="statevent";function st(j,K){P.call(this,be.STAT_EVENT,j),this.stat=K}h(st,P);function St(j){const K=at();er(K,new st(K,j))}be.Ja="timingevent";function tr(j,K){P.call(this,be.Ja,j),this.size=K}h(tr,P);function It(j,K){if(typeof j!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){j()},K)}function Er(){this.g=!0}Er.prototype.ua=function(){this.g=!1};function en(j,K,te,ye,nt,xt){j.info(function(){if(j.g)if(xt){var or="",rn=xt.split("&");for(let Tn=0;Tn<rn.length;Tn++){var fa=rn[Tn].split("=");if(fa.length>1){const ma=fa[0];fa=fa[1];const zs=ma.split("_");or=zs.length>=2&&zs[1]=="type"?or+(ma+"="+fa+"&"):or+(ma+"=redacted&")}}}else or=null;else or=xt;return"XMLHTTP REQ ("+ye+") [attempt "+nt+"]: "+K+`
`+te+`
`+or})}function $r(j,K,te,ye,nt,xt,or){j.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+nt+"]: "+K+`
`+te+`
`+xt+" "+or})}function jn(j,K,te,ye){j.info(function(){return"XMLHTTP TEXT ("+K+"): "+dn(j,te)+(ye?" "+ye:"")})}function fr(j,K){j.info(function(){return"TIMEOUT: "+K})}Er.prototype.info=function(){};function dn(j,K){if(!j.g)return K;if(!K)return null;try{const xt=JSON.parse(K);if(xt){for(j=0;j<xt.length;j++)if(Array.isArray(xt[j])){var te=xt[j];if(!(te.length<2)){var ye=te[1];if(Array.isArray(ye)&&!(ye.length<1)){var nt=ye[0];if(nt!="noop"&&nt!="stop"&&nt!="close")for(let or=1;or<ye.length;or++)ye[or]=""}}}}return kt(xt)}catch{return K}}var Vn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},on={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_n;function Zr(){}h(Zr,Vt),Zr.prototype.g=function(){return new XMLHttpRequest},_n=new Zr;function tn(j){return encodeURIComponent(String(j))}function de(j){var K=1;j=j.split(":");const te=[];for(;K>0&&j.length;)te.push(j.shift()),K--;return j.length&&te.push(j.join(":")),te}function ge(j,K,te,ye){this.j=j,this.i=K,this.l=te,this.S=ye||1,this.V=new ar(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}var Ee={},ke={};function Pe(j,K,te){j.M=1,j.A=ja(Rn(K)),j.u=te,j.R=!0,lt(j,null)}function lt(j,K){j.F=Date.now(),Ge(j),j.B=Rn(j.A);var te=j.B,ye=j.S;Array.isArray(ye)||(ye=[String(ye)]),br(te.i,"t",ye),j.C=0,te=j.j.L,j.h=new Ne,j.g=Sr(j.j,te?K:null,!j.u),j.P>0&&(j.O=new Yt(u(j.Y,j,j.g),j.P)),K=j.V,te=j.g,ye=j.ba;var nt="readystatechange";Array.isArray(nt)||(nt&&(Xe[0]=nt.toString()),nt=Xe);for(let xt=0;xt<nt.length;xt++){const or=pe(te,nt[xt],ye||K.handleEvent,!1,K.h||K);if(!or)break;K.g[or.key]=or}K=j.J?we(j.J):{},j.u?(j.v||(j.v="POST"),K["Content-Type"]="application/x-www-form-urlencoded",j.g.ea(j.B,j.v,j.u,K)):(j.v="GET",j.g.ea(j.B,j.v,null,K)),ze(),en(j.i,j.v,j.B,j.l,j.S,j.u)}ge.prototype.ba=function(j){j=j.target;const K=this.O;K&&so(j)==3?K.j():this.Y(j)},ge.prototype.Y=function(j){try{if(j==this.g)e:{const rn=so(this.g),fa=this.g.ya(),Tn=this.g.ca();if(!(rn<3)&&(rn!=3||this.g&&(this.h.h||this.g.la()||Al(this.g)))){this.K||rn!=4||fa==7||(fa==8||Tn<=0?ze(3):ze(2)),At(this);var K=this.g.ca();this.X=K;var te=jt(this);if(this.o=K==200,$r(this.i,this.v,this.B,this.l,this.S,rn,K),this.o){if(this.U&&!this.L){t:{if(this.g){var ye,nt=this.g;if((ye=nt.g?nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ye)){var xt=ye;break t}}xt=null}if(j=xt)jn(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xt(this,j);else{this.o=!1,this.m=3,St(12),Ct(this),yt(this);break e}}if(this.R){j=!0;let ma;for(;!this.K&&this.C<te.length;)if(ma=Ae(this,te),ma==ke){rn==4&&(this.m=4,St(14),j=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(ma==Ee){this.m=4,St(15),jn(this.i,this.l,te,"[Invalid Chunk]"),j=!1;break}else jn(this.i,this.l,ma,null),Xt(this,ma);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||te.length!=0||this.h.h||(this.m=1,St(16),j=!1),this.o=this.o&&j,!j)jn(this.i,this.l,te,"[Invalid Chunked Response]"),Ct(this),yt(this);else if(te.length>0&&!this.W){this.W=!0;var or=this.j;or.g==this&&or.aa&&!or.P&&(or.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Et(or),or.P=!0,St(11))}}else jn(this.i,this.l,te,null),Xt(this,te);rn==4&&Ct(this),this.o&&!this.K&&(rn==4?De(this.j,this):(this.o=!1,Ge(this)))}else el(this.g),K==400&&te.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),Ct(this),yt(this)}}}catch{}finally{}};function jt(j){if(!rt(j))return j.g.la();const K=Al(j.g);if(K==="")return"";let te="";const ye=K.length,nt=so(j.g)==4;if(!j.h.i){if(typeof TextDecoder>"u")return Ct(j),yt(j),"";j.h.i=new o.TextDecoder}for(let xt=0;xt<ye;xt++)j.h.h=!0,te+=j.h.i.decode(K[xt],{stream:!(nt&&xt==ye-1)});return K.length=0,j.h.g+=te,j.C=0,j.h.g}function rt(j){return j.g?j.v=="GET"&&j.M!=2&&j.j.Aa:!1}function Ae(j,K){var te=j.C,ye=K.indexOf(`
`,te);return ye==-1?ke:(te=Number(K.substring(te,ye)),isNaN(te)?Ee:(ye+=1,ye+te>K.length?ke:(K=K.slice(ye,ye+te),j.C=ye+te,K)))}ge.prototype.cancel=function(){this.K=!0,Ct(this)};function Ge(j){j.T=Date.now()+j.H,dt(j,j.H)}function dt(j,K){if(j.D!=null)throw Error("WatchDog timer not null");j.D=It(u(j.aa,j),K)}function At(j){j.D&&(o.clearTimeout(j.D),j.D=null)}ge.prototype.aa=function(){this.D=null;const j=Date.now();j-this.T>=0?(fr(this.i,this.B),this.M!=2&&(ze(),St(17)),Ct(this),this.m=2,yt(this)):dt(this,this.T-j)};function yt(j){j.j.I==0||j.K||De(j.j,j)}function Ct(j){At(j);var K=j.O;K&&typeof K.dispose=="function"&&K.dispose(),j.O=null,qt(j.V),j.g&&(K=j.g,j.g=null,K.abort(),K.dispose())}function Xt(j,K){try{var te=j.j;if(te.I!=0&&(te.g==j||Ua(te.h,j))){if(!j.L&&Ua(te.h,j)&&te.I==3){try{var ye=te.Ba.g.parse(K)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var nt=ye;if(nt[0]==0){e:if(!te.v){if(te.g)if(te.g.F+3e3<j.F)ie(te),rc(te);else break e;nc(te),St(18)}}else te.xa=nt[1],0<te.xa-te.K&&nt[2]<37500&&te.F&&te.A==0&&!te.C&&(te.C=It(u(te.Va,te),6e3));Fr(te.h)<=1&&te.ta&&(te.ta=void 0)}else tt(te,11)}else if((j.L||te.g==j)&&ie(te),!F(K))for(nt=te.Ba.g.parse(K),K=0;K<nt.length;K++){let Tn=nt[K];const ma=Tn[0];if(!(ma<=te.K))if(te.K=ma,Tn=Tn[1],te.I==2)if(Tn[0]=="c"){te.M=Tn[1],te.ba=Tn[2];const zs=Tn[3];zs!=null&&(te.ka=zs,te.j.info("VER="+te.ka));const io=Tn[4];io!=null&&(te.za=io,te.j.info("SVER="+te.za));const Qn=Tn[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(ye=1.5*Qn,te.O=ye,te.j.info("backChannelRequestTimeoutMs_="+ye)),ye=te;const ti=j.g;if(ti){const Sl=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var xt=ye.h;xt.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(xt.j=xt.l,xt.g=new Set,xt.h&&(wi(xt,xt.h),xt.h=null))}if(ye.G){const tl=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(ye.wa=tl,Br(ye.J,ye.G,tl))}}te.I=3,te.l&&te.l.ra(),te.aa&&(te.T=Date.now()-j.F,te.j.info("Handshake RTT: "+te.T+"ms")),ye=te;var or=j;if(ye.na=Jt(ye,ye.L?ye.ba:null,ye.W),or.L){fn(ye.h,or);var rn=or,fa=ye.O;fa&&(rn.H=fa),rn.D&&(At(rn),Ge(rn)),ye.g=or}else ko(ye);te.i.length>0&&Lu(te)}else Tn[0]!="stop"&&Tn[0]!="close"||tt(te,7);else te.I==3&&(Tn[0]=="stop"||Tn[0]=="close"?Tn[0]=="stop"?tt(te,7):tc(te):Tn[0]!="noop"&&te.l&&te.l.qa(Tn),te.A=0)}}ze(4)}catch{}}var vr=class{constructor(j,K){this.g=j,this.map=K}};function _t(j){this.l=j||10,o.PerformanceNavigationTiming?(j=o.performance.getEntriesByType("navigation"),j=j.length>0&&(j[0].nextHopProtocol=="hq"||j[0].nextHopProtocol=="h2")):j=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=j?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hr(j){return j.h?!0:j.g?j.g.size>=j.j:!1}function Fr(j){return j.h?1:j.g?j.g.size:0}function Ua(j,K){return j.h?j.h==K:j.g?j.g.has(K):!1}function wi(j,K){j.g?j.g.add(K):j.h=K}function fn(j,K){j.h&&j.h==K?j.h=null:j.g&&j.g.has(K)&&j.g.delete(K)}_t.prototype.cancel=function(){if(this.i=nn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const j of this.g.values())j.cancel();this.g.clear()}};function nn(j){if(j.h!=null)return j.i.concat(j.h.G);if(j.g!=null&&j.g.size!==0){let K=j.i;for(const te of j.g.values())K=K.concat(te.G);return K}return g(j.i)}var an=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wa(j,K){if(j){j=j.split("&");for(let te=0;te<j.length;te++){const ye=j[te].indexOf("=");let nt,xt=null;ye>=0?(nt=j[te].substring(0,ye),xt=j[te].substring(ye+1)):nt=j[te],K(nt,xt?decodeURIComponent(xt.replace(/\+/g," ")):"")}}}function _i(j){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let K;j instanceof _i?(this.l=j.l,Xn(this,j.j),this.o=j.o,this.g=j.g,As(this,j.u),this.h=j.h,Fi(this,Fn(j.i)),this.m=j.m):j&&(K=String(j).match(an))?(this.l=!1,Xn(this,K[1]||"",!0),this.o=Bi(K[2]||""),this.g=Bi(K[3]||"",!0),As(this,K[4]),this.h=Bi(K[5]||"",!0),Fi(this,K[6]||"",!0),this.m=Bi(K[7]||"")):(this.l=!1,this.i=new Va(null,this.l))}_i.prototype.toString=function(){const j=[];var K=this.j;K&&j.push(Pn(K,za,!0),":");var te=this.g;return(te||K=="file")&&(j.push("//"),(K=this.o)&&j.push(Pn(K,za,!0),"@"),j.push(tn(te).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),te=this.u,te!=null&&j.push(":",String(te))),(te=this.h)&&(this.g&&te.charAt(0)!="/"&&j.push("/"),j.push(Pn(te,te.charAt(0)=="/"?Ie:ct,!0))),(te=this.i.toString())&&j.push("?",te),(te=this.m)&&j.push("#",Pn(te,Ta)),j.join("")},_i.prototype.resolve=function(j){const K=Rn(this);let te=!!j.j;te?Xn(K,j.j):te=!!j.o,te?K.o=j.o:te=!!j.g,te?K.g=j.g:te=j.u!=null;var ye=j.h;if(te)As(K,j.u);else if(te=!!j.h){if(ye.charAt(0)!="/")if(this.g&&!this.h)ye="/"+ye;else{var nt=K.h.lastIndexOf("/");nt!=-1&&(ye=K.h.slice(0,nt+1)+ye)}if(nt=ye,nt==".."||nt==".")ye="";else if(nt.indexOf("./")!=-1||nt.indexOf("/.")!=-1){ye=nt.lastIndexOf("/",0)==0,nt=nt.split("/");const xt=[];for(let or=0;or<nt.length;){const rn=nt[or++];rn=="."?ye&&or==nt.length&&xt.push(""):rn==".."?((xt.length>1||xt.length==1&&xt[0]!="")&&xt.pop(),ye&&or==nt.length&&xt.push("")):(xt.push(rn),ye=!0)}ye=xt.join("/")}else ye=nt}return te?K.h=ye:te=j.i.toString()!=="",te?Fi(K,Fn(j.i)):te=!!j.m,te&&(K.m=j.m),K};function Rn(j){return new _i(j)}function Xn(j,K,te){j.j=te?Bi(K,!0):K,j.j&&(j.j=j.j.replace(/:$/,""))}function As(j,K){if(K){if(K=Number(K),isNaN(K)||K<0)throw Error("Bad port number "+K);j.u=K}else j.u=null}function Fi(j,K,te){K instanceof Va?(j.i=K,Nn(j.i,j.l)):(te||(K=Pn(K,Ar)),j.i=new Va(K,j.l))}function Br(j,K,te){j.i.set(K,te)}function ja(j){return Br(j,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),j}function Bi(j,K){return j?K?decodeURI(j.replace(/%25/g,"%2525")):decodeURIComponent(j):""}function Pn(j,K,te){return typeof j=="string"?(j=encodeURI(j).replace(K,Dn),te&&(j=j.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j):null}function Dn(j){return j=j.charCodeAt(0),"%"+(j>>4&15).toString(16)+(j&15).toString(16)}var za=/[#\/\?@]/g,ct=/[#\?:]/g,Ie=/[#\?]/g,Ar=/[#\?@]/g,Ta=/#/g;function Va(j,K){this.h=this.g=null,this.i=j||null,this.j=!!K}function Us(j){j.g||(j.g=new Map,j.h=0,j.i&&Wa(j.i,function(K,te){j.add(decodeURIComponent(K.replace(/\+/g," ")),te)}))}t=Va.prototype,t.add=function(j,K){Us(this),this.i=null,j=mn(this,j);let te=this.g.get(j);return te||this.g.set(j,te=[]),te.push(K),this.h+=1,this};function Xo(j,K){Us(j),K=mn(j,K),j.g.has(K)&&(j.i=null,j.h-=j.g.get(K).length,j.g.delete(K))}function ht(j,K){return Us(j),K=mn(j,K),j.g.has(K)}t.forEach=function(j,K){Us(this),this.g.forEach(function(te,ye){te.forEach(function(nt){j.call(K,nt,ye,this)},this)},this)};function Ot(j,K){Us(j);let te=[];if(typeof K=="string")ht(j,K)&&(te=te.concat(j.g.get(mn(j,K))));else for(j=Array.from(j.g.values()),K=0;K<j.length;K++)te=te.concat(j[K]);return te}t.set=function(j,K){return Us(this),this.i=null,j=mn(this,j),ht(this,j)&&(this.h-=this.g.get(j).length),this.g.set(j,[K]),this.h+=1,this},t.get=function(j,K){return j?(j=Ot(this,j),j.length>0?String(j[0]):K):K};function br(j,K,te){Xo(j,K),te.length>0&&(j.i=null,j.g.set(mn(j,K),g(te)),j.h+=te.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const j=[],K=Array.from(this.g.keys());for(let ye=0;ye<K.length;ye++){var te=K[ye];const nt=tn(te);te=Ot(this,te);for(let xt=0;xt<te.length;xt++){let or=nt;te[xt]!==""&&(or+="="+tn(te[xt])),j.push(or)}}return this.i=j.join("&")};function Fn(j){const K=new Va;return K.i=j.i,j.g&&(K.g=new Map(j.g),K.h=j.h),K}function mn(j,K){return K=String(K),j.j&&(K=K.toLowerCase()),K}function Nn(j,K){K&&!j.j&&(Us(j),j.i=null,j.g.forEach(function(te,ye){const nt=ye.toLowerCase();ye!=nt&&(Xo(this,ye),br(this,nt,te))},j)),j.j=K}function ei(j,K){const te=new Er;if(o.Image){const ye=new Image;ye.onload=d(Ui,te,"TestLoadImage: loaded",!0,K,ye),ye.onerror=d(Ui,te,"TestLoadImage: error",!1,K,ye),ye.onabort=d(Ui,te,"TestLoadImage: abort",!1,K,ye),ye.ontimeout=d(Ui,te,"TestLoadImage: timeout",!1,K,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=j}else K(!1)}function gs(j,K){const te=new Er,ye=new AbortController,nt=setTimeout(()=>{ye.abort(),Ui(te,"TestPingServer: timeout",!1,K)},1e4);fetch(j,{signal:ye.signal}).then(xt=>{clearTimeout(nt),xt.ok?Ui(te,"TestPingServer: ok",!0,K):Ui(te,"TestPingServer: server error",!1,K)}).catch(()=>{clearTimeout(nt),Ui(te,"TestPingServer: error",!1,K)})}function Ui(j,K,te,ye,nt){try{nt&&(nt.onload=null,nt.onerror=null,nt.onabort=null,nt.ontimeout=null),ye(te)}catch{}}function jr(){this.g=new Ft}function Yo(j){this.i=j.Sb||null,this.h=j.ab||!1}h(Yo,Vt),Yo.prototype.g=function(){return new zi(this.i,this.h)};function zi(j,K){et.call(this),this.H=j,this.o=K,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(zi,et),t=zi.prototype,t.open=function(j,K){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=j,this.D=K,this.readyState=1,Gr(this)},t.send=function(j){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const K={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};j&&(K.body=j),(this.H||o).fetch(new Request(this.D,K)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pu(this)),this.readyState=0},t.Pa=function(j){if(this.g&&(this.l=j,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=j.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")j.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in j){if(this.j=j.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;qr(this)}else j.text().then(this.Oa.bind(this),this.ga.bind(this))};function qr(j){j.j.read().then(j.Ma.bind(j)).catch(j.ga.bind(j))}t.Ma=function(j){if(this.g){if(this.o&&j.value)this.response.push(j.value);else if(!this.o){var K=j.value?j.value:new Uint8Array(0);(K=this.B.decode(K,{stream:!j.done}))&&(this.response=this.responseText+=K)}j.done?Pu(this):Gr(this),this.readyState==3&&qr(this)}},t.Oa=function(j){this.g&&(this.response=this.responseText=j,Pu(this))},t.Na=function(j){this.g&&(this.response=j,Pu(this))},t.ga=function(){this.g&&Pu(this)};function Pu(j){j.readyState=4,j.l=null,j.j=null,j.B=null,Gr(j)}t.setRequestHeader=function(j,K){this.A.append(j,K)},t.getResponseHeader=function(j){return this.h&&this.h.get(j.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const j=[],K=this.h.entries();for(var te=K.next();!te.done;)te=te.value,j.push(te[0]+": "+te[1]),te=K.next();return j.join(`\r
`)};function Gr(j){j.onreadystatechange&&j.onreadystatechange.call(j)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(j){this.m=j?"include":"same-origin"}});function ua(j){let K="";return me(j,function(te,ye){K+=ye,K+=":",K+=te,K+=`\r
`}),K}function rf(j,K,te){e:{for(ye in te){var ye=!1;break e}ye=!0}ye||(te=ua(te),typeof j=="string"?te!=null&&tn(te):Br(j,K,te))}function da(j){et.call(this),this.headers=new Map,this.L=j||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(da,et);var Du=/^https?$/i,Zo=["POST","PUT"];t=da.prototype,t.Fa=function(j){this.H=j},t.ea=function(j,K,te,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+j);K=K?K.toUpperCase():"GET",this.D=j,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_n.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(K,String(j),!0),this.B=!1}catch(xt){Hc(this,xt);return}if(j=te||"",te=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var nt in ye)te.set(nt,ye[nt]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const xt of ye.keys())te.set(xt,ye.get(xt));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(te.keys()).find(xt=>xt.toLowerCase()=="content-type"),nt=o.FormData&&j instanceof o.FormData,!(Array.prototype.indexOf.call(Zo,K,void 0)>=0)||ye||nt||te.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[xt,or]of te)this.g.setRequestHeader(xt,or);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(j),this.v=!1}catch(xt){Hc(this,xt)}};function Hc(j,K){j.h=!1,j.g&&(j.j=!0,j.g.abort(),j.j=!1),j.l=K,j.o=5,Qo(j),El(j)}function Qo(j){j.A||(j.A=!0,er(j,"complete"),er(j,"error"))}t.abort=function(j){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=j||7,er(this,"complete"),er(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),da.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Jo(this):this.Xa())},t.Xa=function(){Jo(this)};function Jo(j){if(j.h&&typeof s<"u"){if(j.v&&so(j)==4)setTimeout(j.Ca.bind(j),0);else if(er(j,"readystatechange"),so(j)==4){j.h=!1;try{const xt=j.ca();e:switch(xt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var K=!0;break e;default:K=!1}var te;if(!(te=K)){var ye;if(ye=xt===0){let or=String(j.D).match(an)[1]||null;!or&&o.self&&o.self.location&&(or=o.self.location.protocol.slice(0,-1)),ye=!Du.test(or?or.toLowerCase():"")}te=ye}if(te)er(j,"complete"),er(j,"success");else{j.o=6;try{var nt=so(j)>2?j.g.statusText:""}catch{nt=""}j.l=nt+" ["+j.ca()+"]",Qo(j)}}finally{El(j)}}}}function El(j,K){if(j.g){j.m&&(clearTimeout(j.m),j.m=null);const te=j.g;j.g=null,K||er(j,"ready");try{te.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function so(j){return j.g?j.g.readyState:0}t.ca=function(){try{return so(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(j){if(this.g){var K=this.g.responseText;return j&&K.indexOf(j)==0&&(K=K.substring(j.length)),gt(K)}};function Al(j){try{if(!j.g)return null;if("response"in j.g)return j.g.response;switch(j.F){case"":case"text":return j.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in j.g)return j.g.mozResponseArrayBuffer}return null}catch{return null}}function el(j){const K={};j=(j.g&&so(j)>=2&&j.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<j.length;ye++){if(F(j[ye]))continue;var te=de(j[ye]);const nt=te[0];if(te=te[1],typeof te!="string")continue;te=te.trim();const xt=K[nt]||[];K[nt]=xt,xt.push(te)}Te(K,function(ye){return ye.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(j,K,te){return te&&te.internalChannelParams&&te.internalChannelParams[j]||K}function Mu(j){this.za=0,this.i=[],this.j=new Er,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ca("failFast",!1,j),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ca("baseRetryDelayMs",5e3,j),this.Za=Ca("retryDelaySeedMs",1e4,j),this.Ta=Ca("forwardChannelMaxRetries",2,j),this.va=Ca("forwardChannelRequestTimeoutMs",2e4,j),this.ma=j&&j.xmlHttpFactory||void 0,this.Ua=j&&j.Rb||void 0,this.Aa=j&&j.useFetchStreams||!1,this.O=void 0,this.L=j&&j.supportsCrossDomainXhr||!1,this.M="",this.h=new _t(j&&j.concurrentRequestLimit),this.Ba=new jr,this.S=j&&j.fastHandshake||!1,this.R=j&&j.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=j&&j.Pb||!1,j&&j.ua&&this.j.ua(),j&&j.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&j&&j.detectBufferingProxy||!1,this.ia=void 0,j&&j.longPollingTimeout&&j.longPollingTimeout>0&&(this.ia=j.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Mu.prototype,t.ka=8,t.I=1,t.connect=function(j,K,te,ye){St(0),this.W=j,this.H=K||{},te&&ye!==void 0&&(this.H.OSID=te,this.H.OAID=ye),this.F=this.X,this.J=Jt(this,null,this.W),Lu(this)};function tc(j){if(qc(j),j.I==3){var K=j.V++,te=Rn(j.J);if(Br(te,"SID",j.M),Br(te,"RID",K),Br(te,"TYPE","terminate"),Vi(j,te),K=new ge(j,j.j,K),K.M=2,K.A=ja(Rn(te)),te=!1,o.navigator&&o.navigator.sendBeacon)try{te=o.navigator.sendBeacon(K.A.toString(),"")}catch{}!te&&o.Image&&(new Image().src=K.A,te=!0),te||(K.g=Sr(K.j,null),K.g.ea(K.A)),K.F=Date.now(),Ge(K)}Pt(j)}function rc(j){j.g&&(Et(j),j.g.cancel(),j.g=null)}function qc(j){rc(j),j.v&&(o.clearTimeout(j.v),j.v=null),ie(j),j.h.cancel(),j.m&&(typeof j.m=="number"&&o.clearTimeout(j.m),j.m=null)}function Lu(j){if(!Hr(j.h)&&!j.m){j.m=!0;var K=j.Ea;z||D(),G||(z(),G=!0),O.add(K,j),j.D=0}}function Oh(j,K){return Fr(j.h)>=j.h.j-(j.m?1:0)?!1:j.m?(j.i=K.G.concat(j.i),!0):j.I==1||j.I==2||j.D>=(j.Sa?0:j.Ta)?!1:(j.m=It(u(j.Ea,j,K),He(j,j.D)),j.D++,!0)}t.Ea=function(j){if(this.m)if(this.m=null,this.I==1){if(!j){this.V=Math.floor(Math.random()*1e5),j=this.V++;const nt=new ge(this,this.j,j);let xt=this.o;if(this.U&&(xt?(xt=we(xt),Y(xt,this.U)):xt=this.U),this.u!==null||this.R||(nt.J=xt,xt=null),this.S)e:{for(var K=0,te=0;te<this.i.length;te++){t:{var ye=this.i[te];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(K+=ye,K>4096){K=te;break e}if(K===4096||te===this.i.length-1){K=te+1;break e}}K=1e3}else K=1e3;K=Gc(this,nt,K),te=Rn(this.J),Br(te,"RID",j),Br(te,"CVER",22),this.G&&Br(te,"X-HTTP-Session-Id",this.G),Vi(this,te),xt&&(this.R?K="headers="+tn(ua(xt))+"&"+K:this.u&&rf(te,this.u,xt)),wi(this.h,nt),this.Ra&&Br(te,"TYPE","init"),this.S?(Br(te,"$req",K),Br(te,"SID","null"),nt.U=!0,Pe(nt,te,null)):Pe(nt,te,K),this.I=2}}else this.I==3&&(j?En(this,j):this.i.length==0||Hr(this.h)||En(this))};function En(j,K){var te;K?te=K.l:te=j.V++;const ye=Rn(j.J);Br(ye,"SID",j.M),Br(ye,"RID",te),Br(ye,"AID",j.K),Vi(j,ye),j.u&&j.o&&rf(ye,j.u,j.o),te=new ge(j,j.j,te,j.D+1),j.u===null&&(te.J=j.o),K&&(j.i=K.G.concat(j.i)),K=Gc(j,te,1e3),te.H=Math.round(j.va*.5)+Math.round(j.va*.5*Math.random()),wi(j.h,te),Pe(te,ye,K)}function Vi(j,K){j.H&&me(j.H,function(te,ye){Br(K,ye,te)}),j.l&&me({},function(te,ye){Br(K,ye,te)})}function Gc(j,K,te){te=Math.min(j.i.length,te);const ye=j.l?u(j.l.Ka,j.l,j):null;e:{var nt=j.i;let rn=-1;for(;;){const fa=["count="+te];rn==-1?te>0?(rn=nt[0].g,fa.push("ofs="+rn)):rn=0:fa.push("ofs="+rn);let Tn=!0;for(let ma=0;ma<te;ma++){var xt=nt[ma].g;const zs=nt[ma].map;if(xt-=rn,xt<0)rn=Math.max(0,nt[ma].g-100),Tn=!1;else try{xt="req"+xt+"_"||"";try{var or=zs instanceof Map?zs:Object.entries(zs);for(const[io,Qn]of or){let ti=Qn;l(Qn)&&(ti=kt(Qn)),fa.push(xt+io+"="+encodeURIComponent(ti))}}catch(io){throw fa.push(xt+"type="+encodeURIComponent("_badmap")),io}}catch{ye&&ye(zs)}}if(Tn){or=fa.join("&");break e}}or=void 0}return j=j.i.splice(0,te),K.G=j,or}function ko(j){if(!j.g&&!j.v){j.Y=1;var K=j.Da;z||D(),G||(z(),G=!0),O.add(K,j),j.A=0}}function nc(j){return j.g||j.v||j.A>=3?!1:(j.Y++,j.v=It(u(j.Da,j),He(j,j.A)),j.A++,!0)}t.Da=function(){if(this.v=null,U(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var j=4*this.T;this.j.info("BP detection timer enabled: "+j),this.B=It(u(this.Wa,this),j)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),rc(this),U(this))};function Et(j){j.B!=null&&(o.clearTimeout(j.B),j.B=null)}function U(j){j.g=new ge(j,j.j,"rpc",j.Y),j.u===null&&(j.g.J=j.o),j.g.P=0;var K=Rn(j.na);Br(K,"RID","rpc"),Br(K,"SID",j.M),Br(K,"AID",j.K),Br(K,"CI",j.F?"0":"1"),!j.F&&j.ia&&Br(K,"TO",j.ia),Br(K,"TYPE","xmlhttp"),Vi(j,K),j.u&&j.o&&rf(K,j.u,j.o),j.O&&(j.g.H=j.O);var te=j.g;j=j.ba,te.M=1,te.A=ja(Rn(K)),te.u=null,te.R=!0,lt(te,j)}t.Va=function(){this.C!=null&&(this.C=null,rc(this),nc(this),St(19))};function ie(j){j.C!=null&&(o.clearTimeout(j.C),j.C=null)}function De(j,K){var te=null;if(j.g==K){ie(j),Et(j),j.g=null;var ye=2}else if(Ua(j.h,K))te=K.G,fn(j.h,K),ye=1;else return;if(j.I!=0){if(K.o)if(ye==1){te=K.u?K.u.length:0,K=Date.now()-K.F;var nt=j.D;ye=at(),er(ye,new tr(ye,te)),Lu(j)}else ko(j);else if(nt=K.m,nt==3||nt==0&&K.X>0||!(ye==1&&Oh(j,K)||ye==2&&nc(j)))switch(te&&te.length>0&&(K=j.h,K.i=K.i.concat(te)),nt){case 1:tt(j,5);break;case 4:tt(j,10);break;case 3:tt(j,6);break;default:tt(j,2)}}}function He(j,K){let te=j.Qa+Math.floor(Math.random()*j.Za);return j.isActive()||(te*=2),te*K}function tt(j,K){if(j.j.info("Error code "+K),K==2){var te=u(j.bb,j),ye=j.Ua;const nt=!ye;ye=new _i(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Xn(ye,"https"),ja(ye),nt?ei(ye.toString(),te):gs(ye.toString(),te)}else St(2);j.I=0,j.l&&j.l.pa(K),Pt(j),qc(j)}t.bb=function(j){j?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Pt(j){if(j.I=0,j.ja=[],j.l){const K=nn(j.h);(K.length!=0||j.i.length!=0)&&(b(j.ja,K),b(j.ja,j.i),j.h.i.length=0,g(j.i),j.i.length=0),j.l.oa()}}function Jt(j,K,te){var ye=te instanceof _i?Rn(te):new _i(te);if(ye.g!="")K&&(ye.g=K+"."+ye.g),As(ye,ye.u);else{var nt=o.location;ye=nt.protocol,K=K?K+"."+nt.hostname:nt.hostname,nt=+nt.port;const xt=new _i(null);ye&&Xn(xt,ye),K&&(xt.g=K),nt&&As(xt,nt),te&&(xt.h=te),ye=xt}return te=j.G,K=j.wa,te&&K&&Br(ye,te,K),Br(ye,"VER",j.ka),Vi(j,ye),ye}function Sr(j,K,te){if(K&&!j.L)throw Error("Can't create secondary domain capable XhrIo object.");return K=j.Aa&&!j.ma?new da(new Yo({ab:te})):new da(j.ma),K.Fa(j.L),K}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xr(){}t=xr.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kr(){}Kr.prototype.g=function(j,K){return new yr(j,K)};function yr(j,K){et.call(this),this.g=new Mu(K),this.l=j,this.h=K&&K.messageUrlParams||null,j=K&&K.messageHeaders||null,K&&K.clientProtocolHeaderRequired&&(j?j["X-Client-Protocol"]="webchannel":j={"X-Client-Protocol":"webchannel"}),this.g.o=j,j=K&&K.initMessageHeaders||null,K&&K.messageContentType&&(j?j["X-WebChannel-Content-Type"]=K.messageContentType:j={"X-WebChannel-Content-Type":K.messageContentType}),K&&K.sa&&(j?j["X-WebChannel-Client-Profile"]=K.sa:j={"X-WebChannel-Client-Profile":K.sa}),this.g.U=j,(j=K&&K.Qb)&&!F(j)&&(this.g.u=j),this.A=K&&K.supportsCrossDomainXhr||!1,this.v=K&&K.sendRawJson||!1,(K=K&&K.httpSessionIdParam)&&!F(K)&&(this.g.G=K,j=this.h,j!==null&&K in j&&(j=this.h,K in j&&delete j[K])),this.j=new Xr(this)}h(yr,et),yr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yr.prototype.close=function(){tc(this.g)},yr.prototype.o=function(j){var K=this.g;if(typeof j=="string"){var te={};te.__data__=j,j=te}else this.v&&(te={},te.__data__=kt(j),j=te);K.i.push(new vr(K.Ya++,j)),K.I==3&&Lu(K)},yr.prototype.N=function(){this.g.l=null,delete this.j,tc(this.g),delete this.g,yr.Z.N.call(this)};function In(j){it.call(this),j.__headers__&&(this.headers=j.__headers__,this.statusCode=j.__status__,delete j.__headers__,delete j.__status__);var K=j.__sm__;if(K){e:{for(const te in K){j=te;break e}j=void 0}(this.i=j)&&(j=this.i,K=K!==null&&j in K?K[j]:void 0),this.data=K}else this.data=j}h(In,it);function qn(){ir.call(this),this.status=1}h(qn,ir);function Xr(j){this.g=j}h(Xr,xr),Xr.prototype.ra=function(){er(this.g,"a")},Xr.prototype.qa=function(j){er(this.g,new In(j))},Xr.prototype.pa=function(j){er(this.g,new qn)},Xr.prototype.oa=function(){er(this.g,"b")},Kr.prototype.createWebChannel=Kr.prototype.g,yr.prototype.send=yr.prototype.o,yr.prototype.open=yr.prototype.m,yr.prototype.close=yr.prototype.close,AJ=function(){return new Kr},EJ=function(){return at()},NJ=be,kk={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,_N=Vn,on.COMPLETE="complete",_J=on,Nr.EventType=sr,sr.OPEN="a",sr.CLOSE="b",sr.ERROR="c",sr.MESSAGE="d",et.prototype.listen=et.prototype.J,b2=Nr,da.prototype.listenOnce=da.prototype.K,da.prototype.getLastError=da.prototype.Ha,da.prototype.getLastErrorCode=da.prototype.ya,da.prototype.getStatus=da.prototype.ca,da.prototype.getResponseJson=da.prototype.La,da.prototype.getResponseText=da.prototype.la,da.prototype.send=da.prototype.ea,da.prototype.setWithCredentials=da.prototype.Fa,wJ=da}).apply(typeof V5<"u"?V5:typeof self<"u"?self:typeof window<"u"?window:{});const _B="@firebase/firestore",NB="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bo.UNAUTHENTICATED=new bo(null),bo.GOOGLE_CREDENTIALS=new bo("google-credentials-uid"),bo.FIRST_PARTY=new bo("first-party-uid"),bo.MOCK_USER=new bo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=new mR("@firebase/firestore");function Wg(){return Rp.logLevel}function cr(t,...e){if(Rp.logLevel<=Bn.DEBUG){const r=e.map(AR);Rp.debug(`Firestore (${tv}): ${t}`,...r)}}function dl(t,...e){if(Rp.logLevel<=Bn.ERROR){const r=e.map(AR);Rp.error(`Firestore (${tv}): ${t}`,...r)}}function fx(t,...e){if(Rp.logLevel<=Bn.WARN){const r=e.map(AR);Rp.warn(`Firestore (${tv}): ${t}`,...r)}}function AR(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,SJ(t,n,r)}function SJ(t,e,r){let n=`FIRESTORE (${tv}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw dl(n),new Error(n)}function Vr(t,e,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,t||SJ(e,a,n)}function hn(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pr extends ef{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $2e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(bo.UNAUTHENTICATED))}shutdown(){}}class H2e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class q2e{constructor(e){this.t=e,this.currentUser=bo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Vr(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new $f;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $f,e.enqueueRetryable(()=>a(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},l=c=>{cr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(cr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $f)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(cr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Vr(typeof n.accessToken=="string",31837,{l:n}),new jJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vr(e===null||typeof e=="string",2055,{h:e}),new bo(e)}}class G2e{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=bo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W2e{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new G2e(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(bo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K2e{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fu(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Vr(this.o===void 0,3512);const n=s=>{s.error!=null&&cr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,cr("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const a=s=>{cr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):cr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new EB(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Vr(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new EB(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=X2e(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=e.charAt(a[s]%62))}return n}}function pn(t,e){return t<e?-1:t>e?1:0}function Ik(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const a=t.charAt(n),s=e.charAt(n);if(a!==s)return Aj(a)===Aj(s)?pn(a,s):Aj(a)?1:-1}return pn(t.length,e.length)}const Y2e=55296,Z2e=57343;function Aj(t){const e=t.charCodeAt(0);return e>=Y2e&&e<=Z2e}function hx(t,e,r){return t.length===e.length&&t.every((n,a)=>r(n,e[a]))}function TJ(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB="__name__";class _d{constructor(e,r,n){r===void 0?r=0:r>e.length&&Rr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Rr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return _d.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof _d?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const s=_d.compareSegments(e.get(a),r.get(a));if(s!==0)return s}return pn(e.length,r.length)}static compareSegments(e,r){const n=_d.isNumericId(e),a=_d.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?_d.extractNumericId(e).compare(_d.extractNumericId(r)):Ik(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return C0.fromString(e.substring(4,e.length-2))}}class ia extends _d{construct(e,r,n){return new ia(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new pr(Mt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new ia(r)}static emptyPath(){return new ia([])}}const Q2e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ys extends _d{construct(e,r,n){return new ys(e,r,n)}static isValidIdentifier(e){return Q2e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ys.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===AB}static keyField(){return new ys([AB])}static fromServerFormat(e){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new pr(Mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;a<e.length;){const l=e[a];if(l==="\\"){if(a+1===e.length)throw new pr(Mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pr(Mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,a+=2}else l==="`"?(o=!o,a++):l!=="."||o?(n+=l,a++):(s(),a++)}if(s(),o)throw new pr(Mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ys(r)}static emptyPath(){return new ys([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.path=e}static fromPath(e){return new _r(ia.fromString(e))}static fromName(e){return new _r(ia.fromString(e).popFirst(5))}static empty(){return new _r(ia.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ia.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ia.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _r(new ia(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CJ(t,e,r){if(!r)throw new pr(Mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function J2e(t,e,r,n){if(e===!0&&n===!0)throw new pr(Mt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function SB(t){if(!_r.isDocumentKey(t))throw new pr(Mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jB(t){if(_r.isDocumentKey(t))throw new pr(Mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kJ(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function uA(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Rr(12329,{type:typeof t})}function Hf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pr(Mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=uA(t);throw new pr(Mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function ebe(t,e){if(e<=0)throw new pr(Mt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){const r={typeString:t};return e&&(r.value=e),r}function Qy(t,e){if(!kJ(t))throw new pr(Mt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const a=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const o=t[n];if(a&&typeof o!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&o!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new pr(Mt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=-62135596800,CB=1e6;class ea{static now(){return ea.fromMillis(Date.now())}static fromDate(e){return ea.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*CB);return new ea(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new pr(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new pr(Mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<TB)throw new pr(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pr(Mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CB}_compareTo(e){return this.seconds===e.seconds?pn(this.nanoseconds,e.nanoseconds):pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ea._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qy(e,ea._jsonSchema))return new ea(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-TB;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ea._jsonSchemaVersion="firestore/timestamp/1.0",ea._jsonSchema={type:fi("string",ea._jsonSchemaVersion),seconds:fi("number"),nanoseconds:fi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{static fromTimestamp(e){return new Yr(e)}static min(){return new Yr(new ea(0,0))}static max(){return new Yr(new ea(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=-1;class WE{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function Ok(t){return t.fields.find(e=>e.kind===2)}function Mm(t){return t.fields.filter(e=>e.kind!==2)}WE.UNKNOWN_ID=-1;class NN{constructor(e,r){this.fieldPath=e,this.kind=r}}class Db{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Db(0,Fc.min())}}function tbe(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Yr.fromTimestamp(n===1e9?new ea(r+1,0):new ea(r,n));return new Fc(a,_r.empty(),e)}function IJ(t){return new Fc(t.readTime,t.key,Pb)}class Fc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Fc(Yr.min(),_r.empty(),Pb)}static max(){return new Fc(Yr.max(),_r.empty(),Pb)}}function jR(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=_r.comparator(t.documentKey,e.documentKey),r!==0?r:pn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RJ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lg(t){if(t.code!==Mt.FAILED_PRECONDITION||t.message!==OJ)throw t;cr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Rr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ft((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ft?r:ft.resolve(r)}catch(r){return ft.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ft.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ft.reject(r)}static resolve(e){return new ft((r,n)=>{r(e)})}static reject(e){return new ft((r,n)=>{n(e)})}static waitFor(e){return new ft((r,n)=>{let a=0,s=0,o=!1;e.forEach(l=>{++a,l.next(()=>{++s,o&&s===a&&r()},c=>n(c))}),o=!0,s===a&&r()})}static or(e){let r=ft.resolve(!1);for(const n of e)r=r.next(a=>a?ft.resolve(a):n());return r}static forEach(e,r){const n=[];return e.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(e,r){return new ft((n,a)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;r(e[u]).next(d=>{o[u]=d,++l,l===s&&n(o)},d=>a(d))}})}static doWhile(e,r){return new ft((n,a)=>{const s=()=>{e()===!0?r().next(()=>{s()},a):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="SimpleDb";class dA{static open(e,r,n,a){try{return new dA(r,e.transaction(a,n))}catch(s){throw new q2(r,s)}}constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.S=new $f,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{r.error?this.S.reject(new q2(e,r.error)):this.S.resolve()},this.transaction.onerror=n=>{const a=TR(n.target.error);this.S.reject(new q2(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(cr(gc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new nbe(r)}}class k0{static delete(e){return cr(gc,"Removing database:",e),$m(hQ().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!_Q())return!1;if(k0.F())return!0;const e=Oi(),r=k0.M(e),n=0<r&&r<10,a=PJ(e),s=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,r){return e.store(r)}static M(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,r,n){this.name=e,this.version=r,this.N=n,this.B=null,k0.M(Oi())===12.2&&dl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(cr(gc,"Opening database:",this.name),this.db=await new Promise((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=s=>{const o=s.target.result;r(o)},a.onblocked=()=>{n(new q2(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=s=>{const o=s.target.error;o.name==="VersionError"?n(new pr(Mt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new pr(Mt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new q2(e,o))},a.onupgradeneeded=s=>{cr(gc,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,a.transaction,s.oldVersion,this.version).next(()=>{cr(gc,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=r=>this.q(r)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const s=r==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const l=dA.open(this.db,e,s?"readonly":"readwrite",n),c=a(l).next(u=>(l.C(),u)).catch(u=>(l.abort(u),ft.reject(u))).toPromise();return c.catch(()=>{}),await l.D,c}catch(l){const c=l,u=c.name!=="FirebaseError"&&o<3;if(cr(gc,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function PJ(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class rbe{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return $m(this.U.delete())}}class q2 extends pr{constructor(e,r){super(Mt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function um(t){return t.name==="IndexedDbTransactionError"}class nbe{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(cr(gc,"PUT",this.store.name,e,r),n=this.store.put(r,e)):(cr(gc,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$m(n)}add(e){return cr(gc,"ADD",this.store.name,e,e),$m(this.store.add(e))}get(e){return $m(this.store.get(e)).next(r=>(r===void 0&&(r=null),cr(gc,"GET",this.store.name,e,r),r))}delete(e){return cr(gc,"DELETE",this.store.name,e),$m(this.store.delete(e))}count(){return cr(gc,"COUNT",this.store.name),$m(this.store.count())}J(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const s=a.getAll(n.range);return new ft((o,l)=>{s.onerror=c=>{l(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(n),o=[];return this.H(s,(l,c)=>{o.push(c)}).next(()=>o)}}Y(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new ft((a,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{a(o.target.result)}})}Z(e,r){cr(gc,"DELETE ALL",this.store.name);const n=this.options(e,r);n.X=!1;const a=this.cursor(n);return this.H(a,(s,o,l)=>l.delete())}ee(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.H(a,r)}te(e){const r=this.cursor({});return new ft((n,a)=>{r.onerror=s=>{const o=TR(s.target.error);a(o)},r.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():n()}):n()}})}H(e,r){const n=[];return new ft((a,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void a();const c=new rbe(l),u=r(l.primaryKey,l.value,c);if(u instanceof ft){const d=u.catch(h=>(c.done(),ft.reject(h)));n.push(d)}c.isDone?a():c.G===null?l.continue():l.continue(c.G)}}).next(()=>ft.waitFor(n))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function $m(t){return new ft((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=TR(n.target.error);r(a)}})}let kB=!1;function TR(t){const e=k0.M(Oi());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new pr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kB||(kB=!0,setTimeout(()=>{throw n},0)),n}}return t}const G2="IndexBackfiller";class abe{constructor(e,r){this.asyncQueue=e,this.ne=r,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){cr(G2,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const r=await this.ne.ie();cr(G2,`Documents written: ${r}`)}catch(r){um(r)?cr(G2,"Ignoring IndexedDB error during index backfill: ",r):await lg(r)}await this.re(6e4)})}}class sbe{constructor(e,r){this.localStore=e,this.persistence=r}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>this.se(r,e))}se(e,r){const n=new Set;let a=r,s=!0;return ft.doWhile(()=>s===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!n.has(o))return cr(G2,`Processing collection: ${o}`),this.oe(e,o,a).next(l=>{a-=l,n.add(o)});s=!1})).next(()=>r-a)}oe(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this._e(a,s)).next(l=>(cr(G2,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l))).next(()=>o.size)}))}_e(e,r){let n=e;return r.changes.forEach((a,s)=>{const o=IJ(s);jR(o,n)>0&&(n=o)}),new Fc(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=-1;function fA(t){return t==null}function Mb(t){return t===0&&1/t==-1/0}function ibe(t){return typeof t=="number"&&Number.isInteger(t)&&!Mb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="";function $o(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=IB(e)),e=obe(t.get(r),e);return IB(e)}function obe(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const s=t.charAt(a);switch(s){case"\0":r+="";break;case KE:r+="";break;default:r+=s}}return r}function IB(t){return t+KE+""}function Td(t){const e=t.length;if(Vr(e>=2,64408,{path:t}),e===2)return Vr(t.charAt(0)===KE&&t.charAt(1)==="",56145,{path:t}),ia.emptyPath();const r=e-2,n=[];let a="";for(let s=0;s<e;){const o=t.indexOf(KE,s);switch((o<0||o>r)&&Rr(50515,{path:t}),t.charAt(o+1)){case"":const l=t.substring(s,o);let c;a.length===0?c=l:(a+=l,c=a,a=""),n.push(c);break;case"":a+=t.substring(s,o),a+="\0";break;case"":a+=t.substring(s,o+1);break;default:Rr(61167,{path:t})}s=o+2}return new ia(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="remoteDocuments",Jy="owner",Ag="owner",Lb="mutationQueues",lbe="userId",Ku="mutations",OB="batchId",Ym="userMutationsIndex",RB=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t,e){return[t,$o(e)]}function DJ(t,e,r){return[t,$o(e),r]}const cbe={},mx="documentMutations",XE="remoteDocumentsV14",ube=["prefixPath","collectionGroup","readTime","documentId"],AN="documentKeyIndex",dbe=["prefixPath","collectionGroup","documentId"],MJ="collectionGroupIndex",fbe=["collectionGroup","readTime","prefixPath","documentId"],Fb="remoteDocumentGlobal",Rk="remoteDocumentGlobalKey",px="targets",LJ="queryTargetsIndex",hbe=["canonicalId","targetId"],gx="targetDocuments",mbe=["targetId","path"],CR="documentTargetsIndex",pbe=["path","targetId"],YE="targetGlobalKey",dp="targetGlobal",Bb="collectionParents",gbe=["collectionId","parent"],xx="clientMetadata",xbe="clientId",hA="bundles",vbe="bundleId",mA="namedQueries",bbe="name",kR="indexConfiguration",ybe="indexId",Pk="collectionGroupIndex",wbe="collectionGroup",W2="indexState",_be=["indexId","uid"],FJ="sequenceNumberIndex",Nbe=["uid","sequenceNumber"],K2="indexEntries",Ebe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BJ="documentKeyIndex",Abe=["indexId","uid","orderedDocumentKey"],pA="documentOverlays",Sbe=["userId","collectionPath","documentId"],Dk="collectionPathOverlayIndex",jbe=["userId","collectionPath","largestBatchId"],UJ="collectionGroupOverlayIndex",Tbe=["userId","collectionGroup","largestBatchId"],IR="globals",Cbe="name",zJ=[Lb,Ku,mx,Lm,px,Jy,dp,gx,xx,Fb,Bb,hA,mA],kbe=[...zJ,pA],VJ=[Lb,Ku,mx,XE,px,Jy,dp,gx,xx,Fb,Bb,hA,mA,pA],$J=VJ,OR=[...$J,kR,W2,K2],Ibe=OR,HJ=[...OR,IR],Obe=HJ;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk extends RJ{constructor(e,r){super(),this.le=e,this.currentSequenceNumber=r}}function Ri(t,e){const r=hn(t);return k0.O(r.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function dm(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function qJ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,r){this.comparator=e,this.root=r||yo.EMPTY}insert(e,r){return new hs(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,yo.BLACK,null,null))}remove(e){return new hs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yo.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $5(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $5(this.root,e,this.comparator,!1)}getReverseIterator(){return new $5(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $5(this.root,e,this.comparator,!0)}}class $5{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=r?n(e.key,r):1,r&&a&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yo{constructor(e,r,n,a,s){this.key=e,this.value=r,this.color=n??yo.RED,this.left=a??yo.EMPTY,this.right=s??yo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,s){return new yo(e??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const s=n(e,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(e,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return yo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return yo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Rr(27949);return e+(this.isRed()?0:1)}}yo.EMPTY=null,yo.RED=!0,yo.BLACK=!1;yo.EMPTY=new class{constructor(){this.size=0}get key(){throw Rr(57766)}get value(){throw Rr(16141)}get color(){throw Rr(16727)}get left(){throw Rr(29726)}get right(){throw Rr(36894)}copy(e,r,n,a,s){return this}insert(e,r,n){return new yo(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.comparator=e,this.data=new hs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new DB(this.data.getIterator())}getIteratorFrom(e){return new DB(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Aa(this.comparator);return r.data=e,r}}class DB{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Sg(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.fields=e,e.sort(ys.comparator)}static empty(){return new xu([])}unionWith(e){let r=new Aa(ys.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new xu(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return hx(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new GJ("Invalid base64 string: "+s):s}}(e);return new vi(r)}static fromUint8Array(e){const r=function(a){let s="";for(let o=0;o<a.length;++o)s+=String.fromCharCode(a[o]);return s}(e);return new vi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const Rbe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ih(t){if(Vr(!!t,39018),typeof t=="string"){let e=0;const r=Rbe.exec(t);if(Vr(!!r,46558,{timestamp:t}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ls(t.seconds),nanos:ls(t.nanos)}}function ls(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function oh(t){return typeof t=="string"?vi.fromBase64String(t):vi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WJ="server_timestamp",KJ="__type__",XJ="__previous_value__",YJ="__local_write_time__";function RR(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[KJ])==null?void 0:n.stringValue)===WJ}function gA(t){const e=t.mapValue.fields[XJ];return RR(e)?gA(e):e}function Ub(t){const e=ih(t.mapValue.fields[YJ].timestampValue);return new ea(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pbe{constructor(e,r,n,a,s,o,l,c,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const zb="(default)";class Pp{constructor(e,r){this.projectId=e,this.database=r||zb}static empty(){return new Pp("","")}get isDefaultDatabase(){return this.database===zb}isEqual(e){return e instanceof Pp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="__type__",ZJ="__max__",f0={mapValue:{fields:{__type__:{stringValue:ZJ}}}},DR="__vector__",vx="value",SN={nullValue:"NULL_VALUE"};function $0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?RR(t)?4:QJ(t)?9007199254740991:xA(t)?10:11:Rr(28295,{value:t})}function Wd(t,e){if(t===e)return!0;const r=$0(t);if(r!==$0(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ub(t).isEqual(Ub(e));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const o=ih(a.timestampValue),l=ih(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,s){return oh(a.bytesValue).isEqual(oh(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,s){return ls(a.geoPointValue.latitude)===ls(s.geoPointValue.latitude)&&ls(a.geoPointValue.longitude)===ls(s.geoPointValue.longitude)}(t,e);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return ls(a.integerValue)===ls(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const o=ls(a.doubleValue),l=ls(s.doubleValue);return o===l?Mb(o)===Mb(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return hx(t.arrayValue.values||[],e.arrayValue.values||[],Wd);case 10:case 11:return function(a,s){const o=a.mapValue.fields||{},l=s.mapValue.fields||{};if(PB(o)!==PB(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Wd(o[c],l[c])))return!1;return!0}(t,e);default:return Rr(52216,{left:t})}}function Vb(t,e){return(t.values||[]).find(r=>Wd(r,e))!==void 0}function H0(t,e){if(t===e)return 0;const r=$0(t),n=$0(e);if(r!==n)return pn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return pn(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=ls(s.integerValue||s.doubleValue),c=ls(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return MB(t.timestampValue,e.timestampValue);case 4:return MB(Ub(t),Ub(e));case 5:return Ik(t.stringValue,e.stringValue);case 6:return function(s,o){const l=oh(s),c=oh(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=pn(l[u],c[u]);if(d!==0)return d}return pn(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=pn(ls(s.latitude),ls(o.latitude));return l!==0?l:pn(ls(s.longitude),ls(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return LB(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,g,b,w;const l=s.fields||{},c=o.fields||{},u=(p=l[vx])==null?void 0:p.arrayValue,d=(g=c[vx])==null?void 0:g.arrayValue,h=pn(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((w=d==null?void 0:d.values)==null?void 0:w.length)||0);return h!==0?h:LB(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===f0.mapValue&&o===f0.mapValue)return 0;if(s===f0.mapValue)return 1;if(o===f0.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const p=Ik(c[h],d[h]);if(p!==0)return p;const g=H0(l[c[h]],u[d[h]]);if(g!==0)return g}return pn(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Rr(23264,{he:r})}}function MB(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pn(t,e);const r=ih(t),n=ih(e),a=pn(r.seconds,n.seconds);return a!==0?a:pn(r.nanos,n.nanos)}function LB(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=H0(r[a],n[a]);if(s)return s}return pn(r.length,n.length)}function bx(t){return Lk(t)}function Lk(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ih(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return oh(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return _r.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=Lk(s);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const o of n)s?s=!1:a+=",",a+=`${o}:${Lk(r.fields[o])}`;return a+"}"}(t.mapValue):Rr(61005,{value:t})}function jN(t){switch($0(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gA(t);return e?16+jN(e):16;case 5:return 2*t.stringValue.length;case 6:return oh(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+jN(s),0)}(t.arrayValue);case 10:case 11:return function(n){let a=0;return dm(n.fields,(s,o)=>{a+=s.length+jN(o)}),a}(t.mapValue);default:throw Rr(13486,{value:t})}}function $b(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fk(t){return!!t&&"integerValue"in t}function Hb(t){return!!t&&"arrayValue"in t}function FB(t){return!!t&&"nullValue"in t}function BB(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function TN(t){return!!t&&"mapValue"in t}function xA(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[PR])==null?void 0:n.stringValue)===DR}function X2(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return dm(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=X2(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=X2(t.arrayValue.values[r]);return e}return{...t}}function QJ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZJ}const JJ={mapValue:{fields:{[PR]:{stringValue:DR},[vx]:{arrayValue:{}}}}};function Dbe(t){return"nullValue"in t?SN:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?$b(Pp.empty(),_r.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?xA(t)?JJ:{mapValue:{}}:Rr(35942,{value:t})}function Mbe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?$b(Pp.empty(),_r.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?JJ:"mapValue"in t?xA(t)?{mapValue:{}}:f0:Rr(61959,{value:t})}function UB(t,e){const r=H0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function zB(t,e){const r=H0(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.value=e}static empty(){return new fl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!TN(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=X2(r)}setAll(e){let r=ys.emptyPath(),n={},a=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=l.popLast()}o?n[l.lastSegment()]=X2(o):a.push(l.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(e){const r=this.field(e.popLast());TN(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Wd(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];TN(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){dm(r,(a,s)=>e[a]=s);for(const a of n)delete e[a]}clone(){return new fl(X2(this.value))}}function eee(t){const e=[];return dm(t.fields,(r,n)=>{const a=new ys([r]);if(TN(n)){const s=eee(n.mapValue).fields;if(s.length===0)e.push(a);else for(const o of s)e.push(a.child(o))}else e.push(a)}),new xu(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,r,n,a,s,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ds(e,0,Yr.min(),Yr.min(),Yr.min(),fl.empty(),0)}static newFoundDocument(e,r,n,a){return new Ds(e,1,r,Yr.min(),n,a,0)}static newNoDocument(e,r){return new Ds(e,2,r,Yr.min(),Yr.min(),fl.empty(),0)}static newUnknownDocument(e,r){return new Ds(e,3,r,Yr.min(),Yr.min(),fl.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Yr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ds&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ds(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,r){this.position=e,this.inclusive=r}}function VB(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const s=e[a],o=t.position[a];if(s.field.isKeyField()?n=_r.comparator(_r.fromName(o.referenceValue),r.key):n=H0(o,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function $B(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Wd(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,r="asc"){this.field=e,this.dir=r}}function Lbe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{}class zn extends tee{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Fbe(e,r,n):r==="array-contains"?new zbe(e,n):r==="in"?new oee(e,n):r==="not-in"?new Vbe(e,n):r==="array-contains-any"?new $be(e,n):new zn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Bbe(e,n):new Ube(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(H0(r,this.value)):r!==null&&$0(this.value)===$0(r)&&this.matchesComparison(H0(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Rr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Na extends tee{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Na(e,r)}matches(e){return wx(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wx(t){return t.op==="and"}function Bk(t){return t.op==="or"}function MR(t){return ree(t)&&wx(t)}function ree(t){for(const e of t.filters)if(e instanceof Na)return!1;return!0}function Uk(t){if(t instanceof zn)return t.field.canonicalString()+t.op.toString()+bx(t.value);if(MR(t))return t.filters.map(e=>Uk(e)).join(",");{const e=t.filters.map(r=>Uk(r)).join(",");return`${t.op}(${e})`}}function nee(t,e){return t instanceof zn?function(n,a){return a instanceof zn&&n.op===a.op&&n.field.isEqual(a.field)&&Wd(n.value,a.value)}(t,e):t instanceof Na?function(n,a){return a instanceof Na&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,o,l)=>s&&nee(o,a.filters[l]),!0):!1}(t,e):void Rr(19439)}function aee(t,e){const r=t.filters.concat(e);return Na.create(r,t.op)}function see(t){return t instanceof zn?function(r){return`${r.field.canonicalString()} ${r.op} ${bx(r.value)}`}(t):t instanceof Na?function(r){return r.op.toString()+" {"+r.getFilters().map(see).join(" ,")+"}"}(t):"Filter"}class Fbe extends zn{constructor(e,r,n){super(e,r,n),this.key=_r.fromName(n.referenceValue)}matches(e){const r=_r.comparator(e.key,this.key);return this.matchesComparison(r)}}class Bbe extends zn{constructor(e,r){super(e,"in",r),this.keys=iee("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Ube extends zn{constructor(e,r){super(e,"not-in",r),this.keys=iee("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function iee(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>_r.fromName(n.referenceValue))}class zbe extends zn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Hb(r)&&Vb(r.arrayValue,this.value)}}class oee extends zn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Vb(this.value.arrayValue,r)}}class Vbe extends zn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Vb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Vb(this.value.arrayValue,r)}}class $be extends zn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Hb(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Vb(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hbe{constructor(e,r=null,n=[],a=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function zk(t,e=null,r=[],n=[],a=null,s=null,o=null){return new Hbe(t,e,r,n,a,s,o)}function Dp(t){const e=hn(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Uk(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),fA(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>bx(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>bx(n)).join(",")),e.Te=r}return e.Te}function ew(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Lbe(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!nee(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$B(t.startAt,e.startAt)&&$B(t.endAt,e.endAt)}function ZE(t){return _r.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function QE(t,e){return t.filters.filter(r=>r instanceof zn&&r.field.isEqual(e))}function HB(t,e,r){let n=SN,a=!0;for(const s of QE(t,e)){let o=SN,l=!0;switch(s.op){case"<":case"<=":o=Dbe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,l=!1;break;case"!=":case"not-in":o=SN}UB({value:n,inclusive:a},{value:o,inclusive:l})<0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];UB({value:n,inclusive:a},{value:o,inclusive:r.inclusive})<0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}function qB(t,e,r){let n=f0,a=!0;for(const s of QE(t,e)){let o=f0,l=!0;switch(s.op){case">=":case">":o=Mbe(s.value),l=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,l=!1;break;case"!=":case"not-in":o=f0}zB({value:n,inclusive:a},{value:o,inclusive:l})>0&&(n=o,a=l)}if(r!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=r.position[s];zB({value:n,inclusive:a},{value:o,inclusive:r.inclusive})>0&&(n=o,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,r=null,n=[],a=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function qbe(t,e,r,n,a,s,o,l){return new rv(t,e,r,n,a,s,o,l)}function tw(t){return new rv(t)}function GB(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function lee(t){return t.collectionGroup!==null}function Y2(t){const e=hn(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),r.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Aa(ys.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new qb(s,n))}),r.has(ys.keyField().canonicalString())||e.Ie.push(new qb(ys.keyField(),n))}return e.Ie}function _u(t){const e=hn(t);return e.Ee||(e.Ee=Gbe(e,Y2(t))),e.Ee}function Gbe(t,e){if(t.limitType==="F")return zk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new qb(a.field,s)});const r=t.endAt?new yx(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new yx(t.startAt.position,t.startAt.inclusive):null;return zk(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Vk(t,e){const r=t.filters.concat([e]);return new rv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function JE(t,e,r){return new rv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function vA(t,e){return ew(_u(t),_u(e))&&t.limitType===e.limitType}function cee(t){return`${Dp(_u(t))}|lt:${t.limitType}`}function Kg(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>see(a)).join(", ")}]`),fA(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>bx(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>bx(a)).join(",")),`Target(${n})`}(_u(t))}; limitType=${t.limitType})`}function rw(t,e){return e.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):_r.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,a){for(const s of Y2(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(t,e)&&function(n,a){return!(n.startAt&&!function(o,l,c){const u=VB(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,Y2(n),a)||n.endAt&&!function(o,l,c){const u=VB(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,Y2(n),a))}(t,e)}function Wbe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uee(t){return(e,r)=>{let n=!1;for(const a of Y2(t)){const s=Kbe(a,e,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function Kbe(t,e,r){const n=t.field.isKeyField()?_r.comparator(e.key,r.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?H0(c,u):Rr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Rr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,e))return s}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return void(a[s]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){dm(this.inner,(r,n)=>{for(const[a,s]of n)e(a,s)})}isEmpty(){return qJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xbe=new hs(_r.comparator);function Sc(){return Xbe}const dee=new hs(_r.comparator);function y2(...t){let e=dee;for(const r of t)e=e.insert(r.key,r);return e}function fee(t){let e=dee;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Cd(){return Z2()}function hee(){return Z2()}function Z2(){return new Eh(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ybe=new hs(_r.comparator),Zbe=new Aa(_r.comparator);function On(...t){let e=Zbe;for(const r of t)e=e.add(r);return e}const Qbe=new Aa(pn);function Jbe(){return Qbe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mb(e)?"-0":e}}function mee(t){return{integerValue:""+t}}function eye(t,e){return ibe(e)?mee(e):LR(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this._=void 0}}function tye(t,e,r){return t instanceof Gb?function(a,s){const o={fields:{[KJ]:{stringValue:WJ},[YJ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&RR(s)&&(s=gA(s)),s&&(o.fields[XJ]=s),{mapValue:o}}(r,e):t instanceof _x?gee(t,e):t instanceof Nx?xee(t,e):function(a,s){const o=pee(a,s),l=WB(o)+WB(a.Ae);return Fk(o)&&Fk(a.Ae)?mee(l):LR(a.serializer,l)}(t,e)}function rye(t,e,r){return t instanceof _x?gee(t,e):t instanceof Nx?xee(t,e):r}function pee(t,e){return t instanceof Wb?function(n){return Fk(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Gb extends bA{}class _x extends bA{constructor(e){super(),this.elements=e}}function gee(t,e){const r=vee(e);for(const n of t.elements)r.some(a=>Wd(a,n))||r.push(n);return{arrayValue:{values:r}}}class Nx extends bA{constructor(e){super(),this.elements=e}}function xee(t,e){let r=vee(e);for(const n of t.elements)r=r.filter(a=>!Wd(a,n));return{arrayValue:{values:r}}}class Wb extends bA{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function WB(t){return ls(t.integerValue||t.doubleValue)}function vee(t){return Hb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nye{constructor(e,r){this.field=e,this.transform=r}}function aye(t,e){return t.field.isEqual(e.field)&&function(n,a){return n instanceof _x&&a instanceof _x||n instanceof Nx&&a instanceof Nx?hx(n.elements,a.elements,Wd):n instanceof Wb&&a instanceof Wb?Wd(n.Ae,a.Ae):n instanceof Gb&&a instanceof Gb}(t.transform,e.transform)}class sye{constructor(e,r){this.version=e,this.transformResults=r}}class jc{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new jc}static exists(e){return new jc(void 0,e)}static updateTime(e){return new jc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function CN(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yA{}function bee(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new FR(t.key,jc.none()):new nw(t.key,t.data,jc.none());{const r=t.data,n=fl.empty();let a=new Aa(ys.comparator);for(let s of e.fields)if(!a.has(s)){let o=r.field(s);o===null&&s.length>1&&(s=s.popLast(),o=r.field(s)),o===null?n.delete(s):n.set(s,o),a=a.add(s)}return new fm(t.key,n,new xu(a.toArray()),jc.none())}}function iye(t,e,r){t instanceof nw?function(a,s,o){const l=a.value.clone(),c=XB(a.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof fm?function(a,s,o){if(!CN(a.precondition,s))return void s.convertToUnknownDocument(o.version);const l=XB(a.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(yee(a)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,r):function(a,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Q2(t,e,r,n){return t instanceof nw?function(s,o,l,c){if(!CN(s.precondition,o))return l;const u=s.value.clone(),d=YB(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof fm?function(s,o,l,c){if(!CN(s.precondition,o))return l;const u=YB(s.fieldTransforms,c,o),d=o.data;return d.setAll(yee(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(s,o,l){return CN(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function oye(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),s=pee(n.transform,a||null);s!=null&&(r===null&&(r=fl.empty()),r.set(n.field,s))}return r||null}function KB(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&hx(n,a,(s,o)=>aye(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nw extends yA{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class fm extends yA{constructor(e,r,n,a,s=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yee(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function XB(t,e,r){const n=new Map;Vr(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let a=0;a<r.length;a++){const s=t[a],o=s.transform,l=e.data.field(s.field);n.set(s.field,rye(o,l,r[a]))}return n}function YB(t,e,r){const n=new Map;for(const a of t){const s=a.transform,o=r.data.field(a.field);n.set(a.field,tye(s,o,e))}return n}class FR extends yA{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wee extends yA{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(e.key)&&iye(s,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Q2(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Q2(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=hee();return this.mutations.forEach(a=>{const s=e.get(a.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=r.has(a.key)?null:l;const c=bee(o,l);c!==null&&n.set(a.key,c),o.isValidDocument()||o.convertToNoDocument(Yr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),On())}isEqual(e){return this.batchId===e.batchId&&hx(this.mutations,e.mutations,(r,n)=>KB(r,n))&&hx(this.baseMutations,e.baseMutations,(r,n)=>KB(r,n))}}class UR{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Vr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return Ybe}();const s=e.mutations;for(let o=0;o<s.length;o++)a=a.insert(s[o].key,n[o].version);return new UR(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lye{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,Wn;function cye(t){switch(t){case Mt.OK:return Rr(64938);case Mt.CANCELLED:case Mt.UNKNOWN:case Mt.DEADLINE_EXCEEDED:case Mt.RESOURCE_EXHAUSTED:case Mt.INTERNAL:case Mt.UNAVAILABLE:case Mt.UNAUTHENTICATED:return!1;case Mt.INVALID_ARGUMENT:case Mt.NOT_FOUND:case Mt.ALREADY_EXISTS:case Mt.PERMISSION_DENIED:case Mt.FAILED_PRECONDITION:case Mt.ABORTED:case Mt.OUT_OF_RANGE:case Mt.UNIMPLEMENTED:case Mt.DATA_LOSS:return!0;default:return Rr(15467,{code:t})}}function _ee(t){if(t===void 0)return dl("GRPC error has no .code"),Mt.UNKNOWN;switch(t){case si.OK:return Mt.OK;case si.CANCELLED:return Mt.CANCELLED;case si.UNKNOWN:return Mt.UNKNOWN;case si.DEADLINE_EXCEEDED:return Mt.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Mt.RESOURCE_EXHAUSTED;case si.INTERNAL:return Mt.INTERNAL;case si.UNAVAILABLE:return Mt.UNAVAILABLE;case si.UNAUTHENTICATED:return Mt.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Mt.INVALID_ARGUMENT;case si.NOT_FOUND:return Mt.NOT_FOUND;case si.ALREADY_EXISTS:return Mt.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Mt.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Mt.FAILED_PRECONDITION;case si.ABORTED:return Mt.ABORTED;case si.OUT_OF_RANGE:return Mt.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Mt.UNIMPLEMENTED;case si.DATA_LOSS:return Mt.DATA_LOSS;default:return Rr(39323,{code:t})}}(Wn=si||(si={}))[Wn.OK=0]="OK",Wn[Wn.CANCELLED=1]="CANCELLED",Wn[Wn.UNKNOWN=2]="UNKNOWN",Wn[Wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wn[Wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wn[Wn.NOT_FOUND=5]="NOT_FOUND",Wn[Wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wn[Wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wn[Wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wn[Wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wn[Wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wn[Wn.ABORTED=10]="ABORTED",Wn[Wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wn[Wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wn[Wn.INTERNAL=13]="INTERNAL",Wn[Wn.UNAVAILABLE=14]="UNAVAILABLE",Wn[Wn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uye(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dye=new C0([4294967295,4294967295],0);function ZB(t){const e=uye().encode(t),r=new yJ;return r.update(e),new Uint8Array(r.digest())}function QB(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new C0([r,n],0),new C0([a,s],0)]}class VR{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new w2(`Invalid padding: ${r}`);if(n<0)throw new w2(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new w2(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new w2(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=C0.fromNumber(this.ge)}ye(e,r,n){let a=e.add(r.multiply(C0.fromNumber(n)));return a.compare(dye)===1&&(a=new C0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=ZB(e),[n,a]=QB(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);if(!this.we(o))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new VR(s,a,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const r=ZB(e),[n,a]=QB(r);for(let s=0;s<this.hashCount;s++){const o=this.ye(n,a,s);this.Se(o)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class w2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,r,n,a,s){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,aw.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new wA(Yr.min(),a,new hs(pn),Sc(),On())}}class aw{constructor(e,r,n,a,s){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new aw(n,r,On(),On(),On())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,r,n,a){this.be=e,this.removedTargetIds=r,this.key=n,this.De=a}}class Nee{constructor(e,r){this.targetId=e,this.Ce=r}}class Eee{constructor(e,r,n=vi.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class JB{constructor(){this.ve=0,this.Fe=eU(),this.Me=vi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=On(),r=On(),n=On();return this.Fe.forEach((a,s)=>{switch(s){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Rr(38017,{changeType:s})}}),new aw(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=eU()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fye{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sc(),this.Je=H5(),this.He=H5(),this.Ye=new hs(pn)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Rr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(e){const r=e.targetId,n=e.Ce.count,a=this.ot(r);if(a){const s=a.target;if(ZE(s))if(n===0){const o=new _r(s.path);this.et(r,o,Ds.newNoDocument(o,Yr.min()))}else Vr(n===1,20013,{expectedCount:n});else{const o=this._t(r);if(o!==n){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let o,l;try{o=oh(n).toUint8Array()}catch(c){if(c instanceof GJ)return fx("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new VR(o,a,s)}catch(c){return fx(c instanceof w2?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(r,s,null),a++)}),a}Tt(e){const r=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&ZE(l.target)){const c=new _r(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ds.newNoDocument(c,e))}s.Be&&(r.set(o,s.ke()),s.qe())}});let n=On();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const a=new wA(e,r,this.Ye,this.je,n);return this.je=Sc(),this.Je=H5(),this.He=H5(),this.Ye=new hs(pn),a}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new JB,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Aa(pn),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Aa(pn),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||cr("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new JB),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function H5(){return new hs(_r.comparator)}function eU(){return new hs(_r.comparator)}const hye={asc:"ASCENDING",desc:"DESCENDING"},mye={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pye={and:"AND",or:"OR"};class gye{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function $k(t,e){return t.useProto3Json||fA(e)?e:{value:e}}function Ex(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Aee(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xye(t,e){return Ex(t,e.toTimestamp())}function gl(t){return Vr(!!t,49232),Yr.fromTimestamp(function(r){const n=ih(r);return new ea(n.seconds,n.nanos)}(t))}function $R(t,e){return Hk(t,e).canonicalString()}function Hk(t,e){const r=function(a){return new ia(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?r:r.child(e)}function See(t){const e=ia.fromString(t);return Vr(Dee(e),10190,{key:e.toString()}),e}function e3(t,e){return $R(t.databaseId,e.path)}function fp(t,e){const r=See(e);if(r.get(1)!==t.databaseId.projectId)throw new pr(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new pr(Mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new _r(Cee(r))}function jee(t,e){return $R(t.databaseId,e)}function Tee(t){const e=See(t);return e.length===4?ia.emptyPath():Cee(e)}function qk(t){return new ia(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cee(t){return Vr(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tU(t,e,r){return{name:e3(t,e),fields:r.value.mapValue.fields}}function vye(t,e,r){const n=fp(t,e.name),a=gl(e.updateTime),s=e.createTime?gl(e.createTime):Yr.min(),o=new fl({mapValue:{fields:e.fields}}),l=Ds.newFoundDocument(n,a,s,o);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function bye(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Rr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Vr(d===void 0||typeof d=="string",58123),vi.fromBase64String(d||"")):(Vr(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),vi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?Mt.UNKNOWN:_ee(u.code);return new pr(d,u.message||"")}(o);r=new Eee(n,a,s,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=fp(t,n.document.name),s=gl(n.document.updateTime),o=n.document.createTime?gl(n.document.createTime):Yr.min(),l=new fl({mapValue:{fields:n.document.fields}}),c=Ds.newFoundDocument(a,s,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];r=new kN(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=fp(t,n.document),s=n.readTime?gl(n.readTime):Yr.min(),o=Ds.newNoDocument(a,s),l=n.removedTargetIds||[];r=new kN([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=fp(t,n.document),s=n.removedTargetIds||[];r=new kN([],s,a,null)}else{if(!("filter"in e))return Rr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,o=new lye(a,s),l=n.targetId;r=new Nee(l,o)}}return r}function t3(t,e){let r;if(e instanceof nw)r={update:tU(t,e.key,e.value)};else if(e instanceof FR)r={delete:e3(t,e.key)};else if(e instanceof fm)r={update:tU(t,e.key,e.data),updateMask:Aye(e.fieldMask)};else{if(!(e instanceof wee))return Rr(16599,{Vt:e.type});r={verify:e3(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof Gb)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _x)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Nx)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wb)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Rr(20930,{transform:o.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:xye(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Rr(27497)}(t,e.precondition)),r}function Gk(t,e){const r=e.currentDocument?function(s){return s.updateTime!==void 0?jc.updateTime(gl(s.updateTime)):s.exists!==void 0?jc.exists(s.exists):jc.none()}(e.currentDocument):jc.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(o,l){let c=null;if("setToServerValue"in l)Vr(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new Gb;else if("appendMissingElements"in l){const d=l.appendMissingElements.values||[];c=new _x(d)}else if("removeAllFromArray"in l){const d=l.removeAllFromArray.values||[];c=new Nx(d)}else"increment"in l?c=new Wb(o,l.increment):Rr(16584,{proto:l});const u=ys.fromServerFormat(l.fieldPath);return new nye(u,c)}(t,a)):[];if(e.update){e.update.name;const a=fp(t,e.update.name),s=new fl({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new xu(u.map(d=>ys.fromServerFormat(d)))}(e.updateMask);return new fm(a,s,o,r,n)}return new nw(a,s,r,n)}if(e.delete){const a=fp(t,e.delete);return new FR(a,r)}if(e.verify){const a=fp(t,e.verify);return new wee(a,r)}return Rr(1463,{proto:e})}function yye(t,e){return t&&t.length>0?(Vr(e!==void 0,14353),t.map(r=>function(a,s){let o=a.updateTime?gl(a.updateTime):gl(s);return o.isEqual(Yr.min())&&(o=gl(s)),new sye(o,a.transformResults||[])}(r,e))):[]}function kee(t,e){return{documents:[jee(t,e.path)]}}function Iee(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=jee(t,a);const s=function(u){if(u.length!==0)return Pee(Na.create(u,"and"))}(e.filters);s&&(r.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Xg(p.field),direction:_ye(p.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=$k(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:a}}function Oee(t){let e=Tee(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Vr(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let s=[];r.where&&(s=function(h){const p=Ree(h);return p instanceof Na&&MR(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(p=>function(b){return new qb(Yg(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(h){let p;return p=typeof h=="object"?h.value:h,fA(p)?null:p}(r.limit));let c=null;r.startAt&&(c=function(h){const p=!!h.before,g=h.values||[];return new yx(g,p)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const p=!h.before,g=h.values||[];return new yx(g,p)}(r.endAt)),qbe(e,a,o,s,l,"F",c,u)}function wye(t,e){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rr(28987,{purpose:a})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Ree(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Yg(r.unaryFilter.field);return zn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Yg(r.unaryFilter.field);return zn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yg(r.unaryFilter.field);return zn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Yg(r.unaryFilter.field);return zn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rr(61313);default:return Rr(60726)}}(t):t.fieldFilter!==void 0?function(r){return zn.create(Yg(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rr(58110);default:return Rr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Na.create(r.compositeFilter.filters.map(n=>Ree(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Rr(1026)}}(r.compositeFilter.op))}(t):Rr(30097,{filter:t})}function _ye(t){return hye[t]}function Nye(t){return mye[t]}function Eye(t){return pye[t]}function Xg(t){return{fieldPath:t.canonicalString()}}function Yg(t){return ys.fromServerFormat(t.fieldPath)}function Pee(t){return t instanceof zn?function(r){if(r.op==="=="){if(BB(r.value))return{unaryFilter:{field:Xg(r.field),op:"IS_NAN"}};if(FB(r.value))return{unaryFilter:{field:Xg(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(BB(r.value))return{unaryFilter:{field:Xg(r.field),op:"IS_NOT_NAN"}};if(FB(r.value))return{unaryFilter:{field:Xg(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xg(r.field),op:Nye(r.op),value:r.value}}}(t):t instanceof Na?function(r){const n=r.getFilters().map(a=>Pee(a));return n.length===1?n[0]:{compositeFilter:{op:Eye(r.op),filters:n}}}(t):Rr(54877,{filter:t})}function Aye(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Dee(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,r,n,a,s=Yr.min(),o=Yr.min(),l=vi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Mf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(e){this.yt=e}}function Sye(t,e){let r;if(e.document)r=vye(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=_r.fromSegments(e.noDocument.path),a=Lp(e.noDocument.readTime);r=Ds.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return Rr(56709);{const n=_r.fromSegments(e.unknownDocument.path),a=Lp(e.unknownDocument.version);r=Ds.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime(function(a){const s=new ea(a[0],a[1]);return Yr.fromTimestamp(s)}(e.readTime)),r}function rU(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:r3(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,o){return{name:e3(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ex(s,o.version.toTimestamp()),createTime:Ex(s,o.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Mp(e.version)};else{if(!e.isUnknownDocument())return Rr(57904,{document:e});n.unknownDocument={path:r.path.toArray(),version:Mp(e.version)}}return n}function r3(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Mp(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lp(t){const e=new ea(t.seconds,t.nanoseconds);return Yr.fromTimestamp(e)}function Hm(t,e){const r=(e.baseMutations||[]).map(s=>Gk(t.yt,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const l=e.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>Gk(t.yt,s)),a=ea.fromMillis(e.localWriteTimeMs);return new BR(e.batchId,a,r,n)}function _2(t){const e=Lp(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Lp(t.lastLimboFreeSnapshotVersion):Yr.min();let n;return n=function(s){return s.documents!==void 0}(t.query)?function(s){const o=s.documents.length;return Vr(o===1,1966,{count:o}),_u(tw(Tee(s.documents[0])))}(t.query):function(s){return _u(Oee(s))}(t.query),new Mf(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,vi.fromBase64String(t.resumeToken))}function Lee(t,e){const r=Mp(e.snapshotVersion),n=Mp(e.lastLimboFreeSnapshotVersion);let a;a=ZE(e.target)?kee(t.yt,e.target):Iee(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Dp(e.target),readTime:r,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function Fee(t){const e=Oee({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?JE(e,e.limit,"L"):e}function Sj(t,e){return new zR(e.largestBatchId,Gk(t.yt,e.overlayMutation))}function nU(t,e){const r=e.path.lastSegment();return[t,$o(e.path.popLast()),r]}function aU(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Mp(n.readTime),documentKey:$o(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jye{getBundleMetadata(e,r){return sU(e).get(r).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:Lp(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,r){return sU(e).put(function(a){return{bundleId:a.id,createTime:Mp(gl(a.createTime)),version:a.version}}(r))}getNamedQuery(e,r){return iU(e).get(r).next(n=>{if(n)return function(s){return{name:s.name,query:Fee(s.bundledQuery),readTime:Lp(s.readTime)}}(n)})}saveNamedQuery(e,r){return iU(e).put(function(a){return{name:a.name,readTime:Mp(gl(a.readTime)),bundledQuery:a.bundledQuery}}(r))}}function sU(t){return Ri(t,hA)}function iU(t){return Ri(t,mA)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,r){this.serializer=e,this.userId=r}static wt(e,r){const n=r.uid||"";return new _A(e,n)}getOverlay(e,r){return zv(e).get(nU(this.userId,r)).next(n=>n?Sj(this.serializer,n):null)}getOverlays(e,r){const n=Cd();return ft.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){const a=[];return n.forEach((s,o)=>{const l=new zR(r,o);a.push(this.St(e,l))}),ft.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach(o=>a.add($o(o.getCollectionPath())));const s=[];return a.forEach(o=>{const l=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(zv(e).Z(Dk,l))}),ft.waitFor(s)}getOverlaysForCollection(e,r,n){const a=Cd(),s=$o(r),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zv(e).J(Dk,o).next(l=>{for(const c of l){const u=Sj(this.serializer,c);a.set(u.getKey(),u)}return a})}getOverlaysForCollectionGroup(e,r,n,a){const s=Cd();let o;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return zv(e).ee({index:UJ,range:l},(c,u,d)=>{const h=Sj(this.serializer,u);s.size()<a||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}St(e,r){return zv(e).put(function(a,s,o){const[l,c,u]=nU(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:t3(a.yt,o.mutation)}}(this.serializer,this.userId,r))}}function zv(t){return Ri(t,pA)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tye{bt(e){return Ri(e,IR)}getSessionToken(e){return this.bt(e).get("sessionToken").next(r=>{const n=r==null?void 0:r.value;return n?vi.fromUint8Array(n):vi.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.bt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){}Dt(e,r){this.Ct(e,r),r.vt()}Ct(e,r){if("nullValue"in e)this.Ft(r,5);else if("booleanValue"in e)this.Ft(r,10),r.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(r,15),r.Mt(ls(e.integerValue));else if("doubleValue"in e){const n=ls(e.doubleValue);isNaN(n)?this.Ft(r,13):(this.Ft(r,15),Mb(n)?r.Mt(0):r.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(r,20),typeof n=="string"&&(n=ih(n)),r.xt(`${n.seconds||""}`),r.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,r),this.Nt(r);else if("bytesValue"in e)this.Ft(r,30),r.Bt(oh(e.bytesValue)),this.Nt(r);else if("referenceValue"in e)this.Lt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(r,45),r.Mt(n.latitude||0),r.Mt(n.longitude||0)}else"mapValue"in e?QJ(e)?this.Ft(r,Number.MAX_SAFE_INTEGER):xA(e)?this.kt(e.mapValue,r):(this.qt(e.mapValue,r),this.Nt(r)):"arrayValue"in e?(this.Qt(e.arrayValue,r),this.Nt(r)):Rr(19022,{$t:e})}Ot(e,r){this.Ft(r,25),this.Ut(e,r)}Ut(e,r){r.xt(e)}qt(e,r){const n=e.fields||{};this.Ft(r,55);for(const a of Object.keys(n))this.Ot(a,r),this.Ct(n[a],r)}kt(e,r){var o,l;const n=e.fields||{};this.Ft(r,53);const a=vx,s=((l=(o=n[a].arrayValue)==null?void 0:o.values)==null?void 0:l.length)||0;this.Ft(r,15),r.Mt(ls(s)),this.Ot(a,r),this.Ct(n[a],r)}Qt(e,r){const n=e.values||[];this.Ft(r,50);for(const a of n)this.Ct(a,r)}Lt(e,r){this.Ft(r,37),_r.fromName(e).path.forEach(n=>{this.Ft(r,60),this.Ut(n,r)})}Ft(e,r){e.Mt(r)}Nt(e){e.Mt(2)}}qm.Kt=new qm;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg=255;function Cye(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function oU(t){const e=64-function(n){let a=0;for(let s=0;s<8;++s){const o=Cye(255&n[s]);if(a+=o,o!==8)break}return a}(t);return Math.ceil(e/8)}class kye{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Gt(n.value),n=r.next();this.zt()}jt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Jt(n.value),n=r.next();this.Ht()}Yt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const a=r.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const a=r.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const r=this.en(e),n=oU(r);this.tn(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}nn(e){const r=this.en(e),n=oU(r);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}rn(){this.sn(jg),this.sn(255)}_n(){this.an(jg),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const r=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),n=!!(128&r[0]);r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Gt(e){const r=255&e;r===0?(this.sn(0),this.sn(255)):r===jg?(this.sn(jg),this.sn(0)):this.sn(r)}Jt(e){const r=255&e;r===0?(this.an(0),this.an(255)):r===jg?(this.an(jg),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Iye{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Oye{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vv{constructor(){this.cn=new kye,this.ln=new Iye(this.cn),this.hn=new Oye(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,r,n,a){this.Tn=e,this.In=r,this.En=n,this.dn=a}An(){const e=this.dn.length,r=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.dn,0),r!==e?n.set([0],this.dn.length):++n[n.length-1],new Gm(this.Tn,this.In,this.En,n)}Rn(e,r,n){return{indexId:this.Tn,uid:e,arrayValue:IN(this.En),directionalValue:IN(this.dn),orderedDocumentKey:IN(r),documentKey:n.path.toArray()}}Vn(e,r,n){const a=this.Rn(e,r,n);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function zh(t,e){let r=t.Tn-e.Tn;return r!==0?r:(r=lU(t.En,e.En),r!==0?r:(r=lU(t.dn,e.dn),r!==0?r:_r.comparator(t.In,e.In)))}function lU(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}function IN(t){return wQ()?function(r){let n="";for(let a=0;a<r.length;a++)n+=String.fromCharCode(r[a]);return n}(t):t}function cU(t){return typeof t!="string"?t:function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(t)}class uU{constructor(e){this.mn=new Aa((r,n)=>ys.comparator(r.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const r of e.filters){const n=r;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(Vr(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const r=Ok(e);if(r!==void 0&&!this.wn(r))return!1;const n=Mm(e);let a=new Set,s=0,o=0;for(;s<n.length&&this.wn(n[s]);++s)a=a.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!a.has(l.field.canonicalString())){const c=n[s];if(!this.Sn(l,c)||!this.bn(this.fn[o++],c))return!1}++s}for(;s<n.length;++s){const l=n[s];if(o>=this.fn.length||!this.bn(this.fn[o++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new Aa(ys.comparator);const r=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new NN(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new NN(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new NN(n.field,n.dir==="asc"?0:1)));return new WE(WE.UNKNOWN_ID,this.collectionId,r,Db.empty())}wn(e){for(const r of this.gn)if(this.Sn(r,e))return!0;return!1}Sn(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}bn(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bee(t){var r,n;if(Vr(t instanceof zn||t instanceof Na,20012),t instanceof zn){if(t instanceof oee){const a=((n=(r=t.value.arrayValue)==null?void 0:r.values)==null?void 0:n.map(s=>zn.create(t.field,"==",s)))||[];return Na.create(a,"or")}return t}const e=t.filters.map(a=>Bee(a));return Na.create(e,t.op)}function Rye(t){if(t.getFilters().length===0)return[];const e=Xk(Bee(t));return Vr(Uee(e),7391),Wk(e)||Kk(e)?[e]:e.getFilters()}function Wk(t){return t instanceof zn}function Kk(t){return t instanceof Na&&MR(t)}function Uee(t){return Wk(t)||Kk(t)||function(r){if(r instanceof Na&&Bk(r)){for(const n of r.getFilters())if(!Wk(n)&&!Kk(n))return!1;return!0}return!1}(t)}function Xk(t){if(Vr(t instanceof zn||t instanceof Na,34018),t instanceof zn)return t;if(t.filters.length===1)return Xk(t.filters[0]);const e=t.filters.map(n=>Xk(n));let r=Na.create(e,t.op);return r=n3(r),Uee(r)?r:(Vr(r instanceof Na,64498),Vr(wx(r),40251),Vr(r.filters.length>1,57927),r.filters.reduce((n,a)=>HR(n,a)))}function HR(t,e){let r;return Vr(t instanceof zn||t instanceof Na,38388),Vr(e instanceof zn||e instanceof Na,25473),r=t instanceof zn?e instanceof zn?function(a,s){return Na.create([a,s],"and")}(t,e):dU(t,e):e instanceof zn?dU(e,t):function(a,s){if(Vr(a.filters.length>0&&s.filters.length>0,48005),wx(a)&&wx(s))return aee(a,s.getFilters());const o=Bk(a)?a:s,l=Bk(a)?s:a,c=o.filters.map(u=>HR(u,l));return Na.create(c,"or")}(t,e),n3(r)}function dU(t,e){if(wx(e))return aee(e,t.getFilters());{const r=e.filters.map(n=>HR(t,n));return Na.create(r,"or")}}function n3(t){if(Vr(t instanceof zn||t instanceof Na,11850),t instanceof zn)return t;const e=t.getFilters();if(e.length===1)return n3(e[0]);if(ree(t))return t;const r=e.map(a=>n3(a)),n=[];return r.forEach(a=>{a instanceof zn?n.push(a):a instanceof Na&&(a.op===t.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Na.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pye{constructor(){this.Cn=new qR}addToCollectionParentIndex(e,r){return this.Cn.add(r),ft.resolve()}getCollectionParents(e,r){return ft.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return ft.resolve()}deleteFieldIndex(e,r){return ft.resolve()}deleteAllFieldIndexes(e){return ft.resolve()}createTargetIndexes(e,r){return ft.resolve()}getDocumentsMatchingTarget(e,r){return ft.resolve(null)}getIndexType(e,r){return ft.resolve(0)}getFieldIndexes(e,r){return ft.resolve([])}getNextCollectionGroupToUpdate(e){return ft.resolve(null)}getMinOffset(e,r){return ft.resolve(Fc.min())}getMinOffsetFromCollectionGroup(e,r){return ft.resolve(Fc.min())}updateCollectionGroup(e,r,n){return ft.resolve()}updateIndexEntries(e,r){return ft.resolve()}}class qR{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Aa(ia.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Aa(ia.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU="IndexedDbIndexManager",q5=new Uint8Array(0);class Dye{constructor(e,r){this.databaseId=r,this.vn=new qR,this.Fn=new Eh(n=>Dp(n),(n,a)=>ew(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.vn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener(()=>{this.vn.add(r)});const s={collectionId:n,parent:$o(a)};return hU(e).put(s)}return ft.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[TJ(r),""],!1,!0);return hU(e).J(a).next(s=>{for(const o of s){if(o.collectionId!==r)break;n.push(Td(o.parent))}return n})}addFieldIndex(e,r){const n=$v(e),a=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(r);delete a.indexId;const s=n.add(a);if(r.indexState){const o=Cg(e);return s.next(l=>{o.put(aU(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return s.next()}deleteFieldIndex(e,r){const n=$v(e),a=Cg(e),s=Tg(e);return n.delete(r.indexId).next(()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=$v(e),n=Tg(e),a=Cg(e);return r.Z().next(()=>n.Z()).next(()=>a.Z())}createTargetIndexes(e,r){return ft.forEach(this.Mn(r),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const s=new uU(n).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,r){const n=Tg(e);let a=!0;const s=new Map;return ft.forEach(this.Mn(r),o=>this.xn(e,o).next(l=>{a&&(a=!!l),s.set(o,l)})).next(()=>{if(a){let o=On();const l=[];return ft.forEach(s,(c,u)=>{cr(fU,`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(c)} to execute ${Dp(r)}`);const d=function(T,R){const z=Ok(R);if(z===void 0)return null;for(const G of QE(T,z.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(u,c),h=function(T,R){const z=new Map;for(const G of Mm(R))for(const O of QE(T,G.fieldPath))switch(O.op){case"==":case"in":z.set(G.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return z.set(G.fieldPath.canonicalString(),O.value),Array.from(z.values())}return null}(u,c),p=function(T,R){const z=[];let G=!0;for(const O of Mm(R)){const D=O.kind===0?HB(T,O.fieldPath,T.startAt):qB(T,O.fieldPath,T.startAt);z.push(D.value),G&&(G=D.inclusive)}return new yx(z,G)}(u,c),g=function(T,R){const z=[];let G=!0;for(const O of Mm(R)){const D=O.kind===0?qB(T,O.fieldPath,T.endAt):HB(T,O.fieldPath,T.endAt);z.push(D.value),G&&(G=D.inclusive)}return new yx(z,G)}(u,c),b=this.On(c,u,p),w=this.On(c,u,g),_=this.Nn(c,u,h),N=this.Bn(c.indexId,d,b,p.inclusive,w,g.inclusive,_);return ft.forEach(N,S=>n.Y(S,r.limit).next(T=>{T.forEach(R=>{const z=_r.fromSegments(R.documentKey);o.has(z)||(o=o.add(z),l.push(z))})}))}).next(()=>l)}return ft.resolve(null)})}Mn(e){let r=this.Fn.get(e);return r||(e.filters.length===0?r=[e]:r=Rye(Na.create(e.filters,"and")).map(n=>zk(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,r),r)}Bn(e,r,n,a,s,o,l){const c=(r!=null?r.length:1)*Math.max(n.length,s.length),u=c/(r!=null?r.length:1),d=[];for(let h=0;h<c;++h){const p=r?this.Ln(r[h/u]):q5,g=this.kn(e,p,n[h%u],a),b=this.qn(e,p,s[h%u],o),w=l.map(_=>this.kn(e,p,_,!0));d.push(...this.createRange(g,b,w))}return d}kn(e,r,n,a){const s=new Gm(e,_r.empty(),r,n);return a?s:s.An()}qn(e,r,n,a){const s=new Gm(e,_r.empty(),r,n);return a?s.An():s}xn(e,r){const n=new uU(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next(s=>{let o=null;for(const l of s)n.yn(l)&&(!o||l.fields.length>o.fields.length)&&(o=l);return o})}getIndexType(e,r){let n=2;const a=this.Mn(r);return ft.forEach(a,s=>this.xn(e,s).next(o=>{o?n!==0&&o.fields.length<function(c){let u=new Aa(ys.comparator),d=!1;for(const h of c.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(n=1):n=0})).next(()=>function(o){return o.limit!==null}(r)&&a.length>1&&n===2?1:n)}Qn(e,r){const n=new Vv;for(const a of Mm(e)){const s=r.data.field(a.fieldPath);if(s==null)return null;const o=n.Pn(a.kind);qm.Kt.Dt(s,o)}return n.un()}Ln(e){const r=new Vv;return qm.Kt.Dt(e,r.Pn(0)),r.un()}$n(e,r){const n=new Vv;return qm.Kt.Dt($b(this.databaseId,r),n.Pn(function(s){const o=Mm(s);return o.length===0?0:o[o.length-1].kind}(e))),n.un()}Nn(e,r,n){if(n===null)return[];let a=[];a.push(new Vv);let s=0;for(const o of Mm(e)){const l=n[s++];for(const c of a)if(this.Un(r,o.fieldPath)&&Hb(l))a=this.Kn(a,o,l);else{const u=c.Pn(o.kind);qm.Kt.Dt(l,u)}}return this.Wn(a)}On(e,r,n){return this.Nn(e,r,n.position)}Wn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].un();return r}Kn(e,r,n){const a=[...e],s=[];for(const o of n.arrayValue.values||[])for(const l of a){const c=new Vv;c.seed(l.un()),qm.Kt.Dt(o,c.Pn(r.kind)),s.push(c)}return s}Un(e,r){return!!e.filters.find(n=>n instanceof zn&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,r){const n=$v(e),a=Cg(e);return(r?n.J(Pk,IDBKeyRange.bound(r,r)):n.J()).next(s=>{const o=[];return ft.forEach(s,l=>a.get([l.indexId,this.uid]).next(c=>{o.push(function(d,h){const p=h?new Db(h.sequenceNumber,new Fc(Lp(h.readTime),new _r(Td(h.documentKey)),h.largestBatchId)):Db.empty(),g=d.fields.map(([b,w])=>new NN(ys.fromServerFormat(b),w));return new WE(d.indexId,d.collectionGroup,g,p)}(l,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>r.length===0?null:(r.sort((n,a)=>{const s=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return s!==0?s:pn(n.collectionGroup,a.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,n){const a=$v(e),s=Cg(e);return this.Gn(e).next(o=>a.J(Pk,IDBKeyRange.bound(r,r)).next(l=>ft.forEach(l,c=>s.put(aU(c.indexId,this.uid,o,n)))))}updateIndexEntries(e,r){const n=new Map;return ft.forEach(r,(a,s)=>{const o=n.get(a.collectionGroup);return(o?ft.resolve(o):this.getFieldIndexes(e,a.collectionGroup)).next(l=>(n.set(a.collectionGroup,l),ft.forEach(l,c=>this.zn(e,a,c).next(u=>{const d=this.jn(s,c);return u.isEqual(d)?ft.resolve():this.Jn(e,s,c,u,d)}))))})}Hn(e,r,n,a){return Tg(e).put(a.Rn(this.uid,this.$n(n,r.key),r.key))}Yn(e,r,n,a){return Tg(e).delete(a.Vn(this.uid,this.$n(n,r.key),r.key))}zn(e,r,n){const a=Tg(e);let s=new Aa(zh);return a.ee({index:BJ,range:IDBKeyRange.only([n.indexId,this.uid,IN(this.$n(n,r))])},(o,l)=>{s=s.add(new Gm(n.indexId,r,cU(l.arrayValue),cU(l.directionalValue)))}).next(()=>s)}jn(e,r){let n=new Aa(zh);const a=this.Qn(r,e);if(a==null)return n;const s=Ok(r);if(s!=null){const o=e.data.field(s.fieldPath);if(Hb(o))for(const l of o.arrayValue.values||[])n=n.add(new Gm(r.indexId,e.key,this.Ln(l),a))}else n=n.add(new Gm(r.indexId,e.key,q5,a));return n}Jn(e,r,n,a,s){cr(fU,"Updating index entries for document '%s'",r.key);const o=[];return function(c,u,d,h,p){const g=c.getIterator(),b=u.getIterator();let w=Sg(g),_=Sg(b);for(;w||_;){let N=!1,S=!1;if(w&&_){const T=d(w,_);T<0?S=!0:T>0&&(N=!0)}else w!=null?S=!0:N=!0;N?(h(_),_=Sg(b)):S?(p(w),w=Sg(g)):(w=Sg(g),_=Sg(b))}}(a,s,zh,l=>{o.push(this.Hn(e,r,n,l))},l=>{o.push(this.Yn(e,r,n,l))}),ft.waitFor(o)}Gn(e){let r=1;return Cg(e).ee({index:FJ,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,s)=>{s.done(),r=a.sequenceNumber+1}).next(()=>r)}createRange(e,r,n){n=n.sort((o,l)=>zh(o,l)).filter((o,l,c)=>!l||zh(o,c[l-1])!==0);const a=[];a.push(e);for(const o of n){const l=zh(o,e),c=zh(o,r);if(l===0)a[0]=e.An();else if(l>0&&c<0)a.push(o),a.push(o.An());else if(c>0)break}a.push(r);const s=[];for(let o=0;o<a.length;o+=2){if(this.Zn(a[o],a[o+1]))return[];const l=a[o].Vn(this.uid,q5,_r.empty()),c=a[o+1].Vn(this.uid,q5,_r.empty());s.push(IDBKeyRange.bound(l,c))}return s}Zn(e,r){return zh(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(mU)}getMinOffset(e,r){return ft.mapArray(this.Mn(r),n=>this.xn(e,n).next(a=>a||Rr(44426))).next(mU)}}function hU(t){return Ri(t,Bb)}function Tg(t){return Ri(t,K2)}function $v(t){return Ri(t,kR)}function Cg(t){return Ri(t,W2)}function mU(t){Vr(t.length!==0,28825);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;jR(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Fc(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zee=41943040;class Bo{static withCacheSize(e){return new Bo(e,Bo.DEFAULT_COLLECTION_PERCENTILE,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vee(t,e,r){const n=t.store(Ku),a=t.store(mx),s=[],o=IDBKeyRange.only(r.batchId);let l=0;const c=n.ee({range:o},(d,h,p)=>(l++,p.delete()));s.push(c.next(()=>{Vr(l===1,47070,{batchId:r.batchId})}));const u=[];for(const d of r.mutations){const h=DJ(e,d.key.path,r.batchId);s.push(a.delete(h)),u.push(d.key)}return ft.waitFor(s).next(()=>u)}function a3(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Rr(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bo.DEFAULT_COLLECTION_PERCENTILE=10,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bo.DEFAULT=new Bo(zee,Bo.DEFAULT_COLLECTION_PERCENTILE,Bo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bo.DISABLED=new Bo(-1,0,0);class NA{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Xn={}}static wt(e,r,n,a){Vr(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new NA(s,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vh(e).ee({index:Ym,range:n},(a,s,o)=>{r=!1,o.done()}).next(()=>r)}addMutationBatch(e,r,n,a){const s=Zg(e),o=Vh(e);return o.add({}).next(l=>{Vr(typeof l=="number",49019);const c=new BR(l,r,n,a),u=function(g,b,w){const _=w.baseMutations.map(S=>t3(g.yt,S)),N=w.mutations.map(S=>t3(g.yt,S));return{userId:b,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:_,mutations:N}}(this.serializer,this.userId,c),d=[];let h=new Aa((p,g)=>pn(p.canonicalString(),g.canonicalString()));for(const p of a){const g=DJ(this.userId,p.key.path,l);h=h.add(p.key.path.popLast()),d.push(o.put(u)),d.push(s.put(g,cbe))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Xn[l]=c.keys()}),ft.waitFor(d).next(()=>c)})}lookupMutationBatch(e,r){return Vh(e).get(r).next(n=>n?(Vr(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:r}),Hm(this.serializer,n)):null)}er(e,r){return this.Xn[r]?ft.resolve(this.Xn[r]):this.lookupMutationBatch(e,r).next(n=>{if(n){const a=n.keys();return this.Xn[r]=a,a}return null})}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Vh(e).ee({index:Ym,range:a},(o,l,c)=>{l.userId===this.userId&&(Vr(l.batchId>=n,47524,{tr:n}),s=Hm(this.serializer,l)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=up;return Vh(e).ee({index:Ym,range:r,reverse:!0},(a,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,up],[this.userId,Number.POSITIVE_INFINITY]);return Vh(e).J(Ym,r).next(n=>n.map(a=>Hm(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=EN(this.userId,r.path),a=IDBKeyRange.lowerBound(n),s=[];return Zg(e).ee({range:a},(o,l,c)=>{const[u,d,h]=o,p=Td(d);if(u===this.userId&&r.path.isEqual(p))return Vh(e).get(h).next(g=>{if(!g)throw Rr(61480,{nr:o,batchId:h});Vr(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),s.push(Hm(this.serializer,g))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Aa(pn);const a=[];return r.forEach(s=>{const o=EN(this.userId,s.path),l=IDBKeyRange.lowerBound(o),c=Zg(e).ee({range:l},(u,d,h)=>{const[p,g,b]=u,w=Td(g);p===this.userId&&s.path.isEqual(w)?n=n.add(b):h.done()});a.push(c)}),ft.waitFor(a).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,s=EN(this.userId,n),o=IDBKeyRange.lowerBound(s);let l=new Aa(pn);return Zg(e).ee({range:o},(c,u,d)=>{const[h,p,g]=c,b=Td(p);h===this.userId&&n.isPrefixOf(b)?b.length===a&&(l=l.add(g)):d.done()}).next(()=>this.rr(e,l))}rr(e,r){const n=[],a=[];return r.forEach(s=>{a.push(Vh(e).get(s).next(o=>{if(o===null)throw Rr(35274,{batchId:s});Vr(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),n.push(Hm(this.serializer,o))}))}),ft.waitFor(a).next(()=>n)}removeMutationBatch(e,r){return Vee(e.le,this.userId,r).next(n=>(e.addOnCommittedListener(()=>{this.ir(r.batchId)}),ft.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return ft.resolve();const n=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),a=[];return Zg(e).ee({range:n},(s,o,l)=>{if(s[0]===this.userId){const c=Td(s[1]);a.push(c)}else l.done()}).next(()=>{Vr(a.length===0,56720,{sr:a.map(s=>s.canonicalString())})})})}containsKey(e,r){return $ee(e,this.userId,r)}_r(e){return Hee(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:up,lastStreamToken:""})}}function $ee(t,e,r){const n=EN(e,r.path),a=n[1],s=IDBKeyRange.lowerBound(n);let o=!1;return Zg(t).ee({range:s,X:!0},(l,c,u)=>{const[d,h,p]=l;d===e&&h===a&&(o=!0),u.done()}).next(()=>o)}function Vh(t){return Ri(t,Ku)}function Zg(t){return Ri(t,mx)}function Hee(t){return Ri(t,Lb)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fp(0)}static cr(){return new Fp(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mye{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.lr(e).next(r=>{const n=new Fp(r.highestTargetId);return r.highestTargetId=n.next(),this.hr(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(r=>Yr.fromTimestamp(new ea(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,n){return this.lr(e).next(a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.hr(e,a)))}addTargetData(e,r){return this.Pr(e,r).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(r,n),this.hr(e,n))))}updateTargetData(e,r){return this.Pr(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>kg(e).delete(r.targetId)).next(()=>this.lr(e)).next(n=>(Vr(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n)))}removeTargets(e,r,n){let a=0;const s=[];return kg(e).ee((o,l)=>{const c=_2(l);c.sequenceNumber<=r&&n.get(c.targetId)===null&&(a++,s.push(this.removeTargetData(e,c)))}).next(()=>ft.waitFor(s)).next(()=>a)}forEachTarget(e,r){return kg(e).ee((n,a)=>{const s=_2(a);r(s)})}lr(e){return gU(e).get(YE).next(r=>(Vr(r!==null,2888),r))}hr(e,r){return gU(e).put(YE,r)}Pr(e,r){return kg(e).put(Lee(this.serializer,r))}Tr(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(r=>r.targetCount)}getTargetData(e,r){const n=Dp(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return kg(e).ee({range:a,index:LJ},(o,l,c)=>{const u=_2(l);ew(r,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,r,n){const a=[],s=n0(e);return r.forEach(o=>{const l=$o(o.path);a.push(s.put({targetId:n,path:l})),a.push(this.referenceDelegate.addReference(e,n,o))}),ft.waitFor(a)}removeMatchingKeys(e,r,n){const a=n0(e);return ft.forEach(r,s=>{const o=$o(s.path);return ft.waitFor([a.delete([n,o]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,r){const n=n0(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=n0(e);let s=On();return a.ee({range:n,X:!0},(o,l,c)=>{const u=Td(o[1]),d=new _r(u);s=s.add(d)}).next(()=>s)}containsKey(e,r){const n=$o(r.path),a=IDBKeyRange.bound([n],[TJ(n)],!1,!0);let s=0;return n0(e).ee({index:CR,X:!0,range:a},([o,l],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}At(e,r){return kg(e).get(r).next(n=>n?_2(n):null)}}function kg(t){return Ri(t,px)}function gU(t){return Ri(t,dp)}function n0(t){return Ri(t,gx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU="LruGarbageCollector",qee=1048576;function vU([t,e],[r,n]){const a=pn(t,r);return a===0?pn(e,n):a}class Lye{constructor(e){this.Ir=e,this.buffer=new Aa(vU),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();vU(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Gee{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){cr(xU,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){um(r)?cr(xU,"Ignoring IndexedDB error during garbage collection: ",r):await lg(r)}await this.Vr(3e5)})}}class Fye{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return ft.resolve(gu.ce);const n=new Lye(r);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(cr("LruGarbageCollector","Garbage collection skipped; disabled"),ft.resolve(pU)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(cr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pU):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,a,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(cr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),a=this.params.maximumSequenceNumbersToCollect):a=h,o=Date.now(),this.nthSequenceNumber(e,a))).next(h=>(n=h,l=Date.now(),this.removeTargets(e,n,r))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),Wg()<=Bn.DEBUG&&cr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${a} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),ft.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:h})))}}function Wee(t,e){return new Fye(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bye{constructor(e,r){this.db=e,this.garbageCollector=Wee(this,r)}gr(e){const r=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}pr(e,r){return this.Sr(e,(n,a)=>r(a))}addReference(e,r,n){return G5(e,n)}removeReference(e,r,n){return G5(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return G5(e,r)}br(e,r){return function(a,s){let o=!1;return Hee(a).te(l=>$ee(a,l,s).next(c=>(c&&(o=!0),ft.resolve(!c)))).next(()=>o)}(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let s=0;return this.Sr(e,(o,l)=>{if(l<=r){const c=this.br(e,o).next(u=>{if(!u)return s++,n.getEntry(e,o).next(()=>(n.removeEntry(o,Yr.min()),n0(e).delete(function(h){return[0,$o(h.path)]}(o))))});a.push(c)}}).next(()=>ft.waitFor(a)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return G5(e,r)}Sr(e,r){const n=n0(e);let a,s=gu.ce;return n.ee({index:CR},([o,l],{path:c,sequenceNumber:u})=>{o===0?(s!==gu.ce&&r(new _r(Td(a)),s),s=u,a=c):s=gu.ce}).next(()=>{s!==gu.ce&&r(new _r(Td(a)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function G5(t,e){return n0(t).put(function(n,a){return{targetId:0,path:$o(n.path),sequenceNumber:a}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kee{constructor(){this.changes=new Eh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Ds.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ft.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uye{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Tm(e).put(n)}removeEntry(e,r,n){return Tm(e).delete(function(s,o){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],r3(o),l[l.length-1]]}(r,n))}updateMetadata(e,r){return this.getMetadata(e).next(n=>(n.byteSize+=r,this.Dr(e,n)))}getEntry(e,r){let n=Ds.newInvalidDocument(r);return Tm(e).ee({index:AN,range:IDBKeyRange.only(Hv(r))},(a,s)=>{n=this.Cr(r,s)}).next(()=>n)}vr(e,r){let n={size:0,document:Ds.newInvalidDocument(r)};return Tm(e).ee({index:AN,range:IDBKeyRange.only(Hv(r))},(a,s)=>{n={document:this.Cr(r,s),size:a3(s)}}).next(()=>n)}getEntries(e,r){let n=Sc();return this.Fr(e,r,(a,s)=>{const o=this.Cr(a,s);n=n.insert(a,o)}).next(()=>n)}Mr(e,r){let n=Sc(),a=new hs(_r.comparator);return this.Fr(e,r,(s,o)=>{const l=this.Cr(s,o);n=n.insert(s,l),a=a.insert(s,a3(o))}).next(()=>({documents:n,Or:a}))}Fr(e,r,n){if(r.isEmpty())return ft.resolve();let a=new Aa(wU);r.forEach(c=>a=a.add(c));const s=IDBKeyRange.bound(Hv(a.first()),Hv(a.last())),o=a.getIterator();let l=o.getNext();return Tm(e).ee({index:AN,range:s},(c,u,d)=>{const h=_r.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&wU(l,h)<0;)n(l,null),l=o.getNext();l&&l.isEqual(h)&&(n(l,u),l=o.hasNext()?o.getNext():null),l?d.j(Hv(l)):d.done()}).next(()=>{for(;l;)n(l,null),l=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,r,n,a,s){const o=r.path,l=[o.popLast().toArray(),o.lastSegment(),r3(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tm(e).J(IDBKeyRange.bound(l,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=Sc();for(const h of u){const p=this.Cr(_r.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(rw(r,p)||a.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,r,n,a){let s=Sc();const o=yU(r,n),l=yU(r,Fc.max());return Tm(e).ee({index:MJ,range:IDBKeyRange.bound(o,l,!0)},(c,u,d)=>{const h=this.Cr(_r.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===a&&d.done()}).next(()=>s)}newChangeBuffer(e){return new zye(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return bU(e).get(Rk).next(r=>(Vr(!!r,20021),r))}Dr(e,r){return bU(e).put(Rk,r)}Cr(e,r){if(r){const n=Sye(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Yr.min())))return n}return Ds.newInvalidDocument(e)}}function Xee(t){return new Uye(t)}class zye extends Kee{constructor(e,r){super(),this.Nr=e,this.trackRemovals=r,this.Br=new Eh(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const r=[];let n=0,a=new Aa((s,o)=>pn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const l=this.Br.get(s);if(r.push(this.Nr.removeEntry(e,s,l.readTime)),o.isValidDocument()){const c=rU(this.Nr.serializer,o);a=a.add(s.path.popLast());const u=a3(c);n+=u-l.size,r.push(this.Nr.addEntry(e,s,c))}else if(n-=l.size,this.trackRemovals){const c=rU(this.Nr.serializer,o.convertToNoDocument(Yr.min()));r.push(this.Nr.addEntry(e,s,c))}}),a.forEach(s=>{r.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))}),r.push(this.Nr.updateMetadata(e,n)),ft.waitFor(r)}getFromCache(e,r){return this.Nr.vr(e,r).next(n=>(this.Br.set(r,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,r){return this.Nr.Mr(e,r).next(({documents:n,Or:a})=>(a.forEach((s,o)=>{this.Br.set(s,{size:o,readTime:n.get(s).readTime})}),n))}}function bU(t){return Ri(t,Fb)}function Tm(t){return Ri(t,XE)}function Hv(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yU(t,e){const r=e.documentKey.path.toArray();return[t,r3(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function wU(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let s=0;s<r.length-2&&s<n.length-2;++s)if(a=pn(r[s],n[s]),a)return a;return a=pn(r.length,n.length),a||(a=pn(r[r.length-2],n[n.length-2]),a||pn(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vye{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yee{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,r))).next(a=>(n!==null&&Q2(n.mutation,a,xu.empty(),ea.now()),a))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,On()).next(()=>n))}getLocalViewOfDocuments(e,r,n=On()){const a=Cd();return this.populateOverlays(e,a,r).next(()=>this.computeViews(e,r,a,n).next(s=>{let o=y2();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=Cd();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,On()))}populateOverlays(e,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(e,a).next(s=>{s.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,a){let s=Sc();const o=Z2(),l=function(){return Z2()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof fm)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Q2(d.mutation,u,d.mutation.getFieldMask(),ea.now())):o.set(u.key,xu.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),r.forEach((u,d)=>l.set(u,new Vye(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,r){const n=Z2();let a=new hs((o,l)=>o-l),s=On();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||xu.empty();d=l.applyToLocalView(u,d),n.set(c,d);const h=(a.get(l.batchId)||On()).add(c);a=a.insert(l.batchId,h)})}).next(()=>{const o=[],l=a.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=hee();d.forEach(p=>{if(!s.has(p)){const g=bee(r.get(p),n.get(p));g!==null&&h.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ft.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,a){return function(o){return _r.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):lee(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next(s=>{const o=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-s.size):ft.resolve(Cd());let l=Pb,c=s;return o.next(u=>ft.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),s.get(d)?ft.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,On())).next(d=>({batchId:l,changes:fee(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new _r(r)).next(n=>{let a=y2();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const s=r.collectionGroup;let o=y2();return this.indexManager.getCollectionParents(e,s).next(l=>ft.forEach(l,c=>{const u=function(h,p){return new rv(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,a).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,s,a))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ds.newInvalidDocument(d)))});let l=y2();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Q2(d.mutation,u,xu.empty(),ea.now()),rw(r,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ye{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return ft.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:gl(a.createTime)}}(r)),ft.resolve()}getNamedQuery(e,r){return ft.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Fee(a.bundledQuery),readTime:gl(a.readTime)}}(r)),ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hye{constructor(){this.overlays=new hs(_r.comparator),this.qr=new Map}getOverlay(e,r){return ft.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Cd();return ft.forEach(r,a=>this.getOverlay(e,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((a,s)=>{this.St(e,r,s)}),ft.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),ft.resolve()}getOverlaysForCollection(e,r,n){const a=Cd(),s=r.length+1,o=new _r(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return ft.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let s=new hs((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Cd(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Cd(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=a)););return ft.resolve(l)}St(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const o=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new zR(r,n));let s=this.qr.get(r);s===void 0&&(s=On(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qye{constructor(){this.sessionToken=vi.EMPTY_BYTE_STRING}getSessionToken(e){return ft.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.Qr=new Aa(Wi.$r),this.Ur=new Aa(Wi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Wi(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Wi(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new _r(new ia([])),n=new Wi(r,e),a=new Wi(r,e+1),s=[];return this.Ur.forEachInRange([n,a],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new _r(new ia([])),n=new Wi(r,e),a=new Wi(r,e+1);let s=On();return this.Ur.forEachInRange([n,a],o=>{s=s.add(o.key)}),s}containsKey(e){const r=new Wi(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Wi{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return _r.comparator(e.key,r.key)||pn(e.Yr,r.Yr)}static Kr(e,r){return pn(e.Yr,r.Yr)||_r.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gye{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Aa(Wi.$r)}checkEmpty(e){return ft.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BR(s,r,n,a);this.mutationQueue.push(o);for(const l of a)this.Zr=this.Zr.add(new Wi(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ft.resolve(o)}lookupMutationBatch(e,r){return ft.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return ft.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ft.resolve(this.mutationQueue.length===0?up:this.tr-1)}getAllMutationBatches(e){return ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Wi(r,0),a=new Wi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],o=>{const l=this.Xr(o.Yr);s.push(l)}),ft.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Aa(pn);return r.forEach(a=>{const s=new Wi(a,0),o=new Wi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{n=n.add(l.Yr)})}),ft.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let s=n;_r.isDocumentKey(s)||(s=s.child(""));const o=new Wi(new _r(s),0);let l=new Aa(pn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(l=l.add(c.Yr)),!0)},o),ft.resolve(this.ti(l))}ti(e){const r=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(e,r){Vr(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return ft.forEach(r.mutations,a=>{const s=new Wi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Wi(r,0),a=this.Zr.firstAfterOrEqual(n);return ft.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ft.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wye{constructor(e){this.ri=e,this.docs=function(){return new hs(_r.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,o=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ft.resolve(n?n.document.mutableCopy():Ds.newInvalidDocument(r))}getEntries(e,r){let n=Sc();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Ds.newInvalidDocument(a))}),ft.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let s=Sc();const o=r.path,l=new _r(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jR(IJ(d),n)<=0||(a.has(d.key)||rw(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return ft.resolve(s)}getAllFromCollectionGroup(e,r,n,a){Rr(9500)}ii(e,r){return ft.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new Kye(this)}getSize(e){return ft.resolve(this.size)}}class Kye extends Kee{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),ft.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xye{constructor(e){this.persistence=e,this.si=new Eh(r=>Dp(r),ew),this.lastRemoteSnapshotVersion=Yr.min(),this.highestTargetId=0,this.oi=0,this._i=new GR,this.targetCount=0,this.ai=Fp.ur()}forEachTarget(e,r){return this.si.forEach((n,a)=>r(a)),ft.resolve()}getLastRemoteSnapshotVersion(e){return ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ft.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ft.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),ft.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Fp(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,ft.resolve()}updateTargetData(e,r){return this.Pr(r),ft.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,ft.resolve()}removeTargets(e,r,n){let a=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),a++)}),ft.waitFor(s).next(()=>a)}getTargetCount(e){return ft.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return ft.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),ft.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(o=>{s.push(a.markPotentiallyOrphaned(e,o))}),ft.waitFor(s)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),ft.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return ft.resolve(n)}containsKey(e,r){return ft.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,r){this.ui={},this.overlays={},this.ci=new gu(0),this.li=!1,this.li=!0,this.hi=new qye,this.referenceDelegate=e(this),this.Pi=new Xye(this),this.indexManager=new Pye,this.remoteDocumentCache=function(a){return new Wye(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Mee(r),this.Ii=new $ye(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Hye,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new Gye(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){cr("MemoryPersistence","Starting transaction:",e);const a=new Yye(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(e,r){return ft.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class Yye extends RJ{constructor(e){super(),this.currentSequenceNumber=e}}class EA{constructor(e){this.persistence=e,this.Ri=new GR,this.Vi=null}static mi(e){return new EA(e)}get fi(){if(this.Vi)return this.Vi;throw Rr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),ft.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),ft.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),ft.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ft.forEach(this.fi,n=>{const a=_r.fromPath(n);return this.gi(e,a).next(s=>{s||r.removeEntry(a,Yr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return ft.or([()=>ft.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class s3{constructor(e,r){this.persistence=e,this.pi=new Eh(n=>$o(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Wee(this,r)}static mi(e,r){return new s3(e,r)}Ei(){}di(e){return ft.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(a=>n+a))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return ft.forEach(this.pi,(n,a)=>this.br(e,n,a).next(s=>s?ft.resolve():r(a)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(e,o=>this.br(e,o,r).next(l=>{l||(n++,s.removeEntry(o,Yr.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),ft.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),ft.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),ft.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),ft.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=jN(e.data.value)),r}br(e,r,n){return ft.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const a=this.pi.get(r);return ft.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zye{constructor(e){this.serializer=e}k(e,r,n,a){const s=new dA("createOrUpgrade",r);n<1&&a>=1&&(function(c){c.createObjectStore(Jy)}(e),function(c){c.createObjectStore(Lb,{keyPath:lbe}),c.createObjectStore(Ku,{keyPath:OB,autoIncrement:!0}).createIndex(Ym,RB,{unique:!0}),c.createObjectStore(mx)}(e),_U(e),function(c){c.createObjectStore(Lm)}(e));let o=ft.resolve();return n<3&&a>=3&&(n!==0&&(function(c){c.deleteObjectStore(gx),c.deleteObjectStore(px),c.deleteObjectStore(dp)}(e),_U(e)),o=o.next(()=>function(c){const u=c.store(dp),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yr.min().toTimestamp(),targetCount:0};return u.put(YE,d)}(s))),n<4&&a>=4&&(n!==0&&(o=o.next(()=>function(c,u){return u.store(Ku).J().next(h=>{c.deleteObjectStore(Ku),c.createObjectStore(Ku,{keyPath:OB,autoIncrement:!0}).createIndex(Ym,RB,{unique:!0});const p=u.store(Ku),g=h.map(b=>p.put(b));return ft.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore(xx,{keyPath:xbe})})(e)})),n<5&&a>=5&&(o=o.next(()=>this.yi(s))),n<6&&a>=6&&(o=o.next(()=>(function(c){c.createObjectStore(Fb)}(e),this.wi(s)))),n<7&&a>=7&&(o=o.next(()=>this.Si(s))),n<8&&a>=8&&(o=o.next(()=>this.bi(e,s))),n<9&&a>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(o=o.next(()=>this.Di(s))),n<11&&a>=11&&(o=o.next(()=>{(function(c){c.createObjectStore(hA,{keyPath:vbe})})(e),function(c){c.createObjectStore(mA,{keyPath:bbe})}(e)})),n<12&&a>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore(pA,{keyPath:Sbe});u.createIndex(Dk,jbe,{unique:!1}),u.createIndex(UJ,Tbe,{unique:!1})})(e)})),n<13&&a>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore(XE,{keyPath:ube});u.createIndex(AN,dbe),u.createIndex(MJ,fbe)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Lm))),n<14&&a>=14&&(o=o.next(()=>this.Fi(e,s))),n<15&&a>=15&&(o=o.next(()=>function(c){c.createObjectStore(kR,{keyPath:ybe,autoIncrement:!0}).createIndex(Pk,wbe,{unique:!1}),c.createObjectStore(W2,{keyPath:_be}).createIndex(FJ,Nbe,{unique:!1}),c.createObjectStore(K2,{keyPath:Ebe}).createIndex(BJ,Abe,{unique:!1})}(e))),n<16&&a>=16&&(o=o.next(()=>{r.objectStore(W2).clear()}).next(()=>{r.objectStore(K2).clear()})),n<17&&a>=17&&(o=o.next(()=>{(function(c){c.createObjectStore(IR,{keyPath:Cbe})})(e)})),n<18&&a>=18&&wQ()&&(o=o.next(()=>{r.objectStore(W2).clear()}).next(()=>{r.objectStore(K2).clear()})),o}wi(e){let r=0;return e.store(Lm).ee((n,a)=>{r+=a3(a)}).next(()=>{const n={byteSize:r};return e.store(Fb).put(Rk,n)})}yi(e){const r=e.store(Lb),n=e.store(Ku);return r.J().next(a=>ft.forEach(a,s=>{const o=IDBKeyRange.bound([s.userId,up],[s.userId,s.lastAcknowledgedBatchId]);return n.J(Ym,o).next(l=>ft.forEach(l,c=>{Vr(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=Hm(this.serializer,c);return Vee(e,s.userId,u).next(()=>{})}))}))}Si(e){const r=e.store(gx),n=e.store(Lm);return e.store(dp).get(YE).next(a=>{const s=[];return n.ee((o,l)=>{const c=new ia(o),u=function(h){return[0,$o(h)]}(c);s.push(r.get(u).next(d=>d?ft.resolve():(h=>r.put({targetId:0,path:$o(h),sequenceNumber:a.highestListenSequenceNumber}))(c)))}).next(()=>ft.waitFor(s))})}bi(e,r){e.createObjectStore(Bb,{keyPath:gbe});const n=r.store(Bb),a=new qR,s=o=>{if(a.add(o)){const l=o.lastSegment(),c=o.popLast();return n.put({collectionId:l,parent:$o(c)})}};return r.store(Lm).ee({X:!0},(o,l)=>{const c=new ia(o);return s(c.popLast())}).next(()=>r.store(mx).ee({X:!0},([o,l,c],u)=>{const d=Td(l);return s(d.popLast())}))}Di(e){const r=e.store(px);return r.ee((n,a)=>{const s=_2(a),o=Lee(this.serializer,s);return r.put(o)})}Ci(e,r){const n=r.store(Lm),a=[];return n.ee((s,o)=>{const l=r.store(XE),c=function(h){return h.document?new _r(ia.fromString(h.document.name).popFirst(5)):h.noDocument?_r.fromSegments(h.noDocument.path):h.unknownDocument?_r.fromSegments(h.unknownDocument.path):Rr(36783)}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};a.push(l.put(u))}).next(()=>ft.waitFor(a))}Fi(e,r){const n=r.store(Ku),a=Xee(this.serializer),s=new WR(EA.mi,this.serializer.yt);return n.J().next(o=>{const l=new Map;return o.forEach(c=>{let u=l.get(c.userId)??On();Hm(this.serializer,c).keys().forEach(d=>u=u.add(d)),l.set(c.userId,u)}),ft.forEach(l,(c,u)=>{const d=new bo(u),h=_A.wt(this.serializer,d),p=s.getIndexManager(d),g=NA.wt(d,this.serializer,p,s.referenceDelegate);return new Yee(a,g,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Mk(r,gu.ce),c).next()})})}}function _U(t){t.createObjectStore(gx,{keyPath:mbe}).createIndex(CR,pbe,{unique:!0}),t.createObjectStore(px,{keyPath:"targetId"}).createIndex(LJ,hbe,{unique:!0}),t.createObjectStore(dp)}const $h="IndexedDbPersistence",jj=18e5,Tj=5e3,Cj="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Qye="main";class KR{constructor(e,r,n,a,s,o,l,c,u,d,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.Mi=s,this.window=o,this.document=l,this.xi=u,this.Oi=d,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=p=>Promise.resolve(),!KR.v())throw new pr(Mt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bye(this,a),this.$i=r+Qye,this.serializer=new Mee(c),this.Ui=new k0(this.$i,this.Ni,new Zye(this.serializer)),this.hi=new Tye,this.Pi=new Mye(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xee(this.serializer),this.Ii=new jye,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&dl($h,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new pr(Mt.FAILED_PRECONDITION,Cj);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new gu(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async r=>{r.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>W5(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(r=>{r||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(r=>this.isPrimary&&!r?this.Zi(e).next(()=>!1):!!r&&this.Xi(e).next(()=>!0))).catch(e=>{if(um(e))return cr($h,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return cr($h,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return qv(e).get(Ag).next(r=>ft.resolve(this.es(r)))}ts(e){return W5(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,jj)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const n=Ri(r,xx);return n.J().next(a=>{const s=this.ss(a,jj),o=a.filter(l=>s.indexOf(l)===-1);return ft.forEach(o,l=>n.delete(l.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ki)for(const r of e)this.Ki.removeItem(this._s(r.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ft.resolve(!0):qv(e).get(Ag).next(r=>{if(r!==null&&this.rs(r.leaseTimestampMs,Tj)&&!this.us(r.ownerId)){if(this.es(r)&&this.networkEnabled)return!0;if(!this.es(r)){if(!r.allowTabSynchronization)throw new pr(Mt.FAILED_PRECONDITION,Cj);return!1}}return!(!this.networkEnabled||!this.inForeground)||W5(e).J().next(n=>this.ss(n,Tj).find(a=>{if(this.clientId!==a.clientId){const s=!this.networkEnabled&&a.networkEnabled,o=!this.inForeground&&a.inForeground,l=this.networkEnabled===a.networkEnabled;if(s||o&&l)return!0}return!1})===void 0)}).next(r=>(this.isPrimary!==r&&cr($h,`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Jy,xx],e=>{const r=new Mk(e,gu.ce);return this.Zi(r).next(()=>this.ts(r))}),this.Ui.close(),this.Ps()}ss(e,r){return e.filter(n=>this.rs(n.updateTimeMs,r)&&!this.us(n.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>W5(e).J().next(r=>this.ss(r,jj).map(n=>n.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,r){return NA.wt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dye(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return _A.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,r,n){cr($h,"Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",s=function(c){return c===18?Obe:c===17?HJ:c===16?Ibe:c===15?OR:c===14?$J:c===13?VJ:c===12?kbe:c===11?zJ:void Rr(60245)}(this.Ni);let o;return this.Ui.runTransaction(e,a,s,l=>(o=new Mk(l,this.ci?this.ci.next():gu.ce),r==="readwrite-primary"?this.Hi(o).next(c=>!!c||this.Yi(o)).next(c=>{if(!c)throw dl(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new pr(Mt.FAILED_PRECONDITION,OJ);return n(o)}).next(c=>this.Xi(o).next(()=>c)):this.Is(o).next(()=>n(o)))).then(l=>(o.raiseOnCommittedEvent(),l))}Is(e){return qv(e).get(Ag).next(r=>{if(r!==null&&this.rs(r.leaseTimestampMs,Tj)&&!this.us(r.ownerId)&&!this.es(r)&&!(this.Oi||this.allowTabSynchronization&&r.allowTabSynchronization))throw new pr(Mt.FAILED_PRECONDITION,Cj)})}Xi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return qv(e).put(Ag,r)}static v(){return k0.v()}Zi(e){const r=qv(e);return r.get(Ag).next(n=>this.es(n)?(cr($h,"Releasing primary lease."),r.delete(Ag)):ft.resolve())}rs(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(dl(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const r=/(?:Version|Mobile)\/1[456]/;yQ()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var r;try{const n=((r=this.Ki)==null?void 0:r.getItem(this._s(e)))!==null;return cr($h,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return dl($h,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){dl("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function qv(t){return Ri(t,Jy)}function W5(t){return Ri(t,xx)}function Jye(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=a}static As(e,r){let n=On(),a=On();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new XR(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ewe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return yQ()?8:PJ(Oi())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,a){const s={result:null};return this.ys(e,r).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,r,a,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ewe;return this.Ss(e,r,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,r,o,l.size)})}).next(()=>s.result)}bs(e,r,n,a){return n.documentReadCount<this.fs?(Wg()<=Bn.DEBUG&&cr("QueryEngine","SDK will not create cache indexes for query:",Kg(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ft.resolve()):(Wg()<=Bn.DEBUG&&cr("QueryEngine","Query:",Kg(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Wg()<=Bn.DEBUG&&cr("QueryEngine","The SDK decides to create cache indexes for query:",Kg(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_u(r))):ft.resolve())}ys(e,r){if(GB(r))return ft.resolve(null);let n=_u(r);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=JE(r,null,"F"),n=_u(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const o=On(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.Ds(r,l);return this.Cs(r,u,o,c.readTime)?this.ys(e,JE(r,null,"F")):this.vs(e,u,r,c)}))})))}ws(e,r,n,a){return GB(r)||a.isEqual(Yr.min())?ft.resolve(null):this.ps.getDocuments(e,n).next(s=>{const o=this.Ds(r,s);return this.Cs(r,o,n,a)?ft.resolve(null):(Wg()<=Bn.DEBUG&&cr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Kg(r)),this.vs(e,o,r,tbe(a,Pb)).next(l=>l))})}Ds(e,r){let n=new Aa(uee(e));return r.forEach((a,s)=>{rw(e,s)&&(n=n.add(s))}),n}Cs(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const s=e.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(e,r,n){return Wg()<=Bn.DEBUG&&cr("QueryEngine","Using full collection scan to execute query:",Kg(r)),this.ps.getDocumentsMatchingQuery(e,r,Fc.min(),n)}vs(e,r,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(s=>(r.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="LocalStore",twe=3e8;class rwe{constructor(e,r,n,a){this.persistence=e,this.Fs=r,this.serializer=a,this.Ms=new hs(pn),this.xs=new Eh(s=>Dp(s),ew),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yee(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function Qee(t,e,r,n){return new rwe(t,e,r,n)}async function Jee(t,e){const r=hn(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let c=On();for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function nwe(t,e){const r=hn(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,p=h.keys();let g=ft.resolve();return p.forEach(b=>{g=g.next(()=>d.getEntry(c,b)).next(w=>{const _=u.docVersions.get(b);Vr(_!==null,48541),w.version.compareTo(_)<0&&(h.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),d.addEntry(w)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(r,n,e,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=On();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>r.localDocuments.getDocuments(n,a))})}function ete(t){const e=hn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function awe(t,e){const r=hn(t),n=e.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const l=[];e.targetChanges.forEach((d,h)=>{const p=a.get(h);if(!p)return;l.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,h)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(vi.EMPTY_BYTE_STRING,Yr.min()).withLastLimboFreeSnapshotVersion(Yr.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),a=a.insert(h,g),function(w,_,N){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=twe?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(p,g,d)&&l.push(r.Pi.updateTargetData(s,g))});let c=Sc(),u=On();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(swe(s,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Yr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(h=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(d)}return ft.waitFor(l).next(()=>o.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function swe(t,e,r){let n=On(),a=On();return r.forEach(s=>n=n.add(s)),e.getEntries(t,n).next(s=>{let o=Sc();return r.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(l)),c.isNoDocument()&&c.version.isEqual(Yr.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):cr(YR,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:a}})}function iwe(t,e){const r=hn(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=up),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function owe(t,e){const r=hn(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,e).next(s=>s?(a=s,ft.resolve(a)):r.Pi.allocateTargetId(n).next(o=>(a=new Mf(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Yk(t,e,r){const n=hn(t),a=n.Ms.get(e),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,a))}catch(o){if(!um(o))throw o;cr(YR,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function NU(t,e,r){const n=hn(t);let a=Yr.min(),s=On();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const h=hn(c),p=h.xs.get(d);return p!==void 0?ft.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,d)}(n,o,_u(e)).next(l=>{if(l)return a=l.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(o,e,r?a:Yr.min(),r?s:On())).next(l=>(lwe(n,Wbe(e),l),{documents:l,Qs:s})))}function lwe(t,e,r){let n=t.Os.get(e)||Yr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),t.Os.set(e,n)}class EU{constructor(){this.activeTargetIds=Jbe()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tte{constructor(){this.Mo=new EU,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new EU,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cwe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="ConnectivityMonitor";class SU{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){cr(AU,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){cr(AU,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K5=null;function Zk(){return K5===null?K5=function(){return 268435456+Math.round(2147483648*Math.random())}():K5++,"0x"+K5.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="RestConnection",uwe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dwe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===zb?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,r,n,a,s){const o=Zk(),l=this.zo(e,r.toUriEncodedString());cr(kj,`Sending RPC '${e}' ${o}:`,l,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(l),d=Nh(u);return this.Jo(e,l,c,n,d).then(h=>(cr(kj,`Received RPC '${e}' ${o}: `,h),h),h=>{throw fx(kj,`RPC '${e}' ${o} failed with error: `,h,"url: ",l,"request:",n),h})}Ho(e,r,n,a,s,o){return this.Go(e,r,n,a,s)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tv}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>e[s]=a),n&&n.headers.forEach((a,s)=>e[s]=a)}zo(e,r){const n=uwe[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fwe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="WebChannelConnection";class hwe extends dwe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,a,s){const o=Zk();return new Promise((l,c)=>{const u=new wJ;u.setWithCredentials(!0),u.listenOnce(_J.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _N.NO_ERROR:const h=u.getResponseJson();cr(Ro,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),l(h);break;case _N.TIMEOUT:cr(Ro,`RPC '${e}' ${o} timed out`),c(new pr(Mt.DEADLINE_EXCEEDED,"Request time out"));break;case _N.HTTP_ERROR:const p=u.getStatus();if(cr(Ro,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const w=function(N){const S=N.toLowerCase().replace(/_/g,"-");return Object.values(Mt).indexOf(S)>=0?S:Mt.UNKNOWN}(b.status);c(new pr(w,b.message))}else c(new pr(Mt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new pr(Mt.UNAVAILABLE,"Connection failed."));break;default:Rr(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{cr(Ro,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(a);cr(Ro,`RPC '${e}' ${o} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(e,r,n){const a=Zk(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=AJ(),l=EJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");cr(Ro,`Creating RPC '${e}' stream ${a}: ${d}`,c);const h=o.createWebChannel(d,c);this.I_(h);let p=!1,g=!1;const b=new fwe({Yo:_=>{g?cr(Ro,`Not sending because RPC '${e}' stream ${a} is closed:`,_):(p||(cr(Ro,`Opening RPC '${e}' stream ${a} transport.`),h.open(),p=!0),cr(Ro,`RPC '${e}' stream ${a} sending:`,_),h.send(_))},Zo:()=>h.close()}),w=(_,N,S)=>{_.listen(N,T=>{try{S(T)}catch(R){setTimeout(()=>{throw R},0)}})};return w(h,b2.EventType.OPEN,()=>{g||(cr(Ro,`RPC '${e}' stream ${a} transport opened.`),b.o_())}),w(h,b2.EventType.CLOSE,()=>{g||(g=!0,cr(Ro,`RPC '${e}' stream ${a} transport closed`),b.a_(),this.E_(h))}),w(h,b2.EventType.ERROR,_=>{g||(g=!0,fx(Ro,`RPC '${e}' stream ${a} transport errored. Name:`,_.name,"Message:",_.message),b.a_(new pr(Mt.UNAVAILABLE,"The operation could not be completed")))}),w(h,b2.EventType.MESSAGE,_=>{var N;if(!g){const S=_.data[0];Vr(!!S,16349);const T=S,R=(T==null?void 0:T.error)||((N=T[0])==null?void 0:N.error);if(R){cr(Ro,`RPC '${e}' stream ${a} received error:`,R);const z=R.status;let G=function(I){const V=si[I];if(V!==void 0)return _ee(V)}(z),O=R.message;G===void 0&&(G=Mt.INTERNAL,O="Unknown error status: "+z+" with message "+R.message),g=!0,b.a_(new pr(G,O)),h.close()}else cr(Ro,`RPC '${e}' stream ${a} received:`,S),b.u_(S)}}),w(l,NJ.STAT_EVENT,_=>{_.stat===kk.PROXY?cr(Ro,`RPC '${e}' stream ${a} detected buffering proxy`):_.stat===kk.NOPROXY&&cr(Ro,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mwe(){return typeof window<"u"?window:null}function ON(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){return new gye(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte{constructor(e,r,n=1e3,a=1.5,s=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&cr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="PersistentStream";class nte{constructor(e,r,n,a,s,o,l,c){this.Mi=e,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rte(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===Mt.RESOURCE_EXHAUSTED?(dl(r.toString()),dl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{e(()=>{const a=new pr(Mt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return cr(jU,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(cr(jU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pwe extends nte{constructor(e,r,n,a,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=bye(this.serializer,e),n=function(s){if(!("targetChange"in s))return Yr.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Yr.min():o.readTime?gl(o.readTime):Yr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=qk(this.serializer),r.addTarget=function(s,o){let l;const c=o.target;if(l=ZE(c)?{documents:kee(s,c)}:{query:Iee(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Aee(s,o.resumeToken);const u=$k(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Yr.min())>0){l.readTime=Ex(s,o.snapshotVersion.toTimestamp());const u=$k(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=wye(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=qk(this.serializer),r.removeTarget=e,this.q_(r)}}class gwe extends nte{constructor(e,r,n,a,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Vr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vr(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Vr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=yye(e.writeResults,e.commitTime),n=gl(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=qk(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>t3(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xwe{}class vwe extends xwe{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pr(Mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Hk(r,n),a,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pr(Mt.UNKNOWN,s.toString())})}Ho(e,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Hk(r,n),a,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pr(Mt.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class bwe{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dl(r),this.aa=!1):cr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="RemoteStore";class ywe{constructor(e,r,n,a,s){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{n.enqueueAndForget(async()=>{cg(this)&&(cr(Bp,"Restarting streams for network reachability change."),await async function(c){const u=hn(c);u.Ea.add(4),await iw(u),u.Ra.set("Unknown"),u.Ea.delete(4),await sw(u)}(this))})}),this.Ra=new bwe(n,a)}}async function sw(t){if(cg(t))for(const e of t.da)await e(!0)}async function iw(t){for(const e of t.da)await e(!1)}function ate(t,e){const r=hn(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),eP(r)?JR(r):nv(r).O_()&&QR(r,e))}function ZR(t,e){const r=hn(t),n=nv(r);r.Ia.delete(e),n.O_()&&ste(r,e),r.Ia.size===0&&(n.O_()?n.L_():cg(r)&&r.Ra.set("Unknown"))}function QR(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Yr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}nv(t).Y_(e)}function ste(t,e){t.Va.Ue(e),nv(t).Z_(e)}function JR(t){t.Va=new fye({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nv(t).start(),t.Ra.ua()}function eP(t){return cg(t)&&!nv(t).x_()&&t.Ia.size>0}function cg(t){return hn(t).Ea.size===0}function ite(t){t.Va=void 0}async function wwe(t){t.Ra.set("Online")}async function _we(t){t.Ia.forEach((e,r)=>{QR(t,e)})}async function Nwe(t,e){ite(t),eP(t)?(t.Ra.ha(e),JR(t)):t.Ra.set("Unknown")}async function Ewe(t,e,r){if(t.Ra.set("Online"),e instanceof Eee&&e.state===2&&e.cause)try{await async function(a,s){const o=s.cause;for(const l of s.targetIds)a.Ia.has(l)&&(await a.remoteSyncer.rejectListen(l,o),a.Ia.delete(l),a.Va.removeTarget(l))}(t,e)}catch(n){cr(Bp,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await i3(t,n)}else if(e instanceof kN?t.Va.Ze(e):e instanceof Nee?t.Va.st(e):t.Va.tt(e),!r.isEqual(Yr.min()))try{const n=await ete(t.localStore);r.compareTo(n)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(vi.EMPTY_BYTE_STRING,d.snapshotVersion)),ste(s,c);const h=new Mf(d.target,c,u,d.sequenceNumber);QR(s,h)}),s.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){cr(Bp,"Failed to raise snapshot:",n),await i3(t,n)}}async function i3(t,e,r){if(!um(e))throw e;t.Ea.add(1),await iw(t),t.Ra.set("Offline"),r||(r=()=>ete(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{cr(Bp,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await sw(t)})}function ote(t,e){return e().catch(r=>i3(t,r,e))}async function ow(t){const e=hn(t),r=q0(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:up;for(;Awe(e);)try{const a=await iwe(e.localStore,n);if(a===null){e.Ta.length===0&&r.L_();break}n=a.batchId,Swe(e,a)}catch(a){await i3(e,a)}lte(e)&&cte(e)}function Awe(t){return cg(t)&&t.Ta.length<10}function Swe(t,e){t.Ta.push(e);const r=q0(t);r.O_()&&r.X_&&r.ea(e.mutations)}function lte(t){return cg(t)&&!q0(t).x_()&&t.Ta.length>0}function cte(t){q0(t).start()}async function jwe(t){q0(t).ra()}async function Twe(t){const e=q0(t);for(const r of t.Ta)e.ea(r.mutations)}async function Cwe(t,e,r){const n=t.Ta.shift(),a=UR.from(n,e,r);await ote(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await ow(t)}async function kwe(t,e){e&&q0(t).X_&&await async function(n,a){if(function(o){return cye(o)&&o!==Mt.ABORTED}(a.code)){const s=n.Ta.shift();q0(n).B_(),await ote(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await ow(n)}}(t,e),lte(t)&&cte(t)}async function TU(t,e){const r=hn(t);r.asyncQueue.verifyOperationInProgress(),cr(Bp,"RemoteStore received new credentials");const n=cg(r);r.Ea.add(3),await iw(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await sw(r)}async function Iwe(t,e){const r=hn(t);e?(r.Ea.delete(2),await sw(r)):e||(r.Ea.add(2),await iw(r),r.Ra.set("Unknown"))}function nv(t){return t.ma||(t.ma=function(r,n,a){const s=hn(r);return s.sa(),new pwe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:wwe.bind(null,t),t_:_we.bind(null,t),r_:Nwe.bind(null,t),H_:Ewe.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),eP(t)?JR(t):t.Ra.set("Unknown")):(await t.ma.stop(),ite(t))})),t.ma}function q0(t){return t.fa||(t.fa=function(r,n,a){const s=hn(r);return s.sa(),new gwe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:jwe.bind(null,t),r_:kwe.bind(null,t),ta:Twe.bind(null,t),na:Cwe.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ow(t)):(await t.fa.stop(),t.Ta.length>0&&(cr(Bp,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,r,n,a,s){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new $f,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,s){const o=Date.now()+n,l=new tP(e,r,o,a,s);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pr(Mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rP(t,e){if(dl("AsyncQueue",`${e}: ${t}`),um(t))return new pr(Mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{static emptySet(e){return new L1(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||_r.comparator(r.key,n.key):(r,n)=>_r.comparator(r.key,n.key),this.keyedMap=y2(),this.sortedSet=new hs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof L1)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new L1;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(){this.ga=new hs(_r.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Rr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Ax{constructor(e,r,n,a,s,o,l,c,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,a,s){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Ax(e,r,L1.emptySet(r),o,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Owe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Rwe{constructor(){this.queries=kU(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=hn(r),s=a.queries;a.queries=kU(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(n)})})(this,new pr(Mt.ABORTED,"Firestore shutting down"))}}function kU(){return new Eh(t=>cee(t),vA)}async function ute(t,e){const r=hn(t);let n=3;const a=e.query;let s=r.queries.get(a);s?!s.ba()&&e.Da()&&(n=2):(s=new Owe,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(o){const l=rP(o,`Initialization of query '${Kg(e.query)}' failed`);return void e.onError(l)}r.queries.set(a,s),s.Sa.push(e),e.va(r.onlineState),s.wa&&e.Fa(s.wa)&&nP(r)}async function dte(t,e){const r=hn(t),n=e.query;let a=3;const s=r.queries.get(n);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?a=e.Da()?0:1:!s.ba()&&e.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Pwe(t,e){const r=hn(t);let n=!1;for(const a of e){const s=a.query,o=r.queries.get(s);if(o){for(const l of o.Sa)l.Fa(a)&&(n=!0);o.wa=a}}n&&nP(r)}function Dwe(t,e,r){const n=hn(t),a=n.queries.get(e);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(e)}function nP(t){t.Ca.forEach(e=>{e.next()})}var Qk,IU;(IU=Qk||(Qk={})).Ma="default",IU.Cache="cache";class fte{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Ax(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Ax.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qk.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hte{constructor(e){this.key=e}}class mte{constructor(e){this.key=e}}class Mwe{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=On(),this.mutatedKeys=On(),this.eu=uee(e),this.tu=new L1(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new CU,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,o=a,l=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,h)=>{const p=a.get(d),g=rw(this.query,h)?h:null,b=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?b!==w&&(n.track({type:3,doc:g}),_=!0):this.su(p,g)||(n.track({type:2,doc:g}),_=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(n.track({type:0,doc:g}),_=!0):p&&!g&&(n.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(g?(o=o.add(g),s=w?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:o,iu:n,Cs:l,mutatedKeys:s}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(g,b){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rr(20277,{Rt:_})}};return w(g)-w(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),a=a??!1;const l=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Ax(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CU,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=On(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new mte(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new hte(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=On();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Ax.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const aP="SyncEngine";class Lwe{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Fwe{constructor(e){this.key=e,this.hu=!1}}class Bwe{constructor(e,r,n,a,s,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Eh(l=>cee(l),vA),this.Iu=new Map,this.Eu=new Set,this.du=new hs(_r.comparator),this.Au=new Map,this.Ru=new GR,this.Vu={},this.mu=new Map,this.fu=Fp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Uwe(t,e,r=!0){const n=yte(t);let a;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await pte(n,e,r,!0),a}async function zwe(t,e){const r=yte(t);await pte(r,e,!0,!1)}async function pte(t,e,r,n){const a=await owe(t.localStore,_u(e)),s=a.targetId,o=t.sharedClientState.addLocalQueryTarget(s,r);let l;return n&&(l=await Vwe(t,e,s,o==="current",a.resumeToken)),t.isPrimaryClient&&r&&ate(t.remoteStore,a),l}async function Vwe(t,e,r,n,a){t.pu=(h,p,g)=>async function(w,_,N,S){let T=_.view.ru(N);T.Cs&&(T=await NU(w.localStore,_.query,!1).then(({documents:O})=>_.view.ru(O,T)));const R=S&&S.targetChanges.get(_.targetId),z=S&&S.targetMismatches.get(_.targetId)!=null,G=_.view.applyChanges(T,w.isPrimaryClient,R,z);return RU(w,_.targetId,G.au),G.snapshot}(t,h,p,g);const s=await NU(t.localStore,e,!0),o=new Mwe(e,s.Qs),l=o.ru(s.documents),c=aw.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),u=o.applyChanges(l,t.isPrimaryClient,c);RU(t,r,u.au);const d=new Lwe(e,r,o);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function $we(t,e,r){const n=hn(t),a=n.Tu.get(e),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(o=>!vA(o,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Yk(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&ZR(n.remoteStore,a.targetId),Jk(n,a.targetId)}).catch(lg)):(Jk(n,a.targetId),await Yk(n.localStore,a.targetId,!0))}async function Hwe(t,e){const r=hn(t),n=r.Tu.get(e),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),ZR(r.remoteStore,n.targetId))}async function qwe(t,e,r){const n=wte(t);try{const a=await function(o,l){const c=hn(o),u=ea.now(),d=l.reduce((g,b)=>g.add(b.key),On());let h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Sc(),w=On();return c.Ns.getEntries(g,d).next(_=>{b=_,b.forEach((N,S)=>{S.isValidDocument()||(w=w.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(_=>{h=_;const N=[];for(const S of l){const T=oye(S,h.get(S.key).overlayedDocument);T!=null&&N.push(new fm(S.key,T,eee(T.value.mapValue),jc.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,N,l)}).next(_=>{p=_;const N=_.applyToLocalDocumentSet(h,w);return c.documentOverlayCache.saveOverlays(g,_.batchId,N)})}).then(()=>({batchId:p.batchId,changes:fee(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new hs(pn)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(n,a.batchId,r),await lw(n,a.changes),await ow(n.remoteStore)}catch(a){const s=rP(a,"Failed to persist write");r.reject(s)}}async function gte(t,e){const r=hn(t);try{const n=await awe(r.localStore,e);e.targetChanges.forEach((a,s)=>{const o=r.Au.get(s);o&&(Vr(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?o.hu=!0:a.modifiedDocuments.size>0?Vr(o.hu,14607):a.removedDocuments.size>0&&(Vr(o.hu,42227),o.hu=!1))}),await lw(r,n,e)}catch(n){await lg(n)}}function OU(t,e,r){const n=hn(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&a.push(l.snapshot)}),function(o,l){const c=hn(o);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const p of h.Sa)p.va(l)&&(u=!0)}),u&&nP(c)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Gwe(t,e,r){const n=hn(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Au.get(e),s=a&&a.key;if(s){let o=new hs(_r.comparator);o=o.insert(s,Ds.newNoDocument(s,Yr.min()));const l=On().add(s),c=new wA(Yr.min(),new Map,new hs(pn),o,l);await gte(n,c),n.du=n.du.remove(s),n.Au.delete(e),sP(n)}else await Yk(n.localStore,e,!1).then(()=>Jk(n,e,r)).catch(lg)}async function Wwe(t,e){const r=hn(t),n=e.batch.batchId;try{const a=await nwe(r.localStore,e);vte(r,n,null),xte(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await lw(r,a)}catch(a){await lg(a)}}async function Kwe(t,e,r){const n=hn(t);try{const a=await function(o,l){const c=hn(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(Vr(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);vte(n,e,r),xte(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await lw(n,a)}catch(a){await lg(a)}}function xte(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function vte(t,e,r){const n=hn(t);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(e);s&&(r?s.reject(r):s.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function Jk(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||bte(t,n)})}function bte(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(ZR(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),sP(t))}function RU(t,e,r){for(const n of r)n instanceof hte?(t.Ru.addReference(n.key,e),Xwe(t,n)):n instanceof mte?(cr(aP,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||bte(t,n.key)):Rr(19791,{wu:n})}function Xwe(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(cr(aP,"New document in limbo: "+r),t.Eu.add(n),sP(t))}function sP(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new _r(ia.fromString(e)),n=t.fu.next();t.Au.set(n,new Fwe(r)),t.du=t.du.insert(r,n),ate(t.remoteStore,new Mf(_u(tw(r.path)),n,"TargetPurposeLimboResolution",gu.ce))}}async function lw(t,e,r){const n=hn(t),a=[],s=[],o=[];n.Tu.isEmpty()||(n.Tu.forEach((l,c)=>{o.push(n.pu(c,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){a.push(u);const h=XR.As(c.targetId,u);s.push(h)}}))}),await Promise.all(o),n.Pu.H_(a),await async function(c,u){const d=hn(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ft.forEach(u,p=>ft.forEach(p.Es,g=>d.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>ft.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!um(h))throw h;cr(YR,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const g=d.Ms.get(p),b=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(p,w)}}}(n.localStore,s))}async function Ywe(t,e){const r=hn(t);if(!r.currentUser.isEqual(e)){cr(aP,"User change. New user:",e.toKey());const n=await Jee(r.localStore,e);r.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new pr(Mt.CANCELLED,o))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await lw(r,n.Ls)}}function Zwe(t,e){const r=hn(t),n=r.Au.get(e);if(n&&n.hu)return On().add(n.key);{let a=On();const s=r.Iu.get(e);if(!s)return a;for(const o of s){const l=r.Tu.get(o);a=a.unionWith(l.view.nu)}return a}}function yte(t){const e=hn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gte.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zwe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gwe.bind(null,e),e.Pu.H_=Pwe.bind(null,e.eventManager),e.Pu.yu=Dwe.bind(null,e.eventManager),e}function wte(t){const e=hn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Wwe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kwe.bind(null,e),e}class Kb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=AA(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return Qee(this.persistence,new Zee,e.initialUser,this.serializer)}Cu(e){return new WR(EA.mi,this.serializer)}Du(e){return new tte}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kb.provider={build:()=>new Kb};class Qwe extends Kb{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Vr(this.persistence.referenceDelegate instanceof s3,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Gee(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Bo.withCacheSize(this.cacheSizeBytes):Bo.DEFAULT;return new WR(n=>s3.mi(n,r),this.serializer)}}class Jwe extends Kb{constructor(e,r,n){super(),this.xu=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await wte(this.xu.syncEngine),await ow(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return Qee(this.persistence,new Zee,e.initialUser,this.serializer)}Fu(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new Gee(n,e.asyncQueue,r)}Mu(e,r){const n=new sbe(r,this.persistence);return new abe(e.asyncQueue,n)}Cu(e){const r=Jye(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Bo.withCacheSize(this.cacheSizeBytes):Bo.DEFAULT;return new KR(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,mwe(),ON(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new tte}}class o3{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>OU(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ywe.bind(null,this.syncEngine),await Iwe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Rwe}()}createDatastore(e){const r=AA(e.databaseInfo.databaseId),n=function(s){return new hwe(s)}(e.databaseInfo);return function(s,o,l,c){return new vwe(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,a,s,o,l){return new ywe(n,a,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>OU(this.syncEngine,r,0),function(){return SU.v()?new SU:new cwe}())}createSyncEngine(e,r){return function(a,s,o,l,c,u,d){const h=new Bwe(a,s,o,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(a){const s=hn(a);cr(Bp,"RemoteStore shutting down."),s.Ea.add(5),await iw(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}o3.provider={build:()=>new o3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _te{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="FirestoreClient";class e5e{constructor(e,r,n,a,s){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=bo.UNAUTHENTICATED,this.clientId=SR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async o=>{cr(G0,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(cr(G0,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $f;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=rP(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ij(t,e){t.asyncQueue.verifyOperationInProgress(),cr(G0,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async a=>{n.isEqual(a)||(await Jee(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PU(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Nte(t);cr(G0,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>TU(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,a)=>TU(e.remoteStore,a)),t._onlineComponents=e}async function Nte(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){cr(G0,"Using user provided OfflineComponentProvider");try{await Ij(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(a){return a.name==="FirebaseError"?a.code===Mt.FAILED_PRECONDITION||a.code===Mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;fx("Error using user provided cache. Falling back to memory cache: "+r),await Ij(t,new Kb)}}else cr(G0,"Using default OfflineComponentProvider"),await Ij(t,new Qwe(void 0));return t._offlineComponents}async function iP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(cr(G0,"Using user provided OnlineComponentProvider"),await PU(t,t._uninitializedComponentsProvider._online)):(cr(G0,"Using default OnlineComponentProvider"),await PU(t,new o3))),t._onlineComponents}function t5e(t){return Nte(t).then(e=>e.persistence)}function r5e(t){return iP(t).then(e=>e.remoteStore)}function n5e(t){return iP(t).then(e=>e.syncEngine)}async function e8(t){const e=await iP(t),r=e.eventManager;return r.onListen=Uwe.bind(null,e.syncEngine),r.onUnlisten=$we.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=zwe.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Hwe.bind(null,e.syncEngine),r}function a5e(t){return t.asyncQueue.enqueue(async()=>{const e=await t5e(t),r=await r5e(t);return e.setNetworkEnabled(!0),function(a){const s=hn(a);return s.Ea.delete(0),sw(s)}(r)})}function s5e(t,e,r={}){const n=new $f;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new _te({next:p=>{d.Nu(),o.enqueueAndForget(()=>dte(s,h));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new pr(Mt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new pr(Mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new fte(tw(l.path),d,{includeMetadataChanges:!0,qa:!0});return ute(s,h)}(await e8(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ete(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ate="firestore.googleapis.com",MU=!0;class LU{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pr(Mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ate,this.ssl=MU}else this.host=e.host,this.ssl=e.ssl??MU;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zee;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qee)throw new pr(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J2e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ete(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new pr(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new pr(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new pr(Mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class SA{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LU({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pr(Mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pr(Mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LU(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new $2e;switch(n.type){case"firstParty":return new W2e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new pr(Mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=DU.get(r);n&&(cr("ComponentProvider","Removing Datastore"),DU.delete(r),n.terminate())}(this),Promise.resolve()}}function i5e(t,e,r,n={}){var u;t=Hf(t,SA);const a=Nh(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;a&&(nA(`https://${l}`),hR("Firestore",!0)),s.host!==Ate&&s.host!==l&&fx("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:a,emulatorOptions:n};if(!U0(c,o)&&(t._setSettings(c),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=bo.MOCK_USER;else{d=vQ(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=n.mockUserToken.sub||n.mockUserToken.user_id;if(!p)throw new pr(Mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new bo(p)}t._authCredentials=new H2e(new jJ(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hm(this.firestore,e,this._query)}}class Ys{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new I0(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ys(this.firestore,e,this._key)}toJSON(){return{type:Ys._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(Qy(r,Ys._jsonSchema))return new Ys(e,n||null,new _r(ia.fromString(r.referencePath)))}}Ys._jsonSchemaVersion="firestore/documentReference/1.0",Ys._jsonSchema={type:fi("string",Ys._jsonSchemaVersion),referencePath:fi("string")};class I0 extends hm{constructor(e,r,n){super(e,r,tw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ys(this.firestore,null,new _r(e))}withConverter(e){return new I0(this.firestore,e,this._path)}}function jA(t,e,...r){if(t=Ns(t),CJ("collection","path",e),t instanceof SA){const n=ia.fromString(e,...r);return jB(n),new I0(t,null,n)}{if(!(t instanceof Ys||t instanceof I0))throw new pr(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ia.fromString(e,...r));return jB(n),new I0(t.firestore,null,n)}}function l3(t,e,...r){if(t=Ns(t),arguments.length===1&&(e=SR.newId()),CJ("doc","path",e),t instanceof SA){const n=ia.fromString(e,...r);return SB(n),new Ys(t,null,new _r(n))}{if(!(t instanceof Ys||t instanceof I0))throw new pr(Mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ia.fromString(e,...r));return SB(n),new Ys(t.firestore,t instanceof I0?t.converter:null,new _r(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="AsyncQueue";class BU{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rte(this,"async_queue_retry"),this._c=()=>{const n=ON();n&&cr(FU,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=ON();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=ON();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new $f;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!um(e))throw e;cr(FU,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,dl("INTERNAL UNHANDLED ERROR: ",UU(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const a=tP.createAndSchedule(this,e,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Rr(47125,{Pc:UU(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function UU(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Sx extends SA{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new BU,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new BU(e),this._firestoreClient=void 0,await e}}}function o5e(t,e,r){r||(r=zb);const n=Ky(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),s=n.getOptions(r);if(U0(s,e))return a;throw new pr(Mt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new pr(Mt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qee)throw new pr(Mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Nh(e.host)&&nA(e.host),n.initialize({options:e,instanceIdentifier:r})}function l5e(t,e){const r=typeof t=="object"?t:gR(),n=typeof t=="string"?t:zb,a=Ky(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=pQ("firestore");s&&i5e(a,...s)}return a}function TA(t){if(t._terminated)throw new pr(Mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||c5e(t),t._firestoreClient}function c5e(t){var n,a,s;const e=t._freezeSettings(),r=function(l,c,u,d){return new Pbe(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ete(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new e5e(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function Dut(t){return a5e(TA(t=Hf(t,Sx)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hu(vi.fromBase64String(e))}catch(r){throw new pr(Mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new hu(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qy(e,hu._jsonSchema))return hu.fromBase64String(e.bytes)}}hu._jsonSchemaVersion="firestore/bytes/1.0",hu._jsonSchema={type:fi("string",hu._jsonSchemaVersion),bytes:fi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new pr(Mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ys(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new pr(Mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new pr(Mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pn(this._lat,e._lat)||pn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bd._jsonSchemaVersion}}static fromJSON(e){if(Qy(e,Bd._jsonSchema))return new Bd(e.latitude,e.longitude)}}Bd._jsonSchemaVersion="firestore/geoPoint/1.0",Bd._jsonSchema={type:fi("string",Bd._jsonSchemaVersion),latitude:fi("number"),longitude:fi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ud._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qy(e,Ud._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Ud(e.vectorValues);throw new pr(Mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ud._jsonSchemaVersion="firestore/vectorValue/1.0",Ud._jsonSchema={type:fi("string",Ud._jsonSchemaVersion),vectorValues:fi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5e=/^__.*__$/;class Ste{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new fm(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function jte(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rr(40011,{Ac:t})}}class lP{constructor(e,r,n,a,s,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lP({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var a;const r=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return c3(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jte(this.Ac)&&u5e.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class d5e{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||AA(e)}Cc(e,r,n,a=!1){return new lP({Ac:e,methodName:r,Dc:n,path:ys.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tte(t){const e=t._freezeSettings(),r=AA(t._databaseId);return new d5e(t._databaseId,!!e.ignoreUndefinedProperties,r)}class kA extends oP{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kA}}function f5e(t,e,r,n){const a=t.Cc(1,e,r);kte("Data must be an object, but it was:",a,n);const s=[],o=fl.empty();dm(n,(c,u)=>{const d=cP(e,c,r);u=Ns(u);const h=a.yc(d);if(u instanceof kA)s.push(d);else{const p=cw(u,h);p!=null&&(s.push(d),o.set(d,p))}});const l=new xu(s);return new Ste(o,l,a.fieldTransforms)}function h5e(t,e,r,n,a,s){const o=t.Cc(1,e,r),l=[VU(e,n,r)],c=[a];if(s.length%2!=0)throw new pr(Mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(VU(e,s[p])),c.push(s[p+1]);const u=[],d=fl.empty();for(let p=l.length-1;p>=0;--p)if(!x5e(u,l[p])){const g=l[p];let b=c[p];b=Ns(b);const w=o.yc(g);if(b instanceof kA)u.push(g);else{const _=cw(b,w);_!=null&&(u.push(g),d.set(g,_))}}const h=new xu(u);return new Ste(d,h,o.fieldTransforms)}function m5e(t,e,r,n=!1){return cw(r,t.Cc(n?4:3,e))}function cw(t,e){if(Cte(t=Ns(t)))return kte("Unsupported field value:",e,t),p5e(t,e);if(t instanceof oP)return function(n,a){if(!jte(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const s=[];let o=0;for(const l of n){let c=cw(l,a.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(n,a){if((n=Ns(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return eye(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ea.fromDate(n);return{timestampValue:Ex(a.serializer,s)}}if(n instanceof ea){const s=new ea(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ex(a.serializer,s)}}if(n instanceof Bd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof hu)return{bytesValue:Aee(a.serializer,n._byteString)};if(n instanceof Ys){const s=a.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw a.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$R(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Ud)return function(o,l){return{mapValue:{fields:{[PR]:{stringValue:DR},[vx]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return LR(l.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${uA(n)}`)}(t,e)}function p5e(t,e){const r={};return qJ(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dm(t,(n,a)=>{const s=cw(a,e.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function Cte(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ea||t instanceof Bd||t instanceof hu||t instanceof Ys||t instanceof oP||t instanceof Ud)}function kte(t,e,r){if(!Cte(r)||!kJ(r)){const n=uA(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function VU(t,e,r){if((e=Ns(e))instanceof CA)return e._internalPath;if(typeof e=="string")return cP(t,e);throw c3("Field path arguments must be of type string or ",t,!1,void 0,r)}const g5e=new RegExp("[~\\*/\\[\\]]");function cP(t,e,r){if(e.search(g5e)>=0)throw c3(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new CA(...e.split("."))._internalPath}catch{throw c3(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function c3(t,e,r,n,a){const s=n&&!n.isEmpty(),o=a!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${n}`),o&&(c+=` in document ${a}`),c+=")"),new pr(Mt.INVALID_ARGUMENT,l+t+c)}function x5e(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ite{constructor(e,r,n,a,s){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ys(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v5e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(IA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class v5e extends Ite{data(){return super.data()}}function IA(t,e){return typeof e=="string"?cP(t,e):e instanceof CA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5e(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pr(Mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uP{}class dP extends uP{}function mu(t,e,...r){let n=[];e instanceof uP&&n.push(e),n=n.concat(r),function(s){const o=s.filter(c=>c instanceof fP).length,l=s.filter(c=>c instanceof OA).length;if(o>1||o>0&&l>0)throw new pr(Mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)t=a._apply(t);return t}class OA extends dP{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new OA(e,r,n)}_apply(e){const r=this._parse(e);return Ote(e._query,r),new hm(e.firestore,e.converter,Vk(e._query,r))}_parse(e){const r=Tte(e.firestore);return function(s,o,l,c,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new pr(Mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HU(h,d);const b=[];for(const w of h)b.push($U(c,s,w));p={arrayValue:{values:b}}}else p=$U(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HU(h,d),p=m5e(l,o,h,d==="in"||d==="not-in");return zn.create(u,d,p)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function O0(t,e,r){const n=e,a=IA("where",t);return OA._create(a,n,r)}class fP extends uP{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new fP(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Na.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(a,s){let o=a;const l=s.getFlattenedFilters();for(const c of l)Ote(o,c),o=Vk(o,c)}(e._query,r),new hm(e.firestore,e.converter,Vk(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hP extends dP{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new hP(e,r)}_apply(e){const r=function(a,s,o){if(a.startAt!==null)throw new pr(Mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pr(Mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qb(s,o)}(e._query,this._field,this._direction);return new hm(e.firestore,e.converter,function(a,s){const o=a.explicitOrderBy.concat([s]);return new rv(a.path,a.collectionGroup,o,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,r))}}function Xb(t,e="asc"){const r=e,n=IA("orderBy",t);return hP._create(n,r)}class mP extends dP{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new mP(e,r,n)}_apply(e){return new hm(e.firestore,e.converter,JE(e._query,this._limit,this._limitType))}}function t8(t){return ebe("limit",t),mP._create("limit",t,"F")}function $U(t,e,r){if(typeof(r=Ns(r))=="string"){if(r==="")throw new pr(Mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lee(e)&&r.indexOf("/")!==-1)throw new pr(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ia.fromString(r));if(!_r.isDocumentKey(n))throw new pr(Mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return $b(t,new _r(n))}if(r instanceof Ys)return $b(t,r._key);throw new pr(Mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uA(r)}.`)}function HU(t,e){if(!Array.isArray(t)||t.length===0)throw new pr(Mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ote(t,e){const r=function(a,s){for(const o of a)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new pr(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pr(Mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class y5e{convertValue(e,r="none"){switch($0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ls(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(oh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Rr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return dm(e,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(e){var n,a,s;const r=(s=(a=(n=e.fields)==null?void 0:n[vx].arrayValue)==null?void 0:a.values)==null?void 0:s.map(o=>ls(o.doubleValue));return new Ud(r)}convertGeoPoint(e){return new Bd(ls(e.latitude),ls(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=gA(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ub(e));default:return null}}convertTimestamp(e){const r=ih(e);return new ea(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ia.fromString(e);Vr(Dee(n),9688,{name:e});const a=new Pp(n.get(1),n.get(3)),s=new _r(n.popFirst(5));return a.isEqual(r)||dl(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}class N2{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hp extends Ite{constructor(e,r,n,a,s,o){super(e,r,n,a,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new RN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(IA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pr(Mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=hp._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}hp._jsonSchemaVersion="firestore/documentSnapshot/1.0",hp._jsonSchema={type:fi("string",hp._jsonSchemaVersion),bundleSource:fi("string","DocumentSnapshot"),bundleName:fi("string"),bundle:fi("string")};class RN extends hp{data(e={}){return super.data(e)}}class F1{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new N2(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new RN(this._firestore,this._userDataWriter,n.key,n,new N2(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new pr(Mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let o=0;return a._snapshot.docChanges.map(l=>{const c=new RN(a._firestore,a._userDataWriter,l.doc.key,l.doc,new N2(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new RN(a._firestore,a._userDataWriter,l.doc.key,l.doc,new N2(a._snapshot.mutatedKeys.has(l.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:w5e(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pr(Mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=F1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=SR.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function w5e(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t){t=Hf(t,Ys);const e=Hf(t.firestore,Sx);return s5e(TA(e),t._key).then(r=>Pte(e,t,r))}F1._jsonSchemaVersion="firestore/querySnapshot/1.0",F1._jsonSchema={type:fi("string",F1._jsonSchemaVersion),bundleSource:fi("string","QuerySnapshot"),bundleName:fi("string"),bundle:fi("string")};class Rte extends y5e{constructor(e){super(),this.firestore=e}convertBytes(e){return new hu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ys(this.firestore,null,r)}}function GU(t,e,r,...n){t=Hf(t,Ys);const a=Hf(t.firestore,Sx),s=Tte(a);let o;return o=typeof(e=Ns(e))=="string"||e instanceof CA?h5e(s,"updateDoc",t._key,e,r,n):f5e(s,"updateDoc",t._key,e),_5e(a,[o.toMutation(t._key,jc.exists(!0))])}function RA(t,...e){var c,u,d;t=Ns(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||zU(e[n])||(r=e[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(zU(e[n])){const h=e[n];e[n]=(c=h.next)==null?void 0:c.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,l;if(t instanceof Ys)o=Hf(t.firestore,Sx),l=tw(t._key.path),s={next:h=>{e[n]&&e[n](Pte(o,t,h))},error:e[n+1],complete:e[n+2]};else{const h=Hf(t,hm);o=Hf(h.firestore,Sx),l=h._query;const p=new Rte(o);s={next:g=>{e[n]&&e[n](new F1(o,p,h,g))},error:e[n+1],complete:e[n+2]},b5e(t._query)}return function(p,g,b,w){const _=new _te(w),N=new fte(g,_,b);return p.asyncQueue.enqueueAndForget(async()=>ute(await e8(p),N)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>dte(await e8(p),N))}}(TA(o),l,a,s)}function _5e(t,e){return function(n,a){const s=new $f;return n.asyncQueue.enqueueAndForget(async()=>qwe(await n5e(n),a,s)),s.promise}(TA(t),e)}function Pte(t,e,r){const n=r.docs.get(e._key),a=new Rte(t);return new hp(t,a,e._key,n,new N2(r.hasPendingWrites,r.fromCache),e.converter)}class N5e{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=S5e(void 0),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function E5e(t){return new N5e(t)}class A5e{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=o3.provider,this._offlineComponentProvider={build:r=>new Jwe(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function S5e(t){return new A5e(t==null?void 0:t.forceOwnership)}(function(e,r=!0){(function(a){tv=a})(sg),Op(new z0("firestore",(n,{instanceIdentifier:a,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Sx(new q2e(n.getProvider("auth-internal")),new K2e(o,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new pr(Mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pp(u.options.projectId,d)}(o,a),o);return s={useFetchStreams:r,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Md(_B,NB,e),Md(_B,NB,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dte="firebasestorage.googleapis.com",Mte="storageBucket",j5e=2*60*1e3,T5e=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends ef{constructor(e,r,n=0){super(Oj(e),`Firebase Storage: ${r} (${Oj(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oj(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ls;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ls||(Ls={}));function Oj(t){return"storage/"+t}function pP(){const t="An unknown error occurred, please check the error payload for server response.";return new Bs(Ls.UNKNOWN,t)}function C5e(t){return new Bs(Ls.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function k5e(t){return new Bs(Ls.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function I5e(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Bs(Ls.UNAUTHENTICATED,t)}function O5e(){return new Bs(Ls.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function R5e(t){return new Bs(Ls.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function P5e(){return new Bs(Ls.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function D5e(){return new Bs(Ls.CANCELED,"User canceled the upload/download.")}function M5e(t){return new Bs(Ls.INVALID_URL,"Invalid URL '"+t+"'.")}function L5e(t){return new Bs(Ls.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function F5e(){return new Bs(Ls.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Mte+"' property when initializing the app?")}function B5e(){return new Bs(Ls.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function U5e(){return new Bs(Ls.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function z5e(t){return new Bs(Ls.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function r8(t){return new Bs(Ls.INVALID_ARGUMENT,t)}function Lte(){return new Bs(Ls.APP_DELETED,"The Firebase app was deleted.")}function V5e(t){return new Bs(Ls.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function J2(t,e){return new Bs(Ls.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gv(t){throw new Bs(Ls.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Tc.makeFromUrl(e,r)}catch{return new Tc(e,"")}if(n.path==="")return n;throw L5e(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function u(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${a}/o${p}`,"i"),b={bucket:1,path:3},w=r===Dte?"(?:storage.googleapis.com|storage.cloud.google.com)":r,_="([^?#]*)",N=new RegExp(`^https?://${w}/${a}/${_}`,"i"),T=[{regex:l,indices:c,postModify:s},{regex:g,indices:b,postModify:u},{regex:N,indices:{bucket:1,path:2},postModify:u}];for(let R=0;R<T.length;R++){const z=T[R],G=z.regex.exec(e);if(G){const O=G[z.indices.bucket];let D=G[z.indices.path];D||(D=""),n=new Tc(O,D),z.postModify(n);break}}if(n==null)throw M5e(e);return n}}class $5e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5e(t,e,r){let n=1,a=null,s=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function h(_){a=setTimeout(()=>{a=null,t(g,c())},_)}function p(){s&&clearTimeout(s)}function g(_,...N){if(u){p();return}if(_){p(),d.call(null,_,...N);return}if(c()||o){p(),d.call(null,_,...N);return}n<64&&(n*=2);let T;l===1?(l=2,T=0):T=(n+Math.random())*1e3,h(T)}let b=!1;function w(_){b||(b=!0,p(),!u&&(a!==null?(_||(l=2),clearTimeout(a),h(0)):_||(l=1)))}return h(0),s=setTimeout(()=>{o=!0,w(!0)},r),w}function q5e(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G5e(t){return t!==void 0}function W5e(t){return typeof t=="object"&&!Array.isArray(t)}function gP(t){return typeof t=="string"||t instanceof String}function WU(t){return xP()&&t instanceof Blob}function xP(){return typeof Blob<"u"}function KU(t,e,r,n){if(n<e)throw r8(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw r8(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function Fte(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var mp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mp||(mp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5e(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5e{constructor(e,r,n,a,s,o,l,c,u,d,h,p=!0,g=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,w)=>{this.resolve_=b,this.reject_=w,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new X5(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===mp.NO_ERROR,c=s.getStatus();if(!l||K5e(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===mp.ABORT;n(!1,new X5(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new X5(u,s))})},r=(n,a)=>{const s=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());G5e(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=pP();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?Lte():D5e();o(c)}else{const c=P5e();o(c)}};this.canceled_?r(!1,new X5(!1,null,!0)):this.backoffId_=H5e(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&q5e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class X5{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Y5e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Z5e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Q5e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function J5e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function e_e(t,e,r,n,a,s,o=!0,l=!1){const c=Fte(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return Q5e(d,e),Y5e(d,r),Z5e(d,s),J5e(d,n),new X5e(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function r_e(...t){const e=t_e();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(xP())return new Blob(t);throw new Bs(Ls.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function n_e(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_e(t){if(typeof atob>"u")throw z5e("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rj{constructor(e,r){this.data=e,this.contentType=r||null}}function s_e(t,e){switch(t){case kd.RAW:return new Rj(Bte(e));case kd.BASE64:case kd.BASE64URL:return new Rj(Ute(t,e));case kd.DATA_URL:return new Rj(o_e(e),l_e(e))}throw pP()}function Bte(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const s=n,o=t.charCodeAt(++r);n=65536|(s&1023)<<10|o&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function i_e(t){let e;try{e=decodeURIComponent(t)}catch{throw J2(kd.DATA_URL,"Malformed data URL.")}return Bte(e)}function Ute(t,e){switch(t){case kd.BASE64:{const a=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(a||s)throw J2(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case kd.BASE64URL:{const a=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(a||s)throw J2(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=a_e(e)}catch(a){throw a.message.includes("polyfill")?a:J2(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class zte{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw J2(kd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=c_e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function o_e(t){const e=new zte(t);return e.base64?Ute(kd.BASE64,e.rest):i_e(e.rest)}function l_e(t){return new zte(t).contentType}function c_e(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,r){let n=0,a="";WU(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(WU(this.data_)){const n=this.data_,a=n_e(n,e,r);return a===null?null:new a0(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new a0(n,!0)}}static getBlob(...e){if(xP()){const r=e.map(n=>n instanceof a0?n.data_:n);return new a0(r_e.apply(null,r))}else{const r=e.map(o=>gP(o)?s_e(kd.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)a[s++]=o[l]}),new a0(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vte(t){let e;try{e=JSON.parse(t)}catch{return null}return W5e(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function d_e(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function $te(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_e(t,e){return e}class il{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||f_e}}let Y5=null;function h_e(t){return!gP(t)||t.length<2?t:$te(t)}function Hte(){if(Y5)return Y5;const t=[];t.push(new il("bucket")),t.push(new il("generation")),t.push(new il("metageneration")),t.push(new il("name","fullPath",!0));function e(s,o){return h_e(o)}const r=new il("name");r.xform=e,t.push(r);function n(s,o){return o!==void 0?Number(o):o}const a=new il("size");return a.xform=n,t.push(a),t.push(new il("timeCreated")),t.push(new il("updated")),t.push(new il("md5Hash",null,!0)),t.push(new il("cacheControl",null,!0)),t.push(new il("contentDisposition",null,!0)),t.push(new il("contentEncoding",null,!0)),t.push(new il("contentLanguage",null,!0)),t.push(new il("contentType",null,!0)),t.push(new il("metadata","customMetadata",!0)),Y5=t,Y5}function m_e(t,e){function r(){const n=t.bucket,a=t.fullPath,s=new Tc(n,a);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:r})}function p_e(t,e,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const o=r[s];n[o.local]=o.xform(n,e[o.server])}return m_e(n,t),n}function qte(t,e,r){const n=Vte(e);return n===null?null:p_e(t,n,r)}function g_e(t,e,r,n){const a=Vte(e);if(a===null||!gP(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,p="/b/"+o(d)+"/o/"+o(h),g=vP(p,r,n),b=Fte({alt:"media",token:u});return g+b})[0]}function x_e(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const s=e[a];s.writable&&(r[s.server]=t[s.local])}return JSON.stringify(r)}class Gte{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wte(t){if(!t)throw pP()}function v_e(t,e){function r(n,a){const s=qte(t,a,e);return Wte(s!==null),s}return r}function b_e(t,e){function r(n,a){const s=qte(t,a,e);return Wte(s!==null),g_e(s,a,t.host,t._protocol)}return r}function Kte(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=O5e():a=I5e():r.getStatus()===402?a=k5e(t.bucket):r.getStatus()===403?a=R5e(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function y_e(t){const e=Kte(t);function r(n,a){let s=e(n,a);return n.getStatus()===404&&(s=C5e(t.path)),s.serverResponse=a.serverResponse,s}return r}function w_e(t,e,r){const n=e.fullServerUrl(),a=vP(n,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Gte(a,s,b_e(t,r),o);return l.errorHandler=y_e(e),l}function __e(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function N_e(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=__e(null,e)),n}function E_e(t,e,r,n,a){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let T="";for(let R=0;R<2;R++)T=T+Math.random().toString().slice(2);return T}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=N_e(e,n,a),d=x_e(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",g=a0.getBlob(h,n,p);if(g===null)throw B5e();const b={name:u.fullPath},w=vP(s,t.host,t._protocol),_="POST",N=t.maxUploadRetryTime,S=new Gte(w,_,v_e(t,r),N);return S.urlParams=b,S.headers=o,S.body=g.uploadData(),S.errorHandler=Kte(e),S}class A_e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a,s){if(this.sent_)throw Gv("cannot .send() more than once");if(Nh(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gv("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class S_e extends A_e{initXhr(){this.xhr_.responseType="text"}}function Xte(){return new S_e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,r){this._service=e,r instanceof Tc?this._location=r:this._location=Tc.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Up(e,r)}get root(){const e=new Tc(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $te(this._location.path)}get storage(){return this._service}get parent(){const e=u_e(this._location.path);if(e===null)return null;const r=new Tc(this._location.bucket,e);return new Up(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw V5e(e)}}function j_e(t,e,r){t._throwIfRoot("uploadBytes");const n=E_e(t.storage,t._location,Hte(),new a0(e,!0),r);return t.storage.makeRequestWithTokens(n,Xte).then(a=>({metadata:a,ref:t}))}function T_e(t){t._throwIfRoot("getDownloadURL");const e=w_e(t.storage,t._location,Hte());return t.storage.makeRequestWithTokens(e,Xte).then(r=>{if(r===null)throw U5e();return r})}function C_e(t,e){const r=d_e(t._location.path,e),n=new Tc(t._location.bucket,r);return new Up(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_e(t){return/^[A-Za-z]+:\/\//.test(t)}function I_e(t,e){return new Up(t,e)}function Yte(t,e){if(t instanceof bP){const r=t;if(r._bucket==null)throw F5e();const n=new Up(r,r._bucket);return e!=null?Yte(n,e):n}else return e!==void 0?C_e(t,e):t}function O_e(t,e){if(e&&k_e(e)){if(t instanceof bP)return I_e(t,e);throw r8("To use ref(service, url), the first argument must be a Storage instance.")}else return Yte(t,e)}function XU(t,e){const r=e==null?void 0:e[Mte];return r==null?null:Tc.makeFromBucketSpec(r,t)}function R_e(t,e,r,n={}){t.host=`${e}:${r}`;const a=Nh(e);a&&(nA(`https://${t.host}/b`),hR("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:vQ(s,t.app.options.projectId))}class bP{constructor(e,r,n,a,s,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Dte,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=j5e,this._maxUploadRetryTime=T5e,this._requests=new Set,a!=null?this._bucket=Tc.makeFromBucketSpec(a,this._host):this._bucket=XU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tc.makeFromBucketSpec(this._url,e):this._bucket=XU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KU("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KU("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(fu(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Up(this,e)}_makeRequest(e,r,n,a,s=!0){if(this._deleted)return new $5e(Lte());{const o=e_e(e,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const YU="@firebase/storage",ZU="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zte="storage";function Yb(t,e,r){return t=Ns(t),j_e(t,e,r)}function Zb(t){return t=Ns(t),T_e(t)}function Qb(t,e){return t=Ns(t),O_e(t,e)}function P_e(t=gR(),e){t=Ns(t);const n=Ky(t,Zte).getImmediate({identifier:e}),a=pQ("storage");return a&&D_e(n,...a),n}function D_e(t,e,r,n={}){R_e(t,e,r,n)}function M_e(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new bP(r,n,a,e,sg)}function L_e(){Op(new z0(Zte,M_e,"PUBLIC").setMultipleInstances(!0)),Md(YU,ZU,""),Md(YU,ZU,"esm2020")}L_e();const F_e={apiKey:"AIzaSyCkxBrwlqfmgamysCPOF-mT1R_e67Em5aw",authDomain:"embarques-7ad6e.firebaseapp.com",projectId:"embarques-7ad6e",storageBucket:"embarques-7ad6e.firebasestorage.app",messagingSenderId:"743244010565",appId:"1:743244010565:web:61fb7228a4d9efbb20ff2c"},u3=AQ(F_e),R0=bJ(u3);let n8;try{n8=o5e(u3,{localCache:E5e()})}catch{n8=l5e(u3)}const qf=n8,jx=P_e(u3);typeof window<"u"&&cp(async()=>{const{initializeOfflinePersistence:t}=await import("./firebaseOffline-CjAeaRZx.js");return{initializeOfflinePersistence:t}},[]).then(({initializeOfflinePersistence:t})=>{t().catch(e=>{console.warn("No se pudo habilitar persistencia offline:",e)})});const B_e=Object.freeze(Object.defineProperty({__proto__:null,auth:R0,db:qf,storage:jx},Symbol.toStringTag,{value:"Module"}));function Qte(t,e){return function(){return t.apply(e,arguments)}}const{toString:U_e}=Object.prototype,{getPrototypeOf:yP}=Object,{iterator:PA,toStringTag:Jte}=Symbol,DA=(t=>e=>{const r=U_e.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),fd=t=>(t=t.toLowerCase(),e=>DA(e)===t),MA=t=>e=>typeof e===t,{isArray:av}=Array,Tx=MA("undefined");function uw(t){return t!==null&&!Tx(t)&&t.constructor!==null&&!Tx(t.constructor)&&Vl(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ere=fd("ArrayBuffer");function z_e(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ere(t.buffer),e}const V_e=MA("string"),Vl=MA("function"),tre=MA("number"),dw=t=>t!==null&&typeof t=="object",$_e=t=>t===!0||t===!1,PN=t=>{if(DA(t)!=="object")return!1;const e=yP(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Jte in t)&&!(PA in t)},H_e=t=>{if(!dw(t)||uw(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},q_e=fd("Date"),G_e=fd("File"),W_e=fd("Blob"),K_e=fd("FileList"),X_e=t=>dw(t)&&Vl(t.pipe),Y_e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Vl(t.append)&&((e=DA(t))==="formdata"||e==="object"&&Vl(t.toString)&&t.toString()==="[object FormData]"))},Z_e=fd("URLSearchParams"),[Q_e,J_e,eNe,tNe]=["ReadableStream","Request","Response","Headers"].map(fd),rNe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fw(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),av(t))for(n=0,a=t.length;n<a;n++)e.call(null,t[n],n,t);else{if(uw(t))return;const s=r?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(n=0;n<o;n++)l=s[n],e.call(null,t[l],l,t)}}function rre(t,e){if(uw(t))return null;e=e.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],e===a.toLowerCase())return a;return null}const Zm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nre=t=>!Tx(t)&&t!==Zm;function a8(){const{caseless:t,skipUndefined:e}=nre(this)&&this||{},r={},n=(a,s)=>{const o=t&&rre(r,s)||s;PN(r[o])&&PN(a)?r[o]=a8(r[o],a):PN(a)?r[o]=a8({},a):av(a)?r[o]=a.slice():(!e||!Tx(a))&&(r[o]=a)};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&fw(arguments[a],n);return r}const nNe=(t,e,r,{allOwnKeys:n}={})=>(fw(e,(a,s)=>{r&&Vl(a)?t[s]=Qte(a,r):t[s]=a},{allOwnKeys:n}),t),aNe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),sNe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},iNe=(t,e,r,n)=>{let a,s,o;const l={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),s=a.length;s-- >0;)o=a[s],(!n||n(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=r!==!1&&yP(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},oNe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},lNe=t=>{if(!t)return null;if(av(t))return t;let e=t.length;if(!tre(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},cNe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&yP(Uint8Array)),uNe=(t,e)=>{const n=(t&&t[PA]).call(t);let a;for(;(a=n.next())&&!a.done;){const s=a.value;e.call(t,s[0],s[1])}},dNe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},fNe=fd("HTMLFormElement"),hNe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),QU=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),mNe=fd("RegExp"),are=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};fw(r,(a,s)=>{let o;(o=e(a,s,t))!==!1&&(n[s]=o||a)}),Object.defineProperties(t,n)},pNe=t=>{are(t,(e,r)=>{if(Vl(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Vl(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},gNe=(t,e)=>{const r={},n=a=>{a.forEach(s=>{r[s]=!0})};return av(t)?n(t):n(String(t).split(e)),r},xNe=()=>{},vNe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function bNe(t){return!!(t&&Vl(t.append)&&t[Jte]==="FormData"&&t[PA])}const yNe=t=>{const e=new Array(10),r=(n,a)=>{if(dw(n)){if(e.indexOf(n)>=0)return;if(uw(n))return n;if(!("toJSON"in n)){e[a]=n;const s=av(n)?[]:{};return fw(n,(o,l)=>{const c=r(o,a+1);!Tx(c)&&(s[l]=c)}),e[a]=void 0,s}}return n};return r(t,0)},wNe=fd("AsyncFunction"),_Ne=t=>t&&(dw(t)||Vl(t))&&Vl(t.then)&&Vl(t.catch),sre=((t,e)=>t?setImmediate:e?((r,n)=>(Zm.addEventListener("message",({source:a,data:s})=>{a===Zm&&s===r&&n.length&&n.shift()()},!1),a=>{n.push(a),Zm.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Vl(Zm.postMessage)),NNe=typeof queueMicrotask<"u"?queueMicrotask.bind(Zm):typeof process<"u"&&process.nextTick||sre,ENe=t=>t!=null&&Vl(t[PA]),Tt={isArray:av,isArrayBuffer:ere,isBuffer:uw,isFormData:Y_e,isArrayBufferView:z_e,isString:V_e,isNumber:tre,isBoolean:$_e,isObject:dw,isPlainObject:PN,isEmptyObject:H_e,isReadableStream:Q_e,isRequest:J_e,isResponse:eNe,isHeaders:tNe,isUndefined:Tx,isDate:q_e,isFile:G_e,isBlob:W_e,isRegExp:mNe,isFunction:Vl,isStream:X_e,isURLSearchParams:Z_e,isTypedArray:cNe,isFileList:K_e,forEach:fw,merge:a8,extend:nNe,trim:rNe,stripBOM:aNe,inherits:sNe,toFlatObject:iNe,kindOf:DA,kindOfTest:fd,endsWith:oNe,toArray:lNe,forEachEntry:uNe,matchAll:dNe,isHTMLForm:fNe,hasOwnProperty:QU,hasOwnProp:QU,reduceDescriptors:are,freezeMethods:pNe,toObjectSet:gNe,toCamelCase:hNe,noop:xNe,toFiniteNumber:vNe,findKey:rre,global:Zm,isContextDefined:nre,isSpecCompliantForm:bNe,toJSONObject:yNe,isAsyncFn:wNe,isThenable:_Ne,setImmediate:sre,asap:NNe,isIterable:ENe};function yn(t,e,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Tt.inherits(yn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tt.toJSONObject(this.config),code:this.code,status:this.status}}});const ire=yn.prototype,ore={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ore[t]={value:t}});Object.defineProperties(yn,ore);Object.defineProperty(ire,"isAxiosError",{value:!0});yn.from=(t,e,r,n,a,s)=>{const o=Object.create(ire);Tt.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return yn.call(o,l,c,r,n,a),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const ANe=null;function s8(t){return Tt.isPlainObject(t)||Tt.isArray(t)}function lre(t){return Tt.endsWith(t,"[]")?t.slice(0,-2):t}function JU(t,e,r){return t?t.concat(e).map(function(a,s){return a=lre(a),!r&&s?"["+a+"]":a}).join(r?".":""):e}function SNe(t){return Tt.isArray(t)&&!t.some(s8)}const jNe=Tt.toFlatObject(Tt,{},null,function(e){return/^is[A-Z]/.test(e)});function LA(t,e,r){if(!Tt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Tt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,_){return!Tt.isUndefined(_[w])});const n=r.metaTokens,a=r.visitor||d,s=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Tt.isSpecCompliantForm(e);if(!Tt.isFunction(a))throw new TypeError("visitor must be a function");function u(b){if(b===null)return"";if(Tt.isDate(b))return b.toISOString();if(Tt.isBoolean(b))return b.toString();if(!c&&Tt.isBlob(b))throw new yn("Blob is not supported. Use a Buffer instead.");return Tt.isArrayBuffer(b)||Tt.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,w,_){let N=b;if(b&&!_&&typeof b=="object"){if(Tt.endsWith(w,"{}"))w=n?w:w.slice(0,-2),b=JSON.stringify(b);else if(Tt.isArray(b)&&SNe(b)||(Tt.isFileList(b)||Tt.endsWith(w,"[]"))&&(N=Tt.toArray(b)))return w=lre(w),N.forEach(function(T,R){!(Tt.isUndefined(T)||T===null)&&e.append(o===!0?JU([w],R,s):o===null?w:w+"[]",u(T))}),!1}return s8(b)?!0:(e.append(JU(_,w,s),u(b)),!1)}const h=[],p=Object.assign(jNe,{defaultVisitor:d,convertValue:u,isVisitable:s8});function g(b,w){if(!Tt.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+w.join("."));h.push(b),Tt.forEach(b,function(N,S){(!(Tt.isUndefined(N)||N===null)&&a.call(e,N,Tt.isString(S)?S.trim():S,w,p))===!0&&g(N,w?w.concat(S):[S])}),h.pop()}}if(!Tt.isObject(t))throw new TypeError("data must be an object");return g(t),e}function ez(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function wP(t,e){this._pairs=[],t&&LA(t,this,e)}const cre=wP.prototype;cre.append=function(e,r){this._pairs.push([e,r])};cre.toString=function(e){const r=e?function(n){return e.call(this,n,ez)}:ez;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function TNe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ure(t,e,r){if(!e)return t;const n=r&&r.encode||TNe;Tt.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(a?s=a(e,r):s=Tt.isURLSearchParams(e)?e.toString():new wP(e,r).toString(n),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class tz{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Tt.forEach(this.handlers,function(n){n!==null&&e(n)})}}const dre={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CNe=typeof URLSearchParams<"u"?URLSearchParams:wP,kNe=typeof FormData<"u"?FormData:null,INe=typeof Blob<"u"?Blob:null,ONe={isBrowser:!0,classes:{URLSearchParams:CNe,FormData:kNe,Blob:INe},protocols:["http","https","file","blob","url","data"]},_P=typeof window<"u"&&typeof document<"u",i8=typeof navigator=="object"&&navigator||void 0,RNe=_P&&(!i8||["ReactNative","NativeScript","NS"].indexOf(i8.product)<0),PNe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",DNe=_P&&window.location.href||"http://localhost",MNe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_P,hasStandardBrowserEnv:RNe,hasStandardBrowserWebWorkerEnv:PNe,navigator:i8,origin:DNe},Symbol.toStringTag,{value:"Module"})),zo={...MNe,...ONe};function LNe(t,e){return LA(t,new zo.classes.URLSearchParams,{visitor:function(r,n,a,s){return zo.isNode&&Tt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function FNe(t){return Tt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function BNe(t){const e={},r=Object.keys(t);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],e[s]=t[s];return e}function fre(t){function e(r,n,a,s){let o=r[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=s>=r.length;return o=!o&&Tt.isArray(a)?a.length:o,c?(Tt.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!Tt.isObject(a[o]))&&(a[o]=[]),e(r,n,a[o],s)&&Tt.isArray(a[o])&&(a[o]=BNe(a[o])),!l)}if(Tt.isFormData(t)&&Tt.isFunction(t.entries)){const r={};return Tt.forEachEntry(t,(n,a)=>{e(FNe(n),a,r,0)}),r}return null}function UNe(t,e,r){if(Tt.isString(t))try{return(e||JSON.parse)(t),Tt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const hw={transitional:dre,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,s=Tt.isObject(e);if(s&&Tt.isHTMLForm(e)&&(e=new FormData(e)),Tt.isFormData(e))return a?JSON.stringify(fre(e)):e;if(Tt.isArrayBuffer(e)||Tt.isBuffer(e)||Tt.isStream(e)||Tt.isFile(e)||Tt.isBlob(e)||Tt.isReadableStream(e))return e;if(Tt.isArrayBufferView(e))return e.buffer;if(Tt.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return LNe(e,this.formSerializer).toString();if((l=Tt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return LA(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||a?(r.setContentType("application/json",!1),UNe(e)):e}],transformResponse:[function(e){const r=this.transitional||hw.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Tt.isResponse(e)||Tt.isReadableStream(e))return e;if(e&&Tt.isString(e)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?yn.from(l,yn.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zo.classes.FormData,Blob:zo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Tt.forEach(["delete","get","head","post","put","patch"],t=>{hw.headers[t]={}});const zNe=Tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VNe=t=>{const e={};let r,n,a;return t&&t.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||e[r]&&zNe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},rz=Symbol("internals");function Wv(t){return t&&String(t).trim().toLowerCase()}function DN(t){return t===!1||t==null?t:Tt.isArray(t)?t.map(DN):String(t)}function $Ne(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const HNe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Pj(t,e,r,n,a){if(Tt.isFunction(n))return n.call(this,e,r);if(a&&(e=r),!!Tt.isString(e)){if(Tt.isString(n))return e.indexOf(n)!==-1;if(Tt.isRegExp(n))return n.test(e)}}function qNe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function GNe(t,e){const r=Tt.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,s,o){return this[n].call(this,e,a,s,o)},configurable:!0})})}let $l=class{constructor(e){e&&this.set(e)}set(e,r,n){const a=this;function s(l,c,u){const d=Wv(c);if(!d)throw new Error("header name must be a non-empty string");const h=Tt.findKey(a,d);(!h||a[h]===void 0||u===!0||u===void 0&&a[h]!==!1)&&(a[h||c]=DN(l))}const o=(l,c)=>Tt.forEach(l,(u,d)=>s(u,d,c));if(Tt.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(Tt.isString(e)&&(e=e.trim())&&!HNe(e))o(VNe(e),r);else if(Tt.isObject(e)&&Tt.isIterable(e)){let l={},c,u;for(const d of e){if(!Tt.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?Tt.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=Wv(e),e){const n=Tt.findKey(this,e);if(n){const a=this[n];if(!r)return a;if(r===!0)return $Ne(a);if(Tt.isFunction(r))return r.call(this,a,n);if(Tt.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Wv(e),e){const n=Tt.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Pj(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let a=!1;function s(o){if(o=Wv(o),o){const l=Tt.findKey(n,o);l&&(!r||Pj(n,n[l],l,r))&&(delete n[l],a=!0)}}return Tt.isArray(e)?e.forEach(s):s(e),a}clear(e){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const s=r[n];(!e||Pj(this,this[s],s,e,!0))&&(delete this[s],a=!0)}return a}normalize(e){const r=this,n={};return Tt.forEach(this,(a,s)=>{const o=Tt.findKey(n,s);if(o){r[o]=DN(a),delete r[s];return}const l=e?qNe(s):String(s).trim();l!==s&&delete r[s],r[l]=DN(a),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Tt.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=e&&Tt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(a=>n.set(a)),n}static accessor(e){const n=(this[rz]=this[rz]={accessors:{}}).accessors,a=this.prototype;function s(o){const l=Wv(o);n[l]||(GNe(a,o),n[l]=!0)}return Tt.isArray(e)?e.forEach(s):s(e),this}};$l.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Tt.reduceDescriptors($l.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Tt.freezeMethods($l);function Dj(t,e){const r=this||hw,n=e||r,a=$l.from(n.headers);let s=n.data;return Tt.forEach(t,function(l){s=l.call(r,s,a.normalize(),e?e.status:void 0)}),a.normalize(),s}function hre(t){return!!(t&&t.__CANCEL__)}function sv(t,e,r){yn.call(this,t??"canceled",yn.ERR_CANCELED,e,r),this.name="CanceledError"}Tt.inherits(sv,yn,{__CANCEL__:!0});function mre(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new yn("Request failed with status code "+r.status,[yn.ERR_BAD_REQUEST,yn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function WNe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function KNe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let a=0,s=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=n[s];o||(o=u),r[a]=c,n[a]=u;let h=s,p=0;for(;h!==a;)p+=r[h++],h=h%t;if(a=(a+1)%t,a===s&&(s=(s+1)%t),u-o<e)return;const g=d&&u-d;return g?Math.round(p*1e3/g):void 0}}function XNe(t,e){let r=0,n=1e3/e,a,s;const o=(u,d=Date.now())=>{r=d,a=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-r;h>=n?o(u,d):(a=u,s||(s=setTimeout(()=>{s=null,o(a)},n-h)))},()=>a&&o(a)]}const d3=(t,e,r=3)=>{let n=0;const a=KNe(50,250);return XNe(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,c=o-n,u=a(c),d=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},r)},nz=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},az=t=>(...e)=>Tt.asap(()=>t(...e)),YNe=zo.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,zo.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(zo.origin),zo.navigator&&/(msie|trident)/i.test(zo.navigator.userAgent)):()=>!0,ZNe=zo.hasStandardBrowserEnv?{write(t,e,r,n,a,s){const o=[t+"="+encodeURIComponent(e)];Tt.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Tt.isString(n)&&o.push("path="+n),Tt.isString(a)&&o.push("domain="+a),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QNe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function JNe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function pre(t,e,r){let n=!QNe(e);return t&&(n||r==!1)?JNe(t,e):e}const sz=t=>t instanceof $l?{...t}:t;function zp(t,e){e=e||{};const r={};function n(u,d,h,p){return Tt.isPlainObject(u)&&Tt.isPlainObject(d)?Tt.merge.call({caseless:p},u,d):Tt.isPlainObject(d)?Tt.merge({},d):Tt.isArray(d)?d.slice():d}function a(u,d,h,p){if(Tt.isUndefined(d)){if(!Tt.isUndefined(u))return n(void 0,u,h,p)}else return n(u,d,h,p)}function s(u,d){if(!Tt.isUndefined(d))return n(void 0,d)}function o(u,d){if(Tt.isUndefined(d)){if(!Tt.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,h){if(h in e)return n(u,d);if(h in t)return n(void 0,u)}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,h)=>a(sz(u),sz(d),h,!0)};return Tt.forEach(Object.keys({...t,...e}),function(d){const h=c[d]||a,p=h(t[d],e[d],d);Tt.isUndefined(p)&&h!==l||(r[d]=p)}),r}const gre=t=>{const e=zp({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:l}=e;if(e.headers=o=$l.from(o),e.url=ure(pre(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Tt.isFormData(r)){if(zo.hasStandardBrowserEnv||zo.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Tt.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(zo.hasStandardBrowserEnv&&(n&&Tt.isFunction(n)&&(n=n(e)),n||n!==!1&&YNe(e.url))){const c=a&&s&&ZNe.read(s);c&&o.set(a,c)}return e},eEe=typeof XMLHttpRequest<"u",tEe=eEe&&function(t){return new Promise(function(r,n){const a=gre(t);let s=a.data;const o=$l.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=a,d,h,p,g,b;function w(){g&&g(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(d),a.signal&&a.signal.removeEventListener("abort",d)}let _=new XMLHttpRequest;_.open(a.method.toUpperCase(),a.url,!0),_.timeout=a.timeout;function N(){if(!_)return;const T=$l.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),z={data:!l||l==="text"||l==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:T,config:t,request:_};mre(function(O){r(O),w()},function(O){n(O),w()},z),_=null}"onloadend"in _?_.onloadend=N:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(N)},_.onabort=function(){_&&(n(new yn("Request aborted",yn.ECONNABORTED,t,_)),_=null)},_.onerror=function(R){const z=R&&R.message?R.message:"Network Error",G=new yn(z,yn.ERR_NETWORK,t,_);G.event=R||null,n(G),_=null},_.ontimeout=function(){let R=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const z=a.transitional||dre;a.timeoutErrorMessage&&(R=a.timeoutErrorMessage),n(new yn(R,z.clarifyTimeoutError?yn.ETIMEDOUT:yn.ECONNABORTED,t,_)),_=null},s===void 0&&o.setContentType(null),"setRequestHeader"in _&&Tt.forEach(o.toJSON(),function(R,z){_.setRequestHeader(z,R)}),Tt.isUndefined(a.withCredentials)||(_.withCredentials=!!a.withCredentials),l&&l!=="json"&&(_.responseType=a.responseType),u&&([p,b]=d3(u,!0),_.addEventListener("progress",p)),c&&_.upload&&([h,g]=d3(c),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(d=T=>{_&&(n(!T||T.type?new sv(null,t,_):T),_.abort(),_=null)},a.cancelToken&&a.cancelToken.subscribe(d),a.signal&&(a.signal.aborted?d():a.signal.addEventListener("abort",d)));const S=WNe(a.url);if(S&&zo.protocols.indexOf(S)===-1){n(new yn("Unsupported protocol "+S+":",yn.ERR_BAD_REQUEST,t));return}_.send(s||null)})},rEe=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,a;const s=function(u){if(!a){a=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof yn?d:new sv(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new yn(`timeout ${e} of ms exceeded`,yn.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:c}=n;return c.unsubscribe=()=>Tt.asap(l),c}},nEe=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,a;for(;n<r;)a=n+e,yield t.slice(n,a),n=a},aEe=async function*(t,e){for await(const r of sEe(t))yield*nEe(r,e)},sEe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},iz=(t,e,r,n)=>{const a=aEe(t,e);let s=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await a.next();if(u){l(),c.close();return}let h=d.byteLength;if(r){let p=s+=h;r(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},oz=64*1024,{isFunction:Z5}=Tt,iEe=(({Request:t,Response:e})=>({Request:t,Response:e}))(Tt.global),{ReadableStream:lz,TextEncoder:cz}=Tt.global,uz=(t,...e)=>{try{return!!t(...e)}catch{return!1}},oEe=t=>{t=Tt.merge.call({skipUndefined:!0},iEe,t);const{fetch:e,Request:r,Response:n}=t,a=e?Z5(e):typeof fetch=="function",s=Z5(r),o=Z5(n);if(!a)return!1;const l=a&&Z5(lz),c=a&&(typeof cz=="function"?(b=>w=>b.encode(w))(new cz):async b=>new Uint8Array(await new r(b).arrayBuffer())),u=s&&l&&uz(()=>{let b=!1;const w=new r(zo.origin,{body:new lz,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!w}),d=o&&l&&uz(()=>Tt.isReadableStream(new n("").body)),h={stream:d&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!h[b]&&(h[b]=(w,_)=>{let N=w&&w[b];if(N)return N.call(w);throw new yn(`Response type '${b}' is not supported`,yn.ERR_NOT_SUPPORT,_)})});const p=async b=>{if(b==null)return 0;if(Tt.isBlob(b))return b.size;if(Tt.isSpecCompliantForm(b))return(await new r(zo.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(Tt.isArrayBufferView(b)||Tt.isArrayBuffer(b))return b.byteLength;if(Tt.isURLSearchParams(b)&&(b=b+""),Tt.isString(b))return(await c(b)).byteLength},g=async(b,w)=>{const _=Tt.toFiniteNumber(b.getContentLength());return _??p(w)};return async b=>{let{url:w,method:_,data:N,signal:S,cancelToken:T,timeout:R,onDownloadProgress:z,onUploadProgress:G,responseType:O,headers:D,withCredentials:I="same-origin",fetchOptions:V}=gre(b),P=e||fetch;O=O?(O+"").toLowerCase():"text";let B=rEe([S,T&&T.toAbortSignal()],R),F=null;const ee=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let Z;try{if(G&&u&&_!=="get"&&_!=="head"&&(Z=await g(D,N))!==0){let we=new r(w,{method:"POST",body:N,duplex:"half"}),q;if(Tt.isFormData(N)&&(q=we.headers.get("content-type"))&&D.setContentType(q),we.body){const[Y,X]=nz(Z,d3(az(G)));N=iz(we.body,oz,Y,X)}}Tt.isString(I)||(I=I?"include":"omit");const ce=s&&"credentials"in r.prototype,ne={...V,signal:B,method:_.toUpperCase(),headers:D.normalize().toJSON(),body:N,duplex:"half",credentials:ce?I:void 0};F=s&&new r(w,ne);let ae=await(s?P(F,V):P(w,ne));const me=d&&(O==="stream"||O==="response");if(d&&(z||me&&ee)){const we={};["status","statusText","headers"].forEach(re=>{we[re]=ae[re]});const q=Tt.toFiniteNumber(ae.headers.get("content-length")),[Y,X]=z&&nz(q,d3(az(z),!0))||[];ae=new n(iz(ae.body,oz,Y,()=>{X&&X(),ee&&ee()}),we)}O=O||"text";let Te=await h[Tt.findKey(h,O)||"text"](ae,b);return!me&&ee&&ee(),await new Promise((we,q)=>{mre(we,q,{data:Te,headers:$l.from(ae.headers),status:ae.status,statusText:ae.statusText,config:b,request:F})})}catch(ce){throw ee&&ee(),ce&&ce.name==="TypeError"&&/Load failed|fetch/i.test(ce.message)?Object.assign(new yn("Network Error",yn.ERR_NETWORK,b,F),{cause:ce.cause||ce}):yn.from(ce,ce&&ce.code,b,F)}}},lEe=new Map,xre=t=>{let e=t?t.env:{};const{fetch:r,Request:n,Response:a}=e,s=[n,a,r];let o=s.length,l=o,c,u,d=lEe;for(;l--;)c=s[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:oEe(e)),d=u;return u};xre();const o8={http:ANe,xhr:tEe,fetch:{get:xre}};Tt.forEach(o8,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const dz=t=>`- ${t}`,cEe=t=>Tt.isFunction(t)||t===null||t===!1,vre={getAdapter:(t,e)=>{t=Tt.isArray(t)?t:[t];const{length:r}=t;let n,a;const s={};for(let o=0;o<r;o++){n=t[o];let l;if(a=n,!cEe(n)&&(a=o8[(l=String(n)).toLowerCase()],a===void 0))throw new yn(`Unknown adapter '${l}'`);if(a&&(Tt.isFunction(a)||(a=a.get(e))))break;s[l||"#"+o]=a}if(!a){const o=Object.entries(s).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(dz).join(`
`):" "+dz(o[0]):"as no adapter specified";throw new yn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:o8};function Mj(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new sv(null,t)}function fz(t){return Mj(t),t.headers=$l.from(t.headers),t.data=Dj.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),vre.getAdapter(t.adapter||hw.adapter,t)(t).then(function(n){return Mj(t),n.data=Dj.call(t,t.transformResponse,n),n.headers=$l.from(n.headers),n},function(n){return hre(n)||(Mj(t),n&&n.response&&(n.response.data=Dj.call(t,t.transformResponse,n.response),n.response.headers=$l.from(n.response.headers))),Promise.reject(n)})}const bre="1.12.2",FA={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{FA[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const hz={};FA.transitional=function(e,r,n){function a(s,o){return"[Axios v"+bre+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,l)=>{if(e===!1)throw new yn(a(o," has been removed"+(r?" in "+r:"")),yn.ERR_DEPRECATED);return r&&!hz[o]&&(hz[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,l):!0}};FA.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function uEe(t,e,r){if(typeof t!="object")throw new yn("options must be an object",yn.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const s=n[a],o=e[s];if(o){const l=t[s],c=l===void 0||o(l,s,t);if(c!==!0)throw new yn("option "+s+" must be "+c,yn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new yn("Unknown option "+s,yn.ERR_BAD_OPTION)}}const MN={assertOptions:uEe,validators:FA},gd=MN.validators;let pp=class{constructor(e){this.defaults=e||{},this.interceptors={request:new tz,response:new tz}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=zp(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:s}=r;n!==void 0&&MN.assertOptions(n,{silentJSONParsing:gd.transitional(gd.boolean),forcedJSONParsing:gd.transitional(gd.boolean),clarifyTimeoutError:gd.transitional(gd.boolean)},!1),a!=null&&(Tt.isFunction(a)?r.paramsSerializer={serialize:a}:MN.assertOptions(a,{encode:gd.function,serialize:gd.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),MN.assertOptions(r,{baseUrl:gd.spelling("baseURL"),withXsrfToken:gd.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&Tt.merge(s.common,s[r.method]);s&&Tt.forEach(["delete","get","head","post","put","patch","common"],b=>{delete s[b]}),r.headers=$l.concat(o,s);const l=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(c=c&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let d,h=0,p;if(!c){const b=[fz.bind(this),void 0];for(b.unshift(...l),b.push(...u),p=b.length,d=Promise.resolve(r);h<p;)d=d.then(b[h++],b[h++]);return d}p=l.length;let g=r;for(;h<p;){const b=l[h++],w=l[h++];try{g=b(g)}catch(_){w.call(this,_);break}}try{d=fz.call(this,g)}catch(b){return Promise.reject(b)}for(h=0,p=u.length;h<p;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=zp(this.defaults,e);const r=pre(e.baseURL,e.url,e.allowAbsoluteUrls);return ure(r,e.params,e.paramsSerializer)}};Tt.forEach(["delete","get","head","options"],function(e){pp.prototype[e]=function(r,n){return this.request(zp(n||{},{method:e,url:r,data:(n||{}).data}))}});Tt.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,l){return this.request(zp(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}pp.prototype[e]=r(),pp.prototype[e+"Form"]=r(!0)});let dEe=class yre{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(a=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](a);n._listeners=null}),this.promise.then=a=>{let s;const o=new Promise(l=>{n.subscribe(l),s=l}).then(a);return o.cancel=function(){n.unsubscribe(s)},o},e(function(s,o,l){n.reason||(n.reason=new sv(s,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new yre(function(a){e=a}),cancel:e}}};function fEe(t){return function(r){return t.apply(null,r)}}function hEe(t){return Tt.isObject(t)&&t.isAxiosError===!0}const l8={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(l8).forEach(([t,e])=>{l8[e]=t});function wre(t){const e=new pp(t),r=Qte(pp.prototype.request,e);return Tt.extend(r,pp.prototype,e,{allOwnKeys:!0}),Tt.extend(r,e,null,{allOwnKeys:!0}),r.create=function(a){return wre(zp(t,a))},r}const ms=wre(hw);ms.Axios=pp;ms.CanceledError=sv;ms.CancelToken=dEe;ms.isCancel=hre;ms.VERSION=bre;ms.toFormData=LA;ms.AxiosError=yn;ms.Cancel=ms.CanceledError;ms.all=function(e){return Promise.all(e)};ms.spread=fEe;ms.isAxiosError=hEe;ms.mergeConfig=zp;ms.AxiosHeaders=$l;ms.formToJSON=t=>fre(Tt.isHTMLForm(t)?new FormData(t):t);ms.getAdapter=vre.getAdapter;ms.HttpStatusCode=l8;ms.default=ms;const{Axios:Fut,AxiosError:But,CanceledError:Uut,isCancel:zut,CancelToken:Vut,VERSION:$ut,all:Hut,Cancel:qut,isAxiosError:Gut,spread:Wut,toFormData:Kut,AxiosHeaders:Xut,HttpStatusCode:Yut,formToJSON:Zut,getAdapter:Qut,mergeConfig:Jut}=ms,wt=ms.create({baseURL:"https://proyecto-envios-production.up.railway.app/api",timeout:6e4,headers:{"Content-Type":"application/json"}});wt.interceptors.request.use(async t=>{try{let e=localStorage.getItem("token");const r=R0.currentUser;if(r){if(e)try{const n=e.split(".")[1],a=JSON.parse(atob(n)),s=Math.floor(Date.now()/1e3);if(a.exp-s<300){console.log(" Token prximo a expirar, renovando automticamente...");const l=await r.getIdToken(!0);localStorage.setItem("token",l),e=l,console.log(" Token renovado exitosamente")}}catch(n){console.warn(" Error decodificando token, renovando por seguridad...",n);const a=await r.getIdToken(!0);localStorage.setItem("token",a),e=a}else console.log(" No hay token en localStorage, obteniendo nuevo token..."),e=await r.getIdToken(!0),localStorage.setItem("token",e);t.headers.Authorization=`Bearer ${e}`}else console.warn(" No hay usuario autenticado en Firebase")}catch(e){console.error(" Error en interceptor de request:",e)}return t},t=>(console.error(" Error configurando request:",t),Promise.reject(t)));wt.interceptors.response.use(t=>{if(t.data&&typeof t.data=="object"&&t.data.success===!1){const e=new Error(t.data.error||t.data.message||"Error desconocido");return e.response=t,e.isBackendError=!0,Promise.reject(e)}return t},async t=>{var a,s,o;const e=t.config;if(((a=t.response)==null?void 0:a.status)===401&&!e._retry){e._retry=!0;try{const l=R0.currentUser;if(l){console.log(" Error 401 detectado, renovando token...");const c=await l.getIdToken(!0);return localStorage.setItem("token",c),e.headers.Authorization=`Bearer ${c}`,console.log(" Token renovado, reintentando peticin original..."),wt(e)}else return console.log(" No hay usuario autenticado, redirigiendo al login..."),localStorage.removeItem("token"),window.location.pathname.includes("/login")||(window.location.href="/login"),t.userMessage="Sesin expirada. Por favor, inicia sesin nuevamente.",Promise.reject(t)}catch(l){return console.error(" Error renovando token:",l),localStorage.removeItem("token"),window.location.pathname.includes("/login")||(window.location.href="/login"),l.userMessage="Error renovando sesin. Por favor, inicia sesin nuevamente.",Promise.reject(l)}}let r="Ha ocurrido un error inesperado",n=null;if(t.response){const{status:l,data:c}=t.response;if(console.error(" Error del servidor:",{status:l,url:(s=t.config)==null?void 0:s.url,method:(o=t.config)==null?void 0:o.method,data:c}),c&&typeof c=="object"&&(c.error?(r=c.error,n=c):c.message?(r=c.message,n=c):typeof c=="string"&&(r=c)),!c||!c.error&&!c.message)switch(l){case 400:r="Datos invlidos o incompletos. Por favor, verifica la informacin.",console.error(" Bad Request - Datos invlidos o incompletos");break;case 403:r="No tienes permisos para realizar esta accin.",console.error(" Acceso denegado - Permisos insuficientes");break;case 404:r="El recurso solicitado no existe.",console.error(" Recurso no encontrado");break;case 500:r="Error interno del servidor. Por favor, intenta nuevamente.",console.error(" Error interno del servidor");break;case 503:r="El servicio no est disponible temporalmente. Por favor, intenta ms tarde.",console.error(" Servicio no disponible temporalmente");break;default:r=`Error del servidor (${l}). Por favor, intenta nuevamente.`}}else t.request?(console.error(" Error de red - Sin respuesta del servidor:",t.message),r="Error de conexin. Verifica tu conexin a internet y que el servidor est disponible."):(console.error(" Error configurando peticin:",t.message),r="Error configurando la peticin. Por favor, contacta soporte tcnico.");return t.userMessage=r,t.errorDetails=n,t.originalMessage||(t.originalMessage=t.message),t.message=r,Promise.reject(t)});const _re=A.createContext(),ca=()=>{const t=A.useContext(_re);if(!t)throw new Error("useAuth debe usarse dentro de AuthProvider");return t},mEe=({children:t})=>{const[e,r]=A.useState(null),[n,a]=A.useState(null),[s,o]=A.useState(!0),l=g=>{if(!g)return!0;try{const b=g.split(".")[1],w=JSON.parse(atob(b)),_=Math.floor(Date.now()/1e3);return w.exp<_}catch(b){return console.error("Error verificando expiracin del token:",b),!0}},c=async g=>{try{const b=await g.getIdToken(!0);return localStorage.setItem("token",b),console.log(" Token renovado exitosamente"),b}catch(b){throw console.error(" Error renovando token:",b),b}};A.useEffect(()=>{const g=async()=>{const w=localStorage.getItem("token");if(!(!w||!e))try{const _=w.split(".")[1],N=JSON.parse(atob(_)),S=Math.floor(Date.now()/1e3);N.exp-S<300&&(console.log(" Token prximo a expirar, renovando..."),await c(e))}catch(_){console.error("Error verificando expiracin:",_)}},b=setInterval(g,24e4);return g(),()=>clearInterval(b)},[e]),A.useEffect(()=>iJ(R0,async b=>{if(b){r(b);try{const w=localStorage.getItem("token");if(!w||l(w)){console.log(" Token expirado o no existe, obteniendo nuevo token...");const N=await b.getIdToken(!0);localStorage.setItem("token",N)}const _=await wt.get("auth/profile");if(console.log(" Respuesta de /auth/profile:",_.data),_.data.success&&_.data.data)a(_.data.data),console.log(" Datos de usuario cargados:",_.data.data);else throw new Error(_.data.error||"Formato de respuesta invlido")}catch(w){console.error(" Error obteniendo perfil:",w),w.response&&w.response.status===401?(console.log(" Token invlido, cerrando sesin..."),await d()):(console.log(" Error crtico obteniendo perfil, cerrando sesin..."),await d())}}else r(null),a(null),localStorage.removeItem("token");o(!1)}),[]);const u=async(g,b)=>{try{const w=await nJ(R0,g,b),_=await w.user.getIdToken();return localStorage.setItem("token",_),console.log(" Login exitoso, token guardado"),w}catch(w){throw console.error(" Error en login:",w),w}},d=async()=>{try{await wR(R0),r(null),a(null),localStorage.removeItem("token"),console.log(" Logout exitoso")}catch(g){throw console.error(" Error en logout:",g),g}},p={user:e,userData:n,login:u,logout:d,loading:s,forceRefreshToken:async()=>{if(!e)throw new Error("No hay usuario autenticado");return await c(e)},isTokenExpired:l};return i.jsx(_re.Provider,{value:p,children:t})};function pEe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const gEe=t=>{switch(t){case"success":return bEe;case"info":return wEe;case"warning":return yEe;case"error":return _Ee;default:return null}},xEe=Array(12).fill(0),vEe=({visible:t,className:e})=>gr.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},gr.createElement("div",{className:"sonner-spinner"},xEe.map((r,n)=>gr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),bEe=gr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),yEe=gr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wEe=gr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),_Ee=gr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),NEe=gr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),EEe=()=>{const[t,e]=gr.useState(document.hidden);return gr.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t};let c8=1;class AEe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:n,...a}=e,s=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:c8++,o=this.toasts.find(c=>c.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(c=>c.id===s?(this.publish({...c,...e,id:s,title:n}),{...c,...e,id:s,dismissible:l,title:n}):c):this.addToast({title:n,...a,dismissible:l,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let s=n!==void 0,o;const l=a.then(async u=>{if(o=["resolve",u],gr.isValidElement(u))s=!1,this.create({id:n,type:"default",message:u});else if(jEe(u)&&!u.ok){s=!1;const h=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,b=typeof h=="object"&&!gr.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:p,...b})}else if(u instanceof Error){s=!1;const h=typeof r.error=="function"?await r.error(u):r.error,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof h=="object"&&!gr.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:p,...b})}else if(r.success!==void 0){s=!1;const h=typeof r.success=="function"?await r.success(u):r.success,p=typeof r.description=="function"?await r.description(u):r.description,b=typeof h=="object"&&!gr.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:p,...b})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){s=!1;const d=typeof r.error=="function"?await r.error(u):r.error,h=typeof r.description=="function"?await r.description(u):r.description,g=typeof d=="object"&&!gr.isValidElement(d)?d:{message:d};this.create({id:n,type:"error",description:h,...g})}}).finally(()=>{s&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((u,d)=>l.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,r)=>{const n=(r==null?void 0:r.id)||c8++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Dl=new AEe,SEe=(t,e)=>{const r=(e==null?void 0:e.id)||c8++;return Dl.addToast({title:t,...e,id:r}),r},jEe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",TEe=SEe,CEe=()=>Dl.toasts,kEe=()=>Dl.getActiveToasts(),Ke=Object.assign(TEe,{success:Dl.success,info:Dl.info,warning:Dl.warning,error:Dl.error,custom:Dl.custom,message:Dl.message,promise:Dl.promise,dismiss:Dl.dismiss,loading:Dl.loading},{getHistory:CEe,getToasts:kEe});pEe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Q5(t){return t.label!==void 0}const IEe=3,OEe="24px",REe="16px",mz=4e3,PEe=356,DEe=14,MEe=45,LEe=200;function xd(...t){return t.filter(Boolean).join(" ")}function FEe(t){const[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}const BEe=t=>{var e,r,n,a,s,o,l,c,u;const{invert:d,toast:h,unstyled:p,interacting:g,setHeights:b,visibleToasts:w,heights:_,index:N,toasts:S,expanded:T,removeToast:R,defaultRichColors:z,closeButton:G,style:O,cancelButtonStyle:D,actionButtonStyle:I,className:V="",descriptionClassName:P="",duration:B,position:F,gap:ee,expandByDefault:Z,classNames:ce,icons:ne,closeButtonAriaLabel:ae="Close toast"}=t,[me,Te]=gr.useState(null),[we,q]=gr.useState(null),[Y,X]=gr.useState(!1),[re,se]=gr.useState(!1),[Ce,je]=gr.useState(!1),[pe,Oe]=gr.useState(!1),[qe,Ue]=gr.useState(!1),[Me,Be]=gr.useState(0),[ve,Ht]=gr.useState(0),mt=gr.useRef(h.duration||B||mz),Ut=gr.useRef(null),et=gr.useRef(null),er=N===0,Ve=N+1<=w,zt=h.type,Wt=h.dismissible!==!1,Yt=h.className||"",ar=h.descriptionClassName||"",Xe=gr.useMemo(()=>_.findIndex(It=>It.toastId===h.id)||0,[_,h.id]),qt=gr.useMemo(()=>{var It;return(It=h.closeButton)!=null?It:G},[h.closeButton,G]),kt=gr.useMemo(()=>h.duration||B||mz,[h.duration,B]),gt=gr.useRef(0),Ft=gr.useRef(0),Vt=gr.useRef(0),Nr=gr.useRef(null),[sr,it]=F.split("-"),ir=gr.useMemo(()=>_.reduce((It,Er,en)=>en>=Xe?It:It+Er.height,0),[_,Xe]),be=EEe(),Ze=h.invert||d,at=zt==="loading";Ft.current=gr.useMemo(()=>Xe*ee+ir,[Xe,ir]),gr.useEffect(()=>{mt.current=kt},[kt]),gr.useEffect(()=>{X(!0)},[]),gr.useEffect(()=>{const It=et.current;if(It){const Er=It.getBoundingClientRect().height;return Ht(Er),b(en=>[{toastId:h.id,height:Er,position:h.position},...en]),()=>b(en=>en.filter($r=>$r.toastId!==h.id))}},[b,h.id]),gr.useLayoutEffect(()=>{if(!Y)return;const It=et.current,Er=It.style.height;It.style.height="auto";const en=It.getBoundingClientRect().height;It.style.height=Er,Ht(en),b($r=>$r.find(fr=>fr.toastId===h.id)?$r.map(fr=>fr.toastId===h.id?{...fr,height:en}:fr):[{toastId:h.id,height:en,position:h.position},...$r])},[Y,h.title,h.description,b,h.id,h.jsx,h.action,h.cancel]);const Qe=gr.useCallback(()=>{se(!0),Be(Ft.current),b(It=>It.filter(Er=>Er.toastId!==h.id)),setTimeout(()=>{R(h)},LEe)},[h,R,b,Ft]);gr.useEffect(()=>{if(h.promise&&zt==="loading"||h.duration===1/0||h.type==="loading")return;let It;return T||g||be?(()=>{if(Vt.current<gt.current){const $r=new Date().getTime()-gt.current;mt.current=mt.current-$r}Vt.current=new Date().getTime()})():(()=>{mt.current!==1/0&&(gt.current=new Date().getTime(),It=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Qe()},mt.current))})(),()=>clearTimeout(It)},[T,g,h,zt,be,Qe]),gr.useEffect(()=>{h.delete&&(Qe(),h.onDismiss==null||h.onDismiss.call(h,h))},[Qe,h.delete]);function ze(){var It;if(ne!=null&&ne.loading){var Er;return gr.createElement("div",{className:xd(ce==null?void 0:ce.loader,h==null||(Er=h.classNames)==null?void 0:Er.loader,"sonner-loader"),"data-visible":zt==="loading"},ne.loading)}return gr.createElement(vEe,{className:xd(ce==null?void 0:ce.loader,h==null||(It=h.classNames)==null?void 0:It.loader),visible:zt==="loading"})}const st=h.icon||(ne==null?void 0:ne[zt])||gEe(zt);var St,tr;return gr.createElement("li",{tabIndex:0,ref:et,className:xd(V,Yt,ce==null?void 0:ce.toast,h==null||(e=h.classNames)==null?void 0:e.toast,ce==null?void 0:ce.default,ce==null?void 0:ce[zt],h==null||(r=h.classNames)==null?void 0:r[zt]),"data-sonner-toast":"","data-rich-colors":(St=h.richColors)!=null?St:z,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":Y,"data-promise":!!h.promise,"data-swiped":qe,"data-removed":re,"data-visible":Ve,"data-y-position":sr,"data-x-position":it,"data-index":N,"data-front":er,"data-swiping":Ce,"data-dismissible":Wt,"data-type":zt,"data-invert":Ze,"data-swipe-out":pe,"data-swipe-direction":we,"data-expanded":!!(T||Z&&Y),"data-testid":h.testId,style:{"--index":N,"--toasts-before":N,"--z-index":S.length-N,"--offset":`${re?Me:Ft.current}px`,"--initial-height":Z?"auto":`${ve}px`,...O,...h.style},onDragEnd:()=>{je(!1),Te(null),Nr.current=null},onPointerDown:It=>{It.button!==2&&(at||!Wt||(Ut.current=new Date,Be(Ft.current),It.target.setPointerCapture(It.pointerId),It.target.tagName!=="BUTTON"&&(je(!0),Nr.current={x:It.clientX,y:It.clientY})))},onPointerUp:()=>{var It,Er,en;if(pe||!Wt)return;Nr.current=null;const $r=Number(((It=et.current)==null?void 0:It.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jn=Number(((Er=et.current)==null?void 0:Er.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fr=new Date().getTime()-((en=Ut.current)==null?void 0:en.getTime()),dn=me==="x"?$r:jn,Vn=Math.abs(dn)/fr;if(Math.abs(dn)>=MEe||Vn>.11){Be(Ft.current),h.onDismiss==null||h.onDismiss.call(h,h),q(me==="x"?$r>0?"right":"left":jn>0?"down":"up"),Qe(),Oe(!0);return}else{var on,_n;(on=et.current)==null||on.style.setProperty("--swipe-amount-x","0px"),(_n=et.current)==null||_n.style.setProperty("--swipe-amount-y","0px")}Ue(!1),je(!1),Te(null)},onPointerMove:It=>{var Er,en,$r;if(!Nr.current||!Wt||((Er=window.getSelection())==null?void 0:Er.toString().length)>0)return;const fr=It.clientY-Nr.current.y,dn=It.clientX-Nr.current.x;var Vn;const on=(Vn=t.swipeDirections)!=null?Vn:FEe(F);!me&&(Math.abs(dn)>1||Math.abs(fr)>1)&&Te(Math.abs(dn)>Math.abs(fr)?"x":"y");let _n={x:0,y:0};const Zr=tn=>1/(1.5+Math.abs(tn)/20);if(me==="y"){if(on.includes("top")||on.includes("bottom"))if(on.includes("top")&&fr<0||on.includes("bottom")&&fr>0)_n.y=fr;else{const tn=fr*Zr(fr);_n.y=Math.abs(tn)<Math.abs(fr)?tn:fr}}else if(me==="x"&&(on.includes("left")||on.includes("right")))if(on.includes("left")&&dn<0||on.includes("right")&&dn>0)_n.x=dn;else{const tn=dn*Zr(dn);_n.x=Math.abs(tn)<Math.abs(dn)?tn:dn}(Math.abs(_n.x)>0||Math.abs(_n.y)>0)&&Ue(!0),(en=et.current)==null||en.style.setProperty("--swipe-amount-x",`${_n.x}px`),($r=et.current)==null||$r.style.setProperty("--swipe-amount-y",`${_n.y}px`)}},qt&&!h.jsx&&zt!=="loading"?gr.createElement("button",{"aria-label":ae,"data-disabled":at,"data-close-button":!0,onClick:at||!Wt?()=>{}:()=>{Qe(),h.onDismiss==null||h.onDismiss.call(h,h)},className:xd(ce==null?void 0:ce.closeButton,h==null||(n=h.classNames)==null?void 0:n.closeButton)},(tr=ne==null?void 0:ne.close)!=null?tr:NEe):null,(zt||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[zt])!==null||h.icon)?gr.createElement("div",{"data-icon":"",className:xd(ce==null?void 0:ce.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||ze():null,h.type!=="loading"?st:null):null,gr.createElement("div",{"data-content":"",className:xd(ce==null?void 0:ce.content,h==null||(s=h.classNames)==null?void 0:s.content)},gr.createElement("div",{"data-title":"",className:xd(ce==null?void 0:ce.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gr.createElement("div",{"data-description":"",className:xd(P,ar,ce==null?void 0:ce.description,h==null||(l=h.classNames)==null?void 0:l.description)},typeof h.description=="function"?h.description():h.description):null),gr.isValidElement(h.cancel)?h.cancel:h.cancel&&Q5(h.cancel)?gr.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||D,onClick:It=>{Q5(h.cancel)&&Wt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,It),Qe())},className:xd(ce==null?void 0:ce.cancelButton,h==null||(c=h.classNames)==null?void 0:c.cancelButton)},h.cancel.label):null,gr.isValidElement(h.action)?h.action:h.action&&Q5(h.action)?gr.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||I,onClick:It=>{Q5(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,It),!It.defaultPrevented&&Qe())},className:xd(ce==null?void 0:ce.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function pz(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function UEe(t,e){const r={};return[t,e].forEach((n,a)=>{const s=a===1,o=s?"--mobile-offset":"--offset",l=s?REe:OEe;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}const zEe=gr.forwardRef(function(e,r){const{id:n,invert:a,position:s="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:d,mobileOffset:h,theme:p="light",richColors:g,duration:b,style:w,visibleToasts:_=IEe,toastOptions:N,dir:S=pz(),gap:T=DEe,icons:R,containerAriaLabel:z="Notifications"}=e,[G,O]=gr.useState([]),D=gr.useMemo(()=>n?G.filter(Y=>Y.toasterId===n):G.filter(Y=>!Y.toasterId),[G,n]),I=gr.useMemo(()=>Array.from(new Set([s].concat(D.filter(Y=>Y.position).map(Y=>Y.position)))),[D,s]),[V,P]=gr.useState([]),[B,F]=gr.useState(!1),[ee,Z]=gr.useState(!1),[ce,ne]=gr.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=gr.useRef(null),me=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Te=gr.useRef(null),we=gr.useRef(!1),q=gr.useCallback(Y=>{O(X=>{var re;return(re=X.find(se=>se.id===Y.id))!=null&&re.delete||Dl.dismiss(Y.id),X.filter(({id:se})=>se!==Y.id)})},[]);return gr.useEffect(()=>Dl.subscribe(Y=>{if(Y.dismiss){requestAnimationFrame(()=>{O(X=>X.map(re=>re.id===Y.id?{...re,delete:!0}:re))});return}setTimeout(()=>{k0e.flushSync(()=>{O(X=>{const re=X.findIndex(se=>se.id===Y.id);return re!==-1?[...X.slice(0,re),{...X[re],...Y},...X.slice(re+1)]:[Y,...X]})})})}),[G]),gr.useEffect(()=>{if(p!=="system"){ne(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;const Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:X})=>{ne(X?"dark":"light")})}catch{Y.addListener(({matches:re})=>{try{ne(re?"dark":"light")}catch(se){console.error(se)}})}},[p]),gr.useEffect(()=>{G.length<=1&&F(!1)},[G]),gr.useEffect(()=>{const Y=X=>{var re;if(o.every(je=>X[je]||X.code===je)){var Ce;F(!0),(Ce=ae.current)==null||Ce.focus()}X.code==="Escape"&&(document.activeElement===ae.current||(re=ae.current)!=null&&re.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[o]),gr.useEffect(()=>{if(ae.current)return()=>{Te.current&&(Te.current.focus({preventScroll:!0}),Te.current=null,we.current=!1)}},[ae.current]),gr.createElement("section",{ref:r,"aria-label":`${z} ${me}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Y,X)=>{var re;const[se,Ce]=Y.split("-");return D.length?gr.createElement("ol",{key:Y,dir:S==="auto"?pz():S,tabIndex:-1,ref:ae,className:u,"data-sonner-toaster":!0,"data-sonner-theme":ce,"data-y-position":se,"data-x-position":Ce,style:{"--front-toast-height":`${((re=V[0])==null?void 0:re.height)||0}px`,"--width":`${PEe}px`,"--gap":`${T}px`,...w,...UEe(d,h)},onBlur:je=>{we.current&&!je.currentTarget.contains(je.relatedTarget)&&(we.current=!1,Te.current&&(Te.current.focus({preventScroll:!0}),Te.current=null))},onFocus:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||we.current||(we.current=!0,Te.current=je.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{ee||F(!1)},onDragEnd:()=>F(!1),onPointerDown:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},D.filter(je=>!je.position&&X===0||je.position===Y).map((je,pe)=>{var Oe,qe;return gr.createElement(BEe,{key:je.id,icons:R,index:pe,toast:je,defaultRichColors:g,duration:(Oe=N==null?void 0:N.duration)!=null?Oe:b,className:N==null?void 0:N.className,descriptionClassName:N==null?void 0:N.descriptionClassName,invert:a,visibleToasts:_,closeButton:(qe=N==null?void 0:N.closeButton)!=null?qe:c,interacting:ee,position:Y,style:N==null?void 0:N.style,unstyled:N==null?void 0:N.unstyled,classNames:N==null?void 0:N.classNames,cancelButtonStyle:N==null?void 0:N.cancelButtonStyle,actionButtonStyle:N==null?void 0:N.actionButtonStyle,closeButtonAriaLabel:N==null?void 0:N.closeButtonAriaLabel,removeToast:q,toasts:D.filter(Ue=>Ue.position==je.position),heights:V.filter(Ue=>Ue.position==je.position),setHeights:P,expandByDefault:l,gap:T,expanded:B,swipeDirections:e.swipeDirections})})):null}))}),VEe=(t=9e4)=>{const{userData:e}=ca(),r=A.useRef(null);A.useEffect(()=>{if(!e)return;const n=async()=>{try{await wt.post("/auth/heartbeat"),console.log(" Heartbeat enviado")}catch(a){console.error(" Error enviando heartbeat:",a.message)}};return n(),r.current=setInterval(n,t),()=>{r.current&&(clearInterval(r.current),console.log(" Heartbeat detenido"))}},[e,t])};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Ee=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HEe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),gz=t=>{const e=HEe(t);return e.charAt(0).toUpperCase()+e.slice(1)},Nre=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),qEe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GEe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WEe=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>A.createElement("svg",{ref:c,...GEe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Nre("lucide",a),...!s&&!qEe(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>A.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=(t,e)=>{const r=A.forwardRef(({className:n,...a},s)=>A.createElement(WEe,{ref:s,iconNode:e,className:Nre(`lucide-${$Ee(gz(t))}`,`lucide-${t}`,n),...a}));return r.displayName=gz(t),r};/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KEe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],B1=ur("activity",KEe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XEe=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],YEe=ur("arrow-down-right",XEe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZEe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Hl=ur("arrow-left",ZEe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QEe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],xz=ur("arrow-right-left",QEe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JEe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],e3e=ur("arrow-right",JEe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3e=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ere=ur("arrow-up-right",t3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3e=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],Are=ur("barcode",r3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],NP=ur("bell",n3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3e=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],s3e=ur("book",a3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3e=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Xu=ur("box",i3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3e=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Qm=ur("building-2",o3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3e=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],c3e=ur("calculator",l3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3e=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Kl=ur("calendar",u3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3e=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Gf=ur("camera",d3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3e=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gp=ur("chart-column",f3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rd=ur("check",h3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3e=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sre=ur("chevron-down",m3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3e=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],g3e=ur("chevron-up",p3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_s=ur("circle-alert",x3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3e=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Jr=ur("circle-check-big",v3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qg=ur("circle-check",b3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],w3e=ur("circle-plus",y3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vz=ur("circle-question-mark",_3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wm=ur("circle-x",N3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3e=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wo=ur("clock",E3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],S3e=ur("copy",A3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3e=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Jb=ur("credit-card",j3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3e=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],jre=ur("crown",T3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Fl=ur("dollar-sign",C3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],BA=ur("download",k3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3e=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],u8=ur("eye-off",I3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3e=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Su=ur("eye",O3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3e=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Nu=ur("file-text",R3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3e=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Tre=ur("funnel",P3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],M3e=ur("globe",D3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3e=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],bz=ur("grip-vertical",L3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3e=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Cre=ur("history",F3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3e=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],d8=ur("house",B3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3e=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],zd=ur("image",U3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3e=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],V3e=ur("inbox",z3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3e=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],H3e=ur("key",$3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3e=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xp=ur("loader-circle",q3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3e=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],bs=ur("loader",G3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eb=ur("lock",W3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3e=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],X3e=ur("log-out",K3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3e=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lh=ur("mail",Y3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3e=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Da=ur("map-pin",Z3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3e=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],J3e=ur("menu",Q3e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],LN=ur("message-circle",e4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],FN=ur("message-square",t4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Lj=ur("monitor",r4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4e=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ey=ur("navigation",n4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4e=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Lr=ur("package",a4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4e=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],i4e=ur("palette",s4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4e=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],xl=ur("phone",o4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4e=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],c4e=ur("plug",l4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4e=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vd=ur("plus",u4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4e=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],ql=ur("printer",d4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4e=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],h4e=ur("qr-code",f4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4e=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yz=ur("radio",m4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4e=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],g4e=ur("receipt",p4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4e=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],W0=ur("refresh-cw",x4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],f3=ur("save",v4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4e=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],kre=ur("scan",b4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4e=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],$d=ur("search",y4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_4e=ur("send",w4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4e=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],EP=ur("settings",N4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4e=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],A4e=ur("share-2",E4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],j4e=ur("shield-x",S4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4e=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],C4e=ur("shield",T4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4e=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],I4e=ur("shopping-cart",k4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4e=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ire=ur("smartphone",O4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4e=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],h3=ur("sparkles",R4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],U1=ur("square-pen",P4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4e=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],M4e=ur("tag",D4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4e=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],F4e=ur("ticket",L4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4e=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],U4e=ur("toggle-left",B4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4e=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],V4e=ur("toggle-right",z4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vp=ur("trash-2",$4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4e=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],wz=ur("trash",H4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4e=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],G4e=ur("trending-down",q4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Tf=ur("trending-up",W4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4e=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hi=ur("triangle-alert",K4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4e=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],ts=ur("truck",X4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4e=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],m3=ur("upload",Y4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4e=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vl=ur("user",Z4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],od=ur("users",Q4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4e=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],_z=ur("video",J4e);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eAe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],tAe=ur("wallet",eAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rAe=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]],p3=ur("warehouse",rAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nAe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],aAe=ur("wifi-off",nAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sAe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zn=ur("x",sAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iAe=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],oAe=ur("zap",iAe);/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lAe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],cAe=ur("zoom-in",lAe),mw="/assets/logo-BeXeJmi3.png",uAe=()=>{const[t,e]=A.useState(()=>{var a;const n=localStorage.getItem("userConfig");if(n)try{return((a=JSON.parse(n).apariencia)==null?void 0:a.tema)||"claro"}catch{return"claro"}return"claro"});return A.useEffect(()=>{t==="oscuro"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),{theme:t,setTheme:e,toggleTheme:()=>{const n=t==="claro"?"oscuro":"claro";e(n);const a=localStorage.getItem("userConfig");let s={};if(a)try{s=JSON.parse(a)}catch{s={}}s.apariencia={...s.apariencia,tema:n},localStorage.setItem("userConfig",JSON.stringify(s))},isDark:t==="oscuro"}},Nz=({onNewNotification:t,onLoadExisting:e})=>{const[r,n]=A.useState(!0),{user:a,userData:s}=ca();return A.useEffect(()=>{if(!a||!s)return;console.log(" NotificationListener Check:",{rol:s.rol,companyId:s.companyId});const o=s.rol==="super_admin",l=!!s.companyId;if(!o&&!l){console.warn(" Usuario sin companyId (y no es admin), listener no iniciado");return}console.log(" NotificationListener iniciado. Rol:",s.rol);const c=jA(qf,"facturas");let u;s.rol==="super_admin"?u=mu(c,O0("estado","==","no_entregado"),Xb("updatedAt","desc"),t8(50)):u=mu(c,O0("companyId","==",s.companyId),O0("estado","==","no_entregado"),Xb("updatedAt","desc"),t8(50));const d=RA(u,h=>{if(console.log(" Listener activado - cambios detectados:",h.docChanges().length),r){const p=[];h.docs.forEach(g=>{var N;const b={id:g.id,...g.data()};let w;(N=b.updatedAt)!=null&&N.toDate?w=b.updatedAt.toDate():b.updatedAt instanceof Date?w=b.updatedAt:typeof b.updatedAt=="string"?w=new Date(b.updatedAt):w=new Date,(new Date-w)/1e3<43200&&p.push({id:b.id,tipo:"factura_no_entregada",titulo:`Factura No Entregada: ${b.numeroFactura}`,mensaje:`${b.cliente} - Motivo: ${b.motivoNoEntrega||"Sin especificar"}`,factura:b,timestamp:w,leida:!0})}),console.log(" Cargando",p.length,"notificaciones existentes como LEDAS"),e(p),setTimeout(()=>{n(!1),console.log(" Ahora escuchando cambios NUEVOS")},1e3)}else h.docChanges().forEach(p=>{var g;if(p.type==="added"||p.type==="modified"){const b={id:p.doc.id,...p.doc.data()};let w;if((g=b.updatedAt)!=null&&g.toDate?w=b.updatedAt.toDate():b.updatedAt instanceof Date?w=b.updatedAt:typeof b.updatedAt=="string"?w=new Date(b.updatedAt):w=new Date,(new Date-w)/1e3<30){console.log(" Nueva notificacin!");const N={id:b.id,tipo:"factura_no_entregada",titulo:`Factura No Entregada: ${b.numeroFactura}`,mensaje:`${b.cliente} - Motivo: ${b.motivoNoEntrega||"Sin especificar"}`,factura:b,timestamp:new Date,leida:!1};t(N)}}})},h=>{h.code==="permission-denied"?console.warn(" Listener detenido (Permisos insuficientes):",h.message):console.warn(" Error en listener:",h)});return()=>{console.log(" Listener desconectado"),d()}},[r,t,e,a]),null},AP=A.createContext({});function SP(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const jP=typeof window<"u",Ore=jP?A.useLayoutEffect:A.useEffect,UA=A.createContext(null);function TP(t,e){t.indexOf(e)===-1&&t.push(e)}function CP(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const ch=(t,e,r)=>r>e?e:r<t?t:r;let kP=()=>{};const uh={},Rre=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Pre(t){return typeof t=="object"&&t!==null}const Dre=t=>/^0[^.\s]+$/u.test(t);function IP(t){let e;return()=>(e===void 0&&(e=t()),e)}const Eu=t=>t,dAe=(t,e)=>r=>e(t(r)),pw=(...t)=>t.reduce(dAe),ty=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class OP{constructor(){this.subscriptions=[]}add(e){return TP(this.subscriptions,e),()=>CP(this.subscriptions,e)}notify(e,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,n);else for(let s=0;s<a;s++){const o=this.subscriptions[s];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hd=t=>t*1e3,vu=t=>t/1e3;function Mre(t,e){return e?t*(1e3/e):0}const Lre=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,fAe=1e-7,hAe=12;function mAe(t,e,r,n,a){let s,o,l=0;do o=e+(r-e)/2,s=Lre(o,n,a)-t,s>0?r=o:e=o;while(Math.abs(s)>fAe&&++l<hAe);return o}function gw(t,e,r,n){if(t===e&&r===n)return Eu;const a=s=>mAe(s,0,1,t,r);return s=>s===0||s===1?s:Lre(a(s),e,n)}const Fre=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Bre=t=>e=>1-t(1-e),Ure=gw(.33,1.53,.69,.99),RP=Bre(Ure),zre=Fre(RP),Vre=t=>(t*=2)<1?.5*RP(t):.5*(2-Math.pow(2,-10*(t-1))),PP=t=>1-Math.sin(Math.acos(t)),$re=Bre(PP),Hre=Fre(PP),pAe=gw(.42,0,1,1),gAe=gw(0,0,.58,1),qre=gw(.42,0,.58,1),xAe=t=>Array.isArray(t)&&typeof t[0]!="number",Gre=t=>Array.isArray(t)&&typeof t[0]=="number",vAe={linear:Eu,easeIn:pAe,easeInOut:qre,easeOut:gAe,circIn:PP,circInOut:Hre,circOut:$re,backIn:RP,backInOut:zre,backOut:Ure,anticipate:Vre},bAe=t=>typeof t=="string",Ez=t=>{if(Gre(t)){kP(t.length===4);const[e,r,n,a]=t;return gw(e,r,n,a)}else if(bAe(t))return vAe[t];return t},J5=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function yAe(t,e){let r=new Set,n=new Set,a=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),t()),d(l)}const u={schedule:(d,h=!1,p=!1)=>{const b=p&&a?r:n;return h&&o.add(d),b.has(d)||b.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,a){s=!0;return}a=!0,[r,n]=[n,r],r.forEach(c),r.clear(),a=!1,s&&(s=!1,u.process(d))}};return u}const wAe=40;function Wre(t,e){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,o=J5.reduce((T,R)=>(T[R]=yAe(s),T),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:p,render:g,postRender:b}=o,w=()=>{const T=uh.useManualTiming?a.timestamp:performance.now();r=!1,uh.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(T-a.timestamp,wAe),1)),a.timestamp=T,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),d.process(a),h.process(a),p.process(a),g.process(a),b.process(a),a.isProcessing=!1,r&&e&&(n=!1,t(w))},_=()=>{r=!0,n=!0,a.isProcessing||t(w)};return{schedule:J5.reduce((T,R)=>{const z=o[R];return T[R]=(G,O=!1,D=!1)=>(r||_(),z.schedule(G,O,D)),T},{}),cancel:T=>{for(let R=0;R<J5.length;R++)o[J5[R]].cancel(T)},state:a,steps:o}}const{schedule:us,cancel:K0,state:go,steps:Fj}=Wre(typeof requestAnimationFrame<"u"?requestAnimationFrame:Eu,!0);let BN;function _Ae(){BN=void 0}const Bl={now:()=>(BN===void 0&&Bl.set(go.isProcessing||uh.useManualTiming?go.timestamp:performance.now()),BN),set:t=>{BN=t,queueMicrotask(_Ae)}},Kre=t=>e=>typeof e=="string"&&e.startsWith(t),DP=Kre("--"),NAe=Kre("var(--"),MP=t=>NAe(t)?EAe.test(t.split("/*")[0].trim()):!1,EAe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,iv={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ry={...iv,transform:t=>ch(0,1,t)},e_={...iv,default:1},tb=t=>Math.round(t*1e5)/1e5,LP=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function AAe(t){return t==null}const SAe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,FP=(t,e)=>r=>!!(typeof r=="string"&&SAe.test(r)&&r.startsWith(t)||e&&!AAe(r)&&Object.prototype.hasOwnProperty.call(r,e)),Xre=(t,e,r)=>n=>{if(typeof n!="string")return n;const[a,s,o,l]=n.match(LP);return{[t]:parseFloat(a),[e]:parseFloat(s),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},jAe=t=>ch(0,255,t),Bj={...iv,transform:t=>Math.round(jAe(t))},Jm={test:FP("rgb","red"),parse:Xre("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+Bj.transform(t)+", "+Bj.transform(e)+", "+Bj.transform(r)+", "+tb(ry.transform(n))+")"};function TAe(t){let e="",r="",n="",a="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,r+=r,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const f8={test:FP("#"),parse:TAe,transform:Jm.transform},xw=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Kh=xw("deg"),qd=xw("%"),ln=xw("px"),CAe=xw("vh"),kAe=xw("vw"),Az={...qd,parse:t=>qd.parse(t)/100,transform:t=>qd.transform(t*100)},x1={test:FP("hsl","hue"),parse:Xre("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+qd.transform(tb(e))+", "+qd.transform(tb(r))+", "+tb(ry.transform(n))+")"},ii={test:t=>Jm.test(t)||f8.test(t)||x1.test(t),parse:t=>Jm.test(t)?Jm.parse(t):x1.test(t)?x1.parse(t):f8.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Jm.transform(t):x1.transform(t),getAnimatableNone:t=>{const e=ii.parse(t);return e.alpha=0,ii.transform(e)}},IAe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OAe(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(LP))==null?void 0:e.length)||0)+(((r=t.match(IAe))==null?void 0:r.length)||0)>0}const Yre="number",Zre="color",RAe="var",PAe="var(",Sz="${}",DAe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ny(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},a=[];let s=0;const l=e.replace(DAe,c=>(ii.test(c)?(n.color.push(s),a.push(Zre),r.push(ii.parse(c))):c.startsWith(PAe)?(n.var.push(s),a.push(RAe),r.push(c)):(n.number.push(s),a.push(Yre),r.push(parseFloat(c))),++s,Sz)).split(Sz);return{values:r,split:l,indexes:n,types:a}}function Qre(t){return ny(t).values}function Jre(t){const{split:e,types:r}=ny(t),n=e.length;return a=>{let s="";for(let o=0;o<n;o++)if(s+=e[o],a[o]!==void 0){const l=r[o];l===Yre?s+=tb(a[o]):l===Zre?s+=ii.transform(a[o]):s+=a[o]}return s}}const MAe=t=>typeof t=="number"?0:ii.test(t)?ii.getAnimatableNone(t):t;function LAe(t){const e=Qre(t);return Jre(t)(e.map(MAe))}const X0={test:OAe,parse:Qre,createTransformer:Jre,getAnimatableNone:LAe};function Uj(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function FAe({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let a=0,s=0,o=0;if(!e)a=s=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;a=Uj(c,l,t+1/3),s=Uj(c,l,t),o=Uj(c,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}function g3(t,e){return r=>r>0?e:t}const ws=(t,e,r)=>t+(e-t)*r,zj=(t,e,r)=>{const n=t*t,a=r*(e*e-n)+n;return a<0?0:Math.sqrt(a)},BAe=[f8,Jm,x1],UAe=t=>BAe.find(e=>e.test(t));function jz(t){const e=UAe(t);if(!e)return!1;let r=e.parse(t);return e===x1&&(r=FAe(r)),r}const Tz=(t,e)=>{const r=jz(t),n=jz(e);if(!r||!n)return g3(t,e);const a={...r};return s=>(a.red=zj(r.red,n.red,s),a.green=zj(r.green,n.green,s),a.blue=zj(r.blue,n.blue,s),a.alpha=ws(r.alpha,n.alpha,s),Jm.transform(a))},h8=new Set(["none","hidden"]);function zAe(t,e){return h8.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function VAe(t,e){return r=>ws(t,e,r)}function BP(t){return typeof t=="number"?VAe:typeof t=="string"?MP(t)?g3:ii.test(t)?Tz:qAe:Array.isArray(t)?ene:typeof t=="object"?ii.test(t)?Tz:$Ae:g3}function ene(t,e){const r=[...t],n=r.length,a=t.map((s,o)=>BP(s)(s,e[o]));return s=>{for(let o=0;o<n;o++)r[o]=a[o](s);return r}}function $Ae(t,e){const r={...t,...e},n={};for(const a in r)t[a]!==void 0&&e[a]!==void 0&&(n[a]=BP(t[a])(t[a],e[a]));return a=>{for(const s in n)r[s]=n[s](a);return r}}function HAe(t,e){const r=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][n[s]],l=t.values[o]??0;r[a]=l,n[s]++}return r}const qAe=(t,e)=>{const r=X0.createTransformer(e),n=ny(t),a=ny(e);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?h8.has(t)&&!a.values.length||h8.has(e)&&!n.values.length?zAe(t,e):pw(ene(HAe(n,a),a.values),r):g3(t,e)};function tne(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?ws(t,e,r):BP(t)(t,e)}const GAe=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>us.update(e,r),stop:()=>K0(e),now:()=>go.isProcessing?go.timestamp:Bl.now()}},rne=(t,e,r=10)=>{let n="";const a=Math.max(Math.round(e/r),2);for(let s=0;s<a;s++)n+=Math.round(t(s/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},x3=2e4;function UP(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<x3;)e+=r,n=t.next(e);return e>=x3?1/0:e}function WAe(t,e=100,r){const n=r({...t,keyframes:[0,e]}),a=Math.min(UP(n),x3);return{type:"keyframes",ease:s=>n.next(a*s).value/e,duration:vu(a)}}const KAe=5;function nne(t,e,r){const n=Math.max(e-KAe,0);return Mre(r-t(n),e-n)}const Is={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vj=.001;function XAe({duration:t=Is.duration,bounce:e=Is.bounce,velocity:r=Is.velocity,mass:n=Is.mass}){let a,s,o=1-e;o=ch(Is.minDamping,Is.maxDamping,o),t=ch(Is.minDuration,Is.maxDuration,vu(t)),o<1?(a=u=>{const d=u*o,h=d*t,p=d-r,g=m8(u,o),b=Math.exp(-h);return Vj-p/g*b},s=u=>{const h=u*o*t,p=h*r+r,g=Math.pow(o,2)*Math.pow(u,2)*t,b=Math.exp(-h),w=m8(Math.pow(u,2),o);return(-a(u)+Vj>0?-1:1)*((p-g)*b)/w}):(a=u=>{const d=Math.exp(-u*t),h=(u-r)*t+1;return-Vj+d*h},s=u=>{const d=Math.exp(-u*t),h=(r-u)*(t*t);return d*h});const l=5/t,c=ZAe(a,s,l);if(t=Hd(t),isNaN(c))return{stiffness:Is.stiffness,damping:Is.damping,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const YAe=12;function ZAe(t,e,r){let n=r;for(let a=1;a<YAe;a++)n=n-t(n)/e(n);return n}function m8(t,e){return t*Math.sqrt(1-e*e)}const QAe=["duration","bounce"],JAe=["stiffness","damping","mass"];function Cz(t,e){return e.some(r=>t[r]!==void 0)}function eSe(t){let e={velocity:Is.velocity,stiffness:Is.stiffness,damping:Is.damping,mass:Is.mass,isResolvedFromDuration:!1,...t};if(!Cz(t,JAe)&&Cz(t,QAe))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,s=2*ch(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Is.mass,stiffness:a,damping:s}}else{const r=XAe(t);e={...e,...r,mass:Is.mass},e.isResolvedFromDuration=!0}return e}function v3(t=Is.visualDuration,e=Is.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:a}=r;const s=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:h,velocity:p,isResolvedFromDuration:g}=eSe({...r,velocity:-vu(r.velocity||0)}),b=p||0,w=u/(2*Math.sqrt(c*d)),_=o-s,N=vu(Math.sqrt(c/d)),S=Math.abs(_)<5;n||(n=S?Is.restSpeed.granular:Is.restSpeed.default),a||(a=S?Is.restDelta.granular:Is.restDelta.default);let T;if(w<1){const z=m8(N,w);T=G=>{const O=Math.exp(-w*N*G);return o-O*((b+w*N*_)/z*Math.sin(z*G)+_*Math.cos(z*G))}}else if(w===1)T=z=>o-Math.exp(-N*z)*(_+(b+N*_)*z);else{const z=N*Math.sqrt(w*w-1);T=G=>{const O=Math.exp(-w*N*G),D=Math.min(z*G,300);return o-O*((b+w*N*_)*Math.sinh(D)+z*_*Math.cosh(D))/z}}const R={calculatedDuration:g&&h||null,next:z=>{const G=T(z);if(g)l.done=z>=h;else{let O=z===0?b:0;w<1&&(O=z===0?Hd(b):nne(T,z,G));const D=Math.abs(O)<=n,I=Math.abs(o-G)<=a;l.done=D&&I}return l.value=l.done?o:G,l},toString:()=>{const z=Math.min(UP(R),x3),G=rne(O=>R.next(z*O).value,z,30);return z+"ms "+G},toTransition:()=>{}};return R}v3.applyToOptions=t=>{const e=WAe(t,100,v3);return t.ease=e.ease,t.duration=Hd(e.duration),t.type="keyframes",t};function p8({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},g=D=>l!==void 0&&D<l||c!==void 0&&D>c,b=D=>l===void 0?c:c===void 0||Math.abs(l-D)<Math.abs(c-D)?l:c;let w=r*e;const _=h+w,N=o===void 0?_:o(_);N!==_&&(w=N-h);const S=D=>-w*Math.exp(-D/n),T=D=>N+S(D),R=D=>{const I=S(D),V=T(D);p.done=Math.abs(I)<=u,p.value=p.done?N:V};let z,G;const O=D=>{g(p.value)&&(z=D,G=v3({keyframes:[p.value,b(p.value)],velocity:nne(T,D,p.value),damping:a,stiffness:s,restDelta:u,restSpeed:d}))};return O(0),{calculatedDuration:null,next:D=>{let I=!1;return!G&&z===void 0&&(I=!0,R(D),O(D)),z!==void 0&&D>=z?G.next(D-z):(!I&&R(D),p)}}}function tSe(t,e,r){const n=[],a=r||uh.mix||tne,s=t.length-1;for(let o=0;o<s;o++){let l=a(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Eu:e;l=pw(c,l)}n.push(l)}return n}function rSe(t,e,{clamp:r=!0,ease:n,mixer:a}={}){const s=t.length;if(kP(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=tSe(e,n,a),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=ty(t[h],t[h+1],d);return l[h](p)};return r?d=>u(ch(t[0],t[s-1],d)):u}function nSe(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const a=ty(0,e,n);t.push(ws(r,1,a))}}function aSe(t){const e=[0];return nSe(e,t.length-1),e}function sSe(t,e){return t.map(r=>r*e)}function iSe(t,e){return t.map(()=>e||qre).splice(0,t.length-1)}function rb({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const a=xAe(n)?n.map(Ez):Ez(n),s={done:!1,value:e[0]},o=sSe(r&&r.length===e.length?r:aSe(e),t),l=rSe(o,e,{ease:Array.isArray(a)?a:iSe(e,a)});return{calculatedDuration:t,next:c=>(s.value=l(c),s.done=c>=t,s)}}const oSe=t=>t!==null;function zP(t,{repeat:e,repeatType:r="loop"},n,a=1){const s=t.filter(oSe),l=a<0||e&&r!=="loop"&&e%2===1?0:s.length-1;return!l||n===void 0?s[l]:n}const lSe={decay:p8,inertia:p8,tween:rb,keyframes:rb,spring:v3};function ane(t){typeof t.type=="string"&&(t.type=lSe[t.type])}class VP{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const cSe=t=>t/100;class $P extends VP{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,a;const{motionValue:r}=this.options;r&&r.updatedAt!==Bl.now()&&this.tick(Bl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(n=this.options).onStop)==null||a.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ane(e);const{type:r=rb,repeat:n=0,repeatDelay:a=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const c=r||rb;c!==rb&&typeof l[0]!="number"&&(this.mixKeyframes=pw(cSe,tne(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=UP(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:a,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:g,type:b,onUpdate:w,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const N=this.currentTime-u*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?N<0:N>a;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let T=this.currentTime,R=n;if(h){const D=Math.min(this.currentTime,a)/l;let I=Math.floor(D),V=D%1;!V&&D>=1&&(V=1),V===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(p==="reverse"?(V=1-V,g&&(V-=g/l)):p==="mirror"&&(R=o)),T=ch(0,1,V)*l}const z=S?{done:!1,value:d[0]}:R.next(T);s&&(z.value=s(z.value));let{done:G}=z;!S&&c!==null&&(G=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&G);return O&&b!==p8&&(z.value=zP(d,this.options,_,this.speed)),w&&w(z.value),O&&this.finish(),z}then(e,r){return this.finished.then(e,r)}get duration(){return vu(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+vu(e)}get time(){return vu(this.currentTime)}set time(e){var r;e=Hd(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Bl.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=vu(this.currentTime))}play(){var a,s;if(this.isStopped)return;const{driver:e=GAe,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(a=this.options).onPlay)==null||s.call(a);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function uSe(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ep=t=>t*180/Math.PI,g8=t=>{const e=ep(Math.atan2(t[1],t[0]));return x8(e)},dSe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:g8,rotateZ:g8,skewX:t=>ep(Math.atan(t[1])),skewY:t=>ep(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},x8=t=>(t=t%360,t<0&&(t+=360),t),kz=g8,Iz=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Oz=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),fSe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Iz,scaleY:Oz,scale:t=>(Iz(t)+Oz(t))/2,rotateX:t=>x8(ep(Math.atan2(t[6],t[5]))),rotateY:t=>x8(ep(Math.atan2(-t[2],t[0]))),rotateZ:kz,rotate:kz,skewX:t=>ep(Math.atan(t[4])),skewY:t=>ep(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function v8(t){return t.includes("scale")?1:0}function b8(t,e){if(!t||t==="none")return v8(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(r)n=fSe,a=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=dSe,a=l}if(!a)return v8(e);const s=n[e],o=a[1].split(",").map(mSe);return typeof s=="function"?s(o):o[s]}const hSe=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return b8(r,e)};function mSe(t){return parseFloat(t.trim())}const ov=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lv=new Set(ov),Rz=t=>t===iv||t===ln,pSe=new Set(["x","y","z"]),gSe=ov.filter(t=>!pSe.has(t));function xSe(t){const e=[];return gSe.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const bp={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>b8(e,"x"),y:(t,{transform:e})=>b8(e,"y")};bp.translateX=bp.x;bp.translateY=bp.y;const yp=new Set;let y8=!1,w8=!1,_8=!1;function sne(){if(w8){const t=Array.from(yp).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const a=xSe(n);a.length&&(r.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([s,o])=>{var l;(l=n.getValue(s))==null||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}w8=!1,y8=!1,yp.forEach(t=>t.complete(_8)),yp.clear()}function ine(){yp.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(w8=!0)})}function vSe(){_8=!0,ine(),sne(),_8=!1}class HP{constructor(e,r,n,a,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=a,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(yp.add(this),y8||(y8=!0,us.read(ine),us.resolveKeyframes(sne))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:a}=this;if(e[0]===null){const s=a==null?void 0:a.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(n&&r){const l=n.readValue(r,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&s===void 0&&a.set(e[0])}uSe(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yp.delete(this)}cancel(){this.state==="scheduled"&&(yp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const bSe=t=>t.startsWith("--");function ySe(t,e,r){bSe(e)?t.style.setProperty(e,r):t.style[e]=r}const wSe=IP(()=>window.ScrollTimeline!==void 0),_Se={};function NSe(t,e){const r=IP(t);return()=>_Se[e]??r()}const one=NSe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),E2=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Pz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:E2([0,.65,.55,1]),circOut:E2([.55,0,1,.45]),backIn:E2([.31,.01,.66,-.59]),backOut:E2([.33,1.53,.69,.99])};function lne(t,e){if(t)return typeof t=="function"?one()?rne(t,e):"ease-out":Gre(t)?E2(t):Array.isArray(t)?t.map(r=>lne(r,e)||Pz.easeOut):Pz[t]}function ESe(t,e,r,{delay:n=0,duration:a=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[e]:r};c&&(d.offset=c);const h=lne(l,a);Array.isArray(h)&&(d.easing=h);const p={delay:n,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),t.animate(d,p)}function cne(t){return typeof t=="function"&&"applyToOptions"in t}function ASe({type:t,...e}){return cne(t)&&one()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class SSe extends VP{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:a,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,kP(typeof e.type!="string");const u=ASe(e);this.animation=ESe(r,n,a,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=zP(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):ySe(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return vu(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+vu(e)}get time(){return vu(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Hd(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&wSe()?(this.animation.timeline=e,Eu):r(this)}}const une={anticipate:Vre,backInOut:zre,circInOut:Hre};function jSe(t){return t in une}function TSe(t){typeof t.ease=="string"&&jSe(t.ease)&&(t.ease=une[t.ease])}const Dz=10;class CSe extends SSe{constructor(e){TSe(e),ane(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:a,element:s,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const l=new $P({...o,autoplay:!1}),c=Hd(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-Dz).value,l.sample(c).value,Dz),l.stop()}}const Mz=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(X0.test(t)||t==="0")&&!t.startsWith("url("));function kSe(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function ISe(t,e,r,n){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Mz(a,e),l=Mz(s,e);return!o||!l?!1:kSe(t)||(r==="spring"||cne(r))&&n}function N8(t){t.duration=0,t.type="keyframes"}const OSe=new Set(["opacity","clipPath","filter","transform"]),RSe=IP(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function PSe(t){var d;const{motionValue:e,name:r,repeatDelay:n,repeatType:a,damping:s,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return RSe()&&r&&OSe.has(r)&&(r!=="transform"||!u)&&!c&&!n&&a!=="mirror"&&s!==0&&o!=="inertia"}const DSe=40;class MSe extends VP{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var b;super(),this.stop=()=>{var w,_;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=Bl.now();const p={autoplay:e,delay:r,type:n,repeat:a,repeatDelay:s,repeatType:o,name:c,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||HP;this.keyframeResolver=new g(l,(w,_,N)=>this.onKeyframesResolved(w,_,p,!N),c,u,d),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,r,n,a){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=Bl.now(),ISe(e,s,o,l)||((uh.instantAnimations||!c)&&(d==null||d(zP(e,n,r))),e[0]=e[e.length-1],N8(n),n.repeat=0);const p={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>DSe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},g=!u&&PSe(p)?new CSe({...p,element:p.motionValue.owner.current}):new $P(p);g.finished.then(()=>this.notifyFinished()).catch(Eu),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),vSe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const LSe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function FSe(t){const e=LSe.exec(t);if(!e)return[,];const[,r,n,a]=e;return[`--${r??n}`,a]}function dne(t,e,r=1){const[n,a]=FSe(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return Rre(o)?parseFloat(o):o}return MP(a)?dne(a,e,r+1):a}function qP(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const fne=new Set(["width","height","top","left","right","bottom",...ov]),BSe={test:t=>t==="auto",parse:t=>t},hne=t=>e=>e.test(t),mne=[iv,ln,qd,Kh,kAe,CAe,BSe],Lz=t=>mne.find(hne(t));function USe(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Dre(t):!0}const zSe=new Set(["brightness","contrast","saturate","opacity"]);function VSe(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(LP)||[];if(!n)return t;const a=r.replace(n,"");let s=zSe.has(e)?1:0;return n!==r&&(s*=100),e+"("+s+a+")"}const $Se=/\b([a-z-]*)\(.*?\)/gu,E8={...X0,getAnimatableNone:t=>{const e=t.match($Se);return e?e.map(VSe).join(" "):t}},Fz={...iv,transform:Math.round},HSe={rotate:Kh,rotateX:Kh,rotateY:Kh,rotateZ:Kh,scale:e_,scaleX:e_,scaleY:e_,scaleZ:e_,skew:Kh,skewX:Kh,skewY:Kh,distance:ln,translateX:ln,translateY:ln,translateZ:ln,x:ln,y:ln,z:ln,perspective:ln,transformPerspective:ln,opacity:ry,originX:Az,originY:Az,originZ:ln},GP={borderWidth:ln,borderTopWidth:ln,borderRightWidth:ln,borderBottomWidth:ln,borderLeftWidth:ln,borderRadius:ln,radius:ln,borderTopLeftRadius:ln,borderTopRightRadius:ln,borderBottomRightRadius:ln,borderBottomLeftRadius:ln,width:ln,maxWidth:ln,height:ln,maxHeight:ln,top:ln,right:ln,bottom:ln,left:ln,padding:ln,paddingTop:ln,paddingRight:ln,paddingBottom:ln,paddingLeft:ln,margin:ln,marginTop:ln,marginRight:ln,marginBottom:ln,marginLeft:ln,backgroundPositionX:ln,backgroundPositionY:ln,...HSe,zIndex:Fz,fillOpacity:ry,strokeOpacity:ry,numOctaves:Fz},qSe={...GP,color:ii,backgroundColor:ii,outlineColor:ii,fill:ii,stroke:ii,borderColor:ii,borderTopColor:ii,borderRightColor:ii,borderBottomColor:ii,borderLeftColor:ii,filter:E8,WebkitFilter:E8},pne=t=>qSe[t];function gne(t,e){let r=pne(t);return r!==E8&&(r=X0),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const GSe=new Set(["auto","none","0"]);function WSe(t,e,r){let n=0,a;for(;n<t.length&&!a;){const s=t[n];typeof s=="string"&&!GSe.has(s)&&ny(s).values.length&&(a=t[n]),n++}if(a&&r)for(const s of e)t[s]=gne(r,a)}class KSe extends HP{constructor(e,r,n,a,s){super(e,r,n,a,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),MP(u))){const d=dne(u,r.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!fne.has(n)||e.length!==2)return;const[a,s]=e,o=Lz(a),l=Lz(s);if(o!==l)if(Rz(o)&&Rz(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else bp[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let a=0;a<e.length;a++)(e[a]===null||USe(e[a]))&&n.push(a);n.length&&WSe(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bp[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&e.getValue(n,a).jump(a,!1)}measureEndState(){var l;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const a=e.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=n.length-1,o=n[s];n[s]=bp[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function XSe(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const a=(r==null?void 0:r[t])??n.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const xne=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function vne(t){return Pre(t)&&"offsetHeight"in t}const Bz=30,YSe=t=>!isNaN(parseFloat(t));class ZSe{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var s;const a=Bl.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Bl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=YSe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new OP);const n=this.events[e].add(r);return e==="change"?()=>{n(),us.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Bl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Bz)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Bz);return Mre(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cx(t,e){return new ZSe(t,e)}const{schedule:WP}=Wre(queueMicrotask,!1),Gu={x:!1,y:!1};function bne(){return Gu.x||Gu.y}function QSe(t){return t==="x"||t==="y"?Gu[t]?null:(Gu[t]=!0,()=>{Gu[t]=!1}):Gu.x||Gu.y?null:(Gu.x=Gu.y=!0,()=>{Gu.x=Gu.y=!1})}function yne(t,e){const r=XSe(t),n=new AbortController,a={passive:!0,...e,signal:n.signal};return[r,a,()=>n.abort()]}function Uz(t){return!(t.pointerType==="touch"||bne())}function JSe(t,e,r={}){const[n,a,s]=yne(t,r),o=l=>{if(!Uz(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const d=h=>{Uz(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,a)};return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),s}const wne=(t,e)=>e?t===e?!0:wne(t,e.parentElement):!1,KP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,e6e=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function t6e(t){return e6e.has(t.tagName)||t.tabIndex!==-1}const UN=new WeakSet;function zz(t){return e=>{e.key==="Enter"&&t(e)}}function $j(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const r6e=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=zz(()=>{if(UN.has(r))return;$j(r,"down");const a=zz(()=>{$j(r,"up")}),s=()=>$j(r,"cancel");r.addEventListener("keyup",a,e),r.addEventListener("blur",s,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Vz(t){return KP(t)&&!bne()}function n6e(t,e,r={}){const[n,a,s]=yne(t,r),o=l=>{const c=l.currentTarget;if(!Vz(l))return;UN.add(c);const u=e(c,l),d=(g,b)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),UN.has(c)&&UN.delete(c),Vz(g)&&typeof u=="function"&&u(g,{success:b})},h=g=>{d(g,c===window||c===document||r.useGlobalTarget||wne(c,g.target))},p=g=>{d(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",p,a)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),vne(l)&&(l.addEventListener("focus",u=>r6e(u,a)),!t6e(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function _ne(t){return Pre(t)&&"ownerSVGElement"in t}function a6e(t){return _ne(t)&&t.tagName==="svg"}const Vo=t=>!!(t&&t.getVelocity),s6e=[...mne,ii,X0],i6e=t=>s6e.find(hne(t)),XP=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function $z(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function o6e(...t){return e=>{let r=!1;const n=t.map(a=>{const s=$z(a,e);return!r&&typeof s=="function"&&(r=!0),s});if(r)return()=>{for(let a=0;a<n.length;a++){const s=n[a];typeof s=="function"?s():$z(t[a],null)}}}}function l6e(...t){return A.useCallback(o6e(...t),t)}class c6e extends A.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,a=vne(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u6e({children:t,isPresent:e,anchorX:r,root:n}){const a=A.useId(),s=A.useRef(null),o=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=A.useContext(XP),c=l6e(s,t==null?void 0:t.ref);return A.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:p,right:g}=o.current;if(e||!s.current||!u||!d)return;const b=r==="left"?`left: ${p}`:`right: ${g}`;s.current.dataset.motionPopId=a;const w=document.createElement("style");l&&(w.nonce=l);const _=n??document.head;return _.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${b}px !important;
            top: ${h}px !important;
          }
        `),()=>{_.contains(w)&&_.removeChild(w)}},[e]),i.jsx(c6e,{isPresent:e,childRef:s,sizeRef:o,children:A.cloneElement(t,{ref:c})})}const d6e=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:s,mode:o,anchorX:l,root:c})=>{const u=SP(f6e),d=A.useId();let h=!0,p=A.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:r,custom:a,onExitComplete:g=>{u.set(g,!0);for(const b of u.values())if(!b)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return s&&h&&(p={...p}),A.useMemo(()=>{u.forEach((g,b)=>u.set(b,!1))},[r]),A.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(t=i.jsx(u6e,{isPresent:r,anchorX:l,root:c,children:t})),i.jsx(UA.Provider,{value:p,children:t})};function f6e(){return new Map}function Nne(t=!0){const e=A.useContext(UA);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=e,s=A.useId();A.useEffect(()=>{if(t)return a(s)},[t]);const o=A.useCallback(()=>t&&n&&n(s),[s,n,t]);return!r&&n?[!1,o]:[!0]}const t_=t=>t.key||"";function Hz(t){const e=[];return A.Children.forEach(t,r=>{A.isValidElement(r)&&e.push(r)}),e}const vw=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,d]=Nne(o),h=A.useMemo(()=>Hz(t),[t]),p=o&&!u?[]:h.map(t_),g=A.useRef(!0),b=A.useRef(h),w=SP(()=>new Map),[_,N]=A.useState(h),[S,T]=A.useState(h);Ore(()=>{g.current=!1,b.current=h;for(let G=0;G<S.length;G++){const O=t_(S[G]);p.includes(O)?w.delete(O):w.get(O)!==!0&&w.set(O,!1)}},[S,p.length,p.join("-")]);const R=[];if(h!==_){let G=[...h];for(let O=0;O<S.length;O++){const D=S[O],I=t_(D);p.includes(I)||(G.splice(O,0,D),R.push(D))}return s==="wait"&&R.length&&(G=R),T(Hz(G)),N(h),null}const{forceRender:z}=A.useContext(AP);return i.jsx(i.Fragment,{children:S.map(G=>{const O=t_(G),D=o&&!u?!1:h===S||p.includes(O),I=()=>{if(w.has(O))w.set(O,!0);else return;let V=!0;w.forEach(P=>{P||(V=!1)}),V&&(z==null||z(),T(b.current),o&&(d==null||d()),n&&n())};return i.jsx(d6e,{isPresent:D,initial:!g.current||r?void 0:!1,custom:e,presenceAffectsLayout:a,mode:s,root:c,onExitComplete:D?void 0:I,anchorX:l,children:G},O)})})},Ene=A.createContext({strict:!1}),qz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kx={};for(const t in qz)kx[t]={isEnabled:e=>qz[t].some(r=>!!e[r])};function h6e(t){for(const e in t)kx[e]={...kx[e],...t[e]}}const m6e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function b3(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||m6e.has(t)}let Ane=t=>!b3(t);function p6e(t){typeof t=="function"&&(Ane=e=>e.startsWith("on")?!b3(e):t(e))}try{p6e(require("@emotion/is-prop-valid").default)}catch{}function g6e(t,e,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(Ane(a)||r===!0&&b3(a)||!e&&!b3(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}const zA=A.createContext({});function VA(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ay(t){return typeof t=="string"||Array.isArray(t)}const YP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ZP=["initial",...YP];function $A(t){return VA(t.animate)||ZP.some(e=>ay(t[e]))}function Sne(t){return!!($A(t)||t.variants)}function x6e(t,e){if($A(t)){const{initial:r,animate:n}=t;return{initial:r===!1||ay(r)?r:void 0,animate:ay(n)?n:void 0}}return t.inherit!==!1?e:{}}function v6e(t){const{initial:e,animate:r}=x6e(t,A.useContext(zA));return A.useMemo(()=>({initial:e,animate:r}),[Gz(e),Gz(r)])}function Gz(t){return Array.isArray(t)?t.join(" "):t}const sy={};function b6e(t){for(const e in t)sy[e]=t[e],DP(e)&&(sy[e].isCSSVariable=!0)}function jne(t,{layout:e,layoutId:r}){return lv.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!sy[t]||t==="opacity")}const y6e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w6e=ov.length;function _6e(t,e,r){let n="",a=!0;for(let s=0;s<w6e;s++){const o=ov[s],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=xne(l,GP[o]);if(!c){a=!1;const d=y6e[o]||o;n+=`${d}(${u}) `}r&&(e[o]=u)}}return n=n.trim(),r?n=r(e,a?"":n):a&&(n="none"),n}function QP(t,e,r){const{style:n,vars:a,transformOrigin:s}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(lv.has(c)){o=!0;continue}else if(DP(c)){a[c]=u;continue}else{const d=xne(u,GP[c]);c.startsWith("origin")?(l=!0,s[c]=d):n[c]=d}}if(e.transform||(o||r?n.transform=_6e(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;n.transformOrigin=`${c} ${u} ${d}`}}const JP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Tne(t,e,r){for(const n in e)!Vo(e[n])&&!jne(n,r)&&(t[n]=e[n])}function N6e({transformTemplate:t},e){return A.useMemo(()=>{const r=JP();return QP(r,e,t),Object.assign({},r.vars,r.style)},[e])}function E6e(t,e){const r=t.style||{},n={};return Tne(n,r,t),Object.assign(n,N6e(t,e)),n}function A6e(t,e){const r={},n=E6e(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const S6e={offset:"stroke-dashoffset",array:"stroke-dasharray"},j6e={offset:"strokeDashoffset",array:"strokeDasharray"};function T6e(t,e,r=1,n=0,a=!0){t.pathLength=1;const s=a?S6e:j6e;t[s.offset]=ln.transform(-n);const o=ln.transform(e),l=ln.transform(r);t[s.array]=`${o} ${l}`}function Cne(t,{attrX:e,attrY:r,attrScale:n,pathLength:a,pathSpacing:s=1,pathOffset:o=0,...l},c,u,d){if(QP(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),a!==void 0&&T6e(h,a,s,o,!1)}const kne=()=>({...JP(),attrs:{}}),Ine=t=>typeof t=="string"&&t.toLowerCase()==="svg";function C6e(t,e,r,n){const a=A.useMemo(()=>{const s=kne();return Cne(s,e,Ine(n),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Tne(s,t.style,t),a.style={...s,...a.style}}return a}const k6e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function e7(t){return typeof t!="string"||t.includes("-")?!1:!!(k6e.indexOf(t)>-1||/[A-Z]/u.test(t))}function I6e(t,e,r,{latestValues:n},a,s=!1){const l=(e7(t)?C6e:A6e)(e,n,a,t),c=g6e(e,typeof t=="string",s),u=t!==A.Fragment?{...c,...l,ref:r}:{},{children:d}=e,h=A.useMemo(()=>Vo(d)?d.get():d,[d]);return A.createElement(t,{...u,children:h})}function Wz(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function t7(t,e,r,n){if(typeof e=="function"){const[a,s]=Wz(n);e=e(r!==void 0?r:t.custom,a,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,s]=Wz(n);e=e(r!==void 0?r:t.custom,a,s)}return e}function zN(t){return Vo(t)?t.get():t}function O6e({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,a){return{latestValues:R6e(r,n,a,t),renderState:e()}}function R6e(t,e,r,n){const a={},s=n(t,{});for(const p in s)a[p]=zN(s[p]);let{initial:o,animate:l}=t;const c=$A(t),u=Sne(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!VA(h)){const p=Array.isArray(h)?h:[h];for(let g=0;g<p.length;g++){const b=t7(t,p[g]);if(b){const{transitionEnd:w,transition:_,...N}=b;for(const S in N){let T=N[S];if(Array.isArray(T)){const R=d?T.length-1:0;T=T[R]}T!==null&&(a[S]=T)}for(const S in w)a[S]=w[S]}}}return a}const One=t=>(e,r)=>{const n=A.useContext(zA),a=A.useContext(UA),s=()=>O6e(t,e,n,a);return r?s():SP(s)};function r7(t,e,r){var s;const{style:n}=t,a={};for(const o in n)(Vo(n[o])||e.style&&Vo(e.style[o])||jne(o,t)||((s=r==null?void 0:r.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(a[o]=n[o]);return a}const P6e=One({scrapeMotionValuesFromProps:r7,createRenderState:JP});function Rne(t,e,r){const n=r7(t,e,r);for(const a in t)if(Vo(t[a])||Vo(e[a])){const s=ov.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[s]=t[a]}return n}const D6e=One({scrapeMotionValuesFromProps:Rne,createRenderState:kne}),M6e=Symbol.for("motionComponentSymbol");function v1(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function L6e(t,e,r){return A.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):v1(r)&&(r.current=n))},[e])}const n7=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),F6e="framerAppearId",Pne="data-"+n7(F6e),Dne=A.createContext({});function B6e(t,e,r,n,a){var w,_;const{visualElement:s}=A.useContext(zA),o=A.useContext(Ene),l=A.useContext(UA),c=A.useContext(XP).reducedMotion,u=A.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:s,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=A.useContext(Dne);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&U6e(u.current,r,a,h);const p=A.useRef(!1);A.useInsertionEffect(()=>{d&&p.current&&d.update(r,l)});const g=r[Pne],b=A.useRef(!!g&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,g))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,g)));return Ore(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),b.current&&d.animationState&&d.animationState.animateChanges())}),A.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var N;(N=window.MotionHandoffMarkAsComplete)==null||N.call(window,g)}),b.current=!1),d.enteringChildren=void 0)}),d}function U6e(t,e,r,n){const{layoutId:a,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Mne(t.parent)),t.projection.setOptions({layoutId:a,layout:s,alwaysMeasureLayout:!!o||l&&v1(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function Mne(t){if(t)return t.options.allowProjection!==!1?t.projection:Mne(t.parent)}function Hj(t,{forwardMotionProps:e=!1}={},r,n){r&&h6e(r);const a=e7(t)?D6e:P6e;function s(l,c){let u;const d={...A.useContext(XP),...l,layoutId:z6e(l)},{isStatic:h}=d,p=v6e(l),g=a(l,h);if(!h&&jP){V6e();const b=$6e(d);u=b.MeasureLayout,p.visualElement=B6e(t,g,d,n,b.ProjectionNode)}return i.jsxs(zA.Provider,{value:p,children:[u&&p.visualElement?i.jsx(u,{visualElement:p.visualElement,...d}):null,I6e(t,l,L6e(g,p.visualElement,c),g,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=A.forwardRef(s);return o[M6e]=t,o}function z6e({layoutId:t}){const e=A.useContext(AP).id;return e&&t!==void 0?e+"-"+t:t}function V6e(t,e){A.useContext(Ene).strict}function $6e(t){const{drag:e,layout:r}=kx;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function H6e(t,e){if(typeof Proxy>"u")return Hj;const r=new Map,n=(s,o)=>Hj(s,o,t,e),a=(s,o)=>n(s,o);return new Proxy(a,{get:(s,o)=>o==="create"?n:(r.has(o)||r.set(o,Hj(o,void 0,t,e)),r.get(o))})}function Lne({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function q6e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function G6e(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function qj(t){return t===void 0||t===1}function A8({scale:t,scaleX:e,scaleY:r}){return!qj(t)||!qj(e)||!qj(r)}function Fm(t){return A8(t)||Fne(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Fne(t){return Kz(t.x)||Kz(t.y)}function Kz(t){return t&&t!=="0%"}function y3(t,e,r){const n=t-r,a=e*n;return r+a}function Xz(t,e,r,n,a){return a!==void 0&&(t=y3(t,a,n)),y3(t,r,n)+e}function S8(t,e=0,r=1,n,a){t.min=Xz(t.min,e,r,n,a),t.max=Xz(t.max,e,r,n,a)}function Bne(t,{x:e,y:r}){S8(t.x,e.translate,e.scale,e.originPoint),S8(t.y,r.translate,r.scale,r.originPoint)}const Yz=.999999999999,Zz=1.0000000000001;function W6e(t,e,r,n=!1){const a=r.length;if(!a)return;e.x=e.y=1;let s,o;for(let l=0;l<a;l++){s=r[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&y1(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Bne(t,o)),n&&Fm(s.latestValues)&&y1(t,s.latestValues))}e.x<Zz&&e.x>Yz&&(e.x=1),e.y<Zz&&e.y>Yz&&(e.y=1)}function b1(t,e){t.min=t.min+e,t.max=t.max+e}function Qz(t,e,r,n,a=.5){const s=ws(t.min,t.max,a);S8(t,e,r,s,n)}function y1(t,e){Qz(t.x,e.x,e.scaleX,e.scale,e.originX),Qz(t.y,e.y,e.scaleY,e.scale,e.originY)}function Une(t,e){return Lne(G6e(t.getBoundingClientRect(),e))}function K6e(t,e,r){const n=Une(t,r),{scroll:a}=e;return a&&(b1(n.x,a.offset.x),b1(n.y,a.offset.y)),n}const Jz=()=>({translate:0,scale:1,origin:0,originPoint:0}),w1=()=>({x:Jz(),y:Jz()}),eV=()=>({min:0,max:0}),qs=()=>({x:eV(),y:eV()}),j8={current:null},zne={current:!1};function X6e(){if(zne.current=!0,!!jP)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>j8.current=t.matches;t.addEventListener("change",e),e()}else j8.current=!1}const Y6e=new WeakMap;function Z6e(t,e,r){for(const n in e){const a=e[n],s=r[n];if(Vo(a))t.addValue(n,a);else if(Vo(s))t.addValue(n,Cx(a,{owner:t}));else if(s!==a)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(n);t.addValue(n,Cx(o!==void 0?o:a,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const tV=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Q6e{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=HP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Bl.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,us.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=$A(r),this.isVariantNode=Sne(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in h){const g=h[p];c[p]!==void 0&&Vo(g)&&g.set(c[p])}}mount(e){var r;this.current=e,Y6e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),zne.current||X6e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:j8.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),K0(this.notifyUpdate),K0(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=lv.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&us.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{a(),s&&s(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kx){const r=kx[e];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<tV.length;n++){const a=tV[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const s="on"+a,o=e[s];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=Z6e(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Cx(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Rre(n)||Dre(n))?n=parseFloat(n):!i6e(n)&&X0.test(r)&&(n=gne(e,r)),this.setBaseTarget(e,Vo(n)?n.get():n)),Vo(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var s;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=t7(this.props,r,(s=this.presenceContext)==null?void 0:s.custom);o&&(n=o[e])}if(r&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Vo(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new OP),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){WP.render(this.render)}}class Vne extends Q6e{constructor(){super(...arguments),this.KeyframeResolver=KSe}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vo(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function $ne(t,{style:e,vars:r},n,a){const s=t.style;let o;for(o in e)s[o]=e[o];a==null||a.applyProjectionStyles(s,n);for(o in r)s.setProperty(o,r[o])}function J6e(t){return window.getComputedStyle(t)}class eje extends Vne{constructor(){super(...arguments),this.type="html",this.renderInstance=$ne}readValueFromInstance(e,r){var n;if(lv.has(r))return(n=this.projection)!=null&&n.isProjecting?v8(r):hSe(e,r);{const a=J6e(e),s=(DP(r)?a.getPropertyValue(r):a[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Une(e,r)}build(e,r,n){QP(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return r7(e,r,n)}}const Hne=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function tje(t,e,r,n){$ne(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(Hne.has(a)?a:n7(a),e.attrs[a])}class rje extends Vne{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qs}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(lv.has(r)){const n=pne(r);return n&&n.default||0}return r=Hne.has(r)?r:n7(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return Rne(e,r,n)}build(e,r,n){Cne(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,a){tje(e,r,n,a)}mount(e){this.isSVGTag=Ine(e.tagName),super.mount(e)}}const nje=(t,e)=>e7(t)?new rje(e):new eje(e,{allowProjection:t!==A.Fragment});function z1(t,e,r){const n=t.getProps();return t7(n,e,r!==void 0?r:n.custom,t)}const T8=t=>Array.isArray(t);function aje(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Cx(r))}function sje(t){return T8(t)?t[t.length-1]||0:t}function ije(t,e){const r=z1(t,e);let{transitionEnd:n={},transition:a={},...s}=r||{};s={...s,...n};for(const o in s){const l=sje(s[o]);aje(t,o,l)}}function oje(t){return!!(Vo(t)&&t.add)}function C8(t,e){const r=t.getValue("willChange");if(oje(r))return r.add(e);if(!r&&uh.WillChange){const n=new uh.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function qne(t){return t.props[Pne]}const lje=t=>t!==null;function cje(t,{repeat:e,repeatType:r="loop"},n){const a=t.filter(lje),s=e&&r!=="loop"&&e%2===1?0:a.length-1;return a[s]}const uje={type:"spring",stiffness:500,damping:25,restSpeed:10},dje=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fje={type:"keyframes",duration:.8},hje={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mje=(t,{keyframes:e})=>e.length>2?fje:lv.has(t)?t.startsWith("scale")?dje(e[1]):uje:hje;function pje({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const a7=(t,e,r,n={},a,s)=>o=>{const l=qP(n,t)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Hd(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:a};pje(l)||Object.assign(d,mje(t,d)),d.duration&&(d.duration=Hd(d.duration)),d.repeatDelay&&(d.repeatDelay=Hd(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(N8(d),d.delay===0&&(h=!0)),(uh.instantAnimations||uh.skipAnimations)&&(h=!0,N8(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!s&&e.get()!==void 0){const p=cje(d.keyframes,l);if(p!==void 0){us.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new $P(d):new MSe(d)};function gje({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Gne(t,e,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(s=n);const c=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),p=l[d];if(p===void 0||u&&gje(u,d))continue;const g={delay:r,...qP(s||{},d)},b=h.get();if(b!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===b&&!g.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const N=qne(t);if(N){const S=window.MotionHandoffAnimation(N,d,us);S!==null&&(g.startTime=S,w=!0)}}C8(t,d),h.start(a7(d,h,p,t.shouldReduceMotion&&fne.has(d)?{type:!1}:g,t,w));const _=h.animation;_&&c.push(_)}return o&&Promise.all(c).then(()=>{us.update(()=>{o&&ije(t,o)})}),c}function Wne(t,e,r,n=0,a=1){const s=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*n;return typeof r=="function"?r(s,o):a===1?s*n:l-s*n}function k8(t,e,r={}){var c;const n=z1(t,e,r.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const s=n?()=>Promise.all(Gne(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=a;return xje(t,e,u,d,h,p,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(r.delay)])}function xje(t,e,r=0,n=0,a=0,s=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(k8(c,e,{...o,delay:r+(typeof n=="function"?0:n)+Wne(t.variantChildren,c,n,a,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function vje(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(s=>k8(t,s,r));n=Promise.all(a)}else if(typeof e=="string")n=k8(t,e,r);else{const a=typeof e=="function"?z1(t,e,r.custom):e;n=Promise.all(Gne(t,a,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Kne(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const bje=ZP.length;function Xne(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Xne(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<bje;r++){const n=ZP[r],a=t.props[n];(ay(a)||a===!1)&&(e[n]=a)}return e}const yje=[...YP].reverse(),wje=YP.length;function _je(t){return e=>Promise.all(e.map(({animation:r,options:n})=>vje(t,r,n)))}function Nje(t){let e=_je(t),r=rV(),n=!0;const a=c=>(u,d)=>{var p;const h=z1(t,d,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:g,transitionEnd:b,...w}=h;u={...u,...w,...b}}return u};function s(c){e=c(t)}function o(c){const{props:u}=t,d=Xne(t.parent)||{},h=[],p=new Set;let g={},b=1/0;for(let _=0;_<wje;_++){const N=yje[_],S=r[N],T=u[N]!==void 0?u[N]:d[N],R=ay(T),z=N===c?S.isActive:null;z===!1&&(b=_);let G=T===d[N]&&T!==u[N]&&R;if(G&&n&&t.manuallyAnimateOnMount&&(G=!1),S.protectedKeys={...g},!S.isActive&&z===null||!T&&!S.prevProp||VA(T)||typeof T=="boolean")continue;const O=Eje(S.prevProp,T);let D=O||N===c&&S.isActive&&!G&&R||_>b&&R,I=!1;const V=Array.isArray(T)?T:[T];let P=V.reduce(a(N),{});z===!1&&(P={});const{prevResolvedValues:B={}}=S,F={...B,...P},ee=ne=>{D=!0,p.has(ne)&&(I=!0,p.delete(ne)),S.needsAnimating[ne]=!0;const ae=t.getValue(ne);ae&&(ae.liveStyle=!1)};for(const ne in F){const ae=P[ne],me=B[ne];if(g.hasOwnProperty(ne))continue;let Te=!1;T8(ae)&&T8(me)?Te=!Kne(ae,me):Te=ae!==me,Te?ae!=null?ee(ne):p.add(ne):ae!==void 0&&p.has(ne)?ee(ne):S.protectedKeys[ne]=!0}S.prevProp=T,S.prevResolvedValues=P,S.isActive&&(g={...g,...P}),n&&t.blockInitialAnimation&&(D=!1);const Z=G&&O;D&&(!Z||I)&&h.push(...V.map(ne=>{const ae={type:N};if(typeof ne=="string"&&n&&!Z&&t.manuallyAnimateOnMount&&t.parent){const{parent:me}=t,Te=z1(me,ne);if(me.enteringChildren&&Te){const{delayChildren:we}=Te.transition||{};ae.delay=Wne(me.enteringChildren,t,we)}}return{animation:ne,options:ae}}))}if(p.size){const _={};if(typeof u.initial!="boolean"){const N=z1(t,Array.isArray(u.initial)?u.initial[0]:u.initial);N&&N.transition&&(_.transition=N.transition)}p.forEach(N=>{const S=t.getBaseTarget(N),T=t.getValue(N);T&&(T.liveStyle=!0),_[N]=S??null}),h.push({animation:_})}let w=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const p in r)r[p].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>r,reset:()=>{r=rV()}}}function Eje(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Kne(e,t):!1}function Cm(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rV(){return{animate:Cm(!0),whileInView:Cm(),whileHover:Cm(),whileTap:Cm(),whileDrag:Cm(),whileFocus:Cm(),exit:Cm()}}class mm{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Aje extends mm{constructor(e){super(e),e.animationState||(e.animationState=Nje(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();VA(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Sje=0;class jje extends mm{constructor(){super(...arguments),this.id=Sje++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);r&&!e&&a.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Tje={animation:{Feature:Aje},exit:{Feature:jje}};function iy(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function bw(t){return{point:{x:t.pageX,y:t.pageY}}}const Cje=t=>e=>KP(e)&&t(e,bw(e));function nb(t,e,r,n){return iy(t,e,Cje(r),n)}const Yne=1e-4,kje=1-Yne,Ije=1+Yne,Zne=.01,Oje=0-Zne,Rje=0+Zne;function ml(t){return t.max-t.min}function Pje(t,e,r){return Math.abs(t-e)<=r}function nV(t,e,r,n=.5){t.origin=n,t.originPoint=ws(e.min,e.max,t.origin),t.scale=ml(r)/ml(e),t.translate=ws(r.min,r.max,t.origin)-t.originPoint,(t.scale>=kje&&t.scale<=Ije||isNaN(t.scale))&&(t.scale=1),(t.translate>=Oje&&t.translate<=Rje||isNaN(t.translate))&&(t.translate=0)}function ab(t,e,r,n){nV(t.x,e.x,r.x,n?n.originX:void 0),nV(t.y,e.y,r.y,n?n.originY:void 0)}function aV(t,e,r){t.min=r.min+e.min,t.max=t.min+ml(e)}function Dje(t,e,r){aV(t.x,e.x,r.x),aV(t.y,e.y,r.y)}function sV(t,e,r){t.min=e.min-r.min,t.max=t.min+ml(e)}function sb(t,e,r){sV(t.x,e.x,r.x),sV(t.y,e.y,r.y)}function ru(t){return[t("x"),t("y")]}const Qne=({current:t})=>t?t.ownerDocument.defaultView:null,iV=(t,e)=>Math.abs(t-e);function Mje(t,e){const r=iV(t.x,e.x),n=iV(t.y,e.y);return Math.sqrt(r**2+n**2)}class Jne{constructor(e,r,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Wj(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,b=Mje(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!b)return;const{point:w}=p,{timestamp:_}=go;this.history.push({...w,timestamp:_});const{onStart:N,onMove:S}=this.handlers;g||(N&&N(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Gj(g,this.transformPagePoint),us.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Wj(p.type==="pointercancel"?this.lastMoveEventInfo:Gj(g,this.transformPagePoint),this.history);this.startEvent&&b&&b(p,N),w&&w(p,N)},!KP(e))return;this.dragSnapToOrigin=s,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const l=bw(e),c=Gj(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=go;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(e,Wj(c,this.history)),this.removeListeners=pw(nb(this.contextWindow,"pointermove",this.handlePointerMove),nb(this.contextWindow,"pointerup",this.handlePointerUp),nb(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),K0(this.updatePoint)}}function Gj(t,e){return e?{point:e(t.point)}:t}function oV(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wj({point:t},e){return{point:t,delta:oV(t,eae(e)),offset:oV(t,Lje(e)),velocity:Fje(e,.1)}}function Lje(t){return t[0]}function eae(t){return t[t.length-1]}function Fje(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=eae(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>Hd(e)));)r--;if(!n)return{x:0,y:0};const s=vu(a.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(a.x-n.x)/s,y:(a.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Bje(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?ws(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?ws(r,t,n.max):Math.min(t,r)),t}function lV(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Uje(t,{top:e,left:r,bottom:n,right:a}){return{x:lV(t.x,r,a),y:lV(t.y,e,n)}}function cV(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function zje(t,e){return{x:cV(t.x,e.x),y:cV(t.y,e.y)}}function Vje(t,e){let r=.5;const n=ml(t),a=ml(e);return a>n?r=ty(e.min,e.max-n,t.min):n>a&&(r=ty(t.min,t.max-a,e.min)),ch(0,1,r)}function $je(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const I8=.35;function Hje(t=I8){return t===!1?t=0:t===!0&&(t=I8),{x:uV(t,"left","right"),y:uV(t,"top","bottom")}}function uV(t,e,r){return{min:dV(t,e),max:dV(t,r)}}function dV(t,e){return typeof t=="number"?t:t[e]||0}const qje=new WeakMap;class Gje{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(bw(h).point)},o=(h,p)=>{const{drag:g,dragPropagation:b,onDragStart:w}=this.getProps();if(g&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=QSe(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ru(N=>{let S=this.getAxisMotionValue(N).get()||0;if(qd.test(S)){const{projection:T}=this.visualElement;if(T&&T.layout){const R=T.layout.layoutBox[N];R&&(S=ml(R)*(parseFloat(S)/100))}}this.originPoint[N]=S}),w&&us.postRender(()=>w(h,p)),C8(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},l=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:b,onDirectionLock:w,onDrag:_}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:N}=p;if(b&&this.currentDirection===null){this.currentDirection=Wje(N),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",p.point,N),this.updateAxis("y",p.point,N),this.visualElement.render(),_&&_(h,p)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>ru(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Jne(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:Qne(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,a=r||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&us.postRender(()=>l(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:a}=this.getProps();if(!n||!r_(e,a,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=Bje(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,a=this.constraints;e&&v1(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Uje(n.layoutBox,e):this.constraints=!1,this.elastic=Hje(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ru(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=$je(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!v1(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const s=K6e(n,a.root,this.visualElement.getTransformPagePoint());let o=zje(a.layout.layoutBox,s);if(r){const l=r(q6e(o));this.hasMutatedConstraints=!!l,l&&(o=Lne(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=ru(d=>{if(!r_(d,r,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const p=a?200:1e6,g=a?40:1e7,b={type:"inertia",velocity:n?e[d]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,b)});return Promise.all(u).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return C8(this.visualElement,e),n.start(a7(e,n,0,r,this.visualElement,!1))}stopAnimation(){ru(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ru(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ru(r=>{const{drag:n}=this.getProps();if(!r_(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,s=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];s.set(e[r]-ws(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!v1(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ru(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=Vje({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ru(o=>{if(!r_(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(ws(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;qje.set(this.visualElement,this);const e=this.visualElement.current,r=nb(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();v1(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,s=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),us.read(n);const o=iy(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(ru(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),r(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:s=!1,dragElastic:o=I8,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function r_(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Wje(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Kje extends mm{constructor(e){super(e),this.removeGroupControls=Eu,this.removeListeners=Eu,this.controls=new Gje(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Eu}unmount(){this.removeGroupControls(),this.removeListeners()}}const fV=t=>(e,r)=>{t&&us.postRender(()=>t(e,r))};class Xje extends mm{constructor(){super(...arguments),this.removePointerDownListener=Eu}onPointerDown(e){this.session=new Jne(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Qne(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:fV(e),onStart:fV(r),onMove:n,onEnd:(s,o)=>{delete this.session,a&&us.postRender(()=>a(s,o))}}}mount(){this.removePointerDownListener=nb(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const VN={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hV(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Kv={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ln.test(t))t=parseFloat(t);else return t;const r=hV(t,e.target.x),n=hV(t,e.target.y);return`${r}% ${n}%`}},Yje={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,a=X0.parse(t);if(a.length>5)return n;const s=X0.createTransformer(t),o=typeof a[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;a[0+o]/=l,a[1+o]/=c;const u=ws(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),s(a)}};let Kj=!1;class Zje extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:s}=e;b6e(Qje),s&&(r.group&&r.group.add(s),n&&n.register&&a&&n.register(s),Kj&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),VN.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:a,isPresent:s}=this.props,{projection:o}=n;return o&&(o.isPresent=s,Kj=!0,a||e.layoutDependency!==r||r===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||us.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),WP.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=e;Kj=!0,a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tae(t){const[e,r]=Nne(),n=A.useContext(AP);return i.jsx(Zje,{...t,layoutGroup:n,switchLayoutGroup:A.useContext(Dne),isPresent:e,safeToRemove:r})}const Qje={borderRadius:{...Kv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kv,borderTopRightRadius:Kv,borderBottomLeftRadius:Kv,borderBottomRightRadius:Kv,boxShadow:Yje};function Jje(t,e,r){const n=Vo(t)?t:Cx(t);return n.start(a7("",n,e,r)),n.animation}const eTe=(t,e)=>t.depth-e.depth;class tTe{constructor(){this.children=[],this.isDirty=!1}add(e){TP(this.children,e),this.isDirty=!0}remove(e){CP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eTe),this.isDirty=!1,this.children.forEach(e)}}function rTe(t,e){const r=Bl.now(),n=({timestamp:a})=>{const s=a-r;s>=e&&(K0(n),t(s-e))};return us.setup(n,!0),()=>K0(n)}const rae=["TopLeft","TopRight","BottomLeft","BottomRight"],nTe=rae.length,mV=t=>typeof t=="string"?parseFloat(t):t,pV=t=>typeof t=="number"||ln.test(t);function aTe(t,e,r,n,a,s){a?(t.opacity=ws(0,r.opacity??1,sTe(n)),t.opacityExit=ws(e.opacity??1,0,iTe(n))):s&&(t.opacity=ws(e.opacity??1,r.opacity??1,n));for(let o=0;o<nTe;o++){const l=`border${rae[o]}Radius`;let c=gV(e,l),u=gV(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||pV(c)===pV(u)?(t[l]=Math.max(ws(mV(c),mV(u),n),0),(qd.test(u)||qd.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||r.rotate)&&(t.rotate=ws(e.rotate||0,r.rotate||0,n))}function gV(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sTe=nae(0,.5,$re),iTe=nae(.5,.95,Eu);function nae(t,e,r){return n=>n<t?0:n>e?1:r(ty(t,e,n))}function xV(t,e){t.min=e.min,t.max=e.max}function Xc(t,e){xV(t.x,e.x),xV(t.y,e.y)}function vV(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function bV(t,e,r,n,a){return t-=e,t=y3(t,1/r,n),a!==void 0&&(t=y3(t,1/a,n)),t}function oTe(t,e=0,r=1,n=.5,a,s=t,o=t){if(qd.test(e)&&(e=parseFloat(e),e=ws(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=ws(s.min,s.max,n);t===s&&(l-=e),t.min=bV(t.min,e,r,l,a),t.max=bV(t.max,e,r,l,a)}function yV(t,e,[r,n,a],s,o){oTe(t,e[r],e[n],e[a],e.scale,s,o)}const lTe=["x","scaleX","originX"],cTe=["y","scaleY","originY"];function wV(t,e,r,n){yV(t.x,e,lTe,r?r.x:void 0,n?n.x:void 0),yV(t.y,e,cTe,r?r.y:void 0,n?n.y:void 0)}function _V(t){return t.translate===0&&t.scale===1}function aae(t){return _V(t.x)&&_V(t.y)}function NV(t,e){return t.min===e.min&&t.max===e.max}function uTe(t,e){return NV(t.x,e.x)&&NV(t.y,e.y)}function EV(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function sae(t,e){return EV(t.x,e.x)&&EV(t.y,e.y)}function AV(t){return ml(t.x)/ml(t.y)}function SV(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class dTe{constructor(){this.members=[]}add(e){TP(this.members,e),e.scheduleRender()}remove(e){if(CP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const s=this.members[a];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fTe(t,e,r){let n="";const a=t.x.translate/e.x,s=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((a||s||o)&&(n=`translate3d(${a}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:p,skewX:g,skewY:b}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),p&&(n+=`rotateY(${p}deg) `),g&&(n+=`skewX(${g}deg) `),b&&(n+=`skewY(${b}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Xj=["","X","Y","Z"],hTe=1e3;let mTe=0;function Yj(t,e,r,n){const{latestValues:a}=e;a[t]&&(r[t]=a[t],e.setStaticValue(t,0),n&&(n[t]=0))}function iae(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=qne(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",us,!(a||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&iae(n)}function oae({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=e==null?void 0:e()){this.id=mTe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(xTe),this.nodes.forEach(wTe),this.nodes.forEach(_Te),this.nodes.forEach(vTe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new tTe)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new OP),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=_ne(o)&&!a6e(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;us.read(()=>{h=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=rTe(p,250),VN.hasAnimatedSinceResize&&(VN.hasAnimatedSinceResize=!1,this.nodes.forEach(CV)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||jTe,{onLayoutAnimationStart:w,onLayoutAnimationComplete:_}=u.getProps(),N=!this.targetLayout||!sae(this.targetLayout,g),S=!h&&p;if(this.options.layoutRoot||this.resumeFrom||S||h&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...qP(b,"layout"),onPlay:w,onComplete:_};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(d,S)}else h||CV(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),K0(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NTe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&iae(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jV);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(TV);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yTe),this.nodes.forEach(pTe),this.nodes.forEach(gTe)):this.nodes.forEach(TV),this.clearAllSnapshots();const l=Bl.now();go.delta=ch(0,1e3/60,l-go.timestamp),go.timestamp=l,go.isProcessing=!0,Fj.update.process(go),Fj.preRender.process(go),Fj.render.process(go),go.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,WP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bTe),this.sharedNodes.forEach(ETe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,us.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){us.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ml(this.snapshot.measuredBox.x)&&!ml(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!aae(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Fm(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),TTe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return qs();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(CTe))){const{scroll:d}=this.root;d&&(b1(l.x,d.offset.x),b1(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=qs();if(Xc(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Xc(l,o),b1(l.x,h.offset.x),b1(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=qs();Xc(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&y1(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Fm(d.latestValues)&&y1(c,d.latestValues)}return Fm(this.latestValues)&&y1(c,this.latestValues),c}removeTransform(o){const l=qs();Xc(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Fm(u.latestValues))continue;A8(u.latestValues)&&u.updateSnapshot();const d=qs(),h=u.measurePageBox();Xc(d,h),wV(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Fm(this.latestValues)&&wV(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==go.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=go.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qs(),this.relativeTargetOrigin=qs(),sb(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qs(),this.targetWithTransforms=qs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Dje(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xc(this.target,this.layout.layoutBox),Bne(this.target,this.targetDelta)):Xc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qs(),this.relativeTargetOrigin=qs(),sb(this.relativeTargetOrigin,this.target,g.target),Xc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||A8(this.parent.latestValues)||Fne(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===go.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Xc(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;W6e(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qs());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vV(this.prevProjectionDelta.x,this.projectionDelta.x),vV(this.prevProjectionDelta.y,this.projectionDelta.y)),ab(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!SV(this.projectionDelta.x,this.prevProjectionDelta.x)||!SV(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=w1(),this.projectionDelta=w1(),this.projectionDeltaWithTransform=w1()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=w1();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=qs(),g=c?c.source:void 0,b=this.layout?this.layout.source:void 0,w=g!==b,_=this.getStack(),N=!_||_.members.length<=1,S=!!(w&&!N&&this.options.crossfade===!0&&!this.path.some(STe));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const z=R/1e3;kV(h.x,o.x,z),kV(h.y,o.y,z),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sb(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ATe(this.relativeTarget,this.relativeTargetOrigin,p,z),T&&uTe(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=qs()),Xc(T,this.relativeTarget)),w&&(this.animationValues=d,aTe(d,u,this.latestValues,z,S,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(K0(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=us.update(()=>{VN.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cx(0)),this.currentAnimation=Jje(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hTe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&lae(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||qs();const h=ml(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const p=ml(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}Xc(l,c),y1(l,d),ab(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new dTe),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Yj("z",o,u,this.animationValues);for(let d=0;d<Xj.length;d++)Yj(`rotate${Xj[d]}`,o,u,this.animationValues),Yj(`skew${Xj[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=zN(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=zN(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Fm(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=fTe(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const b in sy){if(d[b]===void 0)continue;const{correct:w,applyTo:_,isCSSVariable:N}=sy[b],S=h==="none"?d[b]:w(d[b],u);if(_){const T=_.length;for(let R=0;R<T;R++)o[_[R]]=S}else N?this.options.visualElement.renderState.vars[b]=S:o[b]=S}this.options.layoutId&&(o.pointerEvents=u===this?zN(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(jV),this.root.sharedNodes.clear()}}}function pTe(t){t.updateLayout()}function gTe(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?ru(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],g=ml(p);p.min=n[h].min,p.max=p.min+g}):lae(s,e.layoutBox,n)&&ru(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],g=ml(n[h]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const l=w1();ab(l,n,e.layoutBox);const c=w1();o?ab(c,t.applyTransform(a,!0),e.measuredBox):ab(c,n,e.layoutBox);const u=!aae(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const b=qs();sb(b,e.layoutBox,p.layoutBox);const w=qs();sb(w,n,g.layoutBox),sae(b,w)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=b,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function xTe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vTe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bTe(t){t.clearSnapshot()}function jV(t){t.clearMeasurements()}function TV(t){t.isLayoutDirty=!1}function yTe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function CV(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wTe(t){t.resolveTargetDelta()}function _Te(t){t.calcProjection()}function NTe(t){t.resetSkewAndRotation()}function ETe(t){t.removeLeadSnapshot()}function kV(t,e,r){t.translate=ws(e.translate,0,r),t.scale=ws(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function IV(t,e,r,n){t.min=ws(e.min,r.min,n),t.max=ws(e.max,r.max,n)}function ATe(t,e,r,n){IV(t.x,e.x,r.x,n),IV(t.y,e.y,r.y,n)}function STe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jTe={duration:.45,ease:[.4,0,.1,1]},OV=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),RV=OV("applewebkit/")&&!OV("chrome/")?Math.round:Eu;function PV(t){t.min=RV(t.min),t.max=RV(t.max)}function TTe(t){PV(t.x),PV(t.y)}function lae(t,e,r){return t==="position"||t==="preserve-aspect"&&!Pje(AV(e),AV(r),.2)}function CTe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const kTe=oae({attachResizeListener:(t,e)=>iy(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zj={current:void 0},cae=oae({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zj.current){const t=new kTe({});t.mount(window),t.setOptions({layoutScroll:!0}),Zj.current=t}return Zj.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ITe={pan:{Feature:Xje},drag:{Feature:Kje,ProjectionNode:cae,MeasureLayout:tae}};function DV(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,s=n[a];s&&us.postRender(()=>s(e,bw(e)))}class OTe extends mm{mount(){const{current:e}=this.node;e&&(this.unmount=JSe(e,(r,n)=>(DV(this.node,n,"Start"),a=>DV(this.node,a,"End"))))}unmount(){}}class RTe extends mm{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pw(iy(this.node.current,"focus",()=>this.onFocus()),iy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MV(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),s=n[a];s&&us.postRender(()=>s(e,bw(e)))}class PTe extends mm{mount(){const{current:e}=this.node;e&&(this.unmount=n6e(e,(r,n)=>(MV(this.node,n,"Start"),(a,{success:s})=>MV(this.node,a,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const O8=new WeakMap,Qj=new WeakMap,DTe=t=>{const e=O8.get(t.target);e&&e(t)},MTe=t=>{t.forEach(DTe)};function LTe({root:t,...e}){const r=t||document;Qj.has(r)||Qj.set(r,{});const n=Qj.get(r),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(MTe,{root:t,...e})),n[a]}function FTe(t,e,r){const n=LTe(e);return O8.set(t,r),n.observe(t),()=>{O8.delete(t),n.unobserve(t)}}const BTe={some:0,all:1};class UTe extends mm{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:s}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:BTe[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=u?d:h;p&&p(c)};return FTe(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(zTe(e,r))&&this.startObserver()}unmount(){}}function zTe({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const VTe={inView:{Feature:UTe},tap:{Feature:PTe},focus:{Feature:RTe},hover:{Feature:OTe}},$Te={layout:{ProjectionNode:cae,MeasureLayout:tae}},HTe={...Tje,...VTe,...ITe,...$Te},Qt=H6e(HTe,nje),LV=({notifications:t,onClose:e,onMarkAsRead:r,onViewDetails:n})=>{const[a,s]=A.useState("all"),o=t.filter(c=>a==="unread"?!c.leida:a==="read"?c.leida:!0),l=t.filter(c=>!c.leida).length;return i.jsxs(Qt.div,{initial:{x:400},animate:{x:0},exit:{x:400},transition:{type:"spring",stiffness:300,damping:30},className:"fixed right-0 top-0 h-full w-96 bg-white dark:bg-slate-900 shadow-2xl z-50 flex flex-col",children:[i.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-rose-700 dark:from-rose-700 dark:to-rose-800 text-white p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h2",{className:"text-xl font-bold",children:"Notificaciones"}),i.jsx("button",{onClick:e,className:"text-white hover:text-rose-200 transition",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l>0&&i.jsxs("div",{className:"bg-rose-500 text-white text-sm px-3 py-1 rounded-full inline-block",children:[l," sin leer"]})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-800",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>s("all"),className:`px-3 py-1 rounded text-sm transition ${a==="all"?"bg-rose-600 text-white":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600"}`,children:["Todas (",t.length,")"]}),i.jsxs("button",{onClick:()=>s("unread"),className:`px-3 py-1 rounded text-sm transition ${a==="unread"?"bg-rose-600 text-white":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600"}`,children:["No ledas (",l,")"]}),i.jsx("button",{onClick:()=>s("read"),className:`px-3 py-1 rounded text-sm transition ${a==="read"?"bg-rose-600 text-white":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600"}`,children:"Ledas"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:o.length===0?i.jsxs("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[i.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i.jsx("p",{className:"text-lg font-medium",children:"No hay notificaciones"}),i.jsx("p",{className:"text-sm mt-1",children:a==="unread"?"Todas ledas":"Aqu aparecern las alertas"})]}):i.jsx(vw,{children:o.map((c,u)=>{var d;return i.jsx(Qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:u*.05},className:`border-b border-slate-200 dark:border-slate-700 p-4 hover:bg-slate-50 dark:hover:bg-slate-800 transition ${c.leida?"bg-white dark:bg-slate-900":"bg-rose-50 dark:bg-rose-900/20"}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`mt-1 p-2 rounded-full ${c.leida?"bg-slate-100 dark:bg-slate-700":"bg-rose-100 dark:bg-rose-900/40"}`,children:i.jsx("svg",{className:`w-5 h-5 ${c.leida?"text-slate-400 dark:text-slate-500":"text-rose-600 dark:text-rose-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:`font-medium ${c.leida?"text-slate-600 dark:text-slate-400":"text-slate-900 dark:text-white"}`,children:c.titulo}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:c.mensaje}),c.factura&&i.jsxs("div",{className:"mt-2 text-xs text-slate-500 dark:text-slate-500",children:[i.jsxs("p",{children:["Ruta: ",c.factura.rutaNombre||"Sin asignar"]}),i.jsxs("p",{children:["Repartidor: ",c.factura.repartidorNombre||"N/A"]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsx("button",{onClick:()=>n(c.factura),className:"text-xs bg-indigo-600 dark:bg-indigo-500 text-white px-3 py-1 rounded hover:bg-indigo-700 dark:hover:bg-indigo-600 transition",children:"Ver Detalles"}),!c.leida&&i.jsx("button",{onClick:()=>r(c.id),className:"text-xs text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Marcar como leda"})]}),i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:(d=c.timestamp)==null?void 0:d.toLocaleString()})]})]})},c.id)})})})]})},FV=({notification:t,onClose:e,onViewDetails:r})=>{var n,a,s,o;return A.useEffect(()=>{const l=setTimeout(()=>{e()},8e3);return()=>clearTimeout(l)},[e]),t?i.jsx(vw,{children:i.jsx(Qt.div,{initial:{opacity:0,x:100,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.95},transition:{duration:.3,type:"spring",stiffness:200},className:"fixed top-20 right-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl border-l-4 border-rose-600 dark:border-rose-500 p-4 max-w-md",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-rose-100 dark:bg-rose-900/40 rounded-full",children:i.jsx("svg",{className:"w-6 h-6 text-rose-600 dark:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-1",children:" Factura No Entregada"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:(n=t.factura)==null?void 0:n.numeroFactura}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Cliente: ",(a=t.factura)==null?void 0:a.cliente]}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Motivo: ",((s=t.factura)==null?void 0:s.motivoNoEntrega)||"Sin especificar"]}),((o=t.factura)==null?void 0:o.rutaNombre)&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["Ruta: ",t.factura.rutaNombre,"  Repartidor: ",t.factura.repartidorNombre||"N/A"]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx("button",{onClick:()=>{r(t.factura),e()},className:"text-xs bg-indigo-600 dark:bg-indigo-500 text-white px-3 py-1.5 rounded hover:bg-indigo-700 dark:hover:bg-indigo-600 transition font-medium",children:"Ver Detalles"}),i.jsx("button",{onClick:e,className:"text-xs text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 px-2",children:"Cerrar"})]})]}),i.jsx("button",{onClick:e,className:"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 transition",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"mt-3 h-1 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:"100%"},animate:{width:"0%"},transition:{duration:8,ease:"linear"},className:"h-full bg-rose-600 dark:bg-rose-500"})})]})})}):null},BV=({factura:t,onClose:e})=>{const[r,n]=A.useState(null),[a,s]=A.useState(!0);if(A.useEffect(()=>{(async()=>{if(!(t!=null&&t.rutaId)){s(!1);return}try{const c=await qU(l3(qf,"rutas",t.rutaId));if(c.exists()){const u=c.data();let d="No asignado";if(u.empleadoNombre)d=u.empleadoNombre;else if(u.empleadoId)try{const h=await qU(l3(qf,"usuarios",u.empleadoId));if(h.exists()){const p=h.data();d=p.nombre||p.email||"Sin nombre"}}catch(h){console.error("Error al buscar empleado:",h)}n({nombre:u.nombre,repartidorNombre:d})}}catch(c){console.error("Error al obtener info de ruta:",c)}finally{s(!1)}})()},[t]),!t)return null;const o=()=>{t.telefono&&(window.location.href="tel:"+t.telefono)};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-6 rounded-t-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Detalles de Factura"}),i.jsx("p",{className:"text-indigo-100 mt-1",children:"Informacin completa para contacto"})]}),i.jsx("button",{onClick:e,className:"text-white hover:text-indigo-200 transition",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Nmero de Factura"}),i.jsx("p",{className:"text-lg font-bold text-slate-900 mt-1",children:t.numeroFactura})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Estado"}),i.jsx("p",{className:"mt-1",children:i.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(t.estado==="entregado"?"bg-emerald-100 text-emerald-800":t.estado==="no_entregado"?"bg-rose-100 text-rose-800":t.estado==="asignado"?"bg-indigo-100 text-indigo-800":"bg-slate-100 text-slate-800"),children:t.estado==="entregado"?"Entregado":t.estado==="no_entregado"?"No Entregado":t.estado==="asignado"?"Asignado":"Pendiente"})})]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Informacin del Cliente"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Nombre Completo"}),i.jsx("p",{className:"text-slate-900 font-medium",children:t.cliente})]}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.cliente),className:"text-indigo-600 hover:text-indigo-800 text-sm",children:"Copiar"})]}),t.telefono&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Telfono"}),i.jsx("p",{className:"text-slate-900 font-medium",children:t.telefono})]}),i.jsx("button",{onClick:o,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition text-sm font-medium",children:"Llamar"})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Direccin"}),i.jsx("p",{className:"text-slate-900",children:t.direccion})]}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.direccion),className:"text-indigo-600 hover:text-indigo-800 text-sm ml-2",children:"Copiar"})]}),t.sector&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-sm font-medium text-indigo-700",children:"Sector"}),i.jsx("p",{className:"text-indigo-900 font-medium",children:t.sector})]}),i.jsx("button",{onClick:()=>navigator.clipboard.writeText(t.sector),className:"text-indigo-600 hover:text-indigo-800 text-sm ml-2",children:"Copiar"})]})]})]}),t.estado==="no_entregado"&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Detalles del Intento Fallido"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-3 bg-rose-50 rounded-lg border border-rose-200",children:[i.jsx("label",{className:"text-sm font-medium text-rose-700",children:"Motivo de No Entrega"}),i.jsx("p",{className:"text-rose-900 font-medium mt-1",children:t.motivoNoEntrega||"Sin motivo especificado"})]}),t.fechaIntento&&i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Fecha del Intento"}),i.jsx("p",{className:"text-slate-900",children:new Date(t.fechaIntento).toLocaleString()})]}),t.observaciones&&i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Observaciones"}),i.jsx("p",{className:"text-slate-900 mt-1",children:t.observaciones})]})]})]}),t.rutaId&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),"Informacin de Ruta"]}),a?i.jsx("div",{className:"p-4 bg-slate-50 rounded-lg text-center text-slate-500",children:"Cargando informacin de ruta..."}):r?i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Ruta"}),i.jsx("p",{className:"text-slate-900 font-medium",children:r.nombre})]}),i.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg",children:[i.jsx("label",{className:"text-sm font-medium text-slate-500",children:"Repartidor"}),i.jsx("p",{className:"text-slate-900 font-medium",children:r.repartidorNombre})]})]}):i.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:i.jsx("p",{className:"text-amber-800 text-sm",children:"No se pudo cargar la informacin de la ruta"})})]}),t.monto&&i.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[i.jsx("label",{className:"text-sm font-medium text-indigo-700",children:"Monto a Cobrar"}),i.jsxs("p",{className:"text-2xl font-bold text-indigo-900 mt-1",children:["$",t.monto.toLocaleString()]})]})]}),i.jsx("div",{className:"bg-slate-50 px-6 py-4 rounded-b-lg flex justify-end gap-3",children:i.jsx("button",{onClick:e,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition",children:"Cerrar"})})]})})},UV=()=>{const[t,e]=A.useState([]),[r,n]=A.useState(!1),[a,s]=A.useState(null);A.useEffect(()=>{const g=()=>{const w=new Date;e(_=>_.filter(N=>(w-N.timestamp)/1e3<86400))},b=setInterval(g,3e5);return g(),()=>clearInterval(b)},[]);const o=A.useCallback(g=>{e(g)},[]),l=A.useCallback(g=>{e(b=>{if(b.find(_=>_.id===g.id))return b.map(_=>_.id===g.id?g:_);try{const _=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSyBzvLZiTYIG2m98OScTgwNUrDn77ZnFwc3kdfw2YM0CxqB5ObycSoHBQBRQB8AAEAfAAABAAgA");_.volume=.5,_.play().catch(N=>console.log("No se pudo reproducir sonido:",N))}catch(_){console.log("Error al reproducir sonido:",_)}return[g,...b]}),s(g),setTimeout(()=>{s(null)},5e3)},[]),c=A.useCallback(g=>{e(b=>b.map(w=>w.id===g?{...w,leida:!0}:w))},[]),u=A.useCallback(()=>{e(g=>g.map(b=>({...b,leida:!0})))},[]),d=A.useCallback(()=>{s(null)},[]),h=A.useCallback(()=>{n(g=>!g)},[]),p=t.filter(g=>!g.leida).length;return{notifications:t,showPanel:r,currentToast:a,unreadCount:p,addNotification:l,loadExistingNotifications:o,markAsRead:c,markAllAsRead:u,closeToast:d,togglePanel:h,setShowPanel:n}},qTe=({children:t})=>{var Z,ce;const e=Fs(),r=lm(),{userData:n,logout:a}=ca(),[s,o]=A.useState(!1),[l,c]=A.useState(null),[u,d]=A.useState(!1),[h,p]=A.useState(!1);uAe();const{notifications:g,showPanel:b,currentToast:w,unreadCount:_,addNotification:N,loadExistingNotifications:S,markAsRead:T,closeToast:R,togglePanel:z,setShowPanel:G}=UV(),O=async()=>{try{a?await a():await wR(R0),e("/login")}catch(ne){console.error("Error al cerrar sesin:",ne)}},D=ne=>{c(ne),d(!0),G&&G(!1)},I=(n==null?void 0:n.rol)==="admin"?"admin_general":(n==null?void 0:n.rol)||"admin_general",P=(()=>{const ne={super_admin:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/finanzas",label:"Finanzas",icon:""},{path:"/companies",label:"Compaas",icon:""},{path:"/hardware",label:"Hardware",icon:""},{path:"/tickets-admin",label:"Tickets",icon:""},{path:"/configuracion/whatsapp",label:"WhatsApp Cloud",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],propietario:[{path:"/dashboard",label:"Dashboard Ejecutivo",icon:""},{path:"/finanzas",label:"Finanzas",icon:""},{path:"/reportes",label:"Reportes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],admin_general:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/recolecciones",label:"Recolecciones",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/almacen-usa",label:"Almacn USA",icon:""},{path:"/almacen-rd",label:"Almacn RD",icon:""},{path:"/secretarias",label:"Panel Secretaras",icon:""},{path:"/cargadores",label:"Panel Cargadores",icon:""},{path:"/repartidores",label:"Panel Repartidores",icon:""},{path:"/rutas",label:"Rutas",icon:""},{path:"/facturas-no-entregadas",label:"No Entregadas",icon:""},{path:"/facturas-pendientes-pago",label:"Facturas Pendientes",icon:""},{path:"/empleados",label:"Empleados",icon:""},{path:"/reportes",label:"Reportes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],recolector:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/recolecciones",label:"Mis Recolecciones",icon:""},{path:"/pool",label:"Bolsa de Cargas",icon:""},{path:"/recolecciones/nueva",label:"Nueva Recoleccin",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],secretaria_usa:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/call-center",label:"Call Center USA",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],secretaria:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/secretarias",label:"Confirmar Facturas",icon:""},{path:"/embarques",label:"Ver Embarques",icon:""},{path:"/facturas-pendientes-pago",label:"Facturas Pendientes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],almacen:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/rutas",label:"Crear Rutas",icon:""},{path:"/facturas-no-entregadas",label:"No Entregadas",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],almacen_rd:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/almacen-rd",label:"Almacn RD",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/rutas",label:"Crear Rutas",icon:""},{path:"/facturas-no-entregadas",label:"No Entregadas",icon:""},{path:"/reportes",label:"Reportes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],almacen_eeuu:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/recolecciones",label:"Recolecciones",icon:""},{path:"/recolecciones/nueva",label:"Nueva Recoleccin",icon:""},{path:"/almacen-usa",label:"Almacn USA",icon:""},{path:"/embarques",label:"Embarques",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],cargador:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/cargadores",label:"Mis Rutas",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}],repartidor:[{path:"/dashboard",label:"Dashboard",icon:""},{path:"/repartidores",label:"Mis Entregas",icon:""},{path:"/rutas",label:"Ver Rutas",icon:""},{path:"/facturas-pendientes-pago",label:"Facturas Pendientes",icon:""},{path:"/configuracion",label:"Configuracin",icon:""},{path:"/ayuda",label:"Ayuda",icon:""}]};return ne[I]||ne.admin_general})(),B=()=>({super_admin:"Super Admin",propietario:"Propietario",admin_general:"Administrador",recolector:"Recolector",secretaria:"Secretara",cargador:"Cargador",almacen:"Almacn RD",almacen_rd:"Almacn RD",almacen_eeuu:"Almacn EE.UU.",secretaria_usa:"Secretara USA",repartidor:"Repartidor"})[I]||"Usuario",F=["admin_general","super_admin","almacen_rd","secretaria","repartidor"],ee=(n==null?void 0:n.rol)&&F.includes(n.rol);return i.jsxs("div",{className:"h-screen flex flex-col overflow-hidden bg-slate-50",children:[Nz&&ee&&i.jsx(Nz,{onNewNotification:N,onLoadExisting:S}),FV&&w&&i.jsx(FV,{notification:w,onClose:R,onViewDetails:D}),LV&&b&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>G(!1)}),i.jsx(LV,{notifications:g,onClose:()=>G(!1),onMarkAsRead:T,onViewDetails:D})]}),i.jsx("header",{className:"bg-white border-b border-slate-200 z-50 flex-shrink-0",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>p(!h),className:"lg:hidden p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition","aria-label":"Toggle menu",children:h?i.jsx(Zn,{size:24}):i.jsx(J3e,{size:24})}),i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("img",{src:mw,alt:"ProLogix",className:"h-10 sm:h-12 w-auto object-contain"}),i.jsx("span",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-indigo-600 to-indigo-800 bg-clip-text text-transparent",children:"ProLogix"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[UV&&i.jsxs("button",{onClick:z,className:"relative p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",children:[i.jsx(NP,{className:"w-5 h-5"}),_>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-rose-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:_>9?"9+":_})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>o(!s),className:"flex items-center gap-3 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:(n==null?void 0:n.nombre)||"Usuario"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:B()})]}),i.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold",children:((Z=n==null?void 0:n.nombre)==null?void 0:Z.charAt(0).toUpperCase())||"U"})]}),s&&i.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 rounded-lg shadow-xl py-2 z-50 border border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 dark:border-slate-700",children:[i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:n==null?void 0:n.nombre}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:n==null?void 0:n.email})]}),i.jsx("button",{onClick:()=>{o(!1),e("/configuracion")},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:" Configuracin"}),i.jsxs("button",{onClick:O,className:"w-full text-left px-4 py-2 text-sm text-rose-600 dark:text-rose-400 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition flex items-center gap-2",children:[i.jsx(X3e,{className:"w-4 h-4"}),"Cerrar Sesin"]})]})]})]})]})})}),i.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[h&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>p(!1)}),i.jsxs("aside",{className:`
          fixed lg:relative
          top-0 left-0 h-full
          w-64 bg-white border-r border-slate-200
          flex flex-col flex-shrink-0
          z-50 lg:z-auto
          transform transition-transform duration-300 ease-in-out
          ${h?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        `,children:[i.jsxs("div",{className:"lg:hidden p-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"Men"}),i.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition","aria-label":"Cerrar men",children:i.jsx(Zn,{size:20,className:"text-slate-600 dark:text-slate-400"})})]}),i.jsx("nav",{className:"flex-1 p-3 overflow-y-auto",children:P.map(ne=>i.jsxs(cQ,{to:ne.path,onClick:()=>p(!1),className:`flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-all duration-200 text-sm group ${r.pathname===ne.path||r.pathname.startsWith(ne.path+"/")?"bg-indigo-50 text-indigo-700 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[i.jsx("span",{className:"text-xl flex-shrink-0 opacity-90",children:ne.icon}),i.jsx("span",{className:"font-medium truncate",children:ne.label})]},ne.path))}),i.jsx("div",{className:"lg:hidden p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0",children:((ce=n==null?void 0:n.nombre)==null?void 0:ce.charAt(0).toUpperCase())||"U"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white truncate",children:(n==null?void 0:n.nombre)||"Usuario"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:B()})]})]})})]}),i.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50",children:t})]}),BV&&u&&l&&i.jsx(BV,{factura:l,onClose:()=>{d(!1),c(null)}})]})},GTe=({onLoginStart:t,onExitComplete:e})=>{const[r,n]=A.useState(""),[a,s]=A.useState(""),[o,l]=A.useState(""),[c,u]=A.useState(!1),[d,h]=A.useState(0),{login:p}=ca();A.useEffect(()=>{const b=setTimeout(()=>h(1),2e3),w=setTimeout(()=>h(2),3200),_=setTimeout(()=>h(3),4e3);return()=>{clearTimeout(b),clearTimeout(w),clearTimeout(_)}},[]);const g=async b=>{b.preventDefault(),l(""),u(!0);try{t&&t(),await p(r,a),h(4),setTimeout(()=>h(5),800),setTimeout(()=>{h(6),setTimeout(()=>{e&&e()},2e3)},1e3)}catch(w){console.error("Error en login:",w),l("Email o contrasea incorrectos"),u(!1)}};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 overflow-hidden relative",children:[i.jsx("div",{className:"absolute bottom-0 w-full h-[140px] bg-indigo-900/80 z-30 overflow-hidden border-t border-indigo-500/30 backdrop-blur-sm",children:i.jsx("div",{className:"absolute -top-5 w-[200%] h-10 bg-[url('data:image/svg+xml,%3Csvg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 1200 120\\' preserveAspectRatio=\\'none\\'%3E%3Cpath d=\\'M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z\\' fill=\\'%2360A5FA\\' opacity=\\'0.3\\'/%3E%3C/svg%3E')] bg-[length:50%_100%] animate-wave"})}),i.jsxs("div",{className:`absolute bottom-[100px] w-[260px] h-[100px] z-20 transition-transform duration-[2500ms] ease-in-out
          ${d===0?"animate-ship-enter":""}
          ${d>=1&&d<6?"translate-x-0 left-[calc(50%-130px)]":""}
          ${d===6?"animate-ship-depart left-[calc(50%-130px)]":""}
        `,children:[i.jsx("div",{className:"absolute -top-[50px] right-[40px] w-[70px] h-[50px] bg-slate-700 rounded-t-[5px] border-2 border-slate-600",children:i.jsx("div",{className:"absolute top-[10px] left-[10px] w-5 h-5 bg-indigo-400/50 rounded-[2px] animate-pulse"})}),i.jsxs("div",{className:"w-full h-[70px] bg-slate-800 rounded-bl-[20px] rounded-br-[50px] relative shadow-lg border-t border-slate-600",children:[i.jsx("div",{className:"absolute top-[15px] w-full h-[8px] bg-rose-600/80"}),i.jsx("div",{className:"absolute bottom-[10px] left-[20px] text-slate-500 text-[10px] font-mono tracking-widest",children:"PROLOGIX-01"})]}),i.jsx("div",{className:`absolute -top-[60px] left-[100px] w-[60px] h-[60px] bg-white border-2 border-indigo-500 rounded-lg flex items-center justify-center shadow-md transition-opacity duration-0
          ${d<1||d>=6?"opacity-100":"opacity-0"}
        `,children:i.jsx(Lr,{className:"text-indigo-600",size:32})})]}),i.jsxs("div",{className:`relative z-50 flex flex-col items-center justify-center transition-all overflow-hidden
          ${d<1?"opacity-0 scale-0":""} 
          ${d===1?"w-[60px] h-[60px] bg-white border-2 border-indigo-500 rounded-lg animate-box-float-up":""}
          ${d===2?"animate-expand-form":""}
          ${d===3?"w-full max-w-md h-[500px] bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8":""}
          ${d===4?"animate-collapse":""}
          ${d===5?"w-[60px] h-[60px] bg-white border-2 border-indigo-500 rounded-lg animate-box-drop":""}
          ${d===6?"opacity-0":""}
        `,children:[i.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-500 pointer-events-none ${d===1||d===2||d>=4?"opacity-100":"opacity-0"}`,children:i.jsx(Lr,{className:"text-indigo-600",size:32})}),i.jsxs("div",{className:`w-full h-full flex flex-col justify-center transition-opacity duration-700 delay-200 ${d===3?"opacity-100":"opacity-0 hidden"}`,children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"bg-white w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ring-4 ring-white/10 p-4",children:i.jsx("img",{src:mw,alt:"ProLogix",className:"w-full h-full object-contain"})}),i.jsx("h1",{className:"text-3xl font-bold text-white tracking-tight",children:"ProLogix"}),i.jsx("p",{className:"text-indigo-200/80 mt-2 text-sm font-light tracking-wide",children:"SISTEMA DE GESTIN LOGSTICA"})]}),o&&i.jsxs("div",{className:"bg-rose-500/20 border border-rose-500/50 text-white p-3 rounded-lg mb-6 flex items-center gap-2 animate-pulse",children:[i.jsx(_s,{size:20}),i.jsx("span",{children:o})]}),i.jsxs("form",{onSubmit:g,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-1 uppercase tracking-wider",children:"Correo Corporativo"}),i.jsx("input",{type:"email",value:r,onChange:b=>n(b.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all hover:bg-slate-900/70",placeholder:"usuario@prologix.com",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-1 uppercase tracking-wider",children:"Contrasea"}),i.jsx("input",{type:"password",value:a,onChange:b=>s(b.target.value),className:"w-full px-4 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all hover:bg-slate-900/70",placeholder:"",required:!0})]}),i.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3.5 px-4 rounded-xl shadow-lg shadow-indigo-900/50 transform transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed mt-2",children:c?i.jsxs(i.Fragment,{children:[i.jsx(xp,{className:"animate-spin",size:20}),i.jsx("span",{children:"Autenticando..."})]}):"Acceder al Sistema"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx(cQ,{to:"/forgot-password",className:"text-sm text-indigo-300 hover:text-white transition-colors underline",children:"Olvidaste tu contrasea?"})})]})]})]})},s7=(t,e=[],r=[],n={})=>{const{userData:a}=ca(),[s,o]=A.useState([]),[l,c]=A.useState(!0),[u,d]=A.useState(null),h=A.useRef(null),p=a==null?void 0:a.companyId;return A.useEffect(()=>{if(!p){c(!1);return}return(async()=>{try{c(!0),d(null);const b=jA(qf,t);let w=mu(b);w=mu(w,O0("companyId","==",p)),e.forEach(([_,N,S])=>{w=mu(w,O0(_,N,S))}),r.forEach(([_,N="asc"])=>{w=mu(w,Xb(_,N))}),console.log(` Configurando listener para ${t} con ${e.length} filtros`),h.current=RA(w,_=>{const N=[];_.forEach(S=>{N.push({id:S.id,...S.data()})}),console.log(` ${t} actualizado: ${N.length} documentos`),o(N),c(!1),n.onUpdate&&n.onUpdate(N)},_=>{console.error(` Error en listener de ${t}:`,_),d(_.message),c(!1),n.onError&&n.onError(_)})}catch(b){console.error(` Error configurando listener de ${t}:`,b),d(b.message),c(!1)}})(),()=>{h.current&&(console.log(` Desconectando listener de ${t}`),h.current())}},[t,p]),{data:s,loading:l,error:u}},uae=()=>s7("rutas",[["estado","in",["asignada","cargada","carga_finalizada","en_carga","en_entrega"]]]),WTe=()=>s7("rutas",[["estado","in",["en_carga","cargada","carga_finalizada"]]]),i7=(t=null)=>{const e=[["activo","==",!0]];t&&e.push(["rol","==",t]);const{data:r,loading:n,error:a}=s7("usuarios",e),[s,o]=A.useState([]);return A.useEffect(()=>{if(!r)return;const l=new Date,c=5*60*1e3,u=r.filter(d=>{var g,b;if(!d.ultimaActividad)return!1;let h;if((g=d.ultimaActividad)!=null&&g.toDate)h=d.ultimaActividad.toDate();else if((b=d.ultimaActividad)!=null&&b.seconds)h=new Date(d.ultimaActividad.seconds*1e3);else if(d.ultimaActividad instanceof Date)h=d.ultimaActividad;else return!1;return l-h<c});o(u)},[r]),{data:s,loading:n,error:a}},KTe=()=>{const[t,e]=A.useState(0),[r,n]=A.useState(!1),{data:a,loading:s}=WTe(),{data:o,loading:l}=i7("cargador"),c=()=>{n(!0),e(p=>p+1),setTimeout(()=>n(!1),1e3)},u=a.filter(p=>p.cargadorId),d=u.filter(p=>p.estado==="en_carga").length,h=u.filter(p=>p.estado==="cargada"||p.estado==="carga_finalizada").length;return s||l?i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),i.jsx("span",{className:"ml-3 text-slate-600",children:"Cargando monitor..."})]})}):i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-amber-50 to-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:i.jsx(Lr,{className:"w-6 h-6 text-amber-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Monitor de Cargadores"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Actividad en tiempo real"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[i.jsx("button",{onClick:c,disabled:r,className:"p-2 rounded-lg bg-amber-100 hover:bg-amber-200 text-amber-600 transition-colors disabled:opacity-50",title:"Actualizar manualmente",children:i.jsx(W0,{className:`w-4 h-4 ${r?"animate-spin":""}`})}),i.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-emerald-50 rounded-md border border-emerald-200",children:[i.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-emerald-700",children:"En vivo"})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 p-6 bg-slate-50",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-amber-600",children:o.length}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Cargadores Activos"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:d}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Cargando Ahora"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:h}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Listas para Salir"})]})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[i.jsx(Xu,{className:"w-4 h-4"}),"Rutas en Proceso"]}),u.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Lr,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),i.jsx("p",{children:"No hay rutas en proceso de carga"})]}):i.jsx("div",{className:"space-y-3",children:u.map(p=>{const g=o.find(S=>S.uid===p.cargadorId),b=p.itemsCargadosRuta||0,w=p.itemsTotalRuta||0,_=w>0?Math.round(b/w*100):0;let N="";if(p.fechaInicioCarga){const S=new Date(p.fechaInicioCarga),R=Math.floor((new Date-S)/6e4);if(R<60)N=`${R} min`;else{const z=Math.floor(R/60),G=R%60;N=`${z}h ${G}m`}}return i.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all ${p.estado==="en_carga"?"border-amber-200 bg-amber-50":"border-emerald-200 bg-emerald-50"}`,children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h5",{className:"font-semibold text-slate-900",children:p.nombre}),p.estado==="en_carga"?i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-xs rounded-full font-medium",children:"Cargando"}):i.jsxs("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs rounded-full font-medium flex items-center gap-1",children:[i.jsx(Jr,{className:"w-3 h-3"}),"Completa"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(vl,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:(g==null?void 0:g.nombre)||"Cargador no asignado"}),N&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(Wo,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:N})]})]})]})}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 mb-1",children:[i.jsx("span",{children:"Items cargados"}),i.jsxs("span",{className:"font-medium",children:[b," / ",w]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-500 ${_===100?"bg-emerald-500":"bg-amber-500"}`,style:{width:`${_}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mt-3 pt-3 border-t border-slate-200",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-slate-900",children:p.totalFacturas||0}),i.jsx("div",{className:"text-slate-500",children:"Facturas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"font-semibold text-slate-900",children:[_,"%"]}),i.jsx("div",{className:"text-slate-500",children:"Completado"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold text-slate-900",children:p.zona||"No asignada"}),i.jsx("div",{className:"text-slate-500",children:"Zona"})]})]}),p.notasCarga&&i.jsx("div",{className:"mt-3 p-2 bg-white rounded border border-slate-200",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(hi,{className:"w-4 h-4 text-amber-500 flex-shrink-0 mt-0.5"}),i.jsx("div",{className:"text-xs text-slate-600",children:p.notasCarga})]})})]},p.id)})})]}),i.jsx("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-200 text-xs text-slate-500 text-center",children:"Actualizacin automtica en tiempo real"})]})},XTe=()=>{const[t,e]=A.useState(0),[r,n]=A.useState(!1),{data:a,loading:s}=uae(),{data:o,loading:l}=i7("repartidor"),c=()=>{n(!0),e(p=>p+1),setTimeout(()=>n(!1),1e3)};if(s||l)return i.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500"}),i.jsx("span",{className:"ml-3 text-slate-600",children:"Cargando monitor..."})]})});const u=a.filter(p=>p.repartidorId);u.reduce((p,g)=>p+(g.totalFacturas||0),0);const d=u.reduce((p,g)=>p+(g.facturasEntregadas||0),0),h=u.reduce((p,g)=>{const b=g.facturas||[];return p+b.filter(w=>w.estado==="no_entregada").length},0);return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 bg-gradient-to-r from-indigo-50 to-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(ts,{className:"w-6 h-6 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Monitor de Repartidores"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Entregas en tiempo real"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[i.jsx("button",{onClick:c,disabled:r,className:"p-2 rounded-lg bg-indigo-100 hover:bg-indigo-200 text-indigo-600 transition-colors disabled:opacity-50",title:"Actualizar manualmente",children:i.jsx(W0,{className:`w-4 h-4 ${r?"animate-spin":""}`})}),i.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-emerald-50 rounded-md border border-emerald-200",children:[i.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-emerald-700",children:"En vivo"})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 p-6 bg-slate-50",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:o.length}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Repartidores"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-amber-600",children:u.length}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"En Ruta"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:d}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"Entregadas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-rose-600",children:h}),i.jsx("div",{className:"text-xs text-slate-600 mt-1",children:"No Entregadas"})]})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-700 mb-4 flex items-center gap-2",children:[i.jsx(Da,{className:"w-4 h-4"}),"Rutas Activas"]}),u.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(ts,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),i.jsx("p",{children:"No hay repartidores en ruta"})]}):i.jsx("div",{className:"space-y-3",children:u.map(p=>{var R;const g=o.find(z=>z.uid===p.repartidorId),b=p.facturas||[],w=b.length,_=p.facturasEntregadas||0,N=b.filter(z=>z.estado==="no_entregada").length,S=w>0?Math.round(_/w*100):0;let T="";if(p.fechaInicioEntrega){const z=new Date(p.fechaInicioEntrega),O=Math.floor((new Date-z)/6e4);if(O<60)T=`${O} min`;else{const D=Math.floor(O/60),I=O%60;T=`${D}h ${I}m`}}return i.jsxs("div",{className:"p-4 rounded-lg border-2 border-indigo-200 bg-indigo-50 transition-all hover:shadow-md",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h5",{className:"font-semibold text-slate-900",children:p.nombre}),i.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs rounded-full font-medium flex items-center gap-1",children:[i.jsx(ts,{className:"w-3 h-3"}),"En Entrega"]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(vl,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"font-medium",children:(g==null?void 0:g.nombre)||"No asignado"}),T&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(Wo,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:T})]}),p.zona&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(Da,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:p.zona})]})]})]})}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 mb-1",children:[i.jsx("span",{children:"Progreso de entregas"}),i.jsxs("span",{className:"font-medium",children:[_," / ",w]})]}),i.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-500 ${S===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${S}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mt-3 pt-3 border-t border-indigo-200",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(Lr,{className:"w-3.5 h-3.5 text-slate-500"})}),i.jsx("div",{className:"font-semibold text-slate-900",children:w}),i.jsx("div",{className:"text-slate-500",children:"Total"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(Jr,{className:"w-3.5 h-3.5 text-emerald-500"})}),i.jsx("div",{className:"font-semibold text-emerald-600",children:_}),i.jsx("div",{className:"text-slate-500",children:"Entregadas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:i.jsx(Wo,{className:"w-3.5 h-3.5 text-amber-500"})}),i.jsx("div",{className:"font-semibold text-amber-600",children:w-_}),i.jsx("div",{className:"text-slate-500",children:"Pendientes"})]})]}),p.totalGastos>0&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-200 flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-slate-600",children:"Gastos reportados:"}),i.jsxs("span",{className:"font-semibold text-slate-900",children:["$",((R=p.totalGastos)==null?void 0:R.toLocaleString("es-DO"))||"0"]})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-center gap-1",children:[Array.from({length:Math.min(w,10)}).map((z,G)=>{const O=G<_,D=G>=_&&G<_+N;return i.jsx("div",{className:`w-6 h-1 rounded-full transition-all ${O?"bg-emerald-500":D?"bg-rose-400":"bg-slate-300"}`},G)}),w>10&&i.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["+",w-10]})]})]},p.id)})})]}),i.jsx("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-200 text-xs text-slate-500 text-center",children:"Actualizacin automtica en tiempo real"})]})},zV=({variant:t="base",className:e="",children:r,onClick:n,...a})=>{const s={base:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow duration-200",elevated:"bg-white rounded-xl shadow-lg border border-slate-200",interactive:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md hover:border-indigo-300 transition-all duration-200 cursor-pointer"};return i.jsx("div",{className:`${s[t]} ${e}`,onClick:n,...a,children:r})},VV=({className:t="",children:e,...r})=>i.jsx("div",{className:`p-6 ${t}`,...r,children:e}),Jj=({variant:t="neutral",size:e="md",dot:r=!1,className:n="",children:a,...s})=>{const o="inline-flex items-center font-medium rounded-full",l={success:"bg-emerald-50 text-emerald-700 ring-1 ring-inset ring-emerald-600/20",warning:"bg-amber-50 text-amber-700 ring-1 ring-inset ring-amber-600/20",danger:"bg-rose-50 text-rose-700 ring-1 ring-inset ring-rose-600/20",info:"bg-indigo-50 text-indigo-700 ring-1 ring-inset ring-indigo-600/20",neutral:"bg-slate-50 text-slate-700 ring-1 ring-inset ring-slate-600/20"},c={sm:"px-2 py-0.5 text-xs gap-1",md:"px-2.5 py-1 text-sm gap-1.5",lg:"px-3 py-1.5 text-base gap-2"},u={success:"bg-emerald-500",warning:"bg-amber-500",danger:"bg-rose-500",info:"bg-indigo-500",neutral:"bg-slate-500"},d={sm:"w-1 h-1",md:"w-1.5 h-1.5",lg:"w-2 h-2"};return i.jsxs("span",{className:`${o} ${l[t]} ${c[e]} ${n}`,...s,children:[r&&i.jsx("span",{className:`${d[e]} ${u[t]} rounded-full`}),a]})},YTe=()=>{const{user:t}=ca(),[e,r]=A.useState([]),[n,a]=A.useState(null),[s,o]=A.useState(null),[l,c]=A.useState(!1),[u,d]=A.useState(!1);A.useEffect(()=>{h()},[t]),A.useEffect(()=>{n&&p(n)},[n]);const h=async()=>{c(!0);try{const _=await t.getIdToken(),N=await fetch("https://proyecto-envios-production.up.railway.app/api/api/contenedores",{headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(N.ok){const T=(await N.json()).contenedores||[];r(T),T.length>0&&!n&&a(T[0].id)}}catch(_){console.error("Error cargando contenedores:",_)}finally{c(!1)}},p=async _=>{d(!0);try{const N=await t.getIdToken(),S=await fetch(`https://proyecto-envios-production.up.railway.app/api/api/dashboard/contenedor/${_}`,{headers:{Authorization:`Bearer ${N}`,"Content-Type":"application/json"}});if(S.ok){const T=await S.json();o(T.contenedor)}}catch(N){console.error("Error cargando estadsticas:",N)}finally{d(!1)}},g=_=>_>=90?"from-emerald-500 to-green-600":_>=70?"from-blue-500 to-indigo-600":_>=40?"from-amber-500 to-orange-600":"from-rose-500 to-red-600",b=_=>({CREADO:"bg-slate-100 text-slate-700",EN_RECOLECCION:"bg-blue-100 text-blue-700",CONFIRMADO:"bg-indigo-100 text-indigo-700",EN_TRANSITO:"bg-purple-100 text-purple-700",EN_ENTREGA:"bg-amber-100 text-amber-700",COMPLETADO:"bg-emerald-100 text-emerald-700"})[_]||"bg-gray-100 text-gray-700",w=_=>({CREADO:"Creado",EN_RECOLECCION:"En Recoleccin",CONFIRMADO:"Confirmado",EN_TRANSITO:"En Trnsito",EN_ENTREGA:"En Entrega",COMPLETADO:"Completado"})[_]||_;return l?i.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(W0,{className:"h-8 w-8 animate-spin text-indigo-600"})})}):e.length===0?i.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Lr,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600",children:"No hay contenedores disponibles"})]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6",children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-3",children:" Selecciona un Contenedor"}),i.jsx("select",{value:n||"",onChange:_=>a(_.target.value),className:"w-full px-4 py-3 border-2 border-slate-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-slate-50 font-medium text-slate-800",children:e.map(_=>i.jsxs("option",{value:_.id,children:[_.numeroContenedor," - ",new Date(_.createdAt).toLocaleDateString("es-DO")]},_.id))})]}),u?i.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-8",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx(W0,{className:"h-8 w-8 animate-spin text-indigo-600"}),i.jsx("span",{className:"ml-3 text-slate-600",children:"Cargando estadsticas..."})]})}):s?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl shadow-2xl p-6 text-white",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold",children:s.numeroContenedor}),i.jsxs("p",{className:"text-indigo-100 text-sm",children:["Creado: ",new Date(s.fechaCreacion).toLocaleDateString("es-DO")]})]}),i.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${b(s.estado)}`,children:w(s.estado)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium",children:"Progreso General"}),i.jsxs("span",{className:"font-bold",children:[s.progresoGeneral,"%"]})]}),i.jsx("div",{className:"w-full bg-white/20 rounded-full h-4 overflow-hidden",children:i.jsx("div",{className:`h-full bg-gradient-to-r ${g(s.progresoGeneral)} transition-all duration-500 rounded-full flex items-center justify-end pr-2`,style:{width:`${s.progresoGeneral}%`},children:s.progresoGeneral>10&&i.jsxs("span",{className:"text-xs font-bold text-white drop-shadow",children:[s.progresoGeneral,"%"]})})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg",children:i.jsx(Lr,{className:"h-6 w-6 text-indigo-600"})}),i.jsx("span",{className:"text-3xl font-bold text-slate-800",children:s.totalFacturas})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Facturas"}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["$",s.valorTotal.toFixed(2)]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg",children:i.jsx(Jr,{className:"h-6 w-6 text-purple-600"})}),i.jsx("span",{className:"text-3xl font-bold text-purple-600",children:s.facturasConfirmadas})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Confirmadas"}),i.jsx("div",{className:"mt-2 w-full bg-slate-100 rounded-full h-2",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full transition-all duration-500",style:{width:`${s.porcentajeConfirmacion}%`}})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.porcentajeConfirmacion,"% del total"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg",children:i.jsx(ts,{className:"h-6 w-6 text-amber-600"})}),i.jsx("span",{className:"text-3xl font-bold text-amber-600",children:s.facturasEnTransito})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"En Trnsito"}),i.jsx("div",{className:"mt-2 w-full bg-slate-100 rounded-full h-2",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-amber-500 to-orange-600 rounded-full transition-all duration-500",style:{width:`${s.porcentajeEnTransito}%`}})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.porcentajeEnTransito,"% del total"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-5 hover:shadow-xl transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-50 to-green-50 rounded-lg",children:i.jsx(Jr,{className:"h-6 w-6 text-emerald-600"})}),i.jsx("span",{className:"text-3xl font-bold text-emerald-600",children:s.facturasEntregadas})]}),i.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Entregadas"}),i.jsx("div",{className:"mt-2 w-full bg-slate-100 rounded-full h-2",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-green-600 rounded-full transition-all duration-500",style:{width:`${s.porcentajeEntrega}%`}})}),i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.porcentajeEntrega,"% del total"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:i.jsx(Wo,{className:"h-5 w-5 text-slate-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-slate-800",children:s.facturasPendientes}),i.jsx("p",{className:"text-sm text-slate-600",children:"Pendientes"})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:i.jsx(gp,{className:"h-5 w-5 text-indigo-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-indigo-800",children:s.facturasRecibidasRD}),i.jsx("p",{className:"text-sm text-slate-600",children:"Recibidas en RD"}),i.jsxs("p",{className:"text-xs text-slate-500",children:[s.porcentajeRecibidasRD,"%"]})]})]})}),i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-rose-100 rounded-lg",children:i.jsx(Wm,{className:"h-5 w-5 text-rose-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-rose-800",children:s.facturasNoEntregadas}),i.jsx("p",{className:"text-sm text-slate-600",children:"No Entregadas"})]})]})})]}),s.rutas&&s.rutas.length>0&&i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-6",children:[i.jsxs("h4",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[i.jsx(ts,{className:"h-5 w-5 text-indigo-600"}),"Rutas Asociadas (",s.totalRutas,")"]}),i.jsx("div",{className:"space-y-2",children:s.rutas.map(_=>i.jsxs("div",{className:"flex items-center justify-between bg-slate-50 p-3 rounded-lg border border-slate-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800",children:_.nombre}),i.jsxs("p",{className:"text-xs text-slate-500",children:[_.tipo==="recoleccion"?"Recoleccin":"Entrega","  ",_.totalPaquetes," paquetes"]})]}),i.jsx("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:_.estado})]},_.id))})]})]}):null]})},ZTe=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=A.useState(0);return A.useEffect(()=>{const c=t/60;let u=0,d=0;const h=setInterval(()=>{d++,u=Math.min(u+c,t),d>=60||u>=t?(s(t),clearInterval(h)):s(u)},1200/60);return()=>clearInterval(h)},[t]),i.jsxs("span",{children:[e,n>0?a.toFixed(n):Math.floor(a).toLocaleString("es-DO"),r]})},QTe=()=>{const{userData:t,loading:e}=ca(),r=Fs(),[n,a]=A.useState(null),[s,o]=A.useState(!0),[l,c]=A.useState(null),{data:u}=uae(),{data:d}=i7();return A.useEffect(()=>{if(!e&&t){const h=t.rol;if(h==="secretaria"){r("/secretarias");return}else if(h==="secretaria_usa"){r("/call-center");return}else if(h==="recolector"){r("/mis-solicitudes");return}else if(h==="repartidor"){r("/rutas");return}else if(h==="cargador"){r("/cargadores");return}else if(h==="almacen_rd"){r("/embarques");return}else if(h==="almacen_eeuu"){r("/almacen-usa");return}if(h!=="admin_general"&&h!=="super_admin"&&h!=="propietario"){r("/");return}}},[t,e]),A.useEffect(()=>{!e&&t&&(async()=>{var p,g,b,w,_,N,S,T,R,z,G,O,D;if(!t||t.rol!=="admin_general"&&t.rol!=="super_admin"){o(!1);return}try{o(!0),c(null);const I=await wt.get("/dashboard/stats");console.log(" Respuesta del backend:",I.data);const V=I.data,P={embarquesActivos:((p=V.embarques)==null?void 0:p.activos)||0,recoleccionesHoy:((g=V.recolecciones)==null?void 0:g.hoy)||0,rutasEnCurso:((b=V.rutas)==null?void 0:b.enCurso)||((w=V.rutas)==null?void 0:w.activas)||0,facturasPendientes:((_=V.facturas)==null?void 0:_.pendientes)||0,totalUsuarios:((N=V.usuarios)==null?void 0:N.total)||0,usuariosActivos:((S=V.usuarios)==null?void 0:S.activos)||0,totalRecolecciones:((T=V.recolecciones)==null?void 0:T.total)||0,totalEmbarques:((R=V.embarques)==null?void 0:R.total)||0,totalRutas:((z=V.rutas)==null?void 0:z.total)||0,totalFacturas:((G=V.facturas)==null?void 0:G.total)||0,facturasEntregadas:((O=V.facturas)==null?void 0:O.entregadas)||0,empresa:V.empresa||null};console.log(" Stats transformadas:",P),a(P)}catch(I){console.error(" Error cargando estadsticas:",I),I.response?I.response.status===401?(c("Sesin expirada. Por favor, inicia sesin nuevamente."),setTimeout(()=>r("/login"),2e3)):I.response.status===403?c("No tienes permisos para ver estas estadsticas."):I.response.status===500?c("Error del servidor. Intenta nuevamente ms tarde."):c(((D=I.response.data)==null?void 0:D.error)||"Error al cargar estadsticas"):I.request?c("Error de conexin. Verifica tu internet e intenta nuevamente."):c(I.message||"Error desconocido al cargar estadsticas")}finally{o(!1)}})()},[t,e]),e?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(B1,{className:"w-12 h-12 text-indigo-600 mx-auto mb-4 animate-pulse"}),i.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando..."})]})}):l?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsx(zV,{className:"max-w-md",children:i.jsxs(VV,{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Error"}),i.jsx("p",{className:"text-slate-600 mb-6",children:l}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Reintentar"})]})})}):s?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(B1,{className:"w-12 h-12 text-indigo-600 mx-auto mb-4 animate-pulse"}),i.jsx("p",{className:"text-slate-600 font-medium",children:"Cargando estadsticas..."})]})}):n?i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-6 lg:p-8",children:[i.jsxs(Qt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-6 sm:mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-sm",children:i.jsx(B1,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 dark:text-white",children:["Dashboard - ",(t==null?void 0:t.rol)==="super_admin"?"Super Admin":"Administrador General"]}),i.jsxs("p",{className:"text-sm sm:text-base text-slate-600 dark:text-slate-400",children:["Bienvenido, ",t==null?void 0:t.nombre]})]})]}),n.empresa&&i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsx(Jj,{variant:"info",size:"sm",children:n.empresa.nombre}),i.jsxs(Jj,{variant:"neutral",size:"sm",children:["Plan: ",n.empresa.plan]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[i.jsx($V,{title:"Rutas en Curso",value:u.length,subtitle:`Total registradas: ${n.totalRutas||0}`,icon:Da,color:"amber",realtime:!0,delay:.1}),i.jsx($V,{title:"Usuarios Activos",value:d.length,subtitle:`Total en sistema: ${n.totalUsuarios||0}`,icon:od,color:"slate",realtime:!0,delay:.2}),i.jsx(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:"Estado del Sistema"}),i.jsx("div",{className:"flex items-center gap-2 mb-1",children:i.jsx(Jj,{variant:"success",size:"md",dot:!0,children:"Operativo"})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:"Todos los servicios funcionando"})]}),i.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center flex-shrink-0 ml-3 shadow-sm",children:i.jsx(Qg,{className:"w-6 h-6 text-white"})})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[i.jsx(KTe,{}),i.jsx(XTe,{})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},className:"mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Lr,{className:"w-6 h-6 text-indigo-600"}),"Monitoreo de Contenedores"]}),i.jsx(YTe,{})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.9},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center",children:i.jsx(Tf,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Accesos Rpidos"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(n_,{title:"Embarques",icon:Lr,color:"indigo",onClick:()=>r("/embarques")}),i.jsx(n_,{title:"Almacn USA",icon:p3,color:"indigo",onClick:()=>r("/almacen-usa")}),i.jsx(n_,{title:"Almacn RD",icon:p3,color:"emerald",onClick:()=>r("/almacen-rd")}),i.jsx(n_,{title:"Rutas",icon:ts,color:"amber",onClick:()=>r("/rutas")})]})]})]}):i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsx(zV,{className:"max-w-md",children:i.jsxs(VV,{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Sin Datos"}),i.jsx("p",{className:"text-slate-600",children:"No hay estadsticas disponibles en este momento."})]})})})},$V=({title:t,value:e,subtitle:r,icon:n,color:a,realtime:s=!1,delay:o=0})=>{const l={indigo:{bg:"bg-indigo-50",text:"text-indigo-600",iconBg:"bg-gradient-to-br from-indigo-500 to-indigo-600"},emerald:{bg:"bg-emerald-50",text:"text-emerald-600",iconBg:"bg-gradient-to-br from-emerald-500 to-emerald-600"},amber:{bg:"bg-amber-50",text:"text-amber-600",iconBg:"bg-gradient-to-br from-amber-500 to-amber-600"},rose:{bg:"bg-rose-50",text:"text-rose-600",iconBg:"bg-gradient-to-br from-rose-500 to-rose-600"},slate:{bg:"bg-slate-50",text:"text-slate-600",iconBg:"bg-gradient-to-br from-slate-500 to-slate-600"}},c=l[a]||l.indigo;return i.jsx(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow relative",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),s&&i.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 dark:bg-emerald-900/30 rounded-md",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:"En vivo"})]})]}),i.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-1",children:i.jsx(ZTe,{value:e})}),r&&i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:r})]}),i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ml-3 shadow-sm ${c.iconBg}`,children:n&&i.jsx(n,{className:"w-6 h-6 text-white"})})]})})},n_=({title:t,icon:e,color:r,onClick:n})=>{const a={indigo:{bg:"bg-indigo-50 dark:bg-indigo-900/20",hover:"hover:bg-indigo-100 dark:hover:bg-indigo-900/40",text:"text-indigo-600 dark:text-indigo-400",iconBg:"bg-indigo-100 dark:bg-indigo-800",border:"hover:border-indigo-200 dark:hover:border-indigo-700"},emerald:{bg:"bg-emerald-50 dark:bg-emerald-900/20",hover:"hover:bg-emerald-100 dark:hover:bg-emerald-900/40",text:"text-emerald-600 dark:text-emerald-400",iconBg:"bg-emerald-100 dark:bg-emerald-800",border:"hover:border-emerald-200 dark:hover:border-emerald-700"},amber:{bg:"bg-amber-50 dark:bg-amber-900/20",hover:"hover:bg-amber-100 dark:hover:bg-amber-900/40",text:"text-amber-600 dark:text-amber-400",iconBg:"bg-amber-100 dark:bg-amber-800",border:"hover:border-amber-200 dark:hover:border-amber-700"},slate:{bg:"bg-slate-50 dark:bg-slate-700/50",hover:"hover:bg-slate-100 dark:hover:bg-slate-700",text:"text-slate-600 dark:text-slate-400",iconBg:"bg-slate-100 dark:bg-slate-600",border:"hover:border-slate-200 dark:hover:border-slate-600"}},s=a[r]||a.indigo;return i.jsxs("button",{onClick:n,className:`${s.bg} ${s.hover} ${s.text} rounded-xl p-4 transition-all duration-200 flex flex-col items-center justify-center gap-3 min-h-[100px] border border-transparent ${s.border} hover:shadow-sm group`,children:[i.jsx("div",{className:`${s.iconBg} w-12 h-12 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-200`,children:e&&i.jsx(e,{className:"w-6 h-6"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:t})]})},HV="https://proyecto-envios-production.up.railway.app/api",JTe=()=>{const t=Fs(),[e,r]=A.useState(null),[n,a]=A.useState([]),[s,o]=A.useState({totalUsers:0,totalCompanies:0,activeCompanies:0,inactiveCompanies:0}),[l,c]=A.useState(!0),[u,d]=A.useState(null);A.useEffect(()=>{h(),p()},[]),A.useEffect(()=>{n.length>0&&g()},[n]);const h=async()=>{try{const N=await(await fetch(`${HV}/health`)).json();r(N)}catch(_){console.error("Error checking health:",_),r({status:"ERROR",error:_.message})}},p=async()=>{c(!0),d(null);try{const _=await wt.get("/companies");if(_.data.success)a(_.data.data||[]);else throw new Error(_.data.error||"Error al cargar compaas")}catch(_){console.error("Error cargando compaas:",_),d(_.message),a([])}finally{c(!1)}},g=async()=>{var _,N,S;try{const T=await wt.get("/empleados").catch(()=>({data:[]})),R=n.filter(G=>G==null?void 0:G.activo).length,z=n.filter(G=>!(G!=null&&G.activo)).length;o({totalUsers:((N=(_=T.data)==null?void 0:_.data)==null?void 0:N.length)||((S=T.data)==null?void 0:S.length)||0,totalCompanies:n.length,activeCompanies:R,inactiveCompanies:z})}catch(T){console.error(" Error fetching stats:",T)}},b=_=>_==="OK"?"bg-emerald-500":_==="ERROR"?"bg-rose-500":"bg-amber-500",w=_=>_==="OK"?"Sistema Operativo":_==="ERROR"?"Sistema Cado":"Verificando...";return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Monitor del Sistema"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Panel de control y administracin del sistema Multi-Tenant"})]}),u&&i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border-l-4 border-rose-400 dark:border-rose-600 p-4 mb-6",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-rose-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-rose-700 dark:text-rose-200",children:[i.jsx("strong",{children:"Error:"})," ",u]})})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white",children:[i.jsx(B1,{className:"inline mr-2",size:20}),"Estado de Servicios"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Backend API"}),i.jsx("p",{className:"text-lg font-semibold mt-1 text-slate-900 dark:text-white",children:e?w(e.status):"Verificando..."})]}),i.jsx("div",{className:`w-4 h-4 rounded-full ${e?b(e.status):"bg-slate-300 dark:bg-slate-600"}`})]}),(e==null?void 0:e.uptime)&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[" Uptime: ",Math.floor(e.uptime/60)," min"]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[" ",HV]})]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Firebase/Firestore"}),i.jsx("p",{className:"text-lg font-semibold mt-1 text-slate-900 dark:text-white",children:"Operativo"})]}),i.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500"})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:" Conexin estable"})]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-slate-50 dark:bg-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Autenticacin"}),i.jsx("p",{className:"text-lg font-semibold mt-1 text-slate-900 dark:text-white",children:"Operativo"})]}),i.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500"})]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:" Firebase Auth activo"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[i.jsx("div",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Compaas Totales"}),i.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-1",children:s.totalCompanies}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"En el sistema"})]}),i.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900 rounded-full",children:i.jsx(Qm,{className:"text-indigo-600 dark:text-indigo-300",size:24})})]})}),i.jsx("div",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Compaas Activas"}),i.jsx("p",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-1",children:s.activeCompanies}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Operando"})]}),i.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900 rounded-full",children:i.jsx(Jr,{className:"text-emerald-600 dark:text-emerald-300",size:24})})]})}),i.jsx("div",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Compaas Inactivas"}),i.jsx("p",{className:"text-3xl font-bold text-rose-600 dark:text-rose-400 mt-1",children:s.inactiveCompanies}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Desactivadas"})]}),i.jsx("div",{className:"p-3 bg-rose-100 dark:bg-rose-900 rounded-full",children:i.jsx(_s,{className:"text-rose-600 dark:text-rose-300",size:24})})]})}),i.jsx("div",{onClick:()=>t("/empleados"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition cursor-pointer",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Usuarios Totales"}),i.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white mt-1",children:s.totalUsers}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"En todas las compaas"})]}),i.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-full",children:i.jsx(od,{className:"text-purple-600 dark:text-purple-300",size:24})})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:[i.jsx(Qm,{className:"inline mr-2",size:20}),"Compaas Registradas"]}),i.jsx("button",{onClick:()=>t("/companies"),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm",children:"Ver todas "})]}),l?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando compaas..."})]}):n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Qm,{className:"mx-auto text-slate-400 dark:text-slate-600 mb-3",size:48}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay compaas registradas"}),i.jsx("button",{onClick:()=>t("/companies"),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Crear Primera Compaa"})]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Compaa"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Plan"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Creada"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Admin"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:n.slice(0,5).map(_=>i.jsxs("tr",{onClick:()=>t("/companies"),className:"hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer",children:[i.jsxs("td",{className:"px-4 py-3",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:_.nombre||"Sin nombre"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:_.id})]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_.plan==="enterprise"?"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200":_.plan==="premium"?"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"}`,children:_.plan||"basic"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${_.activo?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"}`,children:_.activo?" Activa":" Inactiva"})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:_.fechaCreacion?new Date(_.fechaCreacion.toDate?_.fechaCreacion.toDate():_.fechaCreacion).toLocaleDateString():"N/A"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:_.adminEmail||"N/A"})]},_.id))})]}),n.length>5&&i.jsx("div",{className:"text-center mt-4",children:i.jsxs("button",{onClick:()=>t("/companies"),className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:["Ver todas las ",n.length," compaas "]})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white",children:[i.jsx(_s,{className:"inline mr-2",size:20}),"Alertas del Sistema"]}),i.jsxs("div",{className:"space-y-3",children:[(e==null?void 0:e.status)==="ERROR"&&i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border-l-4 border-rose-400 dark:border-rose-600 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-rose-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-rose-700 dark:text-rose-200",children:[i.jsx("strong",{children:"Backend API cado:"})," ",e.error]})})]})}),s.inactiveCompanies>0&&i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-400 dark:border-amber-600 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-amber-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-200",children:[i.jsx("strong",{children:"Compaas inactivas:"})," ",s.inactiveCompanies," compaa",s.inactiveCompanies!==1?"s":""," desactivada",s.inactiveCompanies!==1?"s":""]})})]})}),(e==null?void 0:e.status)==="OK"&&s.inactiveCompanies===0&&i.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border-l-4 border-emerald-400 dark:border-emerald-600 p-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("span",{className:"text-emerald-400 text-xl",children:""})}),i.jsx("div",{className:"ml-3",children:i.jsxs("p",{className:"text-sm text-emerald-700 dark:text-emerald-200",children:[i.jsx("strong",{children:"Todo operativo:"})," No se detectaron problemas en el sistema"]})})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[i.jsxs("button",{onClick:()=>t("/companies"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx(Qm,{className:"text-indigo-600 dark:text-indigo-400 mb-3",size:32}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Gestionar Compaas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra todas las compaas del sistema"})]}),i.jsxs("button",{onClick:()=>t("/empleados"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx(od,{className:"text-emerald-600 dark:text-emerald-400 mb-3",size:32}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Ver Usuarios"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revisa todos los usuarios del sistema"})]}),i.jsxs("button",{onClick:()=>t("/tickets-admin"),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx(_s,{className:"text-purple-600 dark:text-purple-400 mb-3",size:32}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:"Tickets de Soporte"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Revisa y responde tickets de ayuda"})]})]})]})},$N=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=A.useState(0);return A.useEffect(()=>{const c=t/60;let u=0,d=0;const h=setInterval(()=>{d++,u=Math.min(u+c,t),d>=60||u>=t?(s(t),clearInterval(h)):s(u)},1200/60);return()=>clearInterval(h)},[t]),i.jsxs("span",{children:[e,n>0?a.toFixed(n):Math.floor(a).toLocaleString("es-DO"),r]})},eCe=()=>{const{userData:t,loading:e}=ca(),r=Fs(),[n,a]=A.useState(null),[s,o]=A.useState(!0),[l,c]=A.useState(null),[u,d]=A.useState([]),[h,p]=A.useState(null),[g,b]=A.useState(null),[w,_]=A.useState([]),[N,S]=A.useState(null),[T,R]=A.useState(null);return A.useEffect(()=>{!e&&t&&(async()=>{var G,O,D,I,V,P,B,F,ee,Z,ce,ne,ae,me,Te,we,q,Y,X,re,se,Ce,je,pe,Oe,qe,Ue,Me,Be,ve,Ht,mt,Ut,et,er,Ve,zt,Wt,Yt,ar,Xe,qt,kt,gt,Ft,Vt,Nr,sr,it,ir,be;if(!(!t||t.rol!=="propietario"&&t.rol!=="super_admin"))try{o(!0),c(null);const Ze=await wt.get("/dashboard/propietario");console.log(" Dashboard Ejecutivo:",Ze.data);const at=Ze.data.data,Qe={totalContenedores:((G=at.contenedores)==null?void 0:G.total)||0,contenedoresUSA:((O=at.contenedores)==null?void 0:O.enUSA)||0,contenedoresRD:((D=at.contenedores)==null?void 0:D.enRD)||0,contenedoresTransito:((I=at.contenedores)==null?void 0:I.enTransito)||0,contenedoresTrabajados:((V=at.contenedores)==null?void 0:V.trabajados)||0,porcentajeTrabajados:((P=at.contenedores)==null?void 0:P.porcentajeTrabajados)||0,porcentajeConfirmacion:((F=(B=at.contenedores)==null?void 0:B.facturas)==null?void 0:F.porcentajeConfirmacion)||0,porcentajeEntregaContenedores:((Z=(ee=at.contenedores)==null?void 0:ee.facturas)==null?void 0:Z.porcentajeEntrega)||0,facturasConfirmadas:((ne=(ce=at.contenedores)==null?void 0:ce.facturas)==null?void 0:ne.confirmadas)||0,totalFacturasContenedor:((me=(ae=at.contenedores)==null?void 0:ae.facturas)==null?void 0:me.total)||0,rutasActivas:((Te=at.rutas)==null?void 0:Te.activas)||0,rutasCompletadas:((we=at.rutas)==null?void 0:we.completadas)||0,rutasPendientes:((q=at.rutas)==null?void 0:q.pendientes)||0,totalRutas:((Y=at.rutas)==null?void 0:Y.total)||0,porcentajeEntregaRutas:((re=(X=at.rutas)==null?void 0:X.eficiencia)==null?void 0:re.porcentajeEntrega)||0,facturasEnRutas:((Ce=(se=at.rutas)==null?void 0:se.eficiencia)==null?void 0:Ce.totalFacturas)||0,facturasEntregadasRutas:((pe=(je=at.rutas)==null?void 0:je.eficiencia)==null?void 0:pe.entregadas)||0,totalFacturas:((Oe=at.facturas)==null?void 0:Oe.total)||0,facturasEntregadas:((qe=at.facturas)==null?void 0:qe.entregadas)||0,facturasPendientes:((Ue=at.facturas)==null?void 0:Ue.pendientes)||0,facturasNoEntregadas:((Me=at.facturas)==null?void 0:Me.noEntregadas)||0,facturasEnRuta:((Be=at.facturas)==null?void 0:Be.enRuta)||0,porcentajeEntrega:((ve=at.facturas)==null?void 0:ve.porcentajeEntrega)||0,totalNoEntregadas:((Ht=at.noEntregadas)==null?void 0:Ht.total)||0,reincidencias:((mt=at.noEntregadas)==null?void 0:mt.reincidencias)||0,porcentajeReincidencia:((Ut=at.noEntregadas)==null?void 0:Ut.porcentajeReincidencia)||0,motivosNoEntrega:((et=at.noEntregadas)==null?void 0:et.motivos)||[],solicitudesTotal:((er=at.solicitudes)==null?void 0:er.total)||0,solicitudesPendientes:((Ve=at.solicitudes)==null?void 0:Ve.pendientes)||0,solicitudesAsignadas:((zt=at.solicitudes)==null?void 0:zt.asignadas)||0,solicitudesCompletadas:((Wt=at.solicitudes)==null?void 0:Wt.completadas)||0,solicitudesHoy:((Yt=at.solicitudes)==null?void 0:Yt.solicitudesHoy)||0,solicitudesAsignacionManual:((ar=at.solicitudes)==null?void 0:ar.asignacionManual)||0,solicitudesAsignacionAuto:((Xe=at.solicitudes)==null?void 0:Xe.asignacionAuto)||0,porcentajeSolicitudesCompletadas:((qt=at.solicitudes)==null?void 0:qt.porcentajeCompletadas)||0,cobrosFinanzas:((gt=(kt=at.finanzas)==null?void 0:kt.mes)==null?void 0:gt.cobros)||0,gastosFinanzas:((Vt=(Ft=at.finanzas)==null?void 0:Ft.mes)==null?void 0:Vt.gastos)||0,balanceFinanzas:((sr=(Nr=at.finanzas)==null?void 0:Nr.mes)==null?void 0:sr.balance)||0,embarquesActivos:0,rutasEnCurso:((it=at.rutas)==null?void 0:it.activas)||0,totalEmbarques:0,empresa:null};a(Qe)}catch(Ze){console.error(" Error cargando dashboard ejecutivo:",Ze),c(((be=(ir=Ze.response)==null?void 0:ir.data)==null?void 0:be.error)||"Error al cargar dashboard")}finally{o(!1)}})()},[t,e]),A.useEffect(()=>{!e&&t&&(async()=>{if(t)try{const G=await wt.get("/contenedores");G.data.success&&d(G.data.data)}catch(G){console.error("Error cargando contenedores:",G)}})()},[t,e]),A.useEffect(()=>{(async()=>{if(!h){b(null);return}try{const G=await wt.get(`/dashboard/contenedor/${h}`);G.data.success&&b(G.data.contenedor)}catch(G){console.error("Error cargando stats de contenedor:",G)}})()},[h]),A.useEffect(()=>{!e&&t&&(async()=>{if(t)try{const G=await wt.get("/rutas");G.data.success&&_(G.data.data)}catch(G){console.error("Error cargando rutas:",G)}})()},[t,e]),A.useEffect(()=>{(async()=>{if(!N){R(null);return}try{const G=await wt.get(`/dashboard/ruta/${N}`);G.data.success&&R(G.data.data)}catch(G){console.error("Error cargando stats de ruta:",G)}})()},[N]),e||s?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando tu dashboard..."})]})}):l?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-rose-50 to-white dark:from-slate-900 dark:to-slate-800",children:i.jsxs(Qt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-rose-200 dark:border-rose-900 p-8 max-w-md",children:[i.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(hi,{className:"w-8 h-8 text-rose-600 dark:text-rose-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2 text-center",children:"Error"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6 text-center",children:l}),i.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Reintentar"})]})}):n?i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-4 sm:p-6 lg:p-8",children:[i.jsx(Qt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:i.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:["Bienvenido, ",t==null?void 0:t.nombre]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"Vista general de tu operacin empresarial"})]}),n.empresa&&i.jsxs(Qt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"flex items-center gap-3 bg-white dark:bg-slate-800 rounded-xl px-6 py-4 shadow-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(Lr,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tu Empresa"}),i.jsx("p",{className:"font-bold text-lg text-slate-900 dark:text-white",children:n.empresa.nombre}),i.jsxs("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:["Plan: ",n.empresa.plan]})]})]})]})}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center",children:[i.jsx(Lr,{className:"w-6 h-6 mr-2 text-indigo-600"}),"Contenedores"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:h||"",onChange:z=>p(z.target.value||null),className:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",children:[i.jsx("option",{value:"",children:" Todos los contenedores"}),u.map(z=>i.jsxs("option",{value:z.id,children:[" ",z.numeroContenedor," - ",z.estado]},z.id))]}),h&&i.jsx("button",{onClick:()=>p(null),className:"px-3 py-2 text-sm bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Ver todos"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[i.jsx(fo,{title:h?"Facturas en Contenedor":"Total Contenedores",value:g?g.totalFacturas:n.totalContenedores,total:g?g.totalFacturas:n.totalContenedores,icon:Lr,gradient:"from-indigo-500 to-purple-500",delay:.1}),i.jsx(fo,{title:h?"Confirmadas":"En USA",value:g?g.facturasConfirmadas:n.contenedoresUSA,total:g?g.totalFacturas:n.totalContenedores,icon:g?Qg:p3,gradient:"from-blue-500 to-cyan-500",delay:.2}),i.jsx(fo,{title:h?"Entregadas":"En RD",value:g?g.facturasEntregadas:n.contenedoresRD,total:g?g.totalFacturas:n.totalContenedores,icon:Qg,gradient:"from-emerald-500 to-teal-500",delay:.3}),i.jsx(fo,{title:"% Entrega",value:g?g.porcentajeEntrega:n.porcentajeEntregaContenedores||0,total:100,icon:Tf,gradient:"from-emerald-500 to-green-500",delay:.4,isPercentage:!0}),i.jsx(fo,{title:"% Confirmacin",value:g?g.porcentajeConfirmacion:n.porcentajeConfirmacion,total:100,icon:Qg,gradient:"from-purple-500 to-pink-500",delay:.5,isPercentage:!0})]})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center",children:[i.jsx(ts,{className:"w-6 h-6 mr-2 text-emerald-600"}),"Rutas y Entregas"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:N||"",onChange:z=>S(z.target.value||null),className:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",children:[i.jsx("option",{value:"",children:" Todas las rutas"}),w.map(z=>i.jsxs("option",{value:z.id,children:[" ",z.nombre||z.id," - ",z.estado]},z.id))]}),N&&i.jsx("button",{onClick:()=>S(null),className:"px-3 py-2 text-sm bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Ver todas"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(fo,{title:N?"Facturas en Ruta":"Rutas Activas",value:T?T.totalFacturas:n.rutasActivas,total:T?T.totalFacturas:n.totalRutas,icon:ts,gradient:"from-emerald-500 to-teal-500",delay:.1,onClick:()=>!T&&r("/reportes")}),i.jsx(fo,{title:N?"Entregadas":"Completadas",value:T?T.facturasEntregadas:n.rutasCompletadas,total:T?T.totalFacturas:n.totalRutas,icon:Qg,gradient:"from-blue-500 to-indigo-500",delay:.2}),i.jsx(fo,{title:"% Entrega",value:T?T.porcentajeEntrega:n.porcentajeEntregaRutas,total:100,icon:Tf,gradient:"from-indigo-500 to-purple-500",delay:.3,isPercentage:!0}),i.jsx(fo,{title:"Facturas Pendientes",value:T?T.facturasPendientes:n.facturasPendientes,total:T?T.totalFacturas:n.totalFacturas,icon:Wo,gradient:"from-amber-500 to-orange-500",delay:.4})]})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center",children:[i.jsx(Kl,{className:"w-6 h-6 mr-2 text-indigo-600"}),"Solicitudes de Recoleccin"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[i.jsx(fo,{title:"Total Solicitudes",value:n.solicitudesTotal,total:n.solicitudesTotal,icon:I4e,gradient:"from-indigo-500 to-purple-500",delay:.1,onClick:()=>r("/solicitudes")}),i.jsx(fo,{title:"Pendientes",value:n.solicitudesPendientes,total:n.solicitudesTotal,icon:Wo,gradient:"from-amber-500 to-orange-500",delay:.2,onClick:()=>r("/solicitudes")}),i.jsx(fo,{title:"Asignadas",value:n.solicitudesAsignadas,total:n.solicitudesTotal,icon:ts,gradient:"from-blue-500 to-cyan-500",delay:.3}),i.jsx(fo,{title:"Completadas",value:n.solicitudesCompletadas,total:n.solicitudesTotal,icon:Qg,gradient:"from-emerald-500 to-teal-500",delay:.4}),i.jsx(fo,{title:"Hoy",value:n.solicitudesHoy,total:n.solicitudesTotal,icon:B1,gradient:"from-purple-500 to-pink-500",delay:.5})]}),(n.solicitudesAsignacionManual>0||n.solicitudesAsignacionAuto>0)&&i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Qt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20 rounded-xl p-4 border border-indigo-100 dark:border-indigo-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:"Asignacin Manual (Secretaria)"}),i.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100 mt-1",children:n.solicitudesAsignacionManual})]}),i.jsx("div",{className:"w-12 h-12 bg-indigo-200 dark:bg-indigo-800 rounded-full flex items-center justify-center",children:i.jsx(xl,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-300"})})]})}),i.jsx(Qt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},className:"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-xl p-4 border border-emerald-100 dark:border-emerald-800",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-medium",children:"Auto-Asignacin (Recolector)"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100 mt-1",children:n.solicitudesAsignacionAuto})]}),i.jsx("div",{className:"w-12 h-12 bg-emerald-200 dark:bg-emerald-800 rounded-full flex items-center justify-center",children:i.jsx(Tf,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-300"})})]})})]})]}),n.totalNoEntregadas>0&&i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"mb-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center",children:[i.jsx(hi,{className:"w-6 h-6 mr-2 text-rose-600"}),"Anlisis de No Entregadas"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsx(fo,{title:"Total No Entregadas",value:n.totalNoEntregadas,total:n.totalFacturas,icon:hi,gradient:"from-rose-500 to-pink-500",delay:.1}),i.jsx(fo,{title:"Reincidencias",value:n.reincidencias,total:n.totalNoEntregadas,icon:B1,gradient:"from-amber-500 to-orange-500",delay:.2}),i.jsx(fo,{title:"% Reincidencia",value:n.porcentajeReincidencia,total:100,icon:gp,gradient:"from-red-500 to-rose-500",delay:.3,isPercentage:!0})]}),n.motivosNoEntrega&&n.motivosNoEntrega.length>0&&i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-4",children:"Motivos de No Entrega"}),i.jsx("div",{className:"space-y-4",children:n.motivosNoEntrega.map((z,G)=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:z.motivo}),i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:[z.count," (",z.porcentaje,"%)"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${z.porcentaje}%`},transition:{duration:1,delay:.5+G*.1},className:"bg-gradient-to-r from-rose-500 to-pink-500 h-2 rounded-full"})})]},G))})]})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"mb-8",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-4 flex items-center",children:[i.jsx(Fl,{className:"w-6 h-6 mr-2 text-emerald-600"}),"Resumen Financiero del Mes"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Cobros"}),i.jsx("h3",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400",children:i.jsx($N,{value:n.cobrosFinanzas,prefix:"USD$ "})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Ingresos del mes"})]}),i.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-500 flex items-center justify-center shadow-lg",children:i.jsx(Tf,{className:"w-7 h-7 text-white"})})]})}),i.jsx(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Gastos"}),i.jsx("h3",{className:"text-3xl font-bold text-rose-600 dark:text-rose-400",children:i.jsx($N,{value:n.gastosFinanzas,prefix:"USD$ "})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"Egresos del mes"})]}),i.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-rose-500 to-pink-500 flex items-center justify-center shadow-lg",children:i.jsx(gp,{className:"w-7 h-7 text-white"})})]})}),i.jsx(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6",children:i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Balance"}),i.jsx("h3",{className:`text-3xl font-bold ${n.balanceFinanzas>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:i.jsx($N,{value:n.balanceFinanzas,prefix:"USD$ "})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:n.balanceFinanzas>=0?"Ganancia":"Prdida"})]}),i.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${n.balanceFinanzas>=0?"from-emerald-500 to-teal-500":"from-rose-500 to-red-500"} flex items-center justify-center shadow-lg`,children:i.jsx(Fl,{className:"w-7 h-7 text-white"})})]})})]})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 p-6 sm:p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg flex items-center justify-center",children:i.jsx(Tf,{className:"w-5 h-5 text-white"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Accesos Rpidos"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(a_,{title:"Finanzas",description:"Ver mtricas",icon:Fl,gradient:"from-emerald-500 to-teal-500",onClick:()=>r("/finanzas")}),i.jsx(a_,{title:"Reportes",description:"Anlisis completo",icon:gp,gradient:"from-indigo-500 to-purple-500",onClick:()=>r("/reportes")}),i.jsx(a_,{title:"Embarques",description:"Gestionar envos",icon:p3,gradient:"from-blue-500 to-cyan-500",onClick:()=>r("/embarques")}),i.jsx(a_,{title:"Rutas",description:"Ver entregas",icon:ts,gradient:"from-amber-500 to-orange-500",onClick:()=>r("/rutas")})]})]})]}):null},fo=({title:t,value:e,total:r,icon:n,gradient:a,delay:s,onClick:o,isPercentage:l=!1})=>{const c=l?e:r>0?Math.round(e/r*100):0,u=e;return i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:s},whileHover:{scale:1.02,y:-5},onClick:o,className:`bg-white dark:bg-slate-800 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 p-6 ${o?"cursor-pointer":""} hover:shadow-xl transition-all`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:t}),i.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:i.jsx($N,{value:u,suffix:l?"%":""})}),!l&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["de ",r," totales"]})]}),i.jsx("div",{className:`w-14 h-14 rounded-xl bg-gradient-to-br ${a} flex items-center justify-center shadow-lg`,children:i.jsx(n,{className:"w-7 h-7 text-white"})})]}),i.jsx("div",{className:"relative h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${c}%`},transition:{duration:1,delay:s+.3},className:`h-full bg-gradient-to-r ${a}`})}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2 text-right",children:[c,"%"]})]})},a_=({title:t,description:e,icon:r,gradient:n,onClick:a})=>i.jsxs(Qt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"flex flex-col items-center justify-center p-6 bg-gradient-to-br from-slate-50 to-white dark:from-slate-700 dark:to-slate-800 rounded-xl border-2 border-transparent hover:border-indigo-200 dark:hover:border-indigo-800 transition-all group",children:[i.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${n} flex items-center justify-center mb-3 shadow-lg group-hover:shadow-xl transition-shadow`,children:i.jsx(r,{className:"w-8 h-8 text-white"})}),i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-1",children:t}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 text-center",children:e})]}),tCe=()=>{const{userData:t}=ca(),e=Fs(),[r,n]=A.useState([]),[a,s]=A.useState(!0),[o,l]=A.useState(!1),[c,u]=A.useState("create"),[d,h]=A.useState(null),[p,g]=A.useState({nombre:"",adminEmail:"",adminPassword:"",telefono:"",supportPhone:"",direccion:"",plan:"operativo",emailConfig:{service:"gmail",user:"",pass:"",from:""},invoiceDesign:{logoUrl:"",primaryColor:"#1976D2",secondaryColor:"#f5f5f5",template:"modern",headerText:"Gracias por su preferencia",footerText:""}}),[b,w]=A.useState(!1),[_,N]=A.useState(null),[S,T]=A.useState(""),[R,z]=A.useState(!1);A.useEffect(()=>{(t==null?void 0:t.rol)==="super_admin"&&G()},[t]);const G=async()=>{try{s(!0);const ne=await wt.get("/companies");if(ne.data.success)n(ne.data.data||[]);else throw new Error(ne.data.error||"Error al cargar compaas")}catch(ne){console.error(" Error cargando compaas:",ne),n([]),alert("Error al cargar compaas")}finally{s(!1)}},O=async ne=>{var ae,me;ne.preventDefault();try{await wt.post("/companies",p),alert("Compaa y administrador creados exitosamente"),l(!1),ee(),G()}catch(Te){console.error("Error:",Te),alert(((me=(ae=Te.response)==null?void 0:ae.data)==null?void 0:me.error)||"Error al crear compaa")}},D=async ne=>{var ae,me;ne.preventDefault();try{await wt.put(`/companies/${d.id}`,{nombre:p.nombre,telefono:p.telefono,supportPhone:p.supportPhone,direccion:p.direccion,plan:p.plan,emailConfig:p.emailConfig,invoiceDesign:p.invoiceDesign}),alert("Compaa actualizada exitosamente"),l(!1),ee(),G()}catch(Te){console.error("Error:",Te),alert(((me=(ae=Te.response)==null?void 0:ae.data)==null?void 0:me.error)||"Error al actualizar compaa")}},I=async(ne,ae)=>{var me,Te;if(confirm(`Ests seguro de ${ae?"desactivar":"activar"} esta compaa?`))try{await wt.patch(`/companies/${ne}/toggle`),alert("Estado de compaa actualizado"),G()}catch(we){console.error("Error:",we),alert(((Te=(me=we.response)==null?void 0:me.data)==null?void 0:Te.error)||"Error al cambiar estado")}},V=async ne=>{var ae,me;if(ne.preventDefault(),!_||!S){alert("Contrasea requerida");return}if(confirm(` ADVERTENCIA CRTICA

Ests ABSOLUTAMENTE SEGURO de eliminar "${_.nombre}"?

Esto eliminar PERMANENTEMENTE:
- Todos los usuarios de la compaa
- Todos los embarques y facturas
- Todas las rutas y entregas
- Todo el historial

ESTA ACCIN NO SE PUEDE DESHACER`))try{z(!0);const{signInWithEmailAndPassword:Te}=await cp(async()=>{const{signInWithEmailAndPassword:Y}=await Promise.resolve().then(()=>F2e);return{signInWithEmailAndPassword:Y}},void 0),{auth:we}=await cp(async()=>{const{auth:Y}=await Promise.resolve().then(()=>B_e);return{auth:Y}},void 0);try{await Te(we,t.email,S)}catch{alert(" Contrasea incorrecta"),z(!1);return}const q=await wt.delete(`/companies/${_.id}`);alert(` ${q.data.message}

Eliminados:
- ${q.data.stats.usuarios} usuarios
- ${q.data.stats.embarques} embarques
- ${q.data.stats.rutas} rutas
- ${q.data.stats.facturas} facturas
- ${q.data.stats.gastos} gastos`),w(!1),N(null),T(""),G()}catch(Te){console.error("Error:",Te),alert(((me=(ae=Te.response)==null?void 0:ae.data)==null?void 0:me.error)||"Error al eliminar compaa")}finally{z(!1)}},P=()=>{u("create"),ee(),l(!0)},B=ne=>{u("edit"),h(ne),g({nombre:ne.nombre,adminEmail:ne.adminEmail,adminPassword:"",telefono:ne.telefono||"",supportPhone:ne.supportPhone||"",direccion:ne.direccion||"",plan:ne.plan||"operativo",emailConfig:ne.emailConfig||{service:"gmail",user:"",pass:"",from:""},invoiceDesign:ne.invoiceDesign||{logoUrl:"",primaryColor:"#1976D2",secondaryColor:"#f5f5f5",template:"modern",headerText:"Gracias por su preferencia",footerText:""}}),l(!0)},F=ne=>{N(ne),T(""),w(!0)},ee=()=>{g({nombre:"",adminEmail:"",adminPassword:"",telefono:"",supportPhone:"",direccion:"",plan:"operativo",emailConfig:{service:"gmail",user:"",pass:"",from:""},invoiceDesign:{logoUrl:"",primaryColor:"#1976D2",secondaryColor:"#f5f5f5",template:"modern",headerText:"Gracias por su preferencia",footerText:""}}),h(null)},Z=ne=>{const ae={operativo:"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200",automatizado:"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200",smart:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200"};return ae[ne]||ae.operativo},ce=ne=>({operativo:"Plan Operativo",automatizado:"Plan Automatizado",smart:"Plan Smart Logistics"})[ne]||"Plan Operativo";return(t==null?void 0:t.rol)!=="super_admin"?i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"bg-rose-100 border border-rose-400 text-rose-700 px-4 py-3 rounded",children:[i.jsx("p",{className:"font-bold",children:"Acceso Denegado"}),i.jsx("p",{className:"text-sm",children:"Solo los Super Administradores pueden gestionar compaas."})]})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Gestin de Compaas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Administra las compaas del sistema Multi-Tenant"})]}),i.jsx("button",{onClick:P,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium",children:"+ Nueva Compaa"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:a?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando compaas..."})]}):r.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg mb-4",children:"No hay compaas registradas"}),i.jsx("button",{onClick:P,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Crear Primera Compaa"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Compaa"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Plan"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Estado"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Creacin"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Admin Email"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r.map(ne=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:ne.nombre||"Sin nombre"}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["ID: ",ne.id]})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Z(ne.plan)}`,children:ce(ne.plan)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ne.activo?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"}`,children:ne.activo?" Activa":" Inactiva"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:ne.fechaCreacion?new Date(ne.fechaCreacion.toDate?ne.fechaCreacion.toDate():ne.fechaCreacion).toLocaleDateString():"N/A"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-400",children:ne.adminEmail||"N/A"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex justify-end gap-2 flex-wrap",children:[i.jsx("button",{onClick:()=>e(`/companies/${ne.id}/features`),className:"text-purple-600 dark:text-purple-400 hover:text-purple-900 dark:hover:text-purple-300 font-medium",children:" Features"}),i.jsx("button",{onClick:()=>B(ne),className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300",children:"Editar"}),i.jsx("button",{onClick:()=>I(ne.id,ne.activo),className:`${ne.activo?"text-amber-600 dark:text-amber-400 hover:text-amber-900 dark:hover:text-amber-300":"text-emerald-600 dark:text-emerald-400 hover:text-emerald-900 dark:hover:text-emerald-300"}`,children:ne.activo?"Desactivar":"Activar"}),i.jsx("button",{onClick:()=>F(ne),className:"text-rose-600 dark:text-rose-400 hover:text-rose-900 dark:hover:text-rose-300",children:"Eliminar"})]})})]},ne.id))})]})})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white",children:c==="create"?"Crear Nueva Compaa":"Editar Compaa"}),i.jsxs("form",{onSubmit:c==="create"?O:D,children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nombre de la Compaa *"}),i.jsx("input",{type:"text",required:!0,value:p.nombre,onChange:ne=>g({...p,nombre:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Embarques Ivn"}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Se generar un ID automtico: ",p.nombre.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email del Administrador *"}),i.jsx("input",{type:"email",required:!0,value:p.adminEmail,onChange:ne=>g({...p,adminEmail:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"admin@embarquesivn.com",disabled:c==="edit"})]}),c==="create"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contrasea del Administrador *"}),i.jsx("input",{type:"password",required:!0,value:p.adminPassword,onChange:ne=>g({...p,adminPassword:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Mnimo 6 caracteres",minLength:6}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:" Esta ser la contrasea para que el administrador inicie sesin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telfono"}),i.jsx("input",{type:"tel",value:p.telefono,onChange:ne=>g({...p,telefono:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"(809) 123-4567"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telfono de Soporte (Bot Handoff)"}),i.jsx("input",{type:"tel",value:p.supportPhone,onChange:ne=>g({...p,supportPhone:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"5215512345678 (Sin smbolos)"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:' Este nmero se enviar cuando el usuario pida "Ayuda" o "Soporte" en WhatsApp.'})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Direccin"}),i.jsx("input",{type:"text",value:p.direccion,onChange:ne=>g({...p,direccion:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Santo Domingo, Repblica Dominicana"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Plan *"}),i.jsxs("select",{required:!0,value:p.plan,onChange:ne=>g({...p,plan:ne.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"operativo",children:"Plan Operativo (RD$ 50,000/mes)"}),i.jsx("option",{value:"automatizado",children:"Plan Automatizado (RD$ 75,000/mes)"}),i.jsx("option",{value:"smart",children:"Plan Smart Logistics (RD$ 120,000/mes)"})]})]}),i.jsxs("div",{className:"border-t border-slate-300 dark:border-slate-600 pt-4 mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3",children:"Configuracin de Correo"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email de la Compaa"}),i.jsx("input",{type:"email",value:p.emailConfig.user,onChange:ne=>g({...p,emailConfig:{...p.emailConfig,user:ne.target.value,from:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"empresa@gmail.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contrasea de Aplicacin de Gmail"}),i.jsx("input",{type:"password",value:p.emailConfig.pass,onChange:ne=>g({...p,emailConfig:{...p.emailConfig,pass:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"wimu etth qgnf qplx"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Contrasea de aplicacin generada en Google"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-300 dark:border-slate-600 pt-4 mt-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3",children:"Diseo de Factura"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Logo de la Compaa"}),p.invoiceDesign.logoUrl&&i.jsx("div",{className:"mb-2 p-2 border border-slate-200 dark:border-slate-600 rounded-lg",children:i.jsx("img",{src:p.invoiceDesign.logoUrl,alt:"Logo preview",className:"h-16 object-contain mx-auto",onError:ne=>{ne.target.style.display="none"}})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("label",{className:"flex-1 cursor-pointer",children:[i.jsx("div",{className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-center rounded-lg transition-colors",children:" Subir Logo"}),i.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:async ne=>{var me,Te,we;const ae=(me=ne.target.files)==null?void 0:me[0];if(ae){if(ae.size>5*1024*1024){alert("El archivo es muy grande. Mximo 5MB");return}try{const q=new FormData;q.append("logo",ae);const Y=await wt.post(`/companies/${d.id}/upload-logo`,q,{headers:{"Content-Type":"multipart/form-data"}});Y.data.success?(g({...p,invoiceDesign:{...p.invoiceDesign,logoUrl:Y.data.logoUrl}}),alert("Logo subido exitosamente")):alert("Error: "+Y.data.error)}catch(q){console.error("Error subiendo logo:",q),alert(((we=(Te=q.response)==null?void 0:Te.data)==null?void 0:we.error)||"Error al subir logo")}}}})]}),i.jsx("button",{type:"button",onClick:()=>{const ne=prompt("Ingresa la URL del logo:",p.invoiceDesign.logoUrl);ne!==null&&g({...p,invoiceDesign:{...p.invoiceDesign,logoUrl:ne}})},className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors",children:" URL"})]}),i.jsx("input",{type:"url",value:p.invoiceDesign.logoUrl,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg bg-slate-50 text-sm",placeholder:"https://... (carga un archivo o ingresa una URL)"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Color Principal"}),i.jsx("input",{type:"color",value:p.invoiceDesign.primaryColor,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,primaryColor:ne.target.value}}),className:"w-full h-10 border border-slate-300 dark:border-slate-600 rounded-lg cursor-pointer"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Color Secundario"}),i.jsx("input",{type:"color",value:p.invoiceDesign.secondaryColor,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,secondaryColor:ne.target.value}}),className:"w-full h-10 border border-slate-300 dark:border-slate-600 rounded-lg cursor-pointer"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Plantilla"}),i.jsxs("select",{value:p.invoiceDesign.template,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,template:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"modern",children:"Moderna"}),i.jsx("option",{value:"classic",children:"Clsica"}),i.jsx("option",{value:"minimal",children:"Minimalista"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto de Encabezado"}),i.jsx("input",{type:"text",value:p.invoiceDesign.headerText,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,headerText:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Gracias por su preferencia"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Texto de Pie de Pgina"}),i.jsx("textarea",{value:p.invoiceDesign.footerText,onChange:ne=>g({...p,invoiceDesign:{...p.invoiceDesign,footerText:ne.target.value}}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Trminos y condiciones...",rows:"3"})]})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),ee()},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:c==="create"?"Crear Compaa":"Guardar Cambios"})]})]})]})}),b&&_&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-rose-100 dark:bg-rose-900/30 mb-4",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsx("h2",{className:"text-xl font-bold text-rose-600 dark:text-rose-400 mb-2",children:"ELIMINAR COMPAA"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["Esta accin es ",i.jsx("strong",{children:"IRREVERSIBLE"})]})]}),i.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg p-4 mb-4",children:[i.jsx("p",{className:"font-semibold text-rose-900 dark:text-rose-200 mb-2",children:"Se eliminar permanentemente:"}),i.jsxs("ul",{className:"text-sm text-rose-800 dark:text-rose-300 space-y-1",children:[i.jsxs("li",{children:[" Compaa: ",i.jsx("strong",{children:_.nombre})]}),i.jsx("li",{children:" Todos los usuarios de la compaa"}),i.jsx("li",{children:" Todos los embarques y facturas"}),i.jsx("li",{children:" Todas las rutas y entregas"}),i.jsx("li",{children:" Todo el historial"})]})]}),i.jsxs("form",{onSubmit:V,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:" Ingresa tu contrasea de Super Admin para confirmar:"}),i.jsx("input",{type:"password",required:!0,value:S,onChange:ne=>T(ne.target.value),className:"w-full px-3 py-2 border border-rose-300 dark:border-rose-700 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-500",placeholder:"Tu contrasea de Super Admin",disabled:R})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{w(!1),N(null),T("")},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",disabled:R,children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:R,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition disabled:opacity-50",children:R?"Eliminando...":"Eliminar Permanentemente"})]})]})]})})]})},Xv=()=>{const{userData:t}=ca(),[e,r]=A.useState([]),[n,a]=A.useState(!0),[s,o]=A.useState("");A.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0);const p=await wt.get("/embarques");if(console.log(" Embarques cargados:",p.data),p.data.success)r(p.data.data||[]);else throw new Error(p.data.error||"Error al cargar embarques desde la API")}catch(p){console.error(" Error cargando embarques:",p),r([]),alert("Error al cargar embarques: "+p.message)}finally{a(!1)}},c=async p=>{if(window.confirm("Ests seguro de eliminar este embarque?"))try{const g=await wt.delete(`/embarques/${p}`);if(g.data.success)alert(" Embarque eliminado exitosamente"),l();else throw new Error(g.data.error||"Error al eliminar embarque")}catch(g){console.error("Error eliminando embarque:",g),alert("Error al eliminar embarque: "+g.message)}},u=e.filter(p=>{var g,b,w,_;return((g=p.codigoTracking)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))||((b=p.origen)==null?void 0:b.toLowerCase().includes(s.toLowerCase()))||((w=p.destino)==null?void 0:w.toLowerCase().includes(s.toLowerCase()))||((_=p.nombre)==null?void 0:_.toLowerCase().includes(s.toLowerCase()))}),d=p=>{const g={activo:"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200",pendiente:"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200",en_proceso:"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200",entregado:"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200",completado:"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200",inactivo:"bg-slate-100 dark:bg-slate-900 text-slate-800 dark:text-slate-200",cancelado:"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"};return g[p]||g.activo},h=p=>({activo:"Activo",pendiente:"Pendiente",en_proceso:"En Proceso",entregado:"Entregado",completado:"Completado",inactivo:"Inactivo",cancelado:"Cancelado"})[p]||p;return n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white",children:"Embarques"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Los embarques se crean automticamente desde Google Drive"})]})}),i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Lr,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-indigo-900 dark:text-indigo-100",children:"Sistema de actualizacin automtica"}),i.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mt-1",children:"Los embarques se sincronizan automticamente cada 5 minutos desde Google Drive"})]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow",children:i.jsxs("div",{className:"relative",children:[i.jsx($d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),i.jsx("input",{type:"text",placeholder:"Buscar por nombre, cdigo, origen o destino...",value:s,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{size:16}),"Nombre / Cdigo"]})}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Descripcin"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kl,{size:16}),"Fecha Creacin"]})}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Estado"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Facturas"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Progreso"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:u.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:"7",className:"px-6 py-12 text-center",children:[i.jsx(Lr,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:s?"No se encontraron embarques":"No hay embarques registrados"}),i.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:"Los embarques se crearn automticamente al subir archivos a Google Drive"})]})}):u.map(p=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:p.nombre||p.codigoTracking||"Sin nombre"}),p.id&&i.jsxs("div",{className:"text-slate-500 dark:text-slate-400 text-xs",children:["ID: ",p.id]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100 max-w-xs truncate",children:p.descripcion||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:p.fechaCreacion?new Date(p.fechaCreacion).toLocaleDateString("es-DO",{year:"numeric",month:"short",day:"numeric"}):"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${d(p.estado||"activo")}`,children:h(p.estado||"activo")})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nu,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"font-medium",children:p.totalFacturas||0})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Entregadas: ",p.facturasEntregadas||0]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:"bg-emerald-600 h-2 rounded-full transition-all",style:{width:`${p.porcentajeCompletado||0}%`}})}),i.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[p.porcentajeCompletado||0,"%"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>window.location.href=`/embarques/${p.id}`,className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-900 dark:hover:text-indigo-300",title:"Ver detalles",children:i.jsx(Su,{size:18})}),((t==null?void 0:t.rol)==="admin_general"||(t==null?void 0:t.rol)==="super_admin")&&i.jsx("button",{onClick:()=>c(p.id),className:"text-rose-600 dark:text-rose-400 hover:text-rose-900 dark:hover:text-rose-300",title:"Eliminar",children:i.jsx(vp,{size:18})})]})})]},p.id||p._id))})]})})})]})},s_={"Distrito Nacional":"Capital","SD Este":"Capital","SD Norte":"Capital","SD Oeste":"Capital","Yaguate y Sur":"Capital",Santiago:"Cibao","La Vega":"Cibao","San Francisco de Macors":"Cibao",Moca:"Cibao","La Romana":"Este","Punta Cana":"Este",Bvaro:"Este",Higey:"Este","San Pedro de Macors":"Este",Barahona:"Sur",Azua:"Sur",Ban:"Sur","Recogida Almacn":"Local"},Yv=()=>{var Qe;const t=Fs(),{userData:e}=ca(),[r,n]=A.useState([]),[a,s]=A.useState(!0),[o,l]=A.useState(!1),[c,u]=A.useState(null),[d,h]=A.useState("activas"),[p,g]=A.useState([]),[b,w]=A.useState([]),[_,N]=A.useState([]),[S,T]=A.useState(""),[R,z]=A.useState(""),[G,O]=A.useState(""),[D,I]=A.useState(!1),[V,P]=A.useState([]),[B,F]=A.useState([]),[ee,Z]=A.useState("adelante-atras"),[ce,ne]=A.useState("cercanas-primero"),[ae,me]=A.useState(!1),[Te,we]=A.useState([]),[q,Y]=A.useState(!1),[X,re]=A.useState(""),[se,Ce]=A.useState([]),[je,pe]=A.useState(""),[Oe,qe]=A.useState(""),[Ue,Me]=A.useState(""),[Be,ve]=A.useState("");A.useEffect(()=>{Ht()},[]),A.useEffect(()=>{D&&mt()},[je,D]);const Ht=async()=>{try{s(!0);const ze=await wt.get("/rutas");if(ze.data.success)n(ze.data.data||[]);else throw new Error(ze.data.error||"Error al cargar rutas")}catch(ze){console.error("Error:",ze),Ke.error("Error al cargar rutas")}finally{s(!1)}},mt=async()=>{Y(!0);try{let ze="/rutas/facturas-disponibles";je&&(ze+=`?contenedorId=${je}`);const st=await wt.get(ze);st.data.success&&w(st.data.data||[])}catch(ze){console.error("Error al cargar facturas:",ze),Ke.error("Error al cargar facturas disponibles")}finally{Y(!1)}},Ut=async()=>{Y(!0);try{const ze=await wt.get("/rutas/repartidores-disponibles");ze.data.success&&g(ze.data.data||[]);const st=await wt.get("/rutas/cargadores-disponibles");st.data.success&&P(st.data.data||[]);const St=await wt.get("/rutas/contenedores-disponibles");St.data.success&&Ce(St.data.data||[]),w([]),I(!0)}catch(ze){console.error("Error:",ze),Ke.error("Error al cargar datos para crear ruta")}finally{Y(!1)}},et=ze=>{N(st=>st.includes(ze)?st.filter(St=>St!==ze):[...st,ze])},er=ze=>{F(st=>st.includes(ze)?st.filter(St=>St!==ze):[...st,ze])},Ve=A.useMemo(()=>{const ze=b.map(st=>s_[st.zona]).filter(Boolean);return[...new Set(ze)].sort()},[b]),zt=A.useMemo(()=>{const ze=b.filter(st=>!Oe||s_[st.zona]===Oe).map(st=>st.zona).filter(Boolean);return[...new Set(ze)].sort()},[b,Oe]),Wt=A.useMemo(()=>{const ze=b.filter(st=>(!Oe||s_[st.zona]===Oe)&&(!Ue||st.zona===Ue)).map(st=>st.sector).filter(Boolean);return[...new Set(ze)].sort()},[b,Oe,Ue]),Yt=A.useMemo(()=>b.filter(ze=>{var st,St,tr,It;if(Oe&&s_[ze.zona]!==Oe||Ue&&ze.zona!==Ue||Be&&ze.sector!==Be)return!1;if(G){const Er=G.toLowerCase();if(!(((st=ze.cliente)==null?void 0:st.toLowerCase().includes(Er))||((St=ze.direccion)==null?void 0:St.toLowerCase().includes(Er))||((tr=ze.codigoTracking)==null?void 0:tr.toLowerCase().includes(Er))||((It=ze.sector)==null?void 0:It.toLowerCase().includes(Er))))return!1}return!0}),[b,Oe,Ue,Be,G]),ar=()=>{const ze=Yt.map(It=>It.id).filter(It=>_.includes(It)),st=b.filter(It=>ze.includes(It.id));if(st.length===0){Ke.warning("Debes seleccionar al menos una factura de la lista filtrada.");return}if(!S){Ke.warning("Debes seleccionar un repartidor");return}if(B.length===0){Ke.warning("Debes seleccionar al menos un cargador");return}let St=st.map((It,Er)=>({facturaId:It.id,ordenOriginal:Er+1}));ce==="lejanas-primero"&&St.reverse();const tr=St.map((It,Er)=>ee==="atras-adelante"?{...It,ordenCarga:St.length-Er,ordenEntrega:Er+1}:{...It,ordenCarga:Er+1,ordenEntrega:St.length-Er});we(tr),me(!0)},Xe=()=>{const ze=Yt.map(st=>st.id);N(st=>{const St=[...st];return ze.forEach(tr=>{St.includes(tr)||St.push(tr)}),St})},qt=()=>{const ze=Yt.map(st=>st.id);N(st=>st.filter(St=>!ze.includes(St)))},kt=async()=>{if(Te.length===0){Ke.error("Error: No hay facturas en la vista previa. Por favor, genera la vista previa primero.");return}if(!S||B.length===0){Ke.error("Error: Faltan datos. Verifique repartidor y cargadores.");return}try{const ze=Te.map(St=>St.facturaId),st=await wt.post("/rutas/crear-avanzada",{nombre:R||`Ruta ${new Date().toLocaleDateString()}`,repartidorId:S,cargadoresIds:B,facturasIds:ze,montoAsignado:parseFloat(X)||0,configuracion:{direccionCarga:ee,ordenEntrega:ce}});st.data.success?(Ke.success(" Ruta creada exitosamente!"),I(!1),me(!1),Vt(),Ht()):Ke.error(st.data.message||"Error al crear la ruta")}catch(ze){console.error("Error:",ze),Ke.error(ze.message||"Error al crear la ruta")}},gt=async(ze,st)=>{ze.stopPropagation(),u(st),l(!0)},Ft=async()=>{var ze,st;try{await wt.put(`/rutas/${c.id}/cerrar`),Ke.success("Ruta cerrada exitosamente"),l(!1),u(null),Ht()}catch(St){console.error("Error:",St),Ke.error(((st=(ze=St.response)==null?void 0:ze.data)==null?void 0:st.error)||"Error al cerrar la ruta")}},Vt=()=>{T(""),N([]),F([]),w([]),z(""),O(""),Z("adelante-atras"),ne("cercanas-primero"),we([]),pe(""),qe(""),Me(""),ve(""),re("")},Nr=ze=>{switch(ze){case"pendiente":return"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200";case"en_proceso":return"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200";case"completada":return"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200";case"asignada":return"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200";default:return"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"}},sr=ze=>{switch(ze){case"pendiente":return"Pendiente";case"en_proceso":return"En Proceso";case"completada":return"Completada";case"asignada":return"Asignada";default:return ze}},it=ze=>ze>0?"text-emerald-600 dark:text-emerald-400":ze<0?"text-rose-600 dark:text-rose-400":"text-slate-600 dark:text-slate-400",ir=r.filter(ze=>d==="activas"?ze.estado!=="completada":ze.estado==="completada"),be=ze=>{qe(ze.target.value),Me(""),ve("")},Ze=ze=>{Me(ze.target.value),ve("")},at=()=>{const st=Te.map(St=>({...b.find(It=>It.id===St.facturaId),...St})).reduce((St,tr)=>{const It=tr.sector||"Sin Sector";return St[It]||(St[It]=[]),St[It].push(tr),St},{});for(const St in st)st[St].sort((tr,It)=>tr.ordenEntrega-It.ordenEntrega);return Object.entries(st).sort(([,St],[,tr])=>St[0].ordenEntrega-tr[0].ordenEntrega)};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Gestin de Rutas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Crea y administra rutas de entrega"})]}),(e==null?void 0:e.rol)!=="repartidor"&&i.jsx("div",{className:"flex gap-3",children:i.jsxs("button",{onClick:Ut,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 hover:from-indigo-700 hover:to-purple-700 transition shadow-lg",children:[i.jsx("span",{children:""}),"Crear Nueva Ruta"]})})]}),i.jsxs("div",{className:"flex gap-4 mb-6 border-b dark:border-slate-700",children:[i.jsx("button",{onClick:()=>h("activas"),className:`px-4 py-2 font-medium transition-all ${d==="activas"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"Rutas Activas"}),i.jsx("button",{onClick:()=>h("historial"),className:`px-4 py-2 font-medium transition-all ${d==="historial"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"Historial"})]}),a?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando rutas..."})]}):ir.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-12 text-center",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:d==="activas"?"No hay rutas activas":"No hay rutas en el historial"}),d==="activas"&&i.jsx("p",{className:"text-slate-400 dark:text-slate-500 mt-2",children:'Crea tu primera ruta haciendo click en "Crear Nueva Ruta"'})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ir.map(ze=>{var st,St;return i.jsxs("div",{onClick:()=>t(`/rutas/${ze.id}`),className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-xl transition cursor-pointer",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:ze.nombre}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[" ",ze.empleadoNombre||ze.repartidorNombre]}),(((st=ze.configuracion)==null?void 0:st.sistemaLIFO)||((St=ze.configuracion)==null?void 0:St.direccionCarga))&&i.jsx("span",{className:"inline-block mt-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-0.5 rounded",children:" LIFO"})]}),i.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${Nr(ze.estado)}`,children:sr(ze.estado)})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total facturas:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:ze.totalFacturas})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Entregadas:"}),i.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:ze.facturasEntregadas||0})]}),ze.montoAsignado&&i.jsxs("div",{className:"border-t dark:border-slate-700 pt-2 mt-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Monto asignado:"}),i.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["$",ze.montoAsignado||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total gastos:"}),i.jsxs("span",{className:"font-medium text-rose-600 dark:text-rose-400",children:["$",ze.totalGastos||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm font-semibold",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Balance:"}),i.jsxs("span",{className:it((ze.montoAsignado||0)-(ze.totalGastos||0)),children:["$",(ze.montoAsignado||0)-(ze.totalGastos||0)]})]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-emerald-600 dark:bg-emerald-500 h-2 rounded-full transition-all",style:{width:`${Math.min((ze.facturasEntregadas||0)/(ze.totalFacturas||1)*100,100)}%`}})})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Creada: ",ze.createdAt?new Date(ze.createdAt.seconds*1e3).toLocaleDateString():"Fecha desc."]}),ze.estado!=="completada"&&i.jsx("button",{onClick:tr=>gt(tr,ze),className:"text-xs bg-slate-600 dark:bg-slate-700 text-white px-3 py-1 rounded hover:bg-slate-700 dark:hover:bg-slate-600 transition",children:"Cerrar Ruta"})]})]},ze.id)})}),D&&!ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-6xl my-8",children:i.jsxs("div",{className:"p-6 max-h-[85vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" Crear Ruta con Sistema LIFO"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Orden de carga optimizado para entregas eficientes"})]}),i.jsx("button",{onClick:()=>{I(!1),Vt()},className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:i.jsx("span",{className:"text-2xl",children:""})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nombre de la Ruta"}),i.jsx("input",{type:"text",value:R,onChange:ze=>z(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: Ruta SD Este - 15 Enero 2025"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto Asignado para Gastos (RD$)"}),i.jsx("input",{type:"number",step:"0.01",min:"0",value:X,onChange:ze=>re(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"0.00"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Presupuesto para combustible, peajes y otros gastos de la ruta"})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(ts,{size:20,className:"text-purple-600"}),"Configuracin de Carga (Sistema LIFO)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin de Carga"}),i.jsxs("select",{value:ee,onChange:ze=>Z(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"adelante-atras",children:" Adelante  Atrs (Normal)"}),i.jsx("option",{value:"atras-adelante",children:" Atrs  Adelante (Invertido)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Orden de Entrega"}),i.jsxs("select",{value:ce,onChange:ze=>ne(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"cercanas-primero",children:" Cercanas Primero (Optimizado)"}),i.jsx("option",{value:"lejanas-primero",children:" Lejanas Primero (Inverso)"})]})]})]}),i.jsx("div",{className:"mt-4 p-3 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:i.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 flex items-start gap-2",children:[i.jsx(_s,{size:16,className:"mt-0.5 flex-shrink-0"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Sistema LIFO:"})," Las primeras en cargar son las ltimas en entregar"]})]})})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Da,{size:20,className:"text-indigo-600"}),"Filtrar Facturas"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(Lr,{size:16}),"Nivel 0: Contenedor"]})}),i.jsxs("select",{value:je,onChange:ze=>{pe(ze.target.value),qe(""),Me(""),ve(""),w([])},disabled:q,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50",children:[i.jsx("option",{value:"",children:"-- Todas las Facturas Confirmadas --"}),se.map(ze=>i.jsxs("option",{value:ze.id,children:[ze.numeroContenedor," (",ze.facturasPendientes," facturas)"]},ze.id))]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nivel 1: Zona Principal"}),i.jsxs("select",{value:Oe,onChange:be,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",disabled:q,children:[i.jsx("option",{value:"",children:"-- Todas las Zonas --"}),Ve.map(ze=>i.jsx("option",{value:ze,children:ze},ze))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nivel 2: Subzona"}),i.jsxs("select",{value:Ue,onChange:Ze,disabled:!zt.length||q,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50",children:[i.jsx("option",{value:"",children:"-- Todas las Subzonas --"}),zt.map(ze=>i.jsx("option",{value:ze,children:ze},ze))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nivel 3: Sector"}),i.jsxs("select",{value:Be,onChange:ze=>ve(ze.target.value),disabled:!Wt.length||q,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50",children:[i.jsx("option",{value:"",children:"-- Todos los Sectores --"}),Wt.map(ze=>i.jsx("option",{value:ze,children:ze},ze))]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bsqueda Rpida (Cliente, Tracking, Direccin...)"}),i.jsx("input",{type:"text",value:G,onChange:ze=>O(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:" Buscar...",disabled:q})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:["Facturas Disponibles (",_.length," sel. de ",Yt.length," filtradas)"]}),Yt.length>0&&i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Xe,className:"text-xs text-indigo-600 hover:text-indigo-800 font-medium",children:" Seleccionar todas"}),i.jsx("button",{onClick:qt,className:"text-xs text-rose-600 hover:text-rose-800 font-medium",children:" Deseleccionar todas"})]})]}),q?i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-3 font-medium",children:"Cargando facturas..."})]}):b.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx(_s,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{className:"font-medium",children:"No hay facturas disponibles"}),i.jsx("p",{className:"text-sm mt-1",children:je?"El contenedor seleccionado no tiene facturas confirmadas.":"No hay facturas confirmadas por secretara."})]}):Yt.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-500 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsx(_s,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{className:"font-medium",children:"No se encontraron facturas"}),i.jsx("p",{className:"text-sm mt-1",children:"Ajusta los filtros para encontrar facturas."})]}):i.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg max-h-64 overflow-y-auto",children:Yt.map(ze=>{var st;return i.jsx("div",{onClick:()=>et(ze.id),className:`p-3 border-b border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer ${_.includes(ze.id)?"bg-indigo-50 dark:bg-indigo-900/30":""}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:_.includes(ze.id),onChange:()=>{},className:"mr-3 h-4 w-4"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:ze.cliente}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:ze.direccion}),i.jsxs("div",{className:"flex gap-3 mt-1 flex-wrap",children:[i.jsx("span",{className:"text-xs text-indigo-600 dark:text-indigo-400",children:ze.codigoTracking}),i.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:[" ",ze.zona,"  ",ze.sector]}),i.jsxs("span",{className:"text-xs text-emerald-600",children:[" $",(st=ze.monto)==null?void 0:st.toFixed(2)]})]})]})]})},ze.id)})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(ts,{size:20,className:"text-emerald-600"}),"Repartidor *"]}),i.jsxs("select",{value:S,onChange:ze=>T(ze.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),p.map(ze=>i.jsx("option",{value:ze.id,children:ze.nombre},ze.id))]}),p.length===0&&i.jsx("p",{className:"text-xs text-rose-600 mt-2",children:" No hay repartidores disponibles"})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(od,{size:20,className:"text-amber-600"}),"Cargadores * (mnimo 1)"]}),i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:V.length===0?i.jsx("p",{className:"text-xs text-rose-600",children:" No hay cargadores disponibles"}):V.map(ze=>i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer p-2 hover:bg-white dark:hover:bg-slate-700 rounded",children:[i.jsx("input",{type:"checkbox",checked:B.includes(ze.id),onChange:()=>er(ze.id),className:"h-4 w-4"}),i.jsx("span",{className:"text-sm text-slate-900 dark:text-white",children:ze.nombre})]},ze.id))})]})]}),_.length>0&&i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-4 rounded-lg mb-6",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:" Resumen"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Facturas"}),i.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:_.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargadores"}),i.jsx("p",{className:"text-xl font-bold text-amber-600",children:B.length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Repartidor"}),i.jsx("p",{className:"text-xl font-bold text-indigo-600",children:S?"":""})]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{I(!1),Vt()},className:"flex-1 px-6 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsxs("button",{onClick:ar,disabled:_.length===0||!S||B.length===0||q,className:"flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Su,{size:20}),"Vista Previa"]})]})]})})}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-5xl my-8",children:i.jsxs("div",{className:"p-6 max-h-[85vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" Vista Previa de Carga y Entrega"}),i.jsx("button",{onClick:()=>me(!1),className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300",children:i.jsx("span",{className:"text-2xl",children:""})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:" Configuracin"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Direccin:"})," ",ee==="adelante-atras"?" Adelante  Atrs":" Atrs  Adelante"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Orden:"})," ",ce==="cercanas-primero"?" Cercanas primero":" Lejanas primero"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Sistema:"})," LIFO (Last In, First Out)"]})]})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-2",children:" Personal"}),i.jsxs("div",{className:"space-y-1 text-sm text-slate-700 dark:text-slate-300",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Repartidor:"})," ",(Qe=p.find(ze=>ze.id===S))==null?void 0:Qe.nombre]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Cargadores:"})," ",B.map(ze=>{var st;return(st=V.find(St=>St.id===ze))==null?void 0:st.nombre}).join(", ")]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:" Orden de Carga en el Camin (LIFO)"}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:ee==="adelante-atras"?" Adelante del camin (se carga primero, se entrega ltimo)":" Atrs del camin (se carga primero, se entrega ltimo)"}),i.jsx("div",{className:"space-y-4",children:at().map(([ze,st])=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm",children:[i.jsxs("h4",{className:"font-bold text-lg text-purple-600 dark:text-purple-400 mb-3",children:["Sector: ",ze," (",st.length," ",st.length>1?"facturas":"factura",")"]}),i.jsx("div",{className:"space-y-2",children:st.map(St=>{var tr;return i.jsx("div",{className:"border-l-4 border-indigo-600 pl-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex gap-2 mb-1",children:[i.jsxs("span",{className:"bg-indigo-600 text-white text-xs font-bold px-2 py-1 rounded",children:["CARGA #",St.ordenCarga]}),i.jsxs("span",{className:"bg-emerald-600 text-white text-xs font-bold px-2 py-1 rounded",children:["ENTREGA #",St.ordenEntrega]})]}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:St==null?void 0:St.cliente}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:St==null?void 0:St.direccion})]}),i.jsxs("div",{className:"text-right ml-2",children:[i.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:St==null?void 0:St.codigoTracking}),i.jsxs("p",{className:"text-sm text-emerald-600",children:["$",(tr=St==null?void 0:St.monto)==null?void 0:tr.toFixed(2)]})]})]})},St.facturaId)})})]},ze))}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:ee==="adelante-atras"?" Atrs del camin (se carga ltimo, se entrega primero)":" Adelante del camin (se carga ltimo, se entrega primero)"})]})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-300 dark:border-amber-700 mb-6",children:[i.jsxs("h3",{className:"font-semibold text-amber-800 dark:text-amber-200 mb-2 flex items-center gap-2",children:[i.jsx(_s,{size:20}),"Cmo funciona el sistema LIFO?"]}),i.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-2",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"1. Carga:"})," Los cargadores cargan en el orden mostrado arriba (Carga #1, #2, #3...)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"2. Transporte:"})," Las facturas con menor nmero de entrega (Entrega #1, #2...) estn ms accesibles."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"3. Entrega:"})," El repartidor entrega en orden ascendente (1, 2, 3...)"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"4. Optimizacin:"})," Reduce tiempo de bsqueda y mejora eficiencia."]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>me(!1),className:"flex-1 px-6 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:" Volver a Editar"}),i.jsxs("button",{onClick:kt,className:"flex-1 px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Confirmar y Crear Ruta"]})]})]})})}),o&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4 text-slate-900 dark:text-white",children:"Cerrar Ruta"}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:['Ests seguro de cerrar la ruta "',c.nombre,'"?']}),i.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-4 rounded-lg space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Repartidor:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:c.empleadoNombre})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Facturas entregadas:"}),i.jsxs("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:[c.facturasEntregadas||0," de ",c.totalFacturas]})]}),c.montoAsignado&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Monto asignado:"}),i.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["$",c.montoAsignado||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Total gastado:"}),i.jsxs("span",{className:"font-medium text-rose-600 dark:text-rose-400",children:["$",c.totalGastos||0]})]}),i.jsx("div",{className:"border-t dark:border-slate-600 pt-2",children:i.jsxs("div",{className:"flex justify-between font-semibold",children:[i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Balance final:"}),i.jsxs("span",{className:it((c.montoAsignado||0)-(c.totalGastos||0)),children:["$",(c.montoAsignado||0)-(c.totalGastos||0)]})]})})]})]}),c.facturasEntregadas<c.totalFacturas&&i.jsxs("p",{className:"text-amber-600 dark:text-amber-400 text-sm mt-4",children:[" Hay ",c.totalFacturas-(c.facturasEntregadas||0)," facturas sin entregar"]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{l(!1),u(null)},className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),i.jsx("button",{onClick:Ft,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition",children:"Confirmar Cierre"})]})]})})})]})},Zv=()=>{const{id:t}=qy(),e=Fs(),[r,n]=A.useState(null),[a,s]=A.useState([]),[o,l]=A.useState([]),[c,u]=A.useState(!0);A.useEffect(()=>{d()},[t]);const d=async()=>{var S,T;try{const R=await wt.get(`/rutas/${t}`);if(R.data.success){const z=R.data.data;n(z),s(z.facturas||[]),l(z.gastos||[])}else throw new Error(R.data.error||"Error al cargar la ruta")}catch(R){console.error("Error al cargar ruta:",R),((S=R.response)==null?void 0:S.status)===404?(alert("Ruta no encontrada"),e("/rutas")):((T=R.response)==null?void 0:T.status)===403?(alert("No tienes permisos para ver esta ruta"),e("/rutas")):alert("Error al cargar la ruta")}finally{u(!1)}};if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600",children:"Cargando detalles de la ruta..."})]})});if(!r)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xl text-slate-600",children:"Ruta no encontrada"}),i.jsx("button",{onClick:()=>e("/rutas"),className:"mt-4 text-indigo-600 hover:text-indigo-800",children:"Volver a Rutas"})]})});const h=a.filter(S=>S.estado==="entregado"||S.estado==="entregada").length,p=a.filter(S=>S.estado==="no_entregado"||S.estado==="no_entregada").length,g=a.filter(S=>S.estado==="asignado"||S.estado==="pendiente"||S.estado==="confirmada").length,b=o.reduce((S,T)=>S+(T.monto||0),0),w=a.filter(S=>S.estado==="entregado"||S.estado==="entregada").reduce((S,T)=>S+(T.monto||0),0),_=(r.montoAsignado||0)-b,N=S=>{const T={pendiente:"bg-amber-100 text-amber-800",en_proceso:"bg-indigo-100 text-indigo-800",completada:"bg-emerald-100 text-emerald-800",cancelada:"bg-rose-100 text-rose-800"},R={pendiente:"Pendiente",en_proceso:"En Proceso",completada:"Completada",cancelada:"Cancelada"};return i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${T[S]||"bg-slate-100 text-slate-800"}`,children:R[S]||S})};return i.jsxs("div",{className:"max-w-7xl mx-auto p-3 sm:p-4 md:p-6",children:[i.jsxs("div",{className:"mb-4 sm:mb-6",children:[i.jsxs("button",{onClick:()=>e("/rutas"),className:"flex items-center text-slate-600 hover:text-slate-800 mb-3 sm:mb-4 text-sm sm:text-base",children:[i.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver"]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-slate-900 truncate",children:r.nombre}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:["Creada el ",new Date(r.createdAt).toLocaleDateString()]})]}),i.jsx("div",{className:"flex-shrink-0",children:N(r.estado)})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:[i.jsxs("h2",{className:"text-base sm:text-lg md:text-xl font-bold text-slate-900 mb-3 sm:mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),i.jsx("span",{className:"truncate",children:"Repartidor Asignado"})]}),r.empleadoNombre?i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-slate-500",children:"Nombre"}),i.jsx("p",{className:"text-sm sm:text-base text-slate-900 font-medium break-words",children:r.empleadoNombre})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-slate-500",children:"Email"}),i.jsx("p",{className:"text-sm sm:text-base text-slate-900 break-all",children:r.empleadoEmail||"No disponible"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs sm:text-sm font-medium text-slate-500",children:"Telfono"}),i.jsx("p",{className:"text-sm sm:text-base text-slate-900",children:r.empleadoTelefono||"No disponible"})]})]}):i.jsx("p",{className:"text-sm sm:text-base text-slate-500",children:"No hay repartidor asignado"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 mb-4 sm:mb-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:["Total",i.jsx("br",{className:"sm:hidden"}),"Facturas"]}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-slate-900 mt-0.5 sm:mt-1",children:a.length})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-indigo-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:"Entregadas"}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-emerald-600 mt-0.5 sm:mt-1",children:h})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-emerald-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:["No",i.jsx("br",{className:"sm:hidden"}),"Entregadas"]}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-rose-600 mt-0.5 sm:mt-1",children:p})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-rose-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-3 sm:p-4 md:p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-slate-500",children:"Pendientes"}),i.jsx("p",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-amber-600 mt-0.5 sm:mt-1",children:g})]}),i.jsx("div",{className:"p-2 sm:p-2.5 md:p-3 bg-amber-100 rounded-full flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-8 md:h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-4 sm:mb-6",children:[i.jsxs("h2",{className:"text-base sm:text-lg md:text-xl font-bold text-slate-900 mb-3 sm:mb-4 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{className:"truncate",children:"Resumen Financiero"})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[i.jsxs("div",{className:"p-3 sm:p-4 bg-indigo-50 rounded-lg",children:[i.jsxs("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-indigo-700",children:["Monto",i.jsx("br",{className:"sm:hidden"}),"Asignado"]}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-indigo-900 mt-0.5 sm:mt-1",children:["$",(r.montoAsignado||0).toLocaleString()]})]}),i.jsxs("div",{className:"p-3 sm:p-4 bg-emerald-50 rounded-lg",children:[i.jsx("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-emerald-700",children:"Total Cobrado"}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-emerald-900 mt-0.5 sm:mt-1",children:["$",w.toLocaleString()]})]}),i.jsxs("div",{className:"p-3 sm:p-4 bg-rose-50 rounded-lg",children:[i.jsx("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-rose-700",children:"Total Gastos"}),i.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-rose-900 mt-0.5 sm:mt-1",children:["$",b.toLocaleString()]})]}),i.jsxs("div",{className:"p-3 sm:p-4 bg-purple-50 rounded-lg",children:[i.jsx("label",{className:"text-[10px] sm:text-xs md:text-sm font-medium text-purple-700",children:"Balance"}),i.jsxs("p",{className:`text-lg sm:text-xl md:text-2xl font-bold mt-0.5 sm:mt-1 ${_>=0?"text-purple-900":"text-rose-600"}`,children:["$",_.toLocaleString()]})]})]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md",children:i.jsx(rCe,{facturas:a,gastos:o})})]})},rCe=({facturas:t,gastos:e})=>{const[r,n]=A.useState("facturas");return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"border-b border-slate-200",children:i.jsxs("nav",{className:"flex gap-4 px-6",children:[i.jsxs("button",{onClick:()=>n("facturas"),className:`py-4 px-2 border-b-2 font-medium transition ${r==="facturas"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Facturas (",t.length,")"]}),i.jsxs("button",{onClick:()=>n("gastos"),className:`py-4 px-2 border-b-2 font-medium transition ${r==="gastos"?"border-indigo-600 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Gastos (",e.length,")"]})]})}),i.jsx("div",{className:"p-6",children:r==="facturas"?i.jsx(nCe,{facturas:t}):i.jsx(aCe,{gastos:e})})]})},nCe=({facturas:t})=>{const[e,r]=A.useState(null);return t.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsx("p",{className:"text-slate-500",children:"No hay facturas en esta ruta"})]}):i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50",children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Nmero"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Direccin"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Sector"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Monto"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Fotos"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Observaciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(n=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:n.codigoTracking||n.numeroFactura||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:n.cliente}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:n.direccion}),i.jsx("td",{className:"px-4 py-3 text-sm text-indigo-600 font-medium",children:n.sector||"-"}),i.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:["$",(n.monto||0).toLocaleString()]}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n.estado==="entregado"||n.estado==="entregada"?"bg-emerald-100 text-emerald-800":n.estado==="no_entregado"||n.estado==="no_entregada"?"bg-rose-100 text-rose-800":"bg-amber-100 text-amber-800"}`,children:n.estado==="entregado"||n.estado==="entregada"?"Entregado":n.estado==="no_entregado"||n.estado==="no_entregada"?"No Entregado":"Pendiente"})}),i.jsx("td",{className:"px-4 py-3",children:n.fotosEntrega&&n.fotosEntrega.length>0?i.jsxs("div",{className:"flex gap-1",children:[n.fotosEntrega.slice(0,3).map((a,s)=>i.jsx("button",{onClick:()=>r({fotos:n.fotosEntrega,index:s}),className:"w-10 h-10 rounded border border-slate-300 overflow-hidden hover:border-indigo-500 transition",title:"Click para ampliar",children:i.jsx("img",{src:a,alt:`Foto ${s+1}`,className:"w-full h-full object-cover"})},s)),n.fotosEntrega.length>3&&i.jsxs("div",{className:"w-10 h-10 rounded border border-slate-300 bg-slate-100 flex items-center justify-center text-xs font-medium text-slate-600",children:["+",n.fotosEntrega.length-3]})]}):i.jsxs("span",{className:"text-slate-400 text-sm flex items-center gap-1",children:[i.jsx(zd,{size:16}),"Sin fotos"]})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:n.observaciones||n.motivoNoEntrega||"-"})]},n.id))})]}),e&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-95 z-[9999] flex items-center justify-center p-4",children:[i.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 text-white hover:text-slate-300 transition z-[10000] bg-black/50 p-2 rounded-full",children:i.jsx(Zn,{size:32})}),i.jsxs("div",{className:"max-w-6xl w-full max-h-[90vh] flex flex-col items-center justify-center",children:[i.jsx("img",{src:e.fotos[e.index],alt:`Foto ${e.index+1}`,className:"max-w-full max-h-[calc(90vh-120px)] h-auto object-contain rounded-lg shadow-2xl"}),i.jsx("div",{className:"flex justify-center gap-2 mt-4",children:e.fotos.map((n,a)=>i.jsx("button",{onClick:()=>r({fotos:e.fotos,index:a}),className:`w-16 h-16 rounded border-2 overflow-hidden transition ${a===e.index?"border-indigo-500":"border-white/30 hover:border-white/60"}`,children:i.jsx("img",{src:n,alt:`Thumb ${a+1}`,className:"w-full h-full object-cover"})},a))}),i.jsxs("p",{className:"text-white text-center mt-2",children:["Foto ",e.index+1," de ",e.fotos.length]})]})]})]})},aCe=({gastos:t})=>t.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("svg",{className:"w-16 h-16 text-slate-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),i.jsx("p",{className:"text-slate-500",children:"No hay gastos registrados en esta ruta"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50",children:[i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Descripcin"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Monto"}),i.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-slate-700",children:"Fecha"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(e=>i.jsxs("tr",{className:"hover:bg-slate-50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:e.tipo||"Otro"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-700",children:e.descripcion||"-"}),i.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-rose-600",children:["$",(e.monto||0).toLocaleString()]}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:new Date(e.fecha).toLocaleDateString()})]},e.id))})]})}),sCe=t=>{var e,r,n,a;return t?{nombre:((e=t.destinatario)==null?void 0:e.nombre)||t.nombreRecibe||"N/A",telefono:((r=t.destinatario)==null?void 0:r.telefono)||t.telefono||"N/A",direccion:((n=t.destinatario)==null?void 0:n.direccion)||t.direccion||"N/A",email:((a=t.destinatario)==null?void 0:a.email)||t.email||""}:{nombre:"N/A",telefono:"N/A",direccion:"N/A",email:"N/A"}},iCe=t=>!t||!t.remitente?{nombre:"N/A",telefono:"N/A",direccion:"N/A",email:""}:{nombre:t.remitente.nombre||"N/A",telefono:t.remitente.telefono||"N/A",direccion:t.remitente.direccion||"N/A",email:t.remitente.email||""},qV=t=>{var e;return((e=t==null?void 0:t.destinatario)==null?void 0:e.nombre)||(t==null?void 0:t.nombreRecibe)||"Sin nombre"},GV=t=>{var e;return((e=t==null?void 0:t.destinatario)==null?void 0:e.telefono)||(t==null?void 0:t.telefono)||"N/A"},oCe=t=>{var e;return((e=t==null?void 0:t.destinatario)==null?void 0:e.direccion)||(t==null?void 0:t.direccion)||"N/A"},dae=(t,e=[],r=[],n={})=>{const{userData:a}=ca(),[s,o]=A.useState([]),[l,c]=A.useState(!0),[u,d]=A.useState(null),[h,p]=A.useState(!1),g=A.useRef(null),b=A.useRef([]),w=A.useRef(!0),{enableNotifications:_=!1,notificationMessage:N="Nuevos datos disponibles",onNewData:S=null,maxItems:T=null}=n;A.useEffect(()=>{if(!a||!a.companyId){c(!1);return}return(async()=>{try{c(!0),d(null),console.log(" [useRealtime] Iniciando listener para:",t),console.log(" [useRealtime] User Company:",a.companyId),console.log(" [useRealtime] Filtros:",JSON.stringify(e));const G=jA(qf,t);let O=mu(G);O=mu(O,O0("companyId","==",a.companyId)),e.forEach(([D,I,V])=>{O=mu(O,O0(D,I,V))}),r.forEach(([D,I="asc"])=>{O=mu(O,Xb(D,I))}),T&&(O=mu(O,t8(T))),g.current=RA(O,D=>{const I=[],V={added:[],modified:[],removed:[]};D.docChanges().forEach(P=>{const B={id:P.doc.id,...P.doc.data()};P.type==="added"?V.added.push(B):P.type==="modified"?V.modified.push(B):P.type==="removed"&&V.removed.push(B)}),D.forEach(P=>{I.push({id:P.id,...P.data()})}),console.log(` [useRealtime] ${t}: ${I.length} docs encontrados`),!w.current&&V.added.length>0&&(p(!0),_&&Ke.info(N,{duration:3e3,action:{label:"Ver",onClick:()=>p(!1)}}),S&&S(V.added)),o(I),c(!1),b.current=I,w.current&&(w.current=!1),n.onUpdate&&n.onUpdate(I,V)},D=>{console.error(`Error en listener de ${t}:`,D),d(D.message),c(!1),n.onError&&n.onError(D)})}catch(G){console.error(`Error configurando listener de ${t}:`,G),d(G.message),c(!1)}})(),()=>{g.current&&g.current()}},[t,a,JSON.stringify(e),JSON.stringify(r)]);const R=A.useCallback(()=>{p(!1)},[]);return{data:s,loading:l,error:u,hasNewData:h,clearNewDataIndicator:R}},lCe=()=>{const{userData:t}=ca();return dae("rutas",[["repartidorId","==",(t==null?void 0:t.uid)||""],["estado","in",["asignada","cargada","carga_finalizada","en_entrega"]]],[["createdAt","desc"]],{enableNotifications:!0,notificationMessage:" Nueva ruta asignada",maxItems:20})},fae=()=>{const[t,e]=A.useState(!1);return{executeWithOptimism:A.useCallback(async({optimisticUpdate:n,serverAction:a,rollback:s,successMessage:o="Accin completada",errorMessage:l="Error en la operacin"})=>{try{return e(!0),n(),await a(),Ke.success(o),{success:!0}}catch(c){return s&&s(),console.error("Error en accin optimista:",c),Ke.error(l),{success:!1,error:c}}finally{e(!1)}},[]),isProcessing:t}},hae=({isLive:t=!0,size:e="sm",showText:r=!0,className:n=""})=>{const a={xs:"w-1.5 h-1.5",sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"},s={xs:"text-xs",sm:"text-xs",md:"text-sm",lg:"text-base"};return i.jsxs("div",{className:`flex items-center gap-1.5 ${n}`,children:[i.jsx("div",{className:`${a[e]} rounded-full ${t?"bg-emerald-500 animate-pulse":"bg-slate-400"}`}),r&&i.jsx("span",{className:`${s[e]} ${t?"text-emerald-600 dark:text-emerald-400":"text-slate-500"} font-medium`,children:t?"En vivo":"Sin conexin"})]})},mae=()=>{const[t,e]=A.useState(navigator.onLine);return A.useEffect(()=>{const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),t?null:i.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50",children:i.jsxs("div",{className:"bg-amber-600 text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 animate-bounce",children:[i.jsx(aAe,{size:16}),i.jsx("span",{className:"text-sm font-medium",children:"Sin conexin - Modo offline"})]})})},cCe=t=>t&&typeof t=="object"&&(t.thumbnail||t.preview),pae=t=>t?cCe(t)?{thumbnail:t.thumbnail||t.preview,preview:t.preview||t.thumbnail,isOptimized:!0}:{thumbnail:t,preview:t,isOptimized:!1}:{thumbnail:null,preview:null,isOptimized:!1},gae=({src:t,alt:e="Imagen",className:r="",onClick:n=null,showOptimizedBadge:a=!0,showZoomIcon:s=!0,usePreview:o=!1,objectFit:l="cover"})=>{const[c,u]=A.useState(!1),[d,h]=A.useState(!0),{thumbnail:p,preview:g,isOptimized:b}=pae(t);if(!p)return i.jsx("div",{className:`${r} bg-slate-100 dark:bg-slate-800 flex items-center justify-center`,children:i.jsx(zd,{className:"text-slate-400",size:32})});if(c)return i.jsxs("div",{className:`${r} bg-slate-100 dark:bg-slate-800 flex flex-col items-center justify-center p-4`,children:[i.jsx(zd,{className:"text-slate-400 mb-2",size:32}),i.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Error al cargar imagen"})]});const w=()=>{n&&n(g)},_=o?g:p;return i.jsxs("div",{className:`relative ${r} group`,children:[i.jsx("img",{src:_,alt:e,className:`w-full h-full object-${l} transition-opacity duration-300 ${d?"opacity-0":"opacity-100"}`,onLoad:()=>h(!1),onError:()=>{u(!0),h(!1)},onClick:w,style:{cursor:n?"pointer":"default"}}),d&&i.jsx("div",{className:"absolute inset-0 bg-slate-200 dark:bg-slate-700 animate-pulse flex items-center justify-center",children:i.jsx(zd,{className:"text-slate-400",size:24})}),a&&b&&!d&&i.jsxs("div",{className:"absolute top-2 right-2 bg-emerald-500 text-white text-xs px-2 py-1 rounded-full shadow-lg flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full"}),"HD"]}),s&&n&&!d&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:i.jsx(cAe,{className:"text-white drop-shadow-lg",size:32})})]})},uCe=({imageUrl:t,onClose:e})=>{if(!t)return null;const{preview:r}=pae(t);return i.jsxs("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",onClick:e,children:[i.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white bg-black bg-opacity-50 rounded-full p-3 hover:bg-opacity-70 transition z-10",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("img",{src:r,alt:"Vista ampliada",className:"max-w-full max-h-full object-contain",onClick:n=>n.stopPropagation()})]})},xae=()=>{const[t,e]=A.useState(null),r=s=>{e(s)},n=()=>{e(null)};return{openLightbox:r,closeLightbox:n,LightboxComponent:t?i.jsx(uCe,{imageUrl:t,onClose:n}):null}},i_=()=>{const{userData:t}=ca(),e=Fs(),r=(t==null?void 0:t.rol)==="recolector"&&(t!=null&&t.uid)?[["userId","==",t.uid]]:[],{data:n,loading:a}=dae("recolecciones",r,[["fechaCreacion","desc"]],{}),{openLightbox:s,LightboxComponent:o}=xae(),[l,c]=A.useState([]),[u,d]=A.useState(""),[h,p]=A.useState("todas"),[g,b]=A.useState("todas"),[w,_]=A.useState(!1),[N,S]=A.useState(null);A.useEffect(()=>{n&&n.length>0?c(n):a||c([])},[n,a]);const T=V=>{console.log(" Ver detalle de recoleccin:",V),S(V),_(!0)},R=()=>{_(!1),S(null)},z=()=>{e("/recolecciones/nueva")},G=l.filter(V=>{var P,B,F,ee;if(u){const Z=u.toLowerCase(),ce=qV(V).toLowerCase(),ne=GV(V).toLowerCase();if(!(((P=V.codigoTracking)==null?void 0:P.toLowerCase().includes(Z))||((B=V.zona)==null?void 0:B.toLowerCase().includes(Z))||((F=V.sector)==null?void 0:F.toLowerCase().includes(Z))||ce.includes(Z)||ne.includes(Z)||((ee=V.items)==null?void 0:ee.some(me=>{var Te;return(Te=me.descripcion)==null?void 0:Te.toLowerCase().includes(Z)}))))return!1}return!(h!=="todas"&&V.estadoGeneral!==h||g!=="todas"&&V.zona!==g)}),O=V=>({sin_confirmar:"bg-amber-100 text-amber-800",pendiente_recoleccion:"bg-amber-100 text-amber-800",recolectada:"bg-emerald-100 text-emerald-800",en_contenedor_usa:"bg-purple-100 text-purple-800",incompleta_usa:"bg-amber-100 text-amber-800",en_transito_rd:"bg-indigo-100 text-indigo-800",recibida_rd:"bg-indigo-100 text-indigo-800",pendiente_confirmacion:"bg-amber-100 text-amber-800",confirmada:"bg-indigo-100 text-indigo-800",en_ruta:"bg-purple-100 text-purple-800",lista_para_entregar:"bg-teal-100 text-teal-800",entregada:"bg-emerald-100 text-emerald-800",no_entregada:"bg-rose-100 text-rose-800"})[V]||"bg-slate-100 text-slate-800",D=V=>({sin_confirmar:"Sin Confirmar",pendiente_recoleccion:"Pendiente Recoleccin",recolectada:"Recolectada",en_contenedor_usa:"En Contenedor USA",incompleta_usa:"Incompleta USA",en_transito_rd:"En Trnsito RD",recibida_rd:"Recibida RD",pendiente_confirmacion:"Pendiente Confirmacin",confirmada:"Confirmada",en_ruta:"En Ruta",lista_para_entregar:"Lista para Entregar",entregada:"Entregada",no_entregada:"No Entregada"})[V]||V,I={total:l.length,pendientes:l.filter(V=>V.estadoGeneral==="pendiente_recoleccion"||V.estadoGeneral==="sin_confirmar").length,recolectadas:l.filter(V=>V.estadoGeneral==="recolectada").length,enAlmacen:l.filter(V=>V.estadoGeneral==="en_contenedor_usa").length};return a?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx(mae,{}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Recolecciones"}),i.jsx(hae,{isLive:!0,showText:!0})]}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Gestiona todas las recolecciones del sistema"})]}),((t==null?void 0:t.rol)==="recolector"||(t==null?void 0:t.rol)==="admin_general"||(t==null?void 0:t.rol)==="super_admin")&&i.jsxs("button",{onClick:z,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Vd,{size:20}),"Nueva Recoleccin"]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx($d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),i.jsx("input",{type:"text",placeholder:"Buscar por cdigo, zona, nombre...",value:u,onChange:V=>d(V.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsx("div",{children:i.jsxs("select",{value:h,onChange:V=>p(V.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"todas",children:"Todos los estados"}),i.jsx("option",{value:"sin_confirmar",children:"Sin Confirmar"}),i.jsx("option",{value:"pendiente_recoleccion",children:"Pendiente Recoleccin"}),i.jsx("option",{value:"recolectada",children:"Recolectada"}),i.jsx("option",{value:"en_contenedor_usa",children:"En Contenedor USA"}),i.jsx("option",{value:"incompleta_usa",children:"Incompleta USA"}),i.jsx("option",{value:"en_transito_rd",children:"En Trnsito RD"}),i.jsx("option",{value:"recibida_rd",children:"Recibida RD"}),i.jsx("option",{value:"pendiente_confirmacion",children:"Pendiente Confirmacin"}),i.jsx("option",{value:"confirmada",children:"Confirmada"}),i.jsx("option",{value:"en_ruta",children:"En Ruta"}),i.jsx("option",{value:"entregada",children:"Entregada"}),i.jsx("option",{value:"no_entregada",children:"No Entregada"})]})}),i.jsx("div",{children:i.jsxs("select",{value:g,onChange:V=>b(V.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"todas",children:"Todas las zonas"}),i.jsx("option",{value:"Capital",children:"Capital"}),i.jsx("option",{value:"Sur",children:"Sur"}),i.jsx("option",{value:"Local",children:"Local (Ban)"}),i.jsx("option",{value:"Cibao",children:"Cibao"}),i.jsx("option",{value:"Este",children:"Este"})]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"Total"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:I.total})]}),i.jsx(Lr,{className:"text-indigo-600",size:32})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"Pendientes"}),i.jsx("p",{className:"text-2xl font-bold text-amber-600",children:I.pendientes})]}),i.jsx(Kl,{className:"text-amber-600",size:32})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"Recolectadas"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:I.recolectadas})]}),i.jsx(Da,{className:"text-emerald-600",size:32})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 text-sm",children:"En Almacn"}),i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:I.enAlmacen})]}),i.jsx(Lr,{className:"text-purple-600",size:32})]})})]}),G.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[i.jsx(Lr,{className:"mx-auto text-slate-400 mb-4",size:48}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No hay recolecciones"}),i.jsx("p",{className:"text-slate-600",children:u||h!=="todas"||g!=="todas"?"No se encontraron recolecciones con esos filtros":"An no hay recolecciones registradas"})]}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:G.map(V=>{var ee,Z,ce,ne,ae,me;const P=qV(V),B=GV(V),F=oCe(V);return i.jsxs("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:V.codigoTracking}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${O(V.estadoGeneral)}`,children:D(V.estadoGeneral)})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Kl,{size:14}),new Date(((ee=V.fechaCreacion)==null?void 0:ee.seconds)*1e3||V.createdAt||Date.now()).toLocaleDateString("es-DO")]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Da,{size:14}),V.zona||((Z=V.destinatario)==null?void 0:Z.zona)||"N/A",(V.sector||((ce=V.destinatario)==null?void 0:ce.sector))&&` - ${V.sector||((ne=V.destinatario)==null?void 0:ne.sector)}`]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Lr,{size:14}),((ae=V.items)==null?void 0:ae.length)||0," item(s)"]})]})]}),i.jsxs("button",{onClick:()=>T(V),className:"bg-indigo-50 text-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-100 transition flex items-center gap-2",children:[i.jsx(Su,{size:18}),"Ver Detalle"]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(vl,{size:14,className:"text-slate-600"}),i.jsx("span",{className:"font-medium text-slate-900",children:P}),i.jsx("span",{className:"text-slate-400",children:""}),i.jsx(xl,{size:14,className:"text-slate-600"}),i.jsx("span",{className:"text-slate-700",children:B})]}),i.jsx("p",{className:"text-xs text-slate-600 mt-1 ml-5",children:F})]}),i.jsxs("div",{className:"space-y-2",children:[(V.items||[]).slice(0,2).map((Te,we)=>i.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700 bg-slate-50 p-3 rounded-lg",children:[i.jsx(Lr,{className:"text-slate-400",size:16}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium",children:Te.descripcion||Te.producto||"Sin descripcin"}),i.jsx("div",{className:"flex gap-4 text-xs text-slate-600 mt-1",children:i.jsxs("span",{children:["Cantidad: ",Te.cantidad]})})]})]},we)),((me=V.items)==null?void 0:me.length)>2&&i.jsxs("p",{className:"text-xs text-slate-500 text-center",children:["Y ",V.items.length-2," item(s) ms..."]})]}),V.fotos&&V.fotos.length>0&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Gf,{size:16}),i.jsxs("span",{children:[V.fotos.length," foto(s) adjunta(s)"]})]})})]},V.id)})}),w&&N&&(()=>{var B,F,ee,Z;const V=sCe(N),P=iCe(N);return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:N.codigoTracking}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O(N.estadoGeneral)}`,children:D(N.estadoGeneral)}),i.jsxs("span",{className:"text-sm text-slate-600 flex items-center gap-1",children:[i.jsx(Da,{size:14}),N.zona||((B=N.destinatario)==null?void 0:B.zona),(N.sector||((F=N.destinatario)==null?void 0:F.sector))&&` - ${N.sector||((ee=N.destinatario)==null?void 0:ee.sector)}`]})]})]}),i.jsx("button",{onClick:R,className:"text-slate-400 hover:text-slate-600 transition",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(Lr,{className:"text-emerald-600",size:20}),"Informacin del Remitente (Quien Enva)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-emerald-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(vl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Nombre"}),i.jsx("p",{className:"text-slate-900 font-medium",children:P.nombre})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(xl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Telfono"}),i.jsx("p",{className:"text-slate-900 font-medium",children:P.telefono})]})]}),P.email&&P.email!=="N/A"&&P.email!==""&&i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(lh,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email"}),i.jsx("p",{className:"text-slate-900 font-medium",children:P.email})]})]}),i.jsxs("div",{className:"flex items-start gap-2 md:col-span-2",children:[i.jsx(d8,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Direccin de Recogida"}),i.jsx("p",{className:"text-slate-900 font-medium",children:P.direccion})]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(Da,{className:"text-indigo-600",size:20}),"Informacin del Destinatario (Quien Recibe)"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-indigo-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(vl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Cliente"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.nombre})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(xl,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Telfono"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.telefono})]})]}),V.email&&V.email!=="N/A"&&V.email!==""&&i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(lh,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Email"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.email})]})]}),i.jsxs("div",{className:"flex items-start gap-2 md:col-span-2",children:[i.jsx(d8,{size:18,className:"text-slate-500 mt-1"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Direccin de Entrega"}),i.jsx("p",{className:"text-slate-900 font-medium",children:V.direccion})]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:["Items (",((Z=N.items)==null?void 0:Z.length)||0,")"]}),i.jsx("div",{className:"space-y-3",children:(N.items||[]).map((ce,ne)=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Lr,{className:"text-purple-600",size:20}),i.jsxs("h4",{className:"font-semibold text-slate-900",children:["Item #",ne+1]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Descripcin"}),i.jsx("p",{className:"text-slate-900",children:ce.descripcion||ce.producto||"Sin descripcin"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Cantidad"}),i.jsx("p",{className:"text-slate-900",children:ce.cantidad})]}),ce.precio&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-600",children:"Precio"}),i.jsxs("p",{className:"text-slate-900",children:["$",ce.precio]})]})]})]},ce.id||ne))})]}),N.fotos&&N.fotos.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:["Fotos de la Recoleccin (",N.fotos.length,")"]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:N.fotos.map((ce,ne)=>i.jsx("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-slate-200 cursor-pointer",children:i.jsx(gae,{src:ce.preview||ce.url||ce,alt:`Foto de recoleccin ${ne+1}`,className:"w-full h-full object-cover",onClick:()=>s(ce.preview||ce.url||ce),showOptimizedBadge:!0,showZoomIcon:!0})},ne))})]}),o,N.notas&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Notas"}),i.jsx("div",{className:"bg-slate-50 p-4 rounded-lg",children:i.jsx("p",{className:"text-slate-700",children:N.notas})})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-slate-200 flex justify-end",children:i.jsx("button",{onClick:R,className:"px-6 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition",children:"Cerrar"})})]})})})})()]})},vae=({items:t=[],onItemsChange:e,facturacion:r={},onFacturacionChange:n,readOnly:a=!1,mostrarPagos:s=!0,recoleccionId:o=null})=>{const[l,c]=A.useState(t),[u,d]=A.useState(r.estadoPago||"pendiente_pago"),[h,p]=A.useState(r.metodoPago||""),[g,b]=A.useState(r.montoPagado||0),[w,_]=A.useState(r.notas||""),[N,S]=A.useState(r.archivoUrl||null),[T,R]=A.useState(!1),[z,G]=A.useState(!1),[O,D]=A.useState(0),[I,V]=A.useState(0),[P,B]=A.useState(0),[F,ee]=A.useState(0);A.useEffect(()=>{c(t)},[t]),A.useEffect(()=>{Z()},[l,g,u]);const Z=()=>{const q=l.reduce((Ce,je)=>{const pe=parseFloat(je.precio)||0,Oe=parseInt(je.cantidad)||1;return Ce+pe*Oe},0),Y=q*.18,X=q+Y;let re=X,se=parseFloat(g)||0;u==="pagada"?(se=X,re=0):u==="pago_parcial"?re=X-se:u==="cobro_contra_entrega"&&(se=0,re=X),D(q),V(Y),B(X),ee(Math.max(0,re)),n&&n({subtotal:q,impuestos:Y,total:X,estadoPago:u,metodoPago:h,montoPagado:se,saldoPendiente:Math.max(0,re),notas:w,archivoUrl:N})},ce=(q,Y)=>{const X=[...l];X[q]={...X[q],precio:Y},c(X),e&&e(X)},ne=q=>{d(q),q==="pagada"?b(P):(q==="pendiente_pago"||q==="cobro_contra_entrega")&&b(0)},ae=()=>{const q={pagada:{color:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200",icon:Jr,text:"Pagada"},pendiente_pago:{color:"bg-rose-100 text-rose-800 dark:bg-rose-900 dark:text-rose-200",icon:_s,text:"Pendiente de Pago"},pago_parcial:{color:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200",icon:Wo,text:"Pago Parcial"},cobro_contra_entrega:{color:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",icon:tAe,text:"Cobro Contra Entrega"}},Y=q[u]||q.pendiente_pago,X=Y.icon;return i.jsxs("span",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${Y.color}`,children:[i.jsx(X,{size:16}),Y.text]})},me=q=>`USD$ ${q.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Te=async q=>{const Y=q.target.files[0];if(!Y||!o)return;const X=new FormData;X.append("factura",Y),R(!0);try{const re=localStorage.getItem("token"),je=await(await fetch(`https://proyecto-envios-production.up.railway.app/api/facturacion/recolecciones/${o}/upload`,{method:"POST",headers:{Authorization:`Bearer ${re}`},body:X})).json();je.success?(S(je.url),alert("Factura subida exitosamente"),n&&n({...r,archivoUrl:je.url})):alert("Error: "+je.error)}catch(re){console.error("Error subiendo factura:",re),alert("Error al subir la factura")}finally{R(!1)}},we=async q=>{if(o){G(!0);try{const Y=localStorage.getItem("token"),se=await(await fetch(`https://proyecto-envios-production.up.railway.app/api/facturacion/recolecciones/${o}/send`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y}`},body:JSON.stringify({metodo:q})})).json();se.success?alert(`Factura enviada por ${q} exitosamente`):alert("Error: "+(se.error||"No se pudo enviar"))}catch(Y){console.error("Error enviando factura:",Y),alert("Error al enviar la factura")}finally{G(!1)}}};return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(c3e,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Facturacin"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Precios, impuestos y estado de pago"})]})]}),ae()]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Items y Precios"}),i.jsx("div",{className:"space-y-2",children:l.map((q,Y)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:q.descripcion||q.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",q.cantidad]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"USD$"}),i.jsx("input",{type:"number",value:q.precio,onChange:X=>ce(Y,X.target.value),disabled:a,className:`w-32 px-3 py-2 border rounded-lg text-right font-semibold ${q.precio===""||q.precio===null||q.precio===void 0?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-300 dark:border-slate-600 dark:bg-slate-600 dark:text-white"}`,placeholder:"0.00",step:"0.01",min:"0"})]}),i.jsxs("div",{className:"w-32 text-right",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total"}),i.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:me((parseFloat(q.precio)||0)*(parseInt(q.cantidad)||1))})]})]},Y))})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Subtotal:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:me(O)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"ITBIS (18%):"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:me(I)})]}),i.jsx("div",{className:"border-t border-indigo-200 dark:border-indigo-800 pt-3",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Total:"}),i.jsx("span",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:me(P)})]})})]}),s&&!a&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:"Gestin de Pago"}),u==="pagada"&&i.jsx("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Jr,{className:"text-emerald-600 dark:text-emerald-400 mt-0.5",size:20}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-emerald-800 dark:text-emerald-200",children:"Factura Pagada por Completo"}),i.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300 mt-1",children:"Esta factura ya ha sido pagada en su totalidad. No se pueden hacer modificaciones al pago."})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Estado de Pago *"}),i.jsxs("select",{value:u,onChange:q=>ne(q.target.value),disabled:u==="pagada",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx("option",{value:"pendiente_pago",children:"Pendiente de Pago"}),i.jsx("option",{value:"pago_parcial",children:"Pago Parcial"}),i.jsx("option",{value:"pagada",children:"Pagada"}),i.jsx("option",{value:"cobro_contra_entrega",children:"Cobro Contra Entrega"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Mtodo de Pago ",u==="pagada"||u==="pago_parcial"?"*":""]}),i.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),i.jsx("option",{value:"efectivo",children:" Efectivo"}),i.jsx("option",{value:"transferencia",children:" Transferencia Bancaria"}),i.jsx("option",{value:"tarjeta",children:" Tarjeta de Crdito/Dbito"}),i.jsx("option",{value:"cheque",children:" Cheque"}),i.jsx("option",{value:"otro",children:" Otro"})]})]}),u==="pago_parcial"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto Pagado"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"USD$"}),i.jsx("input",{type:"number",value:g,onChange:q=>b(q.target.value),disabled:u==="pagada",className:`flex-1 px-3 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed ${g===""?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white"}`,placeholder:"0.00",step:"0.01",min:"0",max:P})]}),i.jsx("div",{className:"mt-2 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Saldo Pendiente:"}),i.jsx("span",{className:"text-lg font-bold text-amber-900 dark:text-amber-100",children:me(F)})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas / Observaciones"}),i.jsx("textarea",{value:w,onChange:q=>_(q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Observaciones sobre el pago..."})]})]}),a&&s&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 space-y-2",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"Informacin de Pago"}),u==="pago_parcial"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Monto Pagado:"}),i.jsx("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:me(g)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Saldo Pendiente:"}),i.jsx("span",{className:"font-semibold text-rose-600 dark:text-rose-400",children:me(F)})]})]}),h&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Mtodo de Pago:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:h})]}),w&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-600",children:i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsx("strong",{children:"Notas:"})," ",w]})})]}),o&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6",children:[i.jsxs("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Nu,{size:20,className:"text-indigo-600"}),"Documento de Factura"]}),i.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:N?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-600 rounded border border-emerald-200 dark:border-emerald-800",children:[i.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 dark:text-emerald-300",children:[i.jsx(Jr,{size:18}),i.jsx("span",{className:"font-medium",children:"Factura Disponible"})]}),i.jsx("a",{href:N,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline text-sm",children:"Ver Documento"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>we("email"),disabled:z,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-400 transition",children:[i.jsx(lh,{size:16}),z?"Enviando...":"Enviar Email"]}),i.jsxs("button",{onClick:()=>we("whatsapp"),disabled:z,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:bg-slate-400 transition",children:[i.jsx(LN,{size:16}),z?"Enviando...":"Enviar WhatsApp"]})]})]}):i.jsxs("div",{className:"text-center py-4",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-3",children:"No hay factura adjunta. Sube el PDF o imagen de la factura."}),i.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-600 border border-slate-300 dark:border-slate-500 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-500 transition",children:[i.jsx(m3,{size:18,className:"text-slate-600 dark:text-slate-300"}),i.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:T?"Subiendo...":"Subir Factura"}),i.jsx("input",{type:"file",accept:".pdf,image/*",className:"hidden",onChange:Te,disabled:T})]})]})})]})]})};var o7={},HA={},Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});function dCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var fCe=function t(e,r){dCe(this,t),this.data=e,this.text=r.text||e,this.options=r};Nl.default=fCe;Object.defineProperty(HA,"__esModule",{value:!0});HA.CODE39=void 0;var hCe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),mCe=Nl,pCe=gCe(mCe);function gCe(t){return t&&t.__esModule?t:{default:t}}function xCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vCe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function bCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yCe=function(t){bCe(e,t);function e(r,n){return xCe(this,e),r=r.toUpperCase(),n.mod43&&(r+=NCe(ECe(r))),vCe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return hCe(e,[{key:"encode",value:function(){for(var n=eT("*"),a=0;a<this.data.length;a++)n+=eT(this.data[a])+"0";return n+=eT("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(pCe.default),bae=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],wCe=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function eT(t){return _Ce(yae(t))}function _Ce(t){return wCe[t].toString(2)}function NCe(t){return bae[t]}function yae(t){return bae.indexOf(t)}function ECe(t){for(var e=0,r=0;r<t.length;r++)e+=yae(t[r]);return e=e%43,e}HA.CODE39=yCe;var Id={},l7={},cv={},as={};Object.defineProperty(as,"__esModule",{value:!0});var Qv;function tT(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var wae=as.SET_A=0,_ae=as.SET_B=1,Nae=as.SET_C=2;as.SHIFT=98;var ACe=as.START_A=103,SCe=as.START_B=104,jCe=as.START_C=105;as.MODULO=103;as.STOP=106;as.FNC1=207;as.SET_BY_CODE=(Qv={},tT(Qv,ACe,wae),tT(Qv,SCe,_ae),tT(Qv,jCe,Nae),Qv);as.SWAP={101:wae,100:_ae,99:Nae};as.A_START_CHAR="";as.B_START_CHAR="";as.C_START_CHAR="";as.A_CHARS="[\0-_-]";as.B_CHARS="[ --]";as.C_CHARS="(*[0-9]{2}*)";as.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(cv,"__esModule",{value:!0});var TCe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),CCe=Nl,kCe=ICe(CCe),dc=as;function ICe(t){return t&&t.__esModule?t:{default:t}}function OCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RCe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function PCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var DCe=function(t){PCe(e,t);function e(r,n){OCe(this,e);var a=RCe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.substring(1),n));return a.bytes=r.split("").map(function(s){return s.charCodeAt(0)}),a}return TCe(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,a=n.shift()-105,s=dc.SET_BY_CODE[a];if(s===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(dc.FNC1);var o=e.next(n,1,s);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(a)+o.result+e.getBar((o.checksum+a)%dc.MODULO)+e.getBar(dc.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return dc.BARS[n]?dc.BARS[n].toString():""}},{key:"correctIndex",value:function(n,a){if(a===dc.SET_A){var s=n.shift();return s<32?s+64:s-32}else return a===dc.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,a,s){if(!n.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(n[0]>=200){l=n.shift()-105;var c=dc.SWAP[l];c!==void 0?o=e.next(n,a+1,c):((s===dc.SET_A||s===dc.SET_B)&&l===dc.SHIFT&&(n[0]=s===dc.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),o=e.next(n,a+1,s))}else l=e.correctIndex(n,s),o=e.next(n,a+1,s);var u=e.getBar(l),d=l*a;return{result:u+o.result,checksum:d+o.checksum}}}]),e}(kCe.default);cv.default=DCe;var c7={};Object.defineProperty(c7,"__esModule",{value:!0});var P0=as,Eae=function(e){return e.match(new RegExp("^"+P0.A_CHARS+"*"))[0].length},Aae=function(e){return e.match(new RegExp("^"+P0.B_CHARS+"*"))[0].length},Sae=function(e){return e.match(new RegExp("^"+P0.C_CHARS+"*"))[0]};function u7(t,e){var r=e?P0.A_CHARS:P0.B_CHARS,n=t.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+""+jae(t.substring(n[1].length));var a=t.match(new RegExp("^"+r+"+"))[0];return a.length===t.length?t:a+String.fromCharCode(e?205:206)+u7(t.substring(a.length),!e)}function jae(t){var e=Sae(t),r=e.length;if(r===t.length)return t;t=t.substring(r);var n=Eae(t)>=Aae(t);return e+String.fromCharCode(n?206:205)+u7(t,n)}c7.default=function(t){var e=void 0,r=Sae(t).length;if(r>=2)e=P0.C_START_CHAR+jae(t);else{var n=Eae(t)>Aae(t);e=(n?P0.A_START_CHAR:P0.B_START_CHAR)+u7(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(a,s){return""+s})};Object.defineProperty(l7,"__esModule",{value:!0});var MCe=cv,LCe=Tae(MCe),FCe=c7,BCe=Tae(FCe);function Tae(t){return t&&t.__esModule?t:{default:t}}function UCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function zCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var VCe=function(t){zCe(e,t);function e(r,n){if(UCe(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(r))var a=rT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,BCe.default)(r),n));else var a=rT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return rT(a)}return e}(LCe.default);l7.default=VCe;var d7={};Object.defineProperty(d7,"__esModule",{value:!0});var $Ce=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),HCe=cv,qCe=GCe(HCe),WV=as;function GCe(t){return t&&t.__esModule?t:{default:t}}function WCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KCe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function XCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var YCe=function(t){XCe(e,t);function e(r,n){return WCe(this,e),KCe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,WV.A_START_CHAR+r,n))}return $Ce(e,[{key:"valid",value:function(){return new RegExp("^"+WV.A_CHARS+"+$").test(this.data)}}]),e}(qCe.default);d7.default=YCe;var f7={};Object.defineProperty(f7,"__esModule",{value:!0});var ZCe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),QCe=cv,JCe=eke(QCe),KV=as;function eke(t){return t&&t.__esModule?t:{default:t}}function tke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function nke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ake=function(t){nke(e,t);function e(r,n){return tke(this,e),rke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,KV.B_START_CHAR+r,n))}return ZCe(e,[{key:"valid",value:function(){return new RegExp("^"+KV.B_CHARS+"+$").test(this.data)}}]),e}(JCe.default);f7.default=ake;var h7={};Object.defineProperty(h7,"__esModule",{value:!0});var ske=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),ike=cv,oke=lke(ike),XV=as;function lke(t){return t&&t.__esModule?t:{default:t}}function cke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function dke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fke=function(t){dke(e,t);function e(r,n){return cke(this,e),uke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,XV.C_START_CHAR+r,n))}return ske(e,[{key:"valid",value:function(){return new RegExp("^"+XV.C_CHARS+"+$").test(this.data)}}]),e}(oke.default);h7.default=fke;Object.defineProperty(Id,"__esModule",{value:!0});Id.CODE128C=Id.CODE128B=Id.CODE128A=Id.CODE128=void 0;var hke=l7,mke=qA(hke),pke=d7,gke=qA(pke),xke=f7,vke=qA(xke),bke=h7,yke=qA(bke);function qA(t){return t&&t.__esModule?t:{default:t}}Id.CODE128=mke.default;Id.CODE128A=gke.default;Id.CODE128B=vke.default;Id.CODE128C=yke.default;var Ll={},m7={},ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.SIDE_BIN="101";ku.MIDDLE_BIN="01010";ku.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};ku.EAN2_STRUCTURE=["LL","LG","GL","GG"];ku.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];ku.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var GA={},ug={};Object.defineProperty(ug,"__esModule",{value:!0});var wke=ku,_ke=function(e,r,n){var a=e.split("").map(function(o,l){return wke.BINARIES[r[l]]}).map(function(o,l){return o?o[e[l]]:""});if(n){var s=e.length-1;a=a.map(function(o,l){return l<s?o+n:o})}return a.join("")};ug.default=_ke;Object.defineProperty(GA,"__esModule",{value:!0});var Nke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Ig=ku,Eke=ug,YV=Cae(Eke),Ake=Nl,Ske=Cae(Ake);function Cae(t){return t&&t.__esModule?t:{default:t}}function jke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Cke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var kke=function(t){Cke(e,t);function e(r,n){jke(this,e);var a=Tke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize,a.guardHeight=n.height+a.fontSize/2+n.textMargin,a}return Nke(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,a){return this.text.substr(n,a)}},{key:"leftEncode",value:function(n,a){return(0,YV.default)(n,a)}},{key:"rightText",value:function(n,a){return this.text.substr(n,a)}},{key:"rightEncode",value:function(n,a){return(0,YV.default)(n,a)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},a={height:this.guardHeight};return[{data:Ig.SIDE_BIN,options:a},{data:this.leftEncode(),text:this.leftText(),options:n},{data:Ig.MIDDLE_BIN,options:a},{data:this.rightEncode(),text:this.rightText(),options:n},{data:Ig.SIDE_BIN,options:a}]}},{key:"encodeFlat",value:function(){var n=[Ig.SIDE_BIN,this.leftEncode(),Ig.MIDDLE_BIN,this.rightEncode(),Ig.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),e}(Ske.default);GA.default=kke;Object.defineProperty(m7,"__esModule",{value:!0});var Ike=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Jv=function t(e,r,n){e===null&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(a===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,r,n)}else{if("value"in a)return a.value;var o=a.get;return o===void 0?void 0:o.call(n)}},Oke=ku,Rke=GA,Pke=Dke(Rke);function Dke(t){return t&&t.__esModule?t:{default:t}}function Mke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Fke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ZV=function(e){var r=e.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,a,s){return s%2?n+a*3:n+a},0);return(10-r%10)%10},Bke=function(t){Fke(e,t);function e(r,n){Mke(this,e),r.search(/^[0-9]{12}$/)!==-1&&(r+=ZV(r));var a=Lke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.lastChar=n.lastChar,a}return Ike(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===ZV(this.data)}},{key:"leftText",value:function(){return Jv(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),a=Oke.EAN13_STRUCTURE[this.data[0]];return Jv(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,a)}},{key:"rightText",value:function(){return Jv(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return Jv(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=Jv(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),e}(Pke.default);m7.default=Bke;var p7={};Object.defineProperty(p7,"__esModule",{value:!0});var Uke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o_=function t(e,r,n){e===null&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(a===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,r,n)}else{if("value"in a)return a.value;var o=a.get;return o===void 0?void 0:o.call(n)}},zke=GA,Vke=$ke(zke);function $ke(t){return t&&t.__esModule?t:{default:t}}function Hke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qke(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Gke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QV=function(e){var r=e.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,a,s){return s%2?n+a:n+a*3},0);return(10-r%10)%10},Wke=function(t){Gke(e,t);function e(r,n){return Hke(this,e),r.search(/^[0-9]{7}$/)!==-1&&(r+=QV(r)),qke(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return Uke(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===QV(this.data)}},{key:"leftText",value:function(){return o_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return o_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return o_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return o_(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),e}(Vke.default);p7.default=Wke;var g7={};Object.defineProperty(g7,"__esModule",{value:!0});var Kke=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Xke=ku,Yke=ug,Zke=kae(Yke),Qke=Nl,Jke=kae(Qke);function kae(t){return t&&t.__esModule?t:{default:t}}function e8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function r8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n8e=function(e){var r=e.split("").map(function(n){return+n}).reduce(function(n,a,s){return s%2?n+a*9:n+a*3},0);return r%10},a8e=function(t){r8e(e,t);function e(r,n){return e8e(this,e),t8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return Kke(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=Xke.EAN5_STRUCTURE[n8e(this.data)];return{data:"1011"+(0,Zke.default)(this.data,n,"01"),text:this.text}}}]),e}(Jke.default);g7.default=a8e;var x7={};Object.defineProperty(x7,"__esModule",{value:!0});var s8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i8e=ku,o8e=ug,l8e=Iae(o8e),c8e=Nl,u8e=Iae(c8e);function Iae(t){return t&&t.__esModule?t:{default:t}}function d8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function h8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m8e=function(t){h8e(e,t);function e(r,n){return d8e(this,e),f8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return s8e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=i8e.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,l8e.default)(this.data,n,"01"),text:this.text}}}]),e}(u8e.default);x7.default=m8e;var yw={};Object.defineProperty(yw,"__esModule",{value:!0});var p8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();yw.checksum=R8;var g8e=ug,Og=Oae(g8e),x8e=Nl,v8e=Oae(x8e);function Oae(t){return t&&t.__esModule?t:{default:t}}function b8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function w8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _8e=function(t){w8e(e,t);function e(r,n){b8e(this,e),r.search(/^[0-9]{11}$/)!==-1&&(r+=R8(r));var a=y8e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.displayValue=n.displayValue,n.fontSize>n.width*10?a.fontSize=n.width*10:a.fontSize=n.fontSize,a.guardHeight=n.height+a.fontSize/2+n.textMargin,a}return p8e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==R8(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,Og.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,Og.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,Og.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,Og.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,Og.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,Og.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),e}(v8e.default);function R8(t){var e=0,r;for(r=1;r<11;r+=2)e+=parseInt(t[r]);for(r=0;r<11;r+=2)e+=parseInt(t[r])*3;return(10-e%10)%10}yw.default=_8e;var v7={};Object.defineProperty(v7,"__esModule",{value:!0});var N8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),E8e=ug,A8e=Rae(E8e),S8e=Nl,j8e=Rae(S8e),T8e=yw;function Rae(t){return t&&t.__esModule?t:{default:t}}function C8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function k8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var I8e=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],O8e=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],R8e=function(t){k8e(e,t);function e(r,n){C8e(this,e);var a=nT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));if(a.isValid=!1,r.search(/^[0-9]{6}$/)!==-1)a.middleDigits=r,a.upcA=JV(r,"0"),a.text=n.text||""+a.upcA[0]+r+a.upcA[a.upcA.length-1],a.isValid=!0;else if(r.search(/^[01][0-9]{7}$/)!==-1)if(a.middleDigits=r.substring(1,r.length-1),a.upcA=JV(a.middleDigits,r[0]),a.upcA[a.upcA.length-1]===r[r.length-1])a.isValid=!0;else return nT(a);else return nT(a);return a.displayValue=n.displayValue,n.fontSize>n.width*10?a.fontSize=n.width*10:a.fontSize=n.fontSize,a.guardHeight=n.height+a.fontSize/2+n.textMargin,a}return N8e(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],a=this.upcA[this.upcA.length-1],s=O8e[parseInt(a)][parseInt(n)];return(0,A8e.default)(this.middleDigits,s)}}]),e}(j8e.default);function JV(t,e){for(var r=parseInt(t[t.length-1]),n=I8e[r],a="",s=0,o=0;o<n.length;o++){var l=n[o];l==="X"?a+=t[s++]:a+=l}return a=""+e+a,""+a+(0,T8e.checksum)(a)}v7.default=R8e;Object.defineProperty(Ll,"__esModule",{value:!0});Ll.UPCE=Ll.UPC=Ll.EAN2=Ll.EAN5=Ll.EAN8=Ll.EAN13=void 0;var P8e=m7,D8e=uv(P8e),M8e=p7,L8e=uv(M8e),F8e=g7,B8e=uv(F8e),U8e=x7,z8e=uv(U8e),V8e=yw,$8e=uv(V8e),H8e=v7,q8e=uv(H8e);function uv(t){return t&&t.__esModule?t:{default:t}}Ll.EAN13=D8e.default;Ll.EAN8=L8e.default;Ll.EAN5=B8e.default;Ll.EAN2=z8e.default;Ll.UPC=$8e.default;Ll.UPCE=q8e.default;var Ix={},WA={},ww={};Object.defineProperty(ww,"__esModule",{value:!0});ww.START_BIN="1010";ww.END_BIN="11101";ww.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(WA,"__esModule",{value:!0});var G8e=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l_=ww,W8e=Nl,K8e=X8e(W8e);function X8e(t){return t&&t.__esModule?t:{default:t}}function Y8e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z8e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Q8e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var J8e=function(t){Q8e(e,t);function e(){return Y8e(this,e),Z8e(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return G8e(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,a=this.data.match(/.{2}/g).map(function(s){return n.encodePair(s)}).join("");return{data:l_.START_BIN+a+l_.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var a=l_.BINARIES[n[1]];return l_.BINARIES[n[0]].split("").map(function(s,o){return(s==="1"?"111":"1")+(a[o]==="1"?"000":"0")}).join("")}}]),e}(K8e.default);WA.default=J8e;var b7={};Object.defineProperty(b7,"__esModule",{value:!0});var eIe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),tIe=WA,rIe=nIe(tIe);function nIe(t){return t&&t.__esModule?t:{default:t}}function aIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function iIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var e$=function(e){var r=e.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,a,s){return n+a*(3-s%2*2)},0);return Math.ceil(r/10)*10-r},oIe=function(t){iIe(e,t);function e(r,n){return aIe(this,e),r.search(/^[0-9]{13}$/)!==-1&&(r+=e$(r)),sIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return eIe(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===e$(this.data)}}]),e}(rIe.default);b7.default=oIe;Object.defineProperty(Ix,"__esModule",{value:!0});Ix.ITF14=Ix.ITF=void 0;var lIe=WA,cIe=Pae(lIe),uIe=b7,dIe=Pae(uIe);function Pae(t){return t&&t.__esModule?t:{default:t}}Ix.ITF=cIe.default;Ix.ITF14=dIe.default;var pu={},dg={};Object.defineProperty(dg,"__esModule",{value:!0});var fIe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),hIe=Nl,mIe=pIe(hIe);function pIe(t){return t&&t.__esModule?t:{default:t}}function gIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var bIe=function(t){vIe(e,t);function e(r,n){return gIe(this,e),xIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return fIe(e,[{key:"encode",value:function(){for(var n="110",a=0;a<this.data.length;a++){var s=parseInt(this.data[a]),o=s.toString(2);o=yIe(o,4-o.length);for(var l=0;l<o.length;l++)n+=o[l]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(mIe.default);function yIe(t,e){for(var r=0;r<e;r++)t="0"+t;return t}dg.default=bIe;var y7={},fg={};Object.defineProperty(fg,"__esModule",{value:!0});fg.mod10=wIe;fg.mod11=_Ie;function wIe(t){for(var e=0,r=0;r<t.length;r++){var n=parseInt(t[r]);(r+t.length)%2===0?e+=n:e+=n*2%10+Math.floor(n*2/10)}return(10-e%10)%10}function _Ie(t){for(var e=0,r=[2,3,4,5,6,7],n=0;n<t.length;n++){var a=parseInt(t[t.length-1-n]);e+=r[n%r.length]*a}return(11-e%11)%11}Object.defineProperty(y7,"__esModule",{value:!0});var NIe=dg,EIe=SIe(NIe),AIe=fg;function SIe(t){return t&&t.__esModule?t:{default:t}}function jIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function CIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var kIe=function(t){CIe(e,t);function e(r,n){return jIe(this,e),TIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,AIe.mod10)(r),n))}return e}(EIe.default);y7.default=kIe;var w7={};Object.defineProperty(w7,"__esModule",{value:!0});var IIe=dg,OIe=PIe(IIe),RIe=fg;function PIe(t){return t&&t.__esModule?t:{default:t}}function DIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function LIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var FIe=function(t){LIe(e,t);function e(r,n){return DIe(this,e),MIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,RIe.mod11)(r),n))}return e}(OIe.default);w7.default=FIe;var _7={};Object.defineProperty(_7,"__esModule",{value:!0});var BIe=dg,UIe=zIe(BIe),t$=fg;function zIe(t){return t&&t.__esModule?t:{default:t}}function VIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ie(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function HIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var qIe=function(t){HIe(e,t);function e(r,n){return VIe(this,e),r+=(0,t$.mod10)(r),r+=(0,t$.mod10)(r),$Ie(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(UIe.default);_7.default=qIe;var N7={};Object.defineProperty(N7,"__esModule",{value:!0});var GIe=dg,WIe=KIe(GIe),r$=fg;function KIe(t){return t&&t.__esModule?t:{default:t}}function XIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YIe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ZIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QIe=function(t){ZIe(e,t);function e(r,n){return XIe(this,e),r+=(0,r$.mod11)(r),r+=(0,r$.mod10)(r),YIe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(WIe.default);N7.default=QIe;Object.defineProperty(pu,"__esModule",{value:!0});pu.MSI1110=pu.MSI1010=pu.MSI11=pu.MSI10=pu.MSI=void 0;var JIe=dg,eOe=_w(JIe),tOe=y7,rOe=_w(tOe),nOe=w7,aOe=_w(nOe),sOe=_7,iOe=_w(sOe),oOe=N7,lOe=_w(oOe);function _w(t){return t&&t.__esModule?t:{default:t}}pu.MSI=eOe.default;pu.MSI10=rOe.default;pu.MSI11=aOe.default;pu.MSI1010=iOe.default;pu.MSI1110=lOe.default;var KA={};Object.defineProperty(KA,"__esModule",{value:!0});KA.pharmacode=void 0;var cOe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),uOe=Nl,dOe=fOe(uOe);function fOe(t){return t&&t.__esModule?t:{default:t}}function hOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function pOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var gOe=function(t){pOe(e,t);function e(r,n){hOe(this,e);var a=mOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return a.number=parseInt(r,10),a}return cOe(e,[{key:"encode",value:function(){for(var n=this.number,a="";!isNaN(n)&&n!=0;)n%2===0?(a="11100"+a,n=(n-2)/2):(a="100"+a,n=(n-1)/2);return a=a.slice(0,-2),{data:a,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(dOe.default);KA.pharmacode=gOe;var XA={};Object.defineProperty(XA,"__esModule",{value:!0});XA.codabar=void 0;var xOe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),vOe=Nl,bOe=yOe(vOe);function yOe(t){return t&&t.__esModule?t:{default:t}}function wOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Oe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function NOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var EOe=function(t){NOe(e,t);function e(r,n){wOe(this,e),r.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(r="A"+r+"A");var a=_Oe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.toUpperCase(),n));return a.text=a.options.text||a.text.replace(/[A-D]/g,""),a}return xOe(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],a=this.getEncodings(),s=0;s<this.data.length;s++)n.push(a[this.data.charAt(s)]),s!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(bOe.default);XA.codabar=EOe;var Ox={},YA={},Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});Nw.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""];Nw.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];Nw.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(YA,"__esModule",{value:!0});var AOe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c_=Nw,SOe=Nl,jOe=TOe(SOe);function TOe(t){return t&&t.__esModule?t:{default:t}}function COe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function IOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var OOe=function(t){IOe(e,t);function e(r,n){return COe(this,e),kOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return AOe(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.data.split("").flatMap(function(l){return c_.MULTI_SYMBOLS[l]||l}),a=n.map(function(l){return e.getEncoding(l)}).join(""),s=e.checksum(n,20),o=e.checksum(n.concat(s),15);return{text:this.text,data:e.getEncoding("")+a+e.getEncoding(s)+e.getEncoding(o)+e.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(n){return c_.BINARIES[e.symbolValue(n)]}},{key:"getSymbol",value:function(n){return c_.SYMBOLS[n]}},{key:"symbolValue",value:function(n){return c_.SYMBOLS.indexOf(n)}},{key:"checksum",value:function(n,a){var s=n.slice().reverse().reduce(function(o,l,c){var u=c%a+1;return o+e.symbolValue(l)*u},0);return e.getSymbol(s%47)}}]),e}(jOe.default);YA.default=OOe;var E7={};Object.defineProperty(E7,"__esModule",{value:!0});var ROe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),POe=YA,DOe=MOe(POe);function MOe(t){return t&&t.__esModule?t:{default:t}}function LOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function BOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var UOe=function(t){BOe(e,t);function e(r,n){return LOe(this,e),FOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return ROe(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(DOe.default);E7.default=UOe;Object.defineProperty(Ox,"__esModule",{value:!0});Ox.CODE93FullASCII=Ox.CODE93=void 0;var zOe=YA,VOe=Dae(zOe),$Oe=E7,HOe=Dae($Oe);function Dae(t){return t&&t.__esModule?t:{default:t}}Ox.CODE93=VOe.default;Ox.CODE93FullASCII=HOe.default;var ZA={};Object.defineProperty(ZA,"__esModule",{value:!0});ZA.GenericBarcode=void 0;var qOe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),GOe=Nl,WOe=KOe(GOe);function KOe(t){return t&&t.__esModule?t:{default:t}}function XOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YOe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ZOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QOe=function(t){ZOe(e,t);function e(r,n){return XOe(this,e),YOe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return qOe(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(WOe.default);ZA.GenericBarcode=QOe;Object.defineProperty(o7,"__esModule",{value:!0});var JOe=HA,u_=Id,Rg=Ll,n$=Ix,e2=pu,eRe=KA,tRe=XA,a$=Ox,rRe=ZA;o7.default={CODE39:JOe.CODE39,CODE128:u_.CODE128,CODE128A:u_.CODE128A,CODE128B:u_.CODE128B,CODE128C:u_.CODE128C,EAN13:Rg.EAN13,EAN8:Rg.EAN8,EAN5:Rg.EAN5,EAN2:Rg.EAN2,UPC:Rg.UPC,UPCE:Rg.UPCE,ITF14:n$.ITF14,ITF:n$.ITF,MSI:e2.MSI,MSI10:e2.MSI10,MSI11:e2.MSI11,MSI1010:e2.MSI1010,MSI1110:e2.MSI1110,pharmacode:eRe.pharmacode,codabar:tRe.codabar,CODE93:a$.CODE93,CODE93FullASCII:a$.CODE93FullASCII,GenericBarcode:rRe.GenericBarcode};var dv={};Object.defineProperty(dv,"__esModule",{value:!0});var nRe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};dv.default=function(t,e){return nRe({},t,e)};var A7={};Object.defineProperty(A7,"__esModule",{value:!0});A7.default=aRe;function aRe(t){var e=[];function r(n){if(Array.isArray(n))for(var a=0;a<n.length;a++)r(n[a]);else n.text=n.text||"",n.data=n.data||"",e.push(n)}return r(t),e}var S7={};Object.defineProperty(S7,"__esModule",{value:!0});S7.default=sRe;function sRe(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var j7={},T7={},QA={};Object.defineProperty(QA,"__esModule",{value:!0});QA.default=iRe;function iRe(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in e)e.hasOwnProperty(r)&&(r=e[r],typeof t[r]=="string"&&(t[r]=parseInt(t[r],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var JA={};Object.defineProperty(JA,"__esModule",{value:!0});var oRe={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};JA.default=oRe;Object.defineProperty(T7,"__esModule",{value:!0});var lRe=QA,cRe=Mae(lRe),uRe=JA,s$=Mae(uRe);function Mae(t){return t&&t.__esModule?t:{default:t}}function dRe(t){var e={};for(var r in s$.default)s$.default.hasOwnProperty(r)&&(t.hasAttribute("jsbarcode-"+r.toLowerCase())&&(e[r]=t.getAttribute("jsbarcode-"+r.toLowerCase())),t.hasAttribute("data-"+r.toLowerCase())&&(e[r]=t.getAttribute("data-"+r.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,cRe.default)(e),e}T7.default=dRe;var C7={},k7={},Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.getTotalWidthOfEncodings=Nc.calculateEncodingAttributes=Nc.getBarcodePadding=Nc.getEncodingHeight=Nc.getMaximumHeightOfEncodings=void 0;var fRe=dv,hRe=mRe(fRe);function mRe(t){return t&&t.__esModule?t:{default:t}}function Lae(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Fae(t,e,r){if(r.displayValue&&e<t){if(r.textAlign=="center")return Math.floor((t-e)/2);if(r.textAlign=="left")return 0;if(r.textAlign=="right")return Math.floor(t-e)}return 0}function pRe(t,e,r){for(var n=0;n<t.length;n++){var a=t[n],s=(0,hRe.default)(e,a.options),o;s.displayValue?o=vRe(a.text,s,r):o=0;var l=a.data.length*s.width;a.width=Math.ceil(Math.max(o,l)),a.height=Lae(a,s),a.barcodePadding=Fae(o,l,s)}}function gRe(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].width;return e}function xRe(t){for(var e=0,r=0;r<t.length;r++)t[r].height>e&&(e=t[r].height);return e}function vRe(t,e,r){var n;if(r)n=r;else if(typeof document<"u")n=document.createElement("canvas").getContext("2d");else return 0;n.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var a=n.measureText(t);if(!a)return 0;var s=a.width;return s}Nc.getMaximumHeightOfEncodings=xRe;Nc.getEncodingHeight=Lae;Nc.getBarcodePadding=Fae;Nc.calculateEncodingAttributes=pRe;Nc.getTotalWidthOfEncodings=gRe;Object.defineProperty(k7,"__esModule",{value:!0});var bRe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),yRe=dv,wRe=_Re(yRe),aT=Nc;function _Re(t){return t&&t.__esModule?t:{default:t}}function NRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ERe=function(){function t(e,r,n){NRe(this,t),this.canvas=e,this.encodings=r,this.options=n}return bRe(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var r=0;r<this.encodings.length;r++){var n=(0,wRe.default)(this.options,this.encodings[r].options);this.drawCanvasBarcode(n,this.encodings[r]),this.drawCanvasText(n,this.encodings[r]),this.moveCanvasDrawing(this.encodings[r])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var r=this.canvas.getContext("2d");r.save(),(0,aT.calculateEncodingAttributes)(this.encodings,this.options,r);var n=(0,aT.getTotalWidthOfEncodings)(this.encodings),a=(0,aT.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=a,r.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(r.fillStyle=this.options.background,r.fillRect(0,0,this.canvas.width,this.canvas.height)),r.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(r,n){var a=this.canvas.getContext("2d"),s=n.data,o;r.textPosition=="top"?o=r.marginTop+r.fontSize+r.textMargin:o=r.marginTop,a.fillStyle=r.lineColor;for(var l=0;l<s.length;l++){var c=l*r.width+n.barcodePadding;s[l]==="1"?a.fillRect(c,o,r.width,r.height):s[l]&&a.fillRect(c,o,r.width,r.height*s[l])}}},{key:"drawCanvasText",value:function(r,n){var a=this.canvas.getContext("2d"),s=r.fontOptions+" "+r.fontSize+"px "+r.font;if(r.displayValue){var o,l;r.textPosition=="top"?l=r.marginTop+r.fontSize-r.textMargin:l=r.height+r.textMargin+r.marginTop+r.fontSize,a.font=s,r.textAlign=="left"||n.barcodePadding>0?(o=0,a.textAlign="left"):r.textAlign=="right"?(o=n.width-1,a.textAlign="right"):(o=n.width/2,a.textAlign="center"),a.fillText(n.text,o,l)}}},{key:"moveCanvasDrawing",value:function(r){var n=this.canvas.getContext("2d");n.translate(r.width,0)}},{key:"restoreCanvas",value:function(){var r=this.canvas.getContext("2d");r.restore()}}]),t}();k7.default=ERe;var I7={};Object.defineProperty(I7,"__esModule",{value:!0});var ARe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),SRe=dv,jRe=TRe(SRe),sT=Nc;function TRe(t){return t&&t.__esModule?t:{default:t}}function CRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d_="http://www.w3.org/2000/svg",kRe=function(){function t(e,r,n){CRe(this,t),this.svg=e,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return ARe(t,[{key:"render",value:function(){var r=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var a=this.encodings[n],s=(0,jRe.default)(this.options,a.options),o=this.createGroup(r,s.marginTop,this.svg);this.setGroupOptions(o,s),this.drawSvgBarcode(o,s,a),this.drawSVGText(o,s,a),r+=a.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,sT.calculateEncodingAttributes)(this.encodings,this.options);var r=(0,sT.getTotalWidthOfEncodings)(this.encodings),n=(0,sT.getMaximumHeightOfEncodings)(this.encodings),a=r+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(a,n),this.options.background&&this.drawRect(0,0,a,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(r,n,a){var s=a.data,o;n.textPosition=="top"?o=n.fontSize+n.textMargin:o=0;for(var l=0,c=0,u=0;u<s.length;u++)c=u*n.width+a.barcodePadding,s[u]==="1"?l++:l>0&&(this.drawRect(c-n.width*l,o,n.width*l,n.height,r),l=0);l>0&&this.drawRect(c-n.width*(l-1),o,n.width*l,n.height,r)}},{key:"drawSVGText",value:function(r,n,a){var s=this.document.createElementNS(d_,"text");if(n.displayValue){var o,l;s.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?l=n.fontSize-n.textMargin:l=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||a.barcodePadding>0?(o=0,s.setAttribute("text-anchor","start")):n.textAlign=="right"?(o=a.width-1,s.setAttribute("text-anchor","end")):(o=a.width/2,s.setAttribute("text-anchor","middle")),s.setAttribute("x",o),s.setAttribute("y",l),s.appendChild(this.document.createTextNode(a.text)),r.appendChild(s)}}},{key:"setSvgAttributes",value:function(r,n){var a=this.svg;a.setAttribute("width",r+"px"),a.setAttribute("height",n+"px"),a.setAttribute("x","0px"),a.setAttribute("y","0px"),a.setAttribute("viewBox","0 0 "+r+" "+n),a.setAttribute("xmlns",d_),a.setAttribute("version","1.1"),a.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(r,n,a){var s=this.document.createElementNS(d_,"g");return s.setAttribute("transform","translate("+r+", "+n+")"),a.appendChild(s),s}},{key:"setGroupOptions",value:function(r,n){r.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(r,n,a,s,o){var l=this.document.createElementNS(d_,"rect");return l.setAttribute("x",r),l.setAttribute("y",n),l.setAttribute("width",a),l.setAttribute("height",s),o.appendChild(l),l}}]),t}();I7.default=kRe;var O7={};Object.defineProperty(O7,"__esModule",{value:!0});var IRe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function ORe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var RRe=function(){function t(e,r,n){ORe(this,t),this.object=e,this.encodings=r,this.options=n}return IRe(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();O7.default=RRe;Object.defineProperty(C7,"__esModule",{value:!0});var PRe=k7,DRe=R7(PRe),MRe=I7,LRe=R7(MRe),FRe=O7,BRe=R7(FRe);function R7(t){return t&&t.__esModule?t:{default:t}}C7.default={CanvasRenderer:DRe.default,SVGRenderer:LRe.default,ObjectRenderer:BRe.default};var fv={};Object.defineProperty(fv,"__esModule",{value:!0});function P7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D7(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function M7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var URe=function(t){M7(e,t);function e(r,n){P7(this,e);var a=D7(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="InvalidInputException",a.symbology=r,a.input=n,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return e}(Error),zRe=function(t){M7(e,t);function e(){P7(this,e);var r=D7(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return e}(Error),VRe=function(t){M7(e,t);function e(){P7(this,e);var r=D7(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return e}(Error);fv.InvalidInputException=URe;fv.InvalidElementException=zRe;fv.NoElementException=VRe;Object.defineProperty(j7,"__esModule",{value:!0});var $Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HRe=T7,P8=Bae(HRe),qRe=C7,A2=Bae(qRe),GRe=fv;function Bae(t){return t&&t.__esModule?t:{default:t}}function L7(t){if(typeof t=="string")return WRe(t);if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e.push(L7(t[r]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return KRe(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,P8.default)(t),renderer:A2.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,P8.default)(t),renderer:A2.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:A2.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":$Re(t))==="object"&&!t.nodeName)return{element:t,renderer:A2.default.ObjectRenderer};throw new GRe.InvalidElementException}}function WRe(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var r=[],n=0;n<e.length;n++)r.push(L7(e[n]));return r}}function KRe(t){var e=document.createElement("canvas");return{element:e,options:(0,P8.default)(t),renderer:A2.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}j7.default=L7;var F7={};Object.defineProperty(F7,"__esModule",{value:!0});var XRe=function(){function t(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function YRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ZRe=function(){function t(e){YRe(this,t),this.api=e}return XRe(t,[{key:"handleCatch",value:function(r){if(r.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw r.message;else throw r;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(r){try{var n=r.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(a){return this.handleCatch(a),this.api}}}]),t}();F7.default=ZRe;var QRe=o7,wp=pm(QRe),JRe=dv,Ew=pm(JRe),ePe=A7,Uae=pm(ePe),tPe=S7,i$=pm(tPe),rPe=j7,nPe=pm(rPe),aPe=QA,sPe=pm(aPe),iPe=F7,oPe=pm(iPe),zae=fv,lPe=JA,Vae=pm(lPe);function pm(t){return t&&t.__esModule?t:{default:t}}var Wf=function(){},eS=function(e,r,n){var a=new Wf;if(typeof e>"u")throw Error("No element to render on was provided.");return a._renderProperties=(0,nPe.default)(e),a._encodings=[],a._options=Vae.default,a._errorHandler=new oPe.default(a),typeof r<"u"&&(n=n||{},n.format||(n.format=Hae()),a.options(n)[n.format](r,n).render()),a};eS.getModule=function(t){return wp.default[t]};for(var o$ in wp.default)wp.default.hasOwnProperty(o$)&&cPe(wp.default,o$);function cPe(t,e){Wf.prototype[e]=Wf.prototype[e.toUpperCase()]=Wf.prototype[e.toLowerCase()]=function(r,n){var a=this;return a._errorHandler.wrapBarcodeCall(function(){n.text=typeof n.text>"u"?void 0:""+n.text;var s=(0,Ew.default)(a._options,n);s=(0,sPe.default)(s);var o=t[e],l=$ae(r,o,s);return a._encodings.push(l),a})}}function $ae(t,e,r){t=""+t;var n=new e(t,r);if(!n.valid())throw new zae.InvalidInputException(n.constructor.name,t);var a=n.encode();a=(0,Uae.default)(a);for(var s=0;s<a.length;s++)a[s].options=(0,Ew.default)(r,a[s].options);return a}function Hae(){return wp.default.CODE128?"CODE128":Object.keys(wp.default)[0]}Wf.prototype.options=function(t){return this._options=(0,Ew.default)(this._options,t),this};Wf.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};Wf.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var r=(0,Ew.default)(this._options,t.options);r.format=="auto"&&(r.format=Hae()),this._errorHandler.wrapBarcodeCall(function(){var n=r.value,a=wp.default[r.format.toUpperCase()],s=$ae(n,a,r);D8(t,s,r)})}}};Wf.prototype.render=function(){if(!this._renderProperties)throw new zae.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)D8(this._renderProperties[t],this._encodings,this._options);else D8(this._renderProperties,this._encodings,this._options);return this};Wf.prototype._defaults=Vae.default;function D8(t,e,r){e=(0,Uae.default)(e);for(var n=0;n<e.length;n++)e[n].options=(0,Ew.default)(r,e[n].options),(0,i$.default)(e[n].options);(0,i$.default)(r);var a=t.renderer,s=new a(t.element,e,r);s.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=eS);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var r=[];return jQuery(this).each(function(){r.push(this)}),eS(r,t,e)});var uPe=eS,qae={exports:{}},dPe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fPe=dPe,hPe=fPe;function Gae(){}function Wae(){}Wae.resetWarningCache=Gae;var mPe=function(){function t(n,a,s,o,l,c){if(c!==hPe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Wae,resetWarningCache:Gae};return r.PropTypes=r,r};qae.exports=mPe();var B7=qae.exports;function HN(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?HN=function(r){return typeof r}:HN=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},HN(t)}var Jg=U7(A),pPe=U7(uPe),vs=U7(B7);function U7(t){return t&&t.__esModule?t:{default:t}}function gPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xPe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vPe(t,e,r){return e&&xPe(t.prototype,e),t}function bPe(t,e){return e&&(HN(e)==="object"||typeof e=="function")?e:Kae(t)}function M8(t){return M8=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},M8(t)}function Kae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L8(t,e)}function L8(t,e){return L8=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},L8(t,e)}var F8,iT=Jg.default.version.split(/[.-]/);iT[0]==="0"&&(iT[1]==="13"||iT[1]==="12")?F8=function(e){return e.getDOMNode()}:F8=function(e){return e};var z7=function(t){yPe(e,t);function e(r){var n;return gPe(this,e),n=bPe(this,M8(e).call(this,r)),n.renderElementRef=Jg.default.createRef(),n.update=n.update.bind(Kae(n)),n}return vPe(e,[{key:"shouldComponentUpdate",value:function(n){var a=this;return Object.keys(e.propTypes).some(function(s){return a.props[s]!==n[s]})}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var n=F8(this.renderElementRef.current);try{new pPe.default(n,this.props.value,Object.assign({text:this.props.text||this.props.value},this.props))}catch(a){window.console.error(a)}}},{key:"render",value:function(){var n=this.props,a=n.id,s=n.className;if(this.props.renderer==="svg")return Jg.default.createElement("svg",{ref:this.renderElementRef,id:a,className:s});if(this.props.renderer==="canvas")return Jg.default.createElement("canvas",{ref:this.renderElementRef,id:a,className:s});if(this.props.renderer==="img")return Jg.default.createElement("img",{ref:this.renderElementRef,id:a,className:s})}}]),e}(Jg.default.Component);z7.propTypes={value:vs.default.string.isRequired,text:vs.default.string,renderer:vs.default.string,format:vs.default.string,width:vs.default.number,height:vs.default.number,displayValue:vs.default.bool,fontOptions:vs.default.string,font:vs.default.string,textAlign:vs.default.string,textPosition:vs.default.string,textMargin:vs.default.number,fontSize:vs.default.number,background:vs.default.string,lineColor:vs.default.string,margin:vs.default.number,marginTop:vs.default.number,marginBottom:vs.default.number,marginLeft:vs.default.number,marginRight:vs.default.number,id:vs.default.string,className:vs.default.string,ean128:vs.default.bool};z7.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,className:"",ean128:!1};var wPe=z7;const _Pe=Vc(wPe);var tS={},Xae={L:1,M:0,Q:3,H:2},Yae={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},NPe=Yae;function Zae(t){this.mode=NPe.MODE_8BIT_BYTE,this.data=t}Zae.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var EPe=Zae,f_=Xae;function Ed(t,e){this.totalCount=t,this.dataCount=e}Ed.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Ed.getRSBlocks=function(t,e){var r=Ed.getRsBlockTable(t,e);if(r==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=r.length/3,a=new Array,s=0;s<n;s++)for(var o=r[s*3+0],l=r[s*3+1],c=r[s*3+2],u=0;u<o;u++)a.push(new Ed(l,c));return a};Ed.getRsBlockTable=function(t,e){switch(e){case f_.L:return Ed.RS_BLOCK_TABLE[(t-1)*4+0];case f_.M:return Ed.RS_BLOCK_TABLE[(t-1)*4+1];case f_.Q:return Ed.RS_BLOCK_TABLE[(t-1)*4+2];case f_.H:return Ed.RS_BLOCK_TABLE[(t-1)*4+3];default:return}};var APe=Ed;function Qae(){this.buffer=new Array,this.length=0}Qae.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var SPe=Qae,Yu={glog:function(t){if(t<1)throw new Error("glog("+t+")");return Yu.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return Yu.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var wo=0;wo<8;wo++)Yu.EXP_TABLE[wo]=1<<wo;for(var wo=8;wo<256;wo++)Yu.EXP_TABLE[wo]=Yu.EXP_TABLE[wo-4]^Yu.EXP_TABLE[wo-5]^Yu.EXP_TABLE[wo-6]^Yu.EXP_TABLE[wo-8];for(var wo=0;wo<255;wo++)Yu.LOG_TABLE[Yu.EXP_TABLE[wo]]=wo;var Jae=Yu,km=Jae;function qN(t,e){if(t.length==null)throw new Error(t.length+"/"+e);for(var r=0;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(var n=0;n<t.length-r;n++)this.num[n]=t[n+r]}qN.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<t.getLength();n++)e[r+n]^=km.gexp(km.glog(this.get(r))+km.glog(t.get(n)));return new qN(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=km.glog(this.get(0))-km.glog(t.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=km.gexp(km.glog(t.get(n))+e);return new qN(r,0).mod(t)}};var ese=qN,Yc=Yae,l$=ese,jPe=Jae,Hh={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},ho={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;ho.getBCHDigit(e)-ho.getBCHDigit(ho.G15)>=0;)e^=ho.G15<<ho.getBCHDigit(e)-ho.getBCHDigit(ho.G15);return(t<<10|e)^ho.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;ho.getBCHDigit(e)-ho.getBCHDigit(ho.G18)>=0;)e^=ho.G18<<ho.getBCHDigit(e)-ho.getBCHDigit(ho.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;t!=0;)e++,t>>>=1;return e},getPatternPosition:function(t){return ho.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,r){switch(t){case Hh.PATTERN000:return(e+r)%2==0;case Hh.PATTERN001:return e%2==0;case Hh.PATTERN010:return r%3==0;case Hh.PATTERN011:return(e+r)%3==0;case Hh.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case Hh.PATTERN101:return e*r%2+e*r%3==0;case Hh.PATTERN110:return(e*r%2+e*r%3)%2==0;case Hh.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new l$([1],0),r=0;r<t;r++)e=e.multiply(new l$([1,jPe.gexp(r)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case Yc.MODE_NUMBER:return 10;case Yc.MODE_ALPHA_NUM:return 9;case Yc.MODE_8BIT_BYTE:return 8;case Yc.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case Yc.MODE_NUMBER:return 12;case Yc.MODE_ALPHA_NUM:return 11;case Yc.MODE_8BIT_BYTE:return 16;case Yc.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else if(e<41)switch(t){case Yc.MODE_NUMBER:return 14;case Yc.MODE_ALPHA_NUM:return 13;case Yc.MODE_8BIT_BYTE:return 16;case Yc.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}else throw new Error("type:"+e)},getLostPoint:function(t){for(var e=t.getModuleCount(),r=0,n=0;n<e;n++)for(var a=0;a<e;a++){for(var s=0,o=t.isDark(n,a),l=-1;l<=1;l++)if(!(n+l<0||e<=n+l))for(var c=-1;c<=1;c++)a+c<0||e<=a+c||l==0&&c==0||o==t.isDark(n+l,a+c)&&s++;s>5&&(r+=3+s-5)}for(var n=0;n<e-1;n++)for(var a=0;a<e-1;a++){var u=0;t.isDark(n,a)&&u++,t.isDark(n+1,a)&&u++,t.isDark(n,a+1)&&u++,t.isDark(n+1,a+1)&&u++,(u==0||u==4)&&(r+=3)}for(var n=0;n<e;n++)for(var a=0;a<e-6;a++)t.isDark(n,a)&&!t.isDark(n,a+1)&&t.isDark(n,a+2)&&t.isDark(n,a+3)&&t.isDark(n,a+4)&&!t.isDark(n,a+5)&&t.isDark(n,a+6)&&(r+=40);for(var a=0;a<e;a++)for(var n=0;n<e-6;n++)t.isDark(n,a)&&!t.isDark(n+1,a)&&t.isDark(n+2,a)&&t.isDark(n+3,a)&&t.isDark(n+4,a)&&!t.isDark(n+5,a)&&t.isDark(n+6,a)&&(r+=40);for(var d=0,a=0;a<e;a++)for(var n=0;n<e;n++)t.isDark(n,a)&&d++;var h=Math.abs(100*d/e/e-50)/5;return r+=h*10,r}},TPe=ho,CPe=EPe,tse=APe,rse=SPe,gm=TPe,kPe=ese;function Od(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var $c=Od.prototype;$c.addData=function(t){var e=new CPe(t);this.dataList.push(e),this.dataCache=null};$c.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]};$c.getModuleCount=function(){return this.moduleCount};$c.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=tse.getRSBlocks(t,this.errorCorrectLevel),r=new rse,n=0,a=0;a<e.length;a++)n+=e[a].dataCount;for(var a=0;a<this.dataList.length;a++){var s=this.dataList[a];r.put(s.mode,4),r.put(s.getLength(),gm.getLengthInBits(s.mode,t)),s.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())};$c.makeImpl=function(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=Od.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)};$c.setupPositionProbePattern=function(t,e){for(var r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)};$c.getBestMaskPattern=function(){for(var t=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=gm.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e};$c.createMovieClip=function(t,e,r){var n=t.createEmptyMovieClip(e,r),a=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*a,l=0;l<this.modules[s].length;l++){var c=l*a,u=this.modules[s][l];u&&(n.beginFill(0,100),n.moveTo(c,o),n.lineTo(c+a,o),n.lineTo(c+a,o+a),n.lineTo(c,o+a),n.endFill())}return n};$c.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)};$c.setupPositionAdjustPattern=function(){for(var t=gm.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var r=0;r<t.length;r++){var n=t[e],a=t[r];if(this.modules[n][a]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[n+s][a+o]=!0:this.modules[n+s][a+o]=!1}};$c.setupTypeNumber=function(t){for(var e=gm.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};$c.setupTypeInfo=function(t,e){for(var r=this.errorCorrectLevel<<3|e,n=gm.getBCHTypeInfo(r),a=0;a<15;a++){var s=!t&&(n>>a&1)==1;a<6?this.modules[a][8]=s:a<8?this.modules[a+1][8]=s:this.modules[this.moduleCount-15+a][8]=s}for(var a=0;a<15;a++){var s=!t&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=s:a<9?this.modules[8][15-a-1+1]=s:this.modules[8][15-a-1]=s}this.modules[this.moduleCount-8][8]=!t};$c.mapData=function(t,e){for(var r=-1,n=this.moduleCount-1,a=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var l=0;l<2;l++)if(this.modules[n][o-l]==null){var c=!1;s<t.length&&(c=(t[s]>>>a&1)==1);var u=gm.getMask(e,n,o-l);u&&(c=!c),this.modules[n][o-l]=c,a--,a==-1&&(s++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};Od.PAD0=236;Od.PAD1=17;Od.createData=function(t,e,r){for(var n=tse.getRSBlocks(t,e),a=new rse,s=0;s<r.length;s++){var o=r[s];a.put(o.mode,4),a.put(o.getLength(),gm.getLengthInBits(o.mode,t)),o.write(a)}for(var l=0,s=0;s<n.length;s++)l+=n[s].dataCount;if(a.getLengthInBits()>l*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+l*8+")");for(a.getLengthInBits()+4<=l*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=l*8||(a.put(Od.PAD0,8),a.getLengthInBits()>=l*8));)a.put(Od.PAD1,8);return Od.createBytes(a,n)};Od.createBytes=function(t,e){for(var r=0,n=0,a=0,s=new Array(e.length),o=new Array(e.length),l=0;l<e.length;l++){var c=e[l].dataCount,u=e[l].totalCount-c;n=Math.max(n,c),a=Math.max(a,u),s[l]=new Array(c);for(var d=0;d<s[l].length;d++)s[l][d]=255&t.buffer[d+r];r+=c;var h=gm.getErrorCorrectPolynomial(u),p=new kPe(s[l],h.getLength()-1),g=p.mod(h);o[l]=new Array(h.getLength()-1);for(var d=0;d<o[l].length;d++){var b=d+g.getLength()-o[l].length;o[l][d]=b>=0?g.get(b):0}}for(var w=0,d=0;d<e.length;d++)w+=e[d].totalCount;for(var _=new Array(w),N=0,d=0;d<n;d++)for(var l=0;l<e.length;l++)d<s[l].length&&(_[N++]=s[l][d]);for(var d=0;d<a;d++)for(var l=0;l<e.length;l++)d<o[l].length&&(_[N++]=o[l][d]);return _};var IPe=Od,V7={};Object.defineProperty(V7,"__esModule",{value:!0});var OPe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RPe=B7,Zc=ase(RPe),nse=A,h_=ase(nse);function ase(t){return t&&t.__esModule?t:{default:t}}function PPe(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var DPe={bgColor:Zc.default.oneOfType([Zc.default.object,Zc.default.string]).isRequired,bgD:Zc.default.string.isRequired,fgColor:Zc.default.oneOfType([Zc.default.object,Zc.default.string]).isRequired,fgD:Zc.default.string.isRequired,size:Zc.default.number.isRequired,title:Zc.default.string,viewBoxSize:Zc.default.number.isRequired,xmlns:Zc.default.string},$7=(0,nse.forwardRef)(function(t,e){var r=t.bgColor,n=t.bgD,a=t.fgD,s=t.fgColor,o=t.size,l=t.title,c=t.viewBoxSize,u=t.xmlns,d=u===void 0?"http://www.w3.org/2000/svg":u,h=PPe(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return h_.default.createElement("svg",OPe({},h,{height:o,ref:e,viewBox:"0 0 "+c+" "+c,width:o,xmlns:d}),l?h_.default.createElement("title",null,l):null,h_.default.createElement("path",{d:n,fill:r}),h_.default.createElement("path",{d:a,fill:s}))});$7.displayName="QRCodeSvg";$7.propTypes=DPe;V7.default=$7;Object.defineProperty(tS,"__esModule",{value:!0});tS.QRCode=void 0;var MPe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LPe=B7,pf=Aw(LPe),FPe=Xae,BPe=Aw(FPe),UPe=IPe,zPe=Aw(UPe),sse=A,VPe=Aw(sse),$Pe=V7,HPe=Aw($Pe);function Aw(t){return t&&t.__esModule?t:{default:t}}function qPe(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var GPe={bgColor:pf.default.oneOfType([pf.default.object,pf.default.string]),fgColor:pf.default.oneOfType([pf.default.object,pf.default.string]),level:pf.default.string,size:pf.default.number,value:pf.default.string.isRequired},rS=(0,sse.forwardRef)(function(t,e){var r=t.bgColor,n=r===void 0?"#FFFFFF":r,a=t.fgColor,s=a===void 0?"#000000":a,o=t.level,l=o===void 0?"L":o,c=t.size,u=c===void 0?256:c,d=t.value,h=qPe(t,["bgColor","fgColor","level","size","value"]),p=new zPe.default(-1,BPe.default[l]);p.addData(d),p.make();var g=p.modules;return VPe.default.createElement(HPe.default,MPe({},h,{bgColor:n,bgD:g.map(function(b,w){return b.map(function(_,N){return _?"":"M "+N+" "+w+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:s,fgD:g.map(function(b,w){return b.map(function(_,N){return _?"M "+N+" "+w+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:e,size:u,viewBoxSize:g.length}))});tS.QRCode=rS;rS.displayName="QRCode";rS.propTypes=GPe;var WPe=tS.default=rS;const c$=({value:t,format:e="CODE128",width:r=2,height:n=50,displayValue:a=!0,size:s=128,className:o=""})=>t?e==="QR"?i.jsx("div",{className:o,style:{height:"auto",maxWidth:s,width:"100%"},children:i.jsx(WPe,{size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},value:t,viewBox:"0 0 256 256"})}):i.jsx("div",{className:o,children:i.jsx(_Pe,{value:t,format:e,width:r,height:n,displayValue:a,background:"transparent"})}):null,KPe=({uniqueCode:t,tracking:e,itemDesc:r,itemIndex:n,unitIndex:a,totalUnits:s,recipientName:o,date:l,companyName:c="PROLOGIX",size:u="4x2"})=>u==="4x2"?i.jsxs("div",{className:"label-container bg-white flex flex-col justify-between overflow-hidden relative",style:{width:"101.6mm",height:"50.8mm",padding:"2mm",border:"1px solid #eee",boxSizing:"border-box"},children:[i.jsxs("div",{className:"flex justify-between items-center border-b border-black pb-1 mb-1",children:[i.jsx("span",{className:"font-bold text-[10px] truncate max-w-[60%]",children:c}),i.jsx("span",{className:"text-[8px]",children:l})]}),i.jsx("div",{className:"flex-1 flex flex-row gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-[10px] truncate",children:o}),i.jsx("p",{className:"text-[9px] truncate leading-tight",children:r}),i.jsxs("p",{className:"text-[8px] mt-0.5",children:["Unit ",a+1," of ",s]})]})}),i.jsxs("div",{className:"flex flex-col items-center justify-center w-full mt-1",children:[i.jsx("div",{className:"w-full flex justify-center overflow-hidden",style:{maxHeight:"25mm"},children:i.jsx(c$,{value:t,format:"CODE128",width:1.5,height:25,displayValue:!1})}),i.jsx("p",{className:"text-[10px] font-mono font-bold leading-none mt-0.5",children:t})]})]}):i.jsxs("div",{className:"label-container bg-white flex flex-col items-center justify-between overflow-hidden relative",style:{width:"101.6mm",height:"152.4mm",padding:"4mm",border:"1px solid #eee"},children:[i.jsxs("div",{className:"w-full text-center border-b-2 border-black pb-2",children:[i.jsx("h1",{className:"text-2xl font-bold uppercase tracking-wider",children:c}),i.jsx("p",{className:"text-xs mt-1",children:l})]}),i.jsxs("div",{className:"w-full text-left py-4",children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"DESTINATARIO:"}),i.jsx("h2",{className:"text-xl font-bold leading-tight line-clamp-3 uppercase",children:o})]}),i.jsx("div",{className:"w-full text-left border-y-2 border-black py-3 pl-1 bg-slate-50",children:i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-bold text-slate-500",children:"CONTENIDO:"}),i.jsx("p",{className:"text-sm font-bold uppercase line-clamp-2",children:r})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold",children:[a+1,"/",s]}),i.jsx("p",{className:"text-[10px]",children:"UNIDADES"})]})]})}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full my-4",children:[i.jsx(c$,{value:t,format:"CODE128",width:2.5,height:80,displayValue:!1}),i.jsx("p",{className:"text-lg font-bold mt-2 font-mono",children:t})]}),i.jsxs("div",{className:"w-full text-center border-t-2 border-black pt-2",children:[i.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"TRACKING GENERAL"}),i.jsx("p",{className:"text-3xl font-black tracking-tight",children:e})]})]}),ise=({labels:t,companyName:e,size:r="4x2"})=>!t||t.length===0?null:i.jsxs("div",{className:"print-container hidden print:block absolute top-0 left-0 w-full bg-white z-[9999]",children:[i.jsx("style",{children:`
         @media print {
           @page { 
             size: ${r==="4x2"?"4in 2in":"4in 6in"}; 
             margin: 0; 
           }
           body { margin: 0; padding: 0; }
           .no-print { display: none !important; }
           
           /* Forzar saltos de pgina entre etiquetas */
           .label-container { 
             break-after: page; 
             page-break-after: always; 
             border: none !important;
             margin: 0 !important;
           }
           
           /* Hack para que browsers no aadan mrgenes extra */
           html, body {
             height: 100%;
             overflow: hidden; 
           }
           
           .print\\:block { display: block !important; }
         }
       `}),t.map((n,a)=>i.jsx(KPe,{...n,companyName:e,size:r},a))]}),XPe=async(t,e=.85)=>new Promise((r,n)=>{if(!t.type.startsWith("image/")){n(new Error("El archivo no es una imagen"));return}if(t.type==="image/jpeg"&&t.size<5*1024*1024){r({blob:t,fileName:t.name});return}const a=new FileReader;a.onerror=()=>{n(new Error("Error al leer el archivo"))},a.onload=s=>{const o=new Image;o.onerror=()=>{n(new Error("Error al cargar la imagen"))},o.onload=()=>{try{const l=document.createElement("canvas");let c=o.width,u=o.height;const d=3e3;(c>d||u>d)&&(c>u?(u=Math.round(u*d/c),c=d):(c=Math.round(c*d/u),u=d)),l.width=c,l.height=u;const h=l.getContext("2d");h.fillStyle="#FFFFFF",h.fillRect(0,0,c,u),h.drawImage(o,0,0,c,u),l.toBlob(p=>{if(p){const b=`${t.name.replace(/\.[^/.]+$/,"")}.jpg`;r({blob:p,fileName:b})}else n(new Error("Error al convertir imagen"))},"image/jpeg",e)}catch(l){n(l)}},o.src=s.target.result},a.readAsDataURL(t)}),YPe=async t=>{try{console.log(` Procesando imagen: ${t.name} (${(t.size/1024).toFixed(2)} KB)`);const e=await XPe(t,.85);return console.log(` Imagen procesada: ${e.fileName} (${(e.blob.size/1024).toFixed(2)} KB)`),e.blob}catch(e){return console.error(` Error procesando imagen ${t.name}:`,e),console.warn(" Usando archivo original sin procesar"),t}},ZPe={Capital:["Gazcue","Piantini","Naco","Bella Vista","Zona Colonial","Cristo Rey","Los Mina","Ensanche Ozama","Villa Mella","Los Tres Brazos","San Isidro","Boca Chica"],Cibao:["Santiago Centro","Los Jardines Metropolitanos","Gurabo","Tamboril","La Vega Centro","Moca","San Francisco de Macors","Mao"],Este:["San Pedro Centro","La Romana Centro","Bvaro","Punta Cana","Higey Centro","El Seibo","Hato Mayor"],Sur:["Azua Centro","Barahona Centro","San Juan Centro","San Cristbal","Bajos de Haina","Neiba"],Local:["Ban Centro","Zona Rural Norte","Zona Rural Sur","Matanzas","Sabana Buey"]},m_=()=>{var er;const t=Fs(),e=lm(),{userData:r}=ca(),n=(er=e.state)==null?void 0:er.solicitud,[a,s]=A.useState(""),[o,l]=A.useState(""),[c,u]=A.useState(""),[d,h]=A.useState(""),[p,g]=A.useState(""),[b,w]=A.useState(""),[_,N]=A.useState(""),[S,T]=A.useState(""),[R,z]=A.useState(""),[G,O]=A.useState(""),[D,I]=A.useState([]),[V,P]=A.useState(""),[B,F]=A.useState([{id:1,producto:"",cantidad:1,precio:0}]),[ee,Z]=A.useState([]),[ce,ne]=A.useState([]),[ae,me]=A.useState({subtotal:0,impuestos:0,total:0,estadoPago:"pendiente_pago",metodoPago:"",montoPagado:0,saldoPendiente:0,notas:""}),[Te,we]=A.useState(!1),[q,Y]=A.useState(null),[X,re]=A.useState(null),[se,Ce]=A.useState([]),[je,pe]=A.useState(!1),Oe=A.useRef(null);A.useEffect(()=>{var Ve,zt,Wt,Yt,ar,Xe;if(n){if(console.log(" Prellenando datos de solicitud:",n),re(n.id),s(((Ve=n.cliente)==null?void 0:Ve.nombre)||""),u(((zt=n.cliente)==null?void 0:zt.telefono)||""),l(((Wt=n.cliente)==null?void 0:Wt.email)||""),h(((Yt=n.ubicacion)==null?void 0:Yt.direccion)||((ar=n.cliente)==null?void 0:ar.direccion)||""),(Xe=n.ubicacion)!=null&&Xe.sector&&O(n.ubicacion.sector),n.notas&&P(n.notas),n.items&&n.items.length>0&&F(n.items.map((qt,kt)=>({id:kt+1,producto:qt.descripcion||qt.producto||"",cantidad:qt.cantidad||1,precio:qt.precio||0}))),n.fotos&&n.fotos.length>0){console.log(" Prellenando fotos del cliente:",n.fotos.length);const qt=n.fotos.map(kt=>`PRELLENADA::${kt}`);ne(qt),Ke.info(`${n.fotos.length} foto(s) del cliente cargadas`)}Ke.success("Datos de la solicitud cargados. Completa la informacin del destinatario.")}},[n]),A.useEffect(()=>{if(R){const Ve=ZPe[R]||[];I(Ve),G&&!Ve.includes(G)&&O("")}else I([]),O("")},[R]);const qe=(Ve,zt,Wt)=>{const Yt=[...B];Yt[Ve][zt]=Wt,F(Yt)},Ue=()=>{F([...B,{id:Date.now(),producto:"",cantidad:1,precio:0}])},Me=Ve=>{if(B.length<=1){Ke.warning("Debe haber al menos un item.");return}const zt=B.filter((Wt,Yt)=>Yt!==Ve);F(zt)},Be=Ve=>{const zt=Array.from(Ve.target.files);if(ee.length+zt.length>10){Ke.warning("Puedes subir un mximo de 10 fotos.");return}Z(Wt=>[...Wt,...zt]),zt.forEach(Wt=>{const Yt=new FileReader;Yt.onloadend=()=>{ne(ar=>[...ar,Yt.result])},Yt.readAsDataURL(Wt)}),Ve.target.value=null},ve=Ve=>{Z(ee.filter((zt,Wt)=>Wt!==Ve)),ne(zt=>zt.filter((Wt,Yt)=>Yt!==Ve))},Ht=Ve=>{const zt=[],Wt=Ve.codigoTracking,Yt=p,ar=new Date().toLocaleDateString("es-DO");return Ve.items.forEach((Xe,qt)=>{const kt=parseInt(Xe.cantidad)||1;for(let gt=0;gt<kt;gt++){const Ft=`${Wt}-${qt+1}-${gt+1}`;zt.push({uniqueCode:Ft,tracking:Wt,itemDesc:Xe.producto||Xe.descripcion||"Item",itemIndex:qt,unitIndex:gt,totalUnits:kt,recipientName:Yt,date:ar})}}),zt},mt=()=>{if(se.length===0){Ke.warning("No hay etiquetas para imprimir");return}Oe.current=setTimeout(()=>{try{window.print(),Ke.success(`Imprimiendo ${se.length} etiqueta(s)`)}catch(Ve){console.error("Error al imprimir:",Ve),Ke.error("Error al abrir el dilogo de impresin")}},100)};A.useEffect(()=>()=>{Oe.current&&clearTimeout(Oe.current)},[]);const Ut=async Ve=>{const zt=[];if(!Ve||Ve.length===0)return zt;const Wt=`temp_${Date.now()}`;for(let Yt=0;Yt<Ve.length;Yt++){const ar=Ve[Yt];try{Ke.loading(`Procesando imagen ${Yt+1}/${Ve.length}...`,{id:`upload-${Yt}`});const Xe=await YPe(ar);Ke.loading(`Subiendo imagen ${Yt+1}/${Ve.length}...`,{id:`upload-${Yt}`});const qt=ar.name.replace(/\.[^/.]+$/,""),kt=`recolecciones/${Wt}/${Date.now()}_${Yt}_${qt}.jpg`,gt=Qb(jx,kt);await Yb(gt,Xe);const Ft=await Zb(gt);zt.push({url:Ft,thumbnail:Ft,preview:Ft,fileName:`${qt}.jpg`,size:Xe.size}),Ke.success(`Imagen ${Yt+1} subida`,{id:`upload-${Yt}`})}catch(Xe){console.error(`Error subiendo archivo ${ar.name}:`,Xe),Ke.error(`Error al subir ${ar.name}: ${Xe.message}`,{id:`upload-${Yt}`})}}return zt},et=async Ve=>{var zt,Wt,Yt;if(Ve.preventDefault(),Y(null),!a||!c||!d){Ke.error("Los datos del remitente son obligatorios.");return}if(!p||!_||!S||!R){Ke.error("Los datos del destinatario y zona son obligatorios.");return}if(!(!G&&!confirm("No has seleccionado un sector. Deseas continuar sin especificar el sector?"))){if(B.length===0||B.some(ar=>!ar.producto.trim())){Ke.error("Debes agregar al menos un item con descripcin.");return}if(B.some(ar=>!ar.cantidad||parseInt(ar.cantidad)<1)){Ke.error("Todos los items deben tener una cantidad vlida (mnimo 1).");return}we(!0);try{const ar=B.map(Ft=>({producto:Ft.producto.trim(),cantidad:parseInt(Ft.cantidad)||1,precio:parseFloat(Ft.precio)||0}));let Xe=[];const qt=ce.filter(Ft=>Ft.startsWith("PRELLENADA::")).map(Ft=>Ft.replace("PRELLENADA::",""));if(qt.length>0&&(console.log(` Incluyendo ${qt.length} foto(s) del cliente`),Xe=[...qt]),ee.length>0){const Ft=await Ut(ee);Ft.length===0?Ke.warning("No se pudieron subir las fotos nuevas, pero se incluirn las del cliente."):Xe=[...Xe,...Ft]}const kt={remitenteNombre:a.trim(),remitenteEmail:o.trim(),remitenteTelefono:c.trim(),remitenteDireccion:d.trim(),destinatarioNombre:p.trim(),destinatarioEmail:b.trim(),destinatarioTelefono:_.trim(),destinatarioDireccion:S.trim(),destinatarioZona:R,destinatarioSector:G||null,items:ar,subtotal:parseFloat(ae.subtotal)||0,itbis:parseFloat(ae.impuestos)||0,total:parseFloat(ae.total)||0,estadoPago:ae.estadoPago||"pendiente",metodoPago:ae.metodoPago||"",montoPagado:parseFloat(ae.montoPagado)||0,notas:V.trim(),tipoServicio:"standard",fotos:Xe};console.log(" Enviando recoleccin:",kt);const gt=await wt.post("/recolecciones",kt);if(gt.data.success){const Ft=((zt=gt.data.data)==null?void 0:zt.codigoTracking)||"N/A",Vt=gt.data.data;if(X)try{await wt.put(`/solicitudes/${X}/completar`,{codigoRecoleccion:(Vt==null?void 0:Vt.id)||null}),console.log(` Solicitud ${X} marcada como completada`)}catch(sr){console.error(" Error marcando solicitud como completada:",sr)}Ke.success(` Recoleccin creada: ${Ft}`);const Nr=Ht({...Vt,codigoTracking:Ft,items:ar});Ce(Nr),pe(!0)}else Y(gt.data.message||"Error desconocido al crear la recoleccin.")}catch(ar){console.error(" Error completo:",ar);const Xe=((Yt=(Wt=ar.response)==null?void 0:Wt.data)==null?void 0:Yt.message)||ar.message||"Error de conexin.";Y(Xe),Ke.error(Xe)}finally{we(!1)}}};return i.jsxs("div",{className:"p-4 xs:p-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-2xl xs:text-3xl font-bold text-slate-800 dark:text-white",children:"Crear Nueva Recoleccin"}),i.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-700 transition",children:[i.jsx(Hl,{size:20}),"Volver"]})]}),i.jsxs("form",{onSubmit:et,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow border-l-4 border-emerald-500",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Lr,{size:24,className:"text-emerald-600"}),"Datos de Quien Enva (Remitente) *"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nombre Completo *"}),i.jsx("input",{type:"text",value:a,onChange:Ve=>s(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Juan Prez",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Telfono *"}),i.jsx("input",{type:"tel",value:c,onChange:Ve=>u(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"(809) 123-4567",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email (Opcional)"}),i.jsx("input",{type:"email",value:o,onChange:Ve=>l(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"remitente@ejemplo.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin de Recogida *"}),i.jsx("input",{type:"text",value:d,onChange:Ve=>h(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-emerald-500",placeholder:"Calle, Nmero, Sector, Ciudad...",required:!0})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow border-l-4 border-indigo-500",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Da,{size:24,className:"text-indigo-600"}),"Datos de Quien Recibe (Destinatario) *"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nombre Completo *"}),i.jsx("input",{type:"text",value:p,onChange:Ve=>g(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Mara Lpez",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Telfono *"}),i.jsx("input",{type:"tel",value:_,onChange:Ve=>N(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"(809) 987-6543",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email (Opcional)"}),i.jsx("input",{type:"email",value:b,onChange:Ve=>w(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"destinatario@ejemplo.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin de Entrega *"}),i.jsx("input",{type:"text",value:S,onChange:Ve=>T(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Calle, Nmero, Sector, Ciudad...",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona de Entrega *"}),i.jsxs("select",{value:R,onChange:Ve=>z(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[i.jsx("option",{value:"",children:"-- Seleccionar Zona --"}),i.jsx("option",{value:"Capital",children:" Capital (Santo Domingo)"}),i.jsx("option",{value:"Cibao",children:" Cibao (Santiago)"}),i.jsx("option",{value:"Este",children:" Este (San Pedro, La Romana)"}),i.jsx("option",{value:"Sur",children:" Sur (Azua, Barahona)"}),i.jsx("option",{value:"Local",children:" Local (Ban)"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Sector ",D.length>0&&"(Recomendado)"]}),i.jsxs("select",{value:G,onChange:Ve=>O(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",disabled:!R,children:[i.jsx("option",{value:"",children:"-- Seleccionar Sector --"}),D.map(Ve=>i.jsxs("option",{value:Ve,children:[" ",Ve]},Ve))]}),!R&&i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Selecciona una zona primero"}),R&&D.length>0&&i.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-1",children:" Especificar el sector ayuda a optimizar las rutas de entrega"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"Items Recolectados *"}),i.jsx("div",{className:"space-y-3",children:B.map((Ve,zt)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1",children:i.jsx("input",{type:"text",placeholder:`Descripcin del item ${zt+1}`,value:Ve.producto,onChange:Wt=>qe(zt,"producto",Wt.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})}),i.jsx("div",{className:"w-24",children:i.jsx("input",{type:"number",min:"1",value:Ve.cantidad,onChange:Wt=>qe(zt,"cantidad",Wt.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 text-center ${Ve.cantidad?"border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white":"border-rose-500 bg-rose-50 dark:bg-rose-900/20"}`,title:"Cantidad",placeholder:"Cant."})}),i.jsx("button",{type:"button",onClick:()=>Me(zt),disabled:B.length<=1,className:"px-3 py-2 bg-rose-600 text-white rounded-lg disabled:opacity-50 hover:bg-rose-700 transition",title:"Eliminar item",children:i.jsx(vp,{size:18})})]},Ve.id))}),i.jsxs("button",{type:"button",onClick:Ue,className:"mt-4 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2",children:[i.jsx(Vd,{size:18})," Agregar Otro Item"]})]}),i.jsx(vae,{items:B,onItemsChange:F,facturacion:ae,onFacturacionChange:me,readOnly:!1,mostrarPagos:!0}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow",children:[i.jsxs("h2",{className:"text-xl font-semibold mb-2 text-slate-900 dark:text-white",children:["Fotos de Recoleccin",i.jsx("span",{className:"text-sm font-normal text-slate-500 dark:text-slate-400 ml-2",children:"(Opcional)"})]}),i.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-slate-300 dark:border-slate-600 border-dashed rounded-lg cursor-pointer bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx(m3,{size:32,className:"text-slate-500 dark:text-slate-400 mb-2"}),i.jsxs("p",{className:"mb-2 text-sm text-slate-500 dark:text-slate-400",children:[i.jsx("span",{className:"font-semibold",children:"Click para tomar foto o subir"})," desde galera"]}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:" En mviles abre la cmara directamente  Mximo 10 fotos"})]}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",capture:"environment",onChange:Be,className:"hidden"})]}),ce.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:[ce.length," foto(s) seleccionada(s)"]}),i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2",children:ce.map((Ve,zt)=>{const Wt=Ve.startsWith("PRELLENADA::"),Yt=Wt?Ve.replace("PRELLENADA::",""):Ve;return i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:Yt,alt:`Vista previa ${zt+1}`,className:"w-full h-24 object-cover rounded-lg border border-slate-200 dark:border-slate-600"}),Wt&&i.jsx("div",{className:"absolute top-1 left-1 bg-blue-600 text-white text-xs px-1.5 py-0.5 rounded font-medium",children:"Cliente"}),i.jsx("button",{type:"button",onClick:()=>ve(zt),className:"absolute top-1 right-1 bg-rose-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition",title:"Eliminar foto",children:i.jsx(Zn,{size:14})})]},zt)})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-900 dark:text-white",children:"Notas Adicionales"}),i.jsx("textarea",{value:V,onChange:Ve=>P(Ve.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Notas internas, detalles de pago, instrucciones especiales...",rows:"3"})]}),q&&i.jsxs("div",{className:"p-4 bg-rose-100 dark:bg-rose-900/40 border border-rose-300 dark:border-rose-700 text-rose-800 dark:text-rose-200 rounded-lg flex items-start gap-3",children:[i.jsx(_s,{size:20,className:"flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Error:"})," ",q]})]}),i.jsx("button",{type:"submit",disabled:Te,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Te?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Guardando Recoleccin..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Lr,{size:20}),"Crear Recoleccin"]})})]}),je&&se.length>0&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-emerald-100 dark:bg-emerald-900 mb-4",children:i.jsx(ql,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),i.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"Recoleccin Creada Exitosamente"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Se generaron ",i.jsxs("strong",{children:[se.length," etiqueta(s)"]})," para imprimir.",i.jsx("br",{}),"Deseas imprimir las etiquetas ahora?"]}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3 mb-4",children:i.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[" ",i.jsx("strong",{children:"Importante:"})," Conecta tu impresora de etiquetas antes de imprimir. Compatible con impresoras trmicas, AirPrint, y cualquier impresora del sistema."]})}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("button",{onClick:()=>{mt(),setTimeout(()=>{pe(!1),t("/recolecciones")},500)},className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center justify-center gap-2 font-medium",children:[i.jsx(ql,{size:20}),"Imprimir Etiquetas"]}),i.jsx("button",{onClick:()=>{pe(!1),t("/recolecciones")},className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition text-sm",children:"Imprimir Despus"})]})]})})}),se.length>0&&i.jsx(ise,{labels:se,companyName:(r==null?void 0:r.companyName)||"PROLOGIX",size:"4x2"})]})},oT=()=>{var Vt,Nr,sr,it,ir;const[t,e]=A.useState("embarques"),[r,n]=A.useState("sin_confirmar"),[a,s]=A.useState([]),[o,l]=A.useState(""),[c,u]=A.useState("todas"),[d,h]=A.useState([]),[p,g]=A.useState(!0),[b,w]=A.useState(null),[_,N]=A.useState(!1),[S,T]=A.useState(""),[R,z]=A.useState(""),[G,O]=A.useState(""),[D,I]=A.useState(""),[V,P]=A.useState(""),[B,F]=A.useState("pago_recibir"),[ee,Z]=A.useState(""),[ce,ne]=A.useState(!1),[ae,me]=A.useState([]),[Te,we]=A.useState(""),[q,Y]=A.useState("todas"),[X,re]=A.useState(!1),[se,Ce]=A.useState(null),[je,pe]=A.useState("pendientes"),[Oe,qe]=A.useState(!1);A.useEffect(()=>{t==="facturas_antiguas"?Ue():t==="embarques"&&Be()},[t]),A.useEffect(()=>{let be=()=>{};return o&&t==="facturas_antiguas"?be=Me():h([]),()=>be()},[o,t]);const Ue=async()=>{try{g(!0);const be=await wt.get("/embarques");if(be.data.success){const Ze=(be.data.data||[]).filter(at=>at.estado==="activo");s(Ze)}}catch(be){console.error("Error al cargar embarques:",be),Ke.error("Error al cargar embarques")}finally{g(!1)}},Me=()=>{try{g(!0);const be=jA(qf,"facturas");let Ze=mu(be,O0("embarqueId","==",o),Xb("numeroFactura","asc"));return RA(Ze,Qe=>{const ze=(Qe.docs||[]).map(st=>({id:st.id,...st.data()})).filter(st=>st.estado==="sin_confirmar"||st.estado==="pendiente_contacto"||st.estado==="no_entregado");h(ze),g(!1)})}catch(be){return console.error("Error al cargar facturas:",be),g(!1),()=>{}}},Be=async()=>{try{re(!0);const be=await wt.get("/secretarias/contenedores");be.data.success&&me(be.data.data)}catch(be){console.error("Error cargando contenedores recibidos:",be),Ke.error("Error al cargar contenedores recibidos")}finally{re(!1)}},ve=async be=>{try{g(!0);const Ze=await wt.get(`/secretarias/contenedores/${be}/facturas`);Ze.data.success&&me(at=>at.map(Qe=>Qe.id===be?{...Qe,...Ze.data.data.contenedor,facturas:Ze.data.data.facturas}:Qe))}catch(Ze){console.error("Error cargando facturas del contenedor:",Ze),Ke.error("Error al cargar facturas del contenedor")}finally{g(!1)}},Ht=()=>Te?ae.find(be=>be.id===Te):null,mt=be=>!be||!be.facturas?[]:be.facturas.filter(Ze=>{var tr;const at=Ze.confirmadaPorSecretaria===!0,Qe=Ze.estadoItems||Ze.estadoFactura||Ze.estado,ze=Qe==="completo"||Qe==="completa",st=((tr=Ze.destinatario)==null?void 0:tr.zona)||Ze.zona||"";return ze&&!at&&(q==="todas"||st===q)}),Ut=be=>!be||!be.facturas?[]:be.facturas.filter(Ze=>{var st;const at=Ze.confirmadaPorSecretaria===!0,Qe=((st=Ze.destinatario)==null?void 0:st.zona)||Ze.zona||"";return at&&(q==="todas"||Qe===q)}),et=be=>{if(!be||!be.facturas)return[];const Ze=new Set;return be.facturas.filter(at=>{const Qe=at.estadoItems||at.estadoFactura||at.estado;return Qe==="completo"||Qe==="completa"}).forEach(at=>{var ze;const Qe=((ze=at.destinatario)==null?void 0:ze.zona)||at.zona;Qe&&Ze.add(Qe)}),Array.from(Ze).sort()},er=async()=>{var Ze,at;if(!se||!Te)return;const be=se.id;try{(await wt.post(`/secretarias/facturas/${be}/confirmar`,{notasSecretaria:V})).data.success&&(Ke.success("Factura confirmada exitosamente"),N(!1),Xe(),await ve(Te))}catch(Qe){console.error("Error confirmando factura:",Qe),Ke.error(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al confirmar la factura")}},Ve=async()=>{var at,Qe;if(!se)return;if(!S||!R){Ke.warning("Telfono y direccin son obligatorios");return}const be=se.id,Ze={destinatario:{telefono:S,direccion:R,sector:G,zona:D},pago:{estado:B},notasSecretaria:V};try{(await wt.put(`/secretarias/facturas/${be}`,Ze)).data.success&&(Ke.success("Factura editada exitosamente"),N(!1),Xe(),await ve(Te))}catch(ze){console.error("Error editando factura:",ze),Ke.error(((Qe=(at=ze.response)==null?void 0:at.data)==null?void 0:Qe.message)||"Error al editar la factura")}},zt=(be,Ze=!1,at=!1)=>{var Qe,ze,st,St,tr;if(qe(at),Ze){Ce(be),T(((Qe=be.destinatario)==null?void 0:Qe.telefono)||be.telefono||""),z(((ze=be.destinatario)==null?void 0:ze.direccion)||be.direccion||""),O(((st=be.destinatario)==null?void 0:st.sector)||be.sector||""),I(((St=be.destinatario)==null?void 0:St.zona)||be.zona||""),P(be.notasSecretaria||be.observaciones||"");const It=((tr=be.pago)==null?void 0:tr.estado)||"pago_recibir";F(It),Z(It),ne(It==="pagada"||It==="pagado")}else{w(be),T(be.telefono||""),z(be.direccion||""),O(be.sector||""),I(be.zona||""),P(be.observaciones||"");const It=be.estadoPago||"pago_recibir";F(It),Z(It),ne(It==="pagada"||It==="pagado")}N(!0)},Wt=async()=>{se?Oe?await Ve():await er():await Yt()},Yt=async()=>{if(se){await Wt();return}if(b){if(!S||!R||!D){Ke.warning("Telfono, direccin y ZONA son obligatorios");return}try{const be=l3(qf,"facturas",b.id);await GU(be,{estado:"confirmada",telefono:S,direccion:R,sector:G,zona:D,observaciones:V,estadoPago:B,fechaConfirmacion:ea.now(),updatedAt:ea.now()}),Ke.success("Factura confirmada exitosamente (Sistema Antiguo)"),N(!1),Xe()}catch(be){console.error("Error:",be),Ke.error("Error al confirmar factura")}}},ar=async()=>{if(b)try{const be=l3(qf,"facturas",b.id);await GU(be,{estado:"pendiente_contacto",observaciones:V||"No se pudo contactar",updatedAt:ea.now()}),Ke.info("Factura marcada como pendiente (Sistema Antiguo)"),N(!1),Xe()}catch(be){console.error("Error:",be),Ke.error("Error al marcar como pendiente")}},Xe=()=>{w(null),Ce(null),T(""),z(""),O(""),I(""),P(""),F("pago_recibir"),Z(""),qe(!1)},qt=be=>{be&&(window.location.href=`tel:${be}`)},kt=d.filter(be=>{let Ze=!1;switch(r){case"sin_confirmar":Ze=be.estado==="sin_confirmar";break;case"pendientes":Ze=be.estado==="pendiente_contacto";break;case"confirmadas":Ze=be.estado==="confirmada";break;case"no_entregadas":Ze=be.estado==="no_entregado";break;default:Ze=!1}let at=c==="todas"||be.zona===c;return Ze&&at}),gt={sin_confirmar:d.filter(be=>be.estado==="sin_confirmar"&&(c==="todas"||be.zona===c)).length,pendientes:d.filter(be=>be.estado==="pendiente_contacto"&&(c==="todas"||be.zona===c)).length,confirmadas:d.filter(be=>be.estado==="confirmada"&&(c==="todas"||be.zona===c)).length,no_entregadas:d.filter(be=>be.estado==="no_entregado"&&(c==="todas"||be.zona===c)).length},Ft=()=>{const be=Ht();let Ze=[],at=!0;return je==="pendientes"?(Ze=mt(be),at=!0):(Ze=Ut(be),at=!1),be?be.facturas&&be.facturas.length>0&&!be.facturas[0].destinatario?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando detalles de facturas..."})]}):Ze.length===0?i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-8 text-center",children:[i.jsx(Jr,{className:"mx-auto text-emerald-600 mb-4",size:48}),i.jsxs("p",{className:"text-emerald-800 dark:text-emerald-200 text-lg font-medium",children:[" No hay facturas ",at?"pendientes":"confirmadas",q!=="todas"&&` en la zona ${q}`]})]}):i.jsx("div",{className:"space-y-3",children:Ze.map(Qe=>{var St,tr,It,Er,en,$r,jn,fr,dn,Vn;const ze=Qe.estadoItems||Qe.estadoFactura||Qe.estado,st=ze==="completo"||ze==="completa";return i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition",children:i.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-[250px]",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[i.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Qe.numeroFactura||Qe.codigoTracking}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${st?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:st?" Completa":" Incompleta"}),i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs font-medium",children:[" ",Qe.itemsMarcados||0,"/",Qe.itemsTotal||((St=Qe.items)==null?void 0:St.length)||0]}),(((tr=Qe.destinatario)==null?void 0:tr.zona)||Qe.zona)&&i.jsxs("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs font-medium rounded flex items-center gap-1",children:[i.jsx(Da,{size:14}),((It=Qe.destinatario)==null?void 0:It.zona)||Qe.zona]})]}),i.jsxs("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:[" ",((Er=Qe.destinatario)==null?void 0:Er.nombre)||Qe.nombreCliente||Qe.cliente||"Sin nombre"]}),(((en=Qe.destinatario)==null?void 0:en.telefono)||Qe.telefono)&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",(($r=Qe.destinatario)==null?void 0:$r.telefono)||Qe.telefono,i.jsx("button",{onClick:()=>{var on;return qt(((on=Qe.destinatario)==null?void 0:on.telefono)||Qe.telefono)},className:"ml-2 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Llamar"})]}),(((jn=Qe.destinatario)==null?void 0:jn.direccion)||Qe.direccion)&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",((fr=Qe.destinatario)==null?void 0:fr.direccion)||Qe.direccion,(((dn=Qe.destinatario)==null?void 0:dn.sector)||Qe.sector)&&i.jsxs("span",{className:"ml-2 text-indigo-600 dark:text-indigo-400 font-medium",children:["(",((Vn=Qe.destinatario)==null?void 0:Vn.sector)||Qe.sector,")"]})]}),Qe.observaciones&&i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm italic mt-2",children:[" ",Qe.observaciones]}),Qe.notasSecretaria&&i.jsxs("p",{className:"text-indigo-500 dark:text-indigo-400 text-sm italic mt-2",children:[": ",Qe.notasSecretaria]})]}),i.jsxs("div",{className:"ml-4 flex-shrink-0 flex flex-col gap-2",children:[at?i.jsxs("button",{onClick:()=>zt(Qe,!0,!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm font-medium flex items-center gap-2",children:[i.jsx(Jr,{size:16}),"Confirmar"]}):i.jsxs("span",{className:"px-4 py-2 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-400 rounded-lg text-sm font-medium flex items-center gap-2",children:[i.jsx(Jr,{size:16}),"Confirmada"]}),i.jsx("button",{onClick:()=>zt(Qe,!0,!0),className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-white rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition text-sm font-medium flex items-center gap-2",children:" Editar"})]})]})},Qe.facturaId||Qe.id)})}):null};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Panel de Secretarias"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Confirma y gestiona facturas de embarques y contenedores"})]}),i.jsxs("div",{className:"flex gap-3 mb-6",children:[i.jsxs("button",{onClick:()=>e("embarques"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${t==="embarques"?"bg-indigo-600 text-white shadow-lg":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(ts,{size:20}),"Contenedores Recibidos",ae.length>0&&i.jsx("span",{className:"ml-1 bg-white text-indigo-600 px-2 py-0.5 rounded-full text-xs font-bold",children:ae.length})]}),i.jsxs("button",{onClick:()=>e("facturas_antiguas"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${t==="facturas_antiguas"?"bg-purple-600 text-white shadow-lg":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(Nu,{size:20}),"Sistema Antiguo"]})]}),t==="embarques"&&i.jsxs("div",{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Contenedor"}),i.jsxs("select",{value:Te,onChange:be=>{we(be.target.value),Y("todas"),pe("pendientes"),be.target.value&&ve(be.target.value)},className:"w-full max-w-md px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"-- Seleccionar Contenedor --"}),ae.map(be=>{var at;const Ze=((at=be.estadisticas)==null?void 0:at.facturasPendientes)||0;return i.jsxs("option",{value:be.id,children:[be.numeroContenedor," (",Ze," facturas por confirmar)"]},be.id)})]})]}),Te&&i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por Zona de Entrega"}),i.jsxs("select",{value:q,onChange:be=>Y(be.target.value),className:"w-full max-w-md px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"todas",children:"Todas las zonas"}),et(Ht()).map(be=>{const Ze=Ht();if(!Ze)return null;const at=(Ze.facturas||[]).filter(st=>{var Er;const St=st.estadoItems||st.estadoFactura||st.estado,tr=St==="completo"||St==="completa";return(((Er=st.destinatario)==null?void 0:Er.zona)||st.zona)===be&&tr&&st.confirmadaPorSecretaria!==!0}).length,Qe=(Ze.facturas||[]).filter(st=>{var tr;return(((tr=st.destinatario)==null?void 0:tr.zona)||st.zona)===be&&st.confirmadaPorSecretaria===!0}).length,ze={Capital:" Capital",Cibao:" Cibao",Sur:" Sur",Este:" Este",Local:" Local (Ban)"}[be]||be;return i.jsxs("option",{value:be,children:[ze," (",at," pend, ",Qe," conf)"]},be)})]})]}),X?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando contenedores..."})]}):ae.length===0?i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-8 text-center",children:[i.jsx(Lr,{className:"mx-auto text-indigo-600 mb-4",size:64}),i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-lg font-medium",children:"No hay contenedores recibidos disponibles"})]}):Te?(()=>{const be=Ht(),Ze=mt(be).length,at=Ut(be).length;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4 pb-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Lr,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:be.numeroContenedor}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:q!=="todas"?`Zona: ${q}`:"Todas las zonas"})]})]}),i.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-800 dark:text-indigo-100 rounded-full text-sm font-medium",children:"Recibido"})]}),i.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>pe("pendientes"),className:`pb-3 px-4 font-medium transition-colors ${je==="pendientes"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Nu,{size:16}),"Pendientes"]}),Ze>0&&i.jsx("span",{className:"ml-2 bg-rose-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:Ze})]}),i.jsxs("button",{onClick:()=>pe("confirmadas"),className:`pb-3 px-4 font-medium transition-colors ${je==="confirmadas"?"border-b-2 border-emerald-600 text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Cre,{size:16}),"Confirmadas"]}),at>0&&i.jsx("span",{className:"ml-2 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:at})]})]}),Ft()]})})():i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-8 text-center",children:[i.jsx(Lr,{className:"mx-auto text-indigo-600 mb-4",size:48}),i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-lg font-medium",children:" Selecciona un contenedor para empezar a confirmar facturas"})]})]}),t==="facturas_antiguas"&&i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Embarque"}),i.jsxs("select",{value:o,onChange:be=>l(be.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Seleccionar embarque..."}),a.map(be=>i.jsxs("option",{value:be.id||be._id,children:[be.nombre," - ",new Date(be.fechaCreacion).toLocaleDateString()]},be.id||be._id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona de Entrega"}),i.jsxs("select",{value:c,onChange:be=>u(be.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"todas",children:"Todas las zonas"}),i.jsx("option",{value:"capital",children:" Capital"}),i.jsx("option",{value:"cibao",children:" Cibao"}),i.jsx("option",{value:"sur",children:" Sur"}),i.jsx("option",{value:"local_bani",children:" Local (Ban)"})]})]})]}),o?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>n("sin_confirmar"),className:`pb-3 px-4 font-medium transition-colors ${r==="sin_confirmar"?"border-b-2 border-indigo-600 text-indigo-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["Sin Confirmar",gt.sin_confirmar>0&&i.jsx("span",{className:"ml-2 bg-rose-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:gt.sin_confirmar})]}),i.jsxs("button",{onClick:()=>n("pendientes"),className:`pb-3 px-4 font-medium transition-colors ${r==="pendientes"?"border-b-2 border-amber-600 text-amber-600 dark:text-amber-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["Pendientes",gt.pendientes>0&&i.jsx("span",{className:"ml-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:gt.pendientes})]}),i.jsxs("button",{onClick:()=>n("confirmadas"),className:`pb-3 px-4 font-medium transition-colors ${r==="confirmadas"?"border-b-2 border-emerald-600 text-emerald-600 dark:text-emerald-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["Confirmadas",gt.confirmadas>0&&i.jsx("span",{className:"ml-2 bg-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:gt.confirmadas})]}),i.jsxs("button",{onClick:()=>n("no_entregadas"),className:`pb-3 px-4 font-medium transition-colors ${r==="no_entregadas"?"border-b-2 border-amber-600 text-amber-600 dark:text-amber-400":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:["No Entregadas",gt.no_entregadas>0&&i.jsx("span",{className:"ml-2 bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:gt.no_entregadas})]})]}),p?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando facturas..."})]}):kt.length===0?i.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-8 text-center",children:i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:[r==="sin_confirmar"&&" No hay facturas sin confirmar",r==="pendientes"&&" No hay facturas pendientes",r==="confirmadas"&&" No hay facturas confirmadas an",r==="no_entregadas"&&" No hay facturas no entregadas"]})}):i.jsx("div",{className:"space-y-4",children:kt.map(be=>i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex justify-between items-start flex-wrap gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-[250px]",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:["#",be.codigoTracking||be.numeroFactura||"-"]}),be.zona&&i.jsxs("span",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 text-xs font-medium rounded",children:[be.zona==="capital"&&" Capital",be.zona==="cibao"&&" Cibao",be.zona==="sur"&&" Sur",be.zona==="local_bani"&&" Local"]})]}),i.jsxs("p",{className:"text-slate-900 dark:text-white font-medium mb-1",children:[" ",be.cliente]}),be.telefono&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",be.telefono,i.jsx("button",{onClick:()=>qt(be.telefono),className:"ml-2 text-indigo-600 hover:text-indigo-800 dark:text-indigo-400",children:"Llamar"})]}),be.direccion&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",be.direccion,be.sector&&i.jsxs("span",{className:"ml-2 text-indigo-600 dark:text-indigo-400 font-medium",children:["(",be.sector,")"]})]}),be.contenido&&i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm mb-1",children:[" ",be.contenido]}),be.estadoPago&&i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:be.estadoPago==="pagado"?" Pagado":" Cobrar al entregar"}),be.observaciones&&i.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm italic mt-2",children:[" ",be.observaciones]})]}),i.jsxs("div",{className:"ml-4 flex flex-col gap-2 flex-shrink-0",children:[(r==="sin_confirmar"||r==="pendientes")&&i.jsx("button",{onClick:()=>zt(be,!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-sm font-medium",children:r==="pendientes"?" Re-intentar":" Confirmar"}),r==="confirmadas"&&i.jsx("span",{className:"px-4 py-2 bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200 rounded-lg text-sm font-medium text-center",children:" Confirmada"}),r==="no_entregadas"&&i.jsx("button",{onClick:()=>zt(be,!1),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition text-sm font-medium",children:" Reasignar"})]})]})},be.id))})]}):i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-8 text-center",children:i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-lg font-medium",children:" Selecciona un embarque para empezar"})})]}),_&&(b||se)&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl my-8",children:[i.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:Oe?"Editar Factura":"Confirmar Factura"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:(b==null?void 0:b.numeroFactura)||(se==null?void 0:se.numeroFactura)||(se==null?void 0:se.codigoTracking)})]}),i.jsx("button",{onClick:()=>{N(!1),Xe()},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[((se==null?void 0:se.remitente)||(b==null?void 0:b.remitente))&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(vl,{size:18}),"Remitente"]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",((Vt=se==null?void 0:se.remitente)==null?void 0:Vt.nombre)||((Nr=b==null?void 0:b.remitente)==null?void 0:Nr.nombre)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(xl,{size:14}),((sr=se==null?void 0:se.remitente)==null?void 0:sr.telefono)||((it=b==null?void 0:b.remitente)==null?void 0:it.telefono)||"N/A"]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(vl,{size:18}),"Destinatario"]}),i.jsx("div",{className:"space-y-2 text-sm",children:i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",(b==null?void 0:b.cliente)||((ir=se==null?void 0:se.destinatario)==null?void 0:ir.nombre)||(se==null?void 0:se.nombreCliente)||"Sin nombre"]})})]})]}),(se==null?void 0:se.items)&&se.items.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Lr,{size:18}),"Items (",se.items.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:se.items.map((be,Ze)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:be.descripcion||be.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",be.cantidad]})]}),be.precio&&i.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["$",be.precio]})]},Ze))})]}),(se==null?void 0:se.facturacion)&&i.jsxs("div",{className:"mb-6 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Fl,{size:18}),"Facturacin"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["$",(se.facturacion.subtotal||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"ITBIS (18%):"}),i.jsxs("span",{children:["$",(se.facturacion.itbis||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900 dark:text-white border-t border-slate-300 dark:border-slate-600 pt-2",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",(se.facturacion.total||0).toFixed(2)," ",se.facturacion.moneda||"USD"]})]})]})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Jr,{size:18}),"Informacin de Entrega"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Telfono *"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"tel",value:S,onChange:be=>T(be.target.value),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"809-555-1234"}),S&&i.jsxs("button",{onClick:()=>qt(S),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2",children:[i.jsx(xl,{size:16}),"Llamar"]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Direccin *"}),i.jsx("input",{type:"text",value:R,onChange:be=>z(be.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Calle Principal #123"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Sector"}),i.jsx("input",{type:"text",value:G,onChange:be=>O(be.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Los Jardines"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona de Entrega *"}),i.jsxs("select",{value:D,onChange:be=>I(be.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white ${D?"border-slate-300 dark:border-slate-600":"border-rose-500"}`,children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),i.jsx("option",{value:"Capital",children:" Capital"}),i.jsx("option",{value:"Cibao",children:" Cibao"}),i.jsx("option",{value:"Sur",children:" Sur"}),i.jsx("option",{value:"Este",children:" Este"}),i.jsx("option",{value:"Local",children:" Local (Ban)"}),i.jsx("option",{value:"Yaguate y Sur",children:" Yaguate y Sur"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Estado del Pago *"}),ce&&i.jsx("div",{className:"mb-3 p-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Jr,{className:"text-emerald-600 dark:text-emerald-400 mt-0.5",size:18}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-emerald-800 dark:text-emerald-200",children:" Factura Ya Pagada"}),i.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300 mt-1",children:"Esta factura ya fue pagada en Estados Unidos. No se puede modificar el estado de pago."})]})]})}),i.jsxs("select",{value:B,onChange:be=>F(be.target.value),disabled:ce,className:`w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ${ce?"bg-slate-100 dark:bg-slate-800 opacity-50 cursor-not-allowed":""}`,children:[i.jsx("option",{value:"pago_recibir",children:" Pago al recibir"}),i.jsx("option",{value:"pagado",children:" Ya pagado"}),i.jsx("option",{value:"pagada",children:" Ya pagada"}),i.jsx("option",{value:"parcial",children:" Pago Parcial"}),i.jsx("option",{value:"contraentrega",children:" Contra Entrega"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Observaciones (Notas de Secretaria)"}),i.jsx("textarea",{value:V,onChange:be=>P(be.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:"3",placeholder:"Notas adicionales sobre la entrega..."})]})]})]})]}),i.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>{N(!1),Xe()},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),r!=="no_entregadas"&&b&&i.jsx("button",{onClick:ar,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition",children:" Marcar Pendiente"}),i.jsxs("button",{onClick:Wt,className:`flex-1 px-4 py-2 text-white rounded-lg transition flex items-center justify-center gap-2 ${Oe?"bg-emerald-600 hover:bg-emerald-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:[i.jsx(Jr,{size:18}),Oe?"Guardar Cambios":"Confirmar"]})]})]})})]})},QPe={maxWidth:1024,maxHeight:1024,quality:.7,targetSizeKB:200,format:"image/jpeg"},JPe=t=>new Promise((e,r)=>{const n=new Image;n.onload=()=>e(n),n.onerror=r,n.src=URL.createObjectURL(t)}),e7e=(t,e,r,n)=>{let a=t,s=e;return t>e?t>r&&(a=r,s=e*r/t):e>n&&(s=n,a=t*n/e),{width:Math.round(a),height:Math.round(s)}},u$=async(t,e)=>{const{maxWidth:r,maxHeight:n,quality:a,format:s}=e,o=e7e(t.naturalWidth,t.naturalHeight,r,n),l=document.createElement("canvas");l.width=o.width,l.height=o.height;const c=l.getContext("2d");return c.imageSmoothingEnabled=!0,c.imageSmoothingQuality="high",c.drawImage(t,0,0,o.width,o.height),new Promise((u,d)=>{l.toBlob(h=>{h?u(h):d(new Error("Error al comprimir imagen"))},s,a)})},t7e=async(t,e)=>{const{targetSizeKB:r}=e;let n=e.quality,a=await u$(t,{...e,quality:n}),s=0;const o=5;if(a.size/1024<=r)return a;for(;a.size/1024>r&&s<o&&n>.3;)s++,n-=.1,a=await u$(t,{...e,quality:Math.max(.3,n)});return a},d$=async(t,e={},r=null)=>{try{if(!t.type.startsWith("image/"))throw new Error("El archivo no es una imagen vlida");const n=t.size;r&&r({stage:"loading",progress:0});const a=await JPe(t);r&&r({stage:"compressing",progress:30});const s={...QPe,...e},o=await t7e(a,s);r&&r({stage:"complete",progress:100}),URL.revokeObjectURL(a.src);const l=o.size,c=((1-l/n)*100).toFixed(1);return{blob:o,originalSize:n,compressedSize:l,compressionRatio:parseFloat(c),metadata:{originalSizeKB:(n/1024).toFixed(2),compressedSizeKB:(l/1024).toFixed(2),format:s.format,dimensions:{width:a.naturalWidth,height:a.naturalHeight}}}}catch(n){throw console.error("Error comprimiendo imagen:",n),n}},f$={thumbnail:{maxWidth:200,maxHeight:200,quality:.6,targetSizeKB:30,format:"image/jpeg"},preview:{maxWidth:1024,maxHeight:1024,quality:.7,targetSizeKB:200,format:"image/jpeg"},highQuality:{maxWidth:1280,maxHeight:1280,quality:.8,targetSizeKB:300,format:"image/jpeg"}},ose=async(t,e={})=>{var o,l,c,u;const{generateThumbnail:r=!0,generatePreview:n=!0,onProgress:a=null}=e,s={};try{if(r){a&&a({stage:"thumbnail",progress:33});const p=await d$(t,f$.thumbnail,g=>{a&&a({stage:"thumbnail",progress:33+g.progress*.33})});s.thumbnail={blob:p.blob,size:p.compressedSize,sizeKB:p.metadata.compressedSizeKB}}if(n){a&&a({stage:"preview",progress:66});const p=await d$(t,f$.preview,g=>{a&&a({stage:"preview",progress:66+g.progress*.33})});s.preview={blob:p.blob,size:p.compressedSize,sizeKB:p.metadata.compressedSizeKB}}a&&a({stage:"complete",progress:100});const d=(t.size/1024).toFixed(2),h=((((o=s.thumbnail)==null?void 0:o.size)||0)+(((l=s.preview)==null?void 0:l.size)||0))/1024;return s.metadata={originalSizeKB:d,totalCompressedKB:h.toFixed(2),thumbnailSizeKB:((c=s.thumbnail)==null?void 0:c.sizeKB)||0,previewSizeKB:((u=s.preview)==null?void 0:u.sizeKB)||0,compressionRatio:((1-h/d)*100).toFixed(1)},s}catch(d){throw console.error("Error generando variantes de imagen:",d),d}},h$=(t,e,r="thumbnail")=>{const n=e.split(".").pop(),s=`${e.replace(/\.[^/.]+$/,"")}_${r}.${n}`;return new File([t],s,{type:t.type})},lT=()=>{var et,er,Ve,zt,Wt,Yt,ar;const{executeWithOptimism:t}=fae();xae();const[e,r]=A.useState([]),[n,a]=A.useState(null),[s,o]=A.useState("lista"),[l,c]=A.useState(!0),[u,d]=A.useState(!1),[h,p]=A.useState(!1),[g,b]=A.useState(!1),[w,_]=A.useState(null),[N,S]=A.useState(""),[T,R]=A.useState([]),[z,G]=A.useState(!1),[O,D]=A.useState(!1),[I,V]=A.useState(""),[P,B]=A.useState(!1),[F,ee]=A.useState([]),[Z,ce]=A.useState(0),[ne,ae]=A.useState(!1),[me,Te]=A.useState(null),[we,q]=A.useState(!1),[Y,X]=A.useState(""),[re,se]=A.useState(null);A.useEffect(()=>{je()},[]),A.useEffect(()=>{if(!we||!n)return;const Xe=qt=>{["INPUT","TEXTAREA"].includes(qt.target.tagName)||(qt.key==="Enter"?Y&&(Ce(Y),X("")):qt.key.length===1&&X(kt=>kt+qt.key))};return window.addEventListener("keydown",Xe),()=>window.removeEventListener("keydown",Xe)},[we,Y,n]);const Ce=Xe=>{se(Xe),console.log(" Cdigo escaneado:",Xe);let qt=!1;for(const kt of n.facturas||[])if(kt.codigoTracking===Xe||kt.items&&kt.items.some(gt=>gt.codigoBarras===Xe)){const gt=kt.items.map((Ft,Vt)=>({item:Ft,index:Vt})).filter(({item:Ft})=>Ft.codigoBarras===Xe||kt.codigoTracking===Xe);if(gt.length>0){qt=!0;const Ft=gt.find(({item:Vt})=>!Vt.cargado);Ft?(Ue(kt.id,Ft.index),Ke.success(`Item escaneado: ${Ft.item.descripcion}`,{icon:"",duration:2e3})):Ke.info("Item(s) ya cargado(s) para este cdigo",{icon:""});break}}qt||Ke.error(`Cdigo no encontrado en esta ruta: ${Xe}`,{icon:""})},je=async()=>{try{c(!0);const Xe=await wt.get("/cargadores/rutas");Xe.data.success&&r(Xe.data.data||[])}catch(Xe){console.error("Error cargando rutas:",Xe),Ke.error("Error al cargar las rutas asignadas"),r([])}finally{c(!1)}},pe=async Xe=>{try{d(!0);const qt=await wt.get(`/cargadores/rutas/${Xe}`);qt.data.success&&(a(qt.data.data),o("detalle"))}catch(qt){console.error("Error cargando detalle:",qt),Ke.error("Error al cargar el detalle de la ruta")}finally{d(!1)}},Oe=()=>{o("lista"),a(null),je()},qe=async()=>{var Xe,qt;if(n)try{p(!0),(await wt.post(`/cargadores/rutas/${n.id}/iniciar-carga`)).data.success&&(Ke.success("Carga iniciada exitosamente"),await pe(n.id))}catch(kt){console.error("Error iniciando carga:",kt),Ke.error(((qt=(Xe=kt.response)==null?void 0:Xe.data)==null?void 0:qt.message)||"Error al iniciar la carga")}finally{p(!1)}},Ue=async(Xe,qt)=>{var Ft;if(!n)return;const kt=(Ft=n.facturas)==null?void 0:Ft.find(Vt=>Vt.id===Xe);if(!kt||!kt.items||!kt.items[qt])return;const gt={cargado:kt.items[qt].cargado};await t({optimisticUpdate:()=>{a(Vt=>{const Nr=[...Vt.facturas||[]],sr=Nr.findIndex(it=>it.id===Xe);return sr!==-1&&(Nr[sr]={...Nr[sr],items:Nr[sr].items.map((it,ir)=>ir===qt?{...it,cargado:!0,_optimistic:!0}:it)}),{...Vt,facturas:Nr}})},serverAction:async()=>{const Vt=await wt.post(`/cargadores/rutas/${n.id}/facturas/${Xe}/items/confirmar`,{itemIndex:qt});return await pe(n.id),Vt},rollback:()=>{a(Vt=>{const Nr=[...Vt.facturas||[]],sr=Nr.findIndex(it=>it.id===Xe);return sr!==-1&&(Nr[sr]={...Nr[sr],items:Nr[sr].items.map((it,ir)=>ir===qt?{...it,cargado:gt.cargado,_optimistic:!1}:it)}),{...Vt,facturas:Nr}})},successMessage:" Item marcado como cargado",errorMessage:" Error al confirmar item"})},Me=async()=>{var Xe,qt,kt,gt,Ft;if(n)try{p(!0),(await wt.post(`/cargadores/rutas/${n.id}/finalizar-carga`,{notas:I})).data.success&&(Ke.success("Carga finalizada correctamente",{description:"La ruta ahora est lista para el repartidor"}),D(!1),V(""),Oe())}catch(Vt){console.error("Error finalizando carga:",Vt),(qt=(Xe=Vt.response)==null?void 0:Xe.data)!=null&&qt.requiereConfirmacion?Ke.error("Carga incompleta",{description:`Hay ${((kt=Vt.response.data.facturasIncompletas)==null?void 0:kt.length)||0} facturas con items pendientes.`}):Ke.error(((Ft=(gt=Vt.response)==null?void 0:gt.data)==null?void 0:Ft.message)||"Error al finalizar la carga")}finally{p(!1)}},Be=async(Xe,qt)=>{const kt=[];for(let gt=0;gt<Xe.length;gt++){const Ft=Xe[gt];try{const Vt=Date.now(),Nr=setTimeout(()=>{Ke.loading(`Procesando imagen ${gt+1}/${Xe.length}...`,{id:`process-${gt}`})},500),sr=await ose(Ft,{onProgress:Er=>{Er.stage==="thumbnail"?Ke.loading(`Generando thumbnail ${gt+1}...`,{id:`process-${gt}`}):Er.stage==="preview"&&Ke.loading(`Generando preview ${gt+1}...`,{id:`process-${gt}`})}});clearTimeout(Nr),Ke.dismiss(`process-${gt}`);const it=Date.now(),ir=`danos/${qt}/${it}_${gt}`,be=h$(sr.thumbnail.blob,Ft.name,"thumb"),Ze=`${ir}_thumb.jpg`,at=Qb(jx,Ze);await Yb(at,be);const Qe=await Zb(at),ze=h$(sr.preview.blob,Ft.name,"preview"),st=`${ir}_preview.jpg`,St=Qb(jx,st);await Yb(St,ze);const tr=await Zb(St);kt.push({thumbnail:Qe,preview:tr,metadata:sr.metadata}),Date.now()-Vt>500&&Ke.success(`Imagen ${gt+1}: ${sr.metadata.originalSizeKB}KB  Thumb: ${sr.metadata.thumbnailSizeKB}KB + Preview: ${sr.metadata.previewSizeKB}KB`,{duration:3e3})}catch(Vt){throw console.error("Error procesando foto:",Vt),Ke.error(`Error al procesar ${Ft.name}`),new Error(`Fallo al procesar imagen ${gt+1}`)}}return kt},ve=(Xe,qt,kt)=>{_({facturaId:Xe,item:qt,itemIndex:kt}),S(""),R([]),b(!0)},Ht=async()=>{var Xe,qt;if(!w||!N.trim()){Ke.error("Debes describir el dao encontrado");return}try{p(!0),G(!0);let kt=[];T.length>0&&(Ke.info(`Subiendo ${T.length} foto(s)...`),kt=await Be(T,w.facturaId)),(await wt.post(`/cargadores/facturas/${w.facturaId}/items/danado`,{itemIndex:w.itemIndex,descripcionDano:N.trim(),fotos:kt})).data.success&&(Ke.success("Dao reportado exitosamente"),b(!1),await pe(n.id))}catch(kt){console.error("Error reportando dao:",kt),Ke.error(((qt=(Xe=kt.response)==null?void 0:Xe.data)==null?void 0:qt.message)||"Error al guardar el reporte")}finally{p(!1),G(!1)}},mt=Xe=>{!Xe||Xe.length===0||(ee(Xe),ce(0),B(!0))},Ut=Xe=>{Te(Xe),ae(!0)};return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[s==="detalle"&&i.jsx("button",{onClick:Oe,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition",children:i.jsx(Hl,{className:"text-slate-700 dark:text-slate-300"})}),i.jsx(ts,{size:32,className:"text-indigo-600"}),i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center gap-3",children:i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Panel de Cargadores"})}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:s==="lista"?"Selecciona una ruta para comenzar":(n==null?void 0:n.nombre)||"Detalle de Ruta"})]})]})})}),s==="lista"&&i.jsx("div",{className:"space-y-4",children:l?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(bs,{className:"animate-spin text-indigo-600",size:40})}):e.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-8 text-center",children:[i.jsx(Lr,{size:48,className:"mx-auto text-slate-400 mb-4"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:"No tienes rutas asignadas en este momento"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(Xe=>{var qt,kt,gt,Ft,Vt;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition border-l-4 border-indigo-500",children:[i.jsx("div",{className:"flex justify-between items-start mb-4",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:Xe.nombre}),i.jsx("div",{className:"flex gap-2 mt-2",children:i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Xe.estado==="asignada"?"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200":"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200"}`,children:Xe.estado==="asignada"?"Asignada":"En Proceso"})})]})}),Xe.zona&&i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-400 mb-4",children:[i.jsx(Da,{size:16}),i.jsx("span",{children:Xe.zona})]}),Xe.repartidorNombre&&i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["Repartidor: ",Xe.repartidorNombre]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Facturas"}),i.jsx("p",{className:"font-bold text-lg text-slate-900 dark:text-white",children:((qt=Xe.estadisticas)==null?void 0:qt.totalFacturas)||0})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-300",children:"Items"}),i.jsxs("p",{className:"font-bold text-lg text-purple-700 dark:text-purple-200",children:[((kt=Xe.estadisticas)==null?void 0:kt.itemsCargados)||0,"/",((gt=Xe.estadisticas)==null?void 0:gt.totalItems)||0]})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-300",children:"Progreso"}),i.jsxs("p",{className:"font-bold text-lg text-amber-700 dark:text-amber-200",children:[((Ft=Xe.estadisticas)==null?void 0:Ft.porcentajeCarga)||0,"%"]})]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-4",children:i.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-500",style:{width:`${((Vt=Xe.estadisticas)==null?void 0:Vt.porcentajeCarga)||0}%`}})}),i.jsx("button",{onClick:()=>pe(Xe.id),disabled:u,className:"w-full px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:u?i.jsx(bs,{className:"animate-spin",size:18}):i.jsxs(i.Fragment,{children:[i.jsx(Xu,{size:18}),"Gestionar Carga"]})})]},Xe.id)})})}),s==="detalle"&&n&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n.nombre}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:["Progreso total: ",n.itemsCargadosRuta||0," de ",n.itemsTotalRuta||0," items"]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>window.open(`/rutas/${n.id}/imprimir`,"_blank"),className:"p-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition",title:"Imprimir Facturas",children:i.jsx(ql,{size:18})}),n.estado==="asignada"?i.jsxs("button",{onClick:qe,disabled:h,className:"px-6 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition font-medium flex items-center gap-2 disabled:opacity-50",children:[h?i.jsx(bs,{className:"animate-spin",size:18}):i.jsx(Jr,{size:18}),"Iniciar Proceso de Carga"]}):i.jsxs("button",{onClick:()=>D(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium flex items-center gap-2",children:[i.jsx(Jr,{size:18}),"Finalizar Carga"]})]})]}),n.estado==="asignada"||n.estado==="en_carga"?i.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-center justify-between transition ${we?"bg-indigo-50 border border-indigo-200":"bg-slate-50"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`p-3 rounded-full ${we?"bg-indigo-100 text-indigo-600 animate-pulse":"bg-slate-200 text-slate-500"}`,children:i.jsx(Are,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:"Modo Scanner Automtico"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:we?"LISTO PARA ESCANEAR... (Emule teclado)":"Activa para cargar items automticamente al escanear"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[re&&i.jsxs("span",{className:"text-xs bg-white px-2 py-1 rounded border font-mono",children:["ltimo: ",re]}),i.jsx("button",{onClick:()=>q(!we),className:`px-4 py-2 rounded-lg font-medium transition ${we?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:we?"DESACTIVAR":"ACTIVAR"})]})]}):null]}),i.jsx("div",{className:"space-y-4",children:n.facturas&&n.facturas.length>0?n.facturas.map((Xe,qt)=>{var kt;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700 flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Xe.codigoTracking}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${Xe.estadoCarga==="cargada"?"bg-emerald-100 text-emerald-800":"bg-slate-200 text-slate-700"}`,children:Xe.estadoCarga==="cargada"?"COMPLETADA":"PENDIENTE"}),i.jsxs("button",{onClick:()=>Ut(Xe),className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded hover:bg-indigo-700 transition flex items-center gap-1",children:[i.jsx(Lr,{size:12}),"Ver Detalles"]})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:((kt=Xe.destinatario)==null?void 0:kt.nombre)||"Sin destinatario"})]}),i.jsxs("div",{className:"text-right text-sm text-slate-500 dark:text-slate-400",children:[Xe.itemsCargados||0," / ",Xe.itemsTotal||0," items cargados"]})]}),i.jsx("div",{className:"p-4 space-y-3",children:Xe.items&&Xe.items.map((gt,Ft)=>i.jsxs("div",{className:`flex flex-col md:flex-row justify-between items-center p-4 rounded-lg border-2 transition ${gt.cargado?"bg-emerald-50 dark:bg-emerald-900/10 border-emerald-500":"bg-white dark:bg-slate-700 border-slate-200 dark:border-slate-600"}`,children:[i.jsx("div",{className:"flex-1 w-full mb-3 md:mb-0",children:i.jsxs("div",{className:"flex items-center gap-3",children:[gt.cargado?i.jsx(Jr,{className:"text-emerald-600 flex-shrink-0",size:24}):i.jsx(Xu,{className:"text-slate-400 flex-shrink-0",size:24}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-lg",children:gt.descripcion||gt.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",gt.cantidad]}),gt.fotos&&gt.fotos.length>0&&i.jsxs("button",{onClick:()=>mt(gt.fotos),className:"mt-1 text-xs text-indigo-600 hover:underline flex items-center gap-1",children:[i.jsx(zd,{size:12})," Ver fotos del item"]})]})]})}),n.estado==="en_carga"&&!gt.cargado&&i.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[i.jsxs("button",{onClick:()=>Ue(Xe.id,Ft),disabled:h,className:"flex-1 md:flex-none px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:[i.jsx(Jr,{size:16}),"Cargar"]}),i.jsxs("button",{onClick:()=>ve(Xe.id,gt,Ft),disabled:h,className:"flex-1 md:flex-none px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition font-medium flex items-center justify-center gap-2",children:[i.jsx(hi,{size:16}),"Daado"]})]}),gt.cargado&&i.jsxs("div",{className:"px-4 py-2 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 rounded-lg font-medium flex items-center gap-2",children:[i.jsx(Jr,{size:16})," Cargado"]})]},Ft))}),Xe.itemsDanados&&Xe.itemsDanados.length>0&&i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 border-t border-amber-200 dark:border-amber-800",children:[i.jsxs("p",{className:"text-sm font-bold text-amber-700 dark:text-amber-300 flex items-center gap-2",children:[i.jsx(hi,{size:14})," Reportes de Dao:"]}),Xe.itemsDanados.map((gt,Ft)=>{var Vt,Nr;return i.jsxs("div",{className:"text-xs text-amber-800 dark:text-amber-200 ml-5 mt-1",children:[" ",(Vt=gt.item)==null?void 0:Vt.descripcion,": ",gt.descripcionDano,((Nr=gt.fotos)==null?void 0:Nr.length)>0&&i.jsx("button",{onClick:()=>mt(gt.fotos),className:"ml-2 text-indigo-600 underline",children:"Ver fotos"})]},Ft)})]})]},Xe.id||qt)}):i.jsx("div",{className:"p-8 text-center text-slate-500 bg-white dark:bg-slate-800 rounded-lg",children:"No hay facturas en esta ruta."})})]}),g&&w&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg p-6 shadow-2xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(hi,{className:"text-amber-600"}),"Reportar Item Daado"]}),i.jsx("button",{onClick:()=>b(!1),className:"text-slate-500 hover:text-slate-700",children:i.jsx(Zn,{})})]}),i.jsxs("div",{className:"mb-4 p-3 bg-slate-100 dark:bg-slate-700 rounded",children:[i.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:w.item.descripcion}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cant: ",w.item.cantidad]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Descripcin del dao"}),i.jsx("textarea",{value:N,onChange:Xe=>S(Xe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-amber-500",rows:"3",placeholder:"Describe qu est daado..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fotos de evidencia"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:Xe=>R(Array.from(Xe.target.files)),className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"}),T.length>0&&i.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[T.length," fotos seleccionadas"]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>b(!1),disabled:h,className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsxs("button",{onClick:Ht,disabled:h||!N.trim(),className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition disabled:opacity-50 flex justify-center items-center gap-2",children:[z?i.jsx(bs,{className:"animate-spin",size:18}):i.jsx(hi,{size:18}),z?"Subiendo...":"Reportar"]})]})]})}),O&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md p-6 shadow-2xl",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Jr,{className:"text-emerald-600"}),"Finalizar Carga"]}),i.jsx("div",{className:"mb-4 bg-emerald-50 dark:bg-emerald-900/20 p-3 rounded text-sm text-emerald-800 dark:text-emerald-200",children:i.jsx("p",{children:'Al finalizar, la ruta cambiar a estado "Cargada" y estar disponible para el repartidor.'})}),i.jsx("textarea",{value:I,onChange:Xe=>V(Xe.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg mb-4",placeholder:"Notas opcionales sobre la carga...",rows:"3"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>D(!1),disabled:h,className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-100 dark:border-slate-600 dark:text-white dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:Me,disabled:h,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex justify-center items-center gap-2",children:h?i.jsx(bs,{className:"animate-spin",size:18}):"Confirmar"})]})]})}),P&&F.length>0&&i.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center z-[9999] p-4",children:i.jsxs("div",{className:"relative w-full max-w-6xl max-h-[90vh] flex flex-col items-center justify-center",children:[i.jsx("button",{onClick:()=>{B(!1),ee([])},className:"absolute top-4 right-4 text-white hover:text-slate-300 p-2 bg-black/50 rounded-full z-[10000]",children:i.jsx(Zn,{size:32})}),i.jsx(gae,{src:F[Z],alt:`Foto ${Z+1}`,className:"max-h-[calc(90vh-120px)] max-w-full rounded-lg shadow-2xl",showOptimizedBadge:!0,showZoomIcon:!1,usePreview:!0,objectFit:"contain"}),F.length>1&&i.jsxs("div",{className:"flex gap-4 mt-4",children:[i.jsx("button",{onClick:()=>ce(Xe=>Xe>0?Xe-1:F.length-1),className:"px-4 py-2 bg-white/20 text-white rounded-full hover:bg-white/30",children:"Anterior"}),i.jsxs("span",{className:"text-white py-2",children:[Z+1," / ",F.length]}),i.jsx("button",{onClick:()=>ce(Xe=>Xe<F.length-1?Xe+1:0),className:"px-4 py-2 bg-white/20 text-white rounded-full hover:bg-white/30",children:"Siguiente"})]})]})}),ne&&me&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-3xl p-6 shadow-2xl my-8",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Lr,{className:"text-indigo-600"}),"Detalles de Factura"]}),i.jsx("button",{onClick:()=>ae(!1),className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-200 mb-2",children:"Cdigo de Tracking"}),i.jsx("p",{className:"text-2xl font-mono font-bold text-indigo-700 dark:text-indigo-300",children:me.codigoTracking})]}),i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Da,{size:18,className:"text-emerald-600"}),"Destinatario"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Nombre:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((et=me.destinatario)==null?void 0:et.nombre)||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Telfono:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((er=me.destinatario)==null?void 0:er.telefono)||"No especificado"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Direccin:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((Ve=me.destinatario)==null?void 0:Ve.direccion)||"No especificada"})]}),((zt=me.destinatario)==null?void 0:zt.sector)&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Sector:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:me.destinatario.sector})]}),((Wt=me.destinatario)==null?void 0:Wt.zona)&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Zona:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:me.destinatario.zona})]})]})]}),i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Xu,{size:18,className:"text-purple-600"}),"Items de la Factura (",((Yt=me.items)==null?void 0:Yt.length)||0,")"]}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(ar=me.items)==null?void 0:ar.map((Xe,qt)=>i.jsxs("div",{className:"flex justify-between items-start p-3 bg-slate-50 dark:bg-slate-700/50 rounded",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:Xe.descripcion||Xe.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",Xe.cantidad]}),Xe.fotos&&Xe.fotos.length>0&&i.jsxs("button",{onClick:()=>mt(Xe.fotos),className:"mt-1 text-xs text-indigo-600 hover:underline flex items-center gap-1",children:[i.jsx(zd,{size:12})," Ver ",Xe.fotos.length," foto(s)"]})]}),Xe.cargado&&i.jsx(Jr,{className:"text-emerald-600 flex-shrink-0 ml-2",size:20})]},qt))})]}),me.fotos&&me.fotos.length>0&&i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(zd,{size:18,className:"text-indigo-600"}),"Fotos de la Recoleccin (",me.fotos.length,")"]}),i.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:me.fotos.map((Xe,qt)=>i.jsx("div",{className:"aspect-square rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity border-2 border-slate-200 dark:border-slate-600",onClick:()=>mt(me.fotos),children:i.jsx("img",{src:Xe,alt:`Foto ${qt+1}`,className:"w-full h-full object-cover",loading:"lazy"})},qt))}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:"Haz clic en cualquier foto para ver en tamao completo"})]}),me.facturacion&&i.jsxs("div",{className:"border dark:border-slate-700 rounded-lg p-4",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-3",children:"Facturacin"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[me.facturacion.subtotal&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Subtotal:"}),i.jsxs("p",{className:"font-medium text-slate-900 dark:text-white",children:["$",me.facturacion.subtotal]})]}),me.facturacion.total&&i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Total:"}),i.jsxs("p",{className:"font-bold text-lg text-slate-900 dark:text-white",children:["$",me.facturacion.total]})]})]})]}),i.jsx("button",{onClick:()=>ae(!1),className:"w-full px-4 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition font-medium",children:"Cerrar"})]})]})})]})},r7e=({onRefresh:t,children:e})=>{const[r,n]=A.useState(0),[a,s]=A.useState(!1),[o,l]=A.useState(0),c=A.useRef(null),u=80,d=g=>{window.scrollY===0&&n(g.touches[0].clientY)},h=g=>{if(r===0)return;const w=g.touches[0].clientY-r;w>0&&window.scrollY===0&&l(Math.min(w*.5,120))},p=async()=>{if(o>u){s(!0),l(u);try{await t()}finally{setTimeout(()=>{s(!1),l(0),n(0)},500)}}else l(0),n(0)};return i.jsxs("div",{ref:c,className:"min-h-screen relative",onTouchStart:d,onTouchMove:h,onTouchEnd:p,children:[i.jsx("div",{className:"fixed top-16 left-0 w-full flex justify-center items-center pointer-events-none transition-all duration-200 z-50",style:{opacity:o>0?1:0,transform:`translateY(${o>0?o:-50}px)`},children:i.jsx("div",{className:`bg-white dark:bg-slate-800 rounded-full p-3 shadow-lg border border-slate-200 dark:border-slate-700 ${a?"animate-spin":""}`,children:i.jsx(W0,{size:24,className:`text-indigo-600 ${o>u&&!a?"rotate-180 transition-transform duration-300":""}`})})}),i.jsx("div",{style:{transform:`translateY(${o}px)`,transition:a?"transform 0.2s":"none"},children:e})]})};var Tr;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Tr||(Tr={}));var m$=new Map([[Tr.QR_CODE,"QR_CODE"],[Tr.AZTEC,"AZTEC"],[Tr.CODABAR,"CODABAR"],[Tr.CODE_39,"CODE_39"],[Tr.CODE_93,"CODE_93"],[Tr.CODE_128,"CODE_128"],[Tr.DATA_MATRIX,"DATA_MATRIX"],[Tr.MAXICODE,"MAXICODE"],[Tr.ITF,"ITF"],[Tr.EAN_13,"EAN_13"],[Tr.EAN_8,"EAN_8"],[Tr.PDF_417,"PDF_417"],[Tr.RSS_14,"RSS_14"],[Tr.RSS_EXPANDED,"RSS_EXPANDED"],[Tr.UPC_A,"UPC_A"],[Tr.UPC_E,"UPC_E"],[Tr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),p$;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(p$||(p$={}));function n7e(t){return Object.values(Tr).includes(t)}var oy;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(oy||(oy={}));var a7e=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[oy.SCAN_TYPE_CAMERA,oy.SCAN_TYPE_FILE],t}(),lse=function(){function t(e,r){this.format=e,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!m$.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,m$.get(e))},t}(),g$=function(){function t(){}return t.createFromText=function(e){var r={text:e};return{decodedText:e,result:r}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),B8;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(B8||(B8={}));var s7e=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:B8.UNKWOWN_ERROR}},t}(),i7e=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,r){(this.verbose||r===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function bf(t){return typeof t>"u"||t===null}var _1=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),cse=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,r){if(typeof e!="object"){var n=typeof e;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(a),o=Object.keys(e),l=0,c=o;l<c.length;l++){var u=c[l];if(s.has(u))return r.logError("".concat(u," is not supported videoConstaints."),!0),!1}return!0},t}(),U8={exports:{}};(function(t,e){(function(r,n){n(e)})(Rv,function(r){function n(oe){return oe==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,f){oe.__proto__=f}||function(oe,f){for(var m in f)f.hasOwnProperty(m)&&(oe[m]=f[m])};function s(oe,f){a(oe,f);function m(){this.constructor=oe}oe.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}function o(oe,f){var m=Object.setPrototypeOf;m?m(oe,f):oe.__proto__=f}function l(oe,f){f===void 0&&(f=oe.constructor);var m=Error.captureStackTrace;m&&m(oe,f)}var c=function(oe){s(f,oe);function f(m){var x=this.constructor,v=oe.call(this,m)||this;return Object.defineProperty(v,"name",{value:x.name,enumerable:!1}),o(v,x.prototype),l(v),v}return f}(Error);class u extends c{constructor(f=void 0){super(f),this.message=f}getKind(){return this.constructor.kind}}u.kind="Exception";class d extends u{}d.kind="ArgumentException";class h extends u{}h.kind="IllegalArgumentException";class p{constructor(f){if(this.binarizer=f,f===null)throw new h("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(f,m){return this.binarizer.getBlackRow(f,m)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(f,m,x,v){const y=this.binarizer.getLuminanceSource().crop(f,m,x,v);return new p(this.binarizer.createBinarizer(y))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const f=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new p(this.binarizer.createBinarizer(f))}rotateCounterClockwise45(){const f=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new p(this.binarizer.createBinarizer(f))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class g extends u{static getChecksumInstance(){return new g}}g.kind="ChecksumException";class b{constructor(f){this.source=f}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(f,m,x,v,y){for(;y--;)x[v++]=f[m++]}static currentTimeMillis(){return Date.now()}}class _ extends u{}_.kind="IndexOutOfBoundsException";class N extends _{constructor(f=void 0,m=void 0){super(m),this.index=f,this.message=m}}N.kind="ArrayIndexOutOfBoundsException";class S{static fill(f,m){for(let x=0,v=f.length;x<v;x++)f[x]=m}static fillWithin(f,m,x,v){S.rangeCheck(f.length,m,x);for(let y=m;y<x;y++)f[y]=v}static rangeCheck(f,m,x){if(m>x)throw new h("fromIndex("+m+") > toIndex("+x+")");if(m<0)throw new N(m);if(x>f)throw new N(x)}static asList(...f){return f}static create(f,m,x){return Array.from({length:f}).map(y=>Array.from({length:m}).fill(x))}static createInt32Array(f,m,x){return Array.from({length:f}).map(y=>Int32Array.from({length:m}).fill(x))}static equals(f,m){if(!f||!m||!f.length||!m.length||f.length!==m.length)return!1;for(let x=0,v=f.length;x<v;x++)if(f[x]!==m[x])return!1;return!0}static hashCode(f){if(f===null)return 0;let m=1;for(const x of f)m=31*m+x;return m}static fillUint8Array(f,m){for(let x=0;x!==f.length;x++)f[x]=m}static copyOf(f,m){return f.slice(0,m)}static copyOfUint8Array(f,m){if(f.length<=m){const x=new Uint8Array(m);return x.set(f),x}return f.slice(0,m)}static copyOfRange(f,m,x){const v=x-m,y=new Int32Array(v);return w.arraycopy(f,m,y,0,v),y}static binarySearch(f,m,x){x===void 0&&(x=S.numberComparator);let v=0,y=f.length-1;for(;v<=y;){const E=y+v>>1,k=x(m,f[E]);if(k>0)v=E+1;else if(k<0)y=E-1;else return E}return-v-1}static numberComparator(f,m){return f-m}}class T{static numberOfTrailingZeros(f){let m;if(f===0)return 32;let x=31;return m=f<<16,m!==0&&(x-=16,f=m),m=f<<8,m!==0&&(x-=8,f=m),m=f<<4,m!==0&&(x-=4,f=m),m=f<<2,m!==0&&(x-=2,f=m),x-(f<<1>>>31)}static numberOfLeadingZeros(f){if(f===0)return 32;let m=1;return f>>>16||(m+=16,f<<=16),f>>>24||(m+=8,f<<=8),f>>>28||(m+=4,f<<=4),f>>>30||(m+=2,f<<=2),m-=f>>>31,m}static toHexString(f){return f.toString(16)}static toBinaryString(f){return String(parseInt(String(f),2))}static bitCount(f){return f=f-(f>>>1&1431655765),f=(f&858993459)+(f>>>2&858993459),f=f+(f>>>4)&252645135,f=f+(f>>>8),f=f+(f>>>16),f&63}static truncDivision(f,m){return Math.trunc(f/m)}static parseInt(f,m=void 0){return parseInt(f,m)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class R{constructor(f,m){f===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=f,m==null?this.bits=R.makeArray(f):this.bits=m)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(f){if(f>this.bits.length*32){const m=R.makeArray(f);w.arraycopy(this.bits,0,m,0,this.bits.length),this.bits=m}}get(f){return(this.bits[Math.floor(f/32)]&1<<(f&31))!==0}set(f){this.bits[Math.floor(f/32)]|=1<<(f&31)}flip(f){this.bits[Math.floor(f/32)]^=1<<(f&31)}getNextSet(f){const m=this.size;if(f>=m)return m;const x=this.bits;let v=Math.floor(f/32),y=x[v];y&=~((1<<(f&31))-1);const E=x.length;for(;y===0;){if(++v===E)return m;y=x[v]}const k=v*32+T.numberOfTrailingZeros(y);return k>m?m:k}getNextUnset(f){const m=this.size;if(f>=m)return m;const x=this.bits;let v=Math.floor(f/32),y=~x[v];y&=~((1<<(f&31))-1);const E=x.length;for(;y===0;){if(++v===E)return m;y=~x[v]}const k=v*32+T.numberOfTrailingZeros(y);return k>m?m:k}setBulk(f,m){this.bits[Math.floor(f/32)]=m}setRange(f,m){if(m<f||f<0||m>this.size)throw new h;if(m===f)return;m--;const x=Math.floor(f/32),v=Math.floor(m/32),y=this.bits;for(let E=x;E<=v;E++){const k=E>x?0:f&31,H=(2<<(E<v?31:m&31))-(1<<k);y[E]|=H}}clear(){const f=this.bits.length,m=this.bits;for(let x=0;x<f;x++)m[x]=0}isRange(f,m,x){if(m<f||f<0||m>this.size)throw new h;if(m===f)return!0;m--;const v=Math.floor(f/32),y=Math.floor(m/32),E=this.bits;for(let k=v;k<=y;k++){const L=k>v?0:f&31,Q=(2<<(k<y?31:m&31))-(1<<L)&4294967295;if((E[k]&Q)!==(x?Q:0))return!1}return!0}appendBit(f){this.ensureCapacity(this.size+1),f&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(f,m){if(m<0||m>32)throw new h("Num bits must be between 0 and 32");this.ensureCapacity(this.size+m);for(let x=m;x>0;x--)this.appendBit((f>>x-1&1)===1)}appendBitArray(f){const m=f.size;this.ensureCapacity(this.size+m);for(let x=0;x<m;x++)this.appendBit(f.get(x))}xor(f){if(this.size!==f.size)throw new h("Sizes don't match");const m=this.bits;for(let x=0,v=m.length;x<v;x++)m[x]^=f.bits[x]}toBytes(f,m,x,v){for(let y=0;y<v;y++){let E=0;for(let k=0;k<8;k++)this.get(f)&&(E|=1<<7-k),f++;m[x+y]=E}}getBitArray(){return this.bits}reverse(){const f=new Int32Array(this.bits.length),m=Math.floor((this.size-1)/32),x=m+1,v=this.bits;for(let y=0;y<x;y++){let E=v[y];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,f[m-y]=E}if(this.size!==x*32){const y=x*32-this.size;let E=f[0]>>>y;for(let k=1;k<x;k++){const L=f[k];E|=L<<32-y,f[k-1]=E,E=L>>>y}f[x-1]=E}this.bits=f}static makeArray(f){return new Int32Array(Math.floor((f+31)/32))}equals(f){if(!(f instanceof R))return!1;const m=f;return this.size===m.size&&S.equals(this.bits,m.bits)}hashCode(){return 31*this.size+S.hashCode(this.bits)}toString(){let f="";for(let m=0,x=this.size;m<x;m++)m&7||(f+=" "),f+=this.get(m)?"X":".";return f}clone(){return new R(this.size,this.bits.slice())}}var z;(function(oe){oe[oe.OTHER=0]="OTHER",oe[oe.PURE_BARCODE=1]="PURE_BARCODE",oe[oe.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",oe[oe.TRY_HARDER=3]="TRY_HARDER",oe[oe.CHARACTER_SET=4]="CHARACTER_SET",oe[oe.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",oe[oe.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",oe[oe.ASSUME_GS1=7]="ASSUME_GS1",oe[oe.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",oe[oe.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",oe[oe.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(z||(z={}));var G=z;class O extends u{static getFormatInstance(){return new O}}O.kind="FormatException";var D;(function(oe){oe[oe.Cp437=0]="Cp437",oe[oe.ISO8859_1=1]="ISO8859_1",oe[oe.ISO8859_2=2]="ISO8859_2",oe[oe.ISO8859_3=3]="ISO8859_3",oe[oe.ISO8859_4=4]="ISO8859_4",oe[oe.ISO8859_5=5]="ISO8859_5",oe[oe.ISO8859_6=6]="ISO8859_6",oe[oe.ISO8859_7=7]="ISO8859_7",oe[oe.ISO8859_8=8]="ISO8859_8",oe[oe.ISO8859_9=9]="ISO8859_9",oe[oe.ISO8859_10=10]="ISO8859_10",oe[oe.ISO8859_11=11]="ISO8859_11",oe[oe.ISO8859_13=12]="ISO8859_13",oe[oe.ISO8859_14=13]="ISO8859_14",oe[oe.ISO8859_15=14]="ISO8859_15",oe[oe.ISO8859_16=15]="ISO8859_16",oe[oe.SJIS=16]="SJIS",oe[oe.Cp1250=17]="Cp1250",oe[oe.Cp1251=18]="Cp1251",oe[oe.Cp1252=19]="Cp1252",oe[oe.Cp1256=20]="Cp1256",oe[oe.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",oe[oe.UTF8=22]="UTF8",oe[oe.ASCII=23]="ASCII",oe[oe.Big5=24]="Big5",oe[oe.GB18030=25]="GB18030",oe[oe.EUC_KR=26]="EUC_KR"})(D||(D={}));class I{constructor(f,m,x,...v){this.valueIdentifier=f,this.name=x,typeof m=="number"?this.values=Int32Array.from([m]):this.values=m,this.otherEncodingNames=v,I.VALUE_IDENTIFIER_TO_ECI.set(f,this),I.NAME_TO_ECI.set(x,this);const y=this.values;for(let E=0,k=y.length;E!==k;E++){const L=y[E];I.VALUES_TO_ECI.set(L,this)}for(const E of v)I.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(f){if(f<0||f>=900)throw new O("incorect value");const m=I.VALUES_TO_ECI.get(f);if(m===void 0)throw new O("incorect value");return m}static getCharacterSetECIByName(f){const m=I.NAME_TO_ECI.get(f);if(m===void 0)throw new O("incorect value");return m}equals(f){if(!(f instanceof I))return!1;const m=f;return this.getName()===m.getName()}}I.VALUE_IDENTIFIER_TO_ECI=new Map,I.VALUES_TO_ECI=new Map,I.NAME_TO_ECI=new Map,I.Cp437=new I(D.Cp437,Int32Array.from([0,2]),"Cp437"),I.ISO8859_1=new I(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),I.ISO8859_2=new I(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),I.ISO8859_3=new I(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),I.ISO8859_4=new I(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),I.ISO8859_5=new I(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),I.ISO8859_6=new I(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),I.ISO8859_7=new I(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),I.ISO8859_8=new I(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),I.ISO8859_9=new I(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),I.ISO8859_10=new I(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),I.ISO8859_11=new I(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),I.ISO8859_13=new I(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),I.ISO8859_14=new I(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),I.ISO8859_15=new I(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),I.ISO8859_16=new I(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),I.SJIS=new I(D.SJIS,20,"SJIS","Shift_JIS"),I.Cp1250=new I(D.Cp1250,21,"Cp1250","windows-1250"),I.Cp1251=new I(D.Cp1251,22,"Cp1251","windows-1251"),I.Cp1252=new I(D.Cp1252,23,"Cp1252","windows-1252"),I.Cp1256=new I(D.Cp1256,24,"Cp1256","windows-1256"),I.UnicodeBigUnmarked=new I(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),I.UTF8=new I(D.UTF8,26,"UTF8","UTF-8"),I.ASCII=new I(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),I.Big5=new I(D.Big5,28,"Big5"),I.GB18030=new I(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),I.EUC_KR=new I(D.EUC_KR,30,"EUC_KR","EUC-KR");class V extends u{}V.kind="UnsupportedOperationException";class P{static decode(f,m){const x=this.encodingName(m);return this.customDecoder?this.customDecoder(f,x):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(x)?this.decodeFallback(f,x):new TextDecoder(x).decode(f)}static shouldDecodeOnFallback(f){return!P.isBrowser()&&f==="ISO-8859-1"}static encode(f,m){const x=this.encodingName(m);return this.customEncoder?this.customEncoder(f,x):typeof TextEncoder>"u"?this.encodeFallback(f):new TextEncoder().encode(f)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(f){return typeof f=="string"?f:f.getName()}static encodingCharacterSet(f){return f instanceof I?f:I.getCharacterSetECIByName(f)}static decodeFallback(f,m){const x=this.encodingCharacterSet(m);if(P.isDecodeFallbackSupported(x)){let v="";for(let y=0,E=f.length;y<E;y++){let k=f[y].toString(16);k.length<2&&(k="0"+k),v+="%"+k}return decodeURIComponent(v)}if(x.equals(I.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(f.buffer));throw new V(`Encoding ${this.encodingName(m)} not supported by fallback.`)}static isDecodeFallbackSupported(f){return f.equals(I.UTF8)||f.equals(I.ISO8859_1)||f.equals(I.ASCII)}static encodeFallback(f){const x=btoa(unescape(encodeURIComponent(f))).split(""),v=[];for(let y=0;y<x.length;y++)v.push(x[y].charCodeAt(0));return new Uint8Array(v)}}class B{static castAsNonUtf8Char(f,m=null){const x=m?m.getName():this.ISO88591;return P.decode(new Uint8Array([f]),x)}static guessEncoding(f,m){if(m!=null&&m.get(G.CHARACTER_SET)!==void 0)return m.get(G.CHARACTER_SET).toString();const x=f.length;let v=!0,y=!0,E=!0,k=0,L=0,H=0,Q=0,le=0,fe=0,Re=0,$e=0,We=0,ot=0,Nt=0;const Bt=f.length>3&&f[0]===239&&f[1]===187&&f[2]===191;for(let Kt=0;Kt<x&&(v||y||E);Kt++){const $t=f[Kt]&255;E&&(k>0?$t&128?k--:E=!1:$t&128&&($t&64?(k++,$t&32?(k++,$t&16?(k++,$t&8?E=!1:Q++):H++):L++):E=!1)),v&&($t>127&&$t<160?v=!1:$t>159&&($t<192||$t===215||$t===247)&&Nt++),y&&(le>0?$t<64||$t===127||$t>252?y=!1:le--:$t===128||$t===160||$t>239?y=!1:$t>160&&$t<224?(fe++,$e=0,Re++,Re>We&&(We=Re)):$t>127?(le++,Re=0,$e++,$e>ot&&(ot=$e)):(Re=0,$e=0))}return E&&k>0&&(E=!1),y&&le>0&&(y=!1),E&&(Bt||L+H+Q>0)?B.UTF8:y&&(B.ASSUME_SHIFT_JIS||We>=3||ot>=3)?B.SHIFT_JIS:v&&y?We===2&&fe===2||Nt*10>=x?B.SHIFT_JIS:B.ISO88591:v?B.ISO88591:y?B.SHIFT_JIS:E?B.UTF8:B.PLATFORM_DEFAULT_ENCODING}static format(f,...m){let x=-1;function v(E,k,L,H,Q,le){if(E==="%%")return"%";if(m[++x]===void 0)return;E=H?parseInt(H.substr(1)):void 0;let fe=Q?parseInt(Q.substr(1)):void 0,Re;switch(le){case"s":Re=m[x];break;case"c":Re=m[x][0];break;case"f":Re=parseFloat(m[x]).toFixed(E);break;case"p":Re=parseFloat(m[x]).toPrecision(E);break;case"e":Re=parseFloat(m[x]).toExponential(E);break;case"x":Re=parseInt(m[x]).toString(fe||16);break;case"d":Re=parseFloat(parseInt(m[x],fe||10).toPrecision(E)).toFixed(0);break}Re=typeof Re=="object"?JSON.stringify(Re):(+Re).toString(fe);let $e=parseInt(L),We=L&&L[0]+""=="0"?"0":" ";for(;Re.length<$e;)Re=k!==void 0?Re+We:We+Re;return Re}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return f.replace(y,v)}static getBytes(f,m){return P.encode(f,m)}static getCharCode(f,m=0){return f.charCodeAt(m)}static getCharAt(f){return String.fromCharCode(f)}}B.SHIFT_JIS=I.SJIS.getName(),B.GB2312="GB2312",B.ISO88591=I.ISO8859_1.getName(),B.EUC_JP="EUC_JP",B.UTF8=I.UTF8.getName(),B.PLATFORM_DEFAULT_ENCODING=B.UTF8,B.ASSUME_SHIFT_JIS=!1;class F{constructor(f=""){this.value=f}enableDecoding(f){return this.encoding=f,this}append(f){return typeof f=="string"?this.value+=f.toString():this.encoding?this.value+=B.castAsNonUtf8Char(f,this.encoding):this.value+=String.fromCharCode(f),this}appendChars(f,m,x){for(let v=m;m<m+x;v++)this.append(f[v]);return this}length(){return this.value.length}charAt(f){return this.value.charAt(f)}deleteCharAt(f){this.value=this.value.substr(0,f)+this.value.substring(f+1)}setCharAt(f,m){this.value=this.value.substr(0,f)+m+this.value.substr(f+1)}substring(f,m){return this.value.substring(f,m)}setLengthToZero(){this.value=""}toString(){return this.value}insert(f,m){this.value=this.value.substr(0,f)+m+this.value.substr(f+m.length)}}class ee{constructor(f,m,x,v){if(this.width=f,this.height=m,this.rowSize=x,this.bits=v,m==null&&(m=f),this.height=m,f<1||m<1)throw new h("Both dimensions must be greater than 0");x==null&&(x=Math.floor((f+31)/32)),this.rowSize=x,v==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(f){const m=f.length,x=f[0].length,v=new ee(x,m);for(let y=0;y<m;y++){const E=f[y];for(let k=0;k<x;k++)E[k]&&v.set(k,y)}return v}static parseFromString(f,m,x){if(f===null)throw new h("stringRepresentation cannot be null");const v=new Array(f.length);let y=0,E=0,k=-1,L=0,H=0;for(;H<f.length;)if(f.charAt(H)===`
`||f.charAt(H)==="\r"){if(y>E){if(k===-1)k=y-E;else if(y-E!==k)throw new h("row lengths do not match");E=y,L++}H++}else if(f.substring(H,H+m.length)===m)H+=m.length,v[y]=!0,y++;else if(f.substring(H,H+x.length)===x)H+=x.length,v[y]=!1,y++;else throw new h("illegal character encountered: "+f.substring(H));if(y>E){if(k===-1)k=y-E;else if(y-E!==k)throw new h("row lengths do not match");L++}const Q=new ee(k,L);for(let le=0;le<y;le++)v[le]&&Q.set(Math.floor(le%k),Math.floor(le/k));return Q}get(f,m){const x=m*this.rowSize+Math.floor(f/32);return(this.bits[x]>>>(f&31)&1)!==0}set(f,m){const x=m*this.rowSize+Math.floor(f/32);this.bits[x]|=1<<(f&31)&4294967295}unset(f,m){const x=m*this.rowSize+Math.floor(f/32);this.bits[x]&=~(1<<(f&31)&4294967295)}flip(f,m){const x=m*this.rowSize+Math.floor(f/32);this.bits[x]^=1<<(f&31)&4294967295}xor(f){if(this.width!==f.getWidth()||this.height!==f.getHeight()||this.rowSize!==f.getRowSize())throw new h("input matrix dimensions do not match");const m=new R(Math.floor(this.width/32)+1),x=this.rowSize,v=this.bits;for(let y=0,E=this.height;y<E;y++){const k=y*x,L=f.getRow(y,m).getBitArray();for(let H=0;H<x;H++)v[k+H]^=L[H]}}clear(){const f=this.bits,m=f.length;for(let x=0;x<m;x++)f[x]=0}setRegion(f,m,x,v){if(m<0||f<0)throw new h("Left and top must be nonnegative");if(v<1||x<1)throw new h("Height and width must be at least 1");const y=f+x,E=m+v;if(E>this.height||y>this.width)throw new h("The region must fit inside the matrix");const k=this.rowSize,L=this.bits;for(let H=m;H<E;H++){const Q=H*k;for(let le=f;le<y;le++)L[Q+Math.floor(le/32)]|=1<<(le&31)&4294967295}}getRow(f,m){m==null||m.getSize()<this.width?m=new R(this.width):m.clear();const x=this.rowSize,v=this.bits,y=f*x;for(let E=0;E<x;E++)m.setBulk(E*32,v[y+E]);return m}setRow(f,m){w.arraycopy(m.getBitArray(),0,this.bits,f*this.rowSize,this.rowSize)}rotate180(){const f=this.getWidth(),m=this.getHeight();let x=new R(f),v=new R(f);for(let y=0,E=Math.floor((m+1)/2);y<E;y++)x=this.getRow(y,x),v=this.getRow(m-1-y,v),x.reverse(),v.reverse(),this.setRow(y,v),this.setRow(m-1-y,x)}getEnclosingRectangle(){const f=this.width,m=this.height,x=this.rowSize,v=this.bits;let y=f,E=m,k=-1,L=-1;for(let H=0;H<m;H++)for(let Q=0;Q<x;Q++){const le=v[H*x+Q];if(le!==0){if(H<E&&(E=H),H>L&&(L=H),Q*32<y){let fe=0;for(;!(le<<31-fe&4294967295);)fe++;Q*32+fe<y&&(y=Q*32+fe)}if(Q*32+31>k){let fe=31;for(;!(le>>>fe);)fe--;Q*32+fe>k&&(k=Q*32+fe)}}}return k<y||L<E?null:Int32Array.from([y,E,k-y+1,L-E+1])}getTopLeftOnBit(){const f=this.rowSize,m=this.bits;let x=0;for(;x<m.length&&m[x]===0;)x++;if(x===m.length)return null;const v=x/f;let y=x%f*32;const E=m[x];let k=0;for(;!(E<<31-k&4294967295);)k++;return y+=k,Int32Array.from([y,v])}getBottomRightOnBit(){const f=this.rowSize,m=this.bits;let x=m.length-1;for(;x>=0&&m[x]===0;)x--;if(x<0)return null;const v=Math.floor(x/f);let y=Math.floor(x%f)*32;const E=m[x];let k=31;for(;!(E>>>k);)k--;return y+=k,Int32Array.from([y,v])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(f){if(!(f instanceof ee))return!1;const m=f;return this.width===m.width&&this.height===m.height&&this.rowSize===m.rowSize&&S.equals(this.bits,m.bits)}hashCode(){let f=this.width;return f=31*f+this.width,f=31*f+this.height,f=31*f+this.rowSize,f=31*f+S.hashCode(this.bits),f}toString(f="X ",m="  ",x=`
`){return this.buildToString(f,m,x)}buildToString(f,m,x){let v=new F;for(let y=0,E=this.height;y<E;y++){for(let k=0,L=this.width;k<L;k++)v.append(this.get(k,y)?f:m);v.append(x)}return v.toString()}clone(){return new ee(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends u{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class ce extends b{constructor(f){super(f),this.luminances=ce.EMPTY,this.buckets=new Int32Array(ce.LUMINANCE_BUCKETS)}getBlackRow(f,m){const x=this.getLuminanceSource(),v=x.getWidth();m==null||m.getSize()<v?m=new R(v):m.clear(),this.initArrays(v);const y=x.getRow(f,this.luminances),E=this.buckets;for(let L=0;L<v;L++)E[(y[L]&255)>>ce.LUMINANCE_SHIFT]++;const k=ce.estimateBlackPoint(E);if(v<3)for(let L=0;L<v;L++)(y[L]&255)<k&&m.set(L);else{let L=y[0]&255,H=y[1]&255;for(let Q=1;Q<v-1;Q++){const le=y[Q+1]&255;(H*4-L-le)/2<k&&m.set(Q),L=H,H=le}}return m}getBlackMatrix(){const f=this.getLuminanceSource(),m=f.getWidth(),x=f.getHeight(),v=new ee(m,x);this.initArrays(m);const y=this.buckets;for(let L=1;L<5;L++){const H=Math.floor(x*L/5),Q=f.getRow(H,this.luminances),le=Math.floor(m*4/5);for(let fe=Math.floor(m/5);fe<le;fe++){const Re=Q[fe]&255;y[Re>>ce.LUMINANCE_SHIFT]++}}const E=ce.estimateBlackPoint(y),k=f.getMatrix();for(let L=0;L<x;L++){const H=L*m;for(let Q=0;Q<m;Q++)(k[H+Q]&255)<E&&v.set(Q,L)}return v}createBinarizer(f){return new ce(f)}initArrays(f){this.luminances.length<f&&(this.luminances=new Uint8ClampedArray(f));const m=this.buckets;for(let x=0;x<ce.LUMINANCE_BUCKETS;x++)m[x]=0}static estimateBlackPoint(f){const m=f.length;let x=0,v=0,y=0;for(let Q=0;Q<m;Q++)f[Q]>y&&(v=Q,y=f[Q]),f[Q]>x&&(x=f[Q]);let E=0,k=0;for(let Q=0;Q<m;Q++){const le=Q-v,fe=f[Q]*le*le;fe>k&&(E=Q,k=fe)}if(v>E){const Q=v;v=E,E=Q}if(E-v<=m/16)throw new Z;let L=E-1,H=-1;for(let Q=E-1;Q>v;Q--){const le=Q-v,fe=le*le*(E-Q)*(x-f[Q]);fe>H&&(L=Q,H=fe)}return L<<ce.LUMINANCE_SHIFT}}ce.LUMINANCE_BITS=5,ce.LUMINANCE_SHIFT=8-ce.LUMINANCE_BITS,ce.LUMINANCE_BUCKETS=1<<ce.LUMINANCE_BITS,ce.EMPTY=Uint8ClampedArray.from([0]);class ne extends ce{constructor(f){super(f),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const f=this.getLuminanceSource(),m=f.getWidth(),x=f.getHeight();if(m>=ne.MINIMUM_DIMENSION&&x>=ne.MINIMUM_DIMENSION){const v=f.getMatrix();let y=m>>ne.BLOCK_SIZE_POWER;m&ne.BLOCK_SIZE_MASK&&y++;let E=x>>ne.BLOCK_SIZE_POWER;x&ne.BLOCK_SIZE_MASK&&E++;const k=ne.calculateBlackPoints(v,y,E,m,x),L=new ee(m,x);ne.calculateThresholdForBlock(v,y,E,m,x,k,L),this.matrix=L}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(f){return new ne(f)}static calculateThresholdForBlock(f,m,x,v,y,E,k){const L=y-ne.BLOCK_SIZE,H=v-ne.BLOCK_SIZE;for(let Q=0;Q<x;Q++){let le=Q<<ne.BLOCK_SIZE_POWER;le>L&&(le=L);const fe=ne.cap(Q,2,x-3);for(let Re=0;Re<m;Re++){let $e=Re<<ne.BLOCK_SIZE_POWER;$e>H&&($e=H);const We=ne.cap(Re,2,m-3);let ot=0;for(let Bt=-2;Bt<=2;Bt++){const Kt=E[fe+Bt];ot+=Kt[We-2]+Kt[We-1]+Kt[We]+Kt[We+1]+Kt[We+2]}const Nt=ot/25;ne.thresholdBlock(f,$e,le,Nt,v,k)}}}static cap(f,m,x){return f<m?m:f>x?x:f}static thresholdBlock(f,m,x,v,y,E){for(let k=0,L=x*y+m;k<ne.BLOCK_SIZE;k++,L+=y)for(let H=0;H<ne.BLOCK_SIZE;H++)(f[L+H]&255)<=v&&E.set(m+H,x+k)}static calculateBlackPoints(f,m,x,v,y){const E=y-ne.BLOCK_SIZE,k=v-ne.BLOCK_SIZE,L=new Array(x);for(let H=0;H<x;H++){L[H]=new Int32Array(m);let Q=H<<ne.BLOCK_SIZE_POWER;Q>E&&(Q=E);for(let le=0;le<m;le++){let fe=le<<ne.BLOCK_SIZE_POWER;fe>k&&(fe=k);let Re=0,$e=255,We=0;for(let Nt=0,Bt=Q*v+fe;Nt<ne.BLOCK_SIZE;Nt++,Bt+=v){for(let Kt=0;Kt<ne.BLOCK_SIZE;Kt++){const $t=f[Bt+Kt]&255;Re+=$t,$t<$e&&($e=$t),$t>We&&(We=$t)}if(We-$e>ne.MIN_DYNAMIC_RANGE)for(Nt++,Bt+=v;Nt<ne.BLOCK_SIZE;Nt++,Bt+=v)for(let Kt=0;Kt<ne.BLOCK_SIZE;Kt++)Re+=f[Bt+Kt]&255}let ot=Re>>ne.BLOCK_SIZE_POWER*2;if(We-$e<=ne.MIN_DYNAMIC_RANGE&&(ot=$e/2,H>0&&le>0)){const Nt=(L[H-1][le]+2*L[H][le-1]+L[H-1][le-1])/4;$e<Nt&&(ot=Nt)}L[H][le]=ot}}return L}}ne.BLOCK_SIZE_POWER=3,ne.BLOCK_SIZE=1<<ne.BLOCK_SIZE_POWER,ne.BLOCK_SIZE_MASK=ne.BLOCK_SIZE-1,ne.MINIMUM_DIMENSION=ne.BLOCK_SIZE*5,ne.MIN_DYNAMIC_RANGE=24;class ae{constructor(f,m){this.width=f,this.height=m}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(f,m,x,v){throw new V("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new V("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new V("This luminance source does not support rotation by 45 degrees.")}toString(){const f=new Uint8ClampedArray(this.width);let m=new F;for(let x=0;x<this.height;x++){const v=this.getRow(x,f);for(let y=0;y<this.width;y++){const E=v[y]&255;let k;E<64?k="#":E<128?k="+":E<192?k=".":k=" ",m.append(k)}m.append(`
`)}return m.toString()}}class me extends ae{constructor(f){super(f.getWidth(),f.getHeight()),this.delegate=f}getRow(f,m){const x=this.delegate.getRow(f,m),v=this.getWidth();for(let y=0;y<v;y++)x[y]=255-(x[y]&255);return x}getMatrix(){const f=this.delegate.getMatrix(),m=this.getWidth()*this.getHeight(),x=new Uint8ClampedArray(m);for(let v=0;v<m;v++)x[v]=255-(f[v]&255);return x}isCropSupported(){return this.delegate.isCropSupported()}crop(f,m,x,v){return new me(this.delegate.crop(f,m,x,v))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new me(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new me(this.delegate.rotateCounterClockwise45())}}class Te extends ae{constructor(f){super(f.width,f.height),this.canvas=f,this.tempCanvasElement=null,this.buffer=Te.makeBufferFromCanvasImageData(f)}static makeBufferFromCanvasImageData(f){const m=f.getContext("2d").getImageData(0,0,f.width,f.height);return Te.toGrayscaleBuffer(m.data,f.width,f.height)}static toGrayscaleBuffer(f,m,x){const v=new Uint8ClampedArray(m*x);for(let y=0,E=0,k=f.length;y<k;y+=4,E++){let L;if(f[y+3]===0)L=255;else{const Q=f[y],le=f[y+1],fe=f[y+2];L=306*Q+601*le+117*fe+512>>10}v[E]=L}return v}getRow(f,m){if(f<0||f>=this.getHeight())throw new h("Requested row is outside the image: "+f);const x=this.getWidth(),v=f*x;return m===null?m=this.buffer.slice(v,v+x):(m.length<x&&(m=new Uint8ClampedArray(x)),m.set(this.buffer.slice(v,v+x))),m}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(f,m,x,v){return super.crop(f,m,x,v),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const f=this.canvas.ownerDocument.createElement("canvas");f.width=this.canvas.width,f.height=this.canvas.height,this.tempCanvasElement=f}return this.tempCanvasElement}rotate(f){const m=this.getTempCanvasElement(),x=m.getContext("2d"),v=f*Te.DEGREE_TO_RADIANS,y=this.canvas.width,E=this.canvas.height,k=Math.ceil(Math.abs(Math.cos(v))*y+Math.abs(Math.sin(v))*E),L=Math.ceil(Math.abs(Math.sin(v))*y+Math.abs(Math.cos(v))*E);return m.width=k,m.height=L,x.translate(k/2,L/2),x.rotate(v),x.drawImage(this.canvas,y/-2,E/-2),this.buffer=Te.makeBufferFromCanvasImageData(m),this}invert(){return new me(this)}}Te.DEGREE_TO_RADIANS=Math.PI/180;class we{constructor(f,m,x){this.deviceId=f,this.label=m,this.kind="videoinput",this.groupId=x||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var q=(globalThis||Rv||self||window||void 0)&&(globalThis||Rv||self||window||void 0).__awaiter||function(oe,f,m,x){function v(y){return y instanceof m?y:new m(function(E){E(y)})}return new(m||(m=Promise))(function(y,E){function k(Q){try{H(x.next(Q))}catch(le){E(le)}}function L(Q){try{H(x.throw(Q))}catch(le){E(le)}}function H(Q){Q.done?y(Q.value):v(Q.value).then(k,L)}H((x=x.apply(oe,f||[])).next())})};class Y{constructor(f,m=500,x){this.reader=f,this.timeBetweenScansMillis=m,this._hints=x,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(f){this._timeBetweenDecodingAttempts=f<0?0:f}set hints(f){this._hints=f||null}get hints(){return this._hints}listVideoInputDevices(){return q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const f=yield navigator.mediaDevices.enumerateDevices(),m=[];for(const x of f){const v=x.kind==="video"?"videoinput":x.kind;if(v!=="videoinput")continue;const y=x.deviceId||x.id,E=x.label||`Video device ${m.length+1}`,k=x.groupId,L={deviceId:y,label:E,kind:v,groupId:k};m.push(L)}return m})}getVideoInputDevices(){return q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(m=>new we(m.deviceId,m.label))})}findDeviceById(f){return q(this,void 0,void 0,function*(){const m=yield this.listVideoInputDevices();return m?m.find(x=>x.deviceId===f):null})}decodeFromInputVideoDevice(f,m){return q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(f,m)})}decodeOnceFromVideoDevice(f,m){return q(this,void 0,void 0,function*(){this.reset();let x;f?x={deviceId:{exact:f}}:x={facingMode:"environment"};const v={video:x};return yield this.decodeOnceFromConstraints(v,m)})}decodeOnceFromConstraints(f,m){return q(this,void 0,void 0,function*(){const x=yield navigator.mediaDevices.getUserMedia(f);return yield this.decodeOnceFromStream(x,m)})}decodeOnceFromStream(f,m){return q(this,void 0,void 0,function*(){this.reset();const x=yield this.attachStreamToVideo(f,m);return yield this.decodeOnce(x)})}decodeFromInputVideoDeviceContinuously(f,m,x){return q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(f,m,x)})}decodeFromVideoDevice(f,m,x){return q(this,void 0,void 0,function*(){let v;f?v={deviceId:{exact:f}}:v={facingMode:"environment"};const y={video:v};return yield this.decodeFromConstraints(y,m,x)})}decodeFromConstraints(f,m,x){return q(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(f);return yield this.decodeFromStream(v,m,x)})}decodeFromStream(f,m,x){return q(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(f,m);return yield this.decodeContinuously(v,x)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(f,m){return q(this,void 0,void 0,function*(){const x=this.prepareVideoElement(m);return this.addVideoSource(x,f),this.videoElement=x,this.stream=f,yield this.playVideoOnLoadAsync(x),x})}playVideoOnLoadAsync(f){return new Promise((m,x)=>this.playVideoOnLoad(f,()=>m()))}playVideoOnLoad(f,m){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(f),f.addEventListener("ended",this.videoEndedListener),f.addEventListener("canplay",this.videoCanPlayListener),f.addEventListener("playing",m),this.tryPlayVideo(f)}isVideoPlaying(f){return f.currentTime>0&&!f.paused&&!f.ended&&f.readyState>2}tryPlayVideo(f){return q(this,void 0,void 0,function*(){if(this.isVideoPlaying(f)){console.warn("Trying to play video that is already playing.");return}try{yield f.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(f,m){const x=document.getElementById(f);if(!x)throw new d(`element with id '${f}' not found`);if(x.nodeName.toLowerCase()!==m.toLowerCase())throw new d(`element with id '${f}' must be an ${m} element`);return x}decodeFromImage(f,m){if(!f&&!m)throw new d("either imageElement with a src set or an url must be provided");return m&&!f?this.decodeFromImageUrl(m):this.decodeFromImageElement(f)}decodeFromVideo(f,m){if(!f&&!m)throw new d("Either an element with a src set or an URL must be provided");return m&&!f?this.decodeFromVideoUrl(m):this.decodeFromVideoElement(f)}decodeFromVideoContinuously(f,m,x){if(f===void 0&&m===void 0)throw new d("Either an element with a src set or an URL must be provided");return m&&!f?this.decodeFromVideoUrlContinuously(m,x):this.decodeFromVideoElementContinuously(f,x)}decodeFromImageElement(f){if(!f)throw new d("An image element must be provided.");this.reset();const m=this.prepareImageElement(f);this.imageElement=m;let x;return this.isImageLoaded(m)?x=this.decodeOnce(m,!1,!0):x=this._decodeOnLoadImage(m),x}decodeFromVideoElement(f){const m=this._decodeFromVideoElementSetup(f);return this._decodeOnLoadVideo(m)}decodeFromVideoElementContinuously(f,m){const x=this._decodeFromVideoElementSetup(f);return this._decodeOnLoadVideoContinuously(x,m)}_decodeFromVideoElementSetup(f){if(!f)throw new d("A video element must be provided.");this.reset();const m=this.prepareVideoElement(f);return this.videoElement=m,m}decodeFromImageUrl(f){if(!f)throw new d("An URL must be provided.");this.reset();const m=this.prepareImageElement();this.imageElement=m;const x=this._decodeOnLoadImage(m);return m.src=f,x}decodeFromVideoUrl(f){if(!f)throw new d("An URL must be provided.");this.reset();const m=this.prepareVideoElement(),x=this.decodeFromVideoElement(m);return m.src=f,x}decodeFromVideoUrlContinuously(f,m){if(!f)throw new d("An URL must be provided.");this.reset();const x=this.prepareVideoElement(),v=this.decodeFromVideoElementContinuously(x,m);return x.src=f,v}_decodeOnLoadImage(f){return new Promise((m,x)=>{this.imageLoadedListener=()=>this.decodeOnce(f,!1,!0).then(m,x),f.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(f){return q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(f),yield this.decodeOnce(f)})}_decodeOnLoadVideoContinuously(f,m){return q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(f),this.decodeContinuously(f,m)})}isImageLoaded(f){return!(!f.complete||f.naturalWidth===0)}prepareImageElement(f){let m;return typeof f>"u"&&(m=document.createElement("img"),m.width=200,m.height=200),typeof f=="string"&&(m=this.getMediaElement(f,"img")),f instanceof HTMLImageElement&&(m=f),m}prepareVideoElement(f){let m;return!f&&typeof document<"u"&&(m=document.createElement("video"),m.width=200,m.height=200),typeof f=="string"&&(m=this.getMediaElement(f,"video")),f instanceof HTMLVideoElement&&(m=f),m.setAttribute("autoplay","true"),m.setAttribute("muted","true"),m.setAttribute("playsinline","true"),m}decodeOnce(f,m=!0,x=!0){this._stopAsyncDecode=!1;const v=(y,E)=>{if(this._stopAsyncDecode){E(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const k=this.decode(f);y(k)}catch(k){const L=m&&k instanceof Z,Q=(k instanceof g||k instanceof O)&&x;if(L||Q)return setTimeout(v,this._timeBetweenDecodingAttempts,y,E);E(k)}};return new Promise((y,E)=>v(y,E))}decodeContinuously(f,m){this._stopContinuousDecode=!1;const x=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const v=this.decode(f);m(v,null),setTimeout(x,this.timeBetweenScansMillis)}catch(v){m(null,v);const y=v instanceof g||v instanceof O,E=v instanceof Z;(y||E)&&setTimeout(x,this._timeBetweenDecodingAttempts)}};x()}decode(f){const m=this.createBinaryBitmap(f);return this.decodeBitmap(m)}_isHTMLVideoElement(f){return f.videoWidth!==0}drawFrameOnCanvas(f,m,x){m||(m={sx:0,sy:0,sWidth:f.videoWidth,sHeight:f.videoHeight,dx:0,dy:0,dWidth:f.videoWidth,dHeight:f.videoHeight}),x||(x=this.captureCanvasContext),x.drawImage(f,m.sx,m.sy,m.sWidth,m.sHeight,m.dx,m.dy,m.dWidth,m.dHeight)}drawImageOnCanvas(f,m,x=this.captureCanvasContext){m||(m={sx:0,sy:0,sWidth:f.naturalWidth,sHeight:f.naturalHeight,dx:0,dy:0,dWidth:f.naturalWidth,dHeight:f.naturalHeight}),x||(x=this.captureCanvasContext),x.drawImage(f,m.sx,m.sy,m.sWidth,m.sHeight,m.dx,m.dy,m.dWidth,m.dHeight)}createBinaryBitmap(f){this.getCaptureCanvasContext(f),this._isHTMLVideoElement(f)?this.drawFrameOnCanvas(f):this.drawImageOnCanvas(f);const m=this.getCaptureCanvas(f),x=new Te(m),v=new ne(x);return new p(v)}getCaptureCanvasContext(f){if(!this.captureCanvasContext){const x=this.getCaptureCanvas(f).getContext("2d");this.captureCanvasContext=x}return this.captureCanvasContext}getCaptureCanvas(f){if(!this.captureCanvas){const m=this.createCaptureCanvas(f);this.captureCanvas=m}return this.captureCanvas}decodeBitmap(f){return this.reader.decode(f,this._hints)}createCaptureCanvas(f){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const m=document.createElement("canvas");let x,v;return typeof f<"u"&&(f instanceof HTMLVideoElement?(x=f.videoWidth,v=f.videoHeight):f instanceof HTMLImageElement&&(x=f.naturalWidth||f.width,v=f.naturalHeight||f.height)),m.style.width=x+"px",m.style.height=v+"px",m.width=x,m.height=v,m}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(f=>f.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(f,m){try{f.srcObject=m}catch{f.src=URL.createObjectURL(m)}}cleanVideoSource(f){try{f.srcObject=null}catch{f.src=""}this.videoElement.removeAttribute("src")}}class X{constructor(f,m,x=m==null?0:8*m.length,v,y,E=w.currentTimeMillis()){this.text=f,this.rawBytes=m,this.numBits=x,this.resultPoints=v,this.format=y,this.timestamp=E,this.text=f,this.rawBytes=m,x==null?this.numBits=m==null?0:8*m.length:this.numBits=x,this.resultPoints=v,this.format=y,this.resultMetadata=null,E==null?this.timestamp=w.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(f,m){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(f,m)}putAllMetadata(f){f!==null&&(this.resultMetadata===null?this.resultMetadata=f:this.resultMetadata=new Map(f))}addResultPoints(f){const m=this.resultPoints;if(m===null)this.resultPoints=f;else if(f!==null&&f.length>0){const x=new Array(m.length+f.length);w.arraycopy(m,0,x,0,m.length),w.arraycopy(f,0,x,m.length,f.length),this.resultPoints=x}}getTimestamp(){return this.timestamp}toString(){return this.text}}var re;(function(oe){oe[oe.AZTEC=0]="AZTEC",oe[oe.CODABAR=1]="CODABAR",oe[oe.CODE_39=2]="CODE_39",oe[oe.CODE_93=3]="CODE_93",oe[oe.CODE_128=4]="CODE_128",oe[oe.DATA_MATRIX=5]="DATA_MATRIX",oe[oe.EAN_8=6]="EAN_8",oe[oe.EAN_13=7]="EAN_13",oe[oe.ITF=8]="ITF",oe[oe.MAXICODE=9]="MAXICODE",oe[oe.PDF_417=10]="PDF_417",oe[oe.QR_CODE=11]="QR_CODE",oe[oe.RSS_14=12]="RSS_14",oe[oe.RSS_EXPANDED=13]="RSS_EXPANDED",oe[oe.UPC_A=14]="UPC_A",oe[oe.UPC_E=15]="UPC_E",oe[oe.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(re||(re={}));var se=re,Ce;(function(oe){oe[oe.OTHER=0]="OTHER",oe[oe.ORIENTATION=1]="ORIENTATION",oe[oe.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",oe[oe.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",oe[oe.ISSUE_NUMBER=4]="ISSUE_NUMBER",oe[oe.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",oe[oe.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",oe[oe.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",oe[oe.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",oe[oe.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",oe[oe.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ce||(Ce={}));var je=Ce;class pe{constructor(f,m,x,v,y=-1,E=-1){this.rawBytes=f,this.text=m,this.byteSegments=x,this.ecLevel=v,this.structuredAppendSequenceNumber=y,this.structuredAppendParity=E,this.numBits=f==null?0:8*f.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(f){this.numBits=f}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(f){this.errorsCorrected=f}getErasures(){return this.erasures}setErasures(f){this.erasures=f}getOther(){return this.other}setOther(f){this.other=f}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Oe{exp(f){return this.expTable[f]}log(f){if(f===0)throw new h;return this.logTable[f]}static addOrSubtract(f,m){return f^m}}class qe{constructor(f,m){if(m.length===0)throw new h;this.field=f;const x=m.length;if(x>1&&m[0]===0){let v=1;for(;v<x&&m[v]===0;)v++;v===x?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(x-v),w.arraycopy(m,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=m}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(f){return this.coefficients[this.coefficients.length-1-f]}evaluateAt(f){if(f===0)return this.getCoefficient(0);const m=this.coefficients;let x;if(f===1){x=0;for(let E=0,k=m.length;E!==k;E++){const L=m[E];x=Oe.addOrSubtract(x,L)}return x}x=m[0];const v=m.length,y=this.field;for(let E=1;E<v;E++)x=Oe.addOrSubtract(y.multiply(f,x),m[E]);return x}addOrSubtract(f){if(!this.field.equals(f.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero())return f;if(f.isZero())return this;let m=this.coefficients,x=f.coefficients;if(m.length>x.length){const E=m;m=x,x=E}let v=new Int32Array(x.length);const y=x.length-m.length;w.arraycopy(x,0,v,0,y);for(let E=y;E<x.length;E++)v[E]=Oe.addOrSubtract(m[E-y],x[E]);return new qe(this.field,v)}multiply(f){if(!this.field.equals(f.field))throw new h("GenericGFPolys do not have same GenericGF field");if(this.isZero()||f.isZero())return this.field.getZero();const m=this.coefficients,x=m.length,v=f.coefficients,y=v.length,E=new Int32Array(x+y-1),k=this.field;for(let L=0;L<x;L++){const H=m[L];for(let Q=0;Q<y;Q++)E[L+Q]=Oe.addOrSubtract(E[L+Q],k.multiply(H,v[Q]))}return new qe(k,E)}multiplyScalar(f){if(f===0)return this.field.getZero();if(f===1)return this;const m=this.coefficients.length,x=this.field,v=new Int32Array(m),y=this.coefficients;for(let E=0;E<m;E++)v[E]=x.multiply(y[E],f);return new qe(x,v)}multiplyByMonomial(f,m){if(f<0)throw new h;if(m===0)return this.field.getZero();const x=this.coefficients,v=x.length,y=new Int32Array(v+f),E=this.field;for(let k=0;k<v;k++)y[k]=E.multiply(x[k],m);return new qe(E,y)}divide(f){if(!this.field.equals(f.field))throw new h("GenericGFPolys do not have same GenericGF field");if(f.isZero())throw new h("Divide by 0");const m=this.field;let x=m.getZero(),v=this;const y=f.getCoefficient(f.getDegree()),E=m.inverse(y);for(;v.getDegree()>=f.getDegree()&&!v.isZero();){const k=v.getDegree()-f.getDegree(),L=m.multiply(v.getCoefficient(v.getDegree()),E),H=f.multiplyByMonomial(k,L),Q=m.buildMonomial(k,L);x=x.addOrSubtract(Q),v=v.addOrSubtract(H)}return[x,v]}toString(){let f="";for(let m=this.getDegree();m>=0;m--){let x=this.getCoefficient(m);if(x!==0){if(x<0?(f+=" - ",x=-x):f.length>0&&(f+=" + "),m===0||x!==1){const v=this.field.log(x);v===0?f+="1":v===1?f+="a":(f+="a^",f+=v)}m!==0&&(m===1?f+="x":(f+="x^",f+=m))}}return f}}class Ue extends u{}Ue.kind="ArithmeticException";class Me extends Oe{constructor(f,m,x){super(),this.primitive=f,this.size=m,this.generatorBase=x;const v=new Int32Array(m);let y=1;for(let k=0;k<m;k++)v[k]=y,y*=2,y>=m&&(y^=f,y&=m-1);this.expTable=v;const E=new Int32Array(m);for(let k=0;k<m-1;k++)E[v[k]]=k;this.logTable=E,this.zero=new qe(this,Int32Array.from([0])),this.one=new qe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(f,m){if(f<0)throw new h;if(m===0)return this.zero;const x=new Int32Array(f+1);return x[0]=m,new qe(this,x)}inverse(f){if(f===0)throw new Ue;return this.expTable[this.size-this.logTable[f]-1]}multiply(f,m){return f===0||m===0?0:this.expTable[(this.logTable[f]+this.logTable[m])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(f){return f===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class Be extends u{}Be.kind="ReedSolomonException";class ve extends u{}ve.kind="IllegalStateException";class Ht{constructor(f){this.field=f}decode(f,m){const x=this.field,v=new qe(x,f),y=new Int32Array(m);let E=!0;for(let Re=0;Re<m;Re++){const $e=v.evaluateAt(x.exp(Re+x.getGeneratorBase()));y[y.length-1-Re]=$e,$e!==0&&(E=!1)}if(E)return;const k=new qe(x,y),L=this.runEuclideanAlgorithm(x.buildMonomial(m,1),k,m),H=L[0],Q=L[1],le=this.findErrorLocations(H),fe=this.findErrorMagnitudes(Q,le);for(let Re=0;Re<le.length;Re++){const $e=f.length-1-x.log(le[Re]);if($e<0)throw new Be("Bad error location");f[$e]=Me.addOrSubtract(f[$e],fe[Re])}}runEuclideanAlgorithm(f,m,x){if(f.getDegree()<m.getDegree()){const Re=f;f=m,m=Re}const v=this.field;let y=f,E=m,k=v.getZero(),L=v.getOne();for(;E.getDegree()>=(x/2|0);){let Re=y,$e=k;if(y=E,k=L,y.isZero())throw new Be("r_{i-1} was zero");E=Re;let We=v.getZero();const ot=y.getCoefficient(y.getDegree()),Nt=v.inverse(ot);for(;E.getDegree()>=y.getDegree()&&!E.isZero();){const Bt=E.getDegree()-y.getDegree(),Kt=v.multiply(E.getCoefficient(E.getDegree()),Nt);We=We.addOrSubtract(v.buildMonomial(Bt,Kt)),E=E.addOrSubtract(y.multiplyByMonomial(Bt,Kt))}if(L=We.multiply(k).addOrSubtract($e),E.getDegree()>=y.getDegree())throw new ve("Division algorithm failed to reduce polynomial?")}const H=L.getCoefficient(0);if(H===0)throw new Be("sigmaTilde(0) was zero");const Q=v.inverse(H),le=L.multiplyScalar(Q),fe=E.multiplyScalar(Q);return[le,fe]}findErrorLocations(f){const m=f.getDegree();if(m===1)return Int32Array.from([f.getCoefficient(1)]);const x=new Int32Array(m);let v=0;const y=this.field;for(let E=1;E<y.getSize()&&v<m;E++)f.evaluateAt(E)===0&&(x[v]=y.inverse(E),v++);if(v!==m)throw new Be("Error locator degree does not match number of roots");return x}findErrorMagnitudes(f,m){const x=m.length,v=new Int32Array(x),y=this.field;for(let E=0;E<x;E++){const k=y.inverse(m[E]);let L=1;for(let H=0;H<x;H++)if(E!==H){const Q=y.multiply(m[H],k),le=Q&1?Q&-2:Q|1;L=y.multiply(L,le)}v[E]=y.multiply(f.evaluateAt(k),y.inverse(L)),y.getGeneratorBase()!==0&&(v[E]=y.multiply(v[E],k))}return v}}var mt;(function(oe){oe[oe.UPPER=0]="UPPER",oe[oe.LOWER=1]="LOWER",oe[oe.MIXED=2]="MIXED",oe[oe.DIGIT=3]="DIGIT",oe[oe.PUNCT=4]="PUNCT",oe[oe.BINARY=5]="BINARY"})(mt||(mt={}));class Ut{decode(f){this.ddata=f;let m=f.getBits(),x=this.extractBits(m),v=this.correctBits(x),y=Ut.convertBoolArrayToByteArray(v),E=Ut.getEncodedData(v),k=new pe(y,E,null,null);return k.setNumBits(v.length),k}static highLevelDecode(f){return this.getEncodedData(f)}static getEncodedData(f){let m=f.length,x=mt.UPPER,v=mt.UPPER,y="",E=0;for(;E<m;)if(v===mt.BINARY){if(m-E<5)break;let k=Ut.readCode(f,E,5);if(E+=5,k===0){if(m-E<11)break;k=Ut.readCode(f,E,11)+31,E+=11}for(let L=0;L<k;L++){if(m-E<8){E=m;break}const H=Ut.readCode(f,E,8);y+=B.castAsNonUtf8Char(H),E+=8}v=x}else{let k=v===mt.DIGIT?4:5;if(m-E<k)break;let L=Ut.readCode(f,E,k);E+=k;let H=Ut.getCharacter(v,L);H.startsWith("CTRL_")?(x=v,v=Ut.getTable(H.charAt(5)),H.charAt(6)==="L"&&(x=v)):(y+=H,v=x)}return y}static getTable(f){switch(f){case"L":return mt.LOWER;case"P":return mt.PUNCT;case"M":return mt.MIXED;case"D":return mt.DIGIT;case"B":return mt.BINARY;case"U":default:return mt.UPPER}}static getCharacter(f,m){switch(f){case mt.UPPER:return Ut.UPPER_TABLE[m];case mt.LOWER:return Ut.LOWER_TABLE[m];case mt.MIXED:return Ut.MIXED_TABLE[m];case mt.PUNCT:return Ut.PUNCT_TABLE[m];case mt.DIGIT:return Ut.DIGIT_TABLE[m];default:throw new ve("Bad table")}}correctBits(f){let m,x;this.ddata.getNbLayers()<=2?(x=6,m=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(x=8,m=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(x=10,m=Me.AZTEC_DATA_10):(x=12,m=Me.AZTEC_DATA_12);let v=this.ddata.getNbDatablocks(),y=f.length/x;if(y<v)throw new O;let E=f.length%x,k=new Int32Array(y);for(let fe=0;fe<y;fe++,E+=x)k[fe]=Ut.readCode(f,E,x);try{new Ht(m).decode(k,y-v)}catch(fe){throw new O(fe)}let L=(1<<x)-1,H=0;for(let fe=0;fe<v;fe++){let Re=k[fe];if(Re===0||Re===L)throw new O;(Re===1||Re===L-1)&&H++}let Q=new Array(v*x-H),le=0;for(let fe=0;fe<v;fe++){let Re=k[fe];if(Re===1||Re===L-1)Q.fill(Re>1,le,le+x-1),le+=x-1;else for(let $e=x-1;$e>=0;--$e)Q[le++]=(Re&1<<$e)!==0}return Q}extractBits(f){let m=this.ddata.isCompact(),x=this.ddata.getNbLayers(),v=(m?11:14)+x*4,y=new Int32Array(v),E=new Array(this.totalBitsInLayer(x,m));if(m)for(let k=0;k<y.length;k++)y[k]=k;else{let k=v+1+2*T.truncDivision(T.truncDivision(v,2)-1,15),L=v/2,H=T.truncDivision(k,2);for(let Q=0;Q<L;Q++){let le=Q+T.truncDivision(Q,15);y[L-Q-1]=H-le-1,y[L+Q]=H+le+1}}for(let k=0,L=0;k<x;k++){let H=(x-k)*4+(m?9:12),Q=k*2,le=v-1-Q;for(let fe=0;fe<H;fe++){let Re=fe*2;for(let $e=0;$e<2;$e++)E[L+Re+$e]=f.get(y[Q+$e],y[Q+fe]),E[L+2*H+Re+$e]=f.get(y[Q+fe],y[le-$e]),E[L+4*H+Re+$e]=f.get(y[le-$e],y[le-fe]),E[L+6*H+Re+$e]=f.get(y[le-fe],y[Q+$e])}L+=H*8}return E}static readCode(f,m,x){let v=0;for(let y=m;y<m+x;y++)v<<=1,f[y]&&(v|=1);return v}static readByte(f,m){let x=f.length-m;return x>=8?Ut.readCode(f,m,8):Ut.readCode(f,m,x)<<8-x}static convertBoolArrayToByteArray(f){let m=new Uint8Array((f.length+7)/8);for(let x=0;x<m.length;x++)m[x]=Ut.readByte(f,8*x);return m}totalBitsInLayer(f,m){return((m?88:112)+16*f)*f}}Ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(f){return f===NaN?0:f<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:f>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:f+(f<0?-.5:.5)|0}static distance(f,m,x,v){const y=f-x,E=m-v;return Math.sqrt(y*y+E*E)}static sum(f){let m=0;for(let x=0,v=f.length;x!==v;x++){const y=f[x];m+=y}return m}}class er{static floatToIntBits(f){return f}}er.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ve{constructor(f,m){this.x=f,this.y=m}getX(){return this.x}getY(){return this.y}equals(f){if(f instanceof Ve){const m=f;return this.x===m.x&&this.y===m.y}return!1}hashCode(){return 31*er.floatToIntBits(this.x)+er.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(f){const m=this.distance(f[0],f[1]),x=this.distance(f[1],f[2]),v=this.distance(f[0],f[2]);let y,E,k;if(x>=m&&x>=v?(E=f[0],y=f[1],k=f[2]):v>=x&&v>=m?(E=f[1],y=f[0],k=f[2]):(E=f[2],y=f[0],k=f[1]),this.crossProductZ(y,E,k)<0){const L=y;y=k,k=L}f[0]=y,f[1]=E,f[2]=k}static distance(f,m){return et.distance(f.x,f.y,m.x,m.y)}static crossProductZ(f,m,x){const v=m.x,y=m.y;return(x.x-v)*(f.y-y)-(x.y-y)*(f.x-v)}}class zt{constructor(f,m){this.bits=f,this.points=m}getBits(){return this.bits}getPoints(){return this.points}}class Wt extends zt{constructor(f,m,x,v,y){super(f,m),this.compact=x,this.nbDatablocks=v,this.nbLayers=y}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Yt{constructor(f,m,x,v){this.image=f,this.height=f.getHeight(),this.width=f.getWidth(),m==null&&(m=Yt.INIT_SIZE),x==null&&(x=f.getWidth()/2|0),v==null&&(v=f.getHeight()/2|0);const y=m/2|0;if(this.leftInit=x-y,this.rightInit=x+y,this.upInit=v-y,this.downInit=v+y,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let f=this.leftInit,m=this.rightInit,x=this.upInit,v=this.downInit,y=!1,E=!0,k=!1,L=!1,H=!1,Q=!1,le=!1;const fe=this.width,Re=this.height;for(;E;){E=!1;let $e=!0;for(;($e||!L)&&m<fe;)$e=this.containsBlackPoint(x,v,m,!1),$e?(m++,E=!0,L=!0):L||m++;if(m>=fe){y=!0;break}let We=!0;for(;(We||!H)&&v<Re;)We=this.containsBlackPoint(f,m,v,!0),We?(v++,E=!0,H=!0):H||v++;if(v>=Re){y=!0;break}let ot=!0;for(;(ot||!Q)&&f>=0;)ot=this.containsBlackPoint(x,v,f,!1),ot?(f--,E=!0,Q=!0):Q||f--;if(f<0){y=!0;break}let Nt=!0;for(;(Nt||!le)&&x>=0;)Nt=this.containsBlackPoint(f,m,x,!0),Nt?(x--,E=!0,le=!0):le||x--;if(x<0){y=!0;break}E&&(k=!0)}if(!y&&k){const $e=m-f;let We=null;for(let Kt=1;We===null&&Kt<$e;Kt++)We=this.getBlackPointOnSegment(f,v-Kt,f+Kt,v);if(We==null)throw new Z;let ot=null;for(let Kt=1;ot===null&&Kt<$e;Kt++)ot=this.getBlackPointOnSegment(f,x+Kt,f+Kt,x);if(ot==null)throw new Z;let Nt=null;for(let Kt=1;Nt===null&&Kt<$e;Kt++)Nt=this.getBlackPointOnSegment(m,x+Kt,m-Kt,x);if(Nt==null)throw new Z;let Bt=null;for(let Kt=1;Bt===null&&Kt<$e;Kt++)Bt=this.getBlackPointOnSegment(m,v-Kt,m-Kt,v);if(Bt==null)throw new Z;return this.centerEdges(Bt,We,Nt,ot)}else throw new Z}getBlackPointOnSegment(f,m,x,v){const y=et.round(et.distance(f,m,x,v)),E=(x-f)/y,k=(v-m)/y,L=this.image;for(let H=0;H<y;H++){const Q=et.round(f+H*E),le=et.round(m+H*k);if(L.get(Q,le))return new Ve(Q,le)}return null}centerEdges(f,m,x,v){const y=f.getX(),E=f.getY(),k=m.getX(),L=m.getY(),H=x.getX(),Q=x.getY(),le=v.getX(),fe=v.getY(),Re=Yt.CORR;return y<this.width/2?[new Ve(le-Re,fe+Re),new Ve(k+Re,L+Re),new Ve(H-Re,Q-Re),new Ve(y+Re,E-Re)]:[new Ve(le+Re,fe+Re),new Ve(k+Re,L-Re),new Ve(H-Re,Q+Re),new Ve(y-Re,E-Re)]}containsBlackPoint(f,m,x,v){const y=this.image;if(v){for(let E=f;E<=m;E++)if(y.get(E,x))return!0}else for(let E=f;E<=m;E++)if(y.get(x,E))return!0;return!1}}Yt.INIT_SIZE=10,Yt.CORR=1;class ar{static checkAndNudgePoints(f,m){const x=f.getWidth(),v=f.getHeight();let y=!0;for(let E=0;E<m.length&&y;E+=2){const k=Math.floor(m[E]),L=Math.floor(m[E+1]);if(k<-1||k>x||L<-1||L>v)throw new Z;y=!1,k===-1?(m[E]=0,y=!0):k===x&&(m[E]=x-1,y=!0),L===-1?(m[E+1]=0,y=!0):L===v&&(m[E+1]=v-1,y=!0)}y=!0;for(let E=m.length-2;E>=0&&y;E-=2){const k=Math.floor(m[E]),L=Math.floor(m[E+1]);if(k<-1||k>x||L<-1||L>v)throw new Z;y=!1,k===-1?(m[E]=0,y=!0):k===x&&(m[E]=x-1,y=!0),L===-1?(m[E+1]=0,y=!0):L===v&&(m[E+1]=v-1,y=!0)}}}class Xe{constructor(f,m,x,v,y,E,k,L,H){this.a11=f,this.a21=m,this.a31=x,this.a12=v,this.a22=y,this.a32=E,this.a13=k,this.a23=L,this.a33=H}static quadrilateralToQuadrilateral(f,m,x,v,y,E,k,L,H,Q,le,fe,Re,$e,We,ot){const Nt=Xe.quadrilateralToSquare(f,m,x,v,y,E,k,L);return Xe.squareToQuadrilateral(H,Q,le,fe,Re,$e,We,ot).times(Nt)}transformPoints(f){const m=f.length,x=this.a11,v=this.a12,y=this.a13,E=this.a21,k=this.a22,L=this.a23,H=this.a31,Q=this.a32,le=this.a33;for(let fe=0;fe<m;fe+=2){const Re=f[fe],$e=f[fe+1],We=y*Re+L*$e+le;f[fe]=(x*Re+E*$e+H)/We,f[fe+1]=(v*Re+k*$e+Q)/We}}transformPointsWithValues(f,m){const x=this.a11,v=this.a12,y=this.a13,E=this.a21,k=this.a22,L=this.a23,H=this.a31,Q=this.a32,le=this.a33,fe=f.length;for(let Re=0;Re<fe;Re++){const $e=f[Re],We=m[Re],ot=y*$e+L*We+le;f[Re]=(x*$e+E*We+H)/ot,m[Re]=(v*$e+k*We+Q)/ot}}static squareToQuadrilateral(f,m,x,v,y,E,k,L){const H=f-x+y-k,Q=m-v+E-L;if(H===0&&Q===0)return new Xe(x-f,y-x,f,v-m,E-v,m,0,0,1);{const le=x-y,fe=k-y,Re=v-E,$e=L-E,We=le*$e-fe*Re,ot=(H*$e-fe*Q)/We,Nt=(le*Q-H*Re)/We;return new Xe(x-f+ot*x,k-f+Nt*k,f,v-m+ot*v,L-m+Nt*L,m,ot,Nt,1)}}static quadrilateralToSquare(f,m,x,v,y,E,k,L){return Xe.squareToQuadrilateral(f,m,x,v,y,E,k,L).buildAdjoint()}buildAdjoint(){return new Xe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(f){return new Xe(this.a11*f.a11+this.a21*f.a12+this.a31*f.a13,this.a11*f.a21+this.a21*f.a22+this.a31*f.a23,this.a11*f.a31+this.a21*f.a32+this.a31*f.a33,this.a12*f.a11+this.a22*f.a12+this.a32*f.a13,this.a12*f.a21+this.a22*f.a22+this.a32*f.a23,this.a12*f.a31+this.a22*f.a32+this.a32*f.a33,this.a13*f.a11+this.a23*f.a12+this.a33*f.a13,this.a13*f.a21+this.a23*f.a22+this.a33*f.a23,this.a13*f.a31+this.a23*f.a32+this.a33*f.a33)}}class qt extends ar{sampleGrid(f,m,x,v,y,E,k,L,H,Q,le,fe,Re,$e,We,ot,Nt,Bt,Kt){const $t=Xe.quadrilateralToQuadrilateral(v,y,E,k,L,H,Q,le,fe,Re,$e,We,ot,Nt,Bt,Kt);return this.sampleGridWithTransform(f,m,x,$t)}sampleGridWithTransform(f,m,x,v){if(m<=0||x<=0)throw new Z;const y=new ee(m,x),E=new Float32Array(2*m);for(let k=0;k<x;k++){const L=E.length,H=k+.5;for(let Q=0;Q<L;Q+=2)E[Q]=Q/2+.5,E[Q+1]=H;v.transformPoints(E),ar.checkAndNudgePoints(f,E);try{for(let Q=0;Q<L;Q+=2)f.get(Math.floor(E[Q]),Math.floor(E[Q+1]))&&y.set(Q/2,k)}catch{throw new Z}}return y}}class kt{static setGridSampler(f){kt.gridSampler=f}static getInstance(){return kt.gridSampler}}kt.gridSampler=new qt;class gt{constructor(f,m){this.x=f,this.y=m}toResultPoint(){return new Ve(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ft{constructor(f){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=f}detect(){return this.detectMirror(!1)}detectMirror(f){let m=this.getMatrixCenter(),x=this.getBullsEyeCorners(m);if(f){let E=x[0];x[0]=x[2],x[2]=E}this.extractParameters(x);let v=this.sampleGrid(this.image,x[this.shift%4],x[(this.shift+1)%4],x[(this.shift+2)%4],x[(this.shift+3)%4]),y=this.getMatrixCornerPoints(x);return new Wt(v,y,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(f){if(!this.isValidPoint(f[0])||!this.isValidPoint(f[1])||!this.isValidPoint(f[2])||!this.isValidPoint(f[3]))throw new Z;let m=2*this.nbCenterLayers,x=new Int32Array([this.sampleLine(f[0],f[1],m),this.sampleLine(f[1],f[2],m),this.sampleLine(f[2],f[3],m),this.sampleLine(f[3],f[0],m)]);this.shift=this.getRotation(x,m);let v=0;for(let E=0;E<4;E++){let k=x[(this.shift+E)%4];this.compact?(v<<=7,v+=k>>1&127):(v<<=10,v+=(k>>2&992)+(k>>1&31))}let y=this.getCorrectedParameterData(v,this.compact);this.compact?(this.nbLayers=(y>>6)+1,this.nbDataBlocks=(y&63)+1):(this.nbLayers=(y>>11)+1,this.nbDataBlocks=(y&2047)+1)}getRotation(f,m){let x=0;f.forEach((v,y,E)=>{let k=(v>>m-2<<1)+(v&1);x=(x<<3)+k}),x=((x&1)<<11)+(x>>1);for(let v=0;v<4;v++)if(T.bitCount(x^this.EXPECTED_CORNER_BITS[v])<=2)return v;throw new Z}getCorrectedParameterData(f,m){let x,v;m?(x=7,v=2):(x=10,v=4);let y=x-v,E=new Int32Array(x);for(let L=x-1;L>=0;--L)E[L]=f&15,f>>=4;try{new Ht(Me.AZTEC_PARAM).decode(E,y)}catch{throw new Z}let k=0;for(let L=0;L<v;L++)k=(k<<4)+E[L];return k}getBullsEyeCorners(f){let m=f,x=f,v=f,y=f,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let le=this.getFirstDifferent(m,E,1,-1),fe=this.getFirstDifferent(x,E,1,1),Re=this.getFirstDifferent(v,E,-1,1),$e=this.getFirstDifferent(y,E,-1,-1);if(this.nbCenterLayers>2){let We=this.distancePoint($e,le)*this.nbCenterLayers/(this.distancePoint(y,m)*(this.nbCenterLayers+2));if(We<.75||We>1.25||!this.isWhiteOrBlackRectangle(le,fe,Re,$e))break}m=le,x=fe,v=Re,y=$e,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let k=new Ve(m.getX()+.5,m.getY()-.5),L=new Ve(x.getX()+.5,x.getY()+.5),H=new Ve(v.getX()-.5,v.getY()+.5),Q=new Ve(y.getX()-.5,y.getY()-.5);return this.expandSquare([k,L,H,Q],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let f,m,x,v;try{let k=new Yt(this.image).detect();f=k[0],m=k[1],x=k[2],v=k[3]}catch{let L=this.image.getWidth()/2,H=this.image.getHeight()/2;f=this.getFirstDifferent(new gt(L+7,H-7),!1,1,-1).toResultPoint(),m=this.getFirstDifferent(new gt(L+7,H+7),!1,1,1).toResultPoint(),x=this.getFirstDifferent(new gt(L-7,H+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new gt(L-7,H-7),!1,-1,-1).toResultPoint()}let y=et.round((f.getX()+v.getX()+m.getX()+x.getX())/4),E=et.round((f.getY()+v.getY()+m.getY()+x.getY())/4);try{let k=new Yt(this.image,15,y,E).detect();f=k[0],m=k[1],x=k[2],v=k[3]}catch{f=this.getFirstDifferent(new gt(y+7,E-7),!1,1,-1).toResultPoint(),m=this.getFirstDifferent(new gt(y+7,E+7),!1,1,1).toResultPoint(),x=this.getFirstDifferent(new gt(y-7,E+7),!1,-1,1).toResultPoint(),v=this.getFirstDifferent(new gt(y-7,E-7),!1,-1,-1).toResultPoint()}return y=et.round((f.getX()+v.getX()+m.getX()+x.getX())/4),E=et.round((f.getY()+v.getY()+m.getY()+x.getY())/4),new gt(y,E)}getMatrixCornerPoints(f){return this.expandSquare(f,2*this.nbCenterLayers,this.getDimension())}sampleGrid(f,m,x,v,y){let E=kt.getInstance(),k=this.getDimension(),L=k/2-this.nbCenterLayers,H=k/2+this.nbCenterLayers;return E.sampleGrid(f,k,k,L,L,H,L,H,H,L,H,m.getX(),m.getY(),x.getX(),x.getY(),v.getX(),v.getY(),y.getX(),y.getY())}sampleLine(f,m,x){let v=0,y=this.distanceResultPoint(f,m),E=y/x,k=f.getX(),L=f.getY(),H=E*(m.getX()-f.getX())/y,Q=E*(m.getY()-f.getY())/y;for(let le=0;le<x;le++)this.image.get(et.round(k+le*H),et.round(L+le*Q))&&(v|=1<<x-le-1);return v}isWhiteOrBlackRectangle(f,m,x,v){let y=3;f=new gt(f.getX()-y,f.getY()+y),m=new gt(m.getX()-y,m.getY()-y),x=new gt(x.getX()+y,x.getY()-y),v=new gt(v.getX()+y,v.getY()+y);let E=this.getColor(v,f);if(E===0)return!1;let k=this.getColor(f,m);return k!==E||(k=this.getColor(m,x),k!==E)?!1:(k=this.getColor(x,v),k===E)}getColor(f,m){let x=this.distancePoint(f,m),v=(m.getX()-f.getX())/x,y=(m.getY()-f.getY())/x,E=0,k=f.getX(),L=f.getY(),H=this.image.get(f.getX(),f.getY()),Q=Math.ceil(x);for(let fe=0;fe<Q;fe++)k+=v,L+=y,this.image.get(et.round(k),et.round(L))!==H&&E++;let le=E/x;return le>.1&&le<.9?0:le<=.1===H?1:-1}getFirstDifferent(f,m,x,v){let y=f.getX()+x,E=f.getY()+v;for(;this.isValid(y,E)&&this.image.get(y,E)===m;)y+=x,E+=v;for(y-=x,E-=v;this.isValid(y,E)&&this.image.get(y,E)===m;)y+=x;for(y-=x;this.isValid(y,E)&&this.image.get(y,E)===m;)E+=v;return E-=v,new gt(y,E)}expandSquare(f,m,x){let v=x/(2*m),y=f[0].getX()-f[2].getX(),E=f[0].getY()-f[2].getY(),k=(f[0].getX()+f[2].getX())/2,L=(f[0].getY()+f[2].getY())/2,H=new Ve(k+v*y,L+v*E),Q=new Ve(k-v*y,L-v*E);y=f[1].getX()-f[3].getX(),E=f[1].getY()-f[3].getY(),k=(f[1].getX()+f[3].getX())/2,L=(f[1].getY()+f[3].getY())/2;let le=new Ve(k+v*y,L+v*E),fe=new Ve(k-v*y,L-v*E);return[H,le,Q,fe]}isValid(f,m){return f>=0&&f<this.image.getWidth()&&m>0&&m<this.image.getHeight()}isValidPoint(f){let m=et.round(f.getX()),x=et.round(f.getY());return this.isValid(m,x)}distancePoint(f,m){return et.distance(f.getX(),f.getY(),m.getX(),m.getY())}distanceResultPoint(f,m){return et.distance(f.getX(),f.getY(),m.getX(),m.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class Vt{decode(f,m=null){let x=null,v=new Ft(f.getBlackMatrix()),y=null,E=null;try{let Q=v.detectMirror(!1);y=Q.getPoints(),this.reportFoundResultPoints(m,y),E=new Ut().decode(Q)}catch(Q){x=Q}if(E==null)try{let Q=v.detectMirror(!0);y=Q.getPoints(),this.reportFoundResultPoints(m,y),E=new Ut().decode(Q)}catch(Q){throw x??Q}let k=new X(E.getText(),E.getRawBytes(),E.getNumBits(),y,se.AZTEC,w.currentTimeMillis()),L=E.getByteSegments();L!=null&&k.putMetadata(je.BYTE_SEGMENTS,L);let H=E.getECLevel();return H!=null&&k.putMetadata(je.ERROR_CORRECTION_LEVEL,H),k}reportFoundResultPoints(f,m){if(f!=null){let x=f.get(G.NEED_RESULT_POINT_CALLBACK);x!=null&&m.forEach((v,y,E)=>{x.foundPossibleResultPoint(v)})}}reset(){}}class Nr extends Y{constructor(f=500){super(new Vt,f)}}class sr{decode(f,m){try{return this.doDecode(f,m)}catch{if(m&&m.get(G.TRY_HARDER)===!0&&f.isRotateSupported()){const y=f.rotateCounterClockwise(),E=this.doDecode(y,m),k=E.getResultMetadata();let L=270;k!==null&&k.get(je.ORIENTATION)===!0&&(L=L+k.get(je.ORIENTATION)%360),E.putMetadata(je.ORIENTATION,L);const H=E.getResultPoints();if(H!==null){const Q=y.getHeight();for(let le=0;le<H.length;le++)H[le]=new Ve(Q-H[le].getY()-1,H[le].getX())}return E}else throw new Z}}reset(){}doDecode(f,m){const x=f.getWidth(),v=f.getHeight();let y=new R(x);const E=m&&m.get(G.TRY_HARDER)===!0,k=Math.max(1,v>>(E?8:5));let L;E?L=v:L=15;const H=Math.trunc(v/2);for(let Q=0;Q<L;Q++){const le=Math.trunc((Q+1)/2),fe=(Q&1)===0,Re=H+k*(fe?le:-le);if(Re<0||Re>=v)break;try{y=f.getBlackRow(Re,y)}catch{continue}for(let $e=0;$e<2;$e++){if($e===1&&(y.reverse(),m&&m.get(G.NEED_RESULT_POINT_CALLBACK)===!0)){const We=new Map;m.forEach((ot,Nt)=>We.set(Nt,ot)),We.delete(G.NEED_RESULT_POINT_CALLBACK),m=We}try{const We=this.decodeRow(Re,y,m);if($e===1){We.putMetadata(je.ORIENTATION,180);const ot=We.getResultPoints();ot!==null&&(ot[0]=new Ve(x-ot[0].getX()-1,ot[0].getY()),ot[1]=new Ve(x-ot[1].getX()-1,ot[1].getY()))}return We}catch{}}}throw new Z}static recordPattern(f,m,x){const v=x.length;for(let H=0;H<v;H++)x[H]=0;const y=f.getSize();if(m>=y)throw new Z;let E=!f.get(m),k=0,L=m;for(;L<y;){if(f.get(L)!==E)x[k]++;else{if(++k===v)break;x[k]=1,E=!E}L++}if(!(k===v||k===v-1&&L===y))throw new Z}static recordPatternInReverse(f,m,x){let v=x.length,y=f.get(m);for(;m>0&&v>=0;)f.get(--m)!==y&&(v--,y=!y);if(v>=0)throw new Z;sr.recordPattern(f,m+1,x)}static patternMatchVariance(f,m,x){const v=f.length;let y=0,E=0;for(let H=0;H<v;H++)y+=f[H],E+=m[H];if(y<E)return Number.POSITIVE_INFINITY;const k=y/E;x*=k;let L=0;for(let H=0;H<v;H++){const Q=f[H],le=m[H]*k,fe=Q>le?Q-le:le-Q;if(fe>x)return Number.POSITIVE_INFINITY;L+=fe}return L/y}}class it extends sr{static findStartPattern(f){const m=f.getSize(),x=f.getNextSet(0);let v=0,y=Int32Array.from([0,0,0,0,0,0]),E=x,k=!1;const L=6;for(let H=x;H<m;H++)if(f.get(H)!==k)y[v]++;else{if(v===L-1){let Q=it.MAX_AVG_VARIANCE,le=-1;for(let fe=it.CODE_START_A;fe<=it.CODE_START_C;fe++){const Re=sr.patternMatchVariance(y,it.CODE_PATTERNS[fe],it.MAX_INDIVIDUAL_VARIANCE);Re<Q&&(Q=Re,le=fe)}if(le>=0&&f.isRange(Math.max(0,E-(H-E)/2),E,!1))return Int32Array.from([E,H,le]);E+=y[0]+y[1],y=y.slice(2,y.length-1),y[v-1]=0,y[v]=0,v--}else v++;y[v]=1,k=!k}throw new Z}static decodeCode(f,m,x){sr.recordPattern(f,x,m);let v=it.MAX_AVG_VARIANCE,y=-1;for(let E=0;E<it.CODE_PATTERNS.length;E++){const k=it.CODE_PATTERNS[E],L=this.patternMatchVariance(m,k,it.MAX_INDIVIDUAL_VARIANCE);L<v&&(v=L,y=E)}if(y>=0)return y;throw new Z}decodeRow(f,m,x){const v=x&&x.get(G.ASSUME_GS1)===!0,y=it.findStartPattern(m),E=y[2];let k=0;const L=new Uint8Array(20);L[k++]=E;let H;switch(E){case it.CODE_START_A:H=it.CODE_CODE_A;break;case it.CODE_START_B:H=it.CODE_CODE_B;break;case it.CODE_START_C:H=it.CODE_CODE_C;break;default:throw new O}let Q=!1,le=!1,fe="",Re=y[0],$e=y[1];const We=Int32Array.from([0,0,0,0,0,0]);let ot=0,Nt=0,Bt=E,Kt=0,$t=!0,Wr=!1,Qr=!1;for(;!Q;){const of=le;switch(le=!1,ot=Nt,Nt=it.decodeCode(m,We,$e),L[k++]=Nt,Nt!==it.CODE_STOP&&($t=!0),Nt!==it.CODE_STOP&&(Kt++,Bt+=Kt*Nt),Re=$e,$e+=We.reduce((l5,Am)=>l5+Am,0),Nt){case it.CODE_START_A:case it.CODE_START_B:case it.CODE_START_C:throw new O}switch(H){case it.CODE_CODE_A:if(Nt<64)Qr===Wr?fe+=String.fromCharCode(32+Nt):fe+=String.fromCharCode(32+Nt+128),Qr=!1;else if(Nt<96)Qr===Wr?fe+=String.fromCharCode(Nt-64):fe+=String.fromCharCode(Nt+64),Qr=!1;else switch(Nt!==it.CODE_STOP&&($t=!1),Nt){case it.CODE_FNC_1:v&&(fe.length===0?fe+="]C1":fe+="");break;case it.CODE_FNC_2:case it.CODE_FNC_3:break;case it.CODE_FNC_4_A:!Wr&&Qr?(Wr=!0,Qr=!1):Wr&&Qr?(Wr=!1,Qr=!1):Qr=!0;break;case it.CODE_SHIFT:le=!0,H=it.CODE_CODE_B;break;case it.CODE_CODE_B:H=it.CODE_CODE_B;break;case it.CODE_CODE_C:H=it.CODE_CODE_C;break;case it.CODE_STOP:Q=!0;break}break;case it.CODE_CODE_B:if(Nt<96)Qr===Wr?fe+=String.fromCharCode(32+Nt):fe+=String.fromCharCode(32+Nt+128),Qr=!1;else switch(Nt!==it.CODE_STOP&&($t=!1),Nt){case it.CODE_FNC_1:v&&(fe.length===0?fe+="]C1":fe+="");break;case it.CODE_FNC_2:case it.CODE_FNC_3:break;case it.CODE_FNC_4_B:!Wr&&Qr?(Wr=!0,Qr=!1):Wr&&Qr?(Wr=!1,Qr=!1):Qr=!0;break;case it.CODE_SHIFT:le=!0,H=it.CODE_CODE_A;break;case it.CODE_CODE_A:H=it.CODE_CODE_A;break;case it.CODE_CODE_C:H=it.CODE_CODE_C;break;case it.CODE_STOP:Q=!0;break}break;case it.CODE_CODE_C:if(Nt<100)Nt<10&&(fe+="0"),fe+=Nt;else switch(Nt!==it.CODE_STOP&&($t=!1),Nt){case it.CODE_FNC_1:v&&(fe.length===0?fe+="]C1":fe+="");break;case it.CODE_CODE_A:H=it.CODE_CODE_A;break;case it.CODE_CODE_B:H=it.CODE_CODE_B;break;case it.CODE_STOP:Q=!0;break}break}of&&(H=H===it.CODE_CODE_A?it.CODE_CODE_B:it.CODE_CODE_A)}const ri=$e-Re;if($e=m.getNextUnset($e),!m.isRange($e,Math.min(m.getSize(),$e+($e-Re)/2),!1))throw new Z;if(Bt-=Kt*ot,Bt%103!==ot)throw new g;const Hi=fe.length;if(Hi===0)throw new Z;Hi>0&&$t&&(H===it.CODE_CODE_C?fe=fe.substring(0,Hi-2):fe=fe.substring(0,Hi-1));const Ei=(y[1]+y[0])/2,ha=Re+ri/2,ni=L.length,Io=new Uint8Array(ni);for(let of=0;of<ni;of++)Io[of]=L[of];const sf=[new Ve(Ei,f),new Ve(ha,f)];return new X(fe,Io,0,sf,se.CODE_128,new Date().getTime())}}it.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],it.MAX_AVG_VARIANCE=.25,it.MAX_INDIVIDUAL_VARIANCE=.7,it.CODE_SHIFT=98,it.CODE_CODE_C=99,it.CODE_CODE_B=100,it.CODE_CODE_A=101,it.CODE_FNC_1=102,it.CODE_FNC_2=97,it.CODE_FNC_3=96,it.CODE_FNC_4_A=101,it.CODE_FNC_4_B=100,it.CODE_START_A=103,it.CODE_START_B=104,it.CODE_START_C=105,it.CODE_STOP=106;class ir extends sr{constructor(f=!1,m=!1){super(),this.usingCheckDigit=f,this.extendedMode=m,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(f,m,x){let v=this.counters;v.fill(0),this.decodeRowResult="";let y=ir.findAsteriskPattern(m,v),E=m.getNextSet(y[1]),k=m.getSize(),L,H;do{ir.recordPattern(m,E,v);let We=ir.toNarrowWidePattern(v);if(We<0)throw new Z;L=ir.patternToChar(We),this.decodeRowResult+=L,H=E;for(let ot of v)E+=ot;E=m.getNextSet(E)}while(L!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let Q=0;for(let We of v)Q+=We;let le=E-H-Q;if(E!==k&&le*2<Q)throw new Z;if(this.usingCheckDigit){let We=this.decodeRowResult.length-1,ot=0;for(let Nt=0;Nt<We;Nt++)ot+=ir.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Nt));if(this.decodeRowResult.charAt(We)!==ir.ALPHABET_STRING.charAt(ot%43))throw new g;this.decodeRowResult=this.decodeRowResult.substring(0,We)}if(this.decodeRowResult.length===0)throw new Z;let fe;this.extendedMode?fe=ir.decodeExtended(this.decodeRowResult):fe=this.decodeRowResult;let Re=(y[1]+y[0])/2,$e=H+Q/2;return new X(fe,null,0,[new Ve(Re,f),new Ve($e,f)],se.CODE_39,new Date().getTime())}static findAsteriskPattern(f,m){let x=f.getSize(),v=f.getNextSet(0),y=0,E=v,k=!1,L=m.length;for(let H=v;H<x;H++)if(f.get(H)!==k)m[y]++;else{if(y===L-1){if(this.toNarrowWidePattern(m)===ir.ASTERISK_ENCODING&&f.isRange(Math.max(0,E-Math.floor((H-E)/2)),E,!1))return[E,H];E+=m[0]+m[1],m.copyWithin(0,2,2+y-1),m[y-1]=0,m[y]=0,y--}else y++;m[y]=1,k=!k}throw new Z}static toNarrowWidePattern(f){let m=f.length,x=0,v;do{let y=2147483647;for(let L of f)L<y&&L>x&&(y=L);x=y,v=0;let E=0,k=0;for(let L=0;L<m;L++){let H=f[L];H>x&&(k|=1<<m-1-L,v++,E+=H)}if(v===3){for(let L=0;L<m&&v>0;L++){let H=f[L];if(H>x&&(v--,H*2>=E))return-1}return k}}while(v>3);return-1}static patternToChar(f){for(let m=0;m<ir.CHARACTER_ENCODINGS.length;m++)if(ir.CHARACTER_ENCODINGS[m]===f)return ir.ALPHABET_STRING.charAt(m);if(f===ir.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(f){let m=f.length,x="";for(let v=0;v<m;v++){let y=f.charAt(v);if(y==="+"||y==="$"||y==="%"||y==="/"){let E=f.charAt(v+1),k="\0";switch(y){case"+":if(E>="A"&&E<="Z")k=String.fromCharCode(E.charCodeAt(0)+32);else throw new O;break;case"$":if(E>="A"&&E<="Z")k=String.fromCharCode(E.charCodeAt(0)-64);else throw new O;break;case"%":if(E>="A"&&E<="E")k=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")k=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")k=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")k=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")k="\0";else if(E==="V")k="@";else if(E==="W")k="`";else if(E==="X"||E==="Y"||E==="Z")k="";else throw new O;break;case"/":if(E>="A"&&E<="O")k=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")k=":";else throw new O;break}x+=k,v++}else x+=y}return x}}ir.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ir.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ir.ASTERISK_ENCODING=148;class be extends sr{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(f,m,x){let v=this.decodeStart(m),y=this.decodeEnd(m),E=new F;be.decodeMiddle(m,v[1],y[0],E);let k=E.toString(),L=null;x!=null&&(L=x.get(G.ALLOWED_LENGTHS)),L==null&&(L=be.DEFAULT_ALLOWED_LENGTHS);let H=k.length,Q=!1,le=0;for(let $e of L){if(H===$e){Q=!0;break}$e>le&&(le=$e)}if(!Q&&H>le&&(Q=!0),!Q)throw new O;const fe=[new Ve(v[1],f),new Ve(y[0],f)];return new X(k,null,0,fe,se.ITF,new Date().getTime())}static decodeMiddle(f,m,x,v){let y=new Int32Array(10),E=new Int32Array(5),k=new Int32Array(5);for(y.fill(0),E.fill(0),k.fill(0);m<x;){sr.recordPattern(f,m,y);for(let H=0;H<5;H++){let Q=2*H;E[H]=y[Q],k[H]=y[Q+1]}let L=be.decodeDigit(E);v.append(L.toString()),L=this.decodeDigit(k),v.append(L.toString()),y.forEach(function(H){m+=H})}}decodeStart(f){let m=be.skipWhiteSpace(f),x=be.findGuardPattern(f,m,be.START_PATTERN);return this.narrowLineWidth=(x[1]-x[0])/4,this.validateQuietZone(f,x[0]),x}validateQuietZone(f,m){let x=this.narrowLineWidth*10;x=x<m?x:m;for(let v=m-1;x>0&&v>=0&&!f.get(v);v--)x--;if(x!==0)throw new Z}static skipWhiteSpace(f){const m=f.getSize(),x=f.getNextSet(0);if(x===m)throw new Z;return x}decodeEnd(f){f.reverse();try{let m=be.skipWhiteSpace(f),x;try{x=be.findGuardPattern(f,m,be.END_PATTERN_REVERSED[0])}catch(y){y instanceof Z&&(x=be.findGuardPattern(f,m,be.END_PATTERN_REVERSED[1]))}this.validateQuietZone(f,x[0]);let v=x[0];return x[0]=f.getSize()-x[1],x[1]=f.getSize()-v,x}finally{f.reverse()}}static findGuardPattern(f,m,x){let v=x.length,y=new Int32Array(v),E=f.getSize(),k=!1,L=0,H=m;y.fill(0);for(let Q=m;Q<E;Q++)if(f.get(Q)!==k)y[L]++;else{if(L===v-1){if(sr.patternMatchVariance(y,x,be.MAX_INDIVIDUAL_VARIANCE)<be.MAX_AVG_VARIANCE)return[H,Q];H+=y[0]+y[1],w.arraycopy(y,2,y,0,L-1),y[L-1]=0,y[L]=0,L--}else L++;y[L]=1,k=!k}throw new Z}static decodeDigit(f){let m=be.MAX_AVG_VARIANCE,x=-1,v=be.PATTERNS.length;for(let y=0;y<v;y++){let E=be.PATTERNS[y],k=sr.patternMatchVariance(f,E,be.MAX_INDIVIDUAL_VARIANCE);k<m?(m=k,x=y):k===m&&(x=-1)}if(x>=0)return x%10;throw new Z}}be.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],be.MAX_AVG_VARIANCE=.38,be.MAX_INDIVIDUAL_VARIANCE=.5,be.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],be.START_PATTERN=Int32Array.from([1,1,1,1]),be.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ze extends sr{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(f){let m=!1,x,v=0,y=Int32Array.from([0,0,0]);for(;!m;){y=Int32Array.from([0,0,0]),x=Ze.findGuardPattern(f,v,!1,this.START_END_PATTERN,y);let E=x[0];v=x[1];let k=E-(v-E);k>=0&&(m=f.isRange(k,E,!1))}return x}static checkChecksum(f){return Ze.checkStandardUPCEANChecksum(f)}static checkStandardUPCEANChecksum(f){let m=f.length;if(m===0)return!1;let x=parseInt(f.charAt(m-1),10);return Ze.getStandardUPCEANChecksum(f.substring(0,m-1))===x}static getStandardUPCEANChecksum(f){let m=f.length,x=0;for(let v=m-1;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}x*=3;for(let v=m-2;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}return(1e3-x)%10}static decodeEnd(f,m){return Ze.findGuardPattern(f,m,!1,Ze.START_END_PATTERN,new Int32Array(Ze.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(f,m,x,v){return this.findGuardPattern(f,m,x,v,new Int32Array(v.length))}static findGuardPattern(f,m,x,v,y){let E=f.getSize();m=x?f.getNextUnset(m):f.getNextSet(m);let k=0,L=m,H=v.length,Q=x;for(let le=m;le<E;le++)if(f.get(le)!==Q)y[k]++;else{if(k===H-1){if(sr.patternMatchVariance(y,v,Ze.MAX_INDIVIDUAL_VARIANCE)<Ze.MAX_AVG_VARIANCE)return Int32Array.from([L,le]);L+=y[0]+y[1];let fe=y.slice(2,y.length-1);for(let Re=0;Re<k-1;Re++)y[Re]=fe[Re];y[k-1]=0,y[k]=0,k--}else k++;y[k]=1,Q=!Q}throw new Z}static decodeDigit(f,m,x,v){this.recordPattern(f,x,m);let y=this.MAX_AVG_VARIANCE,E=-1,k=v.length;for(let L=0;L<k;L++){let H=v[L],Q=sr.patternMatchVariance(m,H,Ze.MAX_INDIVIDUAL_VARIANCE);Q<y&&(y=Q,E=L)}if(E>=0)return E;throw new Z}}Ze.MAX_AVG_VARIANCE=.48,Ze.MAX_INDIVIDUAL_VARIANCE=.7,Ze.START_END_PATTERN=Int32Array.from([1,1,1]),Ze.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ze.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ze.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class at{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(f,m,x){let v=this.decodeRowStringBuffer,y=this.decodeMiddle(m,x,v),E=v.toString(),k=at.parseExtensionString(E),L=[new Ve((x[0]+x[1])/2,f),new Ve(y,f)],H=new X(E,null,0,L,se.UPC_EAN_EXTENSION,new Date().getTime());return k!=null&&H.putAllMetadata(k),H}decodeMiddle(f,m,x){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1],k=0;for(let H=0;H<5&&E<y;H++){let Q=Ze.decodeDigit(f,v,E,Ze.L_AND_G_PATTERNS);x+=String.fromCharCode(48+Q%10);for(let le of v)E+=le;Q>=10&&(k|=1<<4-H),H!==4&&(E=f.getNextSet(E),E=f.getNextUnset(E))}if(x.length!==5)throw new Z;let L=this.determineCheckDigit(k);if(at.extensionChecksum(x.toString())!==L)throw new Z;return E}static extensionChecksum(f){let m=f.length,x=0;for(let v=m-2;v>=0;v-=2)x+=f.charAt(v).charCodeAt(0)-48;x*=3;for(let v=m-1;v>=0;v-=2)x+=f.charAt(v).charCodeAt(0)-48;return x*=3,x%10}determineCheckDigit(f){for(let m=0;m<10;m++)if(f===this.CHECK_DIGIT_ENCODINGS[m])return m;throw new Z}static parseExtensionString(f){if(f.length!==5)return null;let m=at.parseExtension5String(f);return m==null?null:new Map([[je.SUGGESTED_PRICE,m]])}static parseExtension5String(f){let m;switch(f.charAt(0)){case"0":m="";break;case"5":m="$";break;case"9":switch(f){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}m="";break;default:m="";break}let x=parseInt(f.substring(1)),v=(x/100).toString(),y=x%100,E=y<10?"0"+y:y.toString();return m+v+"."+E}}class Qe{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(f,m,x){let v=this.decodeRowStringBuffer,y=this.decodeMiddle(m,x,v),E=v.toString(),k=Qe.parseExtensionString(E),L=[new Ve((x[0]+x[1])/2,f),new Ve(y,f)],H=new X(E,null,0,L,se.UPC_EAN_EXTENSION,new Date().getTime());return k!=null&&H.putAllMetadata(k),H}decodeMiddle(f,m,x){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1],k=0;for(let L=0;L<2&&E<y;L++){let H=Ze.decodeDigit(f,v,E,Ze.L_AND_G_PATTERNS);x+=String.fromCharCode(48+H%10);for(let Q of v)E+=Q;H>=10&&(k|=1<<1-L),L!==1&&(E=f.getNextSet(E),E=f.getNextUnset(E))}if(x.length!==2)throw new Z;if(parseInt(x.toString())%4!==k)throw new Z;return E}static parseExtensionString(f){return f.length!==2?null:new Map([[je.ISSUE_NUMBER,parseInt(f)]])}}class ze{static decodeRow(f,m,x){let v=Ze.findGuardPattern(m,x,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new at().decodeRow(f,m,v)}catch{return new Qe().decodeRow(f,m,v)}}}ze.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class st extends Ze{constructor(){super(),this.decodeRowStringBuffer="",st.L_AND_G_PATTERNS=st.L_PATTERNS.map(f=>Int32Array.from(f));for(let f=10;f<20;f++){let m=st.L_PATTERNS[f-10],x=new Int32Array(m.length);for(let v=0;v<m.length;v++)x[v]=m[m.length-v-1];st.L_AND_G_PATTERNS[f]=x}}decodeRow(f,m,x){let v=st.findStartGuardPattern(m),y=x==null?null:x.get(G.NEED_RESULT_POINT_CALLBACK);if(y!=null){const $t=new Ve((v[0]+v[1])/2,f);y.foundPossibleResultPoint($t)}let E=this.decodeMiddle(m,v,this.decodeRowStringBuffer),k=E.rowOffset,L=E.resultString;if(y!=null){const $t=new Ve(k,f);y.foundPossibleResultPoint($t)}let H=this.decodeEnd(m,k);if(y!=null){const $t=new Ve((H[0]+H[1])/2,f);y.foundPossibleResultPoint($t)}let Q=H[1],le=Q+(Q-H[0]);if(le>=m.getSize()||!m.isRange(Q,le,!1))throw new Z;let fe=L.toString();if(fe.length<8)throw new O;if(!st.checkChecksum(fe))throw new g;let Re=(v[1]+v[0])/2,$e=(H[1]+H[0])/2,We=this.getBarcodeFormat(),ot=[new Ve(Re,f),new Ve($e,f)],Nt=new X(fe,null,0,ot,We,new Date().getTime()),Bt=0;try{let $t=ze.decodeRow(f,m,H[1]);Nt.putMetadata(je.UPC_EAN_EXTENSION,$t.getText()),Nt.putAllMetadata($t.getResultMetadata()),Nt.addResultPoints($t.getResultPoints()),Bt=$t.getText().length}catch{}let Kt=x==null?null:x.get(G.ALLOWED_EAN_EXTENSIONS);if(Kt!=null){let $t=!1;for(let Wr in Kt)if(Bt.toString()===Wr){$t=!0;break}if(!$t)throw new Z}return Nt}decodeEnd(f,m){return st.findGuardPattern(f,m,!1,st.START_END_PATTERN,new Int32Array(st.START_END_PATTERN.length).fill(0))}static checkChecksum(f){return st.checkStandardUPCEANChecksum(f)}static checkStandardUPCEANChecksum(f){let m=f.length;if(m===0)return!1;let x=parseInt(f.charAt(m-1),10);return st.getStandardUPCEANChecksum(f.substring(0,m-1))===x}static getStandardUPCEANChecksum(f){let m=f.length,x=0;for(let v=m-1;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}x*=3;for(let v=m-2;v>=0;v-=2){let y=f.charAt(v).charCodeAt(0)-48;if(y<0||y>9)throw new O;x+=y}return(1e3-x)%10}}class St extends st{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(f,m,x){let v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1],k=0;for(let H=0;H<6&&E<y;H++){let Q=st.decodeDigit(f,v,E,st.L_AND_G_PATTERNS);x+=String.fromCharCode(48+Q%10);for(let le of v)E+=le;Q>=10&&(k|=1<<5-H)}x=St.determineFirstDigit(x,k),E=st.findGuardPattern(f,E,!0,st.MIDDLE_PATTERN,new Int32Array(st.MIDDLE_PATTERN.length).fill(0))[1];for(let H=0;H<6&&E<y;H++){let Q=st.decodeDigit(f,v,E,st.L_PATTERNS);x+=String.fromCharCode(48+Q);for(let le of v)E+=le}return{rowOffset:E,resultString:x}}getBarcodeFormat(){return se.EAN_13}static determineFirstDigit(f,m){for(let x=0;x<10;x++)if(m===this.FIRST_DIGIT_ENCODINGS[x])return f=String.fromCharCode(48+x)+f,f;throw new Z}}St.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class tr extends st{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(f,m,x){const v=this.decodeMiddleCounters;v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E=m[1];for(let L=0;L<4&&E<y;L++){let H=st.decodeDigit(f,v,E,st.L_PATTERNS);x+=String.fromCharCode(48+H);for(let Q of v)E+=Q}E=st.findGuardPattern(f,E,!0,st.MIDDLE_PATTERN,new Int32Array(st.MIDDLE_PATTERN.length).fill(0))[1];for(let L=0;L<4&&E<y;L++){let H=st.decodeDigit(f,v,E,st.L_PATTERNS);x+=String.fromCharCode(48+H);for(let Q of v)E+=Q}return{rowOffset:E,resultString:x}}getBarcodeFormat(){return se.EAN_8}}class It extends st{constructor(){super(...arguments),this.ean13Reader=new St}getBarcodeFormat(){return se.UPC_A}decode(f,m){return this.maybeReturnResult(this.ean13Reader.decode(f))}decodeRow(f,m,x){return this.maybeReturnResult(this.ean13Reader.decodeRow(f,m,x))}decodeMiddle(f,m,x){return this.ean13Reader.decodeMiddle(f,m,x)}maybeReturnResult(f){let m=f.getText();if(m.charAt(0)==="0"){let x=new X(m.substring(1),null,null,f.getResultPoints(),se.UPC_A);return f.getResultMetadata()!=null&&x.putAllMetadata(f.getResultMetadata()),x}else throw new Z}reset(){this.ean13Reader.reset()}}class Er extends st{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(f,m,x){const v=this.decodeMiddleCounters.map(H=>H);v[0]=0,v[1]=0,v[2]=0,v[3]=0;const y=f.getSize();let E=m[1],k=0;for(let H=0;H<6&&E<y;H++){const Q=Er.decodeDigit(f,v,E,Er.L_AND_G_PATTERNS);x+=String.fromCharCode(48+Q%10);for(let le of v)E+=le;Q>=10&&(k|=1<<5-H)}let L=Er.determineNumSysAndCheckDigit(x,k);return{rowOffset:E,resultString:L}}decodeEnd(f,m){return Er.findGuardPatternWithoutCounters(f,m,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(f){return st.checkChecksum(Er.convertUPCEtoUPCA(f))}static determineNumSysAndCheckDigit(f,m){for(let x=0;x<=1;x++)for(let v=0;v<10;v++)if(m===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[x][v]){let y=String.fromCharCode(48+x),E=String.fromCharCode(48+v);return y+f+E}throw Z.getNotFoundInstance()}getBarcodeFormat(){return se.UPC_E}static convertUPCEtoUPCA(f){const m=f.slice(1,7).split("").map(y=>y.charCodeAt(0)),x=new F;x.append(f.charAt(0));let v=m[5];switch(v){case 0:case 1:case 2:x.appendChars(m,0,2),x.append(v),x.append("0000"),x.appendChars(m,2,3);break;case 3:x.appendChars(m,0,3),x.append("00000"),x.appendChars(m,3,2);break;case 4:x.appendChars(m,0,4),x.append("00000"),x.append(m[4]);break;default:x.appendChars(m,0,5),x.append("0000"),x.append(v);break}return f.length>=8&&x.append(f.charAt(7)),x.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class en extends sr{constructor(f){super();let m=f==null?null:f.get(G.POSSIBLE_FORMATS),x=[];n(m)?(x.push(new St),x.push(new It),x.push(new tr),x.push(new Er)):(m.indexOf(se.EAN_13)>-1&&x.push(new St),m.indexOf(se.UPC_A)>-1&&x.push(new It),m.indexOf(se.EAN_8)>-1&&x.push(new tr),m.indexOf(se.UPC_E)>-1&&x.push(new Er)),this.readers=x}decodeRow(f,m,x){for(let v of this.readers)try{const y=v.decodeRow(f,m,x),E=y.getBarcodeFormat()===se.EAN_13&&y.getText().charAt(0)==="0",k=x==null?null:x.get(G.POSSIBLE_FORMATS),L=k==null||k.includes(se.UPC_A);if(E&&L){const H=y.getRawBytes(),Q=new X(y.getText().substring(1),H,H?H.length:null,y.getResultPoints(),se.UPC_A);return Q.putAllMetadata(y.getResultMetadata()),Q}return y}catch{}throw new Z}reset(){for(let f of this.readers)f.reset()}}class $r extends sr{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(f,m){for(let x=0;x<m.length;x++)if(sr.patternMatchVariance(f,m[x],$r.MAX_INDIVIDUAL_VARIANCE)<$r.MAX_AVG_VARIANCE)return x;throw new Z}static count(f){return et.sum(new Int32Array(f))}static increment(f,m){let x=0,v=m[0];for(let y=1;y<f.length;y++)m[y]>v&&(v=m[y],x=y);f[x]++}static decrement(f,m){let x=0,v=m[0];for(let y=1;y<f.length;y++)m[y]<v&&(v=m[y],x=y);f[x]--}static isFinderPattern(f){let m=f[0]+f[1],x=m+f[2]+f[3],v=m/x;if(v>=$r.MIN_FINDER_PATTERN_RATIO&&v<=$r.MAX_FINDER_PATTERN_RATIO){let y=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let k of f)k>E&&(E=k),k<y&&(y=k);return E<10*y}return!1}}$r.MAX_AVG_VARIANCE=.2,$r.MAX_INDIVIDUAL_VARIANCE=.45,$r.MIN_FINDER_PATTERN_RATIO=9.5/12,$r.MAX_FINDER_PATTERN_RATIO=12.5/14;class jn{constructor(f,m){this.value=f,this.checksumPortion=m}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(f){if(!(f instanceof jn))return!1;const m=f;return this.value===m.value&&this.checksumPortion===m.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fr{constructor(f,m,x,v,y){this.value=f,this.startEnd=m,this.value=f,this.startEnd=m,this.resultPoints=new Array,this.resultPoints.push(new Ve(x,y)),this.resultPoints.push(new Ve(v,y))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(f){if(!(f instanceof fr))return!1;const m=f;return this.value===m.value}hashCode(){return this.value}}class dn{constructor(){}static getRSSvalue(f,m,x){let v=0;for(let L of f)v+=L;let y=0,E=0,k=f.length;for(let L=0;L<k-1;L++){let H;for(H=1,E|=1<<L;H<f[L];H++,E&=~(1<<L)){let Q=dn.combins(v-H-1,k-L-2);if(x&&E===0&&v-H-(k-L-1)>=k-L-1&&(Q-=dn.combins(v-H-(k-L),k-L-2)),k-L-1>1){let le=0;for(let fe=v-H-(k-L-2);fe>m;fe--)le+=dn.combins(v-H-fe-1,k-L-3);Q-=le*(k-1-L)}else v-H>m&&Q--;y+=Q}v-=H}return y}static combins(f,m){let x,v;f-m>m?(v=m,x=f-m):(v=f-m,x=m);let y=1,E=1;for(let k=f;k>x;k--)y*=k,E<=v&&(y/=E,E++);for(;E<=v;)y/=E,E++;return y}}class Vn{static buildBitArray(f){let m=f.length*2-1;f[f.length-1].getRightChar()==null&&(m-=1);let x=12*m,v=new R(x),y=0,k=f[0].getRightChar().getValue();for(let L=11;L>=0;--L)k&1<<L&&v.set(y),y++;for(let L=1;L<f.length;++L){let H=f[L],Q=H.getLeftChar().getValue();for(let le=11;le>=0;--le)Q&1<<le&&v.set(y),y++;if(H.getRightChar()!=null){let le=H.getRightChar().getValue();for(let fe=11;fe>=0;--fe)le&1<<fe&&v.set(y),y++}}return v}}class on{constructor(f,m){m?this.decodedInformation=null:(this.finished=f,this.decodedInformation=m)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class _n{constructor(f){this.newPosition=f}getNewPosition(){return this.newPosition}}class Zr extends _n{constructor(f,m){super(f),this.value=m}getValue(){return this.value}isFNC1(){return this.value===Zr.FNC1}}Zr.FNC1="$";class tn extends _n{constructor(f,m,x){super(f),x?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=m}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class de extends _n{constructor(f,m,x){if(super(f),m<0||m>10||x<0||x>10)throw new O;this.firstDigit=m,this.secondDigit=x}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===de.FNC1}isSecondDigitFNC1(){return this.secondDigit===de.FNC1}isAnyFNC1(){return this.firstDigit===de.FNC1||this.secondDigit===de.FNC1}}de.FNC1=10;class ge{constructor(){}static parseFieldsInGeneralPurpose(f){if(!f)return null;if(f.length<2)throw new Z;let m=f.substring(0,2);for(let y of ge.TWO_DIGIT_DATA_LENGTH)if(y[0]===m)return y[1]===ge.VARIABLE_LENGTH?ge.processVariableAI(2,y[2],f):ge.processFixedAI(2,y[1],f);if(f.length<3)throw new Z;let x=f.substring(0,3);for(let y of ge.THREE_DIGIT_DATA_LENGTH)if(y[0]===x)return y[1]===ge.VARIABLE_LENGTH?ge.processVariableAI(3,y[2],f):ge.processFixedAI(3,y[1],f);for(let y of ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(y[0]===x)return y[1]===ge.VARIABLE_LENGTH?ge.processVariableAI(4,y[2],f):ge.processFixedAI(4,y[1],f);if(f.length<4)throw new Z;let v=f.substring(0,4);for(let y of ge.FOUR_DIGIT_DATA_LENGTH)if(y[0]===v)return y[1]===ge.VARIABLE_LENGTH?ge.processVariableAI(4,y[2],f):ge.processFixedAI(4,y[1],f);throw new Z}static processFixedAI(f,m,x){if(x.length<f)throw new Z;let v=x.substring(0,f);if(x.length<f+m)throw new Z;let y=x.substring(f,f+m),E=x.substring(f+m),k="("+v+")"+y,L=ge.parseFieldsInGeneralPurpose(E);return L==null?k:k+L}static processVariableAI(f,m,x){let v=x.substring(0,f),y;x.length<f+m?y=x.length:y=f+m;let E=x.substring(f,y),k=x.substring(y),L="("+v+")"+E,H=ge.parseFieldsInGeneralPurpose(k);return H==null?L:L+H}}ge.VARIABLE_LENGTH=[],ge.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ge.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ge.VARIABLE_LENGTH,20],["22",ge.VARIABLE_LENGTH,29],["30",ge.VARIABLE_LENGTH,8],["37",ge.VARIABLE_LENGTH,8],["90",ge.VARIABLE_LENGTH,30],["91",ge.VARIABLE_LENGTH,30],["92",ge.VARIABLE_LENGTH,30],["93",ge.VARIABLE_LENGTH,30],["94",ge.VARIABLE_LENGTH,30],["95",ge.VARIABLE_LENGTH,30],["96",ge.VARIABLE_LENGTH,30],["97",ge.VARIABLE_LENGTH,3],["98",ge.VARIABLE_LENGTH,30],["99",ge.VARIABLE_LENGTH,30]],ge.THREE_DIGIT_DATA_LENGTH=[["240",ge.VARIABLE_LENGTH,30],["241",ge.VARIABLE_LENGTH,30],["242",ge.VARIABLE_LENGTH,6],["250",ge.VARIABLE_LENGTH,30],["251",ge.VARIABLE_LENGTH,30],["253",ge.VARIABLE_LENGTH,17],["254",ge.VARIABLE_LENGTH,20],["400",ge.VARIABLE_LENGTH,30],["401",ge.VARIABLE_LENGTH,30],["402",17],["403",ge.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ge.VARIABLE_LENGTH,20],["421",ge.VARIABLE_LENGTH,15],["422",3],["423",ge.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ge.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ge.VARIABLE_LENGTH,15],["391",ge.VARIABLE_LENGTH,18],["392",ge.VARIABLE_LENGTH,15],["393",ge.VARIABLE_LENGTH,18],["703",ge.VARIABLE_LENGTH,30]],ge.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ge.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ge.VARIABLE_LENGTH,20],["8003",ge.VARIABLE_LENGTH,30],["8004",ge.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ge.VARIABLE_LENGTH,30],["8008",ge.VARIABLE_LENGTH,12],["8018",18],["8020",ge.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ge.VARIABLE_LENGTH,70],["8200",ge.VARIABLE_LENGTH,70]];class Ne{constructor(f){this.buffer=new F,this.information=f}decodeAllCodes(f,m){let x=m,v=null;do{let y=this.decodeGeneralPurposeField(x,v),E=ge.parseFieldsInGeneralPurpose(y.getNewString());if(E!=null&&f.append(E),y.isRemaining()?v=""+y.getRemainingValue():v=null,x===y.getNewPosition())break;x=y.getNewPosition()}while(!0);return f.toString()}isStillNumeric(f){if(f+7>this.information.getSize())return f+4<=this.information.getSize();for(let m=f;m<f+3;++m)if(this.information.get(m))return!0;return this.information.get(f+3)}decodeNumeric(f){if(f+7>this.information.getSize()){let y=this.extractNumericValueFromBitArray(f,4);return y===0?new de(this.information.getSize(),de.FNC1,de.FNC1):new de(this.information.getSize(),y-1,de.FNC1)}let m=this.extractNumericValueFromBitArray(f,7),x=(m-8)/11,v=(m-8)%11;return new de(f+7,x,v)}extractNumericValueFromBitArray(f,m){return Ne.extractNumericValueFromBitArray(this.information,f,m)}static extractNumericValueFromBitArray(f,m,x){let v=0;for(let y=0;y<x;++y)f.get(m+y)&&(v|=1<<x-y-1);return v}decodeGeneralPurposeField(f,m){this.buffer.setLengthToZero(),m!=null&&this.buffer.append(m),this.current.setPosition(f);let x=this.parseBlocks();return x!=null&&x.isRemaining()?new tn(this.current.getPosition(),this.buffer.toString(),x.getRemainingValue()):new tn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let f,m;do{let x=this.current.getPosition();if(this.current.isAlpha()?(m=this.parseAlphaBlock(),f=m.isFinished()):this.current.isIsoIec646()?(m=this.parseIsoIec646Block(),f=m.isFinished()):(m=this.parseNumericBlock(),f=m.isFinished()),!(x!==this.current.getPosition())&&!f)break}while(!f);return m.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let f=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFirstDigitFNC1()){let m;return f.isSecondDigitFNC1()?m=new tn(this.current.getPosition(),this.buffer.toString()):m=new tn(this.current.getPosition(),this.buffer.toString(),f.getSecondDigit()),new on(!0,m)}if(this.buffer.append(f.getFirstDigit()),f.isSecondDigitFNC1()){let m=new tn(this.current.getPosition(),this.buffer.toString());return new on(!0,m)}this.buffer.append(f.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new on(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let f=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFNC1()){let m=new tn(this.current.getPosition(),this.buffer.toString());return new on(!0,m)}this.buffer.append(f.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new on(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let f=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFNC1()){let m=new tn(this.current.getPosition(),this.buffer.toString());return new on(!0,m)}this.buffer.append(f.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new on(!1)}isStillIsoIec646(f){if(f+5>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(f,5);if(m>=5&&m<16)return!0;if(f+7>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(f,7);if(x>=64&&x<116)return!0;if(f+8>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(f,8);return v>=232&&v<253}decodeIsoIec646(f){let m=this.extractNumericValueFromBitArray(f,5);if(m===15)return new Zr(f+5,Zr.FNC1);if(m>=5&&m<15)return new Zr(f+5,"0"+(m-5));let x=this.extractNumericValueFromBitArray(f,7);if(x>=64&&x<90)return new Zr(f+7,""+(x+1));if(x>=90&&x<116)return new Zr(f+7,""+(x+7));let v=this.extractNumericValueFromBitArray(f,8),y;switch(v){case 232:y="!";break;case 233:y='"';break;case 234:y="%";break;case 235:y="&";break;case 236:y="'";break;case 237:y="(";break;case 238:y=")";break;case 239:y="*";break;case 240:y="+";break;case 241:y=",";break;case 242:y="-";break;case 243:y=".";break;case 244:y="/";break;case 245:y=":";break;case 246:y=";";break;case 247:y="<";break;case 248:y="=";break;case 249:y=">";break;case 250:y="?";break;case 251:y="_";break;case 252:y=" ";break;default:throw new O}return new Zr(f+8,y)}isStillAlpha(f){if(f+5>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(f,5);if(m>=5&&m<16)return!0;if(f+6>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(f,6);return x>=16&&x<63}decodeAlphanumeric(f){let m=this.extractNumericValueFromBitArray(f,5);if(m===15)return new Zr(f+5,Zr.FNC1);if(m>=5&&m<15)return new Zr(f+5,"0"+(m-5));let x=this.extractNumericValueFromBitArray(f,6);if(x>=32&&x<58)return new Zr(f+6,""+(x+33));let v;switch(x){case 58:v="*";break;case 59:v=",";break;case 60:v="-";break;case 61:v=".";break;case 62:v="/";break;default:throw new ve("Decoding invalid alphanumeric value: "+x)}return new Zr(f+6,v)}isAlphaTo646ToAlphaLatch(f){if(f+1>this.information.getSize())return!1;for(let m=0;m<5&&m+f<this.information.getSize();++m)if(m===2){if(!this.information.get(f+2))return!1}else if(this.information.get(f+m))return!1;return!0}isAlphaOr646ToNumericLatch(f){if(f+3>this.information.getSize())return!1;for(let m=f;m<f+3;++m)if(this.information.get(m))return!1;return!0}isNumericToAlphaNumericLatch(f){if(f+1>this.information.getSize())return!1;for(let m=0;m<4&&m+f<this.information.getSize();++m)if(this.information.get(f+m))return!1;return!0}}class Ee{constructor(f){this.information=f,this.generalDecoder=new Ne(f)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ke extends Ee{constructor(f){super(f)}encodeCompressedGtin(f,m){f.append("(01)");let x=f.length();f.append("9"),this.encodeCompressedGtinWithoutAI(f,m,x)}encodeCompressedGtinWithoutAI(f,m,x){for(let v=0;v<4;++v){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(m+10*v,10);y/100===0&&f.append("0"),y/10===0&&f.append("0"),f.append(y)}ke.appendCheckDigit(f,x)}static appendCheckDigit(f,m){let x=0;for(let v=0;v<13;v++){let y=f.charAt(v+m).charCodeAt(0)-48;x+=v&1?y:3*y}x=10-x%10,x===10&&(x=0),f.append(x)}}ke.GTIN_SIZE=40;class Pe extends ke{constructor(f){super(f)}parseInformation(){let f=new F;f.append("(01)");let m=f.length(),x=this.getGeneralDecoder().extractNumericValueFromBitArray(Pe.HEADER_SIZE,4);return f.append(x),this.encodeCompressedGtinWithoutAI(f,Pe.HEADER_SIZE+4,m),this.getGeneralDecoder().decodeAllCodes(f,Pe.HEADER_SIZE+44)}}Pe.HEADER_SIZE=4;class lt extends Ee{constructor(f){super(f)}parseInformation(){let f=new F;return this.getGeneralDecoder().decodeAllCodes(f,lt.HEADER_SIZE)}}lt.HEADER_SIZE=5;class jt extends ke{constructor(f){super(f)}encodeCompressedWeight(f,m,x){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(m,x);this.addWeightCode(f,v);let y=this.checkWeight(v),E=1e5;for(let k=0;k<5;++k)y/E===0&&f.append("0"),E/=10;f.append(y)}}class rt extends jt{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()!=rt.HEADER_SIZE+jt.GTIN_SIZE+rt.WEIGHT_SIZE)throw new Z;let f=new F;return this.encodeCompressedGtin(f,rt.HEADER_SIZE),this.encodeCompressedWeight(f,rt.HEADER_SIZE+jt.GTIN_SIZE,rt.WEIGHT_SIZE),f.toString()}}rt.HEADER_SIZE=5,rt.WEIGHT_SIZE=15;class Ae extends rt{constructor(f){super(f)}addWeightCode(f,m){f.append("(3103)")}checkWeight(f){return f}}class Ge extends rt{constructor(f){super(f)}addWeightCode(f,m){m<1e4?f.append("(3202)"):f.append("(3203)")}checkWeight(f){return f<1e4?f:f-1e4}}class dt extends ke{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()<dt.HEADER_SIZE+ke.GTIN_SIZE)throw new Z;let f=new F;this.encodeCompressedGtin(f,dt.HEADER_SIZE);let m=this.getGeneralDecoder().extractNumericValueFromBitArray(dt.HEADER_SIZE+ke.GTIN_SIZE,dt.LAST_DIGIT_SIZE);f.append("(392"),f.append(m),f.append(")");let x=this.getGeneralDecoder().decodeGeneralPurposeField(dt.HEADER_SIZE+ke.GTIN_SIZE+dt.LAST_DIGIT_SIZE,null);return f.append(x.getNewString()),f.toString()}}dt.HEADER_SIZE=8,dt.LAST_DIGIT_SIZE=2;class At extends ke{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()<At.HEADER_SIZE+ke.GTIN_SIZE)throw new Z;let f=new F;this.encodeCompressedGtin(f,At.HEADER_SIZE);let m=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+ke.GTIN_SIZE,At.LAST_DIGIT_SIZE);f.append("(393"),f.append(m),f.append(")");let x=this.getGeneralDecoder().extractNumericValueFromBitArray(At.HEADER_SIZE+ke.GTIN_SIZE+At.LAST_DIGIT_SIZE,At.FIRST_THREE_DIGITS_SIZE);x/100==0&&f.append("0"),x/10==0&&f.append("0"),f.append(x);let v=this.getGeneralDecoder().decodeGeneralPurposeField(At.HEADER_SIZE+ke.GTIN_SIZE+At.LAST_DIGIT_SIZE+At.FIRST_THREE_DIGITS_SIZE,null);return f.append(v.getNewString()),f.toString()}}At.HEADER_SIZE=8,At.LAST_DIGIT_SIZE=2,At.FIRST_THREE_DIGITS_SIZE=10;class yt extends jt{constructor(f,m,x){super(f),this.dateCode=x,this.firstAIdigits=m}parseInformation(){if(this.getInformation().getSize()!=yt.HEADER_SIZE+yt.GTIN_SIZE+yt.WEIGHT_SIZE+yt.DATE_SIZE)throw new Z;let f=new F;return this.encodeCompressedGtin(f,yt.HEADER_SIZE),this.encodeCompressedWeight(f,yt.HEADER_SIZE+yt.GTIN_SIZE,yt.WEIGHT_SIZE),this.encodeCompressedDate(f,yt.HEADER_SIZE+yt.GTIN_SIZE+yt.WEIGHT_SIZE),f.toString()}encodeCompressedDate(f,m){let x=this.getGeneralDecoder().extractNumericValueFromBitArray(m,yt.DATE_SIZE);if(x==38400)return;f.append("("),f.append(this.dateCode),f.append(")");let v=x%32;x/=32;let y=x%12+1;x/=12;let E=x;E/10==0&&f.append("0"),f.append(E),y/10==0&&f.append("0"),f.append(y),v/10==0&&f.append("0"),f.append(v)}addWeightCode(f,m){f.append("("),f.append(this.firstAIdigits),f.append(m/1e5),f.append(")")}checkWeight(f){return f%1e5}}yt.HEADER_SIZE=8,yt.WEIGHT_SIZE=20,yt.DATE_SIZE=16;function Ct(oe){try{if(oe.get(1))return new Pe(oe);if(!oe.get(2))return new lt(oe);switch(Ne.extractNumericValueFromBitArray(oe,1,4)){case 4:return new Ae(oe);case 5:return new Ge(oe)}switch(Ne.extractNumericValueFromBitArray(oe,1,5)){case 12:return new dt(oe);case 13:return new At(oe)}switch(Ne.extractNumericValueFromBitArray(oe,1,7)){case 56:return new yt(oe,"310","11");case 57:return new yt(oe,"320","11");case 58:return new yt(oe,"310","13");case 59:return new yt(oe,"320","13");case 60:return new yt(oe,"310","15");case 61:return new yt(oe,"320","15");case 62:return new yt(oe,"310","17");case 63:return new yt(oe,"320","17")}}catch(f){throw console.log(f),new ve("unknown decoder: "+oe)}}class Xt{constructor(f,m,x,v){this.leftchar=f,this.rightchar=m,this.finderpattern=x,this.maybeLast=v}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(f,m){return f instanceof Xt?Xt.equalsOrNull(f.leftchar,m.leftchar)&&Xt.equalsOrNull(f.rightchar,m.rightchar)&&Xt.equalsOrNull(f.finderpattern,m.finderpattern):!1}static equalsOrNull(f,m){return f===null?m===null:Xt.equals(f,m)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vr{constructor(f,m,x){this.pairs=f,this.rowNumber=m,this.wasReversed=x}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(f){return this.checkEqualitity(this,f)}toString(){return"{ "+this.pairs+" }"}equals(f,m){return f instanceof vr?this.checkEqualitity(f,m)&&f.wasReversed===m.wasReversed:!1}checkEqualitity(f,m){if(!f||!m)return;let x;return f.forEach((v,y)=>{m.forEach(E=>{v.getLeftChar().getValue()===E.getLeftChar().getValue()&&v.getRightChar().getValue()===E.getRightChar().getValue()&&v.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(x=!0)})}),x}}class _t extends $r{constructor(f){super(...arguments),this.pairs=new Array(_t.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=f===!0}decodeRow(f,m,x){this.pairs.length=0,this.startFromEven=!1;try{return _t.constructResult(this.decodeRow2pairs(f,m))}catch(v){this.verbose&&console.log(v)}return this.pairs.length=0,this.startFromEven=!0,_t.constructResult(this.decodeRow2pairs(f,m))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(f,m){let x=!1;for(;!x;)try{this.pairs.push(this.retrieveNextPair(m,this.pairs,f))}catch(y){if(y instanceof Z){if(!this.pairs.length)throw new Z;x=!0}}if(this.checkChecksum())return this.pairs;let v;if(this.rows.length?v=!0:v=!1,this.storeRow(f,!1),v){let y=this.checkRowsBoolean(!1);if(y!=null||(y=this.checkRowsBoolean(!0),y!=null))return y}throw new Z}checkRowsBoolean(f){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,f&&(this.rows=this.rows.reverse());let m=null;try{m=this.checkRows(new Array,0)}catch(x){this.verbose&&console.log(x)}return f&&(this.rows=this.rows.reverse()),m}checkRows(f,m){for(let x=m;x<this.rows.length;x++){let v=this.rows[x];this.pairs.length=0;for(let E of f)this.pairs.push(E.getPairs());if(this.pairs.push(v.getPairs()),!_t.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let y=new Array(f);y.push(v);try{return this.checkRows(y,x+1)}catch(E){this.verbose&&console.log(E)}}throw new Z}static isValidSequence(f){for(let m of _t.FINDER_PATTERN_SEQUENCES){if(f.length>m.length)continue;let x=!0;for(let v=0;v<f.length;v++)if(f[v].getFinderPattern().getValue()!=m[v]){x=!1;break}if(x)return!0}return!1}storeRow(f,m){let x=0,v=!1,y=!1;for(;x<this.rows.length;){let E=this.rows[x];if(E.getRowNumber()>f){y=E.isEquivalent(this.pairs);break}v=E.isEquivalent(this.pairs),x++}y||v||_t.isPartialRow(this.pairs,this.rows)||(this.rows.push(x,new vr(this.pairs,f,m)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(f,m){for(let x of m)if(x.getPairs().length!==f.length){for(let v of x.getPairs())for(let y of f)if(Xt.equals(v,y))break}}static isPartialRow(f,m){for(let x of m){let v=!0;for(let y of f){let E=!1;for(let k of x.getPairs())if(y.equals(k)){E=!0;break}if(!E){v=!1;break}}if(v)return!0}return!1}getRows(){return this.rows}static constructResult(f){let m=Vn.buildBitArray(f),v=Ct(m).parseInformation(),y=f[0].getFinderPattern().getResultPoints(),E=f[f.length-1].getFinderPattern().getResultPoints(),k=[y[0],y[1],E[0],E[1]];return new X(v,null,null,k,se.RSS_EXPANDED,null)}checkChecksum(){let f=this.pairs.get(0),m=f.getLeftChar(),x=f.getRightChar();if(x==null)return!1;let v=x.getChecksumPortion(),y=2;for(let k=1;k<this.pairs.size();++k){let L=this.pairs.get(k);v+=L.getLeftChar().getChecksumPortion(),y++;let H=L.getRightChar();H!=null&&(v+=H.getChecksumPortion(),y++)}return v%=211,211*(y-4)+v==m.getValue()}static getNextSecondBar(f,m){let x;return f.get(m)?(x=f.getNextUnset(m),x=f.getNextSet(x)):(x=f.getNextSet(m),x=f.getNextUnset(x)),x}retrieveNextPair(f,m,x){let v=m.length%2==0;this.startFromEven&&(v=!v);let y,E=!0,k=-1;do this.findNextPair(f,m,k),y=this.parseFoundFinderPattern(f,x,v),y==null?k=_t.getNextSecondBar(f,this.startEnd[0]):E=!1;while(E);let L=this.decodeDataCharacter(f,y,v,!0);if(!this.isEmptyPair(m)&&m[m.length-1].mustBeLast())throw new Z;let H;try{H=this.decodeDataCharacter(f,y,v,!1)}catch(Q){H=null,this.verbose&&console.log(Q)}return new Xt(L,H,y,!0)}isEmptyPair(f){return f.length===0}findNextPair(f,m,x){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let y=f.getSize(),E;x>=0?E=x:this.isEmptyPair(m)?E=0:E=m[m.length-1].getFinderPattern().getStartEnd()[1];let k=m.length%2!=0;this.startFromEven&&(k=!k);let L=!1;for(;E<y&&(L=!f.get(E),!!L);)E++;let H=0,Q=E;for(let le=E;le<y;le++)if(f.get(le)!=L)v[H]++;else{if(H==3){if(k&&_t.reverseCounters(v),_t.isFinderPattern(v)){this.startEnd[0]=Q,this.startEnd[1]=le;return}k&&_t.reverseCounters(v),Q+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,H--}else H++;v[H]=1,L=!L}throw new Z}static reverseCounters(f){let m=f.length;for(let x=0;x<m/2;++x){let v=f[x];f[x]=f[m-x-1],f[m-x-1]=v}}parseFoundFinderPattern(f,m,x){let v,y,E;if(x){let H=this.startEnd[0]-1;for(;H>=0&&!f.get(H);)H--;H++,v=this.startEnd[0]-H,y=H,E=this.startEnd[1]}else y=this.startEnd[0],E=f.getNextUnset(this.startEnd[1]+1),v=E-this.startEnd[1];let k=this.getDecodeFinderCounters();w.arraycopy(k,0,k,1,k.length-1),k[0]=v;let L;try{L=this.parseFinderValue(k,_t.FINDER_PATTERNS)}catch{return null}return new fr(L,[y,E],y,E,m)}decodeDataCharacter(f,m,x,v){let y=this.getDataCharacterCounters();for(let ha=0;ha<y.length;ha++)y[ha]=0;if(v)_t.recordPatternInReverse(f,m.getStartEnd()[0],y);else{_t.recordPattern(f,m.getStartEnd()[1],y);for(let ha=0,ni=y.length-1;ha<ni;ha++,ni--){let Io=y[ha];y[ha]=y[ni],y[ni]=Io}}let E=17,k=et.sum(new Int32Array(y))/E,L=(m.getStartEnd()[1]-m.getStartEnd()[0])/15;if(Math.abs(k-L)/L>.3)throw new Z;let H=this.getOddCounts(),Q=this.getEvenCounts(),le=this.getOddRoundingErrors(),fe=this.getEvenRoundingErrors();for(let ha=0;ha<y.length;ha++){let ni=1*y[ha]/k,Io=ni+.5;if(Io<1){if(ni<.3)throw new Z;Io=1}else if(Io>8){if(ni>8.7)throw new Z;Io=8}let sf=ha/2;ha&1?(Q[sf]=Io,fe[sf]=ni-Io):(H[sf]=Io,le[sf]=ni-Io)}this.adjustOddEvenCounts(E);let Re=4*m.getValue()+(x?0:2)+(v?0:1)-1,$e=0,We=0;for(let ha=H.length-1;ha>=0;ha--){if(_t.isNotA1left(m,x,v)){let ni=_t.WEIGHTS[Re][2*ha];We+=H[ha]*ni}$e+=H[ha]}let ot=0;for(let ha=Q.length-1;ha>=0;ha--)if(_t.isNotA1left(m,x,v)){let ni=_t.WEIGHTS[Re][2*ha+1];ot+=Q[ha]*ni}let Nt=We+ot;if($e&1||$e>13||$e<4)throw new Z;let Bt=(13-$e)/2,Kt=_t.SYMBOL_WIDEST[Bt],$t=9-Kt,Wr=dn.getRSSvalue(H,Kt,!0),Qr=dn.getRSSvalue(Q,$t,!1),ri=_t.EVEN_TOTAL_SUBSET[Bt],Hi=_t.GSUM[Bt],Ei=Wr*ri+Qr+Hi;return new jn(Ei,Nt)}static isNotA1left(f,m,x){return!(f.getValue()==0&&m&&x)}adjustOddEvenCounts(f){let m=et.sum(new Int32Array(this.getOddCounts())),x=et.sum(new Int32Array(this.getEvenCounts())),v=!1,y=!1;m>13?y=!0:m<4&&(v=!0);let E=!1,k=!1;x>13?k=!0:x<4&&(E=!0);let L=m+x-f,H=(m&1)==1,Q=(x&1)==0;if(L==1)if(H){if(Q)throw new Z;y=!0}else{if(!Q)throw new Z;k=!0}else if(L==-1)if(H){if(Q)throw new Z;v=!0}else{if(!Q)throw new Z;E=!0}else if(L==0){if(H){if(!Q)throw new Z;m<x?(v=!0,k=!0):(y=!0,E=!0)}else if(Q)throw new Z}else throw new Z;if(v){if(y)throw new Z;_t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&_t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(k)throw new Z;_t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}k&&_t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}_t.SYMBOL_WIDEST=[7,5,4,3,1],_t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],_t.GSUM=[0,348,1388,2948,3988],_t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],_t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],_t.FINDER_PAT_A=0,_t.FINDER_PAT_B=1,_t.FINDER_PAT_C=2,_t.FINDER_PAT_D=3,_t.FINDER_PAT_E=4,_t.FINDER_PAT_F=5,_t.FINDER_PATTERN_SEQUENCES=[[_t.FINDER_PAT_A,_t.FINDER_PAT_A],[_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B],[_t.FINDER_PAT_A,_t.FINDER_PAT_C,_t.FINDER_PAT_B,_t.FINDER_PAT_D],[_t.FINDER_PAT_A,_t.FINDER_PAT_E,_t.FINDER_PAT_B,_t.FINDER_PAT_D,_t.FINDER_PAT_C],[_t.FINDER_PAT_A,_t.FINDER_PAT_E,_t.FINDER_PAT_B,_t.FINDER_PAT_D,_t.FINDER_PAT_D,_t.FINDER_PAT_F],[_t.FINDER_PAT_A,_t.FINDER_PAT_E,_t.FINDER_PAT_B,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_F,_t.FINDER_PAT_F],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_D],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_E],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_F,_t.FINDER_PAT_F],[_t.FINDER_PAT_A,_t.FINDER_PAT_A,_t.FINDER_PAT_B,_t.FINDER_PAT_B,_t.FINDER_PAT_C,_t.FINDER_PAT_D,_t.FINDER_PAT_D,_t.FINDER_PAT_E,_t.FINDER_PAT_E,_t.FINDER_PAT_F,_t.FINDER_PAT_F]],_t.MAX_PAIRS=11;class Hr extends jn{constructor(f,m,x){super(f,m),this.count=0,this.finderPattern=x}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Fr extends $r{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(f,m,x){const v=this.decodePair(m,!1,f,x);Fr.addOrTally(this.possibleLeftPairs,v),m.reverse();let y=this.decodePair(m,!0,f,x);Fr.addOrTally(this.possibleRightPairs,y),m.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let k of this.possibleRightPairs)if(k.getCount()>1&&Fr.checkChecksum(E,k))return Fr.constructResult(E,k)}throw new Z}static addOrTally(f,m){if(m==null)return;let x=!1;for(let v of f)if(v.getValue()===m.getValue()){v.incrementCount(),x=!0;break}x||f.push(m)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(f,m){let x=4537077*f.getValue()+m.getValue(),v=new String(x).toString(),y=new F;for(let H=13-v.length;H>0;H--)y.append("0");y.append(v);let E=0;for(let H=0;H<13;H++){let Q=y.charAt(H).charCodeAt(0)-48;E+=H&1?Q:3*Q}E=10-E%10,E===10&&(E=0),y.append(E.toString());let k=f.getFinderPattern().getResultPoints(),L=m.getFinderPattern().getResultPoints();return new X(y.toString(),null,0,[k[0],k[1],L[0],L[1]],se.RSS_14,new Date().getTime())}static checkChecksum(f,m){let x=(f.getChecksumPortion()+16*m.getChecksumPortion())%79,v=9*f.getFinderPattern().getValue()+m.getFinderPattern().getValue();return v>72&&v--,v>8&&v--,x===v}decodePair(f,m,x,v){try{let y=this.findFinderPattern(f,m),E=this.parseFoundFinderPattern(f,x,m,y),k=v==null?null:v.get(G.NEED_RESULT_POINT_CALLBACK);if(k!=null){let Q=(y[0]+y[1])/2;m&&(Q=f.getSize()-1-Q),k.foundPossibleResultPoint(new Ve(Q,x))}let L=this.decodeDataCharacter(f,E,!0),H=this.decodeDataCharacter(f,E,!1);return new Hr(1597*L.getValue()+H.getValue(),L.getChecksumPortion()+4*H.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(f,m,x){let v=this.getDataCharacterCounters();for(let ot=0;ot<v.length;ot++)v[ot]=0;if(x)sr.recordPatternInReverse(f,m.getStartEnd()[0],v);else{sr.recordPattern(f,m.getStartEnd()[1]+1,v);for(let ot=0,Nt=v.length-1;ot<Nt;ot++,Nt--){let Bt=v[ot];v[ot]=v[Nt],v[Nt]=Bt}}let y=x?16:15,E=et.sum(new Int32Array(v))/y,k=this.getOddCounts(),L=this.getEvenCounts(),H=this.getOddRoundingErrors(),Q=this.getEvenRoundingErrors();for(let ot=0;ot<v.length;ot++){let Nt=v[ot]/E,Bt=Math.floor(Nt+.5);Bt<1?Bt=1:Bt>8&&(Bt=8);let Kt=Math.floor(ot/2);ot&1?(L[Kt]=Bt,Q[Kt]=Nt-Bt):(k[Kt]=Bt,H[Kt]=Nt-Bt)}this.adjustOddEvenCounts(x,y);let le=0,fe=0;for(let ot=k.length-1;ot>=0;ot--)fe*=9,fe+=k[ot],le+=k[ot];let Re=0,$e=0;for(let ot=L.length-1;ot>=0;ot--)Re*=9,Re+=L[ot],$e+=L[ot];let We=fe+3*Re;if(x){if(le&1||le>12||le<4)throw new Z;let ot=(12-le)/2,Nt=Fr.OUTSIDE_ODD_WIDEST[ot],Bt=9-Nt,Kt=dn.getRSSvalue(k,Nt,!1),$t=dn.getRSSvalue(L,Bt,!0),Wr=Fr.OUTSIDE_EVEN_TOTAL_SUBSET[ot],Qr=Fr.OUTSIDE_GSUM[ot];return new jn(Kt*Wr+$t+Qr,We)}else{if($e&1||$e>10||$e<4)throw new Z;let ot=(10-$e)/2,Nt=Fr.INSIDE_ODD_WIDEST[ot],Bt=9-Nt,Kt=dn.getRSSvalue(k,Nt,!0),$t=dn.getRSSvalue(L,Bt,!1),Wr=Fr.INSIDE_ODD_TOTAL_SUBSET[ot],Qr=Fr.INSIDE_GSUM[ot];return new jn($t*Wr+Kt+Qr,We)}}findFinderPattern(f,m){let x=this.getDecodeFinderCounters();x[0]=0,x[1]=0,x[2]=0,x[3]=0;let v=f.getSize(),y=!1,E=0;for(;E<v&&(y=!f.get(E),m!==y);)E++;let k=0,L=E;for(let H=E;H<v;H++)if(f.get(H)!==y)x[k]++;else{if(k===3){if($r.isFinderPattern(x))return[L,H];L+=x[0]+x[1],x[0]=x[2],x[1]=x[3],x[2]=0,x[3]=0,k--}else k++;x[k]=1,y=!y}throw new Z}parseFoundFinderPattern(f,m,x,v){let y=f.get(v[0]),E=v[0]-1;for(;E>=0&&y!==f.get(E);)E--;E++;const k=v[0]-E,L=this.getDecodeFinderCounters(),H=new Int32Array(L.length);w.arraycopy(L,0,H,1,L.length-1),H[0]=k;const Q=this.parseFinderValue(H,Fr.FINDER_PATTERNS);let le=E,fe=v[1];return x&&(le=f.getSize()-1-le,fe=f.getSize()-1-fe),new fr(Q,[E,v[1]],le,fe,m)}adjustOddEvenCounts(f,m){let x=et.sum(new Int32Array(this.getOddCounts())),v=et.sum(new Int32Array(this.getEvenCounts())),y=!1,E=!1,k=!1,L=!1;f?(x>12?E=!0:x<4&&(y=!0),v>12?L=!0:v<4&&(k=!0)):(x>11?E=!0:x<5&&(y=!0),v>10?L=!0:v<4&&(k=!0));let H=x+v-m,Q=(x&1)===(f?1:0),le=(v&1)===1;if(H===1)if(Q){if(le)throw new Z;E=!0}else{if(!le)throw new Z;L=!0}else if(H===-1)if(Q){if(le)throw new Z;y=!0}else{if(!le)throw new Z;k=!0}else if(H===0){if(Q){if(!le)throw new Z;x<v?(y=!0,L=!0):(E=!0,k=!0)}else if(le)throw new Z}else throw new Z;if(y){if(E)throw new Z;$r.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&$r.decrement(this.getOddCounts(),this.getOddRoundingErrors()),k){if(L)throw new Z;$r.increment(this.getEvenCounts(),this.getOddRoundingErrors())}L&&$r.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Fr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Fr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Fr.OUTSIDE_GSUM=[0,161,961,2015,2715],Fr.INSIDE_GSUM=[0,336,1036,1516],Fr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Fr.INSIDE_ODD_WIDEST=[2,4,6,8],Fr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ua extends sr{constructor(f,m){super(),this.readers=[],this.verbose=m===!0;const x=f?f.get(G.POSSIBLE_FORMATS):null,v=f&&f.get(G.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;x?((x.includes(se.EAN_13)||x.includes(se.UPC_A)||x.includes(se.EAN_8)||x.includes(se.UPC_E))&&this.readers.push(new en(f)),x.includes(se.CODE_39)&&this.readers.push(new ir(v)),x.includes(se.CODE_128)&&this.readers.push(new it),x.includes(se.ITF)&&this.readers.push(new be),x.includes(se.RSS_14)&&this.readers.push(new Fr),x.includes(se.RSS_EXPANDED)&&this.readers.push(new _t(this.verbose))):(this.readers.push(new en(f)),this.readers.push(new ir),this.readers.push(new en(f)),this.readers.push(new it),this.readers.push(new be),this.readers.push(new Fr),this.readers.push(new _t(this.verbose)))}decodeRow(f,m,x){for(let v=0;v<this.readers.length;v++)try{return this.readers[v].decodeRow(f,m,x)}catch{}throw new Z}reset(){this.readers.forEach(f=>f.reset())}}class wi extends Y{constructor(f=500,m){super(new Ua(m),f,m)}}class fn{constructor(f,m,x){this.ecCodewords=f,this.ecBlocks=[m],x&&this.ecBlocks.push(x)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class nn{constructor(f,m){this.count=f,this.dataCodewords=m}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class an{constructor(f,m,x,v,y,E){this.versionNumber=f,this.symbolSizeRows=m,this.symbolSizeColumns=x,this.dataRegionSizeRows=v,this.dataRegionSizeColumns=y,this.ecBlocks=E;let k=0;const L=E.getECCodewords(),H=E.getECBlocks();for(let Q of H)k+=Q.getCount()*(Q.getDataCodewords()+L);this.totalCodewords=k}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(f,m){if(f&1||m&1)throw new O;for(let x of an.VERSIONS)if(x.symbolSizeRows===f&&x.symbolSizeColumns===m)return x;throw new O}toString(){return""+this.versionNumber}static buildVersions(){return[new an(1,10,10,8,8,new fn(5,new nn(1,3))),new an(2,12,12,10,10,new fn(7,new nn(1,5))),new an(3,14,14,12,12,new fn(10,new nn(1,8))),new an(4,16,16,14,14,new fn(12,new nn(1,12))),new an(5,18,18,16,16,new fn(14,new nn(1,18))),new an(6,20,20,18,18,new fn(18,new nn(1,22))),new an(7,22,22,20,20,new fn(20,new nn(1,30))),new an(8,24,24,22,22,new fn(24,new nn(1,36))),new an(9,26,26,24,24,new fn(28,new nn(1,44))),new an(10,32,32,14,14,new fn(36,new nn(1,62))),new an(11,36,36,16,16,new fn(42,new nn(1,86))),new an(12,40,40,18,18,new fn(48,new nn(1,114))),new an(13,44,44,20,20,new fn(56,new nn(1,144))),new an(14,48,48,22,22,new fn(68,new nn(1,174))),new an(15,52,52,24,24,new fn(42,new nn(2,102))),new an(16,64,64,14,14,new fn(56,new nn(2,140))),new an(17,72,72,16,16,new fn(36,new nn(4,92))),new an(18,80,80,18,18,new fn(48,new nn(4,114))),new an(19,88,88,20,20,new fn(56,new nn(4,144))),new an(20,96,96,22,22,new fn(68,new nn(4,174))),new an(21,104,104,24,24,new fn(56,new nn(6,136))),new an(22,120,120,18,18,new fn(68,new nn(6,175))),new an(23,132,132,20,20,new fn(62,new nn(8,163))),new an(24,144,144,22,22,new fn(62,new nn(8,156),new nn(2,155))),new an(25,8,18,6,16,new fn(7,new nn(1,5))),new an(26,8,32,6,14,new fn(11,new nn(1,10))),new an(27,12,26,10,24,new fn(14,new nn(1,16))),new an(28,12,36,10,16,new fn(18,new nn(1,22))),new an(29,16,36,14,16,new fn(24,new nn(1,32))),new an(30,16,48,14,22,new fn(28,new nn(1,49)))]}}an.VERSIONS=an.buildVersions();class Wa{constructor(f){const m=f.getHeight();if(m<8||m>144||m&1)throw new O;this.version=Wa.readVersion(f),this.mappingBitMatrix=this.extractDataRegion(f),this.readMappingMatrix=new ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(f){const m=f.getHeight(),x=f.getWidth();return an.getVersionForDimensions(m,x)}readCodewords(){const f=new Int8Array(this.version.getTotalCodewords());let m=0,x=4,v=0;const y=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let k=!1,L=!1,H=!1,Q=!1;do if(x===y&&v===0&&!k)f[m++]=this.readCorner1(y,E)&255,x-=2,v+=2,k=!0;else if(x===y-2&&v===0&&E&3&&!L)f[m++]=this.readCorner2(y,E)&255,x-=2,v+=2,L=!0;else if(x===y+4&&v===2&&!(E&7)&&!H)f[m++]=this.readCorner3(y,E)&255,x-=2,v+=2,H=!0;else if(x===y-2&&v===0&&(E&7)===4&&!Q)f[m++]=this.readCorner4(y,E)&255,x-=2,v+=2,Q=!0;else{do x<y&&v>=0&&!this.readMappingMatrix.get(v,x)&&(f[m++]=this.readUtah(x,v,y,E)&255),x-=2,v+=2;while(x>=0&&v<E);x+=1,v+=3;do x>=0&&v<E&&!this.readMappingMatrix.get(v,x)&&(f[m++]=this.readUtah(x,v,y,E)&255),x+=2,v-=2;while(x<y&&v>=0);x+=3,v+=1}while(x<y||v<E);if(m!==this.version.getTotalCodewords())throw new O;return f}readModule(f,m,x,v){return f<0&&(f+=x,m+=4-(x+4&7)),m<0&&(m+=v,f+=4-(v+4&7)),this.readMappingMatrix.set(m,f),this.mappingBitMatrix.get(m,f)}readUtah(f,m,x,v){let y=0;return this.readModule(f-2,m-2,x,v)&&(y|=1),y<<=1,this.readModule(f-2,m-1,x,v)&&(y|=1),y<<=1,this.readModule(f-1,m-2,x,v)&&(y|=1),y<<=1,this.readModule(f-1,m-1,x,v)&&(y|=1),y<<=1,this.readModule(f-1,m,x,v)&&(y|=1),y<<=1,this.readModule(f,m-2,x,v)&&(y|=1),y<<=1,this.readModule(f,m-1,x,v)&&(y|=1),y<<=1,this.readModule(f,m,x,v)&&(y|=1),y}readCorner1(f,m){let x=0;return this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,1,f,m)&&(x|=1),x<<=1,this.readModule(f-1,2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x<<=1,this.readModule(2,m-1,f,m)&&(x|=1),x<<=1,this.readModule(3,m-1,f,m)&&(x|=1),x}readCorner2(f,m){let x=0;return this.readModule(f-3,0,f,m)&&(x|=1),x<<=1,this.readModule(f-2,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(0,m-4,f,m)&&(x|=1),x<<=1,this.readModule(0,m-3,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x}readCorner3(f,m){let x=0;return this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,m-1,f,m)&&(x|=1),x<<=1,this.readModule(0,m-3,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-3,f,m)&&(x|=1),x<<=1,this.readModule(1,m-2,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x}readCorner4(f,m){let x=0;return this.readModule(f-3,0,f,m)&&(x|=1),x<<=1,this.readModule(f-2,0,f,m)&&(x|=1),x<<=1,this.readModule(f-1,0,f,m)&&(x|=1),x<<=1,this.readModule(0,m-2,f,m)&&(x|=1),x<<=1,this.readModule(0,m-1,f,m)&&(x|=1),x<<=1,this.readModule(1,m-1,f,m)&&(x|=1),x<<=1,this.readModule(2,m-1,f,m)&&(x|=1),x<<=1,this.readModule(3,m-1,f,m)&&(x|=1),x}extractDataRegion(f){const m=this.version.getSymbolSizeRows(),x=this.version.getSymbolSizeColumns();if(f.getHeight()!==m)throw new h("Dimension of bitMatrix must match the version size");const v=this.version.getDataRegionSizeRows(),y=this.version.getDataRegionSizeColumns(),E=m/v|0,k=x/y|0,L=E*v,H=k*y,Q=new ee(H,L);for(let le=0;le<E;++le){const fe=le*v;for(let Re=0;Re<k;++Re){const $e=Re*y;for(let We=0;We<v;++We){const ot=le*(v+2)+1+We,Nt=fe+We;for(let Bt=0;Bt<y;++Bt){const Kt=Re*(y+2)+1+Bt;if(f.get(Kt,ot)){const $t=$e+Bt;Q.set($t,Nt)}}}}}return Q}}class _i{constructor(f,m){this.numDataCodewords=f,this.codewords=m}static getDataBlocks(f,m){const x=m.getECBlocks();let v=0;const y=x.getECBlocks();for(let We of y)v+=We.getCount();const E=new Array(v);let k=0;for(let We of y)for(let ot=0;ot<We.getCount();ot++){const Nt=We.getDataCodewords(),Bt=x.getECCodewords()+Nt;E[k++]=new _i(Nt,new Uint8Array(Bt))}const H=E[0].codewords.length-x.getECCodewords(),Q=H-1;let le=0;for(let We=0;We<Q;We++)for(let ot=0;ot<k;ot++)E[ot].codewords[We]=f[le++];const fe=m.getVersionNumber()===24,Re=fe?8:k;for(let We=0;We<Re;We++)E[We].codewords[H-1]=f[le++];const $e=E[0].codewords.length;for(let We=H;We<$e;We++)for(let ot=0;ot<k;ot++){const Nt=fe?(ot+8)%k:ot,Bt=fe&&Nt>7?We-1:We;E[Nt].codewords[Bt]=f[le++]}if(le!==f.length)throw new h;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Rn{constructor(f){this.bytes=f,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(f){if(f<1||f>32||f>this.available())throw new h(""+f);let m=0,x=this.bitOffset,v=this.byteOffset;const y=this.bytes;if(x>0){const E=8-x,k=f<E?f:E,L=E-k,H=255>>8-k<<L;m=(y[v]&H)>>L,f-=k,x+=k,x===8&&(x=0,v++)}if(f>0){for(;f>=8;)m=m<<8|y[v]&255,v++,f-=8;if(f>0){const E=8-f,k=255>>E<<E;m=m<<f|(y[v]&k)>>E,x+=f}}return this.bitOffset=x,this.byteOffset=v,m}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Xn;(function(oe){oe[oe.PAD_ENCODE=0]="PAD_ENCODE",oe[oe.ASCII_ENCODE=1]="ASCII_ENCODE",oe[oe.C40_ENCODE=2]="C40_ENCODE",oe[oe.TEXT_ENCODE=3]="TEXT_ENCODE",oe[oe.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",oe[oe.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",oe[oe.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xn||(Xn={}));class As{static decode(f){const m=new Rn(f),x=new F,v=new F,y=new Array;let E=Xn.ASCII_ENCODE;do if(E===Xn.ASCII_ENCODE)E=this.decodeAsciiSegment(m,x,v);else{switch(E){case Xn.C40_ENCODE:this.decodeC40Segment(m,x);break;case Xn.TEXT_ENCODE:this.decodeTextSegment(m,x);break;case Xn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(m,x);break;case Xn.EDIFACT_ENCODE:this.decodeEdifactSegment(m,x);break;case Xn.BASE256_ENCODE:this.decodeBase256Segment(m,x,y);break;default:throw new O}E=Xn.ASCII_ENCODE}while(E!==Xn.PAD_ENCODE&&m.available()>0);return v.length()>0&&x.append(v.toString()),new pe(f,x.toString(),y.length===0?null:y,null)}static decodeAsciiSegment(f,m,x){let v=!1;do{let y=f.readBits(8);if(y===0)throw new O;if(y<=128)return v&&(y+=128),m.append(String.fromCharCode(y-1)),Xn.ASCII_ENCODE;if(y===129)return Xn.PAD_ENCODE;if(y<=229){const E=y-130;E<10&&m.append("0"),m.append(""+E)}else switch(y){case 230:return Xn.C40_ENCODE;case 231:return Xn.BASE256_ENCODE;case 232:m.append("");break;case 233:case 234:break;case 235:v=!0;break;case 236:m.append("[)>05"),x.insert(0,"");break;case 237:m.append("[)>06"),x.insert(0,"");break;case 238:return Xn.ANSIX12_ENCODE;case 239:return Xn.TEXT_ENCODE;case 240:return Xn.EDIFACT_ENCODE;case 241:break;default:if(y!==254||f.available()!==0)throw new O;break}}while(f.available()>0);return Xn.ASCII_ENCODE}static decodeC40Segment(f,m){let x=!1;const v=[];let y=0;do{if(f.available()===8)return;const E=f.readBits(8);if(E===254)return;this.parseTwoBytes(E,f.readBits(8),v);for(let k=0;k<3;k++){const L=v[k];switch(y){case 0:if(L<3)y=L+1;else if(L<this.C40_BASIC_SET_CHARS.length){const H=this.C40_BASIC_SET_CHARS[L];x?(m.append(String.fromCharCode(H.charCodeAt(0)+128)),x=!1):m.append(H)}else throw new O;break;case 1:x?(m.append(String.fromCharCode(L+128)),x=!1):m.append(String.fromCharCode(L)),y=0;break;case 2:if(L<this.C40_SHIFT2_SET_CHARS.length){const H=this.C40_SHIFT2_SET_CHARS[L];x?(m.append(String.fromCharCode(H.charCodeAt(0)+128)),x=!1):m.append(H)}else switch(L){case 27:m.append("");break;case 30:x=!0;break;default:throw new O}y=0;break;case 3:x?(m.append(String.fromCharCode(L+224)),x=!1):m.append(String.fromCharCode(L+96)),y=0;break;default:throw new O}}}while(f.available()>0)}static decodeTextSegment(f,m){let x=!1,v=[],y=0;do{if(f.available()===8)return;const E=f.readBits(8);if(E===254)return;this.parseTwoBytes(E,f.readBits(8),v);for(let k=0;k<3;k++){const L=v[k];switch(y){case 0:if(L<3)y=L+1;else if(L<this.TEXT_BASIC_SET_CHARS.length){const H=this.TEXT_BASIC_SET_CHARS[L];x?(m.append(String.fromCharCode(H.charCodeAt(0)+128)),x=!1):m.append(H)}else throw new O;break;case 1:x?(m.append(String.fromCharCode(L+128)),x=!1):m.append(String.fromCharCode(L)),y=0;break;case 2:if(L<this.TEXT_SHIFT2_SET_CHARS.length){const H=this.TEXT_SHIFT2_SET_CHARS[L];x?(m.append(String.fromCharCode(H.charCodeAt(0)+128)),x=!1):m.append(H)}else switch(L){case 27:m.append("");break;case 30:x=!0;break;default:throw new O}y=0;break;case 3:if(L<this.TEXT_SHIFT3_SET_CHARS.length){const H=this.TEXT_SHIFT3_SET_CHARS[L];x?(m.append(String.fromCharCode(H.charCodeAt(0)+128)),x=!1):m.append(H),y=0}else throw new O;break;default:throw new O}}}while(f.available()>0)}static decodeAnsiX12Segment(f,m){const x=[];do{if(f.available()===8)return;const v=f.readBits(8);if(v===254)return;this.parseTwoBytes(v,f.readBits(8),x);for(let y=0;y<3;y++){const E=x[y];switch(E){case 0:m.append("\r");break;case 1:m.append("*");break;case 2:m.append(">");break;case 3:m.append(" ");break;default:if(E<14)m.append(String.fromCharCode(E+44));else if(E<40)m.append(String.fromCharCode(E+51));else throw new O;break}}}while(f.available()>0)}static parseTwoBytes(f,m,x){let v=(f<<8)+m-1,y=Math.floor(v/1600);x[0]=y,v-=y*1600,y=Math.floor(v/40),x[1]=y,x[2]=v-y*40}static decodeEdifactSegment(f,m){do{if(f.available()<=16)return;for(let x=0;x<4;x++){let v=f.readBits(6);if(v===31){const y=8-f.getBitOffset();y!==8&&f.readBits(y);return}v&32||(v|=64),m.append(String.fromCharCode(v))}}while(f.available()>0)}static decodeBase256Segment(f,m,x){let v=1+f.getByteOffset();const y=this.unrandomize255State(f.readBits(8),v++);let E;if(y===0?E=f.available()/8|0:y<250?E=y:E=250*(y-249)+this.unrandomize255State(f.readBits(8),v++),E<0)throw new O;const k=new Uint8Array(E);for(let L=0;L<E;L++){if(f.available()<8)throw new O;k[L]=this.unrandomize255State(f.readBits(8),v++)}x.push(k);try{m.append(P.decode(k,B.ISO88591))}catch(L){throw new ve("Platform does not support required encoding: "+L.message)}}static unrandomize255State(f,m){const x=149*m%255+1,v=f-x;return v>=0?v:v+256}}As.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],As.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],As.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],As.TEXT_SHIFT2_SET_CHARS=As.C40_SHIFT2_SET_CHARS,As.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Fi{constructor(){this.rsDecoder=new Ht(Me.DATA_MATRIX_FIELD_256)}decode(f){const m=new Wa(f),x=m.getVersion(),v=m.readCodewords(),y=_i.getDataBlocks(v,x);let E=0;for(let H of y)E+=H.getNumDataCodewords();const k=new Uint8Array(E),L=y.length;for(let H=0;H<L;H++){const Q=y[H],le=Q.getCodewords(),fe=Q.getNumDataCodewords();this.correctErrors(le,fe);for(let Re=0;Re<fe;Re++)k[Re*L+H]=le[Re]}return As.decode(k)}correctErrors(f,m){const x=new Int32Array(f);try{this.rsDecoder.decode(x,f.length-m)}catch{throw new g}for(let v=0;v<m;v++)f[v]=x[v]}}class Br{constructor(f){this.image=f,this.rectangleDetector=new Yt(this.image)}detect(){const f=this.rectangleDetector.detect();let m=this.detectSolid1(f);if(m=this.detectSolid2(m),m[3]=this.correctTopRight(m),!m[3])throw new Z;m=this.shiftToModuleCenter(m);const x=m[0],v=m[1],y=m[2],E=m[3];let k=this.transitionsBetween(x,E)+1,L=this.transitionsBetween(y,E)+1;(k&1)===1&&(k+=1),(L&1)===1&&(L+=1),4*k<7*L&&4*L<7*k&&(k=L=Math.max(k,L));let H=Br.sampleGrid(this.image,x,v,y,E,k,L);return new zt(H,[x,v,y,E])}static shiftPoint(f,m,x){let v=(m.getX()-f.getX())/(x+1),y=(m.getY()-f.getY())/(x+1);return new Ve(f.getX()+v,f.getY()+y)}static moveAway(f,m,x){let v=f.getX(),y=f.getY();return v<m?v-=1:v+=1,y<x?y-=1:y+=1,new Ve(v,y)}detectSolid1(f){let m=f[0],x=f[1],v=f[3],y=f[2],E=this.transitionsBetween(m,x),k=this.transitionsBetween(x,v),L=this.transitionsBetween(v,y),H=this.transitionsBetween(y,m),Q=E,le=[y,m,x,v];return Q>k&&(Q=k,le[0]=m,le[1]=x,le[2]=v,le[3]=y),Q>L&&(Q=L,le[0]=x,le[1]=v,le[2]=y,le[3]=m),Q>H&&(le[0]=v,le[1]=y,le[2]=m,le[3]=x),le}detectSolid2(f){let m=f[0],x=f[1],v=f[2],y=f[3],E=this.transitionsBetween(m,y),k=Br.shiftPoint(x,v,(E+1)*4),L=Br.shiftPoint(v,x,(E+1)*4),H=this.transitionsBetween(k,m),Q=this.transitionsBetween(L,y);return H<Q?(f[0]=m,f[1]=x,f[2]=v,f[3]=y):(f[0]=x,f[1]=v,f[2]=y,f[3]=m),f}correctTopRight(f){let m=f[0],x=f[1],v=f[2],y=f[3],E=this.transitionsBetween(m,y),k=this.transitionsBetween(x,y),L=Br.shiftPoint(m,x,(k+1)*4),H=Br.shiftPoint(v,x,(E+1)*4);E=this.transitionsBetween(L,y),k=this.transitionsBetween(H,y);let Q=new Ve(y.getX()+(v.getX()-x.getX())/(E+1),y.getY()+(v.getY()-x.getY())/(E+1)),le=new Ve(y.getX()+(m.getX()-x.getX())/(k+1),y.getY()+(m.getY()-x.getY())/(k+1));if(!this.isValid(Q))return this.isValid(le)?le:null;if(!this.isValid(le))return Q;let fe=this.transitionsBetween(L,Q)+this.transitionsBetween(H,Q),Re=this.transitionsBetween(L,le)+this.transitionsBetween(H,le);return fe>Re?Q:le}shiftToModuleCenter(f){let m=f[0],x=f[1],v=f[2],y=f[3],E=this.transitionsBetween(m,y)+1,k=this.transitionsBetween(v,y)+1,L=Br.shiftPoint(m,x,k*4),H=Br.shiftPoint(v,x,E*4);E=this.transitionsBetween(L,y)+1,k=this.transitionsBetween(H,y)+1,(E&1)===1&&(E+=1),(k&1)===1&&(k+=1);let Q=(m.getX()+x.getX()+v.getX()+y.getX())/4,le=(m.getY()+x.getY()+v.getY()+y.getY())/4;m=Br.moveAway(m,Q,le),x=Br.moveAway(x,Q,le),v=Br.moveAway(v,Q,le),y=Br.moveAway(y,Q,le);let fe,Re;return L=Br.shiftPoint(m,x,k*4),L=Br.shiftPoint(L,y,E*4),fe=Br.shiftPoint(x,m,k*4),fe=Br.shiftPoint(fe,v,E*4),H=Br.shiftPoint(v,y,k*4),H=Br.shiftPoint(H,x,E*4),Re=Br.shiftPoint(y,v,k*4),Re=Br.shiftPoint(Re,m,E*4),[L,fe,H,Re]}isValid(f){return f.getX()>=0&&f.getX()<this.image.getWidth()&&f.getY()>0&&f.getY()<this.image.getHeight()}static sampleGrid(f,m,x,v,y,E,k){return kt.getInstance().sampleGrid(f,E,k,.5,.5,E-.5,.5,E-.5,k-.5,.5,k-.5,m.getX(),m.getY(),y.getX(),y.getY(),v.getX(),v.getY(),x.getX(),x.getY())}transitionsBetween(f,m){let x=Math.trunc(f.getX()),v=Math.trunc(f.getY()),y=Math.trunc(m.getX()),E=Math.trunc(m.getY()),k=Math.abs(E-v)>Math.abs(y-x);if(k){let We=x;x=v,v=We,We=y,y=E,E=We}let L=Math.abs(y-x),H=Math.abs(E-v),Q=-L/2,le=v<E?1:-1,fe=x<y?1:-1,Re=0,$e=this.image.get(k?v:x,k?x:v);for(let We=x,ot=v;We!==y;We+=fe){let Nt=this.image.get(k?ot:We,k?We:ot);if(Nt!==$e&&(Re++,$e=Nt),Q+=H,Q>0){if(ot===E)break;ot+=le,Q-=L}}return Re}}class ja{constructor(){this.decoder=new Fi}decode(f,m=null){let x,v;if(m!=null&&m.has(G.PURE_BARCODE)){const H=ja.extractPureBits(f.getBlackMatrix());x=this.decoder.decode(H),v=ja.NO_POINTS}else{const H=new Br(f.getBlackMatrix()).detect();x=this.decoder.decode(H.getBits()),v=H.getPoints()}const y=x.getRawBytes(),E=new X(x.getText(),y,8*y.length,v,se.DATA_MATRIX,w.currentTimeMillis()),k=x.getByteSegments();k!=null&&E.putMetadata(je.BYTE_SEGMENTS,k);const L=x.getECLevel();return L!=null&&E.putMetadata(je.ERROR_CORRECTION_LEVEL,L),E}reset(){}static extractPureBits(f){const m=f.getTopLeftOnBit(),x=f.getBottomRightOnBit();if(m==null||x==null)throw new Z;const v=this.moduleSize(m,f);let y=m[1];const E=x[1];let k=m[0];const H=(x[0]-k+1)/v,Q=(E-y+1)/v;if(H<=0||Q<=0)throw new Z;const le=v/2;y+=le,k+=le;const fe=new ee(H,Q);for(let Re=0;Re<Q;Re++){const $e=y+Re*v;for(let We=0;We<H;We++)f.get(k+We*v,$e)&&fe.set(We,Re)}return fe}static moduleSize(f,m){const x=m.getWidth();let v=f[0];const y=f[1];for(;v<x&&m.get(v,y);)v++;if(v===x)throw new Z;const E=v-f[0];if(E===0)throw new Z;return E}}ja.NO_POINTS=[];class Bi extends Y{constructor(f=500){super(new ja,f)}}var Pn;(function(oe){oe[oe.L=0]="L",oe[oe.M=1]="M",oe[oe.Q=2]="Q",oe[oe.H=3]="H"})(Pn||(Pn={}));class Dn{constructor(f,m,x){this.value=f,this.stringValue=m,this.bits=x,Dn.FOR_BITS.set(x,this),Dn.FOR_VALUE.set(f,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(f){switch(f){case"L":return Dn.L;case"M":return Dn.M;case"Q":return Dn.Q;case"H":return Dn.H;default:throw new d(f+"not available")}}toString(){return this.stringValue}equals(f){if(!(f instanceof Dn))return!1;const m=f;return this.value===m.value}static forBits(f){if(f<0||f>=Dn.FOR_BITS.size)throw new h;return Dn.FOR_BITS.get(f)}}Dn.FOR_BITS=new Map,Dn.FOR_VALUE=new Map,Dn.L=new Dn(Pn.L,"L",1),Dn.M=new Dn(Pn.M,"M",0),Dn.Q=new Dn(Pn.Q,"Q",3),Dn.H=new Dn(Pn.H,"H",2);class za{constructor(f){this.errorCorrectionLevel=Dn.forBits(f>>3&3),this.dataMask=f&7}static numBitsDiffering(f,m){return T.bitCount(f^m)}static decodeFormatInformation(f,m){const x=za.doDecodeFormatInformation(f,m);return x!==null?x:za.doDecodeFormatInformation(f^za.FORMAT_INFO_MASK_QR,m^za.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(f,m){let x=Number.MAX_SAFE_INTEGER,v=0;for(const y of za.FORMAT_INFO_DECODE_LOOKUP){const E=y[0];if(E===f||E===m)return new za(y[1]);let k=za.numBitsDiffering(f,E);k<x&&(v=y[1],x=k),f!==m&&(k=za.numBitsDiffering(m,E),k<x&&(v=y[1],x=k))}return x<=3?new za(v):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(f){if(!(f instanceof za))return!1;const m=f;return this.errorCorrectionLevel===m.errorCorrectionLevel&&this.dataMask===m.dataMask}}za.FORMAT_INFO_MASK_QR=21522,za.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ct{constructor(f,...m){this.ecCodewordsPerBlock=f,this.ecBlocks=m}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let f=0;const m=this.ecBlocks;for(const x of m)f+=x.getCount();return f}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ie{constructor(f,m){this.count=f,this.dataCodewords=m}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ar{constructor(f,m,...x){this.versionNumber=f,this.alignmentPatternCenters=m,this.ecBlocks=x;let v=0;const y=x[0].getECCodewordsPerBlock(),E=x[0].getECBlocks();for(const k of E)v+=k.getCount()*(k.getDataCodewords()+y);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(f){return this.ecBlocks[f.getValue()]}static getProvisionalVersionForDimension(f){if(f%4!==1)throw new O;try{return this.getVersionForNumber((f-17)/4)}catch{throw new O}}static getVersionForNumber(f){if(f<1||f>40)throw new h;return Ar.VERSIONS[f-1]}static decodeVersionInformation(f){let m=Number.MAX_SAFE_INTEGER,x=0;for(let v=0;v<Ar.VERSION_DECODE_INFO.length;v++){const y=Ar.VERSION_DECODE_INFO[v];if(y===f)return Ar.getVersionForNumber(v+7);const E=za.numBitsDiffering(f,y);E<m&&(x=v+7,m=E)}return m<=3?Ar.getVersionForNumber(x):null}buildFunctionPattern(){const f=this.getDimensionForVersion(),m=new ee(f);m.setRegion(0,0,9,9),m.setRegion(f-8,0,8,9),m.setRegion(0,f-8,9,8);const x=this.alignmentPatternCenters.length;for(let v=0;v<x;v++){const y=this.alignmentPatternCenters[v]-2;for(let E=0;E<x;E++)v===0&&(E===0||E===x-1)||v===x-1&&E===0||m.setRegion(this.alignmentPatternCenters[E]-2,y,5,5)}return m.setRegion(6,9,1,f-17),m.setRegion(9,6,f-17,1),this.versionNumber>6&&(m.setRegion(f-11,0,3,6),m.setRegion(0,f-11,6,3)),m}toString(){return""+this.versionNumber}}Ar.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ar.VERSIONS=[new Ar(1,new Int32Array(0),new ct(7,new Ie(1,19)),new ct(10,new Ie(1,16)),new ct(13,new Ie(1,13)),new ct(17,new Ie(1,9))),new Ar(2,Int32Array.from([6,18]),new ct(10,new Ie(1,34)),new ct(16,new Ie(1,28)),new ct(22,new Ie(1,22)),new ct(28,new Ie(1,16))),new Ar(3,Int32Array.from([6,22]),new ct(15,new Ie(1,55)),new ct(26,new Ie(1,44)),new ct(18,new Ie(2,17)),new ct(22,new Ie(2,13))),new Ar(4,Int32Array.from([6,26]),new ct(20,new Ie(1,80)),new ct(18,new Ie(2,32)),new ct(26,new Ie(2,24)),new ct(16,new Ie(4,9))),new Ar(5,Int32Array.from([6,30]),new ct(26,new Ie(1,108)),new ct(24,new Ie(2,43)),new ct(18,new Ie(2,15),new Ie(2,16)),new ct(22,new Ie(2,11),new Ie(2,12))),new Ar(6,Int32Array.from([6,34]),new ct(18,new Ie(2,68)),new ct(16,new Ie(4,27)),new ct(24,new Ie(4,19)),new ct(28,new Ie(4,15))),new Ar(7,Int32Array.from([6,22,38]),new ct(20,new Ie(2,78)),new ct(18,new Ie(4,31)),new ct(18,new Ie(2,14),new Ie(4,15)),new ct(26,new Ie(4,13),new Ie(1,14))),new Ar(8,Int32Array.from([6,24,42]),new ct(24,new Ie(2,97)),new ct(22,new Ie(2,38),new Ie(2,39)),new ct(22,new Ie(4,18),new Ie(2,19)),new ct(26,new Ie(4,14),new Ie(2,15))),new Ar(9,Int32Array.from([6,26,46]),new ct(30,new Ie(2,116)),new ct(22,new Ie(3,36),new Ie(2,37)),new ct(20,new Ie(4,16),new Ie(4,17)),new ct(24,new Ie(4,12),new Ie(4,13))),new Ar(10,Int32Array.from([6,28,50]),new ct(18,new Ie(2,68),new Ie(2,69)),new ct(26,new Ie(4,43),new Ie(1,44)),new ct(24,new Ie(6,19),new Ie(2,20)),new ct(28,new Ie(6,15),new Ie(2,16))),new Ar(11,Int32Array.from([6,30,54]),new ct(20,new Ie(4,81)),new ct(30,new Ie(1,50),new Ie(4,51)),new ct(28,new Ie(4,22),new Ie(4,23)),new ct(24,new Ie(3,12),new Ie(8,13))),new Ar(12,Int32Array.from([6,32,58]),new ct(24,new Ie(2,92),new Ie(2,93)),new ct(22,new Ie(6,36),new Ie(2,37)),new ct(26,new Ie(4,20),new Ie(6,21)),new ct(28,new Ie(7,14),new Ie(4,15))),new Ar(13,Int32Array.from([6,34,62]),new ct(26,new Ie(4,107)),new ct(22,new Ie(8,37),new Ie(1,38)),new ct(24,new Ie(8,20),new Ie(4,21)),new ct(22,new Ie(12,11),new Ie(4,12))),new Ar(14,Int32Array.from([6,26,46,66]),new ct(30,new Ie(3,115),new Ie(1,116)),new ct(24,new Ie(4,40),new Ie(5,41)),new ct(20,new Ie(11,16),new Ie(5,17)),new ct(24,new Ie(11,12),new Ie(5,13))),new Ar(15,Int32Array.from([6,26,48,70]),new ct(22,new Ie(5,87),new Ie(1,88)),new ct(24,new Ie(5,41),new Ie(5,42)),new ct(30,new Ie(5,24),new Ie(7,25)),new ct(24,new Ie(11,12),new Ie(7,13))),new Ar(16,Int32Array.from([6,26,50,74]),new ct(24,new Ie(5,98),new Ie(1,99)),new ct(28,new Ie(7,45),new Ie(3,46)),new ct(24,new Ie(15,19),new Ie(2,20)),new ct(30,new Ie(3,15),new Ie(13,16))),new Ar(17,Int32Array.from([6,30,54,78]),new ct(28,new Ie(1,107),new Ie(5,108)),new ct(28,new Ie(10,46),new Ie(1,47)),new ct(28,new Ie(1,22),new Ie(15,23)),new ct(28,new Ie(2,14),new Ie(17,15))),new Ar(18,Int32Array.from([6,30,56,82]),new ct(30,new Ie(5,120),new Ie(1,121)),new ct(26,new Ie(9,43),new Ie(4,44)),new ct(28,new Ie(17,22),new Ie(1,23)),new ct(28,new Ie(2,14),new Ie(19,15))),new Ar(19,Int32Array.from([6,30,58,86]),new ct(28,new Ie(3,113),new Ie(4,114)),new ct(26,new Ie(3,44),new Ie(11,45)),new ct(26,new Ie(17,21),new Ie(4,22)),new ct(26,new Ie(9,13),new Ie(16,14))),new Ar(20,Int32Array.from([6,34,62,90]),new ct(28,new Ie(3,107),new Ie(5,108)),new ct(26,new Ie(3,41),new Ie(13,42)),new ct(30,new Ie(15,24),new Ie(5,25)),new ct(28,new Ie(15,15),new Ie(10,16))),new Ar(21,Int32Array.from([6,28,50,72,94]),new ct(28,new Ie(4,116),new Ie(4,117)),new ct(26,new Ie(17,42)),new ct(28,new Ie(17,22),new Ie(6,23)),new ct(30,new Ie(19,16),new Ie(6,17))),new Ar(22,Int32Array.from([6,26,50,74,98]),new ct(28,new Ie(2,111),new Ie(7,112)),new ct(28,new Ie(17,46)),new ct(30,new Ie(7,24),new Ie(16,25)),new ct(24,new Ie(34,13))),new Ar(23,Int32Array.from([6,30,54,78,102]),new ct(30,new Ie(4,121),new Ie(5,122)),new ct(28,new Ie(4,47),new Ie(14,48)),new ct(30,new Ie(11,24),new Ie(14,25)),new ct(30,new Ie(16,15),new Ie(14,16))),new Ar(24,Int32Array.from([6,28,54,80,106]),new ct(30,new Ie(6,117),new Ie(4,118)),new ct(28,new Ie(6,45),new Ie(14,46)),new ct(30,new Ie(11,24),new Ie(16,25)),new ct(30,new Ie(30,16),new Ie(2,17))),new Ar(25,Int32Array.from([6,32,58,84,110]),new ct(26,new Ie(8,106),new Ie(4,107)),new ct(28,new Ie(8,47),new Ie(13,48)),new ct(30,new Ie(7,24),new Ie(22,25)),new ct(30,new Ie(22,15),new Ie(13,16))),new Ar(26,Int32Array.from([6,30,58,86,114]),new ct(28,new Ie(10,114),new Ie(2,115)),new ct(28,new Ie(19,46),new Ie(4,47)),new ct(28,new Ie(28,22),new Ie(6,23)),new ct(30,new Ie(33,16),new Ie(4,17))),new Ar(27,Int32Array.from([6,34,62,90,118]),new ct(30,new Ie(8,122),new Ie(4,123)),new ct(28,new Ie(22,45),new Ie(3,46)),new ct(30,new Ie(8,23),new Ie(26,24)),new ct(30,new Ie(12,15),new Ie(28,16))),new Ar(28,Int32Array.from([6,26,50,74,98,122]),new ct(30,new Ie(3,117),new Ie(10,118)),new ct(28,new Ie(3,45),new Ie(23,46)),new ct(30,new Ie(4,24),new Ie(31,25)),new ct(30,new Ie(11,15),new Ie(31,16))),new Ar(29,Int32Array.from([6,30,54,78,102,126]),new ct(30,new Ie(7,116),new Ie(7,117)),new ct(28,new Ie(21,45),new Ie(7,46)),new ct(30,new Ie(1,23),new Ie(37,24)),new ct(30,new Ie(19,15),new Ie(26,16))),new Ar(30,Int32Array.from([6,26,52,78,104,130]),new ct(30,new Ie(5,115),new Ie(10,116)),new ct(28,new Ie(19,47),new Ie(10,48)),new ct(30,new Ie(15,24),new Ie(25,25)),new ct(30,new Ie(23,15),new Ie(25,16))),new Ar(31,Int32Array.from([6,30,56,82,108,134]),new ct(30,new Ie(13,115),new Ie(3,116)),new ct(28,new Ie(2,46),new Ie(29,47)),new ct(30,new Ie(42,24),new Ie(1,25)),new ct(30,new Ie(23,15),new Ie(28,16))),new Ar(32,Int32Array.from([6,34,60,86,112,138]),new ct(30,new Ie(17,115)),new ct(28,new Ie(10,46),new Ie(23,47)),new ct(30,new Ie(10,24),new Ie(35,25)),new ct(30,new Ie(19,15),new Ie(35,16))),new Ar(33,Int32Array.from([6,30,58,86,114,142]),new ct(30,new Ie(17,115),new Ie(1,116)),new ct(28,new Ie(14,46),new Ie(21,47)),new ct(30,new Ie(29,24),new Ie(19,25)),new ct(30,new Ie(11,15),new Ie(46,16))),new Ar(34,Int32Array.from([6,34,62,90,118,146]),new ct(30,new Ie(13,115),new Ie(6,116)),new ct(28,new Ie(14,46),new Ie(23,47)),new ct(30,new Ie(44,24),new Ie(7,25)),new ct(30,new Ie(59,16),new Ie(1,17))),new Ar(35,Int32Array.from([6,30,54,78,102,126,150]),new ct(30,new Ie(12,121),new Ie(7,122)),new ct(28,new Ie(12,47),new Ie(26,48)),new ct(30,new Ie(39,24),new Ie(14,25)),new ct(30,new Ie(22,15),new Ie(41,16))),new Ar(36,Int32Array.from([6,24,50,76,102,128,154]),new ct(30,new Ie(6,121),new Ie(14,122)),new ct(28,new Ie(6,47),new Ie(34,48)),new ct(30,new Ie(46,24),new Ie(10,25)),new ct(30,new Ie(2,15),new Ie(64,16))),new Ar(37,Int32Array.from([6,28,54,80,106,132,158]),new ct(30,new Ie(17,122),new Ie(4,123)),new ct(28,new Ie(29,46),new Ie(14,47)),new ct(30,new Ie(49,24),new Ie(10,25)),new ct(30,new Ie(24,15),new Ie(46,16))),new Ar(38,Int32Array.from([6,32,58,84,110,136,162]),new ct(30,new Ie(4,122),new Ie(18,123)),new ct(28,new Ie(13,46),new Ie(32,47)),new ct(30,new Ie(48,24),new Ie(14,25)),new ct(30,new Ie(42,15),new Ie(32,16))),new Ar(39,Int32Array.from([6,26,54,82,110,138,166]),new ct(30,new Ie(20,117),new Ie(4,118)),new ct(28,new Ie(40,47),new Ie(7,48)),new ct(30,new Ie(43,24),new Ie(22,25)),new ct(30,new Ie(10,15),new Ie(67,16))),new Ar(40,Int32Array.from([6,30,58,86,114,142,170]),new ct(30,new Ie(19,118),new Ie(6,119)),new ct(28,new Ie(18,47),new Ie(31,48)),new ct(30,new Ie(34,24),new Ie(34,25)),new ct(30,new Ie(20,15),new Ie(61,16)))];var Ta;(function(oe){oe[oe.DATA_MASK_000=0]="DATA_MASK_000",oe[oe.DATA_MASK_001=1]="DATA_MASK_001",oe[oe.DATA_MASK_010=2]="DATA_MASK_010",oe[oe.DATA_MASK_011=3]="DATA_MASK_011",oe[oe.DATA_MASK_100=4]="DATA_MASK_100",oe[oe.DATA_MASK_101=5]="DATA_MASK_101",oe[oe.DATA_MASK_110=6]="DATA_MASK_110",oe[oe.DATA_MASK_111=7]="DATA_MASK_111"})(Ta||(Ta={}));class Va{constructor(f,m){this.value=f,this.isMasked=m}unmaskBitMatrix(f,m){for(let x=0;x<m;x++)for(let v=0;v<m;v++)this.isMasked(x,v)&&f.flip(v,x)}}Va.values=new Map([[Ta.DATA_MASK_000,new Va(Ta.DATA_MASK_000,(oe,f)=>(oe+f&1)===0)],[Ta.DATA_MASK_001,new Va(Ta.DATA_MASK_001,(oe,f)=>(oe&1)===0)],[Ta.DATA_MASK_010,new Va(Ta.DATA_MASK_010,(oe,f)=>f%3===0)],[Ta.DATA_MASK_011,new Va(Ta.DATA_MASK_011,(oe,f)=>(oe+f)%3===0)],[Ta.DATA_MASK_100,new Va(Ta.DATA_MASK_100,(oe,f)=>(Math.floor(oe/2)+Math.floor(f/3)&1)===0)],[Ta.DATA_MASK_101,new Va(Ta.DATA_MASK_101,(oe,f)=>oe*f%6===0)],[Ta.DATA_MASK_110,new Va(Ta.DATA_MASK_110,(oe,f)=>oe*f%6<3)],[Ta.DATA_MASK_111,new Va(Ta.DATA_MASK_111,(oe,f)=>(oe+f+oe*f%3&1)===0)]]);class Us{constructor(f){const m=f.getHeight();if(m<21||(m&3)!==1)throw new O;this.bitMatrix=f}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let f=0;for(let y=0;y<6;y++)f=this.copyBit(y,8,f);f=this.copyBit(7,8,f),f=this.copyBit(8,8,f),f=this.copyBit(8,7,f);for(let y=5;y>=0;y--)f=this.copyBit(8,y,f);const m=this.bitMatrix.getHeight();let x=0;const v=m-7;for(let y=m-1;y>=v;y--)x=this.copyBit(8,y,x);for(let y=m-8;y<m;y++)x=this.copyBit(y,8,x);if(this.parsedFormatInfo=za.decodeFormatInformation(f,x),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new O}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const f=this.bitMatrix.getHeight(),m=Math.floor((f-17)/4);if(m<=6)return Ar.getVersionForNumber(m);let x=0;const v=f-11;for(let E=5;E>=0;E--)for(let k=f-9;k>=v;k--)x=this.copyBit(k,E,x);let y=Ar.decodeVersionInformation(x);if(y!==null&&y.getDimensionForVersion()===f)return this.parsedVersion=y,y;x=0;for(let E=5;E>=0;E--)for(let k=f-9;k>=v;k--)x=this.copyBit(E,k,x);if(y=Ar.decodeVersionInformation(x),y!==null&&y.getDimensionForVersion()===f)return this.parsedVersion=y,y;throw new O}copyBit(f,m,x){return(this.isMirror?this.bitMatrix.get(m,f):this.bitMatrix.get(f,m))?x<<1|1:x<<1}readCodewords(){const f=this.readFormatInformation(),m=this.readVersion(),x=Va.values.get(f.getDataMask()),v=this.bitMatrix.getHeight();x.unmaskBitMatrix(this.bitMatrix,v);const y=m.buildFunctionPattern();let E=!0;const k=new Uint8Array(m.getTotalCodewords());let L=0,H=0,Q=0;for(let le=v-1;le>0;le-=2){le===6&&le--;for(let fe=0;fe<v;fe++){const Re=E?v-1-fe:fe;for(let $e=0;$e<2;$e++)y.get(le-$e,Re)||(Q++,H<<=1,this.bitMatrix.get(le-$e,Re)&&(H|=1),Q===8&&(k[L++]=H,Q=0,H=0))}E=!E}if(L!==m.getTotalCodewords())throw new O;return k}remask(){if(this.parsedFormatInfo===null)return;const f=Va.values[this.parsedFormatInfo.getDataMask()],m=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,m)}setMirror(f){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=f}mirror(){const f=this.bitMatrix;for(let m=0,x=f.getWidth();m<x;m++)for(let v=m+1,y=f.getHeight();v<y;v++)f.get(m,v)!==f.get(v,m)&&(f.flip(v,m),f.flip(m,v))}}class Xo{constructor(f,m){this.numDataCodewords=f,this.codewords=m}static getDataBlocks(f,m,x){if(f.length!==m.getTotalCodewords())throw new h;const v=m.getECBlocksForLevel(x);let y=0;const E=v.getECBlocks();for(const $e of E)y+=$e.getCount();const k=new Array(y);let L=0;for(const $e of E)for(let We=0;We<$e.getCount();We++){const ot=$e.getDataCodewords(),Nt=v.getECCodewordsPerBlock()+ot;k[L++]=new Xo(ot,new Uint8Array(Nt))}const H=k[0].codewords.length;let Q=k.length-1;for(;Q>=0&&k[Q].codewords.length!==H;)Q--;Q++;const le=H-v.getECCodewordsPerBlock();let fe=0;for(let $e=0;$e<le;$e++)for(let We=0;We<L;We++)k[We].codewords[$e]=f[fe++];for(let $e=Q;$e<L;$e++)k[$e].codewords[le]=f[fe++];const Re=k[0].codewords.length;for(let $e=le;$e<Re;$e++)for(let We=0;We<L;We++){const ot=We<Q?$e:$e+1;k[We].codewords[ot]=f[fe++]}return k}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ht;(function(oe){oe[oe.TERMINATOR=0]="TERMINATOR",oe[oe.NUMERIC=1]="NUMERIC",oe[oe.ALPHANUMERIC=2]="ALPHANUMERIC",oe[oe.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",oe[oe.BYTE=4]="BYTE",oe[oe.ECI=5]="ECI",oe[oe.KANJI=6]="KANJI",oe[oe.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",oe[oe.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",oe[oe.HANZI=9]="HANZI"})(ht||(ht={}));class Ot{constructor(f,m,x,v){this.value=f,this.stringValue=m,this.characterCountBitsForVersions=x,this.bits=v,Ot.FOR_BITS.set(v,this),Ot.FOR_VALUE.set(f,this)}static forBits(f){const m=Ot.FOR_BITS.get(f);if(m===void 0)throw new h;return m}getCharacterCountBits(f){const m=f.getVersionNumber();let x;return m<=9?x=0:m<=26?x=1:x=2,this.characterCountBitsForVersions[x]}getValue(){return this.value}getBits(){return this.bits}equals(f){if(!(f instanceof Ot))return!1;const m=f;return this.value===m.value}toString(){return this.stringValue}}Ot.FOR_BITS=new Map,Ot.FOR_VALUE=new Map,Ot.TERMINATOR=new Ot(ht.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ot.NUMERIC=new Ot(ht.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ot.ALPHANUMERIC=new Ot(ht.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ot.STRUCTURED_APPEND=new Ot(ht.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ot.BYTE=new Ot(ht.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ot.ECI=new Ot(ht.ECI,"ECI",Int32Array.from([0,0,0]),7),Ot.KANJI=new Ot(ht.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ot.FNC1_FIRST_POSITION=new Ot(ht.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ot.FNC1_SECOND_POSITION=new Ot(ht.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ot.HANZI=new Ot(ht.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class br{static decode(f,m,x,v){const y=new Rn(f);let E=new F;const k=new Array;let L=-1,H=-1;try{let Q=null,le=!1,fe;do{if(y.available()<4)fe=Ot.TERMINATOR;else{const Re=y.readBits(4);fe=Ot.forBits(Re)}switch(fe){case Ot.TERMINATOR:break;case Ot.FNC1_FIRST_POSITION:case Ot.FNC1_SECOND_POSITION:le=!0;break;case Ot.STRUCTURED_APPEND:if(y.available()<16)throw new O;L=y.readBits(8),H=y.readBits(8);break;case Ot.ECI:const Re=br.parseECIValue(y);if(Q=I.getCharacterSetECIByValue(Re),Q===null)throw new O;break;case Ot.HANZI:const $e=y.readBits(4),We=y.readBits(fe.getCharacterCountBits(m));$e===br.GB2312_SUBSET&&br.decodeHanziSegment(y,E,We);break;default:const ot=y.readBits(fe.getCharacterCountBits(m));switch(fe){case Ot.NUMERIC:br.decodeNumericSegment(y,E,ot);break;case Ot.ALPHANUMERIC:br.decodeAlphanumericSegment(y,E,ot,le);break;case Ot.BYTE:br.decodeByteSegment(y,E,ot,Q,k,v);break;case Ot.KANJI:br.decodeKanjiSegment(y,E,ot);break;default:throw new O}break}}while(fe!==Ot.TERMINATOR)}catch{throw new O}return new pe(f,E.toString(),k.length===0?null:k,x===null?null:x.toString(),L,H)}static decodeHanziSegment(f,m,x){if(x*13>f.available())throw new O;const v=new Uint8Array(2*x);let y=0;for(;x>0;){const E=f.readBits(13);let k=E/96<<8&4294967295|E%96;k<959?k+=41377:k+=42657,v[y]=k>>8&255,v[y+1]=k&255,y+=2,x--}try{m.append(P.decode(v,B.GB2312))}catch(E){throw new O(E)}}static decodeKanjiSegment(f,m,x){if(x*13>f.available())throw new O;const v=new Uint8Array(2*x);let y=0;for(;x>0;){const E=f.readBits(13);let k=E/192<<8&4294967295|E%192;k<7936?k+=33088:k+=49472,v[y]=k>>8,v[y+1]=k,y+=2,x--}try{m.append(P.decode(v,B.SHIFT_JIS))}catch(E){throw new O(E)}}static decodeByteSegment(f,m,x,v,y,E){if(8*x>f.available())throw new O;const k=new Uint8Array(x);for(let H=0;H<x;H++)k[H]=f.readBits(8);let L;v===null?L=B.guessEncoding(k,E):L=v.getName();try{m.append(P.decode(k,L))}catch(H){throw new O(H)}y.push(k)}static toAlphaNumericChar(f){if(f>=br.ALPHANUMERIC_CHARS.length)throw new O;return br.ALPHANUMERIC_CHARS[f]}static decodeAlphanumericSegment(f,m,x,v){const y=m.length();for(;x>1;){if(f.available()<11)throw new O;const E=f.readBits(11);m.append(br.toAlphaNumericChar(Math.floor(E/45))),m.append(br.toAlphaNumericChar(E%45)),x-=2}if(x===1){if(f.available()<6)throw new O;m.append(br.toAlphaNumericChar(f.readBits(6)))}if(v)for(let E=y;E<m.length();E++)m.charAt(E)==="%"&&(E<m.length()-1&&m.charAt(E+1)==="%"?m.deleteCharAt(E+1):m.setCharAt(E,""))}static decodeNumericSegment(f,m,x){for(;x>=3;){if(f.available()<10)throw new O;const v=f.readBits(10);if(v>=1e3)throw new O;m.append(br.toAlphaNumericChar(Math.floor(v/100))),m.append(br.toAlphaNumericChar(Math.floor(v/10)%10)),m.append(br.toAlphaNumericChar(v%10)),x-=3}if(x===2){if(f.available()<7)throw new O;const v=f.readBits(7);if(v>=100)throw new O;m.append(br.toAlphaNumericChar(Math.floor(v/10))),m.append(br.toAlphaNumericChar(v%10))}else if(x===1){if(f.available()<4)throw new O;const v=f.readBits(4);if(v>=10)throw new O;m.append(br.toAlphaNumericChar(v))}}static parseECIValue(f){const m=f.readBits(8);if(!(m&128))return m&127;if((m&192)===128){const x=f.readBits(8);return(m&63)<<8&4294967295|x}if((m&224)===192){const x=f.readBits(16);return(m&31)<<16&4294967295|x}throw new O}}br.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",br.GB2312_SUBSET=1;class Fn{constructor(f){this.mirrored=f}isMirrored(){return this.mirrored}applyMirroredCorrection(f){if(!this.mirrored||f===null||f.length<3)return;const m=f[0];f[0]=f[2],f[2]=m}}class mn{constructor(){this.rsDecoder=new Ht(Me.QR_CODE_FIELD_256)}decodeBooleanArray(f,m){return this.decodeBitMatrix(ee.parseFromBooleanArray(f),m)}decodeBitMatrix(f,m){const x=new Us(f);let v=null;try{return this.decodeBitMatrixParser(x,m)}catch(y){v=y}try{x.remask(),x.setMirror(!0),x.readVersion(),x.readFormatInformation(),x.mirror();const y=this.decodeBitMatrixParser(x,m);return y.setOther(new Fn(!0)),y}catch(y){throw v!==null?v:y}}decodeBitMatrixParser(f,m){const x=f.readVersion(),v=f.readFormatInformation().getErrorCorrectionLevel(),y=f.readCodewords(),E=Xo.getDataBlocks(y,x,v);let k=0;for(const Q of E)k+=Q.getNumDataCodewords();const L=new Uint8Array(k);let H=0;for(const Q of E){const le=Q.getCodewords(),fe=Q.getNumDataCodewords();this.correctErrors(le,fe);for(let Re=0;Re<fe;Re++)L[H++]=le[Re]}return br.decode(L,x,v,m)}correctErrors(f,m){const x=new Int32Array(f);try{this.rsDecoder.decode(x,f.length-m)}catch{throw new g}for(let v=0;v<m;v++)f[v]=x[v]}}class Nn extends Ve{constructor(f,m,x){super(f,m),this.estimatedModuleSize=x}aboutEquals(f,m,x){if(Math.abs(m-this.getY())<=f&&Math.abs(x-this.getX())<=f){const v=Math.abs(f-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(f,m,x){const v=(this.getX()+m)/2,y=(this.getY()+f)/2,E=(this.estimatedModuleSize+x)/2;return new Nn(v,y,E)}}class ei{constructor(f,m,x,v,y,E,k){this.image=f,this.startX=m,this.startY=x,this.width=v,this.height=y,this.moduleSize=E,this.resultPointCallback=k,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const f=this.startX,m=this.height,x=this.width,v=f+x,y=this.startY+m/2,E=new Int32Array(3),k=this.image;for(let L=0;L<m;L++){const H=y+(L&1?-Math.floor((L+1)/2):Math.floor((L+1)/2));E[0]=0,E[1]=0,E[2]=0;let Q=f;for(;Q<v&&!k.get(Q,H);)Q++;let le=0;for(;Q<v;){if(k.get(Q,H))if(le===1)E[1]++;else if(le===2){if(this.foundPatternCross(E)){const fe=this.handlePossibleCenter(E,H,Q);if(fe!==null)return fe}E[0]=E[2],E[1]=1,E[2]=0,le=1}else E[++le]++;else le===1&&le++,E[le]++;Q++}if(this.foundPatternCross(E)){const fe=this.handlePossibleCenter(E,H,v);if(fe!==null)return fe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(f,m){return m-f[2]-f[1]/2}foundPatternCross(f){const m=this.moduleSize,x=m/2;for(let v=0;v<3;v++)if(Math.abs(m-f[v])>=x)return!1;return!0}crossCheckVertical(f,m,x,v){const y=this.image,E=y.getHeight(),k=this.crossCheckStateCount;k[0]=0,k[1]=0,k[2]=0;let L=f;for(;L>=0&&y.get(m,L)&&k[1]<=x;)k[1]++,L--;if(L<0||k[1]>x)return NaN;for(;L>=0&&!y.get(m,L)&&k[0]<=x;)k[0]++,L--;if(k[0]>x)return NaN;for(L=f+1;L<E&&y.get(m,L)&&k[1]<=x;)k[1]++,L++;if(L===E||k[1]>x)return NaN;for(;L<E&&!y.get(m,L)&&k[2]<=x;)k[2]++,L++;if(k[2]>x)return NaN;const H=k[0]+k[1]+k[2];return 5*Math.abs(H-v)>=2*v?NaN:this.foundPatternCross(k)?ei.centerFromEnd(k,L):NaN}handlePossibleCenter(f,m,x){const v=f[0]+f[1]+f[2],y=ei.centerFromEnd(f,x),E=this.crossCheckVertical(m,y,2*f[1],v);if(!isNaN(E)){const k=(f[0]+f[1]+f[2])/3;for(const H of this.possibleCenters)if(H.aboutEquals(k,E,y))return H.combineEstimate(E,y,k);const L=new Nn(y,E,k);this.possibleCenters.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return null}}class gs extends Ve{constructor(f,m,x,v){super(f,m),this.estimatedModuleSize=x,this.count=v,v===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(f,m,x){if(Math.abs(m-this.getY())<=f&&Math.abs(x-this.getX())<=f){const v=Math.abs(f-this.estimatedModuleSize);return v<=1||v<=this.estimatedModuleSize}return!1}combineEstimate(f,m,x){const v=this.count+1,y=(this.count*this.getX()+m)/v,E=(this.count*this.getY()+f)/v,k=(this.count*this.estimatedModuleSize+x)/v;return new gs(y,E,k,v)}}class Ui{constructor(f){this.bottomLeft=f[0],this.topLeft=f[1],this.topRight=f[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class jr{constructor(f,m){this.image=f,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=m}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(f){const m=f!=null&&f.get(G.TRY_HARDER)!==void 0,x=f!=null&&f.get(G.PURE_BARCODE)!==void 0,v=this.image,y=v.getHeight(),E=v.getWidth();let k=Math.floor(3*y/(4*jr.MAX_MODULES));(k<jr.MIN_SKIP||m)&&(k=jr.MIN_SKIP);let L=!1;const H=new Int32Array(5);for(let le=k-1;le<y&&!L;le+=k){H[0]=0,H[1]=0,H[2]=0,H[3]=0,H[4]=0;let fe=0;for(let Re=0;Re<E;Re++)if(v.get(Re,le))(fe&1)===1&&fe++,H[fe]++;else if(fe&1)H[fe]++;else if(fe===4)if(jr.foundPatternCross(H)){if(this.handlePossibleCenter(H,le,Re,x)===!0)if(k=2,this.hasSkipped===!0)L=this.haveMultiplyConfirmedCenters();else{const We=this.findRowSkip();We>H[2]&&(le+=We-H[2]-k,Re=E-1)}else{H[0]=H[2],H[1]=H[3],H[2]=H[4],H[3]=1,H[4]=0,fe=3;continue}fe=0,H[0]=0,H[1]=0,H[2]=0,H[3]=0,H[4]=0}else H[0]=H[2],H[1]=H[3],H[2]=H[4],H[3]=1,H[4]=0,fe=3;else H[++fe]++;jr.foundPatternCross(H)&&this.handlePossibleCenter(H,le,E,x)===!0&&(k=H[0],this.hasSkipped&&(L=this.haveMultiplyConfirmedCenters()))}const Q=this.selectBestPatterns();return Ve.orderBestPatterns(Q),new Ui(Q)}static centerFromEnd(f,m){return m-f[4]-f[3]-f[2]/2}static foundPatternCross(f){let m=0;for(let y=0;y<5;y++){const E=f[y];if(E===0)return!1;m+=E}if(m<7)return!1;const x=m/7,v=x/2;return Math.abs(x-f[0])<v&&Math.abs(x-f[1])<v&&Math.abs(3*x-f[2])<3*v&&Math.abs(x-f[3])<v&&Math.abs(x-f[4])<v}getCrossCheckStateCount(){const f=this.crossCheckStateCount;return f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f}crossCheckDiagonal(f,m,x,v){const y=this.getCrossCheckStateCount();let E=0;const k=this.image;for(;f>=E&&m>=E&&k.get(m-E,f-E);)y[2]++,E++;if(f<E||m<E)return!1;for(;f>=E&&m>=E&&!k.get(m-E,f-E)&&y[1]<=x;)y[1]++,E++;if(f<E||m<E||y[1]>x)return!1;for(;f>=E&&m>=E&&k.get(m-E,f-E)&&y[0]<=x;)y[0]++,E++;if(y[0]>x)return!1;const L=k.getHeight(),H=k.getWidth();for(E=1;f+E<L&&m+E<H&&k.get(m+E,f+E);)y[2]++,E++;if(f+E>=L||m+E>=H)return!1;for(;f+E<L&&m+E<H&&!k.get(m+E,f+E)&&y[3]<x;)y[3]++,E++;if(f+E>=L||m+E>=H||y[3]>=x)return!1;for(;f+E<L&&m+E<H&&k.get(m+E,f+E)&&y[4]<x;)y[4]++,E++;if(y[4]>=x)return!1;const Q=y[0]+y[1]+y[2]+y[3]+y[4];return Math.abs(Q-v)<2*v&&jr.foundPatternCross(y)}crossCheckVertical(f,m,x,v){const y=this.image,E=y.getHeight(),k=this.getCrossCheckStateCount();let L=f;for(;L>=0&&y.get(m,L);)k[2]++,L--;if(L<0)return NaN;for(;L>=0&&!y.get(m,L)&&k[1]<=x;)k[1]++,L--;if(L<0||k[1]>x)return NaN;for(;L>=0&&y.get(m,L)&&k[0]<=x;)k[0]++,L--;if(k[0]>x)return NaN;for(L=f+1;L<E&&y.get(m,L);)k[2]++,L++;if(L===E)return NaN;for(;L<E&&!y.get(m,L)&&k[3]<x;)k[3]++,L++;if(L===E||k[3]>=x)return NaN;for(;L<E&&y.get(m,L)&&k[4]<x;)k[4]++,L++;if(k[4]>=x)return NaN;const H=k[0]+k[1]+k[2]+k[3]+k[4];return 5*Math.abs(H-v)>=2*v?NaN:jr.foundPatternCross(k)?jr.centerFromEnd(k,L):NaN}crossCheckHorizontal(f,m,x,v){const y=this.image,E=y.getWidth(),k=this.getCrossCheckStateCount();let L=f;for(;L>=0&&y.get(L,m);)k[2]++,L--;if(L<0)return NaN;for(;L>=0&&!y.get(L,m)&&k[1]<=x;)k[1]++,L--;if(L<0||k[1]>x)return NaN;for(;L>=0&&y.get(L,m)&&k[0]<=x;)k[0]++,L--;if(k[0]>x)return NaN;for(L=f+1;L<E&&y.get(L,m);)k[2]++,L++;if(L===E)return NaN;for(;L<E&&!y.get(L,m)&&k[3]<x;)k[3]++,L++;if(L===E||k[3]>=x)return NaN;for(;L<E&&y.get(L,m)&&k[4]<x;)k[4]++,L++;if(k[4]>=x)return NaN;const H=k[0]+k[1]+k[2]+k[3]+k[4];return 5*Math.abs(H-v)>=v?NaN:jr.foundPatternCross(k)?jr.centerFromEnd(k,L):NaN}handlePossibleCenter(f,m,x,v){const y=f[0]+f[1]+f[2]+f[3]+f[4];let E=jr.centerFromEnd(f,x),k=this.crossCheckVertical(m,Math.floor(E),f[2],y);if(!isNaN(k)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(k),f[2],y),!isNaN(E)&&(!v||this.crossCheckDiagonal(Math.floor(k),Math.floor(E),f[2],y)))){const L=y/7;let H=!1;const Q=this.possibleCenters;for(let le=0,fe=Q.length;le<fe;le++){const Re=Q[le];if(Re.aboutEquals(L,k,E)){Q[le]=Re.combineEstimate(k,E,L),H=!0;break}}if(!H){const le=new gs(E,k,L);Q.push(le),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(le)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let m=null;for(const x of this.possibleCenters)if(x.getCount()>=jr.CENTER_QUORUM)if(m==null)m=x;else return this.hasSkipped=!0,Math.floor((Math.abs(m.getX()-x.getX())-Math.abs(m.getY()-x.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let f=0,m=0;const x=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=jr.CENTER_QUORUM&&(f++,m+=E.getEstimatedModuleSize());if(f<3)return!1;const v=m/x;let y=0;for(const E of this.possibleCenters)y+=Math.abs(E.getEstimatedModuleSize()-v);return y<=.05*m}selectBestPatterns(){const f=this.possibleCenters.length;if(f<3)throw new Z;const m=this.possibleCenters;let x;if(f>3){let v=0,y=0;for(const L of this.possibleCenters){const H=L.getEstimatedModuleSize();v+=H,y+=H*H}x=v/f;let E=Math.sqrt(y/f-x*x);m.sort((L,H)=>{const Q=Math.abs(H.getEstimatedModuleSize()-x),le=Math.abs(L.getEstimatedModuleSize()-x);return Q<le?-1:Q>le?1:0});const k=Math.max(.2*x,E);for(let L=0;L<m.length&&m.length>3;L++){const H=m[L];Math.abs(H.getEstimatedModuleSize()-x)>k&&(m.splice(L,1),L--)}}if(m.length>3){let v=0;for(const y of m)v+=y.getEstimatedModuleSize();x=v/m.length,m.sort((y,E)=>{if(E.getCount()===y.getCount()){const k=Math.abs(E.getEstimatedModuleSize()-x),L=Math.abs(y.getEstimatedModuleSize()-x);return k<L?1:k>L?-1:0}else return E.getCount()-y.getCount()}),m.splice(3)}return[m[0],m[1],m[2]]}}jr.CENTER_QUORUM=2,jr.MIN_SKIP=3,jr.MAX_MODULES=57;class Yo{constructor(f){this.image=f}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(f){this.resultPointCallback=f==null?null:f.get(G.NEED_RESULT_POINT_CALLBACK);const x=new jr(this.image,this.resultPointCallback).find(f);return this.processFinderPatternInfo(x)}processFinderPatternInfo(f){const m=f.getTopLeft(),x=f.getTopRight(),v=f.getBottomLeft(),y=this.calculateModuleSize(m,x,v);if(y<1)throw new Z("No pattern found in proccess finder.");const E=Yo.computeDimension(m,x,v,y),k=Ar.getProvisionalVersionForDimension(E),L=k.getDimensionForVersion()-7;let H=null;if(k.getAlignmentPatternCenters().length>0){const Re=x.getX()-m.getX()+v.getX(),$e=x.getY()-m.getY()+v.getY(),We=1-3/L,ot=Math.floor(m.getX()+We*(Re-m.getX())),Nt=Math.floor(m.getY()+We*($e-m.getY()));for(let Bt=4;Bt<=16;Bt<<=1)try{H=this.findAlignmentInRegion(y,ot,Nt,Bt);break}catch(Kt){if(!(Kt instanceof Z))throw Kt}}const Q=Yo.createTransform(m,x,v,H,E),le=Yo.sampleGrid(this.image,Q,E);let fe;return H===null?fe=[v,m,x]:fe=[v,m,x,H],new zt(le,fe)}static createTransform(f,m,x,v,y){const E=y-3.5;let k,L,H,Q;return v!==null?(k=v.getX(),L=v.getY(),H=E-3,Q=H):(k=m.getX()-f.getX()+x.getX(),L=m.getY()-f.getY()+x.getY(),H=E,Q=E),Xe.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,H,Q,3.5,E,f.getX(),f.getY(),m.getX(),m.getY(),k,L,x.getX(),x.getY())}static sampleGrid(f,m,x){return kt.getInstance().sampleGridWithTransform(f,x,x,m)}static computeDimension(f,m,x,v){const y=et.round(Ve.distance(f,m)/v),E=et.round(Ve.distance(f,x)/v);let k=Math.floor((y+E)/2)+7;switch(k&3){case 0:k++;break;case 2:k--;break;case 3:throw new Z("Dimensions could be not found.")}return k}calculateModuleSize(f,m,x){return(this.calculateModuleSizeOneWay(f,m)+this.calculateModuleSizeOneWay(f,x))/2}calculateModuleSizeOneWay(f,m){const x=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(f.getX()),Math.floor(f.getY()),Math.floor(m.getX()),Math.floor(m.getY())),v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(m.getX()),Math.floor(m.getY()),Math.floor(f.getX()),Math.floor(f.getY()));return isNaN(x)?v/7:isNaN(v)?x/7:(x+v)/14}sizeOfBlackWhiteBlackRunBothWays(f,m,x,v){let y=this.sizeOfBlackWhiteBlackRun(f,m,x,v),E=1,k=f-(x-f);k<0?(E=f/(f-k),k=0):k>=this.image.getWidth()&&(E=(this.image.getWidth()-1-f)/(k-f),k=this.image.getWidth()-1);let L=Math.floor(m-(v-m)*E);return E=1,L<0?(E=m/(m-L),L=0):L>=this.image.getHeight()&&(E=(this.image.getHeight()-1-m)/(L-m),L=this.image.getHeight()-1),k=Math.floor(f+(k-f)*E),y+=this.sizeOfBlackWhiteBlackRun(f,m,k,L),y-1}sizeOfBlackWhiteBlackRun(f,m,x,v){const y=Math.abs(v-m)>Math.abs(x-f);if(y){let Re=f;f=m,m=Re,Re=x,x=v,v=Re}const E=Math.abs(x-f),k=Math.abs(v-m);let L=-E/2;const H=f<x?1:-1,Q=m<v?1:-1;let le=0;const fe=x+H;for(let Re=f,$e=m;Re!==fe;Re+=H){const We=y?$e:Re,ot=y?Re:$e;if(le===1===this.image.get(We,ot)){if(le===2)return et.distance(Re,$e,f,m);le++}if(L+=k,L>0){if($e===v)break;$e+=Q,L-=E}}return le===2?et.distance(x+H,v,f,m):NaN}findAlignmentInRegion(f,m,x,v){const y=Math.floor(v*f),E=Math.max(0,m-y),k=Math.min(this.image.getWidth()-1,m+y);if(k-E<f*3)throw new Z("Alignment top exceeds estimated module size.");const L=Math.max(0,x-y),H=Math.min(this.image.getHeight()-1,x+y);if(H-L<f*3)throw new Z("Alignment bottom exceeds estimated module size.");return new ei(this.image,E,L,k-E,H-L,f,this.resultPointCallback).find()}}class zi{constructor(){this.decoder=new mn}getDecoder(){return this.decoder}decode(f,m){let x,v;if(m!=null&&m.get(G.PURE_BARCODE)!==void 0){const L=zi.extractPureBits(f.getBlackMatrix());x=this.decoder.decodeBitMatrix(L,m),v=zi.NO_POINTS}else{const L=new Yo(f.getBlackMatrix()).detect(m);x=this.decoder.decodeBitMatrix(L.getBits(),m),v=L.getPoints()}x.getOther()instanceof Fn&&x.getOther().applyMirroredCorrection(v);const y=new X(x.getText(),x.getRawBytes(),void 0,v,se.QR_CODE,void 0),E=x.getByteSegments();E!==null&&y.putMetadata(je.BYTE_SEGMENTS,E);const k=x.getECLevel();return k!==null&&y.putMetadata(je.ERROR_CORRECTION_LEVEL,k),x.hasStructuredAppend()&&(y.putMetadata(je.STRUCTURED_APPEND_SEQUENCE,x.getStructuredAppendSequenceNumber()),y.putMetadata(je.STRUCTURED_APPEND_PARITY,x.getStructuredAppendParity())),y}reset(){}static extractPureBits(f){const m=f.getTopLeftOnBit(),x=f.getBottomRightOnBit();if(m===null||x===null)throw new Z;const v=this.moduleSize(m,f);let y=m[1],E=x[1],k=m[0],L=x[0];if(k>=L||y>=E)throw new Z;if(E-y!==L-k&&(L=k+(E-y),L>=f.getWidth()))throw new Z;const H=Math.round((L-k+1)/v),Q=Math.round((E-y+1)/v);if(H<=0||Q<=0)throw new Z;if(Q!==H)throw new Z;const le=Math.floor(v/2);y+=le,k+=le;const fe=k+Math.floor((H-1)*v)-L;if(fe>0){if(fe>le)throw new Z;k-=fe}const Re=y+Math.floor((Q-1)*v)-E;if(Re>0){if(Re>le)throw new Z;y-=Re}const $e=new ee(H,Q);for(let We=0;We<Q;We++){const ot=y+Math.floor(We*v);for(let Nt=0;Nt<H;Nt++)f.get(k+Math.floor(Nt*v),ot)&&$e.set(Nt,We)}return $e}static moduleSize(f,m){const x=m.getHeight(),v=m.getWidth();let y=f[0],E=f[1],k=!0,L=0;for(;y<v&&E<x;){if(k!==m.get(y,E)){if(++L===5)break;k=!k}y++,E++}if(y===v||E===x)throw new Z;return(y-f[0])/7}}zi.NO_POINTS=new Array;class qr{PDF417Common(){}static getBitCountSum(f){return et.sum(f)}static toIntArray(f){if(f==null||!f.length)return qr.EMPTY_INT_ARRAY;const m=new Int32Array(f.length);let x=0;for(const v of f)m[x++]=v;return m}static getCodeword(f){const m=S.binarySearch(qr.SYMBOL_TABLE,f&262143);return m<0?-1:(qr.CODEWORD_TABLE[m]-1)%qr.NUMBER_OF_CODEWORDS}}qr.NUMBER_OF_CODEWORDS=929,qr.MAX_CODEWORDS_IN_BARCODE=qr.NUMBER_OF_CODEWORDS-1,qr.MIN_ROWS_IN_BARCODE=3,qr.MAX_ROWS_IN_BARCODE=90,qr.MODULES_IN_CODEWORD=17,qr.MODULES_IN_STOP_PATTERN=18,qr.BARS_IN_MODULE=8,qr.EMPTY_INT_ARRAY=new Int32Array([]),qr.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),qr.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Pu{constructor(f,m){this.bits=f,this.points=m}getBits(){return this.bits}getPoints(){return this.points}}class Gr{static detectMultiple(f,m,x){let v=f.getBlackMatrix(),y=Gr.detect(x,v);return y.length||(v=v.clone(),v.rotate180(),y=Gr.detect(x,v)),new Pu(v,y)}static detect(f,m){const x=new Array;let v=0,y=0,E=!1;for(;v<m.getHeight();){const k=Gr.findVertices(m,v,y);if(k[0]==null&&k[3]==null){if(!E)break;E=!1,y=0;for(const L of x)L[1]!=null&&(v=Math.trunc(Math.max(v,L[1].getY()))),L[3]!=null&&(v=Math.max(v,Math.trunc(L[3].getY())));v+=Gr.ROW_STEP;continue}if(E=!0,x.push(k),!f)break;k[2]!=null?(y=Math.trunc(k[2].getX()),v=Math.trunc(k[2].getY())):(y=Math.trunc(k[4].getX()),v=Math.trunc(k[4].getY()))}return x}static findVertices(f,m,x){const v=f.getHeight(),y=f.getWidth(),E=new Array(8);return Gr.copyToResult(E,Gr.findRowsWithPattern(f,v,y,m,x,Gr.START_PATTERN),Gr.INDEXES_START_PATTERN),E[4]!=null&&(x=Math.trunc(E[4].getX()),m=Math.trunc(E[4].getY())),Gr.copyToResult(E,Gr.findRowsWithPattern(f,v,y,m,x,Gr.STOP_PATTERN),Gr.INDEXES_STOP_PATTERN),E}static copyToResult(f,m,x){for(let v=0;v<x.length;v++)f[x[v]]=m[v]}static findRowsWithPattern(f,m,x,v,y,E){const k=new Array(4);let L=!1;const H=new Int32Array(E.length);for(;v<m;v+=Gr.ROW_STEP){let le=Gr.findGuardPattern(f,y,v,x,!1,E,H);if(le!=null){for(;v>0;){const fe=Gr.findGuardPattern(f,y,--v,x,!1,E,H);if(fe!=null)le=fe;else{v++;break}}k[0]=new Ve(le[0],v),k[1]=new Ve(le[1],v),L=!0;break}}let Q=v+1;if(L){let le=0,fe=Int32Array.from([Math.trunc(k[0].getX()),Math.trunc(k[1].getX())]);for(;Q<m;Q++){const Re=Gr.findGuardPattern(f,fe[0],Q,x,!1,E,H);if(Re!=null&&Math.abs(fe[0]-Re[0])<Gr.MAX_PATTERN_DRIFT&&Math.abs(fe[1]-Re[1])<Gr.MAX_PATTERN_DRIFT)fe=Re,le=0;else{if(le>Gr.SKIPPED_ROW_COUNT_MAX)break;le++}}Q-=le+1,k[2]=new Ve(fe[0],Q),k[3]=new Ve(fe[1],Q)}return Q-v<Gr.BARCODE_MIN_HEIGHT&&S.fill(k,null),k}static findGuardPattern(f,m,x,v,y,E,k){S.fillWithin(k,0,k.length,0);let L=m,H=0;for(;f.get(L,x)&&L>0&&H++<Gr.MAX_PIXEL_DRIFT;)L--;let Q=L,le=0,fe=E.length;for(let Re=y;Q<v;Q++)if(f.get(Q,x)!==Re)k[le]++;else{if(le===fe-1){if(Gr.patternMatchVariance(k,E,Gr.MAX_INDIVIDUAL_VARIANCE)<Gr.MAX_AVG_VARIANCE)return new Int32Array([L,Q]);L+=k[0]+k[1],w.arraycopy(k,2,k,0,le-1),k[le-1]=0,k[le]=0,le--}else le++;k[le]=1,Re=!Re}return le===fe-1&&Gr.patternMatchVariance(k,E,Gr.MAX_INDIVIDUAL_VARIANCE)<Gr.MAX_AVG_VARIANCE?new Int32Array([L,Q-1]):null}static patternMatchVariance(f,m,x){let v=f.length,y=0,E=0;for(let H=0;H<v;H++)y+=f[H],E+=m[H];if(y<E)return 1/0;let k=y/E;x*=k;let L=0;for(let H=0;H<v;H++){let Q=f[H],le=m[H]*k,fe=Q>le?Q-le:le-Q;if(fe>x)return 1/0;L+=fe}return L/y}}Gr.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Gr.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Gr.MAX_AVG_VARIANCE=.42,Gr.MAX_INDIVIDUAL_VARIANCE=.8,Gr.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Gr.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Gr.MAX_PIXEL_DRIFT=3,Gr.MAX_PATTERN_DRIFT=5,Gr.SKIPPED_ROW_COUNT_MAX=25,Gr.ROW_STEP=5,Gr.BARCODE_MIN_HEIGHT=10;class ua{constructor(f,m){if(m.length===0)throw new h;this.field=f;let x=m.length;if(x>1&&m[0]===0){let v=1;for(;v<x&&m[v]===0;)v++;v===x?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(x-v),w.arraycopy(m,v,this.coefficients,0,this.coefficients.length))}else this.coefficients=m}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(f){return this.coefficients[this.coefficients.length-1-f]}evaluateAt(f){if(f===0)return this.getCoefficient(0);if(f===1){let v=0;for(let y of this.coefficients)v=this.field.add(v,y);return v}let m=this.coefficients[0],x=this.coefficients.length;for(let v=1;v<x;v++)m=this.field.add(this.field.multiply(f,m),this.coefficients[v]);return m}add(f){if(!this.field.equals(f.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero())return f;if(f.isZero())return this;let m=this.coefficients,x=f.coefficients;if(m.length>x.length){let E=m;m=x,x=E}let v=new Int32Array(x.length),y=x.length-m.length;w.arraycopy(x,0,v,0,y);for(let E=y;E<x.length;E++)v[E]=this.field.add(m[E-y],x[E]);return new ua(this.field,v)}subtract(f){if(!this.field.equals(f.field))throw new h("ModulusPolys do not have same ModulusGF field");return f.isZero()?this:this.add(f.negative())}multiply(f){return f instanceof ua?this.multiplyOther(f):this.multiplyScalar(f)}multiplyOther(f){if(!this.field.equals(f.field))throw new h("ModulusPolys do not have same ModulusGF field");if(this.isZero()||f.isZero())return new ua(this.field,new Int32Array([0]));let m=this.coefficients,x=m.length,v=f.coefficients,y=v.length,E=new Int32Array(x+y-1);for(let k=0;k<x;k++){let L=m[k];for(let H=0;H<y;H++)E[k+H]=this.field.add(E[k+H],this.field.multiply(L,v[H]))}return new ua(this.field,E)}negative(){let f=this.coefficients.length,m=new Int32Array(f);for(let x=0;x<f;x++)m[x]=this.field.subtract(0,this.coefficients[x]);return new ua(this.field,m)}multiplyScalar(f){if(f===0)return new ua(this.field,new Int32Array([0]));if(f===1)return this;let m=this.coefficients.length,x=new Int32Array(m);for(let v=0;v<m;v++)x[v]=this.field.multiply(this.coefficients[v],f);return new ua(this.field,x)}multiplyByMonomial(f,m){if(f<0)throw new h;if(m===0)return new ua(this.field,new Int32Array([0]));let x=this.coefficients.length,v=new Int32Array(x+f);for(let y=0;y<x;y++)v[y]=this.field.multiply(this.coefficients[y],m);return new ua(this.field,v)}toString(){let f=new F;for(let m=this.getDegree();m>=0;m--){let x=this.getCoefficient(m);x!==0&&(x<0?(f.append(" - "),x=-x):f.length()>0&&f.append(" + "),(m===0||x!==1)&&f.append(x),m!==0&&(m===1?f.append("x"):(f.append("x^"),f.append(m))))}return f.toString()}}class rf{add(f,m){return(f+m)%this.modulus}subtract(f,m){return(this.modulus+f-m)%this.modulus}exp(f){return this.expTable[f]}log(f){if(f===0)throw new h;return this.logTable[f]}inverse(f){if(f===0)throw new Ue;return this.expTable[this.modulus-this.logTable[f]-1]}multiply(f,m){return f===0||m===0?0:this.expTable[(this.logTable[f]+this.logTable[m])%(this.modulus-1)]}getSize(){return this.modulus}equals(f){return f===this}}class da extends rf{constructor(f,m){super(),this.modulus=f,this.expTable=new Int32Array(f),this.logTable=new Int32Array(f);let x=1;for(let v=0;v<f;v++)this.expTable[v]=x,x=x*m%f;for(let v=0;v<f-1;v++)this.logTable[this.expTable[v]]=v;this.zero=new ua(this,new Int32Array([0])),this.one=new ua(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(f,m){if(f<0)throw new h;if(m===0)return this.zero;let x=new Int32Array(f+1);return x[0]=m,new ua(this,x)}}da.PDF417_GF=new da(qr.NUMBER_OF_CODEWORDS,3);class Du{constructor(){this.field=da.PDF417_GF}decode(f,m,x){let v=new ua(this.field,f),y=new Int32Array(m),E=!1;for(let $e=m;$e>0;$e--){let We=v.evaluateAt(this.field.exp($e));y[m-$e]=We,We!==0&&(E=!0)}if(!E)return 0;let k=this.field.getOne();if(x!=null)for(const $e of x){let We=this.field.exp(f.length-1-$e),ot=new ua(this.field,new Int32Array([this.field.subtract(0,We),1]));k=k.multiply(ot)}let L=new ua(this.field,y),H=this.runEuclideanAlgorithm(this.field.buildMonomial(m,1),L,m),Q=H[0],le=H[1],fe=this.findErrorLocations(Q),Re=this.findErrorMagnitudes(le,Q,fe);for(let $e=0;$e<fe.length;$e++){let We=f.length-1-this.field.log(fe[$e]);if(We<0)throw g.getChecksumInstance();f[We]=this.field.subtract(f[We],Re[$e])}return fe.length}runEuclideanAlgorithm(f,m,x){if(f.getDegree()<m.getDegree()){let fe=f;f=m,m=fe}let v=f,y=m,E=this.field.getZero(),k=this.field.getOne();for(;y.getDegree()>=Math.round(x/2);){let fe=v,Re=E;if(v=y,E=k,v.isZero())throw g.getChecksumInstance();y=fe;let $e=this.field.getZero(),We=v.getCoefficient(v.getDegree()),ot=this.field.inverse(We);for(;y.getDegree()>=v.getDegree()&&!y.isZero();){let Nt=y.getDegree()-v.getDegree(),Bt=this.field.multiply(y.getCoefficient(y.getDegree()),ot);$e=$e.add(this.field.buildMonomial(Nt,Bt)),y=y.subtract(v.multiplyByMonomial(Nt,Bt))}k=$e.multiply(E).subtract(Re).negative()}let L=k.getCoefficient(0);if(L===0)throw g.getChecksumInstance();let H=this.field.inverse(L),Q=k.multiply(H),le=y.multiply(H);return[Q,le]}findErrorLocations(f){let m=f.getDegree(),x=new Int32Array(m),v=0;for(let y=1;y<this.field.getSize()&&v<m;y++)f.evaluateAt(y)===0&&(x[v]=this.field.inverse(y),v++);if(v!==m)throw g.getChecksumInstance();return x}findErrorMagnitudes(f,m,x){let v=m.getDegree(),y=new Int32Array(v);for(let H=1;H<=v;H++)y[v-H]=this.field.multiply(H,m.getCoefficient(H));let E=new ua(this.field,y),k=x.length,L=new Int32Array(k);for(let H=0;H<k;H++){let Q=this.field.inverse(x[H]),le=this.field.subtract(0,f.evaluateAt(Q)),fe=this.field.inverse(E.evaluateAt(Q));L[H]=this.field.multiply(le,fe)}return L}}class Zo{constructor(f,m,x,v,y){f instanceof Zo?this.constructor_2(f):this.constructor_1(f,m,x,v,y)}constructor_1(f,m,x,v,y){const E=m==null||x==null,k=v==null||y==null;if(E&&k)throw new Z;E?(m=new Ve(0,v.getY()),x=new Ve(0,y.getY())):k&&(v=new Ve(f.getWidth()-1,m.getY()),y=new Ve(f.getWidth()-1,x.getY())),this.image=f,this.topLeft=m,this.bottomLeft=x,this.topRight=v,this.bottomRight=y,this.minX=Math.trunc(Math.min(m.getX(),x.getX())),this.maxX=Math.trunc(Math.max(v.getX(),y.getX())),this.minY=Math.trunc(Math.min(m.getY(),v.getY())),this.maxY=Math.trunc(Math.max(x.getY(),y.getY()))}constructor_2(f){this.image=f.image,this.topLeft=f.getTopLeft(),this.bottomLeft=f.getBottomLeft(),this.topRight=f.getTopRight(),this.bottomRight=f.getBottomRight(),this.minX=f.getMinX(),this.maxX=f.getMaxX(),this.minY=f.getMinY(),this.maxY=f.getMaxY()}static merge(f,m){return f==null?m:m==null?f:new Zo(f.image,f.topLeft,f.bottomLeft,m.topRight,m.bottomRight)}addMissingRows(f,m,x){let v=this.topLeft,y=this.bottomLeft,E=this.topRight,k=this.bottomRight;if(f>0){let L=x?this.topLeft:this.topRight,H=Math.trunc(L.getY()-f);H<0&&(H=0);let Q=new Ve(L.getX(),H);x?v=Q:E=Q}if(m>0){let L=x?this.bottomLeft:this.bottomRight,H=Math.trunc(L.getY()+m);H>=this.image.getHeight()&&(H=this.image.getHeight()-1);let Q=new Ve(L.getX(),H);x?y=Q:k=Q}return new Zo(this.image,v,y,E,k)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Hc{constructor(f,m,x,v){this.columnCount=f,this.errorCorrectionLevel=v,this.rowCountUpperPart=m,this.rowCountLowerPart=x,this.rowCount=m+x}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qo{constructor(){this.buffer=""}static form(f,m){let x=-1;function v(E,k,L,H,Q,le){if(E==="%%")return"%";if(m[++x]===void 0)return;E=H?parseInt(H.substr(1)):void 0;let fe=Q?parseInt(Q.substr(1)):void 0,Re;switch(le){case"s":Re=m[x];break;case"c":Re=m[x][0];break;case"f":Re=parseFloat(m[x]).toFixed(E);break;case"p":Re=parseFloat(m[x]).toPrecision(E);break;case"e":Re=parseFloat(m[x]).toExponential(E);break;case"x":Re=parseInt(m[x]).toString(fe||16);break;case"d":Re=parseFloat(parseInt(m[x],fe||10).toPrecision(E)).toFixed(0);break}Re=typeof Re=="object"?JSON.stringify(Re):(+Re).toString(fe);let $e=parseInt(L),We=L&&L[0]+""=="0"?"0":" ";for(;Re.length<$e;)Re=k!==void 0?Re+We:We+Re;return Re}let y=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return f.replace(y,v)}format(f,...m){this.buffer+=Qo.form(f,m)}toString(){return this.buffer}}class Jo{constructor(f){this.boundingBox=new Zo(f),this.codewords=new Array(f.getMaxY()-f.getMinY()+1)}getCodewordNearby(f){let m=this.getCodeword(f);if(m!=null)return m;for(let x=1;x<Jo.MAX_NEARBY_DISTANCE;x++){let v=this.imageRowToCodewordIndex(f)-x;if(v>=0&&(m=this.codewords[v],m!=null)||(v=this.imageRowToCodewordIndex(f)+x,v<this.codewords.length&&(m=this.codewords[v],m!=null)))return m}return null}imageRowToCodewordIndex(f){return f-this.boundingBox.getMinY()}setCodeword(f,m){this.codewords[this.imageRowToCodewordIndex(f)]=m}getCodeword(f){return this.codewords[this.imageRowToCodewordIndex(f)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const f=new Qo;let m=0;for(const x of this.codewords){if(x==null){f.format("%3d:    |   %n",m++);continue}f.format("%3d: %3d|%3d%n",m++,x.getRowNumber(),x.getValue())}return f.toString()}}Jo.MAX_NEARBY_DISTANCE=5;class El{constructor(){this.values=new Map}setValue(f){f=Math.trunc(f);let m=this.values.get(f);m==null&&(m=0),m++,this.values.set(f,m)}getValue(){let f=-1,m=new Array;for(const[x,v]of this.values.entries()){const y={getKey:()=>x,getValue:()=>v};y.getValue()>f?(f=y.getValue(),m=[],m.push(y.getKey())):y.getValue()===f&&m.push(y.getKey())}return qr.toIntArray(m)}getConfidence(f){return this.values.get(f)}}class so extends Jo{constructor(f,m){super(f),this._isLeft=m}setRowNumbers(){for(let f of this.getCodewords())f!=null&&f.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(f){let m=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(m,f);let x=this.getBoundingBox(),v=this._isLeft?x.getTopLeft():x.getTopRight(),y=this._isLeft?x.getBottomLeft():x.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(v.getY())),k=this.imageRowToCodewordIndex(Math.trunc(y.getY())),L=-1,H=1,Q=0;for(let le=E;le<k;le++){if(m[le]==null)continue;let fe=m[le],Re=fe.getRowNumber()-L;if(Re===0)Q++;else if(Re===1)H=Math.max(H,Q),Q=1,L=fe.getRowNumber();else if(Re<0||fe.getRowNumber()>=f.getRowCount()||Re>le)m[le]=null;else{let $e;H>2?$e=(H-2)*Re:$e=Re;let We=$e>=le;for(let ot=1;ot<=$e&&!We;ot++)We=m[le-ot]!=null;We?m[le]=null:(L=fe.getRowNumber(),Q=1)}}}getRowHeights(){let f=this.getBarcodeMetadata();if(f==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(f);let m=new Int32Array(f.getRowCount());for(let x of this.getCodewords())if(x!=null){let v=x.getRowNumber();if(v>=m.length)continue;m[v]++}return m}adjustIncompleteIndicatorColumnRowNumbers(f){let m=this.getBoundingBox(),x=this._isLeft?m.getTopLeft():m.getTopRight(),v=this._isLeft?m.getBottomLeft():m.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(x.getY())),E=this.imageRowToCodewordIndex(Math.trunc(v.getY())),k=this.getCodewords(),L=-1;for(let H=y;H<E;H++){if(k[H]==null)continue;let Q=k[H];Q.setRowNumberAsRowIndicatorColumn();let le=Q.getRowNumber()-L;le===0||(le===1?L=Q.getRowNumber():Q.getRowNumber()>=f.getRowCount()?k[H]=null:L=Q.getRowNumber())}}getBarcodeMetadata(){let f=this.getCodewords(),m=new El,x=new El,v=new El,y=new El;for(let k of f){if(k==null)continue;k.setRowNumberAsRowIndicatorColumn();let L=k.getValue()%30,H=k.getRowNumber();switch(this._isLeft||(H+=2),H%3){case 0:x.setValue(L*3+1);break;case 1:y.setValue(L/3),v.setValue(L%3);break;case 2:m.setValue(L+1);break}}if(m.getValue().length===0||x.getValue().length===0||v.getValue().length===0||y.getValue().length===0||m.getValue()[0]<1||x.getValue()[0]+v.getValue()[0]<qr.MIN_ROWS_IN_BARCODE||x.getValue()[0]+v.getValue()[0]>qr.MAX_ROWS_IN_BARCODE)return null;let E=new Hc(m.getValue()[0],x.getValue()[0],v.getValue()[0],y.getValue()[0]);return this.removeIncorrectCodewords(f,E),E}removeIncorrectCodewords(f,m){for(let x=0;x<f.length;x++){let v=f[x];if(f[x]==null)continue;let y=v.getValue()%30,E=v.getRowNumber();if(E>m.getRowCount()){f[x]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:y*3+1!==m.getRowCountUpperPart()&&(f[x]=null);break;case 1:(Math.trunc(y/3)!==m.getErrorCorrectionLevel()||y%3!==m.getRowCountLowerPart())&&(f[x]=null);break;case 2:y+1!==m.getColumnCount()&&(f[x]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Al{constructor(f,m){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=f,this.barcodeColumnCount=f.getColumnCount(),this.boundingBox=m,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let f=qr.MAX_CODEWORDS_IN_BARCODE,m;do m=f,f=this.adjustRowNumbersAndGetCount();while(f>0&&f<m);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(f){f!=null&&f.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let f=this.adjustRowNumbersByRow();if(f===0)return 0;for(let m=1;m<this.barcodeColumnCount+1;m++){let x=this.detectionResultColumns[m].getCodewords();for(let v=0;v<x.length;v++)x[v]!=null&&(x[v].hasValidRowNumber()||this.adjustRowNumbers(m,v,x))}return f}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let f=this.detectionResultColumns[0].getCodewords(),m=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let x=0;x<f.length;x++)if(f[x]!=null&&m[x]!=null&&f[x].getRowNumber()===m[x].getRowNumber())for(let v=1;v<=this.barcodeColumnCount;v++){let y=this.detectionResultColumns[v].getCodewords()[x];y!=null&&(y.setRowNumber(f[x].getRowNumber()),y.hasValidRowNumber()||(this.detectionResultColumns[v].getCodewords()[x]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let f=0,m=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let x=0;x<m.length;x++){if(m[x]==null)continue;let v=m[x].getRowNumber(),y=0;for(let E=this.barcodeColumnCount+1;E>0&&y<this.ADJUST_ROW_NUMBER_SKIP;E--){let k=this.detectionResultColumns[E].getCodewords()[x];k!=null&&(y=Al.adjustRowNumberIfValid(v,y,k),k.hasValidRowNumber()||f++)}}return f}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let f=0,m=this.detectionResultColumns[0].getCodewords();for(let x=0;x<m.length;x++){if(m[x]==null)continue;let v=m[x].getRowNumber(),y=0;for(let E=1;E<this.barcodeColumnCount+1&&y<this.ADJUST_ROW_NUMBER_SKIP;E++){let k=this.detectionResultColumns[E].getCodewords()[x];k!=null&&(y=Al.adjustRowNumberIfValid(v,y,k),k.hasValidRowNumber()||f++)}}return f}static adjustRowNumberIfValid(f,m,x){return x==null||x.hasValidRowNumber()||(x.isValidRowNumber(f)?(x.setRowNumber(f),m=0):++m),m}adjustRowNumbers(f,m,x){if(!this.detectionResultColumns[f-1])return;let v=x[m],y=this.detectionResultColumns[f-1].getCodewords(),E=y;this.detectionResultColumns[f+1]!=null&&(E=this.detectionResultColumns[f+1].getCodewords());let k=new Array(14);k[2]=y[m],k[3]=E[m],m>0&&(k[0]=x[m-1],k[4]=y[m-1],k[5]=E[m-1]),m>1&&(k[8]=x[m-2],k[10]=y[m-2],k[11]=E[m-2]),m<x.length-1&&(k[1]=x[m+1],k[6]=y[m+1],k[7]=E[m+1]),m<x.length-2&&(k[9]=x[m+2],k[12]=y[m+2],k[13]=E[m+2]);for(let L of k)if(Al.adjustRowNumber(v,L))return}static adjustRowNumber(f,m){return m==null?!1:m.hasValidRowNumber()&&m.getBucket()===f.getBucket()?(f.setRowNumber(m.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(f){this.boundingBox=f}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(f,m){this.detectionResultColumns[f]=m}getDetectionResultColumn(f){return this.detectionResultColumns[f]}toString(){let f=this.detectionResultColumns[0];f==null&&(f=this.detectionResultColumns[this.barcodeColumnCount+1]);let m=new Qo;for(let x=0;x<f.getCodewords().length;x++){m.format("CW %3d:",x);for(let v=0;v<this.barcodeColumnCount+2;v++){if(this.detectionResultColumns[v]==null){m.format("    |   ");continue}let y=this.detectionResultColumns[v].getCodewords()[x];if(y==null){m.format("    |   ");continue}m.format(" %3d|%3d",y.getRowNumber(),y.getValue())}m.format("%n")}return m.toString()}}class el{constructor(f,m,x,v){this.rowNumber=el.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(f),this.endX=Math.trunc(m),this.bucket=Math.trunc(x),this.value=Math.trunc(v)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(f){return f!==el.BARCODE_ROW_UNKNOWN&&this.bucket===f%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(f){this.rowNumber=f}toString(){return this.rowNumber+"|"+this.value}}el.BARCODE_ROW_UNKNOWN=-1;class Ca{static initialize(){for(let f=0;f<qr.SYMBOL_TABLE.length;f++){let m=qr.SYMBOL_TABLE[f],x=m&1;for(let v=0;v<qr.BARS_IN_MODULE;v++){let y=0;for(;(m&1)===x;)y+=1,m>>=1;x=m&1,Ca.RATIOS_TABLE[f]||(Ca.RATIOS_TABLE[f]=new Array(qr.BARS_IN_MODULE)),Ca.RATIOS_TABLE[f][qr.BARS_IN_MODULE-v-1]=Math.fround(y/qr.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(f){let m=Ca.getDecodedCodewordValue(Ca.sampleBitCounts(f));return m!==-1?m:Ca.getClosestDecodedValue(f)}static sampleBitCounts(f){let m=et.sum(f),x=new Int32Array(qr.BARS_IN_MODULE),v=0,y=0;for(let E=0;E<qr.MODULES_IN_CODEWORD;E++){let k=m/(2*qr.MODULES_IN_CODEWORD)+E*m/qr.MODULES_IN_CODEWORD;y+f[v]<=k&&(y+=f[v],v++),x[v]++}return x}static getDecodedCodewordValue(f){let m=Ca.getBitValue(f);return qr.getCodeword(m)===-1?-1:m}static getBitValue(f){let m=0;for(let x=0;x<f.length;x++)for(let v=0;v<f[x];v++)m=m<<1|(x%2===0?1:0);return Math.trunc(m)}static getClosestDecodedValue(f){let m=et.sum(f),x=new Array(qr.BARS_IN_MODULE);if(m>1)for(let E=0;E<x.length;E++)x[E]=Math.fround(f[E]/m);let v=er.MAX_VALUE,y=-1;this.bSymbolTableReady||Ca.initialize();for(let E=0;E<Ca.RATIOS_TABLE.length;E++){let k=0,L=Ca.RATIOS_TABLE[E];for(let H=0;H<qr.BARS_IN_MODULE;H++){let Q=Math.fround(L[H]-x[H]);if(k+=Math.fround(Q*Q),k>=v)break}k<v&&(v=k,y=qr.SYMBOL_TABLE[E])}return y}}Ca.bSymbolTableReady=!1,Ca.RATIOS_TABLE=new Array(qr.SYMBOL_TABLE.length).map(oe=>new Array(qr.BARS_IN_MODULE));class Mu{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(f){this.segmentIndex=f}getFileId(){return this.fileId}setFileId(f){this.fileId=f}getOptionalData(){return this.optionalData}setOptionalData(f){this.optionalData=f}isLastSegment(){return this.lastSegment}setLastSegment(f){this.lastSegment=f}getSegmentCount(){return this.segmentCount}setSegmentCount(f){this.segmentCount=f}getSender(){return this.sender||null}setSender(f){this.sender=f}getAddressee(){return this.addressee||null}setAddressee(f){this.addressee=f}getFileName(){return this.fileName}setFileName(f){this.fileName=f}getFileSize(){return this.fileSize}setFileSize(f){this.fileSize=f}getChecksum(){return this.checksum}setChecksum(f){this.checksum=f}getTimestamp(){return this.timestamp}setTimestamp(f){this.timestamp=f}}class tc{static parseLong(f,m=void 0){return parseInt(f,m)}}class rc extends u{}rc.kind="NullPointerException";class qc{writeBytes(f){this.writeBytesOffset(f,0,f.length)}writeBytesOffset(f,m,x){if(f==null)throw new rc;if(m<0||m>f.length||x<0||m+x>f.length||m+x<0)throw new _;if(x===0)return;for(let v=0;v<x;v++)this.write(f[m+v])}flush(){}close(){}}class Lu extends u{}class Oh extends qc{constructor(f=32){if(super(),this.count=0,f<0)throw new h("Negative initial size: "+f);this.buf=new Uint8Array(f)}ensureCapacity(f){f-this.buf.length>0&&this.grow(f)}grow(f){let x=this.buf.length<<1;if(x-f<0&&(x=f),x<0){if(f<0)throw new Lu;x=T.MAX_VALUE}this.buf=S.copyOfUint8Array(this.buf,x)}write(f){this.ensureCapacity(this.count+1),this.buf[this.count]=f,this.count+=1}writeBytesOffset(f,m,x){if(m<0||m>f.length||x<0||m+x-f.length>0)throw new _;this.ensureCapacity(this.count+x),w.arraycopy(f,m,this.buf,this.count,x),this.count+=x}writeTo(f){f.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return S.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(f){return f?typeof f=="string"?this.toString_string(f):this.toString_number(f):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(f){return new String(this.buf).toString()}toString_number(f){return new String(this.buf).toString()}close(){}}var En;(function(oe){oe[oe.ALPHA=0]="ALPHA",oe[oe.LOWER=1]="LOWER",oe[oe.MIXED=2]="MIXED",oe[oe.PUNCT=3]="PUNCT",oe[oe.ALPHA_SHIFT=4]="ALPHA_SHIFT",oe[oe.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(En||(En={}));function Vi(){if(typeof window<"u")return window.BigInt||null;if(typeof Rv<"u")return Rv.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Gc;function ko(oe){if(typeof Gc>"u"&&(Gc=Vi()),Gc===null)throw new Error("BigInt is not supported!");return Gc(oe)}function nc(){let oe=[];oe[0]=ko(1);let f=ko(900);oe[1]=f;for(let m=2;m<16;m++)oe[m]=oe[m-1]*f;return oe}class Et{static decode(f,m){let x=new F(""),v=I.ISO8859_1;x.enableDecoding(v);let y=1,E=f[y++],k=new Mu;for(;y<f[0];){switch(E){case Et.TEXT_COMPACTION_MODE_LATCH:y=Et.textCompaction(f,y,x);break;case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:y=Et.byteCompaction(E,f,v,y,x);break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:x.append(f[y++]);break;case Et.NUMERIC_COMPACTION_MODE_LATCH:y=Et.numericCompaction(f,y,x);break;case Et.ECI_CHARSET:I.getCharacterSetECIByValue(f[y++]);break;case Et.ECI_GENERAL_PURPOSE:y+=2;break;case Et.ECI_USER_DEFINED:y++;break;case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:y=Et.decodeMacroBlock(f,y,k);break;case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:throw new O;default:y--,y=Et.textCompaction(f,y,x);break}if(y<f.length)E=f[y++];else throw O.getFormatInstance()}if(x.length()===0)throw O.getFormatInstance();let L=new pe(null,x.toString(),null,m);return L.setOther(k),L}static decodeMacroBlock(f,m,x){if(m+Et.NUMBER_OF_SEQUENCE_CODEWORDS>f[0])throw O.getFormatInstance();let v=new Int32Array(Et.NUMBER_OF_SEQUENCE_CODEWORDS);for(let k=0;k<Et.NUMBER_OF_SEQUENCE_CODEWORDS;k++,m++)v[k]=f[m];x.setSegmentIndex(T.parseInt(Et.decodeBase900toBase10(v,Et.NUMBER_OF_SEQUENCE_CODEWORDS)));let y=new F;m=Et.textCompaction(f,m,y),x.setFileId(y.toString());let E=-1;for(f[m]===Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=m+1);m<f[0];)switch(f[m]){case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(m++,f[m]){case Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let k=new F;m=Et.textCompaction(f,m+1,k),x.setFileName(k.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let L=new F;m=Et.textCompaction(f,m+1,L),x.setSender(L.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let H=new F;m=Et.textCompaction(f,m+1,H),x.setAddressee(H.toString());break;case Et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let Q=new F;m=Et.numericCompaction(f,m+1,Q),x.setSegmentCount(T.parseInt(Q.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let le=new F;m=Et.numericCompaction(f,m+1,le),x.setTimestamp(tc.parseLong(le.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let fe=new F;m=Et.numericCompaction(f,m+1,fe),x.setChecksum(T.parseInt(fe.toString()));break;case Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Re=new F;m=Et.numericCompaction(f,m+1,Re),x.setFileSize(tc.parseLong(Re.toString()));break;default:throw O.getFormatInstance()}break;case Et.MACRO_PDF417_TERMINATOR:m++,x.setLastSegment(!0);break;default:throw O.getFormatInstance()}if(E!==-1){let k=m-E;x.isLastSegment()&&k--,x.setOptionalData(S.copyOfRange(f,E,E+k))}return m}static textCompaction(f,m,x){let v=new Int32Array((f[0]-m)*2),y=new Int32Array((f[0]-m)*2),E=0,k=!1;for(;m<f[0]&&!k;){let L=f[m++];if(L<Et.TEXT_COMPACTION_MODE_LATCH)v[E]=L/30,v[E+1]=L%30,E+=2;else switch(L){case Et.TEXT_COMPACTION_MODE_LATCH:v[E++]=Et.TEXT_COMPACTION_MODE_LATCH;break;case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:m--,k=!0;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v[E]=Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,L=f[m++],y[E]=L,E++;break}}return Et.decodeTextCompaction(v,y,E,x),m}static decodeTextCompaction(f,m,x,v){let y=En.ALPHA,E=En.ALPHA,k=0;for(;k<x;){let L=f[k],H="";switch(y){case En.ALPHA:if(L<26)H=String.fromCharCode(65+L);else switch(L){case 26:H=" ";break;case Et.LL:y=En.LOWER;break;case Et.ML:y=En.MIXED;break;case Et.PS:E=y,y=En.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=En.ALPHA;break}break;case En.LOWER:if(L<26)H=String.fromCharCode(97+L);else switch(L){case 26:H=" ";break;case Et.AS:E=y,y=En.ALPHA_SHIFT;break;case Et.ML:y=En.MIXED;break;case Et.PS:E=y,y=En.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=En.ALPHA;break}break;case En.MIXED:if(L<Et.PL)H=Et.MIXED_CHARS[L];else switch(L){case Et.PL:y=En.PUNCT;break;case 26:H=" ";break;case Et.LL:y=En.LOWER;break;case Et.AL:y=En.ALPHA;break;case Et.PS:E=y,y=En.PUNCT_SHIFT;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=En.ALPHA;break}break;case En.PUNCT:if(L<Et.PAL)H=Et.PUNCT_CHARS[L];else switch(L){case Et.PAL:y=En.ALPHA;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=En.ALPHA;break}break;case En.ALPHA_SHIFT:if(y=E,L<26)H=String.fromCharCode(65+L);else switch(L){case 26:H=" ";break;case Et.TEXT_COMPACTION_MODE_LATCH:y=En.ALPHA;break}break;case En.PUNCT_SHIFT:if(y=E,L<Et.PAL)H=Et.PUNCT_CHARS[L];else switch(L){case Et.PAL:y=En.ALPHA;break;case Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(m[k]);break;case Et.TEXT_COMPACTION_MODE_LATCH:y=En.ALPHA;break}break}H!==""&&v.append(H),k++}}static byteCompaction(f,m,x,v,y){let E=new Oh,k=0,L=0,H=!1;switch(f){case Et.BYTE_COMPACTION_MODE_LATCH:let Q=new Int32Array(6),le=m[v++];for(;v<m[0]&&!H;)switch(Q[k++]=le,L=900*L+le,le=m[v++],le){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:v--,H=!0;break;default:if(k%5===0&&k>0){for(let fe=0;fe<6;++fe)E.write(Number(ko(L)>>ko(8*(5-fe))));L=0,k=0}break}v===m[0]&&le<Et.TEXT_COMPACTION_MODE_LATCH&&(Q[k++]=le);for(let fe=0;fe<k;fe++)E.write(Q[fe]);break;case Et.BYTE_COMPACTION_MODE_LATCH_6:for(;v<m[0]&&!H;){let fe=m[v++];if(fe<Et.TEXT_COMPACTION_MODE_LATCH)k++,L=900*L+fe;else switch(fe){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.NUMERIC_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:v--,H=!0;break}if(k%5===0&&k>0){for(let Re=0;Re<6;++Re)E.write(Number(ko(L)>>ko(8*(5-Re))));L=0,k=0}}break}return y.append(P.decode(E.toByteArray(),x)),v}static numericCompaction(f,m,x){let v=0,y=!1,E=new Int32Array(Et.MAX_NUMERIC_CODEWORDS);for(;m<f[0]&&!y;){let k=f[m++];if(m===f[0]&&(y=!0),k<Et.TEXT_COMPACTION_MODE_LATCH)E[v]=k,v++;else switch(k){case Et.TEXT_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH:case Et.BYTE_COMPACTION_MODE_LATCH_6:case Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Et.MACRO_PDF417_TERMINATOR:m--,y=!0;break}(v%Et.MAX_NUMERIC_CODEWORDS===0||k===Et.NUMERIC_COMPACTION_MODE_LATCH||y)&&v>0&&(x.append(Et.decodeBase900toBase10(E,v)),v=0)}return m}static decodeBase900toBase10(f,m){let x=ko(0);for(let y=0;y<m;y++)x+=Et.EXP900[m-y-1]*ko(f[y]);let v=x.toString();if(v.charAt(0)!=="1")throw new O;return v.substring(1)}}Et.TEXT_COMPACTION_MODE_LATCH=900,Et.BYTE_COMPACTION_MODE_LATCH=901,Et.NUMERIC_COMPACTION_MODE_LATCH=902,Et.BYTE_COMPACTION_MODE_LATCH_6=924,Et.ECI_USER_DEFINED=925,Et.ECI_GENERAL_PURPOSE=926,Et.ECI_CHARSET=927,Et.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Et.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Et.MACRO_PDF417_TERMINATOR=922,Et.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Et.MAX_NUMERIC_CODEWORDS=15,Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Et.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Et.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Et.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Et.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Et.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Et.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Et.PL=25,Et.LL=27,Et.AS=27,Et.ML=28,Et.AL=28,Et.PS=29,Et.PAL=29,Et.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Et.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Et.EXP900=Vi()?nc():[],Et.NUMBER_OF_SEQUENCE_CODEWORDS=2;class U{constructor(){}static decode(f,m,x,v,y,E,k){let L=new Zo(f,m,x,v,y),H=null,Q=null,le;for(let $e=!0;;$e=!1){if(m!=null&&(H=U.getRowIndicatorColumn(f,L,m,!0,E,k)),v!=null&&(Q=U.getRowIndicatorColumn(f,L,v,!1,E,k)),le=U.merge(H,Q),le==null)throw Z.getNotFoundInstance();let We=le.getBoundingBox();if($e&&We!=null&&(We.getMinY()<L.getMinY()||We.getMaxY()>L.getMaxY()))L=We;else break}le.setBoundingBox(L);let fe=le.getBarcodeColumnCount()+1;le.setDetectionResultColumn(0,H),le.setDetectionResultColumn(fe,Q);let Re=H!=null;for(let $e=1;$e<=fe;$e++){let We=Re?$e:fe-$e;if(le.getDetectionResultColumn(We)!==void 0)continue;let ot;We===0||We===fe?ot=new so(L,We===0):ot=new Jo(L),le.setDetectionResultColumn(We,ot);let Nt=-1,Bt=Nt;for(let Kt=L.getMinY();Kt<=L.getMaxY();Kt++){if(Nt=U.getStartColumn(le,We,Kt,Re),Nt<0||Nt>L.getMaxX()){if(Bt===-1)continue;Nt=Bt}let $t=U.detectCodeword(f,L.getMinX(),L.getMaxX(),Re,Nt,Kt,E,k);$t!=null&&(ot.setCodeword(Kt,$t),Bt=Nt,E=Math.min(E,$t.getWidth()),k=Math.max(k,$t.getWidth()))}}return U.createDecoderResult(le)}static merge(f,m){if(f==null&&m==null)return null;let x=U.getBarcodeMetadata(f,m);if(x==null)return null;let v=Zo.merge(U.adjustBoundingBox(f),U.adjustBoundingBox(m));return new Al(x,v)}static adjustBoundingBox(f){if(f==null)return null;let m=f.getRowHeights();if(m==null)return null;let x=U.getMax(m),v=0;for(let k of m)if(v+=x-k,k>0)break;let y=f.getCodewords();for(let k=0;v>0&&y[k]==null;k++)v--;let E=0;for(let k=m.length-1;k>=0&&(E+=x-m[k],!(m[k]>0));k--);for(let k=y.length-1;E>0&&y[k]==null;k--)E--;return f.getBoundingBox().addMissingRows(v,E,f.isLeft())}static getMax(f){let m=-1;for(let x of f)m=Math.max(m,x);return m}static getBarcodeMetadata(f,m){let x;if(f==null||(x=f.getBarcodeMetadata())==null)return m==null?null:m.getBarcodeMetadata();let v;return m==null||(v=m.getBarcodeMetadata())==null?x:x.getColumnCount()!==v.getColumnCount()&&x.getErrorCorrectionLevel()!==v.getErrorCorrectionLevel()&&x.getRowCount()!==v.getRowCount()?null:x}static getRowIndicatorColumn(f,m,x,v,y,E){let k=new so(m,v);for(let L=0;L<2;L++){let H=L===0?1:-1,Q=Math.trunc(Math.trunc(x.getX()));for(let le=Math.trunc(Math.trunc(x.getY()));le<=m.getMaxY()&&le>=m.getMinY();le+=H){let fe=U.detectCodeword(f,0,f.getWidth(),v,Q,le,y,E);fe!=null&&(k.setCodeword(le,fe),v?Q=fe.getStartX():Q=fe.getEndX())}}return k}static adjustCodewordCount(f,m){let x=m[0][1],v=x.getValue(),y=f.getBarcodeColumnCount()*f.getBarcodeRowCount()-U.getNumberOfECCodeWords(f.getBarcodeECLevel());if(v.length===0){if(y<1||y>qr.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();x.setValue(y)}else v[0]!==y&&x.setValue(y)}static createDecoderResult(f){let m=U.createBarcodeMatrix(f);U.adjustCodewordCount(f,m);let x=new Array,v=new Int32Array(f.getBarcodeRowCount()*f.getBarcodeColumnCount()),y=[],E=new Array;for(let L=0;L<f.getBarcodeRowCount();L++)for(let H=0;H<f.getBarcodeColumnCount();H++){let Q=m[L][H+1].getValue(),le=L*f.getBarcodeColumnCount()+H;Q.length===0?x.push(le):Q.length===1?v[le]=Q[0]:(E.push(le),y.push(Q))}let k=new Array(y.length);for(let L=0;L<k.length;L++)k[L]=y[L];return U.createDecoderResultFromAmbiguousValues(f.getBarcodeECLevel(),v,qr.toIntArray(x),qr.toIntArray(E),k)}static createDecoderResultFromAmbiguousValues(f,m,x,v,y){let E=new Int32Array(v.length),k=100;for(;k-- >0;){for(let L=0;L<E.length;L++)m[v[L]]=y[L][E[L]];try{return U.decodeCodewords(m,f,x)}catch(L){if(!(L instanceof g))throw L}if(E.length===0)throw g.getChecksumInstance();for(let L=0;L<E.length;L++)if(E[L]<y[L].length-1){E[L]++;break}else if(E[L]=0,L===E.length-1)throw g.getChecksumInstance()}throw g.getChecksumInstance()}static createBarcodeMatrix(f){let m=Array.from({length:f.getBarcodeRowCount()},()=>new Array(f.getBarcodeColumnCount()+2));for(let v=0;v<m.length;v++)for(let y=0;y<m[v].length;y++)m[v][y]=new El;let x=0;for(let v of f.getDetectionResultColumns()){if(v!=null){for(let y of v.getCodewords())if(y!=null){let E=y.getRowNumber();if(E>=0){if(E>=m.length)continue;m[E][x].setValue(y.getValue())}}}x++}return m}static isValidBarcodeColumn(f,m){return m>=0&&m<=f.getBarcodeColumnCount()+1}static getStartColumn(f,m,x,v){let y=v?1:-1,E=null;if(U.isValidBarcodeColumn(f,m-y)&&(E=f.getDetectionResultColumn(m-y).getCodeword(x)),E!=null)return v?E.getEndX():E.getStartX();if(E=f.getDetectionResultColumn(m).getCodewordNearby(x),E!=null)return v?E.getStartX():E.getEndX();if(U.isValidBarcodeColumn(f,m-y)&&(E=f.getDetectionResultColumn(m-y).getCodewordNearby(x)),E!=null)return v?E.getEndX():E.getStartX();let k=0;for(;U.isValidBarcodeColumn(f,m-y);){m-=y;for(let L of f.getDetectionResultColumn(m).getCodewords())if(L!=null)return(v?L.getEndX():L.getStartX())+y*k*(L.getEndX()-L.getStartX());k++}return v?f.getBoundingBox().getMinX():f.getBoundingBox().getMaxX()}static detectCodeword(f,m,x,v,y,E,k,L){y=U.adjustCodewordStartColumn(f,m,x,v,y,E);let H=U.getModuleBitCount(f,m,x,v,y,E);if(H==null)return null;let Q,le=et.sum(H);if(v)Q=y+le;else{for(let $e=0;$e<H.length/2;$e++){let We=H[$e];H[$e]=H[H.length-1-$e],H[H.length-1-$e]=We}Q=y,y=Q-le}if(!U.checkCodewordSkew(le,k,L))return null;let fe=Ca.getDecodedValue(H),Re=qr.getCodeword(fe);return Re===-1?null:new el(y,Q,U.getCodewordBucketNumber(fe),Re)}static getModuleBitCount(f,m,x,v,y,E){let k=y,L=new Int32Array(8),H=0,Q=v?1:-1,le=v;for(;(v?k<x:k>=m)&&H<L.length;)f.get(k,E)===le?(L[H]++,k+=Q):(H++,le=!le);return H===L.length||k===(v?x:m)&&H===L.length-1?L:null}static getNumberOfECCodeWords(f){return 2<<f}static adjustCodewordStartColumn(f,m,x,v,y,E){let k=y,L=v?-1:1;for(let H=0;H<2;H++){for(;(v?k>=m:k<x)&&v===f.get(k,E);){if(Math.abs(y-k)>U.CODEWORD_SKEW_SIZE)return y;k+=L}L=-L,v=!v}return k}static checkCodewordSkew(f,m,x){return m-U.CODEWORD_SKEW_SIZE<=f&&f<=x+U.CODEWORD_SKEW_SIZE}static decodeCodewords(f,m,x){if(f.length===0)throw O.getFormatInstance();let v=1<<m+1,y=U.correctErrors(f,x,v);U.verifyCodewordCount(f,v);let E=Et.decode(f,""+m);return E.setErrorsCorrected(y),E.setErasures(x.length),E}static correctErrors(f,m,x){if(m!=null&&m.length>x/2+U.MAX_ERRORS||x<0||x>U.MAX_EC_CODEWORDS)throw g.getChecksumInstance();return U.errorCorrection.decode(f,x,m)}static verifyCodewordCount(f,m){if(f.length<4)throw O.getFormatInstance();let x=f[0];if(x>f.length)throw O.getFormatInstance();if(x===0)if(m<f.length)f[0]=f.length-m;else throw O.getFormatInstance()}static getBitCountForCodeword(f){let m=new Int32Array(8),x=0,v=m.length-1;for(;!((f&1)!==x&&(x=f&1,v--,v<0));)m[v]++,f>>=1;return m}static getCodewordBucketNumber(f){return f instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(f):this.getCodewordBucketNumber_number(f)}static getCodewordBucketNumber_number(f){return U.getCodewordBucketNumber(U.getBitCountForCodeword(f))}static getCodewordBucketNumber_Int32Array(f){return(f[0]-f[2]+f[4]-f[6]+9)%9}static toString(f){let m=new Qo;for(let x=0;x<f.length;x++){m.format("Row %2d: ",x);for(let v=0;v<f[x].length;v++){let y=f[x][v];y.getValue().length===0?m.format("        ",null):m.format("%4d(%2d)",y.getValue()[0],y.getConfidence(y.getValue()[0]))}m.format("%n")}return m.toString()}}U.CODEWORD_SKEW_SIZE=2,U.MAX_ERRORS=3,U.MAX_EC_CODEWORDS=512,U.errorCorrection=new Du;class ie{decode(f,m=null){let x=ie.decode(f,m,!1);if(x==null||x.length===0||x[0]==null)throw Z.getNotFoundInstance();return x[0]}decodeMultiple(f,m=null){try{return ie.decode(f,m,!0)}catch(x){throw x instanceof O||x instanceof g?Z.getNotFoundInstance():x}}static decode(f,m,x){const v=new Array,y=Gr.detectMultiple(f,m,x);for(const E of y.getPoints()){const k=U.decode(y.getBits(),E[4],E[5],E[6],E[7],ie.getMinCodewordWidth(E),ie.getMaxCodewordWidth(E)),L=new X(k.getText(),k.getRawBytes(),void 0,E,se.PDF_417);L.putMetadata(je.ERROR_CORRECTION_LEVEL,k.getECLevel());const H=k.getOther();H!=null&&L.putMetadata(je.PDF417_EXTRA_METADATA,H),v.push(L)}return v.map(E=>E)}static getMaxWidth(f,m){return f==null||m==null?0:Math.trunc(Math.abs(f.getX()-m.getX()))}static getMinWidth(f,m){return f==null||m==null?T.MAX_VALUE:Math.trunc(Math.abs(f.getX()-m.getX()))}static getMaxCodewordWidth(f){return Math.floor(Math.max(Math.max(ie.getMaxWidth(f[0],f[4]),ie.getMaxWidth(f[6],f[2])*qr.MODULES_IN_CODEWORD/qr.MODULES_IN_STOP_PATTERN),Math.max(ie.getMaxWidth(f[1],f[5]),ie.getMaxWidth(f[7],f[3])*qr.MODULES_IN_CODEWORD/qr.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(f){return Math.floor(Math.min(Math.min(ie.getMinWidth(f[0],f[4]),ie.getMinWidth(f[6],f[2])*qr.MODULES_IN_CODEWORD/qr.MODULES_IN_STOP_PATTERN),Math.min(ie.getMinWidth(f[1],f[5]),ie.getMinWidth(f[7],f[3])*qr.MODULES_IN_CODEWORD/qr.MODULES_IN_STOP_PATTERN)))}reset(){}}class De extends u{}De.kind="ReaderException";class He{constructor(f,m){this.verbose=f===!0,m&&this.setHints(m)}decode(f,m){return m&&this.setHints(m),this.decodeInternal(f)}decodeWithState(f){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(f)}setHints(f){this.hints=f;const m=!n(f)&&f.get(G.TRY_HARDER)===!0,x=n(f)?null:f.get(G.POSSIBLE_FORMATS),v=new Array;if(!n(x)){const y=x.some(E=>E===se.UPC_A||E===se.UPC_E||E===se.EAN_13||E===se.EAN_8||E===se.CODABAR||E===se.CODE_39||E===se.CODE_93||E===se.CODE_128||E===se.ITF||E===se.RSS_14||E===se.RSS_EXPANDED);y&&!m&&v.push(new Ua(f,this.verbose)),x.includes(se.QR_CODE)&&v.push(new zi),x.includes(se.DATA_MATRIX)&&v.push(new ja),x.includes(se.AZTEC)&&v.push(new Vt),x.includes(se.PDF_417)&&v.push(new ie),y&&m&&v.push(new Ua(f,this.verbose))}v.length===0&&(m||v.push(new Ua(f,this.verbose)),v.push(new zi),v.push(new ja),v.push(new Vt),v.push(new ie),m&&v.push(new Ua(f,this.verbose))),this.readers=v}reset(){if(this.readers!==null)for(const f of this.readers)f.reset()}decodeInternal(f){if(this.readers===null)throw new De("No readers where selected, nothing can be read.");for(const m of this.readers)try{return m.decode(f,this.hints)}catch(x){if(x instanceof De)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class tt extends Y{constructor(f=null,m=500){const x=new He;x.setHints(f),super(x,m)}decodeBitmap(f){return this.reader.decodeWithState(f)}}class Pt extends Y{constructor(f=500){super(new ie,f)}}class Jt extends Y{constructor(f=500){super(new zi,f)}}var Sr;(function(oe){oe[oe.ERROR_CORRECTION=0]="ERROR_CORRECTION",oe[oe.CHARACTER_SET=1]="CHARACTER_SET",oe[oe.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",oe[oe.MIN_SIZE=3]="MIN_SIZE",oe[oe.MAX_SIZE=4]="MAX_SIZE",oe[oe.MARGIN=5]="MARGIN",oe[oe.PDF417_COMPACT=6]="PDF417_COMPACT",oe[oe.PDF417_COMPACTION=7]="PDF417_COMPACTION",oe[oe.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",oe[oe.AZTEC_LAYERS=9]="AZTEC_LAYERS",oe[oe.QR_VERSION=10]="QR_VERSION"})(Sr||(Sr={}));var xr=Sr;class Kr{constructor(f){this.field=f,this.cachedGenerators=[],this.cachedGenerators.push(new qe(f,Int32Array.from([1])))}buildGenerator(f){const m=this.cachedGenerators;if(f>=m.length){let x=m[m.length-1];const v=this.field;for(let y=m.length;y<=f;y++){const E=x.multiply(new qe(v,Int32Array.from([1,v.exp(y-1+v.getGeneratorBase())])));m.push(E),x=E}}return m[f]}encode(f,m){if(m===0)throw new h("No error correction bytes");const x=f.length-m;if(x<=0)throw new h("No data bytes provided");const v=this.buildGenerator(m),y=new Int32Array(x);w.arraycopy(f,0,y,0,x);let E=new qe(this.field,y);E=E.multiplyByMonomial(m,1);const L=E.divide(v)[1].getCoefficients(),H=m-L.length;for(let Q=0;Q<H;Q++)f[x+Q]=0;w.arraycopy(L,0,f,x+H,L.length)}}class yr{constructor(){}static applyMaskPenaltyRule1(f){return yr.applyMaskPenaltyRule1Internal(f,!0)+yr.applyMaskPenaltyRule1Internal(f,!1)}static applyMaskPenaltyRule2(f){let m=0;const x=f.getArray(),v=f.getWidth(),y=f.getHeight();for(let E=0;E<y-1;E++){const k=x[E];for(let L=0;L<v-1;L++){const H=k[L];H===k[L+1]&&H===x[E+1][L]&&H===x[E+1][L+1]&&m++}}return yr.N2*m}static applyMaskPenaltyRule3(f){let m=0;const x=f.getArray(),v=f.getWidth(),y=f.getHeight();for(let E=0;E<y;E++)for(let k=0;k<v;k++){const L=x[E];k+6<v&&L[k]===1&&L[k+1]===0&&L[k+2]===1&&L[k+3]===1&&L[k+4]===1&&L[k+5]===0&&L[k+6]===1&&(yr.isWhiteHorizontal(L,k-4,k)||yr.isWhiteHorizontal(L,k+7,k+11))&&m++,E+6<y&&x[E][k]===1&&x[E+1][k]===0&&x[E+2][k]===1&&x[E+3][k]===1&&x[E+4][k]===1&&x[E+5][k]===0&&x[E+6][k]===1&&(yr.isWhiteVertical(x,k,E-4,E)||yr.isWhiteVertical(x,k,E+7,E+11))&&m++}return m*yr.N3}static isWhiteHorizontal(f,m,x){m=Math.max(m,0),x=Math.min(x,f.length);for(let v=m;v<x;v++)if(f[v]===1)return!1;return!0}static isWhiteVertical(f,m,x,v){x=Math.max(x,0),v=Math.min(v,f.length);for(let y=x;y<v;y++)if(f[y][m]===1)return!1;return!0}static applyMaskPenaltyRule4(f){let m=0;const x=f.getArray(),v=f.getWidth(),y=f.getHeight();for(let L=0;L<y;L++){const H=x[L];for(let Q=0;Q<v;Q++)H[Q]===1&&m++}const E=f.getHeight()*f.getWidth();return Math.floor(Math.abs(m*2-E)*10/E)*yr.N4}static getDataMaskBit(f,m,x){let v,y;switch(f){case 0:v=x+m&1;break;case 1:v=x&1;break;case 2:v=m%3;break;case 3:v=(x+m)%3;break;case 4:v=Math.floor(x/2)+Math.floor(m/3)&1;break;case 5:y=x*m,v=(y&1)+y%3;break;case 6:y=x*m,v=(y&1)+y%3&1;break;case 7:y=x*m,v=y%3+(x+m&1)&1;break;default:throw new h("Invalid mask pattern: "+f)}return v===0}static applyMaskPenaltyRule1Internal(f,m){let x=0;const v=m?f.getHeight():f.getWidth(),y=m?f.getWidth():f.getHeight(),E=f.getArray();for(let k=0;k<v;k++){let L=0,H=-1;for(let Q=0;Q<y;Q++){const le=m?E[k][Q]:E[Q][k];le===H?L++:(L>=5&&(x+=yr.N1+(L-5)),L=1,H=le)}L>=5&&(x+=yr.N1+(L-5))}return x}}yr.N1=3,yr.N2=3,yr.N3=40,yr.N4=10;class In{constructor(f,m){this.width=f,this.height=m;const x=new Array(m);for(let v=0;v!==m;v++)x[v]=new Uint8Array(f);this.bytes=x}getHeight(){return this.height}getWidth(){return this.width}get(f,m){return this.bytes[m][f]}getArray(){return this.bytes}setNumber(f,m,x){this.bytes[m][f]=x}setBoolean(f,m,x){this.bytes[m][f]=x?1:0}clear(f){for(const m of this.bytes)S.fill(m,f)}equals(f){if(!(f instanceof In))return!1;const m=f;if(this.width!==m.width||this.height!==m.height)return!1;for(let x=0,v=this.height;x<v;++x){const y=this.bytes[x],E=m.bytes[x];for(let k=0,L=this.width;k<L;++k)if(y[k]!==E[k])return!1}return!0}toString(){const f=new F;for(let m=0,x=this.height;m<x;++m){const v=this.bytes[m];for(let y=0,E=this.width;y<E;++y)switch(v[y]){case 0:f.append(" 0");break;case 1:f.append(" 1");break;default:f.append("  ");break}f.append(`
`)}return f.toString()}}class qn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const f=new F;return f.append(`<<
`),f.append(" mode: "),f.append(this.mode?this.mode.toString():"null"),f.append(`
 ecLevel: `),f.append(this.ecLevel?this.ecLevel.toString():"null"),f.append(`
 version: `),f.append(this.version?this.version.toString():"null"),f.append(`
 maskPattern: `),f.append(this.maskPattern.toString()),this.matrix?(f.append(`
 matrix:
`),f.append(this.matrix.toString())):f.append(`
 matrix: null
`),f.append(`>>
`),f.toString()}setMode(f){this.mode=f}setECLevel(f){this.ecLevel=f}setVersion(f){this.version=f}setMaskPattern(f){this.maskPattern=f}setMatrix(f){this.matrix=f}static isValidMaskPattern(f){return f>=0&&f<qn.NUM_MASK_PATTERNS}}qn.NUM_MASK_PATTERNS=8;class Xr extends u{}Xr.kind="WriterException";class j{constructor(){}static clearMatrix(f){f.clear(255)}static buildMatrix(f,m,x,v,y){j.clearMatrix(y),j.embedBasicPatterns(x,y),j.embedTypeInfo(m,v,y),j.maybeEmbedVersionInfo(x,y),j.embedDataBits(f,v,y)}static embedBasicPatterns(f,m){j.embedPositionDetectionPatternsAndSeparators(m),j.embedDarkDotAtLeftBottomCorner(m),j.maybeEmbedPositionAdjustmentPatterns(f,m),j.embedTimingPatterns(m)}static embedTypeInfo(f,m,x){const v=new R;j.makeTypeInfoBits(f,m,v);for(let y=0,E=v.getSize();y<E;++y){const k=v.get(v.getSize()-1-y),L=j.TYPE_INFO_COORDINATES[y],H=L[0],Q=L[1];if(x.setBoolean(H,Q,k),y<8){const le=x.getWidth()-y-1;x.setBoolean(le,8,k)}else{const fe=x.getHeight()-7+(y-8);x.setBoolean(8,fe,k)}}}static maybeEmbedVersionInfo(f,m){if(f.getVersionNumber()<7)return;const x=new R;j.makeVersionInfoBits(f,x);let v=6*3-1;for(let y=0;y<6;++y)for(let E=0;E<3;++E){const k=x.get(v);v--,m.setBoolean(y,m.getHeight()-11+E,k),m.setBoolean(m.getHeight()-11+E,y,k)}}static embedDataBits(f,m,x){let v=0,y=-1,E=x.getWidth()-1,k=x.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);k>=0&&k<x.getHeight();){for(let L=0;L<2;++L){const H=E-L;if(!j.isEmpty(x.get(H,k)))continue;let Q;v<f.getSize()?(Q=f.get(v),++v):Q=!1,m!==255&&yr.getDataMaskBit(m,H,k)&&(Q=!Q),x.setBoolean(H,k,Q)}k+=y}y=-y,k+=y,E-=2}if(v!==f.getSize())throw new Xr("Not all bits consumed: "+v+"/"+f.getSize())}static findMSBSet(f){return 32-T.numberOfLeadingZeros(f)}static calculateBCHCode(f,m){if(m===0)throw new h("0 polynomial");const x=j.findMSBSet(m);for(f<<=x-1;j.findMSBSet(f)>=x;)f^=m<<j.findMSBSet(f)-x;return f}static makeTypeInfoBits(f,m,x){if(!qn.isValidMaskPattern(m))throw new Xr("Invalid mask pattern");const v=f.getBits()<<3|m;x.appendBits(v,5);const y=j.calculateBCHCode(v,j.TYPE_INFO_POLY);x.appendBits(y,10);const E=new R;if(E.appendBits(j.TYPE_INFO_MASK_PATTERN,15),x.xor(E),x.getSize()!==15)throw new Xr("should not happen but we got: "+x.getSize())}static makeVersionInfoBits(f,m){m.appendBits(f.getVersionNumber(),6);const x=j.calculateBCHCode(f.getVersionNumber(),j.VERSION_INFO_POLY);if(m.appendBits(x,12),m.getSize()!==18)throw new Xr("should not happen but we got: "+m.getSize())}static isEmpty(f){return f===255}static embedTimingPatterns(f){for(let m=8;m<f.getWidth()-8;++m){const x=(m+1)%2;j.isEmpty(f.get(m,6))&&f.setNumber(m,6,x),j.isEmpty(f.get(6,m))&&f.setNumber(6,m,x)}}static embedDarkDotAtLeftBottomCorner(f){if(f.get(8,f.getHeight()-8)===0)throw new Xr;f.setNumber(8,f.getHeight()-8,1)}static embedHorizontalSeparationPattern(f,m,x){for(let v=0;v<8;++v){if(!j.isEmpty(x.get(f+v,m)))throw new Xr;x.setNumber(f+v,m,0)}}static embedVerticalSeparationPattern(f,m,x){for(let v=0;v<7;++v){if(!j.isEmpty(x.get(f,m+v)))throw new Xr;x.setNumber(f,m+v,0)}}static embedPositionAdjustmentPattern(f,m,x){for(let v=0;v<5;++v){const y=j.POSITION_ADJUSTMENT_PATTERN[v];for(let E=0;E<5;++E)x.setNumber(f+E,m+v,y[E])}}static embedPositionDetectionPattern(f,m,x){for(let v=0;v<7;++v){const y=j.POSITION_DETECTION_PATTERN[v];for(let E=0;E<7;++E)x.setNumber(f+E,m+v,y[E])}}static embedPositionDetectionPatternsAndSeparators(f){const m=j.POSITION_DETECTION_PATTERN[0].length;j.embedPositionDetectionPattern(0,0,f),j.embedPositionDetectionPattern(f.getWidth()-m,0,f),j.embedPositionDetectionPattern(0,f.getWidth()-m,f);const x=8;j.embedHorizontalSeparationPattern(0,x-1,f),j.embedHorizontalSeparationPattern(f.getWidth()-x,x-1,f),j.embedHorizontalSeparationPattern(0,f.getWidth()-x,f);const v=7;j.embedVerticalSeparationPattern(v,0,f),j.embedVerticalSeparationPattern(f.getHeight()-v-1,0,f),j.embedVerticalSeparationPattern(v,f.getHeight()-v,f)}static maybeEmbedPositionAdjustmentPatterns(f,m){if(f.getVersionNumber()<2)return;const x=f.getVersionNumber()-1,v=j.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[x];for(let y=0,E=v.length;y!==E;y++){const k=v[y];if(k>=0)for(let L=0;L!==E;L++){const H=v[L];H>=0&&j.isEmpty(m.get(H,k))&&j.embedPositionAdjustmentPattern(H-2,k-2,m)}}}}j.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),j.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),j.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),j.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),j.VERSION_INFO_POLY=7973,j.TYPE_INFO_POLY=1335,j.TYPE_INFO_MASK_PATTERN=21522;class K{constructor(f,m){this.dataBytes=f,this.errorCorrectionBytes=m}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class te{constructor(){}static calculateMaskPenalty(f){return yr.applyMaskPenaltyRule1(f)+yr.applyMaskPenaltyRule2(f)+yr.applyMaskPenaltyRule3(f)+yr.applyMaskPenaltyRule4(f)}static encode(f,m,x=null){let v=te.DEFAULT_BYTE_MODE_ENCODING;const y=x!==null&&x.get(xr.CHARACTER_SET)!==void 0;y&&(v=x.get(xr.CHARACTER_SET).toString());const E=this.chooseMode(f,v),k=new R;if(E===Ot.BYTE&&(y||te.DEFAULT_BYTE_MODE_ENCODING!==v)){const Kt=I.getCharacterSetECIByName(v);Kt!==void 0&&this.appendECI(Kt,k)}this.appendModeInfo(E,k);const L=new R;this.appendBytes(f,E,L,v);let H;if(x!==null&&x.get(xr.QR_VERSION)!==void 0){const Kt=Number.parseInt(x.get(xr.QR_VERSION).toString(),10);H=Ar.getVersionForNumber(Kt);const $t=this.calculateBitsNeeded(E,k,L,H);if(!this.willFit($t,H,m))throw new Xr("Data too big for requested version")}else H=this.recommendVersion(m,E,k,L);const Q=new R;Q.appendBitArray(k);const le=E===Ot.BYTE?L.getSizeInBytes():f.length;this.appendLengthInfo(le,H,E,Q),Q.appendBitArray(L);const fe=H.getECBlocksForLevel(m),Re=H.getTotalCodewords()-fe.getTotalECCodewords();this.terminateBits(Re,Q);const $e=this.interleaveWithECBytes(Q,H.getTotalCodewords(),Re,fe.getNumBlocks()),We=new qn;We.setECLevel(m),We.setMode(E),We.setVersion(H);const ot=H.getDimensionForVersion(),Nt=new In(ot,ot),Bt=this.chooseMaskPattern($e,m,H,Nt);return We.setMaskPattern(Bt),j.buildMatrix($e,m,H,Bt,Nt),We.setMatrix(Nt),We}static recommendVersion(f,m,x,v){const y=this.calculateBitsNeeded(m,x,v,Ar.getVersionForNumber(1)),E=this.chooseVersion(y,f),k=this.calculateBitsNeeded(m,x,v,E);return this.chooseVersion(k,f)}static calculateBitsNeeded(f,m,x,v){return m.getSize()+f.getCharacterCountBits(v)+x.getSize()}static getAlphanumericCode(f){return f<te.ALPHANUMERIC_TABLE.length?te.ALPHANUMERIC_TABLE[f]:-1}static chooseMode(f,m=null){if(I.SJIS.getName()===m&&this.isOnlyDoubleByteKanji(f))return Ot.KANJI;let x=!1,v=!1;for(let y=0,E=f.length;y<E;++y){const k=f.charAt(y);if(te.isDigit(k))x=!0;else if(this.getAlphanumericCode(k.charCodeAt(0))!==-1)v=!0;else return Ot.BYTE}return v?Ot.ALPHANUMERIC:x?Ot.NUMERIC:Ot.BYTE}static isOnlyDoubleByteKanji(f){let m;try{m=P.encode(f,I.SJIS)}catch{return!1}const x=m.length;if(x%2!==0)return!1;for(let v=0;v<x;v+=2){const y=m[v]&255;if((y<129||y>159)&&(y<224||y>235))return!1}return!0}static chooseMaskPattern(f,m,x,v){let y=Number.MAX_SAFE_INTEGER,E=-1;for(let k=0;k<qn.NUM_MASK_PATTERNS;k++){j.buildMatrix(f,m,x,k,v);let L=this.calculateMaskPenalty(v);L<y&&(y=L,E=k)}return E}static chooseVersion(f,m){for(let x=1;x<=40;x++){const v=Ar.getVersionForNumber(x);if(te.willFit(f,v,m))return v}throw new Xr("Data too big")}static willFit(f,m,x){const v=m.getTotalCodewords(),E=m.getECBlocksForLevel(x).getTotalECCodewords(),k=v-E,L=(f+7)/8;return k>=L}static terminateBits(f,m){const x=f*8;if(m.getSize()>x)throw new Xr("data bits cannot fit in the QR Code"+m.getSize()+" > "+x);for(let E=0;E<4&&m.getSize()<x;++E)m.appendBit(!1);const v=m.getSize()&7;if(v>0)for(let E=v;E<8;E++)m.appendBit(!1);const y=f-m.getSizeInBytes();for(let E=0;E<y;++E)m.appendBits(E&1?17:236,8);if(m.getSize()!==x)throw new Xr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(f,m,x,v,y,E){if(v>=x)throw new Xr("Block ID too large");const k=f%x,L=x-k,H=Math.floor(f/x),Q=H+1,le=Math.floor(m/x),fe=le+1,Re=H-le,$e=Q-fe;if(Re!==$e)throw new Xr("EC bytes mismatch");if(x!==L+k)throw new Xr("RS blocks mismatch");if(f!==(le+Re)*L+(fe+$e)*k)throw new Xr("Total bytes mismatch");v<L?(y[0]=le,E[0]=Re):(y[0]=fe,E[0]=$e)}static interleaveWithECBytes(f,m,x,v){if(f.getSizeInBytes()!==x)throw new Xr("Number of bits and data bytes does not match");let y=0,E=0,k=0;const L=new Array;for(let Q=0;Q<v;++Q){const le=new Int32Array(1),fe=new Int32Array(1);te.getNumDataBytesAndNumECBytesForBlockID(m,x,v,Q,le,fe);const Re=le[0],$e=new Uint8Array(Re);f.toBytes(8*y,$e,0,Re);const We=te.generateECBytes($e,fe[0]);L.push(new K($e,We)),E=Math.max(E,Re),k=Math.max(k,We.length),y+=le[0]}if(x!==y)throw new Xr("Data bytes does not match offset");const H=new R;for(let Q=0;Q<E;++Q)for(const le of L){const fe=le.getDataBytes();Q<fe.length&&H.appendBits(fe[Q],8)}for(let Q=0;Q<k;++Q)for(const le of L){const fe=le.getErrorCorrectionBytes();Q<fe.length&&H.appendBits(fe[Q],8)}if(m!==H.getSizeInBytes())throw new Xr("Interleaving error: "+m+" and "+H.getSizeInBytes()+" differ.");return H}static generateECBytes(f,m){const x=f.length,v=new Int32Array(x+m);for(let E=0;E<x;E++)v[E]=f[E]&255;new Kr(Me.QR_CODE_FIELD_256).encode(v,m);const y=new Uint8Array(m);for(let E=0;E<m;E++)y[E]=v[x+E];return y}static appendModeInfo(f,m){m.appendBits(f.getBits(),4)}static appendLengthInfo(f,m,x,v){const y=x.getCharacterCountBits(m);if(f>=1<<y)throw new Xr(f+" is bigger than "+((1<<y)-1));v.appendBits(f,y)}static appendBytes(f,m,x,v){switch(m){case Ot.NUMERIC:te.appendNumericBytes(f,x);break;case Ot.ALPHANUMERIC:te.appendAlphanumericBytes(f,x);break;case Ot.BYTE:te.append8BitBytes(f,x,v);break;case Ot.KANJI:te.appendKanjiBytes(f,x);break;default:throw new Xr("Invalid mode: "+m)}}static getDigit(f){return f.charCodeAt(0)-48}static isDigit(f){const m=te.getDigit(f);return m>=0&&m<=9}static appendNumericBytes(f,m){const x=f.length;let v=0;for(;v<x;){const y=te.getDigit(f.charAt(v));if(v+2<x){const E=te.getDigit(f.charAt(v+1)),k=te.getDigit(f.charAt(v+2));m.appendBits(y*100+E*10+k,10),v+=3}else if(v+1<x){const E=te.getDigit(f.charAt(v+1));m.appendBits(y*10+E,7),v+=2}else m.appendBits(y,4),v++}}static appendAlphanumericBytes(f,m){const x=f.length;let v=0;for(;v<x;){const y=te.getAlphanumericCode(f.charCodeAt(v));if(y===-1)throw new Xr;if(v+1<x){const E=te.getAlphanumericCode(f.charCodeAt(v+1));if(E===-1)throw new Xr;m.appendBits(y*45+E,11),v+=2}else m.appendBits(y,6),v++}}static append8BitBytes(f,m,x){let v;try{v=P.encode(f,x)}catch(y){throw new Xr(y)}for(let y=0,E=v.length;y!==E;y++){const k=v[y];m.appendBits(k,8)}}static appendKanjiBytes(f,m){let x;try{x=P.encode(f,I.SJIS)}catch(y){throw new Xr(y)}const v=x.length;for(let y=0;y<v;y+=2){const E=x[y]&255,k=x[y+1]&255,L=E<<8&4294967295|k;let H=-1;if(L>=33088&&L<=40956?H=L-33088:L>=57408&&L<=60351&&(H=L-49472),H===-1)throw new Xr("Invalid byte sequence");const Q=(H>>8)*192+(H&255);m.appendBits(Q,13)}}static appendECI(f,m){m.appendBits(Ot.ECI.getBits(),4),m.appendBits(f.getValue(),8)}}te.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),te.DEFAULT_BYTE_MODE_ENCODING=I.UTF8.getName();class ye{write(f,m,x,v=null){if(f.length===0)throw new h("Found empty contents");if(m<0||x<0)throw new h("Requested dimensions are too small: "+m+"x"+x);let y=Dn.L,E=ye.QUIET_ZONE_SIZE;v!==null&&(v.get(xr.ERROR_CORRECTION)!==void 0&&(y=Dn.fromString(v.get(xr.ERROR_CORRECTION).toString())),v.get(xr.MARGIN)!==void 0&&(E=Number.parseInt(v.get(xr.MARGIN).toString(),10)));const k=te.encode(f,y,v);return this.renderResult(k,m,x,E)}writeToDom(f,m,x,v,y=null){typeof f=="string"&&(f=document.querySelector(f));const E=this.write(m,x,v,y);f&&f.appendChild(E)}renderResult(f,m,x,v){const y=f.getMatrix();if(y===null)throw new ve;const E=y.getWidth(),k=y.getHeight(),L=E+v*2,H=k+v*2,Q=Math.max(m,L),le=Math.max(x,H),fe=Math.min(Math.floor(Q/L),Math.floor(le/H)),Re=Math.floor((Q-E*fe)/2),$e=Math.floor((le-k*fe)/2),We=this.createSVGElement(Q,le);for(let ot=0,Nt=$e;ot<k;ot++,Nt+=fe)for(let Bt=0,Kt=Re;Bt<E;Bt++,Kt+=fe)if(y.get(Bt,ot)===1){const $t=this.createSvgRectElement(Kt,Nt,fe,fe);We.appendChild($t)}return We}createSVGElement(f,m){const x=document.createElementNS(ye.SVG_NS,"svg");return x.setAttributeNS(null,"height",f.toString()),x.setAttributeNS(null,"width",m.toString()),x}createSvgRectElement(f,m,x,v){const y=document.createElementNS(ye.SVG_NS,"rect");return y.setAttributeNS(null,"x",f.toString()),y.setAttributeNS(null,"y",m.toString()),y.setAttributeNS(null,"height",x.toString()),y.setAttributeNS(null,"width",v.toString()),y.setAttributeNS(null,"fill","#000000"),y}}ye.QUIET_ZONE_SIZE=4,ye.SVG_NS="http://www.w3.org/2000/svg";class nt{encode(f,m,x,v,y){if(f.length===0)throw new h("Found empty contents");if(m!==se.QR_CODE)throw new h("Can only encode QR_CODE, but got "+m);if(x<0||v<0)throw new h(`Requested dimensions are too small: ${x}x${v}`);let E=Dn.L,k=nt.QUIET_ZONE_SIZE;y!==null&&(y.get(xr.ERROR_CORRECTION)!==void 0&&(E=Dn.fromString(y.get(xr.ERROR_CORRECTION).toString())),y.get(xr.MARGIN)!==void 0&&(k=Number.parseInt(y.get(xr.MARGIN).toString(),10)));const L=te.encode(f,E,y);return nt.renderResult(L,x,v,k)}static renderResult(f,m,x,v){const y=f.getMatrix();if(y===null)throw new ve;const E=y.getWidth(),k=y.getHeight(),L=E+v*2,H=k+v*2,Q=Math.max(m,L),le=Math.max(x,H),fe=Math.min(Math.floor(Q/L),Math.floor(le/H)),Re=Math.floor((Q-E*fe)/2),$e=Math.floor((le-k*fe)/2),We=new ee(Q,le);for(let ot=0,Nt=$e;ot<k;ot++,Nt+=fe)for(let Bt=0,Kt=Re;Bt<E;Bt++,Kt+=fe)y.get(Bt,ot)===1&&We.setRegion(Kt,Nt,fe,fe);return We}}nt.QUIET_ZONE_SIZE=4;class xt{encode(f,m,x,v,y){let E;switch(m){case se.QR_CODE:E=new nt;break;default:throw new h("No encoder available for format "+m)}return E.encode(f,m,x,v,y)}}class or extends ae{constructor(f,m,x,v,y,E,k,L){if(super(E,k),this.yuvData=f,this.dataWidth=m,this.dataHeight=x,this.left=v,this.top=y,v+E>m||y+k>x)throw new h("Crop rectangle does not fit within image data.");L&&this.reverseHorizontal(E,k)}getRow(f,m){if(f<0||f>=this.getHeight())throw new h("Requested row is outside the image: "+f);const x=this.getWidth();(m==null||m.length<x)&&(m=new Uint8ClampedArray(x));const v=(f+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,v,m,0,x),m}getMatrix(){const f=this.getWidth(),m=this.getHeight();if(f===this.dataWidth&&m===this.dataHeight)return this.yuvData;const x=f*m,v=new Uint8ClampedArray(x);let y=this.top*this.dataWidth+this.left;if(f===this.dataWidth)return w.arraycopy(this.yuvData,y,v,0,x),v;for(let E=0;E<m;E++){const k=E*f;w.arraycopy(this.yuvData,y,v,k,f),y+=this.dataWidth}return v}isCropSupported(){return!0}crop(f,m,x,v){return new or(this.yuvData,this.dataWidth,this.dataHeight,this.left+f,this.top+m,x,v,!1)}renderThumbnail(){const f=this.getWidth()/or.THUMBNAIL_SCALE_FACTOR,m=this.getHeight()/or.THUMBNAIL_SCALE_FACTOR,x=new Int32Array(f*m),v=this.yuvData;let y=this.top*this.dataWidth+this.left;for(let E=0;E<m;E++){const k=E*f;for(let L=0;L<f;L++){const H=v[y+L*or.THUMBNAIL_SCALE_FACTOR]&255;x[k+L]=4278190080|H*65793}y+=this.dataWidth*or.THUMBNAIL_SCALE_FACTOR}return x}getThumbnailWidth(){return this.getWidth()/or.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/or.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(f,m){const x=this.yuvData;for(let v=0,y=this.top*this.dataWidth+this.left;v<m;v++,y+=this.dataWidth){const E=y+f/2;for(let k=y,L=y+f-1;k<E;k++,L--){const H=x[k];x[k]=x[L],x[L]=H}}}invert(){return new me(this)}}or.THUMBNAIL_SCALE_FACTOR=2;class rn extends ae{constructor(f,m,x,v,y,E,k){if(super(m,x),this.dataWidth=v,this.dataHeight=y,this.left=E,this.top=k,f.BYTES_PER_ELEMENT===4){const L=m*x,H=new Uint8ClampedArray(L);for(let Q=0;Q<L;Q++){const le=f[Q],fe=le>>16&255,Re=le>>7&510,$e=le&255;H[Q]=(fe+Re+$e)/4&255}this.luminances=H}else this.luminances=f;if(v===void 0&&(this.dataWidth=m),y===void 0&&(this.dataHeight=x),E===void 0&&(this.left=0),k===void 0&&(this.top=0),this.left+m>this.dataWidth||this.top+x>this.dataHeight)throw new h("Crop rectangle does not fit within image data.")}getRow(f,m){if(f<0||f>=this.getHeight())throw new h("Requested row is outside the image: "+f);const x=this.getWidth();(m==null||m.length<x)&&(m=new Uint8ClampedArray(x));const v=(f+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,v,m,0,x),m}getMatrix(){const f=this.getWidth(),m=this.getHeight();if(f===this.dataWidth&&m===this.dataHeight)return this.luminances;const x=f*m,v=new Uint8ClampedArray(x);let y=this.top*this.dataWidth+this.left;if(f===this.dataWidth)return w.arraycopy(this.luminances,y,v,0,x),v;for(let E=0;E<m;E++){const k=E*f;w.arraycopy(this.luminances,y,v,k,f),y+=this.dataWidth}return v}isCropSupported(){return!0}crop(f,m,x,v){return new rn(this.luminances,x,v,this.dataWidth,this.dataHeight,this.left+f,this.top+m)}invert(){return new me(this)}}class fa extends I{static forName(f){return this.getCharacterSetECIByName(f)}}class Tn{}Tn.ISO_8859_1=I.ISO8859_1;class ma{isCompact(){return this.compact}setCompact(f){this.compact=f}getSize(){return this.size}setSize(f){this.size=f}getLayers(){return this.layers}setLayers(f){this.layers=f}getCodeWords(){return this.codeWords}setCodeWords(f){this.codeWords=f}getMatrix(){return this.matrix}setMatrix(f){this.matrix=f}}class zs{static singletonList(f){return[f]}static min(f,m){return f.sort(m)[0]}}class io{constructor(f){this.previous=f}getPrevious(){return this.previous}}class Qn extends io{constructor(f,m,x){super(f),this.value=m,this.bitCount=x}appendTo(f,m){f.appendBits(this.value,this.bitCount)}add(f,m){return new Qn(this,f,m)}addBinaryShift(f,m){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Qn(this,f,m)}toString(){let f=this.value&(1<<this.bitCount)-1;return f|=1<<this.bitCount,"<"+T.toBinaryString(f|1<<this.bitCount).substring(1)+">"}}class ti extends Qn{constructor(f,m,x){super(f,0,0),this.binaryShiftStart=m,this.binaryShiftByteCount=x}appendTo(f,m){for(let x=0;x<this.binaryShiftByteCount;x++)(x===0||x===31&&this.binaryShiftByteCount<=62)&&(f.appendBits(31,5),this.binaryShiftByteCount>62?f.appendBits(this.binaryShiftByteCount-31,16):x===0?f.appendBits(Math.min(this.binaryShiftByteCount,31),5):f.appendBits(this.binaryShiftByteCount-31,5)),f.appendBits(m[this.binaryShiftStart+x],8)}addBinaryShift(f,m){return new ti(this,f,m)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Sl(oe,f,m){return new ti(oe,f,m)}function tl(oe,f,m){return new Qn(oe,f,m)}const _m=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],na=0,jl=1,Ni=2,Nm=3,xs=4,nf=new Qn(null,0,0),af=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Em(oe){for(let f of oe)S.fill(f,-1);return oe[na][xs]=0,oe[jl][xs]=0,oe[jl][na]=28,oe[Nm][xs]=0,oe[Ni][xs]=0,oe[Ni][na]=15,oe}const Fu=Em(S.createInt32Array(6,6));class $i{constructor(f,m,x,v){this.token=f,this.mode=m,this.binaryShiftByteCount=x,this.bitCount=v}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(f,m){let x=this.bitCount,v=this.token;if(f!==this.mode){let E=af[this.mode][f];v=tl(v,E&65535,E>>16),x+=E>>16}let y=f===Ni?4:5;return v=tl(v,m,y),new $i(v,f,0,x+y)}shiftAndAppend(f,m){let x=this.token,v=this.mode===Ni?4:5;return x=tl(x,Fu[this.mode][f],v),x=tl(x,m,5),new $i(x,this.mode,0,this.bitCount+v+5)}addBinaryShiftChar(f){let m=this.token,x=this.mode,v=this.bitCount;if(this.mode===xs||this.mode===Ni){let k=af[x][na];m=tl(m,k&65535,k>>16),v+=k>>16,x=na}let y=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new $i(m,x,this.binaryShiftByteCount+1,v+y);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(f+1)),E}endBinaryShift(f){if(this.binaryShiftByteCount===0)return this;let m=this.token;return m=Sl(m,f-this.binaryShiftByteCount,this.binaryShiftByteCount),new $i(m,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(f){let m=this.bitCount+(af[this.mode][f.mode]>>16);return this.binaryShiftByteCount<f.binaryShiftByteCount?m+=$i.calculateBinaryShiftCost(f)-$i.calculateBinaryShiftCost(this):this.binaryShiftByteCount>f.binaryShiftByteCount&&f.binaryShiftByteCount>0&&(m+=10),m<=f.bitCount}toBitArray(f){let m=[];for(let v=this.endBinaryShift(f.length).token;v!==null;v=v.getPrevious())m.unshift(v);let x=new R;for(const v of m)v.appendTo(x,f);return x}toString(){return B.format("%s bits=%d bytes=%d",_m[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(f){return f.binaryShiftByteCount>62?21:f.binaryShiftByteCount>31?20:f.binaryShiftByteCount>0?10:0}}$i.INITIAL_STATE=new $i(nf,na,0,0);function rl(oe){const f=B.getCharCode(" "),m=B.getCharCode("."),x=B.getCharCode(",");oe[na][f]=1;const v=B.getCharCode("Z"),y=B.getCharCode("A");for(let fe=y;fe<=v;fe++)oe[na][fe]=fe-y+2;oe[jl][f]=1;const E=B.getCharCode("z"),k=B.getCharCode("a");for(let fe=k;fe<=E;fe++)oe[jl][fe]=fe-k+2;oe[Ni][f]=1;const L=B.getCharCode("9"),H=B.getCharCode("0");for(let fe=H;fe<=L;fe++)oe[Ni][fe]=fe-H+2;oe[Ni][x]=12,oe[Ni][m]=13;const Q=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let fe=0;fe<Q.length;fe++)oe[Nm][B.getCharCode(Q[fe])]=fe;const le=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let fe=0;fe<le.length;fe++)B.getCharCode(le[fe])>0&&(oe[xs][B.getCharCode(le[fe])]=fe);return oe}const oo=rl(S.createInt32Array(5,256));class Tl{constructor(f){this.text=f}encode(){const f=B.getCharCode(" "),m=B.getCharCode(`
`);let x=zs.singletonList($i.INITIAL_STATE);for(let y=0;y<this.text.length;y++){let E,k=y+1<this.text.length?this.text[y+1]:0;switch(this.text[y]){case B.getCharCode("\r"):E=k===m?2:0;break;case B.getCharCode("."):E=k===f?3:0;break;case B.getCharCode(","):E=k===f?4:0;break;case B.getCharCode(":"):E=k===f?5:0;break;default:E=0}E>0?(x=Tl.updateStateListForPair(x,y,E),y++):x=this.updateStateListForChar(x,y)}return zs.min(x,(y,E)=>y.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(f,m){const x=[];for(let v of f)this.updateStateForChar(v,m,x);return Tl.simplifyStates(x)}updateStateForChar(f,m,x){let v=this.text[m]&255,y=oo[f.getMode()][v]>0,E=null;for(let k=0;k<=xs;k++){let L=oo[k][v];if(L>0){if(E==null&&(E=f.endBinaryShift(m)),!y||k===f.getMode()||k===Ni){const H=E.latchAndAppend(k,L);x.push(H)}if(!y&&Fu[f.getMode()][k]>=0){const H=E.shiftAndAppend(k,L);x.push(H)}}}if(f.getBinaryShiftByteCount()>0||oo[f.getMode()][v]===0){let k=f.addBinaryShiftChar(m);x.push(k)}}static updateStateListForPair(f,m,x){const v=[];for(let y of f)this.updateStateForPair(y,m,x,v);return this.simplifyStates(v)}static updateStateForPair(f,m,x,v){let y=f.endBinaryShift(m);if(v.push(y.latchAndAppend(xs,x)),f.getMode()!==xs&&v.push(y.shiftAndAppend(xs,x)),x===3||x===4){let E=y.latchAndAppend(Ni,16-x).latchAndAppend(Ni,1);v.push(E)}if(f.getBinaryShiftByteCount()>0){let E=f.addBinaryShiftChar(m).addBinaryShiftChar(m+1);v.push(E)}}static simplifyStates(f){let m=[];for(const x of f){let v=!0;for(const y of m){if(y.isBetterThanOrEqualTo(x)){v=!1;break}x.isBetterThanOrEqualTo(y)&&(m=m.filter(E=>E!==y))}v&&m.push(x)}return m}}class xn{constructor(){}static encodeBytes(f){return xn.encode(f,xn.DEFAULT_EC_PERCENT,xn.DEFAULT_AZTEC_LAYERS)}static encode(f,m,x){let v=new Tl(f).encode(),y=T.truncDivision(v.getSize()*m,100)+11,E=v.getSize()+y,k,L,H,Q,le;if(x!==xn.DEFAULT_AZTEC_LAYERS){if(k=x<0,L=Math.abs(x),L>(k?xn.MAX_NB_BITS_COMPACT:xn.MAX_NB_BITS))throw new h(B.format("Illegal value %s for layers",x));H=xn.totalBitsInLayer(L,k),Q=xn.WORD_SIZE[L];let $t=H-H%Q;if(le=xn.stuffBits(v,Q),le.getSize()+y>$t)throw new h("Data to large for user specified layer");if(k&&le.getSize()>Q*64)throw new h("Data to large for user specified layer")}else{Q=0,le=null;for(let $t=0;;$t++){if($t>xn.MAX_NB_BITS)throw new h("Data too large for an Aztec code");if(k=$t<=3,L=k?$t+1:$t,H=xn.totalBitsInLayer(L,k),E>H)continue;(le==null||Q!==xn.WORD_SIZE[L])&&(Q=xn.WORD_SIZE[L],le=xn.stuffBits(v,Q));let Wr=H-H%Q;if(!(k&&le.getSize()>Q*64)&&le.getSize()+y<=Wr)break}}let fe=xn.generateCheckWords(le,H,Q),Re=le.getSize()/Q,$e=xn.generateModeMessage(k,L,Re),We=(k?11:14)+L*4,ot=new Int32Array(We),Nt;if(k){Nt=We;for(let $t=0;$t<ot.length;$t++)ot[$t]=$t}else{Nt=We+1+2*T.truncDivision(T.truncDivision(We,2)-1,15);let $t=T.truncDivision(We,2),Wr=T.truncDivision(Nt,2);for(let Qr=0;Qr<$t;Qr++){let ri=Qr+T.truncDivision(Qr,15);ot[$t-Qr-1]=Wr-ri-1,ot[$t+Qr]=Wr+ri+1}}let Bt=new ee(Nt);for(let $t=0,Wr=0;$t<L;$t++){let Qr=(L-$t)*4+(k?9:12);for(let ri=0;ri<Qr;ri++){let Hi=ri*2;for(let Ei=0;Ei<2;Ei++)fe.get(Wr+Hi+Ei)&&Bt.set(ot[$t*2+Ei],ot[$t*2+ri]),fe.get(Wr+Qr*2+Hi+Ei)&&Bt.set(ot[$t*2+ri],ot[We-1-$t*2-Ei]),fe.get(Wr+Qr*4+Hi+Ei)&&Bt.set(ot[We-1-$t*2-Ei],ot[We-1-$t*2-ri]),fe.get(Wr+Qr*6+Hi+Ei)&&Bt.set(ot[We-1-$t*2-ri],ot[$t*2+Ei])}Wr+=Qr*8}if(xn.drawModeMessage(Bt,k,Nt,$e),k)xn.drawBullsEye(Bt,T.truncDivision(Nt,2),5);else{xn.drawBullsEye(Bt,T.truncDivision(Nt,2),7);for(let $t=0,Wr=0;$t<T.truncDivision(We,2)-1;$t+=15,Wr+=16)for(let Qr=T.truncDivision(Nt,2)&1;Qr<Nt;Qr+=2)Bt.set(T.truncDivision(Nt,2)-Wr,Qr),Bt.set(T.truncDivision(Nt,2)+Wr,Qr),Bt.set(Qr,T.truncDivision(Nt,2)-Wr),Bt.set(Qr,T.truncDivision(Nt,2)+Wr)}let Kt=new ma;return Kt.setCompact(k),Kt.setSize(Nt),Kt.setLayers(L),Kt.setCodeWords(Re),Kt.setMatrix(Bt),Kt}static drawBullsEye(f,m,x){for(let v=0;v<x;v+=2)for(let y=m-v;y<=m+v;y++)f.set(y,m-v),f.set(y,m+v),f.set(m-v,y),f.set(m+v,y);f.set(m-x,m-x),f.set(m-x+1,m-x),f.set(m-x,m-x+1),f.set(m+x,m-x),f.set(m+x,m-x+1),f.set(m+x,m+x-1)}static generateModeMessage(f,m,x){let v=new R;return f?(v.appendBits(m-1,2),v.appendBits(x-1,6),v=xn.generateCheckWords(v,28,4)):(v.appendBits(m-1,5),v.appendBits(x-1,11),v=xn.generateCheckWords(v,40,4)),v}static drawModeMessage(f,m,x,v){let y=T.truncDivision(x,2);if(m)for(let E=0;E<7;E++){let k=y-3+E;v.get(E)&&f.set(k,y-5),v.get(E+7)&&f.set(y+5,k),v.get(20-E)&&f.set(k,y+5),v.get(27-E)&&f.set(y-5,k)}else for(let E=0;E<10;E++){let k=y-5+E+T.truncDivision(E,5);v.get(E)&&f.set(k,y-7),v.get(E+10)&&f.set(y+7,k),v.get(29-E)&&f.set(k,y+7),v.get(39-E)&&f.set(y-7,k)}}static generateCheckWords(f,m,x){let v=f.getSize()/x,y=new Kr(xn.getGF(x)),E=T.truncDivision(m,x),k=xn.bitsToWords(f,x,E);y.encode(k,E-v);let L=m%x,H=new R;H.appendBits(0,L);for(const Q of Array.from(k))H.appendBits(Q,x);return H}static bitsToWords(f,m,x){let v=new Int32Array(x),y,E;for(y=0,E=f.getSize()/m;y<E;y++){let k=0;for(let L=0;L<m;L++)k|=f.get(y*m+L)?1<<m-L-1:0;v[y]=k}return v}static getGF(f){switch(f){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new h("Unsupported word size "+f)}}static stuffBits(f,m){let x=new R,v=f.getSize(),y=(1<<m)-2;for(let E=0;E<v;E+=m){let k=0;for(let L=0;L<m;L++)(E+L>=v||f.get(E+L))&&(k|=1<<m-1-L);(k&y)===y?(x.appendBits(k&y,m),E--):k&y?x.appendBits(k,m):(x.appendBits(k|1,m),E--)}return x}static totalBitsInLayer(f,m){return((m?88:112)+16*f)*f}}xn.DEFAULT_EC_PERCENT=33,xn.DEFAULT_AZTEC_LAYERS=0,xn.MAX_NB_BITS=32,xn.MAX_NB_BITS_COMPACT=4,xn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ac{encode(f,m,x,v){return this.encodeWithHints(f,m,x,v,null)}encodeWithHints(f,m,x,v,y){let E=Tn.ISO_8859_1,k=xn.DEFAULT_EC_PERCENT,L=xn.DEFAULT_AZTEC_LAYERS;return y!=null&&(y.has(xr.CHARACTER_SET)&&(E=fa.forName(y.get(xr.CHARACTER_SET).toString())),y.has(xr.ERROR_CORRECTION)&&(k=T.parseInt(y.get(xr.ERROR_CORRECTION).toString())),y.has(xr.AZTEC_LAYERS)&&(L=T.parseInt(y.get(xr.AZTEC_LAYERS).toString()))),ac.encodeLayers(f,m,x,v,E,k,L)}static encodeLayers(f,m,x,v,y,E,k){if(m!==se.AZTEC)throw new h("Can only encode AZTEC, but got "+m);let L=xn.encode(B.getBytes(f,y),E,k);return ac.renderResult(L,x,v)}static renderResult(f,m,x){let v=f.getMatrix();if(v==null)throw new ve;let y=v.getWidth(),E=v.getHeight(),k=Math.max(m,y),L=Math.max(x,E),H=Math.min(k/y,L/E),Q=(k-y*H)/2,le=(L-E*H)/2,fe=new ee(k,L);for(let Re=0,$e=le;Re<E;Re++,$e+=H)for(let We=0,ot=Q;We<y;We++,ot+=H)v.get(We,Re)&&fe.setRegion(ot,$e,H,H);return fe}}r.AbstractExpandedDecoder=Ee,r.ArgumentException=d,r.ArithmeticException=Ue,r.AztecCode=ma,r.AztecCodeReader=Vt,r.AztecCodeWriter=ac,r.AztecDecoder=Ut,r.AztecDetector=Ft,r.AztecDetectorResult=Wt,r.AztecEncoder=xn,r.AztecHighLevelEncoder=Tl,r.AztecPoint=gt,r.BarcodeFormat=se,r.Binarizer=b,r.BinaryBitmap=p,r.BitArray=R,r.BitMatrix=ee,r.BitSource=Rn,r.BrowserAztecCodeReader=Nr,r.BrowserBarcodeReader=wi,r.BrowserCodeReader=Y,r.BrowserDatamatrixCodeReader=Bi,r.BrowserMultiFormatReader=tt,r.BrowserPDF417Reader=Pt,r.BrowserQRCodeReader=Jt,r.BrowserQRCodeSvgWriter=ye,r.CharacterSetECI=I,r.ChecksumException=g,r.Code128Reader=it,r.Code39Reader=ir,r.DataMatrixDecodedBitStreamParser=As,r.DataMatrixReader=ja,r.DecodeHintType=G,r.DecoderResult=pe,r.DefaultGridSampler=qt,r.DetectorResult=zt,r.EAN13Reader=St,r.EncodeHintType=xr,r.Exception=u,r.FormatException=O,r.GenericGF=Me,r.GenericGFPoly=qe,r.GlobalHistogramBinarizer=ce,r.GridSampler=ar,r.GridSamplerInstance=kt,r.HTMLCanvasElementLuminanceSource=Te,r.HybridBinarizer=ne,r.ITFReader=be,r.IllegalArgumentException=h,r.IllegalStateException=ve,r.InvertedLuminanceSource=me,r.LuminanceSource=ae,r.MathUtils=et,r.MultiFormatOneDReader=Ua,r.MultiFormatReader=He,r.MultiFormatWriter=xt,r.NotFoundException=Z,r.OneDReader=sr,r.PDF417DecodedBitStreamParser=Et,r.PDF417DecoderErrorCorrection=Du,r.PDF417Reader=ie,r.PDF417ResultMetadata=Mu,r.PerspectiveTransform=Xe,r.PlanarYUVLuminanceSource=or,r.QRCodeByteMatrix=In,r.QRCodeDataMask=Va,r.QRCodeDecodedBitStreamParser=br,r.QRCodeDecoderErrorCorrectionLevel=Dn,r.QRCodeDecoderFormatInformation=za,r.QRCodeEncoder=te,r.QRCodeEncoderQRCode=qn,r.QRCodeMaskUtil=yr,r.QRCodeMatrixUtil=j,r.QRCodeMode=Ot,r.QRCodeReader=zi,r.QRCodeVersion=Ar,r.QRCodeWriter=nt,r.RGBLuminanceSource=rn,r.RSS14Reader=Fr,r.RSSExpandedReader=_t,r.ReaderException=De,r.ReedSolomonDecoder=Ht,r.ReedSolomonEncoder=Kr,r.ReedSolomonException=Be,r.Result=X,r.ResultMetadataType=je,r.ResultPoint=Ve,r.StringUtils=B,r.UnsupportedOperationException=V,r.VideoInputDevice=we,r.WhiteRectangleDetector=Yt,r.WriterException=Xr,r.ZXingArrays=S,r.ZXingCharset=fa,r.ZXingInteger=T,r.ZXingStandardCharsets=Tn,r.ZXingStringBuilder=F,r.ZXingStringEncoding=P,r.ZXingSystem=w,r.createAbstractExpandedDecoder=Ct,Object.defineProperty(r,"__esModule",{value:!0})})})(U8,U8.exports);var Ya=U8.exports;const o7e=Vc(Ya),l7e=KK({__proto__:null,default:o7e},[Ya]);var x$=function(){function t(e,r,n){if(this.formatMap=new Map([[Tr.QR_CODE,Ya.BarcodeFormat.QR_CODE],[Tr.AZTEC,Ya.BarcodeFormat.AZTEC],[Tr.CODABAR,Ya.BarcodeFormat.CODABAR],[Tr.CODE_39,Ya.BarcodeFormat.CODE_39],[Tr.CODE_93,Ya.BarcodeFormat.CODE_93],[Tr.CODE_128,Ya.BarcodeFormat.CODE_128],[Tr.DATA_MATRIX,Ya.BarcodeFormat.DATA_MATRIX],[Tr.MAXICODE,Ya.BarcodeFormat.MAXICODE],[Tr.ITF,Ya.BarcodeFormat.ITF],[Tr.EAN_13,Ya.BarcodeFormat.EAN_13],[Tr.EAN_8,Ya.BarcodeFormat.EAN_8],[Tr.PDF_417,Ya.BarcodeFormat.PDF_417],[Tr.RSS_14,Ya.BarcodeFormat.RSS_14],[Tr.RSS_EXPANDED,Ya.BarcodeFormat.RSS_EXPANDED],[Tr.UPC_A,Ya.BarcodeFormat.UPC_A],[Tr.UPC_E,Ya.BarcodeFormat.UPC_E],[Tr.UPC_EAN_EXTENSION,Ya.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!l7e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var a=this.createZXingFormats(e),s=new Map;s.set(Ya.DecodeHintType.POSSIBLE_FORMATS,a),s.set(Ya.DecodeHintType.TRY_HARDER,!1),this.hints=s}return t.prototype.decodeAsync=function(e){var r=this;return new Promise(function(n,a){try{n(r.decode(e))}catch(s){a(s)}})},t.prototype.decode=function(e){var r=new Ya.MultiFormatReader(this.verbose,this.hints),n=new Ya.HTMLCanvasElementLuminanceSource(e),a=new Ya.BinaryBitmap(new Ya.HybridBinarizer(n)),s=r.decode(a);return{text:s.text,format:lse.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,a){e.set(r,n)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var r=[],n=0,a=e;n<a.length;n++){var s=a[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),c7e=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},u7e=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},v$=function(){function t(e,r,n){if(this.formatMap=new Map([[Tr.QR_CODE,"qr_code"],[Tr.AZTEC,"aztec"],[Tr.CODABAR,"codabar"],[Tr.CODE_39,"code_39"],[Tr.CODE_93,"code_93"],[Tr.CODE_128,"code_128"],[Tr.DATA_MATRIX,"data_matrix"],[Tr.ITF,"itf"],[Tr.EAN_13,"ean_13"],[Tr.EAN_8,"ean_8"],[Tr.PDF_417,"pdf417"],[Tr.UPC_A,"upc_a"],[Tr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return c7e(this,void 0,void 0,function(){var r,n;return u7e(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:lse.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var r=null,n=0,a=0,s=e;a<s.length;a++){var o=s[a],l=o.boundingBox.width*o.boundingBox.height;l>n&&(n=l,r=o)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(e){for(var r=[],n=0,a=e;n<a.length;n++){var s=a[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(r,n,a){e.set(r,n)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),b$=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},y$=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},d7e=function(){function t(e,r,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&v$.isSupported()?(this.primaryDecoder=new v$(e,n,a),this.secondaryDecoder=new x$(e,n,a)):this.primaryDecoder=new x$(e,n,a)}return t.prototype.decodeAsync=function(e){return b$(this,void 0,void 0,function(){var r;return y$(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return b$(this,void 0,void 0,function(){var r,n;return y$(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var r=performance.now()-e;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,r=0,n=this.executionResults;r<n.length;r++){var a=n[r];e+=a}var s=e/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),H7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w3=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},_3=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},use=function(){function t(e,r){this.name=e,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var r={};r[this.name]=e;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var r=e[this.name];return r}return null},t}(),f7e=function(t){H7(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(r){var n={};n[this.name]=r;var a={advanced:[n]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(use),h7e=function(t){H7(e,t);function e(r){return t.call(this,"zoom",r)||this}return e}(f7e),m7e=function(t){H7(e,t);function e(r){return t.call(this,"torch",r)||this}return e}(use),p7e=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new h7e(this.track)},t.prototype.torchFeature=function(){return new m7e(this.track)},t}(),g7e=function(){function t(e,r,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var r=document.createElement("video");return r.style.width="".concat(e,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(n,a),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,a){return w3(this,void 0,void 0,function(){var s,o;return _3(this,function(l){switch(l.label){case 0:return s=new t(e,r,a),n.aspectRatio?(o={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return s.setupSurface(),[2,s]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var r=this,n=function(){setTimeout(e,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return w3(this,void 0,void 0,function(){return _3(this,function(r){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(r,n){var a=e.mediaStream.getVideoTracks(),s=a.length,o=0;e.mediaStream.getVideoTracks().forEach(function(l){e.mediaStream.removeTrack(l),l.stop(),++o,o>=s&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),r())})})},t.prototype.getCapabilities=function(){return new p7e(this.getFirstTrackOrFail())},t}(),x7e=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,r,n){return w3(this,void 0,void 0,function(){return _3(this,function(a){return[2,g7e.create(e,this.mediaStream,r,n)]})})},t.create=function(e){return w3(this,void 0,void 0,function(){var r,n;return _3(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=a.sent(),[2,new t(n)]}})})},t}(),w$=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},_$=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},v7e=function(){function t(){}return t.failIfNotSupported=function(){return w$(this,void 0,void 0,function(){return _$(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return w$(this,void 0,void 0,function(){return _$(this,function(r){return[2,x7e.create(e)]})})},t}(),b7e=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},y7e=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},w7e=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=_1.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=_1.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return b7e(this,void 0,void 0,function(){var e,r,n,a,s,o,l;return y7e(this,function(c){switch(c.label){case 0:return e=function(u){for(var d=u.getVideoTracks(),h=0,p=d;h<p.length;h++){var g=p[h];g.enabled=!1,g.stop(),u.removeTrack(g)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=c.sent(),a=[],s=0,o=n;s<o.length;s++)l=o[s],l.kind==="videoinput"&&a.push({id:l.deviceId,label:l.label});return e(r),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,r){var n=function(s){for(var o=[],l=0,c=s;l<c.length;l++){var u=c[l];u.kind==="video"&&o.push({id:u.id,label:u.label})}e(o)},a=MediaStreamTrack;a.getSources(n)})},t}(),Cs;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Cs||(Cs={}));var _7e=function(){function t(){this.state=Cs.NOT_STARTED,this.onGoingTransactionNewState=Cs.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Cs.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Cs.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Cs.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Cs.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Cs.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Cs.UNKNOWN:throw"Transition from unknown is not allowed";case Cs.NOT_STARTED:this.failIfNewStateIs(e,[Cs.PAUSED]);break;case Cs.SCANNING:break;case Cs.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,r){for(var n=0,a=r;n<a.length;n++){var s=a[n];if(e===s)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),N7e=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Cs.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Cs.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Cs.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Cs.PAUSED},t}(),E7e=function(){function t(){}return t.create=function(){return new N7e(new _7e)},t}(),A7e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hc=function(t){A7e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(a7e),S7e=function(){function t(e,r){this.logger=r,this.fps=hc.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=hc.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?cse.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!bf(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),j7e=function(){function t(e,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new i7e(this.verbose),this.qrcode=new d7e(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=E7e.create()}return t.prototype.start=function(e,r,n,a){var s=this;if(!e)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;a?o=a:o=this.verbose?this.logger.log:function(){};var l=S7e.create(r,this.logger);this.clearElement();var c=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=c,d=document.getElementById(this.elementId);d.clientWidth?d.clientWidth:hc.DEFAULT_WIDTH,d.style.position="relative",this.shouldScan=!0,this.element=d;var h=this,p=this.stateManagerProxy.startTransition(Cs.SCANNING);return new Promise(function(g,b){var w=u?l.videoConstraints:h.createVideoConstraints(e);if(!w){p.cancel(),b("videoConstraints should be defined");return}var _={};(!u||l.aspectRatio)&&(_.aspectRatio=l.aspectRatio);var N={onRenderSurfaceReady:function(S,T){h.setupUi(S,T,l),h.isScanning=!0,h.foreverScan(l,n,o)}};v7e.failIfNotSupported().then(function(S){S.create(w).then(function(T){return T.render(s.element,_,N).then(function(R){h.renderedCamera=R,p.execute(),g(null)}).catch(function(R){p.cancel(),b(R)})}).catch(function(T){p.cancel(),b(_1.errorGettingUserMedia(T))})}).catch(function(S){p.cancel(),b(_1.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Cs.PAUSED),this.showPausedState(),(bf(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,r=function(){e.stateManagerProxy.directTransition(Cs.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Cs.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(e.element){var s=document.getElementById(hc.SHADED_REGION_ELEMENT_ID);s&&e.element.removeChild(s)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,r){return this.scanFileV2(e,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(e,r){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(bf(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var l=o.width,c=o.height,u=document.getElementById(n.elementId),d=u.clientWidth?u.clientWidth:hc.DEFAULT_WIDTH,h=Math.max(u.clientHeight?u.clientHeight:c,hc.FILE_SCAN_MIN_HEIGHT),p=n.computeCanvasDrawConfig(l,c,d,h);if(r){var g=n.createCanvasElement(d,h,"qr-canvas-visible");g.style.display="inline-block",u.appendChild(g);var b=g.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=d,b.canvas.height=h,b.drawImage(o,0,0,l,c,p.x,p.y,p.width,p.height)}var w=hc.FILE_SCAN_HIDDEN_CANVAS_PADDING,_=Math.max(o.width,p.width),N=Math.max(o.height,p.height),S=_+2*w,T=N+2*w,R=n.createCanvasElement(S,T);u.appendChild(R);var z=R.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=S,z.canvas.height=T,z.drawImage(o,0,0,l,c,w,w,_,N);try{n.qrcode.decodeRobustlyAsync(R).then(function(G){a(g$.createFromQrcodeResult(G))}).catch(s)}catch(G){s("QR code parse error, error = ".concat(G))}},o.onerror=s,o.onabort=s,o.onstalled=s,o.onsuspend=s,o.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return w7e.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!cse.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var r=[Tr.QR_CODE,Tr.AZTEC,Tr.CODABAR,Tr.CODE_39,Tr.CODE_93,Tr.CODE_128,Tr.DATA_MATRIX,Tr.MAXICODE,Tr.ITF,Tr.EAN_13,Tr.EAN_8,Tr.PDF_417,Tr.RSS_14,Tr.RSS_EXPANDED,Tr.UPC_A,Tr.UPC_E,Tr.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return r;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,s=e.formatsToSupport;a<s.length;a++){var o=s[a];n7e(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(bf(e))return!0;if(!bf(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(bf(e.experimentalFeatures))return!0;var r=e.experimentalFeatures;return bf(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,r,n){var a=this,s=n.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(e,r,s),l=function(u){if(u<hc.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(hc.MIN_QR_BOX_SIZE,"px.")},c=function(u){return u>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),u=e),u};l(o.width),l(o.height),o.width=c(o.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(e,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},t.prototype.setupUi=function(e,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,r,n);var a=bf(n.qrbox)?{width:e,height:r}:n.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(e,r,a);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&s.height<=r,l={x:0,y:0,width:e,height:r},c=o?this.getShadedRegionBounds(e,r,s):l,u=this.createCanvasElement(c.width,c.height),d={willReadFrequently:!0},h=u.getContext("2d",d);h.canvas.width=c.width,h.canvas.height=c.height,this.element.append(u),o&&this.possiblyInsertShadingElement(this.element,e,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=h,this.canvasElement=u},t.prototype.createScannerPausedUiElement=function(e){var r=document.createElement("div");r.innerText=_1.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",e.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(e,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,g$.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var s=_1.codeParseError(a);return r(s,s7e.createFrom(s)),!1})},t.prototype.foreverScan=function(e,r,n){var a=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),o=s.videoWidth/s.clientWidth,l=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*o,u=this.qrRegion.height*l,d=this.qrRegion.x*o,h=this.qrRegion.y*l;this.context.drawImage(s,d,h,c,u,0,0,this.qrRegion.width,this.qrRegion.height);var p=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,r,n)},a.getTimeoutFps(e.fps))};this.scanContext(r,n).then(function(g){!g&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,n).finally(function(){p()})):p()}).catch(function(g){a.logger.logError("Error happend while scanning context",g),p()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var r="facingMode",n="deviceId",a={user:!0,environment:!0},s="exact",o=function(b){if(b in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(b,"'")},l=Object.keys(e);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var c=Object.keys(e)[0];if(c!==r&&c!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(c===r){var u=e.facingMode;if(typeof u=="string"){if(o(u))return{facingMode:u}}else if(typeof u=="object")if(s in u){if(o(u["".concat(s)]))return{facingMode:{exact:u["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var d=typeof u;throw"Invalid type of 'facingMode' = ".concat(d)}}else{var h=e.deviceId;if(typeof h=="string")return{deviceId:h};if(typeof h=="object"){if(s in h)return{deviceId:{exact:h["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var p=typeof h;throw"Invalid type of 'deviceId' = ".concat(p)}}}var g=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(g)},t.prototype.computeCanvasDrawConfig=function(e,r,n,a){if(e<=n&&r<=a){var s=(n-e)/2,o=(a-r)/2;return{x:s,y:o,width:e,height:r}}else{var l=e,c=r;return e>n&&(r=n/e*r,e=n),r>a&&(e=a/r*e,r=a),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(c)+" to ".concat(e,"X").concat(r,".")),this.computeCanvasDrawConfig(e,r,n,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=e?hc.BORDER_SHADER_MATCH_COLOR:hc.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,r,n){var a=e,s=r,o=document.createElement("canvas");return o.style.width="".concat(a,"px"),o.style.height="".concat(s,"px"),o.style.display="none",o.id=bf(n)?"qr-canvas":n,o},t.prototype.getShadedRegionBounds=function(e,r,n){if(n.width>e||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(e,r,n,a){if(!(r-a.width<1||n-a.height<1)){var s=document.createElement("div");s.style.position="absolute";var o=(r-a.width)/2,l=(n-a.height)/2;if(s.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(hc.SHADED_REGION_ELEMENT_ID),r-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var c=5,u=40;this.insertShaderBorders(s,u,c,-c,null,0,!0),this.insertShaderBorders(s,u,c,-c,null,0,!1),this.insertShaderBorders(s,u,c,null,-c,0,!0),this.insertShaderBorders(s,u,c,null,-c,0,!1),this.insertShaderBorders(s,c,u+c,-c,null,-c,!0),this.insertShaderBorders(s,c,u+c,null,-c,-c,!0),this.insertShaderBorders(s,c,u+c,-c,null,-c,!1),this.insertShaderBorders(s,c,u+c,null,-c,-c,!1),this.hasBorderShaders=!0}e.append(s)}},t.prototype.insertShaderBorders=function(e,r,n,a,s,o,l){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=hc.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(r,"px"),c.style.height="".concat(n,"px"),a!==null&&(c.style.top="".concat(a,"px")),s!==null&&(c.style.bottom="".concat(s,"px")),l?c.style.left="".concat(o,"px"):c.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),e.appendChild(c)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),N$;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(N$||(N$={}));const T7e=({onScan:t,onClose:e,title:r="Escanear Cdigo de Barras"})=>{const[n,a]=A.useState(!1),[s,o]=A.useState(null);A.useRef(null);const l=A.useRef(null);A.useEffect(()=>(c(),()=>{u()}),[]);const c=async()=>{try{const g={fps:10,qrbox:{width:300,height:150},aspectRatio:2,formatsToSupport:[oy.SCAN_TYPE_CAMERA]};l.current=new j7e("barcode-reader"),await l.current.start({facingMode:"environment"},g,d,h),a(!0),Ke.success("Cmara activada. Apunta al cdigo de barras")}catch(g){console.error("Error iniciando escner:",g),Ke.error("Error al acceder a la cmara. Verifica los permisos.")}},u=async()=>{if(l.current&&n)try{await l.current.stop(),l.current.clear(),a(!1)}catch(g){console.error("Error deteniendo escner:",g)}},d=(g,b)=>{console.log(" Cdigo escaneado:",g),g!==s&&(o(g),navigator.vibrate&&navigator.vibrate(200),Ke.success(`Cdigo: ${g}`),t&&t(g,b),setTimeout(()=>{p()},500))},h=g=>{},p=async()=>{await u(),e&&e()};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col",children:[i.jsxs("div",{className:"bg-slate-900 p-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Gf,{className:"text-white",size:24}),i.jsx("h2",{className:"text-white font-semibold text-lg",children:r})]}),i.jsx("button",{onClick:p,className:"text-white hover:bg-slate-800 p-2 rounded-lg transition",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:[i.jsx("div",{id:"barcode-reader",className:"w-full max-w-md rounded-lg overflow-hidden shadow-2xl"}),i.jsxs("div",{className:"mt-6 bg-slate-900/80 rounded-lg p-4 max-w-md w-full",children:[i.jsx("p",{className:"text-white text-center text-sm mb-2",children:" Apunta la cmara al cdigo de barras"}),i.jsx("p",{className:"text-slate-400 text-center text-xs",children:"El cdigo se leer automticamente"})]}),s&&i.jsxs("div",{className:"mt-4 bg-emerald-900/80 rounded-lg p-3 max-w-md w-full flex items-center gap-2",children:[i.jsx(rd,{className:"text-emerald-400",size:20}),i.jsxs("p",{className:"text-emerald-100 text-sm",children:["ltimo: ",i.jsx("strong",{children:s})]})]})]}),i.jsx("div",{className:"bg-slate-900 p-4",children:i.jsx("p",{className:"text-slate-400 text-xs text-center",children:" Tip: Asegrate de tener buena iluminacin y mantn el cdigo de barras en el centro del recuadro"})})]})},C7e=({factura:t,onComplete:e,onCancel:r})=>{const[n,a]=A.useState(!1),[s,o]=A.useState(new Set),[l,c]=A.useState([]),[u,d]=A.useState(""),h=A.useRef(null),p=[];t.items.forEach((G,O)=>{const D=parseInt(G.cantidad)||1;for(let I=0;I<D;I++){const V=`${t.codigoTracking}-${O+1}-${I+1}`;p.push({codigo:V,itemIndex:O,unidadIndex:I,descripcion:G.producto||G.descripcion||"Item"})}});const g=p.length,b=s.size,w=g>0?b/g*100:0,_=b===g;A.useEffect(()=>{h.current&&!n&&h.current.focus()},[n]);const N=G=>{const O=G.trim().toUpperCase(),D=p.find(I=>I.codigo.toUpperCase()===O);return D?s.has(O)?(Ke.warning(` Ya escaneado: ${D.descripcion}`),!1):(o(I=>new Set([...I,O])),c(I=>[...I,{codigo:O,timestamp:new Date().toLocaleTimeString("es-DO"),descripcion:D.descripcion}]),navigator.vibrate&&navigator.vibrate(100),Ke.success(` ${D.descripcion} escaneado`),!0):(Ke.error(` Cdigo no vlido: ${O}`),!1)},S=G=>{N(G),a(!1)},T=G=>{G.preventDefault(),u.trim()&&N(u)&&d("")},R=G=>{G.key==="Enter"&&T(G)},z=()=>{if(!_){Ke.error(" Debes escanear todos los items antes de entregar");return}e(Array.from(s))};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[i.jsx(kre,{size:28}),"Escanear Items para Entrega"]}),i.jsxs("p",{className:"text-indigo-100 mt-2",children:[" Factura: ",t.codigoTracking]})]}),i.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Progreso: ",b," / ",g," unidades"]}),i.jsxs("span",{className:`text-sm font-bold ${_?"text-emerald-600":"text-orange-600"}`,children:[w.toFixed(0),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3 overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-300 ${_?"bg-emerald-500":"bg-indigo-600"}`,style:{width:`${w}%`}})})]}),i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsx("form",{onSubmit:T,className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300",children:"Escanea o escribe el cdigo"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{ref:h,type:"text",value:u,onChange:G=>d(G.target.value),onKeyPress:R,placeholder:"ENV-2025-001-1-1",className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 font-mono",autoFocus:!0}),i.jsxs("button",{type:"button",onClick:()=>a(!0),className:"px-4 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Gf,{size:20}),"Cmara"]})]}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:" Usa la cmara o una pistola Bluetooth/USB para escanear"})]})})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Lr,{size:18}),"Items a Entregar (",g," unidades)"]}),i.jsx("div",{className:"space-y-2",children:p.map((G,O)=>{const D=s.has(G.codigo.toUpperCase());return i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${D?"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-300 dark:border-emerald-700":"bg-slate-50 dark:bg-slate-700/50 border-slate-200 dark:border-slate-600"}`,children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:`font-mono text-sm ${D?"text-emerald-900 dark:text-emerald-100":"text-slate-700 dark:text-slate-300"}`,children:G.codigo}),i.jsxs("p",{className:`text-xs ${D?"text-emerald-700 dark:text-emerald-300":"text-slate-600 dark:text-slate-400"}`,children:[G.descripcion," - Unidad ",G.unidadIndex+1]})]}),i.jsx("div",{children:D?i.jsx(Jr,{className:"text-emerald-600 dark:text-emerald-400",size:24}):i.jsx(Wm,{className:"text-slate-400 dark:text-slate-500",size:24})})]},O)})})]}),l.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"ltimos Escaneados"}),i.jsx("div",{className:"space-y-2",children:[...l].reverse().slice(0,5).map((G,O)=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded border border-emerald-200 dark:border-emerald-800",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-mono text-sm text-emerald-900 dark:text-emerald-100",children:G.codigo}),i.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:G.descripcion})]}),i.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:G.timestamp})]},O))})]})]}),i.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 flex gap-3",children:[i.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",children:"Cancelar"}),i.jsxs("button",{onClick:z,disabled:!_,className:`flex-1 px-4 py-3 rounded-lg transition font-semibold flex items-center justify-center gap-2 ${_?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-400 cursor-not-allowed"}`,children:[i.jsx(Jr,{size:20}),_?"Confirmar Entrega":`Faltan ${g-b} items`]})]}),!_&&b>0&&i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 border-t border-orange-200 dark:border-orange-800 flex items-start gap-3",children:[i.jsx(_s,{className:"text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5",size:20}),i.jsxs("div",{className:"text-sm text-orange-800 dark:text-orange-200",children:[i.jsx("strong",{children:"Atencin:"})," An faltan ",g-b," unidad(es) por escanear. Verifica que todos los items estn presentes antes de entregar."]})]})]}),n&&i.jsx(T7e,{onScan:S,onClose:()=>a(!1),title:"Escanear Cdigo de Item"})]})},cT=()=>{var Wa,_i,Rn,Xn,As,Fi,Br,ja,Bi,Pn,Dn,za,ct,Ie,Ar,Ta,Va,Us,Xo;const{data:t,loading:e,clearNewDataIndicator:r}=lCe();fae();const{userData:n}=ca(),[a,s]=A.useState(null),[o,l]=A.useState(null),[c,u]=A.useState("lista"),[d,h]=A.useState([]),[p,g]=A.useState(0),[b,w]=A.useState(!1),[_,N]=A.useState(!1),[S,T]=A.useState(!1),[R,z]=A.useState(!1),[G,O]=A.useState(""),[D,I]=A.useState(null),[V,P]=A.useState(!1),[B,F]=A.useState(!1),[ee,Z]=A.useState(!1),[ce,ne]=A.useState(!1),[ae,me]=A.useState(!1),[Te,we]=A.useState(!1),[q,Y]=A.useState(!1),[X,re]=A.useState(!1),se=ht=>{console.log(" Items escaneados antes de entregar:",ht),Ke.success(`${ht.length} items escaneados correctamente`),re(!1),me(!0)},[Ce,je]=A.useState([]),[pe,Oe]=A.useState(null),[qe,Ue]=A.useState(""),[Me,Be]=A.useState([]),[ve,Ht]=A.useState(""),[mt,Ut]=A.useState(""),[et,er]=A.useState(""),[Ve,zt]=A.useState([]),[Wt,Yt]=A.useState(!0),[ar,Xe]=A.useState(""),[qt,kt]=A.useState("efectivo"),[gt,Ft]=A.useState(""),[Vt,Nr]=A.useState(""),[sr,it]=A.useState(0),[ir,be]=A.useState(""),[Ze,at]=A.useState(""),[Qe,ze]=A.useState(""),[st,St]=A.useState(""),[tr,It]=A.useState(""),[Er,en]=A.useState("combustible"),[$r,jn]=A.useState(""),[fr,dn]=A.useState(""),[Vn,on]=A.useState(!1),[_n,Zr]=A.useState(""),[tn,de]=A.useState(""),[ge,Ne]=A.useState([]),Ee=async ht=>{var Ot,br,Fn;try{w(!0);const mn=await wt.get(`/repartidores/rutas/${ht}`);if(mn.data.success){if(console.log(" Datos recibidos del servidor - Total facturas:",(Ot=mn.data.data.facturas)==null?void 0:Ot.length),(br=mn.data.data.facturas)!=null&&br[0]){const Nn=mn.data.data.facturas[0];console.log(" Primera factura completa:",{id:Nn.id,numeroFactura:Nn.numeroFactura,items:Nn.items}),console.log(" Items RAW de primera factura:",JSON.stringify(Nn.items,null,2))}if(s(mn.data.data),ke(ht),c==="factura"&&o){const Nn=mn.data.data.facturas.find(ei=>ei.id===o.id);Nn&&(console.log(" Actualizando facturaActual ID:",Nn.id),console.log(" Items RAW que se van a guardar en estado:",JSON.stringify(Nn.items,null,2)),l(Nn),console.log(" setFacturaActual llamado con items:",(Fn=Nn.items)==null?void 0:Fn.map(ei=>({desc:ei.descripcion,entregado:ei.entregado}))))}else u("ruta")}}catch(mn){Ke.error("Error cargando detalle de ruta"),console.error(mn)}finally{w(!1)}},ke=async ht=>{try{const Ot=await wt.get(`/gastos-ruta/${ht}`);Ot.data.success&&(h(Ot.data.data.gastos||[]),g(Ot.data.data.totalGastos||0))}catch(Ot){console.error("Error cargando gastos:",Ot)}},Pe=async()=>{a&&await Ee(a.id),r()};A.useEffect(()=>{if(!R)return;const ht=Ot=>{["INPUT","TEXTAREA"].includes(Ot.target.tagName)||(Ot.key==="Enter"?G&&(lt(G),O("")):Ot.key.length===1&&O(br=>br+Ot.key))};return window.addEventListener("keydown",ht),()=>window.removeEventListener("keydown",ht)},[R,G,c,o,a]);const lt=ht=>{if(I(ht),console.log(" Scan Repartidor:",ht),c==="factura"&&o){const Ot=o.items.findIndex(br=>br.codigoBarras===ht||br.producto===ht);if(Ot!==-1){const br=o.items[Ot];br.entregado?Ke.info("Item ya entregado"):(Ge(Ot),Ke.success(` Item escaneado: ${br.descripcion}`))}else o.codigoTracking===ht||o.numeroFactura===ht?Ke.info("Ests en la factura correcta. Escanea los items."):Ke.warning("Cdigo no pertenece a esta factura")}else if(c==="ruta"&&a){let Ot=null;if(Ot=a.facturas.find(br=>br.codigoTracking===ht||br.numeroFactura===ht),!Ot){for(const br of a.facturas)if(br.items&&br.items.some(Fn=>Fn.codigoBarras===ht)){Ot=br;break}}Ot?(l(Ot),u("factura"),Ke.success(` Abriendo factura: ${Ot.codigoTracking}`)):Ke.error("Cdigo no encontrado en esta ruta")}else Ke.info("Entra a una ruta para usar el scanner")},jt=async(ht,Ot)=>{const br=Qb(jx,Ot);return await Yb(br,ht),await Zb(br)},rt=async(ht,Ot)=>{const br=[];if(!ht||ht.length===0)return br;const Fn=(o==null?void 0:o.id)||(a==null?void 0:a.id)||"temp";for(let mn=0;mn<ht.length;mn++){const Nn=ht[mn],ei=Date.now();try{const gs=await ose(Nn),Ui=await jt(gs.thumbnail,`${Ot}/${Fn}/thumb_${Nn.name}`),jr=await jt(gs.preview,`${Ot}/${Fn}/preview_${Nn.name}`),Yo=await jt(gs.original,`${Ot}/${Fn}/original_${Nn.name}`);br.push({original:Yo,thumbnail:Ui,preview:jr,metadata:gs.metadata}),Date.now()-ei>500&&Ke.success(`Imagen ${mn+1}: ${gs.metadata.originalSizeKB}KB  Thumb: ${gs.metadata.thumbnailSizeKB}KB + Preview: ${gs.metadata.previewSizeKB}KB`,{duration:3e3})}catch(gs){console.error(`Error procesando archivo ${Nn.name}:`,gs),Ke.error(`Error al procesar ${Nn.name}`)}}return br},Ae=async()=>{if(a)try{N(!0),(await wt.post(`/repartidores/rutas/${a.id}/iniciar-entregas`)).data.success&&(Ke.success(" Ruta iniciada"),await Ee(a.id))}catch(ht){Ke.error("Error al iniciar ruta"),console.error(ht)}finally{N(!1)}},Ge=async ht=>{if(!o)return;const Ot=o.items[ht];if(Ot!=null&&Ot.entregado||Ot!=null&&Ot._optimistic){console.warn(" Item ya entregado, ignorando accin duplicada");return}try{console.log(` Entregando item ${ht} de factura ${o.id}`);const br=[...o.items];br[ht]&&(br[ht].entregado=!0,br[ht]._optimistic=!0),l(mn=>({...mn,items:br,itemsEntregados:(mn.itemsEntregados||0)+1})),(await wt.post(`/repartidores/facturas/${o.id}/items/entregar`,{itemIndex:ht})).data.success&&(console.log(` Item ${ht} entregado exitosamente en servidor`),Ke.success(" Item entregado"),await Ee(a.id))}catch(br){console.error(" Error al entregar item:",br),Ke.error(" Error al entregar item"),await Ee(a.id)}},dt=async()=>{if(!o||Ce.length===0){Ke.warning("Debes seleccionar al menos una foto");return}try{N(!0),T(!0);const ht=await rt(Ce,"evidencia_entrega");if(ht.length===0){Ke.warning("No se subi ninguna foto con xito.");return}const Ot=ht.map(Fn=>typeof Fn=="string"?Fn:Fn.original);(await wt.post(`/repartidores/facturas/${o.id}/fotos`,{fotos:Ot})).data.success&&(Ke.success(` ${ht.length} fotos subidas`),P(!1),je([]),await Ee(a.id))}catch(ht){Ke.error("Error al subir fotos"),console.error(ht)}finally{N(!1),T(!1)}},At=async()=>{if(!o||!pe||!qe.trim()){Ke.warning("La descripcin del dao es obligatoria");return}if(!Me||Me.length===0){Ke.warning("Debe tomar al menos una foto del item daado como evidencia.");return}try{N(!0);const ht=await rt(Me,"danos_reparto");(await wt.post(`/repartidores/facturas/${o.id}/items/danado`,{itemIndex:pe.index,descripcionDano:qe.trim(),fotos:ht})).data.success&&(Ke.warning(" Item daado reportado"),F(!1),Ua(),await Ee(a.id))}catch(ht){Ke.error("Error reportando dao"),console.error(ht)}finally{N(!1)}},yt=async()=>{if(!o||!ve||!et.trim()){Ke.warning("Motivo y descripcin son obligatorios");return}if(!Ve||Ve.length===0){Ke.warning("Debe tomar al menos una foto como evidencia de la no entrega.");return}try{N(!0);const ht=await rt(Ve,"reportes_no_entrega");(await wt.post(`/repartidores/facturas/${o.id}/no-entregada`,{motivo:ve,descripcion:et.trim(),fotos:ht,intentarNuevamente:Wt})).data.success&&(Ke.warning(" No entrega reportada"),Z(!1),wi(),Hr())}catch(ht){Ke.error("Error reportando no entrega"),console.error(ht)}finally{N(!1)}},Ct=async()=>{var ht;try{N(!0),(await wt.post(`/repartidores/facturas/${o.id}/pago-contraentrega`,{montoPagado:parseFloat(qt==="efectivo"?sr:((ht=o.pago)==null?void 0:ht.total)||0),metodoPago:qt,referenciaPago:gt,notas:ir})).data.success&&(Ke.success(" Pago confirmado"),ne(!1),fn(),await Ee(a.id))}catch(Ot){Ke.error("Error al confirmar pago"),console.error(Ot)}finally{N(!1)}},Xt=async()=>{var ht,Ot,br,Fn,mn;if(o){if(o.itemsEntregados<(((ht=o.items)==null?void 0:ht.length)||o.itemsTotal)){Ke.warning("Debe confirmar la entrega de todos los tems o reportar los faltantes/daados.");return}if(((Ot=o.pago)==null?void 0:Ot.estado)!=="pagada"&&((br=o.pago)==null?void 0:br.total)>0){Ke.warning("Debe confirmar el pago contraentrega antes de marcar como entregada.");return}if(!o.fotosEntrega||o.fotosEntrega.length===0){Ke.warning("Debe subir al menos una foto de evidencia antes de finalizar la entrega.");return}try{N(!0),(await wt.post(`/repartidores/facturas/${o.id}/entregar`,{nombreReceptor:Ze,notasEntrega:Qe||st,firmaCliente:null})).data.success&&(Ke.success(" Factura marcada como entregada"),me(!1),nn(),Hr())}catch(Nn){const ei=((mn=(Fn=Nn.response)==null?void 0:Fn.data)==null?void 0:mn.message)||"Error al confirmar entrega";Ke.error(ei),console.error("Error confirmando entrega:",Nn),a!=null&&a.id&&await Ee(a.id),ei.includes("ya fue entregada")&&(me(!1),nn())}finally{N(!1)}}},vr=async()=>{a&&Ke.promise(async()=>{const ht=await wt.post(`/repartidores/rutas/${a.id}/finalizar`,{notas:tr});return ht.data.success&&(we(!1),It(""),Fr()),ht.data},{loading:"Finalizando ruta...",success:" Ruta finalizada correctamente",error:"Error al finalizar la ruta"})},_t=async()=>{var ht,Ot;if(a){if(!$r||parseFloat($r)<=0){Ke.error("Ingresa un monto vlido");return}if(Vn){if(!_n||_n.length<11){Ke.error("Ingrese un NCF vlido (11 caracteres)");return}if(!tn||tn.length!==9&&tn.length!==11){Ke.error("Ingrese un RNC vlido (9 u 11 dgitos)");return}if(ge.length===0){Ke.error("La foto es OBLIGATORIA para gastos con NCF");return}}try{N(!0);let br=null;if(ge.length>0){const mn=await rt(ge,"gastos_fiscales");mn.length>0&&(br=mn[0].original||mn[0])}(await wt.post(`/gastos-ruta/${a.id}`,{tipo:Er,monto:parseFloat($r),descripcion:fr,ncf:Vn?_n:null,rnc:Vn?tn:null,imgUrl:br})).data.success&&(Ke.success(" Gasto registrado"),Y(!1),an(),ke(a.id))}catch(br){Ke.error(((Ot=(ht=br.response)==null?void 0:ht.data)==null?void 0:Ot.error)||"Error al registrar gasto"),console.error(br)}finally{N(!1)}}},Hr=()=>{l(null),u("ruta"),a&&Ee(a.id)},Fr=()=>{s(null),u("lista")},Ua=()=>{Oe(null),Ue(""),Be([])},wi=()=>{Ht(""),er(""),zt([]),Yt(!0),Ut("")},fn=()=>{Xe(""),kt("efectivo"),it(0),be("")},nn=()=>{at(""),ze(""),St("")},an=()=>{jn(""),dn(""),en("combustible"),on(!1),Zr(""),de(""),Ne([])};return i.jsx(r7e,{onRefresh:Pe,children:i.jsxs("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 pb-20",children:[i.jsx("div",{className:"sticky top-0 z-40 bg-white dark:bg-slate-800 shadow-sm",children:i.jsx("div",{className:"px-3 sm:px-4 py-2.5 sm:py-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx("img",{src:mw,alt:"ProLogix",className:"h-8 sm:h-10 w-auto object-contain flex-shrink-0"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-sm sm:text-base font-bold bg-gradient-to-r from-indigo-600 to-indigo-800 bg-clip-text text-transparent truncate",children:"ProLogix"}),i.jsx("p",{className:"text-[10px] sm:text-xs text-slate-600 dark:text-slate-400 truncate",children:(n==null?void 0:n.nombre)||"Repartidor"})]})]}),i.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-shrink-0",children:[i.jsx(mae,{}),i.jsx(hae,{}),i.jsx("button",{className:"relative p-1.5 sm:p-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",children:i.jsx(NP,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),i.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white text-xs sm:text-sm font-bold",children:((Wa=n==null?void 0:n.nombre)==null?void 0:Wa.charAt(0).toUpperCase())||"R"})]})]})})}),i.jsxs("div",{className:"p-3 sm:p-4",children:[c==="lista"&&i.jsxs("div",{className:"space-y-3 xxs:space-y-4",children:[i.jsx("h2",{className:"text-base xxs:text-lg xs:text-xl font-semibold text-slate-800 dark:text-slate-200",children:"Mis Rutas Asignadas"}),e?i.jsx("div",{className:"flex justify-center p-8",children:i.jsx(bs,{className:"animate-spin text-indigo-600"})}):(t==null?void 0:t.length)>0?t.map(ht=>{var Ot;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 rounded-lg shadow-md border-l-4 border-indigo-600",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2 gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-bold text-base xxs:text-lg dark:text-white truncate",children:ht.nombre}),i.jsx("p",{className:"text-xs xxs:text-sm text-slate-500 dark:text-slate-400",children:new Date(ht.fecha_programada).toLocaleDateString()})]}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold whitespace-nowrap flex-shrink-0 ${ht.estado==="en_curso"?"bg-emerald-100 text-emerald-800":"bg-amber-100 text-amber-800"}`,children:ht.estado.toUpperCase().replace("_"," ")})]}),i.jsxs("div",{className:"flex justify-between items-center mt-3 xxs:mt-4 gap-2",children:[i.jsx("div",{className:"text-xs xxs:text-sm text-slate-600 dark:text-slate-300",children:i.jsxs("p",{children:[((Ot=ht.facturas)==null?void 0:Ot.length)||0," entregas"]})}),i.jsxs("button",{onClick:()=>Ee(ht.id),className:"px-3 xxs:px-4 py-2 text-xs xxs:text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700 transition flex items-center gap-1 xxs:gap-2 whitespace-nowrap",children:["Ver Ruta ",i.jsx(Hl,{className:"rotate-180",size:14})]})]})]},ht.id)}):i.jsxs("div",{className:"text-center p-8 bg-white dark:bg-slate-800 rounded-lg",children:[i.jsx(ts,{className:"mx-auto h-12 w-12 text-slate-400 mb-2"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No tienes rutas activas asignadas"})]})]}),c==="ruta"&&a&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("button",{onClick:Fr,className:"flex items-center text-slate-600 dark:text-slate-400 mb-2 text-sm sm:text-base",children:[i.jsx(Hl,{size:18,className:"mr-1 sm:mr-2"})," Volver"]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 sm:p-4 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-bold dark:text-white truncate",children:a.nombre}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-500",children:[(_i=a.facturas)==null?void 0:_i.filter(ht=>ht.estado==="entregada").length," / ",(Rn=a.facturas)==null?void 0:Rn.length," completadas"]})]}),a.estado==="cargada"?i.jsxs("button",{onClick:Ae,disabled:_,className:"w-full sm:w-auto px-3 sm:px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 flex items-center justify-center gap-2 text-sm sm:text-base",children:[i.jsx(ts,{size:16})," Iniciar Entregas"]}):i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{const ht=`${window.location.origin}/rutas/${a.id}/imprimir`;window.open(ht,"_blank")},className:"p-2 bg-indigo-100 text-indigo-700 rounded hover:bg-indigo-200",title:"Imprimir",children:i.jsx(ql,{size:18})}),i.jsx("button",{onClick:()=>Y(!0),className:"p-2 bg-amber-100 text-amber-700 rounded hover:bg-amber-200",title:"Gasto",children:i.jsx(Fl,{size:18})}),i.jsx("button",{onClick:()=>we(!0),className:"px-2 sm:px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center gap-1 sm:gap-2 text-xs sm:text-sm whitespace-nowrap",children:"Finalizar"})]})]}),i.jsxs("div",{className:`mt-2 mb-2 p-2 rounded-lg flex items-center justify-between transition border ${R?"bg-indigo-50 border-indigo-300":"bg-white border-slate-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`p-2 rounded-full ${R?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:i.jsx(ql,{size:20})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:["Modo Scanner ",R&&"(ACTIVO)"]}),D&&i.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["ltimo: ",D]})]})]}),i.jsx("button",{onClick:()=>z(!R),className:`text-xs px-3 py-1.5 rounded font-medium ${R?"bg-indigo-600 text-white":"bg-slate-200 text-slate-600"}`,children:R?"Apagar":"Encender"})]}),p>0&&i.jsx("div",{className:"mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-slate-100 dark:border-slate-700",children:i.jsxs("p",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300",children:["Gastos: ",i.jsxs("span",{className:"text-rose-600",children:["RD$ ",p.toFixed(2)]})]})})]}),i.jsx("div",{className:"space-y-2 sm:space-y-3",children:(Xn=a.facturas)==null?void 0:Xn.map((ht,Ot)=>{var br,Fn;return i.jsx("div",{onClick:()=>{l(ht),u("factura")},className:`p-3 sm:p-4 rounded-lg shadow-sm border-l-4 cursor-pointer transition-all ${ht.estado==="entregada"?"bg-emerald-50 border-emerald-500 dark:bg-emerald-900/20":ht.estado==="no_entregada"?"bg-rose-50 border-rose-500 dark:bg-rose-900/20":"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"}`,children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[i.jsx("span",{className:"bg-slate-200 dark:bg-slate-700 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center font-bold text-xs sm:text-sm flex-shrink-0",children:Ot+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-bold text-sm sm:text-base text-slate-900 dark:text-white truncate",children:(br=ht.destinatario)==null?void 0:br.nombre}),i.jsx("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400 truncate",children:(Fn=ht.destinatario)==null?void 0:Fn.direccion})]})]}),i.jsxs("div",{className:"flex-shrink-0 ml-2",children:[ht.estado==="entregada"&&i.jsx(Jr,{className:"text-emerald-600",size:18}),ht.estado==="no_entregada"&&i.jsx(Wm,{className:"text-rose-600",size:18})]})]})},ht.id)})})]}),c==="factura"&&o&&i.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[i.jsx("button",{onClick:Hr,className:"p-1.5 sm:p-2 hover:bg-slate-100 rounded-full dark:hover:bg-slate-700",children:i.jsx(Hl,{size:20})}),i.jsx("h2",{className:"text-lg sm:text-xl font-bold dark:text-white",children:"Entrega"})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:gap-4 p-3 sm:p-4 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs sm:text-sm text-slate-500 dark:text-slate-400",children:"Cliente"}),i.jsx("p",{className:"font-bold text-base sm:text-lg text-slate-900 dark:text-white break-words",children:(As=o.destinatario)==null?void 0:As.nombre}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-300 flex items-start gap-2 mt-1",children:[i.jsx(Da,{size:14,className:"mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"break-words",children:(Fi=o.destinatario)==null?void 0:Fi.direccion})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[i.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(((Br=o.destinatario)==null?void 0:Br.direccion)||"")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium shadow-sm text-xs sm:text-sm",children:[i.jsx(ey,{size:14}),"Maps"]}),i.jsxs("a",{href:`https://waze.com/ul?q=${encodeURIComponent(((ja=o.destinatario)==null?void 0:ja.direccion)||"")}&navigate=yes`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 sm:px-4 sm:py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition font-medium shadow-sm text-xs sm:text-sm",children:[i.jsx(ey,{size:14}),"Waze"]})]})]}),i.jsxs("div",{className:"pt-3 sm:pt-0 border-t sm:border-t-0 sm:border-l sm:pl-4",children:[i.jsx("p",{className:"text-xs sm:text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Pago Contraentrega:"}),i.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-emerald-700 dark:text-emerald-400",children:["$",((Pn=(Bi=o.pago)==null?void 0:Bi.total)==null?void 0:Pn.toFixed(2))||"0.00"]}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:["Estado: ",i.jsx("span",{className:`font-bold ${((Dn=o.pago)==null?void 0:Dn.estado)==="pagada"?"text-emerald-600":"text-amber-600"}`,children:((za=o.pago)==null?void 0:za.estado)==="pagada"?"Pagado":"Pendiente"})]})]})]}),i.jsxs("h3",{className:"font-bold text-base sm:text-lg mb-2 sm:mb-3 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Lr,{size:18})," Items a Entregar"]}),i.jsx("div",{className:"space-y-2 sm:space-y-3 mb-4 sm:mb-6",children:(ct=o.items)==null?void 0:ct.map((ht,Ot)=>{const br=ht.danado||ht.estadoItem==="danado",Fn=ht.entregado||ht.estadoItem==="entregado",mn=ht.estadoItem==="no_entregado";let Nn="bg-slate-50 border-slate-200 dark:bg-slate-700 dark:border-slate-600";return Fn?Nn="bg-emerald-50 border-emerald-200 dark:bg-emerald-900/20 dark:border-emerald-800":br?Nn="bg-amber-50 border-amber-200 dark:bg-amber-900/20 dark:border-amber-800":mn&&(Nn="bg-rose-50 border-rose-200 dark:bg-rose-900/20 dark:border-rose-800"),i.jsxs("div",{className:`p-2.5 sm:p-3 border rounded-lg flex justify-between items-center gap-2 ${Nn} ${ht._optimistic?"opacity-70":""}`,children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-medium text-sm sm:text-base text-slate-900 dark:text-white break-words",children:ht.producto||ht.descripcion||"Item sin nombre"}),i.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:["Cant: ",ht.cantidad]}),br&&ht.descripcionDano&&i.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[" ",ht.descripcionDano]})]}),i.jsx("div",{className:"flex gap-1.5 sm:gap-2 flex-shrink-0",children:Fn?i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 rounded-full",children:[i.jsx(Jr,{size:16,className:"fill-current"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm whitespace-nowrap",children:"Entregado"})]}):br?i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded-full",children:[i.jsx(hi,{size:16,className:"fill-current"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm whitespace-nowrap",children:"Daado"})]}):mn?i.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300 rounded-full",children:[i.jsx(Wm,{size:16,className:"fill-current"}),i.jsx("span",{className:"font-medium text-xs sm:text-sm whitespace-nowrap",children:"No Entregado"})]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ge(Ot),className:"p-1.5 sm:p-2 bg-emerald-100 text-emerald-700 rounded-full hover:bg-emerald-200 transition",title:"Entregar",children:i.jsx(Jr,{size:18})}),i.jsx("button",{onClick:()=>{Oe({...ht,index:Ot}),F(!0)},className:"p-1.5 sm:p-2 bg-rose-100 text-rose-700 rounded-full hover:bg-rose-200 transition",title:"Dao",children:i.jsx(hi,{size:18})})]})})]},Ot)})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 sm:p-4 rounded-lg shadow-sm mb-4 sm:mb-6",children:[i.jsxs("h3",{className:"font-bold text-base sm:text-lg mb-2 sm:mb-3 text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Gf,{size:18})," Evidencia"]}),i.jsxs("div",{className:"flex gap-2 mb-3 sm:mb-4",children:[i.jsxs("label",{className:"flex-1",children:[i.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:ht=>je(Ot=>[...Ot,...Array.from(ht.target.files)]),className:"hidden",id:"camera-input"}),i.jsxs("div",{className:"w-full px-2 py-2 sm:px-3 sm:py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 cursor-pointer flex items-center justify-center gap-1.5 sm:gap-2 font-medium text-sm sm:text-base",children:[i.jsx(Gf,{size:18}),i.jsx("span",{children:"Cmara"})]})]}),i.jsxs("label",{className:"flex-1",children:[i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:ht=>je(Ot=>[...Ot,...Array.from(ht.target.files)]),className:"hidden",id:"gallery-input"}),i.jsxs("div",{className:"w-full px-2 py-2 sm:px-3 sm:py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 cursor-pointer flex items-center justify-center gap-1.5 sm:gap-2 font-medium text-sm sm:text-base",children:[i.jsx(zd,{size:18}),i.jsx("span",{children:"Galera"})]})]})]}),Ce.length>0&&i.jsxs("div",{className:"mb-3 sm:mb-4 p-2.5 sm:p-3 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[i.jsxs("p",{className:"text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[" ",Ce.length," foto(s)"]}),i.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-3 gap-2",children:Ce.map((ht,Ot)=>i.jsxs("div",{className:"relative aspect-square",children:[i.jsx("img",{src:URL.createObjectURL(ht),alt:`Preview ${Ot+1}`,className:"w-full h-full object-cover rounded border border-slate-300 dark:border-slate-600"}),i.jsx("button",{onClick:()=>je(br=>br.filter((Fn,mn)=>mn!==Ot)),className:"absolute -top-1 -right-1 bg-rose-600 text-white rounded-full p-1 hover:bg-rose-700",children:i.jsx(Zn,{size:12})})]},Ot))}),i.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[i.jsx("button",{onClick:()=>je([]),className:"px-3 py-1.5 sm:px-4 sm:py-2 text-slate-600 dark:text-slate-400 text-sm",children:"Cancelar"}),i.jsxs("button",{onClick:dt,disabled:S,className:"px-3 py-1.5 sm:px-4 sm:py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 flex items-center gap-1.5 sm:gap-2 font-medium text-sm",children:[S?i.jsx(bs,{className:"animate-spin",size:14}):i.jsx(Gf,{size:14}),S?"Subiendo...":"Subir"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[i.jsxs("button",{onClick:()=>Z(!0),className:"p-3 sm:p-4 bg-rose-100 text-rose-700 rounded-lg hover:bg-rose-200 transition flex flex-col items-center gap-1.5 sm:gap-2",children:[i.jsx(Wm,{size:20}),i.jsx("span",{className:"font-bold text-xs sm:text-sm",children:"No Entregado"})]}),i.jsxs("button",{onClick:()=>ne(!0),disabled:((Ie=o.pago)==null?void 0:Ie.estado)==="pagada"||((Ar=o.pago)==null?void 0:Ar.total)<=0,className:"p-3 sm:p-4 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition flex flex-col items-center gap-1.5 sm:gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Fl,{size:20}),i.jsx("span",{className:"font-bold text-xs sm:text-sm text-center",children:((Ta=o.pago)==null?void 0:Ta.estado)==="pagada"?"Pagado":"Confirmar Pago"})]}),i.jsxs("button",{onClick:()=>re(!0),disabled:o.estado==="entregada"||o.estadoGeneral==="entregada",className:`col-span-2 p-3 sm:p-4 rounded-lg transition flex items-center justify-center gap-2 shadow-lg ${o.estado==="entregada"||o.estadoGeneral==="entregada"?"bg-slate-400 text-slate-200 cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"}`,children:[i.jsx(Jr,{size:20}),i.jsx("span",{className:"font-bold text-sm sm:text-base",children:o.estado==="entregada"||o.estadoGeneral==="entregada"?"Ya Entregada":"Finalizar Entrega"})]})]})]}),B&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-rose-600 flex items-center gap-2",children:[i.jsx(hi,{})," Reportar Dao"]}),i.jsxs("p",{className:"mb-4 font-medium text-slate-800 dark:text-white",children:["Item: ",(pe==null?void 0:pe.producto)||(pe==null?void 0:pe.descripcion)||"Item sin nombre"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin del Dao"}),i.jsx("textarea",{value:qe,onChange:ht=>Ue(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Describa el dao..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Fotos del Dao"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ht=>Be(Array.from(ht.target.files)),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:At,disabled:_,className:"px-4 py-2 bg-rose-600 text-white rounded hover:bg-rose-700 disabled:opacity-50 flex items-center gap-2",children:[_?i.jsx(bs,{className:"animate-spin",size:16}):i.jsx(hi,{size:16}),"Reportar"]})]})]})}),ee&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-rose-600 flex items-center gap-2",children:[i.jsx(Wm,{})," Reportar No Entrega"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Motivo"}),i.jsxs("select",{value:ve,onChange:ht=>Ht(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"",children:"Seleccione un motivo..."}),i.jsx("option",{value:"cliente_ausente",children:"Cliente Ausente"}),i.jsx("option",{value:"direccion_incorrecta",children:"Direccin Incorrecta"}),i.jsx("option",{value:"rechazado",children:"Rechazado por Cliente"}),i.jsx("option",{value:"zona_peligrosa",children:"Zona Peligrosa / Inaccesible"}),i.jsx("option",{value:"otro",children:"Otro"})]})]}),ve==="otro"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Especificar Motivo"}),i.jsx("textarea",{value:mt,onChange:ht=>Ut(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"2",placeholder:"Especifique el motivo..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin"}),i.jsx("textarea",{value:et,onChange:ht=>er(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Detalles adicionales..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Fotos (Fachada/Prueba)"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ht=>zt(Array.from(ht.target.files)),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:Wt,onChange:ht=>Yt(ht.target.checked),id:"reintento"}),i.jsx("label",{htmlFor:"reintento",className:"text-sm text-slate-700 dark:text-slate-300",children:"Se puede reintentar hoy"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:yt,disabled:_,className:"px-4 py-2 bg-rose-600 text-white rounded hover:bg-rose-700 disabled:opacity-50 flex items-center gap-2",children:[_?i.jsx(bs,{className:"animate-spin",size:16}):i.jsx(Wm,{size:16}),"Reportar Fallo"]})]})]})}),ce&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-emerald-600 flex items-center gap-2",children:[i.jsx(Fl,{})," Confirmar Pago"]}),i.jsxs("p",{className:"mb-4 text-slate-800 dark:text-white",children:["Monto a cobrar: ",i.jsxs("span",{className:"font-bold text-lg",children:["RD$ ",(((Va=o.pago)==null?void 0:Va.total)||0).toFixed(2)]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Mtodo de Pago"}),i.jsxs("select",{value:qt,onChange:ht=>kt(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"",children:"Seleccione un mtodo..."}),i.jsx("option",{value:"efectivo",children:"Efectivo"}),i.jsx("option",{value:"transferencia",children:"Transferencia"}),i.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),qt==="efectivo"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Monto Recibido (Efectivo)"}),i.jsx("input",{type:"number",step:"0.01",value:sr,onChange:ht=>it(parseFloat(ht.target.value)),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"0.00"}),sr>0&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Cambio: RD$ ",(sr-(((Us=o.pago)==null?void 0:Us.total)||0)).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Comentario (Opcional)"}),i.jsx("textarea",{value:ir,onChange:ht=>be(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"2",placeholder:"Notas sobre el pago..."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>ne(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:Ct,disabled:_||!qt||qt==="efectivo"&&sr<(((Xo=o.pago)==null?void 0:Xo.total)||0),className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 flex items-center gap-2",children:[_?i.jsx(bs,{className:"animate-spin",size:16}):i.jsx(Jr,{size:16}),"Confirmar"]})]})]})}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-emerald-600 flex items-center gap-2",children:[i.jsx(Jr,{})," Finalizar Entrega"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Recibido por (Nombre)"}),i.jsx("input",{type:"text",value:Ze,onChange:ht=>at(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Nombre de quien recibe"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Notas de Entrega"}),i.jsx("textarea",{value:Qe,onChange:ht=>ze(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"2",placeholder:"Comentarios opcionales..."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[i.jsx("button",{onClick:()=>me(!1),className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:Xt,disabled:_,className:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 disabled:opacity-50 flex items-center gap-2",children:[_?i.jsx(bs,{className:"animate-spin",size:16}):i.jsx(Jr,{size:16}),"Confirmar Entrega"]})]})]})}),Te&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start sm:items-center justify-center z-50 p-2 sm:p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md my-4 sm:my-0 flex flex-col max-h-[95vh] sm:max-h-[85vh]",children:[i.jsx("div",{className:"p-3 sm:p-4 border-b dark:border-slate-700 flex-shrink-0",children:i.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-purple-600 flex items-center gap-2",children:[i.jsx(ts,{size:20})," Finalizar Ruta"]})}),i.jsxs("div",{className:"p-3 sm:p-4 overflow-y-auto flex-1",children:[i.jsx("p",{className:"mb-3 text-sm sm:text-base text-slate-600 dark:text-slate-400",children:"Est seguro de que desea finalizar la ruta? Esto cerrar todas las facturas pendientes como no entregadas."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas Finales"}),i.jsx("textarea",{value:tr,onChange:ht=>It(ht.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Observaciones sobre la ruta..."})]})]}),i.jsxs("div",{className:"p-3 sm:p-4 border-t dark:border-slate-700 flex justify-end gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>we(!1),className:"px-3 py-2 text-sm text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded",children:"Cancelar"}),i.jsxs("button",{onClick:vr,disabled:_,className:"px-3 py-2 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2 whitespace-nowrap",children:[_?i.jsx(bs,{className:"animate-spin",size:14}):i.jsx(Jr,{size:14}),"Finalizar"]})]})]})}),X&&o&&i.jsx(C7e,{factura:o,onComplete:se,onCancel:()=>re(!1)}),q&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 xxs:p-3 xs:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 xxs:p-4 xs:p-6 rounded-lg w-full max-w-md",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 text-amber-600 flex items-center gap-2",children:[i.jsx(Fl,{})," Agregar Gasto"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tipo de Gasto"}),i.jsxs("select",{value:Er,onChange:ht=>en(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[i.jsx("option",{value:"combustible",children:" Combustible"}),i.jsx("option",{value:"peaje",children:" Peaje"}),i.jsx("option",{value:"comida",children:" Comida"}),i.jsx("option",{value:"estacionamiento",children:" Estacionamiento"}),i.jsx("option",{value:"mantenimiento",children:" Mantenimiento"}),i.jsx("option",{value:"otro",children:" Otro"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto (RD$)"}),i.jsx("input",{type:"number",step:"0.01",min:"0",value:$r,onChange:ht=>jn(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"0.00"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin (opcional)"}),i.jsx("textarea",{value:fr,onChange:ht=>dn(ht.target.value),className:"w-full p-2 border rounded dark:bg-slate-700 dark:border-slate-600 dark:text-white",rows:"3",placeholder:"Detalles adicionales del gasto..."})]}),i.jsxs("div",{className:"mb-4 pt-2 border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("input",{type:"checkbox",id:"checkNCF",checked:Vn,onChange:ht=>on(ht.target.checked),className:"w-5 h-5 rounded border-slate-300 text-amber-600 focus:ring-amber-500"}),i.jsx("label",{htmlFor:"checkNCF",className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tengo Comprobante Fiscal (NCF)"})]}),Vn&&i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-3 rounded-lg border border-slate-200 dark:border-slate-600 space-y-3 animation-fade-in",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"NCF"}),i.jsx("input",{type:"text",maxLength:11,value:_n,onChange:ht=>Zr(ht.target.value.toUpperCase()),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-500 dark:text-white uppercase",placeholder:"B0100000001"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"RNC"}),i.jsx("input",{type:"text",maxLength:11,value:tn,onChange:ht=>de(ht.target.value),className:"w-full p-2 text-sm border rounded dark:bg-slate-800 dark:border-slate-500 dark:text-white",placeholder:"131234567"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Foto Factura (Requerida)"}),i.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:ht=>Ne(Array.from(ht.target.files)),className:"w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-xs file:font-semibold file:bg-amber-100 file:text-amber-700 hover:file:bg-amber-200"}),ge.length>0&&i.jsxs("p",{className:"text-xs text-emerald-600 mt-1 flex items-center gap-1",children:[i.jsx(Jr,{size:12})," Foto lista para subir"]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>{Y(!1),an()},className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:"Cancelar"}),i.jsxs("button",{onClick:_t,disabled:_||!$r||parseFloat($r)<=0,className:"px-4 py-2 bg-amber-600 text-white rounded hover:bg-amber-700 disabled:opacity-50 flex items-center gap-2",children:[_?i.jsx(bs,{className:"animate-spin",size:16}):i.jsx(Fl,{size:16}),"Registrar Gasto"]})]})]})})]})]})})},k7e=({factura:t,onClose:e,onSuccess:r})=>{var w,_,N;const[n,a]=A.useState(!1),[s,o]=A.useState("pendiente"),[l,c]=A.useState(""),[u,d]=A.useState(""),[h,p]=A.useState([]);if(A.useEffect(()=>{t!=null&&t.id&&(o("pendiente"),d(""))},[t==null?void 0:t.id]),A.useEffect(()=>{s==="nueva_ruta"&&g()},[s]),!t)return null;const g=async()=>{try{const S=await wt.get("/rutas/activas");p(S.data.data||[])}catch(S){console.error("Error al cargar rutas:",S)}},b=async()=>{var S,T;if(s==="nueva_ruta"&&!u){alert("Por favor selecciona una ruta");return}try{a(!0);const R={facturaId:t.id,accion:s,observaciones:l,...s==="nueva_ruta"&&{nuevaRutaId:u}};await wt.post("/facturacion/reasignar",R),r()}catch(R){console.error("Error:",R),alert(((T=(S=R.response)==null?void 0:S.data)==null?void 0:T.error)||"Error al reasignar la factura")}finally{a(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg w-full max-w-lg",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Reasignar Factura"}),i.jsxs("div",{className:"bg-slate-100 p-4 rounded-lg mb-6",children:[i.jsx("h3",{className:"font-medium text-slate-700 mb-2",children:"Informacin de la Factura"}),i.jsxs("div",{className:"space-y-1 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Nmero/Tracking:"}),i.jsx("span",{className:"font-medium",children:t.codigoTracking||t.numeroFactura||t.id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Cliente:"}),i.jsx("span",{className:"font-medium",children:t.cliente||((w=t.destinatario)==null?void 0:w.nombre)||"N/A"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Direccin:"}),i.jsx("span",{className:"font-medium text-right ml-4",children:t.direccion||((_=t.destinatario)==null?void 0:_.direccion)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600",children:"Motivo no entrega:"}),i.jsx("span",{className:"font-medium text-rose-600",children:t.motivoNoEntrega||((N=t.reporteNoEntrega)==null?void 0:N.motivo)||"Sin especificar"})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Qu deseas hacer con esta factura?"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"accion",value:"pendiente",checked:s==="pendiente",onChange:S=>o(S.target.value),className:"mt-1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-slate-900",children:"Marcar como pendiente"}),i.jsx("p",{className:"text-sm text-slate-600",children:"La factura volver al estado pendiente y podr ser asignada a una nueva ruta ms adelante"})]})]}),i.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"accion",value:"nueva_ruta",checked:s==="nueva_ruta",onChange:S=>o(S.target.value),className:"mt-1"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-slate-900",children:"Asignar a otra ruta activa"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Selecciona una ruta activa para reasignar esta factura inmediatamente"})]})]})]})]}),s==="nueva_ruta"&&i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Seleccionar ruta"}),i.jsxs("select",{value:u,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:n,children:[i.jsx("option",{value:"",children:"-- Selecciona una ruta --"}),h.map(S=>i.jsxs("option",{value:S.id,children:[S.nombre," - ",S.empleadoNombre," (",S.facturasEntregadas||0,"/",S.totalFacturas," entregadas)"]},S.id))]}),h.length===0&&i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"No hay rutas activas disponibles"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Observaciones (opcional)"}),i.jsx("textarea",{value:l,onChange:S=>c(S.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Agregar notas o comentarios sobre la reasignacin...",disabled:n})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition",disabled:n,children:"Cancelar"}),i.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:bg-slate-400",disabled:n,children:n?"Procesando...":"Confirmar Reasignacin"})]})]})})})},p_=()=>{const[t,e]=A.useState([]),[r,n]=A.useState(!0),[a,s]=A.useState(!1),[o,l]=A.useState(null),[c,u]=A.useState(""),[d,h]=A.useState(""),[p,g]=A.useState(""),[b,w]=A.useState([]);A.useEffect(()=>{_(),N()},[]);const _=async()=>{try{n(!0);const O=await wt.get("/facturacion/no-entregadas");if(O.data.success)e(O.data.data||[]);else throw new Error(O.data.error||"Error al cargar facturas no entregadas")}catch(O){console.error("Error:",O),alert("Error al cargar facturas no entregadas: "+O.message),e([])}finally{n(!1)}},N=async()=>{try{const O=await wt.get("/rutas");if(O.data.success)w(O.data.data||[]);else throw new Error(O.data.error||"Error al cargar rutas")}catch(O){console.error("Error al cargar rutas:",O),w([])}},S=O=>{l(O),s(!0)},T=()=>{s(!1),l(null)},R=()=>{s(!1),l(null),_()},z=t.filter(O=>{var D,I;return!(c&&O.rutaId!==c||d&&!((D=O.cliente)!=null&&D.toLowerCase().includes(d.toLowerCase()))||p&&!((I=O.fechaIntento)!=null&&I.startsWith(p)))}),G=()=>{u(""),h(""),g("")};return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Facturas No Entregadas"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestiona y reasigna facturas que no pudieron ser entregadas"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-lg font-medium text-slate-800 dark:text-white mb-4",children:"Filtros"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ruta"}),i.jsxs("select",{value:c,onChange:O=>u(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Todas las rutas"}),b.map(O=>i.jsx("option",{value:O.id,children:O.nombre},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cliente"}),i.jsx("input",{type:"text",value:d,onChange:O=>h(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar por nombre de cliente..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Fecha de Intento"}),i.jsx("input",{type:"date",value:p,onChange:O=>g(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),(c||d||p)&&i.jsx("div",{className:"mt-4",children:i.jsx("button",{onClick:G,className:"text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300 font-medium",children:" Limpiar filtros"})})]}),i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-rose-800 dark:text-rose-200",children:[z.length," factura",z.length!==1?"s":""," no entregada",z.length!==1?"s":""]}),i.jsx("p",{className:"text-sm text-rose-600 dark:text-rose-400",children:c||d||p?"Con filtros aplicados":"Total en el sistema"})]})]})}),r?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando facturas..."})]}):z.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-12 text-center",children:[i.jsx("span",{className:"text-6xl mb-4 block",children:""}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:t.length===0?"Excelente! No hay facturas sin entregar":"No se encontraron facturas con los filtros aplicados"}),(c||d||p)&&i.jsx("button",{onClick:G,className:"mt-4 text-indigo-600 dark:text-indigo-400 hover:text-indigo-800 dark:hover:text-indigo-300",children:"Limpiar filtros"})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cdigo Tracking"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Direccin"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Sector"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Motivo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Fecha Intento"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:z.map(O=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white",children:O.codigoTracking||O.numeroFactura||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-700 dark:text-slate-300",children:O.cliente}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:O.direccion}),i.jsx("td",{className:"px-4 py-3 text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:O.sector||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:O.rutaNombre||"Sin asignar"}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:"px-2 py-1 bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200 rounded-full text-xs",children:O.motivoNoEntrega||"Sin motivo especificado"})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:O.fechaIntento?new Date(O.fechaIntento).toLocaleDateString():"-"}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("button",{onClick:()=>S(O),className:"text-sm bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700 transition",children:"Reasignar"})})]},O.id))})]})})}),a&&o&&i.jsx(k7e,{factura:o,onClose:T,onSuccess:R})]})};function uT(){var Te;const{userData:t,user:e}=ca(),[r,n]=A.useState([]),[a,s]=A.useState(!0),[o,l]=A.useState(null),[c,u]=A.useState(!1),[d,h]=A.useState(null),[p,g]=A.useState(!1),[b,w]=A.useState(""),[_,N]=A.useState(""),[S,T]=A.useState(""),[R,z]=A.useState({nombre:"",email:"",emailPersonal:"",password:"",telefono:"",whatsappPersonal:"",whatsappFlota:"",rol:"",companyId:"",activo:!0,cedula:"",banco:"BHD",cuentaBanco:""}),[G,O]=A.useState(null),D=[{valor:"recolector",label:"Recolector",descripcion:"Recoge paquetes en origen"},{valor:"cargador",label:"Cargador",descripcion:"Prepara contenedores para embarque"},{valor:"almacen_eeuu",label:"Encargado de Almacn (EE.UU.)",descripcion:"Gestiona almacn en Estados Unidos"},{valor:"almacen_rd",label:"Encargado de Almacn (RD)",descripcion:"Gestiona almacn en Repblica Dominicana"},{valor:"repartidor",label:"Repartidor",descripcion:"Entrega paquetes a destinatarios"},{valor:"secretaria",label:"Secretaria",descripcion:"Gestin administrativa y atencin"},{valor:"secretaria_usa",label:"Secretaria USA",descripcion:"Call Center y Citas EE.UU."},{valor:"admin_general",label:"Administrador General",descripcion:"Acceso completo al sistema"},{valor:"propietario",label:"Propietario",descripcion:"Dueo de la empresa - Solo visualizacin"}],I=we=>{const q=D.find(Y=>Y.valor===we);return q?q.label:we},[V,P]=A.useState([]);A.useEffect(()=>{F(),(t==null?void 0:t.rol)==="super_admin"&&B()},[t]);const B=async()=>{try{const we=await wt.get("/companies");we.data.success&&P(we.data.data||[])}catch(we){console.error("Error cargando empresas:",we)}},F=async()=>{var we,q,Y;try{if(s(!0),l(null),!t||!e){console.log(" Esperando autenticacin...");return}console.log(" Cargando empleados..."),console.log(" Usuario actual:",{uid:t.uid,rol:t.rol,companyId:t.companyId});let X="/empleados";t.rol==="super_admin"?console.log(" Super Admin - Viendo todos los empleados"):t.companyId?(X+=`?companyId=${t.companyId}`,console.log(" Filtrando por companyId:",t.companyId)):t.rol==="admin_general"&&console.log(" Admin General - Viendo todos los empleados");const re=await wt.get(X,{headers:{"X-User-Id":e.uid}});if(console.log(" Respuesta de empleados:",re.data),re.data.success)n(re.data.data||[]),console.log(` ${((we=re.data.data)==null?void 0:we.length)||0} empleados cargados`);else throw new Error(re.data.error||"Error desconocido")}catch(X){console.error(" Error cargando empleados:",X),l(((Y=(q=X.response)==null?void 0:q.data)==null?void 0:Y.error)||X.message||"Error al cargar empleados")}finally{s(!1)}},ee=we=>{const{name:q,value:Y,type:X,checked:re}=we.target;z(se=>({...se,[q]:X==="checkbox"?re:Y}))},Z=async we=>{var q,Y;we.preventDefault();try{s(!0),l(null);const X=!!d;if(!R.nombre||!R.email||!R.emailPersonal||!X&&!R.password||!R.rol)throw new Error("Por favor completa todos los campos obligatorios");if(t.rol==="super_admin"&&!R.companyId)throw new Error("Debes seleccionar una empresa para el usuario");if((!d||R.password)&&R.password.length<6)throw new Error("La contrasea debe tener al menos 6 caracteres");const re={nombre:R.nombre,email:R.email,emailPersonal:R.emailPersonal,password:R.password,telefono:R.telefono||null,whatsappPersonal:R.whatsappPersonal||null,whatsappFlota:R.whatsappFlota||null,rol:R.rol,companyId:t.rol==="super_admin"?R.companyId:t.companyId||null,cedula:R.cedula,banco:R.banco,cuentaBanco:R.cuentaBanco};console.log(" Enviando datos:",re);let se;d?(se=await wt.put(`/empleados/${d.id}`,re,{headers:{"X-User-Id":e.uid}}),O("Empleado actualizado exitosamente")):(se=await wt.post("/auth/register",re,{headers:{"X-User-Id":e.uid}}),O("Empleado creado exitosamente")),se.data.success&&(u(!1),h(null),z({nombre:"",email:"",emailPersonal:"",password:"",telefono:"",whatsappPersonal:"",whatsappFlota:"",rol:"",companyId:"",activo:!0,cedula:"",banco:"BHD",cuentaBanco:""}),F(),setTimeout(()=>O(null),3e3))}catch(X){console.error(" Error creando empleado:",X),l(((Y=(q=X.response)==null?void 0:q.data)==null?void 0:Y.error)||X.message||"Error al crear empleado")}finally{s(!1)}},ce=async we=>{var q,Y;if(window.confirm("Ests seguro de que deseas eliminar este empleado?"))try{s(!0),await wt.delete(`/empleados/${we}`,{headers:{"X-User-Id":e.uid}}),O("Empleado eliminado exitosamente"),F(),setTimeout(()=>O(null),3e3)}catch(X){console.error("Error eliminando empleado:",X),l(((Y=(q=X.response)==null?void 0:q.data)==null?void 0:Y.error)||"Error al eliminar empleado")}finally{s(!1)}},ne=async(we,q)=>{var Y,X;try{s(!0),await wt.patch(`/empleados/${we}/estado`,{activo:q},{headers:{"X-User-Id":e.uid}}),O(`Empleado ${q?"activado":"desactivado"} exitosamente`),F(),setTimeout(()=>O(null),3e3)}catch(re){console.error("Error cambiando estado:",re),l(((X=(Y=re.response)==null?void 0:Y.data)==null?void 0:X.error)||"Error al cambiar estado")}finally{s(!1)}},ae=async we=>{var Y,X;if(!we.emailPersonal){l("Este empleado no tiene un email personal configurado para recuperacin de contrasea"),setTimeout(()=>l(null),5e3);return}if(window.confirm(`Enviar enlace de recuperacin al email personal de ${we.nombre}?

Se enviar a: ${we.emailPersonal}`))try{s(!0),l(null),(await wt.post("/auth/forgot-password",{email:we.email})).data.success&&(O(`Enlace de recuperacin enviado a ${we.emailPersonal}`),setTimeout(()=>O(null),5e3))}catch(re){console.error("Error enviando enlace de recuperacin:",re),l(((X=(Y=re.response)==null?void 0:Y.data)==null?void 0:X.error)||"Error al enviar el enlace de recuperacin"),setTimeout(()=>l(null),5e3)}finally{s(!1)}},me=r.filter(we=>{const q=we.nombre.toLowerCase().includes(b.toLowerCase())||we.email.toLowerCase().includes(b.toLowerCase()),Y=!_||we.rol===_,X=S===""||S==="activo"&&we.activo||S==="inactivo"&&!we.activo;return q&&Y&&X});return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[i.jsx(od,{className:"w-8 h-8 text-indigo-600"}),"Gestin de Empleados"]}),i.jsx("p",{className:"text-slate-600 mt-2",children:"Administra usuarios y permisos del sistema"})]}),i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold text-amber-800 mb-2",children:"Estado de carga:"}),i.jsxs("div",{className:"text-sm text-amber-700 space-y-1",children:[i.jsxs("p",{children:["Total empleados: ",r.length]}),i.jsxs("p",{children:["Filtrados: ",me.length]}),i.jsxs("p",{children:["Loading: ",a?"S":"No"]}),i.jsxs("p",{children:["User: ",(e==null?void 0:e.email)||"No autenticado"," (",t==null?void 0:t.rol,")"]}),i.jsxs("p",{children:["Companies: ",(t==null?void 0:t.companyId)||"Sin compaa"]})]})]}),G&&i.jsxs("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-lg p-4 flex items-center gap-3",children:[i.jsx(rd,{className:"w-5 h-5 text-emerald-600 flex-shrink-0"}),i.jsx("p",{className:"text-emerald-800",children:G})]}),o&&i.jsxs("div",{className:"mb-6 bg-rose-50 border border-rose-200 rounded-lg p-4 flex items-center gap-3",children:[i.jsx(_s,{className:"w-5 h-5 text-rose-600 flex-shrink-0"}),i.jsx("p",{className:"text-rose-800",children:o}),i.jsx("button",{onClick:()=>l(null),className:"ml-auto text-rose-600 hover:text-rose-700",children:i.jsx(Zn,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow mb-6 p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs("div",{className:"relative",children:[i.jsx($d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),i.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:b,onChange:we=>w(we.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),i.jsxs("select",{value:_,onChange:we=>N(we.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos los roles"}),D.map(we=>i.jsx("option",{value:we.valor,children:we.label},we.valor))]}),i.jsxs("select",{value:S,onChange:we=>T(we.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos los estados"}),i.jsx("option",{value:"activo",children:"Activos"}),i.jsx("option",{value:"inactivo",children:"Inactivos"})]})]}),i.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[i.jsxs("p",{className:"text-sm text-slate-600",children:["Empleados totales: ",i.jsx("span",{className:"font-semibold",children:r.length})," | Despus de filtros: ",i.jsx("span",{className:"font-semibold",children:me.length})]}),i.jsxs("button",{onClick:()=>{h(null),z({nombre:"",email:"",emailPersonal:"",password:"",telefono:"",rol:"",companyId:"",activo:!0,cedula:"",banco:"BHD",cuentaBanco:""}),u(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[i.jsx(Vd,{className:"w-5 h-5"}),"Nuevo Usuario"]})]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),i.jsx("p",{className:"text-slate-600 mt-4",children:"Cargando empleados..."})]}):me.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(od,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No se encontraron empleados"}),i.jsx("p",{className:"text-slate-600",children:b||_||S?"Intenta ajustar los filtros de bsqueda":"Comienza creando tu primer empleado"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Nombre"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Telfono"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Rol"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Estado"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Acciones"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:me.map(we=>{var q;return i.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-indigo-600 font-semibold",children:(q=we.nombre)==null?void 0:q.charAt(0).toUpperCase()})}),i.jsx("div",{className:"ml-4",children:i.jsx("div",{className:"text-sm font-medium text-slate-900",children:we.nombre})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-slate-900",children:we.email})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-slate-900",children:we.telefono||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800",children:I(we.rol)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("button",{onClick:()=>ne(we.id,!we.activo),className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${we.activo?"bg-emerald-100 text-emerald-800 hover:bg-emerald-200":"bg-rose-100 text-rose-800 hover:bg-rose-200"} transition-colors cursor-pointer`,children:we.activo?"Activo":"Inactivo"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>{h(we),z({nombre:we.nombre,email:we.email,emailPersonal:we.emailPersonal||"",password:"",telefono:we.telefono||"",whatsappPersonal:we.whatsappPersonal||"",whatsappFlota:we.whatsappFlota||"",rol:we.rol,companyId:we.companyId,activo:we.activo,cedula:we.cedula||"",banco:we.banco||"BHD",cuentaBanco:we.cuentaBanco||""}),u(!0)},className:"text-indigo-600 hover:text-indigo-900 transition-colors",title:"Editar",children:i.jsx(U1,{className:"w-5 h-5"})}),(t==null?void 0:t.rol)==="super_admin"&&i.jsx("button",{onClick:()=>ae(we),className:"text-amber-600 hover:text-amber-900 transition-colors",title:"Resetear contrasea",children:i.jsx(H3e,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>ce(we.id),className:"text-rose-600 hover:text-rose-900 transition-colors",title:"Eliminar",children:i.jsx(vp,{className:"w-5 h-5"})})]})})]},we.id)})})]})})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900",children:d?"Editar Empleado":"Crear Nuevo Usuario"}),i.jsx("button",{onClick:()=>{u(!1),h(null),l(null)},className:"text-slate-400 hover:text-slate-600",children:i.jsx(Zn,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:Z,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Nombre completo ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"text",name:"nombre",value:R.nombre,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Email de Empresa ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"email",name:"email",value:R.email,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"ejemplo@empresa.com"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Email que el empleado usar para iniciar sesin"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Email Personal ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"email",name:"emailPersonal",value:R.emailPersonal,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"ejemplo@gmail.com"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Email para recuperacin de contrasea"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Contrasea ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:p?"text":"password",name:"password",value:R.password,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent pr-10",required:!d,minLength:6,disabled:!!d,placeholder:d?"Para cambiar contrasea, use el botn de 'Resetear'":""}),i.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:p?i.jsx(u8,{className:"w-5 h-5"}):i.jsx(Su,{className:"w-5 h-5"})})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Mnimo 6 caracteres"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telfono"}),i.jsx("input",{type:"tel",name:"telefono",value:R.telefono,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["WhatsApp Personal ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"tel",name:"whatsappPersonal",value:R.whatsappPersonal,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"+1 809-123-4567"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Nmero personal del empleado"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["WhatsApp de la Flota ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsx("input",{type:"tel",name:"whatsappFlota",value:R.whatsappFlota,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,placeholder:"+1 809-987-6543"}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:" Nmero de la flota asignada al empleado (usado para notificaciones del sistema)"})]}),i.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[i.jsxs("h3",{className:"text-sm font-semibold text-slate-800 mb-3 flex items-center gap-2",children:[i.jsx(Jb,{className:"w-4 h-4 text-indigo-600"}),"Datos para Nmina (Opcional)"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Cdula de Identidad"}),i.jsx("input",{type:"text",name:"cedula",value:R.cedula,onChange:ee,placeholder:"001-0000000-0",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Banco"}),i.jsxs("select",{name:"banco",value:R.banco,onChange:ee,className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"BHD",children:"Banco BHD"}),i.jsx("option",{value:"POPULAR",children:"Banco Popular"}),i.jsx("option",{value:"BANRESERVAS",children:"Banreservas"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"No. Cuenta"}),i.jsx("input",{type:"text",name:"cuentaBanco",value:R.cuentaBanco,onChange:ee,placeholder:"000-0000-00",className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Rol / Puesto ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsxs("select",{name:"rol",value:R.rol,onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Seleccionar rol"}),D.map(we=>i.jsx("option",{value:we.valor,children:we.label},we.valor))]}),R.rol&&i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:(Te=D.find(we=>we.valor===R.rol))==null?void 0:Te.descripcion})]}),(t==null?void 0:t.rol)==="super_admin"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Empresa ",i.jsx("span",{className:"text-rose-500",children:"*"})]}),i.jsxs("select",{name:"companyId",value:R.companyId||"",onChange:ee,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Seleccionar empresa"}),V.map(we=>i.jsx("option",{value:we.id,children:we.nombre||we.name},we.id))]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),l(null)},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),i.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-300 disabled:cursor-not-allowed transition-colors",children:a?"Guardando...":d?"Actualizar":"Crear Usuario"})]})]})]})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var N3={};N3.version="0.18.5";var dse=1252,I7e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],fse=function(t){I7e.indexOf(t)!=-1&&(dse=t)};function O7e(){fse(1252)}var ly=function(t){fse(t)};function R7e(){ly(1200),O7e()}var g_=function(e){return String.fromCharCode(e)},E$=function(e){return String.fromCharCode(e)},E3,h0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function cy(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0,u=0;u<t.length;)r=t.charCodeAt(u++),s=r>>2,n=t.charCodeAt(u++),o=(r&3)<<4|n>>4,a=t.charCodeAt(u++),l=(n&15)<<2|a>>6,c=a&63,isNaN(n)?l=c=64:isNaN(a)&&(c=64),e+=h0.charAt(s)+h0.charAt(o)+h0.charAt(l)+h0.charAt(c);return e}function dh(t){var e="",r=0,n=0,a=0,s=0,o=0,l=0,c=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)s=h0.indexOf(t.charAt(u++)),o=h0.indexOf(t.charAt(u++)),r=s<<2|o>>4,e+=String.fromCharCode(r),l=h0.indexOf(t.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(e+=String.fromCharCode(n)),c=h0.indexOf(t.charAt(u++)),a=(l&3)<<6|c,c!==64&&(e+=String.fromCharCode(a));return e}var sa=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ah=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Vp(t){return sa?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function A$(t){return sa?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Zu=function(e){return sa?Ah(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function nS(t){if(typeof ArrayBuffer>"u")return Zu(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function Sw(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function P7e(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Eo=sa?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ah(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),a=0;for(e=0,r=0;e<t.length;r+=a,++e)if(a=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function D7e(t){for(var e=[],r=0,n=t.length+250,a=Vp(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=t.charCodeAt(++s)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(e.push(a.slice(0,r)),r=0,a=Vp(65535),n=65530)}return e.push(a.slice(0,r)),Eo(e)}var ib=/\u0000/g,x_=/[\u0001-\u0006]/g;function V1(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function nd(t,e){var r=""+t;return r.length>=e?r:Os("0",e-r.length)+r}function q7(t,e){var r=""+t;return r.length>=e?r:Os(" ",e-r.length)+r}function A3(t,e){var r=""+t;return r.length>=e?r:r+Os(" ",e-r.length)}function M7e(t,e){var r=""+Math.round(t);return r.length>=e?r:Os("0",e-r.length)+r}function L7e(t,e){var r=""+t;return r.length>=e?r:Os("0",e-r.length)+r}var S$=Math.pow(2,32);function Pg(t,e){if(t>S$||t<-S$)return M7e(t,e);var r=Math.round(t);return L7e(r,e)}function S3(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var j$=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],dT=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function F7e(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ms={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},T$={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},B7e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function j3(t,e,r){for(var n=t<0?-1:1,a=t*n,s=0,o=1,l=0,c=1,u=0,d=0,h=Math.floor(a);u<e&&(h=Math.floor(a),l=h*o+s,d=h*u+c,!(a-h<5e-8));)a=1/(a-h),s=o,o=l,c=u,u=d;if(d>e&&(u>e?(d=c,l=s):(d=u,l=o)),!r)return[0,n*l,d];var p=Math.floor(n*l/d);return[p,n*l-p*d,d]}function v_(t,e,r){if(t>2958465||t<0)return null;var n=t|0,a=Math.floor(86400*(t-n)),s=0,o=[],l={D:n,T:a,u:86400*(t-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),e&&e.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=G7e(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=s,l}var hse=new Date(1899,11,31,0,0,0),U7e=hse.getTime(),z7e=new Date(1900,2,1,0,0,0);function mse(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=z7e&&(r+=24*60*60*1e3),(r-(U7e+(t.getTimezoneOffset()-hse.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function G7(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function V7e(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function $7e(t){var e=t<0?12:11,r=G7(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function H7e(t){var e=G7(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function q7e(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=$7e(t):e===10?r=t.toFixed(10).substr(0,12):r=H7e(t),G7(V7e(r.toUpperCase()))}function z8(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):q7e(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Y0(14,mse(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function G7e(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function W7e(t,e,r,n){var a="",s=0,o=0,l=r.y,c,u=0;switch(t){case 98:l=r.y+543;case 121:switch(e.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=r.m,u=e.length;break;case 3:return dT[r.m-1][1];case 5:return dT[r.m-1][0];default:return dT[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=r.d,u=e.length;break;case 3:return j$[r.q][0];default:return j$[r.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?nd(r.S,e.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,s=Math.round(o*(r.S+r.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(a=nd(s,2+n),e==="ss"?a.substr(0,2):"."+a.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=l,u=1;break}var d=u>0?nd(c,u):"";return d}function m0(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var pse=/%/g;function K7e(t,e,r){var n=e.replace(pse,""),a=e.length-n.length;return Kf(t,n,r*Math.pow(10,2*a))+Os("%",a)}function X7e(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Kf(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function gse(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+gse(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var xse=/# (\?+)( ?)\/( ?)(\d+)/;function Y7e(t,e,r){var n=parseInt(t[4],10),a=Math.round(e*n),s=Math.floor(a/n),o=a-s*n,l=n;return r+(s===0?"":""+s)+" "+(o===0?Os(" ",t[1].length+1+t[4].length):q7(o,t[1].length)+t[2]+"/"+t[3]+nd(l,t[4].length))}function Z7e(t,e,r){return r+(e===0?"":""+e)+Os(" ",t[1].length+2+t[4].length)}var vse=/^#*0*\.([0#]+)/,bse=/\).*[0#]/,yse=/\(###\) ###\\?-####/;function ll(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function C$(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function k$(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Q7e(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function J7e(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function eu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bse)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?eu("n",n,r):"("+eu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return X7e(t,e,r);if(e.indexOf("%")!==-1)return K7e(t,e,r);if(e.indexOf("E")!==-1)return gse(e,r);if(e.charCodeAt(0)===36)return"$"+eu(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+Pg(c,e.length);if(e.match(/^[#?]+$/))return a=Pg(r,0),a==="0"&&(a=""),a.length>e.length?a:ll(e.substr(0,e.length-a.length))+a;if(s=e.match(xse))return Y7e(s,c,u);if(e.match(/^#+0+$/))return u+Pg(c,e.length-e.indexOf("0"));if(s=e.match(vse))return a=C$(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ll(s[1])).replace(/\.$/,"."+ll(s[1])).replace(/\.(\d*)$/,function(b,w){return"."+w+Os("0",ll(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+C$(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+m0(Pg(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+eu(t,e,-r):m0(""+(Math.floor(r)+Q7e(r,s[1].length)))+"."+nd(k$(r,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return eu(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=V1(eu(t,e.replace(/[\\-]/g,""),r)),o=0,V1(V1(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<a.length?a.charAt(o++):b==="0"?"0":""}));if(e.match(yse))return a=eu(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=j3(c,Math.pow(10,o)-1,!1),a=""+u,d=Kf("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=A3(l[2],o),d.length<s[4].length&&(d=ll(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=j3(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?q7(l[1],o)+s[2]+"/"+s[3]+A3(l[2],o):Os(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=Pg(r,0),e.length<=a.length?a:ll(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=e.indexOf(".")-o,p=e.length-a.length-h;return ll(e.substr(0,h)+a+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=k$(r,s[1].length),r<0?"-"+eu(t,e,-r):m0(J7e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?nd(0,3-b.length):"")+b})+"."+nd(o,s[1].length);switch(e){case"###,##0.00":return eu(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=m0(Pg(c,0));return g!=="0"?u+g:"";case"###,###.00":return eu(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return eu(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function eDe(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Kf(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function tDe(t,e,r){var n=e.replace(pse,""),a=e.length-n.length;return Kf(t,n,r*Math.pow(10,2*a))+Os("%",a)}function wse(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+wse(t,-e);var a=t.indexOf(".");a===-1&&(a=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(e/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+s):r+="E+"+(o-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function bd(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bse)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bd("n",n,r):"("+bd("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return eDe(t,e,r);if(e.indexOf("%")!==-1)return tDe(t,e,r);if(e.indexOf("E")!==-1)return wse(e,r);if(e.charCodeAt(0)===36)return"$"+bd(t,e.substr(e.charAt(1)==" "?2:1),r);var a,s,o,l,c=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+nd(c,e.length);if(e.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>e.length?a:ll(e.substr(0,e.length-a.length))+a;if(s=e.match(xse))return Z7e(s,c,u);if(e.match(/^#+0+$/))return u+nd(c,e.length-e.indexOf("0"));if(s=e.match(vse))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ll(s[1])).replace(/\.$/,"."+ll(s[1])),a=a.replace(/\.(\d*)$/,function(b,w){return"."+w+Os("0",ll(s[1]).length-w.length)}),e.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+m0(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bd(t,e,-r):m0(""+r)+"."+Os("0",s[1].length);if(s=e.match(/^#,#*,#0/))return bd(t,e.replace(/^#,#*,/,""),r);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return a=V1(bd(t,e.replace(/[\\-]/g,""),r)),o=0,V1(V1(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<a.length?a.charAt(o++):b==="0"?"0":""}));if(e.match(yse))return a=bd(t,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),l=j3(c,Math.pow(10,o)-1,!1),a=""+u,d=Kf("n",s[1],l[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=A3(l[2],o),d.length<s[4].length&&(d=ll(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),l=j3(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?q7(l[1],o)+s[2]+"/"+s[3]+A3(l[2],o):Os(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return a=""+r,e.length<=a.length?a:ll(e.substr(0,e.length-a.length))+a;if(s=e.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var h=e.indexOf(".")-o,p=e.length-a.length-h;return ll(e.substr(0,h)+a+e.substr(e.length-p))}if(s=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+bd(t,e,-r):m0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?nd(0,3-b.length):"")+b})+"."+nd(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=m0(""+c);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return bd(t,e.slice(0,e.lastIndexOf(".")),r)+ll(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Kf(t,e,r){return(r|0)===r?bd(t,e,r):eu(t,e,r)}function rDe(t){for(var e=[],r=!1,n=0,a=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(a,n-a),a=n+1}if(e[e.length]=t.substr(a),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var _se=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Nse(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":S3(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(_se))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function nDe(t,e,r,n){for(var a=[],s="",o=0,l="",c="t",u,d,h,p="H";o<t.length;)switch(l=t.charAt(o)){case"G":if(!S3(t,o))throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(h);a[a.length]={t:"t",v:s},++o;break;case"\\":var g=t.charAt(++o),b=g==="("||g===")"?g:"t";a[a.length]={t:b,v:g},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(u==null&&(u=v_(e,r,t.charAt(o+1)==="2"),u==null))return"";a[a.length]={t:"X",v:t.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=v_(e,r),u==null))return"";for(s=l;++o<t.length&&t.charAt(o).toLowerCase()===l;)s+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),a[a.length]={t:l,v:s},c=l;break;case"A":case"a":case"":var w={t:l,v:l};if(u==null&&(u=v_(e,r)),t.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(w.v=u.H>=12?"P":"A"),w.t="T",p="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(w.v=u.H>=12?"PM":"AM"),w.t="T",o+=5,p="h"):t.substr(o,5).toUpperCase()==="/"?(u!=null&&(w.v=u.H>=12?"":""),w.t="T",o+=5,p="h"):(w.t="t",++o),u==null&&w.t==="T")return"";a[a.length]=w,c=l;break;case"[":for(s=l;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(_se)){if(u==null&&(u=v_(e,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Nse(t)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=l;++o<t.length&&(l=t.charAt(o))==="0";)s+=l;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=l;++o<t.length&&"0#?.,E+-%".indexOf(l=t.charAt(o))>-1;)s+=l;a[a.length]={t:"n",v:s};break;case"?":for(s=l;t.charAt(++o)===l;)s+=l;a[a.length]={t:l,v:s},c=l;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=l;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+t);a[a.length]={t:"t",v:l},++o;break}var _=0,N=0,S;for(o=a.length-1,c="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=p,c="h",_<1&&(_=1);break;case"s":(S=a[o].v.match(/\.0+$/))&&(N=Math.max(N,S[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":c=a[o].t;break;case"m":c==="s"&&(a[o].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&a[o].v.match(/[Hh]/)&&(_=1),_<2&&a[o].v.match(/[Mm]/)&&(_=2),_<3&&a[o].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var T="",R;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=W7e(a[o].t.charCodeAt(0),a[o].v,u,N),a[o].t="t";break;case"n":case"?":for(R=o+1;a[R]!=null&&((l=a[R].t)==="?"||l==="D"||(l===" "||l==="t")&&a[R+1]!=null&&(a[R+1].t==="?"||a[R+1].t==="t"&&a[R+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[R].v==="/"||a[R].v===" "&&a[R+1]!=null&&a[R+1].t=="?"));)a[o].v+=a[R].v,a[R]={v:"",t:";"},++R;T+=a[o].v,o=R-1;break;case"G":a[o].t="t",a[o].v=z8(e,r);break}var z="",G,O;if(T.length>0){T.charCodeAt(0)==40?(G=e<0&&T.charCodeAt(0)===45?-e:e,O=Kf("n",T,G)):(G=e<0&&n>1?-e:e,O=Kf("n",T,G),G<0&&a[0]&&a[0].t=="t"&&(O=O.substr(1),a[0].v="-"+a[0].v)),R=O.length-1;var D=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){D=o;break}var I=a.length;if(D===a.length&&O.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(R>=a[o].v.length-1?(R-=a[o].v.length,a[o].v=O.substr(R+1,a[o].v.length)):R<0?a[o].v="":(a[o].v=O.substr(0,R+1),R=-1),a[o].t="t",I=o);R>=0&&I<a.length&&(a[I].v=O.substr(0,R+1)+a[I].v)}else if(D!==a.length&&O.indexOf("E")===-1){for(R=O.indexOf(".")-1,o=D;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(d=a[o].v.indexOf(".")>-1&&o===D?a[o].v.indexOf(".")-1:a[o].v.length-1,z=a[o].v.substr(d+1);d>=0;--d)R>=0&&(a[o].v.charAt(d)==="0"||a[o].v.charAt(d)==="#")&&(z=O.charAt(R--)+z);a[o].v=z,a[o].t="t",I=o}for(R>=0&&I<a.length&&(a[I].v=O.substr(0,R+1)+a[I].v),R=O.indexOf(".")+1,o=D;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==D)){for(d=a[o].v.indexOf(".")>-1&&o===D?a[o].v.indexOf(".")+1:0,z=a[o].v.substr(0,d);d<a[o].v.length;++d)R<O.length&&(z+=O.charAt(R++));a[o].v=z,a[o].t="t",I=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(G=n>1&&e<0&&o>0&&a[o-1].v==="-"?-e:e,a[o].v=Kf(a[o].t,a[o].v,G),a[o].t="t");var V="";for(o=0;o!==a.length;++o)a[o]!=null&&(V+=a[o].v);return V}var I$=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function O$(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function aDe(t,e){var r=rDe(t),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(I$),l=r[1].match(I$);return O$(e,o)?[n,r[0]]:O$(e,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,s]}function Y0(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ms)[t],n==null&&(n=r.table&&r.table[T$[t]]||Ms[T$[t]]),n==null&&(n=B7e[t]||"General");break}if(S3(n,0))return z8(e,r);e instanceof Date&&(e=mse(e,r.date1904));var a=aDe(n,e);if(S3(a[1]))return z8(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return nDe(a[1],e,r,a[0])}function Ese(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ms[r]==null){e<0&&(e=r);continue}if(Ms[r]==t){e=r;break}}e<0&&(e=391)}return Ms[e]=t,e}function aS(t){for(var e=0;e!=392;++e)t[e]!==void 0&&Ese(t[e],e)}function sS(){Ms=F7e()}var Ase=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function sDe(t){var e=typeof t=="number"?Ms[t]:t;return e=e.replace(Ase,"(\\d+)"),new RegExp("^"+e+"$")}function iDe(t,e,r){var n=-1,a=-1,s=-1,o=-1,l=-1,c=-1;(e.match(Ase)||[]).forEach(function(h,p){var g=parseInt(r[p+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":s=g;break;case"h":o=g;break;case"s":c=g;break;case"m":o>=0?l=g:a=g;break}}),c>=0&&l==-1&&a>=0&&(l=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var oDe=function(){var t={};t.version="1.2.0";function e(){for(var O=0,D=new Array(256),I=0;I!=256;++I)O=I,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,D[I]=O;return typeof Int32Array<"u"?new Int32Array(D):D}var r=e();function n(O){var D=0,I=0,V=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(V=0;V!=256;++V)P[V]=O[V];for(V=0;V!=256;++V)for(I=O[V],D=256+V;D<4096;D+=256)I=P[D]=I>>>8^O[I&255];var B=[];for(V=1;V!=16;++V)B[V-1]=typeof Int32Array<"u"?P.subarray(V*256,V*256+256):P.slice(V*256,V*256+256);return B}var a=n(r),s=a[0],o=a[1],l=a[2],c=a[3],u=a[4],d=a[5],h=a[6],p=a[7],g=a[8],b=a[9],w=a[10],_=a[11],N=a[12],S=a[13],T=a[14];function R(O,D){for(var I=D^-1,V=0,P=O.length;V<P;)I=I>>>8^r[(I^O.charCodeAt(V++))&255];return~I}function z(O,D){for(var I=D^-1,V=O.length-15,P=0;P<V;)I=T[O[P++]^I&255]^S[O[P++]^I>>8&255]^N[O[P++]^I>>16&255]^_[O[P++]^I>>>24]^w[O[P++]]^b[O[P++]]^g[O[P++]]^p[O[P++]]^h[O[P++]]^d[O[P++]]^u[O[P++]]^c[O[P++]]^l[O[P++]]^o[O[P++]]^s[O[P++]]^r[O[P++]];for(V+=15;P<V;)I=I>>>8^r[(I^O[P++])&255];return~I}function G(O,D){for(var I=D^-1,V=0,P=O.length,B=0,F=0;V<P;)B=O.charCodeAt(V++),B<128?I=I>>>8^r[(I^B)&255]:B<2048?(I=I>>>8^r[(I^(192|B>>6&31))&255],I=I>>>8^r[(I^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,F=O.charCodeAt(V++)&1023,I=I>>>8^r[(I^(240|B>>8&7))&255],I=I>>>8^r[(I^(128|B>>2&63))&255],I=I>>>8^r[(I^(128|F>>6&15|(B&3)<<4))&255],I=I>>>8^r[(I^(128|F&63))&255]):(I=I>>>8^r[(I^(224|B>>12&15))&255],I=I>>>8^r[(I^(128|B>>6&63))&255],I=I>>>8^r[(I^(128|B&63))&255]);return~I}return t.table=r,t.bstr=R,t.buf=z,t.str=G,t}(),Ia=function(){var e={};e.version="1.2.1";function r(de,ge){for(var Ne=de.split("/"),Ee=ge.split("/"),ke=0,Pe=0,lt=Math.min(Ne.length,Ee.length);ke<lt;++ke){if(Pe=Ne[ke].length-Ee[ke].length)return Pe;if(Ne[ke]!=Ee[ke])return Ne[ke]<Ee[ke]?-1:1}return Ne.length-Ee.length}function n(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:n(de.slice(0,-1));var ge=de.lastIndexOf("/");return ge===-1?de:de.slice(0,ge+1)}function a(de){if(de.charAt(de.length-1)=="/")return a(de.slice(0,-1));var ge=de.lastIndexOf("/");return ge===-1?de:de.slice(ge+1)}function s(de,ge){typeof ge=="string"&&(ge=new Date(ge));var Ne=ge.getHours();Ne=Ne<<6|ge.getMinutes(),Ne=Ne<<5|ge.getSeconds()>>>1,de.write_shift(2,Ne);var Ee=ge.getFullYear()-1980;Ee=Ee<<4|ge.getMonth()+1,Ee=Ee<<5|ge.getDate(),de.write_shift(2,Ee)}function o(de){var ge=de.read_shift(2)&65535,Ne=de.read_shift(2)&65535,Ee=new Date,ke=Ne&31;Ne>>>=5;var Pe=Ne&15;Ne>>>=4,Ee.setMilliseconds(0),Ee.setFullYear(Ne+1980),Ee.setMonth(Pe-1),Ee.setDate(ke);var lt=ge&31;ge>>>=5;var jt=ge&63;return ge>>>=6,Ee.setHours(ge),Ee.setMinutes(jt),Ee.setSeconds(lt<<1),Ee}function l(de){xc(de,0);for(var ge={},Ne=0;de.l<=de.length-4;){var Ee=de.read_shift(2),ke=de.read_shift(2),Pe=de.l+ke,lt={};switch(Ee){case 21589:Ne=de.read_shift(1),Ne&1&&(lt.mtime=de.read_shift(4)),ke>5&&(Ne&2&&(lt.atime=de.read_shift(4)),Ne&4&&(lt.ctime=de.read_shift(4))),lt.mtime&&(lt.mt=new Date(lt.mtime*1e3));break}de.l=Pe,ge[Ee]=lt}return ge}var c;function u(){return c||(c={})}function d(de,ge){if(de[0]==80&&de[1]==75)return ze(de,ge);if((de[0]|32)==109&&(de[1]|32)==105)return fr(de,ge);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var Ne=3,Ee=512,ke=0,Pe=0,lt=0,jt=0,rt=0,Ae=[],Ge=de.slice(0,512);xc(Ge,0);var dt=h(Ge);switch(Ne=dt[0],Ne){case 3:Ee=512;break;case 4:Ee=4096;break;case 0:if(dt[1]==0)return ze(de,ge);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ne)}Ee!==512&&(Ge=de.slice(0,Ee),xc(Ge,28));var At=de.slice(0,Ee);p(Ge,Ne);var yt=Ge.read_shift(4,"i");if(Ne===3&&yt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+yt);Ge.l+=4,lt=Ge.read_shift(4,"i"),Ge.l+=4,Ge.chk("00100000","Mini Stream Cutoff Size: "),jt=Ge.read_shift(4,"i"),ke=Ge.read_shift(4,"i"),rt=Ge.read_shift(4,"i"),Pe=Ge.read_shift(4,"i");for(var Ct=-1,Xt=0;Xt<109&&(Ct=Ge.read_shift(4,"i"),!(Ct<0));++Xt)Ae[Xt]=Ct;var vr=g(de,Ee);_(rt,Pe,vr,Ee,Ae);var _t=S(vr,lt,Ae,Ee);_t[lt].name="!Directory",ke>0&&jt!==F&&(_t[jt].name="!MiniFAT"),_t[Ae[0]].name="!FAT",_t.fat_addrs=Ae,_t.ssz=Ee;var Hr={},Fr=[],Ua=[],wi=[];T(lt,_t,vr,Fr,ke,Hr,Ua,jt),b(Ua,wi,Fr),Fr.shift();var fn={FileIndex:Ua,FullPaths:wi};return ge&&ge.raw&&(fn.raw={header:At,sectors:vr}),fn}function h(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(ee,"Header Signature: "),de.l+=16;var ge=de.read_shift(2,"u");return[de.read_shift(2,"u"),ge]}function p(de,ge){var Ne=9;switch(de.l+=2,Ne=de.read_shift(2)){case 9:if(ge!=3)throw new Error("Sector Shift: Expected 9 saw "+Ne);break;case 12:if(ge!=4)throw new Error("Sector Shift: Expected 12 saw "+Ne);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ne)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function g(de,ge){for(var Ne=Math.ceil(de.length/ge)-1,Ee=[],ke=1;ke<Ne;++ke)Ee[ke-1]=de.slice(ke*ge,(ke+1)*ge);return Ee[Ne-1]=de.slice(Ne*ge),Ee}function b(de,ge,Ne){for(var Ee=0,ke=0,Pe=0,lt=0,jt=0,rt=Ne.length,Ae=[],Ge=[];Ee<rt;++Ee)Ae[Ee]=Ge[Ee]=Ee,ge[Ee]=Ne[Ee];for(;jt<Ge.length;++jt)Ee=Ge[jt],ke=de[Ee].L,Pe=de[Ee].R,lt=de[Ee].C,Ae[Ee]===Ee&&(ke!==-1&&Ae[ke]!==ke&&(Ae[Ee]=Ae[ke]),Pe!==-1&&Ae[Pe]!==Pe&&(Ae[Ee]=Ae[Pe])),lt!==-1&&(Ae[lt]=Ee),ke!==-1&&Ee!=Ae[Ee]&&(Ae[ke]=Ae[Ee],Ge.lastIndexOf(ke)<jt&&Ge.push(ke)),Pe!==-1&&Ee!=Ae[Ee]&&(Ae[Pe]=Ae[Ee],Ge.lastIndexOf(Pe)<jt&&Ge.push(Pe));for(Ee=1;Ee<rt;++Ee)Ae[Ee]===Ee&&(Pe!==-1&&Ae[Pe]!==Pe?Ae[Ee]=Ae[Pe]:ke!==-1&&Ae[ke]!==ke&&(Ae[Ee]=Ae[ke]));for(Ee=1;Ee<rt;++Ee)if(de[Ee].type!==0){if(jt=Ee,jt!=Ae[jt])do jt=Ae[jt],ge[Ee]=ge[jt]+"/"+ge[Ee];while(jt!==0&&Ae[jt]!==-1&&jt!=Ae[jt]);Ae[Ee]=-1}for(ge[0]+="/",Ee=1;Ee<rt;++Ee)de[Ee].type!==2&&(ge[Ee]+="/")}function w(de,ge,Ne){for(var Ee=de.start,ke=de.size,Pe=[],lt=Ee;Ne&&ke>0&&lt>=0;)Pe.push(ge.slice(lt*B,lt*B+B)),ke-=B,lt=Km(Ne,lt*4);return Pe.length===0?Rt(0):Eo(Pe).slice(0,de.size)}function _(de,ge,Ne,Ee,ke){var Pe=F;if(de===F){if(ge!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var lt=Ne[de],jt=(Ee>>>2)-1;if(!lt)return;for(var rt=0;rt<jt&&(Pe=Km(lt,rt*4))!==F;++rt)ke.push(Pe);_(Km(lt,Ee-4),ge-1,Ne,Ee,ke)}}function N(de,ge,Ne,Ee,ke){var Pe=[],lt=[];ke||(ke=[]);var jt=Ee-1,rt=0,Ae=0;for(rt=ge;rt>=0;){ke[rt]=!0,Pe[Pe.length]=rt,lt.push(de[rt]);var Ge=Ne[Math.floor(rt*4/Ee)];if(Ae=rt*4&jt,Ee<4+Ae)throw new Error("FAT boundary crossed: "+rt+" 4 "+Ee);if(!de[Ge])break;rt=Km(de[Ge],Ae)}return{nodes:Pe,data:U$([lt])}}function S(de,ge,Ne,Ee){var ke=de.length,Pe=[],lt=[],jt=[],rt=[],Ae=Ee-1,Ge=0,dt=0,At=0,yt=0;for(Ge=0;Ge<ke;++Ge)if(jt=[],At=Ge+ge,At>=ke&&(At-=ke),!lt[At]){rt=[];var Ct=[];for(dt=At;dt>=0;){Ct[dt]=!0,lt[dt]=!0,jt[jt.length]=dt,rt.push(de[dt]);var Xt=Ne[Math.floor(dt*4/Ee)];if(yt=dt*4&Ae,Ee<4+yt)throw new Error("FAT boundary crossed: "+dt+" 4 "+Ee);if(!de[Xt]||(dt=Km(de[Xt],yt),Ct[dt]))break}Pe[At]={nodes:jt,data:U$([rt])}}return Pe}function T(de,ge,Ne,Ee,ke,Pe,lt,jt){for(var rt=0,Ae=Ee.length?2:0,Ge=ge[de].data,dt=0,At=0,yt;dt<Ge.length;dt+=128){var Ct=Ge.slice(dt,dt+128);xc(Ct,64),At=Ct.read_shift(2),yt=Z7(Ct,0,At-Ae),Ee.push(yt);var Xt={name:yt,type:Ct.read_shift(1),color:Ct.read_shift(1),L:Ct.read_shift(4,"i"),R:Ct.read_shift(4,"i"),C:Ct.read_shift(4,"i"),clsid:Ct.read_shift(16),state:Ct.read_shift(4,"i"),start:0,size:0},vr=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);vr!==0&&(Xt.ct=R(Ct,Ct.l-8));var _t=Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2)+Ct.read_shift(2);_t!==0&&(Xt.mt=R(Ct,Ct.l-8)),Xt.start=Ct.read_shift(4,"i"),Xt.size=Ct.read_shift(4,"i"),Xt.size<0&&Xt.start<0&&(Xt.size=Xt.type=0,Xt.start=F,Xt.name=""),Xt.type===5?(rt=Xt.start,ke>0&&rt!==F&&(ge[rt].name="!StreamData")):Xt.size>=4096?(Xt.storage="fat",ge[Xt.start]===void 0&&(ge[Xt.start]=N(Ne,Xt.start,ge.fat_addrs,ge.ssz)),ge[Xt.start].name=Xt.name,Xt.content=ge[Xt.start].data.slice(0,Xt.size)):(Xt.storage="minifat",Xt.size<0?Xt.size=0:rt!==F&&Xt.start!==F&&ge[rt]&&(Xt.content=w(Xt,ge[rt].data,(ge[jt]||{}).data))),Xt.content&&xc(Xt.content,0),Pe[yt]=Xt,lt.push(Xt)}}function R(de,ge){return new Date((wc(de,ge+4)/1e7*Math.pow(2,32)+wc(de,ge)/1e7-11644473600)*1e3)}function z(de,ge){return u(),d(c.readFileSync(de),ge)}function G(de,ge){var Ne=ge&&ge.type;switch(Ne||sa&&Buffer.isBuffer(de)&&(Ne="buffer"),Ne||"base64"){case"file":return z(de,ge);case"base64":return d(Zu(dh(de)),ge);case"binary":return d(Zu(de),ge)}return d(de,ge)}function O(de,ge){var Ne=ge||{},Ee=Ne.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=Ee+"/",de.FileIndex[0]={name:Ee,type:5}),Ne.CLSID&&(de.FileIndex[0].clsid=Ne.CLSID),D(de)}function D(de){var ge="Sh33tJ5";if(!Ia.find(de,"/"+ge)){var Ne=Rt(4);Ne[0]=55,Ne[1]=Ne[3]=50,Ne[2]=54,de.FileIndex.push({name:ge,type:2,content:Ne,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+ge),I(de)}}function I(de,ge){O(de);for(var Ne=!1,Ee=!1,ke=de.FullPaths.length-1;ke>=0;--ke){var Pe=de.FileIndex[ke];switch(Pe.type){case 0:Ee?Ne=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:Ee=!0,isNaN(Pe.R*Pe.L*Pe.C)&&(Ne=!0),Pe.R>-1&&Pe.L>-1&&Pe.R==Pe.L&&(Ne=!0);break;default:Ne=!0;break}}if(!(!Ne&&!ge)){var lt=new Date(1987,1,19),jt=0,rt=Object.create?Object.create(null):{},Ae=[];for(ke=0;ke<de.FullPaths.length;++ke)rt[de.FullPaths[ke]]=!0,de.FileIndex[ke].type!==0&&Ae.push([de.FullPaths[ke],de.FileIndex[ke]]);for(ke=0;ke<Ae.length;++ke){var Ge=n(Ae[ke][0]);Ee=rt[Ge],Ee||(Ae.push([Ge,{name:a(Ge).replace("/",""),type:1,clsid:ce,ct:lt,mt:lt,content:null}]),rt[Ge]=!0)}for(Ae.sort(function(yt,Ct){return r(yt[0],Ct[0])}),de.FullPaths=[],de.FileIndex=[],ke=0;ke<Ae.length;++ke)de.FullPaths[ke]=Ae[ke][0],de.FileIndex[ke]=Ae[ke][1];for(ke=0;ke<Ae.length;++ke){var dt=de.FileIndex[ke],At=de.FullPaths[ke];if(dt.name=a(At).replace("/",""),dt.L=dt.R=dt.C=-(dt.color=1),dt.size=dt.content?dt.content.length:0,dt.start=0,dt.clsid=dt.clsid||ce,ke===0)dt.C=Ae.length>1?1:-1,dt.size=0,dt.type=5;else if(At.slice(-1)=="/"){for(jt=ke+1;jt<Ae.length&&n(de.FullPaths[jt])!=At;++jt);for(dt.C=jt>=Ae.length?-1:jt,jt=ke+1;jt<Ae.length&&n(de.FullPaths[jt])!=n(At);++jt);dt.R=jt>=Ae.length?-1:jt,dt.type=1}else n(de.FullPaths[ke+1]||"")==n(At)&&(dt.R=ke+1),dt.type=2}}}function V(de,ge){var Ne=ge||{};if(Ne.fileType=="mad")return dn(de,Ne);switch(I(de),Ne.fileType){case"zip":return St(de,Ne)}var Ee=function(yt){for(var Ct=0,Xt=0,vr=0;vr<yt.FileIndex.length;++vr){var _t=yt.FileIndex[vr];if(_t.content){var Hr=_t.content.length;Hr>0&&(Hr<4096?Ct+=Hr+63>>6:Xt+=Hr+511>>9)}}for(var Fr=yt.FullPaths.length+3>>2,Ua=Ct+7>>3,wi=Ct+127>>7,fn=Ua+Xt+Fr+wi,nn=fn+127>>7,an=nn<=109?0:Math.ceil((nn-109)/127);fn+nn+an+127>>7>nn;)an=++nn<=109?0:Math.ceil((nn-109)/127);var Wa=[1,an,nn,wi,Fr,Xt,Ct,0];return yt.FileIndex[0].size=Ct<<6,Wa[7]=(yt.FileIndex[0].start=Wa[0]+Wa[1]+Wa[2]+Wa[3]+Wa[4]+Wa[5])+(Wa[6]+7>>3),Wa}(de),ke=Rt(Ee[7]<<9),Pe=0,lt=0;{for(Pe=0;Pe<8;++Pe)ke.write_shift(1,Z[Pe]);for(Pe=0;Pe<8;++Pe)ke.write_shift(2,0);for(ke.write_shift(2,62),ke.write_shift(2,3),ke.write_shift(2,65534),ke.write_shift(2,9),ke.write_shift(2,6),Pe=0;Pe<3;++Pe)ke.write_shift(2,0);for(ke.write_shift(4,0),ke.write_shift(4,Ee[2]),ke.write_shift(4,Ee[0]+Ee[1]+Ee[2]+Ee[3]-1),ke.write_shift(4,0),ke.write_shift(4,4096),ke.write_shift(4,Ee[3]?Ee[0]+Ee[1]+Ee[2]-1:F),ke.write_shift(4,Ee[3]),ke.write_shift(-4,Ee[1]?Ee[0]-1:F),ke.write_shift(4,Ee[1]),Pe=0;Pe<109;++Pe)ke.write_shift(-4,Pe<Ee[2]?Ee[1]+Pe:-1)}if(Ee[1])for(lt=0;lt<Ee[1];++lt){for(;Pe<236+lt*127;++Pe)ke.write_shift(-4,Pe<Ee[2]?Ee[1]+Pe:-1);ke.write_shift(-4,lt===Ee[1]-1?F:lt+1)}var jt=function(yt){for(lt+=yt;Pe<lt-1;++Pe)ke.write_shift(-4,Pe+1);yt&&(++Pe,ke.write_shift(-4,F))};for(lt=Pe=0,lt+=Ee[1];Pe<lt;++Pe)ke.write_shift(-4,ne.DIFSECT);for(lt+=Ee[2];Pe<lt;++Pe)ke.write_shift(-4,ne.FATSECT);jt(Ee[3]),jt(Ee[4]);for(var rt=0,Ae=0,Ge=de.FileIndex[0];rt<de.FileIndex.length;++rt)Ge=de.FileIndex[rt],Ge.content&&(Ae=Ge.content.length,!(Ae<4096)&&(Ge.start=lt,jt(Ae+511>>9)));for(jt(Ee[6]+7>>3);ke.l&511;)ke.write_shift(-4,ne.ENDOFCHAIN);for(lt=Pe=0,rt=0;rt<de.FileIndex.length;++rt)Ge=de.FileIndex[rt],Ge.content&&(Ae=Ge.content.length,!(!Ae||Ae>=4096)&&(Ge.start=lt,jt(Ae+63>>6)));for(;ke.l&511;)ke.write_shift(-4,ne.ENDOFCHAIN);for(Pe=0;Pe<Ee[4]<<2;++Pe){var dt=de.FullPaths[Pe];if(!dt||dt.length===0){for(rt=0;rt<17;++rt)ke.write_shift(4,0);for(rt=0;rt<3;++rt)ke.write_shift(4,-1);for(rt=0;rt<12;++rt)ke.write_shift(4,0);continue}Ge=de.FileIndex[Pe],Pe===0&&(Ge.start=Ge.size?Ge.start-1:F);var At=Pe===0&&Ne.root||Ge.name;if(Ae=2*(At.length+1),ke.write_shift(64,At,"utf16le"),ke.write_shift(2,Ae),ke.write_shift(1,Ge.type),ke.write_shift(1,Ge.color),ke.write_shift(-4,Ge.L),ke.write_shift(-4,Ge.R),ke.write_shift(-4,Ge.C),Ge.clsid)ke.write_shift(16,Ge.clsid,"hex");else for(rt=0;rt<4;++rt)ke.write_shift(4,0);ke.write_shift(4,Ge.state||0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,Ge.start),ke.write_shift(4,Ge.size),ke.write_shift(4,0)}for(Pe=1;Pe<de.FileIndex.length;++Pe)if(Ge=de.FileIndex[Pe],Ge.size>=4096)if(ke.l=Ge.start+1<<9,sa&&Buffer.isBuffer(Ge.content))Ge.content.copy(ke,ke.l,0,Ge.size),ke.l+=Ge.size+511&-512;else{for(rt=0;rt<Ge.size;++rt)ke.write_shift(1,Ge.content[rt]);for(;rt&511;++rt)ke.write_shift(1,0)}for(Pe=1;Pe<de.FileIndex.length;++Pe)if(Ge=de.FileIndex[Pe],Ge.size>0&&Ge.size<4096)if(sa&&Buffer.isBuffer(Ge.content))Ge.content.copy(ke,ke.l,0,Ge.size),ke.l+=Ge.size+63&-64;else{for(rt=0;rt<Ge.size;++rt)ke.write_shift(1,Ge.content[rt]);for(;rt&63;++rt)ke.write_shift(1,0)}if(sa)ke.l=ke.length;else for(;ke.l<ke.length;)ke.write_shift(1,0);return ke}function P(de,ge){var Ne=de.FullPaths.map(function(rt){return rt.toUpperCase()}),Ee=Ne.map(function(rt){var Ae=rt.split("/");return Ae[Ae.length-(rt.slice(-1)=="/"?2:1)]}),ke=!1;ge.charCodeAt(0)===47?(ke=!0,ge=Ne[0].slice(0,-1)+ge):ke=ge.indexOf("/")!==-1;var Pe=ge.toUpperCase(),lt=ke===!0?Ne.indexOf(Pe):Ee.indexOf(Pe);if(lt!==-1)return de.FileIndex[lt];var jt=!Pe.match(x_);for(Pe=Pe.replace(ib,""),jt&&(Pe=Pe.replace(x_,"!")),lt=0;lt<Ne.length;++lt)if((jt?Ne[lt].replace(x_,"!"):Ne[lt]).replace(ib,"")==Pe||(jt?Ee[lt].replace(x_,"!"):Ee[lt]).replace(ib,"")==Pe)return de.FileIndex[lt];return null}var B=64,F=-2,ee="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],ce="00000000000000000000000000000000",ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:F,FREESECT:-1,HEADER_SIGNATURE:ee,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ce,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ae(de,ge,Ne){u();var Ee=V(de,Ne);c.writeFileSync(ge,Ee)}function me(de){for(var ge=new Array(de.length),Ne=0;Ne<de.length;++Ne)ge[Ne]=String.fromCharCode(de[Ne]);return ge.join("")}function Te(de,ge){var Ne=V(de,ge);switch(ge&&ge.type||"buffer"){case"file":return u(),c.writeFileSync(ge.filename,Ne),Ne;case"binary":return typeof Ne=="string"?Ne:me(Ne);case"base64":return cy(typeof Ne=="string"?Ne:me(Ne));case"buffer":if(sa)return Buffer.isBuffer(Ne)?Ne:Ah(Ne);case"array":return typeof Ne=="string"?Zu(Ne):Ne}return Ne}var we;function q(de){try{var ge=de.InflateRaw,Ne=new ge;if(Ne._processChunk(new Uint8Array([3,0]),Ne._finishFlushFlag),Ne.bytesRead)we=de;else throw new Error("zlib does not expose bytesRead")}catch(Ee){console.error("cannot use native zlib: "+(Ee.message||Ee))}}function Y(de,ge){if(!we)return at(de,ge);var Ne=we.InflateRaw,Ee=new Ne,ke=Ee._processChunk(de.slice(de.l),Ee._finishFlushFlag);return de.l+=Ee.bytesRead,ke}function X(de){return we?we.deflateRawSync(de):Ft(de)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],se=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function je(de){var ge=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(ge>>16|ge>>8|ge)&255}for(var pe=typeof Uint8Array<"u",Oe=pe?new Uint8Array(256):[],qe=0;qe<256;++qe)Oe[qe]=je(qe);function Ue(de,ge){var Ne=Oe[de&255];return ge<=8?Ne>>>8-ge:(Ne=Ne<<8|Oe[de>>8&255],ge<=16?Ne>>>16-ge:(Ne=Ne<<8|Oe[de>>16&255],Ne>>>24-ge))}function Me(de,ge){var Ne=ge&7,Ee=ge>>>3;return(de[Ee]|(Ne<=6?0:de[Ee+1]<<8))>>>Ne&3}function Be(de,ge){var Ne=ge&7,Ee=ge>>>3;return(de[Ee]|(Ne<=5?0:de[Ee+1]<<8))>>>Ne&7}function ve(de,ge){var Ne=ge&7,Ee=ge>>>3;return(de[Ee]|(Ne<=4?0:de[Ee+1]<<8))>>>Ne&15}function Ht(de,ge){var Ne=ge&7,Ee=ge>>>3;return(de[Ee]|(Ne<=3?0:de[Ee+1]<<8))>>>Ne&31}function mt(de,ge){var Ne=ge&7,Ee=ge>>>3;return(de[Ee]|(Ne<=1?0:de[Ee+1]<<8))>>>Ne&127}function Ut(de,ge,Ne){var Ee=ge&7,ke=ge>>>3,Pe=(1<<Ne)-1,lt=de[ke]>>>Ee;return Ne<8-Ee||(lt|=de[ke+1]<<8-Ee,Ne<16-Ee)||(lt|=de[ke+2]<<16-Ee,Ne<24-Ee)||(lt|=de[ke+3]<<24-Ee),lt&Pe}function et(de,ge,Ne){var Ee=ge&7,ke=ge>>>3;return Ee<=5?de[ke]|=(Ne&7)<<Ee:(de[ke]|=Ne<<Ee&255,de[ke+1]=(Ne&7)>>8-Ee),ge+3}function er(de,ge,Ne){var Ee=ge&7,ke=ge>>>3;return Ne=(Ne&1)<<Ee,de[ke]|=Ne,ge+1}function Ve(de,ge,Ne){var Ee=ge&7,ke=ge>>>3;return Ne<<=Ee,de[ke]|=Ne&255,Ne>>>=8,de[ke+1]=Ne,ge+8}function zt(de,ge,Ne){var Ee=ge&7,ke=ge>>>3;return Ne<<=Ee,de[ke]|=Ne&255,Ne>>>=8,de[ke+1]=Ne&255,de[ke+2]=Ne>>>8,ge+16}function Wt(de,ge){var Ne=de.length,Ee=2*Ne>ge?2*Ne:ge+5,ke=0;if(Ne>=ge)return de;if(sa){var Pe=A$(Ee);if(de.copy)de.copy(Pe);else for(;ke<de.length;++ke)Pe[ke]=de[ke];return Pe}else if(pe){var lt=new Uint8Array(Ee);if(lt.set)lt.set(de);else for(;ke<Ne;++ke)lt[ke]=de[ke];return lt}return de.length=Ee,de}function Yt(de){for(var ge=new Array(de),Ne=0;Ne<de;++Ne)ge[Ne]=0;return ge}function ar(de,ge,Ne){var Ee=1,ke=0,Pe=0,lt=0,jt=0,rt=de.length,Ae=pe?new Uint16Array(32):Yt(32);for(Pe=0;Pe<32;++Pe)Ae[Pe]=0;for(Pe=rt;Pe<Ne;++Pe)de[Pe]=0;rt=de.length;var Ge=pe?new Uint16Array(rt):Yt(rt);for(Pe=0;Pe<rt;++Pe)Ae[ke=de[Pe]]++,Ee<ke&&(Ee=ke),Ge[Pe]=0;for(Ae[0]=0,Pe=1;Pe<=Ee;++Pe)Ae[Pe+16]=jt=jt+Ae[Pe-1]<<1;for(Pe=0;Pe<rt;++Pe)jt=de[Pe],jt!=0&&(Ge[Pe]=Ae[jt+16]++);var dt=0;for(Pe=0;Pe<rt;++Pe)if(dt=de[Pe],dt!=0)for(jt=Ue(Ge[Pe],Ee)>>Ee-dt,lt=(1<<Ee+4-dt)-1;lt>=0;--lt)ge[jt|lt<<dt]=dt&15|Pe<<4;return Ee}var Xe=pe?new Uint16Array(512):Yt(512),qt=pe?new Uint16Array(32):Yt(32);if(!pe){for(var kt=0;kt<512;++kt)Xe[kt]=0;for(kt=0;kt<32;++kt)qt[kt]=0}(function(){for(var de=[],ge=0;ge<32;ge++)de.push(5);ar(de,qt,32);var Ne=[];for(ge=0;ge<=143;ge++)Ne.push(8);for(;ge<=255;ge++)Ne.push(9);for(;ge<=279;ge++)Ne.push(7);for(;ge<=287;ge++)Ne.push(8);ar(Ne,Xe,288)})();var gt=function(){for(var ge=pe?new Uint8Array(32768):[],Ne=0,Ee=0;Ne<Ce.length-1;++Ne)for(;Ee<Ce[Ne+1];++Ee)ge[Ee]=Ne;for(;Ee<32768;++Ee)ge[Ee]=29;var ke=pe?new Uint8Array(259):[];for(Ne=0,Ee=0;Ne<se.length-1;++Ne)for(;Ee<se[Ne+1];++Ee)ke[Ee]=Ne;function Pe(jt,rt){for(var Ae=0;Ae<jt.length;){var Ge=Math.min(65535,jt.length-Ae),dt=Ae+Ge==jt.length;for(rt.write_shift(1,+dt),rt.write_shift(2,Ge),rt.write_shift(2,~Ge&65535);Ge-- >0;)rt[rt.l++]=jt[Ae++]}return rt.l}function lt(jt,rt){for(var Ae=0,Ge=0,dt=pe?new Uint16Array(32768):[];Ge<jt.length;){var At=Math.min(65535,jt.length-Ge);if(At<10){for(Ae=et(rt,Ae,+(Ge+At==jt.length)),Ae&7&&(Ae+=8-(Ae&7)),rt.l=Ae/8|0,rt.write_shift(2,At),rt.write_shift(2,~At&65535);At-- >0;)rt[rt.l++]=jt[Ge++];Ae=rt.l*8;continue}Ae=et(rt,Ae,+(Ge+At==jt.length)+2);for(var yt=0;At-- >0;){var Ct=jt[Ge];yt=(yt<<5^Ct)&32767;var Xt=-1,vr=0;if((Xt=dt[yt])&&(Xt|=Ge&-32768,Xt>Ge&&(Xt-=32768),Xt<Ge))for(;jt[Xt+vr]==jt[Ge+vr]&&vr<250;)++vr;if(vr>2){Ct=ke[vr],Ct<=22?Ae=Ve(rt,Ae,Oe[Ct+1]>>1)-1:(Ve(rt,Ae,3),Ae+=5,Ve(rt,Ae,Oe[Ct-23]>>5),Ae+=3);var _t=Ct<8?0:Ct-4>>2;_t>0&&(zt(rt,Ae,vr-se[Ct]),Ae+=_t),Ct=ge[Ge-Xt],Ae=Ve(rt,Ae,Oe[Ct]>>3),Ae-=3;var Hr=Ct<4?0:Ct-2>>1;Hr>0&&(zt(rt,Ae,Ge-Xt-Ce[Ct]),Ae+=Hr);for(var Fr=0;Fr<vr;++Fr)dt[yt]=Ge&32767,yt=(yt<<5^jt[Ge])&32767,++Ge;At-=vr-1}else Ct<=143?Ct=Ct+48:Ae=er(rt,Ae,1),Ae=Ve(rt,Ae,Oe[Ct]),dt[yt]=Ge&32767,++Ge}Ae=Ve(rt,Ae,0)-1}return rt.l=(Ae+7)/8|0,rt.l}return function(rt,Ae){return rt.length<8?Pe(rt,Ae):lt(rt,Ae)}}();function Ft(de){var ge=Rt(50+Math.floor(de.length*1.1)),Ne=gt(de,ge);return ge.slice(0,Ne)}var Vt=pe?new Uint16Array(32768):Yt(32768),Nr=pe?new Uint16Array(32768):Yt(32768),sr=pe?new Uint16Array(128):Yt(128),it=1,ir=1;function be(de,ge){var Ne=Ht(de,ge)+257;ge+=5;var Ee=Ht(de,ge)+1;ge+=5;var ke=ve(de,ge)+4;ge+=4;for(var Pe=0,lt=pe?new Uint8Array(19):Yt(19),jt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],rt=1,Ae=pe?new Uint8Array(8):Yt(8),Ge=pe?new Uint8Array(8):Yt(8),dt=lt.length,At=0;At<ke;++At)lt[re[At]]=Pe=Be(de,ge),rt<Pe&&(rt=Pe),Ae[Pe]++,ge+=3;var yt=0;for(Ae[0]=0,At=1;At<=rt;++At)Ge[At]=yt=yt+Ae[At-1]<<1;for(At=0;At<dt;++At)(yt=lt[At])!=0&&(jt[At]=Ge[yt]++);var Ct=0;for(At=0;At<dt;++At)if(Ct=lt[At],Ct!=0){yt=Oe[jt[At]]>>8-Ct;for(var Xt=(1<<7-Ct)-1;Xt>=0;--Xt)sr[yt|Xt<<Ct]=Ct&7|At<<3}var vr=[];for(rt=1;vr.length<Ne+Ee;)switch(yt=sr[mt(de,ge)],ge+=yt&7,yt>>>=3){case 16:for(Pe=3+Me(de,ge),ge+=2,yt=vr[vr.length-1];Pe-- >0;)vr.push(yt);break;case 17:for(Pe=3+Be(de,ge),ge+=3;Pe-- >0;)vr.push(0);break;case 18:for(Pe=11+mt(de,ge),ge+=7;Pe-- >0;)vr.push(0);break;default:vr.push(yt),rt<yt&&(rt=yt);break}var _t=vr.slice(0,Ne),Hr=vr.slice(Ne);for(At=Ne;At<286;++At)_t[At]=0;for(At=Ee;At<30;++At)Hr[At]=0;return it=ar(_t,Vt,286),ir=ar(Hr,Nr,30),ge}function Ze(de,ge){if(de[0]==3&&!(de[1]&3))return[Vp(ge),2];for(var Ne=0,Ee=0,ke=A$(ge||1<<18),Pe=0,lt=ke.length>>>0,jt=0,rt=0;!(Ee&1);){if(Ee=Be(de,Ne),Ne+=3,Ee>>>1)Ee>>1==1?(jt=9,rt=5):(Ne=be(de,Ne),jt=it,rt=ir);else{Ne&7&&(Ne+=8-(Ne&7));var Ae=de[Ne>>>3]|de[(Ne>>>3)+1]<<8;if(Ne+=32,Ae>0)for(!ge&&lt<Pe+Ae&&(ke=Wt(ke,Pe+Ae),lt=ke.length);Ae-- >0;)ke[Pe++]=de[Ne>>>3],Ne+=8;continue}for(;;){!ge&&lt<Pe+32767&&(ke=Wt(ke,Pe+32767),lt=ke.length);var Ge=Ut(de,Ne,jt),dt=Ee>>>1==1?Xe[Ge]:Vt[Ge];if(Ne+=dt&15,dt>>>=4,!(dt>>>8&255))ke[Pe++]=dt;else{if(dt==256)break;dt-=257;var At=dt<8?0:dt-4>>2;At>5&&(At=0);var yt=Pe+se[dt];At>0&&(yt+=Ut(de,Ne,At),Ne+=At),Ge=Ut(de,Ne,rt),dt=Ee>>>1==1?qt[Ge]:Nr[Ge],Ne+=dt&15,dt>>>=4;var Ct=dt<4?0:dt-2>>1,Xt=Ce[dt];for(Ct>0&&(Xt+=Ut(de,Ne,Ct),Ne+=Ct),!ge&&lt<yt&&(ke=Wt(ke,yt+100),lt=ke.length);Pe<yt;)ke[Pe]=ke[Pe-Xt],++Pe}}}return ge?[ke,Ne+7>>>3]:[ke.slice(0,Pe),Ne+7>>>3]}function at(de,ge){var Ne=de.slice(de.l||0),Ee=Ze(Ne,ge);return de.l+=Ee[1],Ee[0]}function Qe(de,ge){if(de)typeof console<"u"&&console.error(ge);else throw new Error(ge)}function ze(de,ge){var Ne=de;xc(Ne,0);var Ee=[],ke=[],Pe={FileIndex:Ee,FullPaths:ke};O(Pe,{root:ge.root});for(var lt=Ne.length-4;(Ne[lt]!=80||Ne[lt+1]!=75||Ne[lt+2]!=5||Ne[lt+3]!=6)&&lt>=0;)--lt;Ne.l=lt+4,Ne.l+=4;var jt=Ne.read_shift(2);Ne.l+=6;var rt=Ne.read_shift(4);for(Ne.l=rt,lt=0;lt<jt;++lt){Ne.l+=20;var Ae=Ne.read_shift(4),Ge=Ne.read_shift(4),dt=Ne.read_shift(2),At=Ne.read_shift(2),yt=Ne.read_shift(2);Ne.l+=8;var Ct=Ne.read_shift(4),Xt=l(Ne.slice(Ne.l+dt,Ne.l+dt+At));Ne.l+=dt+At+yt;var vr=Ne.l;Ne.l=Ct+4,st(Ne,Ae,Ge,Pe,Xt),Ne.l=vr}return Pe}function st(de,ge,Ne,Ee,ke){de.l+=2;var Pe=de.read_shift(2),lt=de.read_shift(2),jt=o(de);if(Pe&8257)throw new Error("Unsupported ZIP encryption");for(var rt=de.read_shift(4),Ae=de.read_shift(4),Ge=de.read_shift(4),dt=de.read_shift(2),At=de.read_shift(2),yt="",Ct=0;Ct<dt;++Ct)yt+=String.fromCharCode(de[de.l++]);if(At){var Xt=l(de.slice(de.l,de.l+At));(Xt[21589]||{}).mt&&(jt=Xt[21589].mt),((ke||{})[21589]||{}).mt&&(jt=ke[21589].mt)}de.l+=At;var vr=de.slice(de.l,de.l+Ae);switch(lt){case 8:vr=Y(de,Ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+lt)}var _t=!1;Pe&8&&(rt=de.read_shift(4),rt==134695760&&(rt=de.read_shift(4),_t=!0),Ae=de.read_shift(4),Ge=de.read_shift(4)),Ae!=ge&&Qe(_t,"Bad compressed size: "+ge+" != "+Ae),Ge!=Ne&&Qe(_t,"Bad uncompressed size: "+Ne+" != "+Ge),on(Ee,yt,vr,{unsafe:!0,mt:jt})}function St(de,ge){var Ne=ge||{},Ee=[],ke=[],Pe=Rt(1),lt=Ne.compression?8:0,jt=0,rt=0,Ae=0,Ge=0,dt=0,At=de.FullPaths[0],yt=At,Ct=de.FileIndex[0],Xt=[],vr=0;for(rt=1;rt<de.FullPaths.length;++rt)if(yt=de.FullPaths[rt].slice(At.length),Ct=de.FileIndex[rt],!(!Ct.size||!Ct.content||yt=="Sh33tJ5")){var _t=Ge,Hr=Rt(yt.length);for(Ae=0;Ae<yt.length;++Ae)Hr.write_shift(1,yt.charCodeAt(Ae)&127);Hr=Hr.slice(0,Hr.l),Xt[dt]=oDe.buf(Ct.content,0);var Fr=Ct.content;lt==8&&(Fr=X(Fr)),Pe=Rt(30),Pe.write_shift(4,67324752),Pe.write_shift(2,20),Pe.write_shift(2,jt),Pe.write_shift(2,lt),Ct.mt?s(Pe,Ct.mt):Pe.write_shift(4,0),Pe.write_shift(-4,Xt[dt]),Pe.write_shift(4,Fr.length),Pe.write_shift(4,Ct.content.length),Pe.write_shift(2,Hr.length),Pe.write_shift(2,0),Ge+=Pe.length,Ee.push(Pe),Ge+=Hr.length,Ee.push(Hr),Ge+=Fr.length,Ee.push(Fr),Pe=Rt(46),Pe.write_shift(4,33639248),Pe.write_shift(2,0),Pe.write_shift(2,20),Pe.write_shift(2,jt),Pe.write_shift(2,lt),Pe.write_shift(4,0),Pe.write_shift(-4,Xt[dt]),Pe.write_shift(4,Fr.length),Pe.write_shift(4,Ct.content.length),Pe.write_shift(2,Hr.length),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(4,0),Pe.write_shift(4,_t),vr+=Pe.l,ke.push(Pe),vr+=Hr.length,ke.push(Hr),++dt}return Pe=Rt(22),Pe.write_shift(4,101010256),Pe.write_shift(2,0),Pe.write_shift(2,0),Pe.write_shift(2,dt),Pe.write_shift(2,dt),Pe.write_shift(4,vr),Pe.write_shift(4,Ge),Pe.write_shift(2,0),Eo([Eo(Ee),Eo(ke),Pe])}var tr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function It(de,ge){if(de.ctype)return de.ctype;var Ne=de.name||"",Ee=Ne.match(/\.([^\.]+)$/);return Ee&&tr[Ee[1]]||ge&&(Ee=(Ne=ge).match(/[\.\\]([^\.\\])+$/),Ee&&tr[Ee[1]])?tr[Ee[1]]:"application/octet-stream"}function Er(de){for(var ge=cy(de),Ne=[],Ee=0;Ee<ge.length;Ee+=76)Ne.push(ge.slice(Ee,Ee+76));return Ne.join(`\r
`)+`\r
`}function en(de){var ge=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ae){var Ge=Ae.charCodeAt(0).toString(16).toUpperCase();return"="+(Ge.length==1?"0"+Ge:Ge)});ge=ge.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ge.charAt(0)==`
`&&(ge="=0D"+ge.slice(1)),ge=ge.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ne=[],Ee=ge.split(`\r
`),ke=0;ke<Ee.length;++ke){var Pe=Ee[ke];if(Pe.length==0){Ne.push("");continue}for(var lt=0;lt<Pe.length;){var jt=76,rt=Pe.slice(lt,lt+jt);rt.charAt(jt-1)=="="?jt--:rt.charAt(jt-2)=="="?jt-=2:rt.charAt(jt-3)=="="&&(jt-=3),rt=Pe.slice(lt,lt+jt),lt+=jt,lt<Pe.length&&(rt+="="),Ne.push(rt)}}return Ne.join(`\r
`)}function $r(de){for(var ge=[],Ne=0;Ne<de.length;++Ne){for(var Ee=de[Ne];Ne<=de.length&&Ee.charAt(Ee.length-1)=="=";)Ee=Ee.slice(0,Ee.length-1)+de[++Ne];ge.push(Ee)}for(var ke=0;ke<ge.length;++ke)ge[ke]=ge[ke].replace(/[=][0-9A-Fa-f]{2}/g,function(Pe){return String.fromCharCode(parseInt(Pe.slice(1),16))});return Zu(ge.join(`\r
`))}function jn(de,ge,Ne){for(var Ee="",ke="",Pe="",lt,jt=0;jt<10;++jt){var rt=ge[jt];if(!rt||rt.match(/^\s*$/))break;var Ae=rt.match(/^(.*?):\s*([^\s].*)$/);if(Ae)switch(Ae[1].toLowerCase()){case"content-location":Ee=Ae[2].trim();break;case"content-type":Pe=Ae[2].trim();break;case"content-transfer-encoding":ke=Ae[2].trim();break}}switch(++jt,ke.toLowerCase()){case"base64":lt=Zu(dh(ge.slice(jt).join("")));break;case"quoted-printable":lt=$r(ge.slice(jt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ke)}var Ge=on(de,Ee.slice(Ne.length),lt,{unsafe:!0});Pe&&(Ge.ctype=Pe)}function fr(de,ge){if(me(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ne=ge&&ge.root||"",Ee=(sa&&Buffer.isBuffer(de)?de.toString("binary"):me(de)).split(`\r
`),ke=0,Pe="";for(ke=0;ke<Ee.length;++ke)if(Pe=Ee[ke],!!/^Content-Location:/i.test(Pe)&&(Pe=Pe.slice(Pe.indexOf("file")),Ne||(Ne=Pe.slice(0,Pe.lastIndexOf("/")+1)),Pe.slice(0,Ne.length)!=Ne))for(;Ne.length>0&&(Ne=Ne.slice(0,Ne.length-1),Ne=Ne.slice(0,Ne.lastIndexOf("/")+1),Pe.slice(0,Ne.length)!=Ne););var lt=(Ee[1]||"").match(/boundary="(.*?)"/);if(!lt)throw new Error("MAD cannot find boundary");var jt="--"+(lt[1]||""),rt=[],Ae=[],Ge={FileIndex:rt,FullPaths:Ae};O(Ge);var dt,At=0;for(ke=0;ke<Ee.length;++ke){var yt=Ee[ke];yt!==jt&&yt!==jt+"--"||(At++&&jn(Ge,Ee.slice(dt,ke),Ne),dt=ke)}return Ge}function dn(de,ge){var Ne=ge||{},Ee=Ne.boundary||"SheetJS";Ee="------="+Ee;for(var ke=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ee.slice(2)+'"',"","",""],Pe=de.FullPaths[0],lt=Pe,jt=de.FileIndex[0],rt=1;rt<de.FullPaths.length;++rt)if(lt=de.FullPaths[rt].slice(Pe.length),jt=de.FileIndex[rt],!(!jt.size||!jt.content||lt=="Sh33tJ5")){lt=lt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vr){return"_x"+vr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vr){return"_u"+vr.charCodeAt(0).toString(16)+"_"});for(var Ae=jt.content,Ge=sa&&Buffer.isBuffer(Ae)?Ae.toString("binary"):me(Ae),dt=0,At=Math.min(1024,Ge.length),yt=0,Ct=0;Ct<=At;++Ct)(yt=Ge.charCodeAt(Ct))>=32&&yt<128&&++dt;var Xt=dt>=At*4/5;ke.push(Ee),ke.push("Content-Location: "+(Ne.root||"file:///C:/SheetJS/")+lt),ke.push("Content-Transfer-Encoding: "+(Xt?"quoted-printable":"base64")),ke.push("Content-Type: "+It(jt,lt)),ke.push(""),ke.push(Xt?en(Ge):Er(Ge))}return ke.push(Ee+`--\r
`),ke.join(`\r
`)}function Vn(de){var ge={};return O(ge,de),ge}function on(de,ge,Ne,Ee){var ke=Ee&&Ee.unsafe;ke||O(de);var Pe=!ke&&Ia.find(de,ge);if(!Pe){var lt=de.FullPaths[0];ge.slice(0,lt.length)==lt?lt=ge:(lt.slice(-1)!="/"&&(lt+="/"),lt=(lt+ge).replace("//","/")),Pe={name:a(ge),type:2},de.FileIndex.push(Pe),de.FullPaths.push(lt),ke||Ia.utils.cfb_gc(de)}return Pe.content=Ne,Pe.size=Ne?Ne.length:0,Ee&&(Ee.CLSID&&(Pe.clsid=Ee.CLSID),Ee.mt&&(Pe.mt=Ee.mt),Ee.ct&&(Pe.ct=Ee.ct)),Pe}function _n(de,ge){O(de);var Ne=Ia.find(de,ge);if(Ne){for(var Ee=0;Ee<de.FileIndex.length;++Ee)if(de.FileIndex[Ee]==Ne)return de.FileIndex.splice(Ee,1),de.FullPaths.splice(Ee,1),!0}return!1}function Zr(de,ge,Ne){O(de);var Ee=Ia.find(de,ge);if(Ee){for(var ke=0;ke<de.FileIndex.length;++ke)if(de.FileIndex[ke]==Ee)return de.FileIndex[ke].name=a(Ne),de.FullPaths[ke]=Ne,!0}return!1}function tn(de){I(de,!0)}return e.find=P,e.read=G,e.parse=d,e.write=Te,e.writeFile=ae,e.utils={cfb_new:Vn,cfb_add:on,cfb_del:_n,cfb_mov:Zr,cfb_gc:tn,ReadShift:lb,CheckField:$se,prep_blob:xc,bconcat:Eo,use_zlib:q,_deflateRaw:Ft,_inflateRaw:at,consts:ne},e}();function lDe(t){return typeof t=="string"?nS(t):Array.isArray(t)?P7e(t):t}function jw(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=nS(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?dy(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var a=new Blob([lDe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,t);if(typeof saveAs<"u")return saveAs(a,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(t);return l.open("w"),l.encoding="binary",Array.isArray(e)&&(e=Sw(e)),l.write(e),l.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+t)}function Co(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function R$(t,e){for(var r=[],n=Co(t),a=0;a!==n.length;++a)r[t[n[a]][e]]==null&&(r[t[n[a]][e]]=n[a]);return r}function W7(t){for(var e=[],r=Co(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function iS(t){for(var e=[],r=Co(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function cDe(t){for(var e=[],r=Co(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var T3=new Date(1899,11,30,0,0,0);function Xl(t,e){var r=t.getTime(),n=T3.getTime()+(t.getTimezoneOffset()-T3.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Sse=new Date,uDe=T3.getTime()+(Sse.getTimezoneOffset()-T3.getTimezoneOffset())*6e4,P$=Sse.getTimezoneOffset();function jse(t){var e=new Date;return e.setTime(t*24*60*60*1e3+uDe),e.getTimezoneOffset()!==P$&&e.setTime(e.getTime()+(e.getTimezoneOffset()-P$)*6e4),e}var D$=new Date("2017-02-19T19:06:09.000Z"),Tse=isNaN(D$.getFullYear())?new Date("2/19/17"):D$,dDe=Tse.getFullYear()==2017;function bl(t,e){var r=new Date(t);if(dDe)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Tse.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function oS(t,e){if(sa&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=t.length;++a)n.push(String.fromCharCode(t[a]));return n.join("")}function Yl(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Yl(t[r]));return e}function Os(t,e){for(var r="";r.length<e;)r+=t;return r}function Xf(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(e=Number(n)))?e/r:e}var fDe=["january","february","march","april","may","june","july","august","september","october","november","december"];function uy(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),a=e.getMonth(),s=e.getDate();if(isNaN(s))return r;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&fDe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function kn(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return sa?n=Ah(r):n=D7e(r),Ia.utils.cfb_add(t,e,n)}Ia.utils.cfb_add(t,e,r)}else t.file(e,r)}function K7(){return Ia.utils.cfb_new()}var bi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,hDe={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},X7=W7(hDe),Y7=/[&<>'"]/g,mDe=/[\u0000-\u0008\u000b-\u001f]/g;function Ea(t){var e=t+"";return e.replace(Y7,function(r){return X7[r]}).replace(mDe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function M$(t){return Ea(t).replace(/ /g,"_x0020_")}var Cse=/[\u0000-\u001f]/g;function pDe(t){var e=t+"";return e.replace(Y7,function(r){return X7[r]}).replace(/\n/g,"<br/>").replace(Cse,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function gDe(t){var e=t+"";return e.replace(Y7,function(r){return X7[r]}).replace(Cse,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function xDe(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function vDe(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function fT(t){for(var e="",r=0,n=0,a=0,s=0,o=0,l=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(a=t.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}o=t.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(l>>>10&1023)),e+=String.fromCharCode(56320+(l&1023))}return e}function L$(t){var e=Vp(2*t.length),r,n,a=1,s=0,o=0,l;for(n=0;n<t.length;n+=a)a=1,(l=t.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(t.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=r%256,e[s++]=r>>>8;return e.slice(0,s).toString("ucs2")}function F$(t){return Ah(t,"binary").toString("utf8")}var b_="foo bar baz",ob=sa&&(F$(b_)==fT(b_)&&F$||L$(b_)==fT(b_)&&L$)||fT,dy=sa?function(t){return Ah(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,a=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(a>>18&7))),e.push(String.fromCharCode(144+(a>>12&63))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},bDe=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<t.length;++a)n=n.replace(t[a][0],t[a][1]);return n}}(),kse=/(^\s|\s$|\n)/;function Ao(t,e){return"<"+t+(e.match(kse)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function fy(t){return Co(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function hr(t,e,r){return"<"+t+(r!=null?fy(r):"")+(e!=null?(e.match(kse)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function V8(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function yDe(t,e){switch(typeof t){case"string":var r=hr("vt:lpwstr",Ea(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return hr((t|0)==t?"vt:i4":"vt:r8",Ea(String(t)));case"boolean":return hr("vt:bool",t?"true":"false")}if(t instanceof Date)return hr("vt:filetime",V8(t));throw new Error("Unable to serialize "+t)}var Qi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},hv=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],yc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function wDe(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),a=t[e+6]&15,s=5;s>=0;--s)a=a*256+t[e+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function _De(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,a=0,s=0,o=n?-e:e;isFinite(o)?o==0?a=s=0:(a=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(e)?26985:0);for(var l=0;l<=5;++l,s/=256)t[r+l]=s&255;t[r+6]=(a&15)<<4|s&15,t[r+7]=a>>4|n}var B$=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var a=0,s=t[0][n].length;a<s;a+=r)e.push.apply(e,t[0][n].slice(a,a+r));return e},U$=sa?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ah(e)})):B$(t)}:B$,z$=function(t,e,r){for(var n=[],a=e;a<r;a+=2)n.push(String.fromCharCode(S2(t,a)));return n.join("").replace(ib,"")},Z7=sa?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(ib,""):z$(t,e,r)}:z$,V$=function(t,e,r){for(var n=[],a=e;a<e+r;++a)n.push(("0"+t[a].toString(16)).slice(-2));return n.join("")},Ise=sa?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):V$(t,e,r)}:V$,$$=function(t,e,r){for(var n=[],a=e;a<r;a++)n.push(String.fromCharCode(e1(t,a)));return n.join("")},Tw=sa?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):$$(e,r,n)}:$$,Ose=function(t,e){var r=wc(t,e);return r>0?Tw(t,e+4,e+4+r-1):""},Rse=Ose,Pse=function(t,e){var r=wc(t,e);return r>0?Tw(t,e+4,e+4+r-1):""},Dse=Pse,Mse=function(t,e){var r=2*wc(t,e);return r>0?Tw(t,e+4,e+4+r-1):""},Lse=Mse,Fse=function(e,r){var n=wc(e,r);return n>0?Z7(e,r+4,r+4+n):""},Bse=Fse,Use=function(t,e){var r=wc(t,e);return r>0?Tw(t,e+4,e+4+r):""},zse=Use,Vse=function(t,e){return wDe(t,e)},C3=Vse,Q7=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};sa&&(Rse=function(e,r){if(!Buffer.isBuffer(e))return Ose(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Dse=function(e,r){if(!Buffer.isBuffer(e))return Pse(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Lse=function(e,r){if(!Buffer.isBuffer(e))return Mse(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Bse=function(e,r){if(!Buffer.isBuffer(e))return Fse(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},zse=function(e,r){if(!Buffer.isBuffer(e))return Use(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},C3=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Vse(e,r)},Q7=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var e1=function(t,e){return t[e]},S2=function(t,e){return t[e+1]*256+t[e]},NDe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},wc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Km=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},EDe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function lb(t,e){var r="",n,a,s=[],o,l,c,u;switch(e){case"dbcs":if(u=this.l,sa&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(c=0;c<t;++c)r+=String.fromCharCode(S2(this,u)),u+=2;t*=2;break;case"utf8":r=Tw(this,this.l,this.l+t);break;case"utf16le":t*=2,r=Z7(this,this.l,this.l+t);break;case"wstr":return lb.call(this,t,"dbcs");case"lpstr-ansi":r=Rse(this,this.l),t=4+wc(this,this.l);break;case"lpstr-cp":r=Dse(this,this.l),t=4+wc(this,this.l);break;case"lpwstr":r=Lse(this,this.l),t=4+2*wc(this,this.l);break;case"lpp4":t=4+wc(this,this.l),r=Bse(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+wc(this,this.l),r=zse(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(o=e1(this,this.l+t++))!==0;)s.push(g_(o));r=s.join("");break;case"_wstr":for(t=0,r="";(o=S2(this,this.l+t))!==0;)s.push(g_(o)),t+=2;t+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=e1(this,u),this.l=u+1,l=lb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(g_(S2(this,u))),u+=2}r=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=t;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=e1(this,u),this.l=u+1,l=lb.call(this,t-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+l;s.push(g_(e1(this,u))),u+=1}r=s.join("");break;default:switch(t){case 1:return n=e1(this,this.l),this.l++,n;case 2:return n=(e==="i"?NDe:S2)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Km:EDe)(this,this.l),this.l+=4,n):(a=wc(this,this.l),this.l+=4,a);case 8:case-8:if(e==="f")return t==8?a=C3(this,this.l):a=C3([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;t=8;case 16:r=Ise(this,this.l,t);break}}return this.l+=t,r}var ADe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},SDe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},jDe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function TDe(t,e,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=e.length;++a)jDe(this,e.charCodeAt(a),this.l+2*a);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=e.length;++a)this[this.l+a]=e.charCodeAt(a)&255;n=e.length}else if(r==="hex"){for(;a<t;++a)this[this.l++]=parseInt(e.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+t,this.length);for(a=0;a<Math.min(e.length,t);++a){var o=e.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,ADe(this,e,this.l);break;case 8:if(n=8,r==="f"){_De(this,e,this.l);break}case 16:break;case-4:n=4,SDe(this,e,this.l);break}return this.l+=n,this}function $se(t,e){var r=Ise(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function xc(t,e){t.l=e,t.read_shift=lb,t.chk=$se,t.write_shift=TDe}function Kd(t,e){t.l+=e}function Rt(t){var e=Vp(t);return xc(e,0),e}function Gl(){var t=[],e=sa?256:2048,r=function(u){var d=Rt(u);return xc(d,0),d},n=r(e),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,e)))},o=function(){return a(),Eo(t)},l=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:l,end:o,_bufs:t}}function rr(t,e,r,n){var a=+e,s;if(!isNaN(a)){n||(n=wUe[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var o=t.next(s);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&Q7(r)&&t.push(r)}}function cb(t,e,r){var n=Yl(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function H$(t,e,r){var n=Yl(t);return n.s=cb(n.s,e.s,r),n.e=cb(n.e,e.s,r),n}function ub(t,e){if(t.cRel&&t.c<0)for(t=Yl(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Yl(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=Sa(t);return!t.cRel&&t.cRel!=null&&(r=IDe(r)),!t.rRel&&t.rRel!=null&&(r=CDe(r)),r}function hT(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ho(t.s.c)+":"+(t.e.cRel?"":"$")+Ho(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+To(t.s.r)+":"+(t.e.rRel?"":"$")+To(t.e.r):ub(t.s,e.biff)+":"+ub(t.e,e.biff)}function J7(t){return parseInt(kDe(t),10)-1}function To(t){return""+(t+1)}function CDe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function kDe(t){return t.replace(/\$(\d+)$/,"$1")}function eD(t){for(var e=ODe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Ho(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function IDe(t){return t.replace(/^([A-Z])/,"$$$1")}function ODe(t){return t.replace(/^\$([A-Z])/,"$1")}function RDe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ji(t){for(var e=0,r=0,n=0;n<t.length;++n){var a=t.charCodeAt(n);a>=48&&a<=57?e=10*e+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:e-1}}function Sa(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Bc(t){var e=t.indexOf(":");return e==-1?{s:Ji(t),e:Ji(t)}:{s:Ji(t.slice(0,e)),e:Ji(t.slice(e+1))}}function gi(t,e){return typeof e>"u"||typeof e=="number"?gi(t.s,t.e):(typeof t!="string"&&(t=Sa(t)),typeof e!="string"&&(e=Sa(e)),t==e?t:t+":"+e)}function ns(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=t.length;for(r=0;n<s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.s.c=--r,r=0;n<s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(e.s.r=--r,n===s||a!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=s&&!((a=t.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(e.e.c=--r,r=0;n!=s&&!((a=t.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return e.e.r=--r,e}function q$(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Y0(t.z,r?Xl(e):e)}catch{}try{return t.w=Y0((t.XF||{}).numFmtId||(r?14:0),r?Xl(e):e)}catch{return""+e}}function fh(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Cw[t.v]||t.v:e==null?q$(t,t.v):q$(t,e))}function hg(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Hse(t,e,r){var n=r||{},a=t?Array.isArray(t):n.dense,s=t||(a?[]:{}),o=0,l=0;if(s&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Ji(n.origin):n.origin;o=c.r,l=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=ns(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(u.e.r=o=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=e[h].length;++p)if(!(typeof e[h][p]>"u")){var g={v:e[h][p]},b=o+h,w=l+p;if(u.s.r>b&&(u.s.r=b),u.s.c>w&&(u.s.c=w),u.e.r<b&&(u.e.r=b),u.e.c<w&&(u.e.c=w),e[h][p]&&typeof e[h][p]=="object"&&!Array.isArray(e[h][p])&&!(e[h][p]instanceof Date))g=e[h][p];else if(Array.isArray(g.v)&&(g.f=e[h][p][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Ms[14],n.cellDates?(g.t="d",g.w=Y0(g.z,Xl(g.v))):(g.t="n",g.v=Xl(g.v),g.w=Y0(g.z,g.v))):g.t="s";if(a)s[b]||(s[b]=[]),s[b][w]&&s[b][w].z&&(g.z=s[b][w].z),s[b][w]=g;else{var _=Sa({c:w,r:b});s[_]&&s[_].z&&(g.z=s[_].z),s[_]=g}}}return u.s.c<1e7&&(s["!ref"]=gi(u)),s}function mv(t,e){return Hse(null,t,e)}function PDe(t){return t.read_shift(4,"i")}function ad(t,e){return e||(e=Rt(4)),e.write_shift(4,t),e}function qo(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function eo(t,e){var r=!1;return e==null&&(r=!0,e=Rt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function DDe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function MDe(t,e){return e||(e=Rt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function tD(t,e){var r=t.l,n=t.read_shift(1),a=qo(t),s=[],o={t:a,h:a};if(n&1){for(var l=t.read_shift(4),c=0;c!=l;++c)s.push(DDe(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=r+e,o}function LDe(t,e){var r=!1;return e==null&&(r=!0,e=Rt(15+4*t.t.length)),e.write_shift(1,0),eo(t.t,e),r?e.slice(0,e.l):e}var FDe=tD;function BDe(t,e){var r=!1;return e==null&&(r=!0,e=Rt(23+4*t.t.length)),e.write_shift(1,1),eo(t.t,e),e.write_shift(4,1),MDe({},e),r?e.slice(0,e.l):e}function Iu(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function mg(t,e){return e==null&&(e=Rt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function pg(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function gg(t,e){return e==null&&(e=Rt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var UDe=qo,qse=eo;function rD(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function k3(t,e){var r=!1;return e==null&&(r=!0,e=Rt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var zDe=qo,$8=rD,nD=k3;function Gse(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var a=n===0?C3([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Km(e,0)>>2;return r?a/100:a}function Wse(t,e){e==null&&(e=Rt(4));var r=0,n=0,a=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?a:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Kse(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function VDe(t,e){return e||(e=Rt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var xg=Kse,pv=VDe;function gv(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function $p(t,e){return(e||Rt(8)).write_shift(8,t,"f")}function $De(t){var e={},r=t.read_shift(1),n=r>>>1,a=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),l=t.read_shift(1),c=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=a;var u=QDe[a];u&&(e.rgb=rH(u));break;case 2:e.rgb=rH([o,l,c]);break;case 3:e.theme=a;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function I3(t,e){if(e||(e=Rt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function HDe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function qDe(t,e){e||(e=Rt(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var Xse=2,mc=3,y_=11,O3=19,w_=64,GDe=65,WDe=71,KDe=4108,XDe=4126,vo=80,G$={1:{n:"CodePage",t:Xse},2:{n:"Category",t:vo},3:{n:"PresentationFormat",t:vo},4:{n:"ByteCount",t:mc},5:{n:"LineCount",t:mc},6:{n:"ParagraphCount",t:mc},7:{n:"SlideCount",t:mc},8:{n:"NoteCount",t:mc},9:{n:"HiddenCount",t:mc},10:{n:"MultimediaClipCount",t:mc},11:{n:"ScaleCrop",t:y_},12:{n:"HeadingPairs",t:KDe},13:{n:"TitlesOfParts",t:XDe},14:{n:"Manager",t:vo},15:{n:"Company",t:vo},16:{n:"LinksUpToDate",t:y_},17:{n:"CharacterCount",t:mc},19:{n:"SharedDoc",t:y_},22:{n:"HyperlinksChanged",t:y_},23:{n:"AppVersion",t:mc,p:"version"},24:{n:"DigSig",t:GDe},26:{n:"ContentType",t:vo},27:{n:"ContentStatus",t:vo},28:{n:"Language",t:vo},29:{n:"Version",t:vo},255:{},2147483648:{n:"Locale",t:O3},2147483651:{n:"Behavior",t:O3},1919054434:{}},W$={1:{n:"CodePage",t:Xse},2:{n:"Title",t:vo},3:{n:"Subject",t:vo},4:{n:"Author",t:vo},5:{n:"Keywords",t:vo},6:{n:"Comments",t:vo},7:{n:"Template",t:vo},8:{n:"LastAuthor",t:vo},9:{n:"RevNumber",t:vo},10:{n:"EditTime",t:w_},11:{n:"LastPrinted",t:w_},12:{n:"CreatedDate",t:w_},13:{n:"ModifiedDate",t:w_},14:{n:"PageCount",t:mc},15:{n:"WordCount",t:mc},16:{n:"CharCount",t:mc},17:{n:"Thumbnail",t:WDe},18:{n:"Application",t:vo},19:{n:"DocSecurity",t:mc},255:{},2147483648:{n:"Locale",t:O3},2147483651:{n:"Behavior",t:O3},1919054434:{}};function YDe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var ZDe=YDe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),QDe=Yl(ZDe),Cw={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},JDe={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},__={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Yse(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Zse(t,e){var r=cDe(JDe),n=[],a;n[n.length]=bi,n[n.length]=hr("Types",null,{xmlns:Qi.CT,"xmlns:xsd":Qi.xsd,"xmlns:xsi":Qi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return hr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){t[c]&&t[c].length>0&&(a=t[c][0],n[n.length]=hr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:__[c][e.bookType]||__[c].xlsx}))},o=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:__[c][e.bookType]||__[c].xlsx})})},l=function(c){(t[c]||[]).forEach(function(u){n[n.length]=hr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Jn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Qse(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function $1(t){var e=[bi,hr("Relationships",null,{xmlns:Qi.RELS})];return Co(t["!id"]).forEach(function(r){e[e.length]=hr("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function ba(t,e,r,n,a,s){if(a||(a={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,a.Id="rId"+e,a.Type=n,a.Target=r,[Jn.HLINK,Jn.XPATH,Jn.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),t["!id"][a.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][a.Id]=a,t[("/"+a.Target).replace("//","/")]=a,e}function eMe(t){var e=[bi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function K$(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function tMe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function rMe(t){var e=[bi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(K$(t[r][0],t[r][1])),e.push(tMe("",t[r][0]));return e.push(K$("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Jse(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+N3.version+"</meta:generator></office:meta></office:document-meta>"}var _p=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function mT(t,e,r,n,a){a[t]!=null||e==null||e===""||(a[t]=e,e=Ea(e),n[n.length]=r?hr(t,e,r):Ao(t,e))}function eie(t,e){var r=e||{},n=[bi,hr("cp:coreProperties",null,{"xmlns:cp":Qi.CORE_PROPS,"xmlns:dc":Qi.dc,"xmlns:dcterms":Qi.dcterms,"xmlns:dcmitype":Qi.dcmitype,"xmlns:xsi":Qi.xsi})],a={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&mT("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:V8(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),t.ModifiedDate!=null&&mT("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:V8(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=_p.length;++s){var o=_p[s],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:t?t[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&mT(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var H1=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],tie=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function rie(t){var e=[],r=hr;return t||(t={}),t.Application="SheetJS",e[e.length]=bi,e[e.length]=hr("Properties",null,{xmlns:Qi.EXT_PROPS,"xmlns:vt":Qi.vt}),H1.forEach(function(n){if(t[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ea(String(t[n[1]]));break;case"bool":a=t[n[1]]?"true":"false";break}a!==void 0&&(e[e.length]=r(n[0],a))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Ea(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function nie(t){var e=[bi,hr("Properties",null,{xmlns:Qi.CUST_PROPS,"xmlns:vt":Qi.vt})];if(!t)return e.join("");var r=1;return Co(t).forEach(function(a){++r,e[e.length]=hr("property",yDe(t[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ea(a)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var X$={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function nMe(t,e){var r=[];return Co(X$).map(function(n){for(var a=0;a<_p.length;++a)if(_p[a][1]==n)return _p[a];for(a=0;a<H1.length;++a)if(H1[a][1]==n)return H1[a];throw n}).forEach(function(n){if(t[n[1]]!=null){var a=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Ao(X$[n[1]]||n[1],a))}}),hr("DocumentProperties",r.join(""),{xmlns:yc.o})}function aMe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return t&&Co(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<_p.length;++o)if(s==_p[o][1])return;for(o=0;o<H1.length;++o)if(s==H1[o][1])return;for(o=0;o<r.length;++o)if(s==r[o])return;var l=t[s],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),a.push(hr(M$(s),l,{"dt:dt":c}))}}),e&&Co(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(hr(M$(s),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+yc.o+'">'+a.join("")+"</"+n+">"}function sMe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var o=Rt(8);return o.write_shift(4,n),o.write_shift(4,a),o}function Y$(t,e){var r=Rt(4),n=Rt(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Rt(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=sMe(e);break;case 31:case 80:for(n=Rt(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Eo([r,n])}var aie=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function iMe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Z$(t,e,r){var n=Rt(8),a=[],s=[],o=8,l=0,c=Rt(8),u=Rt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),o+=8+c.length,!e){u=Rt(8),u.write_shift(4,0),a.unshift(u);var d=[Rt(4)];for(d[0].write_shift(4,t.length),l=0;l<t.length;++l){var h=t[l][0];for(c=Rt(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Eo(d),s.unshift(c),o+=8+c.length}for(l=0;l<t.length;++l)if(!(e&&!e[t[l][0]])&&!(aie.indexOf(t[l][0])>-1||tie.indexOf(t[l][0])>-1)&&t[l][1]!=null){var p=t[l][1],g=0;if(e){g=+e[t[l][0]];var b=r[g];if(b.p=="version"&&typeof p=="string"){var w=p.split(".");p=(+w[0]<<16)+(+w[1]||0)}c=Y$(b.t,p)}else{var _=iMe(p);_==-1&&(_=31,p=String(p)),c=Y$(_,p)}s.push(c),u=Rt(8),u.write_shift(4,e?g:2+l),a.push(u),o+=8+c.length}var N=8*(s.length+1);for(l=0;l<s.length;++l)a[l].write_shift(4,N),N+=s[l].length;return n.write_shift(4,o),n.write_shift(4,s.length),Eo([n].concat(a).concat(s))}function Q$(t,e,r,n,a,s){var o=Rt(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Ia.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,a?68:48);var c=Z$(t,r,n);if(l.push(c),a){var u=Z$(a,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Eo(l)}function oMe(t,e){e||(e=Rt(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function lMe(t,e){return t.read_shift(e)===1}function cl(t,e){return e||(e=Rt(2)),e.write_shift(2,+!!t),e}function sie(t){return t.read_shift(2,"u")}function su(t,e){return e||(e=Rt(2)),e.write_shift(2,t),e}function iie(t,e,r){return r||(r=Rt(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function oie(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=t.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?t.read_shift(n,a):"";return o}function cMe(t){var e=t.t||"",r=Rt(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Rt(2*e.length);n.write_shift(2*e.length,e,"utf16le");var a=[r,n];return Eo(a)}function uMe(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var a=t.read_shift(1);return a===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function dMe(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):uMe(t,n,r)}function fMe(t,e,r){if(r.biff>5)return dMe(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function lie(t,e,r){return r||(r=Rt(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function J$(t,e){e||(e=Rt(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function hMe(t){var e=Rt(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)e.write_shift(4,o[r]);if(s==28)n=n.slice(1),J$(n,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(e.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)e.write_shift(2,l.charCodeAt(r));e.write_shift(2,0),s&8&&J$(a>-1?n.slice(a+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)e.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)e.write_shift(1,n.charCodeAt(r+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function Hp(t,e,r,n){return n||(n=Rt(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function mMe(t,e,r){var n=r.biff>8?4:2,a=t.read_shift(n),s=t.read_shift(n,"i"),o=t.read_shift(n,"i");return[a,s,o]}function pMe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{s:{c:n,r:e},e:{c:a,r}}}function cie(t,e){return e||(e=Rt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function aD(t,e,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Rt(a);return s.write_shift(2,n),s.write_shift(2,e),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function gMe(t,e){var r=!e||e.biff==8,n=Rt(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function xMe(t,e){var r=!e||e.biff>=8?2:1,n=Rt(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function vMe(t,e){var r=Rt(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],a=0;a<t.length;++a)n[a]=cMe(t[a]);var s=Eo([r].concat(n));return s.parts=[r.length].concat(n.map(function(o){return o.length})),s}function bMe(){var t=Rt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function yMe(t){var e=Rt(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function wMe(t,e){var r=t.name||"Arial",n=e&&e.biff==5,a=n?15+r.length:16+2*r.length,s=Rt(a);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function _Me(t,e,r,n){var a=Rt(10);return Hp(t,e,n,a),a.write_shift(4,r),a}function NMe(t,e,r,n,a){var s=!a||a.biff==8,o=Rt(8+ +s+(1+s)*r.length);return Hp(t,e,n,o),o.write_shift(2,r.length),s&&o.write_shift(1,1),o.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),o}function EMe(t,e,r,n){var a=r&&r.biff==5;n||(n=Rt(a?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(a?1:2,e.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*e.length,e,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function AMe(t,e){var r=e.biff==8||!e.biff?4:2,n=Rt(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function eH(t,e,r,n){var a=r&&r.biff==5;n||(n=Rt(a?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function SMe(t){var e=Rt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function jMe(t,e,r,n,a,s){var o=Rt(8);return Hp(t,e,n,o),iie(r,s,o),o}function TMe(t,e,r,n){var a=Rt(14);return Hp(t,e,n,a),$p(r,a),a}function CMe(t,e,r){if(r.biff<8)return kMe(t,e,r);for(var n=[],a=t.l+e,s=t.read_shift(r.biff>8?4:2);s--!==0;)n.push(mMe(t,r.biff>8?12:6,r));if(t.l!=a)throw new Error("Bad ExternSheet: "+t.l+" != "+a);return n}function kMe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=oie(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function IMe(t){var e=Rt(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)cie(t[r],e);return e}function OMe(t){var e=Rt(24),r=Ji(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)e.write_shift(1,parseInt(n[a],16));return Eo([e,hMe(t[1])])}function RMe(t){var e=t[1].Tooltip,r=Rt(10+2*(e.length+1));r.write_shift(2,2048);var n=Ji(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<e.length;++a)r.write_shift(2,e.charCodeAt(a));return r.write_shift(2,0),r}function PMe(t){return t||(t=Rt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function DMe(t,e,r){if(!r.cellStyles)return Kd(t,e);var n=r&&r.biff>=12?4:2,a=t.read_shift(n),s=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(n),c=t.read_shift(2);n==2&&(t.l+=2);var u={s:a,e:s,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function MMe(t,e){var r=Rt(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function LMe(t){for(var e=Rt(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function FMe(t,e,r){var n=Rt(15);return Iw(n,t,e),n.write_shift(8,r,"f"),n}function BMe(t,e,r){var n=Rt(9);return Iw(n,t,e),n.write_shift(2,r),n}var UMe=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=W7({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],d=Vp(1);switch(c.type){case"base64":d=Zu(dh(l));break;case"binary":d=Zu(l);break;case"buffer":case"array":d=l;break}xc(d,0);var h=d.read_shift(1),p=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,p=!0;break;case 49:g=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var w=0,_=521;h==2&&(w=d.read_shift(2)),d.l+=3,h!=2&&(w=d.read_shift(4)),w>1048576&&(w=1e6),h!=2&&(_=d.read_shift(2));var N=d.read_shift(2),S=c.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(S=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var T=[],R={},z=Math.min(d.length,h==2?521:_-10-(g?264:0)),G=b?32:11;d.l<z&&d[d.l]!=13;)switch(R={},R.name=E3.utils.decode(S,d.slice(d.l,d.l+G)).replace(/[\u0000\r\n].*$/g,""),d.l+=G,R.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(R.offset=d.read_shift(4)),R.len=d.read_shift(1),h==2&&(R.offset=d.read_shift(2)),R.dec=d.read_shift(1),R.name.length&&T.push(R),h!=2&&(d.l+=b?13:14),R.type){case"B":(!g||R.len!=8)&&c.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+R.name+":"+R.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+R.type)}if(d[d.l]!==13&&(d.l=_-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=_;var O=0,D=0;for(u[0]=[],D=0;D!=T.length;++D)u[0][D]=T[D].name;for(;w-- >0;){if(d[d.l]===42){d.l+=N;continue}for(++d.l,u[++O]=[],D=0,D=0;D!=T.length;++D){var I=d.slice(d.l,d.l+T[D].len);d.l+=T[D].len,xc(I,0);var V=E3.utils.decode(S,I);switch(T[D].type){case"C":V.trim().length&&(u[O][D]=V.replace(/\s+$/,""));break;case"D":V.length===8?u[O][D]=new Date(+V.slice(0,4),+V.slice(4,6)-1,+V.slice(6,8)):u[O][D]=V;break;case"F":u[O][D]=parseFloat(V.trim());break;case"+":case"I":u[O][D]=b?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(V.trim().toUpperCase()){case"Y":case"T":u[O][D]=!0;break;case"N":case"F":u[O][D]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+V+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[O][D]="##MEMO##"+(b?parseInt(V.trim(),10):I.read_shift(4));break;case"N":V=V.replace(/\u0000/g,"").trim(),V&&V!="."&&(u[O][D]=+V||0);break;case"@":u[O][D]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[O][D]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[O][D]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[O][D]=-I.read_shift(-8,"f");break;case"B":if(g&&T[D].len==8){u[O][D]=I.read_shift(8,"f");break}case"G":case"P":I.l+=T[D].len;break;case"0":if(T[D].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[D].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=T,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=mv(r(l,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function a(l,c){try{return hg(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&ly(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Gl(),h=L3(l,{header:1,raw:!0,cellDates:!0}),p=h[0],g=h.slice(1),b=l["!cols"]||[],w=0,_=0,N=0,S=1;for(w=0;w<p.length;++w){if(((b[w]||{}).DBF||{}).name){p[w]=b[w].DBF.name,++N;continue}if(p[w]!=null){if(++N,typeof p[w]=="number"&&(p[w]=p[w].toString(10)),typeof p[w]!="string")throw new Error("DBF Invalid column name "+p[w]+" |"+typeof p[w]+"|");if(p.indexOf(p[w])!==w){for(_=0;_<1024;++_)if(p.indexOf(p[w]+"_"+_)==-1){p[w]+="_"+_;break}}}}var T=ns(l["!ref"]),R=[],z=[],G=[];for(w=0;w<=T.e.c-T.s.c;++w){var O="",D="",I=0,V=[];for(_=0;_<g.length;++_)g[_][w]!=null&&V.push(g[_][w]);if(V.length==0||p[w]==null){R[w]="?";continue}for(_=0;_<V.length;++_){switch(typeof V[_]){case"number":D="B";break;case"string":D="C";break;case"boolean":D="L";break;case"object":D=V[_]instanceof Date?"D":"C";break;default:D="C"}I=Math.max(I,String(V[_]).length),O=O&&O!=D?"C":D}I>250&&(I=250),D=((b[w]||{}).DBF||{}).type,D=="C"&&b[w].DBF.len>I&&(I=b[w].DBF.len),O=="B"&&D=="N"&&(O="N",G[w]=b[w].DBF.dec,I=b[w].DBF.len),z[w]=O=="C"||D=="N"?I:s[O]||0,S+=z[w],R[w]=O}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,g.length),P.write_shift(2,296+32*N),P.write_shift(2,S),w=0;w<4;++w)P.write_shift(4,0);for(P.write_shift(4,0|(+e[dse]||3)<<8),w=0,_=0;w<p.length;++w)if(p[w]!=null){var B=d.next(32),F=(p[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);B.write_shift(1,F,"sbcs"),B.write_shift(1,R[w]=="?"?"C":R[w],"sbcs"),B.write_shift(4,_),B.write_shift(1,z[w]||s[R[w]]||0),B.write_shift(1,G[w]||0),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(1,0),B.write_shift(4,0),B.write_shift(4,0),_+=z[w]||s[R[w]]||0}var ee=d.next(264);for(ee.write_shift(4,13),w=0;w<65;++w)ee.write_shift(4,0);for(w=0;w<g.length;++w){var Z=d.next(S);for(Z.write_shift(1,0),_=0;_<p.length;++_)if(p[_]!=null)switch(R[_]){case"L":Z.write_shift(1,g[w][_]==null?63:g[w][_]?84:70);break;case"B":Z.write_shift(8,g[w][_]||0,"f");break;case"N":var ce="0";for(typeof g[w][_]=="number"&&(ce=g[w][_].toFixed(G[_]||0)),N=0;N<z[_]-ce.length;++N)Z.write_shift(1,32);Z.write_shift(1,ce,"sbcs");break;case"D":g[w][_]?(Z.write_shift(4,("0000"+g[w][_].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(g[w][_].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+g[w][_].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var ne=String(g[w][_]!=null?g[w][_]:"").slice(0,z[_]);for(Z.write_shift(1,ne,"sbcs"),N=0;N<z[_]-ne.length;++N)Z.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}}(),zMe=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Co(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,g){var b=t[g];return typeof b=="number"?E$(b):b},n=function(p,g,b){var w=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return w==59?p:E$(w)};t["|"]=254;function a(p,g){switch(g.type){case"base64":return s(dh(p),g);case"binary":return s(p,g);case"buffer":return s(sa&&Buffer.isBuffer(p)?p.toString("binary"):Sw(p),g);case"array":return s(oS(p),g)}throw new Error("Unrecognized type "+g.type)}function s(p,g){var b=p.split(/[\n\r]+/),w=-1,_=-1,N=0,S=0,T=[],R=[],z=null,G={},O=[],D=[],I=[],V=0,P;for(+g.codepage>=0&&ly(+g.codepage);N!==b.length;++N){V=0;var B=b[N].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),F=B.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),ee=F[0],Z;if(B.length>0)switch(ee){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":F[1].charAt(0)=="P"&&R.push(B.slice(3).replace(/;;/g,";"));break;case"C":var ce=!1,ne=!1,ae=!1,me=!1,Te=-1,we=-1;for(S=1;S<F.length;++S)switch(F[S].charAt(0)){case"A":break;case"X":_=parseInt(F[S].slice(1))-1,ne=!0;break;case"Y":for(w=parseInt(F[S].slice(1))-1,ne||(_=0),P=T.length;P<=w;++P)T[P]=[];break;case"K":Z=F[S].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(Xf(Z))?isNaN(uy(Z).getDate())||(Z=bl(Z)):(Z=Xf(Z),z!==null&&Nse(z)&&(Z=jse(Z))),ce=!0;break;case"E":me=!0;var q=BLe(F[S].slice(1),{r:w,c:_});T[w][_]=[T[w][_],q];break;case"S":ae=!0,T[w][_]=[T[w][_],"S5S"];break;case"G":break;case"R":Te=parseInt(F[S].slice(1))-1;break;case"C":we=parseInt(F[S].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+B)}if(ce&&(T[w][_]&&T[w][_].length==2?T[w][_][0]=Z:T[w][_]=Z,z=null),ae){if(me)throw new Error("SYLK shared formula cannot have own formula");var Y=Te>-1&&T[Te][we];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");T[w][_][1]=ULe(Y[1],{r:w-Te,c:_-we})}break;case"F":var X=0;for(S=1;S<F.length;++S)switch(F[S].charAt(0)){case"X":_=parseInt(F[S].slice(1))-1,++X;break;case"Y":for(w=parseInt(F[S].slice(1))-1,P=T.length;P<=w;++P)T[P]=[];break;case"M":V=parseInt(F[S].slice(1))/20;break;case"F":break;case"G":break;case"P":z=R[parseInt(F[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=F[S].slice(1).split(" "),P=parseInt(I[0],10);P<=parseInt(I[1],10);++P)V=parseInt(I[2],10),D[P-1]=V===0?{hidden:!0}:{wch:V},sD(D[P-1]);break;case"C":_=parseInt(F[S].slice(1))-1,D[_]||(D[_]={});break;case"R":w=parseInt(F[S].slice(1))-1,O[w]||(O[w]={}),V>0?(O[w].hpt=V,O[w].hpx=mie(V)):V===0&&(O[w].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+B)}X<1&&(z=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+B)}}return O.length>0&&(G["!rows"]=O),D.length>0&&(G["!cols"]=D),g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),[T,G]}function o(p,g){var b=a(p,g),w=b[0],_=b[1],N=mv(w,g);return Co(_).forEach(function(S){N[S]=_[S]}),N}function l(p,g){return hg(o(p,g),g)}function c(p,g,b,w){var _="C;Y"+(b+1)+";X"+(w+1)+";K";switch(p.t){case"n":_+=p.v||0,p.f&&!p.F&&(_+=";E"+oD(p.f,{r:b,c:w}));break;case"b":_+=p.v?"TRUE":"FALSE";break;case"e":_+=p.w||p.v;break;case"d":_+='"'+(p.w||p.v)+'"';break;case"s":_+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function u(p,g){g.forEach(function(b,w){var _="F;W"+(w+1)+" "+(w+1)+" ";b.hidden?_+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=R3(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=P3(b.wpx)),typeof b.wch=="number"&&(_+=Math.round(b.wch))),_.charAt(_.length-1)!=" "&&p.push(_)})}function d(p,g){g.forEach(function(b,w){var _="F;";b.hidden?_+="M0;":b.hpt?_+="M"+20*b.hpt+";":b.hpx&&(_+="M"+20*D3(b.hpx)+";"),_.length>2&&p.push(_+"R"+(w+1))})}function h(p,g){var b=["ID;PWXL;N;E"],w=[],_=ns(p["!ref"]),N,S=Array.isArray(p),T=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&u(b,p["!cols"]),p["!rows"]&&d(b,p["!rows"]),b.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var R=_.s.r;R<=_.e.r;++R)for(var z=_.s.c;z<=_.e.c;++z){var G=Sa({r:R,c:z});N=S?(p[R]||[])[z]:p[G],!(!N||N.v==null&&(!N.f||N.F))&&w.push(c(N,p,R,z))}return b.join(T)+T+w.join(T)+T+"E"+T}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),VMe=function(){function t(s,o){switch(o.type){case"base64":return e(dh(s),o);case"binary":return e(s,o);case"buffer":return e(sa&&Buffer.isBuffer(s)?s.toString("binary"):Sw(s),o);case"array":return e(oS(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var l=s.split(`
`),c=-1,u=-1,d=0,h=[];d!==l.length;++d){if(l[d].trim()==="BOT"){h[++c]=[],u=0;continue}if(!(c<0)){var p=l[d].trim().split(","),g=p[0],b=p[1];++d;for(var w=l[d]||"";(w.match(/["]/g)||[]).length&1&&d<l.length-1;)w+=`
`+l[++d];switch(w=w.trim(),+g){case-1:if(w==="BOT"){h[++c]=[],u=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?h[c][u]=!0:w==="FALSE"?h[c][u]=!1:isNaN(Xf(b))?isNaN(uy(b).getDate())?h[c][u]=b:h[c][u]=bl(b):h[c][u]=Xf(b),++u;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),h[c][u++]=w!==""?w:null;break}if(w==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(s,o){return mv(t(s,o),o)}function n(s,o){return hg(r(s,o),o)}var a=function(){var s=function(c,u,d,h,p){c.push(u),c.push(d+","+h),c.push('"'+p.replace(/"/g,'""')+'"')},o=function(c,u,d,h){c.push(u+","+d),c.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var u=[],d=ns(c["!ref"]),h,p=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){o(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var w=Sa({r:g,c:b});if(h=p?(c[g]||[])[b]:c[w],!h){o(u,1,0,"");continue}switch(h.t){case"n":var _=h.w;!_&&h.v!=null&&(_=h.v),_==null?h.f&&!h.F?o(u,1,0,"="+h.f):o(u,1,0,""):o(u,0,_,"V");break;case"b":o(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Y0(h.z||Ms[14],Xl(bl(h.v)))),o(u,0,h.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var N=`\r
`,S=u.join(N);return S}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),uie=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,p){for(var g=h.split(`
`),b=-1,w=-1,_=0,N=[];_!==g.length;++_){var S=g[_].trim().split(":");if(S[0]==="cell"){var T=Ji(S[1]);if(N.length<=T.r)for(b=N.length;b<=T.r;++b)N[b]||(N[b]=[]);switch(b=T.r,w=T.c,S[2]){case"t":N[b][w]=t(S[3]);break;case"v":N[b][w]=+S[3];break;case"vtf":var R=S[S.length-1];case"vtc":switch(S[3]){case"nl":N[b][w]=!!+S[4];break;default:N[b][w]=+S[4];break}S[2]=="vtf"&&(N[b][w]=[N[b][w],R])}}}return p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),N}function n(h,p){return mv(r(h,p),p)}function a(h,p){return hg(n(h,p),p)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var p=[],g=[],b,w="",_=Bc(h["!ref"]),N=Array.isArray(h),S=_.s.r;S<=_.e.r;++S)for(var T=_.s.c;T<=_.e.c;++T)if(w=Sa({r:S,c:T}),b=N?(h[S]||[])[T]:h[w],!(!b||b.v==null||b.t==="z")){switch(g=["cell",w,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var R=Xl(bl(b.v));g[2]="vtc",g[3]="nd",g[4]=""+R,g[5]=b.w||Y0(b.z||Ms[14],R);break;case"e":continue}p.push(g.join(":"))}return p.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function d(h){return[s,o,l,o,u(h),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),$Me=function(){function t(d,h,p,g,b){b.raw?h[p][g]=d:d===""||(d==="TRUE"?h[p][g]=!0:d==="FALSE"?h[p][g]=!1:isNaN(Xf(d))?isNaN(uy(d).getDate())?h[p][g]=d:h[p][g]=bl(d):h[p][g]=Xf(d))}function e(d,h){var p=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),w=b.length-1;w>=0&&b[w].length===0;)--w;for(var _=10,N=0,S=0;S<=w;++S)N=b[S].indexOf(" "),N==-1?N=b[S].length:N++,_=Math.max(_,N);for(S=0;S<=w;++S){g[S]=[];var T=0;for(t(b[S].slice(0,_).trim(),g,S,T,p),T=1;T<=(b[S].length-_)/10+1;++T)t(b[S].slice(_+(T-1)*10,_+T*10).trim(),g,S,T,p)}return p.sheetRows&&(g=g.slice(0,p.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var h={},p=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?p=!p:!p&&b in r&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(w,_){return w[0]-_[0]||n[w[1]]-n[_[1]]}),r[b.pop()[1]]||44}function s(d,h){var p=h||{},g="",b=p.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=a(d.slice(0,1024)):p&&p.FS?g=p.FS:g=a(d.slice(0,1024));var _=0,N=0,S=0,T=0,R=0,z=g.charCodeAt(0),G=!1,O=0,D=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var I=p.dateNF!=null?sDe(p.dateNF):null;function V(){var P=d.slice(T,R),B={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)B.t="z";else if(p.raw)B.t="s",B.v=P;else if(P.trim().length===0)B.t="s",B.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(B.t="s",B.v=P.slice(2,-1).replace(/""/g,'"')):zLe(P)?(B.t="n",B.f=P.slice(1)):(B.t="s",B.v=P);else if(P=="TRUE")B.t="b",B.v=!0;else if(P=="FALSE")B.t="b",B.v=!1;else if(!isNaN(S=Xf(P)))B.t="n",p.cellText!==!1&&(B.w=P),B.v=S;else if(!isNaN(uy(P).getDate())||I&&P.match(I)){B.z=p.dateNF||Ms[14];var F=0;I&&P.match(I)&&(P=iDe(P,p.dateNF,P.match(I)||[]),F=1),p.cellDates?(B.t="d",B.v=bl(P,F)):(B.t="n",B.v=Xl(bl(P,F))),p.cellText!==!1&&(B.w=Y0(B.z,B.v instanceof Date?Xl(B.v):B.v)),p.cellNF||delete B.z}else B.t="s",B.v=P;if(B.t=="z"||(p.dense?(b[_]||(b[_]=[]),b[_][N]=B):b[Sa({c:N,r:_})]=B),T=R+1,D=d.charCodeAt(T),w.e.c<N&&(w.e.c=N),w.e.r<_&&(w.e.r=_),O==z)++N;else if(N=0,++_,p.sheetRows&&p.sheetRows<=_)return!0}e:for(;R<d.length;++R)switch(O=d.charCodeAt(R)){case 34:D===34&&(G=!G);break;case z:case 10:case 13:if(!G&&V())break e;break}return R-T>0&&V(),b["!ref"]=gi(w),b}function o(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,h):mv(e(d,h),h)}function l(d,h){var p="",g=h.type=="string"?[0,0,0,0]:tze(d,h);switch(h.type){case"base64":p=dh(d);break;case"binary":p=d;break;case"buffer":h.codepage==65001?p=d.toString("utf8"):h.codepage&&typeof E3<"u"||(p=sa&&Buffer.isBuffer(d)?d.toString("binary"):Sw(d));break;case"array":p=oS(d);break;case"string":p=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?p=ob(p.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?p=ob(p):h.type=="binary"&&typeof E3<"u",p.slice(0,19)=="socialcalc:version:"?uie.to_sheet(h.type=="string"?p:ob(p),h):o(p,h)}function c(d,h){return hg(l(d,h),h)}function u(d){for(var h=[],p=ns(d["!ref"]),g,b=Array.isArray(d),w=p.s.r;w<=p.e.r;++w){for(var _=[],N=p.s.c;N<=p.e.c;++N){var S=Sa({r:w,c:N});if(g=b?(d[w]||[])[N]:d[S],!g||g.v==null){_.push("          ");continue}for(var T=(g.w||(fh(g),g.w)||"").slice(0,10);T.length<10;)T+=" ";_.push(T+(N===0?" ":""))}h.push(_.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}}(),tH=function(){function t(q,Y,X){if(q){xc(q,q.l||0);for(var re=X.Enum||Te;q.l<q.length;){var se=q.read_shift(2),Ce=re[se]||re[65535],je=q.read_shift(2),pe=q.l+je,Oe=Ce.f&&Ce.f(q,je,X);if(q.l=pe,Y(Oe,Ce,se))return}}}function e(q,Y){switch(Y.type){case"base64":return r(Zu(dh(q)),Y);case"binary":return r(Zu(q),Y);case"buffer":case"array":return r(q,Y)}throw"Unsupported type "+Y.type}function r(q,Y){if(!q)return q;var X=Y||{},re=X.dense?[]:{},se="Sheet1",Ce="",je=0,pe={},Oe=[],qe=[],Ue={s:{r:0,c:0},e:{r:0,c:0}},Me=X.sheetRows||0;if(q[2]==0&&(q[3]==8||q[3]==9)&&q.length>=16&&q[14]==5&&q[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(q[2]==2)X.Enum=Te,t(q,function(mt,Ut,et){switch(et){case 0:X.vers=mt,mt>=4096&&(X.qpro=!0);break;case 6:Ue=mt;break;case 204:mt&&(Ce=mt);break;case 222:Ce=mt;break;case 15:case 51:X.qpro||(mt[1].v=mt[1].v.slice(1));case 13:case 14:case 16:et==14&&(mt[2]&112)==112&&(mt[2]&15)>1&&(mt[2]&15)<15&&(mt[1].z=X.dateNF||Ms[14],X.cellDates&&(mt[1].t="d",mt[1].v=jse(mt[1].v))),X.qpro&&mt[3]>je&&(re["!ref"]=gi(Ue),pe[se]=re,Oe.push(se),re=X.dense?[]:{},Ue={s:{r:0,c:0},e:{r:0,c:0}},je=mt[3],se=Ce||"Sheet"+(je+1),Ce="");var er=X.dense?(re[mt[0].r]||[])[mt[0].c]:re[Sa(mt[0])];if(er){er.t=mt[1].t,er.v=mt[1].v,mt[1].z!=null&&(er.z=mt[1].z),mt[1].f!=null&&(er.f=mt[1].f);break}X.dense?(re[mt[0].r]||(re[mt[0].r]=[]),re[mt[0].r][mt[0].c]=mt[1]):re[Sa(mt[0])]=mt[1];break}},X);else if(q[2]==26||q[2]==14)X.Enum=we,q[2]==14&&(X.qpro=!0,q.l=0),t(q,function(mt,Ut,et){switch(et){case 204:se=mt;break;case 22:mt[1].v=mt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(mt[3]>je&&(re["!ref"]=gi(Ue),pe[se]=re,Oe.push(se),re=X.dense?[]:{},Ue={s:{r:0,c:0},e:{r:0,c:0}},je=mt[3],se="Sheet"+(je+1)),Me>0&&mt[0].r>=Me)break;X.dense?(re[mt[0].r]||(re[mt[0].r]=[]),re[mt[0].r][mt[0].c]=mt[1]):re[Sa(mt[0])]=mt[1],Ue.e.c<mt[0].c&&(Ue.e.c=mt[0].c),Ue.e.r<mt[0].r&&(Ue.e.r=mt[0].r);break;case 27:mt[14e3]&&(qe[mt[14e3][0]]=mt[14e3][1]);break;case 1537:qe[mt[0]]=mt[1],mt[0]==je&&(se=mt[1]);break}},X);else throw new Error("Unrecognized LOTUS BOF "+q[2]);if(re["!ref"]=gi(Ue),pe[Ce||se]=re,Oe.push(Ce||se),!qe.length)return{SheetNames:Oe,Sheets:pe};for(var Be={},ve=[],Ht=0;Ht<qe.length;++Ht)pe[Oe[Ht]]?(ve.push(qe[Ht]||Oe[Ht]),Be[qe[Ht]]=pe[qe[Ht]]||pe[Oe[Ht]]):(ve.push(qe[Ht]),Be[qe[Ht]]={"!ref":"A1"});return{SheetNames:ve,Sheets:Be}}function n(q,Y){var X=Y||{};if(+X.codepage>=0&&ly(+X.codepage),X.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Gl(),se=ns(q["!ref"]),Ce=Array.isArray(q),je=[];mr(re,0,s(1030)),mr(re,6,c(se));for(var pe=Math.min(se.e.r,8191),Oe=se.s.r;Oe<=pe;++Oe)for(var qe=To(Oe),Ue=se.s.c;Ue<=se.e.c;++Ue){Oe===se.s.r&&(je[Ue]=Ho(Ue));var Me=je[Ue]+qe,Be=Ce?(q[Oe]||[])[Ue]:q[Me];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?mr(re,13,g(Oe,Ue,Be.v)):mr(re,14,w(Oe,Ue,Be.v));else{var ve=fh(Be);mr(re,15,h(Oe,Ue,ve.slice(0,239)))}}return mr(re,1),re.end()}function a(q,Y){var X=Y||{};if(+X.codepage>=0&&ly(+X.codepage),X.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Gl();mr(re,0,o(q));for(var se=0,Ce=0;se<q.SheetNames.length;++se)(q.Sheets[q.SheetNames[se]]||{})["!ref"]&&mr(re,27,me(q.SheetNames[se],Ce++));var je=0;for(se=0;se<q.SheetNames.length;++se){var pe=q.Sheets[q.SheetNames[se]];if(!(!pe||!pe["!ref"])){for(var Oe=ns(pe["!ref"]),qe=Array.isArray(pe),Ue=[],Me=Math.min(Oe.e.r,8191),Be=Oe.s.r;Be<=Me;++Be)for(var ve=To(Be),Ht=Oe.s.c;Ht<=Oe.e.c;++Ht){Be===Oe.s.r&&(Ue[Ht]=Ho(Ht));var mt=Ue[Ht]+ve,Ut=qe?(pe[Be]||[])[Ht]:pe[mt];if(!(!Ut||Ut.t=="z"))if(Ut.t=="n")mr(re,23,V(Be,Ht,je,Ut.v));else{var et=fh(Ut);mr(re,22,O(Be,Ht,je,et.slice(0,239)))}}++je}}return mr(re,1),re.end()}function s(q){var Y=Rt(2);return Y.write_shift(2,q),Y}function o(q){var Y=Rt(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var X=0,re=0,se=0,Ce=0;Ce<q.SheetNames.length;++Ce){var je=q.SheetNames[Ce],pe=q.Sheets[je];if(!(!pe||!pe["!ref"])){++se;var Oe=Bc(pe["!ref"]);X<Oe.e.r&&(X=Oe.e.r),re<Oe.e.c&&(re=Oe.e.c)}}return X>8191&&(X=8191),Y.write_shift(2,X),Y.write_shift(1,se),Y.write_shift(1,re),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function l(q,Y,X){var re={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&X.qpro?(re.s.c=q.read_shift(1),q.l++,re.s.r=q.read_shift(2),re.e.c=q.read_shift(1),q.l++,re.e.r=q.read_shift(2),re):(re.s.c=q.read_shift(2),re.s.r=q.read_shift(2),Y==12&&X.qpro&&(q.l+=2),re.e.c=q.read_shift(2),re.e.r=q.read_shift(2),Y==12&&X.qpro&&(q.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function c(q){var Y=Rt(8);return Y.write_shift(2,q.s.c),Y.write_shift(2,q.s.r),Y.write_shift(2,q.e.c),Y.write_shift(2,q.e.r),Y}function u(q,Y,X){var re=[{c:0,r:0},{t:"n",v:0},0,0];return X.qpro&&X.vers!=20768?(re[0].c=q.read_shift(1),re[3]=q.read_shift(1),re[0].r=q.read_shift(2),q.l+=2):(re[2]=q.read_shift(1),re[0].c=q.read_shift(2),re[0].r=q.read_shift(2)),re}function d(q,Y,X){var re=q.l+Y,se=u(q,Y,X);if(se[1].t="s",X.vers==20768){q.l++;var Ce=q.read_shift(1);return se[1].v=q.read_shift(Ce,"utf8"),se}return X.qpro&&q.l++,se[1].v=q.read_shift(re-q.l,"cstr"),se}function h(q,Y,X){var re=Rt(7+X.length);re.write_shift(1,255),re.write_shift(2,Y),re.write_shift(2,q),re.write_shift(1,39);for(var se=0;se<re.length;++se){var Ce=X.charCodeAt(se);re.write_shift(1,Ce>=128?95:Ce)}return re.write_shift(1,0),re}function p(q,Y,X){var re=u(q,Y,X);return re[1].v=q.read_shift(2,"i"),re}function g(q,Y,X){var re=Rt(7);return re.write_shift(1,255),re.write_shift(2,Y),re.write_shift(2,q),re.write_shift(2,X,"i"),re}function b(q,Y,X){var re=u(q,Y,X);return re[1].v=q.read_shift(8,"f"),re}function w(q,Y,X){var re=Rt(13);return re.write_shift(1,255),re.write_shift(2,Y),re.write_shift(2,q),re.write_shift(8,X,"f"),re}function _(q,Y,X){var re=q.l+Y,se=u(q,Y,X);if(se[1].v=q.read_shift(8,"f"),X.qpro)q.l=re;else{var Ce=q.read_shift(2);R(q.slice(q.l,q.l+Ce),se),q.l+=Ce}return se}function N(q,Y,X){var re=Y&32768;return Y&=-32769,Y=(re?q:0)+(Y>=8192?Y-16384:Y),(re?"":"$")+(X?Ho(Y):To(Y))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function R(q,Y){xc(q,0);for(var X=[],re=0,se="",Ce="",je="",pe="";q.l<q.length;){var Oe=q[q.l++];switch(Oe){case 0:X.push(q.read_shift(8,"f"));break;case 1:Ce=N(Y[0].c,q.read_shift(2),!0),se=N(Y[0].r,q.read_shift(2),!1),X.push(Ce+se);break;case 2:{var qe=N(Y[0].c,q.read_shift(2),!0),Ue=N(Y[0].r,q.read_shift(2),!1);Ce=N(Y[0].c,q.read_shift(2),!0),se=N(Y[0].r,q.read_shift(2),!1),X.push(qe+Ue+":"+Ce+se)}break;case 3:if(q.l<q.length){console.error("WK1 premature formula end");return}break;case 4:X.push("("+X.pop()+")");break;case 5:X.push(q.read_shift(2));break;case 6:{for(var Me="";Oe=q[q.l++];)Me+=String.fromCharCode(Oe);X.push('"'+Me.replace(/"/g,'""')+'"')}break;case 8:X.push("-"+X.pop());break;case 23:X.push("+"+X.pop());break;case 22:X.push("NOT("+X.pop()+")");break;case 20:case 21:pe=X.pop(),je=X.pop(),X.push(["AND","OR"][Oe-20]+"("+je+","+pe+")");break;default:if(Oe<32&&T[Oe])pe=X.pop(),je=X.pop(),X.push(je+T[Oe]+pe);else if(S[Oe]){if(re=S[Oe][1],re==69&&(re=q[q.l++]),re>X.length){console.error("WK1 bad formula parse 0x"+Oe.toString(16)+":|"+X.join("|")+"|");return}var Be=X.slice(-re);X.length-=re,X.push(S[Oe][0]+"("+Be.join(",")+")")}else return Oe<=7?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=24?console.error("WK1 unsupported op "+Oe.toString(16)):Oe<=30?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=115?console.error("WK1 unsupported function opcode "+Oe.toString(16)):console.error("WK1 unrecognized opcode "+Oe.toString(16))}}X.length==1?Y[1].f=""+X[0]:console.error("WK1 bad formula parse |"+X.join("|")+"|")}function z(q){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=q.read_shift(2),Y[3]=q[q.l++],Y[0].c=q[q.l++],Y}function G(q,Y){var X=z(q);return X[1].t="s",X[1].v=q.read_shift(Y-4,"cstr"),X}function O(q,Y,X,re){var se=Rt(6+re.length);se.write_shift(2,q),se.write_shift(1,X),se.write_shift(1,Y),se.write_shift(1,39);for(var Ce=0;Ce<re.length;++Ce){var je=re.charCodeAt(Ce);se.write_shift(1,je>=128?95:je)}return se.write_shift(1,0),se}function D(q,Y){var X=z(q);X[1].v=q.read_shift(2);var re=X[1].v>>1;if(X[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return X[1].v=re,X}function I(q,Y){var X=z(q),re=q.read_shift(4),se=q.read_shift(4),Ce=q.read_shift(2);if(Ce==65535)return re===0&&se===3221225472?(X[1].t="e",X[1].v=15):re===0&&se===3489660928?(X[1].t="e",X[1].v=42):X[1].v=0,X;var je=Ce&32768;return Ce=(Ce&32767)-16446,X[1].v=(1-je*2)*(se*Math.pow(2,Ce+32)+re*Math.pow(2,Ce)),X}function V(q,Y,X,re){var se=Rt(14);if(se.write_shift(2,q),se.write_shift(1,X),se.write_shift(1,Y),re==0)return se.write_shift(4,0),se.write_shift(4,0),se.write_shift(2,65535),se;var Ce=0,je=0,pe=0,Oe=0;return re<0&&(Ce=1,re=-re),je=Math.log2(re)|0,re/=Math.pow(2,je-31),Oe=re>>>0,Oe&2147483648||(re/=2,++je,Oe=re>>>0),re-=Oe,Oe|=2147483648,Oe>>>=0,re*=Math.pow(2,32),pe=re>>>0,se.write_shift(4,pe),se.write_shift(4,Oe),je+=16383+(Ce?32768:0),se.write_shift(2,je),se}function P(q,Y){var X=I(q);return q.l+=Y-14,X}function B(q,Y){var X=z(q),re=q.read_shift(4);return X[1].v=re>>6,X}function F(q,Y){var X=z(q),re=q.read_shift(8,"f");return X[1].v=re,X}function ee(q,Y){var X=F(q);return q.l+=Y-10,X}function Z(q,Y){return q[q.l+Y-1]==0?q.read_shift(Y,"cstr"):""}function ce(q,Y){var X=q[q.l++];X>Y-1&&(X=Y-1);for(var re="";re.length<X;)re+=String.fromCharCode(q[q.l++]);return re}function ne(q,Y,X){if(!(!X.qpro||Y<21)){var re=q.read_shift(1);q.l+=17,q.l+=1,q.l+=2;var se=q.read_shift(Y-21,"cstr");return[re,se]}}function ae(q,Y){for(var X={},re=q.l+Y;q.l<re;){var se=q.read_shift(2);if(se==14e3){for(X[se]=[0,""],X[se][0]=q.read_shift(2);q[q.l];)X[se][1]+=String.fromCharCode(q[q.l]),q.l++;q.l++}}return X}function me(q,Y){var X=Rt(5+q.length);X.write_shift(2,14e3),X.write_shift(2,Y);for(var re=0;re<q.length;++re){var se=q.charCodeAt(re);X[X.l++]=se>127?95:se}return X[X.l++]=0,X}var Te={0:{n:"BOF",f:sie},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:ce},65535:{n:""}},we={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:D},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ae},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:B},38:{n:"??"},39:{n:"NUMBER27",f:F},40:{n:"FORMULA28",f:ee},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:e}}(),HMe=/^\s|\s$|[\t\n\r]/;function die(t,e){if(!e.bookSST)return"";var r=[bi];r[r.length]=hr("sst",null,{xmlns:hv[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var a=t[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(HMe)&&(s+=' xml:space="preserve"'),s+=">"+Ea(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function qMe(t){return[t.read_shift(4),t.read_shift(4)]}function GMe(t,e){return e||(e=Rt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var WMe=LDe;function KMe(t){var e=Gl();rr(e,159,GMe(t));for(var r=0;r<t.length;++r)rr(e,19,WMe(t[r]));return rr(e,160),e.end()}function XMe(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function fie(t){var e=0,r,n=XMe(t),a=n.length+1,s,o,l,c,u;for(r=Vp(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)o=r[s],l=e&16384?1:0,c=e<<1&32767,u=l|c,e=u^o;return e^52811}var YMe=function(){function t(a,s){switch(s.type){case"base64":return e(dh(a),s);case"binary":return e(a,s);case"buffer":return e(sa&&Buffer.isBuffer(a)?a.toString("binary"):Sw(a),s);case"array":return e(oS(a),s)}throw new Error("Unrecognized type "+s.type)}function e(a,s){var o=s||{},l=o.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,h){Array.isArray(l)&&(l[h]=[]);for(var p=/\\\w+\b/g,g=0,b,w=-1;b=p.exec(d);){switch(b[0]){case"\\cell":var _=d.slice(g,p.lastIndex-b[0].length);if(_[0]==" "&&(_=_.slice(1)),++w,_.length){var N={v:_,t:"s"};Array.isArray(l)?l[h][w]=N:l[Sa({r:h,c:w})]=N}break}g=p.lastIndex}w>u.e.c&&(u.e.c=w)}),l["!ref"]=gi(u),l}function r(a,s){return hg(t(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],o=ns(a["!ref"]),l,c=Array.isArray(a),u=o.s.r;u<=o.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=o.s.c;d<=o.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=o.s.c;d<=o.e.c;++d){var h=Sa({r:u,c:d});l=c?(a[u]||[])[d]:a[h],!(!l||l.v==null&&(!l.f||l.F))&&(s.push(" "+(l.w||(fh(l),l.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function rH(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var ZMe=6,Yf=ZMe;function R3(t){return Math.floor((t+Math.round(128/Yf)/256)*Yf)}function P3(t){return Math.floor((t-5)/Yf*100+.5)/100}function H8(t){return Math.round((t*Yf+5)/Yf*256)/256}function sD(t){t.width?(t.wpx=R3(t.width),t.wch=P3(t.wpx),t.MDW=Yf):t.wpx?(t.wch=P3(t.wpx),t.width=H8(t.wch),t.MDW=Yf):typeof t.wch=="number"&&(t.width=H8(t.wch),t.wpx=R3(t.width),t.MDW=Yf),t.customWidth&&delete t.customWidth}var QMe=96,hie=QMe;function D3(t){return t*96/hie}function mie(t){return t*hie/96}function JMe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=hr("numFmt",null,{numFmtId:n,formatCode:Ea(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=hr("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function eLe(t){var e=[];return e[e.length]=hr("cellXfs",null),t.forEach(function(r){e[e.length]=hr("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=hr("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function pie(t,e){var r=[bi,hr("styleSheet",null,{xmlns:hv[0],"xmlns:vt":Qi.vt})],n;return t.SSF&&(n=JMe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=eLe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function tLe(t,e){var r=t.read_shift(2),n=qo(t);return[r,n]}function rLe(t,e,r){r||(r=Rt(6+4*e.length)),r.write_shift(2,t),eo(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function nLe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var a=HDe(t);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=t.read_shift(2);switch(s===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(n.underline=o);var l=t.read_shift(1);l>0&&(n.family=l);var c=t.read_shift(1);switch(c>0&&(n.charset=c),t.l++,n.color=$De(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=qo(t),n}function aLe(t,e){e||(e=Rt(25+4*32)),e.write_shift(2,t.sz*20),qDe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),I3(t.color,e);var n=0;return n=2,e.write_shift(1,n),eo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var sLe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],pT,iLe=Kd;function nH(t,e){e||(e=Rt(4*3+8*7+16*1)),pT||(pT=W7(sLe));var r=pT[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(I3({auto:1},e),I3({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function oLe(t,e){var r=t.l+e,n=t.read_shift(2),a=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:a}}function gie(t,e,r){r||(r=Rt(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function t2(t,e){return e||(e=Rt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var lLe=Kd;function cLe(t,e){return e||(e=Rt(51)),e.write_shift(1,0),t2(null,e),t2(null,e),t2(null,e),t2(null,e),t2(null,e),e.length>e.l?e.slice(0,e.l):e}function uLe(t,e){return e||(e=Rt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),k3(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function dLe(t,e,r){var n=Rt(2052);return n.write_shift(4,t),k3(e,n),k3(r,n),n.length>n.l?n.slice(0,n.l):n}function fLe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&++r}),r!=0&&(rr(t,615,ad(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&rr(t,44,rLe(a,e[a]))}),rr(t,616))}}function hLe(t){var e=1;rr(t,611,ad(e)),rr(t,43,aLe({sz:12,color:{theme:1},name:"Calibri",family:2})),rr(t,612)}function mLe(t){var e=2;rr(t,603,ad(e)),rr(t,45,nH({patternType:"none"})),rr(t,45,nH({patternType:"gray125"})),rr(t,604)}function pLe(t){var e=1;rr(t,613,ad(e)),rr(t,46,cLe()),rr(t,614)}function gLe(t){var e=1;rr(t,626,ad(e)),rr(t,47,gie({numFmtId:0},65535)),rr(t,627)}function xLe(t,e){rr(t,617,ad(e.length)),e.forEach(function(r){rr(t,47,gie(r,0))}),rr(t,618)}function vLe(t){var e=1;rr(t,619,ad(e)),rr(t,48,uLe({xfId:0,name:"Normal"})),rr(t,620)}function bLe(t){var e=0;rr(t,505,ad(e)),rr(t,506)}function yLe(t){var e=0;rr(t,508,dLe(e,"TableStyleMedium9","PivotStyleMedium4")),rr(t,509)}function wLe(t,e){var r=Gl();return rr(r,278),fLe(r,t.SSF),hLe(r),mLe(r),pLe(r),gLe(r),xLe(r,e.cellXfs),vLe(r),bLe(r),yLe(r),rr(r,279),r.end()}function xie(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[bi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function _Le(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:qo(t)}}function NLe(t){var e=Rt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),eo(t.name,e),e.slice(0,e.l)}function ELe(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function ALe(t){var e=Rt(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function SLe(t,e){var r=Rt(8+2*e.length);return r.write_shift(4,t),eo(e,r),r.slice(0,r.l)}function jLe(t){return t.l+=4,t.read_shift(4)!=0}function TLe(t,e){var r=Rt(8);return r.write_shift(4,t),r.write_shift(4,1),r}function CLe(){var t=Gl();return rr(t,332),rr(t,334,ad(1)),rr(t,335,NLe({name:"XLDAPR",version:12e4,flags:3496657072})),rr(t,336),rr(t,339,SLe(1,"XLDAPR")),rr(t,52),rr(t,35,ad(514)),rr(t,4096,ad(0)),rr(t,4097,su(1)),rr(t,36),rr(t,53),rr(t,340),rr(t,337,TLe(1)),rr(t,51,ALe([[1,0]])),rr(t,338),rr(t,333),t.end()}function vie(){var t=[bi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function kLe(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=Sa(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var N1=1024;function bie(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[hr("xml",null,{"xmlns:v":yc.v,"xmlns:o":yc.o,"xmlns:x":yc.x,"xmlns:mv":yc.mv}).replace(/\/>/,">"),hr("o:shapelayout",hr("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),hr("v:shapetype",[hr("v:stroke",null,{joinstyle:"miter"}),hr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];N1<t*1e3;)N1+=1e3;return e.forEach(function(s){var o=Ji(s[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?hr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=hr("v:fill",c,l),d={on:"t",obscured:"t"};++N1,a=a.concat(["<v:shape"+fy({id:"_x0000_s"+N1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,hr("v:shadow",null,d),hr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ao("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Ao("x:AutoFill","False"),Ao("x:Row",String(o.r)),Ao("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function yie(t){var e=[bi,hr("comments",null,{xmlns:hv[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(a){var s=Ea(a.a);r.indexOf(s)==-1&&(r.push(s),e.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),e.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Ea(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)e.push(Ao("t",Ea(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,l=1;l<s.length;++l)o+=`Reply:
    `+s[l]+`
`;e.push(Ao("t",Ea(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function ILe(t,e,r){var n=[bi,hr("ThreadedComments",null,{xmlns:Qi.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(a){var s="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),n.push(hr("threadedComment",Ao("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function OLe(t){var e=[bi,hr("personList",null,{xmlns:Qi.TCMNT,"xmlns:x":hv[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(hr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function RLe(t){var e={};e.iauthor=t.read_shift(4);var r=xg(t);return e.rfx=r.s,e.ref=Sa(r.s),t.l+=16,e}function PLe(t,e){return e==null&&(e=Rt(36)),e.write_shift(4,t[1].iauthor),pv(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var DLe=qo;function MLe(t){return eo(t.slice(0,54))}function LLe(t){var e=Gl(),r=[];return rr(e,628),rr(e,630),t.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),rr(e,632,MLe(a.a)))})}),rr(e,631),rr(e,633),t.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Ji(n[0]),e:Ji(n[0])};rr(e,635,PLe([s,a])),a.t&&a.t.length>0&&rr(e,637,BDe(a)),rr(e,636),delete a.iauthor})}),rr(e,634),rr(e,629),e.end()}function FLe(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Ia.utils.cfb_add(t,a,e.FileIndex[n].content)}})}var wie=["xlsb","xlsm","xlam","biff8","xla"],BLe=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,a,s,o){var l=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=o.length>0?parseInt(o,10)|0:0;return l?d+=e.c:--d,c?u+=e.r:--u,a+(l?"":"$")+Ho(d)+(c?"":"$")+To(u)}return function(a,s){return e=s,a.replace(t,r)}}(),iD=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oD=function(){return function(e,r){return e.replace(iD,function(n,a,s,o,l,c){var u=eD(o)-(s?0:r.c),d=J7(c)-(l?0:r.r),h=d==0?"":l?d+1:"["+d+"]",p=u==0?"":s?u+1:"["+u+"]";return a+"R"+h+"C"+p})}}();function ULe(t,e){return t.replace(iD,function(r,n,a,s,o,l){return n+(a=="$"?a+s:Ho(eD(s)+e.c))+(o=="$"?o+l:To(J7(l)+e.r))})}function zLe(t){return t.length!=1}function ai(t){t.l+=1}function Z0(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function _ie(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Nie(t);r.biff==12&&(n=4)}var a=t.read_shift(n),s=t.read_shift(n),o=Z0(t),l=Z0(t);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:l[0],cRel:l[1],rRel:l[2]}}}function Nie(t){var e=Z0(t),r=Z0(t),n=t.read_shift(1),a=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function VLe(t,e,r){if(r.biff<8)return Nie(t);var n=t.read_shift(r.biff==12?4:2),a=t.read_shift(r.biff==12?4:2),s=Z0(t),o=Z0(t);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Eie(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return $Le(t);var n=t.read_shift(r&&r.biff==12?4:2),a=Z0(t);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function $Le(t){var e=Z0(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function HLe(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function qLe(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return GLe(t);var a=t.read_shift(n>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,l=(s&32768)>>15;if(s&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:o,rRel:l}}function GLe(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,a=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),a==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:a,rRel:n}}function WLe(t,e,r){var n=(t[t.l++]&96)>>5,a=_ie(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function KLe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=_ie(t,s,r);return[n,a,o]}function XLe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function YLe(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=8;if(r)switch(r.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[n,a]}function ZLe(t,e,r){var n=(t[t.l++]&96)>>5,a=VLe(t,e-1,r);return[n,a]}function QLe(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function aH(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function JLe(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(t.read_shift(r&&r.biff==2?1:2));return a}function e9e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function t9e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function r9e(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function n9e(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function Aie(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function a9e(t){return t.read_shift(2),Aie(t)}function s9e(t){return t.read_shift(2),Aie(t)}function i9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=Eie(t,0,r);return[n,a]}function o9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=qLe(t,0,r);return[n,a]}function l9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var s=Eie(t,0,r);return[n,a,s]}function c9e(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var a=t.read_shift(r&&r.biff<=3?1:2);return[cFe[a],Tie[a],n]}function u9e(t,e,r){var n=t[t.l++],a=t.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:d9e(t);return[a,(s[0]===0?Tie:lFe)[s[1]]]}function d9e(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function f9e(t,e,r){t.l+=r&&r.biff==2?3:4}function h9e(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function m9e(t){return t.l++,Cw[t.read_shift(1)]}function p9e(t){return t.l++,t.read_shift(2)}function g9e(t){return t.l++,t.read_shift(1)!==0}function x9e(t){return t.l++,gv(t)}function v9e(t,e,r){return t.l++,oie(t,e-1,r)}function b9e(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=lMe(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=Cw[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=gv(t);break;case 2:r[1]=fMe(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function y9e(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?xg:pMe)(t));return a}function w9e(t,e,r){var n=0,a=0;r.biff==12?(n=t.read_shift(4),a=t.read_shift(4)):(a=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,o=[];s!=n&&(o[s]=[]);++s)for(var l=0;l!=a;++l)o[s][l]=b9e(t,r.biff);return o}function _9e(t,e,r){var n=t.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=t.read_shift(a);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,s]}function N9e(t,e,r){if(r.biff==5)return E9e(t);var n=t.read_shift(1)>>>5&3,a=t.read_shift(2),s=t.read_shift(4);return[n,a,s]}function E9e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function A9e(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function S9e(t,e,r){var n=t.read_shift(1)>>>5&3,a=t.read_shift(r&&r.biff==2?1:2);return[n,a]}function j9e(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function T9e(t,e,r){var n=(t[t.l++]&96)>>5,a=t.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[n,a]}var C9e=Kd,k9e=Kd,I9e=Kd;function kw(t,e,r){return t.l+=2,[HLe(t)]}function lD(t){return t.l+=6,[]}var O9e=kw,R9e=lD,P9e=lD,D9e=kw;function Sie(t){return t.l+=2,[sie(t),t.read_shift(2)&1]}var M9e=kw,L9e=Sie,F9e=lD,B9e=kw,U9e=kw,z9e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function V9e(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),a=t.read_shift(2),s=t.read_shift(2),o=z9e[r>>2&31];return{ixti:e,coltype:r&3,rt:o,idx:n,c:a,C:s}}function $9e(t){return t.l+=2,[t.read_shift(4)]}function H9e(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function q9e(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function G9e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function W9e(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function K9e(t){return t.l+=4,[0,0]}var sH={1:{n:"PtgExp",f:h9e},2:{n:"PtgTbl",f:I9e},3:{n:"PtgAdd",f:ai},4:{n:"PtgSub",f:ai},5:{n:"PtgMul",f:ai},6:{n:"PtgDiv",f:ai},7:{n:"PtgPower",f:ai},8:{n:"PtgConcat",f:ai},9:{n:"PtgLt",f:ai},10:{n:"PtgLe",f:ai},11:{n:"PtgEq",f:ai},12:{n:"PtgGe",f:ai},13:{n:"PtgGt",f:ai},14:{n:"PtgNe",f:ai},15:{n:"PtgIsect",f:ai},16:{n:"PtgUnion",f:ai},17:{n:"PtgRange",f:ai},18:{n:"PtgUplus",f:ai},19:{n:"PtgUminus",f:ai},20:{n:"PtgPercent",f:ai},21:{n:"PtgParen",f:ai},22:{n:"PtgMissArg",f:ai},23:{n:"PtgStr",f:v9e},26:{n:"PtgSheet",f:H9e},27:{n:"PtgEndSheet",f:q9e},28:{n:"PtgErr",f:m9e},29:{n:"PtgBool",f:g9e},30:{n:"PtgInt",f:p9e},31:{n:"PtgNum",f:x9e},32:{n:"PtgArray",f:QLe},33:{n:"PtgFunc",f:c9e},34:{n:"PtgFuncVar",f:u9e},35:{n:"PtgName",f:_9e},36:{n:"PtgRef",f:i9e},37:{n:"PtgArea",f:WLe},38:{n:"PtgMemArea",f:A9e},39:{n:"PtgMemErr",f:C9e},40:{n:"PtgMemNoMem",f:k9e},41:{n:"PtgMemFunc",f:S9e},42:{n:"PtgRefErr",f:j9e},43:{n:"PtgAreaErr",f:XLe},44:{n:"PtgRefN",f:o9e},45:{n:"PtgAreaN",f:ZLe},46:{n:"PtgMemAreaN",f:G9e},47:{n:"PtgMemNoMemN",f:W9e},57:{n:"PtgNameX",f:N9e},58:{n:"PtgRef3d",f:l9e},59:{n:"PtgArea3d",f:KLe},60:{n:"PtgRefErr3d",f:T9e},61:{n:"PtgAreaErr3d",f:YLe},255:{}},X9e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Y9e={1:{n:"PtgElfLel",f:Sie},2:{n:"PtgElfRw",f:B9e},3:{n:"PtgElfCol",f:O9e},6:{n:"PtgElfRwV",f:U9e},7:{n:"PtgElfColV",f:D9e},10:{n:"PtgElfRadical",f:M9e},11:{n:"PtgElfRadicalS",f:F9e},13:{n:"PtgElfColS",f:R9e},15:{n:"PtgElfColSV",f:P9e},16:{n:"PtgElfRadicalLel",f:L9e},25:{n:"PtgList",f:V9e},29:{n:"PtgSxName",f:$9e},255:{}},Z9e={0:{n:"PtgAttrNoop",f:K9e},1:{n:"PtgAttrSemi",f:n9e},2:{n:"PtgAttrIf",f:t9e},4:{n:"PtgAttrChoose",f:JLe},8:{n:"PtgAttrGoto",f:e9e},16:{n:"PtgAttrSum",f:f9e},32:{n:"PtgAttrBaxcel",f:aH},33:{n:"PtgAttrBaxcel",f:aH},64:{n:"PtgAttrSpace",f:a9e},65:{n:"PtgAttrSpaceSemi",f:s9e},128:{n:"PtgAttrIfError",f:r9e},255:{}};function Q9e(t,e,r,n){if(n.biff<8)return Kd(t,e);for(var a=t.l+e,s=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=w9e(t,0,n),s.push(r[o][1]);break;case"PtgMemArea":r[o][2]=y9e(t,r[o][1],n),s.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=t.read_shift(4),s.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return e=a-t.l,e!==0&&s.push(Kd(t,e)),s}function J9e(t,e,r){for(var n=t.l+e,a,s,o=[];n!=t.l;)e=n-t.l,s=t[t.l],a=sH[s]||sH[X9e[s]],(s===24||s===25)&&(a=(s===24?Y9e:Z9e)[t[t.l+1]]),!a||!a.f?Kd(t,e):o.push([a.n,a.f(t,e,r)]);return o}function eFe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],a=[],s=0;s<n.length;++s){var o=n[s];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}e.push(a.join(","))}return e.join(";")}var tFe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function rFe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function jie(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(t[n[0]][0]){case 357:return a=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[n[0]][0][3]?(a=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function iH(t,e,r){var n=jie(t,e,r);return n=="#REF"?n:rFe(n,r)}function Rx(t,e,r,n,a){var s=a&&a.biff||8,o={s:{c:0,r:0}},l=[],c,u,d,h=0,p=0,g,b="";if(!t[0]||!t[0][0])return"";for(var w=-1,_="",N=0,S=t[0].length;N<S;++N){var T=t[0][N];switch(T[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),w>=0){switch(t[0][w][1][0]){case 0:_=Os(" ",t[0][w][1][1]);break;case 1:_=Os("\r",t[0][w][1][1]);break;default:if(_="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}u=u+_,w=-1}l.push(u+tFe[T[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=cb(T[1][1],o,a),l.push(ub(d,s));break;case"PtgRefN":d=r?cb(T[1][1],r,a):T[1][1],l.push(ub(d,s));break;case"PtgRef3d":h=T[1][1],d=cb(T[1][2],o,a),b=iH(n,h,a),l.push(b+"!"+ub(d,s));break;case"PtgFunc":case"PtgFuncVar":var R=T[1][0],z=T[1][1];R||(R=0),R&=127;var G=R==0?[]:l.slice(-R);l.length-=R,z==="User"&&(z=G.shift()),l.push(z+"("+G.join(",")+")");break;case"PtgBool":l.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(T[1]);break;case"PtgNum":l.push(String(T[1]));break;case"PtgStr":l.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(T[1]);break;case"PtgAreaN":g=H$(T[1][1],r?{s:r}:o,a),l.push(hT(g,a));break;case"PtgArea":g=H$(T[1][1],o,a),l.push(hT(g,a));break;case"PtgArea3d":h=T[1][1],g=T[1][2],b=iH(n,h,a),l.push(b+"!"+hT(g,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=T[1][2];var O=(n.names||[])[p-1]||(n[0]||[])[p],D=O?O.Name:"SH33TJSNAME"+String(p);D&&D.slice(0,6)=="_xlfn."&&!a.xlfn&&(D=D.slice(6)),l.push(D);break;case"PtgNameX":var I=T[1][1];p=T[1][2];var V;if(a.biff<=5)I<0&&(I=-I),n[I]&&(V=n[I][p]);else{var P="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][p]&&n[I][p].itab>0&&(P=n.SheetNames[n[I][p].itab-1]+"!"):P=n.SheetNames[p-1]+"!"),n[I]&&n[I][p])P+=n[I][p].Name;else if(n[0]&&n[0][p])P+=n[0][p].Name;else{var B=(jie(n,I,a)||"").split(";;");B[p-1]?P=B[p-1]:P+="SH33TJSERRX"}l.push(P);break}V||(V={Name:"SH33TJSERRY"}),l.push(V.Name);break;case"PtgParen":var F="(",ee=")";if(w>=0){switch(_="",t[0][w][1][0]){case 2:F=Os(" ",t[0][w][1][1])+F;break;case 3:F=Os("\r",t[0][w][1][1])+F;break;case 4:ee=Os(" ",t[0][w][1][1])+ee;break;case 5:ee=Os("\r",t[0][w][1][1])+ee;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][w][1][0])}w=-1}l.push(F+l.pop()+ee);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":d={c:T[1][1],r:T[1][0]};var Z={c:r.c,r:r.r};if(n.sharedf[Sa(d)]){var ce=n.sharedf[Sa(d)];l.push(Rx(ce,o,Z,n,a))}else{var ne=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){l.push(Rx(u[1],o,Z,n,a)),ne=!0;break}ne||l.push(T[1])}break;case"PtgArray":l.push("{"+eFe(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=N;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&w>=0&&ae.indexOf(t[0][N][0])==-1){T=t[0][w];var me=!0;switch(T[1][0]){case 4:me=!1;case 0:_=Os(" ",T[1][1]);break;case 5:me=!1;case 1:_=Os("\r",T[1][1]);break;default:if(_="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}l.push((me?_:"")+l.pop()+(me?"":_)),w=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function nFe(t){if(t==null){var e=Rt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return $p(t);return $p(0)}function aFe(t,e,r,n,a){var s=Hp(e,r,a),o=nFe(t.v),l=Rt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Rt(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=Eo([s,o,l,u]);return h}function lS(t,e,r){var n=t.read_shift(4),a=J9e(t,n,r),s=t.read_shift(4),o=s>0?Q9e(t,s,a,r):null;return[a,o]}var sFe=lS,cS=lS,iFe=lS,oFe=lS,lFe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Tie={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cFe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function uFe(t){var e="of:="+t.replace(iD,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function dFe(t){return t.replace(/\./,"!")}var db=typeof Map<"u";function cD(t,e,r){var n=0,a=t.length;if(r){if(db?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var s=db?r.get(e):r[e];n<s.length;++n)if(t[s[n]].t===e)return t.Count++,s[n]}}else for(;n<a;++n)if(t[n].t===e)return t.Count++,n;return t[a]={t:e},t.Count++,t.Unique++,r&&(db?(r.has(e)||r.set(e,[]),r.get(e).push(a)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(a))),a}function uS(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Yf=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=P3(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=H8(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Cie(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function xm(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],a=60,s=t.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){Ese(e.z,a),r.ssf[a]=e.z,r.revssf[e.z]=n=a;break}}for(a=0;a!=s;++a)if(t[a].numFmtId===n)return a;return t[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function fFe(t,e,r){if(t&&t["!ref"]){var n=ns(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function hFe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+gi(t[r])+'"/>';return e+"</mergeCells>"}function mFe(t,e,r,n,a){var s=!1,o={},l=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[r];try{e.Workbook&&(c=e.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,o.codeName=dy(Ea(c))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),l=(l||"")+hr("outlinePr",null,u)}!s&&!l||(a[a.length]=hr("sheetPr",l,o))}var pFe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],gFe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function xFe(t){var e={sheet:1};return pFe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),gFe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=fie(t.password).toString(16).toUpperCase()),hr("sheetProtection",null,e)}function vFe(t){return Cie(t),hr("pageMargins",null,t)}function bFe(t,e){for(var r=["<cols>"],n,a=0;a!=e.length;++a)(n=e[a])&&(r[r.length]=hr("col",null,uS(a,n)));return r[r.length]="</cols>",r.join("")}function yFe(t,e,r,n){var a=typeof t.ref=="string"?t.ref:gi(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,o=Bc(a);o.s.r==o.e.r&&(o.e.r=Bc(e["!ref"]).e.r,a=gi(o));for(var l=0;l<s.length;++l){var c=s[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),hr("autoFilter",null,{ref:a})}function wFe(t,e,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),hr("sheetViews",hr("sheetView",null,a),{})}function _Fe(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var a="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":a=t.v?"1":"0";break;case"n":a=""+t.v;break;case"e":a=Cw[t.v];break;case"d":n&&n.cellDates?a=bl(t.v,-1).toISOString():(t=Yl(t),t.t="n",a=""+(t.v=Xl(bl(t.v)))),typeof t.z>"u"&&(t.z=Ms[14]);break;default:a=t.v;break}var l=Ao("v",Ea(a)),c={r:e},u=xm(n.cellXfs,t,n);switch(u!==0&&(c.s=u),t.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Ao("v",""+cD(n.Strings,t.v,n.revStrings)),c.t="s";break}c.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;l=hr("f",Ea(t.f),d)+(t.v!=null?l:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(c.cm=1),hr("c",l,c)}function NFe(t,e,r,n){var a=[],s=[],o=ns(t["!ref"]),l="",c,u="",d=[],h=0,p=0,g=t["!rows"],b=Array.isArray(t),w={r:u},_,N=-1;for(p=o.s.c;p<=o.e.c;++p)d[p]=Ho(p);for(h=o.s.r;h<=o.e.r;++h){for(s=[],u=To(h),p=o.s.c;p<=o.e.c;++p){c=d[p]+u;var S=b?(t[h]||[])[p]:t[c];S!==void 0&&(l=_Fe(S,c,t,e))!=null&&s.push(l)}(s.length>0||g&&g[h])&&(w={r:u},g&&g[h]&&(_=g[h],_.hidden&&(w.hidden=1),N=-1,_.hpx?N=D3(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(w.ht=N,w.customHeight=1),_.level&&(w.outlineLevel=_.level)),a[a.length]=hr("row",s.join(""),w))}if(g)for(;h<g.length;++h)g&&g[h]&&(w={r:h+1},_=g[h],_.hidden&&(w.hidden=1),N=-1,_.hpx?N=D3(_.hpx):_.hpt&&(N=_.hpt),N>-1&&(w.ht=N,w.customHeight=1),_.level&&(w.outlineLevel=_.level),a[a.length]=hr("row","",w));return a.join("")}function kie(t,e,r,n){var a=[bi,hr("worksheet",null,{xmlns:hv[0],"xmlns:r":Qi.r})],s=r.SheetNames[t],o=0,l="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=ns(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=gi(d)}n||(n={}),c["!comments"]=[];var h=[];mFe(c,r,t,e,a),a[a.length]=hr("dimension",null,{ref:u}),a[a.length]=wFe(c,e,t,r),e.sheetFormat&&(a[a.length]=hr("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=bFe(c,c["!cols"])),a[o=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=NFe(c,e),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),c["!protect"]&&(a[a.length]=xFe(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=yFe(c["!autofilter"],c,r,t)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=hFe(c["!merges"]));var p=-1,g,b=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(w){w[1].Target&&(g={ref:w[0]},w[1].Target.charAt(0)!="#"&&(b=ba(n,-1,Ea(w[1].Target).replace(/#.*$/,""),Jn.HLINK),g["r:id"]="rId"+b),(p=w[1].Target.indexOf("#"))>-1&&(g.location=Ea(w[1].Target.slice(p+1))),w[1].Tooltip&&(g.tooltip=Ea(w[1].Tooltip)),a[a.length]=hr("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=vFe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(a[a.length]=Ao("ignoredErrors",hr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=ba(n,-1,"../drawings/drawing"+(t+1)+".xml",Jn.DRAW),a[a.length]=hr("drawing",null,{"r:id":"rId"+b}),c["!drawing"]=h),c["!comments"].length>0&&(b=ba(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Jn.VML),a[a.length]=hr("legacyDrawing",null,{"r:id":"rId"+b}),c["!legacy"]=b),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function EFe(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var a=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function AFe(t,e,r){var n=Rt(145),a=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var s=320;a.hpx?s=D3(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,p=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Sa(u)];b&&(h<0&&(h=g),p=g)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,p))}var w=n.l;return n.l=c,n.write_shift(4,l),n.l=w,n.length>n.l?n.slice(0,n.l):n}function SFe(t,e,r,n){var a=AFe(n,r,e);(a.length>17||(e["!rows"]||[])[n])&&rr(t,0,a)}var jFe=xg,TFe=pv;function CFe(){}function kFe(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=UDe(t),r}function IFe(t,e,r){r==null&&(r=Rt(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return I3({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),qse(t,r),r.slice(0,r.l)}function OFe(t){var e=Iu(t);return[e]}function RFe(t,e,r){return r==null&&(r=Rt(8)),mg(e,r)}function PFe(t){var e=pg(t);return[e]}function DFe(t,e,r){return r==null&&(r=Rt(4)),gg(e,r)}function MFe(t){var e=Iu(t),r=t.read_shift(1);return[e,r,"b"]}function LFe(t,e,r){return r==null&&(r=Rt(9)),mg(e,r),r.write_shift(1,t.v?1:0),r}function FFe(t){var e=pg(t),r=t.read_shift(1);return[e,r,"b"]}function BFe(t,e,r){return r==null&&(r=Rt(5)),gg(e,r),r.write_shift(1,t.v?1:0),r}function UFe(t){var e=Iu(t),r=t.read_shift(1);return[e,r,"e"]}function zFe(t,e,r){return r==null&&(r=Rt(9)),mg(e,r),r.write_shift(1,t.v),r}function VFe(t){var e=pg(t),r=t.read_shift(1);return[e,r,"e"]}function $Fe(t,e,r){return r==null&&(r=Rt(8)),gg(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function HFe(t){var e=Iu(t),r=t.read_shift(4);return[e,r,"s"]}function qFe(t,e,r){return r==null&&(r=Rt(12)),mg(e,r),r.write_shift(4,e.v),r}function GFe(t){var e=pg(t),r=t.read_shift(4);return[e,r,"s"]}function WFe(t,e,r){return r==null&&(r=Rt(8)),gg(e,r),r.write_shift(4,e.v),r}function KFe(t){var e=Iu(t),r=gv(t);return[e,r,"n"]}function XFe(t,e,r){return r==null&&(r=Rt(16)),mg(e,r),$p(t.v,r),r}function YFe(t){var e=pg(t),r=gv(t);return[e,r,"n"]}function ZFe(t,e,r){return r==null&&(r=Rt(12)),gg(e,r),$p(t.v,r),r}function QFe(t){var e=Iu(t),r=Gse(t);return[e,r,"n"]}function JFe(t,e,r){return r==null&&(r=Rt(12)),mg(e,r),Wse(t.v,r),r}function eBe(t){var e=pg(t),r=Gse(t);return[e,r,"n"]}function tBe(t,e,r){return r==null&&(r=Rt(8)),gg(e,r),Wse(t.v,r),r}function rBe(t){var e=Iu(t),r=tD(t);return[e,r,"is"]}function nBe(t){var e=Iu(t),r=qo(t);return[e,r,"str"]}function aBe(t,e,r){return r==null&&(r=Rt(12+4*t.v.length)),mg(e,r),eo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function sBe(t){var e=pg(t),r=qo(t);return[e,r,"str"]}function iBe(t,e,r){return r==null&&(r=Rt(8+4*t.v.length)),gg(e,r),eo(t.v,r),r.length>r.l?r.slice(0,r.l):r}function oBe(t,e,r){var n=t.l+e,a=Iu(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"b"];if(r.cellFormula){t.l+=2;var l=cS(t,n-t.l,r);o[3]=Rx(l,null,a,r.supbooks,r)}else t.l=n;return o}function lBe(t,e,r){var n=t.l+e,a=Iu(t);a.r=r["!row"];var s=t.read_shift(1),o=[a,s,"e"];if(r.cellFormula){t.l+=2;var l=cS(t,n-t.l,r);o[3]=Rx(l,null,a,r.supbooks,r)}else t.l=n;return o}function cBe(t,e,r){var n=t.l+e,a=Iu(t);a.r=r["!row"];var s=gv(t),o=[a,s,"n"];if(r.cellFormula){t.l+=2;var l=cS(t,n-t.l,r);o[3]=Rx(l,null,a,r.supbooks,r)}else t.l=n;return o}function uBe(t,e,r){var n=t.l+e,a=Iu(t);a.r=r["!row"];var s=qo(t),o=[a,s,"str"];if(r.cellFormula){t.l+=2;var l=cS(t,n-t.l,r);o[3]=Rx(l,null,a,r.supbooks,r)}else t.l=n;return o}var dBe=xg,fBe=pv;function hBe(t,e){return e==null&&(e=Rt(4)),e.write_shift(4,t),e}function mBe(t,e){var r=t.l+e,n=xg(t),a=rD(t),s=qo(t),o=qo(t),l=qo(t);t.l=r;var c={rfx:n,relId:a,loc:s,display:l};return o&&(c.Tooltip=o),c}function pBe(t,e){var r=Rt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));pv({s:Ji(t[0]),e:Ji(t[0])},r),nD("rId"+e,r);var n=t[1].Target.indexOf("#"),a=n==-1?"":t[1].Target.slice(n+1);return eo(a||"",r),eo(t[1].Tooltip||"",r),eo("",r),r.slice(0,r.l)}function gBe(){}function xBe(t,e,r){var n=t.l+e,a=Kse(t),s=t.read_shift(1),o=[a];if(o[2]=s,r.cellFormula){var l=sFe(t,n-t.l,r);o[1]=l}else t.l=n;return o}function vBe(t,e,r){var n=t.l+e,a=xg(t),s=[a];if(r.cellFormula){var o=oFe(t,n-t.l,r);s[1]=o,t.l=n}else t.l=n;return s}function bBe(t,e,r){r==null&&(r=Rt(18));var n=uS(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return e.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),e.level&&(a|=e.level<<8),r.write_shift(2,a),r}var Iie=["left","right","top","bottom","header","footer"];function yBe(t){var e={};return Iie.forEach(function(r){e[r]=gv(t)}),e}function wBe(t,e){return e==null&&(e=Rt(6*8)),Cie(t),Iie.forEach(function(r){$p(t[r],e)}),e}function _Be(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function NBe(t,e,r){r==null&&(r=Rt(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function EBe(t){var e=Rt(24);return e.write_shift(4,4),e.write_shift(4,1),pv(t,e),e}function ABe(t,e){return e==null&&(e=Rt(16*4+2)),e.write_shift(2,t.password?fie(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function SBe(){}function jBe(){}function TBe(t,e,r,n,a,s,o){if(e.v===void 0)return!1;var l="";switch(e.t){case"b":l=e.v?"1":"0";break;case"d":e=Yl(e),e.z=e.z||Ms[14],e.v=Xl(bl(e.v)),e.t="n";break;case"n":case"e":l=""+e.v;break;default:l=e.v;break}var c={r,c:n};switch(c.s=xm(a.cellXfs,e,a),e.l&&s["!links"].push([Sa(c),e.l]),e.c&&s["!comments"].push([Sa(c),e.c]),e.t){case"s":case"str":return a.bookSST?(l=cD(a.Strings,e.v,a.revStrings),c.t="s",c.v=l,o?rr(t,18,WFe(e,c)):rr(t,7,qFe(e,c))):(c.t="str",o?rr(t,17,iBe(e,c)):rr(t,6,aBe(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?rr(t,13,tBe(e,c)):rr(t,2,JFe(e,c)):o?rr(t,16,ZFe(e,c)):rr(t,5,XFe(e,c)),!0;case"b":return c.t="b",o?rr(t,15,BFe(e,c)):rr(t,4,LFe(e,c)),!0;case"e":return c.t="e",o?rr(t,14,$Fe(e,c)):rr(t,3,zFe(e,c)),!0}return o?rr(t,12,DFe(e,c)):rr(t,1,RFe(e,c)),!0}function CBe(t,e,r,n){var a=ns(e["!ref"]||"A1"),s,o="",l=[];rr(t,145);var c=Array.isArray(e),u=a.e.r;e["!rows"]&&(u=Math.max(a.e.r,e["!rows"].length-1));for(var d=a.s.r;d<=u;++d){o=To(d),SFe(t,e,a,d);var h=!1;if(d<=a.e.r)for(var p=a.s.c;p<=a.e.c;++p){d===a.s.r&&(l[p]=Ho(p)),s=l[p]+o;var g=c?(e[d]||[])[p]:e[s];if(!g){h=!1;continue}h=TBe(t,g,d,p,n,e,h)}}rr(t,146)}function kBe(t,e){!e||!e["!merges"]||(rr(t,177,hBe(e["!merges"].length)),e["!merges"].forEach(function(r){rr(t,176,fBe(r))}),rr(t,178))}function IBe(t,e){!e||!e["!cols"]||(rr(t,390),e["!cols"].forEach(function(r,n){r&&rr(t,60,bBe(n,r))}),rr(t,391))}function OBe(t,e){!e||!e["!ref"]||(rr(t,648),rr(t,649,EBe(ns(e["!ref"]))),rr(t,650))}function RBe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var a=ba(r,-1,n[1].Target.replace(/#.*$/,""),Jn.HLINK);rr(t,494,pBe(n,a))}}),delete e["!links"]}function PBe(t,e,r,n){if(e["!comments"].length>0){var a=ba(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Jn.VML);rr(t,551,nD("rId"+a)),e["!legacy"]=a}}function DBe(t,e,r,n){if(e["!autofilter"]){var a=e["!autofilter"],s=typeof a.ref=="string"?a.ref:gi(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Bc(s);l.s.r==l.e.r&&(l.e.r=Bc(e["!ref"]).e.r,s=gi(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),rr(t,161,pv(ns(s))),rr(t,162)}}function MBe(t,e,r){rr(t,133),rr(t,137,NBe(e,r)),rr(t,138),rr(t,134)}function LBe(t,e){e["!protect"]&&rr(t,535,ABe(e["!protect"]))}function FBe(t,e,r,n){var a=Gl(),s=r.SheetNames[t],o=r.Sheets[s]||{},l=s;try{r&&r.Workbook&&(l=r.Workbook.Sheets[t].CodeName||l)}catch{}var c=ns(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],rr(a,129),(r.vbaraw||o["!outline"])&&rr(a,147,IFe(l,o["!outline"])),rr(a,148,TFe(c)),MBe(a,o,r.Workbook),IBe(a,o),CBe(a,o,t,e),LBe(a,o),DBe(a,o,r,t),kBe(a,o),RBe(a,o,n),o["!margins"]&&rr(a,476,wBe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&OBe(a,o),PBe(a,o,t,n),rr(a,130),a.end()}function BBe(t,e){t.l+=10;var r=qo(t);return{name:r}}var UBe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function zBe(t){return!t.Workbook||!t.Workbook.WBProps?"false":vDe(t.Workbook.WBProps.date1904)?"true":"false"}var VBe="][*?/\\".split("");function Oie(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return VBe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function $Be(t,e,r){t.forEach(function(n,a){Oie(n);for(var s=0;s<a;++s)if(n==t[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=e&&e[a]&&e[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function HBe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];$Be(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)fFe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function Rie(t){var e=[bi];e[e.length]=hr("workbook",null,{xmlns:hv[0],"xmlns:r":Qi.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(UBe.forEach(function(l){t.Workbook.WBProps[l[0]]!=null&&t.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=t.Workbook.WBProps[l[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=hr("workbookPr",null,n);var a=t.Workbook&&t.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:Ea(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=hr("sheet",null,o)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(e[e.length]=hr("definedName",Ea(l.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function qBe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=$8(t),r.name=qo(t),r}function GBe(t,e){return e||(e=Rt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),nD(t.strRelID,e),eo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function WBe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var a=e>8?qo(t):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function KBe(t,e){e||(e=Rt(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),qse(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function XBe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var a=t.read_shift(4),s=zDe(t),o=iFe(t,0,r),l=rD(t);t.l=n;var c={Name:s,Ptg:o};return a<268435455&&(c.Sheet=a),l&&(c.Comment=l),c}function YBe(t,e){rr(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};rr(t,156,GBe(a))}rr(t,144)}function ZBe(t,e){e||(e=Rt(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return eo("SheetJS",e),eo(N3.version,e),eo(N3.version,e),eo("7262",e),e.length>e.l?e.slice(0,e.l):e}function QBe(t,e){e||(e=Rt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function JBe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(rr(t,135),rr(t,158,QBe(a)),rr(t,136))}}function eUe(t,e){var r=Gl();return rr(r,131),rr(r,128,ZBe()),rr(r,153,KBe(t.Workbook&&t.Workbook.WBProps||null)),JBe(r,t),YBe(r,t),rr(r,132),r.end()}function tUe(t,e,r){return(e.slice(-4)===".bin"?eUe:Rie)(t)}function rUe(t,e,r,n,a){return(e.slice(-4)===".bin"?FBe:kie)(t,r,n,a)}function nUe(t,e,r){return(e.slice(-4)===".bin"?wLe:pie)(t,r)}function aUe(t,e,r){return(e.slice(-4)===".bin"?KMe:die)(t,r)}function sUe(t,e,r){return(e.slice(-4)===".bin"?LLe:yie)(t)}function iUe(t){return(t.slice(-4)===".bin"?CLe:vie)()}function oUe(t,e){var r=[];return t.Props&&r.push(nMe(t.Props,e)),t.Custprops&&r.push(aMe(t.Props,t.Custprops)),r.join("")}function lUe(){return""}function cUe(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,a){var s=[];s.push(hr("NumberFormat",null,{"ss:Format":Ea(Ms[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(hr("Style",s.join(""),o))}),hr("Styles",r.join(""))}function Pie(t){return hr("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+oD(t.Ref,{r:0,c:0})})}function uUe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var a=e[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Pie(a)))}return hr("Names",r.join(""))}function dUe(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||s.push(Pie(l)))}return s.join("")}function fUe(t,e,r,n){if(!t)return"";var a=[];if(t["!margins"]&&(a.push("<PageSetup>"),t["!margins"].header&&a.push(hr("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&a.push(hr("Footer",null,{"x:Margin":t["!margins"].footer})),a.push(hr("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(hr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),t["!protect"]&&(a.push(Ao("ProtectContents","True")),t["!protect"].objects&&a.push(Ao("ProtectObjects","True")),t["!protect"].scenarios&&a.push(Ao("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?a.push(Ao("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&a.push(Ao("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":hr("WorksheetOptions",a.join(""),{xmlns:yc.x})}function hUe(t){return t.map(function(e){var r=xDe(e.t||""),n=hr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return hr("Comment",n,{"ss:Author":e.a})}).join("")}function mUe(t,e,r,n,a,s,o){if(!t||t.v==null&&t.f==null)return"";var l={};if(t.f&&(l["ss:Formula"]="="+Ea(oD(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var c=Ji(t.F.slice(e.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(t.l&&t.l.Target&&(l["ss:HRef"]=Ea(t.l.Target),t.l.Tooltip&&(l["x:HRefScreenTip"]=Ea(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=o.c||u[d].s.r!=o.r||(u[d].e.c>u[d].s.c&&(l["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(l["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",p="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",p=String(t.v);break;case"b":h="Boolean",p=t.v?"1":"0";break;case"e":h="Error",p=Cw[t.v];break;case"d":h="DateTime",p=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Ms[14]);break;case"s":h="String",p=gDe(t.v||"");break}var g=xm(n.cellXfs,t,n);l["ss:StyleID"]="s"+(21+g),l["ss:Index"]=o.c+1;var b=t.v!=null?p:"",w=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(w+=hUe(t.c)),hr("Cell",w,l)}function pUe(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=mie(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function gUe(t,e,r,n){if(!t["!ref"])return"";var a=ns(t["!ref"]),s=t["!merges"]||[],o=0,l=[];t["!cols"]&&t["!cols"].forEach(function(_,N){sD(_);var S=!!_.width,T=uS(N,_),R={"ss:Index":N+1};S&&(R["ss:Width"]=R3(T.width)),_.hidden&&(R["ss:Hidden"]="1"),l.push(hr("Column",null,R))});for(var c=Array.isArray(t),u=a.s.r;u<=a.e.r;++u){for(var d=[pUe(u,(t["!rows"]||[])[u])],h=a.s.c;h<=a.e.c;++h){var p=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>u)&&!(s[o].e.c<h)&&!(s[o].e.r<u)){(s[o].s.c!=h||s[o].s.r!=u)&&(p=!0);break}if(!p){var g={r:u,c:h},b=Sa(g),w=c?(t[u]||[])[h]:t[b];d.push(mUe(w,b,t,e,r,n,g))}}d.push("</Row>"),d.length>2&&l.push(d.join(""))}return l.join("")}function xUe(t,e,r){var n=[],a=r.SheetNames[t],s=r.Sheets[a],o=s?dUe(s,e,t,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=s?gUe(s,e,t,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(fUe(s,e,t,r)),n.join("")}function vUe(t,e){e||(e={}),t.SSF||(t.SSF=Yl(Ms)),t.SSF&&(sS(),aS(t.SSF),e.revssf=iS(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],xm(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(oUe(t,e)),r.push(lUe()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(hr("Worksheet",xUe(n,e,t),{"ss:Name":Ea(t.SheetNames[n])}));return r[2]=cUe(t,e),r[3]=uUe(t),bi+hr("Workbook",r.join(""),{xmlns:yc.ss,"xmlns:o":yc.o,"xmlns:x":yc.x,"xmlns:ss":yc.ss,"xmlns:dt":yc.dt,"xmlns:html":yc.html})}var gT={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function bUe(t,e){var r=[],n=[],a=[],s=0,o,l=R$(G$,"n"),c=R$(W$,"n");if(t.Props)for(o=Co(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=Co(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(l,o[s])?r:Object.prototype.hasOwnProperty.call(c,o[s])?n:a).push([o[s],t.Custprops[o[s]]]);var u=[];for(s=0;s<a.length;++s)aie.indexOf(a[s][0])>-1||tie.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Ia.utils.cfb_add(e,"/SummaryInformation",Q$(n,gT.SI,c,W$)),(r.length||u.length)&&Ia.utils.cfb_add(e,"/DocumentSummaryInformation",Q$(r,gT.DSI,l,G$,u.length?u:null,gT.UDI))}function yUe(t,e){var r=e||{},n=Ia.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Ia.utils.cfb_add(n,a,Die(t,r)),r.biff==8&&(t.Props||t.Custprops)&&bUe(t,n),r.biff==8&&t.vbaraw&&FLe(n,Ia.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var wUe={0:{f:EFe},1:{f:OFe},2:{f:QFe},3:{f:UFe},4:{f:MFe},5:{f:KFe},6:{f:nBe},7:{f:HFe},8:{f:uBe},9:{f:cBe},10:{f:oBe},11:{f:lBe},12:{f:PFe},13:{f:eBe},14:{f:VFe},15:{f:FFe},16:{f:YFe},17:{f:sBe},18:{f:GFe},19:{f:tD},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:XBe},40:{},42:{},43:{f:nLe},44:{f:tLe},45:{f:iLe},46:{f:lLe},47:{f:oLe},48:{},49:{f:PDe},50:{},51:{f:ELe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:DMe},62:{f:rBe},63:{f:kLe},64:{f:SBe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Kd,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:_Be},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:kFe},148:{f:jFe,p:16},151:{f:gBe},152:{},153:{f:WBe},154:{},155:{},156:{f:qBe},157:{},158:{},159:{T:1,f:qMe},160:{T:-1},161:{T:1,f:xg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:dBe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:_Le},336:{T:-1},337:{f:jLe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:$8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:CMe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:xBe},427:{f:vBe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:yBe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:CFe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:mBe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:$8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:DLe},633:{T:1},634:{T:-1},635:{T:1,f:RLe},636:{T:-1},637:{f:FDe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:BBe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:jBe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function mr(t,e,r,n){var a=e;if(!isNaN(a)){var s=n||(r||[]).length||0,o=t.next(4);o.write_shift(2,a),o.write_shift(2,s),s>0&&Q7(r)&&t.push(r)}}function _Ue(t,e,r,n){var a=(r||[]).length||0;if(a<=8224)return mr(t,e,r,a);var s=e;if(!isNaN(s)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var d=t.next(4);for(d.write_shift(2,s),d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u;c<a;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;d.write_shift(2,u),t.push(r.slice(c,c+u)),c+=u}}}function Iw(t,e,r){return t||(t=Rt(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function NUe(t,e,r,n){var a=Rt(9);return Iw(a,t,e),iie(r,n||"b",a),a}function EUe(t,e,r){var n=Rt(8+2*r.length);return Iw(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function AUe(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var a=e.t=="d"?Xl(bl(e.v)):e.v;a==(a|0)&&a>=0&&a<65536?mr(t,2,BMe(r,n,a)):mr(t,3,FMe(r,n,a));return;case"b":case"e":mr(t,5,NUe(r,n,e.v,e.t));return;case"s":case"str":mr(t,4,EUe(r,n,(e.v||"").slice(0,255)));return}mr(t,1,Iw(null,r,n))}function SUe(t,e,r,n){var a=Array.isArray(e),s=ns(e["!ref"]||"A1"),o,l="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=gi(s)}for(var u=s.s.r;u<=s.e.r;++u){l=To(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Ho(d)),o=c[d]+l;var h=a?(e[u]||[])[d]:e[o];h&&AUe(t,h,u,d)}}}function jUe(t,e){for(var r=e||{},n=Gl(),a=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return mr(n,r.biff==4?1033:r.biff==3?521:9,aD(t,16,r)),SUe(n,t.Sheets[t.SheetNames[a]],a,r),mr(n,10),n.end()}function TUe(t,e,r){mr(t,49,wMe({sz:12,name:"Arial"},r))}function CUe(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)e[a]!=null&&mr(t,1054,EMe(a,e[a],r))})}function kUe(t,e){var r=Rt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),mr(t,2151,r),r=Rt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),cie(ns(e["!ref"]||"A1"),r),r.write_shift(4,4),mr(t,2152,r)}function IUe(t,e){for(var r=0;r<16;++r)mr(t,224,eH({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){mr(t,224,eH(n,0,e))})}function OUe(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];mr(t,440,OMe(n)),n[1].Tooltip&&mr(t,2048,RMe(n))}delete e["!links"]}function RUe(t,e){if(e){var r=0;e.forEach(function(n,a){++r<=256&&n&&mr(t,125,MMe(uS(a,n),a))})}}function PUe(t,e,r,n,a){var s=16+xm(a.cellXfs,e,a);if(e.v==null&&!e.bf){mr(t,513,Hp(r,n,s));return}if(e.bf)mr(t,6,aFe(e,r,n,a,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Xl(bl(e.v)):e.v;mr(t,515,TMe(r,n,o,s));break;case"b":case"e":mr(t,517,jMe(r,n,e.v,s,a,e.t));break;case"s":case"str":if(a.bookSST){var l=cD(a.Strings,e.v,a.revStrings);mr(t,253,_Me(r,n,l,s))}else mr(t,516,NMe(r,n,(e.v||"").slice(0,255),s,a));break;default:mr(t,513,Hp(r,n,s))}}function DUe(t,e,r){var n=Gl(),a=r.SheetNames[t],s=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[t]||{},c=Array.isArray(s),u=e.biff==8,d,h="",p=[],g=ns(s["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}mr(n,2057,aD(r,16,e)),mr(n,13,su(1)),mr(n,12,su(100)),mr(n,15,cl(!0)),mr(n,17,cl(!1)),mr(n,16,$p(.001)),mr(n,95,cl(!0)),mr(n,42,cl(!1)),mr(n,43,cl(!1)),mr(n,130,su(1)),mr(n,128,SMe()),mr(n,131,cl(!1)),mr(n,132,cl(!1)),u&&RUe(n,s["!cols"]),mr(n,512,AMe(g,e)),u&&(s["!links"]=[]);for(var w=g.s.r;w<=g.e.r;++w){h=To(w);for(var _=g.s.c;_<=g.e.c;++_){w===g.s.r&&(p[_]=Ho(_)),d=p[_]+h;var N=c?(s[w]||[])[_]:s[d];N&&(PUe(n,N,w,_,e),u&&N.l&&s["!links"].push([d,N.l]))}}var S=l.CodeName||l.name||a;return u&&mr(n,574,yMe((o.Views||[])[0])),u&&(s["!merges"]||[]).length&&mr(n,229,IMe(s["!merges"])),u&&OUe(n,s),mr(n,442,lie(S)),u&&kUe(n,s),mr(n,10),n.end()}function MUe(t,e,r){var n=Gl(),a=(t||{}).Workbook||{},s=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,c=r.biff==5;if(mr(n,2057,aD(t,5,r)),r.bookType=="xla"&&mr(n,135),mr(n,225,l?su(1200):null),mr(n,193,oMe(2)),c&&mr(n,191),c&&mr(n,192),mr(n,226),mr(n,92,gMe("SheetJS",r)),mr(n,66,su(l?1200:1252)),l&&mr(n,353,su(0)),l&&mr(n,448),mr(n,317,LMe(t.SheetNames.length)),l&&t.vbaraw&&mr(n,211),l&&t.vbaraw){var u=o.CodeName||"ThisWorkbook";mr(n,442,lie(u))}mr(n,156,su(17)),mr(n,25,cl(!1)),mr(n,18,cl(!1)),mr(n,19,su(0)),l&&mr(n,431,cl(!1)),l&&mr(n,444,su(0)),mr(n,61,bMe()),mr(n,64,cl(!1)),mr(n,141,su(0)),mr(n,34,cl(zBe(t)=="true")),mr(n,14,cl(!0)),l&&mr(n,439,cl(!1)),mr(n,218,su(0)),TUe(n,t,r),CUe(n,t.SSF,r),IUe(n,r),l&&mr(n,352,cl(!1));var d=n.end(),h=Gl();l&&mr(h,140,PMe()),l&&r.Strings&&_Ue(h,252,vMe(r.Strings)),mr(h,10);var p=h.end(),g=Gl(),b=0,w=0;for(w=0;w<t.SheetNames.length;++w)b+=(l?12:11)+(l?2:1)*t.SheetNames[w].length;var _=d.length+b+p.length;for(w=0;w<t.SheetNames.length;++w){var N=s[w]||{};mr(g,133,xMe({pos:_,hs:N.Hidden||0,dt:0,name:t.SheetNames[w]},r)),_+=e[w].length}var S=g.end();if(b!=S.length)throw new Error("BS8 "+b+" != "+S.length);var T=[];return d.length&&T.push(d),S.length&&T.push(S),p.length&&T.push(p),Eo(T)}function LUe(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Yl(Ms)),t&&t.SSF&&(sS(),aS(t.SSF),r.revssf=iS(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,uD(r),r.cellXfs=[],xm(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var a=0;a<t.SheetNames.length;++a)n[n.length]=DUe(a,r,t);return n.unshift(MUe(t,n,r)),Eo(n)}function Die(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Bc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return LUe(t,e);case 4:case 3:case 2:return jUe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function FUe(t,e,r,n){for(var a=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var l=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>o)&&!(a[u].e.r<r||a[u].e.c<o)){if(a[u].s.r<r||a[u].s.c<o){l=-1;break}l=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(l<0)){var d=Sa({r,c:o}),h=n.dense?(t[r]||[])[o]:t[d],p=h&&h.v!=null&&(h.h||pDe(h.w||(fh(h),h.w)||""))||"",g={};l>1&&(g.rowspan=l),c>1&&(g.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+h.l.Target+'">'+p+"</a>")),g.id=(n.id||"sjs")+"-"+d,s.push(hr("td",p,g))}}var b="<tr>";return b+s.join("")+"</tr>"}var BUe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',UUe="</body></html>";function zUe(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function Mie(t,e){var r=e||{},n=r.header!=null?r.header:BUe,a=r.footer!=null?r.footer:UUe,s=[n],o=Bc(t["!ref"]);r.dense=Array.isArray(t),s.push(zUe(t,o,r));for(var l=o.s.r;l<=o.e.r;++l)s.push(FUe(t,o,l,r));return s.push("</table>"+a),s.join("")}function Lie(t,e,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?Ji(n.origin):n.origin;a=o.r,s=o.c}var l=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(t["!ref"]){var d=Bc(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var h=[],p=0,g=t["!rows"]||(t["!rows"]=[]),b=0,w=0,_=0,N=0,S=0,T=0;for(t["!cols"]||(t["!cols"]=[]);b<l.length&&w<c;++b){var R=l[b];if(oH(R)){if(n.display)continue;g[w]={hidden:!0}}var z=R.children;for(_=N=0;_<z.length;++_){var G=z[_];if(!(n.display&&oH(G))){var O=G.hasAttribute("data-v")?G.getAttribute("data-v"):G.hasAttribute("v")?G.getAttribute("v"):bDe(G.innerHTML),D=G.getAttribute("data-z")||G.getAttribute("z");for(p=0;p<h.length;++p){var I=h[p];I.s.c==N+s&&I.s.r<w+a&&w+a<=I.e.r&&(N=I.e.c+1-s,p=-1)}T=+G.getAttribute("colspan")||1,((S=+G.getAttribute("rowspan")||1)>1||T>1)&&h.push({s:{r:w+a,c:N+s},e:{r:w+a+(S||1)-1,c:N+s+(T||1)-1}});var V={t:"s",v:O},P=G.getAttribute("data-t")||G.getAttribute("t")||"";O!=null&&(O.length==0?V.t=P||"z":n.raw||O.trim().length==0||P=="s"||(O==="TRUE"?V={t:"b",v:!0}:O==="FALSE"?V={t:"b",v:!1}:isNaN(Xf(O))?isNaN(uy(O).getDate())||(V={t:"d",v:bl(O)},n.cellDates||(V={t:"n",v:Xl(V.v)}),V.z=n.dateNF||Ms[14]):V={t:"n",v:Xf(O)})),V.z===void 0&&D!=null&&(V.z=D);var B="",F=G.getElementsByTagName("A");if(F&&F.length)for(var ee=0;ee<F.length&&!(F[ee].hasAttribute("href")&&(B=F[ee].getAttribute("href"),B.charAt(0)!="#"));++ee);B&&B.charAt(0)!="#"&&(V.l={Target:B}),n.dense?(t[w+a]||(t[w+a]=[]),t[w+a][N+s]=V):t[Sa({c:N+s,r:w+a})]=V,u.e.c<N+s&&(u.e.c=N+s),N+=T}}++w}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,w-1+a),t["!ref"]=gi(u),w>=c&&(t["!fullref"]=gi((u.e.r=l.length-b+w-1+a,u))),t}function Fie(t,e){var r=e||{},n=r.dense?[]:{};return Lie(n,t,e)}function VUe(t,e){return hg(Fie(t,e),e)}function oH(t){var e="",r=$Ue(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function $Ue(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var HUe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return bi+e}}(),lH=function(){var t=function(s){return Ea(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,o,l){var c=[];c.push('      <table:table table:name="'+Ea(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,d=0,h=Bc(s["!ref"]||"A1"),p=s["!merges"]||[],g=0,b=Array.isArray(s);if(s["!cols"])for(d=0;d<=h.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var w="",_=s["!rows"]||[];for(u=0;u<h.s.r;++u)w=_[u]?' table:style-name="ro'+_[u].ods+'"':"",c.push("        <table:table-row"+w+`></table:table-row>
`);for(;u<=h.e.r;++u){for(w=_[u]?' table:style-name="ro'+_[u].ods+'"':"",c.push("        <table:table-row"+w+`>
`),d=0;d<h.s.c;++d)c.push(e);for(;d<=h.e.c;++d){var N=!1,S={},T="";for(g=0;g!=p.length;++g)if(!(p[g].s.c>d)&&!(p[g].s.r>u)&&!(p[g].e.c<d)&&!(p[g].e.r<u)){(p[g].s.c!=d||p[g].s.r!=u)&&(N=!0),S["table:number-columns-spanned"]=p[g].e.c-p[g].s.c+1,S["table:number-rows-spanned"]=p[g].e.r-p[g].s.r+1;break}if(N){c.push(r);continue}var R=Sa({r:u,c:d}),z=b?(s[u]||[])[d]:s[R];if(z&&z.f&&(S["table:formula"]=Ea(uFe(z.f)),z.F&&z.F.slice(0,R.length)==R)){var G=Bc(z.F);S["table:number-matrix-columns-spanned"]=G.e.c-G.s.c+1,S["table:number-matrix-rows-spanned"]=G.e.r-G.s.r+1}if(!z){c.push(e);continue}switch(z.t){case"b":T=z.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=z.v?"true":"false";break;case"n":T=z.w||String(z.v||0),S["office:value-type"]="float",S["office:value"]=z.v||0;break;case"s":case"str":T=z.v==null?"":z.v,S["office:value-type"]="string";break;case"d":T=z.w||bl(z.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=bl(z.v).toISOString(),S["table:style-name"]="ce1";break;default:c.push(e);continue}var O=t(T);if(z.l&&z.l.Target){var D=z.l.Target;D=D.charAt(0)=="#"?"#"+dFe(D.slice(1)):D,D.charAt(0)!="#"&&!D.match(/^\w+:/)&&(D="../"+D),O=hr("text:a",O,{"xlink:href":D.replace(/&/g,"&amp;")})}c.push("          "+hr("table:table-cell",hr("text:p",O,{}),S)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;sD(h),h.ods=l;var p=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),s.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var h=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,l){var c=[bi],u=fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=fy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Jse().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(n(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function Bie(t,e){if(e.bookType=="fods")return lH(t,e);var r=K7(),n="",a=[],s=[];return n="mimetype",kn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",kn(r,n,lH(t,e)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",kn(r,n,HUe(t,e)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",kn(r,n,bi+Jse()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",kn(r,n,rMe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",kn(r,n,eMe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function M3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function qUe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Zu(dy(t))}function GUe(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Q0(t){var e=t.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(a){r.set(a,n),n+=a.length}),r}function WUe(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)t[e+s]=a&255;t[e+15]|=r>=0?0:128}function hy(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function xa(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function q1(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Ti(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],a=hy(t,r),s=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(s){case 0:{for(var c=r[0];t[r[0]++]>=128;);l=t.slice(c,r[0])}break;case 5:o=4,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=hy(t,r),l=t.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:l,type:s};e[a]==null?e[a]=[u]:e[a].push(u)}return e}function mo(t){var e=[];return t.forEach(function(r,n){r.forEach(function(a){a.data&&(e.push(xa(n*8+a.type)),a.type==2&&e.push(xa(a.data.length)),e.push(a.data))})}),Q0(e)}function $u(t){for(var e,r=[],n=[0];n[0]<t.length;){var a=hy(t,n),s=Ti(t.slice(n[0],n[0]+a));n[0]+=a;var o={id:q1(s[1][0].data),messages:[]};s[2].forEach(function(l){var c=Ti(l.data),u=q1(c[3][0].data);o.messages.push({meta:c,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(o.merge=q1(s[3][0].data)>>>0>0),r.push(o)}return r}function Dg(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:xa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:xa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:xa(o.data.length)}],n[2].push({data:mo(o.meta),type:2})});var s=mo(n);e.push(xa(s.length)),e.push(s),a.forEach(function(o){return e.push(o)})}),Q0(e)}function KUe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=hy(e,r),a=[];r[0]<e.length;){var s=e[r[0]]&3;if(s==0){var o=e[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=e[r[0]],l>1&&(o|=e[r[0]+1]<<8),l>2&&(o|=e[r[0]+2]<<16),l>3&&(o|=e[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(e.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(s==1?(u=(e[r[0]]>>2&7)+4,c=(e[r[0]++]&224)<<3,c|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,s==2?(c=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(c=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Q0(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Q0(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Hu(t){for(var e=[],r=0;r<t.length;){var n=t[r++],a=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(KUe(n,t.slice(r,r+a))),r+=a}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Q0(e)}function Mg(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),a=new Uint8Array(4);e.push(a);var s=xa(n),o=s.length;e.push(s),n<=60?(o++,e.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return Q0(e)}function xT(t,e){var r=new Uint8Array(32),n=M3(r),a=12,s=0;switch(r[0]=5,t.t){case"n":r[1]=2,WUe(r,a,t.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,t.v?1:0,!0),s|=2,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,s,!0),r.slice(0,a)}function vT(t,e){var r=new Uint8Array(32),n=M3(r),a=12,s=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(a,t.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,t.v?1:0,!0),s|=32,a+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(a,e.indexOf(t.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,s,!0),r.slice(0,a)}function qh(t){var e=Ti(t);return hy(e[1][0].data)}function XUe(t,e,r){var n,a,s,o;if(!((n=t[6])!=null&&n[0])||!((a=t[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&q1(t[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=M3(t[7][0].data),d=0,h=[],p=M3(t[4][0].data),g=0,b=[],w=0;w<e.length;++w){if(e[w]==null){u.setUint16(w*2,65535,!0),p.setUint16(w*2,65535);continue}u.setUint16(w*2,d,!0),p.setUint16(w*2,g,!0);var _,N;switch(typeof e[w]){case"string":_=xT({t:"s",v:e[w]},r),N=vT({t:"s",v:e[w]},r);break;case"number":_=xT({t:"n",v:e[w]},r),N=vT({t:"n",v:e[w]},r);break;case"boolean":_=xT({t:"b",v:e[w]},r),N=vT({t:"b",v:e[w]},r);break;default:throw new Error("Unsupported value "+e[w])}h.push(_),d+=_.length,b.push(N),g+=N.length,++c}for(t[2][0].data=xa(c);w<t[7][0].data.length/2;++w)u.setUint16(w*2,65535,!0),p.setUint16(w*2,65535,!0);return t[6][0].data=Q0(h),t[3][0].data=Q0(b),c}function YUe(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Bc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(gi(n)));var s=L3(r,{range:n,header:1}),o=["~Sh33tJ5~"];s.forEach(function(Y){return Y.forEach(function(X){typeof X=="string"&&o.push(X)})});var l={},c=[],u=Ia.read(e.numbers,{type:"base64"});u.FileIndex.map(function(Y,X){return[Y,u.FullPaths[X]]}).forEach(function(Y){var X=Y[0],re=Y[1];if(X.type==2&&X.name.match(/\.iwa/)){var se=X.content,Ce=Hu(se),je=$u(Ce);je.forEach(function(pe){c.push(pe.id),l[pe.id]={deps:[],location:re,type:q1(pe.messages[0].meta[1][0].data)}})}}),c.sort(function(Y,X){return Y-X});var d=c.filter(function(Y){return Y>1}).map(function(Y){return[Y,xa(Y)]});u.FileIndex.map(function(Y,X){return[Y,u.FullPaths[X]]}).forEach(function(Y){var X=Y[0];if(Y[1],!!X.name.match(/\.iwa/)){var re=$u(Hu(X.content));re.forEach(function(se){se.messages.forEach(function(Ce){d.forEach(function(je){se.messages.some(function(pe){return q1(pe.meta[1][0].data)!=11006&&GUe(pe.data,je[1])})&&l[je[0]].deps.push(se.id)})})})}});for(var h=Ia.find(u,l[1].location),p=$u(Hu(h.content)),g,b=0;b<p.length;++b){var w=p[b];w.id==1&&(g=w)}var _=qh(Ti(g.messages[0].data)[1][0].data);for(h=Ia.find(u,l[_].location),p=$u(Hu(h.content)),b=0;b<p.length;++b)w=p[b],w.id==_&&(g=w);for(_=qh(Ti(g.messages[0].data)[2][0].data),h=Ia.find(u,l[_].location),p=$u(Hu(h.content)),b=0;b<p.length;++b)w=p[b],w.id==_&&(g=w);for(_=qh(Ti(g.messages[0].data)[2][0].data),h=Ia.find(u,l[_].location),p=$u(Hu(h.content)),b=0;b<p.length;++b)w=p[b],w.id==_&&(g=w);var N=Ti(g.messages[0].data);{N[6][0].data=xa(n.e.r+1),N[7][0].data=xa(n.e.c+1);var S=qh(N[46][0].data),T=Ia.find(u,l[S].location),R=$u(Hu(T.content));{for(var z=0;z<R.length&&R[z].id!=S;++z);if(R[z].id!=S)throw"Bad ColumnRowUIDMapArchive";var G=Ti(R[z].messages[0].data);G[1]=[],G[2]=[],G[3]=[];for(var O=0;O<=n.e.c;++O){var D=[];D[1]=D[2]=[{type:0,data:xa(O+420690)}],G[1].push({type:2,data:mo(D)}),G[2].push({type:0,data:xa(O)}),G[3].push({type:0,data:xa(O)})}G[4]=[],G[5]=[],G[6]=[];for(var I=0;I<=n.e.r;++I)D=[],D[1]=D[2]=[{type:0,data:xa(I+726270)}],G[4].push({type:2,data:mo(D)}),G[5].push({type:0,data:xa(I)}),G[6].push({type:0,data:xa(I)});R[z].messages[0].data=mo(G)}T.content=Mg(Dg(R)),T.size=T.content.length,delete N[46];var V=Ti(N[4][0].data);{V[7][0].data=xa(n.e.r+1);var P=Ti(V[1][0].data),B=qh(P[2][0].data);T=Ia.find(u,l[B].location),R=$u(Hu(T.content));{if(R[0].id!=B)throw"Bad HeaderStorageBucket";var F=Ti(R[0].messages[0].data);for(I=0;I<s.length;++I){var ee=Ti(F[2][0].data);ee[1][0].data=xa(I),ee[4][0].data=xa(s[I].length),F[2][I]={type:F[2][0].type,data:mo(ee)}}R[0].messages[0].data=mo(F)}T.content=Mg(Dg(R)),T.size=T.content.length;var Z=qh(V[2][0].data);T=Ia.find(u,l[Z].location),R=$u(Hu(T.content));{if(R[0].id!=Z)throw"Bad HeaderStorageBucket";for(F=Ti(R[0].messages[0].data),O=0;O<=n.e.c;++O)ee=Ti(F[2][0].data),ee[1][0].data=xa(O),ee[4][0].data=xa(n.e.r+1),F[2][O]={type:F[2][0].type,data:mo(ee)};R[0].messages[0].data=mo(F)}T.content=Mg(Dg(R)),T.size=T.content.length;var ce=qh(V[4][0].data);(function(){for(var Y=Ia.find(u,l[ce].location),X=$u(Hu(Y.content)),re,se=0;se<X.length;++se){var Ce=X[se];Ce.id==ce&&(re=Ce)}var je=Ti(re.messages[0].data);{je[3]=[];var pe=[];o.forEach(function(Ue,Me){pe[1]=[{type:0,data:xa(Me)}],pe[2]=[{type:0,data:xa(1)}],pe[3]=[{type:2,data:qUe(Ue)}],je[3].push({type:2,data:mo(pe)})})}re.messages[0].data=mo(je);var Oe=Dg(X),qe=Mg(Oe);Y.content=qe,Y.size=Y.content.length})();var ne=Ti(V[3][0].data);{var ae=ne[1][0];delete ne[2];var me=Ti(ae.data);{var Te=qh(me[2][0].data);(function(){for(var Y=Ia.find(u,l[Te].location),X=$u(Hu(Y.content)),re,se=0;se<X.length;++se){var Ce=X[se];Ce.id==Te&&(re=Ce)}var je=Ti(re.messages[0].data);{delete je[6],delete ne[7];var pe=new Uint8Array(je[5][0].data);je[5]=[];for(var Oe=0,qe=0;qe<=n.e.r;++qe){var Ue=Ti(pe);Oe+=XUe(Ue,s[qe],o),Ue[1][0].data=xa(qe),je[5].push({data:mo(Ue),type:2})}je[1]=[{type:0,data:xa(n.e.c+1)}],je[2]=[{type:0,data:xa(n.e.r+1)}],je[3]=[{type:0,data:xa(Oe)}],je[4]=[{type:0,data:xa(n.e.r+1)}]}re.messages[0].data=mo(je);var Me=Dg(X),Be=Mg(Me);Y.content=Be,Y.size=Y.content.length})()}ae.data=mo(me)}V[3][0].data=mo(ne)}N[4][0].data=mo(V)}g.messages[0].data=mo(N);var we=Dg(p),q=Mg(we);return h.content=q,h.size=h.content.length,u}function ZUe(t){return function(r){for(var n=0;n!=t.length;++n){var a=t[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function uD(t){ZUe([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function QUe(t,e){return e.bookType=="ods"?Bie(t,e):e.bookType=="numbers"?YUe(t,e):e.bookType=="xlsb"?JUe(t,e):eze(t,e)}function JUe(t,e){N1=1024,t&&!t.SSF&&(t.SSF=Yl(Ms)),t&&t.SSF&&(sS(),aS(t.SSF),e.revssf=iS(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,db?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=wie.indexOf(e.bookType)>-1,a=Yse();uD(e=e||{});var s=K7(),o="",l=0;if(e.cellXfs=[],xm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",kn(s,o,eie(t.Props,e)),a.coreprops.push(o),ba(e.rels,2,o,Jn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}for(t.Props.Worksheets=t.Props.SheetNames.length,kn(s,o,rie(t.Props)),a.extprops.push(o),ba(e.rels,3,o,Jn.EXT_PROPS),t.Custprops!==t.Props&&Co(t.Custprops||{}).length>0&&(o="docProps/custom.xml",kn(s,o,nie(t.Custprops)),a.custprops.push(o),ba(e.rels,4,o,Jn.CUST_PROPS)),l=1;l<=t.SheetNames.length;++l){var d={"!id":{}},h=t.Sheets[t.SheetNames[l-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,kn(s,o,rUe(l-1,o,e,t,d)),a.sheets.push(o),ba(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Jn.WS[0])}if(h){var g=h["!comments"],b=!1,w="";g&&g.length>0&&(w="xl/comments"+l+"."+r,kn(s,w,sUe(g,w)),a.comments.push(w),ba(d,-1,"../comments"+l+"."+r,Jn.CMNT),b=!0),h["!legacy"]&&b&&kn(s,"xl/drawings/vmlDrawing"+l+".vml",bie(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&kn(s,Qse(o),$1(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,kn(s,o,aUe(e.Strings,o,e)),a.strs.push(o),ba(e.wbrels,-1,"sharedStrings."+r,Jn.SST)),o="xl/workbook."+r,kn(s,o,tUe(t,o)),a.workbooks.push(o),ba(e.rels,1,o,Jn.WB),o="xl/theme/theme1.xml",kn(s,o,xie(t.Themes,e)),a.themes.push(o),ba(e.wbrels,-1,"theme/theme1.xml",Jn.THEME),o="xl/styles."+r,kn(s,o,nUe(t,o,e)),a.styles.push(o),ba(e.wbrels,-1,"styles."+r,Jn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",kn(s,o,t.vbaraw),a.vba.push(o),ba(e.wbrels,-1,"vbaProject.bin",Jn.VBA)),o="xl/metadata."+r,kn(s,o,iUe(o)),a.metadata.push(o),ba(e.wbrels,-1,"metadata."+r,Jn.XLMETA),kn(s,"[Content_Types].xml",Zse(a,e)),kn(s,"_rels/.rels",$1(e.rels)),kn(s,"xl/_rels/workbook."+r+".rels",$1(e.wbrels)),delete e.revssf,delete e.ssf,s}function eze(t,e){N1=1024,t&&!t.SSF&&(t.SSF=Yl(Ms)),t&&t.SSF&&(sS(),aS(t.SSF),e.revssf=iS(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,db?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=wie.indexOf(e.bookType)>-1,a=Yse();uD(e=e||{});var s=K7(),o="",l=0;if(e.cellXfs=[],xm(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",kn(s,o,eie(t.Props,e)),a.coreprops.push(o),ba(e.rels,2,o,Jn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var c=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(t.SheetNames[u]);t.Props.SheetNames=c}t.Props.Worksheets=t.Props.SheetNames.length,kn(s,o,rie(t.Props)),a.extprops.push(o),ba(e.rels,3,o,Jn.EXT_PROPS),t.Custprops!==t.Props&&Co(t.Custprops||{}).length>0&&(o="docProps/custom.xml",kn(s,o,nie(t.Custprops)),a.custprops.push(o),ba(e.rels,4,o,Jn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,l=1;l<=t.SheetNames.length;++l){var h={"!id":{}},p=t.Sheets[t.SheetNames[l-1]],g=(p||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,kn(s,o,kie(l-1,e,t,h)),a.sheets.push(o),ba(e.wbrels,-1,"worksheets/sheet"+l+"."+r,Jn.WS[0])}if(p){var b=p["!comments"],w=!1,_="";if(b&&b.length>0){var N=!1;b.forEach(function(S){S[1].forEach(function(T){T.T==!0&&(N=!0)})}),N&&(_="xl/threadedComments/threadedComment"+l+"."+r,kn(s,_,ILe(b,d,e)),a.threadedcomments.push(_),ba(h,-1,"../threadedComments/threadedComment"+l+"."+r,Jn.TCMNT)),_="xl/comments"+l+"."+r,kn(s,_,yie(b)),a.comments.push(_),ba(h,-1,"../comments"+l+"."+r,Jn.CMNT),w=!0}p["!legacy"]&&w&&kn(s,"xl/drawings/vmlDrawing"+l+".vml",bie(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}h["!id"].rId1&&kn(s,Qse(o),$1(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+r,kn(s,o,die(e.Strings,e)),a.strs.push(o),ba(e.wbrels,-1,"sharedStrings."+r,Jn.SST)),o="xl/workbook."+r,kn(s,o,Rie(t)),a.workbooks.push(o),ba(e.rels,1,o,Jn.WB),o="xl/theme/theme1.xml",kn(s,o,xie(t.Themes,e)),a.themes.push(o),ba(e.wbrels,-1,"theme/theme1.xml",Jn.THEME),o="xl/styles."+r,kn(s,o,pie(t,e)),a.styles.push(o),ba(e.wbrels,-1,"styles."+r,Jn.STY),t.vbaraw&&n&&(o="xl/vbaProject.bin",kn(s,o,t.vbaraw),a.vba.push(o),ba(e.wbrels,-1,"vbaProject.bin",Jn.VBA)),o="xl/metadata."+r,kn(s,o,vie()),a.metadata.push(o),ba(e.wbrels,-1,"metadata."+r,Jn.XLMETA),d.length>1&&(o="xl/persons/person.xml",kn(s,o,OLe(d)),a.people.push(o),ba(e.wbrels,-1,"persons/person.xml",Jn.PEOPLE)),kn(s,"[Content_Types].xml",Zse(a,e)),kn(s,"_rels/.rels",$1(e.rels)),kn(s,"xl/_rels/workbook."+r+".rels",$1(e.wbrels)),delete e.revssf,delete e.ssf,s}function tze(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=dh(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Uie(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return jw(e.file,Ia.write(t,{type:sa?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ia.write(t,e)}function rze(t,e){var r=Yl(e||{}),n=QUe(t,r);return nze(n,r)}function nze(t,e){var r={},n=sa?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var a=t.FullPaths?Ia.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(e.type=="binary"||e.type=="base64")return a;a=new Uint8Array(nS(a))}return e.password&&typeof encrypt_agile<"u"?Uie(encrypt_agile(a,e.password),e):e.type==="file"?jw(e.file,a):e.type=="string"?ob(a):a}function aze(t,e){var r=e||{},n=yUe(t,r);return Uie(n,r)}function yd(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return cy(dy(n));case"binary":return dy(n);case"string":return t;case"file":return jw(e.file,n,"utf8");case"buffer":return sa?Ah(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):yd(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function sze(t,e){switch(e.type){case"base64":return cy(t);case"binary":return t;case"string":return t;case"file":return jw(e.file,t,"binary");case"buffer":return sa?Ah(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function N_(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?cy(r):e.type=="string"?ob(r):r;case"file":return jw(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function zie(t,e){R7e(),HBe(t);var r=Yl(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=zie(t,r);return r.type="array",nS(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=t.SheetNames.indexOf(r.sheet),!t.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return yd(vUe(t,r),r);case"slk":case"sylk":return yd(zMe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"htm":case"html":return yd(Mie(t.Sheets[t.SheetNames[a]],r),r);case"txt":return sze(Vie(t.Sheets[t.SheetNames[a]],r),r);case"csv":return yd(dD(t.Sheets[t.SheetNames[a]],r),r,"\uFEFF");case"dif":return yd(VMe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"dbf":return N_(UMe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"prn":return yd($Me.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"rtf":return yd(YMe.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"eth":return yd(uie.from_sheet(t.Sheets[t.SheetNames[a]],r),r);case"fods":return yd(Bie(t,r),r);case"wk1":return N_(tH.sheet_to_wk1(t.Sheets[t.SheetNames[a]],r),r);case"wk3":return N_(tH.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),N_(Die(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),aze(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return rze(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function ize(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function oze(t,e,r){var n={};return n.type="file",n.file=e,ize(n),zie(t,n)}function lze(t,e,r,n,a,s,o,l){var c=To(r),u=l.defval,d=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,p=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=o?t[r][g]:t[n[g]+c];if(b===void 0||b.t===void 0){if(u===void 0)continue;s[g]!=null&&(p[s[g]]=u);continue}var w=b.v;switch(b.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(s[g]!=null){if(w==null)if(b.t=="e"&&w===null)p[s[g]]=null;else if(u!==void 0)p[s[g]]=u;else if(d&&w===null)p[s[g]]=null;else continue;else p[s[g]]=d&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?w:fh(b,w,l);w!=null&&(h=!1)}}return{row:p,isempty:h}}function L3(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=ns(d);break;case"number":c=ns(t["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var h=To(c.s.r),p=[],g=[],b=0,w=0,_=Array.isArray(t),N=c.s.r,S=0,T={};_&&!t[N]&&(t[N]=[]);var R=u.skipHidden&&t["!cols"]||[],z=u.skipHidden&&t["!rows"]||[];for(S=c.s.c;S<=c.e.c;++S)if(!(R[S]||{}).hidden)switch(p[S]=Ho(S),r=_?t[N][S]:t[p[S]+h],n){case 1:s[S]=S-c.s.c;break;case 2:s[S]=p[S];break;case 3:s[S]=u.header[S-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=fh(r,null,u),w=T[o]||0,!w)T[o]=1;else{do l=o+"_"+w++;while(T[l]);T[o]=w,T[l]=1}s[S]=l}for(N=c.s.r+a;N<=c.e.r;++N)if(!(z[N]||{}).hidden){var G=lze(t,c,N,p,n,s,_,u);(G.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=G.row)}return g.length=b,g}var cH=/"/g;function cze(t,e,r,n,a,s,o,l){for(var c=!0,u=[],d="",h=To(r),p=e.s.c;p<=e.e.c;++p)if(n[p]){var g=l.dense?(t[r]||[])[p]:t[n[p]+h];if(g==null)d="";else if(g.v!=null){c=!1,d=""+(l.rawNumbers&&g.t=="n"?g.v:fh(g,null,l));for(var b=0,w=0;b!==d.length;++b)if((w=d.charCodeAt(b))===a||w===s||w===34||l.forceQuotes){d='"'+d.replace(cH,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(c=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(cH,'""')+'"')):d="";u.push(d)}return l.blankrows===!1&&c?null:u.join(o)}function dD(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var a=ns(t["!ref"]),s=n.FS!==void 0?n.FS:",",o=s.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var p=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=a.s.c;b<=a.e.c;++b)(p[b]||{}).hidden||(h[b]=Ho(b));for(var w=0,_=a.s.r;_<=a.e.r;++_)(g[_]||{}).hidden||(d=cze(t,a,_,h,o,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((w++?l:"")+d)));return delete n.dense,r.join("")}function Vie(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=dD(t,e);return r}function uze(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var a=ns(t["!ref"]),s="",o=[],l,c=[],u=Array.isArray(t);for(l=a.s.c;l<=a.e.c;++l)o[l]=Ho(l);for(var d=a.s.r;d<=a.e.r;++d)for(s=To(d),l=a.s.c;l<=a.e.c;++l)if(e=o[l]+s,r=u?(t[d]||[])[l]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=e+"="+n}return c}function $ie(t,e,r){var n=r||{},a=+!n.skipHeader,s=t||{},o=0,l=0;if(s&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Ji(n.origin):n.origin;o=c.r,l=c.c}var u,d={s:{c:0,r:0},e:{c:l,r:o+e.length-1+a}};if(s["!ref"]){var h=ns(s["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),o==-1&&(o=h.e.r+1,d.e.r=o+e.length-1+a)}else o==-1&&(o=0,d.e.r=e.length-1+a);var p=n.header||[],g=0;e.forEach(function(w,_){Co(w).forEach(function(N){(g=p.indexOf(N))==-1&&(p[g=p.length]=N);var S=w[N],T="z",R="",z=Sa({c:l+g,r:o+_+a});u=my(s,z),S&&typeof S=="object"&&!(S instanceof Date)?s[z]=S:(typeof S=="number"?T="n":typeof S=="boolean"?T="b":typeof S=="string"?T="s":S instanceof Date?(T="d",n.cellDates||(T="n",S=Xl(S)),R=n.dateNF||Ms[14]):S===null&&n.nullError&&(T="e",S=0),u?(u.t=T,u.v=S,delete u.w,delete u.R,R&&(u.z=R)):s[z]=u={t:T,v:S},R&&(u.z=R))})}),d.e.c=Math.max(d.e.c,l+p.length-1);var b=To(o);if(a)for(g=0;g<p.length;++g)s[Ho(g+l)+b]={t:"s",v:p[g]};return s["!ref"]=gi(d),s}function dze(t,e){return $ie(null,t,e)}function my(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Ji(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?my(t,Sa(e)):my(t,Sa({r:e,c:r||0}))}function fze(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function hze(){return{SheetNames:[],Sheets:{}}}function mze(t,e,r,n){var a=1;if(!r)for(;a<=65535&&t.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var o=s&&s[1]||r;for(++a;a<=65535&&t.SheetNames.indexOf(r=o+a)!=-1;++a);}if(Oie(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function pze(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=fze(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function gze(t,e){return t.z=e,t}function Hie(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function xze(t,e,r){return Hie(t,"#"+e,r)}function vze(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function bze(t,e,r,n){for(var a=typeof e!="string"?e:ns(e),s=typeof e=="string"?e:gi(e),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var c=my(t,o,l);c.t="n",c.F=s,delete c.v,o==a.s.r&&l==a.s.c&&(c.f=r,n&&(c.D=!0))}return t}var bT={encode_col:Ho,encode_row:To,encode_cell:Sa,encode_range:gi,decode_col:eD,decode_row:J7,split_cell:RDe,decode_cell:Ji,decode_range:Bc,format_cell:fh,sheet_add_aoa:Hse,sheet_add_json:$ie,sheet_add_dom:Lie,aoa_to_sheet:mv,json_to_sheet:dze,table_to_sheet:Fie,table_to_book:VUe,sheet_to_csv:dD,sheet_to_txt:Vie,sheet_to_json:L3,sheet_to_html:Mie,sheet_to_formulae:uze,sheet_to_row_object_array:L3,sheet_get_cell:my,book_new:hze,book_append_sheet:mze,book_set_sheet_visibility:pze,cell_set_number_format:gze,cell_set_hyperlink:Hie,cell_set_internal_link:xze,cell_add_comment:vze,sheet_set_array_formula:bze,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function wa(t){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}var ld=Uint8Array,Cc=Uint16Array,fD=Int32Array,hD=new ld([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),mD=new ld([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uH=new ld([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),qie=function(t,e){for(var r=new Cc(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new fD(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Gie=qie(hD,2),yze=Gie.b,q8=Gie.r;yze[28]=258,q8[258]=28;var wze=qie(mD,0),dH=wze.r,G8=new Cc(32768);for(var Ja=0;Ja<32768;++Ja){var Gh=(Ja&43690)>>1|(Ja&21845)<<1;Gh=(Gh&52428)>>2|(Gh&13107)<<2,Gh=(Gh&61680)>>4|(Gh&3855)<<4,G8[Ja]=((Gh&65280)>>8|(Gh&255)<<8)>>1}var fb=function(t,e,r){for(var n=t.length,a=0,s=new Cc(e);a<n;++a)t[a]&&++s[t[a]-1];var o=new Cc(e);for(a=1;a<e;++a)o[a]=o[a-1]+s[a-1]<<1;var l;if(r){l=new Cc(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],d=e-t[a],h=o[t[a]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)l[G8[h]>>c]=u}else for(l=new Cc(n),a=0;a<n;++a)t[a]&&(l[a]=G8[o[t[a]-1]++]>>15-t[a]);return l},qp=new ld(288);for(var Ja=0;Ja<144;++Ja)qp[Ja]=8;for(var Ja=144;Ja<256;++Ja)qp[Ja]=9;for(var Ja=256;Ja<280;++Ja)qp[Ja]=7;for(var Ja=280;Ja<288;++Ja)qp[Ja]=8;var F3=new ld(32);for(var Ja=0;Ja<32;++Ja)F3[Ja]=5;var _ze=fb(qp,9,0),Nze=fb(F3,5,0),Wie=function(t){return(t+7)/8|0},Eze=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new ld(t.subarray(e,r))},gf=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},r2=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},yT=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,s=r.slice();if(!a)return{t:Xie,l:0};if(a==1){var o=new ld(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(z,G){return z.f-G.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};d!=a-1;)l=r[r[u].f<r[h].f?u++:h++],c=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:l.f+c.f,l,r:c};for(var p=s[0].s,n=1;n<a;++n)s[n].s>p&&(p=s[n].s);var g=new Cc(p+1),b=W8(r[d-1],g,0);if(b>e){var n=0,w=0,_=b-e,N=1<<_;for(s.sort(function(G,O){return g[O.s]-g[G.s]||G.f-O.f});n<a;++n){var S=s[n].s;if(g[S]>e)w+=N-(1<<b-g[S]),g[S]=e;else break}for(w>>=_;w>0;){var T=s[n].s;g[T]<e?w-=1<<e-g[T]++-1:++n}for(;n>=0&&w;--n){var R=s[n].s;g[R]==e&&(--g[R],++w)}b=e}return{t:new ld(g),l:b}},W8=function(t,e,r){return t.s==-1?Math.max(W8(t.l,e,r+1),W8(t.r,e,r+1)):e[t.s]=r},fH=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new Cc(++e),n=0,a=t[0],s=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[l]}return{c:r.subarray(0,n),n:e}},n2=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Kie=function(t,e,r){var n=r.length,a=Wie(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var s=0;s<n;++s)t[a+s+4]=r[s];return(a+4+n)*8},hH=function(t,e,r,n,a,s,o,l,c,u,d){gf(e,d++,r),++a[256];for(var h=yT(a,15),p=h.t,g=h.l,b=yT(s,15),w=b.t,_=b.l,N=fH(p),S=N.c,T=N.n,R=fH(w),z=R.c,G=R.n,O=new Cc(19),D=0;D<S.length;++D)++O[S[D]&31];for(var D=0;D<z.length;++D)++O[z[D]&31];for(var I=yT(O,7),V=I.t,P=I.l,B=19;B>4&&!V[uH[B-1]];--B);var F=u+5<<3,ee=n2(a,qp)+n2(s,F3)+o,Z=n2(a,p)+n2(s,w)+o+14+3*B+n2(O,V)+2*O[16]+3*O[17]+7*O[18];if(c>=0&&F<=ee&&F<=Z)return Kie(e,d,t.subarray(c,c+u));var ce,ne,ae,me;if(gf(e,d,1+(Z<ee)),d+=2,Z<ee){ce=fb(p,g,0),ne=p,ae=fb(w,_,0),me=w;var Te=fb(V,P,0);gf(e,d,T-257),gf(e,d+5,G-1),gf(e,d+10,B-4),d+=14;for(var D=0;D<B;++D)gf(e,d+3*D,V[uH[D]]);d+=3*B;for(var we=[S,z],q=0;q<2;++q)for(var Y=we[q],D=0;D<Y.length;++D){var X=Y[D]&31;gf(e,d,Te[X]),d+=V[X],X>15&&(gf(e,d,Y[D]>>5&127),d+=Y[D]>>12)}}else ce=_ze,ne=qp,ae=Nze,me=F3;for(var D=0;D<l;++D){var re=n[D];if(re>255){var X=re>>18&31;r2(e,d,ce[X+257]),d+=ne[X+257],X>7&&(gf(e,d,re>>23&31),d+=hD[X]);var se=re&31;r2(e,d,ae[se]),d+=me[se],se>3&&(r2(e,d,re>>5&8191),d+=mD[se])}else r2(e,d,ce[re]),d+=ne[re]}return r2(e,d,ce[256]),d+ne[256]},Aze=new fD([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Xie=new ld(0),Sze=function(t,e,r,n,a,s){var o=s.z||t.length,l=new ld(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=s.l,d=(s.r||0)&7;if(e){d&&(c[0]=s.r>>3);for(var h=Aze[e-1],p=h>>13,g=h&8191,b=(1<<r)-1,w=s.p||new Cc(32768),_=s.h||new Cc(b+1),N=Math.ceil(r/3),S=2*N,T=function(Be){return(t[Be]^t[Be+1]<<N^t[Be+2]<<S)&b},R=new fD(25e3),z=new Cc(288),G=new Cc(32),O=0,D=0,I=s.i||0,V=0,P=s.w||0,B=0;I+2<o;++I){var F=T(I),ee=I&32767,Z=_[F];if(w[ee]=Z,_[F]=ee,P<=I){var ce=o-I;if((O>7e3||V>24576)&&(ce>423||!u)){d=hH(t,c,0,R,z,G,D,V,B,I-B,d),V=O=D=0,B=I;for(var ne=0;ne<286;++ne)z[ne]=0;for(var ne=0;ne<30;++ne)G[ne]=0}var ae=2,me=0,Te=g,we=ee-Z&32767;if(ce>2&&F==T(I-we))for(var q=Math.min(p,ce)-1,Y=Math.min(32767,I),X=Math.min(258,ce);we<=Y&&--Te&&ee!=Z;){if(t[I+ae]==t[I+ae-we]){for(var re=0;re<X&&t[I+re]==t[I+re-we];++re);if(re>ae){if(ae=re,me=we,re>q)break;for(var se=Math.min(we,re-2),Ce=0,ne=0;ne<se;++ne){var je=I-we+ne&32767,pe=w[je],Oe=je-pe&32767;Oe>Ce&&(Ce=Oe,Z=je)}}}ee=Z,Z=w[ee],we+=ee-Z&32767}if(me){R[V++]=268435456|q8[ae]<<18|dH[me];var qe=q8[ae]&31,Ue=dH[me]&31;D+=hD[qe]+mD[Ue],++z[257+qe],++G[Ue],P=I+ae,++O}else R[V++]=t[I],++z[t[I]]}}for(I=Math.max(I,P);I<o;++I)R[V++]=t[I],++z[t[I]];d=hH(t,c,u,R,z,G,D,V,B,I-B,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=_,s.p=w,s.i=I,s.w=P)}else{for(var I=s.w||0;I<o+u;I+=65535){var Me=I+65535;Me>=o&&(c[d/8|0]=u,Me=o),d=Kie(c,d+1,t.subarray(I,Me))}s.i=o}return Eze(l,0,n+Wie(d)+a)},Yie=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,s=r.length|0,o=0;o!=s;){for(var l=Math.min(o+2655,s);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},jze=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ld(s.length+t.length);o.set(s),o.set(t,s.length),t=o,a.w=s.length}return Sze(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},Zie=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Tze=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Yie();a.p(e.dictionary),Zie(t,2,a.d())}};function K8(t,e){e||(e={});var r=Yie();r.p(t);var n=jze(t,e,e.dictionary?6:2,4);return Tze(n,e),Zie(n,n.length-4,r.d()),n}var Cze=typeof TextDecoder<"u"&&new TextDecoder,kze=0;try{Cze.decode(Xie,{stream:!0}),kze=1}catch{}function Ize(t){if(Array.isArray(t))return t}function Oze(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mH(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Rze(t,e){if(t){if(typeof t=="string")return mH(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mH(t,e):void 0}}function Pze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pH(t,e){return Ize(t)||Oze(t,e)||Rze(t,e)||Pze()}function gH(t,e="utf8"){return new TextDecoder(e).decode(t)}const Dze=new TextEncoder;function Mze(t){return Dze.encode(t)}const Lze=1024*8,Fze=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),wT={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class pD{constructor(e=Lze,r={}){aa(this,"buffer");aa(this,"byteLength");aa(this,"byteOffset");aa(this,"length");aa(this,"offset");aa(this,"lastWrittenByte");aa(this,"littleEndian");aa(this,"_data");aa(this,"_mark");aa(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,s=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof pD)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=wT[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===Fze&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new wT[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new wT[r](s);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return gH(this.readBytes(e))}decodeText(e=1,r="utf8"){return gH(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(Mze(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function xv(t){let e=t.length;for(;--e>=0;)t[e]=0}const Bze=3,Uze=258,Qie=29,zze=256,Vze=zze+1+Qie,Jie=30,$ze=512,Hze=new Array((Vze+2)*2);xv(Hze);const qze=new Array(Jie*2);xv(qze);const Gze=new Array($ze);xv(Gze);const Wze=new Array(Uze-Bze+1);xv(Wze);const Kze=new Array(Qie);xv(Kze);const Xze=new Array(Jie);xv(Xze);const Yze=(t,e,r,n)=>{let a=t&65535|0,s=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};var X8=Yze;const Zze=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},Qze=new Uint32Array(Zze()),Jze=(t,e,r,n)=>{const a=Qze,s=n+r;t^=-1;for(let o=n;o<s;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var vd=Jze,Y8={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eoe={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const eVe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var tVe=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)eVe(r,n)&&(t[n]=r[n])}}return t},rVe=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,s=t.length;n<s;n++){let o=t[n];r.set(o,a),a+=o.length}return r},toe={assign:tVe,flattenChunks:rVe};let roe=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{roe=!1}const py=new Uint8Array(256);for(let t=0;t<256;t++)py[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;py[254]=py[254]=1;var nVe=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,s,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),s=0,a=0;s<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};const aVe=(t,e)=>{if(e<65534&&t.subarray&&roe)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var sVe=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){s[a++]=o;continue}let l=py[o];if(l>4){s[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return aVe(s,a)},iVe=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+py[t[r]]>e?r:e},Z8={string2buf:nVe,buf2string:sVe,utf8border:iVe};function oVe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var lVe=oVe;const E_=16209,cVe=16191;var uVe=function(e,r){let n,a,s,o,l,c,u,d,h,p,g,b,w,_,N,S,T,R,z,G,O,D,I,V;const P=e.state;n=e.next_in,I=e.input,a=n+(e.avail_in-5),s=e.next_out,V=e.output,o=s-(r-e.avail_out),l=s+(e.avail_out-257),c=P.dmax,u=P.wsize,d=P.whave,h=P.wnext,p=P.window,g=P.hold,b=P.bits,w=P.lencode,_=P.distcode,N=(1<<P.lenbits)-1,S=(1<<P.distbits)-1;e:do{b<15&&(g+=I[n++]<<b,b+=8,g+=I[n++]<<b,b+=8),T=w[g&N];t:for(;;){if(R=T>>>24,g>>>=R,b-=R,R=T>>>16&255,R===0)V[s++]=T&65535;else if(R&16){z=T&65535,R&=15,R&&(b<R&&(g+=I[n++]<<b,b+=8),z+=g&(1<<R)-1,g>>>=R,b-=R),b<15&&(g+=I[n++]<<b,b+=8,g+=I[n++]<<b,b+=8),T=_[g&S];r:for(;;){if(R=T>>>24,g>>>=R,b-=R,R=T>>>16&255,R&16){if(G=T&65535,R&=15,b<R&&(g+=I[n++]<<b,b+=8,b<R&&(g+=I[n++]<<b,b+=8)),G+=g&(1<<R)-1,G>c){e.msg="invalid distance too far back",P.mode=E_;break e}if(g>>>=R,b-=R,R=s-o,G>R){if(R=G-R,R>d&&P.sane){e.msg="invalid distance too far back",P.mode=E_;break e}if(O=0,D=p,h===0){if(O+=u-R,R<z){z-=R;do V[s++]=p[O++];while(--R);O=s-G,D=V}}else if(h<R){if(O+=u+h-R,R-=h,R<z){z-=R;do V[s++]=p[O++];while(--R);if(O=0,h<z){R=h,z-=R;do V[s++]=p[O++];while(--R);O=s-G,D=V}}}else if(O+=h-R,R<z){z-=R;do V[s++]=p[O++];while(--R);O=s-G,D=V}for(;z>2;)V[s++]=D[O++],V[s++]=D[O++],V[s++]=D[O++],z-=3;z&&(V[s++]=D[O++],z>1&&(V[s++]=D[O++]))}else{O=s-G;do V[s++]=V[O++],V[s++]=V[O++],V[s++]=V[O++],z-=3;while(z>2);z&&(V[s++]=V[O++],z>1&&(V[s++]=V[O++]))}}else if(R&64){e.msg="invalid distance code",P.mode=E_;break e}else{T=_[(T&65535)+(g&(1<<R)-1)];continue r}break}}else if(R&64)if(R&32){P.mode=cVe;break e}else{e.msg="invalid literal/length code",P.mode=E_;break e}else{T=w[(T&65535)+(g&(1<<R)-1)];continue t}break}}while(n<a&&s<l);z=b>>3,n-=z,b-=z<<3,g&=(1<<b)-1,e.next_in=n,e.next_out=s,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=s<l?257+(l-s):257-(s-l),P.hold=g,P.bits=b};const Lg=15,xH=852,vH=592,bH=0,_T=1,yH=2,dVe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fVe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),hVe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),mVe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),pVe=(t,e,r,n,a,s,o,l)=>{const c=l.bits;let u=0,d=0,h=0,p=0,g=0,b=0,w=0,_=0,N=0,S=0,T,R,z,G,O,D=null,I;const V=new Uint16Array(Lg+1),P=new Uint16Array(Lg+1);let B=null,F,ee,Z;for(u=0;u<=Lg;u++)V[u]=0;for(d=0;d<n;d++)V[e[r+d]]++;for(g=c,p=Lg;p>=1&&V[p]===0;p--);if(g>p&&(g=p),p===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<p&&V[h]===0;h++);for(g<h&&(g=h),_=1,u=1;u<=Lg;u++)if(_<<=1,_-=V[u],_<0)return-1;if(_>0&&(t===bH||p!==1))return-1;for(P[1]=0,u=1;u<Lg;u++)P[u+1]=P[u]+V[u];for(d=0;d<n;d++)e[r+d]!==0&&(o[P[e[r+d]]++]=d);if(t===bH?(D=B=o,I=20):t===_T?(D=dVe,B=fVe,I=257):(D=hVe,B=mVe,I=0),S=0,d=0,u=h,O=s,b=g,w=0,z=-1,N=1<<g,G=N-1,t===_T&&N>xH||t===yH&&N>vH)return 1;for(;;){F=u-w,o[d]+1<I?(ee=0,Z=o[d]):o[d]>=I?(ee=B[o[d]-I],Z=D[o[d]-I]):(ee=96,Z=0),T=1<<u-w,R=1<<b,h=R;do R-=T,a[O+(S>>w)+R]=F<<24|ee<<16|Z|0;while(R!==0);for(T=1<<u-1;S&T;)T>>=1;if(T!==0?(S&=T-1,S+=T):S=0,d++,--V[u]===0){if(u===p)break;u=e[r+o[d]]}if(u>g&&(S&G)!==z){for(w===0&&(w=g),O+=h,b=u-w,_=1<<b;b+w<p&&(_-=V[b+w],!(_<=0));)b++,_<<=1;if(N+=1<<b,t===_T&&N>xH||t===yH&&N>vH)return 1;z=S&G,a[z]=g<<24|b<<16|O-s|0}}return S!==0&&(a[O+S]=u-w<<24|64<<16|0),l.bits=g,0};var hb=pVe;const gVe=0,noe=1,aoe=2,{Z_FINISH:wH,Z_BLOCK:xVe,Z_TREES:A_,Z_OK:Gp,Z_STREAM_END:vVe,Z_NEED_DICT:bVe,Z_STREAM_ERROR:ju,Z_DATA_ERROR:soe,Z_MEM_ERROR:ioe,Z_BUF_ERROR:yVe,Z_DEFLATED:_H}=eoe,dS=16180,NH=16181,EH=16182,AH=16183,SH=16184,jH=16185,TH=16186,CH=16187,kH=16188,IH=16189,B3=16190,xf=16191,NT=16192,OH=16193,ET=16194,RH=16195,PH=16196,DH=16197,MH=16198,S_=16199,j_=16200,LH=16201,FH=16202,BH=16203,UH=16204,zH=16205,AT=16206,VH=16207,$H=16208,ss=16209,ooe=16210,loe=16211,wVe=852,_Ve=592,NVe=15,EVe=NVe,HH=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function AVe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const vg=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<dS||e.mode>loe?1:0},coe=t=>{if(vg(t))return ju;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=dS,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(wVe),e.distcode=e.distdyn=new Int32Array(_Ve),e.sane=1,e.back=-1,Gp},uoe=t=>{if(vg(t))return ju;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,coe(t)},doe=(t,e)=>{let r;if(vg(t))return ju;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?ju:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,uoe(t))},foe=(t,e)=>{if(!t)return ju;const r=new AVe;t.state=r,r.strm=t,r.window=null,r.mode=dS;const n=doe(t,e);return n!==Gp&&(t.state=null),n},SVe=t=>foe(t,EVe);let qH=!0,ST,jT;const jVe=t=>{if(qH){ST=new Int32Array(512),jT=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(hb(noe,t.lens,0,288,ST,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;hb(aoe,t.lens,0,32,jT,0,t.work,{bits:5}),qH=!1}t.lencode=ST,t.lenbits=9,t.distcode=jT,t.distbits=5},hoe=(t,e,r,n)=>{let a;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(e.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(e.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},TVe=(t,e)=>{let r,n,a,s,o,l,c,u,d,h,p,g,b,w,_=0,N,S,T,R,z,G,O,D;const I=new Uint8Array(4);let V,P;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(vg(t)||!t.output||!t.input&&t.avail_in!==0)return ju;r=t.state,r.mode===xf&&(r.mode=NT),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,h=l,p=c,D=Gp;e:for(;;)switch(r.mode){case dS:if(r.wrap===0){r.mode=NT;break}for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,I[0]=u&255,I[1]=u>>>8&255,r.check=vd(r.check,I,2,0),u=0,d=0,r.mode=NH;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=ss;break}if((u&15)!==_H){t.msg="unknown compression method",r.mode=ss;break}if(u>>>=4,d-=4,O=(u&15)+8,r.wbits===0&&(r.wbits=O),O>15||O>r.wbits){t.msg="invalid window size",r.mode=ss;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?IH:xf,u=0,d=0;break;case NH:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.flags=u,(r.flags&255)!==_H){t.msg="unknown compression method",r.mode=ss;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=ss;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=vd(r.check,I,2,0)),u=0,d=0,r.mode=EH;case EH:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,r.check=vd(r.check,I,4,0)),u=0,d=0,r.mode=AH;case AH:for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=vd(r.check,I,2,0)),u=0,d=0,r.mode=SH;case SH:if(r.flags&1024){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(I[0]=u&255,I[1]=u>>>8&255,r.check=vd(r.check,I,2,0)),u=0,d=0}else r.head&&(r.head.extra=null);r.mode=jH;case jH:if(r.flags&1024&&(g=r.length,g>l&&(g=l),g&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+g),O)),r.flags&512&&r.wrap&4&&(r.check=vd(r.check,n,g,s)),l-=g,s+=g,r.length-=g),r.length))break e;r.length=0,r.mode=TH;case TH:if(r.flags&2048){if(l===0)break e;g=0;do O=n[s+g++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O));while(O&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=vd(r.check,n,g,s)),l-=g,s+=g,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=CH;case CH:if(r.flags&4096){if(l===0)break e;g=0;do O=n[s+g++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O));while(O&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=vd(r.check,n,g,s)),l-=g,s+=g,O)break e}else r.head&&(r.head.comment=null);r.mode=kH;case kH:if(r.flags&512){for(;d<16;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=ss;break}u=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=xf;break;case IH:for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}t.adler=r.check=HH(u),u=0,d=0,r.mode=B3;case B3:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,bVe;t.adler=r.check=1,r.mode=xf;case xf:if(e===xVe||e===A_)break e;case NT:if(r.last){u>>>=d&7,d-=d&7,r.mode=AT;break}for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}switch(r.last=u&1,u>>>=1,d-=1,u&3){case 0:r.mode=OH;break;case 1:if(jVe(r),r.mode=S_,e===A_){u>>>=2,d-=2;break e}break;case 2:r.mode=PH;break;case 3:t.msg="invalid block type",r.mode=ss}u>>>=2,d-=2;break;case OH:for(u>>>=d&7,d-=d&7;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ss;break}if(r.length=u&65535,u=0,d=0,r.mode=ET,e===A_)break e;case ET:r.mode=RH;case RH:if(g=r.length,g){if(g>l&&(g=l),g>c&&(g=c),g===0)break e;a.set(n.subarray(s,s+g),o),l-=g,s+=g,c-=g,o+=g,r.length-=g;break}r.mode=xf;break;case PH:for(;d<14;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.nlen=(u&31)+257,u>>>=5,d-=5,r.ndist=(u&31)+1,u>>>=5,d-=5,r.ncode=(u&15)+4,u>>>=4,d-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ss;break}r.have=0,r.mode=DH;case DH:for(;r.have<r.ncode;){for(;d<3;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.lens[B[r.have++]]=u&7,u>>>=3,d-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,V={bits:r.lenbits},D=hb(gVe,r.lens,0,19,r.lencode,0,r.work,V),r.lenbits=V.bits,D){t.msg="invalid code lengths set",r.mode=ss;break}r.have=0,r.mode=MH;case MH:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[u&(1<<r.lenbits)-1],N=_>>>24,S=_>>>16&255,T=_&65535,!(N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(T<16)u>>>=N,d-=N,r.lens[r.have++]=T;else{if(T===16){for(P=N+2;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(u>>>=N,d-=N,r.have===0){t.msg="invalid bit length repeat",r.mode=ss;break}O=r.lens[r.have-1],g=3+(u&3),u>>>=2,d-=2}else if(T===17){for(P=N+3;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=N,d-=N,O=0,g=3+(u&7),u>>>=3,d-=3}else{for(P=N+7;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=N,d-=N,O=0,g=11+(u&127),u>>>=7,d-=7}if(r.have+g>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ss;break}for(;g--;)r.lens[r.have++]=O}}if(r.mode===ss)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=ss;break}if(r.lenbits=9,V={bits:r.lenbits},D=hb(noe,r.lens,0,r.nlen,r.lencode,0,r.work,V),r.lenbits=V.bits,D){t.msg="invalid literal/lengths set",r.mode=ss;break}if(r.distbits=6,r.distcode=r.distdyn,V={bits:r.distbits},D=hb(aoe,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,V),r.distbits=V.bits,D){t.msg="invalid distances set",r.mode=ss;break}if(r.mode=S_,e===A_)break e;case S_:r.mode=j_;case j_:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,uVe(t,p),o=t.next_out,a=t.output,c=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,u=r.hold,d=r.bits,r.mode===xf&&(r.back=-1);break}for(r.back=0;_=r.lencode[u&(1<<r.lenbits)-1],N=_>>>24,S=_>>>16&255,T=_&65535,!(N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(S&&!(S&240)){for(R=N,z=S,G=T;_=r.lencode[G+((u&(1<<R+z)-1)>>R)],N=_>>>24,S=_>>>16&255,T=_&65535,!(R+N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=R,d-=R,r.back+=R}if(u>>>=N,d-=N,r.back+=N,r.length=T,S===0){r.mode=zH;break}if(S&32){r.back=-1,r.mode=xf;break}if(S&64){t.msg="invalid literal/length code",r.mode=ss;break}r.extra=S&15,r.mode=LH;case LH:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=FH;case FH:for(;_=r.distcode[u&(1<<r.distbits)-1],N=_>>>24,S=_>>>16&255,T=_&65535,!(N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(!(S&240)){for(R=N,z=S,G=T;_=r.distcode[G+((u&(1<<R+z)-1)>>R)],N=_>>>24,S=_>>>16&255,T=_&65535,!(R+N<=d);){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}u>>>=R,d-=R,r.back+=R}if(u>>>=N,d-=N,r.back+=N,S&64){t.msg="invalid distance code",r.mode=ss;break}r.offset=T,r.extra=S&15,r.mode=BH;case BH:if(r.extra){for(P=r.extra;d<P;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ss;break}r.mode=UH;case UH:if(c===0)break e;if(g=p-c,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ss;break}g>r.wnext?(g-=r.wnext,b=r.wsize-g):b=r.wnext-g,g>r.length&&(g=r.length),w=r.window}else w=a,b=o-r.offset,g=r.length;g>c&&(g=c),c-=g,r.length-=g;do a[o++]=w[b++];while(--g);r.length===0&&(r.mode=j_);break;case zH:if(c===0)break e;a[o++]=r.length,c--,r.mode=j_;break;case AT:if(r.wrap){for(;d<32;){if(l===0)break e;l--,u|=n[s++]<<d,d+=8}if(p-=c,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?vd(r.check,a,p,o-p):X8(r.check,a,p,o-p)),p=c,r.wrap&4&&(r.flags?u:HH(u))!==r.check){t.msg="incorrect data check",r.mode=ss;break}u=0,d=0}r.mode=VH;case VH:if(r.wrap&&r.flags){for(;d<32;){if(l===0)break e;l--,u+=n[s++]<<d,d+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=ss;break}u=0,d=0}r.mode=$H;case $H:D=vVe;break e;case ss:D=soe;break e;case ooe:return ioe;case loe:default:return ju}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=l,r.hold=u,r.bits=d,(r.wsize||p!==t.avail_out&&r.mode<ss&&(r.mode<AT||e!==wH))&&hoe(t,t.output,t.next_out,p-t.avail_out),h-=t.avail_in,p-=t.avail_out,t.total_in+=h,t.total_out+=p,r.total+=p,r.wrap&4&&p&&(t.adler=r.check=r.flags?vd(r.check,a,p,t.next_out-p):X8(r.check,a,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===xf?128:0)+(r.mode===S_||r.mode===ET?256:0),(h===0&&p===0||e===wH)&&D===Gp&&(D=yVe),D},CVe=t=>{if(vg(t))return ju;let e=t.state;return e.window&&(e.window=null),t.state=null,Gp},kVe=(t,e)=>{if(vg(t))return ju;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Gp):ju},IVe=(t,e)=>{const r=e.length;let n,a,s;return vg(t)||(n=t.state,n.wrap!==0&&n.mode!==B3)?ju:n.mode===B3&&(a=1,a=X8(a,e,r,0),a!==n.check)?soe:(s=hoe(t,e,r,r),s?(n.mode=ooe,ioe):(n.havedict=1,Gp))};var OVe=uoe,RVe=doe,PVe=coe,DVe=SVe,MVe=foe,LVe=TVe,FVe=CVe,BVe=kVe,UVe=IVe,zVe="pako inflate (from Nodeca project)",wf={inflateReset:OVe,inflateReset2:RVe,inflateResetKeep:PVe,inflateInit:DVe,inflateInit2:MVe,inflate:LVe,inflateEnd:FVe,inflateGetHeader:BVe,inflateSetDictionary:UVe,inflateInfo:zVe};function VVe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var $Ve=VVe;const moe=Object.prototype.toString,{Z_NO_FLUSH:HVe,Z_FINISH:qVe,Z_OK:gy,Z_STREAM_END:TT,Z_NEED_DICT:CT,Z_STREAM_ERROR:GVe,Z_DATA_ERROR:GH,Z_MEM_ERROR:WVe}=eoe;function Ow(t){this.options=toe.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lVe,this.strm.avail_out=0;let r=wf.inflateInit2(this.strm,e.windowBits);if(r!==gy)throw new Error(Y8[r]);if(this.header=new $Ve,wf.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Z8.string2buf(e.dictionary):moe.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=wf.inflateSetDictionary(this.strm,e.dictionary),r!==gy)))throw new Error(Y8[r])}Ow.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?qVe:HVe,moe.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=wf.inflate(r,o),s===CT&&a&&(s=wf.inflateSetDictionary(r,a),s===gy?s=wf.inflate(r,o):s===GH&&(s=CT));r.avail_in>0&&s===TT&&r.state.wrap>0&&t[r.next_in]!==0;)wf.inflateReset(r),s=wf.inflate(r,o);switch(s){case GVe:case GH:case CT:case WVe:return this.onEnd(s),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||s===TT))if(this.options.to==="string"){let c=Z8.utf8border(r.output,r.next_out),u=r.next_out-c,d=Z8.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===gy&&l===0)){if(s===TT)return s=wf.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Ow.prototype.onData=function(t){this.chunks.push(t)};Ow.prototype.onEnd=function(t){t===gy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=toe.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function KVe(t,e){const r=new Ow(e);if(r.push(t),r.err)throw r.msg||Y8[r.err];return r.result}var XVe=Ow,YVe=KVe,ZVe={Inflate:XVe,inflate:YVe};const{Inflate:QVe,inflate:JVe}=ZVe;var WH=QVe,e$e=JVe;const poe=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;poe[t]=e}const KH=4294967295;function t$e(t,e,r){let n=t;for(let a=0;a<r;a++)n=poe[(n^e[a])&255]^n>>>8;return n}function r$e(t,e){return(t$e(KH,t,e)^KH)>>>0}function XH(t,e,r){const n=t.readUint32(),a=r$e(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function goe(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function xoe(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function voe(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function boe(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+(e[s-a]>>1)&255}else{for(;s<a;s++)e[s]=t[s]+(r[s]>>1)&255;for(;s<n;s++)e[s]=t[s]+(e[s-a]+r[s]>>1)&255}}function yoe(t,e,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)e[s]=t[s];for(;s<n;s++)e[s]=t[s]+e[s-a]&255}else{for(;s<a;s++)e[s]=t[s]+r[s]&255;for(;s<n;s++)e[s]=t[s]+n$e(e[s-a],r[s],r[s-a])&255}}function n$e(t,e,r){const n=t+e-r,a=Math.abs(n-t),s=Math.abs(n-e),o=Math.abs(n-r);return a<=s&&a<=o?t:s<=o?e:r}function a$e(t,e,r,n,a,s){switch(t){case 0:goe(e,r,a);break;case 1:xoe(e,r,a,s);break;case 2:voe(e,r,n,a);break;case 3:boe(e,r,n,a,s);break;case 4:yoe(e,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const s$e=new Uint16Array([255]),i$e=new Uint8Array(s$e.buffer),o$e=i$e[0]===255;function l$e(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(s/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let d=0;d<7;d++){const h=o[d],p=Math.ceil((r-h.x)/h.xStep),g=Math.ceil((n-h.y)/h.yStep);if(p<=0||g<=0)continue;const b=p*l,w=new Uint8Array(b);for(let _=0;_<g;_++){const N=e[u++],S=e.subarray(u,u+b);u+=b;const T=new Uint8Array(b);a$e(N,S,T,w,b,l),w.set(T);for(let R=0;R<p;R++){const z=h.x+R*h.xStep,G=h.y+_*h.yStep;if(!(z>=r||G>=n))for(let O=0;O<l;O++)c[(G*r+z)*l+O]=T[R*l+O]}}}if(s===16){const d=new Uint16Array(c.buffer);if(o$e)for(let h=0;h<d.length;h++)d[h]=c$e(d[h]);return d}else return c}function c$e(t){return(t&255)<<8|t>>8&255}const u$e=new Uint16Array([255]),d$e=new Uint8Array(u$e.buffer),f$e=d$e[0]===255,h$e=new Uint8Array(0);function YH(t){const{data:e,width:r,height:n,channels:a,depth:s}=t,o=Math.ceil(s/8)*a,l=Math.ceil(s/8*a*r),c=new Uint8Array(n*l);let u=h$e,d=0,h,p;for(let g=0;g<n;g++){switch(h=e.subarray(d+1,d+1+l),p=c.subarray(g*l,(g+1)*l),e[d]){case 0:goe(h,p,l);break;case 1:xoe(h,p,l,o);break;case 2:voe(h,p,u,l);break;case 3:boe(h,p,u,l,o);break;case 4:yoe(h,p,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[d]}`)}u=p,d+=l+1}if(s===16){const g=new Uint16Array(c.buffer);if(f$e)for(let b=0;b<g.length;b++)g[b]=m$e(g[b]);return g}else return c}function m$e(t){return(t&255)<<8|t>>8&255}const GN=Uint8Array.of(137,80,78,71,13,10,26,10);function ZH(t){if(!p$e(t.readBytes(GN.length)))throw new Error("wrong PNG signature")}function p$e(t){if(t.length<GN.length)return!1;for(let e=0;e<GN.length;e++)if(t[e]!==GN[e])return!1;return!0}const g$e="tEXt",x$e=0,woe=new TextDecoder("latin1");function v$e(t){if(y$e(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const b$e=/^[\u0000-\u00FF]*$/;function y$e(t){if(!b$e.test(t))throw new Error("invalid latin1 text")}function w$e(t,e,r){const n=_oe(e);t[n]=_$e(e,r-n.length-1)}function _oe(t){for(t.mark();t.readByte()!==x$e;);const e=t.offset;t.reset();const r=woe.decode(t.readBytes(e-t.offset-1));return t.skip(1),v$e(r),r}function _$e(t,e){return woe.decode(t.readBytes(e))}const fc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},kT={UNKNOWN:-1,DEFLATE:0},QH={UNKNOWN:-1,ADAPTIVE:0},IT={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},T_={NONE:0,BACKGROUND:1,PREVIOUS:2},OT={SOURCE:0,OVER:1};class N$e extends pD{constructor(r,n={}){super(r);aa(this,"_checkCrc");aa(this,"_inflator");aa(this,"_png");aa(this,"_apng");aa(this,"_end");aa(this,"_hasPalette");aa(this,"_palette");aa(this,"_hasTransparency");aa(this,"_transparency");aa(this,"_compressionMethod");aa(this,"_filterMethod");aa(this,"_interlaceMethod");aa(this,"_colorType");aa(this,"_isAnimated");aa(this,"_numberOfFrames");aa(this,"_numberOfPlays");aa(this,"_frames");aa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new WH,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=kT.UNKNOWN,this._filterMethod=QH.UNKNOWN,this._interlaceMethod=IT.UNKNOWN,this._colorType=fc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(ZH(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(ZH(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case g$e:w$e(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?XH(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?XH(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=E$e(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case fc.GREYSCALE:a=1;break;case fc.TRUECOLOUR:a=3;break;case fc.INDEXED_COLOUR:a=1;break;case fc.GREYSCALE_ALPHA:a=2;break;case fc.TRUECOLOUR_ALPHA:a=4;break;case fc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==kT.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case fc.GREYSCALE:case fc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case fc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case fc.UNKNOWN:case fc.GREYSCALE_ALPHA:case fc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=_oe(this),a=this.readUint8();if(a!==kT.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:e$e(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=YH({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case T_.NONE:break;case T_.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const l=(s*r.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[l+c]=0}break;case T_.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(o,l)=>{const c=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,u=(o*n.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(n.blendOp){case OT.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++)r.data[c+d]=n.data[u+d]}break;case OT.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:c,frameIndex:u}=s(o,l);for(let d=0;d<this._png.channels;d++){const h=n.data[u+this._png.channels-1]/a,p=d%(this._png.channels-1)===0?1:n.data[u+d],g=Math.floor(h*p+(1-h)*r.data[c+d]);r.data[c+d]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==QH.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===IT.NO_INTERLACE)this._png.data=YH({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===IT.ADAM7)this._png.data=l$e({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:T_.NONE,blendOp:OT.SOURCE,data:r}),this._inflator=new WH,this._writingDataChunks=!1}}function E$e(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var JH;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(JH||(JH={}));function A$e(t,e){return new N$e(t,e).decode()}var un=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function RT(){un.console&&typeof un.console.log=="function"&&un.console.log.apply(un.console,arguments)}var Pa={log:RT,warn:function(t){un.console&&(typeof un.console.warn=="function"?un.console.warn.apply(un.console,arguments):RT.call(null,arguments))},error:function(t){un.console&&(typeof un.console.error=="function"?un.console.error.apply(un.console,arguments):RT(t))}};function PT(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Bm(n.response,e,r)},n.onerror=function(){Pa.error("could not download file")},n.send()}function eq(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function C_(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Bm=un.saveAs||((typeof window>"u"?"undefined":wa(window))!=="object"||window!==un?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=un.URL||un.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?eq(a.href)?PT(t,e,r):C_(a,a.target="_blank"):C_(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){C_(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(eq(t))PT(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){C_(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:wa(s)!=="object"&&(Pa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return PT(t,e,r);var a=t.type==="application/octet-stream",s=/constructor/i.test(un.HTMLElement)||un.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&s)&&(typeof FileReader>"u"?"undefined":wa(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},l.readAsDataURL(t)}else{var c=un.URL||un.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Noe(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,o=a.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var WN=un.atob.bind(un),tq=un.btoa.bind(un);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function DT(t,e){var r=t[0],n=t[1],a=t[2],s=t[3];r=Po(r,n,a,s,e[0],7,-680876936),s=Po(s,r,n,a,e[1],12,-389564586),a=Po(a,s,r,n,e[2],17,606105819),n=Po(n,a,s,r,e[3],22,-1044525330),r=Po(r,n,a,s,e[4],7,-176418897),s=Po(s,r,n,a,e[5],12,1200080426),a=Po(a,s,r,n,e[6],17,-1473231341),n=Po(n,a,s,r,e[7],22,-45705983),r=Po(r,n,a,s,e[8],7,1770035416),s=Po(s,r,n,a,e[9],12,-1958414417),a=Po(a,s,r,n,e[10],17,-42063),n=Po(n,a,s,r,e[11],22,-1990404162),r=Po(r,n,a,s,e[12],7,1804603682),s=Po(s,r,n,a,e[13],12,-40341101),a=Po(a,s,r,n,e[14],17,-1502002290),r=Do(r,n=Po(n,a,s,r,e[15],22,1236535329),a,s,e[1],5,-165796510),s=Do(s,r,n,a,e[6],9,-1069501632),a=Do(a,s,r,n,e[11],14,643717713),n=Do(n,a,s,r,e[0],20,-373897302),r=Do(r,n,a,s,e[5],5,-701558691),s=Do(s,r,n,a,e[10],9,38016083),a=Do(a,s,r,n,e[15],14,-660478335),n=Do(n,a,s,r,e[4],20,-405537848),r=Do(r,n,a,s,e[9],5,568446438),s=Do(s,r,n,a,e[14],9,-1019803690),a=Do(a,s,r,n,e[3],14,-187363961),n=Do(n,a,s,r,e[8],20,1163531501),r=Do(r,n,a,s,e[13],5,-1444681467),s=Do(s,r,n,a,e[2],9,-51403784),a=Do(a,s,r,n,e[7],14,1735328473),r=Mo(r,n=Do(n,a,s,r,e[12],20,-1926607734),a,s,e[5],4,-378558),s=Mo(s,r,n,a,e[8],11,-2022574463),a=Mo(a,s,r,n,e[11],16,1839030562),n=Mo(n,a,s,r,e[14],23,-35309556),r=Mo(r,n,a,s,e[1],4,-1530992060),s=Mo(s,r,n,a,e[4],11,1272893353),a=Mo(a,s,r,n,e[7],16,-155497632),n=Mo(n,a,s,r,e[10],23,-1094730640),r=Mo(r,n,a,s,e[13],4,681279174),s=Mo(s,r,n,a,e[0],11,-358537222),a=Mo(a,s,r,n,e[3],16,-722521979),n=Mo(n,a,s,r,e[6],23,76029189),r=Mo(r,n,a,s,e[9],4,-640364487),s=Mo(s,r,n,a,e[12],11,-421815835),a=Mo(a,s,r,n,e[15],16,530742520),r=Lo(r,n=Mo(n,a,s,r,e[2],23,-995338651),a,s,e[0],6,-198630844),s=Lo(s,r,n,a,e[7],10,1126891415),a=Lo(a,s,r,n,e[14],15,-1416354905),n=Lo(n,a,s,r,e[5],21,-57434055),r=Lo(r,n,a,s,e[12],6,1700485571),s=Lo(s,r,n,a,e[3],10,-1894986606),a=Lo(a,s,r,n,e[10],15,-1051523),n=Lo(n,a,s,r,e[1],21,-2054922799),r=Lo(r,n,a,s,e[8],6,1873313359),s=Lo(s,r,n,a,e[15],10,-30611744),a=Lo(a,s,r,n,e[6],15,-1560198380),n=Lo(n,a,s,r,e[13],21,1309151649),r=Lo(r,n,a,s,e[4],6,-145523070),s=Lo(s,r,n,a,e[11],10,-1120210379),a=Lo(a,s,r,n,e[2],15,718787259),n=Lo(n,a,s,r,e[9],21,-343485551),t[0]=p0(r,t[0]),t[1]=p0(n,t[1]),t[2]=p0(a,t[2]),t[3]=p0(s,t[3])}function fS(t,e,r,n,a,s){return e=p0(p0(e,t),p0(n,s)),p0(e<<a|e>>>32-a,r)}function Po(t,e,r,n,a,s,o){return fS(e&r|~e&n,t,e,a,s,o)}function Do(t,e,r,n,a,s,o){return fS(e&n|r&~n,t,e,a,s,o)}function Mo(t,e,r,n,a,s,o){return fS(e^r^n,t,e,a,s,o)}function Lo(t,e,r,n,a,s,o){return fS(r^(e|~n),t,e,a,s,o)}function Eoe(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)DT(n,S$e(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(DT(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,DT(n,a),n}function S$e(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var rq="0123456789abcdef".split("");function j$e(t){for(var e="",r=0;r<4;r++)e+=rq[t>>8*r+4&15]+rq[t>>8*r&15];return e}function T$e(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Q8(t){return Eoe(t).map(T$e).join("")}var C$e=function(t){for(var e=0;e<t.length;e++)t[e]=j$e(t[e]);return t.join("")}(Eoe("hello"))!="5d41402abc4b2a76b9719d911017c592";function p0(t,e){if(C$e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function J8(t,e){var r,n,a,s;if(t!==r){for(var o=(a=t,s=1+(256/t.length|0),new Array(s+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var d=l[c];u=(u+d+o.charCodeAt(c))%256,l[c]=l[u],l[u]=d}r=t,n=l}else l=n;var h=e.length,p=0,g=0,b="";for(c=0;c<h;c++)g=(g+(d=l[p=(p+1)%256]))%256,l[p]=l[g],l[g]=d,o=l[(l[p]+l[g])%256],b+=String.fromCharCode(e.charCodeAt(c)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var nq={print:4,modify:8,copy:16,"annot-forms":32};function t1(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(nq.perm!==void 0)throw new Error("Invalid permission: "+l);a+=nq[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^a)),this.encryptionKey=Q8(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=J8(this.encryptionKey,this.padding)}function r1(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function aq(t){if(wa(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var s=Math.random().toString(35);return e[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in e[r]){var o=e[r][s];try{o[0].apply(t,n)}catch(l){un.console&&Pa.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function U3(t){if(!(this instanceof U3))return new U3(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function Aoe(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Xm(t,e,r,n,a){if(!(this instanceof Xm))return new Xm(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,Aoe.call(this,n,a)}function E1(t,e,r,n,a){if(!(this instanceof E1))return new E1(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,Aoe.call(this,n,a)}function zr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],o=[],l=1,c=16,u="S",d=null;wa(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,p={},g={internal:{},__private__:{}};g.__private__.PubSub=aq;var b="1.3",w=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(U){b=U};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return _};var N=g.__private__.getPageFormat=function(U){return _[U]};a=a||"a4";var S="compat",T="advanced",R=S;function z(){this.saveGraphicsState(),ve(new fr(Ft,0,0,-Ft,0,nc()*Ft).toString()+" cm"),this.setFontSize(this.getFontSize()/Ft),u="n",R=T}function G(){this.restoreGraphicsState(),u="S",R=S}var O=g.__private__.combineFontStyleAndFontWeight=function(U,ie){if(U=="bold"&&ie=="normal"||U=="bold"&&ie==400||U=="normal"&&ie=="italic"||U=="bold"&&ie=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ie&&(U=ie==400||ie==="normal"?U==="italic"?"italic":"normal":ie!=700&&ie!=="bold"||U!=="normal"?(ie==700?"bold":ie)+""+U:"bold"),U};g.advancedAPI=function(U){var ie=R===S;return ie&&z.call(this),typeof U!="function"||(U(this),ie&&G.call(this)),this},g.compatAPI=function(U){var ie=R===T;return ie&&G.call(this),typeof U!="function"||(U(this),ie&&z.call(this)),this},g.isAdvancedAPI=function(){return R===T};var D,I=function(U){if(R!==T)throw new Error(U+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=g.roundToPrecision=g.__private__.roundToPrecision=function(U,ie){var De=e||ie;if(isNaN(U)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return U.toFixed(De).replace(/0+$/,"")};D=g.hpf=g.__private__.hpf=typeof c=="number"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return V(U,c)}:c==="smart"?function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return V(U,U>-1&&U<1?16:5)}:function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.hpf");return V(U,16)};var P=g.f2=g.__private__.f2=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f2");return V(U,2)},B=g.__private__.f3=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.f3");return V(U,3)},F=g.scale=g.__private__.scale=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.scale");return R===S?U*Ft:R===T?U:void 0},ee=function(U){return F(function(ie){return R===S?nc()-ie:R===T?ie:void 0}(U))};g.__private__.setPrecision=g.setPrecision=function(U){typeof parseInt(U,10)=="number"&&(e=parseInt(U,10))};var Z,ce="00000000000000000000000000000000",ne=g.__private__.getFileId=function(){return ce},ae=g.__private__.setFileId=function(U){return ce=U!==void 0&&/^[a-fA-F0-9]{32}$/.test(U)?U.toUpperCase():ce.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(Pn=new t1(d.userPermissions,d.userPassword,d.ownerPassword,ce)),ce};g.setFileId=function(U){return ae(U),this},g.getFileId=function(){return ne()};var me=g.__private__.convertDateToPDFDate=function(U){var ie=U.getTimezoneOffset(),De=ie<0?"+":"-",He=Math.floor(Math.abs(ie/60)),tt=Math.abs(ie%60),Pt=[De,X(He),"'",X(tt),"'"].join("");return["D:",U.getFullYear(),X(U.getMonth()+1),X(U.getDate()),X(U.getHours()),X(U.getMinutes()),X(U.getSeconds()),Pt].join("")},Te=g.__private__.convertPDFDateToDate=function(U){var ie=parseInt(U.substr(2,4),10),De=parseInt(U.substr(6,2),10)-1,He=parseInt(U.substr(8,2),10),tt=parseInt(U.substr(10,2),10),Pt=parseInt(U.substr(12,2),10),Jt=parseInt(U.substr(14,2),10);return new Date(ie,De,He,tt,Pt,Jt,0)},we=g.__private__.setCreationDate=function(U){var ie;if(U===void 0&&(U=new Date),U instanceof Date)ie=me(U);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(U))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ie=U}return Z=ie},q=g.__private__.getCreationDate=function(U){var ie=Z;return U==="jsDate"&&(ie=Te(Z)),ie};g.setCreationDate=function(U){return we(U),this},g.getCreationDate=function(U){return q(U)};var Y,X=g.__private__.padd2=function(U){return("0"+parseInt(U)).slice(-2)},re=g.__private__.padd2Hex=function(U){return("00"+(U=U.toString())).substr(U.length)},se=0,Ce=[],je=[],pe=0,Oe=[],qe=[],Ue=!1,Me=je;g.__private__.setCustomOutputDestination=function(U){Ue=!0,Me=U};var Be=function(U){Ue||(Me=U)};g.__private__.resetCustomOutputDestination=function(){Ue=!1,Me=je};var ve=g.__private__.out=function(U){return U=U.toString(),pe+=U.length+1,Me.push(U),Me},Ht=g.__private__.write=function(U){return ve(arguments.length===1?U.toString():Array.prototype.join.call(arguments," "))},mt=g.__private__.getArrayBuffer=function(U){for(var ie=U.length,De=new ArrayBuffer(ie),He=new Uint8Array(De);ie--;)He[ie]=U.charCodeAt(ie);return De},Ut=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return Ut};var et=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(U){return et=R===T?U/Ft:U,this};var er,Ve=g.__private__.getFontSize=g.getFontSize=function(){return R===S?et:et*Ft},zt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(U){return zt=U,this},g.__private__.getR2L=g.getR2L=function(){return zt};var Wt,Yt=g.__private__.setZoomMode=function(U){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(U))er=U;else if(isNaN(U)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(U)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+U+'" is not recognized.');er=U}else er=parseInt(U,10)};g.__private__.getZoomMode=function(){return er};var ar,Xe=g.__private__.setPageMode=function(U){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(U)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+U+'" is not recognized.');Wt=U};g.__private__.getPageMode=function(){return Wt};var qt=g.__private__.setLayoutMode=function(U){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(U)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+U+'" is not recognized.');ar=U};g.__private__.getLayoutMode=function(){return ar},g.__private__.setDisplayMode=g.setDisplayMode=function(U,ie,De){return Yt(U),qt(ie),Xe(De),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(U){if(Object.keys(kt).indexOf(U)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[U]},g.__private__.getDocumentProperties=function(){return kt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(U){for(var ie in kt)kt.hasOwnProperty(ie)&&U[ie]&&(kt[ie]=U[ie]);return this},g.__private__.setDocumentProperty=function(U,ie){if(Object.keys(kt).indexOf(U)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[U]=ie};var gt,Ft,Vt,Nr,sr,it={},ir={},be=[],Ze={},at={},Qe={},ze={},st=null,St=0,tr=[],It=new aq(g),Er=t.hotfixes||[],en={},$r={},jn=[],fr=function U(ie,De,He,tt,Pt,Jt){if(!(this instanceof U))return new U(ie,De,He,tt,Pt,Jt);isNaN(ie)&&(ie=1),isNaN(De)&&(De=0),isNaN(He)&&(He=0),isNaN(tt)&&(tt=1),isNaN(Pt)&&(Pt=0),isNaN(Jt)&&(Jt=0),this._matrix=[ie,De,He,tt,Pt,Jt]};Object.defineProperty(fr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(fr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(fr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(fr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(fr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(fr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(fr.prototype,"a",{get:function(){return this._matrix[0]},set:function(U){this._matrix[0]=U}}),Object.defineProperty(fr.prototype,"b",{get:function(){return this._matrix[1]},set:function(U){this._matrix[1]=U}}),Object.defineProperty(fr.prototype,"c",{get:function(){return this._matrix[2]},set:function(U){this._matrix[2]=U}}),Object.defineProperty(fr.prototype,"d",{get:function(){return this._matrix[3]},set:function(U){this._matrix[3]=U}}),Object.defineProperty(fr.prototype,"e",{get:function(){return this._matrix[4]},set:function(U){this._matrix[4]=U}}),Object.defineProperty(fr.prototype,"f",{get:function(){return this._matrix[5]},set:function(U){this._matrix[5]=U}}),Object.defineProperty(fr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(fr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(fr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(fr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),fr.prototype.join=function(U){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(U)},fr.prototype.multiply=function(U){var ie=U.sx*this.sx+U.shy*this.shx,De=U.sx*this.shy+U.shy*this.sy,He=U.shx*this.sx+U.sy*this.shx,tt=U.shx*this.shy+U.sy*this.sy,Pt=U.tx*this.sx+U.ty*this.shx+this.tx,Jt=U.tx*this.shy+U.ty*this.sy+this.ty;return new fr(ie,De,He,tt,Pt,Jt)},fr.prototype.decompose=function(){var U=this.sx,ie=this.shy,De=this.shx,He=this.sy,tt=this.tx,Pt=this.ty,Jt=Math.sqrt(U*U+ie*ie),Sr=(U/=Jt)*De+(ie/=Jt)*He;De-=U*Sr,He-=ie*Sr;var xr=Math.sqrt(De*De+He*He);return Sr/=xr,U*(He/=xr)<ie*(De/=xr)&&(U=-U,ie=-ie,Sr=-Sr,Jt=-Jt),{scale:new fr(Jt,0,0,xr,0,0),translate:new fr(1,0,0,1,tt,Pt),rotate:new fr(U,ie,-ie,U,0,0),skew:new fr(1,0,Sr,1,0,0)}},fr.prototype.toString=function(U){return this.join(" ")},fr.prototype.inversed=function(){var U=this.sx,ie=this.shy,De=this.shx,He=this.sy,tt=this.tx,Pt=this.ty,Jt=1/(U*He-ie*De),Sr=He*Jt,xr=-ie*Jt,Kr=-De*Jt,yr=U*Jt;return new fr(Sr,xr,Kr,yr,-Sr*tt-Kr*Pt,-xr*tt-yr*Pt)},fr.prototype.applyToPoint=function(U){var ie=U.x*this.sx+U.y*this.shx+this.tx,De=U.x*this.shy+U.y*this.sy+this.ty;return new Ca(ie,De)},fr.prototype.applyToRectangle=function(U){var ie=this.applyToPoint(U),De=this.applyToPoint(new Ca(U.x+U.w,U.y+U.h));return new Mu(ie.x,ie.y,De.x-ie.x,De.y-ie.y)},fr.prototype.clone=function(){var U=this.sx,ie=this.shy,De=this.shx,He=this.sy,tt=this.tx,Pt=this.ty;return new fr(U,ie,De,He,tt,Pt)},g.Matrix=fr;var dn=g.matrixMult=function(U,ie){return ie.multiply(U)},Vn=new fr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Vn;var on=function(U,ie){if(!at[U]){var De=(ie instanceof Xm?"Sh":"P")+(Object.keys(Ze).length+1).toString(10);ie.id=De,at[U]=De,Ze[De]=ie,It.publish("addPattern",ie)}};g.ShadingPattern=Xm,g.TilingPattern=E1,g.addShadingPattern=function(U,ie){return I("addShadingPattern()"),on(U,ie),this},g.beginTilingPattern=function(U){I("beginTilingPattern()"),rc(U.boundingBox[0],U.boundingBox[1],U.boundingBox[2]-U.boundingBox[0],U.boundingBox[3]-U.boundingBox[1],U.matrix)},g.endTilingPattern=function(U,ie){I("endTilingPattern()"),ie.stream=qe[Y].join(`
`),on(U,ie),It.publish("endTilingPattern",ie),jn.pop().restore()};var _n,Zr=g.__private__.newObject=function(){var U=tn();return de(U,!0),U},tn=g.__private__.newObjectDeferred=function(){return se++,Ce[se]=function(){return pe},se},de=function(U,ie){return ie=typeof ie=="boolean"&&ie,Ce[U]=pe,ie&&ve(U+" 0 obj"),U},ge=g.__private__.newAdditionalObject=function(){var U={objId:tn(),content:""};return Oe.push(U),U},Ne=tn(),Ee=tn(),ke=g.__private__.decodeColorString=function(U){var ie=U.split(" ");if(ie.length!==2||ie[1]!=="g"&&ie[1]!=="G")ie.length!==5||ie[4]!=="k"&&ie[4]!=="K"||(ie=[(1-ie[0])*(1-ie[3]),(1-ie[1])*(1-ie[3]),(1-ie[2])*(1-ie[3]),"r"]);else{var De=parseFloat(ie[0]);ie=[De,De,De,"r"]}for(var He="#",tt=0;tt<3;tt++)He+=("0"+Math.floor(255*parseFloat(ie[tt])).toString(16)).slice(-2);return He},Pe=g.__private__.encodeColorString=function(U){var ie;typeof U=="string"&&(U={ch1:U});var De=U.ch1,He=U.ch2,tt=U.ch3,Pt=U.ch4,Jt=U.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var Sr=new Noe(De);if(Sr.ok)De=Sr.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var xr=parseInt(De.substr(1),16);De=xr>>16&255,He=xr>>8&255,tt=255&xr}if(He===void 0||Pt===void 0&&De===He&&He===tt)ie=typeof De=="string"?De+" "+Jt[0]:U.precision===2?P(De/255)+" "+Jt[0]:B(De/255)+" "+Jt[0];else if(Pt===void 0||wa(Pt)==="object"){if(Pt&&!isNaN(Pt.a)&&Pt.a===0)return["1.","1.","1.",Jt[1]].join(" ");ie=typeof De=="string"?[De,He,tt,Jt[1]].join(" "):U.precision===2?[P(De/255),P(He/255),P(tt/255),Jt[1]].join(" "):[B(De/255),B(He/255),B(tt/255),Jt[1]].join(" ")}else ie=typeof De=="string"?[De,He,tt,Pt,Jt[2]].join(" "):U.precision===2?[P(De),P(He),P(tt),P(Pt),Jt[2]].join(" "):[B(De),B(He),B(tt),B(Pt),Jt[2]].join(" ");return ie},lt=g.__private__.getFilters=function(){return o},jt=g.__private__.putStream=function(U){var ie=(U=U||{}).data||"",De=U.filters||lt(),He=U.alreadyAppliedFilters||[],tt=U.addLength1||!1,Pt=ie.length,Jt=U.objectId,Sr=function(K){return K};if(d!==null&&Jt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Sr=Pn.encryptor(Jt,0));var xr={};De===!0&&(De=["FlateEncode"]);var Kr=U.additionalKeyValues||[],yr=(xr=zr.API.processDataByFilters!==void 0?zr.API.processDataByFilters(ie,De):{data:ie,reverseChain:[]}).reverseChain+(Array.isArray(He)?He.join(" "):He.toString());if(xr.data.length!==0&&(Kr.push({key:"Length",value:xr.data.length}),tt===!0&&Kr.push({key:"Length1",value:Pt})),yr.length!=0)if(yr.split("/").length-1==1)Kr.push({key:"Filter",value:yr});else{Kr.push({key:"Filter",value:"["+yr+"]"});for(var In=0;In<Kr.length;In+=1)if(Kr[In].key==="DecodeParms"){for(var qn=[],Xr=0;Xr<xr.reverseChain.split("/").length-1;Xr+=1)qn.push("null");qn.push(Kr[In].value),Kr[In].value="["+qn.join(" ")+"]"}}ve("<<");for(var j=0;j<Kr.length;j++)ve("/"+Kr[j].key+" "+Kr[j].value);ve(">>"),xr.data.length!==0&&(ve("stream"),ve(Sr(xr.data)),ve("endstream"))},rt=g.__private__.putPage=function(U){var ie=U.number,De=U.data,He=U.objId,tt=U.contentsObjId;de(He,!0),ve("<</Type /Page"),ve("/Parent "+U.rootDictionaryObjId+" 0 R"),ve("/Resources "+U.resourceDictionaryObjId+" 0 R"),ve("/MediaBox ["+parseFloat(D(U.mediaBox.bottomLeftX))+" "+parseFloat(D(U.mediaBox.bottomLeftY))+" "+D(U.mediaBox.topRightX)+" "+D(U.mediaBox.topRightY)+"]"),U.cropBox!==null&&ve("/CropBox ["+D(U.cropBox.bottomLeftX)+" "+D(U.cropBox.bottomLeftY)+" "+D(U.cropBox.topRightX)+" "+D(U.cropBox.topRightY)+"]"),U.bleedBox!==null&&ve("/BleedBox ["+D(U.bleedBox.bottomLeftX)+" "+D(U.bleedBox.bottomLeftY)+" "+D(U.bleedBox.topRightX)+" "+D(U.bleedBox.topRightY)+"]"),U.trimBox!==null&&ve("/TrimBox ["+D(U.trimBox.bottomLeftX)+" "+D(U.trimBox.bottomLeftY)+" "+D(U.trimBox.topRightX)+" "+D(U.trimBox.topRightY)+"]"),U.artBox!==null&&ve("/ArtBox ["+D(U.artBox.bottomLeftX)+" "+D(U.artBox.bottomLeftY)+" "+D(U.artBox.topRightX)+" "+D(U.artBox.topRightY)+"]"),typeof U.userUnit=="number"&&U.userUnit!==1&&ve("/UserUnit "+U.userUnit),It.publish("putPage",{objId:He,pageContext:tr[ie],pageNumber:ie,page:De}),ve("/Contents "+tt+" 0 R"),ve(">>"),ve("endobj");var Pt=De.join(`
`);return R===T&&(Pt+=`
Q`),de(tt,!0),jt({data:Pt,filters:lt(),objectId:tt}),ve("endobj"),He},Ae=g.__private__.putPages=function(){var U,ie,De=[];for(U=1;U<=St;U++)tr[U].objId=tn(),tr[U].contentsObjId=tn();for(U=1;U<=St;U++)De.push(rt({number:U,data:qe[U],objId:tr[U].objId,contentsObjId:tr[U].contentsObjId,mediaBox:tr[U].mediaBox,cropBox:tr[U].cropBox,bleedBox:tr[U].bleedBox,trimBox:tr[U].trimBox,artBox:tr[U].artBox,userUnit:tr[U].userUnit,rootDictionaryObjId:Ne,resourceDictionaryObjId:Ee}));de(Ne,!0),ve("<</Type /Pages");var He="/Kids [";for(ie=0;ie<St;ie++)He+=De[ie]+" 0 R ";ve(He+"]"),ve("/Count "+St),ve(">>"),ve("endobj"),It.publish("postPutPages")},Ge=function(U){It.publish("putFont",{font:U,out:ve,newObject:Zr,putStream:jt}),U.isAlreadyPutted!==!0&&(U.objectNumber=Zr(),ve("<<"),ve("/Type /Font"),ve("/BaseFont /"+r1(U.postScriptName)),ve("/Subtype /Type1"),typeof U.encoding=="string"&&ve("/Encoding /"+U.encoding),ve("/FirstChar 32"),ve("/LastChar 255"),ve(">>"),ve("endobj"))},dt=function(U){U.objectNumber=Zr();var ie=[];ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Form"}),ie.push({key:"BBox",value:"["+[D(U.x),D(U.y),D(U.x+U.width),D(U.y+U.height)].join(" ")+"]"}),ie.push({key:"Matrix",value:"["+U.matrix.toString()+"]"});var De=U.pages[1].join(`
`);jt({data:De,additionalKeyValues:ie,objectId:U.objectNumber}),ve("endobj")},At=function(U,ie){ie||(ie=21);var De=Zr(),He=function(Jt,Sr){var xr,Kr=[],yr=1/(Sr-1);for(xr=0;xr<1;xr+=yr)Kr.push(xr);if(Kr.push(1),Jt[0].offset!=0){var In={offset:0,color:Jt[0].color};Jt.unshift(In)}if(Jt[Jt.length-1].offset!=1){var qn={offset:1,color:Jt[Jt.length-1].color};Jt.push(qn)}for(var Xr="",j=0,K=0;K<Kr.length;K++){for(xr=Kr[K];xr>Jt[j+1].offset;)j++;var te=Jt[j].offset,ye=(xr-te)/(Jt[j+1].offset-te),nt=Jt[j].color,xt=Jt[j+1].color;Xr+=re(Math.round((1-ye)*nt[0]+ye*xt[0]).toString(16))+re(Math.round((1-ye)*nt[1]+ye*xt[1]).toString(16))+re(Math.round((1-ye)*nt[2]+ye*xt[2]).toString(16))}return Xr.trim()}(U.colors,ie),tt=[];tt.push({key:"FunctionType",value:"0"}),tt.push({key:"Domain",value:"[0.0 1.0]"}),tt.push({key:"Size",value:"["+ie+"]"}),tt.push({key:"BitsPerSample",value:"8"}),tt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jt({data:He,additionalKeyValues:tt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),ve("endobj"),U.objectNumber=Zr(),ve("<< /ShadingType "+U.type),ve("/ColorSpace /DeviceRGB");var Pt="/Coords ["+D(parseFloat(U.coords[0]))+" "+D(parseFloat(U.coords[1]))+" ";U.type===2?Pt+=D(parseFloat(U.coords[2]))+" "+D(parseFloat(U.coords[3])):Pt+=D(parseFloat(U.coords[2]))+" "+D(parseFloat(U.coords[3]))+" "+D(parseFloat(U.coords[4]))+" "+D(parseFloat(U.coords[5])),ve(Pt+="]"),U.matrix&&ve("/Matrix ["+U.matrix.toString()+"]"),ve("/Function "+De+" 0 R"),ve("/Extend [true true]"),ve(">>"),ve("endobj")},yt=function(U,ie){var De=tn(),He=Zr();ie.push({resourcesOid:De,objectOid:He}),U.objectNumber=He;var tt=[];tt.push({key:"Type",value:"/Pattern"}),tt.push({key:"PatternType",value:"1"}),tt.push({key:"PaintType",value:"1"}),tt.push({key:"TilingType",value:"1"}),tt.push({key:"BBox",value:"["+U.boundingBox.map(D).join(" ")+"]"}),tt.push({key:"XStep",value:D(U.xStep)}),tt.push({key:"YStep",value:D(U.yStep)}),tt.push({key:"Resources",value:De+" 0 R"}),U.matrix&&tt.push({key:"Matrix",value:"["+U.matrix.toString()+"]"}),jt({data:U.stream,additionalKeyValues:tt,objectId:U.objectNumber}),ve("endobj")},Ct=function(U){for(var ie in U.objectNumber=Zr(),ve("<<"),U)switch(ie){case"opacity":ve("/ca "+P(U[ie]));break;case"stroke-opacity":ve("/CA "+P(U[ie]))}ve(">>"),ve("endobj")},Xt=function(U){de(U.resourcesOid,!0),ve("<<"),ve("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ie in ve("/Font <<"),it)it.hasOwnProperty(ie)&&(h===!1||h===!0&&p.hasOwnProperty(ie))&&ve("/"+ie+" "+it[ie].objectNumber+" 0 R");ve(">>")}(),function(){if(Object.keys(Ze).length>0){for(var ie in ve("/Shading <<"),Ze)Ze.hasOwnProperty(ie)&&Ze[ie]instanceof Xm&&Ze[ie].objectNumber>=0&&ve("/"+ie+" "+Ze[ie].objectNumber+" 0 R");It.publish("putShadingPatternDict"),ve(">>")}}(),function(ie){if(Object.keys(Ze).length>0){for(var De in ve("/Pattern <<"),Ze)Ze.hasOwnProperty(De)&&Ze[De]instanceof g.TilingPattern&&Ze[De].objectNumber>=0&&Ze[De].objectNumber<ie&&ve("/"+De+" "+Ze[De].objectNumber+" 0 R");It.publish("putTilingPatternDict"),ve(">>")}}(U.objectOid),function(){if(Object.keys(Qe).length>0){var ie;for(ie in ve("/ExtGState <<"),Qe)Qe.hasOwnProperty(ie)&&Qe[ie].objectNumber>=0&&ve("/"+ie+" "+Qe[ie].objectNumber+" 0 R");It.publish("putGStateDict"),ve(">>")}}(),function(){for(var ie in ve("/XObject <<"),en)en.hasOwnProperty(ie)&&en[ie].objectNumber>=0&&ve("/"+ie+" "+en[ie].objectNumber+" 0 R");It.publish("putXobjectDict"),ve(">>")}(),ve(">>"),ve("endobj")},vr=function(U){ir[U.fontName]=ir[U.fontName]||{},ir[U.fontName][U.fontStyle]=U.id},_t=function(U,ie,De,He,tt){var Pt={id:"F"+(Object.keys(it).length+1).toString(10),postScriptName:U,fontName:ie,fontStyle:De,encoding:He,isStandardFont:tt||!1,metadata:{}};return It.publish("addFont",{font:Pt,instance:this}),it[Pt.id]=Pt,vr(Pt),Pt.id},Hr=g.__private__.pdfEscape=g.pdfEscape=function(U,ie){return function(De,He){var tt,Pt,Jt,Sr,xr,Kr,yr,In,qn;if(Jt=(He=He||{}).sourceEncoding||"Unicode",xr=He.outputEncoding,(He.autoencode||xr)&&it[gt].metadata&&it[gt].metadata[Jt]&&it[gt].metadata[Jt].encoding&&(Sr=it[gt].metadata[Jt].encoding,!xr&&it[gt].encoding&&(xr=it[gt].encoding),!xr&&Sr.codePages&&(xr=Sr.codePages[0]),typeof xr=="string"&&(xr=Sr[xr]),xr)){for(yr=!1,Kr=[],tt=0,Pt=De.length;tt<Pt;tt++)(In=xr[De.charCodeAt(tt)])?Kr.push(String.fromCharCode(In)):Kr.push(De[tt]),Kr[tt].charCodeAt(0)>>8&&(yr=!0);De=Kr.join("")}for(tt=De.length;yr===void 0&&tt!==0;)De.charCodeAt(tt-1)>>8&&(yr=!0),tt--;if(!yr)return De;for(Kr=He.noBOM?[]:[254,255],tt=0,Pt=De.length;tt<Pt;tt++){if((qn=(In=De.charCodeAt(tt))>>8)>>8)throw new Error("Character at position "+tt+" of string '"+De+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Kr.push(qn),Kr.push(In-(qn<<8))}return String.fromCharCode.apply(void 0,Kr)}(U,ie).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fr=g.__private__.beginPage=function(U){qe[++St]=[],tr[St]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(U[0]),topRightY:Number(U[1])}},fn(St),Be(qe[Y])},Ua=function(U,ie){var De,He,tt;switch(r=ie||r,typeof U=="string"&&(De=N(U.toLowerCase()),Array.isArray(De)&&(He=De[0],tt=De[1])),Array.isArray(U)&&(He=U[0]*Ft,tt=U[1]*Ft),isNaN(He)&&(He=a[0],tt=a[1]),(He>14400||tt>14400)&&(Pa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),He=Math.min(14400,He),tt=Math.min(14400,tt)),a=[He,tt],r.substr(0,1)){case"l":tt>He&&(a=[tt,He]);break;case"p":He>tt&&(a=[tt,He])}Fr(a),Yo(Ui),ve(Du),so!==0&&ve(so+" J"),Al!==0&&ve(Al+" j"),It.publish("addPage",{pageNumber:St})},wi=function(U){U>0&&U<=St&&(qe.splice(U,1),tr.splice(U,1),St--,Y>St&&(Y=St),this.setPage(Y))},fn=function(U){U>0&&U<=St&&(Y=U)},nn=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return qe.length-1},an=function(U,ie,De){var He,tt=void 0;return De=De||{},U=U!==void 0?U:it[gt].fontName,ie=ie!==void 0?ie:it[gt].fontStyle,He=U.toLowerCase(),ir[He]!==void 0&&ir[He][ie]!==void 0?tt=ir[He][ie]:ir[U]!==void 0&&ir[U][ie]!==void 0?tt=ir[U][ie]:De.disableWarning===!1&&Pa.warn("Unable to look up font label for font '"+U+"', '"+ie+"'. Refer to getFontList() for available fonts."),tt||De.noFallback||(tt=ir.times[ie])==null&&(tt=ir.times.normal),tt},Wa=g.__private__.putInfo=function(){var U=Zr(),ie=function(He){return He};for(var De in d!==null&&(ie=Pn.encryptor(U,0)),ve("<<"),ve("/Producer ("+Hr(ie("jsPDF "+zr.version))+")"),kt)kt.hasOwnProperty(De)&&kt[De]&&ve("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+Hr(ie(kt[De]))+")");ve("/CreationDate ("+Hr(ie(Z))+")"),ve(">>"),ve("endobj")},_i=g.__private__.putCatalog=function(U){var ie=(U=U||{}).rootDictionaryObjId||Ne;switch(Zr(),ve("<<"),ve("/Type /Catalog"),ve("/Pages "+ie+" 0 R"),er||(er="fullwidth"),er){case"fullwidth":ve("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ve("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ve("/OpenAction [3 0 R /Fit]");break;case"original":ve("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+er;De.substr(De.length-1)==="%"&&(er=parseInt(er)/100),typeof er=="number"&&ve("/OpenAction [3 0 R /XYZ null null "+P(er)+"]")}switch(ar||(ar="continuous"),ar){case"continuous":ve("/PageLayout /OneColumn");break;case"single":ve("/PageLayout /SinglePage");break;case"two":case"twoleft":ve("/PageLayout /TwoColumnLeft");break;case"tworight":ve("/PageLayout /TwoColumnRight")}Wt&&ve("/PageMode /"+Wt),It.publish("putCatalog"),ve(">>"),ve("endobj")},Rn=g.__private__.putTrailer=function(){ve("trailer"),ve("<<"),ve("/Size "+(se+1)),ve("/Root "+se+" 0 R"),ve("/Info "+(se-1)+" 0 R"),d!==null&&ve("/Encrypt "+Pn.oid+" 0 R"),ve("/ID [ <"+ce+"> <"+ce+"> ]"),ve(">>")},Xn=g.__private__.putHeader=function(){ve("%PDF-"+b),ve("%")},As=g.__private__.putXRef=function(){var U="0000000000";ve("xref"),ve("0 "+(se+1)),ve("0000000000 65535 f ");for(var ie=1;ie<=se;ie++)typeof Ce[ie]=="function"?ve((U+Ce[ie]()).slice(-10)+" 00000 n "):Ce[ie]!==void 0?ve((U+Ce[ie]).slice(-10)+" 00000 n "):ve("0000000000 00000 n ")},Fi=g.__private__.buildDocument=function(){var U;se=0,pe=0,je=[],Ce=[],Oe=[],Ne=tn(),Ee=tn(),Be(je),It.publish("buildDocument"),Xn(),Ae(),function(){It.publish("putAdditionalObjects");for(var De=0;De<Oe.length;De++){var He=Oe[De];de(He.objId,!0),ve(He.content),ve("endobj")}It.publish("postPutAdditionalObjects")}(),U=[],function(){for(var De in it)it.hasOwnProperty(De)&&(h===!1||h===!0&&p.hasOwnProperty(De))&&Ge(it[De])}(),function(){var De;for(De in Qe)Qe.hasOwnProperty(De)&&Ct(Qe[De])}(),function(){for(var De in en)en.hasOwnProperty(De)&&dt(en[De])}(),function(De){var He;for(He in Ze)Ze.hasOwnProperty(He)&&(Ze[He]instanceof Xm?At(Ze[He]):Ze[He]instanceof E1&&yt(Ze[He],De))}(U),It.publish("putResources"),U.forEach(Xt),Xt({resourcesOid:Ee,objectOid:Number.MAX_SAFE_INTEGER}),It.publish("postPutResources"),d!==null&&(Pn.oid=Zr(),ve("<<"),ve("/Filter /Standard"),ve("/V "+Pn.v),ve("/R "+Pn.r),ve("/U <"+Pn.toHexString(Pn.U)+">"),ve("/O <"+Pn.toHexString(Pn.O)+">"),ve("/P "+Pn.P),ve(">>"),ve("endobj")),Wa(),_i();var ie=pe;return As(),Rn(),ve("startxref"),ve(""+ie),ve("%%EOF"),Be(qe[Y]),je.join(`
`)},Br=g.__private__.getBlob=function(U){return new Blob([mt(U)],{type:"application/pdf"})},ja=g.output=g.__private__.output=(_n=function(U,ie){switch(typeof(ie=ie||{})=="string"?ie={filename:ie}:ie.filename=ie.filename||"generated.pdf",U){case void 0:return Fi();case"save":g.save(ie.filename);break;case"arraybuffer":return mt(Fi());case"blob":return Br(Fi());case"bloburi":case"bloburl":if(un.URL!==void 0&&typeof un.URL.createObjectURL=="function")return un.URL&&un.URL.createObjectURL(Br(Fi()))||void 0;Pa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",He=Fi();try{De=tq(He)}catch{De=tq(unescape(encodeURIComponent(He)))}return"data:application/pdf;filename="+ie.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var tt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ie.pdfObjectUrl&&(tt=ie.pdfObjectUrl,Pt="");var Jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+tt+'"'+Pt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ie)+");<\/script></body></html>",Sr=un.open();return Sr!==null&&Sr.document.write(Jt),Sr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(un)==="[object Window]"){var xr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ie.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ie.filename+'" width="500px" height="400px" /></body></html>',Kr=un.open();if(Kr!==null){Kr.document.write(xr);var yr=this;Kr.document.documentElement.querySelector("#pdfViewer").onload=function(){Kr.document.title=ie.filename,Kr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yr.output("bloburl"))}}return Kr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(un)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ie)+'"></iframe></body></html>',qn=un.open();if(qn!==null&&(qn.document.write(In),qn.document.title=ie.filename),qn||typeof safari>"u")return qn;break;case"datauri":case"dataurl":return un.document.location.href=this.output("datauristring",ie);default:return null}},_n.foo=function(){try{return _n.apply(this,arguments)}catch(De){var U=De.stack||"";~U.indexOf(" at ")&&(U=U.split(" at ")[1]);var ie="Error in function "+U.split(`
`)[0].split("<")[0]+": "+De.message;if(!un.console)throw new Error(ie);un.console.error(ie,De),un.alert&&alert(ie)}},_n.foo.bar=_n,_n.foo),Bi=function(U){return Array.isArray(Er)===!0&&Er.indexOf(U)>-1};switch(n){case"pt":Ft=1;break;case"mm":Ft=72/25.4;break;case"cm":Ft=72/2.54;break;case"in":Ft=72;break;case"px":Ft=Bi("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ft=12;break;case"ex":Ft=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Ft=n}var Pn=null;we(),ae();var Dn=g.__private__.getPageInfo=g.getPageInfo=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tr[U].objId,pageNumber:U,pageContext:tr[U]}},za=g.__private__.getPageInfoByObjId=function(U){if(isNaN(U)||U%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ie in tr)if(tr[ie].objId===U)break;return Dn(ie)},ct=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:tr[Y].objId,pageNumber:Y,pageContext:tr[Y]}};g.addPage=function(){return Ua.apply(this,arguments),this},g.setPage=function(){return fn.apply(this,arguments),Be.call(this,qe[Y]),this},g.insertPage=function(U){return this.addPage(),this.movePage(Y,U),this},g.movePage=function(U,ie){var De,He;if(U>ie){De=qe[U],He=tr[U];for(var tt=U;tt>ie;tt--)qe[tt]=qe[tt-1],tr[tt]=tr[tt-1];qe[ie]=De,tr[ie]=He,this.setPage(ie)}else if(U<ie){De=qe[U],He=tr[U];for(var Pt=U;Pt<ie;Pt++)qe[Pt]=qe[Pt+1],tr[Pt]=tr[Pt+1];qe[ie]=De,tr[ie]=He,this.setPage(ie)}return this},g.deletePage=function(){return wi.apply(this,arguments),this},g.__private__.text=g.text=function(U,ie,De,He,tt){var Pt,Jt,Sr,xr,Kr,yr,In,qn,Xr,j=(He=He||{}).scope||this;if(typeof U=="number"&&typeof ie=="number"&&(typeof De=="string"||Array.isArray(De))){var K=De;De=ie,ie=U,U=K}if(arguments[3]instanceof fr==0?(Sr=arguments[4],xr=arguments[5],wa(In=arguments[3])==="object"&&In!==null||(typeof Sr=="string"&&(xr=Sr,Sr=null),typeof In=="string"&&(xr=In,In=null),typeof In=="number"&&(Sr=In,In=null),He={flags:In,angle:Sr,align:xr})):(I("The transform parameter of text() with a Matrix value"),Xr=tt),isNaN(ie)||isNaN(De)||U==null)throw new Error("Invalid arguments passed to jsPDF.text");if(U.length===0)return j;var te,ye="",nt=typeof He.lineHeightFactor=="number"?He.lineHeightFactor:gs,xt=j.internal.scaleFactor;function or(Bt){return Bt=Bt.split("	").join(Array(He.TabLen||9).join(" ")),Hr(Bt,In)}function rn(Bt){for(var Kt,$t=Bt.concat(),Wr=[],Qr=$t.length;Qr--;)typeof(Kt=$t.shift())=="string"?Wr.push(Kt):Array.isArray(Bt)&&(Kt.length===1||Kt[1]===void 0&&Kt[2]===void 0)?Wr.push(Kt[0]):Wr.push([Kt[0],Kt[1],Kt[2]]);return Wr}function fa(Bt,Kt){var $t;if(typeof Bt=="string")$t=Kt(Bt)[0];else if(Array.isArray(Bt)){for(var Wr,Qr,ri=Bt.concat(),Hi=[],Ei=ri.length;Ei--;)typeof(Wr=ri.shift())=="string"?Hi.push(Kt(Wr)[0]):Array.isArray(Wr)&&typeof Wr[0]=="string"&&(Qr=Kt(Wr[0],Wr[1],Wr[2]),Hi.push([Qr[0],Qr[1],Qr[2]]));$t=Hi}return $t}var Tn=!1,ma=!0;if(typeof U=="string")Tn=!0;else if(Array.isArray(U)){var zs=U.concat();Jt=[];for(var io,Qn=zs.length;Qn--;)(typeof(io=zs.shift())!="string"||Array.isArray(io)&&typeof io[0]!="string")&&(ma=!1);Tn=ma}if(Tn===!1)throw new Error('Type of text must be string or Array. "'+U+'" is not recognized.');typeof U=="string"&&(U=U.match(/[\r?\n]/)?U.split(/\r\n|\r|\n/g):[U]);var ti=et/j.internal.scaleFactor,Sl=ti*(nt-1);switch(He.baseline){case"bottom":De-=Sl;break;case"top":De+=ti-Sl;break;case"hanging":De+=ti-2*Sl;break;case"middle":De+=ti/2-Sl}if((yr=He.maxWidth||0)>0&&(typeof U=="string"?U=j.splitTextToSize(U,yr):Object.prototype.toString.call(U)==="[object Array]"&&(U=U.reduce(function(Bt,Kt){return Bt.concat(j.splitTextToSize(Kt,yr))},[]))),Pt={text:U,x:ie,y:De,options:He,mutex:{pdfEscape:Hr,activeFontKey:gt,fonts:it,activeFontSize:et}},It.publish("preProcessText",Pt),U=Pt.text,Sr=(He=Pt.options).angle,Xr instanceof fr==0&&Sr&&typeof Sr=="number"){Sr*=Math.PI/180,He.rotationDirection===0&&(Sr=-Sr),R===T&&(Sr=-Sr);var tl=Math.cos(Sr),_m=Math.sin(Sr);Xr=new fr(tl,_m,-_m,tl,0,0)}else Sr&&Sr instanceof fr&&(Xr=Sr);R!==T||Xr||(Xr=Vn),(Kr=He.charSpace||Jo)!==void 0&&(ye+=D(F(Kr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qn=He.horizontalScale)!==void 0&&(ye+=D(100*qn)+` Tz
`),He.lang;var na=-1,jl=He.renderingMode!==void 0?He.renderingMode:He.stroke,Ni=j.internal.getCurrentPageInfo().pageContext;switch(jl){case 0:case!1:case"fill":na=0;break;case 1:case!0:case"stroke":na=1;break;case 2:case"fillThenStroke":na=2;break;case 3:case"invisible":na=3;break;case 4:case"fillAndAddForClipping":na=4;break;case 5:case"strokeAndAddPathForClipping":na=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":na=6;break;case 7:case"addToPathForClipping":na=7}var Nm=Ni.usedRenderingMode!==void 0?Ni.usedRenderingMode:-1;na!==-1?ye+=na+` Tr
`:Nm!==-1&&(ye+=`0 Tr
`),na!==-1&&(Ni.usedRenderingMode=na),xr=He.align||"left";var xs,nf=et*nt,af=j.internal.pageSize.getWidth(),Em=it[gt];Kr=He.charSpace||Jo,yr=He.maxWidth||0,In=Object.assign({autoencode:!0,noBOM:!0},He.flags);var Fu=[],$i=function(Bt){return j.getStringUnitWidth(Bt,{font:Em,charSpace:Kr,fontSize:et,doKerning:!1})*et/xt};if(Object.prototype.toString.call(U)==="[object Array]"){var rl;Jt=rn(U),xr!=="left"&&(xs=Jt.map($i));var oo,Tl=0;if(xr==="right"){ie-=xs[0],U=[],Qn=Jt.length;for(var xn=0;xn<Qn;xn++)xn===0?(oo=Gr(ie),rl=ua(De)):(oo=F(Tl-xs[xn]),rl=-nf),U.push([Jt[xn],oo,rl]),Tl=xs[xn]}else if(xr==="center"){ie-=xs[0]/2,U=[],Qn=Jt.length;for(var ac=0;ac<Qn;ac++)ac===0?(oo=Gr(ie),rl=ua(De)):(oo=F((Tl-xs[ac])/2),rl=-nf),U.push([Jt[ac],oo,rl]),Tl=xs[ac]}else if(xr==="left"){U=[],Qn=Jt.length;for(var oe=0;oe<Qn;oe++)U.push(Jt[oe])}else if(xr==="justify"&&Em.encoding==="Identity-H"){U=[],Qn=Jt.length,yr=yr!==0?yr:af;for(var f=0,m=0;m<Qn;m++)if(rl=m===0?ua(De):-nf,oo=m===0?Gr(ie):f,m<Qn-1){var x=F((yr-xs[m])/(Jt[m].split(" ").length-1)),v=Jt[m].split(" ");U.push([v[0]+" ",oo,rl]),f=0;for(var y=1;y<v.length;y++){var E=($i(v[y-1]+" "+v[y])-$i(v[y]))*xt+x;y==v.length-1?U.push([v[y],E,0]):U.push([v[y]+" ",E,0]),f-=E}}else U.push([Jt[m],oo,rl]);U.push(["",f,0])}else{if(xr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(U=[],Qn=Jt.length,yr=yr!==0?yr:af,m=0;m<Qn;m++){rl=m===0?ua(De):-nf,oo=m===0?Gr(ie):0;var k=Jt[m].split(" ").length-1,L=k>0?(yr-xs[m])/k:0;m<Qn-1?Fu.push(D(F(L))):Fu.push(0),U.push([Jt[m],oo,rl])}}}(typeof He.R2L=="boolean"?He.R2L:zt)===!0&&(U=fa(U,function(Bt,Kt,$t){return[Bt.split("").reverse().join(""),Kt,$t]})),Pt={text:U,x:ie,y:De,options:He,mutex:{pdfEscape:Hr,activeFontKey:gt,fonts:it,activeFontSize:et}},It.publish("postProcessText",Pt),U=Pt.text,te=Pt.mutex.isHex||!1;var H=it[gt].encoding;H!=="WinAnsiEncoding"&&H!=="StandardEncoding"||(U=fa(U,function(Bt,Kt,$t){return[or(Bt),Kt,$t]})),Jt=rn(U),U=[];for(var Q,le,fe,Re=Array.isArray(Jt[0])?1:0,$e="",We=function(Bt,Kt,$t){var Wr="";return $t instanceof fr?($t=typeof He.angle=="number"?dn($t,new fr(1,0,0,1,Bt,Kt)):dn(new fr(1,0,0,1,Bt,Kt),$t),R===T&&($t=dn(new fr(1,0,0,-1,0,0),$t)),Wr=$t.join(" ")+` Tm
`):Wr=D(Bt)+" "+D(Kt)+` Td
`,Wr},ot=0;ot<Jt.length;ot++){switch($e="",Re){case 1:fe=(te?"<":"(")+Jt[ot][0]+(te?">":")"),Q=parseFloat(Jt[ot][1]),le=parseFloat(Jt[ot][2]);break;case 0:fe=(te?"<":"(")+Jt[ot]+(te?">":")"),Q=Gr(ie),le=ua(De)}Fu!==void 0&&Fu[ot]!==void 0&&($e=Fu[ot]+` Tw
`),ot===0?U.push($e+We(Q,le,Xr)+fe):Re===0?U.push($e+fe):Re===1&&U.push($e+We(Q,le,Xr)+fe)}U=Re===0?U.join(` Tj
T* `):U.join(` Tj
`),U+=` Tj
`;var Nt=`BT
/`;return Nt+=gt+" "+et+` Tf
`,Nt+=D(et*nt)+` TL
`,Nt+=Hc+`
`,Nt+=ye,Nt+=U,ve(Nt+="ET"),p[gt]=!0,j};var Ie=g.__private__.clip=g.clip=function(U){return ve(U==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Ie("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ve("n"),this};var Ar=g.__private__.isValidStyle=function(U){var ie=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(U)!==-1&&(ie=!0),ie};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(U){return Ar(U)&&(u=U),this};var Ta=g.__private__.getStyle=g.getStyle=function(U){var ie=u;switch(U){case"D":case"S":ie="S";break;case"F":ie="f";break;case"FD":case"DF":ie="B";break;case"f":case"f*":case"B":case"B*":ie=U}return ie},Va=g.close=function(){return ve("h"),this};g.stroke=function(){return ve("S"),this},g.fill=function(U){return Us("f",U),this},g.fillEvenOdd=function(U){return Us("f*",U),this},g.fillStroke=function(U){return Us("B",U),this},g.fillStrokeEvenOdd=function(U){return Us("B*",U),this};var Us=function(U,ie){wa(ie)==="object"?Ot(ie,U):ve(U)},Xo=function(U){U===null||R===T&&U===void 0||(U=Ta(U),ve(U))};function ht(U,ie,De,He,tt){var Pt=new E1(ie||this.boundingBox,De||this.xStep,He||this.yStep,this.gState,tt||this.matrix);Pt.stream=this.stream;var Jt=U+"$$"+this.cloneIndex+++"$$";return on(Jt,Pt),Pt}var Ot=function(U,ie){var De=at[U.key],He=Ze[De];if(He instanceof Xm)ve("q"),ve(br(ie)),He.gState&&g.setGState(He.gState),ve(U.matrix.toString()+" cm"),ve("/"+De+" sh"),ve("Q");else if(He instanceof E1){var tt=new fr(1,0,0,-1,0,nc());U.matrix&&(tt=tt.multiply(U.matrix||Vn),De=ht.call(He,U.key,U.boundingBox,U.xStep,U.yStep,tt).id),ve("q"),ve("/Pattern cs"),ve("/"+De+" scn"),He.gState&&g.setGState(He.gState),ve(ie),ve("Q")}},br=function(U){switch(U){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fn=g.moveTo=function(U,ie){return ve(D(F(U))+" "+D(ee(ie))+" m"),this},mn=g.lineTo=function(U,ie){return ve(D(F(U))+" "+D(ee(ie))+" l"),this},Nn=g.curveTo=function(U,ie,De,He,tt,Pt){return ve([D(F(U)),D(ee(ie)),D(F(De)),D(ee(He)),D(F(tt)),D(ee(Pt)),"c"].join(" ")),this};g.__private__.line=g.line=function(U,ie,De,He,tt){if(isNaN(U)||isNaN(ie)||isNaN(De)||isNaN(He)||!Ar(tt))throw new Error("Invalid arguments passed to jsPDF.line");return R===S?this.lines([[De-U,He-ie]],U,ie,[1,1],tt||"S"):this.lines([[De-U,He-ie]],U,ie,[1,1]).stroke()},g.__private__.lines=g.lines=function(U,ie,De,He,tt,Pt){var Jt,Sr,xr,Kr,yr,In,qn,Xr,j,K,te,ye;if(typeof U=="number"&&(ye=De,De=ie,ie=U,U=ye),He=He||[1,1],Pt=Pt||!1,isNaN(ie)||isNaN(De)||!Array.isArray(U)||!Array.isArray(He)||!Ar(tt)||typeof Pt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fn(ie,De),Jt=He[0],Sr=He[1],Kr=U.length,K=ie,te=De,xr=0;xr<Kr;xr++)(yr=U[xr]).length===2?(K=yr[0]*Jt+K,te=yr[1]*Sr+te,mn(K,te)):(In=yr[0]*Jt+K,qn=yr[1]*Sr+te,Xr=yr[2]*Jt+K,j=yr[3]*Sr+te,K=yr[4]*Jt+K,te=yr[5]*Sr+te,Nn(In,qn,Xr,j,K,te));return Pt&&Va(),Xo(tt),this},g.path=function(U){for(var ie=0;ie<U.length;ie++){var De=U[ie],He=De.c;switch(De.op){case"m":Fn(He[0],He[1]);break;case"l":mn(He[0],He[1]);break;case"c":Nn.apply(this,He);break;case"h":Va()}}return this},g.__private__.rect=g.rect=function(U,ie,De,He,tt){if(isNaN(U)||isNaN(ie)||isNaN(De)||isNaN(He)||!Ar(tt))throw new Error("Invalid arguments passed to jsPDF.rect");return R===S&&(He=-He),ve([D(F(U)),D(ee(ie)),D(F(De)),D(F(He)),"re"].join(" ")),Xo(tt),this},g.__private__.triangle=g.triangle=function(U,ie,De,He,tt,Pt,Jt){if(isNaN(U)||isNaN(ie)||isNaN(De)||isNaN(He)||isNaN(tt)||isNaN(Pt)||!Ar(Jt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-U,He-ie],[tt-De,Pt-He],[U-tt,ie-Pt]],U,ie,[1,1],Jt,!0),this},g.__private__.roundedRect=g.roundedRect=function(U,ie,De,He,tt,Pt,Jt){if(isNaN(U)||isNaN(ie)||isNaN(De)||isNaN(He)||isNaN(tt)||isNaN(Pt)||!Ar(Jt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Sr=4/3*(Math.SQRT2-1);return tt=Math.min(tt,.5*De),Pt=Math.min(Pt,.5*He),this.lines([[De-2*tt,0],[tt*Sr,0,tt,Pt-Pt*Sr,tt,Pt],[0,He-2*Pt],[0,Pt*Sr,-tt*Sr,Pt,-tt,Pt],[2*tt-De,0],[-tt*Sr,0,-tt,-Pt*Sr,-tt,-Pt],[0,2*Pt-He],[0,-Pt*Sr,tt*Sr,-Pt,tt,-Pt]],U+tt,ie,[1,1],Jt,!0),this},g.__private__.ellipse=g.ellipse=function(U,ie,De,He,tt){if(isNaN(U)||isNaN(ie)||isNaN(De)||isNaN(He)||!Ar(tt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pt=4/3*(Math.SQRT2-1)*De,Jt=4/3*(Math.SQRT2-1)*He;return Fn(U+De,ie),Nn(U+De,ie-Jt,U+Pt,ie-He,U,ie-He),Nn(U-Pt,ie-He,U-De,ie-Jt,U-De,ie),Nn(U-De,ie+Jt,U-Pt,ie+He,U,ie+He),Nn(U+Pt,ie+He,U+De,ie+Jt,U+De,ie),Xo(tt),this},g.__private__.circle=g.circle=function(U,ie,De,He){if(isNaN(U)||isNaN(ie)||isNaN(De)||!Ar(He))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(U,ie,De,De,He)},g.setFont=function(U,ie,De){return De&&(ie=O(ie,De)),gt=an(U,ie,{disableWarning:!1}),this};var ei=g.__private__.getFont=g.getFont=function(){return it[an.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var U,ie,De={};for(U in ir)if(ir.hasOwnProperty(U))for(ie in De[U]=[],ir[U])ir[U].hasOwnProperty(ie)&&De[U].push(ie);return De},g.addFont=function(U,ie,De,He,tt){var Pt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pt.indexOf(arguments[3])!==-1?tt=arguments[3]:arguments[3]&&Pt.indexOf(arguments[3])==-1&&(De=O(De,He)),_t.call(this,U,ie,De,tt=tt||"Identity-H")};var gs,Ui=t.lineWidth||.200025,jr=g.__private__.getLineWidth=g.getLineWidth=function(){return Ui},Yo=g.__private__.setLineWidth=g.setLineWidth=function(U){return Ui=U,ve(D(F(U))+" w"),this};g.__private__.setLineDash=zr.API.setLineDash=zr.API.setLineDashPattern=function(U,ie){if(U=U||[],ie=ie||0,isNaN(ie)||!Array.isArray(U))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return U=U.map(function(De){return D(F(De))}).join(" "),ie=D(F(ie)),ve("["+U+"] "+ie+" d"),this};var zi=g.__private__.getLineHeight=g.getLineHeight=function(){return et*gs};g.__private__.getLineHeight=g.getLineHeight=function(){return et*gs};var qr=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(U){return typeof(U=U||1.15)=="number"&&(gs=U),this},Pu=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return gs};qr(t.lineHeight);var Gr=g.__private__.getHorizontalCoordinate=function(U){return F(U)},ua=g.__private__.getVerticalCoordinate=function(U){return R===T?U:tr[Y].mediaBox.topRightY-tr[Y].mediaBox.bottomLeftY-F(U)},rf=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(U){return D(Gr(U))},da=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(U){return D(ua(U))},Du=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ke(Du)},g.__private__.setStrokeColor=g.setDrawColor=function(U,ie,De,He){return Du=Pe({ch1:U,ch2:ie,ch3:De,ch4:He,pdfColorType:"draw",precision:2}),ve(Du),this};var Zo=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ke(Zo)},g.__private__.setFillColor=g.setFillColor=function(U,ie,De,He){return Zo=Pe({ch1:U,ch2:ie,ch3:De,ch4:He,pdfColorType:"fill",precision:2}),ve(Zo),this};var Hc=t.textColor||"0 g",Qo=g.__private__.getTextColor=g.getTextColor=function(){return ke(Hc)};g.__private__.setTextColor=g.setTextColor=function(U,ie,De,He){return Hc=Pe({ch1:U,ch2:ie,ch3:De,ch4:He,pdfColorType:"text",precision:3}),this};var Jo=t.charSpace,El=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Jo||0)};g.__private__.setCharSpace=g.setCharSpace=function(U){if(isNaN(U))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Jo=U,this};var so=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(U){var ie=g.CapJoinStyles[U];if(ie===void 0)throw new Error("Line cap style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return so=ie,ve(ie+" J"),this};var Al=0;g.__private__.setLineJoin=g.setLineJoin=function(U){var ie=g.CapJoinStyles[U];if(ie===void 0)throw new Error("Line join style of '"+U+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Al=ie,ve(ie+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(U){if(U=U||0,isNaN(U))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ve(D(F(U))+" M"),this},g.GState=U3,g.setGState=function(U){(U=typeof U=="string"?Qe[ze[U]]:el(null,U)).equals(st)||(ve("/"+U.id+" gs"),st=U)};var el=function(U,ie){if(!U||!ze[U]){var De=!1;for(var He in Qe)if(Qe.hasOwnProperty(He)&&Qe[He].equals(ie)){De=!0;break}if(De)ie=Qe[He];else{var tt="GS"+(Object.keys(Qe).length+1).toString(10);Qe[tt]=ie,ie.id=tt}return U&&(ze[U]=ie.id),It.publish("addGState",ie),ie}};g.addGState=function(U,ie){return el(U,ie),this},g.saveGraphicsState=function(){return ve("q"),be.push({key:gt,size:et,color:Hc}),this},g.restoreGraphicsState=function(){ve("Q");var U=be.pop();return gt=U.key,et=U.size,Hc=U.color,st=null,this},g.setCurrentTransformationMatrix=function(U){return ve(U.toString()+" cm"),this},g.comment=function(U){return ve("#"+U),this};var Ca=function(U,ie){var De=U||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(Pt){isNaN(Pt)||(De=parseFloat(Pt))}});var He=ie||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return He},set:function(Pt){isNaN(Pt)||(He=parseFloat(Pt))}});var tt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return tt},set:function(Pt){tt=Pt.toString()}}),this},Mu=function(U,ie,De,He){Ca.call(this,U,ie),this.type="rect";var tt=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return tt},set:function(Jt){isNaN(Jt)||(tt=parseFloat(Jt))}});var Pt=He||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pt},set:function(Jt){isNaN(Jt)||(Pt=parseFloat(Jt))}}),this},tc=function(){this.page=St,this.currentPage=Y,this.pages=qe.slice(0),this.pagesContext=tr.slice(0),this.x=Vt,this.y=Nr,this.matrix=sr,this.width=Lu(Y),this.height=En(Y),this.outputDestination=Me,this.id="",this.objectNumber=-1};tc.prototype.restore=function(){St=this.page,Y=this.currentPage,tr=this.pagesContext,qe=this.pages,Vt=this.x,Nr=this.y,sr=this.matrix,Oh(Y,this.width),Vi(Y,this.height),Me=this.outputDestination};var rc=function(U,ie,De,He,tt){jn.push(new tc),St=Y=0,qe=[],Vt=U,Nr=ie,sr=tt,Fr([De,He])};for(var qc in g.beginFormObject=function(U,ie,De,He,tt){return rc(U,ie,De,He,tt),this},g.endFormObject=function(U){return function(ie){if($r[ie])jn.pop().restore();else{var De=new tc,He="Xo"+(Object.keys(en).length+1).toString(10);De.id=He,$r[ie]=He,en[He]=De,It.publish("addFormObject",De),jn.pop().restore()}}(U),this},g.doFormObject=function(U,ie){var De=en[$r[U]];return ve("q"),ve(ie.toString()+" cm"),ve("/"+De.id+" Do"),ve("Q"),this},g.getFormObject=function(U){var ie=en[$r[U]];return{x:ie.x,y:ie.y,width:ie.width,height:ie.height,matrix:ie.matrix}},g.save=function(U,ie){return U=U||"generated.pdf",(ie=ie||{}).returnPromise=ie.returnPromise||!1,ie.returnPromise===!1?(Bm(Br(Fi()),U),typeof Bm.unload=="function"&&un.setTimeout&&setTimeout(Bm.unload,911),this):new Promise(function(De,He){try{var tt=Bm(Br(Fi()),U);typeof Bm.unload=="function"&&un.setTimeout&&setTimeout(Bm.unload,911),De(tt)}catch(Pt){He(Pt.message)}})},zr.API)zr.API.hasOwnProperty(qc)&&(qc==="events"&&zr.API.events.length?function(U,ie){var De,He,tt;for(tt=ie.length-1;tt!==-1;tt--)De=ie[tt][0],He=ie[tt][1],U.subscribe.apply(U,[De].concat(typeof He=="function"?[He]:He))}(It,zr.API.events):g[qc]=zr.API[qc]);function Lu(U){return tr[U].mediaBox.topRightX-tr[U].mediaBox.bottomLeftX}function Oh(U,ie){tr[U].mediaBox.topRightX=ie+tr[U].mediaBox.bottomLeftX}function En(U){return tr[U].mediaBox.topRightY-tr[U].mediaBox.bottomLeftY}function Vi(U,ie){tr[U].mediaBox.topRightY=ie+tr[U].mediaBox.bottomLeftY}var Gc=g.getPageWidth=function(U){return Lu(U=U||Y)/Ft},ko=g.setPageWidth=function(U,ie){Oh(U,ie*Ft)},nc=g.getPageHeight=function(U){return En(U=U||Y)/Ft},Et=g.setPageHeight=function(U,ie){Vi(U,ie*Ft)};return g.internal={pdfEscape:Hr,getStyle:Ta,getFont:ei,getFontSize:Ve,getCharSpace:El,getTextColor:Qo,getLineHeight:zi,getLineHeightFactor:Pu,getLineWidth:jr,write:Ht,getHorizontalCoordinate:Gr,getVerticalCoordinate:ua,getCoordinateString:rf,getVerticalCoordinateString:da,collections:{},newObject:Zr,newAdditionalObject:ge,newObjectDeferred:tn,newObjectDeferredBegin:de,getFilters:lt,putStream:jt,events:It,scaleFactor:Ft,pageSize:{getWidth:function(){return Gc(Y)},setWidth:function(U){ko(Y,U)},getHeight:function(){return nc(Y)},setHeight:function(U){Et(Y,U)}},encryptionOptions:d,encryption:Pn,getEncryptor:function(U){return d!==null?Pn.encryptor(U,0):function(ie){return ie}},output:ja,getNumberOfPages:nn,pages:qe,out:ve,f2:P,f3:B,getPageInfo:Dn,getPageInfoByObjId:za,getCurrentPageInfo:ct,getPDFVersion:w,Point:Ca,Rectangle:Mu,Matrix:fr,hasHotfix:Bi},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Gc(Y)},set:function(U){ko(Y,U)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return nc(Y)},set:function(U){Et(Y,U)},enumerable:!0,configurable:!0}),(function(U){for(var ie=0,De=Ut.length;ie<De;ie++){var He=_t.call(this,U[ie][0],U[ie][1],U[ie][2],Ut[ie][3],!0);h===!1&&(p[He]=!0);var tt=U[ie][0].split("-");vr({id:He,fontName:tt[0],fontStyle:tt[1]||""})}It.publish("addFonts",{fonts:it,dictionary:ir})}).call(g,Ut),gt="F1",Ua(a,r),It.publish("initialized"),g}t1.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},t1.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},t1.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},t1.prototype.processOwnerPassword=function(t,e){return J8(Q8(e).substr(0,5),t)},t1.prototype.encryptor=function(t,e){var r=Q8(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return J8(r,n)}},U3.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||wa(t)!==wa(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},zr.API={events:[]},zr.version="3.0.3";var ks=zr.API,gD=1,bg=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fg=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},gn=function(t){return t.toFixed(2)},Wh=function(t){return t.toFixed(5)};ks.__acroform__={};var Ql=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},sq=function(t){return t*gD},wd=function(t){var e=new joe,r=Or.internal.getHeight(t)||0,n=Or.internal.getWidth(t)||0;return e.BBox=[0,0,Number(gn(n)),Number(gn(r))],e},k$e=ks.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},I$e=ks.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},O$e=ks.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Gs=ks.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return O$e(t,e-1)},Ws=ks.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return k$e(t,e-1)},Ks=ks.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return I$e(t,e-1)},R$e=ks.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],s=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(s)||0,[Number(gn(c.lowerLeft_X)),Number(gn(c.lowerLeft_Y)),Number(gn(c.upperRight_X)),Number(gn(c.upperRight_Y))]},P$e=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=eI(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+gn(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=wd(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},eI=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,o=Or.internal.getHeight(t)||0;o=o<0?-o:o;var l=Or.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(P,B,F){if(P+1<a.length){var ee=B+" "+a[P+1][0];return k_(ee,t,F).width<=l-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,h=k_("3",t,s).height,p=t.multiline?o-s:(o-h)/2,g=p+=2,b=0,w=0,_=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+k_(e,t,s=12).width+", FieldWidth:"+l+`
`;break}for(var N="",S=0,T=0;T<a.length;T++)if(a.hasOwnProperty(T)){var R=!1;if(a[T].length!==1&&_!==a[T].length-1){if((h+2)*(S+2)+2>o)continue e;N+=a[T][_],R=!0,w=T,T--}else{N=(N+=a[T][_]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var z=parseInt(T),G=c(z,N,s),O=T>=a.length-1;if(G&&!O){N+=" ",_=0;continue}if(G||O){if(O)w=z;else if(t.multiline&&(h+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(S+2)+2>o)continue e;w=z}}for(var D="",I=b;I<=w;I++){var V=a[I];if(t.multiline){if(I===w){D+=V[_]+" ",_=(_+1)%V.length;continue}if(I===b){D+=V[V.length-1]+" ";continue}}D+=V[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,d=k_(D,t,s).width,t.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;default:u=2}e+=gn(u)+" "+gn(g)+` Td
`,e+="("+bg(D)+`) Tj
`,e+=-gn(u)+` 0 Td
`,g=-(s+2),d=0,b=R?w:w+1,S++,N=""}break}return n.text=e,n.fontSize=s,n},k_=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},D$e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},M$e=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},L$e=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(hd.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(D$e)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");gD=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Toe,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&M$e(s,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=R$e(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Or.createDefaultAppearanceStream(l),wa(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=P$e(l);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var h="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var g=l.appearanceStreamContent[p];if(h+="/"+p+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var b=g[o];typeof b=="function"&&(b=b.call(a,l)),h+="/"+o+" "+b+" ",a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(a,l)),h+="/"+o+" "+b,a.internal.acroformPlugin.xForms.indexOf(b)>=0||a.internal.acroformPlugin.xForms.push(b);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}s&&function(w,_){for(var N in w)if(w.hasOwnProperty(N)){var S=N,T=w[N];_.internal.newObjectDeferredBegin(T.objId,!0),wa(T)==="object"&&typeof T.putStream=="function"&&T.putStream(),delete w[S]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Soe=ks.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",s=0;s<t.length;s++)switch(s!==0&&(a+=" "),wa(t[s])){case"boolean":case"number":case"object":a+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+bg(n(t[s].toString()))+")"):a+=t[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},MT=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+bg(n(t))+")"},Rd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Rd.prototype.toString=function(){return this.objId+" 0 R"},Rd.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Rd.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:Soe(a,this.objId,this.scope)}):a instanceof Rd?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var joe=function(){Rd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Ql(joe,Rd);var Toe=function(){Rd.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+bg(r(t))+")"}},set:function(r){t=r}})};Ql(Toe,Rd);var hd=function t(){Rd.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');e=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gs(e,3)},set:function(N){N?this.F=Ws(e,3):this.F=Ks(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(N){n=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(N){n[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(N){n[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(N){n[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(N){n[3]=N}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof z3)return;s="FieldObject"+t.FieldNum++}var N=function(S){return S};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+bg(N(s))+")"},set:function(N){s=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(N){s=N}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(N){o=N}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/gD:u},set:function(N){u=N}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(N){d=N}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof z3||this instanceof Np))return MT(h,this.objId,this.scope)},set:function(N){N=N.toString(),h=N}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Yi==0?MT(p,this.objId,this.scope):p},set:function(N){N=N.toString(),p=this instanceof Yi==0?N.substr(0,1)==="("?Fg(N.substr(1,N.length-2)):Fg(N):N}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi==1?Fg(p.substr(1,p.length-1)):p},set:function(N){N=N.toString(),p=this instanceof Yi==1?"/"+N:N}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Yi==0?MT(g,this.objId,this.scope):g},set:function(N){N=N.toString(),g=this instanceof Yi==0?N.substr(0,1)==="("?Fg(N.substr(1,N.length-2)):Fg(N):N}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Yi==1?Fg(g.substr(1,g.length-1)):g},set:function(N){N=N.toString(),g=this instanceof Yi==1?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(N){N=!!N,w=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(N){b=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,1)},set:function(N){N?this.Ff=Ws(this.Ff,1):this.Ff=Ks(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,2)},set:function(N){N?this.Ff=Ws(this.Ff,2):this.Ff=Ks(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,3)},set:function(N){N?this.Ff=Ws(this.Ff,3):this.Ff=Ks(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');_=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(_){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};Ql(hd,Rd);var G1=function(){hd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Soe(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,o,l){l||(l=1);for(var c,u=[];c=o.exec(s);)u.push(c[l]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,18)},set:function(r){r?this.Ff=Ws(this.Ff,18):this.Ff=Ks(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ws(this.Ff,19):this.Ff=Ks(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,20)},set:function(r){r?(this.Ff=Ws(this.Ff,20),e.sort()):this.Ff=Ks(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,22)},set:function(r){r?this.Ff=Ws(this.Ff,22):this.Ff=Ks(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(r){r?this.Ff=Ws(this.Ff,23):this.Ff=Ks(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,27)},set:function(r){r?this.Ff=Ws(this.Ff,27):this.Ff=Ks(this.Ff,27)}}),this.hasAppearanceStream=!1};Ql(G1,hd);var W1=function(){G1.call(this),this.fontName="helvetica",this.combo=!1};Ql(W1,G1);var K1=function(){W1.call(this),this.combo=!0};Ql(K1,W1);var KN=function(){K1.call(this),this.edit=!0};Ql(KN,K1);var Yi=function(){hd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,15)},set:function(r){r?this.Ff=Ws(this.Ff,15):this.Ff=Ks(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,16)},set:function(r){r?this.Ff=Ws(this.Ff,16):this.Ff=Ks(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,17)},set:function(r){r?this.Ff=Ws(this.Ff,17):this.Ff=Ks(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(r){r?this.Ff=Ws(this.Ff,26):this.Ff=Ks(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+bg(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){wa(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Ql(Yi,hd);var XN=function(){Yi.call(this),this.pushButton=!0};Ql(XN,Yi);var X1=function(){Yi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ql(X1,Yi);var z3=function(){var t,e;hd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),n)o.push("/"+s+" ("+bg(a(n[s]))+")");return o.push(">>"),o.join(`
`)},set:function(a){wa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Or.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ql(z3,hd),X1.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},X1.prototype.createOption=function(t){var e=new z3;return e.Parent=this,e.optionName=t,this.Kids.push(e),F$e.call(this.scope,e),e};var YN=function(){Yi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Or.CheckBox.createAppearanceStream()};Ql(YN,Yi);var Np=function(){hd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,13)},set:function(e){e?this.Ff=Ws(this.Ff,13):this.Ff=Ks(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,21)},set:function(e){e?this.Ff=Ws(this.Ff,21):this.Ff=Ks(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(e){e?this.Ff=Ws(this.Ff,23):this.Ff=Ks(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,24)},set:function(e){e?this.Ff=Ws(this.Ff,24):this.Ff=Ks(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,25)},set:function(e){e?this.Ff=Ws(this.Ff,25):this.Ff=Ks(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(e){e?this.Ff=Ws(this.Ff,26):this.Ff=Ks(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ql(Np,hd);var ZN=function(){Np.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,14)},set:function(t){t?this.Ff=Ws(this.Ff,14):this.Ff=Ks(this.Ff,14)}}),this.password=!0};Ql(ZN,Np);var Or={CheckBox:{createAppearanceStream:function(){return{N:{On:Or.CheckBox.YesNormal},D:{On:Or.CheckBox.YesPushDown,Off:Or.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=wd(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),s=eI(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+gn(Or.internal.getWidth(t))+" "+gn(Or.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+gn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=wd(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],s=Or.internal.getHeight(t),o=Or.internal.getWidth(t),l=eI(t,t.caption);return a.push("1 g"),a.push("0 0 "+gn(o)+" "+gn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+gn(o-1)+" "+gn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+gn(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=wd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+gn(Or.internal.getWidth(t))+" "+gn(Or.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Or.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Or.RadioButton.Circle.YesNormal,e.D[t]=Or.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=wd(t);e.scope=t.scope;var r=[],n=Or.internal.getWidth(t)<=Or.internal.getHeight(t)?Or.internal.getWidth(t)/4:Or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Or.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Wh(Or.internal.getWidth(t)/2)+" "+Wh(Or.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=wd(t);e.scope=t.scope;var r=[],n=Or.internal.getWidth(t)<=Or.internal.getHeight(t)?Or.internal.getWidth(t)/4:Or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Or.internal.Bezier_C).toFixed(5)),o=Number((n*Or.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wh(Or.internal.getWidth(t)/2)+" "+Wh(Or.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Wh(Or.internal.getWidth(t)/2)+" "+Wh(Or.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=wd(t);e.scope=t.scope;var r=[],n=Or.internal.getWidth(t)<=Or.internal.getHeight(t)?Or.internal.getWidth(t)/4:Or.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Or.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Wh(Or.internal.getWidth(t)/2)+" "+Wh(Or.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Or.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Or.RadioButton.Cross.YesNormal,e.D[t]=Or.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=wd(t);e.scope=t.scope;var r=[],n=Or.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+gn(Or.internal.getWidth(t)-2)+" "+gn(Or.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(gn(n.x1.x)+" "+gn(n.x1.y)+" m"),r.push(gn(n.x2.x)+" "+gn(n.x2.y)+" l"),r.push(gn(n.x4.x)+" "+gn(n.x4.y)+" m"),r.push(gn(n.x3.x)+" "+gn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=wd(t);e.scope=t.scope;var r=Or.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+gn(Or.internal.getWidth(t))+" "+gn(Or.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+gn(Or.internal.getWidth(t)-2)+" "+gn(Or.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(gn(r.x1.x)+" "+gn(r.x1.y)+" m"),n.push(gn(r.x2.x)+" "+gn(r.x2.y)+" l"),n.push(gn(r.x4.x)+" "+gn(r.x4.y)+" m"),n.push(gn(r.x3.x)+" "+gn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=wd(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+gn(Or.internal.getWidth(t))+" "+gn(Or.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Or.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Or.internal.getWidth(t),r=Or.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Or.internal.getWidth=function(t){var e=0;return wa(t)==="object"&&(e=sq(t.Rect[2])),e},Or.internal.getHeight=function(t){var e=0;return wa(t)==="object"&&(e=sq(t.Rect[3])),e};var F$e=ks.addField=function(t){if(L$e(this,t),!(t instanceof hd))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ks.AcroFormChoiceField=G1,ks.AcroFormListBox=W1,ks.AcroFormComboBox=K1,ks.AcroFormEditBox=KN,ks.AcroFormButton=Yi,ks.AcroFormPushButton=XN,ks.AcroFormRadioButton=X1,ks.AcroFormCheckBox=YN,ks.AcroFormTextField=Np,ks.AcroFormPasswordField=ZN,ks.AcroFormAppearance=Or,ks.AcroForm={ChoiceField:G1,ListBox:W1,ComboBox:K1,EditBox:KN,Button:Yi,PushButton:XN,RadioButton:X1,CheckBox:YN,TextField:Np,PasswordField:ZN,Appearance:Or},zr.AcroForm={ChoiceField:G1,ListBox:W1,ComboBox:K1,EditBox:KN,Button:Yi,PushButton:XN,RadioButton:X1,CheckBox:YN,TextField:Np,PasswordField:ZN,Appearance:Or};zr.AcroForm;function Coe(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(P,B){var F,ee,Z,ce,ne,ae=r;if((B=B||r)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(G(P))for(ne in n)for(Z=n[ne],F=0;F<Z.length;F+=1){for(ce=!0,ee=0;ee<Z[F].length;ee+=1)if(Z[F][ee]!==void 0&&Z[F][ee]!==P[ee]){ce=!1;break}if(ce===!0){ae=ne;break}}else for(ne in n)for(Z=n[ne],F=0;F<Z.length;F+=1){for(ce=!0,ee=0;ee<Z[F].length;ee+=1)if(Z[F][ee]!==void 0&&Z[F][ee]!==P.charCodeAt(ee)){ce=!1;break}if(ce===!0){ae=ne;break}}return ae===r&&B!==r&&(ae=B),ae},s=function P(B){for(var F=this.internal.write,ee=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var ce=[];if(ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Image"}),ce.push({key:"Width",value:B.width}),ce.push({key:"Height",value:B.height}),B.colorSpace===N.INDEXED?ce.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(ce.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===N.DEVICE_CMYK&&ce.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ce.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&ce.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var ne="",ae=0,me=B.transparency.length;ae<me;ae++)ne+=B.transparency[ae]+" "+B.transparency[ae]+" ";ce.push({key:"Mask",value:"["+ne+"]"})}B.sMask!==void 0&&ce.push({key:"SMask",value:B.objectId+1+" 0 R"});var Te=B.filter!==void 0?["/"+B.filter]:void 0;if(ee({data:B.data,additionalKeyValues:ce,alreadyAppliedFilters:Te,objectId:B.objectId}),F("endobj"),"sMask"in B&&B.sMask!==void 0){var we,q=(we=B.sMaskBitsPerComponent)!==null&&we!==void 0?we:B.bitsPerComponent,Y={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:q,data:B.sMask};"filter"in B&&(Y.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(q," /Columns ").concat(B.width),Y.filter=B.filter),P.call(this,Y)}if(B.colorSpace===N.INDEXED){var X=this.internal.newObject();ee({data:D(new Uint8Array(B.palette)),objectId:X}),F("endobj")}},o=function(){var P=this.internal.collections[e+"images"];for(var B in P)s.call(this,P[B])},l=function(){var P,B=this.internal.collections[e+"images"],F=this.internal.write;for(var ee in B)F("/I"+(P=B[ee]).index,P.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var P=this.internal.collections[e+"images"];return c.call(this),P},d=function(){return Object.keys(this.internal.collections[e+"images"]).length},h=function(P){return typeof t["process"+P.toUpperCase()]=="function"},p=function(P){return wa(P)==="object"&&P.nodeType===1},g=function(P,B){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var F=""+P.getAttribute("src");if(F.indexOf("data:image/")===0)return WN(unescape(F).split("base64,").pop());var ee=t.loadFile(F,!0);if(ee!==void 0)return ee}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var Z;switch(B){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;default:Z="image/jpeg"}return WN(P.toDataURL(Z,1).split("base64,").pop())}},b=function(P){var B=this.internal.collections[e+"images"];if(B){for(var F in B)if(P===B[F].alias)return B[F]}},w=function(P,B,F){return P||B||(P=-96,B=-96),P<0&&(P=-1*F.width*72/P/this.internal.scaleFactor),B<0&&(B=-1*F.height*72/B/this.internal.scaleFactor),P===0&&(P=B*F.width/F.height),B===0&&(B=P*F.height/F.width),[P,B]},_=function(P,B,F,ee,Z,ce){var ne=w.call(this,F,ee,Z),ae=this.internal.getCoordinateString,me=this.internal.getVerticalCoordinateString,Te=u.call(this);if(F=ne[0],ee=ne[1],Te[Z.index]=Z,ce){ce*=Math.PI/180;var we=Math.cos(ce),q=Math.sin(ce),Y=function(re){return re.toFixed(4)},X=[Y(we),Y(q),Y(-1*q),Y(we),0,0,"cm"]}this.internal.write("q"),ce?(this.internal.write([1,"0","0",1,ae(P),me(B+ee),"cm"].join(" ")),this.internal.write(X.join(" ")),this.internal.write([ae(F),"0","0",ae(ee),"0","0","cm"].join(" "))):this.internal.write([ae(F),"0","0",ae(ee),ae(P),me(B+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},N=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},T=t.__addimage__.sHashCode=function(P){var B,F,ee=0;if(typeof P=="string")for(F=P.length,B=0;B<F;B++)ee=(ee<<5)-ee+P.charCodeAt(B),ee|=0;else if(G(P))for(F=P.byteLength/2,B=0;B<F;B++)ee=(ee<<5)-ee+P[B],ee|=0;return ee},R=t.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var B=!0;return P.length===0&&(B=!1),P.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(B=!1),B},z=t.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var B=P.indexOf(",");return B<0?null:P.substring(0,B).trim().endsWith("base64")?P.substring(B+1):null};t.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var G=t.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},O=t.__addimage__.binaryStringToUint8Array=function(P){for(var B=P.length,F=new Uint8Array(B),ee=0;ee<B;ee++)F[ee]=P.charCodeAt(ee);return F},D=t.__addimage__.arrayBufferToBinaryString=function(P){for(var B="",F=G(P)?P:new Uint8Array(P),ee=0;ee<F.length;ee+=8192)B+=String.fromCharCode.apply(null,F.subarray(ee,ee+8192));return B};t.addImage=function(){var P,B,F,ee,Z,ce,ne,ae,me;if(typeof arguments[1]=="number"?(B=r,F=arguments[1],ee=arguments[2],Z=arguments[3],ce=arguments[4],ne=arguments[5],ae=arguments[6],me=arguments[7]):(B=arguments[1],F=arguments[2],ee=arguments[3],Z=arguments[4],ce=arguments[5],ne=arguments[6],ae=arguments[7],me=arguments[8]),wa(P=arguments[0])==="object"&&!p(P)&&"imageData"in P){var Te=P;P=Te.imageData,B=Te.format||B||r,F=Te.x||F||0,ee=Te.y||ee||0,Z=Te.w||Te.width||Z,ce=Te.h||Te.height||ce,ne=Te.alias||ne,ae=Te.compression||ae,me=Te.rotation||Te.angle||me}var we=this.internal.getFilters();if(ae===void 0&&we.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(F)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var q=I.call(this,P,B,ne,ae);return _.call(this,F,ee,Z,ce,q,me),this};var I=function(P,B,F,ee){var Z,ce,ne;if(typeof P=="string"&&a(P)===r){P=unescape(P);var ae=V(P,!1);(ae!==""||(ae=t.loadFile(P,!0))!==void 0)&&(P=ae)}if(p(P)&&(P=g(P,B)),B=a(P,B),!h(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((ne=F)==null||ne.length===0)&&(F=function(me){return typeof me=="string"||G(me)?T(me):G(me.data)?T(me.data):null}(P)),(Z=b.call(this,F))||(P instanceof Uint8Array||B==="RGBA"||(ce=P,P=O(P)),Z=this["process"+B.toUpperCase()](P,d.call(this),F,function(me){return me&&typeof me=="string"&&(me=me.toUpperCase()),me in t.image_compression?me:S.NONE}(ee),ce)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},V=t.__addimage__.convertBase64ToBinaryString=function(P,B){B=typeof B!="boolean"||B;var F,ee="";if(typeof P=="string"){var Z;F=(Z=z(P))!==null&&Z!==void 0?Z:P;try{ee=WN(F)}catch(ce){if(B)throw R(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ce.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(P){var B,F,ee="";if(p(P)&&(P=g(P)),typeof P=="string"&&a(P)===r&&((ee=V(P,!1))===""&&(ee=t.loadFile(P)||""),P=ee),F=a(P),!h(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(P instanceof Uint8Array||(P=O(P)),!(B=this["process"+F.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=F,B}})(zr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};zr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,s,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var p=0;p<u.length;p++){n=u[p];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(w.objId),S=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+g(N(n.contents))+")",s+=" /Popup "+_.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(N(S))+") >>",w.content=s;var T=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+T,n.open&&(s+=" /Open true"),s+=" >>",_.content=s,this.internal.write(w.objId,"0 R",_.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var R=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(b(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var z=this.annotations._nameMap[n.options.name];n.options.pageNumber=z.page,n.options.top=z.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var G=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+G+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,s,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:o,type:"link"})},t.textWithLink=function(r,n,a,s){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){l=s.maxWidth;var d=this.splitTextToSize(r,l).length;o=Math.ceil(u*d)}else l=c,o=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,l,o,s),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(zr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=t.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&a.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(w){var _=0,N=r,S="",T=0;for(_=0;_<w.length;_+=1)N[w.charCodeAt(_)]!==void 0?(T++,typeof(N=N[w.charCodeAt(_)])=="number"&&(S+=String.fromCharCode(N),N=r,T=0),_===w.length-1&&(N=r,S+=w.charAt(_-(T-1)),_-=T-1,T=0)):(N=r,S+=w.charAt(_-T),_-=T,T=0);return S};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var p=t.__arabicParser__.getCorrectForm=function(w,_,N){return o(w)?s(w)===!1?-1:!u(w)||!o(_)&&!o(N)||!o(N)&&l(_)||l(w)&&!o(_)||l(w)&&c(_)||l(w)&&l(_)?0:d(w)&&o(_)&&!l(_)&&o(N)&&u(N)?3:l(w)||!o(N)?1:2:-1},g=function(w){var _=0,N=0,S=0,T="",R="",z="",G=(w=w||"").split("\\s+"),O=[];for(_=0;_<G.length;_+=1){for(O.push(""),N=0;N<G[_].length;N+=1)T=G[_][N],R=G[_][N-1],z=G[_][N+1],o(T)?(S=p(T,R,z),O[_]+=S!==-1?String.fromCharCode(e[T.charCodeAt(0)][S]):T):O[_]+=T;O[_]=h(O[_])}return O.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var w,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(_)){var S=0;for(N=[],S=0;S<_.length;S+=1)Array.isArray(_[S])?N.push([g(_[S][0]),_[S][1],_[S][2]]):N.push([g(_[S])]);w=N}else w=g(_);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",b])}(zr.API),zr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(l){s=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(zr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(w){b=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),p=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,w=0,_=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var N=u.maxWidth;N>0?typeof c=="string"?c=this.splitTextToSize(c,N):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(T,R){return T.concat(_.splitTextToSize(R,N))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)g<(w=this.getStringUnitWidth(c[S],{font:h})*d)&&(g=w);return g!==0&&(b=c.length),{w:g/=p,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/p,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,p=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,g&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,d,h,p){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,b,w,_,N=[],S=[],T=[],R={},z={},G=[],O=[],D=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,V=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,P=p.margins||Object.assign({width:this.getPageWidth()},e),B=typeof p.padding=="number"?p.padding:3,F=p.headerBackgroundColor||"#c8c8c8",ee=p.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=ee,this.setFontSize(V),h==null)S=N=Object.keys(d[0]),T=N.map(function(){return"left"});else if(Array.isArray(h)&&wa(h[0])==="object")for(N=h.map(function(Te){return Te.name}),S=h.map(function(Te){return Te.prompt||Te.name||""}),T=h.map(function(Te){return Te.align||"left"}),g=0;g<h.length;g+=1)z[h[g].name]=.7499990551181103*h[g].width;else Array.isArray(h)&&typeof h[0]=="string"&&(S=N=h,T=N.map(function(){return"left"}));if(D||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<N.length;g+=1){for(R[_=N[g]]=d.map(function(Te){return Te[_]}),this.setFont(void 0,"bold"),G.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=R[_],this.setFont(void 0,"normal"),w=0;w<b.length;w+=1)G.push(this.getTextDimensions(b[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[_]=Math.max.apply(null,G)+B+B,G=[]}if(I){var Z={};for(g=0;g<N.length;g+=1)Z[N[g]]={},Z[N[g]].text=S[g],Z[N[g]].align=T[g];var ce=l.call(this,Z,z);O=N.map(function(Te){return new s(c,u,z[Te],ce,Z[Te].text,void 0,Z[Te].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var ne=h.reduce(function(Te,we){return Te[we.name]=we.align,Te},{});for(g=0;g<d.length;g+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:g,data:d[g]},this);var ae=l.call(this,d[g],z);for(w=0;w<N.length;w+=1){var me=d[g][N[w]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:g,col:w,data:me},this),o.call(this,new s(c,u,z[N[w]],ae,me,g+2,ne[N[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(g){var b=c[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/p+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,p.push(d)),d.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(zr.API);var koe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Ioe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tI=Coe(Ioe),Ooe=[100,200,300,400,500,600,700,800,900],B$e=Coe(Ooe);function LT(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return koe[s=s||"normal"]?s:"normal"}(t.style),n=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),a=function(s){return typeof tI[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function iq(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var U$e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},oq={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lq(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function cq(t){return t.trimLeft()}function z$e(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function V$e(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var I_,uq,dq,Bg,O_,fq,hq,mq,FT=["times"];function pq(t,e,r,n,a){var s=4,o=xq;switch(a){case zr.API.image_compression.FAST:s=1,o=gq;break;case zr.API.image_compression.MEDIUM:s=6,o=vq;break;case zr.API.image_compression.SLOW:s=9,o=bq}t=function(c,u,d,h){for(var p,g=c.length/u,b=new Uint8Array(c.length+g),w=[$$e,gq,xq,vq,bq],_=0;_<g;_+=1){var N=_*u,S=c.subarray(N,N+u);if(h)b.set(h(S,d,p),N+_);else{for(var T=w.length,R=[],z=0;z<T;z+=1)R[z]=w[z](S,d,p);var G=q$e(R.concat());b.set(R[G],N+_)}p=S}return b}(t,e,Math.ceil(r*n/8),o);var l=K8(t,{level:s});return zr.API.__addimage__.arrayBufferToBinaryString(l)}function $$e(t){var e=Array.apply([],t);return e.unshift(0),e}function gq(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=t[a-e]||0;n[a+1]=t[a]-s+256&255}return n}function xq(t,e,r){var n=t.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var o=r&&r[s]||0;a[s+1]=t[s]-o+256&255}return a}function vq(t,e,r){var n=t.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var o=t[s-e]||0,l=r&&r[s]||0;a[s+1]=t[s]+256-(o+l>>>1)&255}return a}function bq(t,e,r){var n=t.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var o=H$e(t[s-e]||0,r&&r[s]||0,r&&r[s-e]||0);a[s+1]=t[s]-o+256&255}return a}function H$e(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),s=Math.abs(t+e-r-r);return n<=a&&n<=s?t:a<=s?e:r}function q$e(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function BT(t,e,r){var n=e*r,a=Math.floor(n/8),s=16-(n-8*a+r),o=(1<<r)-1;return Roe(t,a)>>s&o}function yq(t,e,r,n){var a=r*n,s=Math.floor(a/8),o=16-(a-8*s+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,d,h){if(d+1<u.byteLength)u.setUint16(d,h,!1);else{var p=h>>8&255;u.setUint8(d,p)}})(t,s,Roe(t,s)&~(l<<o)&65535|c)}function Roe(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function G$e(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],s=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;s&&(l=e,c=o,e+=3*o);var u=!0,d=[],h=0,p=null,g=0,b=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],1&w||(p=null),g=w>>2&7,e++;break;case 254:for(;;){if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,R=t[e++],z=R>>6&1,G=1<<1+(7&R),O=l,D=c,I=!1;R>>7&&(I=!0,O=e,D=G,e+=3*G);var V=e;for(e++;;){var P;if(!((P=t[e++])>=0))throw Error("Invalid block size");if(P===0)break;e+=P}d.push({x:_,y:N,width:S,height:T,has_local_palette:I,palette_offset:O,palette_size:D,data_offset:V,data_length:e-V,transparent_index:p,interlaced:!!z,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(B){if(B<0||B>=d.length)throw new Error("Frame index out of range.");return d[B]},this.decodeAndBlitFrameBGRA=function(B,F){var ee=this.frameInfo(B),Z=ee.width*ee.height,ce=new Uint8Array(Z);wq(t,ee.data_offset,ce,Z);var ne=ee.palette_offset,ae=ee.transparent_index;ae===null&&(ae=256);var me=ee.width,Te=r-me,we=me,q=4*(ee.y*r+ee.x),Y=4*((ee.y+ee.height)*r+ee.x),X=q,re=4*Te;ee.interlaced===!0&&(re+=4*r*7);for(var se=8,Ce=0,je=ce.length;Ce<je;++Ce){var pe=ce[Ce];if(we===0&&(we=me,(X+=re)>=Y&&(re=4*Te+4*r*(se-1),X=q+(me+Te)*(se<<1),se>>=1)),pe===ae)X+=4;else{var Oe=t[ne+3*pe],qe=t[ne+3*pe+1],Ue=t[ne+3*pe+2];F[X++]=Ue,F[X++]=qe,F[X++]=Oe,F[X++]=255}--we}},this.decodeAndBlitFrameRGBA=function(B,F){var ee=this.frameInfo(B),Z=ee.width*ee.height,ce=new Uint8Array(Z);wq(t,ee.data_offset,ce,Z);var ne=ee.palette_offset,ae=ee.transparent_index;ae===null&&(ae=256);var me=ee.width,Te=r-me,we=me,q=4*(ee.y*r+ee.x),Y=4*((ee.y+ee.height)*r+ee.x),X=q,re=4*Te;ee.interlaced===!0&&(re+=4*r*7);for(var se=8,Ce=0,je=ce.length;Ce<je;++Ce){var pe=ce[Ce];if(we===0&&(we=me,(X+=re)>=Y&&(re=4*Te+4*r*(se-1),X=q+(me+Te)*(se<<1),se>>=1)),pe===ae)X+=4;else{var Oe=t[ne+3*pe],qe=t[ne+3*pe+1],Ue=t[ne+3*pe+2];F[X++]=Oe,F[X++]=qe,F[X++]=Ue,F[X++]=255}--we}}}function wq(t,e,r,n){for(var a=t[e++],s=1<<a,o=s+1,l=o+1,c=a+1,u=(1<<c)-1,d=0,h=0,p=0,g=t[e++],b=new Int32Array(4096),w=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<c)break;var _=h&u;if(h>>=c,d-=c,_!==s){if(_===o)break;for(var N=_<l?_:w,S=0,T=N;T>s;)T=b[T]>>8,++S;var R=T;if(p+S+(N!==_?1:0)>n)return void Pa.log("Warning, gif stream longer than expected.");r[p++]=R;var z=p+=S;for(N!==_&&(r[p++]=R),T=N;S--;)T=b[T],r[--z]=255&T,T>>=8;w!==null&&l<4096&&(b[l++]=w<<8|R,l>=u+1&&c<12&&(++c,u=u<<1|1)),w=_}else l=o+1,u=(1<<(c=a+1))-1,w=null}return p!==n&&Pa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function UT(t){var e,r,n,a,s,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),p=new Array(65535),g=new Array(64),b=new Array(64),w=[],_=0,N=7,S=new Array(64),T=new Array(64),R=new Array(64),z=new Array(256),G=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ce(q,Y){for(var X=0,re=0,se=new Array,Ce=1;Ce<=16;Ce++){for(var je=1;je<=q[Ce];je++)se[Y[re]]=[],se[Y[re]][0]=X,se[Y[re]][1]=Ce,re++,X++;X*=2}return se}function ne(q){for(var Y=q[0],X=q[1]-1;X>=0;)Y&1<<X&&(_|=1<<N),X--,--N<0&&(_==255?(ae(255),ae(0)):ae(_),N=7,_=0)}function ae(q){w.push(q)}function me(q){ae(q>>8&255),ae(255&q)}function Te(q,Y,X,re,se){for(var Ce,je=se[0],pe=se[240],Oe=function(et,er){var Ve,zt,Wt,Yt,ar,Xe,qt,kt,gt,Ft,Vt=0;for(gt=0;gt<8;++gt){Ve=et[Vt],zt=et[Vt+1],Wt=et[Vt+2],Yt=et[Vt+3],ar=et[Vt+4],Xe=et[Vt+5],qt=et[Vt+6];var Nr=Ve+(kt=et[Vt+7]),sr=Ve-kt,it=zt+qt,ir=zt-qt,be=Wt+Xe,Ze=Wt-Xe,at=Yt+ar,Qe=Yt-ar,ze=Nr+at,st=Nr-at,St=it+be,tr=it-be;et[Vt]=ze+St,et[Vt+4]=ze-St;var It=.707106781*(tr+st);et[Vt+2]=st+It,et[Vt+6]=st-It;var Er=.382683433*((ze=Qe+Ze)-(tr=ir+sr)),en=.5411961*ze+Er,$r=1.306562965*tr+Er,jn=.707106781*(St=Ze+ir),fr=sr+jn,dn=sr-jn;et[Vt+5]=dn+en,et[Vt+3]=dn-en,et[Vt+1]=fr+$r,et[Vt+7]=fr-$r,Vt+=8}for(Vt=0,gt=0;gt<8;++gt){Ve=et[Vt],zt=et[Vt+8],Wt=et[Vt+16],Yt=et[Vt+24],ar=et[Vt+32],Xe=et[Vt+40],qt=et[Vt+48];var Vn=Ve+(kt=et[Vt+56]),on=Ve-kt,_n=zt+qt,Zr=zt-qt,tn=Wt+Xe,de=Wt-Xe,ge=Yt+ar,Ne=Yt-ar,Ee=Vn+ge,ke=Vn-ge,Pe=_n+tn,lt=_n-tn;et[Vt]=Ee+Pe,et[Vt+32]=Ee-Pe;var jt=.707106781*(lt+ke);et[Vt+16]=ke+jt,et[Vt+48]=ke-jt;var rt=.382683433*((Ee=Ne+de)-(lt=Zr+on)),Ae=.5411961*Ee+rt,Ge=1.306562965*lt+rt,dt=.707106781*(Pe=de+Zr),At=on+dt,yt=on-dt;et[Vt+40]=yt+Ae,et[Vt+24]=yt-Ae,et[Vt+8]=At+Ge,et[Vt+56]=At-Ge,Vt++}for(gt=0;gt<64;++gt)Ft=et[gt]*er[gt],g[gt]=Ft>0?Ft+.5|0:Ft-.5|0;return g}(q,Y),qe=0;qe<64;++qe)b[O[qe]]=Oe[qe];var Ue=b[0]-X;X=b[0],Ue==0?ne(re[0]):(ne(re[p[Ce=32767+Ue]]),ne(h[Ce]));for(var Me=63;Me>0&&b[Me]==0;)Me--;if(Me==0)return ne(je),X;for(var Be,ve=1;ve<=Me;){for(var Ht=ve;b[ve]==0&&ve<=Me;)++ve;var mt=ve-Ht;if(mt>=16){Be=mt>>4;for(var Ut=1;Ut<=Be;++Ut)ne(pe);mt&=15}Ce=32767+b[ve],ne(se[(mt<<4)+p[Ce]]),ne(h[Ce]),ve++}return Me!=63&&ne(je),X}function we(q){q=Math.min(Math.max(q,1),100),s!=q&&(function(Y){for(var X=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var se=o((X[re]*Y+50)/100);se=Math.min(Math.max(se,1),255),l[O[re]]=se}for(var Ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],je=0;je<64;je++){var pe=o((Ce[je]*Y+50)/100);pe=Math.min(Math.max(pe,1),255),c[O[je]]=pe}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],qe=0,Ue=0;Ue<8;Ue++)for(var Me=0;Me<8;Me++)u[qe]=1/(l[O[qe]]*Oe[Ue]*Oe[Me]*8),d[qe]=1/(c[O[qe]]*Oe[Ue]*Oe[Me]*8),qe++}(q<50?Math.floor(5e3/q):Math.floor(200-2*q)),s=q)}this.encode=function(q,Y){Y&&we(Y),w=new Array,_=0,N=7,me(65496),me(65504),me(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),me(1),me(1),ae(0),ae(0),function(){me(65499),me(132),ae(0);for(var zt=0;zt<64;zt++)ae(l[zt]);ae(1);for(var Wt=0;Wt<64;Wt++)ae(c[Wt])}(),function(zt,Wt){me(65472),me(17),ae(8),me(Wt),me(zt),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)}(q.width,q.height),function(){me(65476),me(418),ae(0);for(var zt=0;zt<16;zt++)ae(D[zt+1]);for(var Wt=0;Wt<=11;Wt++)ae(I[Wt]);ae(16);for(var Yt=0;Yt<16;Yt++)ae(V[Yt+1]);for(var ar=0;ar<=161;ar++)ae(P[ar]);ae(1);for(var Xe=0;Xe<16;Xe++)ae(B[Xe+1]);for(var qt=0;qt<=11;qt++)ae(F[qt]);ae(17);for(var kt=0;kt<16;kt++)ae(ee[kt+1]);for(var gt=0;gt<=161;gt++)ae(Z[gt])}(),me(65498),me(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var X=0,re=0,se=0;_=0,N=7,this.encode.displayName="_encode_";for(var Ce,je,pe,Oe,qe,Ue,Me,Be,ve,Ht=q.data,mt=q.width,Ut=q.height,et=4*mt,er=0;er<Ut;){for(Ce=0;Ce<et;){for(qe=et*er+Ce,Me=-1,Be=0,ve=0;ve<64;ve++)Ue=qe+(Be=ve>>3)*et+(Me=4*(7&ve)),er+Be>=Ut&&(Ue-=et*(er+1+Be-Ut)),Ce+Me>=et&&(Ue-=Ce+Me-et+4),je=Ht[Ue++],pe=Ht[Ue++],Oe=Ht[Ue++],S[ve]=(G[je]+G[pe+256|0]+G[Oe+512|0]>>16)-128,T[ve]=(G[je+768|0]+G[pe+1024|0]+G[Oe+1280|0]>>16)-128,R[ve]=(G[je+1280|0]+G[pe+1536|0]+G[Oe+1792|0]>>16)-128;X=Te(S,u,X,e,n),re=Te(T,d,re,r,a),se=Te(R,d,se,r,a),Ce+=32}er+=8}if(N>=0){var Ve=[];Ve[1]=N+1,Ve[0]=(1<<N+1)-1,ne(Ve)}return me(65497),new Uint8Array(w)},t=t||50,function(){for(var q=String.fromCharCode,Y=0;Y<256;Y++)z[Y]=q(Y)}(),e=ce(D,I),r=ce(B,F),n=ce(V,P),a=ce(ee,Z),function(){for(var q=1,Y=2,X=1;X<=15;X++){for(var re=q;re<Y;re++)p[32767+re]=X,h[32767+re]=[],h[32767+re][1]=X,h[32767+re][0]=re;for(var se=-(Y-1);se<=-q;se++)p[32767+se]=X,h[32767+se]=[],h[32767+se][1]=X,h[32767+se][0]=Y-1+se;q<<=1,Y<<=1}}(),function(){for(var q=0;q<256;q++)G[q]=19595*q,G[q+256|0]=38470*q,G[q+512|0]=7471*q+32768,G[q+768|0]=-11059*q,G[q+1024|0]=-21709*q,G[q+1280|0]=32768*q+8421375,G[q+1536|0]=-27439*q,G[q+1792|0]=-5329*q}(),we(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function qu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _q(t){function e(I){if(!I)throw Error("assert :P")}function r(I,V,P){for(var B=0;4>B;B++)if(I[V+B]!=P.charCodeAt(B))return!0;return!1}function n(I,V,P,B,F){for(var ee=0;ee<F;ee++)I[V+ee]=P[B+ee]}function a(I,V,P,B){for(var F=0;F<B;F++)I[V+F]=P}function s(I){return new Int32Array(I)}function o(I,V){for(var P=[],B=0;B<I;B++)P.push(new V);return P}function l(I,V){var P=[];return function B(F,ee,Z){for(var ce=Z[ee],ne=0;ne<ce&&(F.push(Z.length>ee+1?[]:new V),!(Z.length<ee+1));ne++)B(F[ne],ee+1,Z)}(P,0,I),P}var c=function(){var I=this;function V(C,M){for(var W=1<<M-1>>>0;C&W;)W>>>=1;return W?(C&W-1)+W:C}function P(C,M,W,J,ue){e(!(J%W));do C[M+(J-=W)]=ue;while(0<J)}function B(C,M,W,J,ue){if(e(2328>=ue),512>=ue)var he=s(512);else if((he=s(ue))==null)return 0;return function(xe,_e,Se,Le,Ye,vt){var Fe,Je,ut=_e,Dt=1<<Se,pt=s(16),Lt=s(16);for(e(Ye!=0),e(Le!=null),e(xe!=null),e(0<Se),Je=0;Je<Ye;++Je){if(15<Le[Je])return 0;++pt[Le[Je]]}if(pt[0]==Ye)return 0;for(Lt[1]=0,Fe=1;15>Fe;++Fe){if(pt[Fe]>1<<Fe)return 0;Lt[Fe+1]=Lt[Fe]+pt[Fe]}for(Je=0;Je<Ye;++Je)Fe=Le[Je],0<Le[Je]&&(vt[Lt[Fe]++]=Je);if(Lt[15]==1)return(Le=new F).g=0,Le.value=vt[0],P(xe,ut,1,Dt,Le),Dt;var Gt,lr=-1,nr=Dt-1,Ur=0,Ir=1,An=1,Dr=1<<Se;for(Je=0,Fe=1,Ye=2;Fe<=Se;++Fe,Ye<<=1){if(Ir+=An<<=1,0>(An-=pt[Fe]))return 0;for(;0<pt[Fe];--pt[Fe])(Le=new F).g=Fe,Le.value=vt[Je++],P(xe,ut+Ur,Ye,Dr,Le),Ur=V(Ur,Fe)}for(Fe=Se+1,Ye=2;15>=Fe;++Fe,Ye<<=1){if(Ir+=An<<=1,0>(An-=pt[Fe]))return 0;for(;0<pt[Fe];--pt[Fe]){if(Le=new F,(Ur&nr)!=lr){for(ut+=Dr,Gt=1<<(lr=Fe)-Se;15>lr&&!(0>=(Gt-=pt[lr]));)++lr,Gt<<=1;Dt+=Dr=1<<(Gt=lr-Se),xe[_e+(lr=Ur&nr)].g=Gt+Se,xe[_e+lr].value=ut-_e-lr}Le.g=Fe-Se,Le.value=vt[Je++],P(xe,ut+(Ur>>Se),Ye,Dr,Le),Ur=V(Ur,Fe)}}return Ir!=2*Lt[15]-1?0:Dt}(C,M,W,J,ue,he)}function F(){this.value=this.g=0}function ee(){this.value=this.g=0}function Z(){this.G=o(5,F),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o($i,ee)}function ce(C,M,W,J){e(C!=null),e(M!=null),e(2147483648>J),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=M,C.pa=W,C.Jd=M,C.Yc=W+J,C.Zc=4<=J?W+J-4+1:W,je(C)}function ne(C,M){for(var W=0;0<M--;)W|=Oe(C,128)<<M;return W}function ae(C,M){var W=ne(C,M);return pe(C)?-W:W}function me(C,M,W,J){var ue,he=0;for(e(C!=null),e(M!=null),e(4294967288>J),C.Sb=J,C.Ra=0,C.u=0,C.h=0,4<J&&(J=4),ue=0;ue<J;++ue)he+=M[W+ue]<<8*ue;C.Ra=he,C.bb=J,C.oa=M,C.pa=W}function Te(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<Tl-8>>>0,++C.bb,C.u-=8;re(C)&&(C.h=1,C.u=0)}function we(C,M){if(e(0<=M),!C.h&&M<=oo){var W=X(C)&rl[M];return C.u+=M,Te(C),W}return C.h=1,C.u=0}function q(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(C){return C.Ra>>>(C.u&Tl-1)>>>0}function re(C){return e(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>Tl}function se(C,M){C.u=M,C.h=re(C)}function Ce(C){C.u>=xn&&(e(C.u>=xn),Te(C))}function je(C){e(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(e(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function pe(C){return ne(C,1)}function Oe(C,M){var W=C.Ca;0>C.b&&je(C);var J=C.b,ue=W*M>>>8,he=(C.I>>>J>ue)+0;for(he?(W-=ue,C.I-=ue+1<<J>>>0):W=ue+1,J=W,ue=0;256<=J;)ue+=8,J>>=8;return J=7^ue+ac[J],C.b-=J,C.Ca=(W<<J)-1,he}function qe(C,M,W){C[M+0]=W>>24&255,C[M+1]=W>>16&255,C[M+2]=W>>8&255,C[M+3]=255&W}function Ue(C,M){return C[M+0]|C[M+1]<<8}function Me(C,M){return Ue(C,M)|C[M+2]<<16}function Be(C,M){return Ue(C,M)|Ue(C,M+2)<<16}function ve(C,M){var W=1<<M;return e(C!=null),e(0<M),C.X=s(W),C.X==null?0:(C.Mb=32-M,C.Xa=M,1)}function Ht(C,M){e(C!=null),e(M!=null),e(C.Xa==M.Xa),n(M.X,0,C.X,0,1<<M.Xa)}function mt(){this.X=[],this.Xa=this.Mb=0}function Ut(C,M,W,J){e(W!=null),e(J!=null);var ue=W[0],he=J[0];return ue==0&&(ue=(C*he+M/2)/M),he==0&&(he=(M*ue+C/2)/C),0>=ue||0>=he?0:(W[0]=ue,J[0]=he,1)}function et(C,M){return C+(1<<M)-1>>>M}function er(C,M){return((4278255360&C)+(4278255360&M)>>>0&4278255360)+((16711935&C)+(16711935&M)>>>0&16711935)>>>0}function Ve(C,M){I[M]=function(W,J,ue,he,xe,_e,Se){var Le;for(Le=0;Le<xe;++Le){var Ye=I[C](_e[Se+Le-1],ue,he+Le);_e[Se+Le]=er(W[J+Le],Ye)}}}function zt(){this.ud=this.hd=this.jd=0}function Wt(C,M){return((4278124286&(C^M))>>>1)+(C&M)>>>0}function Yt(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function ar(C,M){return Yt(C+(C-M+.5>>1))}function Xe(C,M,W){return Math.abs(M-W)-Math.abs(C-W)}function qt(C,M,W,J,ue,he,xe){for(J=he[xe-1],W=0;W<ue;++W)he[xe+W]=J=er(C[M+W],J)}function kt(C,M,W,J,ue){var he;for(he=0;he<W;++he){var xe=C[M+he],_e=xe>>8&255,Se=16711935&(Se=(Se=16711935&xe)+((_e<<16)+_e));J[ue+he]=(4278255360&xe)+Se>>>0}}function gt(C,M){M.jd=255&C,M.hd=C>>8&255,M.ud=C>>16&255}function Ft(C,M,W,J,ue,he){var xe;for(xe=0;xe<J;++xe){var _e=M[W+xe],Se=_e>>>8,Le=_e,Ye=255&(Ye=(Ye=_e>>>16)+((C.jd<<24>>24)*(Se<<24>>24)>>>5));Le=255&(Le=(Le+=(C.hd<<24>>24)*(Se<<24>>24)>>>5)+((C.ud<<24>>24)*(Ye<<24>>24)>>>5)),ue[he+xe]=(4278255360&_e)+(Ye<<16)+Le}}function Vt(C,M,W,J,ue){I[M]=function(he,xe,_e,Se,Le,Ye,vt,Fe,Je){for(Se=vt;Se<Fe;++Se)for(vt=0;vt<Je;++vt)Le[Ye++]=ue(_e[J(he[xe++])])},I[C]=function(he,xe,_e,Se,Le,Ye,vt){var Fe=8>>he.b,Je=he.Ea,ut=he.K[0],Dt=he.w;if(8>Fe)for(he=(1<<he.b)-1,Dt=(1<<Fe)-1;xe<_e;++xe){var pt,Lt=0;for(pt=0;pt<Je;++pt)pt&he||(Lt=J(Se[Le++])),Ye[vt++]=ue(ut[Lt&Dt]),Lt>>=Fe}else I["VP8LMapColor"+W](Se,Le,ut,Dt,Ye,vt,xe,_e,Je)}}function Nr(C,M,W,J,ue){for(W=M+W;M<W;){var he=C[M++];J[ue++]=he>>16&255,J[ue++]=he>>8&255,J[ue++]=255&he}}function sr(C,M,W,J,ue){for(W=M+W;M<W;){var he=C[M++];J[ue++]=he>>16&255,J[ue++]=he>>8&255,J[ue++]=255&he,J[ue++]=he>>24&255}}function it(C,M,W,J,ue){for(W=M+W;M<W;){var he=(xe=C[M++])>>16&240|xe>>12&15,xe=240&xe|xe>>28&15;J[ue++]=he,J[ue++]=xe}}function ir(C,M,W,J,ue){for(W=M+W;M<W;){var he=(xe=C[M++])>>16&248|xe>>13&7,xe=xe>>5&224|xe>>3&31;J[ue++]=he,J[ue++]=xe}}function be(C,M,W,J,ue){for(W=M+W;M<W;){var he=C[M++];J[ue++]=255&he,J[ue++]=he>>8&255,J[ue++]=he>>16&255}}function Ze(C,M,W,J,ue,he){if(he==0)for(W=M+W;M<W;)qe(J,((he=C[M++])[0]>>24|he[1]>>8&65280|he[2]<<8&16711680|he[3]<<24)>>>0),ue+=32;else n(J,ue,C,M,W)}function at(C,M){I[M][0]=I[C+"0"],I[M][1]=I[C+"1"],I[M][2]=I[C+"2"],I[M][3]=I[C+"3"],I[M][4]=I[C+"4"],I[M][5]=I[C+"5"],I[M][6]=I[C+"6"],I[M][7]=I[C+"7"],I[M][8]=I[C+"8"],I[M][9]=I[C+"9"],I[M][10]=I[C+"10"],I[M][11]=I[C+"11"],I[M][12]=I[C+"12"],I[M][13]=I[C+"13"],I[M][14]=I[C+"0"],I[M][15]=I[C+"0"]}function Qe(C){return C==y6||C==w6||C==m5||C==_6}function ze(){this.eb=[],this.size=this.A=this.fb=0}function st(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function St(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ze,this.f.kb=new st,this.sd=null}function tr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Er(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function en(C,M){var W=C.T,J=M.ba.f.RGBA,ue=J.eb,he=J.fb+C.ka*J.A,xe=Kc[M.ba.S],_e=C.y,Se=C.O,Le=C.f,Ye=C.N,vt=C.ea,Fe=C.W,Je=M.cc,ut=M.dc,Dt=M.Mc,pt=M.Nc,Lt=C.ka,Gt=C.ka+C.T,lr=C.U,nr=lr+1>>1;for(Lt==0?xe(_e,Se,null,null,Le,Ye,vt,Fe,Le,Ye,vt,Fe,ue,he,null,null,lr):(xe(M.ec,M.fc,_e,Se,Je,ut,Dt,pt,Le,Ye,vt,Fe,ue,he-J.A,ue,he,lr),++W);Lt+2<Gt;Lt+=2)Je=Le,ut=Ye,Dt=vt,pt=Fe,Ye+=C.Rc,Fe+=C.Rc,he+=2*J.A,xe(_e,(Se+=2*C.fa)-C.fa,_e,Se,Je,ut,Dt,pt,Le,Ye,vt,Fe,ue,he-J.A,ue,he,lr);return Se+=C.fa,C.j+Gt<C.o?(n(M.ec,M.fc,_e,Se,lr),n(M.cc,M.dc,Le,Ye,nr),n(M.Mc,M.Nc,vt,Fe,nr),W--):1&Gt||xe(_e,Se,null,null,Le,Ye,vt,Fe,Le,Ye,vt,Fe,ue,he+J.A,null,null,lr),W}function $r(C,M,W){var J=C.F,ue=[C.J];if(J!=null){var he=C.U,xe=M.ba.S,_e=xe==h5||xe==m5;M=M.ba.f.RGBA;var Se=[0],Le=C.ka;Se[0]=C.T,C.Kb&&(Le==0?--Se[0]:(--Le,ue[0]-=C.width),C.j+C.ka+C.T==C.o&&(Se[0]=C.o-C.j-Le));var Ye=M.eb;Le=M.fb+Le*M.A,C=OL(J,ue[0],C.width,he,Se,Ye,Le+(_e?0:3),M.A),e(W==Se),C&&Qe(xe)&&Am(Ye,Le,_e,he,Se,M.A)}return 0}function jn(C){var M=C.ma,W=M.ba.S,J=11>W,ue=W==d5||W==f5||W==h5||W==b6||W==12||Qe(W);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!af(M.Oa,C,ue?11:12))return 0;if(ue&&Qe(W)&&or(),C.da)alert("todo:use_scaling");else{if(J){if(M.Ib=Er,C.Kb){if(W=C.U+1>>1,M.memory=s(C.U+2*W),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+C.U,M.Mc=M.cc,M.Nc=M.dc+W,M.Ib=en,or()}}else alert("todo:EmitYUV");ue&&(M.Jb=$r,J&&nt())}if(J&&!KL){for(C=0;256>C;++C)zhe[C]=89858*(C-128)+g5>>p5,Hhe[C]=-22014*(C-128)+g5,$he[C]=-45773*(C-128),Vhe[C]=113618*(C-128)+g5>>p5;for(C=Cv;C<A6;++C)M=76283*(C-16)+g5>>p5,qhe[C-Cv]=na(M,255),Ghe[C-Cv]=na(M+8>>4,15);KL=1}return 1}function fr(C){var M=C.ma,W=C.U,J=C.T;return e(!(1&C.ka)),0>=W||0>=J?0:(W=M.Ib(C,M),M.Jb!=null&&M.Jb(C,M,W),M.Dc+=W,1)}function dn(C){C.ma.memory=null}function Vn(C,M,W,J){return we(C,8)!=47?0:(M[0]=we(C,14)+1,W[0]=we(C,14)+1,J[0]=we(C,1),we(C,3)!=0?0:!C.h)}function on(C,M){if(4>C)return C+1;var W=C-2>>1;return(2+(1&C)<<W)+we(M,W)+1}function _n(C,M){return 120<M?M-120:1<=(W=((W=jhe[M-1])>>4)*C+(8-(15&W)))?W:1;var W}function Zr(C,M,W){var J=X(W),ue=C[M+=255&J].g-8;return 0<ue&&(se(W,W.u+8),J=X(W),M+=C[M].value,M+=J&(1<<ue)-1),se(W,W.u+C[M].g),C[M].value}function tn(C,M,W){return W.g+=C.g,W.value+=C.value<<M>>>0,e(8>=W.g),C.g}function de(C,M,W){var J=C.xc;return e((M=J==0?0:C.vc[C.md*(W>>J)+(M>>J)])<C.Wb),C.Ya[M]}function ge(C,M,W,J){var ue=C.ab,he=C.c*M,xe=C.C;M=xe+M;var _e=W,Se=J;for(J=C.Ta,W=C.Ua;0<ue--;){var Le=C.gc[ue],Ye=xe,vt=M,Fe=_e,Je=Se,ut=(Se=J,_e=W,Le.Ea);switch(e(Ye<vt),e(vt<=Le.nc),Le.hc){case 2:m(Fe,Je,(vt-Ye)*ut,Se,_e);break;case 0:var Dt=Ye,pt=vt,Lt=Se,Gt=_e,lr=(Dr=Le).Ea;Dt==0&&(oe(Fe,Je,null,null,1,Lt,Gt),qt(Fe,Je+1,0,0,lr-1,Lt,Gt+1),Je+=lr,Gt+=lr,++Dt);for(var nr=1<<Dr.b,Ur=nr-1,Ir=et(lr,Dr.b),An=Dr.K,Dr=Dr.w+(Dt>>Dr.b)*Ir;Dt<pt;){var $n=An,Ai=Dr,Sn=1;for(f(Fe,Je,Lt,Gt-lr,1,Lt,Gt);Sn<lr;){var Mr=(Sn&~Ur)+nr;Mr>lr&&(Mr=lr),(0,k[$n[Ai++]>>8&15])(Fe,Je+ +Sn,Lt,Gt+Sn-lr,Mr-Sn,Lt,Gt+Sn),Sn=Mr}Je+=lr,Gt+=lr,++Dt&Ur||(Dr+=Ir)}vt!=Le.nc&&n(Se,_e-ut,Se,_e+(vt-Ye-1)*ut,ut);break;case 1:for(ut=Fe,pt=Je,lr=(Fe=Le.Ea)-(Gt=Fe&~(Lt=(Je=1<<Le.b)-1)),Dt=et(Fe,Le.b),nr=Le.K,Le=Le.w+(Ye>>Le.b)*Dt;Ye<vt;){for(Ur=nr,Ir=Le,An=new zt,Dr=pt+Gt,$n=pt+Fe;pt<Dr;)gt(Ur[Ir++],An),L(An,ut,pt,Je,Se,_e),pt+=Je,_e+=Je;pt<$n&&(gt(Ur[Ir++],An),L(An,ut,pt,lr,Se,_e),pt+=lr,_e+=lr),++Ye&Lt||(Le+=Dt)}break;case 3:if(Fe==Se&&Je==_e&&0<Le.b){for(pt=Se,Fe=ut=_e+(vt-Ye)*ut-(Gt=(vt-Ye)*et(Le.Ea,Le.b)),Je=Se,Lt=_e,Dt=[],Gt=(lr=Gt)-1;0<=Gt;--Gt)Dt[Gt]=Je[Lt+Gt];for(Gt=lr-1;0<=Gt;--Gt)pt[Fe+Gt]=Dt[Gt];x(Le,Ye,vt,Se,ut,Se,_e)}else x(Le,Ye,vt,Fe,Je,Se,_e)}_e=J,Se=W}Se!=W&&n(J,W,_e,Se,he)}function Ne(C,M){var W=C.V,J=C.Ba+C.c*C.C,ue=M-C.C;if(e(M<=C.l.o),e(16>=ue),0<ue){var he=C.l,xe=C.Ta,_e=C.Ua,Se=he.width;if(ge(C,ue,W,J),ue=_e=[_e],e((W=C.C)<(J=M)),e(he.v<he.va),J>he.o&&(J=he.o),W<he.j){var Le=he.j-W;W=he.j,ue[0]+=Le*Se}if(W>=J?W=0:(ue[0]+=4*he.v,he.ka=W-he.j,he.U=he.va-he.v,he.T=J-W,W=1),W){if(_e=_e[0],11>(W=C.ca).S){var Ye=W.f.RGBA,vt=(J=W.S,ue=he.U,he=he.T,Le=Ye.eb,Ye.A),Fe=he;for(Ye=Ye.fb+C.Ma*Ye.A;0<Fe--;){var Je=xe,ut=_e,Dt=ue,pt=Le,Lt=Ye;switch(J){case u5:H(Je,ut,Dt,pt,Lt);break;case d5:Q(Je,ut,Dt,pt,Lt);break;case y6:Q(Je,ut,Dt,pt,Lt),Am(pt,Lt,0,Dt,1,0);break;case BL:Re(Je,ut,Dt,pt,Lt);break;case f5:Ze(Je,ut,Dt,pt,Lt,1);break;case w6:Ze(Je,ut,Dt,pt,Lt,1),Am(pt,Lt,0,Dt,1,0);break;case h5:Ze(Je,ut,Dt,pt,Lt,0);break;case m5:Ze(Je,ut,Dt,pt,Lt,0),Am(pt,Lt,1,Dt,1,0);break;case b6:le(Je,ut,Dt,pt,Lt);break;case _6:le(Je,ut,Dt,pt,Lt),IL(pt,Lt,Dt,1,0);break;case UL:fe(Je,ut,Dt,pt,Lt);break;default:e(0)}_e+=Se,Ye+=vt}C.Ma+=he}else alert("todo:EmitRescaledRowsYUVA");e(C.Ma<=W.height)}}C.C=M,e(C.C<=C.i)}function Ee(C){var M;if(0<C.ua)return 0;for(M=0;M<C.Wb;++M){var W=C.Ya[M].G,J=C.Ya[M].H;if(0<W[1][J[1]+0].g||0<W[2][J[2]+0].g||0<W[3][J[3]+0].g)return 0}return 1}function ke(C,M,W,J,ue,he){if(C.Z!=0){var xe=C.qd,_e=C.rd;for(e(Ph[C.Z]!=null);M<W;++M)Ph[C.Z](xe,_e,J,ue,J,ue,he),xe=J,_e=ue,ue+=he;C.qd=xe,C.rd=_e}}function Pe(C,M){var W=C.l.ma,J=W.Z==0||W.Z==1?C.l.j:C.C;if(J=C.C<J?J:C.C,e(M<=C.l.o),M>J){var ue=C.l.width,he=W.ca,xe=W.tb+ue*J,_e=C.V,Se=C.Ba+C.c*J,Le=C.gc;e(C.ab==1),e(Le[0].hc==3),y(Le[0],J,M,_e,Se,he,xe),ke(W,J,M,he,xe,ue)}C.C=C.Ma=M}function lt(C,M,W,J,ue,he,xe){var _e=C.$/J,Se=C.$%J,Le=C.m,Ye=C.s,vt=W+C.$,Fe=vt;ue=W+J*ue;var Je=W+J*he,ut=280+Ye.ua,Dt=C.Pb?_e:16777216,pt=0<Ye.ua?Ye.Wa:null,Lt=Ye.wc,Gt=vt<Je?de(Ye,Se,_e):null;e(C.C<he),e(Je<=ue);var lr=!1;e:for(;;){for(;lr||vt<Je;){var nr=0;if(_e>=Dt){var Ur=vt-W;e((Dt=C).Pb),Dt.wd=Dt.m,Dt.xd=Ur,0<Dt.s.ua&&Ht(Dt.s.Wa,Dt.s.vb),Dt=_e+Che}if(Se&Lt||(Gt=de(Ye,Se,_e)),e(Gt!=null),Gt.Qb&&(M[vt]=Gt.qb,lr=!0),!lr)if(Ce(Le),Gt.jc){nr=Le,Ur=M;var Ir=vt,An=Gt.pd[X(nr)&$i-1];e(Gt.jc),256>An.g?(se(nr,nr.u+An.g),Ur[Ir]=An.value,nr=0):(se(nr,nr.u+An.g-256),e(256<=An.value),nr=An.value),nr==0&&(lr=!0)}else nr=Zr(Gt.G[0],Gt.H[0],Le);if(Le.h)break;if(lr||256>nr){if(!lr)if(Gt.nd)M[vt]=(Gt.qb|nr<<8)>>>0;else{if(Ce(Le),lr=Zr(Gt.G[1],Gt.H[1],Le),Ce(Le),Ur=Zr(Gt.G[2],Gt.H[2],Le),Ir=Zr(Gt.G[3],Gt.H[3],Le),Le.h)break;M[vt]=(Ir<<24|lr<<16|nr<<8|Ur)>>>0}if(lr=!1,++vt,++Se>=J&&(Se=0,++_e,xe!=null&&_e<=he&&!(_e%16)&&xe(C,_e),pt!=null))for(;Fe<vt;)nr=M[Fe++],pt.X[(506832829*nr&4294967295)>>>pt.Mb]=nr}else if(280>nr){if(nr=on(nr-256,Le),Ur=Zr(Gt.G[4],Gt.H[4],Le),Ce(Le),Ur=_n(J,Ur=on(Ur,Le)),Le.h)break;if(vt-W<Ur||ue-vt<nr)break e;for(Ir=0;Ir<nr;++Ir)M[vt+Ir]=M[vt+Ir-Ur];for(vt+=nr,Se+=nr;Se>=J;)Se-=J,++_e,xe!=null&&_e<=he&&!(_e%16)&&xe(C,_e);if(e(vt<=ue),Se&Lt&&(Gt=de(Ye,Se,_e)),pt!=null)for(;Fe<vt;)nr=M[Fe++],pt.X[(506832829*nr&4294967295)>>>pt.Mb]=nr}else{if(!(nr<ut))break e;for(lr=nr-280,e(pt!=null);Fe<vt;)nr=M[Fe++],pt.X[(506832829*nr&4294967295)>>>pt.Mb]=nr;nr=vt,e(!(lr>>>(Ur=pt).Xa)),M[nr]=Ur.X[lr],lr=!0}lr||e(Le.h==re(Le))}if(C.Pb&&Le.h&&vt<ue)e(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&Ht(C.s.vb,C.s.Wa);else{if(Le.h)break e;xe!=null&&xe(C,_e>he?he:_e),C.a=0,C.$=vt-W}return 1}return C.a=3,0}function jt(C){e(C!=null),C.vc=null,C.yc=null,C.Ya=null;var M=C.Wa;M!=null&&(M.X=null),C.vb=null,e(C!=null)}function rt(){var C=new xr;return C==null?null:(C.a=0,C.xb=$L,at("Predictor","VP8LPredictors"),at("Predictor","VP8LPredictors_C"),at("PredictorAdd","VP8LPredictorsAdd"),at("PredictorAdd","VP8LPredictorsAdd_C"),m=kt,L=Ft,H=Nr,Q=sr,le=it,fe=ir,Re=be,I.VP8LMapColor32b=v,I.VP8LMapColor8b=E,C)}function Ae(C,M,W,J,ue){var he=1,xe=[C],_e=[M],Se=J.m,Le=J.s,Ye=null,vt=0;e:for(;;){if(W)for(;he&&we(Se,1);){var Fe=xe,Je=_e,ut=J,Dt=1,pt=ut.m,Lt=ut.gc[ut.ab],Gt=we(pt,2);if(ut.Oc&1<<Gt)he=0;else{switch(ut.Oc|=1<<Gt,Lt.hc=Gt,Lt.Ea=Fe[0],Lt.nc=Je[0],Lt.K=[null],++ut.ab,e(4>=ut.ab),Gt){case 0:case 1:Lt.b=we(pt,3)+2,Dt=Ae(et(Lt.Ea,Lt.b),et(Lt.nc,Lt.b),0,ut,Lt.K),Lt.K=Lt.K[0];break;case 3:var lr,nr=we(pt,8)+1,Ur=16<nr?0:4<nr?1:2<nr?2:3;if(Fe[0]=et(Lt.Ea,Ur),Lt.b=Ur,lr=Dt=Ae(nr,1,0,ut,Lt.K)){var Ir,An=nr,Dr=Lt,$n=1<<(8>>Dr.b),Ai=s($n);if(Ai==null)lr=0;else{var Sn=Dr.K[0],Mr=Dr.w;for(Ai[0]=Dr.K[0][0],Ir=1;Ir<1*An;++Ir)Ai[Ir]=er(Sn[Mr+Ir],Ai[Ir-1]);for(;Ir<4*$n;++Ir)Ai[Ir]=0;Dr.K[0]=null,Dr.K[0]=Ai,lr=1}}Dt=lr;break;case 2:break;default:e(0)}he=Dt}}if(xe=xe[0],_e=_e[0],he&&we(Se,1)&&!(he=1<=(vt=we(Se,4))&&11>=vt)){J.a=3;break e}var wr;if(wr=he)t:{var Vs,vn,Gn,Ka=J,lo=xe,nl=_e,Ss=vt,Oo=W,al=Ka.m,Si=Ka.s,Yn=[null],pa=1,js=0,ga=The[Ss];r:for(;;){if(Oo&&we(al,1)){var co=we(al,3)+2,Uu=et(lo,co),$s=et(nl,co),Cl=Uu*$s;if(!Ae(Uu,$s,0,Ka,Yn))break r;for(Yn=Yn[0],Si.xc=co,Vs=0;Vs<Cl;++Vs){var Ra=Yn[Vs]>>8&65535;Yn[Vs]=Ra,Ra>=pa&&(pa=Ra+1)}}if(al.h)break r;for(vn=0;5>vn;++vn){var ji=zL[vn];!vn&&0<Ss&&(ji+=1<<Ss),js<ji&&(js=ji)}var ic=o(pa*ga,F),sl=pa,oc=o(sl,Z);if(oc==null)var lc=null;else e(65536>=sl),lc=oc;var kl=s(js);if(lc==null||kl==null||ic==null){Ka.a=1;break r}var cc=ic;for(Vs=Gn=0;Vs<pa;++Vs){var $a=lc[Vs],uc=$a.G,zu=$a.H,Sm=0,cf=1,uo=0;for(vn=0;5>vn;++vn){ji=zL[vn],uc[vn]=cc,zu[vn]=Gn,!vn&&0<Ss&&(ji+=1<<Ss);a:{var v5,S6=ji,b5=Ka,kv=kl,Xhe=cc,Yhe=Gn,j6=0,Dh=b5.m,Zhe=we(Dh,1);if(a(kv,0,0,S6),Zhe){var Qhe=we(Dh,1)+1,Jhe=we(Dh,1),ZL=we(Dh,Jhe==0?1:8);kv[ZL]=1,Qhe==2&&(kv[ZL=we(Dh,8)]=1);var y5=1}else{var QL=s(19),JL=we(Dh,4)+4;if(19<JL){b5.a=3;var w5=0;break a}for(v5=0;v5<JL;++v5)QL[She[v5]]=we(Dh,3);var T6=void 0,Iv=void 0,e9=b5,e0e=QL,_5=S6,t9=kv,C6=0,Mh=e9.m,r9=8,n9=o(128,F);n:for(;B(n9,0,7,e0e,19);){if(we(Mh,1)){var t0e=2+2*we(Mh,3);if((T6=2+we(Mh,t0e))>_5)break n}else T6=_5;for(Iv=0;Iv<_5&&T6--;){Ce(Mh);var a9=n9[0+(127&X(Mh))];se(Mh,Mh.u+a9.g);var _g=a9.value;if(16>_g)t9[Iv++]=_g,_g!=0&&(r9=_g);else{var r0e=_g==16,s9=_g-16,n0e=Ehe[s9],i9=we(Mh,Nhe[s9])+n0e;if(Iv+i9>_5)break n;for(var a0e=r0e?r9:0;0<i9--;)t9[Iv++]=a0e}}C6=1;break n}C6||(e9.a=3),y5=C6}(y5=y5&&!Dh.h)&&(j6=B(Xhe,Yhe,8,kv,S6)),y5&&j6!=0?w5=j6:(b5.a=3,w5=0)}if(w5==0)break r;if(cf&&Ahe[vn]==1&&(cf=cc[Gn].g==0),Sm+=cc[Gn].g,Gn+=w5,3>=vn){var Ov,k6=kl[0];for(Ov=1;Ov<ji;++Ov)kl[Ov]>k6&&(k6=kl[Ov]);uo+=k6}}if($a.nd=cf,$a.Qb=0,cf&&($a.qb=(uc[3][zu[3]+0].value<<24|uc[1][zu[1]+0].value<<16|uc[2][zu[2]+0].value)>>>0,Sm==0&&256>uc[0][zu[0]+0].value&&($a.Qb=1,$a.qb+=uc[0][zu[0]+0].value<<8)),$a.jc=!$a.Qb&&6>uo,$a.jc){var N5,uf=$a;for(N5=0;N5<$i;++N5){var Lh=N5,Fh=uf.pd[Lh],E5=uf.G[0][uf.H[0]+Lh];256<=E5.value?(Fh.g=E5.g+256,Fh.value=E5.value):(Fh.g=0,Fh.value=0,Lh>>=tn(E5,8,Fh),Lh>>=tn(uf.G[1][uf.H[1]+Lh],16,Fh),Lh>>=tn(uf.G[2][uf.H[2]+Lh],0,Fh),tn(uf.G[3][uf.H[3]+Lh],24,Fh))}}}Si.vc=Yn,Si.Wb=pa,Si.Ya=lc,Si.yc=ic,wr=1;break t}wr=0}if(!(he=wr)){J.a=3;break e}if(0<vt){if(Le.ua=1<<vt,!ve(Le.Wa,vt)){J.a=1,he=0;break e}}else Le.ua=0;var I6=J,o9=xe,s0e=_e,O6=I6.s,R6=O6.xc;if(I6.c=o9,I6.i=s0e,O6.md=et(o9,R6),O6.wc=R6==0?-1:(1<<R6)-1,W){J.xb=Mhe;break e}if((Ye=s(xe*_e))==null){J.a=1,he=0;break e}he=(he=lt(J,Ye,0,xe,_e,_e,null))&&!Se.h;break e}return he?(ue!=null?ue[0]=Ye:(e(Ye==null),e(W)),J.$=0,W||jt(Le)):jt(Le),he}function Ge(C,M){var W=C.c*C.i,J=W+M+16*M;return e(C.c<=M),C.V=s(J),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+W+M,1)}function dt(C,M){var W=C.C,J=M-W,ue=C.V,he=C.Ba+C.c*W;for(e(M<=C.l.o);0<J;){var xe=16<J?16:J,_e=C.l.ma,Se=C.l.width,Le=Se*xe,Ye=_e.ca,vt=_e.tb+Se*W,Fe=C.Ta,Je=C.Ua;ge(C,xe,ue,he),RL(Fe,Je,Ye,vt,Le),ke(_e,W,W+xe,Ye,vt,Se),J-=xe,ue+=xe*C.c,W+=xe}e(W==M),C.C=C.Ma=M}function At(){this.ub=this.yd=this.td=this.Rb=0}function yt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Xt(){this.Yb=function(){var C=[];return function M(W,J,ue){for(var he=ue[J],xe=0;xe<he&&(W.push(ue.length>J+1?[]:0),!(ue.length<J+1));xe++)M(W[xe],J+1,ue)}(C,0,[3,11]),C}()}function vr(){this.jb=s(3),this.Wc=l([4,8],Xt),this.Xc=l([4,17],Xt)}function _t(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Hr(){this.ld=this.La=this.dd=this.tc=0}function Fr(){this.Na=this.la=0}function Ua(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function wi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function fn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hr),this.Y=0,this.ya=Array(new wi),this.aa=0,this.l=new Wa}function nn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function an(){this.cb=this.a=0,this.sc="",this.m=new q,this.Od=new At,this.Kc=new yt,this.ed=new _t,this.Qa=new Ct,this.Ic=this.$c=this.Aa=0,this.D=new fn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,q),this.ia=0,this.pb=o(4,Ua),this.Pa=new vr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new nn),this.Hd=0,this.rb=Array(new Fr),this.sb=0,this.wa=Array(new Hr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new wi),this.L=this.aa=0,this.gd=l([4,2],Hr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function _i(){var C=new an;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,Tv||(Tv=Fi)),C}function Rn(C,M,W){return C.a==0&&(C.a=M,C.sc=W,C.cb=0),0}function Xn(C,M,W){return 3<=W&&C[M+0]==157&&C[M+1]==1&&C[M+2]==42}function As(C,M){if(C==null)return 0;if(C.a=0,C.sc="OK",M==null)return Rn(C,2,"null VP8Io passed to VP8GetHeaders()");var W=M.data,J=M.w,ue=M.ha;if(4>ue)return Rn(C,7,"Truncated header.");var he=W[J+0]|W[J+1]<<8|W[J+2]<<16,xe=C.Od;if(xe.Rb=!(1&he),xe.td=he>>1&7,xe.yd=he>>4&1,xe.ub=he>>5,3<xe.td)return Rn(C,3,"Incorrect keyframe parameters.");if(!xe.yd)return Rn(C,4,"Frame not displayable.");J+=3,ue-=3;var _e=C.Kc;if(xe.Rb){if(7>ue)return Rn(C,7,"cannot parse picture header");if(!Xn(W,J,ue))return Rn(C,3,"Bad code word");_e.c=16383&(W[J+4]<<8|W[J+3]),_e.Td=W[J+4]>>6,_e.i=16383&(W[J+6]<<8|W[J+5]),_e.Ud=W[J+6]>>6,J+=7,ue-=7,C.za=_e.c+15>>4,C.Ub=_e.i+15>>4,M.width=_e.c,M.height=_e.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,a((he=C.Pa).jb,0,255,he.jb.length),e((he=C.Qa)!=null),he.Cb=0,he.Bb=0,he.Fb=1,a(he.Zb,0,0,he.Zb.length),a(he.Lb,0,0,he.Lb)}if(xe.ub>ue)return Rn(C,7,"bad partition length");ce(he=C.m,W,J,xe.ub),J+=xe.ub,ue-=xe.ub,xe.Rb&&(_e.Ld=pe(he),_e.Kd=pe(he)),_e=C.Qa;var Se,Le=C.Pa;if(e(he!=null),e(_e!=null),_e.Cb=pe(he),_e.Cb){if(_e.Bb=pe(he),pe(he)){for(_e.Fb=pe(he),Se=0;4>Se;++Se)_e.Zb[Se]=pe(he)?ae(he,7):0;for(Se=0;4>Se;++Se)_e.Lb[Se]=pe(he)?ae(he,6):0}if(_e.Bb)for(Se=0;3>Se;++Se)Le.jb[Se]=pe(he)?ne(he,8):255}else _e.Bb=0;if(he.Ka)return Rn(C,3,"cannot parse segment header");if((_e=C.ed).zd=pe(he),_e.Tb=ne(he,6),_e.wb=ne(he,3),_e.Pc=pe(he),_e.Pc&&pe(he)){for(Le=0;4>Le;++Le)pe(he)&&(_e.vd[Le]=ae(he,6));for(Le=0;4>Le;++Le)pe(he)&&(_e.od[Le]=ae(he,6))}if(C.L=_e.Tb==0?0:_e.zd?1:2,he.Ka)return Rn(C,3,"cannot parse filter header");var Ye=ue;if(ue=Se=J,J=Se+Ye,_e=Ye,C.Xb=(1<<ne(C.m,2))-1,Ye<3*(Le=C.Xb))W=7;else{for(Se+=3*Le,_e-=3*Le,Ye=0;Ye<Le;++Ye){var vt=W[ue+0]|W[ue+1]<<8|W[ue+2]<<16;vt>_e&&(vt=_e),ce(C.Jc[+Ye],W,Se,vt),Se+=vt,_e-=vt,ue+=3}ce(C.Jc[+Le],W,Se,_e),W=Se<J?0:5}if(W!=0)return Rn(C,W,"cannot parse partitions");for(W=ne(Se=C.m,7),ue=pe(Se)?ae(Se,4):0,J=pe(Se)?ae(Se,4):0,_e=pe(Se)?ae(Se,4):0,Le=pe(Se)?ae(Se,4):0,Se=pe(Se)?ae(Se,4):0,Ye=C.Qa,vt=0;4>vt;++vt){if(Ye.Cb){var Fe=Ye.Zb[vt];Ye.Fb||(Fe+=W)}else{if(0<vt){C.pb[vt]=C.pb[0];continue}Fe=W}var Je=C.pb[vt];Je.Sc[0]=N6[na(Fe+ue,127)],Je.Sc[1]=E6[na(Fe+0,127)],Je.Eb[0]=2*N6[na(Fe+J,127)],Je.Eb[1]=101581*E6[na(Fe+_e,127)]>>16,8>Je.Eb[1]&&(Je.Eb[1]=8),Je.Qc[0]=N6[na(Fe+Le,117)],Je.Qc[1]=E6[na(Fe+Se,127)],Je.lc=Fe+Se}if(!xe.Rb)return Rn(C,4,"Not a key frame.");for(pe(he),xe=C.Pa,W=0;4>W;++W){for(ue=0;8>ue;++ue)for(J=0;3>J;++J)for(_e=0;11>_e;++_e)Le=Oe(he,Phe[W][ue][J][_e])?ne(he,8):Ohe[W][ue][J][_e],xe.Wc[W][ue].Yb[J][_e]=Le;for(ue=0;17>ue;++ue)xe.Xc[W][ue]=xe.Wc[W][Dhe[ue]]}return C.kc=pe(he),C.kc&&(C.Bd=ne(he,8)),C.cb=1}function Fi(C,M,W,J,ue,he,xe){var _e=M[ue].Yb[W];for(W=0;16>ue;++ue){if(!Oe(C,_e[W+0]))return ue;for(;!Oe(C,_e[W+1]);)if(_e=M[++ue].Yb[0],W=0,ue==16)return 16;var Se=M[ue+1].Yb;if(Oe(C,_e[W+2])){var Le=C,Ye=0;if(Oe(Le,(Fe=_e)[(vt=W)+3]))if(Oe(Le,Fe[vt+6])){for(_e=0,vt=2*(Ye=Oe(Le,Fe[vt+8]))+(Fe=Oe(Le,Fe[vt+9+Ye])),Ye=0,Fe=khe[vt];Fe[_e];++_e)Ye+=Ye+Oe(Le,Fe[_e]);Ye+=3+(8<<vt)}else Oe(Le,Fe[vt+7])?(Ye=7+2*Oe(Le,165),Ye+=Oe(Le,145)):Ye=5+Oe(Le,159);else Ye=Oe(Le,Fe[vt+4])?3+Oe(Le,Fe[vt+5]):2;_e=Se[2]}else Ye=1,_e=Se[1];Se=xe+Ihe[ue],0>(Le=C).b&&je(Le);var vt,Fe=Le.b,Je=(vt=Le.Ca>>1)-(Le.I>>Fe)>>31;--Le.b,Le.Ca+=Je,Le.Ca|=1,Le.I-=(vt+1&Je)<<Fe,he[Se]=((Ye^Je)-Je)*J[(0<ue)+0]}return 16}function Br(C){var M=C.rb[C.sb-1];M.la=0,M.Na=0,a(C.zc,0,0,C.zc.length),C.ja=0}function ja(C,M,W,J,ue){ue=C[M+W+32*J]+(ue>>3),C[M+W+32*J]=-256&ue?0>ue?0:255:ue}function Bi(C,M,W,J,ue,he){ja(C,M,0,W,J+ue),ja(C,M,1,W,J+he),ja(C,M,2,W,J-he),ja(C,M,3,W,J-ue)}function Pn(C){return(20091*C>>16)+C}function Dn(C,M,W,J){var ue,he=0,xe=s(16);for(ue=0;4>ue;++ue){var _e=C[M+0]+C[M+8],Se=C[M+0]-C[M+8],Le=(35468*C[M+4]>>16)-Pn(C[M+12]),Ye=Pn(C[M+4])+(35468*C[M+12]>>16);xe[he+0]=_e+Ye,xe[he+1]=Se+Le,xe[he+2]=Se-Le,xe[he+3]=_e-Ye,he+=4,M++}for(ue=he=0;4>ue;++ue)_e=(C=xe[he+0]+4)+xe[he+8],Se=C-xe[he+8],Le=(35468*xe[he+4]>>16)-Pn(xe[he+12]),ja(W,J,0,0,_e+(Ye=Pn(xe[he+4])+(35468*xe[he+12]>>16))),ja(W,J,1,0,Se+Le),ja(W,J,2,0,Se-Le),ja(W,J,3,0,_e-Ye),he++,J+=32}function za(C,M,W,J){var ue=C[M+0]+4,he=35468*C[M+4]>>16,xe=Pn(C[M+4]),_e=35468*C[M+1]>>16;Bi(W,J,0,ue+xe,C=Pn(C[M+1]),_e),Bi(W,J,1,ue+he,C,_e),Bi(W,J,2,ue-he,C,_e),Bi(W,J,3,ue-xe,C,_e)}function ct(C,M,W,J,ue){Dn(C,M,W,J),ue&&Dn(C,M+16,W,J+4)}function Ie(C,M,W,J){We(C,M+0,W,J,1),We(C,M+32,W,J+128,1)}function Ar(C,M,W,J){var ue;for(C=C[M+0]+4,ue=0;4>ue;++ue)for(M=0;4>M;++M)ja(W,J,M,ue,C)}function Ta(C,M,W,J){C[M+0]&&Bt(C,M+0,W,J),C[M+16]&&Bt(C,M+16,W,J+4),C[M+32]&&Bt(C,M+32,W,J+128),C[M+48]&&Bt(C,M+48,W,J+128+4)}function Va(C,M,W,J){var ue,he=s(16);for(ue=0;4>ue;++ue){var xe=C[M+0+ue]+C[M+12+ue],_e=C[M+4+ue]+C[M+8+ue],Se=C[M+4+ue]-C[M+8+ue],Le=C[M+0+ue]-C[M+12+ue];he[0+ue]=xe+_e,he[8+ue]=xe-_e,he[4+ue]=Le+Se,he[12+ue]=Le-Se}for(ue=0;4>ue;++ue)xe=(C=he[0+4*ue]+3)+he[3+4*ue],_e=he[1+4*ue]+he[2+4*ue],Se=he[1+4*ue]-he[2+4*ue],Le=C-he[3+4*ue],W[J+0]=xe+_e>>3,W[J+16]=Le+Se>>3,W[J+32]=xe-_e>>3,W[J+48]=Le-Se>>3,J+=64}function Us(C,M,W){var J,ue=M-32,he=sc,xe=255-C[ue-1];for(J=0;J<W;++J){var _e,Se=he,Le=xe+C[M-1];for(_e=0;_e<W;++_e)C[M+_e]=Se[Le+C[ue+_e]];M+=32}}function Xo(C,M){Us(C,M,4)}function ht(C,M){Us(C,M,8)}function Ot(C,M){Us(C,M,16)}function br(C,M){var W;for(W=0;16>W;++W)n(C,M+32*W,C,M-32,16)}function Fn(C,M){var W;for(W=16;0<W;--W)a(C,M,C[M-1],16),M+=32}function mn(C,M,W){var J;for(J=0;16>J;++J)a(M,W+32*J,C,16)}function Nn(C,M){var W,J=16;for(W=0;16>W;++W)J+=C[M-1+32*W]+C[M+W-32];mn(J>>5,C,M)}function ei(C,M){var W,J=8;for(W=0;16>W;++W)J+=C[M-1+32*W];mn(J>>4,C,M)}function gs(C,M){var W,J=8;for(W=0;16>W;++W)J+=C[M+W-32];mn(J>>4,C,M)}function Ui(C,M){mn(128,C,M)}function jr(C,M,W){return C+2*M+W+2>>2}function Yo(C,M){var W,J=M-32;for(J=new Uint8Array([jr(C[J-1],C[J+0],C[J+1]),jr(C[J+0],C[J+1],C[J+2]),jr(C[J+1],C[J+2],C[J+3]),jr(C[J+2],C[J+3],C[J+4])]),W=0;4>W;++W)n(C,M+32*W,J,0,J.length)}function zi(C,M){var W=C[M-1],J=C[M-1+32],ue=C[M-1+64],he=C[M-1+96];qe(C,M+0,16843009*jr(C[M-1-32],W,J)),qe(C,M+32,16843009*jr(W,J,ue)),qe(C,M+64,16843009*jr(J,ue,he)),qe(C,M+96,16843009*jr(ue,he,he))}function qr(C,M){var W,J=4;for(W=0;4>W;++W)J+=C[M+W-32]+C[M-1+32*W];for(J>>=3,W=0;4>W;++W)a(C,M+32*W,J,4)}function Pu(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1-32],xe=C[M+0-32],_e=C[M+1-32],Se=C[M+2-32],Le=C[M+3-32];C[M+0+96]=jr(J,ue,C[M-1+96]),C[M+1+96]=C[M+0+64]=jr(W,J,ue),C[M+2+96]=C[M+1+64]=C[M+0+32]=jr(he,W,J),C[M+3+96]=C[M+2+64]=C[M+1+32]=C[M+0+0]=jr(xe,he,W),C[M+3+64]=C[M+2+32]=C[M+1+0]=jr(_e,xe,he),C[M+3+32]=C[M+2+0]=jr(Se,_e,xe),C[M+3+0]=jr(Le,Se,_e)}function Gr(C,M){var W=C[M+1-32],J=C[M+2-32],ue=C[M+3-32],he=C[M+4-32],xe=C[M+5-32],_e=C[M+6-32],Se=C[M+7-32];C[M+0+0]=jr(C[M+0-32],W,J),C[M+1+0]=C[M+0+32]=jr(W,J,ue),C[M+2+0]=C[M+1+32]=C[M+0+64]=jr(J,ue,he),C[M+3+0]=C[M+2+32]=C[M+1+64]=C[M+0+96]=jr(ue,he,xe),C[M+3+32]=C[M+2+64]=C[M+1+96]=jr(he,xe,_e),C[M+3+64]=C[M+2+96]=jr(xe,_e,Se),C[M+3+96]=jr(_e,Se,Se)}function ua(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1-32],xe=C[M+0-32],_e=C[M+1-32],Se=C[M+2-32],Le=C[M+3-32];C[M+0+0]=C[M+1+64]=he+xe+1>>1,C[M+1+0]=C[M+2+64]=xe+_e+1>>1,C[M+2+0]=C[M+3+64]=_e+Se+1>>1,C[M+3+0]=Se+Le+1>>1,C[M+0+96]=jr(ue,J,W),C[M+0+64]=jr(J,W,he),C[M+0+32]=C[M+1+96]=jr(W,he,xe),C[M+1+32]=C[M+2+96]=jr(he,xe,_e),C[M+2+32]=C[M+3+96]=jr(xe,_e,Se),C[M+3+32]=jr(_e,Se,Le)}function rf(C,M){var W=C[M+0-32],J=C[M+1-32],ue=C[M+2-32],he=C[M+3-32],xe=C[M+4-32],_e=C[M+5-32],Se=C[M+6-32],Le=C[M+7-32];C[M+0+0]=W+J+1>>1,C[M+1+0]=C[M+0+64]=J+ue+1>>1,C[M+2+0]=C[M+1+64]=ue+he+1>>1,C[M+3+0]=C[M+2+64]=he+xe+1>>1,C[M+0+32]=jr(W,J,ue),C[M+1+32]=C[M+0+96]=jr(J,ue,he),C[M+2+32]=C[M+1+96]=jr(ue,he,xe),C[M+3+32]=C[M+2+96]=jr(he,xe,_e),C[M+3+64]=jr(xe,_e,Se),C[M+3+96]=jr(_e,Se,Le)}function da(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1+96];C[M+0+0]=W+J+1>>1,C[M+2+0]=C[M+0+32]=J+ue+1>>1,C[M+2+32]=C[M+0+64]=ue+he+1>>1,C[M+1+0]=jr(W,J,ue),C[M+3+0]=C[M+1+32]=jr(J,ue,he),C[M+3+32]=C[M+1+64]=jr(ue,he,he),C[M+3+64]=C[M+2+64]=C[M+0+96]=C[M+1+96]=C[M+2+96]=C[M+3+96]=he}function Du(C,M){var W=C[M-1+0],J=C[M-1+32],ue=C[M-1+64],he=C[M-1+96],xe=C[M-1-32],_e=C[M+0-32],Se=C[M+1-32],Le=C[M+2-32];C[M+0+0]=C[M+2+32]=W+xe+1>>1,C[M+0+32]=C[M+2+64]=J+W+1>>1,C[M+0+64]=C[M+2+96]=ue+J+1>>1,C[M+0+96]=he+ue+1>>1,C[M+3+0]=jr(_e,Se,Le),C[M+2+0]=jr(xe,_e,Se),C[M+1+0]=C[M+3+32]=jr(W,xe,_e),C[M+1+32]=C[M+3+64]=jr(J,W,xe),C[M+1+64]=C[M+3+96]=jr(ue,J,W),C[M+1+96]=jr(he,ue,J)}function Zo(C,M){var W;for(W=0;8>W;++W)n(C,M+32*W,C,M-32,8)}function Hc(C,M){var W;for(W=0;8>W;++W)a(C,M,C[M-1],8),M+=32}function Qo(C,M,W){var J;for(J=0;8>J;++J)a(M,W+32*J,C,8)}function Jo(C,M){var W,J=8;for(W=0;8>W;++W)J+=C[M+W-32]+C[M-1+32*W];Qo(J>>4,C,M)}function El(C,M){var W,J=4;for(W=0;8>W;++W)J+=C[M+W-32];Qo(J>>3,C,M)}function so(C,M){var W,J=4;for(W=0;8>W;++W)J+=C[M-1+32*W];Qo(J>>3,C,M)}function Al(C,M){Qo(128,C,M)}function el(C,M,W){var J=C[M-W],ue=C[M+0],he=3*(ue-J)+v6[1020+C[M-2*W]-C[M+W]],xe=c5[112+(he+4>>3)];C[M-W]=sc[255+J+c5[112+(he+3>>3)]],C[M+0]=sc[255+ue-xe]}function Ca(C,M,W,J){var ue=C[M+0],he=C[M+W];return Wc[255+C[M-2*W]-C[M-W]]>J||Wc[255+he-ue]>J}function Mu(C,M,W,J){return 4*Wc[255+C[M-W]-C[M+0]]+Wc[255+C[M-2*W]-C[M+W]]<=J}function tc(C,M,W,J,ue){var he=C[M-3*W],xe=C[M-2*W],_e=C[M-W],Se=C[M+0],Le=C[M+W],Ye=C[M+2*W],vt=C[M+3*W];return 4*Wc[255+_e-Se]+Wc[255+xe-Le]>J?0:Wc[255+C[M-4*W]-he]<=ue&&Wc[255+he-xe]<=ue&&Wc[255+xe-_e]<=ue&&Wc[255+vt-Ye]<=ue&&Wc[255+Ye-Le]<=ue&&Wc[255+Le-Se]<=ue}function rc(C,M,W,J){var ue=2*J+1;for(J=0;16>J;++J)Mu(C,M+J,W,ue)&&el(C,M+J,W)}function qc(C,M,W,J){var ue=2*J+1;for(J=0;16>J;++J)Mu(C,M+J*W,1,ue)&&el(C,M+J*W,1)}function Lu(C,M,W,J){var ue;for(ue=3;0<ue;--ue)rc(C,M+=4*W,W,J)}function Oh(C,M,W,J){var ue;for(ue=3;0<ue;--ue)qc(C,M+=4,W,J)}function En(C,M,W,J,ue,he,xe,_e){for(he=2*he+1;0<ue--;){if(tc(C,M,W,he,xe))if(Ca(C,M,W,_e))el(C,M,W);else{var Se=C,Le=M,Ye=W,vt=Se[Le-2*Ye],Fe=Se[Le-Ye],Je=Se[Le+0],ut=Se[Le+Ye],Dt=Se[Le+2*Ye],pt=27*(Gt=v6[1020+3*(Je-Fe)+v6[1020+vt-ut]])+63>>7,Lt=18*Gt+63>>7,Gt=9*Gt+63>>7;Se[Le-3*Ye]=sc[255+Se[Le-3*Ye]+Gt],Se[Le-2*Ye]=sc[255+vt+Lt],Se[Le-Ye]=sc[255+Fe+pt],Se[Le+0]=sc[255+Je-pt],Se[Le+Ye]=sc[255+ut-Lt],Se[Le+2*Ye]=sc[255+Dt-Gt]}M+=J}}function Vi(C,M,W,J,ue,he,xe,_e){for(he=2*he+1;0<ue--;){if(tc(C,M,W,he,xe))if(Ca(C,M,W,_e))el(C,M,W);else{var Se=C,Le=M,Ye=W,vt=Se[Le-Ye],Fe=Se[Le+0],Je=Se[Le+Ye],ut=c5[112+(4+(Dt=3*(Fe-vt))>>3)],Dt=c5[112+(Dt+3>>3)],pt=ut+1>>1;Se[Le-2*Ye]=sc[255+Se[Le-2*Ye]+pt],Se[Le-Ye]=sc[255+vt+Dt],Se[Le+0]=sc[255+Fe-ut],Se[Le+Ye]=sc[255+Je-pt]}M+=J}}function Gc(C,M,W,J,ue,he){En(C,M,W,1,16,J,ue,he)}function ko(C,M,W,J,ue,he){En(C,M,1,W,16,J,ue,he)}function nc(C,M,W,J,ue,he){var xe;for(xe=3;0<xe;--xe)Vi(C,M+=4*W,W,1,16,J,ue,he)}function Et(C,M,W,J,ue,he){var xe;for(xe=3;0<xe;--xe)Vi(C,M+=4,1,W,16,J,ue,he)}function U(C,M,W,J,ue,he,xe,_e){En(C,M,ue,1,8,he,xe,_e),En(W,J,ue,1,8,he,xe,_e)}function ie(C,M,W,J,ue,he,xe,_e){En(C,M,1,ue,8,he,xe,_e),En(W,J,1,ue,8,he,xe,_e)}function De(C,M,W,J,ue,he,xe,_e){Vi(C,M+4*ue,ue,1,8,he,xe,_e),Vi(W,J+4*ue,ue,1,8,he,xe,_e)}function He(C,M,W,J,ue,he,xe,_e){Vi(C,M+4,1,ue,8,he,xe,_e),Vi(W,J+4,1,ue,8,he,xe,_e)}function tt(){this.ba=new St,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Pt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Jt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Sr(){this.ua=0,this.Wa=new mt,this.vb=new mt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Z,this.yc=new F}function xr(){this.xb=this.a=0,this.l=new Wa,this.ca=new St,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Sr,this.ab=0,this.gc=o(4,Jt),this.Oc=0}function Kr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yr(C,M,W,J,ue,he,xe){for(C=C==null?0:C[M+0],M=0;M<xe;++M)ue[he+M]=C+W[J+M]&255,C=ue[he+M]}function In(C,M,W,J,ue,he,xe){var _e;if(C==null)yr(null,null,W,J,ue,he,xe);else for(_e=0;_e<xe;++_e)ue[he+_e]=C[M+_e]+W[J+_e]&255}function qn(C,M,W,J,ue,he,xe){if(C==null)yr(null,null,W,J,ue,he,xe);else{var _e,Se=C[M+0],Le=Se,Ye=Se;for(_e=0;_e<xe;++_e)Le=Ye+(Se=C[M+_e])-Le,Ye=W[J+_e]+(-256&Le?0>Le?0:255:Le)&255,Le=Se,ue[he+_e]=Ye}}function Xr(C,M,W,J){var ue=M.width,he=M.o;if(e(C!=null&&M!=null),0>W||0>=J||W+J>he)return null;if(!C.Cc){if(C.ga==null){var xe;if(C.ga=new Kr,(xe=C.ga==null)||(xe=M.width*M.o,e(C.Gb.length==0),C.Gb=s(xe),C.Uc=0,C.Gb==null?xe=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,xe=1),xe=!xe),!xe){xe=C.ga;var _e=C.Fa,Se=C.P,Le=C.qc,Ye=C.mb,vt=C.nb,Fe=Se+1,Je=Le-1,ut=xe.l;if(e(_e!=null&&Ye!=null&&M!=null),Ph[0]=null,Ph[1]=yr,Ph[2]=In,Ph[3]=qn,xe.ca=Ye,xe.tb=vt,xe.c=M.width,xe.i=M.height,e(0<xe.c&&0<xe.i),1>=Le)M=0;else if(xe.$a=3&_e[Se+0],xe.Z=_e[Se+0]>>2&3,xe.Lc=_e[Se+0]>>4&3,Se=_e[Se+0]>>6&3,0>xe.$a||1<xe.$a||4<=xe.Z||1<xe.Lc||Se)M=0;else if(ut.put=fr,ut.ac=jn,ut.bc=dn,ut.ma=xe,ut.width=M.width,ut.height=M.height,ut.Da=M.Da,ut.v=M.v,ut.va=M.va,ut.j=M.j,ut.o=M.o,xe.$a)e:{e(xe.$a==1),M=rt();t:for(;;){if(M==null){M=0;break e}if(e(xe!=null),xe.mc=M,M.c=xe.c,M.i=xe.i,M.l=xe.l,M.l.ma=xe,M.l.width=xe.c,M.l.height=xe.i,M.a=0,me(M.m,_e,Fe,Je),!Ae(xe.c,xe.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Ee(M.s)?(xe.ic=1,_e=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(_e),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(xe.ic=0,M=Ge(M,xe.c)),!M))break t;M=1;break e}xe.mc=null,M=0}else M=Je>=xe.c*xe.i;xe=!M}if(xe)return null;C.ga.Lc!=1?C.Ga=0:J=he-W}e(C.ga!=null),e(W+J<=he);e:{if(M=(_e=C.ga).c,he=_e.l.o,_e.$a==0){if(Fe=C.rc,Je=C.Vc,ut=C.Fa,Se=C.P+1+W*M,Le=C.mb,Ye=C.nb+W*M,e(Se<=C.P+C.qc),_e.Z!=0)for(e(Ph[_e.Z]!=null),xe=0;xe<J;++xe)Ph[_e.Z](Fe,Je,ut,Se,Le,Ye,M),Fe=Le,Je=Ye,Ye+=M,Se+=M;else for(xe=0;xe<J;++xe)n(Le,Ye,ut,Se,M),Fe=Le,Je=Ye,Ye+=M,Se+=M;C.rc=Fe,C.Vc=Je}else{if(e(_e.mc!=null),M=W+J,e((xe=_e.mc)!=null),e(M<=xe.i),xe.C>=M)M=1;else if(_e.ic||nt(),_e.ic){_e=xe.V,Fe=xe.Ba,Je=xe.c;var Dt=xe.i,pt=(ut=1,Se=xe.$/Je,Le=xe.$%Je,Ye=xe.m,vt=xe.s,xe.$),Lt=Je*Dt,Gt=Je*M,lr=vt.wc,nr=pt<Gt?de(vt,Le,Se):null;e(pt<=Lt),e(M<=Dt),e(Ee(vt));t:for(;;){for(;!Ye.h&&pt<Gt;){if(Le&lr||(nr=de(vt,Le,Se)),e(nr!=null),Ce(Ye),256>(Dt=Zr(nr.G[0],nr.H[0],Ye)))_e[Fe+pt]=Dt,++pt,++Le>=Je&&(Le=0,++Se<=M&&!(Se%16)&&Pe(xe,Se));else{if(!(280>Dt)){ut=0;break t}Dt=on(Dt-256,Ye);var Ur,Ir=Zr(nr.G[4],nr.H[4],Ye);if(Ce(Ye),!(pt>=(Ir=_n(Je,Ir=on(Ir,Ye)))&&Lt-pt>=Dt)){ut=0;break t}for(Ur=0;Ur<Dt;++Ur)_e[Fe+pt+Ur]=_e[Fe+pt+Ur-Ir];for(pt+=Dt,Le+=Dt;Le>=Je;)Le-=Je,++Se<=M&&!(Se%16)&&Pe(xe,Se);pt<Gt&&Le&lr&&(nr=de(vt,Le,Se))}e(Ye.h==re(Ye))}Pe(xe,Se>M?M:Se);break t}!ut||Ye.h&&pt<Lt?(ut=0,xe.a=Ye.h?5:3):xe.$=pt,M=ut}else M=lt(xe,xe.V,xe.Ba,xe.c,xe.i,M,dt);if(!M){J=0;break e}}W+J>=he&&(C.Cc=1),J=1}if(!J)return null;if(C.Cc&&((J=C.ga)!=null&&(J.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+W*ue}function j(C,M,W,J,ue,he){for(;0<ue--;){var xe,_e=C,Se=M+(W?1:0),Le=C,Ye=M+(W?0:3);for(xe=0;xe<J;++xe){var vt=Le[Ye+4*xe];vt!=255&&(vt*=32897,_e[Se+4*xe+0]=_e[Se+4*xe+0]*vt>>23,_e[Se+4*xe+1]=_e[Se+4*xe+1]*vt>>23,_e[Se+4*xe+2]=_e[Se+4*xe+2]*vt>>23)}M+=he}}function K(C,M,W,J,ue){for(;0<J--;){var he;for(he=0;he<W;++he){var xe=C[M+2*he+0],_e=15&(Le=C[M+2*he+1]),Se=4369*_e,Le=(240&Le|Le>>4)*Se>>16;C[M+2*he+0]=(240&xe|xe>>4)*Se>>16&240|(15&xe|xe<<4)*Se>>16>>4&15,C[M+2*he+1]=240&Le|_e}M+=ue}}function te(C,M,W,J,ue,he,xe,_e){var Se,Le,Ye=255;for(Le=0;Le<ue;++Le){for(Se=0;Se<J;++Se){var vt=C[M+Se];he[xe+4*Se]=vt,Ye&=vt}M+=W,xe+=_e}return Ye!=255}function ye(C,M,W,J,ue){var he;for(he=0;he<ue;++he)W[J+he]=C[M+he]>>8}function nt(){Am=j,IL=K,OL=te,RL=ye}function xt(C,M,W){I[C]=function(J,ue,he,xe,_e,Se,Le,Ye,vt,Fe,Je,ut,Dt,pt,Lt,Gt,lr){var nr,Ur=lr-1>>1,Ir=_e[Se+0]|Le[Ye+0]<<16,An=vt[Fe+0]|Je[ut+0]<<16;e(J!=null);var Dr=3*Ir+An+131074>>2;for(M(J[ue+0],255&Dr,Dr>>16,Dt,pt),he!=null&&(Dr=3*An+Ir+131074>>2,M(he[xe+0],255&Dr,Dr>>16,Lt,Gt)),nr=1;nr<=Ur;++nr){var $n=_e[Se+nr]|Le[Ye+nr]<<16,Ai=vt[Fe+nr]|Je[ut+nr]<<16,Sn=Ir+$n+An+Ai+524296,Mr=Sn+2*($n+An)>>3;Dr=Mr+Ir>>1,Ir=(Sn=Sn+2*(Ir+Ai)>>3)+$n>>1,M(J[ue+2*nr-1],255&Dr,Dr>>16,Dt,pt+(2*nr-1)*W),M(J[ue+2*nr-0],255&Ir,Ir>>16,Dt,pt+(2*nr-0)*W),he!=null&&(Dr=Sn+An>>1,Ir=Mr+Ai>>1,M(he[xe+2*nr-1],255&Dr,Dr>>16,Lt,Gt+(2*nr-1)*W),M(he[xe+2*nr+0],255&Ir,Ir>>16,Lt,Gt+(2*nr+0)*W)),Ir=$n,An=Ai}1&lr||(Dr=3*Ir+An+131074>>2,M(J[ue+lr-1],255&Dr,Dr>>16,Dt,pt+(lr-1)*W),he!=null&&(Dr=3*An+Ir+131074>>2,M(he[xe+lr-1],255&Dr,Dr>>16,Lt,Gt+(lr-1)*W)))}}function or(){Kc[u5]=Lhe,Kc[d5]=HL,Kc[BL]=Fhe,Kc[f5]=qL,Kc[h5]=GL,Kc[b6]=WL,Kc[UL]=Bhe,Kc[y6]=HL,Kc[w6]=qL,Kc[m5]=GL,Kc[_6]=WL}function rn(C){return C&-16384?0>C?0:255:C>>Uhe}function fa(C,M){return rn((19077*C>>8)+(26149*M>>8)-14234)}function Tn(C,M,W){return rn((19077*C>>8)-(6419*M>>8)-(13320*W>>8)+8708)}function ma(C,M){return rn((19077*C>>8)+(33050*M>>8)-17685)}function zs(C,M,W,J,ue){J[ue+0]=fa(C,W),J[ue+1]=Tn(C,M,W),J[ue+2]=ma(C,M)}function io(C,M,W,J,ue){J[ue+0]=ma(C,M),J[ue+1]=Tn(C,M,W),J[ue+2]=fa(C,W)}function Qn(C,M,W,J,ue){var he=Tn(C,M,W);M=he<<3&224|ma(C,M)>>3,J[ue+0]=248&fa(C,W)|he>>5,J[ue+1]=M}function ti(C,M,W,J,ue){var he=240&ma(C,M)|15;J[ue+0]=240&fa(C,W)|Tn(C,M,W)>>4,J[ue+1]=he}function Sl(C,M,W,J,ue){J[ue+0]=255,zs(C,M,W,J,ue+1)}function tl(C,M,W,J,ue){io(C,M,W,J,ue),J[ue+3]=255}function _m(C,M,W,J,ue){zs(C,M,W,J,ue),J[ue+3]=255}function na(C,M){return 0>C?0:C>M?M:C}function jl(C,M,W){I[C]=function(J,ue,he,xe,_e,Se,Le,Ye,vt){for(var Fe=Ye+(-2&vt)*W;Ye!=Fe;)M(J[ue+0],he[xe+0],_e[Se+0],Le,Ye),M(J[ue+1],he[xe+0],_e[Se+0],Le,Ye+W),ue+=2,++xe,++Se,Ye+=2*W;1&vt&&M(J[ue+0],he[xe+0],_e[Se+0],Le,Ye)}}function Ni(C,M,W){return W==0?C==0?M==0?6:5:M==0?4:0:W}function Nm(C,M,W,J,ue){switch(C>>>30){case 3:We(M,W,J,ue,0);break;case 2:ot(M,W,J,ue);break;case 1:Bt(M,W,J,ue)}}function xs(C,M){var W,J,ue=M.M,he=M.Nb,xe=C.oc,_e=C.pc+40,Se=C.oc,Le=C.pc+584,Ye=C.oc,vt=C.pc+600;for(W=0;16>W;++W)xe[_e+32*W-1]=129;for(W=0;8>W;++W)Se[Le+32*W-1]=129,Ye[vt+32*W-1]=129;for(0<ue?xe[_e-1-32]=Se[Le-1-32]=Ye[vt-1-32]=129:(a(xe,_e-32-1,127,21),a(Se,Le-32-1,127,9),a(Ye,vt-32-1,127,9)),J=0;J<C.za;++J){var Fe=M.ya[M.aa+J];if(0<J){for(W=-1;16>W;++W)n(xe,_e+32*W-4,xe,_e+32*W+12,4);for(W=-1;8>W;++W)n(Se,Le+32*W-4,Se,Le+32*W+4,4),n(Ye,vt+32*W-4,Ye,vt+32*W+4,4)}var Je=C.Gd,ut=C.Hd+J,Dt=Fe.ad,pt=Fe.Hc;if(0<ue&&(n(xe,_e-32,Je[ut].y,0,16),n(Se,Le-32,Je[ut].f,0,8),n(Ye,vt-32,Je[ut].ea,0,8)),Fe.Za){var Lt=xe,Gt=_e-32+16;for(0<ue&&(J>=C.za-1?a(Lt,Gt,Je[ut].y[15],4):n(Lt,Gt,Je[ut+1].y,0,4)),W=0;4>W;W++)Lt[Gt+128+W]=Lt[Gt+256+W]=Lt[Gt+384+W]=Lt[Gt+0+W];for(W=0;16>W;++W,pt<<=2)Lt=xe,Gt=_e+XL[W],Bu[Fe.Ob[W]](Lt,Gt),Nm(pt,Dt,16*+W,Lt,Gt)}else if(Lt=Ni(J,ue,Fe.Ob[0]),Rh[Lt](xe,_e),pt!=0)for(W=0;16>W;++W,pt<<=2)Nm(pt,Dt,16*+W,xe,_e+XL[W]);for(W=Fe.Gc,Lt=Ni(J,ue,Fe.Dd),lf[Lt](Se,Le),lf[Lt](Ye,vt),pt=Dt,Lt=Se,Gt=Le,255&(Fe=0|W)&&(170&Fe?Nt(pt,256,Lt,Gt):Kt(pt,256,Lt,Gt)),Fe=Ye,pt=vt,255&(W>>=8)&&(170&W?Nt(Dt,320,Fe,pt):Kt(Dt,320,Fe,pt)),ue<C.Ub-1&&(n(Je[ut].y,0,xe,_e+480,16),n(Je[ut].f,0,Se,Le+224,8),n(Je[ut].ea,0,Ye,vt+224,8)),W=8*he*C.B,Je=C.sa,ut=C.ta+16*J+16*he*C.R,Dt=C.qa,Fe=C.ra+8*J+W,pt=C.Ha,Lt=C.Ia+8*J+W,W=0;16>W;++W)n(Je,ut+W*C.R,xe,_e+32*W,16);for(W=0;8>W;++W)n(Dt,Fe+W*C.B,Se,Le+32*W,8),n(pt,Lt+W*C.B,Ye,vt+32*W,8)}}function nf(C,M,W,J,ue,he,xe,_e,Se){var Le=[0],Ye=[0],vt=0,Fe=Se!=null?Se.kd:0,Je=Se??new Pt;if(C==null||12>W)return 7;Je.data=C,Je.w=M,Je.ha=W,M=[M],W=[W],Je.gb=[Je.gb];e:{var ut=M,Dt=W,pt=Je.gb;if(e(C!=null),e(Dt!=null),e(pt!=null),pt[0]=0,12<=Dt[0]&&!r(C,ut[0],"RIFF")){if(r(C,ut[0]+8,"WEBP")){pt=3;break e}var Lt=Be(C,ut[0]+4);if(12>Lt||4294967286<Lt){pt=3;break e}if(Fe&&Lt>Dt[0]-8){pt=7;break e}pt[0]=Lt,ut[0]+=12,Dt[0]-=12}pt=0}if(pt!=0)return pt;for(Lt=0<Je.gb[0],W=W[0];;){e:{var Gt=C;Dt=M,pt=W;var lr=Le,nr=Ye,Ur=ut=[0];if((Dr=vt=[vt])[0]=0,8>pt[0])pt=7;else{if(!r(Gt,Dt[0],"VP8X")){if(Be(Gt,Dt[0]+4)!=10){pt=3;break e}if(18>pt[0]){pt=7;break e}var Ir=Be(Gt,Dt[0]+8),An=1+Me(Gt,Dt[0]+12);if(2147483648<=An*(Gt=1+Me(Gt,Dt[0]+15))){pt=3;break e}Ur!=null&&(Ur[0]=Ir),lr!=null&&(lr[0]=An),nr!=null&&(nr[0]=Gt),Dt[0]+=18,pt[0]-=18,Dr[0]=1}pt=0}}if(vt=vt[0],ut=ut[0],pt!=0)return pt;if(Dt=!!(2&ut),!Lt&&vt)return 3;if(he!=null&&(he[0]=!!(16&ut)),xe!=null&&(xe[0]=Dt),_e!=null&&(_e[0]=0),xe=Le[0],ut=Ye[0],vt&&Dt&&Se==null){pt=0;break}if(4>W){pt=7;break}if(Lt&&vt||!Lt&&!vt&&!r(C,M[0],"ALPH")){W=[W],Je.na=[Je.na],Je.P=[Je.P],Je.Sa=[Je.Sa];e:{Ir=C,pt=M,Lt=W;var Dr=Je.gb;lr=Je.na,nr=Je.P,Ur=Je.Sa,An=22,e(Ir!=null),e(Lt!=null),Gt=pt[0];var $n=Lt[0];for(e(lr!=null),e(Ur!=null),lr[0]=null,nr[0]=null,Ur[0]=0;;){if(pt[0]=Gt,Lt[0]=$n,8>$n){pt=7;break e}var Ai=Be(Ir,Gt+4);if(4294967286<Ai){pt=3;break e}var Sn=8+Ai+1&-2;if(An+=Sn,0<Dr&&An>Dr){pt=3;break e}if(!r(Ir,Gt,"VP8 ")||!r(Ir,Gt,"VP8L")){pt=0;break e}if($n[0]<Sn){pt=7;break e}r(Ir,Gt,"ALPH")||(lr[0]=Ir,nr[0]=Gt+8,Ur[0]=Ai),Gt+=Sn,$n-=Sn}}if(W=W[0],Je.na=Je.na[0],Je.P=Je.P[0],Je.Sa=Je.Sa[0],pt!=0)break}W=[W],Je.Ja=[Je.Ja],Je.xa=[Je.xa];e:if(Dr=C,pt=M,Lt=W,lr=Je.gb[0],nr=Je.Ja,Ur=Je.xa,Ir=pt[0],Gt=!r(Dr,Ir,"VP8 "),An=!r(Dr,Ir,"VP8L"),e(Dr!=null),e(Lt!=null),e(nr!=null),e(Ur!=null),8>Lt[0])pt=7;else{if(Gt||An){if(Dr=Be(Dr,Ir+4),12<=lr&&Dr>lr-12){pt=3;break e}if(Fe&&Dr>Lt[0]-8){pt=7;break e}nr[0]=Dr,pt[0]+=8,Lt[0]-=8,Ur[0]=An}else Ur[0]=5<=Lt[0]&&Dr[Ir+0]==47&&!(Dr[Ir+4]>>5),nr[0]=Lt[0];pt=0}if(W=W[0],Je.Ja=Je.Ja[0],Je.xa=Je.xa[0],M=M[0],pt!=0)break;if(4294967286<Je.Ja)return 3;if(_e==null||Dt||(_e[0]=Je.xa?2:1),xe=[xe],ut=[ut],Je.xa){if(5>W){pt=7;break}_e=xe,Fe=ut,Dt=he,C==null||5>W?C=0:5<=W&&C[M+0]==47&&!(C[M+4]>>5)?(Lt=[0],Dr=[0],lr=[0],me(nr=new Y,C,M,W),Vn(nr,Lt,Dr,lr)?(_e!=null&&(_e[0]=Lt[0]),Fe!=null&&(Fe[0]=Dr[0]),Dt!=null&&(Dt[0]=lr[0]),C=1):C=0):C=0}else{if(10>W){pt=7;break}_e=ut,C==null||10>W||!Xn(C,M+3,W-3)?C=0:(Fe=C[M+0]|C[M+1]<<8|C[M+2]<<16,Dt=16383&(C[M+7]<<8|C[M+6]),C=16383&(C[M+9]<<8|C[M+8]),1&Fe||3<(Fe>>1&7)||!(Fe>>4&1)||Fe>>5>=Je.Ja||!Dt||!C?C=0:(xe&&(xe[0]=Dt),_e&&(_e[0]=C),C=1))}if(!C||(xe=xe[0],ut=ut[0],vt&&(Le[0]!=xe||Ye[0]!=ut)))return 3;Se!=null&&(Se[0]=Je,Se.offset=M-Se.w,e(4294967286>M-Se.w),e(Se.offset==Se.ha-W));break}return pt==0||pt==7&&vt&&Se==null?(he!=null&&(he[0]|=Je.na!=null&&0<Je.na.length),J!=null&&(J[0]=xe),ue!=null&&(ue[0]=ut),0):pt}function af(C,M,W){var J=M.width,ue=M.height,he=0,xe=0,_e=J,Se=ue;if(M.Da=C!=null&&0<C.Da,M.Da&&(_e=C.cd,Se=C.bd,he=C.v,xe=C.j,11>W||(he&=-2,xe&=-2),0>he||0>xe||0>=_e||0>=Se||he+_e>J||xe+Se>ue))return 0;if(M.v=he,M.j=xe,M.va=he+_e,M.o=xe+Se,M.U=_e,M.T=Se,M.da=C!=null&&0<C.da,M.da){if(!Ut(_e,Se,W=[C.ib],he=[C.hb]))return 0;M.ib=W[0],M.hb=he[0]}return M.ob=C!=null&&C.ob,M.Kb=C==null||!C.Sd,M.da&&(M.ob=M.ib<3*J/4&&M.hb<3*ue/4,M.Kb=0),1}function Em(C){if(C==null)return 2;if(11>C.S){var M=C.f.RGBA;M.fb+=(C.height-1)*M.A,M.A=-M.A}else M=C.f.kb,C=C.height,M.O+=(C-1)*M.fa,M.fa=-M.fa,M.N+=(C-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(C-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(C-1)*M.lb,M.lb=-M.lb);return 0}function Fu(C,M,W,J){if(J==null||0>=C||0>=M)return 2;if(W!=null){if(W.Da){var ue=W.cd,he=W.bd,xe=-2&W.v,_e=-2&W.j;if(0>xe||0>_e||0>=ue||0>=he||xe+ue>C||_e+he>M)return 2;C=ue,M=he}if(W.da){if(!Ut(C,M,ue=[W.ib],he=[W.hb]))return 2;C=ue[0],M=he[0]}}J.width=C,J.height=M;e:{var Se=J.width,Le=J.height;if(C=J.S,0>=Se||0>=Le||!(C>=u5&&13>C))C=2;else{if(0>=J.Rd&&J.sd==null){xe=he=ue=M=0;var Ye=(_e=Se*YL[C])*Le;if(11>C||(he=(Le+1)/2*(M=(Se+1)/2),C==12&&(xe=(ue=Se)*Le)),(Le=s(Ye+2*he+xe))==null){C=1;break e}J.sd=Le,11>C?((Se=J.f.RGBA).eb=Le,Se.fb=0,Se.A=_e,Se.size=Ye):((Se=J.f.kb).y=Le,Se.O=0,Se.fa=_e,Se.Fd=Ye,Se.f=Le,Se.N=0+Ye,Se.Ab=M,Se.Cd=he,Se.ea=Le,Se.W=0+Ye+he,Se.Db=M,Se.Ed=he,C==12&&(Se.F=Le,Se.J=0+Ye+2*he),Se.Tc=xe,Se.lb=ue)}if(M=1,ue=J.S,he=J.width,xe=J.height,ue>=u5&&13>ue)if(11>ue)C=J.f.RGBA,M&=(_e=Math.abs(C.A))*(xe-1)+he<=C.size,M&=_e>=he*YL[ue],M&=C.eb!=null;else{C=J.f.kb,_e=(he+1)/2,Ye=(xe+1)/2,Se=Math.abs(C.fa),Le=Math.abs(C.Ab);var vt=Math.abs(C.Db),Fe=Math.abs(C.lb),Je=Fe*(xe-1)+he;M&=Se*(xe-1)+he<=C.Fd,M&=Le*(Ye-1)+_e<=C.Cd,M=(M&=vt*(Ye-1)+_e<=C.Ed)&Se>=he&Le>=_e&vt>=_e,M&=C.y!=null,M&=C.f!=null,M&=C.ea!=null,ue==12&&(M&=Fe>=he,M&=Je<=C.Tc,M&=C.F!=null)}else M=0;C=M?0:2}}return C!=0||W!=null&&W.fd&&(C=Em(J)),C}var $i=64,rl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],oo=24,Tl=32,xn=8,ac=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(C){return C},I.Predictor2=function(C,M,W){return M[W+0]},I.Predictor3=function(C,M,W){return M[W+1]},I.Predictor4=function(C,M,W){return M[W-1]},I.Predictor5=function(C,M,W){return Wt(Wt(C,M[W+1]),M[W+0])},I.Predictor6=function(C,M,W){return Wt(C,M[W-1])},I.Predictor7=function(C,M,W){return Wt(C,M[W+0])},I.Predictor8=function(C,M,W){return Wt(M[W-1],M[W+0])},I.Predictor9=function(C,M,W){return Wt(M[W+0],M[W+1])},I.Predictor10=function(C,M,W){return Wt(Wt(C,M[W-1]),Wt(M[W+0],M[W+1]))},I.Predictor11=function(C,M,W){var J=M[W+0];return 0>=Xe(J>>24&255,C>>24&255,(M=M[W-1])>>24&255)+Xe(J>>16&255,C>>16&255,M>>16&255)+Xe(J>>8&255,C>>8&255,M>>8&255)+Xe(255&J,255&C,255&M)?J:C},I.Predictor12=function(C,M,W){var J=M[W+0];return(Yt((C>>24&255)+(J>>24&255)-((M=M[W-1])>>24&255))<<24|Yt((C>>16&255)+(J>>16&255)-(M>>16&255))<<16|Yt((C>>8&255)+(J>>8&255)-(M>>8&255))<<8|Yt((255&C)+(255&J)-(255&M)))>>>0},I.Predictor13=function(C,M,W){var J=M[W-1];return(ar((C=Wt(C,M[W+0]))>>24&255,J>>24&255)<<24|ar(C>>16&255,J>>16&255)<<16|ar(C>>8&255,J>>8&255)<<8|ar(255&C,255&J))>>>0};var oe=I.PredictorAdd0;I.PredictorAdd1=qt,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var f=I.PredictorAdd2;Vt("ColorIndexInverseTransform","MapARGB","32b",function(C){return C>>8&255},function(C){return C}),Vt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(C){return C},function(C){return C>>8&255});var m,x=I.ColorIndexInverseTransform,v=I.MapARGB,y=I.VP8LColorIndexInverseTransformAlpha,E=I.MapAlpha,k=I.VP8LPredictorsAdd=[];k.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var L,H,Q,le,fe,Re,$e,We,ot,Nt,Bt,Kt,$t,Wr,Qr,ri,Hi,Ei,ha,ni,Io,sf,of,l5,Am,IL,OL,RL,PL=s(511),DL=s(2041),ML=s(225),LL=s(767),FL=0,v6=DL,c5=ML,sc=LL,Wc=PL,u5=0,d5=1,BL=2,f5=3,h5=4,b6=5,UL=6,y6=7,w6=8,m5=9,_6=10,Nhe=[2,3,7],Ehe=[3,3,11],zL=[280,256,256,256,40],Ahe=[0,1,1,1,0],She=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],jhe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],The=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Che=8,N6=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],E6=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Tv=null,khe=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ihe=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],VL=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ohe=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Rhe=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Phe=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Dhe=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Rh=[],Bu=[],lf=[],Mhe=1,$L=2,Ph=[],Kc=[];xt("UpsampleRgbLinePair",zs,3),xt("UpsampleBgrLinePair",io,3),xt("UpsampleRgbaLinePair",_m,4),xt("UpsampleBgraLinePair",tl,4),xt("UpsampleArgbLinePair",Sl,4),xt("UpsampleRgba4444LinePair",ti,2),xt("UpsampleRgb565LinePair",Qn,2);var Lhe=I.UpsampleRgbLinePair,Fhe=I.UpsampleBgrLinePair,HL=I.UpsampleRgbaLinePair,qL=I.UpsampleBgraLinePair,GL=I.UpsampleArgbLinePair,WL=I.UpsampleRgba4444LinePair,Bhe=I.UpsampleRgb565LinePair,p5=16,g5=1<<p5-1,Cv=-227,A6=482,Uhe=6,KL=0,zhe=s(256),Vhe=s(256),$he=s(256),Hhe=s(256),qhe=s(A6-Cv),Ghe=s(A6-Cv);jl("YuvToRgbRow",zs,3),jl("YuvToBgrRow",io,3),jl("YuvToRgbaRow",_m,4),jl("YuvToBgraRow",tl,4),jl("YuvToArgbRow",Sl,4),jl("YuvToRgba4444Row",ti,2),jl("YuvToRgb565Row",Qn,2);var XL=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],x5=[0,2,8],Whe=[8,7,6,4,4,2,2,2,1,1,1,1],Khe=1;this.WebPDecodeRGBA=function(C,M,W,J,ue){var he=d5,xe=new tt,_e=new St;xe.ba=_e,_e.S=he,_e.width=[_e.width],_e.height=[_e.height];var Se=_e.width,Le=_e.height,Ye=new tr;if(Ye==null||C==null)var vt=2;else e(Ye!=null),vt=nf(C,M,W,Ye.width,Ye.height,Ye.Pd,Ye.Qd,Ye.format,null);if(vt!=0?Se=0:(Se!=null&&(Se[0]=Ye.width[0]),Le!=null&&(Le[0]=Ye.height[0]),Se=1),Se){_e.width=_e.width[0],_e.height=_e.height[0],J!=null&&(J[0]=_e.width),ue!=null&&(ue[0]=_e.height);e:{if(J=new Wa,(ue=new Pt).data=C,ue.w=M,ue.ha=W,ue.kd=1,M=[0],e(ue!=null),((C=nf(ue.data,ue.w,ue.ha,null,null,null,M,null,ue))==0||C==7)&&M[0]&&(C=4),(M=C)==0){if(e(xe!=null),J.data=ue.data,J.w=ue.w+ue.offset,J.ha=ue.ha-ue.offset,J.put=fr,J.ac=jn,J.bc=dn,J.ma=xe,ue.xa){if((C=rt())==null){xe=1;break e}if(function(Fe,Je){var ut=[0],Dt=[0],pt=[0];t:for(;;){if(Fe==null)return 0;if(Je==null)return Fe.a=2,0;if(Fe.l=Je,Fe.a=0,me(Fe.m,Je.data,Je.w,Je.ha),!Vn(Fe.m,ut,Dt,pt)){Fe.a=3;break t}if(Fe.xb=$L,Je.width=ut[0],Je.height=Dt[0],!Ae(ut[0],Dt[0],1,Fe,null))break t;return 1}return e(Fe.a!=0),0}(C,J)){if(J=(M=Fu(J.width,J.height,xe.Oa,xe.ba))==0){t:{J=C;r:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((W=J.l)!=null),e((ue=W.ma)!=null),J.xb!=0){if(J.ca=ue.ba,J.tb=ue.tb,e(J.ca!=null),!af(ue.Oa,W,f5)){J.a=2;break r}if(!Ge(J,W.width)||W.da)break r;if((W.da||Qe(J.ca.S))&&nt(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&nt()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!ve(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!lt(J,J.V,J.Ba,J.c,J.i,W.o,Ne))break r;ue.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(M=C.a)}else M=C.a}else{if((C=new _i)==null){xe=1;break e}if(C.Fa=ue.na,C.P=ue.P,C.qc=ue.Sa,As(C,J)){if((M=Fu(J.width,J.height,xe.Oa,xe.ba))==0){if(C.Aa=0,W=xe.Oa,e((ue=C)!=null),W!=null){if(0<(Se=0>(Se=W.Md)?0:100<Se?255:255*Se/100)){for(Le=Ye=0;4>Le;++Le)12>(vt=ue.pb[Le]).lc&&(vt.ia=Se*Whe[0>vt.lc?0:vt.lc]>>3),Ye|=vt.ia;Ye&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=W.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}(function(Fe,Je){if(Fe==null)return 0;if(Je==null)return Rn(Fe,2,"NULL VP8Io parameter in VP8Decode().");if(!Fe.cb&&!As(Fe,Je))return 0;if(e(Fe.cb),Je.ac==null||Je.ac(Je)){Je.ob&&(Fe.L=0);var ut=x5[Fe.L];if(Fe.L==2?(Fe.yb=0,Fe.zb=0):(Fe.yb=Je.v-ut>>4,Fe.zb=Je.j-ut>>4,0>Fe.yb&&(Fe.yb=0),0>Fe.zb&&(Fe.zb=0)),Fe.Va=Je.o+15+ut>>4,Fe.Hb=Je.va+15+ut>>4,Fe.Hb>Fe.za&&(Fe.Hb=Fe.za),Fe.Va>Fe.Ub&&(Fe.Va=Fe.Ub),0<Fe.L){var Dt=Fe.ed;for(ut=0;4>ut;++ut){var pt;if(Fe.Qa.Cb){var Lt=Fe.Qa.Lb[ut];Fe.Qa.Fb||(Lt+=Dt.Tb)}else Lt=Dt.Tb;for(pt=0;1>=pt;++pt){var Gt=Fe.gd[ut][pt],lr=Lt;if(Dt.Pc&&(lr+=Dt.vd[0],pt&&(lr+=Dt.od[0])),0<(lr=0>lr?0:63<lr?63:lr)){var nr=lr;0<Dt.wb&&(nr=4<Dt.wb?nr>>2:nr>>1)>9-Dt.wb&&(nr=9-Dt.wb),1>nr&&(nr=1),Gt.dd=nr,Gt.tc=2*lr+nr,Gt.ld=40<=lr?2:15<=lr?1:0}else Gt.tc=0;Gt.La=pt}}}ut=0}else Rn(Fe,6,"Frame setup failed"),ut=Fe.a;if(ut=ut==0){if(ut){Fe.$c=0,0<Fe.Aa||(Fe.Ic=Khe);t:{ut=Fe.Ic,Dt=4*(nr=Fe.za);var Ur=32*nr,Ir=nr+1,An=0<Fe.L?nr*(0<Fe.Aa?2:1):0,Dr=(Fe.Aa==2?2:1)*nr;if((Gt=Dt+832+(pt=3*(16*ut+x5[Fe.L])/2*Ur)+(Lt=Fe.Fa!=null&&0<Fe.Fa.length?Fe.Kc.c*Fe.Kc.i:0))!=Gt)ut=0;else{if(Gt>Fe.Vb){if(Fe.Vb=0,Fe.Ec=s(Gt),Fe.Fc=0,Fe.Ec==null){ut=Rn(Fe,1,"no memory during frame initialization.");break t}Fe.Vb=Gt}Gt=Fe.Ec,lr=Fe.Fc,Fe.Ac=Gt,Fe.Bc=lr,lr+=Dt,Fe.Gd=o(Ur,nn),Fe.Hd=0,Fe.rb=o(Ir+1,Fr),Fe.sb=1,Fe.wa=An?o(An,Hr):null,Fe.Y=0,Fe.D.Nb=0,Fe.D.wa=Fe.wa,Fe.D.Y=Fe.Y,0<Fe.Aa&&(Fe.D.Y+=nr),e(!0),Fe.oc=Gt,Fe.pc=lr,lr+=832,Fe.ya=o(Dr,wi),Fe.aa=0,Fe.D.ya=Fe.ya,Fe.D.aa=Fe.aa,Fe.Aa==2&&(Fe.D.aa+=nr),Fe.R=16*nr,Fe.B=8*nr,nr=(Ur=x5[Fe.L])*Fe.R,Ur=Ur/2*Fe.B,Fe.sa=Gt,Fe.ta=lr+nr,Fe.qa=Fe.sa,Fe.ra=Fe.ta+16*ut*Fe.R+Ur,Fe.Ha=Fe.qa,Fe.Ia=Fe.ra+8*ut*Fe.B+Ur,Fe.$c=0,lr+=pt,Fe.mb=Lt?Gt:null,Fe.nb=Lt?lr:null,e(lr+Lt<=Fe.Fc+Fe.Vb),Br(Fe),a(Fe.Ac,Fe.Bc,0,Dt),ut=1}}if(ut){if(Je.ka=0,Je.y=Fe.sa,Je.O=Fe.ta,Je.f=Fe.qa,Je.N=Fe.ra,Je.ea=Fe.Ha,Je.Vd=Fe.Ia,Je.fa=Fe.R,Je.Rc=Fe.B,Je.F=null,Je.J=0,!FL){for(ut=-255;255>=ut;++ut)PL[255+ut]=0>ut?-ut:ut;for(ut=-1020;1020>=ut;++ut)DL[1020+ut]=-128>ut?-128:127<ut?127:ut;for(ut=-112;112>=ut;++ut)ML[112+ut]=-16>ut?-16:15<ut?15:ut;for(ut=-255;510>=ut;++ut)LL[255+ut]=0>ut?0:255<ut?255:ut;FL=1}$e=Va,We=ct,Nt=Ie,Bt=Ar,Kt=Ta,ot=za,$t=Gc,Wr=ko,Qr=U,ri=ie,Hi=nc,Ei=Et,ha=De,ni=He,Io=rc,sf=qc,of=Lu,l5=Oh,Bu[0]=qr,Bu[1]=Xo,Bu[2]=Yo,Bu[3]=zi,Bu[4]=Pu,Bu[5]=ua,Bu[6]=Gr,Bu[7]=rf,Bu[8]=Du,Bu[9]=da,Rh[0]=Nn,Rh[1]=Ot,Rh[2]=br,Rh[3]=Fn,Rh[4]=ei,Rh[5]=gs,Rh[6]=Ui,lf[0]=Jo,lf[1]=ht,lf[2]=Zo,lf[3]=Hc,lf[4]=so,lf[5]=El,lf[6]=Al,ut=1}else ut=0}ut&&(ut=function($n,Ai){for($n.M=0;$n.M<$n.Va;++$n.M){var Sn,Mr=$n.Jc[$n.M&$n.Xb],wr=$n.m,Vs=$n;for(Sn=0;Sn<Vs.za;++Sn){var vn=wr,Gn=Vs,Ka=Gn.Ac,lo=Gn.Bc+4*Sn,nl=Gn.zc,Ss=Gn.ya[Gn.aa+Sn];if(Gn.Qa.Bb?Ss.$b=Oe(vn,Gn.Pa.jb[0])?2+Oe(vn,Gn.Pa.jb[2]):Oe(vn,Gn.Pa.jb[1]):Ss.$b=0,Gn.kc&&(Ss.Ad=Oe(vn,Gn.Bd)),Ss.Za=!Oe(vn,145)+0,Ss.Za){var Oo=Ss.Ob,al=0;for(Gn=0;4>Gn;++Gn){var Si,Yn=nl[0+Gn];for(Si=0;4>Si;++Si){Yn=Rhe[Ka[lo+Si]][Yn];for(var pa=VL[Oe(vn,Yn[0])];0<pa;)pa=VL[2*pa+Oe(vn,Yn[pa])];Yn=-pa,Ka[lo+Si]=Yn}n(Oo,al,Ka,lo,4),al+=4,nl[0+Gn]=Yn}}else Yn=Oe(vn,156)?Oe(vn,128)?1:3:Oe(vn,163)?2:0,Ss.Ob[0]=Yn,a(Ka,lo,Yn,4),a(nl,0,Yn,4);Ss.Dd=Oe(vn,142)?Oe(vn,114)?Oe(vn,183)?1:3:2:0}if(Vs.m.Ka)return Rn($n,7,"Premature end-of-partition0 encountered.");for(;$n.ja<$n.za;++$n.ja){if(Vs=Mr,vn=(wr=$n).rb[wr.sb-1],Ka=wr.rb[wr.sb+wr.ja],Sn=wr.ya[wr.aa+wr.ja],lo=wr.kc?Sn.Ad:0)vn.la=Ka.la=0,Sn.Za||(vn.Na=Ka.Na=0),Sn.Hc=0,Sn.Gc=0,Sn.ia=0;else{var js,ga;if(vn=Ka,Ka=Vs,lo=wr.Pa.Xc,nl=wr.ya[wr.aa+wr.ja],Ss=wr.pb[nl.$b],Gn=nl.ad,Oo=0,al=wr.rb[wr.sb-1],Yn=Si=0,a(Gn,Oo,0,384),nl.Za)var co=0,Uu=lo[3];else{pa=s(16);var $s=vn.Na+al.Na;if($s=Tv(Ka,lo[1],$s,Ss.Eb,0,pa,0),vn.Na=al.Na=(0<$s)+0,1<$s)$e(pa,0,Gn,Oo);else{var Cl=pa[0]+3>>3;for(pa=0;256>pa;pa+=16)Gn[Oo+pa]=Cl}co=1,Uu=lo[0]}var Ra=15&vn.la,ji=15&al.la;for(pa=0;4>pa;++pa){var ic=1&ji;for(Cl=ga=0;4>Cl;++Cl)Ra=Ra>>1|(ic=($s=Tv(Ka,Uu,$s=ic+(1&Ra),Ss.Sc,co,Gn,Oo))>co)<<7,ga=ga<<2|(3<$s?3:1<$s?2:Gn[Oo+0]!=0),Oo+=16;Ra>>=4,ji=ji>>1|ic<<7,Si=(Si<<8|ga)>>>0}for(Uu=Ra,co=ji>>4,js=0;4>js;js+=2){for(ga=0,Ra=vn.la>>4+js,ji=al.la>>4+js,pa=0;2>pa;++pa){for(ic=1&ji,Cl=0;2>Cl;++Cl)$s=ic+(1&Ra),Ra=Ra>>1|(ic=0<($s=Tv(Ka,lo[2],$s,Ss.Qc,0,Gn,Oo)))<<3,ga=ga<<2|(3<$s?3:1<$s?2:Gn[Oo+0]!=0),Oo+=16;Ra>>=2,ji=ji>>1|ic<<5}Yn|=ga<<4*js,Uu|=Ra<<4<<js,co|=(240&ji)<<js}vn.la=Uu,al.la=co,nl.Hc=Si,nl.Gc=Yn,nl.ia=43690&Yn?0:Ss.ia,lo=!(Si|Yn)}if(0<wr.L&&(wr.wa[wr.Y+wr.ja]=wr.gd[Sn.$b][Sn.Za],wr.wa[wr.Y+wr.ja].La|=!lo),Vs.Ka)return Rn($n,7,"Premature end-of-file encountered.")}if(Br($n),wr=Ai,Vs=1,Sn=(Mr=$n).D,vn=0<Mr.L&&Mr.M>=Mr.zb&&Mr.M<=Mr.Va,Mr.Aa==0)t:{if(Sn.M=Mr.M,Sn.uc=vn,xs(Mr,Sn),Vs=1,Sn=(ga=Mr.D).Nb,vn=(Yn=x5[Mr.L])*Mr.R,Ka=Yn/2*Mr.B,pa=16*Sn*Mr.R,Cl=8*Sn*Mr.B,lo=Mr.sa,nl=Mr.ta-vn+pa,Ss=Mr.qa,Gn=Mr.ra-Ka+Cl,Oo=Mr.Ha,al=Mr.Ia-Ka+Cl,ji=(Ra=ga.M)==0,Si=Ra>=Mr.Va-1,Mr.Aa==2&&xs(Mr,ga),ga.uc)for(ic=($s=Mr).D.M,e($s.D.uc),ga=$s.yb;ga<$s.Hb;++ga){co=ga,Uu=ic;var sl=(oc=(uo=$s).D).Nb;js=uo.R;var oc=oc.wa[oc.Y+co],lc=uo.sa,kl=uo.ta+16*sl*js+16*co,cc=oc.dd,$a=oc.tc;if($a!=0)if(e(3<=$a),uo.L==1)0<co&&sf(lc,kl,js,$a+4),oc.La&&l5(lc,kl,js,$a),0<Uu&&Io(lc,kl,js,$a+4),oc.La&&of(lc,kl,js,$a);else{var uc=uo.B,zu=uo.qa,Sm=uo.ra+8*sl*uc+8*co,cf=uo.Ha,uo=uo.Ia+8*sl*uc+8*co;sl=oc.ld,0<co&&(Wr(lc,kl,js,$a+4,cc,sl),ri(zu,Sm,cf,uo,uc,$a+4,cc,sl)),oc.La&&(Ei(lc,kl,js,$a,cc,sl),ni(zu,Sm,cf,uo,uc,$a,cc,sl)),0<Uu&&($t(lc,kl,js,$a+4,cc,sl),Qr(zu,Sm,cf,uo,uc,$a+4,cc,sl)),oc.La&&(Hi(lc,kl,js,$a,cc,sl),ha(zu,Sm,cf,uo,uc,$a,cc,sl))}}if(Mr.ia&&alert("todo:DitherRow"),wr.put!=null){if(ga=16*Ra,Ra=16*(Ra+1),ji?(wr.y=Mr.sa,wr.O=Mr.ta+pa,wr.f=Mr.qa,wr.N=Mr.ra+Cl,wr.ea=Mr.Ha,wr.W=Mr.Ia+Cl):(ga-=Yn,wr.y=lo,wr.O=nl,wr.f=Ss,wr.N=Gn,wr.ea=Oo,wr.W=al),Si||(Ra-=Yn),Ra>wr.o&&(Ra=wr.o),wr.F=null,wr.J=null,Mr.Fa!=null&&0<Mr.Fa.length&&ga<Ra&&(wr.J=Xr(Mr,wr,ga,Ra-ga),wr.F=Mr.mb,wr.F==null&&wr.F.length==0)){Vs=Rn(Mr,3,"Could not decode alpha data.");break t}ga<wr.j&&(Yn=wr.j-ga,ga=wr.j,e(!(1&Yn)),wr.O+=Mr.R*Yn,wr.N+=Mr.B*(Yn>>1),wr.W+=Mr.B*(Yn>>1),wr.F!=null&&(wr.J+=wr.width*Yn)),ga<Ra&&(wr.O+=wr.v,wr.N+=wr.v>>1,wr.W+=wr.v>>1,wr.F!=null&&(wr.J+=wr.v),wr.ka=ga-wr.j,wr.U=wr.va-wr.v,wr.T=Ra-ga,Vs=wr.put(wr))}Sn+1!=Mr.Ic||Si||(n(Mr.sa,Mr.ta-vn,lo,nl+16*Mr.R,vn),n(Mr.qa,Mr.ra-Ka,Ss,Gn+8*Mr.B,Ka),n(Mr.Ha,Mr.Ia-Ka,Oo,al+8*Mr.B,Ka))}if(!Vs)return Rn($n,6,"Output aborted.")}return 1}(Fe,Je)),Je.bc!=null&&Je.bc(Je),ut&=1}return ut?(Fe.cb=0,ut):0})(C,J)||(M=C.a)}}else M=C.a}M==0&&xe.Oa!=null&&xe.Oa.fd&&(M=Em(xe.ba))}xe=M}he=xe!=0?null:11>he?_e.f.RGBA.eb:_e.f.kb.y}else he=null;return he};var YL=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(I,V){for(var P="",B=0;B<4;B++)P+=String.fromCharCode(I[V++]);return P}function d(I,V){return I[V+0]|I[V+1]<<8}function h(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16)>>>0}function p(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16|I[V+3]<<24)>>>0}new c;var g=[0],b=[0],w=[],_=new c,N=t,S=function(I,V){var P={},B=0,F=!1,ee=0,Z=0;if(P.frames=[],!function(q,Y){for(var X=0;X<4;X++)if(q[Y+X]!="RIFF".charCodeAt(X))return!0;return!1}(I,V)){for(p(I,V+=4),V+=8;V<I.length;){var ce=u(I,V),ne=p(I,V+=4);V+=4;var ae=ne+(1&ne);switch(ce){case"VP8 ":case"VP8L":P.frames[B]===void 0&&(P.frames[B]={}),(we=P.frames[B]).src_off=F?Z:V-8,we.src_size=ee+ne+8,B++,F&&(F=!1,ee=0,Z=0);break;case"VP8X":(we=P.header={}).feature_flags=I[V];var me=V+4;we.canvas_width=1+h(I,me),me+=3,we.canvas_height=1+h(I,me),me+=3;break;case"ALPH":F=!0,ee=ae+8,Z=V-8;break;case"ANIM":(we=P.header).bgcolor=p(I,V),me=V+4,we.loop_count=d(I,me),me+=2;break;case"ANMF":var Te,we;(we=P.frames[B]={}).offset_x=2*h(I,V),V+=3,we.offset_y=2*h(I,V),V+=3,we.width=1+h(I,V),V+=3,we.height=1+h(I,V),V+=3,we.duration=h(I,V),V+=3,Te=I[V++],we.dispose=1&Te,we.blend=Te>>1&1}ce!="ANMF"&&(V+=ae)}return P}}(N,0);S.response=N,S.rgbaoutput=!0,S.dataurl=!1;var T=S.header?S.header:null,R=S.frames?S.frames:null;if(T){T.loop_counter=T.loop_count,g=[T.canvas_height],b=[T.canvas_width];for(var z=0;z<R.length&&R[z].blend!=0;z++);}var G=R[0],O=_.WebPDecodeRGBA(N,G.src_off,G.src_size,b,g);G.rgba=O,G.imgwidth=b[0],G.imgheight=g[0];for(var D=0;D<b[0]*g[0]*4;D++)w[D]=O[D];return this.width=b,this.height=g,this.data=w,this}(function(t){var e,r,n,a,s,o,l,c,u,d=function(q){return q=q||{},this.isStrokeTransparent=q.isStrokeTransparent||!1,this.strokeOpacity=q.strokeOpacity||1,this.strokeStyle=q.strokeStyle||"#000000",this.fillStyle=q.fillStyle||"#000000",this.isFillTransparent=q.isFillTransparent||!1,this.fillOpacity=q.fillOpacity||1,this.font=q.font||"10px sans-serif",this.textBaseline=q.textBaseline||"alphabetic",this.textAlign=q.textAlign||"left",this.lineWidth=q.lineWidth||1,this.lineJoin=q.lineJoin||"miter",this.lineCap=q.lineCap||"butt",this.path=q.path||[],this.transform=q.transform!==void 0?q.transform.clone():new c,this.globalCompositeOperation=q.globalCompositeOperation||"normal",this.globalAlpha=q.globalAlpha||1,this.clip_path=q.clip_path||[],this.currentPoint=q.currentPoint||new o,this.miterLimit=q.miterLimit||10,this.lastPoint=q.lastPoint||new o,this.lineDashOffset=q.lineDashOffset||0,this.lineDash=q.lineDash||[],this.margin=q.margin||[0,0,0,0],this.prevPageLastElemOffset=q.prevPageLastElemOffset||0,this.ignoreClearRect=typeof q.ignoreClearRect!="boolean"||q.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var h=function(q){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=q;Object.defineProperty(this,"pdf",{get:function(){return Y}});var X=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return X},set:function(Be){X=!!Be}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Be){re=!!Be}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Be){isNaN(Be)||(se=Be)}});var Ce=0;Object.defineProperty(this,"posY",{get:function(){return Ce},set:function(Be){isNaN(Be)||(Ce=Be)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Be){var ve;typeof Be=="number"?ve=[Be,Be,Be,Be]:((ve=new Array(4))[0]=Be[0],ve[1]=Be.length>=2?Be[1]:ve[0],ve[2]=Be.length>=3?Be[2]:ve[0],ve[3]=Be.length>=4?Be[3]:ve[1]),u.margin=ve}});var je=!1;Object.defineProperty(this,"autoPaging",{get:function(){return je},set:function(Be){je=Be}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(Be){pe=Be}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(Be){Oe=Be}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Be){Be instanceof d&&(u=Be)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Be){u.path=Be}});var qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return qe},set:function(Be){qe=Be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Be){var ve;ve=p(Be),this.ctx.fillStyle=ve.style,this.ctx.isFillTransparent=ve.a===0,this.ctx.fillOpacity=ve.a,this.pdf.setFillColor(ve.r,ve.g,ve.b,{a:ve.a}),this.pdf.setTextColor(ve.r,ve.g,ve.b,{a:ve.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Be){var ve=p(Be);this.ctx.strokeStyle=ve.style,this.ctx.isStrokeTransparent=ve.a===0,this.ctx.strokeOpacity=ve.a,ve.a===0?this.pdf.setDrawColor(255,255,255):(ve.a,this.pdf.setDrawColor(ve.r,ve.g,ve.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Be){["butt","round","square"].indexOf(Be)!==-1&&(this.ctx.lineCap=Be,this.pdf.setLineCap(Be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Be){isNaN(Be)||(this.ctx.lineWidth=Be,this.pdf.setLineWidth(Be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Be){["bevel","round","miter"].indexOf(Be)!==-1&&(this.ctx.lineJoin=Be,this.pdf.setLineJoin(Be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Be){isNaN(Be)||(this.ctx.miterLimit=Be,this.pdf.setMiterLimit(Be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Be){this.ctx.textBaseline=Be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Be){["right","end","center","left","start"].indexOf(Be)!==-1&&(this.ctx.textAlign=Be)}});var Ue=null,Me=null;Object.defineProperty(this,"fontFaces",{get:function(){return Me},set:function(Be){Ue=null,Me=Be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Be){var ve;if(this.ctx.font=Be,(ve=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Be))!==null){var Ht=ve[1];ve[2];var mt=ve[3],Ut=ve[4];ve[5];var et=ve[6],er=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ut)[2];Ut=Math.floor(er==="px"?parseFloat(Ut)*this.pdf.internal.scaleFactor:er==="em"?parseFloat(Ut)*this.pdf.getFontSize():parseFloat(Ut)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ut);var Ve=function(Ft){var Vt,Nr,sr=[],it=Ft.trim();if(it==="")return FT;if(it in oq)return[oq[it]];for(;it!=="";){switch(Nr=null,Vt=(it=cq(it)).charAt(0)){case'"':case"'":Nr=z$e(it.substring(1),Vt);break;default:Nr=V$e(it)}if(Nr===null||(sr.push(Nr[0]),(it=cq(Nr[1]))!==""&&it.charAt(0)!==","))return FT;it=it.replace(/^,/,"")}return sr}(et);if(this.fontFaces){var zt=function(Ft,Vt){if(Ue===null){var Nr=function(sr){var it=[];return Object.keys(sr).forEach(function(ir){sr[ir].forEach(function(be){var Ze=null;switch(be){case"bold":Ze={family:ir,weight:"bold"};break;case"italic":Ze={family:ir,style:"italic"};break;case"bolditalic":Ze={family:ir,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:ir}}Ze!==null&&(Ze.ref={name:ir,style:be},it.push(Ze))})}),it}(Ft.getFontList());Ue=function(sr){for(var it={},ir=0;ir<sr.length;++ir){var be=LT(sr[ir]),Ze=be.family,at=be.stretch,Qe=be.style,ze=be.weight;it[Ze]=it[Ze]||{},it[Ze][at]=it[Ze][at]||{},it[Ze][at][Qe]=it[Ze][at][Qe]||{},it[Ze][at][Qe][ze]=be}return it}(Nr.concat(Vt))}return Ue}(this.pdf,this.fontFaces),Wt=Ve.map(function(Ft){return{family:Ft,stretch:"normal",weight:mt,style:Ht}}),Yt=function(Ft,Vt,Nr){for(var sr=(Nr=Nr||{}).defaultFontFamily||"times",it=Object.assign({},U$e,Nr.genericFontFamilies||{}),ir=null,be=null,Ze=0;Ze<Vt.length;++Ze)if(it[(ir=LT(Vt[Ze])).family]&&(ir.family=it[ir.family]),Ft.hasOwnProperty(ir.family)){be=Ft[ir.family];break}if(!(be=be||Ft[sr]))throw new Error("Could not find a font-family for the rule '"+lq(ir)+"' and default family '"+sr+"'.");if(be=function(at,Qe){if(Qe[at])return Qe[at];var ze=tI[at],st=ze<=tI.normal?-1:1,St=iq(Qe,Ioe,ze,st);if(!St)throw new Error("Could not find a matching font-stretch value for "+at);return St}(ir.stretch,be),be=function(at,Qe){if(Qe[at])return Qe[at];for(var ze=koe[at],st=0;st<ze.length;++st)if(Qe[ze[st]])return Qe[ze[st]];throw new Error("Could not find a matching font-style for "+at)}(ir.style,be),!(be=function(at,Qe){if(Qe[at])return Qe[at];if(at===400&&Qe[500])return Qe[500];if(at===500&&Qe[400])return Qe[400];var ze=B$e[at],st=iq(Qe,Ooe,ze,at<400?-1:1);if(!st)throw new Error("Could not find a matching font-weight for value "+at);return st}(ir.weight,be)))throw new Error("Failed to resolve a font for the rule '"+lq(ir)+"'.");return be}(zt,Wt);this.pdf.setFont(Yt.ref.name,Yt.ref.style)}else{var ar="";(mt==="bold"||parseInt(mt,10)>=700||Ht==="bold")&&(ar="bold"),Ht==="italic"&&(ar+="italic"),ar.length===0&&(ar="normal");for(var Xe="",qt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<Ve.length;kt++){if(this.pdf.internal.getFont(Ve[kt],ar,{noFallback:!0,disableWarning:!0})!==void 0){Xe=Ve[kt];break}if(ar==="bolditalic"&&this.pdf.internal.getFont(Ve[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Xe=Ve[kt],ar="bold";else if(this.pdf.internal.getFont(Ve[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Xe=Ve[kt],ar="normal";break}}if(Xe===""){for(var gt=0;gt<Ve.length;gt++)if(qt[Ve[gt]]){Xe=qt[Ve[gt]];break}}Xe=Xe===""?"Times":Xe,this.pdf.setFont(Xe,ar)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Be){this.ctx.globalCompositeOperation=Be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Be){this.ctx.globalAlpha=Be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Be){this.ctx.lineDashOffset=Be,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Be){this.ctx.lineDash=Be,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Be){this.ctx.ignoreClearRect=!!Be}})};h.prototype.setLineDash=function(q){this.lineDash=q},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){R.call(this,"fill",!1)},h.prototype.stroke=function(){R.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(q,Y){if(isNaN(q)||isNaN(Y))throw Pa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var X=this.ctx.transform.applyToPoint(new o(q,Y));this.path.push({type:"mt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(q,Y)},h.prototype.closePath=function(){var q=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&wa(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){q=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(q.x,q.y)},h.prototype.lineTo=function(q,Y){if(isNaN(q)||isNaN(Y))throw Pa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var X=this.ctx.transform.applyToPoint(new o(q,Y));this.path.push({type:"lt",x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},h.prototype.quadraticCurveTo=function(q,Y,X,re){if(isNaN(X)||isNaN(re)||isNaN(q)||isNaN(Y))throw Pa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(X,re)),Ce=this.ctx.transform.applyToPoint(new o(q,Y));this.path.push({type:"qct",x1:Ce.x,y1:Ce.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.bezierCurveTo=function(q,Y,X,re,se,Ce){if(isNaN(se)||isNaN(Ce)||isNaN(q)||isNaN(Y)||isNaN(X)||isNaN(re))throw Pa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var je=this.ctx.transform.applyToPoint(new o(se,Ce)),pe=this.ctx.transform.applyToPoint(new o(q,Y)),Oe=this.ctx.transform.applyToPoint(new o(X,re));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:Oe.x,y2:Oe.y,x:je.x,y:je.y}),this.ctx.lastPoint=new o(je.x,je.y)},h.prototype.arc=function(q,Y,X,re,se,Ce){if(isNaN(q)||isNaN(Y)||isNaN(X)||isNaN(re)||isNaN(se))throw Pa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ce=!!Ce,!this.ctx.transform.isIdentity){var je=this.ctx.transform.applyToPoint(new o(q,Y));q=je.x,Y=je.y;var pe=this.ctx.transform.applyToPoint(new o(0,X)),Oe=this.ctx.transform.applyToPoint(new o(0,0));X=Math.sqrt(Math.pow(pe.x-Oe.x,2)+Math.pow(pe.y-Oe.y,2))}Math.abs(se-re)>=2*Math.PI&&(re=0,se=2*Math.PI),this.path.push({type:"arc",x:q,y:Y,radius:X,startAngle:re,endAngle:se,counterclockwise:Ce})},h.prototype.arcTo=function(q,Y,X,re,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(q,Y,X,re){if(isNaN(q)||isNaN(Y)||isNaN(X)||isNaN(re))throw Pa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(q,Y),this.lineTo(q+X,Y),this.lineTo(q+X,Y+re),this.lineTo(q,Y+re),this.lineTo(q,Y),this.lineTo(q+X,Y),this.lineTo(q,Y)},h.prototype.fillRect=function(q,Y,X,re){if(isNaN(q)||isNaN(Y)||isNaN(X)||isNaN(re))throw Pa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(q,Y,X,re),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(q,Y,X,re){if(isNaN(q)||isNaN(Y)||isNaN(X)||isNaN(re))throw Pa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(q,Y,X,re),this.stroke())},h.prototype.clearRect=function(q,Y,X,re){if(isNaN(q)||isNaN(Y)||isNaN(X)||isNaN(re))throw Pa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(q,Y,X,re))},h.prototype.save=function(q){q=typeof q!="boolean"||q;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),q){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},h.prototype.restore=function(q){q=typeof q!="boolean"||q;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,X=0;X<this.pdf.internal.getNumberOfPages();X++)this.pdf.setPage(X+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),q&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(q){var Y,X,re,se;if(q.isCanvasGradient===!0&&(q=q.getColor()),!q)return{r:0,g:0,b:0,a:0,style:q};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(q))Y=0,X=0,re=0,se=0;else{var Ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(q);if(Ce!==null)Y=parseInt(Ce[1]),X=parseInt(Ce[2]),re=parseInt(Ce[3]),se=1;else if((Ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(q))!==null)Y=parseInt(Ce[1]),X=parseInt(Ce[2]),re=parseInt(Ce[3]),se=parseFloat(Ce[4]);else{if(se=1,typeof q=="string"&&q.charAt(0)!=="#"){var je=new Noe(q);q=je.ok?je.toHex():"#000000"}q.length===4?(Y=q.substring(1,2),Y+=Y,X=q.substring(2,3),X+=X,re=q.substring(3,4),re+=re):(Y=q.substring(1,3),X=q.substring(3,5),re=q.substring(5,7)),Y=parseInt(Y,16),X=parseInt(X,16),re=parseInt(re,16)}}return{r:Y,g:X,b:re,a:se,style:q}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(q,Y,X,re){if(isNaN(Y)||isNaN(X)||typeof q!="string")throw Pa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var se=ae(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;B.call(this,{text:q,x:Y,y:X,scale:Ce,angle:se,align:this.textAlign,maxWidth:re})}},h.prototype.strokeText=function(q,Y,X,re){if(isNaN(Y)||isNaN(X)||typeof q!="string")throw Pa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){re=isNaN(re)?void 0:re;var se=ae(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;B.call(this,{text:q,x:Y,y:X,scale:Ce,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:re})}},h.prototype.measureText=function(q){if(typeof q!="string")throw Pa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,X=this.pdf.internal.scaleFactor,re=Y.internal.getFontSize(),se=Y.getStringUnitWidth(q)*re/Y.internal.scaleFactor;return new function(Ce){var je=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return je}}),this}({width:se*=Math.round(96*X/72*1e4)/1e4})},h.prototype.scale=function(q,Y){if(isNaN(q)||isNaN(Y))throw Pa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var X=new c(q,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.rotate=function(q){if(isNaN(q))throw Pa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new c(Math.cos(q),Math.sin(q),-Math.sin(q),Math.cos(q),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.translate=function(q,Y){if(isNaN(q)||isNaN(Y))throw Pa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var X=new c(1,0,0,1,q,Y);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.transform=function(q,Y,X,re,se,Ce){if(isNaN(q)||isNaN(Y)||isNaN(X)||isNaN(re)||isNaN(se)||isNaN(Ce))throw Pa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var je=new c(q,Y,X,re,se,Ce);this.ctx.transform=this.ctx.transform.multiply(je)},h.prototype.setTransform=function(q,Y,X,re,se,Ce){q=isNaN(q)?1:q,Y=isNaN(Y)?0:Y,X=isNaN(X)?0:X,re=isNaN(re)?1:re,se=isNaN(se)?0:se,Ce=isNaN(Ce)?0:Ce,this.ctx.transform=new c(q,Y,X,re,se,Ce)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(q,Y,X,re,se,Ce,je,pe,Oe){var qe=this.pdf.getImageProperties(q),Ue=1,Me=1,Be=1,ve=1;re!==void 0&&pe!==void 0&&(Be=pe/re,ve=Oe/se,Ue=qe.width/re*pe/re,Me=qe.height/se*Oe/se),Ce===void 0&&(Ce=Y,je=X,Y=0,X=0),re!==void 0&&pe===void 0&&(pe=re,Oe=se),re===void 0&&pe===void 0&&(pe=qe.width,Oe=qe.height);for(var Ht,mt=this.ctx.transform.decompose(),Ut=ae(mt.rotate.shx),et=new c,er=(et=(et=(et=et.multiply(mt.translate)).multiply(mt.skew)).multiply(mt.scale)).applyToRectangle(new l(Ce-Y*Be,je-X*ve,re*Ue,se*Me)),Ve=_.call(this,er),zt=[],Wt=0;Wt<Ve.length;Wt+=1)zt.indexOf(Ve[Wt])===-1&&zt.push(Ve[Wt]);if(T(zt),this.autoPaging)for(var Yt=zt[0],ar=zt[zt.length-1],Xe=Yt;Xe<ar+1;Xe++){this.pdf.setPage(Xe);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Xe===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vt=Xe===1?0:gt+(Xe-2)*Ft;if(this.ctx.clip_path.length!==0){var Nr=this.path;Ht=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ht,this.posX+this.margin[3],-Vt+kt+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=Nr}var sr=JSON.parse(JSON.stringify(er));sr=S([sr],this.posX+this.margin[3],-Vt+kt+this.ctx.prevPageLastElemOffset)[0];var it=(Xe>Yt||Xe<ar)&&w.call(this);it&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,Ft,null).clip().discardPath()),this.pdf.addImage(q,"JPEG",sr.x,sr.y,sr.w,sr.h,null,null,Ut),it&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(q,"JPEG",er.x,er.y,er.w,er.h,null,null,Ut)};var _=function(q,Y,X){var re=[];Y=Y||this.pdf.internal.pageSize.width,X=X||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(q.type){default:case"mt":case"lt":re.push(Math.floor((q.y+se)/X)+1);break;case"arc":re.push(Math.floor((q.y+se-q.radius)/X)+1),re.push(Math.floor((q.y+se+q.radius)/X)+1);break;case"qct":var Ce=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x,q.y);re.push(Math.floor((Ce.y+se)/X)+1),re.push(Math.floor((Ce.y+Ce.h+se)/X)+1);break;case"bct":var je=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,q.x1,q.y1,q.x2,q.y2,q.x,q.y);re.push(Math.floor((je.y+se)/X)+1),re.push(Math.floor((je.y+je.h+se)/X)+1);break;case"rect":re.push(Math.floor((q.y+se)/X)+1),re.push(Math.floor((q.y+q.h+se)/X)+1)}for(var pe=0;pe<re.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<re[pe];)N.call(this);return re},N=function(){var q=this.fillStyle,Y=this.strokeStyle,X=this.font,re=this.lineCap,se=this.lineWidth,Ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=q,this.strokeStyle=Y,this.font=X,this.lineCap=re,this.lineWidth=se,this.lineJoin=Ce},S=function(q,Y,X){for(var re=0;re<q.length;re++)switch(q[re].type){case"bct":q[re].x2+=Y,q[re].y2+=X;case"qct":q[re].x1+=Y,q[re].y1+=X;default:q[re].x+=Y,q[re].y+=X}return q},T=function(q){return q.sort(function(Y,X){return Y-X})},R=function(q,Y){for(var X,re,se=this.fillStyle,Ce=this.strokeStyle,je=this.lineCap,pe=this.lineWidth,Oe=Math.abs(pe*this.ctx.transform.scaleX),qe=this.lineJoin,Ue=JSON.parse(JSON.stringify(this.path)),Me=JSON.parse(JSON.stringify(this.path)),Be=[],ve=0;ve<Me.length;ve++)if(Me[ve].x!==void 0)for(var Ht=_.call(this,Me[ve]),mt=0;mt<Ht.length;mt+=1)Be.indexOf(Ht[mt])===-1&&Be.push(Ht[mt]);for(var Ut=0;Ut<Be.length;Ut++)for(;this.pdf.internal.getNumberOfPages()<Be[Ut];)N.call(this);if(T(Be),this.autoPaging)for(var et=Be[0],er=Be[Be.length-1],Ve=et;Ve<er+1;Ve++){this.pdf.setPage(Ve),this.fillStyle=se,this.strokeStyle=Ce,this.lineCap=je,this.lineWidth=Oe,this.lineJoin=qe;var zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wt=Ve===1?this.posY+this.margin[0]:this.margin[0],Yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ar=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Ve===1?0:Yt+(Ve-2)*ar;if(this.ctx.clip_path.length!==0){var qt=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(X,this.posX+this.margin[3],-Xe+Wt+this.ctx.prevPageLastElemOffset),z.call(this,q,!0),this.path=qt}if(re=JSON.parse(JSON.stringify(Ue)),this.path=S(re,this.posX+this.margin[3],-Xe+Wt+this.ctx.prevPageLastElemOffset),Y===!1||Ve===0){var kt=(Ve>et||Ve<er)&&w.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,ar,null).clip().discardPath()),z.call(this,q,Y),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=Oe,z.call(this,q,Y),this.lineWidth=pe;this.path=Ue},z=function(q,Y){if((q!=="stroke"||Y||!b.call(this))&&(q==="stroke"||Y||!g.call(this))){for(var X,re,se=[],Ce=this.path,je=0;je<Ce.length;je++){var pe=Ce[je];switch(pe.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:pe,deltas:[],abs:[]});break;case"lt":var Oe=se.length;if(Ce[je-1]&&!isNaN(Ce[je-1].x)&&(X=[pe.x-Ce[je-1].x,pe.y-Ce[je-1].y],Oe>0)){for(;Oe>=0;Oe--)if(se[Oe-1].close!==!0&&se[Oe-1].begin!==!0){se[Oe-1].deltas.push(X),se[Oe-1].abs.push(pe);break}}break;case"bct":X=[pe.x1-Ce[je-1].x,pe.y1-Ce[je-1].y,pe.x2-Ce[je-1].x,pe.y2-Ce[je-1].y,pe.x-Ce[je-1].x,pe.y-Ce[je-1].y],se[se.length-1].deltas.push(X);break;case"qct":var qe=Ce[je-1].x+2/3*(pe.x1-Ce[je-1].x),Ue=Ce[je-1].y+2/3*(pe.y1-Ce[je-1].y),Me=pe.x+2/3*(pe.x1-pe.x),Be=pe.y+2/3*(pe.y1-pe.y),ve=pe.x,Ht=pe.y;X=[qe-Ce[je-1].x,Ue-Ce[je-1].y,Me-Ce[je-1].x,Be-Ce[je-1].y,ve-Ce[je-1].x,Ht-Ce[je-1].y],se[se.length-1].deltas.push(X);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(pe)}}re=Y?null:q==="stroke"?"stroke":"fill";for(var mt=!1,Ut=0;Ut<se.length;Ut++)if(se[Ut].arc)for(var et=se[Ut].abs,er=0;er<et.length;er++){var Ve=et[er];Ve.type==="arc"?D.call(this,Ve.x,Ve.y,Ve.radius,Ve.startAngle,Ve.endAngle,Ve.counterclockwise,void 0,Y,!mt):F.call(this,Ve.x,Ve.y),mt=!0}else if(se[Ut].close===!0)this.pdf.internal.out("h"),mt=!1;else if(se[Ut].begin!==!0){var zt=se[Ut].start.x,Wt=se[Ut].start.y;ee.call(this,se[Ut].deltas,zt,Wt),mt=!0}re&&I.call(this,re),Y&&V.call(this)}},G=function(q){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,X=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return q-X;case"top":return q+Y-X;case"hanging":return q+Y-2*X;case"middle":return q+Y/2-X;default:return q}},O=function(q){return q+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var q=function(){};return q.colorStops=[],q.addColorStop=function(Y,X){this.colorStops.push([Y,X])},q.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},q.isCanvasGradient=!0,q},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(q,Y,X,re,se,Ce,je,pe,Oe){for(var qe=ce.call(this,X,re,se,Ce),Ue=0;Ue<qe.length;Ue++){var Me=qe[Ue];Ue===0&&(Oe?P.call(this,Me.x1+q,Me.y1+Y):F.call(this,Me.x1+q,Me.y1+Y)),Z.call(this,q,Y,Me.x2,Me.y2,Me.x3,Me.y3,Me.x4,Me.y4)}pe?V.call(this):I.call(this,je)},I=function(q){switch(q){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(q,Y){this.pdf.internal.out(r(q)+" "+n(Y)+" m")},B=function(q){var Y;switch(q.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var X=this.pdf.getTextDimensions(q.text),re=G.call(this,q.y),se=O.call(this,re)-X.h,Ce=this.ctx.transform.applyToPoint(new o(q.x,re)),je=this.ctx.transform.decompose(),pe=new c;pe=(pe=(pe=pe.multiply(je.translate)).multiply(je.skew)).multiply(je.scale);for(var Oe,qe,Ue,Me=this.ctx.transform.applyToRectangle(new l(q.x,re,X.w,X.h)),Be=pe.applyToRectangle(new l(q.x,se,X.w,X.h)),ve=_.call(this,Be),Ht=[],mt=0;mt<ve.length;mt+=1)Ht.indexOf(ve[mt])===-1&&Ht.push(ve[mt]);if(T(Ht),this.autoPaging)for(var Ut=Ht[0],et=Ht[Ht.length-1],er=Ut;er<et+1;er++){this.pdf.setPage(er);var Ve=er===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wt=this.pdf.internal.pageSize.height-this.margin[2],Yt=Wt-this.margin[0],ar=this.pdf.internal.pageSize.width-this.margin[1],Xe=ar-this.margin[3],qt=er===1?0:zt+(er-2)*Yt;if(this.ctx.clip_path.length!==0){var kt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Oe,this.posX+this.margin[3],-1*qt+Ve),z.call(this,"fill",!0),this.path=kt}var gt=S([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-qt+Ve+this.ctx.prevPageLastElemOffset)[0];q.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*q.scale),Ue=this.lineWidth,this.lineWidth=Ue*q.scale);var Ft=this.autoPaging!=="text";if(Ft||gt.y+gt.h<=Wt){if(Ft||gt.y>=Ve&&gt.x<=ar){var Vt=Ft?q.text:this.pdf.splitTextToSize(q.text,q.maxWidth||ar-gt.x)[0],Nr=S([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-qt+Ve+this.ctx.prevPageLastElemOffset)[0],sr=Ft&&(er>Ut||er<et)&&w.call(this);sr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Yt,null).clip().discardPath()),this.pdf.text(Vt,Nr.x,Nr.y,{angle:q.angle,align:Y,renderingMode:q.renderingMode}),sr&&this.pdf.restoreGraphicsState()}}else gt.y<Wt&&(this.ctx.prevPageLastElemOffset+=Wt-gt.y);q.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=Ue)}else q.scale>=.01&&(qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(qe*q.scale),Ue=this.lineWidth,this.lineWidth=Ue*q.scale),this.pdf.text(q.text,Ce.x+this.posX,Ce.y+this.posY,{angle:q.angle,align:Y,renderingMode:q.renderingMode,maxWidth:q.maxWidth}),q.scale>=.01&&(this.pdf.setFontSize(qe),this.lineWidth=Ue)},F=function(q,Y,X,re){X=X||0,re=re||0,this.pdf.internal.out(r(q+X)+" "+n(Y+re)+" l")},ee=function(q,Y,X){return this.pdf.lines(q,Y,X,null,null)},Z=function(q,Y,X,re,se,Ce,je,pe){this.pdf.internal.out([e(a(X+q)),e(s(re+Y)),e(a(se+q)),e(s(Ce+Y)),e(a(je+q)),e(s(pe+Y)),"c"].join(" "))},ce=function(q,Y,X,re){for(var se=2*Math.PI,Ce=Math.PI/2;Y>X;)Y-=se;var je=Math.abs(X-Y);je<se&&re&&(je=se-je);for(var pe=[],Oe=re?-1:1,qe=Y;je>1e-5;){var Ue=qe+Oe*Math.min(je,Ce);pe.push(ne.call(this,q,qe,Ue)),je-=Math.abs(Ue-qe),qe=Ue}return pe},ne=function(q,Y,X){var re=(X-Y)/2,se=q*Math.cos(re),Ce=q*Math.sin(re),je=se,pe=-Ce,Oe=je*je+pe*pe,qe=Oe+je*se+pe*Ce,Ue=4/3*(Math.sqrt(2*Oe*qe)-qe)/(je*Ce-pe*se),Me=je-Ue*pe,Be=pe+Ue*je,ve=Me,Ht=-Be,mt=re+Y,Ut=Math.cos(mt),et=Math.sin(mt);return{x1:q*Math.cos(Y),y1:q*Math.sin(Y),x2:Me*Ut-Be*et,y2:Me*et+Be*Ut,x3:ve*Ut-Ht*et,y3:ve*et+Ht*Ut,x4:q*Math.cos(X),y4:q*Math.sin(X)}},ae=function(q){return 180*q/Math.PI},me=function(q,Y,X,re,se,Ce){var je=q+.5*(X-q),pe=Y+.5*(re-Y),Oe=se+.5*(X-se),qe=Ce+.5*(re-Ce),Ue=Math.min(q,se,je,Oe),Me=Math.max(q,se,je,Oe),Be=Math.min(Y,Ce,pe,qe),ve=Math.max(Y,Ce,pe,qe);return new l(Ue,Be,Me-Ue,ve-Be)},Te=function(q,Y,X,re,se,Ce,je,pe){var Oe,qe,Ue,Me,Be,ve,Ht,mt,Ut,et,er,Ve,zt,Wt,Yt=X-q,ar=re-Y,Xe=se-X,qt=Ce-re,kt=je-se,gt=pe-Ce;for(qe=0;qe<41;qe++)Ut=(Ht=(Ue=q+(Oe=qe/40)*Yt)+Oe*((Be=X+Oe*Xe)-Ue))+Oe*(Be+Oe*(se+Oe*kt-Be)-Ht),et=(mt=(Me=Y+Oe*ar)+Oe*((ve=re+Oe*qt)-Me))+Oe*(ve+Oe*(Ce+Oe*gt-ve)-mt),qe==0?(er=Ut,Ve=et,zt=Ut,Wt=et):(er=Math.min(er,Ut),Ve=Math.min(Ve,et),zt=Math.max(zt,Ut),Wt=Math.max(Wt,et));return new l(Math.round(er),Math.round(Ve),Math.round(zt-er),Math.round(Wt-Ve))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var q,Y,X=(q=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:q,lineDashOffset:Y}));this.prevLineDash!==X&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=X)}}})(zr.API),function(t){var e=function(o){var l,c,u,d,h,p,g,b,w,_;for(c=[],u=0,d=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;d>u;u+=4)(h=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(p=(h=((h=((h=((h=(h-(_=h%85))/85)-(w=h%85))/85)-(b=h%85))/85)-(g=h%85))/85)%85,c.push(p+33,g+33,b+33,w+33,_+33)):c.push(122);return function(N,S){for(var T=S;T>0;T--)N.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,d,h,p=String,g="length",b=255,w="charCodeAt",_="slice",N="replace";for(o[_](-2),o=o[_](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),u=[],d=0,h=(o+=l="uuuuu"[_](o[g]%5||5))[g];h>d;d+=5)c=52200625*(o[w](d)-33)+614125*(o[w](d+1)-33)+7225*(o[w](d+2)-33)+85*(o[w](d+3)-33)+(o[w](d+4)-33),u.push(b&c>>24,b&c>>16,b&c>>8,b&c);return function(S,T){for(var R=T;R>0;R--)S.pop()}(u,l[g]),p.fromCharCode.apply(p,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},s=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=K8(l)).reduce(function(u,d){return u+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",d=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:d.reverse().join(" ")}}}(zr.API),function(t){t.loadFile=function(e,r,n){return function(a,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,u,d){var h=new XMLHttpRequest,p=0,g=function(b){var w=b.length,_=[],N=String.fromCharCode;for(p=0;p<w;p+=1)_.push(N(255&b.charCodeAt(p)));return _.join("")};if(h.open("GET",c,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(a,s,o)}catch{}return l}(e,r,n)},t.loadImageFile=t.loadFile}(zr.API),function(t){function e(){return(un.html2canvas?Promise.resolve(un.html2canvas):cp(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(un.DOMPurify?Promise.resolve(un.DOMPurify):cp(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=wa(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var d in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[d]=c.style[d];return u},s=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),d=l.convert(Promise.resolve(),u);return(d=d.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,d=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var b=d[g],w=b.src.find(function(_){return _.format==="truetype"});w&&u.addFont(w.url,b.ref.name,b.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,u.context2d.save(!0),c(this.prop.container,p)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,d){return Math.floor(u*d/72*96)}return this.then(function(){(l=l||zr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,d){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,d){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(d,h){return u.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(p){return u.updateProgress(null,d),p}).then(d,h).then(function(p){return u.updateProgress(1),p})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var d=this;l&&(l=l.bind(d)),c&&(c=c.bind(d));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?d:o.convert(Object.assign({},d),Promise.prototype),p=u.call(h,l,c);return o.convert(p,d.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,zr.getPageSize=function(l,c,u){if(wa(l)==="object"){var d=l;l=d.orientation,c=d.unit||c,u=d.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var h,p=(""+u).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var b,w=0,_=0;if(g.hasOwnProperty(p))w=g[p][1]/h,_=g[p][0]/h;else try{w=u[1],_=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",_>w&&(b=_,_=w,w=b);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>_&&(b=_,_=w,w=b)}return{width:_,height:w,unit:c,k:h,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(LT):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}}(zr.API),zr.API.addJS=function(t){return dq=t,this.internal.events.subscribe("postPutResources",function(){I_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(I_+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),uq=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+dq+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){I_!==void 0&&uq!==void 0&&this.internal.out("/Names <</JavaScript "+I_+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var o=a[s],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var h=r.internal.newObject();d.push(h);var p=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var o={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var o=n.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(zr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,s,o,l){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=function(h){for(var p,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,w={width:0,height:0,numcomponents:1},_=4;_<b;_+=2){if(_+=g,e.indexOf(h.charCodeAt(_+1))!==-1){p=256*h.charCodeAt(_+5)+h.charCodeAt(_+6),w={width:256*h.charCodeAt(_+7)+h.charCodeAt(_+8),height:p,numcomponents:h.charCodeAt(_+9)};break}g=256*h.charCodeAt(_+2)+h.charCodeAt(_+3)}return w}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(zr.API),zr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,s=A$e(t,{checkCrc:!0}),o=s.width,l=s.height,c=s.channels,u=s.palette,d=s.depth;a=u&&c===1?function(D){for(var I=D.width,V=D.height,P=D.data,B=D.palette,F=D.depth,ee=!1,Z=[],ce=[],ne=void 0,ae=!1,me=0,Te=0;Te<B.length;Te++){var we=pH(B[Te],4),q=we[0],Y=we[1],X=we[2],re=we[3];Z.push(q,Y,X),re!=null&&(re===0?(me++,ce.length<1&&ce.push(Te)):re<255&&(ae=!0))}if(ae||me>1){ee=!0,ce=void 0;var se=I*V;ne=new Uint8Array(se);for(var Ce=new DataView(P.buffer),je=0;je<se;je++){var pe=BT(Ce,je,F),Oe=pH(B[pe],4)[3];ne[je]=Oe}}else me===0&&(ce=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:P,alphaBytes:ne,needSMask:ee,palette:Z,mask:ce}}(s):c===2||c===4?function(D){for(var I=D.data,V=D.width,P=D.height,B=D.channels,F=D.depth,ee=B===2?"DeviceGray":"DeviceRGB",Z=B-1,ce=V*P,ne=Z,ae=ce*ne,me=1*ce,Te=Math.ceil(ae*F/8),we=Math.ceil(me*F/8),q=new Uint8Array(Te),Y=new Uint8Array(we),X=new DataView(I.buffer),re=new DataView(q.buffer),se=new DataView(Y.buffer),Ce=!1,je=0;je<ce;je++){for(var pe=je*B,Oe=0;Oe<ne;Oe++)yq(re,BT(X,pe+Oe,F),je*ne+Oe,F);var qe=BT(X,pe+ne,F);qe<(1<<F)-1&&(Ce=!0),yq(se,qe,1*je,F)}return{colorSpace:ee,colorsPerPixel:Z,sMaskBitsPerComponent:Ce?F:void 0,colorBytes:q,alphaBytes:Y,needSMask:Ce}}(s):function(D){var I=D.data,V=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?function(P){for(var B=P.length,F=new Uint8Array(2*B),ee=new DataView(F.buffer,F.byteOffset,F.byteLength),Z=0;Z<B;Z++)ee.setUint16(2*Z,P[Z],!1);return F}(I):I,needSMask:!1}}(s);var h,p,g,b=a,w=b.colorSpace,_=b.colorsPerPixel,N=b.sMaskBitsPerComponent,S=b.colorBytes,T=b.alphaBytes,R=b.needSMask,z=b.palette,G=b.mask,O=null;return n!==zr.API.image_compression.NONE&&typeof K8=="function"?(O=function(D){var I;switch(D){case zr.API.image_compression.FAST:I=11;break;case zr.API.image_compression.MEDIUM:I=13;break;case zr.API.image_compression.SLOW:I=14;break;default:I=12}return I}(n),h=this.decode.FLATE_DECODE,p="/Predictor ".concat(O," /Colors ").concat(_," /BitsPerComponent ").concat(d," /Columns ").concat(o),t=pq(S,Math.ceil(o*_*d/8),_,d,n),R&&(g=pq(T,Math.ceil(o*N/8),1,N,n))):(h=void 0,p=void 0,t=S,R&&(g=T)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:t,index:e,filter:h,decodeParameters:p,transparency:G,palette:z,sMask:g,predictor:O,width:o,height:l,bitsPerComponent:d,sMaskBitsPerComponent:N,colorSpace:w}}},function(t){t.processGIF89A=function(e,r,n,a){var s=new G$e(e),o=s.width,l=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},d=new UT(100).encode(u,100);return t.processJPEG.call(this,d,r,n,a)},t.processGIF87A=t.processGIF89A}(zr.API),qu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Pa.log("bit decode error:"+r)}},qu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[s>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},qu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=s>>4,c=15&s,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},qu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},qu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,l=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=u}this.pos+=t}},qu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=l,this.data[d+3]=255}this.pos+=t}},qu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},qu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},qu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var s=new qu(e,!1),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new UT(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(zr.API),_q.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var s=new _q(e),o=s.width,l=s.height,c={data:s.getData(),width:o,height:l},u=new UT(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}}(zr.API),zr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,s=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var d=n[u],h=n[u+1],p=n[u+2],g=n[u+3];s[l++]=d,s[l++]=h,s[l++]=p,o[c++]=g}var b=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},zr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bg=zr.API,O_=Bg.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,p=0,g=t.length,b=0,w=l[0]||c,_=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?_.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/s)||0)/1e3):(p=h&&wa(u[n])==="object"&&!isNaN(parseInt(u[n][b],10))?u[n][b]/d:0,_.push((l[n]||w)/c+p)),b=n;return _},fq=Bg.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Bg.processArabic&&(t=Bg.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:O_.apply(this,arguments).reduce(function(s,o){return s+o},0)},hq=function(t,e,r,n){for(var a=[],s=0,o=t.length,l=0;s!==o&&l+e[s]<r;)l+=e[s],s++;a.push(t.slice(0,s));var c=s;for(l=0;s!==o;)l+e[s]>n&&(a.push(t.slice(c,s)),l=0,c=s),l+=e[s],s++;return c!==s&&a.push(t.slice(c,s)),a},mq=function(t,e,r){r||(r={});var n,a,s,o,l,c,u,d=[],h=[d],p=r.textIndent||0,g=0,b=0,w=t.split(" "),_=O_.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var N=Array(c).join(" "),S=[];w.map(function(R){(R=R.split(/\s*\n/)).length>1?S=S.concat(R.map(function(z,G){return(G&&z.length?`
`:"")+z})):S.push(R[0])}),w=S,c=fq.apply(this,[N,r])}for(s=0,o=w.length;s<o;s++){var T=0;if(n=w[s],c&&n[0]==`
`&&(n=n.substr(1),T=1),p+g+(b=(a=O_.apply(this,[n,r])).reduce(function(R,z){return R+z},0))>e||T){if(b>e){for(l=hq.apply(this,[n,a,e-(p+g),e]),d.push(l.shift()),d=[l.pop()];l.length;)h.push([l.shift()]);b=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(R,z){return R+z},0)}else d=[n];h.push(d),p=b+c,g=_}else d.push(n),p+=g+b,g=_}return u=c?function(R,z){return(z?N:"")+R.join(" ")}:function(R){return R.join(" ")},h.map(u)},Bg.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle),p="Unicode";return h.metadata[p]?{widths:h.metadata[p].widths||{0:1},kerning:h.metadata[p].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(mq.apply(this,[n[l],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=e[s],a[e[s]]=r[s];var o=function(p){return"0x"+parseInt(p,10).toString(16)},l=t.__fontmetrics__.compress=function(p){var g,b,w,_,N=["{"];for(var S in p){if(g=p[S],isNaN(parseInt(S,10))?b="'"+S+"'":(S=parseInt(S,10),b=(b=o(S).slice(2)).slice(0,-1)+a[b.slice(-1)]),typeof g=="number")g<0?(w=o(g).slice(3),_="-"):(w=o(g).slice(2),_=""),w=_+w.slice(0,-1)+a[w.slice(-1)];else{if(wa(g)!=="object")throw new Error("Don't know what to do with value type "+wa(g)+".");w=l(g)}N.push(b+w)}return N.push("}"),N.join("")},c=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,b,w,_,N={},S=1,T=N,R=[],z="",G="",O=p.length-1,D=1;D<O;D+=1)(_=p[D])=="'"?g?(w=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(R.push([T,w]),T={},w=void 0):_=="}"?((b=R.pop())[0][b[1]]=T,w=void 0,T=b[0]):_=="-"?S=-1:w===void 0?n.hasOwnProperty(_)?(z+=n[_],w=parseInt(z,16)*S,S=1,z=""):z+=_:n.hasOwnProperty(_)?(G+=n[_],T[w]=parseInt(G,16)*S,S=1,w=void 0,G=""):G+=_;return N},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var g=p.font,b=h.Unicode[g.postScriptName];b&&(g.metadata.Unicode={},g.metadata.Unicode.widths=b.widths,g.metadata.Unicode.kerning=b.kerning);var w=d.Unicode[g.postScriptName];w&&(g.metadata.Unicode.encoding=w,g.encoding=w.codePages[0])}])}(zr.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(WN(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])}(zr),zr.API.addSvgAsImage=function(t,e,r,n,a,s,o,l){if(isNaN(e)||isNaN(r))throw Pa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Pa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(un.canvg?Promise.resolve(un.canvg):cp(()=>import("./index.es-C40Q7WvY.js"),[])).catch(function(p){return Promise.reject(new Error("Could not load canvg: "+p))}).then(function(p){return p.default?p.default:p}).then(function(p){return p.fromString(u,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(p){return p.render(d)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},zr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},zr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,d=0,h=0;function p(b,w){var _,N=!1;for(_=0;_<b.length;_+=1)b[_]===w&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=l.length;for(h=0;h<g;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(wa(t)==="object"){for(a in t)if(s=t[a],p(l,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&p(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,w=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?w.push("/"+b+" /"+r[b].value):w.push("/"+b+" "+r[b].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(zr.API),function(t){var e=t.API,r=e.pdfEscape16=function(s,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,p=s.length;h<p;++h){if(l=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=s.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},n=function(s){var o,l,c,u,d,h,p;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,p=(l=Object.keys(s).sort(function(g,b){return g-b})).length;h<p;h++)o=l[h],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",b=0;b<p.length;b++)g+=String.fromCharCode(p[b]);var w=u();d({data:g,addLength1:!0,objectId:w}),c("endobj");var _=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var N=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+r1(l.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+r1(l.fontName)),c("/FontDescriptor "+N+" 0 R"),c("/W "+t.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+_+" 0 R"),c("/BaseFont /"+r1(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var l=o.font,c=o.out,u=o.newObject,d=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var b=u();d({data:p,addLength1:!0,objectId:b}),c("endobj");var w=u();d({data:n(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var _=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+r1(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var N=0;N<l.metadata.hmtx.widths.length;N++)l.metadata.hmtx.widths[N]=parseInt(l.metadata.hmtx.widths[N]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+r1(l.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(s)}]);var a=function(s){var o,l=s.text||"",c=s.x,u=s.y,d=s.options||{},h=s.mutex||{},p=h.pdfEscape,g=h.activeFontKey,b=h.fonts,w=g,_="",N=0,S="",T=b[w].encoding;if(b[w].encoding!=="Identity-H")return{text:l,x:c,y:u,options:d,mutex:h};for(S=l,w=g,Array.isArray(l)&&(S=l[0]),N=0;N<S.length;N+=1)b[w].metadata.hasOwnProperty("cmap")&&(o=b[w].metadata.cmap.unicode.codeMap[S[N].charCodeAt(0)]),o||S[N].charCodeAt(0)<256&&b[w].metadata.hasOwnProperty("Unicode")?_+=S[N]:_+="";var R="";return parseInt(w.slice(1))<14||T==="WinAnsiEncoding"?R=p(_,w).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(R=r(_,b[w])),h.isHex=!0,{text:R,x:c,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",l=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);s.text=l}else s.text=a(Object.assign({},c,{text:o})).text}])}(zr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(zr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,s,o,l,c,u,d,h=e,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,T=0;this.__bidiEngine__={};var R=function(P){var B=P.charCodeAt(),F=B>>8,ee=w[F];return ee!==void 0?h[256*ee+(255&B)]:F===252||F===253?"AL":N.test(F)?"L":F===8?"R":"N"},z=function(P){for(var B,F=0;F<P.length;F++){if((B=R(P.charAt(F)))==="L")return!1;if(B==="R")return!0}return!1},G=function(P,B,F,ee){var Z,ce,ne,ae,me=B[ee];switch(me){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(me="AN");break;case"AL":S=!0,me="R";break;case"WS":case"BN":me="N";break;case"CS":ee<1||ee+1>=B.length||(Z=F[ee-1])!=="EN"&&Z!=="AN"||(ce=B[ee+1])!=="EN"&&ce!=="AN"?me="N":S&&(ce="AN"),me=ce===Z?ce:"N";break;case"ES":me=(Z=ee>0?F[ee-1]:"B")==="EN"&&ee+1<B.length&&B[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&F[ee-1]==="EN"){me="EN";break}if(S){me="N";break}for(ne=ee+1,ae=B.length;ne<ae&&B[ne]==="ET";)ne++;me=ne<ae&&B[ne]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ae=B.length,ne=ee+1;ne<ae&&B[ne]==="NSM";)ne++;if(ne<ae){var Te=P[ee],we=Te>=1425&&Te<=2303||Te===64286;if(Z=B[ne],we&&(Z==="R"||Z==="AL")){me="R";break}}}me=ee<1||(Z=B[ee-1])==="B"?"N":F[ee-1];break;case"B":S=!1,a=!0,me=T;break;case"S":s=!0,me="N"}return me},O=function(P,B,F){var ee=P.split("");return F&&D(ee,F,{hiLevel:T}),ee.reverse(),B&&B.reverse(),ee.join("")},D=function(P,B,F){var ee,Z,ce,ne,ae,me=-1,Te=P.length,we=0,q=[],Y=T?g:p,X=[];for(S=!1,a=!1,s=!1,Z=0;Z<Te;Z++)X[Z]=R(P[Z]);for(ce=0;ce<Te;ce++){if(ae=we,q[ce]=G(P,X,q,ce),ee=240&(we=Y[ae][b[q[ce]]]),we&=15,B[ce]=ne=Y[we][5],ee>0)if(ee===16){for(Z=me;Z<ce;Z++)B[Z]=1;me=-1}else me=-1;if(Y[we][6])me===-1&&(me=ce);else if(me>-1){for(Z=me;Z<ce;Z++)B[Z]=ne;me=-1}X[ce]==="B"&&(B[ce]=0),F.hiLevel|=ne}s&&function(re,se,Ce){for(var je=0;je<Ce;je++)if(re[je]==="S"){se[je]=T;for(var pe=je-1;pe>=0&&re[pe]==="WS";pe--)se[pe]=T}}(X,B,Te)},I=function(P,B,F,ee,Z){if(!(Z.hiLevel<P)){if(P===1&&T===1&&!a)return B.reverse(),void(F&&F.reverse());for(var ce,ne,ae,me,Te=B.length,we=0;we<Te;){if(ee[we]>=P){for(ae=we+1;ae<Te&&ee[ae]>=P;)ae++;for(me=we,ne=ae-1;me<ne;me++,ne--)ce=B[me],B[me]=B[ne],B[ne]=ce,F&&(ce=F[me],F[me]=F[ne],F[ne]=ce);we=ae}we++}}},V=function(P,B,F){var ee=P.split(""),Z={hiLevel:T};return F||(F=[]),D(ee,F,Z),function(ce,ne,ae){if(ae.hiLevel!==0&&d)for(var me,Te=0;Te<ce.length;Te++)ne[Te]===1&&(me=_.indexOf(ce[Te]))>=0&&(ce[Te]=_[me+1])}(ee,F,Z),I(2,ee,B,F,Z),I(1,ee,B,F,Z),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(P,B,F){if(function(Z,ce){if(ce)for(var ne=0;ne<Z.length;ne++)ce[ne]=ne;l===void 0&&(l=z(Z)),u===void 0&&(u=z(Z))}(P,B),o||!c||u)if(o&&c&&l^u)T=l?1:0,P=O(P,B,F);else if(!o&&c&&u)T=l?1:0,P=V(P,B,F),P=O(P,B);else if(!o||l||c||u){if(o&&!c&&l^u)P=O(P,B),l?(T=0,P=V(P,B,F)):(T=1,P=V(P,B,F),P=O(P,B));else if(o&&l&&!c&&u)T=1,P=V(P,B,F),P=O(P,B);else if(!o&&!c&&l^u){var ee=d;l?(T=1,P=V(P,B,F),T=0,d=!1,P=V(P,B,F),d=ee):(T=0,P=V(P,B,F),P=O(P,B),T=1,d=!1,P=V(P,B,F),d=ee,P=O(P,B))}}else T=0,P=V(P,B,F);else T=l?1:0,P=V(P,B,F);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(zr),zr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new J0(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new oHe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new W$e(this.contents),this.head=new X$e(this),this.name=new eHe(this),this.cmap=new Poe(this),this.toUnicode={},this.hhea=new Y$e(this),this.maxp=new tHe(this),this.hmtx=new rHe(this),this.post=new Q$e(this),this.os2=new Z$e(this),this.loca=new iHe(this),this.glyf=new nHe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,s,o,l;for(o=0,s=0,l=(e=""+e).length;0<=l?s<l:s>l;s=0<=l?++s:--s)a=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var md,J0=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,s,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,s;for(s=[],n=0,a=e.length;n<a;n++)r=e[n],s.push(this.writeByte(r));return s},t}(),W$e=function(){var t;function e(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,s,o,l,c,u,d,h,p,g,b,w;for(w in g=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(g)/c),o=Math.floor(h/c),d=16*g-h,(a=new J0).writeInt(this.scalarType),a.writeShort(g),a.writeShort(h),a.writeShort(o),a.writeShort(d),s=16*g,u=a.pos+s,l=null,b=[],r)for(p=r[w],a.writeString(w),a.writeInt(t(p)),a.writeInt(u),a.writeInt(p.length),b=b.concat(p),w==="head"&&(l=u),u+=p.length;u%4;)b.push(0),u++;return a.write(b),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,s,o;for(r=Doe.call(r);r.length%4;)r.push(0);for(s=new J0(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=s.readUInt32();return 4294967295&a},e}(),K$e={}.hasOwnProperty,tf=function(t,e){for(var r in e)K$e.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};md=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var X$e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new J0).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),Nq=function(){function t(e,r){var n,a,s,o,l,c,u,d,h,p,g,b,w,_,N,S,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),p=g/2,e.pos+=6,s=function(){var R,z;for(z=[],c=R=0;0<=p?R<p:R>p;c=0<=p?++R:--R)z.push(e.readUInt16());return z}(),e.pos+=2,w=function(){var R,z;for(z=[],c=R=0;0<=p?R<p:R>p;c=0<=p?++R:--R)z.push(e.readUInt16());return z}(),u=function(){var R,z;for(z=[],c=R=0;0<=p?R<p:R>p;c=0<=p?++R:--R)z.push(e.readUInt16());return z}(),d=function(){var R,z;for(z=[],c=R=0;0<=p?R<p:R>p;c=0<=p?++R:--R)z.push(e.readUInt16());return z}(),a=(this.length-e.pos+this.offset)/2,l=function(){var R,z;for(z=[],c=R=0;0<=a?R<a:R>a;c=0<=a?++R:--R)z.push(e.readUInt16());return z}(),c=N=0,T=s.length;N<T;c=++N)for(_=s[c],n=S=b=w[c];b<=_?S<=_:S>=_;n=b<=_?++S:--S)d[c]===0?o=n+u[c]:(o=l[d[c]/2+(n-b)-(p-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=h}return t.encode=function(e,r){var n,a,s,o,l,c,u,d,h,p,g,b,w,_,N,S,T,R,z,G,O,D,I,V,P,B,F,ee,Z,ce,ne,ae,me,Te,we,q,Y,X,re,se,Ce,je,pe,Oe,qe,Ue;switch(ee=new J0,o=Object.keys(e).sort(function(Me,Be){return Me-Be}),r){case"macroman":for(w=0,_=function(){var Me=[];for(b=0;b<256;++b)Me.push(0);return Me}(),S={0:0},s={},Z=0,me=o.length;Z<me;Z++)S[pe=e[a=o[Z]]]==null&&(S[pe]=++w),s[a]={old:e[a],new:S[e[a]]},_[a]=S[e[a]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(_),{charMap:s,subtable:ee.data,maxGlyphID:w+1};case"unicode":for(B=[],h=[],T=0,S={},n={},N=u=null,ce=0,Te=o.length;ce<Te;ce++)S[z=e[a=o[ce]]]==null&&(S[z]=++T),n[a]={old:z,new:S[z]},l=S[z]-a,N!=null&&l===u||(N&&h.push(N),B.push(a),u=l),N=a;for(N&&h.push(N),h.push(65535),B.push(65535),V=2*(I=B.length),D=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(D/2)/Math.LN2,O=2*I-D,c=[],G=[],g=[],b=ne=0,we=B.length;ne<we;b=++ne){if(P=B[b],d=h[b],P===65535){c.push(0),G.push(0);break}if(P-(F=n[P].new)>=32768)for(c.push(0),G.push(2*(g.length+I-b)),a=ae=P;P<=d?ae<=d:ae>=d;a=P<=d?++ae:--ae)g.push(n[a].new);else c.push(F-P),G.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*I+2*g.length),ee.writeUInt16(0),ee.writeUInt16(V),ee.writeUInt16(D),ee.writeUInt16(p),ee.writeUInt16(O),Ce=0,q=h.length;Ce<q;Ce++)a=h[Ce],ee.writeUInt16(a);for(ee.writeUInt16(0),je=0,Y=B.length;je<Y;je++)a=B[je],ee.writeUInt16(a);for(Oe=0,X=c.length;Oe<X;Oe++)l=c[Oe],ee.writeUInt16(l);for(qe=0,re=G.length;qe<re;qe++)R=G[qe],ee.writeUInt16(R);for(Ue=0,se=g.length;Ue<se;Ue++)w=g[Ue],ee.writeUInt16(w);return{charMap:n,subtable:ee.data,maxGlyphID:T+1}}},t}(),Poe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new Nq(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=Nq.encode(e,r),(a=new J0).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),Y$e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),Z$e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),Q$e=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,l,c;for(c=[],s=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;s=0<=l?++o:--o)c.push(e.readUInt32());return c}).call(this)}},t}(),J$e=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},eHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,s,o,l,c,u,d,h,p;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},s=d=0,h=n.length;d<h;s=++d)a=n[s],e.pos=a.offset,u=e.readString(a.length),o=new J$e(u,a),c[p=a.nameID]==null&&(c[p]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),tHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),rHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,s,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)d.push(e.readInt16());return d}(),this.widths=(function(){var u,d,h,p;for(p=[],u=0,d=(h=this.metrics).length;u<d;u++)s=h[u],p.push(s.advance);return p}).call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Doe=[].slice,nHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,s,o,l,c,u,d,h;return e in this.cache?this.cache[e]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(e),(a=s.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new J0(r.read(a))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new sHe(l,u,h,c,d):new aHe(l,o,u,h,c,d),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,s,o,l,c;for(o=[],s=[],l=0,c=r.length;l<c;l++)a=e[r[l]],s.push(o.length),a&&(o=o.concat(a.encode(n)));return s.push(o.length),{table:o,offsets:s}},t}(),aHe=function(){function t(e,r,n,a,s,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),sHe=function(){function t(e,r,n,a,s){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new J0(Doe.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),iHe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return tf(t,md),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,o=0;o<n.length;++o)if(n[o]=a,s<r.length&&r[s]==o){++s,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),oHe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,s,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[s=e[o]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},t.prototype.encode=function(e,r){var n,a,s,o,l,c,u,d,h,p,g,b,w,_,N;for(a in n=Poe.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},N=n.charMap)g[(c=N[a]).old]=c.new;for(b in p=n.maxGlyphID,o)b in g||(g[b]=p++);return d=function(S){var T,R;for(T in R={},S)R[S[T]]=T;return R}(g),h=Object.keys(d).sort(function(S,T){return S-T}),w=function(){var S,T,R;for(R=[],S=0,T=h.length;S<T;S++)l=h[S],R.push(d[l]);return R}(),s=this.font.glyf.encode(o,w,g),u=this.font.loca.encode(s.offsets,w),_={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();zr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,s,o;if(Array.isArray(r))return"["+function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)o=r[a],s.push("/"+a+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+r},e}();function Moe(t,e,r,n,a){n=n||{};var s=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=l*c,d=/\r\n|\r|\n/g,h="",p=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,p=h.length||1),r+=l*(2-s),n.valign==="middle"?r-=p/2*u:n.valign==="bottom"&&(r-=p*u),n.halign==="center"||n.halign==="right"){var g=l;if(n.halign==="center"&&(g*=.5),h&&p>=1){for(var b=0;b<h.length;b++)a.text(h[b],e-a.getStringUnitWidth(h[b])*g,r),r+=u;return a}e-=a.getStringUnitWidth(t)*g}return n.halign==="justify"?a.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(t,e,r),a}var Eq={},Y1=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:Eq=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,a,s;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(e.font&&(c=e.font),e.fontStyle){l=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(c,l),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=t.unifyColor(e.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,a,s){return this.jsPDFDocument.rect(e,r,n,a,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return Eq||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),rI=function(t,e){return rI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},rI(t,e)};function Loe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");rI(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Foe=function(t){Loe(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function lHe(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function cHe(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function V3(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return a}function Boe(t,e,r,n){var a=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:a,lineColor:s});var o=Uoe(a,!1);o&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,o)}function Uoe(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function hS(t,e){var r,n,a,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(a=t.right)!==null&&a!==void 0?a:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function zoe(t,e){var r=hS(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function uHe(t,e,r,n,a){var s={},o=1.3333333333333333,l=zT(e,function(T){return a.getComputedStyle(T).backgroundColor});l!=null&&(s.fillColor=l);var c=zT(e,function(T){return a.getComputedStyle(T).color});c!=null&&(s.textColor=c);var u=fHe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",h=o*r,p=n.borderTopWidth;if(n.borderBottomWidth===p&&n.borderRightWidth===p&&n.borderLeftWidth===p){var g=(parseFloat(p)||0)/h;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var b=zT(e,function(T){return a.getComputedStyle(T)[d]});b!=null&&(s.lineColor=b);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(s.fontSize=_/o);var N=dHe(n);N&&(s.fontStyle=N);var S=(n.fontFamily||"").toLowerCase();return t.indexOf(S)!==-1&&(s.font=S),s}function dHe(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function zT(t,e){var r=Voe(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Voe(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:Voe(t.parentElement,e):r}function fHe(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),a=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=r.map(function(l){return parseInt(l||"0")/n}),o=hS(s,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function $oe(t,e,r,n,a){var s,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof e=="string"?l=r.document.querySelector(e):l=e;var c=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],p=[];if(!l)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:p};for(var g=0;g<l.rows.length;g++){var b=l.rows[g],w=(o=(s=b==null?void 0:b.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),_=hHe(c,u,r,b,n,a);_&&(w==="thead"?d.push(_):w==="tfoot"?p.push(_):h.push(_))}return{head:d,body:h,foot:p}}function hHe(t,e,r,n,a,s){for(var o=new Foe(n),l=0;l<n.cells.length;l++){var c=n.cells[l],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=uHe(t,c,e,u,r)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:mHe(c)})}}var h=r.getComputedStyle(n);if(o.length>0&&(a||h.display!=="none"))return o}function mHe(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function pHe(t,e,r){for(var n=0,a=[t,e,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Lf(t,e,r,n,a){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s}function gHe(t,e){var r=new Y1(t),n=r.getDocumentOptions(),a=r.getGlobalOptions();pHe(a,n,e);var s=Lf({},a,n,e),o;typeof window<"u"&&(o=window);var l=xHe(a,n,e),c=vHe(a,n,e),u=bHe(r,s),d=wHe(r,s,o);return{id:e.tableId,content:d,hooks:c,styles:l,settings:u}}function xHe(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=t[c],d=e[c],h=r[c];n.columnStyles=Lf({},u,d,h)}else{var p=[t,e,r],g=p.map(function(b){return b[c]||{}});n[c]=Lf({},g[0],g[1],g[2])}},s=0,o=Object.keys(n);s<o.length;s++){var l=o[s];a(l)}return n}function vHe(t,e,r){for(var n=[t,e,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=n;s<o.length;s++){var l=o[s];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function bHe(t,e){var r,n,a,s,o,l,c,u,d,h,p,g,b=hS(e.margin,40/t.scaleFactor()),w=(r=yHe(t,e.startY))!==null&&r!==void 0?r:b.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var N;e.showHead===!0?N="everyPage":e.showHead===!1?N="never":N=(a=e.showHead)!==null&&a!==void 0?a:"everyPage";var S=(s=e.useCss)!==null&&s!==void 0?s:!1,T=e.theme||(S?"plain":"striped"),R=!!e.horizontalPageBreak,z=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=e.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:S,theme:T,startY:w,margin:b,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:N,showFoot:_,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(p=e.tableLineColor)!==null&&p!==void 0?p:200,horizontalPageBreak:R,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function yHe(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),a=t.pageNumber(),s=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;s=o===a}return typeof e=="number"?e:(e==null||e===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function wHe(t,e,r){var n=e.head||[],a=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(r){var l=$oe(t,e.html,r,o,e.useCss)||{};n=l.head||n,a=l.body||n,s=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||_He(n,a,s);return{columns:c,head:n,body:a,foot:s}}function _He(t,e,r){var n=t[0]||e[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,l;Array.isArray(n)?l=n[parseInt(s)]:l=n[s],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var nI=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),NHe=function(t){Loe(e,t);function e(r,n,a,s,o,l){var c=t.call(this,r,n,l)||this;return c.cell=a,c.row=s,c.column=o,c.section=s.section,c}return e}(nI),EHe=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,a,s,o){for(var l=0,c=r;l<c.length;l++){var u=c[l],d=new NHe(e,this,n,a,s,o),h=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new nI(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new nI(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),Hoe=function(){function t(e,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof Foe&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(a,s){var o=n.cells[s.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),u=c+l;return u>a?u:a},0)},t}(),qoe=function(){function t(e,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(a=e.content)!==null&&a!==void 0?a:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/e*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=hS(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),AHe=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,a=e.allRows();n<a.length;n++){var s=a[n],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},t}();function SHe(t,e){jHe(t,e);var r=[],n=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=e.getWidth(t.pageSize().width)-n;a&&(a=aI(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=aI(r,a,function(s){return s.minWidth})),a=Math.abs(a),!e.settings.horizontalPageBreak&&a>.1/t.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),CHe(e),kHe(e,t),THe(e)}function jHe(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,a=zoe(t,e);e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,s,c,null);var h=u.padding("horizontal");u.contentWidth=V3(u.text,u.styles,t)+h;var p=V3(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=p+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,l=e.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function aI(t,e,r){for(var n=e,a=t.reduce(function(g,b){return g+b.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],l=o.wrappedWidth/a,c=n*l,u=o.width+c,d=r(o),h=u<d?d:u;e-=h-o.width,o.width=h}if(e=Math.round(e*1e10)/1e10,e){var p=t.filter(function(g){return e<0?g.width>r(g):!0});p.length&&(e=aI(p,e,r))}return e}function THe(t){for(var e={},r=1,n=t.allRows(),a=0;a<n.length;a++)for(var s=n[a],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=e[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var h=n.length-a,p=d.rowSpan>h?h:d.rowSpan;e[c.index]={cell:d,left:p,row:s}}}}}function CHe(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],a=null,s=0,o=0,l=0;l<t.columns.length;l++){var c=t.columns[l];if(o-=1,o>1&&t.columns[l+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function kHe(t,e){for(var r={count:0,height:0},n=0,a=t.allRows();n<a.length;n++){for(var s=a[n],o=0,l=t.columns;o<l.length;o++){var c=l[o],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Aq(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Aq(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var p=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<p*u.rowSpan?r={height:p,count:u.rowSpan}:r&&r.count>0&&r.height>p&&(p=r.height),p>s.height&&(s.height=p)}}r.count--}}function Aq(t,e,r,n,a){return t.map(function(s){return IHe(s,e,r,n,a)})}function IHe(t,e,r,n,a){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=V3(t,r,n))return t;for(;e<V3(t+a,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+a}function OHe(t,e){var r=new Y1(t),n=RHe(e,r.scaleFactor()),a=new EHe(e,n);return SHe(r,a),r.applyStyles(r.userStyles),a}function RHe(t,e){var r=t.content,n=DHe(r.columns);if(r.head.length===0){var a=Sq(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=Sq(n,"foot");a&&r.foot.push(a)}var s=t.settings.theme,o=t.styles;return{columns:n,head:VT("head",r.head,n,o,s,e),body:VT("body",r.body,n,o,s,e),foot:VT("foot",r.foot,n,o,s,e)}}function VT(t,e,r,n,a,s){var o={},l=e.map(function(c,u){for(var d=0,h={},p=0,g=0,b=0,w=r;b<w.length;b++){var _=w[b];if(o[_.index]==null||o[_.index].left===0)if(g===0){var N=void 0;Array.isArray(c)?N=c[_.index-p-d]:N=c[_.dataKey];var S={};typeof N=="object"&&!Array.isArray(N)&&(S=(N==null?void 0:N.styles)||{});var T=MHe(t,_,u,a,n,s,S),R=new qoe(N,T,t);h[_.dataKey]=R,h[_.index]=R,g=R.colSpan-1,o[_.index]={left:R.rowSpan-1,times:g}}else g--,p++;else o[_.index].left--,g=o[_.index].times,d++}return new Hoe(c,u,t,h)});return l}function Sq(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var a=PHe(e,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function PHe(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function DHe(t){return t.map(function(e,r){var n,a;return typeof e=="object"?a=(n=e.dataKey)!==null&&n!==void 0?n:r:a=r,new AHe(a,e,r)})}function MHe(t,e,r,n,a,s,o){var l=cHe(n),c;t==="head"?c=a.headStyles:t==="body"?c=a.bodyStyles:t==="foot"&&(c=a.footStyles);var u=Lf({},l.table,l[t],a.styles,c),d=a.columnStyles[e.dataKey]||a.columnStyles[e.index]||{},h=t==="body"?d:{},p=t==="body"&&r%2===0?Lf({},l.alternateRow,a.alternateRowStyles):{},g=lHe(s),b=Lf({},g,u,p,h);return Lf(b,o)}function LHe(t,e,r){var n;r===void 0&&(r={});var a=zoe(t,e),s=new Map,o=[],l=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(p){var g=e.columns.find(function(b){return b.dataKey===p||b.index===p});g&&!s.has(g.index)&&(s.set(g.index,!0),o.push(g.index),l.push(e.columns[g.index]),a-=g.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(s.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||a>=h)u=!1,o.push(d),l.push(e.columns[d]),a-=h;else break;d++}return{colIndexes:o,columns:l,lastIndex:d-1}}function FHe(t,e){for(var r=[],n=0;n<e.columns.length;n++){var a=LHe(t,e,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function BHe(t,e){var r=e.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(p,g){return p+g.height},0);l+=u}var d=new Y1(t);(r.pageBreak==="always"||r.startY!=null&&l>d.pageSize().height)&&(Woe(d),s.y=a.top),e.callWillDrawPageHooks(d,s);var h=Lf({},s);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?UHe(d,e,h,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(p){return hh(d,e,p,s,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(p,g){var b=g===e.body.length-1;$3(d,e,p,b,h,s,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(p){return hh(d,e,p,s,e.columns)})),Boe(d,e,h,s),e.callEndPageHooks(d,s),e.finalY=s.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function UHe(t,e,r,n){var a=FHe(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?mb(t,e,r,n,u.columns,!0):jq(t,e,n,u.columns),zHe(t,e,r,n,u.columns),$T(t,e,n,u.columns)});else for(var o=-1,l=a[0],c=function(){var u=o;if(l){t.applyStyles(t.userStyles);var d=l.columns;o>=0?mb(t,e,r,n,d,!0):jq(t,e,n,d),u=Tq(t,e,o+1,n,d),$T(t,e,n,d)}var h=u-o;a.slice(1).forEach(function(p){t.applyStyles(t.userStyles),mb(t,e,r,n,p.columns,!0),Tq(t,e,o+1,n,p.columns,h),$T(t,e,n,p.columns)}),o=u};o<e.body.length-1;)c()}function jq(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&e.head.forEach(function(s){return hh(t,e,s,r,n)})}function zHe(t,e,r,n,a){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var l=o===e.body.length-1;$3(t,e,s,l,r,n,a)})}function Tq(t,e,r,n,a,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(r+s,e.body.length),l=-1;return e.body.slice(r,o).forEach(function(c,u){var d=r+u===e.body.length-1,h=Goe(t,e,d,n);c.canEntireRowFit(h,a)&&(hh(t,e,c,n,a),l=r+u)}),l}function $T(t,e,r,n){var a=e.settings;t.applyStyles(t.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&e.foot.forEach(function(s){return hh(t,e,s,r,n)})}function VHe(t,e,r){var n=r.getLineHeight(t.styles.fontSize),a=t.padding("vertical"),s=Math.floor((e-a)/n);return Math.max(0,s)}function $He(t,e,r,n){var a={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,l=r.columns;o<l.length;o++){var c=l[o],u=t.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new qoe(u.raw,u.styles,u.section);d=Lf(d,u),d.text=[];var h=VHe(u,e,n);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var p=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(p,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(p,g),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var b=new Hoe(t.raw,-1,t.section,a,!0);b.height=s;for(var w=0,_=r.columns;w<_.length;w++){var c=_[w],d=b.cells[c.index];d&&(d.height=b.height);var u=t.cells[c.index];u&&(u.height=t.height)}return b}function HHe(t,e,r,n){var a=t.pageSize().height,s=n.settings.margin,o=s.top+s.bottom,l=a-o;e.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,t),u=c<r;if(c>l)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>l;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function $3(t,e,r,n,a,s,o){var l=Goe(t,e,n,s);if(r.canEntireRowFit(l,o))hh(t,e,r,s,o);else if(HHe(t,r,l,e)){var c=$He(r,l,e,t);hh(t,e,r,s,o),mb(t,e,a,s,o),$3(t,e,c,n,a,s,o)}else mb(t,e,a,s,o),$3(t,e,r,n,a,s,o)}function hh(t,e,r,n,a){n.x=e.settings.margin.left;for(var s=0,o=a;s<o.length;s++){var l=o[s],c=r.cells[l.index];if(!c){n.x+=l.width;continue}t.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,c,r,l,n);if(u===!1){n.x+=l.width;continue}qHe(t,c,n);var d=c.getTextPos();Moe(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,c,r,l,n),n.x+=l.width}n.y+=r.height}function qHe(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Uoe(n.lineWidth,n.fillColor);a&&t.rect(e.x,r.y,e.width,e.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),GHe(t,e,r,n.lineWidth))}function GHe(t,e,r,n){var a,s,o,l;n.top&&(a=r.x,s=r.y,o=r.x+e.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,o,l)),n.bottom&&(a=r.x,s=r.y+e.height,o=r.x+e.width,l=r.y+e.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,o,l)),n.left&&(a=r.x,s=r.y,o=r.x,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.left,a,s,o,l)),n.right&&(a=r.x+e.width,s=r.y,o=r.x+e.width,l=r.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(l+=.5*n.bottom),c(n.right,a,s,o,l));function c(u,d,h,p,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,p,g,"S")}}function Goe(t,e,r,n){var a=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-a}function mb(t,e,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(l){return hh(t,e,l,n,a)}),e.callEndPageHooks(t,n);var o=e.settings.margin;Boe(t,e,r,n),Woe(t),e.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(l){return hh(t,e,l,n,a)}),t.applyStyles(t.userStyles))}function Woe(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function WHe(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],a=gHe(this,n),s=OHe(this,a);return BHe(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,a){Moe(e,r,n,a,this)},t.API.autoTableSetDefaults=function(e){return Y1.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Y1.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Y1(this),s=$oe(a,e,window,r,!1),o=s.head,l=s.body,c=((n=o[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:l,data:l}}}var HT;try{if(typeof window<"u"&&window){var Cq=window,kq=Cq.jsPDF||((HT=Cq.jspdf)===null||HT===void 0?void 0:HT.jsPDF);kq&&WHe(kq)}}catch(t){console.error("Could not apply autoTable plugin",t)}const R_=()=>{const[t,e]=A.useState("rutas"),[r,n]=A.useState(!1),[a,s]=A.useState(null),o=P=>P==null?"0":Math.round(P).toLocaleString("en-US"),[l,c]=A.useState(""),[u,d]=A.useState(""),[h,p]=A.useState(""),[g,b]=A.useState(""),[w,_]=A.useState([]),[N,S]=A.useState([]);A.useEffect(()=>{T()},[]);const T=async()=>{try{const[P,B]=await Promise.all([wt.get("/empleados/repartidores"),wt.get("/rutas")]);if(P.data.success)_(P.data.data||[]);else throw new Error(P.data.error||"Error al cargar empleados");if(B.data.success)S(B.data.data||[]);else throw new Error(B.data.error||"Error al cargar rutas")}catch(P){console.error("Error cargando datos:",P),alert("Error al cargar datos iniciales")}},R=async()=>{try{n(!0);const P={fechaDesde:l,fechaHasta:u,...h&&{empleadoId:h},...g&&{rutaId:g}};let B;switch(t){case"rutas":B=await wt.get("/reportes/rutas",{params:P});break;case"gastos":B=await wt.get("/reportes/gastos",{params:P});break;case"facturas":B=await wt.get("/reportes/facturas",{params:P});break;default:throw new Error("Tipo de reporte no vlido")}if(B.data.success)s(B.data.data);else throw new Error(B.data.error||"Error al generar el reporte")}catch(P){console.error("Error:",P),alert(P.message||"Error al generar el reporte")}finally{n(!1)}},z=()=>{if(!a)return;let P=[],B="";switch(t){case"rutas":B="reporte_rutas",P=a.rutas.map(Z=>({Fecha:new Date(Z.fecha).toLocaleDateString(),Ruta:Z.nombre,Repartidor:Z.empleadoNombre,"Total Facturas":Z.totalFacturas,Entregadas:Z.facturasEntregadas,"No Entregadas":Z.facturasNoEntregadas,"Porcentaje Entrega":`${Z.porcentajeEntrega}%`,"Monto Asignado":Z.montoAsignado,"Total Gastos":Z.totalGastos,Balance:Z.balance,Cobros:Z.totalCobros||0,"A Entregar":Z.efectivoAEntregar||0}));break;case"gastos":B="reporte_gastos",P=a.gastos.map(Z=>({Fecha:new Date(Z.fecha).toLocaleDateString(),Ruta:Z.rutaNombre,Repartidor:Z.empleadoNombre,Tipo:Z.tipoGasto,Descripcin:Z.descripcion,Monto:Z.monto}));break;case"facturas":B="reporte_facturas",P=a.facturas.map(Z=>({"Cdigo Tracking":Z.codigoTracking||Z.numeroFactura||"-",Cliente:Z.cliente,Direccin:Z.direccion,Monto:Z.monto,Estado:Z.estado,Ruta:Z.rutaNombre||"Sin asignar","Fecha Intento":Z.fechaIntento?new Date(Z.fechaIntento).toLocaleDateString():"","Motivo No Entrega":Z.motivoNoEntrega||""}));break}const F=bT.json_to_sheet(P),ee=bT.book_new();bT.book_append_sheet(ee,F,"Reporte"),oze(ee,`${B}_${new Date().toISOString().split("T")[0]}.xlsx`)},G=()=>{if(!a)return;const P=new zr;let B="",F=[],ee=[];switch(P.setFontSize(18),P.setFont(void 0,"bold"),t){case"rutas":B="Reporte de Rutas",F=["Fecha","Ruta","Repartidor","Facturas","Entregadas","% Entrega","Balance"],ee=a.rutas.map(Z=>[new Date(Z.fecha).toLocaleDateString(),Z.nombre,Z.empleadoNombre,Z.totalFacturas,Z.facturasEntregadas,`${Z.porcentajeEntrega}%`,`$${Z.balance}`]);break;case"gastos":B="Reporte de Gastos",F=["Fecha","Ruta","Repartidor","Tipo","Descripcin","Monto"],ee=a.gastos.map(Z=>[new Date(Z.fecha).toLocaleDateString(),Z.rutaNombre,Z.empleadoNombre,Z.tipoGasto,Z.descripcion,`$${Z.monto}`]);break;case"facturas":B="Reporte de Facturas",F=["Tracking","Cliente","Estado","Ruta","Monto"],ee=a.facturas.map(Z=>[Z.codigoTracking||Z.numeroFactura||"-",Z.cliente,Z.estado,Z.rutaNombre||"Sin asignar",`$${Z.monto}`]);break}if(P.text(B,14,15),P.setFontSize(12),P.setFont(void 0,"normal"),P.text(`Perodo: ${l} al ${u}`,14,25),P.autoTable({head:[F],body:ee,startY:35,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[66,139,202]}}),a.resumen){const Z=P.lastAutoTable.finalY+10;P.setFont(void 0,"bold"),P.text("Resumen:",14,Z),P.setFont(void 0,"normal");let ce=Z+7;Object.entries(a.resumen).forEach(([ne,ae])=>{P.text(`${ne}: ${ae}`,14,ce),ce+=7})}P.save(`${B.toLowerCase().replace(/ /g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`)},O=()=>{if(!(a!=null&&a.resumen))return null;const P=B=>["monto","gastos","balance","asignado","cobros","efectivo","entregar","cobrado"].some(ee=>B.toLowerCase().includes(ee));return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:Object.entries(a.resumen).map(([B,F])=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 capitalize",children:B.replace(/_/g," ")}),i.jsx("p",{className:"text-2xl font-bold text-slate-800 dark:text-white mt-1",children:typeof F=="number"&&P(B)?`$${o(F)}`:F})]},B))})},D=()=>a!=null&&a.rutas?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Repartidor"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Facturas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Entregadas"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"% Entrega"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Asignado"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Gastos"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Balance"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cobros"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"A Entregar"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.rutas.map((P,B)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:new Date(P.fecha).toLocaleDateString()}),i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white",children:P.nombre}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:P.empleadoNombre}),i.jsx("td",{className:"px-4 py-3 text-sm text-center text-slate-900 dark:text-slate-100",children:P.totalFacturas}),i.jsx("td",{className:"px-4 py-3 text-sm text-center text-emerald-600 dark:text-emerald-400",children:P.facturasEntregadas}),i.jsx("td",{className:"px-4 py-3 text-sm text-center",children:i.jsxs("span",{className:`px-2 py-1 rounded-full text-xs ${P.porcentajeEntrega>=90?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":P.porcentajeEntrega>=70?"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200":"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200"}`,children:[P.porcentajeEntrega,"%"]})}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:["$",o(P.montoAsignado)]}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-rose-600 dark:text-rose-400",children:["$",o(P.totalGastos)]}),i.jsx("td",{className:"px-4 py-3 text-sm text-right font-medium",children:i.jsxs("span",{className:P.balance>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400",children:["$",o(P.balance)]})}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-blue-600 dark:text-blue-400",children:["$",o(P.totalCobros||0)]}),i.jsx("td",{className:"px-4 py-3 text-sm text-right font-bold",children:i.jsxs("span",{className:P.efectivoAEntregar>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400",children:["$",o(P.efectivoAEntregar||0)]})})]},B))})]})})}):null,I=()=>a!=null&&a.gastos?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Fecha"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Repartidor"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Tipo"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Descripcin"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Monto"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.gastos.map((P,B)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:new Date(P.fecha).toLocaleDateString()}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:P.rutaNombre}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:P.empleadoNombre}),i.jsx("td",{className:"px-4 py-3 text-sm",children:i.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200",children:P.tipoGasto})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:P.descripcion}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right font-medium text-slate-900 dark:text-white",children:["$",P.monto]})]},B))})]})}),a.gastosPorTipo&&i.jsxs("div",{className:"p-4 border-t dark:border-slate-700",children:[i.jsx("h4",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Gastos por Tipo"}),i.jsx("div",{className:"space-y-2",children:Object.entries(a.gastosPorTipo).map(([P,B])=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:P}),i.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:["$",B]})]},P))})]})]}):null,V=()=>a!=null&&a.facturas?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Tracking"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Direccin"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Estado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Ruta"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-300 uppercase",children:"Monto"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.facturas.map((P,B)=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900 dark:text-white",children:P.codigoTracking||P.numeroFactura||"-"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:P.cliente}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:P.direccion}),i.jsx("td",{className:"px-4 py-3 text-sm text-center",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${P.estado==="entregado"?"bg-emerald-100 dark:bg-emerald-900 text-emerald-800 dark:text-emerald-200":P.estado==="no_entregado"?"bg-rose-100 dark:bg-rose-900 text-rose-800 dark:text-rose-200":"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200"}`,children:P.estado})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:P.rutaNombre||"Sin asignar"}),i.jsxs("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-white",children:["$",P.monto]})]},B))})]})})}):null;return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Reportes"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Genera reportes detallados del sistema"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h2",{className:"text-lg font-medium text-slate-800 dark:text-white mb-4",children:"Configurar Reporte"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Tipo de Reporte"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>e("rutas"),className:`p-4 rounded-lg border-2 transition-all ${t==="rutas"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"text-2xl mb-2 block",children:""}),i.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Reporte de Rutas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Desempeo por ruta y repartidor"})]}),i.jsxs("button",{onClick:()=>e("gastos"),className:`p-4 rounded-lg border-2 transition-all ${t==="gastos"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"text-2xl mb-2 block",children:""}),i.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Reporte de Gastos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Gastos detallados por tipo"})]}),i.jsxs("button",{onClick:()=>e("facturas"),className:`p-4 rounded-lg border-2 transition-all ${t==="facturas"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"text-2xl mb-2 block",children:""}),i.jsx("h3",{className:"font-medium text-slate-900 dark:text-white",children:"Reporte de Facturas"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Estado de todas las facturas"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha Desde"}),i.jsx("input",{type:"date",value:l,onChange:P=>c(P.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha Hasta"}),i.jsx("input",{type:"date",value:u,onChange:P=>d(P.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Empleado (opcional)"}),i.jsxs("select",{value:h,onChange:P=>p(P.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Todos"}),w.map(P=>i.jsx("option",{value:P.id,children:P.nombre},P.id))]})]}),t!=="rutas"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ruta (opcional)"}),i.jsxs("select",{value:g,onChange:P=>b(P.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Todas"}),N.map(P=>i.jsx("option",{value:P.id,children:P.nombre},P.id))]})]})]}),i.jsx("button",{onClick:R,disabled:r,className:"w-full md:w-auto px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:bg-slate-400",children:r?"Generando...":"Generar Reporte"})]}),a&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex gap-3 mb-6 justify-end",children:[i.jsxs("button",{onClick:z,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2",children:[i.jsx("span",{children:""}),"Exportar Excel"]}),i.jsxs("button",{onClick:G,className:"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition flex items-center gap-2",children:[i.jsx("span",{children:""}),"Exportar PDF"]})]}),O(),t==="rutas"&&D(),t==="gastos"&&I(),t==="facturas"&&V()]})]})},KHe=()=>{const{userData:t}=ca(),[e,r]=A.useState([]),[n,a]=A.useState(!0),[s,o]=A.useState(null),[l,c]=A.useState(""),[u,d]=A.useState("all");A.useEffect(()=>{(t==null?void 0:t.rol)==="super_admin"&&h()},[t]);const h=async()=>{try{a(!0);const N=await wt.get("/tickets/all");if(N.data.success)r(N.data.data||[]);else throw new Error(N.data.error||"Error al cargar tickets")}catch(N){console.error("Error cargando tickets:",N),r([]),alert("Error al cargar tickets")}finally{a(!1)}},p=async N=>{if(!l.trim()){alert(" Escribe una respuesta");return}try{(await wt.patch(`/tickets/${N}/respond`,{respuesta:l})).data.success&&(alert(" Ticket respondido exitosamente"),c(""),o(null),h())}catch(S){console.error("Error respondiendo ticket:",S),alert(" Error al responder ticket")}},g=e.filter(N=>u==="all"?!0:N.estado===u),b=e.filter(N=>N.estado==="abierto").length,w=e.filter(N=>N.estado==="respondido").length,_=e.filter(N=>N.estado==="cerrado").length;return(t==null?void 0:t.rol)!=="super_admin"?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg p-4",children:i.jsx("p",{className:"text-rose-800 dark:text-rose-200",children:" No tienes permisos para ver esta pgina"})})}):i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Gestin de Tickets"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Administra todas las solicitudes de ayuda"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Tickets"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:e.length})]}),i.jsx(FN,{className:"text-indigo-500 dark:text-indigo-400",size:32})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Abiertos"}),i.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:b})]}),i.jsx(Wo,{className:"text-amber-500 dark:text-amber-400",size:32})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Respondidos"}),i.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:w})]}),i.jsx(FN,{className:"text-indigo-500 dark:text-indigo-400",size:32})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Cerrados"}),i.jsx("p",{className:"text-2xl font-bold text-slate-600 dark:text-slate-400",children:_})]}),i.jsx(Jr,{className:"text-slate-500 dark:text-slate-400",size:32})]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-lg transition ${u==="all"?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Todos (",e.length,")"]}),i.jsxs("button",{onClick:()=>d("abierto"),className:`px-4 py-2 rounded-lg transition ${u==="abierto"?"bg-amber-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Abiertos (",b,")"]}),i.jsxs("button",{onClick:()=>d("respondido"),className:`px-4 py-2 rounded-lg transition ${u==="respondido"?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Respondidos (",w,")"]}),i.jsxs("button",{onClick:()=>d("cerrado"),className:`px-4 py-2 rounded-lg transition ${u==="cerrado"?"bg-slate-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:["Cerrados (",_,")"]})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md",children:n?i.jsx("div",{className:"p-12 text-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"})}):g.length===0?i.jsx("div",{className:"p-12 text-center text-slate-500 dark:text-slate-400",children:"No hay tickets en esta categora"}):i.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:g.map(N=>i.jsxs("div",{className:"p-6 hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:N.asunto}),i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N.estado==="abierto"?"bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200":N.estado==="respondido"?"bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200"}`,children:N.estado}),i.jsxs("span",{className:`text-xs font-medium ${N.prioridad==="alta"?"text-rose-600 dark:text-rose-400":N.prioridad==="media"?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400"}`,children:["Prioridad ",N.prioridad]})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-3",children:N.mensaje}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(vl,{size:14}),N.usuarioNombre]}),i.jsx("span",{children:N.usuarioEmail}),i.jsxs("span",{children:[" ",new Date(N.createdAt).toLocaleString()]}),i.jsxs("span",{children:[" ",N.categoria]})]})]})}),N.respuesta&&i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border-l-4 border-emerald-500 dark:border-emerald-400 p-4 rounded mb-3",children:[i.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-200 mb-1",children:"Tu respuesta:"}),i.jsx("p",{className:"text-sm text-emerald-800 dark:text-emerald-300",children:N.respuesta})]}),N.estado==="abierto"&&i.jsx("div",{className:"mt-4 pt-4 border-t dark:border-slate-700",children:s===N.id?i.jsxs("div",{children:[i.jsx("textarea",{value:l,onChange:S=>c(S.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-2",placeholder:"Escribe tu respuesta..."}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{o(null),c("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsxs("button",{onClick:()=>p(N.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[i.jsx(_4e,{size:16}),"Enviar Respuesta"]})]})]}):i.jsxs("button",{onClick:()=>o(N.id),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center gap-2",children:[i.jsx(FN,{size:16}),"Responder"]})})]},N.id))})})]})},XHe=()=>{const{userData:t}=ca(),[e,r]=A.useState(!1),[n,a]=A.useState(!0),[s,o]=A.useState(!1),[l,c]=A.useState(!0),[u,d]=A.useState("claro"),[h,p]=A.useState("blue"),[g,b]=A.useState("es"),[w,_]=A.useState("America/Santo_Domingo"),N=async()=>{try{r(!0);const S={notificaciones:{email:n,push:s,tickets:l},apariencia:{tema:u,colorAccent:h},idioma:g,zonaHoraria:w};localStorage.setItem("userConfig",JSON.stringify(S)),u==="oscuro"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),alert(" Configuracin guardada exitosamente")}catch(S){console.error("Error guardando configuracin:",S),alert(" Error al guardar configuracin")}finally{r(!1)}};return i.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Configuracin"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Personaliza tu experiencia en el sistema"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(NP,{className:"text-indigo-600 dark:text-indigo-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Notificaciones"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Notificaciones por email"}),i.jsx("input",{type:"checkbox",checked:n,onChange:S=>a(S.target.checked),className:"w-5 h-5 text-indigo-600 rounded"})]}),i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Notificaciones push"}),i.jsx("input",{type:"checkbox",checked:s,onChange:S=>o(S.target.checked),className:"w-5 h-5 text-indigo-600 rounded"})]}),i.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Alertas de nuevos tickets"}),i.jsx("input",{type:"checkbox",checked:l,onChange:S=>c(S.target.checked),className:"w-5 h-5 text-indigo-600 rounded"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(eb,{className:"text-rose-600 dark:text-rose-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Seguridad"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>alert("Funcin de cambio de contrasea en desarrollo"),className:"w-full text-left px-4 py-3 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 rounded-lg transition",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Cambiar contrasea"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Actualiza tu contrasea regularmente"})]}),i.jsxs("button",{onClick:()=>alert("Funcin de 2FA en desarrollo"),className:"w-full text-left px-4 py-3 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 rounded-lg transition",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Autenticacin de dos factores"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Agrega una capa extra de seguridad"})]}),i.jsxs("button",{onClick:()=>alert("Funcin de cerrar sesiones en desarrollo"),className:"w-full text-left px-4 py-3 bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600 rounded-lg transition",children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:"Cerrar otras sesiones"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Desconecta todos los dems dispositivos"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(i4e,{className:"text-purple-600 dark:text-purple-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Apariencia"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tema"}),i.jsxs("select",{value:u,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"claro",children:"Claro"}),i.jsx("option",{value:"oscuro",children:"Oscuro"}),i.jsx("option",{value:"automatico",children:"Automtico"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Color de acento"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>p("blue"),className:`w-10 h-10 bg-indigo-600 rounded-lg border-2 ${h==="blue"?"border-indigo-800":"border-transparent hover:border-indigo-800"}`}),i.jsx("button",{onClick:()=>p("purple"),className:`w-10 h-10 bg-purple-600 rounded-lg border-2 ${h==="purple"?"border-purple-800":"border-transparent hover:border-purple-800"}`}),i.jsx("button",{onClick:()=>p("green"),className:`w-10 h-10 bg-emerald-600 rounded-lg border-2 ${h==="green"?"border-emerald-800":"border-transparent hover:border-emerald-800"}`}),i.jsx("button",{onClick:()=>p("red"),className:`w-10 h-10 bg-rose-600 rounded-lg border-2 ${h==="red"?"border-rose-800":"border-transparent hover:border-rose-800"}`})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(M3e,{className:"text-emerald-600 dark:text-emerald-400",size:24}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800 dark:text-white",children:"Idioma y regin"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Idioma"}),i.jsxs("select",{value:g,onChange:S=>b(S.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"es",children:"Espaol"}),i.jsx("option",{value:"en",children:"English"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Zona horaria"}),i.jsxs("select",{value:w,onChange:S=>_(S.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"America/Santo_Domingo",children:"Amrica/Santo Domingo (GMT-4)"}),i.jsx("option",{value:"America/New_York",children:"Amrica/New York (GMT-5)"}),i.jsx("option",{value:"America/Los_Angeles",children:"Amrica/Los Angeles (GMT-8)"})]})]})]})]})]}),i.jsx("div",{className:"mt-6",children:i.jsx("button",{onClick:N,disabled:e,className:"w-full px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium disabled:bg-slate-400 disabled:cursor-not-allowed",children:e?"Guardando...":"Guardar Cambios"})})]})},YHe=()=>{const{userData:t}=ca(),[e,r]=A.useState(""),[n,a]=A.useState("all"),s=[{id:"all",name:"Todas",icon:vz},{id:"embarques",name:"Embarques",icon:Nu},{id:"rutas",name:"Rutas",icon:LN},{id:"facturas",name:"Facturas",icon:Nu},{id:"cuenta",name:"Mi Cuenta",icon:LN}],l=[{category:"embarques",question:"Cmo crear un nuevo embarque?",answer:'Para crear un embarque, ve a la seccin "Embarques" y haz clic en "Nuevo Embarque". Completa los campos requeridos como cdigo de tracking, origen, destino y fechas.'},{category:"embarques",question:"Cmo importar facturas desde un Excel?",answer:'En la pgina de embarques, selecciona un embarque y haz clic en "Importar Facturas". Sube un archivo Excel con las columnas: cliente, direccin, telfono, monto, etc.'},{category:"rutas",question:"Cmo asignar facturas a una ruta?",answer:'Ve a "Rutas" > "Nueva Ruta". Selecciona un embarque, elige las facturas que deseas incluir, asigna un repartidor y establece el monto para gastos.'},{category:"rutas",question:"Cmo cerrar una ruta completada?",answer:'En la lista de rutas activas, haz clic en "Cerrar Ruta". Vers un resumen del balance y confirmacin antes de cerrarla definitivamente.'},{category:"facturas",question:"Qu hacer con facturas no entregadas?",answer:'Las facturas no entregadas aparecen en "Facturas No Entregadas". Desde ah puedes reasignarlas a otra ruta o contactar nuevamente al cliente.'},{category:"facturas",question:"Cmo confirmar una factura antes de crear rutas?",answer:'Usa el "Panel de Secretarias" para verificar datos de contacto, confirmar direcciones y marcar facturas como listas para entrega.'},{category:"cuenta",question:"Cmo cambiar mi contrasea?",answer:'Ve a "Configuracin" en el men lateral, luego selecciona "Seguridad" y haz clic en "Cambiar Contrasea".'},{category:"cuenta",question:"Qu permisos tiene mi rol?",answer:"Los permisos varan segn tu rol: Admin tiene acceso completo, Secretarias manejan confirmaciones, Almacn gestiona embarques, y Repartidores ven sus rutas."}].filter(c=>{const u=n==="all"||c.category===n,d=c.question.toLowerCase().includes(e.toLowerCase())||c.answer.toLowerCase().includes(e.toLowerCase());return u&&d});return i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Centro de Ayuda"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Encuentra respuestas y soporte para el sistema"})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx($d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),i.jsx("input",{type:"text",placeholder:"Buscar en el centro de ayuda...",value:e,onChange:c=>r(c.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900 rounded-full inline-block mb-3",children:i.jsx(LN,{className:"text-indigo-600 dark:text-indigo-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Chat en Vivo"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Chatea con nuestro equipo de soporte"}),i.jsx("span",{className:"text-sm text-indigo-600 dark:text-indigo-400 font-medium",children:"Iniciar Chat "})]}),i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-emerald-100 dark:bg-emerald-900 rounded-full inline-block mb-3",children:i.jsx(lh,{className:"text-emerald-600 dark:text-emerald-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Email"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"soporte@sistemaenvios.com"}),i.jsx("span",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-medium",children:"Enviar Email "})]}),i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900 rounded-full inline-block mb-3",children:i.jsx(xl,{className:"text-purple-600 dark:text-purple-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Telfono"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"+1 (809) 555-0123"}),i.jsx("span",{className:"text-sm text-purple-600 dark:text-purple-400 font-medium",children:"Llamar "})]}),i.jsxs("button",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6 hover:shadow-lg transition text-left",children:[i.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900 rounded-full inline-block mb-3",children:i.jsx(_z,{className:"text-amber-600 dark:text-amber-300",size:24})}),i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Videoconferencia"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Agenda una sesin con soporte"}),i.jsx("span",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"Agendar "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"Preguntas Frecuentes"}),i.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:s.map(c=>{const u=c.icon;return i.jsxs("button",{onClick:()=>a(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition ${n===c.id?"bg-indigo-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:[i.jsx(u,{size:16}),c.name]},c.id)})}),i.jsx("div",{className:"space-y-4",children:l.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(vz,{className:"mx-auto text-slate-400 dark:text-slate-600 mb-3",size:48}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No se encontraron resultados"})]}):l.map((c,u)=>i.jsxs("details",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("summary",{className:"font-medium text-slate-900 dark:text-white",children:c.question}),i.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400 leading-relaxed",children:c.answer})]},u))})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Recursos tiles"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("a",{href:"#",className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:i.jsx(s3e,{className:"text-indigo-600 dark:text-indigo-300",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"Documentacin Completa"}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Guas detalladas de uso del sistema"})]})]}),i.jsxs("a",{href:"#",className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:i.jsx(_z,{className:"text-indigo-600 dark:text-indigo-300",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"Video Tutoriales"}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"Aprende con videos paso a paso"})]})]}),i.jsxs("a",{href:"#",className:"flex items-start gap-3 p-3 bg-slate-50 dark:bg-slate-700 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-600 transition",children:[i.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900 rounded-lg",children:i.jsx(Nu,{className:"text-indigo-600 dark:text-indigo-300",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:"Notas de Versin"}),i.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:"ltimas actualizaciones y mejoras"})]})]})]})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-200 mb-2",children:"Tu Cuenta"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-indigo-800 dark:text-indigo-300",children:[i.jsx("strong",{children:"Usuario:"})," ",t==null?void 0:t.nombre]}),i.jsxs("p",{className:"text-indigo-800 dark:text-indigo-300",children:[i.jsx("strong",{children:"Rol:"})," ",t==null?void 0:t.rol]}),i.jsxs("p",{className:"text-indigo-800 dark:text-indigo-300",children:[i.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]})]})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded-full animate-pulse"}),i.jsx("h3",{className:"text-lg font-semibold text-emerald-900 dark:text-emerald-200",children:"Sistema Operativo"})]}),i.jsx("p",{className:"text-sm text-emerald-800 dark:text-emerald-300",children:"Todos los servicios funcionando correctamente"})]})]})]})]})},ZHe=({onScan:t,isActive:e=!0,minChars:r=3,className:n="",ignoreIfFocusOnInput:a=!0,showStatus:s=!0})=>{const[o,l]=A.useState(null),[c,u]=A.useState(!1),d=A.useRef(""),h=A.useRef(0),p=A.useRef(null);return A.useEffect(()=>{if(!e)return;const g=b=>{if(a){const N=b.target.tagName.toLowerCase();if(N==="input"||N==="textarea")return}const w=Date.now(),_=w-h.current;if(_>100&&d.current.length>0&&(d.current="",u(!1)),_<50&&d.current.length>0&&(u(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>u(!1),500)),h.current=w,b.key==="Enter"){const N=d.current;N.length>=r&&(console.log("Barcode scanned:",N),l(N),t&&t(N),d.current="",b.preventDefault())}else b.key.length===1&&(d.current+=b.key)};return window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g),p.current&&clearTimeout(p.current)}},[e,t,r,a]),s?i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${c?"bg-blue-100 text-blue-700 border border-blue-200 shadow-sm":o?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-50 text-slate-500 border border-slate-200"} ${n}`,children:[i.jsx(kre,{className:`w-4 h-4 ${c?"animate-pulse":""}`}),i.jsx("span",{children:c?"Recibiendo datos...":o?`ltimo: ${o}`:"Listo para escanear"})]}):null},QHe=({factura:t,onClose:e,companyName:r="PROLOGIX"})=>{var l;const[n,a]=A.useState("4x2"),s=A.useMemo(()=>{if(!t)return[];let c=[];return t.items&&t.items.forEach((u,d)=>{var p;const h=u.cantidad||1;for(let g=0;g<h;g++)c.push({uniqueCode:`${t.codigoTracking}-${d}-${g}`,tracking:t.codigoTracking,itemDesc:u.descripcion||u.producto||"Item Sin Descripcin",itemIndex:d,unitIndex:g,totalUnits:h,recipientName:((p=t.destinatario)==null?void 0:p.nombre)||"Cliente General",date:new Date().toLocaleDateString("es-DO")})}),c},[t]),o=()=>{window.print()};return i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[9000]",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg no-print animate-in fade-in zoom-in duration-200",children:[i.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 p-2 rounded-lg text-indigo-600 dark:text-indigo-400",children:i.jsx(M4e,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Imprimir Etiquetas"}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.codigoTracking})]})]}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:[i.jsx(EP,{size:16}),"Configuracin de Impresin"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>a("4x2"),className:`flex flex-col items-center justify-center p-3 border-2 rounded-xl transition-all ${n==="4x2"?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"font-bold text-lg",children:'4" x 2"'}),i.jsx("span",{className:"text-xs opacity-80",children:"Etiqueta Item"})]}),i.jsxs("button",{onClick:()=>a("4x6"),className:`flex flex-col items-center justify-center p-3 border-2 rounded-xl transition-all ${n==="4x6"?"border-indigo-600 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-700 dark:text-indigo-300":"border-slate-200 dark:border-slate-700 hover:border-indigo-300 dark:hover:border-slate-600"}`,children:[i.jsx("span",{className:"font-bold text-lg",children:'4" x 6"'}),i.jsx("span",{className:"text-xs opacity-80",children:"Etiqueta Envo"})]})]}),i.jsxs("p",{className:"text-xs text-slate-500 mt-2 text-center",children:["Asegrate de configurar tu impresora trmica con el tamao de papel correcto (",n==="4x2"?"101x50mm":"101x152mm",")."]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-xl border border-slate-200 dark:border-slate-600 mb-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 mb-2",children:"Resumen de Impresin"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Items:"}),i.jsx("strong",{className:"text-slate-900 dark:text-white",children:((l=t.items)==null?void 0:l.length)||0})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Etiquetas a Generar:"}),i.jsx("strong",{className:"text-emerald-600 font-bold",children:s.length})]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"w-1/3 px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:"Cancelar"}),i.jsxs("button",{onClick:o,className:"w-2/3 bg-indigo-600 text-white py-2 rounded-lg font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-500/30 transition-all active:scale-95",children:[i.jsx(ql,{size:20}),"Imprimir ",s.length," Etiquetas"]})]})]})]}),i.jsx(ise,{labels:s,companyName:r,size:n})]})},qT=()=>{var Ve,zt,Wt,Yt,ar,Xe,qt,kt,gt,Ft,Vt,Nr,sr,it,ir;Fs();const[t,e]=A.useState([]),[r,n]=A.useState(null),[a,s]=A.useState("lista"),[o,l]=A.useState("activos"),[c,u]=A.useState(""),[d,h]=A.useState(""),[p,g]=A.useState(null),[b,w]=A.useState(null),[_,N]=A.useState({}),[S,T]=A.useState(""),[R,z]=A.useState(null),[G,O]=A.useState(!1),[D,I]=A.useState(!1),[V,P]=A.useState(null),[B,F]=A.useState(null),[ee,Z]=A.useState(!1),[ce,ne]=A.useState(null),[ae,me]=A.useState(null),[Te,we]=A.useState(null),[q,Y]=A.useState(null),[X,re]=A.useState([]);A.useEffect(()=>{se()},[]);const se=async()=>{try{I(!0);const be=await wt.get("/almacen-usa/contenedores");be.data.success&&e(be.data.data)}catch(be){console.error("Error cargando contenedores:",be),P("Error al cargar los contenedores")}finally{I(!1)}},Ce=t.filter(be=>o==="activos"?be.estado!=="trabajado":be.estado==="trabajado"),je=async be=>{var Ze,at;be.preventDefault();try{I(!0),P(null);const Qe=await wt.post("/almacen-usa/contenedores",{});Qe.data.success&&(F("Contenedor creado exitosamente"),u(""),n(Qe.data.data),s("trabajar"),await se())}catch(Qe){console.error("Error creando contenedor:",Qe),P(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al crear el contenedor")}finally{I(!1)}},pe=async be=>{var Ze,at;if(be.preventDefault(),!d.trim()){P("Ingresa un cdigo de tracking");return}try{I(!0),P(null),g(null);const Qe=await wt.get(`/almacen-usa/facturas/buscar/${d.trim()}`);Qe.data.success&&(g(Qe.data.data),F("Factura encontrada"))}catch(Qe){console.error("Error buscando factura:",Qe),P(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Factura no encontrada")}finally{I(!1)}},Oe=async be=>{var Ze,at;if(be.preventDefault(),!S.trim()){P("Ingresa un cdigo de tracking");return}try{I(!0),P(null),z(null);const Qe=await wt.get(`/almacen-usa/facturas/buscar/${S.trim()}`);Qe.data.success&&(z(Qe.data.data),O(!0))}catch(Qe){console.error("Error en bsqueda global:",Qe),P(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Factura no encontrada")}finally{I(!1)}},qe=async()=>{var be,Ze;if(!(!p||!r))try{I(!0),P(null),(await wt.post(`/almacen-usa/contenedores/${r.id}/facturas`,{facturaId:p.id})).data.success&&(F("Factura agregada al contenedor"),await Ue(r.id),g(null),h(""))}catch(at){console.error("Error agregando factura:",at),P(((Ze=(be=at.response)==null?void 0:be.data)==null?void 0:Ze.message)||"Error al agregar la factura")}finally{I(!1)}},Ue=async be=>{try{const Ze=await wt.get(`/almacen-usa/contenedores/${be}`);Ze.data.success&&n(Ze.data.data)}catch(Ze){console.error("Error cargando contenedor:",Ze),P("Error al cargar el contenedor")}},Me=async be=>{var Ze,at;try{I(!0),P(null),(await wt.delete(`/almacen-usa/contenedores/${r.id}/facturas/${be}`)).data.success&&(F("Factura quitada del contenedor"),await Ue(r.id),me(null),(b==null?void 0:b.id)===be&&w(null))}catch(Qe){console.error("Error quitando factura:",Qe),P(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al quitar la factura")}finally{I(!1)}},Be=async(be,Ze,at)=>{var Qe,ze;try{if(I(!0),P(null),(await wt.post(`/almacen-usa/contenedores/${r.id}/unidades/marcar`,{facturaId:be,itemIndex:Ze,unidadIndex:at})).data.success&&(await Ue(r.id),b&&b.id===be)){const St=r.facturas.find(tr=>tr.id===be);St&&w(St)}}catch(st){console.error("Error marcando unidad:",st),P(((ze=(Qe=st.response)==null?void 0:Qe.data)==null?void 0:ze.message)||"Error al marcar la unidad")}finally{I(!1)}},ve=async(be=!1)=>{var Ze,at,Qe,ze;try{I(!0),P(null),(await wt.post(`/almacen-usa/contenedores/${r.id}/cerrar`,{forzarCierre:be})).data.success&&(F("Contenedor cerrado exitosamente"),Z(!1),re([]),s("lista"),n(null),await se())}catch(st){console.error("Error cerrando contenedor:",st),(at=(Ze=st.response)==null?void 0:Ze.data)!=null&&at.requiereConfirmacion?(re(st.response.data.facturasIncompletas),Z(!0)):P(((ze=(Qe=st.response)==null?void 0:Qe.data)==null?void 0:ze.message)||"Error al cerrar el contenedor")}finally{I(!1)}},Ht=async be=>{var Ze,at;try{I(!0),P(null),(await wt.delete(`/almacen-usa/contenedores/${be}`)).data.success&&(F("Contenedor eliminado exitosamente"),ne(null),(r==null?void 0:r.id)===be&&(s("lista"),n(null)),await se())}catch(Qe){console.error("Error eliminando contenedor:",Qe),P(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al eliminar el contenedor"),ne(null)}finally{I(!1)}},mt=async be=>{var Ze,at;try{I(!0),P(null),(await wt.post(`/almacen-usa/contenedores/${be}/trabajado`)).data.success&&(F("Contenedor marcado como trabajado"),we(null),(r==null?void 0:r.id)===be&&(s("lista"),n(null)),await se())}catch(Qe){console.error("Error marcando como trabajado:",Qe),P(((at=(Ze=Qe.response)==null?void 0:Ze.data)==null?void 0:at.message)||"Error al marcar como trabajado"),we(null)}finally{I(!1)}},Ut=async be=>{n(be),await Ue(be.id),s("trabajar")},et=()=>{s("lista"),n(null),w(null),h(""),g(null),se()};A.useEffect(()=>{if(V||B){const be=setTimeout(()=>{P(null),F(null)},5e3);return()=>clearTimeout(be)}},[V,B]);const er=async be=>{if(!r){Ke.error("Debes abrir un contenedor para escanear items");return}console.log("Escaneado:",be);const Ze=be.match(/^(.*)-(\d+)-(\d+)$/);if(Ze){const[at,Qe,ze,st]=Ze,St=parseInt(ze),tr=parseInt(st),It=r.facturas.find(Er=>Er.codigoTracking===Qe);It?(Ke.promise(Be(It.id,St,tr),{loading:"Marcando unidad...",success:`Item escaneado: ${Qe} [${tr+1}]`,error:"Error al marcar unidad"}),(!b||b.id!==It.id)&&w(It)):Ke.error(`Factura ${Qe} no encontrada en este contenedor`)}else{const at=r.facturas.find(Qe=>Qe.codigoTracking===be);at?(w(at),Ke.success("Factura localizada en el contenedor")):(h(be),Ke.info("Factura no est en contenedor. Buscando..."))}};return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6",children:[i.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Xu,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Almacn USA"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestin de contenedores y escaneo de items"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[a==="lista"&&i.jsxs("form",{onSubmit:Oe,className:"flex gap-2",children:[i.jsx("input",{type:"text",value:S,onChange:be=>T(be.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Buscar factura..."}),i.jsx("button",{type:"submit",disabled:D,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition",children:i.jsx($d,{size:20})})]}),a!=="lista"&&i.jsxs("button",{onClick:et,className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:[i.jsx(Hl,{size:20}),"Volver"]})]})]})}),V&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-rose-100 border border-rose-400 text-rose-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(hi,{size:20}),i.jsx("span",{children:V})]})}),B&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-emerald-100 border border-emerald-400 text-emerald-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(rd,{size:20}),i.jsx("span",{children:B})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto",children:[a==="lista"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>l("activos"),className:`px-6 py-3 rounded-lg transition font-semibold ${o==="activos"?"bg-indigo-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xu,{size:20}),"Activos (",t.filter(be=>be.estado!=="trabajado").length,")"]})}),i.jsx("button",{onClick:()=>l("historial"),className:`px-6 py-3 rounded-lg transition font-semibold ${o==="historial"?"bg-indigo-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cre,{size:20}),"Historial (",t.filter(be=>be.estado==="trabajado").length,")"]})})]}),o==="activos"&&i.jsxs("button",{onClick:()=>s("crear"),className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[i.jsx(Vd,{size:20}),"Nuevo Contenedor"]})]}),D?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx(bs,{className:"animate-spin text-indigo-600",size:48})}):Ce.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-12 text-center",children:[i.jsx(Lr,{className:"mx-auto text-slate-400 mb-4",size:64}),i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:["No hay contenedores ",o==="historial"?"en el historial":""]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:o==="activos"?"Crea tu primer contenedor para empezar a gestionar el inventario":"Los contenedores trabajados aparecern aqu"}),o==="activos"&&i.jsx("button",{onClick:()=>s("crear"),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Crear Contenedor"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ce.map(be=>{var Ze,at,Qe,ze,st,St;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow hover:shadow-lg transition p-6",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Xu,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:be.numeroContenedor}),i.jsx("span",{className:`text-sm px-2 py-1 rounded ${be.estado==="abierto"?"bg-emerald-100 text-emerald-800":be.estado==="trabajado"?"bg-slate-100 text-slate-800":be.estado==="recibido_rd"?"bg-purple-100 text-purple-800":"bg-indigo-100 text-indigo-800"}`,children:be.estado==="abierto"?"Abierto":be.estado==="trabajado"?"Trabajado":be.estado==="recibido_rd"?"Recibido RD":be.estado==="en_transito_rd"?"En Trnsito":"Cerrado"})]})]})}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Facturas:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:((Ze=be.estadisticas)==null?void 0:Ze.totalFacturas)||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Unidades:"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[((at=be.estadisticas)==null?void 0:at.unidadesMarcadas)||((Qe=be.estadisticas)==null?void 0:Qe.itemsMarcados)||0," / ",((ze=be.estadisticas)==null?void 0:ze.unidadesTotales)||((st=be.estadisticas)==null?void 0:st.totalItems)||0]})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Monto:"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:["$",(((St=be.estadisticas)==null?void 0:St.montoTotal)||0).toFixed(2)]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>Ut(be),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[i.jsx(Su,{size:20}),"Ver"]}),be.estado==="abierto"&&i.jsx("button",{onClick:()=>ne(be),className:"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition",children:i.jsx(wz,{size:20})}),be.estado==="recibido_rd"&&i.jsx("button",{onClick:()=>we(be),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition",children:i.jsx(Jr,{size:20})})]})]},be.id)})})]}),a==="crear"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-white mb-6",children:"Crear Nuevo Contenedor"}),i.jsxs("form",{onSubmit:je,className:"space-y-6",children:[i.jsxs("div",{className:"bg-blue-50 text-blue-800 p-4 rounded-lg flex items-start gap-3",children:[i.jsx(Xu,{className:"mt-1"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:"Generacin Automtica"}),i.jsxs("p",{className:"text-sm mt-1",children:["El nmero de contenedor ser generado automticamente por el sistema siguiendo el formato: ",i.jsx("strong",{children:"[PREFIJO]-CNT-[NMERO]"}),i.jsx("br",{}),"Ejemplo: EMI-CNT-0001"]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:D,className:"flex-1 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:D?i.jsxs(i.Fragment,{children:[i.jsx(bs,{className:"animate-spin",size:20}),"Creando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Vd,{size:20}),"Crear Contenedor"]})}),i.jsx("button",{type:"button",onClick:et,className:"px-6 py-3 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})]}),a==="trabajar"&&r&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Xu,{className:"text-indigo-600",size:40}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.numeroContenedor}),i.jsx("span",{className:`text-sm px-3 py-1 rounded inline-block mt-1 ${r.estado==="abierto"?"bg-emerald-100 text-emerald-800":r.estado==="trabajado"?"bg-slate-100 text-slate-800":r.estado==="recibido_rd"?"bg-purple-100 text-purple-800":"bg-indigo-100 text-indigo-800"}`,children:r.estado==="abierto"?"Abierto":r.estado==="trabajado"?"Trabajado":r.estado==="recibido_rd"?"Recibido RD":r.estado==="en_transito_rd"?"En Trnsito":"Cerrado"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((Ve=r.estadisticas)==null?void 0:Ve.totalFacturas)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Facturas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((zt=r.estadisticas)==null?void 0:zt.unidadesTotales)||((Wt=r.estadisticas)==null?void 0:Wt.totalItems)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Unidades"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:((Yt=r.estadisticas)==null?void 0:Yt.unidadesMarcadas)||((ar=r.estadisticas)==null?void 0:ar.itemsMarcados)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Marcadas"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:["$",(((Xe=r.estadisticas)==null?void 0:Xe.montoTotal)||0).toFixed(2)]}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Total"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[r.estado==="abierto"&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>ve(!1),disabled:D||!((qt=r.facturas)!=null&&qt.length),className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2 disabled:opacity-50",children:[i.jsx(eb,{size:20}),"Cerrar"]}),i.jsxs("button",{onClick:()=>ne(r),disabled:D,className:"px-6 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition flex items-center gap-2 disabled:opacity-50",children:[i.jsx(wz,{size:20}),"Eliminar"]})]}),r.estado==="recibido_rd"&&i.jsxs("button",{onClick:()=>we(r),disabled:D,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2 disabled:opacity-50",children:[i.jsx(Jr,{size:20}),"Marcar Trabajado"]})]})]})}),r.estado==="abierto"&&!b&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:"Buscar Factura"}),i.jsxs("form",{onSubmit:pe,className:"flex flex-col sm:flex-row gap-3 mb-4",children:[i.jsx("input",{type:"text",value:d,onChange:be=>h(be.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Cdigo de tracking (Ej: RC-20250130-0001)"}),i.jsxs("button",{type:"submit",disabled:D,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:[D?i.jsx(bs,{className:"animate-spin",size:20}):i.jsx($d,{size:20}),"Buscar"]})]}),p&&i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 bg-indigo-50 dark:bg-indigo-900/20",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:p.codigoTracking}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:((kt=p.destinatario)==null?void 0:kt.nombre)||"Destinatario"})]}),i.jsxs("span",{className:"text-sm font-medium px-2 py-1 bg-indigo-100 text-indigo-800 rounded",children:[((gt=p.items)==null?void 0:gt.length)||0," items"]})]}),i.jsxs("button",{onClick:qe,disabled:D,className:"w-full px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50 flex items-center justify-center gap-2",children:[i.jsx(Vd,{size:20}),"Agregar al Contenedor"]})]})]}),!b&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:["Facturas en el Contenedor (",((Ft=r.facturas)==null?void 0:Ft.length)||0,")"]}),r.facturas&&r.facturas.length>0?i.jsx("div",{className:"space-y-3",children:r.facturas.map(be=>i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:be.codigoTracking}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Unidades: ",be.unidadesMarcadas||be.itemsMarcados||0," / ",be.unidadesTotales||be.itemsTotal||0]})]}),i.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[i.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium flex-1 sm:flex-none text-center ${be.estadoItems==="completo"?"bg-emerald-100 text-emerald-800":be.estadoItems==="incompleto"?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-800"}`,children:be.estadoItems==="completo"?"Completa":be.estadoItems==="incompleto"?"Incompleta":"Pendiente"}),i.jsx("button",{onClick:()=>Y(be),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition flex items-center gap-2",title:"Imprimir Etiquetas",children:i.jsx(ql,{size:18})}),i.jsxs("button",{onClick:()=>w(be),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Su,{size:18}),"Ver"]}),r.estado==="abierto"&&i.jsx("button",{onClick:()=>me(be),className:"px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition flex items-center gap-2",children:i.jsx(Zn,{size:18})})]})]})},be.id))}):i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400",children:[i.jsx(Lr,{className:"mx-auto mb-3 text-slate-400",size:48}),i.jsx("p",{children:"No hay facturas en este contenedor"}),i.jsx("p",{className:"text-sm mt-1",children:"Usa el buscador para agregar facturas"})]})]}),b&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Items de ",b.codigoTracking]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:r.estado==="abierto"?"Marca cada item escaneado":"Vista de solo lectura"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>Y(b),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(ql,{size:20}),"Imprimir Etiquetas"]}),i.jsxs("button",{onClick:()=>w(null),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition flex items-center gap-2",children:[i.jsx(Hl,{size:20}),"Volver"]})]})]}),i.jsx("div",{className:"space-y-4",children:b.items&&b.items.length>0?b.items.map((be,Ze)=>{const at=be.cantidad||1,Qe=be.unidades||Array.from({length:at},(ze,st)=>({numero:st+1,marcado:!1,fechaMarcado:null}));return i.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4 bg-white dark:bg-slate-800",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3 pb-3 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:["Item #",Ze+1]}),i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white flex-1",children:be.descripcion||be.producto||"Sin descripcin"}),i.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:["$",be.precio]})]}),i.jsx("div",{className:"space-y-2",children:Qe.map((ze,st)=>{const St=ze.marcado;return i.jsx("div",{className:`border rounded-lg p-3 transition ${St?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20":"border-slate-200 dark:border-slate-600 hover:border-indigo-300"}`,children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:`text-sm font-medium px-2 py-1 rounded ${St?"bg-emerald-200 text-emerald-900":"bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300"}`,children:["Unidad ",ze.numero,"/",at]}),St&&ze.fechaMarcado&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(ze.fechaMarcado).toLocaleTimeString("es-DO",{hour:"2-digit",minute:"2-digit"})})]})}),r.estado==="abierto"?i.jsx("button",{onClick:()=>Be(b.id,Ze,st),disabled:D,className:`px-4 py-2 rounded-lg transition flex items-center gap-2 disabled:opacity-50 whitespace-nowrap ${St?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:St?i.jsxs(i.Fragment,{children:[i.jsx(rd,{size:18}),"Escaneado"]}):i.jsxs(i.Fragment,{children:[i.jsx($d,{size:18}),"Escanear"]})}):i.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-medium ${St?"bg-emerald-100 text-emerald-800":"bg-slate-100 text-slate-800"}`,children:St?"Escaneado":"Pendiente"})]})},st)})})]},Ze)}):i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No hay items en esta factura"})})]})]})]}),ee&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(hi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Facturas Incompletas"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Hay ",i.jsx("strong",{children:X.length})," factura(s) con items sin marcar:"]}),i.jsx("ul",{className:"space-y-2 mb-4 max-h-40 overflow-y-auto",children:X.map(be=>i.jsxs("li",{className:"text-sm bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[i.jsx("span",{className:"font-medium",children:be.codigoTracking}),i.jsxs("span",{className:"text-slate-600 dark:text-slate-400",children:[" "," ",be.itemsMarcados,"/",be.itemsTotal," marcados"]})]},be.id))}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:["Si cierras el contenedor ahora, estas facturas quedarn marcadas como ",i.jsx("strong",{children:"INCOMPLETAS"}),"."]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>ve(!0),disabled:D,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition disabled:opacity-50",children:D?"Cerrando...":"Cerrar de Todas Formas"}),i.jsx("button",{onClick:()=>{Z(!1),re([])},className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),ce&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(hi,{className:"text-rose-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Eliminar Contenedor"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Ests seguro de que deseas eliminar el contenedor ",i.jsx("strong",{children:ce.numeroContenedor}),"?"]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:((Vt=ce.estadisticas)==null?void 0:Vt.totalFacturas)>0?i.jsxs(i.Fragment,{children:["Este contenedor tiene ",i.jsx("strong",{children:ce.estadisticas.totalFacturas})," factura(s). Las facturas volvern a estar disponibles."]}):i.jsx(i.Fragment,{children:"Esta accin no se puede deshacer."})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>Ht(ce.id),disabled:D,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition disabled:opacity-50",children:D?"Eliminando...":"Eliminar"}),i.jsx("button",{onClick:()=>ne(null),className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),ae&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(hi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Quitar Factura"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Ests seguro de que deseas quitar la factura ",i.jsx("strong",{children:ae.codigoTracking})," del contenedor?"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:["La factura volver a estar disponible y podr ser agregada a otro contenedor.",ae.itemsMarcados>0&&i.jsxs(i.Fragment,{children:[" Los ",ae.itemsMarcados," item(s) marcados se resetearn."]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>Me(ae.id),disabled:D,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 transition disabled:opacity-50",children:D?"Quitando...":"Quitar Factura"}),i.jsx("button",{onClick:()=>me(null),className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),Te&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Jr,{className:"text-emerald-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Marcar como Trabajado"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Ests seguro de que deseas marcar el contenedor ",i.jsx("strong",{children:Te.numeroContenedor})," como trabajado?"]}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:["El contenedor se mover al ",i.jsx("strong",{children:"HISTORIAL"})," y ya no aparecer en la lista de activos. Esta accin indica que todas las facturas han sido procesadas correctamente."]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>mt(Te.id),disabled:D,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:opacity-50",children:D?"Procesando...":"Marcar Trabajado"}),i.jsx("button",{onClick:()=>we(null),className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),G&&R&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Resultado de Bsqueda"}),i.jsx("button",{onClick:()=>{O(!1),z(null),T("")},className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-lg text-slate-900 dark:text-white",children:R.codigoTracking}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:["Cliente: ",((Nr=R.destinatario)==null?void 0:Nr.nombre)||"N/A"]})]}),i.jsx("span",{className:`px-3 py-1 rounded text-sm font-medium ${R.estado==="pendiente"?"bg-emerald-100 text-emerald-800":R.estado==="en_contenedor"?"bg-indigo-100 text-indigo-800":"bg-slate-100 text-slate-800"}`,children:(sr=R.estado)==null?void 0:sr.toUpperCase().replace(/_/g," ")})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Items:"}),i.jsx("span",{className:"ml-2 font-semibold text-slate-900 dark:text-white",children:((it=R.items)==null?void 0:it.length)||0})]}),R.contenedorId&&i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Contenedor:"}),i.jsx("span",{className:"ml-2 font-semibold text-indigo-600",children:((ir=t.find(be=>be.id===R.contenedorId))==null?void 0:ir.numeroContenedor)||"N/A"})]})]})]}),R.estado==="pendiente"&&i.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-emerald-800 dark:text-emerald-200 text-sm",children:" Esta factura est disponible para ser agregada a un contenedor"})}),R.estado==="en_contenedor"&&i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-indigo-800 dark:text-indigo-200 text-sm",children:" Esta factura ya est en un contenedor"})}),i.jsx("div",{className:"flex gap-3",children:i.jsx("button",{onClick:()=>{O(!1),z(null),T("")},className:"flex-1 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cerrar"})})]})}),q&&i.jsx(QHe,{factura:q,onClose:()=>Y(null)}),i.jsx(ZHe,{onScan:er,isActive:!!r&&a==="trabajar",minChars:3})]})},GT=()=>{var Ze,at,Qe,ze,st,St,tr,It,Er,en,$r,jn,fr,dn,Vn,on,_n,Zr,tn,de,ge,Ne,Ee,ke,Pe,lt,jt,rt;Fs();const[t,e]=A.useState([]),[r,n]=A.useState(null),[a,s]=A.useState("en_transito"),[o,l]=A.useState("lista"),[c,u]=A.useState(null),[d,h]=A.useState(0),[p,g]=A.useState(0),[b,w]=A.useState(!1),[_,N]=A.useState(null),[S,T]=A.useState(null),[R,z]=A.useState(null),[G,O]=A.useState(null),[D,I]=A.useState(null),[V,P]=A.useState(!1),[B,F]=A.useState(!1),[ee,Z]=A.useState(""),[ce,ne]=A.useState(""),[ae,me]=A.useState(""),[Te,we]=A.useState(""),[q,Y]=A.useState(""),[X,re]=A.useState(""),[se,Ce]=A.useState(""),[je,pe]=A.useState({metodoPago:"",montoPago:"",estadoPago:"pendiente",referenciaPago:"",notasPago:""}),[Oe,qe]=A.useState(!1),[Ue,Me]=A.useState(null),[Be,ve]=A.useState(null),[Ht,mt]=A.useState(!1),[Ut,et]=A.useState(""),[er,Ve]=A.useState(null),zt=[{value:"Capital",label:" Capital (Santo Domingo)",color:"blue"},{value:"Sur",label:" Sur",color:"green"},{value:"Cibao",label:" Cibao (Santiago)",color:"purple"},{value:"Este",label:" Este (Punta Cana)",color:"yellow"},{value:"Local",label:" Local (Ban)",color:"orange"}];A.useEffect(()=>{Yt()},[a]),A.useEffect(()=>{if(!Ht||!r)return;const Ae=Ge=>{["INPUT","TEXTAREA"].includes(Ge.target.tagName)||(Ge.key==="Enter"?Ut&&(Wt(Ut),et("")):Ge.key.length===1&&et(dt=>dt+Ge.key))};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[Ht,Ut,r]);const Wt=async Ae=>{if(Ve(Ae),console.log(" Cdigo escaneado en Almacn RD:",Ae),!r.facturas)return;let Ge=!1,dt=null,At=-1;for(const yt of r.facturas)if(yt.items){const Ct=yt.codigoTracking===Ae||yt.numeroFactura===Ae,Xt=yt.items.map((vr,_t)=>({item:vr,index:_t})).filter(({item:vr})=>vr.codigoBarras===Ae||Ct);if(Xt.length>0){const vr=Xt.find(({item:_t})=>_t.estado!=="recibido_rd"&&_t.estado!=="entregado");if(vr){dt=yt,At=vr.index,Ge=!0;break}else if(Xt.length>0){Ke.info(`Item(s) ya recibido(s) para: ${Ae}`);return}}}if(Ge&&dt)try{const yt=dt.id||dt.facturaId||dt.recoleccionId;if((await wt.post(`/almacen-rd/facturas/${yt}/items/recibir`,{itemIndex:At})).data.success){Ke.success(` Item recibido: ${dt.codigoTracking} - Item #${At+1}`);const Xt=r.facturas.map(vr=>{if((vr.id||vr.facturaId||vr.recoleccionId)===yt){const Hr=[...vr.items];Hr[At]={...Hr[At],estado:"recibido_rd"};const Fr=Hr.every(Ua=>Ua.estado==="recibido_rd"||Ua.estado==="entregado");return{...vr,items:Hr,estado:Fr?"recibida_rd":vr.estado,itemsMarcados:(vr.itemsMarcados||0)+1}}return vr});n({...r,facturas:Xt})}}catch(yt){console.error("Error al recibir item escaneado:",yt),Ke.error("Error al procesar scan")}else Ke.error(`Cdigo no encontrado o ya procesado: ${Ae}`)},Yt=async()=>{try{qe(!0),Me(null);const Ae=a==="en_transito"?"/almacen-rd/contenedores/en-transito":"/almacen-rd/contenedores/recibidos",Ge=await wt.get(Ae);Ge.data.success&&e(Ge.data.data);const[dt,At]=await Promise.all([wt.get("/almacen-rd/contenedores/en-transito"),wt.get("/almacen-rd/contenedores/recibidos")]);dt.data.success&&h(dt.data.data.length),At.data.success&&g(At.data.data.length)}catch(Ae){Me("Error al cargar los contenedores"),console.error("Error:",Ae)}finally{qe(!1)}},ar=async()=>{var Ae,Ge,dt,At;if(r)try{qe(!0),Me(null),console.log(" Confirmando recepcin del contenedor:",r.id);const yt=await wt.post(`/almacen-rd/contenedores/${r.id}/confirmar-recepcion`,{notas:ee});if(yt.data.success){if(ve("Contenedor recibido exitosamente en RD"),w(!1),Z(""),(Ge=(Ae=yt.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)console.log(" Usando contenedor del response"),n(yt.data.data.contenedor);else{console.log(" Fallback: Consultando endpoint");const Ct=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Ct.data.data)}await Yt()}}catch(yt){Me(((At=(dt=yt.response)==null?void 0:dt.data)==null?void 0:At.message)||"Error al confirmar recepcin"),console.error("Error confirmando recepcin:",yt)}finally{qe(!1)}},Xe=async(Ae,Ge)=>{var dt,At,yt,Ct,Xt;if(!(!r||!c))try{qe(!0);const vr=c.id||c.facturaId,_t=await wt.post(`/almacen-rd/facturas/${vr}/items/danado`,{itemIndex:Ae,danado:Ge,notasDano:ce});if(_t.data.success){if(ve(Ge?"Item marcado como daado":"Item marcado como normal"),N(null),ne(""),(At=(dt=_t.data)==null?void 0:dt.data)!=null&&At.contenedor)n(_t.data.data.contenedor);else{const Fr=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Fr.data.data)}const Hr=(yt=r.facturas)==null?void 0:yt.find(Fr=>(Fr.id||Fr.facturaId)===vr);Hr&&u(Hr)}}catch(vr){Me(((Xt=(Ct=vr.response)==null?void 0:Ct.data)==null?void 0:Xt.message)||"Error al marcar item"),console.error("Error:",vr)}finally{qe(!1)}},qt=async()=>{var Ae,Ge,dt,At;if(!(!r||!S||!ae))try{qe(!0);const yt=S.id||S.facturaId,Ct=await wt.post(`/almacen-rd/facturas/${yt}/asignar-ruta`,{ruta:ae});if(Ct.data.success)if(ve(`Factura asignada a ruta ${ae}`),T(null),me(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(yt){Me(((At=(dt=yt.response)==null?void 0:dt.data)==null?void 0:At.message)||"Error al asignar ruta"),console.error("Error:",yt)}finally{qe(!1)}},kt=async()=>{var Ae,Ge,dt,At;if(!(!R||!ae))try{qe(!0);const yt=R.id||R.facturaId,Ct=await wt.put(`/almacen-rd/facturas/${yt}/reasignar-ruta`,{nuevaRuta:ae,motivo:Te});if(Ct.data.success)if(ve(`Factura reasignada a ${ae}`),z(null),me(""),we(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(yt){Me(((At=(dt=yt.response)==null?void 0:dt.data)==null?void 0:At.message)||"Error al reasignar factura"),console.error("Error:",yt)}finally{qe(!1)}},gt=async()=>{var Ae,Ge,dt,At;if(G)try{qe(!0);const yt=G.id||G.facturaId,Ct=await wt.delete(`/almacen-rd/facturas/${yt}/ruta`,{data:{motivo:q}});if(Ct.data.success)if(ve("Factura quitada de la ruta"),O(null),Y(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(yt){Me(((At=(dt=yt.response)==null?void 0:dt.data)==null?void 0:At.message)||"Error al quitar de ruta"),console.error("Error:",yt)}finally{qe(!1)}},Ft=async()=>{var Ae,Ge,dt,At;if(!(!r||!D))try{qe(!0);const yt=D.id||D.facturaId,Ct=await wt.post(`/almacen-rd/facturas/${yt}/reportar-incompleta`,{motivo:X,itemsFaltantes:se.split(",").map(Xt=>Xt.trim()).filter(Xt=>Xt)});if(Ct.data.success)if(ve("Factura reportada como incompleta"),I(null),re(""),Ce(""),(Ge=(Ae=Ct.data)==null?void 0:Ae.data)!=null&&Ge.contenedor)n(Ct.data.data.contenedor);else{const Xt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(Xt.data.data)}}catch(yt){Me(((At=(dt=yt.response)==null?void 0:dt.data)==null?void 0:At.message)||"Error al reportar factura"),console.error("Error:",yt)}finally{qe(!1)}},Vt=async Ae=>{var Ge,dt;try{qe(!0);const At=await wt.get(`/almacen-rd/facturas/${Ae}/detalle`);At.data.success&&(u(At.data.data),P(!0))}catch(At){Me(((dt=(Ge=At.response)==null?void 0:Ge.data)==null?void 0:dt.message)||"Error al cargar el detalle"),console.error("Error:",At)}finally{qe(!1)}},Nr=Ae=>{var Ge,dt,At,yt,Ct;u(Ae),pe({metodoPago:((Ge=Ae.pago)==null?void 0:Ge.metodoPago)||"",montoPago:((dt=Ae.pago)==null?void 0:dt.montoPagado)||"",estadoPago:((At=Ae.pago)==null?void 0:At.estado)||"pendiente",referenciaPago:((yt=Ae.pago)==null?void 0:yt.referenciaPago)||"",notasPago:((Ct=Ae.pago)==null?void 0:Ct.notasPago)||""}),F(!0)},sr=async()=>{var Ae,Ge;try{qe(!0);const dt=c.id||c.facturaId;if((await wt.put(`/almacen-rd/facturas/${dt}/pago`,{estado:je.estadoPago,metodoPago:je.metodoPago,montoPagado:parseFloat(je.montoPago)||0,referenciaPago:je.referenciaPago,notasPago:je.notasPago})).data.success){if(ve("Informacin de pago actualizada"),F(!1),V&&await Vt(dt),r){const yt=await wt.get(`/almacen-rd/contenedores/${r.id}`);n(yt.data.data)}await Yt()}}catch(dt){Me(((Ge=(Ae=dt.response)==null?void 0:Ae.data)==null?void 0:Ge.message)||"Error al actualizar el pago"),console.error("Error:",dt)}finally{qe(!1)}},it=Ae=>{n(Ae),l("detalle"),u(null)};A.useEffect(()=>{if(Ue||Be){const Ae=setTimeout(()=>{Me(null),ve(null)},5e3);return()=>clearTimeout(Ae)}},[Ue,Be]);const ir=({estado:Ae})=>{const Ge={pendiente:"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-400",parcial:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",pagada:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",contraentrega:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400"},dt={pendiente:"Pendiente",parcial:"Pago Parcial",pagada:"Pagada",contraentrega:"Contra Entrega"};return i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Ge[Ae]||Ge.pendiente}`,children:dt[Ae]||Ae})},be=Ae=>(Ae==null?void 0:Ae.id)||(Ae==null?void 0:Ae.facturaId)||(Ae==null?void 0:Ae.recoleccionId)||null;return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-6",children:[i.jsx("div",{className:"max-w-7xl mx-auto mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ts,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Almacn RD"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestin de contenedores recibidos en Repblica Dominicana"})]})]}),o==="detalle"&&i.jsxs("button",{onClick:()=>{l("lista"),n(null),u(null)},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:[i.jsx(Hl,{size:20}),"Volver"]})]})}),Ue&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-rose-100 border border-rose-400 text-rose-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(hi,{size:20}),i.jsx("span",{children:Ue})]})}),Be&&i.jsx("div",{className:"max-w-7xl mx-auto mb-4",children:i.jsxs("div",{className:"bg-emerald-100 border border-emerald-400 text-emerald-700 px-4 py-3 rounded-lg flex items-center gap-2",children:[i.jsx(Jr,{size:20}),i.jsx("span",{children:Be})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto",children:[o==="lista"&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex gap-2 mb-6",children:[i.jsxs("button",{onClick:()=>s("en_transito"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${a==="en_transito"?"bg-indigo-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(ts,{size:20}),"En Trnsito (",d,")"]}),i.jsxs("button",{onClick:()=>s("recibidos"),className:`flex items-center gap-2 px-6 py-3 rounded-lg transition font-semibold ${a==="recibidos"?"bg-emerald-600 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:[i.jsx(Jr,{size:20}),"Recibidos (",p,")"]})]}),Oe?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx(bs,{className:"animate-spin text-indigo-600",size:48})}):t.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-12 text-center",children:[i.jsx(Lr,{className:"mx-auto text-slate-400 mb-4",size:64}),i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:["No hay contenedores ",a==="recibidos"?"recibidos":"en trnsito"]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(Ae=>{var Ge,dt,At;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow hover:shadow-lg transition p-6",children:[i.jsx("div",{className:"flex items-start justify-between mb-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Xu,{className:"text-indigo-600",size:32}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:Ae.numeroContenedor}),i.jsx("span",{className:`text-sm px-2 py-1 rounded ${Ae.estado==="en_transito_rd"?"bg-indigo-100 text-indigo-800":"bg-emerald-100 text-emerald-800"}`,children:Ae.estado==="en_transito_rd"?"En Trnsito":"Recibido"})]})]})}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Facturas:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:((Ge=Ae.estadisticas)==null?void 0:Ge.totalFacturas)||((dt=Ae.facturas)==null?void 0:dt.length)||0})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Completas:"}),i.jsx("span",{className:"font-semibold text-emerald-600",children:((At=Ae.estadoFacturas)==null?void 0:At.completas)||0})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>it(Ae),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[i.jsx(Su,{size:20}),"Ver Detalles"]}),Ae.estado==="en_transito_rd"&&i.jsxs("button",{onClick:()=>{n(Ae),w(!0)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition",children:[i.jsx(Jr,{size:20}),"Confirmar"]})]})]},Ae.id)})})]}),o==="detalle"&&r&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Xu,{className:"text-indigo-600",size:40}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:r.numeroContenedor}),i.jsx("span",{className:`text-sm px-3 py-1 rounded inline-block mt-1 ${r.estado==="en_transito_rd"?"bg-indigo-100 text-indigo-800":"bg-emerald-100 text-emerald-800"}`,children:r.estado==="en_transito_rd"?"En Trnsito":"Recibido en RD"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:((Ze=r.estadisticas)==null?void 0:Ze.totalFacturas)||((at=r.facturas)==null?void 0:at.length)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Facturas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:((Qe=r.estadoFacturas)==null?void 0:Qe.completas)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Completas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-amber-600",children:((ze=r.estadoFacturas)==null?void 0:ze.incompletas)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Incompletas"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:((st=r.estadisticas)==null?void 0:st.totalItems)||0}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Items"})]})]}),r.estado==="en_transito_rd"&&i.jsxs("button",{onClick:()=>w(!0),className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition flex items-center gap-2",children:[i.jsx(Jr,{size:20}),"Confirmar Recepcin Total"]})]}),r.estado==="en_transito_rd"&&i.jsxs("div",{className:`mt-4 p-4 rounded-lg flex items-center justify-between transition border-2 ${Ht?"bg-indigo-50 border-indigo-400":"bg-slate-50 border-transparent"}`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:`p-3 rounded-full ${Ht?"bg-indigo-100 text-indigo-600 animate-pulse":"bg-slate-200 text-slate-500"}`,children:[i.jsx(ql,{size:24})," "]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-slate-100",children:"Modo Scanner - Recepcin de Items"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:Ht?"LISTO... Escanea tracking o barcode de item para recibir individualmente.":"Activa para recibir items uno por uno usando el scanner."})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[er&&i.jsxs("span",{className:"text-xs bg-white px-2 py-1 rounded border font-mono",children:["ltimo: ",er]}),i.jsx("button",{onClick:()=>mt(!Ht),className:`px-4 py-2 rounded-lg font-bold transition ${Ht?"bg-indigo-600 text-white shadow-lg scale-105":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:Ht?"DESACTIVAR SCANNER":"ACTIVAR SCANNER"})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-4",children:["Facturas del Contenedor (",((St=r.facturas)==null?void 0:St.length)||0,")"]}),r.facturas&&r.facturas.length>0?i.jsx("div",{className:"space-y-3",children:r.facturas.map(Ae=>{var yt,Ct,Xt,vr,_t,Hr;const Ge=be(Ae),dt=Ae.estadoItems||Ae.estadoFactura||Ae.estado||"pendiente",At=dt==="completo"||dt==="completa";return i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:Ae.numeroFactura||Ae.codigoTracking}),i.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${At?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:At?" Completa":" Incompleta"}),i.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded text-xs font-medium",children:[" ",Ae.itemsMarcados||0,"/",Ae.itemsTotal||((yt=Ae.items)==null?void 0:yt.length)||0]}),Ae.rutaAsignada&&i.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400 rounded text-xs font-medium flex items-center gap-1",children:[i.jsx(Da,{size:14}),Ae.rutaAsignada]}),i.jsx(ir,{estado:((Ct=Ae.pago)==null?void 0:Ct.estado)||"pendiente"})]})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{onClick:()=>Vt(Ge),className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition text-sm flex items-center gap-1",children:[i.jsx(Su,{size:16}),"Detalle"]}),i.jsxs("button",{onClick:()=>u(Ae),className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 transition text-sm flex items-center gap-1",children:[i.jsx(Lr,{size:16}),"Items"]}),i.jsxs("button",{onClick:()=>Nr(Ae),disabled:((Xt=Ae.pago)==null?void 0:Xt.estado)==="pagada",className:`px-3 py-1 rounded transition text-sm flex items-center gap-1 ${((vr=Ae.pago)==null?void 0:vr.estado)==="pagada"?"bg-slate-300 text-slate-500 cursor-not-allowed":"bg-emerald-600 text-white hover:bg-emerald-700"}`,title:((_t=Ae.pago)==null?void 0:_t.estado)==="pagada"?"Factura ya pagada":"Editar pago",children:[i.jsx(Jb,{size:16}),((Hr=Ae.pago)==null?void 0:Hr.estado)==="pagada"?"Pagado":"Pago"]}),r.estado==="recibido_rd"&&At&&i.jsxs(i.Fragment,{children:[Ae.rutaAsignada?i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>window.open(`/rutas/${Ae.rutaAsignada}/imprimir`,"_blank"),className:"px-3 py-1 bg-slate-600 text-white rounded hover:bg-slate-700 transition text-sm flex items-center gap-1",title:"Imprimir Ruta",children:[i.jsx(ql,{size:16}),"Imprimir"]}),i.jsxs("button",{onClick:()=>z(Ae),className:"px-3 py-1 bg-amber-600 text-white rounded hover:bg-amber-700 transition text-sm flex items-center gap-1",children:[i.jsx(U1,{size:16}),"Reasignar"]}),i.jsxs("button",{onClick:()=>O(Ae),className:"px-3 py-1 bg-rose-600 text-white rounded hover:bg-rose-700 transition text-sm flex items-center gap-1",children:[i.jsx(Zn,{size:16}),"Quitar"]})]}):i.jsxs("button",{onClick:()=>T(Ae),className:"px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition text-sm flex items-center gap-1",children:[i.jsx(Da,{size:16}),"Asignar"]}),i.jsxs("button",{onClick:()=>I(Ae),className:"px-3 py-1 bg-amber-600 text-white rounded hover:bg-amber-700 transition text-sm flex items-center gap-1",children:[i.jsx(hi,{size:16}),"Reportar"]})]})]})]})},Ge)})}):i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No hay facturas en este contenedor"})]}),c&&!V&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Items de ",c.numeroFactura||c.codigoTracking]}),i.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cerrar"})]}),i.jsx("div",{className:"space-y-3",children:c.items&&c.items.length>0?c.items.map((Ae,Ge)=>i.jsx("div",{className:`border rounded-lg p-4 ${Ae.danado?"border-rose-500 bg-rose-50 dark:bg-rose-900/20":"border-slate-200 dark:border-slate-700"}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("span",{className:"text-sm font-medium text-slate-500",children:["#",Ge+1]}),i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:Ae.descripcion||Ae.producto||"Sin descripcin"}),Ae.danado&&i.jsx("span",{className:"px-2 py-1 bg-rose-100 text-rose-800 rounded text-xs font-medium",children:" DAADO"})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("span",{children:["Cantidad: ",Ae.cantidad]}),Ae.notasDano&&i.jsxs("p",{className:"mt-1 text-rose-600 dark:text-rose-400",children:[" ",Ae.notasDano]})]})]}),r.estado==="recibido_rd"&&i.jsx("button",{onClick:()=>N({item:Ae,itemIndex:Ge,danado:!Ae.danado}),className:`px-3 py-1 rounded transition text-sm ${Ae.danado?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-rose-600 text-white hover:bg-rose-700"}`,children:Ae.danado?" Marcar Normal":" Marcar Daado"})]})},Ge)):i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No hay items en esta factura"})})]})]})]}),b&&r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Jr,{className:"text-emerald-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Confirmar Recepcin"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Confirma que has recibido el contenedor ",i.jsx("strong",{children:r.numeroContenedor})," en el almacn de Repblica Dominicana."]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas (opcional)"}),i.jsx("textarea",{value:ee,onChange:Ae=>Z(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Observaciones sobre la recepcin..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{w(!1),Z("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:ar,disabled:Oe,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:Oe?"Confirmando...":"Confirmar Recepcin"})]})]})}),_&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(hi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:_.danado?"Marcar Item como Daado":"Marcar Item como Normal"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Item: ",i.jsx("strong",{children:_.item.descripcion})]}),_.danado&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin del dao *"}),i.jsx("textarea",{value:ce,onChange:Ae=>ne(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Describe el dao encontrado..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{N(null),ne("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:()=>Xe(_.itemIndex,_.danado),disabled:Oe||_.danado&&!ce,className:`flex-1 px-4 py-2 text-white rounded-lg disabled:opacity-50 ${_.danado?"bg-rose-600 hover:bg-rose-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:Oe?"Guardando...":"Confirmar"})]})]})}),S&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Da,{className:"text-emerald-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Asignar a Ruta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Factura: ",i.jsx("strong",{children:S.numeroFactura||S.codigoTracking})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Ruta *"}),i.jsxs("select",{value:ae,onChange:Ae=>me(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),zt.map(Ae=>i.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{T(null),me("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:qt,disabled:Oe||!ae,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:Oe?"Asignando...":"Asignar"})]})]})}),R&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(U1,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reasignar Ruta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Factura: ",i.jsx("strong",{children:R.numeroFactura||R.codigoTracking})]}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Ruta actual: ",i.jsx("strong",{children:R.rutaAsignada})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nueva Ruta *"}),i.jsxs("select",{value:ae,onChange:Ae=>me(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"-- Seleccionar --"}),zt.filter(Ae=>Ae.value!==R.rutaAsignada).map(Ae=>i.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Motivo (opcional)"}),i.jsx("textarea",{value:Te,onChange:Ae=>we(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"2",placeholder:"Razn de la reasignacin..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{z(null),me(""),we("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:kt,disabled:Oe||!ae,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50",children:Oe?"Reasignando...":"Reasignar"})]})]})}),G&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Zn,{className:"text-rose-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Quitar de Ruta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-2",children:["Deseas quitar la factura ",i.jsx("strong",{children:G.numeroFactura||G.codigoTracking})," de su ruta actual?"]}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["Ruta actual: ",i.jsx("strong",{children:G.rutaAsignada})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Motivo (opcional)"}),i.jsx("textarea",{value:q,onChange:Ae=>Y(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"2",placeholder:"Razn para quitar de la ruta..."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{O(null),Y("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:gt,disabled:Oe,className:"flex-1 px-4 py-2 bg-rose-600 text-white rounded-lg hover:bg-rose-700 disabled:opacity-50",children:Oe?"Quitando...":"Quitar de Ruta"})]})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(hi,{className:"text-amber-600",size:32}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reportar Factura Incompleta"})]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 mb-4",children:["Factura: ",i.jsx("strong",{children:D.numeroFactura||D.codigoTracking})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Motivo *"}),i.jsx("textarea",{value:X,onChange:Ae=>re(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Describe por qu la factura est incompleta..."})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Items Faltantes (separados por coma)"}),i.jsx("input",{type:"text",value:se,onChange:Ae=>Ce(Ae.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: Caja 1, TV Samsung, etc."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{I(null),re(""),Ce("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:Ft,disabled:Oe||!X,className:"flex-1 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50",children:Oe?"Reportando...":"Reportar"})]})]})}),V&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full my-8",children:[i.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Detalle de Factura"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:c.codigoTracking})]}),i.jsx("button",{onClick:()=>{P(!1),u(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(vl,{size:18}),"Remitente"]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",((tr=c.remitente)==null?void 0:tr.nombre)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(xl,{size:14}),((It=c.remitente)==null?void 0:It.telefono)||"N/A"]}),((Er=c.remitente)==null?void 0:Er.email)&&i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(lh,{size:14}),c.remitente.email]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-start gap-2",children:[i.jsx(Da,{size:14,className:"mt-1 flex-shrink-0"}),((en=c.remitente)==null?void 0:en.direccion)||"N/A"]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(vl,{size:18}),"Destinatario"]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Nombre:"})," ",(($r=c.destinatario)==null?void 0:$r.nombre)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(xl,{size:14}),((jn=c.destinatario)==null?void 0:jn.telefono)||"N/A"]}),((fr=c.destinatario)==null?void 0:fr.email)&&i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[i.jsx(lh,{size:14}),c.destinatario.email]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300 flex items-start gap-2",children:[i.jsx(Da,{size:14,className:"mt-1 flex-shrink-0"}),((dn=c.destinatario)==null?void 0:dn.direccion)||"N/A"]}),i.jsxs("p",{className:"text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Zona:"})," ",((Vn=c.destinatario)==null?void 0:Vn.zona)||"N/A"]})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Lr,{size:18}),"Items (",((on=c.items)==null?void 0:on.length)||0,")"]}),i.jsx("div",{className:"space-y-2",children:c.items&&c.items.length>0?c.items.map((Ae,Ge)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:Ae.descripcion||Ae.producto||"Sin descripcin"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Cantidad: ",Ae.cantidad]})]}),i.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["$",Ae.precio]})]},Ge)):i.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-4",children:"No hay items"})})]}),i.jsxs("div",{className:"mt-6 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(Fl,{size:18}),"Facturacin"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["$",(((_n=c.facturacion)==null?void 0:_n.subtotal)||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"ITBIS (18%):"}),i.jsxs("span",{children:["$",(((Zr=c.facturacion)==null?void 0:Zr.itbis)||0).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold text-slate-900 dark:text-white border-t border-slate-300 dark:border-slate-600 pt-2",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["$",(((tn=c.facturacion)==null?void 0:tn.total)||0).toFixed(2)," ",((de=c.facturacion)==null?void 0:de.moneda)||"USD"]})]})]})]}),i.jsxs("div",{className:"mt-6 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Jb,{size:18}),"Informacin de Pago"]}),((ge=c.pago)==null?void 0:ge.estado)!=="pagada"&&i.jsxs("button",{onClick:()=>Nr(c),className:"px-3 py-1 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 text-sm flex items-center gap-1",children:[i.jsx(U1,{size:14}),"Editar"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Estado:"}),i.jsx(ir,{estado:((Ne=c.pago)==null?void 0:Ne.estado)||"pendiente"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Mtodo de Pago:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((Ee=c.pago)==null?void 0:Ee.metodoPago)||"No especificado"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Referencia:"}),i.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:((ke=c.pago)==null?void 0:ke.referenciaPago)||"N/A"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Monto Pagado:"}),i.jsxs("p",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:["$",(((Pe=c.pago)==null?void 0:Pe.montoPagado)||0).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Monto Pendiente:"}),i.jsxs("p",{className:"font-medium text-rose-600 dark:text-rose-400",children:["$",(((lt=c.pago)==null?void 0:lt.montoPendiente)||0).toFixed(2)]})]})]}),((jt=c.pago)==null?void 0:jt.notasPago)&&i.jsx("div",{className:"mt-3 p-3 bg-slate-100 dark:bg-slate-700 rounded",children:i.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:[i.jsx("strong",{children:"Notas:"})," ",c.pago.notasPago]})})]})]})]}),i.jsx("div",{className:"flex justify-end p-6 border-t border-slate-200 dark:border-slate-700",children:i.jsx("button",{onClick:()=>{P(!1),u(null)},className:"px-6 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600",children:"Cerrar"})})]})}),B&&c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full",children:[i.jsxs("div",{className:"flex justify-between items-start p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Editar Informacin de Pago"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:c.codigoTracking||c.numeroFactura})]}),i.jsx("button",{onClick:()=>{F(!1),pe({metodoPago:"",montoPago:"",estadoPago:"pendiente",referenciaPago:"",notasPago:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Zn,{size:24})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total de la Factura"}),i.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["$",(((rt=c.facturacion)==null?void 0:rt.total)||0).toFixed(2)]})]}),Ue&&i.jsx("div",{className:"mb-4 p-3 bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400 rounded-lg text-sm",children:Ue}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Estado de Pago *"}),i.jsxs("select",{value:je.estadoPago,onChange:Ae=>pe({...je,estadoPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"pendiente",children:" Pago al recibir"}),i.jsx("option",{value:"parcial",children:" Pago Parcial"}),i.jsx("option",{value:"pagada",children:" Ya pagado"}),i.jsx("option",{value:"contraentrega",children:" Contra Entrega"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto Pagado"}),i.jsx("input",{type:"number",step:"0.01",value:je.montoPago,onChange:Ae=>pe({...je,montoPago:Ae.target.value}),className:`w-full px-3 py-2 border dark:bg-slate-700 dark:text-white rounded-lg ${!je.montoPago||je.montoPago===""?"border-rose-500 focus:border-rose-500 focus:ring-rose-500":"border-slate-300 dark:border-slate-600"}`,placeholder:"0.00"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mtodo de Pago"}),i.jsxs("select",{value:je.metodoPago,onChange:Ae=>pe({...je,metodoPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"Seleccionar..."}),i.jsx("option",{value:"efectivo",children:"Efectivo"}),i.jsx("option",{value:"transferencia",children:"Transferencia"}),i.jsx("option",{value:"tarjeta",children:"Tarjeta"}),i.jsx("option",{value:"cheque",children:"Cheque"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Referencia/Nmero de Transaccin"}),i.jsx("input",{type:"text",value:je.referenciaPago,onChange:Ae=>pe({...je,referenciaPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: TRF-12345"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas"}),i.jsx("textarea",{value:je.notasPago,onChange:Ae=>pe({...je,notasPago:Ae.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"3",placeholder:"Notas adicionales sobre el pago..."})]})]})]}),i.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>{F(!1),pe({metodoPago:"",montoPago:"",estadoPago:"pendiente",referenciaPago:"",notasPago:""})},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:"Cancelar"}),i.jsx("button",{onClick:sr,disabled:Oe,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 flex items-center justify-center gap-2",children:Oe?i.jsxs(i.Fragment,{children:[i.jsx(bs,{className:"animate-spin",size:18}),"Guardando..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Jr,{size:18}),"Guardar"]})})]})]})})]})},JHe=({factura:t,onClose:e,onUpdate:r})=>{const[n,a]=A.useState(!1),[s,o]=A.useState(t.facturacion||{}),[l,c]=A.useState(t.items||[]),u=async()=>{var p;const d=((p=t.facturacion)==null?void 0:p.estadoPago)||t.estadoPago,h=s.estadoPago;if(d==="pagada"&&h!=="pagada"){alert(" No se puede cambiar el estado de una factura que ya est pagada.");return}a(!0);try{const g=localStorage.getItem("token"),_=await(await fetch(`https://proyecto-envios-production.up.railway.app/api/facturacion/recolecciones/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify({...s,items:l})})).json();_.success?(alert("Facturacin actualizada exitosamente"),r&&r(),e()):alert("Error: "+(_.error||"No se pudo guardar"))}catch(g){console.error("Error guardando facturacin:",g),alert("Error al guardar los cambios")}finally{a(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800 z-10",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Gestionar Factura - ",t.codigoTracking||t.id]}),i.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:i.jsx(Zn,{size:24})})]}),i.jsx("div",{className:"p-6",children:i.jsx(vae,{items:l,onItemsChange:c,facturacion:s,onFacturacionChange:o,recoleccionId:t.id,mostrarPagos:!0})}),i.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 sticky bottom-0",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",disabled:n,children:"Cancelar"}),i.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-indigo-400 transition",disabled:n,children:[i.jsx(f3,{size:18}),n?"Guardando...":"Guardar Cambios"]})]})]})})},P_=()=>{var ce,ne,ae,me;const[t,e]=A.useState([]),[r,n]=A.useState("todos"),[a,s]=A.useState([]),[o,l]=A.useState(!0),[c,u]=A.useState({}),[d,h]=A.useState(!1),[p,g]=A.useState(null),[b,w]=A.useState(""),[_,N]=A.useState(""),[S,T]=A.useState(""),[R,z]=A.useState(""),[G,O]=A.useState(!1),[D,I]=A.useState(null);A.useEffect(()=>{P(),V()},[r]);const V=async()=>{try{const Te=await wt.get("/contenedores/disponibles");s(Te.data.data||[])}catch(Te){console.error("Error al cargar contenedores:",Te)}},P=async()=>{l(!0);try{const Te=r==="todos"?"/facturacion/pendientes":`/facturacion/pendientes?contenedorId=${r}`,we=await wt.get(Te);e(we.data.data||[]);const q=(we.data.data||[]).reduce((X,re)=>{var se;return X+(((se=re.facturacion)==null?void 0:se.totalFactura)||0)},0),Y=(we.data.data||[]).reduce((X,re)=>{var se;return X+(((se=re.facturacion)==null?void 0:se.montoPagado)||0)},0);u({totalFacturado:q,totalPagado:Y,saldoPendiente:q-Y,totalFacturas:(we.data.data||[]).length})}catch(Te){console.error("Error al cargar facturas pendientes:",Te)}finally{l(!1)}},B=Te=>{g(Te),w(""),N(""),T(""),z(""),h(!0)},F=Te=>{I(Te),O(!0)},ee=async()=>{var Te,we;if(p){if(!b||parseFloat(b)<=0||!_){alert("Por favor ingrese un monto y seleccione un mtodo de pago vlidos.");return}try{l(!0),await wt.post(`/facturacion/recolecciones/${p.id}/pago`,{montoPago:parseFloat(b),metodoPago:_,referencia:S,notas:R}),alert("Pago registrado exitosamente. La lista se actualizar."),h(!1),P()}catch(q){console.error("Error al registrar pago:",q),alert(((we=(Te=q.response)==null?void 0:Te.data)==null?void 0:we.error)||"Error al registrar el pago.")}finally{l(!1)}}},Z=Te=>{const we={pagada:"bg-emerald-100 text-emerald-800",pendiente_pago:"bg-rose-100 text-rose-800",pago_parcial:"bg-amber-100 text-amber-800",cobro_contra_entrega:"bg-indigo-100 text-indigo-800"},q={pagada:"Pagada",pendiente_pago:"Pendiente",pago_parcial:"Parcial",cobro_contra_entrega:"Contra Entrega"};return i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${we[Te]||"bg-slate-100 text-slate-800"}`,children:q[Te]||Te})};return o&&t.length===0?i.jsx("div",{className:"text-center py-12",children:"Cargando facturas pendientes..."}):i.jsxs("div",{className:"max-w-7xl mx-auto p-6 dark:text-white",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Facturas Pendientes de Pago"}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-indigo-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Facturado"}),i.jsxs("p",{className:"text-2xl font-bold mt-1",children:["$",(c.totalFacturado||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-emerald-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Total Pagado"}),i.jsxs("p",{className:"text-2xl font-bold mt-1 text-emerald-600",children:["$",(c.totalPagado||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-rose-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Saldo Pendiente"}),i.jsxs("p",{className:"text-2xl font-bold mt-1 text-rose-600",children:["$",(c.saldoPendiente||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md p-5 border-l-4 border-amber-500",children:[i.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"# Facturas"}),i.jsx("p",{className:"text-2xl font-bold mt-1",children:c.totalFacturas||0})]})]}),i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx(Tre,{className:"w-5 h-5 text-slate-500 dark:text-slate-400"}),i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Filtrar por Contenedor:"}),i.jsxs("select",{value:r,onChange:Te=>n(Te.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-lg focus:ring-indigo-500 focus:border-indigo-500",children:[i.jsx("option",{value:"todos",children:"Todos los Contenedores"}),a.map(Te=>i.jsxs("option",{value:Te.id,children:[Te.numeroContenedor," (",Te.facturasPendientes," facturas)"]},Te.id))]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-600",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Tracking"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Cliente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Total"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Pagado"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Pendiente"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Estado Pago"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Accin"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-600",children:t.length===0&&!o?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"No hay facturas con saldo pendiente para mostrar."})}):t.map(Te=>{var we,q,Y,X,re,se,Ce,je,pe,Oe;return i.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 transition duration-150",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-white",children:Te.codigoTracking}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-700 dark:text-slate-300",children:((we=Te.destinatario)==null?void 0:we.nombre)||Te.cliente||"N/A"}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-indigo-600 dark:text-indigo-400",children:["$",(((q=Te.facturacion)==null?void 0:q.totalFactura)||0).toLocaleString("es-DO")]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-emerald-600 dark:text-emerald-400",children:["$",(((Y=Te.facturacion)==null?void 0:Y.montoPagado)||0).toLocaleString("es-DO")]}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold text-rose-600 dark:text-rose-400",children:["$",((((X=Te.facturacion)==null?void 0:X.totalFactura)||0)-(((re=Te.facturacion)==null?void 0:re.montoPagado)||0)).toLocaleString("es-DO")]}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:Z(((se=Te.facturacion)==null?void 0:se.estadoPago)||"pendiente_pago")}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>F(Te),className:"p-1 text-indigo-600 hover:text-indigo-800 hover:bg-indigo-50 rounded transition",title:"Gestionar Factura",children:i.jsx(U1,{size:18})}),i.jsxs("button",{onClick:()=>B(Te),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs leading-4 font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition disabled:bg-slate-400 disabled:cursor-not-allowed",disabled:o||((Ce=Te.facturacion)==null?void 0:Ce.estadoPago)==="pagada"||(((je=Te.facturacion)==null?void 0:je.totalFactura)||0)-(((pe=Te.facturacion)==null?void 0:pe.montoPagado)||0)<=0,title:((Oe=Te.facturacion)==null?void 0:Oe.estadoPago)==="pagada"?"Factura ya pagada":"Registrar Pago",children:[i.jsx(Fl,{className:"w-4 h-4 mr-1"}),"Registrar Pago"]})]})]},Te.id||Te.codigoTracking||Math.random())})})]})})}),d&&p&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg shadow-2xl",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-900 dark:text-white",children:"Registrar Pago"}),i.jsxs("div",{className:"space-y-4 mb-6 bg-slate-50 dark:bg-slate-700 p-4 rounded-lg",children:[i.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 flex items-center",children:[i.jsx(Nu,{className:"w-5 h-5 mr-2"}),"Factura: ",p.codigoTracking||p.id]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cliente"}),i.jsx("p",{className:"font-medium",children:((ce=p.destinatario)==null?void 0:ce.nombre)||p.cliente||"N/A"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Total a Cobrar"}),i.jsxs("p",{className:"font-bold text-lg text-indigo-600 dark:text-indigo-400",children:["$",(((ne=p.facturacion)==null?void 0:ne.totalFactura)||0).toLocaleString("es-DO")]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Saldo Pendiente"}),i.jsxs("p",{className:"font-bold text-lg text-rose-600 dark:text-rose-400",children:["$",((((ae=p.facturacion)==null?void 0:ae.totalFactura)||0)-(((me=p.facturacion)==null?void 0:me.montoPagado)||0)).toLocaleString("es-DO")]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Monto del Pago"}),i.jsxs("select",{value:_,onChange:Te=>N(Te.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",children:[i.jsx("option",{value:"",children:"Seleccione..."}),i.jsx("option",{value:"efectivo",children:"Efectivo"}),i.jsx("option",{value:"transferencia",children:"Transferencia"}),i.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Referencia (Opcional)"}),i.jsx("input",{type:"text",value:S,onChange:Te=>T(Te.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",placeholder:"Ej: 123456789"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Notas"}),i.jsx("textarea",{value:R,onChange:Te=>z(Te.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg",rows:"2",placeholder:"Observaciones..."})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 dark:border-slate-600 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",disabled:o,children:"Cancelar"}),i.jsx("button",{onClick:ee,className:"flex-1 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition disabled:bg-slate-400",disabled:o,children:o?"Procesando...":"Confirmar Pago"})]})]})})}),G&&D&&i.jsx(JHe,{factura:D,onClose:()=>O(!1),onUpdate:P})]})},Koe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{animate:{y:[0,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[i.jsx(Qt.ellipse,{cx:"100",cy:"160",rx:"40",ry:"8",fill:"#000",opacity:"0.1",animate:{scale:[1,.9,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),i.jsx("rect",{x:"70",y:"80",width:"60",height:"60",fill:"#FFA500",rx:"4"}),i.jsx("path",{d:"M 70 80 L 85 65 L 145 65 L 130 80 Z",fill:"#FFB833"}),i.jsx("path",{d:"M 130 80 L 145 65 L 145 125 L 130 140 Z",fill:"#FF8C00"}),i.jsx("rect",{x:"70",y:"105",width:"60",height:"8",fill:"#FFD700",opacity:"0.6"}),i.jsx("rect",{x:"95",y:"80",width:"10",height:"60",fill:"#FFD700",opacity:"0.6"})]}),i.jsxs(Qt.g,{animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"},children:[i.jsx("circle",{cx:"150",cy:"50",r:"15",fill:"#fff",stroke:"#FFA500",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"50",x2:"150",y2:"42",stroke:"#FFA500",strokeWidth:"2",strokeLinecap:"round"}),i.jsx("line",{x1:"150",y1:"50",x2:"155",y2:"50",stroke:"#FFA500",strokeWidth:"2",strokeLinecap:"round"})]}),[0,1,2].map(e=>i.jsx(Qt.circle,{cx:40+e*15,cy:"180",r:"4",fill:"#FFA500",animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:1.5,repeat:1/0,delay:e*.2}},e))]}),eqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,repeat:1/0,repeatDelay:3},children:[i.jsx("rect",{x:"70",y:"80",width:"60",height:"60",fill:"#4CAF50",rx:"4"}),i.jsx("path",{d:"M 70 80 L 85 65 L 145 65 L 130 80 Z",fill:"#66BB6A"}),i.jsx("path",{d:"M 130 80 L 145 65 L 145 125 L 130 140 Z",fill:"#388E3C"})]}),i.jsx(Qt.g,{initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.5,delay:.3,repeat:1/0,repeatDelay:3},children:i.jsx(Qt.path,{d:"M 85 110 L 95 120 L 115 95",stroke:"#fff",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),[...Array(8)].map((e,r)=>{const n=r*360/8,a=100+Math.cos(n*Math.PI/180)*50,s=110+Math.sin(n*Math.PI/180)*50;return i.jsx(Qt.circle,{cx:100,cy:110,r:"3",fill:"#4CAF50",initial:{cx:100,cy:110,opacity:0},animate:{cx:a,cy:s,opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0,repeatDelay:2,delay:r*.1}},r)})]}),tqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{animate:{scale:[1,1.02,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[i.jsx("rect",{x:"30",y:"60",width:"140",height:"100",fill:"#2196F3",rx:"4",stroke:"#1976D2",strokeWidth:"3"}),i.jsx("line",{x1:"100",y1:"60",x2:"100",y2:"160",stroke:"#1976D2",strokeWidth:"2"}),i.jsx("rect",{x:"95",y:"105",width:"10",height:"15",fill:"#1565C0",rx:"2"})]}),i.jsxs(Qt.g,{animate:{rotate:[0,5,0,-5,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"150",y:"40",width:"30",height:"20",fill:"#fff",stroke:"#333",strokeWidth:"1"}),i.jsx("rect",{x:"150",y:"40",width:"12",height:"8",fill:"#1E3A8A"}),i.jsx("line",{x1:"150",y1:"48",x2:"180",y2:"48",stroke:"#DC2626",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"52",x2:"180",y2:"52",stroke:"#DC2626",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"56",x2:"180",y2:"56",stroke:"#DC2626",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"40",x2:"150",y2:"20",stroke:"#666",strokeWidth:"2"})]}),[0,1,2].map(e=>i.jsx(Qt.g,{animate:{y:[0,-3,0]},transition:{duration:2,repeat:1/0,delay:e*.3},children:i.jsx("rect",{x:45+e*35,y:120-e*10,width:"25",height:"25",fill:"#FFB74D",stroke:"#F57C00",strokeWidth:"1",rx:"2"})},e)),i.jsx("text",{x:"100",y:"180",fontSize:"16",fontWeight:"bold",fill:"#2196F3",textAnchor:"middle",children:"USA"})]}),rqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{animate:{rotate:[0,-2,2,-2,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"70",y:"100",width:"60",height:"40",fill:"#FF9800",rx:"4"}),i.jsx(Qt.path,{d:"M 70 100 L 60 85 L 120 85 L 110 100",fill:"#FFB74D",animate:{y:[-5,0,-5]},transition:{duration:1.5,repeat:1/0}}),i.jsx(Qt.path,{d:"M 130 100 L 140 85 L 120 85 L 110 100",fill:"#FFA726",animate:{y:[-3,2,-3]},transition:{duration:1.5,repeat:1/0,delay:.2}})]}),i.jsxs(Qt.g,{animate:{scale:[1,1.1,1]},transition:{duration:1,repeat:1/0},children:[i.jsx("path",{d:"M 150 50 L 170 80 L 130 80 Z",fill:"#FFC107",stroke:"#F57C00",strokeWidth:"2"}),i.jsx("line",{x1:"150",y1:"60",x2:"150",y2:"70",stroke:"#F57C00",strokeWidth:"3",strokeLinecap:"round"}),i.jsx("circle",{cx:"150",cy:"75",r:"2",fill:"#F57C00"})]}),[0,1].map(e=>i.jsx(Qt.rect,{x:40+e*25,y:135,width:"18",height:"18",fill:"none",stroke:"#FF9800",strokeWidth:"2",strokeDasharray:"3 3",animate:{opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,delay:e*.5},rx:"2"},e))]}),nqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[[0,1,2].map(e=>i.jsx(Qt.path,{d:`M ${20+e*60} 140 Q ${40+e*60} 135 ${60+e*60} 140 T ${100+e*60} 140`,stroke:"#64B5F6",strokeWidth:"3",fill:"none",animate:{x:[-20,20]},transition:{duration:3,repeat:1/0,ease:"linear",delay:e*.3}},e)),i.jsxs(Qt.g,{animate:{y:[0,-8,0],rotate:[-1,1,-1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[i.jsx("path",{d:"M 60 100 L 140 100 L 135 120 L 65 120 Z",fill:"#1976D2",stroke:"#0D47A1",strokeWidth:"2"}),i.jsx("rect",{x:"80",y:"70",width:"40",height:"30",fill:"#2196F3",stroke:"#1565C0",strokeWidth:"2",rx:"2"}),i.jsx("rect",{x:"130",y:"85",width:"8",height:"15",fill:"#F44336",rx:"1"})]}),i.jsx(Qt.g,{animate:{x:[0,10,0],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:i.jsx("path",{d:"M 30 50 L 50 50 L 45 45 M 50 50 L 45 55",stroke:"#2196F3",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),i.jsx(Qt.circle,{cx:"170",cy:"30",r:"15",fill:"#FDD835",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0}}),[0,1,2,3].map(e=>{const r=e*90,n=170+Math.cos(r*Math.PI/180)*18,a=30+Math.sin(r*Math.PI/180)*18,s=170+Math.cos(r*Math.PI/180)*25,o=30+Math.sin(r*Math.PI/180)*25;return i.jsx(Qt.line,{x1:n,y1:a,x2:s,y2:o,stroke:"#FDD835",strokeWidth:"2",strokeLinecap:"round",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,delay:e*.2}},e)}),i.jsx("text",{x:"100",y:"180",fontSize:"14",fontWeight:"bold",fill:"#2196F3",textAnchor:"middle",children:"USA  RD"})]}),aqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,repeat:1/0,repeatDelay:4},children:[i.jsx("rect",{x:"50",y:"80",width:"100",height:"80",fill:"#4CAF50",stroke:"#388E3C",strokeWidth:"2",rx:"4"}),i.jsx("path",{d:"M 40 80 L 100 50 L 160 80 Z",fill:"#66BB6A",stroke:"#388E3C",strokeWidth:"2"}),i.jsx("rect",{x:"80",y:"120",width:"40",height:"40",fill:"#2E7D32",rx:"2"}),i.jsx("rect",{x:"60",y:"95",width:"15",height:"15",fill:"#A5D6A7",rx:"1"}),i.jsx("rect",{x:"125",y:"95",width:"15",height:"15",fill:"#A5D6A7",rx:"1"})]}),i.jsxs(Qt.g,{animate:{rotate:[0,3,0,-3,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"150",y:"30",width:"30",height:"20",fill:"#fff",stroke:"#333",strokeWidth:"1"}),i.jsx("rect",{x:"163",y:"30",width:"4",height:"20",fill:"#002D62"}),i.jsx("rect",{x:"150",y:"38",width:"30",height:"4",fill:"#002D62"}),i.jsx("rect",{x:"150",y:"30",width:"13",height:"8",fill:"#CE1126"}),i.jsx("rect",{x:"167",y:"30",width:"13",height:"8",fill:"#002D62"}),i.jsx("rect",{x:"150",y:"42",width:"13",height:"8",fill:"#002D62"}),i.jsx("rect",{x:"167",y:"42",width:"13",height:"8",fill:"#CE1126"}),i.jsx("line",{x1:"150",y1:"30",x2:"150",y2:"15",stroke:"#666",strokeWidth:"2"})]}),i.jsx(Qt.g,{animate:{x:[-30,0],y:[0,20]},transition:{duration:2,repeat:1/0,repeatDelay:2},children:i.jsx("rect",{x:"60",y:"100",width:"25",height:"25",fill:"#FFB74D",stroke:"#F57C00",strokeWidth:"2",rx:"2"})}),i.jsxs(Qt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:1.5,type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("circle",{cx:"30",cy:"40",r:"18",fill:"#4CAF50"}),i.jsx("path",{d:"M 22 40 L 28 46 L 38 34",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})]}),sqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[i.jsx("rect",{x:"60",y:"60",width:"80",height:"100",fill:"#fff",stroke:"#FF9800",strokeWidth:"3",rx:"4"}),i.jsx("line",{x1:"75",y1:"80",x2:"125",y2:"80",stroke:"#FF9800",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"95",x2:"115",y2:"95",stroke:"#FFB74D",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"110",x2:"120",y2:"110",stroke:"#FFB74D",strokeWidth:"2"})]}),i.jsxs(Qt.g,{animate:{rotate:[0,180,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[i.jsx("path",{d:"M 145 40 L 165 40 L 155 55 L 165 70 L 145 70 L 155 55 Z",fill:"#FFC107",stroke:"#F57C00",strokeWidth:"2"}),i.jsx(Qt.rect,{x:"150",y:"42",width:"10",height:"8",fill:"#F57C00",animate:{height:[8,0],y:[42,50]},transition:{duration:3,repeat:1/0}})]}),i.jsx(Qt.text,{x:"100",y:"185",fontSize:"24",fontWeight:"bold",fill:"#FF9800",textAnchor:"middle",animate:{opacity:[.5,1,.5],scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},children:"?"})]}),iqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("rect",{x:"60",y:"60",width:"80",height:"100",fill:"#fff",stroke:"#4CAF50",strokeWidth:"3",rx:"4"}),i.jsx("line",{x1:"75",y1:"80",x2:"125",y2:"80",stroke:"#66BB6A",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"95",x2:"115",y2:"95",stroke:"#A5D6A7",strokeWidth:"2"}),i.jsx("line",{x1:"75",y1:"110",x2:"120",y2:"110",stroke:"#A5D6A7",strokeWidth:"2"})]}),i.jsxs(Qt.g,{initial:{scale:0,rotate:-45},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("circle",{cx:"110",cy:"120",r:"25",fill:"none",stroke:"#4CAF50",strokeWidth:"4",strokeDasharray:"5 3"}),i.jsx("text",{x:"110",y:"125",fontSize:"12",fontWeight:"bold",fill:"#4CAF50",textAnchor:"middle",children:"OK"})]}),[0,1,2].map(e=>i.jsx(Qt.path,{d:"M 0 0 L 4 4 L 10 -2",stroke:"#4CAF50",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",initial:{x:100,y:100,opacity:0},animate:{x:[100,120+e*15],y:[100,40-e*10],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:e*.4}},e))]}),oqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{animate:{x:[0,20,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:[i.jsx("rect",{x:"70",y:"90",width:"30",height:"30",fill:"#2196F3",rx:"3"}),i.jsx("rect",{x:"75",y:"95",width:"10",height:"10",fill:"#64B5F6",rx:"1"}),i.jsx("rect",{x:"100",y:"85",width:"45",height:"35",fill:"#1976D2",rx:"3"}),i.jsx(Qt.circle,{cx:"85",cy:"125",r:"8",fill:"#333",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),i.jsx("circle",{cx:"85",cy:"125",r:"3",fill:"#666"}),i.jsx(Qt.circle,{cx:"130",cy:"125",r:"8",fill:"#333",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),i.jsx("circle",{cx:"130",cy:"125",r:"3",fill:"#666"})]}),i.jsx("line",{x1:"20",y1:"135",x2:"180",y2:"135",stroke:"#999",strokeWidth:"3"}),[0,1,2,3].map(e=>i.jsx(Qt.line,{x1:40+e*40,y1:"135",x2:55+e*40,y2:"135",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",animate:{x:[-20,20],opacity:[1,0,1]},transition:{duration:1.5,repeat:1/0,ease:"linear",delay:e*.2}},e)),[0,1].map(e=>i.jsx(Qt.ellipse,{cx:55-e*10,cy:95+e*10,rx:"12",ry:"6",fill:"#E3F2FD",animate:{x:[-20,-40],opacity:[.8,0]},transition:{duration:1,repeat:1/0,delay:e*.3}},e)),i.jsxs(Qt.g,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},children:[i.jsx("path",{d:"M 165 50 C 165 40 155 40 155 50 C 155 55 165 65 165 65 C 165 65 175 55 175 50 C 175 40 165 40 165 50 Z",fill:"#F44336",stroke:"#C62828",strokeWidth:"1"}),i.jsx("circle",{cx:"165",cy:"50",r:"3",fill:"#fff"})]})]}),lqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"70",y:"80",width:"60",height:"60",fill:"#4CAF50",rx:"4"}),i.jsx("path",{d:"M 70 80 L 85 65 L 145 65 L 130 80 Z",fill:"#66BB6A"}),i.jsx("path",{d:"M 130 80 L 145 65 L 145 125 L 130 140 Z",fill:"#388E3C"}),i.jsx("rect",{x:"95",y:"80",width:"10",height:"60",fill:"#FFD700",opacity:"0.8"}),i.jsx("rect",{x:"70",y:"105",width:"60",height:"10",fill:"#FFD700",opacity:"0.8"})]}),i.jsxs("g",{children:[i.jsx("rect",{x:"140",y:"110",width:"40",height:"35",fill:"#FFF59D",stroke:"#F57C00",strokeWidth:"2",rx:"2"}),i.jsx("path",{d:"M 135 110 L 160 90 L 185 110 Z",fill:"#FF6F00",stroke:"#E65100",strokeWidth:"2"}),i.jsx("rect",{x:"155",y:"125",width:"10",height:"20",fill:"#8D6E63"})]}),i.jsx(Qt.g,{animate:{x:[0,10,0]},transition:{duration:1.5,repeat:1/0},children:i.jsx("path",{d:"M 110 100 L 130 100 L 125 95 M 130 100 L 125 105",stroke:"#4CAF50",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})}),[0,1,2,3].map(e=>{const r=e*90,n=100+Math.cos(r*Math.PI/180)*55,a=110+Math.sin(r*Math.PI/180)*55;return i.jsx(Qt.path,{d:"M 0 -4 L 1 -1 L 4 0 L 1 1 L 0 4 L -1 1 L -4 0 L -1 -1 Z",fill:"#FFC107",initial:{x:n,y:a,scale:0},animate:{scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,repeat:1/0,delay:e*.3}},e)})]}),cqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",repeat:1/0,repeatDelay:4},children:[i.jsx("rect",{x:"70",y:"110",width:"60",height:"40",fill:"#4CAF50",rx:"4"}),i.jsx(Qt.path,{d:"M 70 110 L 60 95 L 120 95 L 110 110",fill:"#66BB6A",animate:{y:[-10,-15,-10]},transition:{duration:2,repeat:1/0}}),i.jsx(Qt.path,{d:"M 130 110 L 140 95 L 120 95 L 110 110",fill:"#81C784",animate:{y:[-10,-15,-10]},transition:{duration:2,repeat:1/0,delay:.2}})]}),i.jsxs(Qt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.5,type:"spring",stiffness:200,damping:10,repeat:1/0,repeatDelay:3.5},children:[i.jsx("circle",{cx:"100",cy:"70",r:"35",fill:"#4CAF50"}),i.jsx(Qt.path,{d:"M 82 70 L 95 83 L 118 57",stroke:"#fff",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.5,delay:.7,repeat:1/0,repeatDelay:3.5}})]}),[...Array(12)].map((e,r)=>{const n=r*360/12,a=60+r%3*10,s=100+Math.cos(n*Math.PI/180)*a,o=70+Math.sin(n*Math.PI/180)*a,l=["#FFC107","#FF5722","#2196F3","#4CAF50","#E91E63"];return i.jsx(Qt.rect,{width:"4",height:"8",rx:"1",fill:l[r%l.length],initial:{x:100,y:70,opacity:0,rotate:0},animate:{x:s,y:o,opacity:[0,1,0],rotate:[0,360]},transition:{duration:1.5,repeat:1/0,repeatDelay:2.5,delay:r*.05}},r)}),i.jsx(Qt.text,{x:"100",y:"180",fontSize:"16",fontWeight:"bold",fill:"#4CAF50",textAnchor:"middle",animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},children:"ENTREGADO!"})]}),uqe=({size:t=200})=>i.jsxs("svg",{width:t,height:t,viewBox:"0 0 200 200",fill:"none",children:[i.jsxs(Qt.g,{animate:{rotate:[0,-5,5,-5,0],x:[0,-2,2,-2,0]},transition:{duration:2,repeat:1/0},children:[i.jsx("rect",{x:"70",y:"90",width:"60",height:"60",fill:"#F44336",rx:"4",opacity:"0.8"}),i.jsx("path",{d:"M 70 90 L 85 75 L 145 75 L 130 90 Z",fill:"#E57373"}),i.jsx("path",{d:"M 130 90 L 145 75 L 145 135 L 130 150 Z",fill:"#C62828"})]}),i.jsxs(Qt.g,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring",repeat:1/0,repeatDelay:3},children:[i.jsx("circle",{cx:"100",cy:"50",r:"30",fill:"#F44336"}),i.jsx("line",{x1:"85",y1:"35",x2:"115",y2:"65",stroke:"#fff",strokeWidth:"6",strokeLinecap:"round"}),i.jsx("line",{x1:"115",y1:"35",x2:"85",y2:"65",stroke:"#fff",strokeWidth:"6",strokeLinecap:"round"})]}),i.jsx("text",{x:"100",y:"180",fontSize:"14",fontWeight:"bold",fill:"#F44336",textAnchor:"middle",children:"NO ENTREGADO"})]}),dqe={pendiente_recoleccion:Koe,recolectada:eqe,en_contenedor_usa:tqe,incompleta_usa:rqe,en_transito_rd:nqe,recibida_rd:aqe,pendiente_confirmacion:sqe,confirmada:iqe,en_ruta:oqe,lista_para_entregar:lqe,entregada:cqe,no_entregada:uqe},fqe=({estado:t,size:e=200})=>{const r=dqe[t]||Koe;return i.jsx(r,{size:e})},hqe="https://proyecto-envios-production.up.railway.app/api",Iq=()=>{const{codigo:t}=qy(),e=Fs(),[r,n]=A.useState(null),[a,s]=A.useState(!0),[o,l]=A.useState(null),[c,u]=A.useState(t||""),[d,h]=A.useState(!1);A.useEffect(()=>{t?p(t):s(!1)},[t]);const p=async T=>{var R,z;s(!0),l(null);try{const G=await ms.get(`${hqe}/tracking/public/${T}`);G.data.success?n(G.data):l(G.data.error||"No se pudo obtener la informacin")}catch(G){console.error("Error al buscar tracking:",G),((R=G.response)==null?void 0:R.status)===404?l("Cdigo de tracking no encontrado"):((z=G.response)==null?void 0:z.status)===400?l("Cdigo de tracking invlido"):l("Error al conectar con el servidor")}finally{s(!1)}},g=T=>{T.preventDefault();const R=c.trim();R&&(R===t?p(R):e(`/tracking/${R}`))},b=()=>{const T=window.location.href;navigator.clipboard.writeText(T),h(!0),setTimeout(()=>h(!1),2e3)},w=async()=>{var z;const T=window.location.href,R=`Rastrear mi paquete: ${(z=r==null?void 0:r.recoleccion)==null?void 0:z.codigoTracking}`;if(navigator.share)try{await navigator.share({title:"Rastreo de Paquete",text:R,url:T})}catch(G){console.log("Error al compartir:",G)}else b()},_=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[i.jsx(Lr,{className:"w-6 h-6 text-indigo-600"}),"Rastrear Paquete"]}),i.jsxs("form",{onSubmit:g,className:"flex gap-3",children:[i.jsx("input",{type:"text",value:c,onChange:T=>u(T.target.value),placeholder:"Ingresa tu cdigo de tracking (ej: EMI-0001)",className:"flex-1 px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"}),i.jsx("button",{type:"submit",disabled:!c.trim(),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Buscar"})]}),t&&i.jsxs("div",{className:"mt-4 flex gap-2",children:[i.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[i.jsx(S3e,{className:"w-4 h-4"}),d?"Copiado!":"Copiar link"]}),i.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 text-sm text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[i.jsx(A4e,{className:"w-4 h-4"}),"Compartir"]})]})]}),N=()=>{const{estadoActual:T}=r;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",style:{borderTop:`4px solid ${T.color}`},children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx(fqe,{estado:T.codigo,size:250})}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"text-4xl",children:T.icono}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:T.nombre}),i.jsx("p",{className:"text-slate-600 mb-3",children:T.descripcion}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Kl,{className:"w-4 h-4"}),i.jsxs("span",{children:["ltima actualizacin: ",r.recoleccion.updatedAt?new Date(r.recoleccion.updatedAt).toLocaleString("es-DO"):"No disponible"]})]})]})]})]})},S=()=>{const{timeline:T}=r;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6",children:"Historial de Estados"}),i.jsx("div",{className:"space-y-4",children:T.map((R,z)=>{const G=R.completado===!0,O=R.actual===!0;return i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-md ${G?"bg-emerald-500 text-white ring-4 ring-emerald-100":"bg-slate-200 text-slate-400"}`,children:G?i.jsx(Jr,{className:"w-6 h-6 fill-current"}):i.jsx(Wo,{className:"w-6 h-6"})}),z<T.length-1&&i.jsx("div",{className:`w-1 h-12 transition-all ${G?"bg-emerald-400":"bg-slate-200"}`})]}),i.jsxs("div",{className:"flex-1 pb-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-lg",children:R.icono}),i.jsx("h4",{className:`font-semibold ${O?"text-indigo-600 font-bold":G?"text-slate-800":"text-slate-400"}`,children:R.nombre}),O&&i.jsx("span",{className:"px-3 py-1 text-xs bg-indigo-500 text-white rounded-full font-semibold animate-pulse",children:"ACTUAL"}),G&&!O&&i.jsx(Jr,{className:"w-4 h-4 text-emerald-500"})]}),i.jsx("p",{className:`text-sm ${G?"text-slate-600":"text-slate-400"}`,children:R.descripcion||R.producto||"Sin descripcin"}),R.fecha&&i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(R.fecha).toLocaleString("es-DO")})]})]},z)})})]})};return a?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent mb-4"}),i.jsx("p",{className:"text-slate-600",children:"Buscando informacin..."})]})}):o&&!a?i.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[_(),i.jsxs("div",{className:"bg-rose-50 border border-rose-200 rounded-lg p-6 text-center",children:[i.jsx(_s,{className:"w-12 h-12 text-rose-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-rose-800 mb-2",children:"No se encontr el paquete"}),i.jsx("p",{className:"text-rose-700",children:o}),i.jsx("p",{className:"text-sm text-rose-600 mt-2",children:"Verifica que el cdigo de tracking sea correcto"})]})]})}):!t&&!a?i.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx(Lr,{className:"w-16 h-16 text-indigo-600 mx-auto mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Sistema de Rastreo de Paquetes"}),i.jsx("p",{className:"text-slate-600",children:"Ingresa tu cdigo de tracking para ver el estado de tu envo"})]}),_(),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"font-semibold text-slate-800 mb-3",children:"Cmo funciona?"}),i.jsxs("ol",{className:"space-y-2 text-slate-700",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold text-indigo-600",children:"1."}),"Ingresa tu cdigo de tracking en el campo de bsqueda"]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold text-indigo-600",children:"2."}),'Haz clic en "Buscar" para ver el estado de tu paquete']}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-semibold text-indigo-600",children:"3."}),"Puedes compartir el link de rastreo con otras personas"]})]})]})]})}):r?i.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-1",children:"Rastreo de Paquete"}),i.jsx("p",{className:"text-slate-600",children:r.recoleccion.codigoTracking})]}),_(),N(),S()]})}):null},QN="https://proyecto-envios-production.up.railway.app/api";console.log("PublicBooking using API_URL:",QN);function Oq(){var P;const{companyId:t}=qy(),e=Fs(),[r,n]=A.useState(!!t),[a,s]=A.useState(""),[o,l]=A.useState(null),[c,u]=A.useState(!1),[d,h]=A.useState(!1),[p,g]=A.useState(""),[b,w]=A.useState(!1),[_,N]=A.useState({remitenteNombre:"",remitenteTelefono:"",remitenteEmail:"",remitenteDireccion:"",fechaPreferida:"",horaPreferida:"",items:[],fotos:[],notasAdicionales:""}),[S,T]=A.useState({descripcion:"",cantidad:1,pesoAproximado:"",dimensionesAproximadas:""});A.useEffect(()=>{R()},[t]);const R=async()=>{try{if(!t)return;const B=await ms.get(`${QN}/companies/public/${t}`);B.data.success?l(B.data.data):Ke.error("Empresa no encontrada")}catch(B){console.error("Error fetching company:",B),Ke.error("No se pudo cargar la informacin de la empresa")}finally{n(!1)}},z=()=>{if(!S.descripcion){Ke.error("Ingresa una descripcin del artculo");return}N({..._,items:[..._.items,S]}),T({descripcion:"",cantidad:1,pesoAproximado:"",dimensionesAproximadas:""})},G=B=>{N({..._,items:_.items.filter((F,ee)=>ee!==B)})},O=async B=>{console.log(" handlePhotoUpload iniciado");const F=Array.from(B.target.files);if(console.log(" Archivos seleccionados:",F.length),F.length===0){console.log(" No se seleccionaron archivos");return}if(_.fotos.length+F.length>5){Ke.error("Mximo 5 fotos permitidas");return}const ee=5*1024*1024;for(const Z of F)if(Z.size>ee){Ke.error(`La foto "${Z.name}" es muy grande. Mximo 5MB por foto.`);return}w(!0),Ke.info("Subiendo fotos...");try{const Z=F.map(async ne=>{const ae=Date.now(),me=Math.floor(Math.random()*1e4),Te=`solicitudes/${t}/${ae}-${me}-${ne.name}`,we=Qb(jx,Te);return await Yb(we,ne),await Zb(we)}),ce=await Promise.all(Z);N(ne=>({...ne,fotos:[...ne.fotos,...ce]})),console.log(" Fotos subidas exitosamente:",ce),Ke.success(`${F.length} foto(s) subida(s) correctamente`)}catch(Z){console.error(" Error uploading photos:",Z),console.error("Error details:",{message:Z.message,code:Z.code,stack:Z.stack}),Ke.error(`Error al subir las fotos: ${Z.message||"Intenta nuevamente"}`)}finally{w(!1)}},D=B=>{N(F=>({...F,fotos:F.fotos.filter((ee,Z)=>Z!==B)})),Ke.success("Foto eliminada")},I=async B=>{var F,ee,Z,ce,ne,ae,me,Te;B.preventDefault(),console.log(" [PublicBooking] handleSubmit iniciado"),u(!0);try{const we={companyId:t,remitenteNombre:_.remitenteNombre,remitenteTelefono:_.remitenteTelefono,remitenteEmail:_.remitenteEmail,remitenteDireccion:_.remitenteDireccion,fechaPreferida:_.fechaPreferida,horaPreferida:_.horaPreferida,items:_.items,fotos:_.fotos,notasAdicionales:_.notasAdicionales,tipoServicio:"standard"};console.log(" [PublicBooking] Enviando payload:",we),console.log(" [PublicBooking] API URL:",`${QN}/solicitudes/public`);const q=await ms.post(`${QN}/solicitudes/public`,we);console.log(" [PublicBooking] Respuesta recibida:",q.data),q.data.success&&(h(!0),g(((F=q.data.data)==null?void 0:F.codigoRastreo)||((ee=q.data.data)==null?void 0:ee.id)||"N/A"),Ke.success("Solicitud enviada exitosamente! Te contactaremos pronto."))}catch(we){console.error(" [PublicBooking] Error completo:",we),console.error(" [PublicBooking] Error response:",(Z=we.response)==null?void 0:Z.data),console.error(" [PublicBooking] Error status:",(ce=we.response)==null?void 0:ce.status),Ke.error(((ae=(ne=we.response)==null?void 0:ne.data)==null?void 0:ae.error)||((Te=(me=we.response)==null?void 0:me.data)==null?void 0:Te.message)||"Error enviando solicitud")}finally{u(!1)}};if(r)return i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx(xp,{className:"animate-spin text-indigo-600"})});if(!t&&!o)return i.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:[i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center border border-slate-100",children:[i.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Lr,{className:"w-8 h-8 text-indigo-600"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Agendar Recoleccin"}),i.jsx("p",{className:"text-slate-600 mb-8",children:"Ingresa el ID de la compaa para iniciar tu solicitud."}),i.jsxs("form",{onSubmit:B=>{B.preventDefault(),a.trim()&&e(`/agendar/${a.trim()}`)},children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx($d,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"text",value:a,onChange:B=>s(B.target.value),placeholder:"Ej: embarques_ivan",className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all bg-slate-50 focus:bg-white",required:!0})]}),i.jsxs("button",{type:"submit",disabled:!a.trim(),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:["Continuar ",i.jsx(e3e,{className:"w-4 h-4"})]})]}),i.jsx("p",{className:"mt-6 text-xs text-slate-400",children:"No sabes el ID? Pdelo a tu proveedor de envos."})]}),i.jsx("div",{className:"mt-8 text-slate-400 text-sm font-medium",children:"Powered by ProLogix"})]});if(!o)return i.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-500 font-medium",children:"Empresa no encontrada o enlace invlido"});const V=((P=o.colors)==null?void 0:P.primary)||"#3b82f6";return d?i.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Lr,{className:"w-8 h-8 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Solicitud Recibida!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Tu cdigo de rastreo es:"}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-xl mb-6",children:i.jsx("span",{className:"text-3xl font-mono font-bold text-gray-800 tracking-wider",children:p})}),i.jsx("p",{className:"text-sm text-gray-500",children:"Hemos enviado una confirmacin a tu WhatsApp."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"mt-8 text-blue-600 hover:underline",children:"Nueva Solicitud"})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",style:{"--primary":V},children:[i.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 flex items-center gap-4",children:[o.logo&&i.jsx("img",{src:o.logo,alt:o.name,className:"h-10 w-10 rounded-full object-cover"}),i.jsxs("div",{children:[i.jsx("h1",{className:"font-bold text-xl text-gray-800",children:o.name||"Solicitud de Recoleccin"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Nueva Solicitud"})]})]})}),i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:i.jsxs("form",{onSubmit:I,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Da,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Tus Datos"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("input",{required:!0,placeholder:"Tu Nombre Completo",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.remitenteNombre,onChange:B=>N({..._,remitenteNombre:B.target.value})}),i.jsx("input",{required:!0,placeholder:"Telfono / WhatsApp",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.remitenteTelefono,onChange:B=>N({..._,remitenteTelefono:B.target.value})}),i.jsx("input",{type:"email",placeholder:"Email (Opcional)",className:"p-3 border border-gray-300 rounded-lg w-full md:col-span-2 focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.remitenteEmail,onChange:B=>N({..._,remitenteEmail:B.target.value})})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Da,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Direccin de Recoleccin"]}),i.jsx("textarea",{required:!0,placeholder:"Direccin exacta donde recogeremos (Calle, nmero, sector, referencias)",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",rows:"3",value:_.remitenteDireccion,onChange:B=>N({..._,remitenteDireccion:B.target.value})}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" S lo ms especfico posible para que nuestro equipo te encuentre fcilmente"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Kl,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Fecha y Hora Preferida"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Fecha"}),i.jsx("input",{type:"date",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.fechaPreferida,onChange:B=>N({..._,fechaPreferida:B.target.value}),min:new Date().toISOString().split("T")[0]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:"Hora"}),i.jsx("input",{type:"time",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",value:_.horaPreferida,onChange:B=>N({..._,horaPreferida:B.target.value})})]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" Opcional: Si no especificas, te contactaremos para coordinar"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Lr,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Qu necesitas enviar?"]}),_.items.length>0&&i.jsx("div",{className:"space-y-2 mb-4",children:_.items.map((B,F)=>i.jsxs("div",{className:"flex justify-between items-start bg-gray-50 p-3 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"font-medium text-gray-700",children:[B.cantidad,"x ",B.descripcion]}),B.pesoAproximado&&i.jsxs("div",{className:"text-xs text-gray-500",children:["Peso: ",B.pesoAproximado]}),B.dimensionesAproximadas&&i.jsxs("div",{className:"text-xs text-gray-500",children:["Dimensiones: ",B.dimensionesAproximadas]})]}),i.jsx("button",{type:"button",onClick:()=>G(F),className:"text-red-500 hover:text-red-700 text-sm font-medium ml-2",children:"Eliminar"})]},F))}),i.jsxs("div",{className:"space-y-3 border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Descripcin del artculo *"}),i.jsx("input",{value:S.descripcion,onChange:B=>T({...S,descripcion:B.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",placeholder:"Ej: Caja de zapatos, Electrodomstico, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Cantidad *"}),i.jsx("input",{type:"number",min:"1",value:S.cantidad,onChange:B=>T({...S,cantidad:parseInt(B.target.value)||1}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Peso aproximado (opcional)"}),i.jsx("input",{value:S.pesoAproximado,onChange:B=>T({...S,pesoAproximado:B.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",placeholder:"Ej: 5kg, 10 libras"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Dimensiones aproximadas (opcional)"}),i.jsx("input",{value:S.dimensionesAproximadas,onChange:B=>T({...S,dimensionesAproximadas:B.target.value}),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",placeholder:"Ej: 30x20x15cm"})]})]}),i.jsx("button",{type:"button",onClick:z,className:"w-full bg-[color:var(--primary)] text-white py-2 px-4 rounded-lg hover:opacity-90 transition-opacity font-medium",children:"+ Agregar Artculo"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:" Esta informacin nos ayuda a estimar el espacio necesario en el vehculo"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(Gf,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Fotos (Opcional)"]}),_.fotos.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4",children:_.fotos.map((B,F)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:B,alt:`Foto ${F+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),i.jsx("button",{type:"button",onClick:()=>D(F),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(Zn,{className:"w-4 h-4"})})]},F))}),i.jsxs("label",{className:`border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-[color:var(--primary)] transition-colors cursor-pointer block ${b?"opacity-50 pointer-events-none":""}`,children:[i.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:O,className:"hidden",disabled:b||_.fotos.length>=5}),b?i.jsxs(i.Fragment,{children:[i.jsx(xp,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2 animate-spin"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Subiendo fotos..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(m3,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:_.fotos.length>=5?"Mximo 5 fotos alcanzado":"Toca para subir fotos de tus artculos"}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:_.fotos.length>=5?"Elimina algunas fotos para subir ms":`Mximo 5 fotos, 5MB cada una (${_.fotos.length}/5)`})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[i.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-gray-700 mb-4",children:[i.jsx(m3,{className:"w-5 h-5 text-[color:var(--primary)]"}),"Notas Adicionales"]}),i.jsx("textarea",{placeholder:"Algo ms que debamos saber? (instrucciones especiales, acceso al lugar, etc.)",className:"p-3 border border-gray-300 rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-[color:var(--primary)] focus:border-transparent",rows:"3",value:_.notasAdicionales,onChange:B=>N({..._,notasAdicionales:B.target.value})})]}),i.jsx("button",{disabled:c,type:"submit",className:"w-full bg-[color:var(--primary)] text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx(xp,{className:"w-5 h-5 animate-spin"}),"Enviando solicitud..."]}):" Solicitar Recoleccin"})]})}),i.jsx("div",{className:"text-center py-6 text-gray-400 text-sm",children:"Powered by ProLogix"})]})}const mqe=()=>{const{rutaId:t}=qy(),e=Fs(),[r,n]=A.useState(!0),[a,s]=A.useState(null),[o,l]=A.useState(null);A.useEffect(()=>{const S=R0.onAuthStateChanged(T=>{T?(console.log(" Usuario autenticado, cargando datos de impresin..."),c()):(console.error(" No hay usuario autenticado para imprimir"),s("Debes estar autenticado para imprimir. Por favor, inicia sesin."),n(!1))});return()=>S()},[t]);const c=async()=>{var S,T;try{n(!0),s(null),console.log(` Solicitando datos de impresin para ruta ${t}...`);const R=await wt.get(`/repartidores/rutas/${t}/exportar-impresion`);R.data.success?(console.log(" Datos de impresin recibidos:",R.data.data),console.log(" Informacin de compaa:",R.data.data.company),l(R.data.data)):s("No se pudieron cargar los datos")}catch(R){console.error(" Error cargando datos para impresin:",R),s(((T=(S=R.response)==null?void 0:S.data)==null?void 0:T.message)||"Error al cargar los datos. Por favor, intenta nuevamente.")}finally{n(!1)}},u=()=>{window.print()},d=()=>{e(-1)},h=S=>S?(S instanceof Date?S:new Date(S)).toLocaleDateString("es-DO",{year:"numeric",month:"long",day:"numeric"}):"-",p=S=>new Intl.NumberFormat("es-DO",{style:"currency",currency:"DOP"}).format(S||0),g=S=>({pendiente:"bg-amber-100 text-amber-800",en_ruta:"bg-indigo-100 text-indigo-800",entregada:"bg-emerald-100 text-emerald-800",no_entregada:"bg-rose-100 text-rose-800",pagada:"bg-emerald-100 text-emerald-800",pendiente_pago:"bg-amber-100 text-amber-800"})[S]||"bg-slate-100 text-slate-800";if(r)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(bs,{className:"w-12 h-12 text-indigo-600 animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600",children:"Cargando datos para impresin..."})]})});if(a)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx(_s,{className:"w-16 h-16 text-rose-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Error"}),i.jsx("p",{className:"text-slate-600 mb-6",children:a}),i.jsx("button",{onClick:d,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Volver"})]})});if(!o)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsx("p",{className:"text-slate-600",children:"No hay datos disponibles"})});const{ruta:b,company:w,facturas:_,stats:N}=o;return i.jsxs("div",{className:"min-h-screen bg-slate-50",children:[i.jsxs("div",{className:"no-print fixed top-4 right-4 flex gap-2 z-50",children:[i.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition shadow-lg",children:[i.jsx(ql,{size:20}),"Imprimir"]}),i.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition shadow-lg",children:[i.jsx(Zn,{size:20}),"Cerrar"]})]}),_.map((S,T)=>{var R,z,G;return i.jsxs("div",{className:"page-break w-[210mm] h-[297mm] mx-auto bg-white shadow-lg print:shadow-none p-6 print:p-4 mb-8 print:mb-0 overflow-hidden",children:[i.jsx("div",{className:"mb-4 pb-3 border-b-2 border-slate-300",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[w.logo?i.jsx("img",{src:w.logo,alt:w.nombre,className:"h-12 w-auto object-contain"}):i.jsx("div",{className:"h-12 w-12 bg-indigo-600 text-white flex items-center justify-center rounded-lg text-xl font-bold",children:((R=w.nombre)==null?void 0:R.charAt(0))||"E"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-slate-800",children:w.nombre}),i.jsxs("div",{className:"flex gap-3 text-xs text-slate-600",children:[w.telefono&&i.jsxs("span",{children:["Tel: ",w.telefono]}),w.email&&i.jsx("span",{children:w.email})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"HOJA DE ENTREGA"}),i.jsxs("p",{className:"text-xs text-slate-600",children:["Fecha: ",h(new Date)]}),i.jsx("p",{className:"text-sm font-semibold text-slate-700",children:b.nombre}),b.zona&&i.jsxs("p",{className:"text-xs text-slate-600",children:["Zona: ",b.zona]})]})]})}),i.jsxs("div",{className:"mb-3 p-2 bg-slate-50 rounded print:bg-slate-100 flex justify-between items-center",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-slate-600",children:"Repartidor: "}),i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:((z=b.repartidor)==null?void 0:z.nombre)||"No asignado"}),((G=b.repartidor)==null?void 0:G.telefono)&&i.jsxs("span",{className:"text-xs text-slate-600 ml-2",children:["Tel: ",b.repartidor.telefono]})]})}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs text-slate-600",children:"Factura "}),i.jsxs("span",{className:"text-base font-bold text-slate-800",children:["#",T+1,"/",_.length]})]})]}),i.jsxs("div",{className:"border-2 border-slate-300 rounded-lg p-3 mb-3",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2 pb-2 border-b border-slate-200",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800",children:S.codigoTracking}),i.jsxs("p",{className:"text-xs text-slate-600",children:["Factura: ",S.numeroFactura]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:`inline-block px-2 py-0.5 rounded-full text-xs font-semibold ${g(S.estado)}`,children:S.estado.replace("_"," ").toUpperCase()}),S.pago&&i.jsx("p",{className:"text-base font-bold text-slate-800 mt-1",children:p(S.pago.total)})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[S.remitente&&i.jsxs("div",{className:"p-2 bg-emerald-50 rounded print:bg-emerald-100",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-1",children:"REMITENTE"}),i.jsx("p",{className:"text-xs font-semibold text-slate-800",children:S.remitente.nombre}),S.remitente.telefono&&i.jsxs("p",{className:"text-xs text-slate-600",children:["Tel: ",S.remitente.telefono]})]}),i.jsxs("div",{className:`p-2 bg-indigo-50 rounded print:bg-indigo-100 ${S.remitente?"":"col-span-2"}`,children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-1",children:"DESTINATARIO"}),i.jsx("p",{className:"text-sm font-bold text-slate-800",children:S.destinatario.nombre}),i.jsx("p",{className:"text-xs text-slate-700",children:S.destinatario.direccion}),i.jsxs("div",{className:"flex gap-2 text-xs text-slate-600 mt-1",children:[S.destinatario.sector&&i.jsxs("span",{children:["Sector: ",S.destinatario.sector]}),S.destinatario.telefono&&i.jsxs("span",{children:["Tel: ",S.destinatario.telefono]})]})]})]}),S.items&&S.items.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("h4",{className:"font-semibold text-slate-700 text-xs mb-2 pb-1 border-b border-slate-300",children:["ITEMS A ENTREGAR (",S.items.length,")"]}),i.jsx("div",{className:"space-y-1.5",children:S.items.map((O,D)=>i.jsxs("div",{className:"flex items-start gap-2 p-1.5 bg-slate-50 rounded print:bg-white print:border print:border-slate-300",children:[i.jsx("div",{className:"flex-shrink-0 mt-0.5",children:i.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 rounded print:border-black"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-800 leading-tight",children:O.descripcion||O.producto||"Sin descripcin"}),i.jsxs("div",{className:"flex gap-2 text-xs text-slate-600",children:[O.cantidad>1&&i.jsxs("span",{children:["Cant: ",O.cantidad]}),O.peso&&i.jsxs("span",{children:["Peso: ",O.peso]})]})]}),O.entregado&&i.jsx("span",{className:"text-emerald-600 font-semibold text-xs bg-emerald-100 px-1.5 py-0.5 rounded",children:""})]})})]},D))})]}),S.pago&&i.jsxs("div",{className:"mb-2 p-2 bg-amber-50 border border-amber-300 rounded print:bg-amber-100",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-1",children:"INFORMACIN DE PAGO"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600",children:"Monto Total: "}),i.jsx("span",{className:"font-bold text-slate-900",children:p(S.pago.total)})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-600",children:"Estado: "}),i.jsx("span",{className:`font-semibold ${S.pago.estado==="pagada"?"text-emerald-600":"text-amber-700"}`,children:S.pago.estado==="pagada"?" PAGADO":"PENDIENTE"})]}),S.pago.montoPendiente>0&&i.jsxs("div",{className:"col-span-2 pt-1 border-t border-amber-400",children:[i.jsx("span",{className:"text-slate-700 font-semibold",children:"Monto a Cobrar: "}),i.jsx("span",{className:"font-bold text-rose-600 text-sm",children:p(S.pago.montoPendiente)})]})]})]}),(S.notas||S.notasInternas)&&i.jsxs("div",{className:"mb-2 p-2 bg-amber-50 border-l-2 border-amber-400 rounded print:bg-amber-100",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-0.5",children:" NOTAS"}),S.notas&&i.jsx("p",{className:"text-xs text-slate-800",children:S.notas}),S.notasInternas&&i.jsx("p",{className:"text-xs text-slate-600 italic",children:S.notasInternas})]})]}),i.jsxs("div",{className:"border-2 border-slate-300 rounded-lg p-3 bg-slate-50 print:bg-white",children:[i.jsx("h4",{className:"font-semibold text-slate-700 text-xs mb-2",children:"CONFIRMACIN DE ENTREGA"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Nombre de quien recibe:"}),i.jsx("div",{className:"border-b-2 border-slate-400 h-8"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Cdula / ID:"}),i.jsx("div",{className:"border-b-2 border-slate-400 h-8"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Firma del cliente:"}),i.jsx("div",{className:"border-2 border-slate-400 h-16 rounded"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-600 mb-1",children:"Hora de entrega:"}),i.jsx("div",{className:"border-b-2 border-slate-400 h-8 mt-1"}),i.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Fecha: ",h(new Date)]})]})]})]}),i.jsx("div",{className:"absolute bottom-4 left-6 right-6 pt-2 border-t border-slate-300 text-center text-xs text-slate-500",children:i.jsxs("p",{children:[w.nombre," - Sistema de Gestin de Envos"]})})]},S.id)}),i.jsx("style",{children:`
        @media print {
          body {
            margin: 0;
            padding: 0;
          }

          .no-print {
            display: none !important;
          }

          /* Configuracin para papel A4 (210mm x 297mm) */
          @page {
            size: A4;
            margin: 0;
          }

          .print\\:break-inside-avoid {
            break-inside: avoid;
            page-break-inside: avoid;
          }

          .print\\:page-break-inside-avoid {
            page-break-inside: avoid;
          }

          /* Cada factura en su propia pgina */
          .page-break {
            page-break-after: always;
            break-after: page;
          }

          .page-break:last-child {
            page-break-after: avoid;
            break-after: avoid;
          }

          /* Estilos especficos para impresin */
          .print\\:shadow-none {
            box-shadow: none !important;
          }

          .print\\:p-6 {
            padding: 1.5rem !important;
          }

          .print\\:mb-0 {
            margin-bottom: 0 !important;
          }

          .print\\:bg-slate-100 {
            background-color: #f3f4f6 !important;
          }

          .print\\:bg-indigo-100 {
            background-color: #dbeafe !important;
          }

          .print\\:bg-emerald-100 {
            background-color: #dcfce7 !important;
          }

          .print\\:bg-amber-100 {
            background-color: #fef3c7 !important;
          }

          .print\\:bg-amber-100 {
            background-color: #ffedd5 !important;
          }

          .print\\:bg-white {
            background-color: white !important;
          }

          .print\\:border {
            border-width: 1px !important;
          }

          .print\\:border-slate-300 {
            border-color: #d1d5db !important;
          }

          .print\\:border-black {
            border: 2px solid black !important;
          }

          /* Asegurar que el contenido no se corte */
          * {
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
          }
        }

        /* Estilos para pantalla */
        @media screen {
          .page-break {
            margin-bottom: 2rem;
          }
        }
      `})]})};function pqe(){const t=Fs(),[e,r]=A.useState(""),[n,a]=A.useState(!1),[s,o]=A.useState(""),[l,c]=A.useState(!1),u=async d=>{var h,p;d.preventDefault(),o(""),a(!0);try{(await wt.post("/auth/forgot-password",{email:e})).data.success&&c(!0)}catch(g){console.error("Error al solicitar recuperacion:",g),o(((p=(h=g.response)==null?void 0:h.data)==null?void 0:p.error)||"Error al procesar la solicitud. Intenta nuevamente.")}finally{a(!1)}};return l?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsx("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-emerald-500/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Jr,{className:"w-12 h-12 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Revisa tu correo"}),i.jsx("p",{className:"text-indigo-200/80 mb-6",children:"Si el email existe en nuestro sistema, recibirs un enlace de recuperacin en tu correo personal en los prximos minutos."}),i.jsx("p",{className:"text-sm text-indigo-300/60 mb-8",children:"El enlace ser vlido por 10 minutos."}),i.jsxs("button",{onClick:()=>t("/"),className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:[i.jsx(Hl,{className:"w-5 h-5"}),"Volver al inicio de sesin"]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ring-4 ring-white/10 p-4",children:i.jsx("img",{src:mw,alt:"ProLogix",className:"w-full h-full object-contain"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Olvidaste tu contrasea?"}),i.jsx("p",{className:"text-indigo-200/80 text-sm",children:"Ingresa tu email de empresa y te enviaremos un enlace de recuperacin a tu correo personal."})]}),s&&i.jsxs("div",{className:"bg-rose-500/20 border border-rose-500/50 text-white p-3 rounded-lg mb-6 flex items-center gap-2",children:[i.jsx(_s,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:s})]}),i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-2 uppercase tracking-wider",children:"Email de Empresa"}),i.jsxs("div",{className:"relative",children:[i.jsx(lh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400 w-5 h-5"}),i.jsx("input",{type:"email",value:e,onChange:d=>r(d.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"usuario@empresa.com",required:!0})]})]}),i.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:n?i.jsxs(i.Fragment,{children:[i.jsx(xp,{className:"animate-spin w-5 h-5"}),i.jsx("span",{children:"Enviando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(lh,{className:"w-5 h-5"}),i.jsx("span",{children:"Enviar enlace de recuperacin"})]})}),i.jsxs("button",{type:"button",onClick:()=>t("/"),className:"w-full text-indigo-300 hover:text-white transition-colors flex items-center justify-center gap-2 py-2",children:[i.jsx(Hl,{className:"w-4 h-4"}),"Volver al inicio de sesin"]})]})]})})}function gqe(){const t=Fs(),[e]=o1e(),r=e.get("token"),[n,a]=A.useState(""),[s,o]=A.useState(""),[l,c]=A.useState(!1),[u,d]=A.useState(!1),[h,p]=A.useState(!1),[g,b]=A.useState(""),[w,_]=A.useState(!1);A.useEffect(()=>{r||b("Token de recuperacin no vlido. Por favor solicita un nuevo enlace.")},[r]);const N=async S=>{var T,R;if(S.preventDefault(),b(""),n.length<6){b("La contrasea debe tener al menos 6 caracteres");return}if(n!==s){b("Las contraseas no coinciden");return}p(!0);try{(await wt.post("/auth/reset-password",{token:r,newPassword:n})).data.success&&(_(!0),setTimeout(()=>{t("/")},3e3))}catch(z){console.error("Error al restablecer contrasea:",z),b(((R=(T=z.response)==null?void 0:T.data)==null?void 0:R.error)||"Error al restablecer la contrasea. El enlace puede haber expirado.")}finally{p(!1)}};return w?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsx("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-emerald-500/20 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Jr,{className:"w-12 h-12 text-emerald-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Contrasea actualizada"}),i.jsx("p",{className:"text-indigo-200/80 mb-6",children:"Tu contrasea ha sido actualizada exitosamente. Ya puedes iniciar sesin con tu nueva contrasea."}),i.jsx("p",{className:"text-sm text-indigo-300/60 mb-8",children:"Redirigiendo al inicio de sesin..."}),i.jsxs("button",{onClick:()=>t("/"),className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:[i.jsx(Hl,{className:"w-5 h-5"}),"Ir al inicio de sesin"]})]})})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-900 via-indigo-900 to-slate-900 p-4",children:i.jsxs("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl p-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"bg-white w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg ring-4 ring-white/10 p-4",children:i.jsx("img",{src:mw,alt:"ProLogix",className:"w-full h-full object-contain"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Restablecer contrasea"}),i.jsx("p",{className:"text-indigo-200/80 text-sm",children:"Ingresa tu nueva contrasea"})]}),g&&i.jsxs("div",{className:"bg-rose-500/20 border border-rose-500/50 text-white p-3 rounded-lg mb-6 flex items-center gap-2",children:[i.jsx(_s,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("span",{className:"text-sm",children:g})]}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-2 uppercase tracking-wider",children:"Nueva Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(eb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400 w-5 h-5"}),i.jsx("input",{type:l?"text":"password",value:n,onChange:S=>a(S.target.value),className:"w-full pl-10 pr-12 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Mnimo 6 caracteres",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-indigo-400 hover:text-indigo-300 transition-colors",children:l?i.jsx(u8,{className:"w-5 h-5"}):i.jsx(Su,{className:"w-5 h-5"})})]}),i.jsx("p",{className:"text-xs text-indigo-300/60 mt-1",children:"La contrasea debe tener al menos 6 caracteres"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-indigo-200 mb-2 uppercase tracking-wider",children:"Confirmar Contrasea"}),i.jsxs("div",{className:"relative",children:[i.jsx(eb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400 w-5 h-5"}),i.jsx("input",{type:u?"text":"password",value:s,onChange:S=>o(S.target.value),className:"w-full pl-10 pr-12 py-3 bg-slate-900/50 border border-indigo-500/30 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Repite la contrasea",required:!0,minLength:6}),i.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-indigo-400 hover:text-indigo-300 transition-colors",children:u?i.jsx(u8,{className:"w-5 h-5"}):i.jsx(Su,{className:"w-5 h-5"})})]})]}),i.jsx("button",{type:"submit",disabled:h||!r,className:"w-full bg-gradient-to-r from-indigo-600 to-indigo-600 hover:from-indigo-500 hover:to-indigo-500 text-white font-bold py-3 px-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:h?i.jsxs(i.Fragment,{children:[i.jsx(xp,{className:"animate-spin w-5 h-5"}),i.jsx("span",{children:"Actualizando..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(eb,{className:"w-5 h-5"}),i.jsx("span",{children:"Restablecer contrasea"})]})}),i.jsxs("button",{type:"button",onClick:()=>t("/"),className:"w-full text-indigo-300 hover:text-white transition-colors flex items-center justify-center gap-2 py-2",children:[i.jsx(Hl,{className:"w-4 h-4"}),"Volver al inicio de sesin"]})]})]})})}const xqe=()=>{const[t,e]=A.useState([]),[r,n]=A.useState(null),[a,s]=A.useState({}),[o,l]=A.useState(!0),[c,u]=A.useState(!1),[d,h]=A.useState(!1),[p,g]=A.useState(new Date().getMonth()+1),[b,w]=A.useState(new Date().getFullYear()),[_,N]=A.useState([]);A.useEffect(()=>{S(),T()},[]);const S=async()=>{try{l(!0);const I=await wt.get("/finanzas/saas/planes");I.data.success&&e(I.data.data.planes)}catch(I){console.error("Error al cargar planes:",I),Ke.error("Error al cargar planes SaaS")}finally{l(!1)}},T=async()=>{try{const I=await wt.get("/finanzas/saas/facturas?limit=20");I.data.success&&N(I.data.data)}catch(I){console.error("Error al cargar facturas SaaS:",I)}},R=I=>{n(I.id),s({precio:I.precio,precioUSD:I.precioUSD})},z=()=>{n(null),s({})},G=async I=>{var V,P;try{u(!0),(await wt.put(`/finanzas/saas/planes/${I}`,a)).data.success&&(Ke.success("Plan actualizado exitosamente"),n(null),s({}),S())}catch(B){console.error("Error al actualizar plan:",B),Ke.error(((P=(V=B.response)==null?void 0:V.data)==null?void 0:P.message)||"Error al actualizar plan")}finally{u(!1)}},O=async()=>{var I,V;if(confirm(`Generar facturas de suscripcin para TODAS las empresas activas del mes ${p}/${b}?`))try{h(!0);const P=await wt.post("/finanzas/saas/generar-facturas-masivas",{mes:p,anio:b});if(P.data.success){const{exitosas:B,fallidas:F,duplicadas:ee}=P.data.data;Ke.success(` ${B.length} facturas generadas`),ee.length>0&&Ke.info(` ${ee.length} facturas ya existan`),F.length>0&&Ke.error(` ${F.length} facturas fallaron`),T()}}catch(P){console.error("Error al generar facturas masivas:",P),Ke.error(((V=(I=P.response)==null?void 0:I.data)==null?void 0:V.message)||"Error al generar facturas")}finally{h(!1)}},D=I=>`RD$ ${I.toLocaleString("es-DO")}`;return o?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Administracin de Planes SaaS"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Gestiona precios, caractersticas y facturacin de suscripciones"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center",children:i.jsx(Fl,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Precios de Planes"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map(I=>{const V=r===I.id;return i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border-2 border-slate-200 dark:border-slate-700 rounded-xl p-6 hover:shadow-lg transition-all",style:{borderColor:I.color+"40"},children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mb-3",style:{backgroundColor:I.color+"20",color:I.color},children:i.jsx(Lr,{className:"w-5 h-5"})}),i.jsx("h4",{className:"font-bold text-lg text-slate-900 dark:text-white",children:I.nombre}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:I.descripcion})]}),!V&&i.jsx("button",{onClick:()=>R(I),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(U1,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})})]}),V?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Precio (RD$)"}),i.jsx("input",{type:"number",value:a.precio,onChange:P=>s({...a,precio:parseInt(P.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Precio (USD)"}),i.jsx("input",{type:"number",value:a.precioUSD,onChange:P=>s({...a,precioUSD:parseInt(P.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>G(I.id),disabled:c,className:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-medium flex items-center justify-center gap-2 disabled:opacity-50",children:[i.jsx(f3,{className:"w-4 h-4"}),"Guardar"]}),i.jsx("button",{onClick:z,disabled:c,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg font-medium disabled:opacity-50",children:i.jsx(Zn,{className:"w-4 h-4"})})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsx("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:D(I.precio)}),i.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"/mes"})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["~$",I.precioUSD," USD"]}),i.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700 mt-4",children:i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{children:"Camiones:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:I.limites.camiones===-1?"Ilimitados":I.limites.camiones})]}),i.jsxs("div",{className:"flex items-center justify-between mt-1",children:[i.jsx("span",{children:"Usuarios:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:I.limites.usuarios===-1?"Ilimitados":I.limites.usuarios})]})]})})]})]},I.id)})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:i.jsx(Nu,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Generacin de Facturas"})]}),i.jsxs("div",{className:"flex items-end gap-4 mb-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mes"}),i.jsx("select",{value:p,onChange:I=>g(parseInt(I.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:Array.from({length:12},(I,V)=>V+1).map(I=>i.jsx("option",{value:I,children:new Date(2e3,I-1).toLocaleString("es",{month:"long"})},I))})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ao"}),i.jsx("input",{type:"number",value:b,onChange:I=>w(parseInt(I.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("button",{onClick:O,disabled:d,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:[i.jsx(Kl,{className:"w-4 h-4"}),d?"Generando...":"Generar Facturas Masivas"]})]}),_.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-4",children:"Facturas Recientes"}),i.jsx("div",{className:"space-y-2",children:_.slice(0,10).map(I=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${I.estado==="pagada"?"bg-emerald-100 dark:bg-emerald-900":I.estado==="vencida"?"bg-rose-100 dark:bg-rose-900":"bg-amber-100 dark:bg-amber-900"}`,children:I.estado==="pagada"?i.jsx(Jr,{className:`w-5 h-5 ${I.estado==="pagada"?"text-emerald-600":"text-amber-600"}`}):i.jsx(_s,{className:`w-5 h-5 ${I.estado==="vencida"?"text-rose-600":"text-amber-600"}`})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:I.companyName}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[I.numeroFactura,"  ",I.planNombre]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-bold text-slate-900 dark:text-white",children:D(I.monto)}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500 capitalize",children:I.estado})]})]},I.id))})]})]})]})},vqe=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=A.useState(0);return A.useEffect(()=>{const c=t/60;let u=0;const d=setInterval(()=>{u+=c,u>=t?(s(t),clearInterval(d)):s(u)},1e3/60);return()=>clearInterval(d)},[t]),i.jsxs("span",{children:[e,a.toLocaleString("en-US",{minimumFractionDigits:n,maximumFractionDigits:n}),r]})},D_=({title:t,value:e,change:r,icon:n,prefix:a="",suffix:s="",delay:o=0})=>i.jsx(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),i.jsx("div",{className:"mt-2 flex items-baseline gap-2",children:i.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:i.jsx(vqe,{value:e,prefix:a,suffix:s,decimals:a==="$"?2:0})})}),r!==void 0&&i.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[i.jsx(Ere,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),i.jsxs("span",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:[r,"%"]}),i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"vs mes anterior"})]})]}),i.jsx("div",{className:"p-3 rounded-lg bg-indigo-50 dark:bg-indigo-900/20",children:i.jsx(n,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400",strokeWidth:1.5})})]})}),bqe=()=>{const[t,e]=A.useState("overview"),[r,n]=A.useState("30"),[a,s]=A.useState(!0),[o,l]=A.useState({mrr:{total:0,change:0},empresasActivas:{total:0,change:0},facturasGeneradas:{total:0,change:0},arr:{total:0,change:0},empresasPorPlan:[]}),[c,u]=A.useState([]);return A.useEffect(()=>{(async()=>{s(!0);try{const[h,p]=await Promise.all([wt.get(`/finanzas/saas/overview?dateRange=${r}`),wt.get("/finanzas/saas/empresas?limit=5")]);h.data.success&&l(h.data.data),p.data.success&&u(p.data.data)}catch(h){console.error("Error fetching SaaS data:",h),Ke.error("Error al cargar datos financieros")}finally{s(!1)}})()},[r]),A.useEffect(()=>{setTimeout(()=>s(!1),500)},[r]),a?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"h-full overflow-auto bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10",children:i.jsx("div",{className:"px-8 py-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" Finanzas SaaS"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Mtricas de ingresos por suscripciones empresariales"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>e("overview"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${t==="overview"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(gp,{className:"w-4 h-4"}),"Overview"]}),i.jsxs("button",{onClick:()=>e("admin"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all flex items-center gap-2 ${t==="admin"?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[i.jsx(EP,{className:"w-4 h-4"}),"Administracin"]})]}),t==="overview"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 rounded-lg p-1",children:[{value:"7",label:"7 das"},{value:"30",label:"30 das"},{value:"90",label:"90 das"}].map(d=>i.jsx("button",{onClick:()=>n(d.value),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${r===d.value?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:d.label},d.value))}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[i.jsx(BA,{className:"w-4 h-4"}),"Exportar Reporte"]})]})]})]})})}),i.jsxs("div",{className:"p-8 space-y-6",children:[t==="admin"&&i.jsx(xqe,{}),t==="overview"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(D_,{title:"MRR (Ingreso Mensual Recurrente)",value:o.mrr.total,prefix:"$",change:o.mrr.change,icon:Fl,delay:0}),i.jsx(D_,{title:"Empresas Activas",value:o.empresasActivas.total,change:o.empresasActivas.change,icon:Qm,delay:.1}),i.jsx(D_,{title:"Facturas Generadas",value:o.facturasGeneradas.total,change:o.facturasGeneradas.change,icon:Jb,delay:.2}),i.jsx(D_,{title:"ARR (Ingreso Anual)",value:o.arr.total,prefix:"$",change:o.arr.change,icon:Tf,delay:.3})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"lg:col-span-2 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Crecimiento MRR"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Ingresos mensuales recurrentes"})]}),i.jsx("div",{className:"h-64 flex items-center justify-center bg-slate-50 dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700 border-dashed",children:i.jsxs("div",{className:"text-center",children:[i.jsx(gp,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Grfico de MRR (Prximamente)"})]})})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Distribucin por Plan"}),i.jsx("div",{className:"space-y-4",children:[{plan:"Enterprise",count:5,mrr:5e3,color:"bg-indigo-500"},{plan:"Professional",count:12,mrr:4800,color:"bg-emerald-500"},{plan:"Basic",count:7,mrr:2700,color:"bg-amber-500"}].map((d,h)=>{var p;return i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:d.plan}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:["$",d.mrr]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${d.mrr/(((p=o.mrr)==null?void 0:p.total)||1)*100}%`},transition:{duration:.8,delay:.6+h*.1},className:`h-full ${d.color}`})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:[d.count," empresas"]})]})]},h)})})]})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Empresas Suscritas"}),i.jsx("button",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 hover:text-indigo-700",children:"Ver todas "})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Empresa"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Plan"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"MRR"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Fecha Suscripcin"}),i.jsx("th",{className:"text-center py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Estado"})]})}),i.jsx("tbody",{children:c.map((d,h)=>i.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium text-slate-900 dark:text-white",children:d.nombre}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-400",children:d.plan})}),i.jsxs("td",{className:"py-3 px-4 text-sm font-semibold text-slate-900 dark:text-white",children:["$",d.mrr,"/mes"]}),i.jsx("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:new Date(d.fechaSuscripcion).toLocaleDateString()}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d.estado==="activo"?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"bg-rose-50 dark:bg-rose-900/30 text-rose-700 dark:text-rose-400"}`,children:d.estado==="activo"?" Activo":" Inactivo"})})]},h))})]})})]})]})]})]})};function Xoe(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Xoe(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ta(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Xoe(t))&&(n&&(n+=" "),n+=e);return n}var yqe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function xD(t){if(typeof t!="string")return!1;var e=yqe;return e.includes(t)}var wqe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],_qe=new Set(wqe);function Yoe(t){return typeof t!="string"?!1:_qe.has(t)}function Zoe(t){return typeof t=="string"&&t.startsWith("data-")}function Uc(t){if(typeof t!="object"||t===null)return{};var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Yoe(r)||Zoe(r))&&(e[r]=t[r]);return e}function Wp(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Uc(e)}return typeof t=="object"&&!Array.isArray(t)?Uc(t):null}function yl(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Yoe(r)||Zoe(r)||xD(r))&&(e[r]=t[r]);return e}function Nqe(t){return t==null?null:A.isValidElement(t)?yl(t.props):typeof t=="object"&&!Array.isArray(t)?yl(t):null}var Eqe=["children","width","height","viewBox","className","style","title","desc"];function sI(){return sI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sI.apply(null,arguments)}function Aqe(t,e){if(t==null)return{};var r,n,a=Sqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Sqe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var vD=A.forwardRef((t,e)=>{var{children:r,width:n,height:a,viewBox:s,className:o,style:l,title:c,desc:u}=t,d=Aqe(t,Eqe),h=s||{width:n,height:a,x:0,y:0},p=ta("recharts-surface",o);return A.createElement("svg",sI({},yl(d),{className:p,width:n,height:a,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,u),r)}),jqe=["children","className"];function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iI.apply(null,arguments)}function Tqe(t,e){if(t==null)return{};var r,n,a=Cqe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Cqe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var no=A.forwardRef((t,e)=>{var{children:r,className:n}=t,a=Tqe(t,jqe),s=ta("recharts-layer",n);return A.createElement("g",iI({className:s},yl(a),{ref:e}),r)}),Qoe=A.createContext(null),kqe=()=>A.useContext(Qoe);function Ha(t){return function(){return t}}const Joe=Math.cos,H3=Math.sin,pd=Math.sqrt,q3=Math.PI,mS=2*q3,oI=Math.PI,lI=2*oI,Um=1e-6,Iqe=lI-Um;function ele(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Oqe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return ele;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Rqe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?ele:Oqe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,u=a-r,d=o-e,h=l-r,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(p>Um)if(!(Math.abs(h*c-u*d)>Um)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-o,b=a-l,w=c*c+u*u,_=g*g+b*b,N=Math.sqrt(w),S=Math.sqrt(p),T=s*Math.tan((oI-Math.acos((w+p-_)/(2*N*S)))/2),R=T/S,z=T/N;Math.abs(R-1)>Um&&this._append`L${e+R*d},${r+R*h}`,this._append`A${s},${s},0,0,${+(h*g>d*b)},${this._x1=e+z*c},${this._y1=r+z*u}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=e+l,d=r+c,h=1^o,p=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Um||Math.abs(this._y1-d)>Um)&&this._append`L${u},${d}`,n&&(p<0&&(p=p%lI+lI),p>Iqe?this._append`A${n},${n},0,1,${h},${e-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:p>Um&&this._append`A${n},${n},0,${+(p>=oI)},${h},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function bD(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Rqe(e)}function yD(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function tle(t){this._context=t}tle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function pS(t){return new tle(t)}function rle(t){return t[0]}function nle(t){return t[1]}function ale(t,e){var r=Ha(!0),n=null,a=pS,s=null,o=bD(l);t=typeof t=="function"?t:t===void 0?rle:Ha(t),e=typeof e=="function"?e:e===void 0?nle:Ha(e);function l(c){var u,d=(c=yD(c)).length,h,p=!1,g;for(n==null&&(s=a(g=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===p&&((p=!p)?s.lineStart():s.lineEnd()),p&&s.point(+t(h,u,c),+e(h,u,c));if(g)return s=null,g+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ha(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ha(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ha(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function M_(t,e,r){var n=null,a=Ha(!0),s=null,o=pS,l=null,c=bD(u);t=typeof t=="function"?t:t===void 0?rle:Ha(+t),e=typeof e=="function"?e:Ha(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?nle:Ha(+r);function u(h){var p,g,b,w=(h=yD(h)).length,_,N=!1,S,T=new Array(w),R=new Array(w);for(s==null&&(l=o(S=c())),p=0;p<=w;++p){if(!(p<w&&a(_=h[p],p,h))===N)if(N=!N)g=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=g;--b)l.point(T[b],R[b]);l.lineEnd(),l.areaEnd()}N&&(T[p]=+t(_,p,h),R[p]=+e(_,p,h),l.point(n?+n(_,p,h):T[p],r?+r(_,p,h):R[p]))}if(S)return l=null,S+""||null}function d(){return ale().defined(a).curve(o).context(s)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Ha(+h),n=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Ha(+h),u):t},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ha(+h),u):n},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Ha(+h),r=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Ha(+h),u):e},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Ha(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Ha(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,s!=null&&(l=o(s)),u):o},u.context=function(h){return arguments.length?(h==null?s=l=null:l=o(s=h),u):s},u}class sle{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Pqe(t){return new sle(t,!0)}function Dqe(t){return new sle(t,!1)}const wD={draw(t,e){const r=pd(e/q3);t.moveTo(r,0),t.arc(0,0,r,0,mS)}},Mqe={draw(t,e){const r=pd(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},ile=pd(1/3),Lqe=ile*2,Fqe={draw(t,e){const r=pd(e/Lqe),n=r*ile;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Bqe={draw(t,e){const r=pd(e),n=-r/2;t.rect(n,n,r,r)}},Uqe=.8908130915292852,ole=H3(q3/10)/H3(7*q3/10),zqe=H3(mS/10)*ole,Vqe=-Joe(mS/10)*ole,$qe={draw(t,e){const r=pd(e*Uqe),n=zqe*r,a=Vqe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=mS*s/5,l=Joe(o),c=H3(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},WT=pd(3),Hqe={draw(t,e){const r=-pd(e/(WT*3));t.moveTo(0,r*2),t.lineTo(-WT*r,-r),t.lineTo(WT*r,-r),t.closePath()}},Qc=-.5,Jc=pd(3)/2,cI=1/pd(12),qqe=(cI/2+1)*3,Gqe={draw(t,e){const r=pd(e/qqe),n=r/2,a=r*cI,s=n,o=r*cI+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(Qc*n-Jc*a,Jc*n+Qc*a),t.lineTo(Qc*s-Jc*o,Jc*s+Qc*o),t.lineTo(Qc*l-Jc*c,Jc*l+Qc*c),t.lineTo(Qc*n+Jc*a,Qc*a-Jc*n),t.lineTo(Qc*s+Jc*o,Qc*o-Jc*s),t.lineTo(Qc*l+Jc*c,Qc*c-Jc*l),t.closePath()}};function Wqe(t,e){let r=null,n=bD(a);t=typeof t=="function"?t:Ha(t||wD),e=typeof e=="function"?e:Ha(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:Ha(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:Ha(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function G3(){}function W3(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function lle(t){this._context=t}lle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:W3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:W3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Kqe(t){return new lle(t)}function cle(t){this._context=t}cle.prototype={areaStart:G3,areaEnd:G3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:W3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Xqe(t){return new cle(t)}function ule(t){this._context=t}ule.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:W3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yqe(t){return new ule(t)}function dle(t){this._context=t}dle.prototype={areaStart:G3,areaEnd:G3,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Zqe(t){return new dle(t)}function Rq(t){return t<0?-1:1}function Pq(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(Rq(s)+Rq(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function Dq(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function KT(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function K3(t){this._context=t}K3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:KT(this,this._t0,Dq(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,KT(this,Dq(this,r=Pq(this,t,e)),r);break;default:KT(this,this._t0,r=Pq(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function fle(t){this._context=new hle(t)}(fle.prototype=Object.create(K3.prototype)).point=function(t,e){K3.prototype.point.call(this,e,t)};function hle(t){this._context=t}hle.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function Qqe(t){return new K3(t)}function Jqe(t){return new fle(t)}function mle(t){this._context=t}mle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=Mq(t),a=Mq(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Mq(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function eGe(t){return new mle(t)}function gS(t,e){this._context=t,this._t=e}gS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function tGe(t){return new gS(t,.5)}function rGe(t){return new gS(t,0)}function nGe(t){return new gS(t,1)}function Px(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function uI(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function aGe(t,e){return t[e]}function sGe(t){const e=[];return e.key=t,e}function iGe(){var t=Ha([]),e=uI,r=Px,n=aGe;function a(s){var o=Array.from(t.apply(this,arguments),sGe),l,c=o.length,u=-1,d;for(const h of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(h,o[l].key,u,s)]).data=h;for(l=0,d=yD(e(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Ha(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Ha(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?uI:typeof s=="function"?s:Ha(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Px,a):r},a}function oGe(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}Px(t,e)}}function lGe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Px(t,e)}}function cGe(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=t[e[l]],h=d[n][1]||0,p=d[n-1][1]||0,g=(h-p)/2,b=0;b<l;++b){var w=t[e[b]],_=w[n][1]||0,N=w[n-1][1]||0;g+=_-N}c+=h,u+=g*h}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Px(t,e)}}var xS={},ple={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==="__proto__"}t.isUnsafeProperty=e})(ple);var _D={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}t.isDeepKey=e})(_D);var vS={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}t.toKey=e})(vS);var bS={},gle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(e).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}t.toString=e})(gle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gle,r=vS;function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=e.toString(a);const s=[],o=a.length;if(o===0)return s;let l=0,c="",u="",d=!1;for(a.charCodeAt(0)===46&&(s.push(""),l++);l<o;){const h=a[l];u?h==="\\"&&l+1<o?(l++,c+=a[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,s.push(c),c=""):c+=h:h==="["?(d=!0,c&&(s.push(c),c="")):h==="."?c&&(s.push(c),c=""):c+=h,l++}return c&&s.push(c),s}t.toPath=n})(bS);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ple,r=_D,n=vS,a=bS;function s(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?s(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||e.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}t.get=s})(xS);var uGe=xS.get;const Kp=Vc(uGe);var to=t=>t===0?0:t>0?1:-1,cd=t=>typeof t=="number"&&t!=+t,mh=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Pr=t=>(typeof t=="number"||t instanceof Number)&&!cd(t),Xd=t=>Pr(t)||typeof t=="string",dGe=0,xy=t=>{var e=++dGe;return"".concat(t||"").concat(e)},Go=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Pr(e)&&typeof e!="string")return n;var s;if(mh(e)){if(r==null)return n;var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return cd(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},xle=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,r={},n=0;n<e;n++)if(!r[t[n]])r[t[n]]=!0;else return!0;return!1};function cs(t,e,r){return Pr(t)&&Pr(e)?t+r*(e-t):e}function vle(t,e,r){if(!(!t||!t.length))return t.find(n=>n&&(typeof e=="function"?e(n):Kp(n,e))===r)}var fs=t=>t===null||typeof t>"u",Rw=t=>fs(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function fGe(t){return t!=null}function Pw(){}var hGe=["type","size","sizeType"];function dI(){return dI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dI.apply(null,arguments)}function Lq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fq(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lq(Object(r),!0).forEach(function(n){mGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mGe(t,e,r){return(e=pGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pGe(t){var e=gGe(t,"string");return typeof e=="symbol"?e:e+""}function gGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xGe(t,e){if(t==null)return{};var r,n,a=vGe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vGe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var ble={symbolCircle:wD,symbolCross:Mqe,symbolDiamond:Fqe,symbolSquare:Bqe,symbolStar:$qe,symbolTriangle:Hqe,symbolWye:Gqe},bGe=Math.PI/180,yGe=t=>{var e="symbol".concat(Rw(t));return ble[e]||wD},wGe=(t,e,r)=>{if(e==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var n=18*bGe;return 1.25*t*t*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},_Ge=(t,e)=>{ble["symbol".concat(Rw(t))]=e},ND=t=>{var{type:e="circle",size:r=64,sizeType:n="area"}=t,a=xGe(t,hGe),s=Fq(Fq({},a),{},{type:e,size:r,sizeType:n}),o="circle";typeof e=="string"&&(o=e);var l=()=>{var p=yGe(o),g=Wqe().type(p).size(wGe(r,n,o)),b=g();if(b!==null)return b},{className:c,cx:u,cy:d}=s,h=yl(s);return Pr(u)&&Pr(d)&&Pr(r)?A.createElement("path",dI({},h,{className:ta("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};ND.registerSymbol=_Ge;var yle=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,ED=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(A.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{xD(a)&&(n[a]=s=>r[a](r,s))}),n},NGe=(t,e,r)=>n=>(t(e,r,n),null),Dw=(t,e,r)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var n=null;return Object.keys(t).forEach(a=>{var s=t[a];xD(a)&&typeof s=="function"&&(n||(n={}),n[a]=NGe(s,e,r))}),n};function Bq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function EGe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bq(Object(r),!0).forEach(function(n){AGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AGe(t,e,r){return(e=SGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SGe(t){var e=jGe(t,"string");return typeof e=="symbol"?e:e+""}function jGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yi(t,e){var r=EGe({},t),n=e,a=Object.keys(e),s=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return s}function X3(){return X3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},X3.apply(null,arguments)}function Uq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function TGe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uq(Object(r),!0).forEach(function(n){CGe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uq(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CGe(t,e,r){return(e=kGe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kGe(t){var e=IGe(t,"string");return typeof e=="symbol"?e:e+""}function IGe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nu=32,OGe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function RGe(t){var{data:e,iconType:r,inactiveColor:n}=t,a=nu/2,s=nu/6,o=nu/3,l=e.inactive?n:e.color,c=r??e.type;if(c==="none")return null;if(c==="plainline"){var u;return A.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=e.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:nu,y2:a,className:"recharts-legend-icon"})}if(c==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(nu,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return A.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(nu/8,"h").concat(nu,"v").concat(nu*3/4,"h").concat(-nu,"z"),className:"recharts-legend-icon"});if(A.isValidElement(e.legendIcon)){var d=TGe({},e);return delete d.legendIcon,A.cloneElement(e.legendIcon,d)}return A.createElement(ND,{fill:l,cx:a,cy:a,size:nu,sizeType:"diameter",type:c})}function PGe(t){var{payload:e,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:o}=t,l={x:0,y:0,width:nu,height:nu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((d,h)=>{var p=d.formatter||a,g=ta({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:d.inactive});if(d.type==="none")return null;var b=d.inactive?s:d.color,w=p?p(d.value,d,h):d.value;return A.createElement("li",X3({className:g,style:c,key:"legend-item-".concat(h)},Dw(t,d,h)),A.createElement(vD,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(w," legend icon")},A.createElement(RGe,{data:d,iconType:o,inactiveColor:s})),A.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},w))})}var DGe=t=>{var e=yi(t,OGe),{payload:r,layout:n,align:a}=e;if(!r||!r.length)return null;var s={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:s},A.createElement(PGe,X3({},e,{payload:r})))},wle={},_le={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){const a=new Map;for(let s=0;s<r.length;s++){const o=r[s],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}t.uniqBy=e})(_le);var AD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r}t.identity=e})(AD);var Nle={},yS={},Ele={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Number.isSafeInteger(r)&&r>=0}t.isLength=e})(Ele);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ele;function r(n){return n!=null&&typeof n!="function"&&e.isLength(n.length)}t.isArrayLike=r})(yS);var Ale={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="object"&&r!==null}t.isObjectLike=e})(Ale);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yS,r=Ale;function n(a){return r.isObjectLike(a)&&e.isArrayLike(a)}t.isArrayLikeObject=n})(Nle);var Sle={},jle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xS;function r(n){return function(a){return e.get(a,n)}}t.property=r})(jle);var Tle={},SD={},Cle={},jD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r!==null&&(typeof r=="object"||typeof r=="function")}t.isObject=e})(jD);var TD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null||typeof r!="object"&&typeof r!="function"}t.isPrimitive=e})(TD);var CD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}t.eq=e})(CD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jD,r=TD,n=CD;function a(d,h,p){return typeof p!="function"?a(d,h,()=>{}):s(d,h,function g(b,w,_,N,S,T){const R=p(b,w,_,N,S,T);return R!==void 0?!!R:s(b,w,g,T)},new Map)}function s(d,h,p,g){if(h===d)return!0;switch(typeof h){case"object":return o(d,h,p,g);case"function":return Object.keys(h).length>0?s(d,{...h},p,g):n.eq(d,h);default:return e.isObject(d)?typeof h=="string"?h==="":!0:n.eq(d,h)}}function o(d,h,p,g){if(h==null)return!0;if(Array.isArray(h))return c(d,h,p,g);if(h instanceof Map)return l(d,h,p,g);if(h instanceof Set)return u(d,h,p,g);const b=Object.keys(h);if(d==null)return b.length===0;if(b.length===0)return!0;if(g!=null&&g.has(h))return g.get(h)===d;g==null||g.set(h,d);try{for(let w=0;w<b.length;w++){const _=b[w];if(!r.isPrimitive(d)&&!(_ in d)||h[_]===void 0&&d[_]!==void 0||h[_]===null&&d[_]!==null||!p(d[_],h[_],_,d,h,g))return!1}return!0}finally{g==null||g.delete(h)}}function l(d,h,p,g){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[b,w]of h.entries()){const _=d.get(b);if(p(_,w,b,d,h,g)===!1)return!1}return!0}function c(d,h,p,g){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const b=new Set;for(let w=0;w<h.length;w++){const _=h[w];let N=!1;for(let S=0;S<d.length;S++){if(b.has(S))continue;const T=d[S];let R=!1;if(p(T,_,w,d,h,g)&&(R=!0),R){b.add(S),N=!0;break}}if(!N)return!1}return!0}function u(d,h,p,g){return h.size===0?!0:d instanceof Set?c([...d],[...h],p,g):!1}t.isMatchWith=a,t.isSetMatch=u})(Cle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cle;function r(n,a){return e.isMatchWith(n,a,()=>{})}t.isMatch=r})(SD);var kle={},kD={},Ile={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}t.getSymbols=e})(Ile);var ID={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}t.getTag=e})(ID);var OD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",p="[object ArrayBuffer]",g="[object Object]",b="[object Error]",w="[object DataView]",_="[object Uint8Array]",N="[object Uint8ClampedArray]",S="[object Uint16Array]",T="[object Uint32Array]",R="[object BigUint64Array]",z="[object Int8Array]",G="[object Int16Array]",O="[object Int32Array]",D="[object BigInt64Array]",I="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=p,t.arrayTag=d,t.bigInt64ArrayTag=D,t.bigUint64ArrayTag=R,t.booleanTag=a,t.dataViewTag=w,t.dateTag=l,t.errorTag=b,t.float32ArrayTag=I,t.float64ArrayTag=V,t.functionTag=h,t.int16ArrayTag=G,t.int32ArrayTag=O,t.int8ArrayTag=z,t.mapTag=c,t.numberTag=n,t.objectTag=g,t.regexpTag=e,t.setTag=u,t.stringTag=r,t.symbolTag=o,t.uint16ArrayTag=S,t.uint32ArrayTag=T,t.uint8ArrayTag=_,t.uint8ClampedArrayTag=N})(OD);var Ole={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}t.isTypedArray=e})(Ole);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ile,r=ID,n=OD,a=TD,s=Ole;function o(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,p,g=new Map,b=void 0){const w=b==null?void 0:b(d,h,p,g);if(w!==void 0)return w;if(a.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const _=new Array(d.length);g.set(d,_);for(let N=0;N<d.length;N++)_[N]=l(d[N],N,p,g,b);return Object.hasOwn(d,"index")&&(_.index=d.index),Object.hasOwn(d,"input")&&(_.input=d.input),_}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const _=new RegExp(d.source,d.flags);return _.lastIndex=d.lastIndex,_}if(d instanceof Map){const _=new Map;g.set(d,_);for(const[N,S]of d)_.set(N,l(S,N,p,g,b));return _}if(d instanceof Set){const _=new Set;g.set(d,_);for(const N of d)_.add(l(N,void 0,p,g,b));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const _=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,_);for(let N=0;N<d.length;N++)_[N]=l(d[N],N,p,g,b);return _}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const _=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,_),c(_,d,p,g,b),_}if(typeof File<"u"&&d instanceof File){const _=new File([d],d.name,{type:d.type});return g.set(d,_),c(_,d,p,g,b),_}if(typeof Blob<"u"&&d instanceof Blob){const _=new Blob([d],{type:d.type});return g.set(d,_),c(_,d,p,g,b),_}if(d instanceof Error){const _=new d.constructor;return g.set(d,_),_.message=d.message,_.name=d.name,_.stack=d.stack,_.cause=d.cause,c(_,d,p,g,b),_}if(d instanceof Boolean){const _=new Boolean(d.valueOf());return g.set(d,_),c(_,d,p,g,b),_}if(d instanceof Number){const _=new Number(d.valueOf());return g.set(d,_),c(_,d,p,g,b),_}if(d instanceof String){const _=new String(d.valueOf());return g.set(d,_),c(_,d,p,g,b),_}if(typeof d=="object"&&u(d)){const _=Object.create(Object.getPrototypeOf(d));return g.set(d,_),c(_,d,p,g,b),_}return d}function c(d,h,p=d,g,b){const w=[...Object.keys(h),...e.getSymbols(h)];for(let _=0;_<w.length;_++){const N=w[_],S=Object.getOwnPropertyDescriptor(d,N);(S==null||S.writable)&&(d[N]=l(h[N],N,p,g,b))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=l,t.copyProperties=c})(kD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kD;function r(n){return e.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}t.cloneDeep=r})(kle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SD,r=kle;function n(a){return a=r.cloneDeep(a),s=>e.isMatch(s,a)}t.matches=n})(Tle);var Rle={},Ple={},Dle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kD,r=OD;function n(a,s){return e.cloneDeepWith(a,(o,l,c,u)=>{const d=s==null?void 0:s(o,l,c,u);if(d!==void 0)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(h,a),h}case r.argumentsTag:{const h={};return e.copyProperties(h,a),h.length=a.length,h[Symbol.iterator]=a[Symbol.iterator],h}default:return}})}t.cloneDeepWith=n})(Dle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dle;function r(n){return e.cloneDeepWith(n)}t.cloneDeep=r})(Ple);var Mle={},RD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return e.test(n)}}t.isIndex=r})(RD);var Lle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ID;function r(n){return n!==null&&typeof n=="object"&&e.getTag(n)==="[object Arguments]"}t.isArguments=r})(Lle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_D,r=RD,n=Lle,a=bS;function s(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=s})(Mle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SD,r=vS,n=Ple,a=xS,s=Mle;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?s.has(u,l):c===void 0?d===void 0:e.isMatch(d,c)}}t.matchesProperty=o})(Rle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AD,r=jle,n=Tle,a=Rle;function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}t.iteratee=s})(Sle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_le,r=AD,n=Nle,a=Sle;function s(o,l=r.identity){return n.isArrayLikeObject(o)?e.uniqBy(Array.from(o),a.iteratee(l)):[]}t.uniqBy=s})(wle);var MGe=wle.uniqBy;const zq=Vc(MGe);function Fle(t,e,r){return e===!0?zq(t,r):typeof e=="function"?zq(t,e):t}var Ble={exports:{}},Ule={},zle={exports:{}},Vle={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx=A;function LGe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var FGe=typeof Object.is=="function"?Object.is:LGe,BGe=Dx.useState,UGe=Dx.useEffect,zGe=Dx.useLayoutEffect,VGe=Dx.useDebugValue;function $Ge(t,e){var r=e(),n=BGe({inst:{value:r,getSnapshot:e}}),a=n[0].inst,s=n[1];return zGe(function(){a.value=r,a.getSnapshot=e,XT(a)&&s({inst:a})},[t,r,e]),UGe(function(){return XT(a)&&s({inst:a}),t(function(){XT(a)&&s({inst:a})})},[t]),VGe(r),r}function XT(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!FGe(t,r)}catch{return!0}}function HGe(t,e){return e()}var qGe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?HGe:$Ge;Vle.useSyncExternalStore=Dx.useSyncExternalStore!==void 0?Dx.useSyncExternalStore:qGe;zle.exports=Vle;var GGe=zle.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=A,WGe=GGe;function KGe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XGe=typeof Object.is=="function"?Object.is:KGe,YGe=WGe.useSyncExternalStore,ZGe=wS.useRef,QGe=wS.useEffect,JGe=wS.useMemo,eWe=wS.useDebugValue;Ule.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=ZGe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=JGe(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),a!==void 0&&o.hasValue){var b=o.value;if(a(b,g))return h=b}return h=g}if(b=h,XGe(d,g))return b;var w=n(g);return a!==void 0&&a(b,w)?(d=g,b):(d=g,h=w)}var u=!1,d,h,p=r===void 0?null:r;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,r,n,a]);var l=YGe(t,s[0],s[1]);return QGe(function(){o.hasValue=!0,o.value=l},[l]),eWe(l),l};Ble.exports=Ule;var tWe=Ble.exports,PD=A.createContext(null),rWe=t=>t,Ga=()=>{var t=A.useContext(PD);return t?t.store.dispatch:rWe},JN=()=>{},nWe=()=>JN,aWe=(t,e)=>t===e;function Cr(t){var e=A.useContext(PD);return tWe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:nWe,e?e.store.getState:JN,e?e.store.getState:JN,e?t:JN,aWe)}function sWe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function iWe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function oWe(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var Vq=t=>Array.isArray(t)?t:[t];function lWe(t){const e=Array.isArray(t[0])?t[0]:t;return oWe(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function cWe(t,e){const r=[],{length:n}=t;for(let a=0;a<n;a++)r.push(t[a].apply(null,e));return r}var uWe=class{constructor(t){this.value=t}deref(){return this.value}},dWe=typeof WeakRef<"u"?WeakRef:uWe,fWe=0,$q=1;function L_(){return{s:fWe,v:void 0,o:null,p:null}}function $le(t,e={}){let r=L_();const{resultEqualityCheck:n}=e;let a,s=0;function o(){var h;let l=r;const{length:c}=arguments;for(let p=0,g=c;p<g;p++){const b=arguments[p];if(typeof b=="function"||typeof b=="object"&&b!==null){let w=l.o;w===null&&(l.o=w=new WeakMap);const _=w.get(b);_===void 0?(l=L_(),w.set(b,l)):l=_}else{let w=l.p;w===null&&(l.p=w=new Map);const _=w.get(b);_===void 0?(l=L_(),w.set(b,l)):l=_}}const u=l;let d;if(l.s===$q)d=l.v;else if(d=t.apply(null,arguments),s++,n){const p=((h=a==null?void 0:a.deref)==null?void 0:h.call(a))??a;p!=null&&n(p,d)&&(d=p,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new dWe(d):d}return u.s=$q,u.v=d,d}return o.clearCache=()=>{r=L_(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function hWe(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...a)=>{let s=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),sWe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:h,memoizeOptions:p=[],argsMemoize:g=$le,argsMemoizeOptions:b=[]}=d,w=Vq(p),_=Vq(b),N=lWe(a),S=h(function(){return s++,u.apply(null,arguments)},...w),T=g(function(){o++;const z=cWe(N,arguments);return l=S.apply(null,z),l},..._);return Object.assign(T,{resultFunc:u,memoizedResultFunc:S,dependencies:N,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:h,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var bt=hWe($le),mWe=Object.assign((t,e=bt)=>{iWe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(s=>t[s]);return e(n,(...s)=>s.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>mWe}),Hle={},qle={},Gle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const o=e(n),l=e(a);if(o===l&&o===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?l-o:o-l}return 0};t.compareValues=r})(Gle);var Wle={},DD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"||r instanceof Symbol}t.isSymbol=e})(DD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=a})(Wle);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gle,r=Wle,n=bS;function a(s,o,l,c){if(s==null)return[];l=c?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(g=>String(g));const u=(g,b)=>{let w=g;for(let _=0;_<b.length&&w!=null;++_)w=w[b[_]];return w},d=(g,b)=>b==null||g==null?b:typeof g=="object"&&"key"in g?Object.hasOwn(b,g.key)?b[g.key]:u(b,g.path):typeof g=="function"?g(b):Array.isArray(g)?u(b,g):typeof b=="object"?b[g]:b,h=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return s.map(g=>({original:g,criteria:h.map(b=>d(b,g))})).slice().sort((g,b)=>{for(let w=0;w<h.length;w++){const _=e.compareValues(g.criteria[w],b.criteria[w],l[w]);if(_!==0)return _}return 0}).map(g=>g.original)}t.orderBy=a})(qle);var Kle={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n=1){const a=[],s=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<s?o(d,c+1):a.push(d)}};return o(r,0),a}t.flatten=e})(Kle);var MD={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RD,r=yS,n=jD,a=CD;function s(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}t.isIterateeCall=s})(MD);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qle,r=Kle,n=MD;function a(s,...o){const l=o.length;return l>1&&n.isIterateeCall(s,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,r.flatten(o),["asc"])}t.sortBy=a})(Hle);var pWe=Hle.sortBy;const _S=Vc(pWe);var Xle=t=>t.legend.settings,gWe=t=>t.legend.size,xWe=t=>t.legend.payload,vWe=bt([xWe,Xle],(t,e)=>{var{itemSorter:r}=e,n=t.flat(1);return r?_S(n,r):n});function bWe(){return Cr(vWe)}var F_=1;function Yle(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,r]=A.useState({height:0,left:0,top:0,width:0}),n=A.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>F_||Math.abs(o.left-e.left)>F_||Math.abs(o.top-e.top)>F_||Math.abs(o.width-e.width)>F_)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,n]}function po(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var yWe=typeof Symbol=="function"&&Symbol.observable||"@@observable",Hq=yWe,YT=()=>Math.random().toString(36).substring(7).split("").join("."),wWe={INIT:`@@redux/INIT${YT()}`,REPLACE:`@@redux/REPLACE${YT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${YT()}`},Y3=wWe;function LD(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Zle(t,e,r){if(typeof t!="function")throw new Error(po(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(po(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(po(1));return r(Zle)(t,e)}let n=t,a=e,s=new Map,o=s,l=0,c=!1;function u(){o===s&&(o=new Map,s.forEach((_,N)=>{o.set(N,_)}))}function d(){if(c)throw new Error(po(3));return a}function h(_){if(typeof _!="function")throw new Error(po(4));if(c)throw new Error(po(5));let N=!0;u();const S=l++;return o.set(S,_),function(){if(N){if(c)throw new Error(po(6));N=!1,u(),o.delete(S),s=null}}}function p(_){if(!LD(_))throw new Error(po(7));if(typeof _.type>"u")throw new Error(po(8));if(typeof _.type!="string")throw new Error(po(17));if(c)throw new Error(po(9));try{c=!0,a=n(a,_)}finally{c=!1}return(s=o).forEach(S=>{S()}),_}function g(_){if(typeof _!="function")throw new Error(po(10));n=_,p({type:Y3.REPLACE})}function b(){const _=h;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(po(11));function S(){const R=N;R.next&&R.next(d())}return S(),{unsubscribe:_(S)}},[Hq](){return this}}}return p({type:Y3.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:g,[Hq]:b}}function _We(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:Y3.INIT})>"u")throw new Error(po(12));if(typeof r(void 0,{type:Y3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(po(13))})}function Qle(t){const e=Object.keys(t),r={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let a;try{_We(r)}catch(s){a=s}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const h=n[d],p=r[h],g=o[h],b=p(g,l);if(typeof b>"u")throw l&&l.type,new Error(po(14));u[h]=b,c=c||b!==g}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Z3(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function NWe(...t){return e=>(r,n)=>{const a=e(r,n);let s=()=>{throw new Error(po(15))};const o={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=t.map(c=>c(o));return s=Z3(...l)(a.dispatch),{...a,dispatch:s}}}function Jle(t){return LD(t)&&"type"in t&&typeof t.type=="string"}var ece=Symbol.for("immer-nothing"),qq=Symbol.for("immer-draftable"),wl=Symbol.for("immer-state");function Qu(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var kc=Object,Mx=kc.getPrototypeOf,Q3="constructor",NS="prototype",fI="configurable",J3="enumerable",eE="writable",vy="value",ph=t=>!!t&&!!t[wl];function ud(t){var e;return t?tce(t)||ES(t)||!!t[qq]||!!((e=t[Q3])!=null&&e[qq])||AS(t)||SS(t):!1}var EWe=kc[NS][Q3].toString(),Gq=new WeakMap;function tce(t){if(!t||!FD(t))return!1;const e=Mx(t);if(e===null||e===kc[NS])return!0;const r=kc.hasOwnProperty.call(e,Q3)&&e[Q3];if(r===Object)return!0;if(!n1(r))return!1;let n=Gq.get(r);return n===void 0&&(n=Function.toString.call(r),Gq.set(r,n)),n===EWe}function Mw(t,e,r=!0){Lw(t)===0?(r?Reflect.ownKeys(t):kc.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function Lw(t){const e=t[wl];return e?e.type_:ES(t)?1:AS(t)?2:SS(t)?3:0}var Wq=(t,e,r=Lw(t))=>r===2?t.has(e):kc[NS].hasOwnProperty.call(t,e),hI=(t,e,r=Lw(t))=>r===2?t.get(e):t[e],e4=(t,e,r,n=Lw(t))=>{n===2?t.set(e,r):n===3?t.add(r):t[e]=r};function AWe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var ES=Array.isArray,AS=t=>t instanceof Map,SS=t=>t instanceof Set,FD=t=>typeof t=="object",n1=t=>typeof t=="function",ZT=t=>typeof t=="boolean",_f=t=>t.copy_||t.base_,BD=t=>t.modified_?t.copy_:t.base_;function mI(t,e){if(AS(t))return new Map(t);if(SS(t))return new Set(t);if(ES(t))return Array[NS].slice.call(t);const r=tce(t);if(e===!0||e==="class_only"&&!r){const n=kc.getOwnPropertyDescriptors(t);delete n[wl];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l[eE]===!1&&(l[eE]=!0,l[fI]=!0),(l.get||l.set)&&(n[o]={[fI]:!0,[eE]:!0,[J3]:l[J3],[vy]:t[o]})}return kc.create(Mx(t),n)}else{const n=Mx(t);if(n!==null&&r)return{...t};const a=kc.create(n);return kc.assign(a,t)}}function UD(t,e=!1){return jS(t)||ph(t)||!ud(t)||(Lw(t)>1&&kc.defineProperties(t,{set:B_,add:B_,clear:B_,delete:B_}),kc.freeze(t),e&&Mw(t,(r,n)=>{UD(n,!0)},!1)),t}function SWe(){Qu(2)}var B_={[vy]:SWe};function jS(t){return t===null||!FD(t)?!0:kc.isFrozen(t)}var t4="MapSet",pI="Patches",rce={};function Lx(t){const e=rce[t];return e||Qu(0,t),e}var jWe=t=>!!rce[t],by,nce=()=>by,TWe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:jWe(t4)?Lx(t4):void 0});function Kq(t,e){e&&(t.patchPlugin_=Lx(pI),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function gI(t){xI(t),t.drafts_.forEach(CWe),t.drafts_=null}function xI(t){t===by&&(by=t.parent_)}var Xq=t=>by=TWe(by,t);function CWe(t){const e=t[wl];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Yq(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];if(t!==void 0&&t!==r){r[wl].modified_&&(gI(e),Qu(4)),ud(t)&&(t=Zq(e,t));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(r[wl].base_,t,e)}else t=Zq(e,r);return kWe(e,t,!0),gI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==ece?t:void 0}function Zq(t,e){if(jS(e))return e;const r=e[wl];if(!r)return zD(e,t.handledSet_,t);if(!TS(r,t))return e;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(t);ice(r,t)}return r.copy_}function kWe(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&UD(e,r)}function ace(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var TS=(t,e)=>t.scope_===e,IWe=[];function sce(t,e,r,n){const a=_f(t),s=t.type_;if(n!==void 0&&hI(a,n,s)===e){e4(a,n,r,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;Mw(a,(c,u)=>{if(ph(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=t.draftLocations_.get(e)??IWe;for(const l of o)e4(a,l,r,s)}function OWe(t,e,r){t.callbacks_.push(function(a){var l;const s=e;if(!s||!TS(s,a))return;(l=a.mapSetPlugin_)==null||l.fixSetContents(s);const o=BD(s);sce(t,s.draft_??s,o,r),ice(s,a)})}function ice(t,e){var n;if(t.modified_&&!t.finalized_&&(t.type_===3||(((n=t.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const s=a.getPath(t);s&&a.generatePatches_(t,s,e)}ace(t)}}function RWe(t,e,r){const{scope_:n}=t;if(ph(r)){const a=r[wl];TS(a,n)&&a.callbacks_.push(function(){tE(t);const o=BD(a);sce(t,r,o,e)})}else ud(r)&&t.callbacks_.push(function(){const s=_f(t);hI(s,e,t.type_)===r&&n.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&zD(hI(t.copy_,e,t.type_),n.handledSet_,n)})}function zD(t,e,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ph(t)||e.has(t)||!ud(t)||jS(t)||(e.add(t),Mw(t,(n,a)=>{if(ph(a)){const s=a[wl];if(TS(s,r)){const o=BD(s);e4(t,n,o,t.type_),ace(s)}}else ud(a)&&zD(a,e,r)})),t}function PWe(t,e){const r=ES(t),n={type_:r?1:0,scope_:e?e.scope_:nce(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,s=VD;r&&(a=[n],s=yy);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,[l,n]}var VD={get(t,e){if(e===wl)return t;const r=_f(t);if(!Wq(r,e,t.type_))return DWe(t,r,e);const n=r[e];if(t.finalized_||!ud(n))return n;if(n===QT(t.base_,e)){tE(t);const a=t.type_===1?+e:e,s=bI(t.scope_,n,t,a);return t.copy_[a]=s}return n},has(t,e){return e in _f(t)},ownKeys(t){return Reflect.ownKeys(_f(t))},set(t,e,r){const n=oce(_f(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=QT(_f(t),e),s=a==null?void 0:a[wl];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_.set(e,!1),!0;if(AWe(r,a)&&(r!==void 0||Wq(t.base_,e,t.type_)))return!0;tE(t),vI(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_.set(e,!0),RWe(t,e,r)),!0},deleteProperty(t,e){return tE(t),QT(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),vI(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=_f(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{[eE]:!0,[fI]:t.type_!==1||e!=="length",[J3]:n[J3],[vy]:r[e]}},defineProperty(){Qu(11)},getPrototypeOf(t){return Mx(t.base_)},setPrototypeOf(){Qu(12)}},yy={};Mw(VD,(t,e)=>{yy[t]=function(){const r=arguments;return r[0]=r[0][0],e.apply(this,r)}});yy.deleteProperty=function(t,e){return yy.set.call(this,t,e,void 0)};yy.set=function(t,e,r){return VD.set.call(this,t[0],e,r,t[0])};function QT(t,e){const r=t[wl];return(r?_f(r):t)[e]}function DWe(t,e,r){var a;const n=oce(e,r);return n?vy in n?n[vy]:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function oce(t,e){if(!(e in t))return;let r=Mx(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Mx(r)}}function vI(t){t.modified_||(t.modified_=!0,t.parent_&&vI(t.parent_))}function tE(t){t.copy_||(t.assigned_=new Map,t.copy_=mI(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var MWe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(n1(r)&&!n1(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,h=>n.call(this,h,...d))}}n1(n)||Qu(6),a!==void 0&&!n1(a)&&Qu(7);let s;if(ud(r)){const o=Xq(this),l=bI(o,r,void 0);let c=!0;try{s=n(l),c=!1}finally{c?gI(o):xI(o)}return Kq(o,a),Yq(s,o)}else if(!r||!FD(r)){if(s=n(r),s===void 0&&(s=r),s===ece&&(s=void 0),this.autoFreeze_&&UD(s,!0),a){const o=[],l=[];Lx(pI).generateReplacementPatches_(r,s,{patches_:o,inversePatches_:l}),a(o,l)}return s}else Qu(1,r)},this.produceWithPatches=(r,n)=>{if(n1(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let a,s;return[this.produce(r,n,(l,c)=>{a=l,s=c}),a,s]},ZT(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),ZT(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),ZT(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ud(e)||Qu(8),ph(e)&&(e=sd(e));const r=Xq(this),n=bI(r,e,void 0);return n[wl].isManual_=!0,xI(r),n}finishDraft(e,r){const n=e&&e[wl];(!n||!n.isManual_)&&Qu(9);const{scope_:a}=n;return Kq(a,r),Yq(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(r=r.slice(n+1));const a=Lx(pI).applyPatches_;return ph(e)?a(e,r):this.produce(e,s=>a(s,r))}};function bI(t,e,r,n){const[a,s]=AS(e)?Lx(t4).proxyMap_(e,r):SS(e)?Lx(t4).proxySet_(e,r):PWe(e,r);return((r==null?void 0:r.scope_)??nce()).drafts_.push(a),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?OWe(r,s,n):s.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(s);const{patchPlugin_:u}=c;s.modified_&&u&&u.generatePatches_(s,[],c)}),a}function sd(t){return ph(t)||Qu(10,t),lce(t)}function lce(t){if(!ud(t)||jS(t))return t;const e=t[wl];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=mI(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=mI(t,!0);return Mw(r,(a,s)=>{e4(r,a,lce(s))},n),e&&(e.finalized_=!1),r}var LWe=new MWe,cce=LWe.produce;function uce(t){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,t):a(s)}var FWe=uce(),BWe=uce,UWe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Z3:Z3.apply(null,arguments)};function Tu(t,e){function r(...n){if(e){let a=e(...n);if(!a)throw new Error(Dc(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>Jle(n)&&n.type===t,r}var dce=class j2 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,j2.prototype)}static get[Symbol.species](){return j2}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new j2(...e[0].concat(this)):new j2(...e.concat(this))}};function Qq(t){return ud(t)?cce(t,()=>{}):t}function U_(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function zWe(t){return typeof t=="boolean"}var VWe=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=e??{};let o=new dce;return r&&(zWe(r)?o.push(FWe):o.push(BWe(r.extraArgument))),o},fce="RTK_autoBatch",os=()=>t=>({payload:t,meta:{[fce]:!0}}),Jq=t=>e=>{setTimeout(e,t)},hce=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let a=!0,s=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Jq(10):t.type==="callback"?t.queueNotification:Jq(t.timeout),u=()=>{o=!1,s&&(s=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>a&&d(),p=n.subscribe(h);return l.add(d),()=>{p(),l.delete(d)}},dispatch(d){var h;try{return a=!((h=d==null?void 0:d.meta)!=null&&h[fce]),s=!a,s&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},$We=t=>function(r){const{autoBatch:n=!0}=r??{};let a=new dce(t);return n&&a.push(hce(typeof n=="object"?n:void 0)),a};function HWe(t){const e=VWe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(LD(r))l=Qle(r);else throw new Error(Dc(1));let c;typeof n=="function"?c=n(e):c=e();let u=Z3;a&&(u=UWe({trace:!1,...typeof a=="object"&&a}));const d=NWe(...c),h=$We(d);let p=typeof o=="function"?o(h):h();const g=u(...p);return Zle(l,s,g)}function mce(t){const e={},r=[];let n;const a={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(Dc(28));if(l in e)throw new Error(Dc(29));return e[l]=o,a},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),a},addMatcher(s,o){return r.push({matcher:s,reducer:o}),a},addDefaultCase(s){return n=s,a}};return t(a),[e,r,n]}function qWe(t){return typeof t=="function"}function GWe(t,e){let[r,n,a]=mce(e),s;if(qWe(t))s=()=>Qq(t());else{const l=Qq(t);s=()=>l}function o(l=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,h)=>{if(h)if(ph(d)){const g=h(d,c);return g===void 0?d:g}else{if(ud(d))return cce(d,p=>h(p,c));{const p=h(d,c);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},l)}return o.getInitialState=s,o}var WWe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",KWe=(t=21)=>{let e="",r=t;for(;r--;)e+=WWe[Math.random()*64|0];return e},XWe=Symbol.for("rtk-slice-createasyncthunk");function YWe(t,e){return`${t}/${e}`}function ZWe({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[XWe];return function(a){const{name:s,reducerPath:o=s}=a;if(!s)throw new Error(Dc(11));const l=(typeof a.reducers=="function"?a.reducers(JWe()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(R,z){const G=typeof R=="string"?R:R.type;if(!G)throw new Error(Dc(12));if(G in u.sliceCaseReducersByType)throw new Error(Dc(13));return u.sliceCaseReducersByType[G]=z,d},addMatcher(R,z){return u.sliceMatchers.push({matcher:R,reducer:z}),d},exposeAction(R,z){return u.actionCreators[R]=z,d},exposeCaseReducer(R,z){return u.sliceCaseReducersByName[R]=z,d}};c.forEach(R=>{const z=l[R],G={reducerName:R,type:YWe(s,R),createNotation:typeof a.reducers=="function"};tKe(z)?nKe(G,z,d,e):eKe(G,z,d)});function h(){const[R={},z=[],G=void 0]=typeof a.extraReducers=="function"?mce(a.extraReducers):[a.extraReducers],O={...R,...u.sliceCaseReducersByType};return GWe(a.initialState,D=>{for(let I in O)D.addCase(I,O[I]);for(let I of u.sliceMatchers)D.addMatcher(I.matcher,I.reducer);for(let I of z)D.addMatcher(I.matcher,I.reducer);G&&D.addDefaultCase(G)})}const p=R=>R,g=new Map,b=new WeakMap;let w;function _(R,z){return w||(w=h()),w(R,z)}function N(){return w||(w=h()),w.getInitialState()}function S(R,z=!1){function G(D){let I=D[R];return typeof I>"u"&&z&&(I=U_(b,G,N)),I}function O(D=p){const I=U_(g,z,()=>new WeakMap);return U_(I,D,()=>{const V={};for(const[P,B]of Object.entries(a.selectors??{}))V[P]=QWe(B,D,()=>U_(b,D,N),z);return V})}return{reducerPath:R,getSelectors:O,get selectors(){return O(G)},selectSlice:G}}const T={name:s,reducer:_,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:N,...S(o),injectInto(R,{reducerPath:z,...G}={}){const O=z??o;return R.inject({reducerPath:O,reducer:_},G),{...T,...S(O,!0)}}};return T}}function QWe(t,e,r,n){function a(s,...o){let l=e(s);return typeof l>"u"&&n&&(l=r()),t(l,...o)}return a.unwrapped=t,a}var Jl=ZWe();function JWe(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function eKe({type:t,reducerName:e,createNotation:r},n,a){let s,o;if("reducer"in n){if(r&&!rKe(n))throw new Error(Dc(17));s=n.reducer,o=n.prepare}else s=n;a.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Tu(t,o):Tu(t))}function tKe(t){return t._reducerDefinitionType==="asyncThunk"}function rKe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function nKe({type:t,reducerName:e},r,n,a){if(!a)throw new Error(Dc(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,h=a(t,s,d);n.exposeAction(e,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(e,{fulfilled:o||z_,pending:l||z_,rejected:c||z_,settled:u||z_})}function z_(){}var aKe="task",pce="listener",gce="completed",$D="cancelled",sKe=`task-${$D}`,iKe=`task-${gce}`,yI=`${pce}-${$D}`,oKe=`${pce}-${gce}`,CS=class{constructor(t){aa(this,"name","TaskAbortError");aa(this,"message");this.code=t,this.message=`${aKe} ${$D} (reason: ${t})`}},HD=(t,e)=>{if(typeof t!="function")throw new TypeError(Dc(32))},r4=()=>{},xce=(t,e=r4)=>(t.catch(e),t),vce=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ep=t=>{if(t.aborted)throw new CS(t.reason)};function bce(t,e){let r=r4;return new Promise((n,a)=>{const s=()=>a(new CS(t.reason));if(t.aborted){s();return}r=vce(t,s),e.finally(()=>r()).then(n,a)}).finally(()=>{r=r4})}var lKe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(r){return{status:r instanceof CS?"cancelled":"rejected",error:r}}finally{e==null||e()}},n4=t=>e=>xce(bce(t,e).then(r=>(Ep(t),r))),yce=t=>{const e=n4(t);return r=>e(new Promise(n=>setTimeout(n,r)))},{assign:Z1}=Object,eG={},kS="listenerMiddleware",cKe=(t,e)=>{const r=n=>vce(t,()=>n.abort(t.reason));return(n,a)=>{HD(n);const s=new AbortController;r(s);const o=lKe(async()=>{Ep(t),Ep(s.signal);const l=await n({pause:n4(s.signal),delay:yce(s.signal),signal:s.signal});return Ep(s.signal),l},()=>s.abort(iKe));return a!=null&&a.autoJoin&&e.push(o.catch(r4)),{result:n4(t)(o),cancel(){s.abort(sKe)}}}},uKe=(t,e)=>{const r=async(n,a)=>{Ep(e);let s=()=>{};const l=[new Promise((c,u)=>{let d=t({predicate:n,effect:(h,p)=>{p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await bce(e,Promise.race(l));return Ep(e),c}finally{s()}};return(n,a)=>xce(r(n,a))},wce=t=>{let{type:e,actionCreator:r,matcher:n,predicate:a,effect:s}=t;if(e)a=Tu(e).match;else if(r)e=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Dc(21));return HD(s),{predicate:a,type:e,effect:s}},_ce=Z1(t=>{const{type:e,predicate:r,effect:n}=wce(t);return{id:KWe(),effect:n,type:e,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Dc(22))}}},{withTypes:()=>_ce}),tG=(t,e)=>{const{type:r,effect:n,predicate:a}=wce(e);return Array.from(t.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},wI=t=>{t.pending.forEach(e=>{e.abort(yI)})},dKe=(t,e)=>()=>{for(const r of e.keys())wI(r);t.clear()},rG=(t,e,r)=>{try{t(e,r)}catch(n){setTimeout(()=>{throw n},0)}},Nce=Z1(Tu(`${kS}/add`),{withTypes:()=>Nce}),fKe=Tu(`${kS}/removeAll`),Ece=Z1(Tu(`${kS}/remove`),{withTypes:()=>Ece}),hKe=(...t)=>{console.error(`${kS}/error`,...t)},Fw=(t={})=>{const e=new Map,r=new Map,n=g=>{const b=r.get(g)??0;r.set(g,b+1)},a=g=>{const b=r.get(g)??1;b===1?r.delete(g):r.set(g,b-1)},{extra:s,onError:o=hKe}=t;HD(o);const l=g=>(g.unsubscribe=()=>e.delete(g.id),e.set(g.id,g),b=>{g.unsubscribe(),b!=null&&b.cancelActive&&wI(g)}),c=g=>{const b=tG(e,g)??_ce(g);return l(b)};Z1(c,{withTypes:()=>c});const u=g=>{const b=tG(e,g);return b&&(b.unsubscribe(),g.cancelActive&&wI(b)),!!b};Z1(u,{withTypes:()=>u});const d=async(g,b,w,_)=>{const N=new AbortController,S=uKe(c,N.signal),T=[];try{g.pending.add(N),n(g),await Promise.resolve(g.effect(b,Z1({},w,{getOriginalState:_,condition:(R,z)=>S(R,z).then(Boolean),take:S,delay:yce(N.signal),pause:n4(N.signal),extra:s,signal:N.signal,fork:cKe(N.signal,T),unsubscribe:g.unsubscribe,subscribe:()=>{e.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((R,z,G)=>{R!==N&&(R.abort(yI),G.delete(R))})},cancel:()=>{N.abort(yI),g.pending.delete(N)},throwIfCancelled:()=>{Ep(N.signal)}})))}catch(R){R instanceof CS||rG(o,R,{raisedBy:"effect"})}finally{await Promise.all(T),N.abort(oKe),a(g),g.pending.delete(N)}},h=dKe(e,r);return{middleware:g=>b=>w=>{if(!Jle(w))return b(w);if(Nce.match(w))return c(w.payload);if(fKe.match(w)){h();return}if(Ece.match(w))return u(w.payload);let _=g.getState();const N=()=>{if(_===eG)throw new Error(Dc(23));return _};let S;try{if(S=b(w),e.size>0){const T=g.getState(),R=Array.from(e.values());for(const z of R){let G=!1;try{G=z.predicate(w,T,_)}catch(O){G=!1,rG(o,O,{raisedBy:"predicate"})}G&&d(z,w,g,N)}}}finally{_=eG}return S},startListening:c,stopListening:u,clearListeners:h}};function Dc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var mKe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Ace=Jl({name:"chartLayout",initialState:mKe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var r,n,a,s;t.margin.top=(r=e.payload.top)!==null&&r!==void 0?r:0,t.margin.right=(n=e.payload.right)!==null&&n!==void 0?n:0,t.margin.bottom=(a=e.payload.bottom)!==null&&a!==void 0?a:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:pKe,setLayout:gKe,setChartSize:xKe,setScale:vKe}=Ace.actions,bKe=Ace.reducer;function Sce(t,e,r){return Array.isArray(t)&&t&&e+r!==0?t.slice(e,r+1):t}function nG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function A1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nG(Object(r),!0).forEach(function(n){yKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yKe(t,e,r){return(e=wKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wKe(t){var e=_Ke(t,"string");return typeof e=="symbol"?e:e+""}function _Ke(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ma(t,e,r){return fs(t)||fs(e)?r:Xd(e)?Kp(t,e,r):typeof e=="function"?e(t):r}var NKe=(t,e,r)=>{if(e&&r){var{width:n,height:a}=r,{align:s,verticalAlign:o,layout:l}=e;if((l==="vertical"||l==="horizontal"&&o==="middle")&&s!=="center"&&Pr(t[s]))return A1(A1({},t),{},{[s]:t[s]+(n||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&o!=="middle"&&Pr(t[o]))return A1(A1({},t),{},{[o]:t[o]+(a||0)})}return t},vm=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",jce=(t,e,r,n)=>{if(n)return t.map(l=>l.coordinate);var a,s,o=t.map(l=>(l.coordinate===e&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate));return a||o.push(e),s||o.push(r),o},Tce=(t,e,r)=>{if(!t)return null;var{duplicateDomain:n,type:a,range:s,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:p,axisType:g}=t;if(!o)return null;var b=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,w=a==="category"&&o.bandwidth?o.bandwidth()/b:0;if(w=g==="angleAxis"&&s&&s.length>=2?to(s[0]-s[1])*2*w:w,h||p){var _=(h||p||[]).map((N,S)=>{var T=n?n.indexOf(N):N;return{coordinate:o(T)+w,value:N,offset:w,index:S}});return _.filter(N=>!cd(N.coordinate))}return c&&u?u.map((N,S)=>({coordinate:o(N)+w,value:N,index:S,offset:w})):o.ticks&&d!=null?o.ticks(d).map((N,S)=>({coordinate:o(N)+w,value:N,offset:w,index:S})):o.domain().map((N,S)=>({coordinate:o(N)+w,value:n?n[N]:N,index:S,offset:w}))},aG=1e-4,EKe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var r=e.length,n=t.range(),a=Math.min(n[0],n[1])-aG,s=Math.max(n[0],n[1])+aG,o=t(e[0]),l=t(e[r-1]);(o<a||o>s||l<a||l>s)&&t.domain([e[0],e[r-1]])}},AKe=(t,e)=>{if(!e||e.length!==2||!Pr(e[0])||!Pr(e[1]))return t;var r=Math.min(e[0],e[1]),n=Math.max(e[0],e[1]),a=[t[0],t[1]];return(!Pr(t[0])||t[0]<r)&&(a[0]=r),(!Pr(t[1])||t[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},SKe=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var a=0,s=0,o=0;o<e;++o){var l=cd(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=a,t[o][r][1]=a+l,a=t[o][r][1]):(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1])}},jKe=t=>{var e=t.length;if(!(e<=0))for(var r=0,n=t[0].length;r<n;++r)for(var a=0,s=0;s<e;++s){var o=cd(t[s][r][1])?t[s][r][0]:t[s][r][1];o>=0?(t[s][r][0]=a,t[s][r][1]=a+o,a=t[s][r][1]):(t[s][r][0]=0,t[s][r][1]=0)}},TKe={sign:SKe,expand:oGe,none:Px,silhouette:lGe,wiggle:cGe,positive:jKe},CKe=(t,e,r)=>{var n=TKe[r],a=iGe().keys(e).value((s,o)=>Number(Ma(s,o,0))).order(uI).offset(n);return a(t)};function kKe(t){return t==null?void 0:String(t)}function sG(t){var{axis:e,ticks:r,bandSize:n,entry:a,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!fs(a[e.dataKey])){var l=vle(r,"value",a[e.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=Ma(a,fs(o)?e.dataKey:o);return fs(c)?null:e.scale(c)}var iG=t=>{var{axis:e,ticks:r,offset:n,bandSize:a,entry:s,index:o}=t;if(e.type==="category")return r[o]?r[o].coordinate+n:null;var l=Ma(s,e.dataKey,e.scale.domain()[o]);return fs(l)?null:e.scale(l)-a/2+n},IKe=t=>{var{numericAxis:e}=t,r=e.scale.domain();if(e.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},OKe=t=>{var e=t.flat(2).filter(Pr);return[Math.min(...e),Math.max(...e)]},RKe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],PKe=(t,e,r)=>{if(t!=null)return RKe(Object.keys(t).reduce((n,a)=>{var s=t[a],{stackedData:o}=s,l=o.reduce((c,u)=>{var d=Sce(u,e,r),h=OKe(d);return[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},oG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,lG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fx=(t,e,r)=>{if(t&&t.scale&&t.scale.bandwidth){var n=t.scale.bandwidth();if(!r||n>0)return n}if(t&&e&&e.length>=2){for(var a=_S(e,d=>d.coordinate),s=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function cG(t){var{tooltipEntrySettings:e,dataKey:r,payload:n,value:a,name:s}=t;return A1(A1({},e),{},{dataKey:r,payload:n,value:a,name:s})}function vv(t,e){if(t)return String(t);if(typeof e=="string")return e}var DKe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},MKe=(t,e)=>e==="centric"?t.angle:t.radius,Sh=t=>t.layout.width,jh=t=>t.layout.height,LKe=t=>t.layout.scale,Cce=t=>t.layout.margin,IS=bt(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),OS=bt(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),kce="data-recharts-item-index",Ice="data-recharts-item-data-key",Bw=60;function uG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function V_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uG(Object(r),!0).forEach(function(n){FKe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FKe(t,e,r){return(e=BKe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BKe(t){var e=UKe(t,"string");return typeof e=="symbol"?e:e+""}function UKe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zKe=t=>t.brush.height;function VKe(t){var e=OS(t);return e.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Bw;return r+a}return r},0)}function $Ke(t){var e=OS(t);return e.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Bw;return r+a}return r},0)}function HKe(t){var e=IS(t);return e.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function qKe(t){var e=IS(t);return e.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Pi=bt([Sh,jh,Cce,zKe,VKe,$Ke,HKe,qKe,Xle,gWe],(t,e,r,n,a,s,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+s},h={top:(r.top||0)+o,bottom:(r.bottom||0)+l},p=V_(V_({},h),d),g=p.bottom;p.bottom+=n,p=NKe(p,c,u);var b=t-p.left-p.right,w=e-p.top-p.bottom;return V_(V_({brushBottom:g},p),{},{width:Math.max(b,0),height:Math.max(w,0)})}),GKe=bt(Pi,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),qD=bt(Sh,jh,(t,e)=>({x:0,y:0,width:t,height:e})),WKe=A.createContext(null),Ko=()=>A.useContext(WKe)!=null,RS=t=>t.brush,PS=bt([RS,Pi,Cce],(t,e,r)=>({height:t.height,x:Pr(t.x)?t.x:e.left,y:Pr(t.y)?t.y:e.top+e.height+e.brushBottom-((r==null?void 0:r.bottom)||0),width:Pr(t.width)?t.width:e.width})),Oce={},Rce={},Pce={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r,n,{signal:a,edges:s}={}){let o,l=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},h=()=>{u&&d(),w()};let p=null;const g=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},n)},b=()=>{p!==null&&(clearTimeout(p),p=null)},w=()=>{b(),o=void 0,l=null},_=()=>{d()},N=function(...S){if(a!=null&&a.aborted)return;o=this,l=S;const T=p==null;g(),c&&T&&d()};return N.schedule=g,N.cancel=w,N.flush=_,a==null||a.addEventListener("abort",w,{once:!0}),N}t.debounce=e})(Pce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pce;function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:l=!0,maxWait:c}=s,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const p=e.debounce(function(...w){d=n.apply(this,w),h=null},a,{edges:u}),g=function(...w){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=n.apply(this,w),h=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,w),d)},b=()=>(p.flush(),d);return g.cancel=p.cancel,g.flush=b,g}t.debounce=r})(Rce);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Rce;function r(n,a=0,s={}){const{leading:o=!0,trailing:l=!0}=s;return e.debounce(n,a,{leading:o,maxWait:a,trailing:l})}t.throttle=r})(Oce);var KKe=Oce.throttle;const XKe=Vc(KKe);var a4=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},Dce=(t,e,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:o}=r,l=mh(n)?t:Number(n),c=mh(a)?e:Number(a);return s&&s>0&&(l?c=l/s:c&&(l=c*s),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},YKe={width:0,height:0,overflow:"visible"},ZKe={width:0,overflowX:"visible"},QKe={height:0,overflowY:"visible"},JKe={},eXe=t=>{var{width:e,height:r}=t,n=mh(e),a=mh(r);return n&&a?YKe:n?ZKe:a?QKe:JKe};function tXe(t){var{width:e,height:r,aspect:n}=t,a=e,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function Js(t){return Number.isFinite(t)}function Yd(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_I.apply(null,arguments)}function dG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dG(Object(r),!0).forEach(function(n){rXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rXe(t,e,r){return(e=nXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nXe(t){var e=aXe(t,"string");return typeof e=="symbol"?e:e+""}function aXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mce=A.createContext({width:-1,height:-1});function sXe(t){return Yd(t.width)&&Yd(t.height)}function Lce(t){var{children:e,width:r,height:n}=t,a=A.useMemo(()=>({width:r,height:n}),[r,n]);return sXe(a)?A.createElement(Mce.Provider,{value:a},e):null}var GD=()=>A.useContext(Mce),iXe=A.forwardRef((t,e)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:p,onResize:g,style:b={}}=t,w=A.useRef(null),_=A.useRef();_.current=g,A.useImperativeHandle(e,()=>w.current);var[N,S]=A.useState({containerWidth:n.width,containerHeight:n.height}),T=A.useCallback((D,I)=>{S(V=>{var P=Math.round(D),B=Math.round(I);return V.containerWidth===P&&V.containerHeight===B?V:{containerWidth:P,containerHeight:B}})},[]);A.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Pw;var D=B=>{var F,{width:ee,height:Z}=B[0].contentRect;T(ee,Z),(F=_.current)===null||F===void 0||F.call(_,ee,Z)};d>0&&(D=XKe(D,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(D),{width:V,height:P}=w.current.getBoundingClientRect();return T(V,P),I.observe(w.current),()=>{I.disconnect()}},[T,d]);var{containerWidth:R,containerHeight:z}=N;a4(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:G,calculatedHeight:O}=Dce(R,z,{width:a,height:s,aspect:r,maxHeight:c});return a4(G!=null&&G>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,O,a,s,o,l,r),A.createElement("div",{id:h?"".concat(h):void 0,className:ta("recharts-responsive-container",p),style:fG(fG({},b),{},{width:a,height:s,minWidth:o,minHeight:l,maxHeight:c}),ref:w},A.createElement("div",{style:eXe({width:a,height:s})},A.createElement(Lce,{width:G,height:O},u)))}),$_=A.forwardRef((t,e)=>{var r=GD();if(Yd(r.width)&&Yd(r.height))return t.children;var{width:n,height:a}=tXe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=Dce(void 0,void 0,{width:n,height:a,aspect:t.aspect,maxHeight:t.maxHeight});return Pr(s)&&Pr(o)?A.createElement(Lce,{width:s,height:o},t.children):A.createElement(iXe,_I({},t,{width:n,height:a,ref:e}))});function Fce(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var DS=()=>{var t,e=Ko(),r=Cr(GKe),n=Cr(PS),a=(t=Cr(RS))===null||t===void 0?void 0:t.padding;return!e||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},oXe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Bce=()=>{var t;return(t=Cr(Pi))!==null&&t!==void 0?t:oXe},WD=()=>Cr(Sh),KD=()=>Cr(jh),lXe=()=>Cr(t=>t.layout.margin),Kn=t=>t.layout.layoutType,Uw=()=>Cr(Kn),cXe=()=>{var t=Uw();return t!==void 0},MS=t=>{var e=Ga(),r=Ko(),{width:n,height:a}=t,s=GD(),o=n,l=a;return s&&(o=s.width>0?s.width:n,l=s.height>0?s.height:a),A.useEffect(()=>{!r&&Yd(o)&&Yd(l)&&e(xKe({width:o,height:l}))},[e,r,o,l]),null},Uce=Symbol.for("immer-nothing"),hG=Symbol.for("immer-draftable"),zc=Symbol.for("immer-state");function Ju(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var wy=Object.getPrototypeOf;function Bx(t){return!!t&&!!t[zc]}function Xp(t){var e;return t?zce(t)||Array.isArray(t)||!!t[hG]||!!((e=t.constructor)!=null&&e[hG])||zw(t)||FS(t):!1}var uXe=Object.prototype.constructor.toString(),mG=new WeakMap;function zce(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=mG.get(r);return n===void 0&&(n=Function.toString.call(r),mG.set(r,n)),n===uXe}function s4(t,e,r=!0){LS(t)===0?(r?Reflect.ownKeys(t):Object.keys(t)).forEach(a=>{e(a,t[a],t)}):t.forEach((n,a)=>e(a,n,t))}function LS(t){const e=t[zc];return e?e.type_:Array.isArray(t)?1:zw(t)?2:FS(t)?3:0}function NI(t,e){return LS(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Vce(t,e,r){const n=LS(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function dXe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function zw(t){return t instanceof Map}function FS(t){return t instanceof Set}function zm(t){return t.copy_||t.base_}function EI(t,e){if(zw(t))return new Map(t);if(FS(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=zce(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[zc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const o=a[s],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(wy(t),n)}else{const n=wy(t);if(n!==null&&r)return{...t};const a=Object.create(n);return Object.assign(a,t)}}function XD(t,e=!1){return BS(t)||Bx(t)||!Xp(t)||(LS(t)>1&&Object.defineProperties(t,{set:H_,add:H_,clear:H_,delete:H_}),Object.freeze(t),e&&Object.values(t).forEach(r=>XD(r,!0))),t}function fXe(){Ju(2)}var H_={value:fXe};function BS(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var hXe={};function Yp(t){const e=hXe[t];return e||Ju(0,t),e}var _y;function $ce(){return _y}function mXe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pG(t,e){e&&(Yp("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function AI(t){SI(t),t.drafts_.forEach(pXe),t.drafts_=null}function SI(t){t===_y&&(_y=t.parent_)}function gG(t){return _y=mXe(_y,t)}function pXe(t){const e=t[zc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function xG(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[zc].modified_&&(AI(e),Ju(4)),Xp(t)&&(t=i4(e,t),e.parent_||o4(e,t)),e.patches_&&Yp("Patches").generateReplacementPatches_(r[zc].base_,t,e.patches_,e.inversePatches_)):t=i4(e,r,[]),AI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Uce?t:void 0}function i4(t,e,r){if(BS(e))return e;const n=t.immer_.shouldUseStrictIteration(),a=e[zc];if(!a)return s4(e,(s,o)=>vG(t,a,e,s,o,r),n),e;if(a.scope_!==t)return e;if(!a.modified_)return o4(t,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let o=s,l=!1;a.type_===3&&(o=new Set(s),s.clear(),l=!0),s4(o,(c,u)=>vG(t,a,s,c,u,r,l),n),o4(t,s,!1),r&&t.patches_&&Yp("Patches").generatePatches_(a,r,t.patches_,t.inversePatches_)}return a.copy_}function vG(t,e,r,n,a,s,o){if(a==null||typeof a!="object"&&!o)return;const l=BS(a);if(!(l&&!o)){if(Bx(a)){const c=s&&e&&e.type_!==3&&!NI(e.assigned_,n)?s.concat(n):void 0,u=i4(t,a,c);if(Vce(r,n,u),Bx(u))t.canAutoFreeze_=!1;else return}else o&&r.add(a);if(Xp(a)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[n]===a&&l)return;i4(t,a),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&(zw(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&o4(t,a)}}}function o4(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&XD(e,r)}function gXe(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:$ce(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=YD;r&&(a=[n],s=Ny);const{revoke:o,proxy:l}=Proxy.revocable(a,s);return n.draft_=l,n.revoke_=o,l}var YD={get(t,e){if(e===zc)return t;const r=zm(t);if(!NI(r,e))return xXe(t,r,e);const n=r[e];return t.finalized_||!Xp(n)?n:n===JT(t.base_,e)?(eC(t),t.copy_[e]=TI(n,t)):n},has(t,e){return e in zm(t)},ownKeys(t){return Reflect.ownKeys(zm(t))},set(t,e,r){const n=Hce(zm(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const a=JT(zm(t),e),s=a==null?void 0:a[zc];if(s&&s.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(dXe(r,a)&&(r!==void 0||NI(t.base_,e)))return!0;eC(t),jI(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return JT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,eC(t),jI(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=zm(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Ju(11)},getPrototypeOf(t){return wy(t.base_)},setPrototypeOf(){Ju(12)}},Ny={};s4(YD,(t,e)=>{Ny[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ny.deleteProperty=function(t,e){return Ny.set.call(this,t,e,void 0)};Ny.set=function(t,e,r){return YD.set.call(this,t[0],e,r,t[0])};function JT(t,e){const r=t[zc];return(r?zm(r):t)[e]}function xXe(t,e,r){var a;const n=Hce(e,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(t.draft_):void 0}function Hce(t,e){if(!(e in t))return;let r=wy(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=wy(r)}}function jI(t){t.modified_||(t.modified_=!0,t.parent_&&jI(t.parent_))}function eC(t){t.copy_||(t.copy_=EI(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var vXe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const s=r;r=e;const o=this;return function(c=s,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Ju(6),n!==void 0&&typeof n!="function"&&Ju(7);let a;if(Xp(e)){const s=gG(this),o=TI(e,void 0);let l=!0;try{a=r(o),l=!1}finally{l?AI(s):SI(s)}return pG(s,n),xG(a,s)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===Uce&&(a=void 0),this.autoFreeze_&&XD(a,!0),n){const s=[],o=[];Yp("Patches").generateReplacementPatches_(e,a,s,o),n(s,o)}return a}else Ju(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,a;return[this.produce(e,r,(o,l)=>{n=o,a=l}),n,a]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Xp(t)||Ju(8),Bx(t)&&(t=bXe(t));const e=gG(this),r=TI(t,void 0);return r[zc].isManual_=!0,SI(e),r}finishDraft(t,e){const r=t&&t[zc];(!r||!r.isManual_)&&Ju(9);const{scope_:n}=r;return pG(n,e),xG(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}r>-1&&(e=e.slice(r+1));const n=Yp("Patches").applyPatches_;return Bx(t)?n(t,e):this.produce(t,a=>n(a,e))}};function TI(t,e){const r=zw(t)?Yp("MapSet").proxyMap_(t,e):FS(t)?Yp("MapSet").proxySet_(t,e):gXe(t,e);return(e?e.scope_:$ce()).drafts_.push(r),r}function bXe(t){return Bx(t)||Ju(10,t),qce(t)}function qce(t){if(!Xp(t)||BS(t))return t;const e=t[zc];let r,n=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=EI(t,e.scope_.immer_.useStrictShallowCopy_),n=e.scope_.immer_.shouldUseStrictIteration()}else r=EI(t,!0);return s4(r,(a,s)=>{Vce(r,a,qce(s))},n),e&&(e.finalized_=!1),r}var yXe=new vXe;yXe.produce;var wXe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Gce=Jl({name:"legend",initialState:wXe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:os()},replaceLegendPayload:{reducer(t,e){var{prev:r,next:n}=e.payload,a=sd(t).payload.indexOf(r);a>-1&&(t.payload[a]=n)},prepare:os()},removeLegendPayload:{reducer(t,e){var r=sd(t).payload.indexOf(e.payload);r>-1&&t.payload.splice(r,1)},prepare:os()}}}),{setLegendSize:bG,setLegendSettings:_Xe,addLegendPayload:Wce,replaceLegendPayload:Kce,removeLegendPayload:Xce}=Gce.actions,NXe=Gce.reducer,EXe=["contextPayload"];function CI(){return CI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CI.apply(null,arguments)}function yG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ux(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(r),!0).forEach(function(n){AXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AXe(t,e,r){return(e=SXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SXe(t){var e=jXe(t,"string");return typeof e=="symbol"?e:e+""}function jXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TXe(t,e){if(t==null)return{};var r,n,a=CXe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function CXe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function kXe(t){return t.value}function IXe(t){var{contextPayload:e}=t,r=TXe(t,EXe),n=Fle(e,t.payloadUniqBy,kXe),a=Ux(Ux({},r),{},{payload:n});return A.isValidElement(t.content)?A.cloneElement(t.content,a):typeof t.content=="function"?A.createElement(t.content,a):A.createElement(DGe,a)}function OXe(t,e,r,n,a,s){var{layout:o,align:l,verticalAlign:c}=e,u,d;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-s.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Ux(Ux({},u),d)}function RXe(t){var e=Ga();return A.useEffect(()=>{e(_Xe(t))},[e,t]),null}function PXe(t){var e=Ga();return A.useEffect(()=>(e(bG(t)),()=>{e(bG({width:0,height:0}))}),[e,t]),null}function DXe(t,e,r,n){return t==="vertical"&&Pr(e)?{height:e}:t==="horizontal"?{width:r||n}:null}var MXe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function rE(t){var e=yi(t,MXe),r=bWe(),n=kqe(),a=lXe(),{width:s,height:o,wrapperStyle:l,portal:c}=e,[u,d]=Yle([r]),h=WD(),p=KD();if(h==null||p==null)return null;var g=h-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),b=DXe(e.layout,o,s,g),w=c?l:Ux(Ux({position:"absolute",width:(b==null?void 0:b.width)||s||"auto",height:(b==null?void 0:b.height)||o||"auto"},OXe(l,e,a,h,p,u)),l),_=c??n;if(_==null||r==null)return null;var N=A.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:d},A.createElement(RXe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&A.createElement(PXe,{width:u.width,height:u.height}),A.createElement(IXe,CI({},e,b,{margin:a,chartWidth:h,chartHeight:p,contextPayload:r})));return Oy.createPortal(N,_)}rE.displayName="Legend";function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kI.apply(null,arguments)}function wG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wG(Object(r),!0).forEach(function(n){LXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LXe(t,e,r){return(e=FXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FXe(t){var e=BXe(t,"string");return typeof e=="symbol"?e:e+""}function BXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UXe(t){return Array.isArray(t)&&Xd(t[0])&&Xd(t[1])?t.join(" ~ "):t}var zXe=t=>{var{separator:e=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:p=!1}=t,g=()=>{if(s&&s.length){var z={padding:0,margin:0},G=(l?_S(s,l):s).map((O,D)=>{if(O.type==="none")return null;var I=O.formatter||o||UXe,{value:V,name:P}=O,B=V,F=P;if(I){var ee=I(V,P,O,D,s);if(Array.isArray(ee))[B,F]=ee;else if(ee!=null)B=ee;else return null}var Z=tC({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},n);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:Z},Xd(F)?A.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Xd(F)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},B),A.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:z},G)}return null},b=tC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=tC({margin:0},a),_=!fs(d),N=_?d:"",S=ta("recharts-default-tooltip",c),T=ta("recharts-tooltip-label",u);_&&h&&s!==void 0&&s!==null&&(N=h(d,s));var R=p?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",kI({className:S,style:b},R),A.createElement("p",{className:T,style:w},A.isValidElement(N)?N:"".concat(N)),g())},a2="recharts-tooltip-wrapper",VXe={visibility:"hidden"};function $Xe(t){var{coordinate:e,translateX:r,translateY:n}=t;return ta(a2,{["".concat(a2,"-right")]:Pr(r)&&e&&Pr(e.x)&&r>=e.x,["".concat(a2,"-left")]:Pr(r)&&e&&Pr(e.x)&&r<e.x,["".concat(a2,"-bottom")]:Pr(n)&&e&&Pr(e.y)&&n>=e.y,["".concat(a2,"-top")]:Pr(n)&&e&&Pr(e.y)&&n<e.y})}function _G(t){var{allowEscapeViewBox:e,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=t;if(s&&Pr(s[n]))return s[n];var d=r[n]-l-(a>0?a:0),h=r[n]+a;if(e[n])return o[n]?d:h;var p=c[n];if(p==null)return 0;if(o[n]){var g=d,b=p;return g<b?Math.max(h,p):Math.max(d,p)}if(u==null)return 0;var w=h+l,_=p+u;return w>_?Math.max(d,p):Math.max(h,p)}function HXe(t){var{translateX:e,translateY:r,useTranslate3d:n}=t;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function qXe(t){var{allowEscapeViewBox:e,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:o,useTranslate3d:l,viewBox:c}=t,u,d,h;return o.height>0&&o.width>0&&r?(d=_G({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=_G({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=HXe({translateX:d,translateY:h,useTranslate3d:l})):u=VXe,{cssProperties:u,cssClasses:$Xe({translateX:d,translateY:h,coordinate:r})}}function NG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function q_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NG(Object(r),!0).forEach(function(n){II(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function II(t,e,r){return(e=GXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GXe(t){var e=WXe(t,"string");return typeof e=="symbol"?e:e+""}function WXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class KXe extends A.PureComponent{constructor(){super(...arguments),II(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),II(this,"handleKeyDown",e=>{if(e.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,r;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:p,viewBox:g,wrapperStyle:b,lastBoundingBox:w,innerRef:_,hasPortalFromProps:N}=this.props,{cssClasses:S,cssProperties:T}=qXe({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:w.height,width:w.width},useTranslate3d:p,viewBox:g}),R=N?{}:q_(q_({transition:c&&e?"transform ".concat(n,"ms ").concat(a):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),z=q_(q_({},R),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},b);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:z,ref:_},s)}}var Yce=()=>{var t;return(t=Cr(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OI.apply(null,arguments)}function EG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function AG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EG(Object(r),!0).forEach(function(n){XXe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XXe(t,e,r){return(e=YXe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YXe(t){var e=ZXe(t,"string");return typeof e=="symbol"?e:e+""}function ZXe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SG={curveBasisClosed:Xqe,curveBasisOpen:Yqe,curveBasis:Kqe,curveBumpX:Pqe,curveBumpY:Dqe,curveLinearClosed:Zqe,curveLinear:pS,curveMonotoneX:Qqe,curveMonotoneY:Jqe,curveNatural:eGe,curveStep:tGe,curveStepAfter:nGe,curveStepBefore:rGe},l4=t=>Js(t.x)&&Js(t.y),jG=t=>t.base!=null&&l4(t.base)&&l4(t),s2=t=>t.x,i2=t=>t.y,QXe=(t,e)=>{if(typeof t=="function")return t;var r="curve".concat(Rw(t));return(r==="curveMonotone"||r==="curveBump")&&e?SG["".concat(r).concat(e==="vertical"?"Y":"X")]:SG[r]||pS},JXe=t=>{var{type:e="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=t,o=QXe(e,a),l=s?r.filter(l4):r,c;if(Array.isArray(n)){var u=r.map((g,b)=>AG(AG({},g),{},{base:n[b]}));a==="vertical"?c=M_().y(i2).x1(s2).x0(g=>g.base.x):c=M_().x(s2).y1(i2).y0(g=>g.base.y);var d=c.defined(jG).curve(o),h=s?u.filter(jG):u;return d(h)}a==="vertical"&&Pr(n)?c=M_().y(i2).x1(s2).x0(n):Pr(n)?c=M_().x(s2).y1(i2).y0(n):c=ale().x(s2).y(i2);var p=c.defined(l4).curve(o);return p(l)},ZD=t=>{var{className:e,points:r,path:n,pathRef:a}=t;if((!r||!r.length)&&!n)return null;var s=r&&r.length?JXe(t):n;return A.createElement("path",OI({},Uc(t),ED(t),{className:ta("recharts-curve",e),d:s===null?void 0:s,ref:a}))},eYe=["x","y","top","left","width","height","className"];function RI(){return RI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RI.apply(null,arguments)}function TG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function tYe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TG(Object(r),!0).forEach(function(n){rYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rYe(t,e,r){return(e=nYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nYe(t){var e=aYe(t,"string");return typeof e=="symbol"?e:e+""}function aYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sYe(t,e){if(t==null)return{};var r,n,a=iYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function iYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var oYe=(t,e,r,n,a,s)=>"M".concat(t,",").concat(a,"v").concat(n,"M").concat(s,",").concat(e,"h").concat(r),lYe=t=>{var{x:e=0,y:r=0,top:n=0,left:a=0,width:s=0,height:o=0,className:l}=t,c=sYe(t,eYe),u=tYe({x:e,y:r,top:n,left:a,width:s,height:o},c);return!Pr(e)||!Pr(r)||!Pr(s)||!Pr(o)||!Pr(n)||!Pr(a)?null:A.createElement("path",RI({},yl(u),{className:ta("recharts-cross",l),d:oYe(e,r,s,o,n,a)}))};function cYe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function CG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CG(Object(r),!0).forEach(function(n){uYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uYe(t,e,r){return(e=dYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dYe(t){var e=fYe(t,"string");return typeof e=="symbol"?e:e+""}function fYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hYe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Zce=(t,e,r)=>t.map(n=>"".concat(hYe(n)," ").concat(e,"ms ").concat(r)).join(","),mYe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ey=(t,e)=>Object.keys(e).reduce((r,n)=>kG(kG({},r),{},{[n]:t(n,e[n])}),{});function IG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(r),!0).forEach(function(n){pYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pYe(t,e,r){return(e=gYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gYe(t){var e=xYe(t,"string");return typeof e=="symbol"?e:e+""}function xYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c4=(t,e,r)=>t+(e-t)*r,PI=t=>{var{from:e,to:r}=t;return e!==r},Qce=(t,e,r)=>{var n=Ey((a,s)=>{if(PI(s)){var[o,l]=t(s.from,s.to,s.velocity);return Ci(Ci({},s),{},{from:o,velocity:l})}return s},e);return r<1?Ey((a,s)=>PI(s)?Ci(Ci({},s),{},{velocity:c4(s.velocity,n[a].velocity,r),from:c4(s.from,n[a].from,r)}):s,e):Qce(t,n,r-1)};function vYe(t,e,r,n,a,s){var o,l=n.reduce((p,g)=>Ci(Ci({},p),{},{[g]:{from:t[g],velocity:0,to:e[g]}}),{}),c=()=>Ey((p,g)=>g.from,l),u=()=>!Object.values(l).filter(PI).length,d=null,h=p=>{o||(o=p);var g=p-o,b=g/r.dt;l=Qce(r,l,b),a(Ci(Ci(Ci({},t),e),c())),o=p,u()||(d=s.setTimeout(h))};return()=>(d=s.setTimeout(h),()=>{var p;(p=d)===null||p===void 0||p()})}function bYe(t,e,r,n,a,s,o){var l=null,c=a.reduce((h,p)=>Ci(Ci({},h),{},{[p]:[t[p],e[p]]}),{}),u,d=h=>{u||(u=h);var p=(h-u)/n,g=Ey((w,_)=>c4(..._,r(p)),c);if(s(Ci(Ci(Ci({},t),e),g)),p<1)l=o.setTimeout(d);else{var b=Ey((w,_)=>c4(..._,r(1)),c);s(Ci(Ci(Ci({},t),e),b))}};return()=>(l=o.setTimeout(d),()=>{var h;(h=l)===null||h===void 0||h()})}const yYe=(t,e,r,n,a,s)=>{var o=mYe(t,e);return r==null?()=>(a(Ci(Ci({},t),e)),()=>{}):r.isStepper===!0?vYe(t,e,r,o,a,s):bYe(t,e,r,n,o,a,s)};var u4=1e-4,Jce=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],eue=(t,e)=>t.map((r,n)=>r*e**n).reduce((r,n)=>r+n),OG=(t,e)=>r=>{var n=Jce(t,e);return eue(n,r)},wYe=(t,e)=>r=>{var n=Jce(t,e),a=[...n.map((s,o)=>s*o).slice(1),0];return eue(a,r)},_Ye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a,s=r[0].split("(");if(s[0]==="cubic-bezier"&&((a=s[1])===null||a===void 0?void 0:a.split(")")[0].split(",").length)===4){var o=s[1].split(")")[0].split(",").map(l=>parseFloat(l));return[o[0],o[1],o[2],o[3]]}}}return r.length===4?r:[0,0,1,1]},NYe=(t,e,r,n)=>{var a=OG(t,r),s=OG(e,n),o=wYe(t,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,h=d,p=0;p<8;++p){var g=a(h)-d,b=o(h);if(Math.abs(g-d)<u4||b<u4)return s(h);h=l(h-g/b)}return s(h)};return c.isStepper=!1,c},RG=function(){return NYe(..._Ye(...arguments))},EYe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=e,s=(o,l,c)=>{var u=-(o-l)*r,d=c*n,h=c+(u-d)*a/1e3,p=c*a/1e3+o;return Math.abs(p-l)<u4&&Math.abs(h)<u4?[l,0]:[p,h]};return s.isStepper=!0,s.dt=a,s},AYe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return RG(t);case"spring":return EYe();default:if(t.split("(")[0]==="cubic-bezier")return RG(t)}return typeof t=="function"?t:null};function SYe(t){var e,r=()=>null,n=!1,a=null,s=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=t.setTimeout(s.bind(null,u),c);return}s(c),a=t.setTimeout(s.bind(null,u));return}typeof o=="string"&&(e=o,r(e)),typeof o=="object"&&(e=o,r(e)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),s(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>t}}class jYe{setTimeout(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=o=>{o-n>=r?e(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{a!=null&&cancelAnimationFrame(a)}}}function TYe(){return SYe(new jYe)}var CYe=A.createContext(TYe);function kYe(t,e){var r=A.useContext(CYe);return A.useMemo(()=>e??r(t),[t,e,r])}var IYe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Vw={devToolsEnabled:!1,isSsr:IYe()},OYe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},PG={t:0},rC={t:1};function $w(t){var e=yi(t,OYe),{isActive:r,canBegin:n,duration:a,easing:s,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=e,d=r==="auto"?!Vw.isSsr:r,h=kYe(e.animationId,e.animationManager),[p,g]=A.useState(d?PG:rC),b=A.useRef(null);return A.useEffect(()=>{d||g(rC)},[d]),A.useEffect(()=>{if(!d||!n)return Pw;var w=yYe(PG,rC,AYe(s),a,g,h.getTimeoutController()),_=()=>{b.current=w()};return h.start([c,o,_,a,l]),()=>{h.stop(),b.current&&b.current(),l()}},[d,n,a,s,o,c,l,h]),u(p.t)}function Hw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=A.useRef(xy(e)),n=A.useRef(t);return n.current!==t&&(r.current=xy(e),n.current=t),r.current}var RYe=["radius"],PYe=["radius"];function DG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function MG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DG(Object(r),!0).forEach(function(n){DYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DYe(t,e,r){return(e=MYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MYe(t){var e=LYe(t,"string");return typeof e=="symbol"?e:e+""}function LYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d4(){return d4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},d4.apply(null,arguments)}function LG(t,e){if(t==null)return{};var r,n,a=FYe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function FYe(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var FG=(t,e,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=a[h]>s?s:a[h];u="M".concat(t,",").concat(e+o*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(t+l*d[0],",").concat(e)),u+="L ".concat(t+r-l*d[1],",").concat(e),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(t+r,",").concat(e+o*d[1])),u+="L ".concat(t+r,",").concat(e+n-o*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(t+r-l*d[2],",").concat(e+n)),u+="L ".concat(t+l*d[3],",").concat(e+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+n-o*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var g=Math.min(s,a);u="M ".concat(t,",").concat(e+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+l*g,",").concat(e,`
            L `).concat(t+r-l*g,",").concat(e,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+r,",").concat(e+o*g,`
            L `).concat(t+r,",").concat(e+n-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t+r-l*g,",").concat(e+n,`
            L `).concat(t+l*g,",").concat(e+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(t,",").concat(e+n-o*g," Z")}else u="M ".concat(t,",").concat(e," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},BG={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tue=t=>{var e=yi(t,BG),r=A.useRef(null),[n,a]=A.useState(-1);A.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ne=r.current.getTotalLength();ne&&a(ne)}catch{}},[]);var{x:s,y:o,width:l,height:c,radius:u,className:d}=e,{animationEasing:h,animationDuration:p,animationBegin:g,isAnimationActive:b,isUpdateAnimationActive:w}=e,_=A.useRef(l),N=A.useRef(c),S=A.useRef(s),T=A.useRef(o),R=A.useMemo(()=>({x:s,y:o,width:l,height:c,radius:u}),[s,o,l,c,u]),z=Hw(R,"rectangle-");if(s!==+s||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var G=ta("recharts-rectangle",d);if(!w){var O=yl(e),{radius:D}=O,I=LG(O,RYe);return A.createElement("path",d4({},I,{radius:typeof u=="number"?u:void 0,className:G,d:FG(s,o,l,c,u)}))}var V=_.current,P=N.current,B=S.current,F=T.current,ee="0px ".concat(n===-1?1:n,"px"),Z="".concat(n,"px 0px"),ce=Zce(["strokeDasharray"],p,typeof h=="string"?h:BG.animationEasing);return A.createElement($w,{animationId:z,key:z,canBegin:n>0,duration:p,easing:h,isActive:w,begin:g},ne=>{var ae=cs(V,l,ne),me=cs(P,c,ne),Te=cs(B,s,ne),we=cs(F,o,ne);r.current&&(_.current=ae,N.current=me,S.current=Te,T.current=we);var q;b?ne>0?q={transition:ce,strokeDasharray:Z}:q={strokeDasharray:ee}:q={strokeDasharray:Z};var Y=yl(e),{radius:X}=Y,re=LG(Y,PYe);return A.createElement("path",d4({},re,{radius:typeof u=="number"?u:void 0,className:G,d:FG(Te,we,ae,me,u),ref:r,style:MG(MG({},q),e.style)}))})};function UG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zG(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UG(Object(r),!0).forEach(function(n){BYe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UG(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BYe(t,e,r){return(e=UYe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UYe(t){var e=zYe(t,"string");return typeof e=="symbol"?e:e+""}function zYe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f4=Math.PI/180,VYe=t=>t*180/Math.PI,mi=(t,e,r,n)=>({x:t+Math.cos(-f4*n)*r,y:e+Math.sin(-f4*n)*r}),rue=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},$Ye=(t,e)=>{var{x:r,y:n}=t,{x:a,y:s}=e;return Math.sqrt((r-a)**2+(n-s)**2)},HYe=(t,e)=>{var{x:r,y:n}=t,{cx:a,cy:s}=e,o=$Ye({x:r,y:n},{x:a,y:s});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>s&&(c=2*Math.PI-c),{radius:o,angle:VYe(c),angleInRadian:c}},qYe=t=>{var{startAngle:e,endAngle:r}=t,n=Math.floor(e/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:e-s*360,endAngle:r-s*360}},GYe=(t,e)=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return t+o*360},WYe=(t,e)=>{var{chartX:r,chartY:n}=t,{radius:a,angle:s}=HYe({x:r,y:n},e),{innerRadius:o,outerRadius:l}=e;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=qYe(e),d=s,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?zG(zG({},e),{},{radius:a,angle:GYe(d,e)}):null};function nue(t){var{cx:e,cy:r,radius:n,startAngle:a,endAngle:s}=t,o=mi(e,r,n,a),l=mi(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}function DI(){return DI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},DI.apply(null,arguments)}var KYe=(t,e)=>{var r=to(e-t),n=Math.min(Math.abs(e-t),359.999);return r*n},G_=t=>{var{cx:e,cy:r,radius:n,angle:a,sign:s,isExternal:o,cornerRadius:l,cornerIsExternal:c}=t,u=l*(o?1:-1)+n,d=Math.asin(l/u)/f4,h=c?a:a+s*d,p=mi(e,r,u,h),g=mi(e,r,n,h),b=c?a-s*d:a,w=mi(e,r,u*Math.cos(d*f4),b);return{center:p,circleTangency:g,lineTangency:w,theta:d}},aue=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:o}=t,l=KYe(s,o),c=s+l,u=mi(e,r,a,s),d=mi(e,r,a,c),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var p=mi(e,r,n,s),g=mi(e,r,n,c);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=c),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(e,",").concat(r," Z");return h},XYe=t=>{var{cx:e,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=t,d=to(u-c),{circleTangency:h,lineTangency:p,theta:g}=G_({cx:e,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:l}),{circleTangency:b,lineTangency:w,theta:_}=G_({cx:e,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:l}),N=l?Math.abs(c-u):Math.abs(c-u)-g-_;if(N<0)return o?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):aue({cx:e,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var S="M ".concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(N>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:T,lineTangency:R,theta:z}=G_({cx:e,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:G,lineTangency:O,theta:D}=G_({cx:e,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),I=l?Math.abs(c-u):Math.abs(c-u)-z-D;if(I<0&&s===0)return"".concat(S,"L").concat(e,",").concat(r,"Z");S+="L".concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(G.x,",").concat(G.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(I>180),",").concat(+(d>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(R.x,",").concat(R.y,"Z")}else S+="L".concat(e,",").concat(r,"Z");return S},YYe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},sue=t=>{var e=yi(t,YYe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=e;if(s<a||u===d)return null;var p=ta("recharts-sector",h),g=s-a,b=Go(o,g,0,!0),w;return b>0&&Math.abs(u-d)<360?w=XYe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(b,g/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):w=aue({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),A.createElement("path",DI({},yl(e),{className:p,d:w}))};function ZYe(t,e,r){if(t==="horizontal")return[{x:e.x,y:r.top},{x:e.x,y:r.top+r.height}];if(t==="vertical")return[{x:r.left,y:e.y},{x:r.left+r.width,y:e.y}];if(yle(e)){if(t==="centric"){var{cx:n,cy:a,innerRadius:s,outerRadius:o,angle:l}=e,c=mi(n,a,s,l),u=mi(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return nue(e)}}var iue={},oue={},lue={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DD;function r(n){return e.isSymbol(n)?NaN:Number(n)}t.toNumber=r})(lue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lue;function r(n){return n?(n=e.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}t.toFinite=r})(oue);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MD,r=oue;function n(a,s,o){o&&typeof o!="number"&&e.isIterateeCall(a,s,o)&&(s=o=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),o=o===void 0?a<s?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((s-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}t.range=n})(iue);var QYe=iue.range;const cue=Vc(QYe);function D0(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function JYe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QD(t){let e,r,n;t.length!==2?(e=D0,r=(l,c)=>D0(t(l),c),n=(l,c)=>t(l)-c):(e=t===D0||t===JYe?t:eZe,r=t,n=t);function a(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:a,center:o,right:s}}function eZe(){return 0}function uue(t){return t===null?NaN:+t}function*tZe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const rZe=QD(D0),qw=rZe.right;QD(uue).center;class VG extends Map{constructor(e,r=sZe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get($G(this,e))}has(e){return super.has($G(this,e))}set(e,r){return super.set(nZe(this,e),r)}delete(e){return super.delete(aZe(this,e))}}function $G({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function nZe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function aZe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function sZe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function iZe(t=D0){if(t===D0)return due;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function due(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const oZe=Math.sqrt(50),lZe=Math.sqrt(10),cZe=Math.sqrt(2);function h4(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=oZe?10:s>=lZe?5:s>=cZe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=r&&r<2?h4(t,e,r*2):[l,c,u]}function MI(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?h4(e,t,r):h4(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function LI(t,e,r){return e=+e,t=+t,r=+r,h4(t,e,r)[2]}function FI(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?LI(e,t,r):LI(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function HG(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function qG(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function fue(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?due:iZe(a);n>r;){if(n-r>600){const c=n-r+1,u=e-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(e-u*h/c+p)),b=Math.min(n,Math.floor(e+(c-u)*h/c+p));fue(t,e,g,b,a)}const s=t[e];let o=r,l=n;for(o2(t,r,e),a(t[n],s)>0&&o2(t,r,n);o<l;){for(o2(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?o2(t,r,l):(++l,o2(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function o2(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function uZe(t,e,r){if(t=Float64Array.from(tZe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return qG(t);if(e>=1)return HG(t);var n,a=(n-1)*e,s=Math.floor(a),o=HG(fue(t,s).subarray(0,s+1)),l=qG(t.subarray(s+1));return o+(l-o)*(a-s)}}function dZe(t,e,r=uue){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function fZe(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Ou(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Th(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const BI=Symbol("implicit");function JD(){var t=new VG,e=[],r=[],n=BI;function a(s){let o=t.get(s);if(o===void 0){if(n!==BI)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new VG;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return JD(e,r).unknown(n)},Ou.apply(a,arguments),a}function eM(){var t=JD().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete t.unknown;function h(){var p=e().length,g=a<n,b=g?a:n,w=g?n:a;s=(w-b)/Math.max(1,p-c+u*2),l&&(s=Math.floor(s)),b+=(w-b-s*(p-c))*d,o=s*(1-c),l&&(b=Math.round(b),o=Math.round(o));var _=fZe(p).map(function(N){return b+s*N});return r(g?_.reverse():_)}return t.domain=function(p){return arguments.length?(e(p),h()):e()},t.range=function(p){return arguments.length?([n,a]=p,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(p){return[n,a]=p,n=+n,a=+a,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(p){return arguments.length?(l=!!p,h()):l},t.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),h()):c},t.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},t.paddingOuter=function(p){return arguments.length?(u=+p,h()):u},t.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),h()):d},t.copy=function(){return eM(e(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ou.apply(h(),arguments)}function hue(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return hue(e())},t}function hZe(){return hue(eM.apply(null,arguments).paddingInner(1))}function tM(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function mue(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Gw(){}var Ay=.7,m4=1/Ay,Q1="\\s*([+-]?\\d+)\\s*",Sy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mZe=/^#([0-9a-f]{3,8})$/,pZe=new RegExp(`^rgb\\(${Q1},${Q1},${Q1}\\)$`),gZe=new RegExp(`^rgb\\(${Gd},${Gd},${Gd}\\)$`),xZe=new RegExp(`^rgba\\(${Q1},${Q1},${Q1},${Sy}\\)$`),vZe=new RegExp(`^rgba\\(${Gd},${Gd},${Gd},${Sy}\\)$`),bZe=new RegExp(`^hsl\\(${Sy},${Gd},${Gd}\\)$`),yZe=new RegExp(`^hsla\\(${Sy},${Gd},${Gd},${Sy}\\)$`),GG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tM(Gw,jy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:WG,formatHex:WG,formatHex8:wZe,formatHsl:_Ze,formatRgb:KG,toString:KG});function WG(){return this.rgb().formatHex()}function wZe(){return this.rgb().formatHex8()}function _Ze(){return pue(this).formatHsl()}function KG(){return this.rgb().formatRgb()}function jy(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=mZe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?XG(e):r===3?new Ul(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?W_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?W_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pZe.exec(t))?new Ul(e[1],e[2],e[3],1):(e=gZe.exec(t))?new Ul(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xZe.exec(t))?W_(e[1],e[2],e[3],e[4]):(e=vZe.exec(t))?W_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bZe.exec(t))?QG(e[1],e[2]/100,e[3]/100,1):(e=yZe.exec(t))?QG(e[1],e[2]/100,e[3]/100,e[4]):GG.hasOwnProperty(t)?XG(GG[t]):t==="transparent"?new Ul(NaN,NaN,NaN,0):null}function XG(t){return new Ul(t>>16&255,t>>8&255,t&255,1)}function W_(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ul(t,e,r,n)}function NZe(t){return t instanceof Gw||(t=jy(t)),t?(t=t.rgb(),new Ul(t.r,t.g,t.b,t.opacity)):new Ul}function UI(t,e,r,n){return arguments.length===1?NZe(t):new Ul(t,e,r,n??1)}function Ul(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}tM(Ul,UI,mue(Gw,{brighter(t){return t=t==null?m4:Math.pow(m4,t),new Ul(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ay:Math.pow(Ay,t),new Ul(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ul(Ap(this.r),Ap(this.g),Ap(this.b),p4(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YG,formatHex:YG,formatHex8:EZe,formatRgb:ZG,toString:ZG}));function YG(){return`#${tp(this.r)}${tp(this.g)}${tp(this.b)}`}function EZe(){return`#${tp(this.r)}${tp(this.g)}${tp(this.b)}${tp((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZG(){const t=p4(this.opacity);return`${t===1?"rgb(":"rgba("}${Ap(this.r)}, ${Ap(this.g)}, ${Ap(this.b)}${t===1?")":`, ${t})`}`}function p4(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ap(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tp(t){return t=Ap(t),(t<16?"0":"")+t.toString(16)}function QG(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new ed(t,e,r,n)}function pue(t){if(t instanceof ed)return new ed(t.h,t.s,t.l,t.opacity);if(t instanceof Gw||(t=jy(t)),!t)return new ed;if(t instanceof ed)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new ed(o,l,c,t.opacity)}function AZe(t,e,r,n){return arguments.length===1?pue(t):new ed(t,e,r,n??1)}function ed(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}tM(ed,AZe,mue(Gw,{brighter(t){return t=t==null?m4:Math.pow(m4,t),new ed(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ay:Math.pow(Ay,t),new ed(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Ul(nC(t>=240?t-240:t+120,a,n),nC(t,a,n),nC(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new ed(JG(this.h),K_(this.s),K_(this.l),p4(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=p4(this.opacity);return`${t===1?"hsl(":"hsla("}${JG(this.h)}, ${K_(this.s)*100}%, ${K_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function JG(t){return t=(t||0)%360,t<0?t+360:t}function K_(t){return Math.max(0,Math.min(1,t||0))}function nC(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const rM=t=>()=>t;function SZe(t,e){return function(r){return t+r*e}}function jZe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function TZe(t){return(t=+t)==1?gue:function(e,r){return r-e?jZe(e,r,t):rM(isNaN(e)?r:e)}}function gue(t,e){var r=e-t;return r?SZe(t,r):rM(isNaN(t)?e:t)}const eW=function t(e){var r=TZe(e);function n(a,s){var o=r((a=UI(a)).r,(s=UI(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),u=gue(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=t,n}(1);function CZe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function kZe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function IZe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=bv(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function OZe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function g4(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function RZe(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=bv(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var zI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aC=new RegExp(zI.source,"g");function PZe(t){return function(){return t}}function DZe(t){return function(e){return t(e)+""}}function MZe(t,e){var r=zI.lastIndex=aC.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=zI.exec(t))&&(a=aC.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:g4(n,a)})),r=aC.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?DZe(c[0].x):PZe(e):(e=c.length,function(u){for(var d=0,h;d<e;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function bv(t,e){var r=typeof e,n;return e==null||r==="boolean"?rM(e):(r==="number"?g4:r==="string"?(n=jy(e))?(e=n,eW):MZe:e instanceof jy?eW:e instanceof Date?OZe:kZe(e)?CZe:Array.isArray(e)?IZe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?RZe:g4)(t,e)}function nM(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function LZe(t,e){e===void 0&&(e=t,t=bv);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function FZe(t){return function(){return t}}function x4(t){return+t}var tW=[0,1];function pl(t){return t}function VI(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:FZe(isNaN(e)?NaN:.5)}function BZe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function UZe(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=VI(a,n),s=r(o,s)):(n=VI(n,a),s=r(s,o)),function(l){return s(n(l))}}function zZe(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=VI(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=qw(t,l,1,n)-1;return s[c](a[c](l))}}function Ww(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function US(){var t=tW,e=tW,r=bv,n,a,s,o=pl,l,c,u;function d(){var p=Math.min(t.length,e.length);return o!==pl&&(o=BZe(t[0],t[p-1])),l=p>2?zZe:UZe,c=u=null,h}function h(p){return p==null||isNaN(p=+p)?s:(c||(c=l(t.map(n),e,r)))(n(o(p)))}return h.invert=function(p){return o(a((u||(u=l(e,t.map(n),g4)))(p)))},h.domain=function(p){return arguments.length?(t=Array.from(p,x4),d()):t.slice()},h.range=function(p){return arguments.length?(e=Array.from(p),d()):e.slice()},h.rangeRound=function(p){return e=Array.from(p),r=nM,d()},h.clamp=function(p){return arguments.length?(o=p?!0:pl,d()):o!==pl},h.interpolate=function(p){return arguments.length?(r=p,d()):r},h.unknown=function(p){return arguments.length?(s=p,h):s},function(p,g){return n=p,a=g,d()}}function aM(){return US()(pl,pl)}function VZe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function v4(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function zx(t){return t=v4(Math.abs(t)),t?t[1]:NaN}function $Ze(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function HZe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var qZe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ty(t){if(!(e=qZe.exec(t)))throw new Error("invalid format: "+t);var e;return new sM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ty.prototype=sM.prototype;function sM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GZe(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var xue;function WZe(t,e){var r=v4(t,e);if(!r)return t+"";var n=r[0],a=r[1],s=a-(xue=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+v4(t,Math.max(0,e+s-1))[0]}function rW(t,e){var r=v4(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const nW={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:VZe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>rW(t*100,e),r:rW,s:WZe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function aW(t){return t}var sW=Array.prototype.map,iW=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function KZe(t){var e=t.grouping===void 0||t.thousands===void 0?aW:$Ze(sW.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?aW:HZe(sW.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Ty(h);var p=h.fill,g=h.align,b=h.sign,w=h.symbol,_=h.zero,N=h.width,S=h.comma,T=h.precision,R=h.trim,z=h.type;z==="n"?(S=!0,z="g"):nW[z]||(T===void 0&&(T=12),R=!0,z="g"),(_||p==="0"&&g==="=")&&(_=!0,p="0",g="=");var G=w==="$"?r:w==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():"",O=w==="$"?n:/[%p]/.test(z)?o:"",D=nW[z],I=/[defgprs%]/.test(z);T=T===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function V(P){var B=G,F=O,ee,Z,ce;if(z==="c")F=D(P)+F,P="";else{P=+P;var ne=P<0||1/P<0;if(P=isNaN(P)?c:D(Math.abs(P),T),R&&(P=GZe(P)),ne&&+P==0&&b!=="+"&&(ne=!1),B=(ne?b==="("?b:l:b==="-"||b==="("?"":b)+B,F=(z==="s"?iW[8+xue/3]:"")+F+(ne&&b==="("?")":""),I){for(ee=-1,Z=P.length;++ee<Z;)if(ce=P.charCodeAt(ee),48>ce||ce>57){F=(ce===46?a+P.slice(ee+1):P.slice(ee))+F,P=P.slice(0,ee);break}}}S&&!_&&(P=e(P,1/0));var ae=B.length+P.length+F.length,me=ae<N?new Array(N-ae+1).join(p):"";switch(S&&_&&(P=e(me+P,me.length?N-F.length:1/0),me=""),g){case"<":P=B+P+F+me;break;case"=":P=B+me+P+F;break;case"^":P=me.slice(0,ae=me.length>>1)+B+P+F+me.slice(ae);break;default:P=me+B+P+F;break}return s(P)}return V.toString=function(){return h+""},V}function d(h,p){var g=u((h=Ty(h),h.type="f",h)),b=Math.max(-8,Math.min(8,Math.floor(zx(p)/3)))*3,w=Math.pow(10,-b),_=iW[8+b/3];return function(N){return g(w*N)+_}}return{format:u,formatPrefix:d}}var X_,iM,vue;XZe({thousands:",",grouping:[3],currency:["$",""]});function XZe(t){return X_=KZe(t),iM=X_.format,vue=X_.formatPrefix,X_}function YZe(t){return Math.max(0,-zx(Math.abs(t)))}function ZZe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zx(e)/3)))*3-zx(Math.abs(t)))}function QZe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zx(e)-zx(t))+1}function bue(t,e,r,n){var a=FI(t,e,r),s;switch(n=Ty(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=ZZe(a,o))&&(n.precision=s),vue(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=QZe(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=YZe(a))&&(n.precision=s-(n.type==="%")*2);break}}return iM(n)}function bm(t){var e=t.domain;return t.ticks=function(r){var n=e();return MI(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return bue(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=LI(o,l,r),u===c)return n[a]=o,n[s]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function yue(){var t=aM();return t.copy=function(){return Ww(t,yue())},Ou.apply(t,arguments),bm(t)}function wue(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,x4),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return wue(t).unknown(e)},t=arguments.length?Array.from(t,x4):[0,1],bm(r)}function _ue(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function oW(t){return Math.log(t)}function lW(t){return Math.exp(t)}function JZe(t){return-Math.log(-t)}function eQe(t){return-Math.exp(-t)}function tQe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rQe(t){return t===10?tQe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function nQe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function cW(t){return(e,r)=>-t(-e,r)}function oM(t){const e=t(oW,lW),r=e.domain;let n=10,a,s;function o(){return a=nQe(n),s=rQe(n),r()[0]<0?(a=cW(a),s=cW(s),t(JZe,eQe)):t(oW,lW),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let p=a(u),g=a(d),b,w;const _=l==null?10:+l;let N=[];if(!(n%1)&&g-p<_){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(b=1;b<n;++b)if(w=p<0?b/s(-p):b*s(p),!(w<u)){if(w>d)break;N.push(w)}}else for(;p<=g;++p)for(b=n-1;b>=1;--b)if(w=p>0?b/s(-p):b*s(p),!(w<u)){if(w>d)break;N.push(w)}N.length*2<_&&(N=MI(u,d,_))}else N=MI(p,g,Math.min(g-p,_)).map(s);return h?N.reverse():N},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ty(c)).precision==null&&(c.trim=!0),c=iM(c)),l===1/0)return c;const u=Math.max(1,n*l/e.ticks().length);return d=>{let h=d/s(Math.round(a(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},e.nice=()=>r(_ue(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function Nue(){const t=oM(US()).domain([1,10]);return t.copy=()=>Ww(t,Nue()).base(t.base()),Ou.apply(t,arguments),t}function uW(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dW(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lM(t){var e=1,r=t(uW(e),dW(e));return r.constant=function(n){return arguments.length?t(uW(e=+n),dW(e)):e},bm(r)}function Eue(){var t=lM(US());return t.copy=function(){return Ww(t,Eue()).constant(t.constant())},Ou.apply(t,arguments)}function fW(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function aQe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function sQe(t){return t<0?-t*t:t*t}function cM(t){var e=t(pl,pl),r=1;function n(){return r===1?t(pl,pl):r===.5?t(aQe,sQe):t(fW(r),fW(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},bm(e)}function uM(){var t=cM(US());return t.copy=function(){return Ww(t,uM()).exponent(t.exponent())},Ou.apply(t,arguments),t}function iQe(){return uM.apply(null,arguments).exponent(.5)}function hW(t){return Math.sign(t)*t*t}function oQe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Aue(){var t=aM(),e=[0,1],r=!1,n;function a(s){var o=oQe(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(hW(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,x4)).map(hW)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Aue(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Ou.apply(a,arguments),bm(a)}function Sue(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=dZe(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[qw(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(D0),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Sue().domain(t).range(e).unknown(n)},Ou.apply(s,arguments)}function jue(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[qw(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return jue().domain([t,e]).range(a).unknown(s)},Ou.apply(bm(o),arguments)}function Tue(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[qw(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Tue().domain(t).range(e).unknown(r)},Ou.apply(a,arguments)}const sC=new Date,iC=new Date;function Di(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<o);return c},a.filter=s=>Di(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(sC.setTime(+s),iC.setTime(+o),t(sC),t(iC),Math.floor(r(sC,iC))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const b4=Di(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);b4.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Di(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):b4);b4.range;const Ff=1e3,bu=Ff*60,Bf=bu*60,gh=Bf*24,dM=gh*7,mW=gh*30,oC=gh*365,rp=Di(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ff)},(t,e)=>(e-t)/Ff,t=>t.getUTCSeconds());rp.range;const fM=Di(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ff)},(t,e)=>{t.setTime(+t+e*bu)},(t,e)=>(e-t)/bu,t=>t.getMinutes());fM.range;const hM=Di(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*bu)},(t,e)=>(e-t)/bu,t=>t.getUTCMinutes());hM.range;const mM=Di(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ff-t.getMinutes()*bu)},(t,e)=>{t.setTime(+t+e*Bf)},(t,e)=>(e-t)/Bf,t=>t.getHours());mM.range;const pM=Di(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Bf)},(t,e)=>(e-t)/Bf,t=>t.getUTCHours());pM.range;const Kw=Di(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bu)/gh,t=>t.getDate()-1);Kw.range;const zS=Di(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/gh,t=>t.getUTCDate()-1);zS.range;const Cue=Di(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/gh,t=>Math.floor(t/gh));Cue.range;function yg(t){return Di(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*bu)/dM)}const VS=yg(0),y4=yg(1),lQe=yg(2),cQe=yg(3),Vx=yg(4),uQe=yg(5),dQe=yg(6);VS.range;y4.range;lQe.range;cQe.range;Vx.range;uQe.range;dQe.range;function wg(t){return Di(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/dM)}const $S=wg(0),w4=wg(1),fQe=wg(2),hQe=wg(3),$x=wg(4),mQe=wg(5),pQe=wg(6);$S.range;w4.range;fQe.range;hQe.range;$x.range;mQe.range;pQe.range;const gM=Di(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());gM.range;const xM=Di(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());xM.range;const xh=Di(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());xh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Di(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});xh.range;const vh=Di(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());vh.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Di(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});vh.range;function kue(t,e,r,n,a,s){const o=[[rp,1,Ff],[rp,5,5*Ff],[rp,15,15*Ff],[rp,30,30*Ff],[s,1,bu],[s,5,5*bu],[s,15,15*bu],[s,30,30*bu],[a,1,Bf],[a,3,3*Bf],[a,6,6*Bf],[a,12,12*Bf],[n,1,gh],[n,2,2*gh],[r,1,dM],[e,1,mW],[e,3,3*mW],[t,1,oC]];function l(u,d,h){const p=d<u;p&&([u,d]=[d,u]);const g=h&&typeof h.range=="function"?h:c(u,d,h),b=g?g.range(u,+d+1):[];return p?b.reverse():b}function c(u,d,h){const p=Math.abs(d-u)/h,g=QD(([,,_])=>_).right(o,p);if(g===o.length)return t.every(FI(u/oC,d/oC,h));if(g===0)return b4.every(Math.max(FI(u,d,h),1));const[b,w]=o[p/o[g-1][2]<o[g][2]/p?g-1:g];return b.every(w)}return[l,c]}const[gQe,xQe]=kue(vh,xM,$S,Cue,pM,hM),[vQe,bQe]=kue(xh,gM,VS,Kw,mM,fM);function lC(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function cC(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function l2(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function yQe(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,u=c2(a),d=u2(a),h=c2(s),p=u2(s),g=c2(o),b=u2(o),w=c2(l),_=u2(l),N=c2(c),S=u2(c),T={a:ne,A:ae,b:me,B:Te,c:null,d:yW,e:yW,f:$Qe,g:JQe,G:tJe,H:UQe,I:zQe,j:VQe,L:Iue,m:HQe,M:qQe,p:we,q,Q:NW,s:EW,S:GQe,u:WQe,U:KQe,V:XQe,w:YQe,W:ZQe,x:null,X:null,y:QQe,Y:eJe,Z:rJe,"%":_W},R={a:Y,A:X,b:re,B:se,c:null,d:wW,e:wW,f:iJe,g:gJe,G:vJe,H:nJe,I:aJe,j:sJe,L:Rue,m:oJe,M:lJe,p:Ce,q:je,Q:NW,s:EW,S:cJe,u:uJe,U:dJe,V:fJe,w:hJe,W:mJe,x:null,X:null,y:pJe,Y:xJe,Z:bJe,"%":_W},z={a:V,A:P,b:B,B:F,c:ee,d:vW,e:vW,f:MQe,g:xW,G:gW,H:bW,I:bW,j:OQe,L:DQe,m:IQe,M:RQe,p:I,q:kQe,Q:FQe,s:BQe,S:PQe,u:AQe,U:SQe,V:jQe,w:EQe,W:TQe,x:Z,X:ce,y:xW,Y:gW,Z:CQe,"%":LQe};T.x=G(r,T),T.X=G(n,T),T.c=G(e,T),R.x=G(r,R),R.X=G(n,R),R.c=G(e,R);function G(pe,Oe){return function(qe){var Ue=[],Me=-1,Be=0,ve=pe.length,Ht,mt,Ut;for(qe instanceof Date||(qe=new Date(+qe));++Me<ve;)pe.charCodeAt(Me)===37&&(Ue.push(pe.slice(Be,Me)),(mt=pW[Ht=pe.charAt(++Me)])!=null?Ht=pe.charAt(++Me):mt=Ht==="e"?" ":"0",(Ut=Oe[Ht])&&(Ht=Ut(qe,mt)),Ue.push(Ht),Be=Me+1);return Ue.push(pe.slice(Be,Me)),Ue.join("")}}function O(pe,Oe){return function(qe){var Ue=l2(1900,void 0,1),Me=D(Ue,pe,qe+="",0),Be,ve;if(Me!=qe.length)return null;if("Q"in Ue)return new Date(Ue.Q);if("s"in Ue)return new Date(Ue.s*1e3+("L"in Ue?Ue.L:0));if(Oe&&!("Z"in Ue)&&(Ue.Z=0),"p"in Ue&&(Ue.H=Ue.H%12+Ue.p*12),Ue.m===void 0&&(Ue.m="q"in Ue?Ue.q:0),"V"in Ue){if(Ue.V<1||Ue.V>53)return null;"w"in Ue||(Ue.w=1),"Z"in Ue?(Be=cC(l2(Ue.y,0,1)),ve=Be.getUTCDay(),Be=ve>4||ve===0?w4.ceil(Be):w4(Be),Be=zS.offset(Be,(Ue.V-1)*7),Ue.y=Be.getUTCFullYear(),Ue.m=Be.getUTCMonth(),Ue.d=Be.getUTCDate()+(Ue.w+6)%7):(Be=lC(l2(Ue.y,0,1)),ve=Be.getDay(),Be=ve>4||ve===0?y4.ceil(Be):y4(Be),Be=Kw.offset(Be,(Ue.V-1)*7),Ue.y=Be.getFullYear(),Ue.m=Be.getMonth(),Ue.d=Be.getDate()+(Ue.w+6)%7)}else("W"in Ue||"U"in Ue)&&("w"in Ue||(Ue.w="u"in Ue?Ue.u%7:"W"in Ue?1:0),ve="Z"in Ue?cC(l2(Ue.y,0,1)).getUTCDay():lC(l2(Ue.y,0,1)).getDay(),Ue.m=0,Ue.d="W"in Ue?(Ue.w+6)%7+Ue.W*7-(ve+5)%7:Ue.w+Ue.U*7-(ve+6)%7);return"Z"in Ue?(Ue.H+=Ue.Z/100|0,Ue.M+=Ue.Z%100,cC(Ue)):lC(Ue)}}function D(pe,Oe,qe,Ue){for(var Me=0,Be=Oe.length,ve=qe.length,Ht,mt;Me<Be;){if(Ue>=ve)return-1;if(Ht=Oe.charCodeAt(Me++),Ht===37){if(Ht=Oe.charAt(Me++),mt=z[Ht in pW?Oe.charAt(Me++):Ht],!mt||(Ue=mt(pe,qe,Ue))<0)return-1}else if(Ht!=qe.charCodeAt(Ue++))return-1}return Ue}function I(pe,Oe,qe){var Ue=u.exec(Oe.slice(qe));return Ue?(pe.p=d.get(Ue[0].toLowerCase()),qe+Ue[0].length):-1}function V(pe,Oe,qe){var Ue=g.exec(Oe.slice(qe));return Ue?(pe.w=b.get(Ue[0].toLowerCase()),qe+Ue[0].length):-1}function P(pe,Oe,qe){var Ue=h.exec(Oe.slice(qe));return Ue?(pe.w=p.get(Ue[0].toLowerCase()),qe+Ue[0].length):-1}function B(pe,Oe,qe){var Ue=N.exec(Oe.slice(qe));return Ue?(pe.m=S.get(Ue[0].toLowerCase()),qe+Ue[0].length):-1}function F(pe,Oe,qe){var Ue=w.exec(Oe.slice(qe));return Ue?(pe.m=_.get(Ue[0].toLowerCase()),qe+Ue[0].length):-1}function ee(pe,Oe,qe){return D(pe,e,Oe,qe)}function Z(pe,Oe,qe){return D(pe,r,Oe,qe)}function ce(pe,Oe,qe){return D(pe,n,Oe,qe)}function ne(pe){return o[pe.getDay()]}function ae(pe){return s[pe.getDay()]}function me(pe){return c[pe.getMonth()]}function Te(pe){return l[pe.getMonth()]}function we(pe){return a[+(pe.getHours()>=12)]}function q(pe){return 1+~~(pe.getMonth()/3)}function Y(pe){return o[pe.getUTCDay()]}function X(pe){return s[pe.getUTCDay()]}function re(pe){return c[pe.getUTCMonth()]}function se(pe){return l[pe.getUTCMonth()]}function Ce(pe){return a[+(pe.getUTCHours()>=12)]}function je(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Oe=G(pe+="",T);return Oe.toString=function(){return pe},Oe},parse:function(pe){var Oe=O(pe+="",!1);return Oe.toString=function(){return pe},Oe},utcFormat:function(pe){var Oe=G(pe+="",R);return Oe.toString=function(){return pe},Oe},utcParse:function(pe){var Oe=O(pe+="",!0);return Oe.toString=function(){return pe},Oe}}}var pW={"-":"",_:" ",0:"0"},ao=/^\s*\d+/,wQe=/^%/,_Qe=/[\\^$*+?|[\]().{}]/g;function ra(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function NQe(t){return t.replace(_Qe,"\\$&")}function c2(t){return new RegExp("^(?:"+t.map(NQe).join("|")+")","i")}function u2(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function EQe(t,e,r){var n=ao.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function AQe(t,e,r){var n=ao.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function SQe(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function jQe(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function TQe(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function gW(t,e,r){var n=ao.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function xW(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function CQe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function kQe(t,e,r){var n=ao.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function IQe(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function vW(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function OQe(t,e,r){var n=ao.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function bW(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function RQe(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function PQe(t,e,r){var n=ao.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function DQe(t,e,r){var n=ao.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function MQe(t,e,r){var n=ao.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function LQe(t,e,r){var n=wQe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function FQe(t,e,r){var n=ao.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function BQe(t,e,r){var n=ao.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function yW(t,e){return ra(t.getDate(),e,2)}function UQe(t,e){return ra(t.getHours(),e,2)}function zQe(t,e){return ra(t.getHours()%12||12,e,2)}function VQe(t,e){return ra(1+Kw.count(xh(t),t),e,3)}function Iue(t,e){return ra(t.getMilliseconds(),e,3)}function $Qe(t,e){return Iue(t,e)+"000"}function HQe(t,e){return ra(t.getMonth()+1,e,2)}function qQe(t,e){return ra(t.getMinutes(),e,2)}function GQe(t,e){return ra(t.getSeconds(),e,2)}function WQe(t){var e=t.getDay();return e===0?7:e}function KQe(t,e){return ra(VS.count(xh(t)-1,t),e,2)}function Oue(t){var e=t.getDay();return e>=4||e===0?Vx(t):Vx.ceil(t)}function XQe(t,e){return t=Oue(t),ra(Vx.count(xh(t),t)+(xh(t).getDay()===4),e,2)}function YQe(t){return t.getDay()}function ZQe(t,e){return ra(y4.count(xh(t)-1,t),e,2)}function QQe(t,e){return ra(t.getFullYear()%100,e,2)}function JQe(t,e){return t=Oue(t),ra(t.getFullYear()%100,e,2)}function eJe(t,e){return ra(t.getFullYear()%1e4,e,4)}function tJe(t,e){var r=t.getDay();return t=r>=4||r===0?Vx(t):Vx.ceil(t),ra(t.getFullYear()%1e4,e,4)}function rJe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ra(e/60|0,"0",2)+ra(e%60,"0",2)}function wW(t,e){return ra(t.getUTCDate(),e,2)}function nJe(t,e){return ra(t.getUTCHours(),e,2)}function aJe(t,e){return ra(t.getUTCHours()%12||12,e,2)}function sJe(t,e){return ra(1+zS.count(vh(t),t),e,3)}function Rue(t,e){return ra(t.getUTCMilliseconds(),e,3)}function iJe(t,e){return Rue(t,e)+"000"}function oJe(t,e){return ra(t.getUTCMonth()+1,e,2)}function lJe(t,e){return ra(t.getUTCMinutes(),e,2)}function cJe(t,e){return ra(t.getUTCSeconds(),e,2)}function uJe(t){var e=t.getUTCDay();return e===0?7:e}function dJe(t,e){return ra($S.count(vh(t)-1,t),e,2)}function Pue(t){var e=t.getUTCDay();return e>=4||e===0?$x(t):$x.ceil(t)}function fJe(t,e){return t=Pue(t),ra($x.count(vh(t),t)+(vh(t).getUTCDay()===4),e,2)}function hJe(t){return t.getUTCDay()}function mJe(t,e){return ra(w4.count(vh(t)-1,t),e,2)}function pJe(t,e){return ra(t.getUTCFullYear()%100,e,2)}function gJe(t,e){return t=Pue(t),ra(t.getUTCFullYear()%100,e,2)}function xJe(t,e){return ra(t.getUTCFullYear()%1e4,e,4)}function vJe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?$x(t):$x.ceil(t),ra(t.getUTCFullYear()%1e4,e,4)}function bJe(){return"+0000"}function _W(){return"%"}function NW(t){return+t}function EW(t){return Math.floor(+t/1e3)}var Ug,Due,Mue;yJe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yJe(t){return Ug=yQe(t),Due=Ug.format,Ug.parse,Mue=Ug.utcFormat,Ug.utcParse,Ug}function wJe(t){return new Date(t)}function _Je(t){return t instanceof Date?+t:+new Date(+t)}function vM(t,e,r,n,a,s,o,l,c,u){var d=aM(),h=d.invert,p=d.domain,g=u(".%L"),b=u(":%S"),w=u("%I:%M"),_=u("%I %p"),N=u("%a %d"),S=u("%b %d"),T=u("%B"),R=u("%Y");function z(G){return(c(G)<G?g:l(G)<G?b:o(G)<G?w:s(G)<G?_:n(G)<G?a(G)<G?N:S:r(G)<G?T:R)(G)}return d.invert=function(G){return new Date(h(G))},d.domain=function(G){return arguments.length?p(Array.from(G,_Je)):p().map(wJe)},d.ticks=function(G){var O=p();return t(O[0],O[O.length-1],G??10)},d.tickFormat=function(G,O){return O==null?z:u(O)},d.nice=function(G){var O=p();return(!G||typeof G.range!="function")&&(G=e(O[0],O[O.length-1],G??10)),G?p(_ue(O,G)):d},d.copy=function(){return Ww(d,vM(t,e,r,n,a,s,o,l,c,u))},d}function NJe(){return Ou.apply(vM(vQe,bQe,xh,gM,VS,Kw,mM,fM,rp,Due).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function EJe(){return Ou.apply(vM(gQe,xQe,vh,xM,$S,zS,pM,hM,rp,Mue).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function HS(){var t=0,e=1,r,n,a,s,o=pl,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(s(h)-r)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(p){var g,b;return arguments.length?([g,b]=p,o=h(g,b),u):[o(0),o(1)]}}return u.range=d(bv),u.rangeRound=d(nM),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return s=h,r=h(t),n=h(e),a=r===n?0:1/(n-r),u}}function ym(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Lue(){var t=bm(HS()(pl));return t.copy=function(){return ym(t,Lue())},Th.apply(t,arguments)}function Fue(){var t=oM(HS()).domain([1,10]);return t.copy=function(){return ym(t,Fue()).base(t.base())},Th.apply(t,arguments)}function Bue(){var t=lM(HS());return t.copy=function(){return ym(t,Bue()).constant(t.constant())},Th.apply(t,arguments)}function bM(){var t=cM(HS());return t.copy=function(){return ym(t,bM()).exponent(t.exponent())},Th.apply(t,arguments)}function AJe(){return bM.apply(null,arguments).exponent(.5)}function Uue(){var t=[],e=pl;function r(n){if(n!=null&&!isNaN(n=+n))return e((qw(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(D0),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>uZe(t,s/n))},r.copy=function(){return Uue(e).domain(t)},Th.apply(r,arguments)}function qS(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,u=pl,d,h=!1,p;function g(w){return isNaN(w=+w)?p:(w=.5+((w=+d(w))-s)*(n*w<n*s?l:c),u(h?Math.max(0,Math.min(1,w)):w))}g.domain=function(w){return arguments.length?([t,e,r]=w,a=d(t=+t),s=d(e=+e),o=d(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,g):[t,e,r]},g.clamp=function(w){return arguments.length?(h=!!w,g):h},g.interpolator=function(w){return arguments.length?(u=w,g):u};function b(w){return function(_){var N,S,T;return arguments.length?([N,S,T]=_,u=LZe(w,[N,S,T]),g):[u(0),u(.5),u(1)]}}return g.range=b(bv),g.rangeRound=b(nM),g.unknown=function(w){return arguments.length?(p=w,g):p},function(w){return d=w,a=w(t),s=w(e),o=w(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,g}}function zue(){var t=bm(qS()(pl));return t.copy=function(){return ym(t,zue())},Th.apply(t,arguments)}function Vue(){var t=oM(qS()).domain([.1,1,10]);return t.copy=function(){return ym(t,Vue()).base(t.base())},Th.apply(t,arguments)}function $ue(){var t=lM(qS());return t.copy=function(){return ym(t,$ue()).constant(t.constant())},Th.apply(t,arguments)}function yM(){var t=cM(qS());return t.copy=function(){return ym(t,yM()).exponent(t.exponent())},Th.apply(t,arguments)}function SJe(){return yM.apply(null,arguments).exponent(.5)}const T2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:eM,scaleDiverging:zue,scaleDivergingLog:Vue,scaleDivergingPow:yM,scaleDivergingSqrt:SJe,scaleDivergingSymlog:$ue,scaleIdentity:wue,scaleImplicit:BI,scaleLinear:yue,scaleLog:Nue,scaleOrdinal:JD,scalePoint:hZe,scalePow:uM,scaleQuantile:Sue,scaleQuantize:jue,scaleRadial:Aue,scaleSequential:Lue,scaleSequentialLog:Fue,scaleSequentialPow:bM,scaleSequentialQuantile:Uue,scaleSequentialSqrt:AJe,scaleSequentialSymlog:Bue,scaleSqrt:iQe,scaleSymlog:Eue,scaleThreshold:Tue,scaleTime:NJe,scaleUtc:EJe,tickFormat:bue},Symbol.toStringTag,{value:"Module"}));var wm=t=>t.chartData,wM=bt([wm],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),GS=(t,e,r,n)=>n?wM(t):wm(t);function em(t){if(Array.isArray(t)&&t.length===2){var[e,r]=t;if(Js(e)&&Js(r))return!0}return!1}function AW(t,e,r){return r?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Hue(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[r,n]=t,a,s;if(Js(r))a=r;else if(typeof r=="function")return;if(Js(n))s=n;else if(typeof n=="function")return;var o=[a,s];if(em(o))return o}}function jJe(t,e,r){if(!(!r&&e==null)){if(typeof t=="function"&&e!=null)try{var n=t(e,r);if(em(n))return AW(n,e,r)}catch{}if(Array.isArray(t)&&t.length===2){var[a,s]=t,o,l;if(a==="auto")e!=null&&(o=Math.min(...e));else if(Pr(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[0]))}catch{}else if(typeof a=="string"&&oG.test(a)){var c=oG.exec(a);if(c==null||e==null)o=void 0;else{var u=+c[1];o=e[0]-u}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Pr(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&lG.test(s)){var d=lG.exec(s);if(d==null||e==null)l=void 0;else{var h=+d[1];l=e[1]+h}}else l=e==null?void 0:e[1];var p=[o,l];if(em(p))return e==null?p:AW(p,e,r)}}}var yv=1e9,TJe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NM,ds=!0,Cu="[DecimalError] ",Sp=Cu+"Invalid argument: ",_M=Cu+"Exponent out of range: ",wv=Math.floor,Vm=Math.pow,CJe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ec,Ki=1e7,Za=7,que=9007199254740991,_4=wv(que/Za),kr={};kr.absoluteValue=kr.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kr.comparedTo=kr.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};kr.decimalPlaces=kr.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Za;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kr.dividedBy=kr.div=function(t){return Zf(this,new this.constructor(t))};kr.dividedToIntegerBy=kr.idiv=function(t){var e=this,r=e.constructor;return La(Zf(e,new r(t),0,1),r.precision)};kr.equals=kr.eq=function(t){return!this.cmp(t)};kr.exponent=function(){return xi(this)};kr.greaterThan=kr.gt=function(t){return this.cmp(t)>0};kr.greaterThanOrEqualTo=kr.gte=function(t){return this.cmp(t)>=0};kr.isInteger=kr.isint=function(){return this.e>this.d.length-2};kr.isNegative=kr.isneg=function(){return this.s<0};kr.isPositive=kr.ispos=function(){return this.s>0};kr.isZero=function(){return this.s===0};kr.lessThan=kr.lt=function(t){return this.cmp(t)<0};kr.lessThanOrEqualTo=kr.lte=function(t){return this.cmp(t)<1};kr.logarithm=kr.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Ec))throw Error(Cu+"NaN");if(r.s<1)throw Error(Cu+(r.s?"NaN":"-Infinity"));return r.eq(Ec)?new n(0):(ds=!1,e=Zf(Cy(r,s),Cy(t,s),s),ds=!0,La(e,a))};kr.minus=kr.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Kue(e,t):Gue(e,(t.s=-t.s,t))};kr.modulo=kr.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(Cu+"NaN");return r.s?(ds=!1,e=Zf(r,t,0,1).times(t),ds=!0,r.minus(e)):La(new n(r),a)};kr.naturalExponential=kr.exp=function(){return Wue(this)};kr.naturalLogarithm=kr.ln=function(){return Cy(this)};kr.negated=kr.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kr.plus=kr.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Gue(e,t):Kue(e,(t.s=-t.s,t))};kr.precision=kr.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Sp+t);if(e=xi(a)+1,n=a.d.length-1,r=n*Za+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kr.squareRoot=kr.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Cu+"NaN")}for(t=xi(l),ds=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=Pd(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=wv((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(Zf(l,s,o+2)).times(.5),Pd(s.d).slice(0,o)===(e=Pd(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(La(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return ds=!0,La(n,r)};kr.times=kr.mul=function(t){var e,r,n,a,s,o,l,c,u,d=this,h=d.constructor,p=d.d,g=(t=new h(t)).d;if(!d.s||!t.s)return new h(0);for(t.s*=d.s,r=d.e+t.e,c=p.length,u=g.length,c<u&&(s=p,p=g,g=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+g[n]*p[a-n-1]+e,s[a--]=l%Ki|0,e=l/Ki|0;s[a]=(s[a]+e)%Ki|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,ds?La(t,h.precision):t};kr.toDecimalPlaces=kr.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Zd(t,0,yv),e===void 0?e=n.rounding:Zd(e,0,8),La(r,t+xi(r)+1,e))};kr.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Zp(n,!0):(Zd(t,0,yv),e===void 0?e=a.rounding:Zd(e,0,8),n=La(new a(n),t+1,e),r=Zp(n,!0,t+1)),r};kr.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Zp(a):(Zd(t,0,yv),e===void 0?e=s.rounding:Zd(e,0,8),n=La(new s(a),t+xi(a)+1,e),r=Zp(n.abs(),!1,t+xi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kr.toInteger=kr.toint=function(){var t=this,e=t.constructor;return La(new e(t),xi(t)+1,e.rounding)};kr.toNumber=function(){return+this};kr.toPower=kr.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Ec);if(l=new c(l),!l.s){if(t.s<1)throw Error(Cu+"Infinity");return l}if(l.eq(Ec))return l;if(n=c.precision,t.eq(Ec))return La(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=d<0?-d:d)<=que){for(a=new c(Ec),e=Math.ceil(n/Za+4),ds=!1;r%2&&(a=a.times(l),jW(a.d,e)),r=wv(r/2),r!==0;)l=l.times(l),jW(l.d,e);return ds=!0,t.s<0?new c(Ec).div(a):La(a,n)}}else if(s<0)throw Error(Cu+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,ds=!1,a=t.times(Cy(l,n+u)),ds=!0,a=Wue(a),a.s=s,a};kr.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=xi(a),n=Zp(a,r<=s.toExpNeg||r>=s.toExpPos)):(Zd(t,1,yv),e===void 0?e=s.rounding:Zd(e,0,8),a=La(new s(a),t,e),r=xi(a),n=Zp(a,t<=r||r<=s.toExpNeg,t)),n};kr.toSignificantDigits=kr.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Zd(t,1,yv),e===void 0?e=n.rounding:Zd(e,0,8)),La(new n(r),t,e)};kr.toString=kr.valueOf=kr.val=kr.toJSON=kr[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=xi(t),r=t.constructor;return Zp(t,e<=r.toExpNeg||e>=r.toExpPos)};function Gue(t,e){var r,n,a,s,o,l,c,u,d=t.constructor,h=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),ds?La(e,h):e;if(c=t.d,u=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(h/Za),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Ki|0,c[s]%=Ki;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,ds?La(e,h):e}function Zd(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Sp+t)}function Pd(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=Za-n.length,r&&(s+=Zh(r)),s+=n;o=t[e],n=o+"",r=Za-n.length,r&&(s+=Zh(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Zf=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%Ki|0,o=s/Ki|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*Ki+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,u,d,h,p,g,b,w,_,N,S,T,R,z,G,O,D,I=n.constructor,V=n.s==a.s?1:-1,P=n.d,B=a.d;if(!n.s)return new I(n);if(!a.s)throw Error(Cu+"Division by zero");for(c=n.e-a.e,O=B.length,z=P.length,g=new I(V),b=g.d=[],u=0;B[u]==(P[u]||0);)++u;if(B[u]>(P[u]||0)&&--c,s==null?S=s=I.precision:o?S=s+(xi(n)-xi(a))+1:S=s,S<0)return new I(0);if(S=S/Za+2|0,u=0,O==1)for(d=0,B=B[0],S++;(u<z||d)&&S--;u++)T=d*Ki+(P[u]||0),b[u]=T/B|0,d=T%B|0;else{for(d=Ki/(B[0]+1)|0,d>1&&(B=t(B,d),P=t(P,d),O=B.length,z=P.length),R=O,w=P.slice(0,O),_=w.length;_<O;)w[_++]=0;D=B.slice(),D.unshift(0),G=B[0],B[1]>=Ki/2&&++G;do d=0,l=e(B,w,O,_),l<0?(N=w[0],O!=_&&(N=N*Ki+(w[1]||0)),d=N/G|0,d>1?(d>=Ki&&(d=Ki-1),h=t(B,d),p=h.length,_=w.length,l=e(h,w,p,_),l==1&&(d--,r(h,O<p?D:B,p))):(d==0&&(l=d=1),h=B.slice()),p=h.length,p<_&&h.unshift(0),r(w,h,_),l==-1&&(_=w.length,l=e(B,w,O,_),l<1&&(d++,r(w,O<_?D:B,_))),_=w.length):l===0&&(d++,w=[0]),b[u++]=d,l&&w[0]?w[_++]=P[R]||0:(w=[P[R]],_=1);while((R++<z||w[0]!==void 0)&&S--)}return b[0]||b.shift(),g.e=c,La(g,o?s+xi(g)+1:s)}}();function Wue(t,e){var r,n,a,s,o,l,c=0,u=0,d=t.constructor,h=d.precision;if(xi(t)>16)throw Error(_M+xi(t));if(!t.s)return new d(Ec);for(ds=!1,l=h,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(Vm(2,u))/Math.LN10*2+5|0,l+=n,r=a=s=new d(Ec),d.precision=l;;){if(a=La(a.times(t),l),r=r.times(++c),o=s.plus(Zf(a,r,l)),Pd(o.d).slice(0,l)===Pd(s.d).slice(0,l)){for(;u--;)s=La(s.times(s),l);return d.precision=h,e==null?(ds=!0,La(s,h)):s}s=o}}function xi(t){for(var e=t.e*Za,r=t.d[0];r>=10;r/=10)e++;return e}function uC(t,e,r){if(e>t.LN10.sd())throw ds=!0,r&&(t.precision=r),Error(Cu+"LN10 precision limit exceeded");return La(new t(t.LN10),e)}function Zh(t){for(var e="";t--;)e+="0";return e}function Cy(t,e){var r,n,a,s,o,l,c,u,d,h=1,p=10,g=t,b=g.d,w=g.constructor,_=w.precision;if(g.s<1)throw Error(Cu+(g.s?"NaN":"-Infinity"));if(g.eq(Ec))return new w(0);if(e==null?(ds=!1,u=_):u=e,g.eq(10))return e==null&&(ds=!0),uC(w,u);if(u+=p,w.precision=u,r=Pd(b),n=r.charAt(0),s=xi(g),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=Pd(g.d),n=r.charAt(0),h++;s=xi(g),n>1?(g=new w("0."+r),s++):g=new w(n+"."+r.slice(1))}else return c=uC(w,u+2,_).times(s+""),g=Cy(new w(n+"."+r.slice(1)),u-p).plus(c),w.precision=_,e==null?(ds=!0,La(g,_)):g;for(l=o=g=Zf(g.minus(Ec),g.plus(Ec),u),d=La(g.times(g),u),a=3;;){if(o=La(o.times(d),u),c=l.plus(Zf(o,new w(a),u)),Pd(c.d).slice(0,u)===Pd(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(uC(w,u+2,_).times(s+""))),l=Zf(l,new w(h),u),w.precision=_,e==null?(ds=!0,La(l,_)):l;l=c,a+=2}}function SW(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=wv(r/Za),t.d=[],n=(r+1)%Za,r<0&&(n+=Za),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Za;n<a;)t.d.push(+e.slice(n,n+=Za));e=e.slice(n),n=Za-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),ds&&(t.e>_4||t.e<-_4))throw Error(_M+r)}else t.s=0,t.e=0,t.d=[0];return t}function La(t,e,r){var n,a,s,o,l,c,u,d,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Za,a=e,u=h[d=0];else{if(d=Math.ceil((n+1)/Za),s=h.length,d>=s)return t;for(u=s=h[d],o=1;s>=10;s/=10)o++;n%=Za,a=n-Za+o}if(r!==void 0&&(s=Vm(10,o-a-1),l=u/s%10|0,c=e<0||h[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Vm(10,o-a):0:h[d-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(s=xi(t),h.length=1,e=e-s-1,h[0]=Vm(10,(Za-e%Za)%Za),t.e=wv(-e/Za)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=d,s=1,d--):(h.length=d+1,s=Vm(10,Za-n),h[d]=a>0?(u/Vm(10,o-a)%Vm(10,a)|0)*s:0),c)for(;;)if(d==0){(h[0]+=s)==Ki&&(h[0]=1,++t.e);break}else{if(h[d]+=s,h[d]!=Ki)break;h[d--]=0,s=1}for(n=h.length;h[--n]===0;)h.pop();if(ds&&(t.e>_4||t.e<-_4))throw Error(_M+xi(t));return t}function Kue(t,e){var r,n,a,s,o,l,c,u,d,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new p(t),ds?La(e,g):e;if(c=t.d,h=e.d,n=e.e,u=t.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),a=Math.max(Math.ceil(g/Za),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(s=a;s&&c[--s]===0;)c[s]=Ki-1;--c[s],c[a]+=Ki}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,ds?La(e,g):e):new p(0)}function Zp(t,e,r){var n,a=xi(t),s=Pd(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+Zh(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Zh(-a-1)+s,r&&(n=r-o)>0&&(s+=Zh(n))):a>=o?(s+=Zh(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+Zh(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=Zh(n))),t.s<0?"-"+s:s}function jW(t,e){if(t.length>e)return t.length=e,!0}function Xue(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Sp+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return SW(o,s.toString())}else if(typeof s!="string")throw Error(Sp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,CJe.test(s))SW(o,s);else throw Error(Sp+s)}if(a.prototype=kr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Xue,a.config=a.set=kJe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function kJe(t){if(!t||typeof t!="object")throw Error(Cu+"Object expected");var e,r,n,a=["precision",1,yv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(wv(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Sp+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Sp+r+": "+n);return this}var NM=Xue(TJe);Ec=new NM(1);const ya=NM;var IJe=t=>t,Yue={},Zue=t=>t===Yue,TW=t=>function e(){return arguments.length===0||arguments.length===1&&Zue(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},Que=(t,e)=>t===1?e:TW(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(o=>o!==Yue).length;return s>=t?e(...n):Que(t-s,TW(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>Zue(d)?l.shift():d);return e(...u,...l)}))}),OJe=t=>Que(t.length,t),$I=(t,e)=>{for(var r=[],n=t;n<e;++n)r[n-t]=n;return r},RJe=OJe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(r=>e[r]).map(t)),PJe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return IJe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),s(...arguments))}},HI=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function Jue(t){var e;return t===0?e=1:e=Math.floor(new ya(t).abs().log(10).toNumber())+1,e}function ede(t,e,r){for(var n=new ya(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var tde=t=>{var[e,r]=t,[n,a]=[e,r];return e>r&&([n,a]=[r,e]),[n,a]},rde=(t,e,r)=>{if(t.lte(0))return new ya(0);var n=Jue(t.toNumber()),a=new ya(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new ya(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?new ya(c.toNumber()):new ya(Math.ceil(c.toNumber()))},DJe=(t,e,r)=>{var n=new ya(1),a=new ya(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new ya(10).pow(Jue(t)-1),a=new ya(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ya(Math.floor(t)))}else t===0?a=new ya(Math.floor((e-1)/2)):r||(a=new ya(Math.floor(t)));var o=Math.floor((e-1)/2),l=PJe(RJe(c=>a.add(new ya(c-o).mul(n)).toNumber()),$I);return l(0,e)},nde=function(e,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-e)/(n-1)))return{step:new ya(0),tickMin:new ya(0),tickMax:new ya(0)};var o=rde(new ya(r).sub(e).div(n-1),a,s),l;e<=0&&r>=0?l=new ya(0):(l=new ya(e).add(r).div(2),l=l.sub(new ya(l).mod(o)));var c=Math.ceil(l.sub(e).div(o).toNumber()),u=Math.ceil(new ya(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?nde(e,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new ya(c).mul(o)),tickMax:l.add(new ya(u).mul(o))})},MJe=function(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=tde([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...$I(0,a-1).map(()=>1/0)]:[...$I(0,a-1).map(()=>-1/0),c];return r>n?HI(u):u}if(l===c)return DJe(l,a,s);var{step:d,tickMin:h,tickMax:p}=nde(l,c,o,s,0),g=ede(h,p.add(new ya(.1).mul(d)),d);return r>n?HI(g):g},LJe=function(e,r){var[n,a]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=tde([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=rde(new ya(l).sub(o).div(c-1),s,0),d=[...ede(new ya(o),new ya(l),u),l];return s===!1&&(d=d.map(h=>Math.round(h))),n>a?HI(d):d},ade=t=>t.rootProps.maxBarSize,FJe=t=>t.rootProps.barGap,sde=t=>t.rootProps.barCategoryGap,BJe=t=>t.rootProps.barSize,Xw=t=>t.rootProps.stackOffset,ide=t=>t.rootProps.reverseStackOrder,EM=t=>t.options.chartName,AM=t=>t.rootProps.syncId,ode=t=>t.rootProps.syncMethod,SM=t=>t.options.eventEmitter,pi={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Cf={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},vc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},WS=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},UJe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Cf.angleAxisId,includeHidden:!1,name:void 0,reversed:Cf.reversed,scale:Cf.scale,tick:Cf.tick,tickCount:void 0,ticks:void 0,type:Cf.type,unit:void 0},zJe={allowDataOverflow:vc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vc.scale,tick:vc.tick,tickCount:vc.tickCount,ticks:void 0,type:vc.type,unit:void 0},VJe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Cf.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cf.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cf.scale,tick:Cf.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},$Je={allowDataOverflow:vc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vc.scale,tick:vc.tick,tickCount:vc.tickCount,ticks:void 0,type:"category",unit:void 0},jM=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?VJe:UJe,TM=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?$Je:zJe,KS=t=>t.polarOptions,CM=bt([Sh,jh,Pi],rue),lde=bt([KS,CM],(t,e)=>{if(t!=null)return Go(t.innerRadius,e,0)}),cde=bt([KS,CM],(t,e)=>{if(t!=null)return Go(t.outerRadius,e,e*.8)}),HJe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:r}=t;return[e,r]},ude=bt([KS],HJe);bt([jM,ude],WS);var dde=bt([CM,lde,cde],(t,e,r)=>{if(!(t==null||e==null||r==null))return[e,r]});bt([TM,dde],WS);var fde=bt([Kn,KS,lde,cde,Sh,jh],(t,e,r,n,a,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=e;return{cx:Go(o,a,a/2),cy:Go(l,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ps=(t,e)=>e,Yw=(t,e,r)=>r;function kM(t){return t==null?void 0:t.id}function hde(t,e,r){var{chartData:n=[]}=e,{allowDuplicatedCategory:a,dataKey:s}=r,o=new Map;return t.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=kM(l);u.forEach((h,p)=>{var g=s==null||a?p:String(Ma(h,s,null)),b=Ma(h,l.dataKey,0),w;o.has(g)?w=o.get(g):w={},Object.assign(w,{[d]:b}),o.set(g,w)})}}),Array.from(o.values())}function XS(t){return t.stackId!=null&&t.dataKey!=null}var YS=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function ZS(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function qJe(t,e){if(t.length===e.length){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return!1}var Mi=t=>{var e=Kn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},_v=t=>t.tooltip.settings.axisId;function CW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function N4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CW(Object(r),!0).forEach(function(n){GJe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GJe(t,e,r){return(e=WJe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function WJe(t){var e=KJe(t,"string");return typeof e=="symbol"?e:e+""}function KJe(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qI=[0,"auto"],qi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},mde=(t,e)=>t.cartesianAxis.xAxis[e],Ch=(t,e)=>{var r=mde(t,e);return r??qi},Gi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qI,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Bw},pde=(t,e)=>t.cartesianAxis.yAxis[e],kh=(t,e)=>{var r=pde(t,e);return r??Gi},XJe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},IM=(t,e)=>{var r=t.cartesianAxis.zAxis[e];return r??XJe},Es=(t,e,r)=>{switch(e){case"xAxis":return Ch(t,r);case"yAxis":return kh(t,r);case"zAxis":return IM(t,r);case"angleAxis":return jM(t,r);case"radiusAxis":return TM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},YJe=(t,e,r)=>{switch(e){case"xAxis":return Ch(t,r);case"yAxis":return kh(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},Zw=(t,e,r)=>{switch(e){case"xAxis":return Ch(t,r);case"yAxis":return kh(t,r);case"angleAxis":return jM(t,r);case"radiusAxis":return TM(t,r);default:throw new Error("Unexpected axis type: ".concat(e))}},gde=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function OM(t,e){return r=>{switch(t){case"xAxis":return"xAxisId"in r&&r.xAxisId===e;case"yAxis":return"yAxisId"in r&&r.yAxisId===e;case"zAxis":return"zAxisId"in r&&r.zAxisId===e;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===e;default:return!1}}}var QS=t=>t.graphicalItems.cartesianItems,ZJe=bt([ps,Yw],OM),RM=(t,e,r)=>t.filter(r).filter(n=>(e==null?void 0:e.includeHidden)===!0?!0:!n.hide),Qw=bt([QS,Es,ZJe],RM,{memoizeOptions:{resultEqualityCheck:ZS}}),xde=bt([Qw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(XS)),vde=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),QJe=bt([Qw],vde),PM=t=>t.map(e=>e.data).filter(Boolean).flat(1),JJe=bt([Qw],PM,{memoizeOptions:{resultEqualityCheck:ZS}}),DM=(t,e)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=e;return t.length>0?t:r.slice(n,a+1)},MM=bt([JJe,GS],DM),LM=(t,e,r)=>(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Ma(n,e.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>t.map(a=>({value:Ma(a,n)}))):t.map(n=>({value:n})),JS=bt([MM,Es,Qw],LM);function bde(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function nE(t){if(Xd(t)||t instanceof Date){var e=Number(t);if(Js(e))return e}}function kW(t){if(Array.isArray(t)){var e=[nE(t[0]),nE(t[1])];return em(e)?e:void 0}var r=nE(t);if(r!=null)return[r,r]}function bh(t){return t.map(nE).filter(fGe)}function eet(t,e,r){return!r||typeof e!="number"||cd(e)?[]:r.length?bh(r.flatMap(n=>{var a=Ma(t,n.dataKey),s,o;if(Array.isArray(a)?[s,o]=a:s=o=a,!(!Js(s)||!Js(o)))return[e-s,e+o]})):[]}var Li=t=>{var e=Mi(t),r=_v(t);return Zw(t,e,r)},Jw=bt([Li],t=>t==null?void 0:t.dataKey),tet=bt([xde,GS,Li],hde),yde=(t,e,r,n)=>{var a={},s=e.reduce((o,l)=>(l.stackId==null||(o[l.stackId]==null&&(o[l.stackId]=[]),o[l.stackId].push(l)),o),a);return Object.fromEntries(Object.entries(s).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(kM);return[l,{stackedData:CKe(t,d,r),graphicalItems:u}]}))},GI=bt([tet,xde,Xw,ide],yde),wde=(t,e,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=e;if(n==null&&r!=="zAxis"){var o=PKe(t,a,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},ret=bt([Es],t=>t.allowDataOverflow),FM=t=>{var e;if(t==null||!("domain"in t))return qI;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var r=bh(t.ticks);return[Math.min(...r),Math.max(...r)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:qI},BM=bt([Es],FM),UM=bt([BM,ret],Hue),net=bt([GI,wm,ps,UM],wde,{memoizeOptions:{resultEqualityCheck:YS}}),e6=t=>t.errorBars,aet=(t,e,r)=>t.flatMap(n=>e[n.id]).filter(Boolean).filter(n=>bde(r,n)),E4=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),o=Math.min(...s),l=Math.max(...s);return[o,l]}},zM=(t,e,r,n,a)=>{var s,o;if(r.length>0&&t.forEach(l=>{r.forEach(c=>{var u,d,h=(u=n[c.id])===null||u===void 0?void 0:u.filter(N=>bde(a,N)),p=Ma(l,(d=e.dataKey)!==null&&d!==void 0?d:c.dataKey),g=eet(l,p,h);if(g.length>=2){var b=Math.min(...g),w=Math.max(...g);(s==null||b<s)&&(s=b),(o==null||w>o)&&(o=w)}var _=kW(p);_!=null&&(s=s==null?_[0]:Math.min(s,_[0]),o=o==null?_[1]:Math.max(o,_[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=kW(Ma(l,e.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),Js(s)&&Js(o))return[s,o]},set=bt([MM,Es,QJe,e6,ps],zM,{memoizeOptions:{resultEqualityCheck:YS}});function iet(t){var{value:e}=t;if(Xd(e)||e instanceof Date)return e}var oet=(t,e,r)=>{var n=t.map(iet).filter(a=>a!=null);return r&&(e.dataKey==null||e.allowDuplicatedCategory&&xle(n))?cue(0,t.length):e.allowDuplicatedCategory?n:Array.from(new Set(n))},_de=t=>t.referenceElements.dots,Nv=(t,e,r)=>t.filter(n=>n.ifOverflow==="extendDomain").filter(n=>e==="xAxis"?n.xAxisId===r:n.yAxisId===r),cet=bt([_de,ps,Yw],Nv),Nde=t=>t.referenceElements.areas,uet=bt([Nde,ps,Yw],Nv),Ede=t=>t.referenceElements.lines,det=bt([Ede,ps,Yw],Nv),Ade=(t,e)=>{var r=bh(t.map(n=>e==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},fet=bt(cet,ps,Ade),Sde=(t,e)=>{var r=bh(t.flatMap(n=>[e==="xAxis"?n.x1:n.y1,e==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},het=bt([uet,ps],Sde);function met(t){var e;if(t.x!=null)return bh([t.x]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.x);return r==null||r.length===0?[]:bh(r)}function pet(t){var e;if(t.y!=null)return bh([t.y]);var r=(e=t.segment)===null||e===void 0?void 0:e.map(n=>n.y);return r==null||r.length===0?[]:bh(r)}var jde=(t,e)=>{var r=t.flatMap(n=>e==="xAxis"?met(n):pet(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},get=bt([det,ps],jde),xet=bt(fet,get,het,(t,e,r)=>E4(t,r,e)),VM=(t,e,r,n,a,s,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?E4(n,s,a):E4(s,a);return jJe(e,u,t.allowDataOverflow)},vet=bt([Es,BM,UM,net,set,xet,Kn,ps],VM,{memoizeOptions:{resultEqualityCheck:YS}}),bet=[0,1],$M=(t,e,r,n,a,s,o)=>{if(!((t==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=t,u=vm(e,s);if(u&&l==null){var d;return cue(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?oet(n,t,u):a==="expand"?bet:o}},HM=bt([Es,Kn,MM,JS,Xw,ps,vet],$M),Tde=(t,e,r,n,a)=>{if(t!=null){var{scale:s,type:o}=t;if(s==="auto")return e==="radial"&&a==="radiusAxis"?"band":e==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(Rw(s));return l in T2?l:"point"}}},Ev=bt([Es,Kn,gde,EM,ps],Tde);function yet(t){if(t!=null){if(t in T2)return T2[t]();var e="scale".concat(Rw(t));if(e in T2)return T2[e]()}}function qM(t,e,r,n){if(!(r==null||n==null)){if(typeof t.scale=="function")return t.scale.copy().domain(r).range(n);var a=yet(e);if(a!=null){var s=a.domain(r).range(n);return EKe(s),s}}}var GM=(t,e,r)=>{var n=FM(e);if(!(r!=="auto"&&r!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&em(t))return MJe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&em(t))return LJe(t,e.tickCount,e.allowDecimals)}},WM=bt([HM,Zw,Ev],GM),KM=(t,e,r,n)=>{if(n!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&em(e)&&Array.isArray(r)&&r.length>0){var a=e[0],s=r[0],o=e[1],l=r[r.length-1];return[Math.min(a,s),Math.max(o,l)]}return e},wet=bt([Es,HM,WM,ps],KM),_et=bt(JS,Es,(t,e)=>{if(!(!e||e.type!=="number")){var r=1/0,n=Array.from(bh(t.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var o=n[s+1]-n[s];r=Math.min(r,o)}return r/a}}),Cde=bt(_et,Kn,sde,Pi,(t,e,r,n)=>n,(t,e,r,n,a)=>{if(!Js(t))return 0;var s=e==="vertical"?n.height:n.width;if(a==="gap")return t*s/2;if(a==="no-gap"){var o=Go(r,t*s),l=t*s/2;return l-o-(l-o)/s*o}return 0}),Net=(t,e)=>{var r=Ch(t,e);return r==null||typeof r.padding!="string"?0:Cde(t,"xAxis",e,r.padding)},Eet=(t,e)=>{var r=kh(t,e);return r==null||typeof r.padding!="string"?0:Cde(t,"yAxis",e,r.padding)},Aet=bt(Ch,Net,(t,e)=>{var r,n;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:e,right:e}:{left:((r=a.left)!==null&&r!==void 0?r:0)+e,right:((n=a.right)!==null&&n!==void 0?n:0)+e}}),jet=bt(kh,Eet,(t,e)=>{var r,n;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:e,bottom:e}:{top:((r=a.top)!==null&&r!==void 0?r:0)+e,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+e}}),Tet=bt([Pi,Aet,PS,RS,(t,e,r)=>r],(t,e,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),Cet=bt([Pi,Kn,jet,PS,RS,(t,e,r)=>r],(t,e,r,n,a,s)=>{var{padding:o}=a;return s?[n.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-r.bottom,t.top+r.top]:[t.top+r.top,t.top+t.height-r.bottom]}),e5=(t,e,r,n)=>{var a;switch(e){case"xAxis":return Tet(t,r,n);case"yAxis":return Cet(t,r,n);case"zAxis":return(a=IM(t,r))===null||a===void 0?void 0:a.range;case"angleAxis":return ude(t);case"radiusAxis":return dde(t,r);default:return}},kde=bt([Es,e5],WS),Av=bt([Es,Ev,wet,kde],qM);bt([Qw,e6,ps],aet);function Ide(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var t6=(t,e)=>e,r6=(t,e,r)=>r,ket=bt(IS,t6,r6,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Ide)),Iet=bt(OS,t6,r6,(t,e,r)=>t.filter(n=>n.orientation===e).filter(n=>n.mirror===r).sort(Ide)),Ode=(t,e)=>({width:t.width,height:e.height}),Oet=(t,e)=>{var r=typeof e.width=="number"?e.width:Bw;return{width:r,height:t.height}},Rde=bt(Pi,Ch,Ode),Ret=(t,e,r)=>{switch(e){case"top":return t.top;case"bottom":return r-t.bottom;default:return 0}},Pet=(t,e,r)=>{switch(e){case"left":return t.left;case"right":return r-t.right;default:return 0}},Det=bt(jh,Pi,ket,t6,r6,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Ode(e,l);o==null&&(o=Ret(e,n,t));var u=n==="top"&&!a||n==="bottom"&&a;s[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),s}),Met=bt(Sh,Pi,Iet,t6,r6,(t,e,r,n,a)=>{var s={},o;return r.forEach(l=>{var c=Oet(e,l);o==null&&(o=Pet(e,n,t));var u=n==="left"&&!a||n==="right"&&a;s[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),s}),Let=(t,e)=>{var r=Ch(t,e);if(r!=null)return Det(t,r.orientation,r.mirror)},Fet=bt([Pi,Ch,Let,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:t.left,y:0}:{x:t.left,y:a}}}),Bet=(t,e)=>{var r=kh(t,e);if(r!=null)return Met(t,r.orientation,r.mirror)},Uet=bt([Pi,kh,Bet,(t,e)=>e],(t,e,r,n)=>{if(e!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:t.top}:{x:a,y:t.top}}}),Pde=bt(Pi,kh,(t,e)=>{var r=typeof e.width=="number"?e.width:Bw;return{width:r,height:t.height}}),IW=(t,e,r)=>{switch(e){case"xAxis":return Rde(t,r).width;case"yAxis":return Pde(t,r).height;default:return}},Dde=(t,e,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:o}=r,l=vm(t,n),c=e.map(u=>u.value);if(o&&l&&s==="category"&&a&&xle(c))return c}},XM=bt([Kn,JS,Es,ps],Dde),Mde=(t,e,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,o=vm(t,n);if(o&&(a==="number"||s!=="auto"))return e.map(l=>l.value)}},YM=bt([Kn,JS,Zw,ps],Mde),OW=bt([Kn,YJe,Ev,Av,XM,YM,e5,WM,ps],(t,e,r,n,a,s,o,l,c)=>{if(e!=null){var u=vm(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}}),zet=(t,e,r,n,a,s,o,l,c)=>{if(!(e==null||n==null)){var u=vm(t,c),{type:d,ticks:h,tickCount:p}=e,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=d==="category"&&n.bandwidth?n.bandwidth()/g:0;b=c==="angleAxis"&&s!=null&&s.length>=2?to(s[0]-s[1])*2*b:b;var w=h||a;if(w){var _=w.map((N,S)=>{var T=o?o.indexOf(N):N;return{index:S,coordinate:n(T)+b,value:N,offset:b}});return _.filter(N=>Js(N.coordinate))}return u&&l?l.map((N,S)=>({coordinate:n(N)+b,value:N,index:S,offset:b})).filter(N=>Js(N.coordinate)):n.ticks?n.ticks(p).map(N=>({coordinate:n(N)+b,value:N,offset:b})):n.domain().map((N,S)=>({coordinate:n(N)+b,value:o?o[N]:N,index:S,offset:b}))}},Lde=bt([Kn,Zw,Ev,Av,WM,e5,XM,YM,ps],zet),Vet=(t,e,r,n,a,s,o)=>{if(!(e==null||r==null||n==null||n[0]===n[1])){var l=vm(t,o),{tickCount:c}=e,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?to(n[0]-n[1])*2*u:u,l&&s?s.map((d,h)=>({coordinate:r(d)+u,value:d,index:h,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,h)=>({coordinate:r(d)+u,value:a?a[d]:d,index:h,offset:u}))}},tm=bt([Kn,Zw,Av,e5,XM,YM,ps],Vet),rm=bt(Es,Av,(t,e)=>{if(!(t==null||e==null))return N4(N4({},t),{},{scale:e})}),$et=bt([Es,Ev,HM,kde],qM);bt((t,e,r)=>IM(t,r),$et,(t,e)=>{if(!(t==null||e==null))return N4(N4({},t),{},{scale:e})});var Het=bt([Kn,IS,OS],(t,e,r)=>{switch(t){case"horizontal":return e.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Fde=t=>t.options.defaultTooltipEventType,Bde=t=>t.options.validateTooltipEventTypes;function Ude(t,e,r){if(t==null)return e;var n=t?"axis":"item";return r==null?e:r.includes(n)?n:e}function ZM(t,e){var r=Fde(t),n=Bde(t);return Ude(e,r,n)}function qet(t){return Cr(e=>ZM(e,t))}var zde=(t,e)=>{var r,n=Number(e);if(!(cd(n)||e==null))return n>=0?t==null||(r=t[n])===null||r===void 0?void 0:r.value:void 0},Get=t=>t.tooltip.settings,s0={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Wet={itemInteraction:{click:s0,hover:s0},axisInteraction:{click:s0,hover:s0},keyboardInteraction:s0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Vde=Jl({name:"tooltip",initialState:Wet,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:os()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:r,next:n}=e.payload,a=sd(t).tooltipItemPayloads.indexOf(r);a>-1&&(t.tooltipItemPayloads[a]=n)},prepare:os()},removeTooltipEntrySettings:{reducer(t,e){var r=sd(t).tooltipItemPayloads.indexOf(e.payload);r>-1&&t.tooltipItemPayloads.splice(r,1)},prepare:os()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Ket,replaceTooltipEntrySettings:Xet,removeTooltipEntrySettings:Yet,setTooltipSettingsState:Zet,setActiveMouseOverItemIndex:$de,mouseLeaveItem:Qet,mouseLeaveChart:Hde,setActiveClickItemIndex:Jet,setMouseOverAxisIndex:qde,setMouseClickAxisIndex:ett,setSyncInteraction:WI,setKeyboardInteraction:KI}=Vde.actions,ttt=Vde.reducer;function RW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Y_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RW(Object(r),!0).forEach(function(n){rtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rtt(t,e,r){return(e=ntt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ntt(t){var e=att(t,"string");return typeof e=="symbol"?e:e+""}function att(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function stt(t,e,r){return e==="axis"?r==="click"?t.axisInteraction.click:t.axisInteraction.hover:r==="click"?t.itemInteraction.click:t.itemInteraction.hover}function itt(t){return t.index!=null}var Gde=(t,e,r,n)=>{if(e==null)return s0;var a=stt(t,e,r);if(a==null)return s0;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(itt(a)){if(s)return Y_(Y_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Y_(Y_({},s0),{},{coordinate:a.coordinate})};function ott(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var r=Number(t);return Number.isFinite(r)?r:void 0}function ltt(t,e){var r=ott(t),n=e[0],a=e[1];if(r===void 0)return!1;var s=Math.min(n,a),o=Math.max(n,a);return r>=s&&r<=o}function ctt(t,e,r){if(r==null||e==null)return!0;var n=Ma(t,e);return n==null||!em(r)?!0:ltt(n,r)}var QM=(t,e,r,n)=>{var a=t==null?void 0:t.index;if(a==null)return null;var s=Number(a);if(!Js(s))return a;var o=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(o,Math.min(s,l)),u=e[c];return u==null||ctt(u,r,n)?String(c):null},Wde=(t,e,r,n,a,s,o,l)=>{if(!(s==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+e)/2};default:return{x:(n.left+t)/2,y:d.coordinate}}}},Kde=(t,e,r,n)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=t.itemInteraction.hover.dataKey:a=t.itemInteraction.click.dataKey,a==null&&n!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.dataKey)===a})},t5=t=>t.options.tooltipPayloadSearcher,Sv=t=>t.tooltip;function PW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function DW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PW(Object(r),!0).forEach(function(n){utt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function utt(t,e,r){return(e=dtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dtt(t){var e=ftt(t,"string");return typeof e=="symbol"?e:e+""}function ftt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function htt(t,e){return t??e}var Xde=(t,e,r,n,a,s,o)=>{if(!(e==null||s==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,h=[];return t.reduce((p,g)=>{var b,{dataDefinedOnItem:w,settings:_}=g,N=htt(w,l),S=Array.isArray(N)?Sce(N,u,d):N,T=(b=_==null?void 0:_.dataKey)!==null&&b!==void 0?b:n,R=_==null?void 0:_.nameKey,z;if(n&&Array.isArray(S)&&!Array.isArray(S[0])&&o==="axis"?z=vle(S,n,a):z=s(S,e,c,R),Array.isArray(z))z.forEach(O=>{var D=DW(DW({},_),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});p.push(cG({tooltipEntrySettings:D,dataKey:O.dataKey,payload:O.payload,value:Ma(O.payload,O.dataKey),name:O.name}))});else{var G;p.push(cG({tooltipEntrySettings:_,dataKey:T,payload:z,value:Ma(z,T),name:(G=Ma(z,R))!==null&&G!==void 0?G:_==null?void 0:_.name}))}return p},h)}},JM=bt([Li,Kn,gde,EM,Mi],Tde),mtt=bt([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),ptt=bt([Mi,_v],OM),r5=bt([mtt,Li,ptt],RM,{memoizeOptions:{resultEqualityCheck:ZS}}),gtt=bt([r5],t=>t.filter(XS)),xtt=bt([r5],PM,{memoizeOptions:{resultEqualityCheck:ZS}}),jv=bt([xtt,wm],DM),vtt=bt([gtt,wm,Li],hde),eL=bt([jv,Li,r5],LM),Yde=bt([Li],FM),btt=bt([Li],t=>t.allowDataOverflow),Zde=bt([Yde,btt],Hue),ytt=bt([r5],t=>t.filter(XS)),wtt=bt([vtt,ytt,Xw,ide],yde),_tt=bt([wtt,wm,Mi,Zde],wde),Ntt=bt([r5],vde),Ett=bt([jv,Li,Ntt,e6,Mi],zM,{memoizeOptions:{resultEqualityCheck:YS}}),Att=bt([_de,Mi,_v],Nv),Stt=bt([Att,Mi],Ade),jtt=bt([Nde,Mi,_v],Nv),Ttt=bt([jtt,Mi],Sde),Ctt=bt([Ede,Mi,_v],Nv),ktt=bt([Ctt,Mi],jde),Itt=bt([Stt,ktt,Ttt],E4),Ott=bt([Li,Yde,Zde,_tt,Ett,Itt,Kn,Mi],VM),n5=bt([Li,Kn,jv,eL,Xw,Mi,Ott],$M),Rtt=bt([n5,Li,JM],GM),Ptt=bt([Li,n5,Rtt,Mi],KM),Qde=t=>{var e=Mi(t),r=_v(t),n=!1;return e5(t,e,r,n)},Jde=bt([Li,Qde],WS),efe=bt([Li,JM,Ptt,Jde],qM),Dtt=bt([Kn,eL,Li,Mi],Dde),Mtt=bt([Kn,eL,Li,Mi],Mde),Ltt=(t,e,r,n,a,s,o,l)=>{if(e){var{type:c}=e,u=vm(t,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return h=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?to(a[0]-a[1])*2*h:h,u&&o?o.map((p,g)=>({coordinate:n(p)+h,value:p,index:g,offset:h})):n.domain().map((p,g)=>({coordinate:n(p)+h,value:s?s[p]:p,index:g,offset:h}))}}},Ih=bt([Kn,Li,JM,efe,Qde,Dtt,Mtt,Mi],Ltt),tL=bt([Fde,Bde,Get],(t,e,r)=>Ude(r.shared,t,e)),tfe=t=>t.tooltip.settings.trigger,rL=t=>t.tooltip.settings.defaultIndex,a5=bt([Sv,tL,tfe,rL],Gde),nm=bt([a5,jv,Jw,n5],QM),rfe=bt([Ih,nm],zde),nL=bt([a5],t=>{if(t)return t.dataKey}),Ftt=bt([a5],t=>{if(t)return t.graphicalItemId}),nfe=bt([Sv,tL,tfe,rL],Kde),Btt=bt([Sh,jh,Kn,Pi,Ih,rL,nfe,t5],Wde),Utt=bt([a5,Btt],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),ztt=bt([a5],t=>t.active),Vtt=bt([nfe,nm,wm,Jw,rfe,t5,tL],Xde),$tt=bt([Vtt],t=>{if(t!=null){var e=t.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(e))}});function MW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function LW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MW(Object(r),!0).forEach(function(n){Htt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Htt(t,e,r){return(e=qtt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qtt(t){var e=Gtt(t,"string");return typeof e=="symbol"?e:e+""}function Gtt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wtt=()=>Cr(Li),Ktt=()=>{var t=Wtt(),e=Cr(Ih),r=Cr(efe);return Fx(!t||!r?void 0:LW(LW({},t),{},{scale:r}),e)};function FW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function zg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FW(Object(r),!0).forEach(function(n){Xtt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xtt(t,e,r){return(e=Ytt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ytt(t){var e=Ztt(t,"string");return typeof e=="symbol"?e:e+""}function Ztt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qtt=(t,e,r,n)=>{var a=e.find(s=>s&&s.index===r);if(a){if(t==="horizontal")return{x:a.coordinate,y:n.chartY};if(t==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},Jtt=(t,e,r,n)=>{var a=e.find(u=>u&&u.index===r);if(a){if(t==="centric"){var s=a.coordinate,{radius:o}=n;return zg(zg(zg({},n),mi(n.cx,n.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,{angle:c}=n;return zg(zg(zg({},n),mi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function ert(t,e){var{chartX:r,chartY:n}=t;return r>=e.left&&r<=e.left+e.width&&n>=e.top&&n<=e.top+e.height}var afe=(t,e,r,n,a)=>{var s,o=-1,l=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(l<=1||t==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?r[c-1].coordinate:r[l-1].coordinate,d=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,p=void 0;if(to(d-u)!==to(h-d)){var g=[];if(to(h-d)===to(a[1]-a[0])){p=h;var b=d+a[1]-a[0];g[0]=Math.min(b,(b+u)/2),g[1]=Math.max(b,(b+u)/2)}else{p=u;var w=h+a[1]-a[0];g[0]=Math.min(d,(w+d)/2),g[1]=Math.max(d,(w+d)/2)}var _=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>_[0]&&t<=_[1]||t>=g[0]&&t<=g[1]){({index:o}=r[c]);break}}else{var N=Math.min(u,h),S=Math.max(u,h);if(t>(N+d)/2&&t<=(S+d)/2){({index:o}=r[c]);break}}}else if(e){for(var T=0;T<l;T++)if(T===0&&t<=(e[T].coordinate+e[T+1].coordinate)/2||T>0&&T<l-1&&t>(e[T].coordinate+e[T-1].coordinate)/2&&t<=(e[T].coordinate+e[T+1].coordinate)/2||T===l-1&&t>(e[T].coordinate+e[T-1].coordinate)/2){({index:o}=e[T]);break}}return o},trt=()=>Cr(EM),aL=(t,e)=>e,sfe=(t,e,r)=>r,sL=(t,e,r,n)=>n,rrt=bt(Ih,t=>_S(t,e=>e.coordinate)),iL=bt([Sv,aL,sfe,sL],Gde),oL=bt([iL,jv,Jw,n5],QM),nrt=(t,e,r)=>{if(e!=null){var n=Sv(t);return e==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},ife=bt([Sv,aL,sfe,sL],Kde),A4=bt([Sh,jh,Kn,Pi,Ih,sL,ife,t5],Wde),art=bt([iL,A4],(t,e)=>{var r;return(r=t.coordinate)!==null&&r!==void 0?r:e}),ofe=bt([Ih,oL],zde),srt=bt([ife,oL,wm,Jw,ofe,t5,aL],Xde),irt=bt([iL,oL],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),ort=(t,e,r,n,a,s,o)=>{if(!(!t||!r||!n||!a)&&ert(t,o)){var l=DKe(t,e),c=afe(l,s,a,r,n),u=Qtt(e,a,c,t);return{activeIndex:String(c),activeCoordinate:u}}},lrt=(t,e,r,n,a,s,o)=>{if(!(!t||!n||!a||!s||!r)){var l=WYe(t,r);if(l){var c=MKe(l,e),u=afe(c,o,s,n,a),d=Jtt(e,s,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},crt=(t,e,r,n,a,s,o,l)=>{if(!(!t||!e||!n||!a||!s))return e==="horizontal"||e==="vertical"?ort(t,e,n,a,s,o,l):lrt(t,e,r,n,a,s,o)},urt=bt(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,r)=>r,(t,e,r)=>{if(e!=null){var n=t[e];if(n!=null)return r?n.panoramaElementId:n.elementId}}),drt=bt(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(n=>parseInt(n,10)).concat(Object.values(pi)),r=Array.from(new Set(e));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:qJe}});function BW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function UW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BW(Object(r),!0).forEach(function(n){frt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function frt(t,e,r){return(e=hrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hrt(t){var e=mrt(t,"string");return typeof e=="symbol"?e:e+""}function mrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var prt={},grt={zIndexMap:Object.values(pi).reduce((t,e)=>UW(UW({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),prt)},xrt=new Set(Object.values(pi));function vrt(t){return xrt.has(t)}var lfe=Jl({name:"zIndex",initialState:grt,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]?t.zIndexMap[r].consumers+=1:t.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:os()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(t.zIndexMap[r].consumers-=1,t.zIndexMap[r].consumers<=0&&!vrt(r)&&delete t.zIndexMap[r])},prepare:os()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r,elementId:n,isPanorama:a}=e.payload;t.zIndexMap[r]?a?t.zIndexMap[r].panoramaElementId=n:t.zIndexMap[r].elementId=n:t.zIndexMap[r]={consumers:0,elementId:a?void 0:n,panoramaElementId:a?n:void 0}},prepare:os()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:r}=e.payload;t.zIndexMap[r]&&(e.payload.isPanorama?t.zIndexMap[r].panoramaElementId=void 0:t.zIndexMap[r].elementId=void 0)},prepare:os()}}}),{registerZIndexPortal:brt,unregisterZIndexPortal:yrt,registerZIndexPortalId:wrt,unregisterZIndexPortalId:_rt}=lfe.actions,Nrt=lfe.reducer;function ec(t){var{zIndex:e,children:r}=t,n=cXe(),a=n&&e!==void 0&&e!==0,s=Ko(),o=Ga();A.useLayoutEffect(()=>a?(o(brt({zIndex:e})),()=>{o(yrt({zIndex:e}))}):Pw,[o,e,a]);var l=Cr(u=>urt(u,e,s));if(!a)return r;if(!l)return null;var c=document.getElementById(l);return c?Oy.createPortal(r,c):null}function XI(){return XI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XI.apply(null,arguments)}function zW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Z_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zW(Object(r),!0).forEach(function(n){Ert(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ert(t,e,r){return(e=Art(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Art(t){var e=Srt(t,"string");return typeof e=="symbol"?e:e+""}function Srt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jrt(t){var{cursor:e,cursorComp:r,cursorProps:n}=t;return A.isValidElement(e)?A.cloneElement(e,n):A.createElement(r,n)}function Trt(t){var e,{coordinate:r,payload:n,index:a,offset:s,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=t,h=r,p=n,g=a;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var b,w,_;if(d==="ScatterChart")b=h,w=lYe,_=pi.cursorLine;else if(d==="BarChart")b=cYe(l,h,s,o),w=tue,_=pi.cursorRectangle;else if(l==="radial"&&yle(h)){var{cx:N,cy:S,radius:T,startAngle:R,endAngle:z}=nue(h);b={cx:N,cy:S,startAngle:R,endAngle:z,innerRadius:T,outerRadius:T},w=sue,_=pi.cursorLine}else b={points:ZYe(l,h,s)},w=ZD,_=pi.cursorLine;var G=typeof c=="object"&&"className"in c?c.className:void 0,O=Z_(Z_(Z_(Z_({stroke:"#ccc",pointerEvents:"none"},s),b),Wp(c)),{},{payload:p,payloadIndex:g,className:ta("recharts-tooltip-cursor",G)});return A.createElement(ec,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:_},A.createElement(jrt,{cursor:c,cursorComp:w,cursorProps:O}))}function Crt(t){var e=Ktt(),r=Bce(),n=Uw(),a=trt();return e==null||r==null||n==null||a==null?null:A.createElement(Trt,XI({},t,{offset:r,layout:n,tooltipAxisBandSize:e,chartName:a}))}var cfe=A.createContext(null),krt=()=>A.useContext(cfe),ufe={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||c,p),b=r?r+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],g]:c._events[b].push(g):(c._events[b]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)e.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,b=new Array(g);p<g;p++)b[p]=h[p].fn;return b},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,p,g,b){var w=r?r+u:u;if(!this._events[w])return!1;var _=this._events[w],N=arguments.length,S,T;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),N){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,p),!0;case 5:return _.fn.call(_.context,d,h,p,g),!0;case 6:return _.fn.call(_.context,d,h,p,g,b),!0}for(T=1,S=new Array(N-1);T<N;T++)S[T-1]=arguments[T];_.fn.apply(_.context,S)}else{var R=_.length,z;for(T=0;T<R;T++)switch(_[T].once&&this.removeListener(u,_[T].fn,void 0,!0),N){case 1:_[T].fn.call(_[T].context);break;case 2:_[T].fn.call(_[T].context,d);break;case 3:_[T].fn.call(_[T].context,d,h);break;case 4:_[T].fn.call(_[T].context,d,h,p);break;default:if(!S)for(z=1,S=new Array(N-1);z<N;z++)S[z-1]=arguments[z];_[T].fn.apply(_[T].context,S)}}return!0},l.prototype.on=function(u,d,h){return s(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return s(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,p){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===d&&(!p||b.once)&&(!h||b.context===h)&&o(this,g);else{for(var w=0,_=[],N=b.length;w<N;w++)(b[w].fn!==d||p&&!b[w].once||h&&b[w].context!==h)&&_.push(b[w]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(ufe);var Irt=ufe.exports;const Ort=Vc(Irt);var ky=new Ort,YI="recharts.syncEvent.tooltip",VW="recharts.syncEvent.brush";function lL(t,e){if(e){var r=Number.parseInt(e,10);if(!cd(r))return t==null?void 0:t[r]}}var Rrt={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},dfe=Jl({name:"options",initialState:Rrt,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Prt=dfe.reducer,{createEventEmitter:Drt}=dfe.actions;function Mrt(t){return t.tooltip.syncInteraction}var Lrt={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ffe=Jl({name:"chartData",initialState:Lrt,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:r,endIndex:n}=e.payload;r!=null&&(t.dataStartIndex=r),n!=null&&(t.dataEndIndex=n)}}}),{setChartData:$W,setDataStartEndIndexes:Frt,setComputedData:rdt}=ffe.actions,Brt=ffe.reducer,Urt=["x","y"];function HW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HW(Object(r),!0).forEach(function(n){zrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zrt(t,e,r){return(e=Vrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vrt(t){var e=$rt(t,"string");return typeof e=="symbol"?e:e+""}function $rt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hrt(t,e){if(t==null)return{};var r,n,a=qrt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function qrt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Grt(){var t=Cr(AM),e=Cr(SM),r=Ga(),n=Cr(ode),a=Cr(Ih),s=Uw(),o=DS(),l=Cr(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return Pw;var c=(u,d,h)=>{if(e!==h&&t===u){if(n==="index"){var p;if(o&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var g=d.payload.coordinate,{x:b,y:w}=g,_=Hrt(g,Urt),{x:N,y:S,width:T,height:R}=d.payload.sourceViewBox,z=Vg(Vg({},_),{},{x:o.x+(T?(b-N)/T:0)*o.width,y:o.y+(R?(w-S)/R:0)*o.height});r(Vg(Vg({},d),{},{payload:Vg(Vg({},d.payload),{},{coordinate:z})}))}else r(d);return}if(a!=null){var G;if(typeof n=="function"){var O={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},D=n(a,O);G=a[D]}else n==="value"&&(G=a.find(ce=>String(ce.value)===d.payload.label));var{coordinate:I}=d.payload;if(G==null||d.payload.active===!1||I==null||o==null){r(WI({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:V,y:P}=I,B=Math.min(V,o.x+o.width),F=Math.min(P,o.y+o.height),ee={x:s==="horizontal"?G.coordinate:B,y:s==="horizontal"?F:G.coordinate},Z=WI({active:d.payload.active,coordinate:ee,dataKey:d.payload.dataKey,index:String(G.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(Z)}}};return ky.on(YI,c),()=>{ky.off(YI,c)}},[l,r,e,t,n,a,s,o])}function Wrt(){var t=Cr(AM),e=Cr(SM),r=Ga();A.useEffect(()=>{if(t==null)return Pw;var n=(a,s,o)=>{e!==o&&t===a&&r(Frt(s))};return ky.on(VW,n),()=>{ky.off(VW,n)}},[r,e,t])}function Krt(){var t=Ga();A.useEffect(()=>{t(Drt())},[t]),Grt(),Wrt()}function Xrt(t,e,r,n,a,s){var o=Cr(g=>nrt(g,t,e)),l=Cr(SM),c=Cr(AM),u=Cr(ode),d=Cr(Mrt),h=d==null?void 0:d.active,p=DS();A.useEffect(()=>{if(!h&&c!=null&&l!=null){var g=WI({active:s,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:p,graphicalItemId:void 0});ky.emit(YI,c,g,l)}},[h,r,o,a,n,l,c,u,s,p])}function qW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function GW(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qW(Object(r),!0).forEach(function(n){Yrt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yrt(t,e,r){return(e=Zrt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zrt(t){var e=Qrt(t,"string");return typeof e=="symbol"?e:e+""}function Qrt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jrt(t){return t.dataKey}function ent(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(zXe,e)}var WW=[],tnt={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Q_(t){var e,r,n=yi(t,tnt),{active:a,allowEscapeViewBox:s,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:g,reverseDirection:b,useTranslate3d:w,wrapperStyle:_,cursor:N,shared:S,trigger:T,defaultIndex:R,portal:z,axisId:G}=n,O=Ga(),D=typeof R=="number"?String(R):R;A.useEffect(()=>{O(Zet({shared:S,trigger:T,axisId:G,active:a,defaultIndex:D}))},[O,S,T,G,a,D]);var I=DS(),V=Yce(),P=qet(S),{activeIndex:B,isActive:F}=(e=Cr(Ce=>irt(Ce,P,T,D)))!==null&&e!==void 0?e:{},ee=Cr(Ce=>srt(Ce,P,T,D)),Z=Cr(Ce=>ofe(Ce,P,T,D)),ce=Cr(Ce=>art(Ce,P,T,D)),ne=ee,ae=krt(),me=(r=a??F)!==null&&r!==void 0?r:!1,[Te,we]=Yle([ne,me]),q=P==="axis"?Z:void 0;Xrt(P,T,ce,q,B,me);var Y=z??ae;if(Y==null||I==null||P==null)return null;var X=ne??WW;me||(X=WW),u&&X.length&&(X=Fle(X.filter(Ce=>Ce.value!=null&&(Ce.hide!==!0||n.includeHidden)),p,Jrt));var re=X.length>0,se=A.createElement(KXe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:d,active:me,coordinate:ce,hasPayload:re,offset:h,position:g,reverseDirection:b,useTranslate3d:w,viewBox:I,wrapperStyle:_,lastBoundingBox:Te,innerRef:we,hasPortalFromProps:!!z},ent(c,GW(GW({},n),{},{payload:X,label:q,active:me,activeIndex:B,coordinate:ce,accessibilityLayer:V})));return A.createElement(A.Fragment,null,Oy.createPortal(se,Y),me&&A.createElement(Crt,{cursor:N,tooltipEventType:P,coordinate:ce,payload:X,index:B}))}var s5=t=>null;s5.displayName="Cell";function rnt(t,e,r){return(e=nnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nnt(t){var e=ant(t,"string");return typeof e=="symbol"?e:e+""}function ant(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class snt{constructor(e){rnt(this,"cache",new Map),this.maxSize=e}get(e){var r=this.cache.get(e);return r!==void 0&&(this.cache.delete(e),this.cache.set(e,r)),r}set(e,r){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(e,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function KW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function int(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KW(Object(r),!0).forEach(function(n){ont(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KW(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ont(t,e,r){return(e=lnt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lnt(t){var e=cnt(t,"string");return typeof e=="symbol"?e:e+""}function cnt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var unt={cacheSize:2e3,enableCache:!0},hfe=int({},unt),XW=new snt(hfe.cacheSize),dnt={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},YW="recharts_measurement_span";function fnt(t,e){var r=e.fontSize||"",n=e.fontFamily||"",a=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(o,"|").concat(l)}var ZW=(t,e)=>{try{var r=document.getElementById(YW);r||(r=document.createElement("span"),r.setAttribute("id",YW),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,dnt,e),r.textContent="".concat(t);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},pb=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Vw.isSsr)return{width:0,height:0};if(!hfe.enableCache)return ZW(e,r);var n=fnt(e,r),a=XW.get(n);if(a)return a;var s=ZW(e,r);return XW.set(n,s),s},QW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JW=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hnt=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mnt=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,mfe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pnt=Object.keys(mfe),S1="NaN";function gnt(t,e){return t*mfe[e]}class Ml{static parse(e){var r,[,n,a]=(r=mnt.exec(e))!==null&&r!==void 0?r:[];return new Ml(parseFloat(n),a??"")}constructor(e,r){this.num=e,this.unit=r,this.num=e,this.unit=r,cd(e)&&(this.unit=""),r!==""&&!hnt.test(r)&&(this.num=NaN,this.unit=""),pnt.includes(r)&&(this.num=gnt(e,r),this.unit="px")}add(e){return this.unit!==e.unit?new Ml(NaN,""):new Ml(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Ml(NaN,""):new Ml(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ml(NaN,""):new Ml(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Ml(NaN,""):new Ml(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return cd(this.num)}}function pfe(t){if(t.includes(S1))return S1;for(var e=t;e.includes("*")||e.includes("/");){var r,[,n,a,s]=(r=QW.exec(e))!==null&&r!==void 0?r:[],o=Ml.parse(n??""),l=Ml.parse(s??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return S1;e=e.replace(QW,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,d,h,p]=(u=JW.exec(e))!==null&&u!==void 0?u:[],g=Ml.parse(d??""),b=Ml.parse(p??""),w=h==="+"?g.add(b):g.subtract(b);if(w.isNaN())return S1;e=e.replace(JW,w.toString())}return e}var eK=/\(([^()]*)\)/;function xnt(t){for(var e=t,r;(r=eK.exec(e))!=null;){var[,n]=r;e=e.replace(eK,pfe(n))}return e}function vnt(t){var e=t.replace(/\s+/g,"");return e=xnt(e),e=pfe(e),e}function bnt(t){try{return vnt(t)}catch{return S1}}function dC(t){var e=bnt(t.slice(5,-1));return e===S1?"":e}var ynt=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],wnt=["dx","dy","angle","className","breakAll"];function ZI(){return ZI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZI.apply(null,arguments)}function tK(t,e){if(t==null)return{};var r,n,a=_nt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _nt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var gfe=/[ \f\n\r\t\v\u2028\u2029]+/,xfe=t=>{var{children:e,breakAll:r,style:n}=t;try{var a=[];fs(e)||(r?a=e.toString().split(""):a=e.toString().split(gfe));var s=a.map(l=>({word:l,width:pb(l,n).width})),o=r?0:pb("",n).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function Nnt(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var vfe=(t,e,r,n)=>t.reduce((a,s)=>{var{word:o,width:l}=s,c=a[a.length-1];if(c&&l!=null&&(e==null||n||c.width+l+r<Number(e)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),bfe=t=>t.reduce((e,r)=>e.width>r.width?e:r),Ent="",rK=(t,e,r,n,a,s,o,l)=>{var c=t.slice(0,e),u=xfe({breakAll:r,style:n,children:c+Ent});if(!u)return[!1,[]];var d=vfe(u.wordsWithComputedWidth,s,o,l),h=d.length>a||bfe(d).width>Number(s);return[h,d]},Ant=(t,e,r,n,a)=>{var{maxLines:s,children:o,style:l,breakAll:c}=t,u=Pr(s),d=String(o),h=vfe(e,n,r,a);if(!u||a)return h;var p=h.length>s||bfe(h).width>Number(n);if(!p)return h;for(var g=0,b=d.length-1,w=0,_;g<=b&&w<=d.length-1;){var N=Math.floor((g+b)/2),S=N-1,[T,R]=rK(d,S,c,l,s,n,r,a),[z]=rK(d,N,c,l,s,n,r,a);if(!T&&!z&&(g=N+1),T&&z&&(b=N-1),!T&&z){_=R;break}w++}return _||h},nK=t=>{var e=fs(t)?[]:t.toString().split(gfe);return[{words:e,width:void 0}]},Snt=t=>{var{width:e,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:o}=t;if((e||r)&&!Vw.isSsr){var l,c,u=xfe({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return nK(n);return Ant({breakAll:s,children:n,maxLines:o,style:a},l,c,e,!!r)}return nK(n)},yfe="#808080",jnt={angle:0,breakAll:!1,capHeight:"0.71em",fill:yfe,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},n6=A.forwardRef((t,e)=>{var r=yi(t,jnt),{x:n,y:a,lineHeight:s,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,h=tK(r,ynt),p=A.useMemo(()=>Snt({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:g,dy:b,angle:w,className:_,breakAll:N}=h,S=tK(h,wnt);if(!Xd(n)||!Xd(a)||p.length===0)return null;var T=Number(n)+(Pr(g)?g:0),R=Number(a)+(Pr(b)?b:0);if(!Js(T)||!Js(R))return null;var z;switch(d){case"start":z=dC("calc(".concat(o,")"));break;case"middle":z=dC("calc(".concat((p.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:z=dC("calc(".concat(p.length-1," * -").concat(s,")"));break}var G=[];if(c){var O=p[0].width,{width:D}=h;G.push("scale(".concat(Pr(D)&&Pr(O)?D/O:1,")"))}return w&&G.push("rotate(".concat(w,", ").concat(T,", ").concat(R,")")),G.length&&(S.transform=G.join(" ")),A.createElement("text",ZI({},yl(S),{ref:e,x:T,y:R,className:ta("recharts-text",_),textAnchor:u,fill:l.includes("url")?yfe:l}),p.map((I,V)=>{var P=I.words.join(N?"":" ");return A.createElement("tspan",{x:T,dy:V===0?z:s,key:"".concat(P,"-").concat(V)},P)}))});n6.displayName="Text";var Tnt=["labelRef"];function Cnt(t,e){if(t==null)return{};var r,n,a=knt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function knt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function aK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aK(Object(r),!0).forEach(function(n){Int(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Int(t,e,r){return(e=Ont(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ont(t){var e=Rnt(t,"string");return typeof e=="symbol"?e:e+""}function Rnt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kf(){return kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kf.apply(null,arguments)}var wfe=A.createContext(null),Pnt=t=>{var{x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o,children:l}=t,c=A.useMemo(()=>({x:e,y:r,upperWidth:n,lowerWidth:a,width:s,height:o}),[e,r,n,a,s,o]);return A.createElement(wfe.Provider,{value:c},l)},_fe=()=>{var t=A.useContext(wfe),e=DS();return t||Fce(e)},Dnt=A.createContext(null),Mnt=()=>{var t=A.useContext(Dnt),e=Cr(fde);return t||e},Lnt=t=>{var{value:e,formatter:r}=t,n=fs(t.children)?e:t.children;return typeof r=="function"?r(n):n},cL=t=>t!=null&&typeof t=="function",Fnt=(t,e)=>{var r=to(e-t),n=Math.min(Math.abs(e-t),360);return r*n},Bnt=(t,e,r,n,a)=>{var{offset:s,className:o}=t,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:p,clockWise:g}=a,b=(u+d)/2,w=Fnt(h,p),_=w>=0?1:-1,N,S;switch(e){case"insideStart":N=h+_*s,S=g;break;case"insideEnd":N=p-_*s,S=!g;break;case"end":N=p+_*s,S=g;break;default:throw new Error("Unsupported position ".concat(e))}S=w<=0?S:!S;var T=mi(l,c,b,N),R=mi(l,c,b,N+(S?1:-1)*359),z="M".concat(T.x,",").concat(T.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(S?0:1,`,
    `).concat(R.x,",").concat(R.y),G=fs(t.id)?xy("recharts-radial-line-"):t.id;return A.createElement("text",kf({},n,{dominantBaseline:"central",className:ta("recharts-radial-bar-label",o)}),A.createElement("defs",null,A.createElement("path",{id:G,d:z})),A.createElement("textPath",{xlinkHref:"#".concat(G)},r))},Unt=(t,e,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:l,endAngle:c}=t,u=(l+c)/2;if(r==="outside"){var{x:d,y:h}=mi(n,a,o+e,u);return{x:d,y:h,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var p=(s+o)/2,{x:g,y:b}=mi(n,a,p,u);return{x:g,y:b,textAnchor:"middle",verticalAnchor:"middle"}},QI=t=>"cx"in t&&Pr(t.cx),znt=(t,e)=>{var{parentViewBox:r,offset:n,position:a}=t,s;r!=null&&!QI(r)&&(s=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=e,h=o,p=o+(c-u)/2,g=(h+p)/2,b=(c+u)/2,w=h+c/2,_=d>=0?1:-1,N=_*n,S=_>0?"end":"start",T=_>0?"start":"end",R=c>=0?1:-1,z=R*n,G=R>0?"end":"start",O=R>0?"start":"end";if(a==="top"){var D={x:h+c/2,y:l-N,textAnchor:"middle",verticalAnchor:S};return Hs(Hs({},D),s?{height:Math.max(l-s.y,0),width:c}:{})}if(a==="bottom"){var I={x:p+u/2,y:l+d+N,textAnchor:"middle",verticalAnchor:T};return Hs(Hs({},I),s?{height:Math.max(s.y+s.height-(l+d),0),width:u}:{})}if(a==="left"){var V={x:g-z,y:l+d/2,textAnchor:G,verticalAnchor:"middle"};return Hs(Hs({},V),s?{width:Math.max(V.x-s.x,0),height:d}:{})}if(a==="right"){var P={x:g+b+z,y:l+d/2,textAnchor:O,verticalAnchor:"middle"};return Hs(Hs({},P),s?{width:Math.max(s.x+s.width-P.x,0),height:d}:{})}var B=s?{width:b,height:d}:{};return a==="insideLeft"?Hs({x:g+z,y:l+d/2,textAnchor:O,verticalAnchor:"middle"},B):a==="insideRight"?Hs({x:g+b-z,y:l+d/2,textAnchor:G,verticalAnchor:"middle"},B):a==="insideTop"?Hs({x:h+c/2,y:l+N,textAnchor:"middle",verticalAnchor:T},B):a==="insideBottom"?Hs({x:p+u/2,y:l+d-N,textAnchor:"middle",verticalAnchor:S},B):a==="insideTopLeft"?Hs({x:h+z,y:l+N,textAnchor:O,verticalAnchor:T},B):a==="insideTopRight"?Hs({x:h+c-z,y:l+N,textAnchor:G,verticalAnchor:T},B):a==="insideBottomLeft"?Hs({x:p+z,y:l+d-N,textAnchor:O,verticalAnchor:S},B):a==="insideBottomRight"?Hs({x:p+u-z,y:l+d-N,textAnchor:G,verticalAnchor:S},B):a&&typeof a=="object"&&(Pr(a.x)||mh(a.x))&&(Pr(a.y)||mh(a.y))?Hs({x:o+Go(a.x,b),y:l+Go(a.y,d),textAnchor:"end",verticalAnchor:"end"},B):Hs({x:w,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},B)},Vnt={angle:0,offset:5,zIndex:pi.label,position:"middle",textBreakAll:!1};function Qh(t){var e=yi(t,Vnt),{viewBox:r,position:n,value:a,children:s,content:o,className:l="",textBreakAll:c,labelRef:u}=e,d=Mnt(),h=_fe(),p=n==="center"?h:d??h,g,b,w;if(r==null?g=p:QI(r)?g=r:g=Fce(r),!g||fs(a)&&fs(s)&&!A.isValidElement(o)&&typeof o!="function")return null;var _=Hs(Hs({},e),{},{viewBox:g});if(A.isValidElement(o)){var{labelRef:N}=_,S=Cnt(_,Tnt);return A.cloneElement(o,S)}if(typeof o=="function"){if(b=A.createElement(o,_),A.isValidElement(b))return b}else b=Lnt(e);var T=yl(e);if(QI(g)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Bnt(e,n,b,T,g);w=Unt(g,e.offset,e.position)}else w=znt(e,g);return A.createElement(ec,{zIndex:e.zIndex},A.createElement(n6,kf({ref:u,className:ta("recharts-label",l)},T,w,{textAnchor:Nnt(T.textAnchor)?T.textAnchor:w.textAnchor,breakAll:c}),b))}Qh.displayName="Label";var $nt=(t,e,r)=>{if(!t)return null;var n={viewBox:e,labelRef:r};return t===!0?A.createElement(Qh,kf({key:"label-implicit"},n)):Xd(t)?A.createElement(Qh,kf({key:"label-implicit",value:t},n)):A.isValidElement(t)?t.type===Qh?A.cloneElement(t,Hs({key:"label-implicit"},n)):A.createElement(Qh,kf({key:"label-implicit",content:t},n)):cL(t)?A.createElement(Qh,kf({key:"label-implicit",content:t},n)):t&&typeof t=="object"?A.createElement(Qh,kf({},t,{key:"label-implicit"},n)):null};function Hnt(t){var{label:e,labelRef:r}=t,n=_fe();return $nt(e,n,r)||null}var Nfe={},Efe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return r[r.length-1]}t.last=e})(Efe);var Afe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return Array.isArray(r)?r:Array.from(r)}t.toArray=e})(Afe);(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Efe,r=Afe,n=yS;function a(s){if(n.isArrayLike(s))return e.last(r.toArray(s))}t.last=a})(Nfe);var qnt=Nfe.last;const Gnt=Vc(qnt);var Wnt=["valueAccessor"],Knt=["dataKey","clockWise","id","textBreakAll","zIndex"];function S4(){return S4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},S4.apply(null,arguments)}function sK(t,e){if(t==null)return{};var r,n,a=Xnt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Xnt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Ynt=t=>Array.isArray(t.value)?Gnt(t.value):t.value,Sfe=A.createContext(void 0),jfe=Sfe.Provider,Tfe=A.createContext(void 0),Znt=Tfe.Provider;function Qnt(){return A.useContext(Sfe)}function Jnt(){return A.useContext(Tfe)}function aE(t){var{valueAccessor:e=Ynt}=t,r=sK(t,Wnt),{dataKey:n,clockWise:a,id:s,textBreakAll:o,zIndex:l}=r,c=sK(r,Knt),u=Qnt(),d=Jnt(),h=u||d;return!h||!h.length?null:A.createElement(ec,{zIndex:l??pi.label},A.createElement(no,{className:"recharts-label-list"},h.map((p,g)=>{var b,w=fs(n)?e(p,g):Ma(p&&p.payload,n),_=fs(s)?{}:{id:"".concat(s,"-").concat(g)};return A.createElement(Qh,S4({key:"label-".concat(g)},yl(p),c,_,{fill:(b=r.fill)!==null&&b!==void 0?b:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:o,viewBox:p.viewBox,index:g,zIndex:0}))})))}aE.displayName="LabelList";function uL(t){var{label:e}=t;return e?e===!0?A.createElement(aE,{key:"labelList-implicit"}):A.isValidElement(e)||cL(e)?A.createElement(aE,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(aE,S4({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function JI(){return JI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JI.apply(null,arguments)}var Cfe=t=>{var{cx:e,cy:r,r:n,className:a}=t,s=ta("recharts-dot",a);return Pr(e)&&Pr(r)&&Pr(n)?A.createElement("circle",JI({},Uc(t),ED(t),{className:s,cx:e,cy:r,r:n})):null},kfe=t=>t.graphicalItems.polarItems,eat=bt([ps,Yw],OM),a6=bt([kfe,Es,eat],RM),tat=bt([a6],PM),s6=bt([tat,wM],DM),rat=bt([s6,Es,a6],LM);bt([s6,Es,a6],(t,e,r)=>r.length>0?t.flatMap(n=>r.flatMap(a=>{var s,o=Ma(n,(s=e.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(n=>({value:Ma(n,e.dataKey),errorDomain:[]})):t.map(n=>({value:n,errorDomain:[]})));var iK=()=>{},nat=bt([s6,Es,a6,e6,ps],zM),aat=bt([Es,BM,UM,iK,nat,iK,Kn,ps],VM),Ife=bt([Es,Kn,s6,rat,Xw,ps,aat],$M),sat=bt([Ife,Es,Ev],GM);bt([Es,Ife,sat,ps],KM);var iat={radiusAxis:{},angleAxis:{}},Ofe=Jl({name:"polarAxis",initialState:iat,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:ndt,removeRadiusAxis:adt,addAngleAxis:sdt,removeAngleAxis:idt}=Ofe.actions,oat=Ofe.reducer;function oK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oK(Object(r),!0).forEach(function(n){lat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lat(t,e,r){return(e=cat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cat(t){var e=uat(t,"string");return typeof e=="symbol"?e:e+""}function uat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dat=(t,e)=>e,dL=bt([kfe,dat],(t,e)=>t.filter(r=>r.type==="pie").find(r=>r.id===e)),fat=[],fL=(t,e,r)=>(r==null?void 0:r.length)===0?fat:r,Rfe=bt([wM,dL,fL],(t,e,r)=>{var{chartData:n}=t;if(e!=null){var a;if((e==null?void 0:e.data)!=null&&e.data.length>0?a=e.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>lK(lK({},e.presentationProps),s.props))),a!=null)return a}}),hat=bt([Rfe,dL,fL],(t,e,r)=>{if(!(t==null||e==null))return t.map((n,a)=>{var s,o=Ma(n,e.nameKey,e.name),l;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=e.fill,{value:vv(o,e.dataKey),color:l,payload:n,type:e.legendType}})}),mat=bt([Rfe,dL,fL,Pi],(t,e,r,n)=>{if(!(e==null||t==null))return hst({offset:n,pieSettings:e,displayedData:t,cells:r})}),Pfe={exports:{}},Ba={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hL=Symbol.for("react.transitional.element"),mL=Symbol.for("react.portal"),i6=Symbol.for("react.fragment"),o6=Symbol.for("react.strict_mode"),l6=Symbol.for("react.profiler"),c6=Symbol.for("react.consumer"),u6=Symbol.for("react.context"),d6=Symbol.for("react.forward_ref"),f6=Symbol.for("react.suspense"),h6=Symbol.for("react.suspense_list"),m6=Symbol.for("react.memo"),p6=Symbol.for("react.lazy"),pat=Symbol.for("react.view_transition"),gat=Symbol.for("react.client.reference");function Ru(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hL:switch(t=t.type,t){case i6:case l6:case o6:case f6:case h6:case pat:return t;default:switch(t=t&&t.$$typeof,t){case u6:case d6:case p6:case m6:return t;case c6:return t;default:return e}}case mL:return e}}}Ba.ContextConsumer=c6;Ba.ContextProvider=u6;Ba.Element=hL;Ba.ForwardRef=d6;Ba.Fragment=i6;Ba.Lazy=p6;Ba.Memo=m6;Ba.Portal=mL;Ba.Profiler=l6;Ba.StrictMode=o6;Ba.Suspense=f6;Ba.SuspenseList=h6;Ba.isContextConsumer=function(t){return Ru(t)===c6};Ba.isContextProvider=function(t){return Ru(t)===u6};Ba.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hL};Ba.isForwardRef=function(t){return Ru(t)===d6};Ba.isFragment=function(t){return Ru(t)===i6};Ba.isLazy=function(t){return Ru(t)===p6};Ba.isMemo=function(t){return Ru(t)===m6};Ba.isPortal=function(t){return Ru(t)===mL};Ba.isProfiler=function(t){return Ru(t)===l6};Ba.isStrictMode=function(t){return Ru(t)===o6};Ba.isSuspense=function(t){return Ru(t)===f6};Ba.isSuspenseList=function(t){return Ru(t)===h6};Ba.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===i6||t===l6||t===o6||t===f6||t===h6||typeof t=="object"&&t!==null&&(t.$$typeof===p6||t.$$typeof===m6||t.$$typeof===u6||t.$$typeof===c6||t.$$typeof===d6||t.$$typeof===gat||t.getModuleId!==void 0)};Ba.typeOf=Ru;Pfe.exports=Ba;var xat=Pfe.exports,cK=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",uK=null,fC=null,Dfe=t=>{if(t===uK&&Array.isArray(fC))return fC;var e=[];return A.Children.forEach(t,r=>{fs(r)||(xat.isFragment(r)?e=e.concat(Dfe(r.props.children)):e.push(r))}),fC=e,uK=t,e};function pL(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(a=>cK(a)):n=[cK(e)],Dfe(t).forEach(a=>{var s=Kp(a,"type.displayName")||Kp(a,"type.name");s&&n.indexOf(s)!==-1&&r.push(a)}),r}var Mfe=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Lfe={};(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}t.isPlainObject=e})(Lfe);var vat=Lfe.isPlainObject;const bat=Vc(vat);function dK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dK(Object(r),!0).forEach(function(n){yat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yat(t,e,r){return(e=wat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wat(t){var e=_at(t,"string");return typeof e=="symbol"?e:e+""}function _at(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j4(){return j4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j4.apply(null,arguments)}var hK=(t,e,r,n,a)=>{var s=r-n,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+r,",").concat(e),o+="L ".concat(t+r-s/2,",").concat(e+a),o+="L ".concat(t+r-s/2-n,",").concat(e+a),o+="L ".concat(t,",").concat(e," Z"),o},Nat={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Eat=t=>{var e=yi(t,Nat),{x:r,y:n,upperWidth:a,lowerWidth:s,height:o,className:l}=e,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=e,p=A.useRef(null),[g,b]=A.useState(-1),w=A.useRef(a),_=A.useRef(s),N=A.useRef(o),S=A.useRef(r),T=A.useRef(n),R=Hw(t,"trapezoid-");if(A.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var ee=p.current.getTotalLength();ee&&b(ee)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||o!==+o||a===0&&s===0||o===0)return null;var z=ta("recharts-trapezoid",l);if(!h)return A.createElement("g",null,A.createElement("path",j4({},yl(e),{className:z,d:hK(r,n,a,s,o)})));var G=w.current,O=_.current,D=N.current,I=S.current,V=T.current,P="0px ".concat(g===-1?1:g,"px"),B="".concat(g,"px 0px"),F=Zce(["strokeDasharray"],u,c);return A.createElement($w,{animationId:R,key:R,canBegin:g>0,duration:u,easing:c,isActive:h,begin:d},ee=>{var Z=cs(G,a,ee),ce=cs(O,s,ee),ne=cs(D,o,ee),ae=cs(I,r,ee),me=cs(V,n,ee);p.current&&(w.current=Z,_.current=ce,N.current=ne,S.current=ae,T.current=me);var Te=ee>0?{transition:F,strokeDasharray:B}:{strokeDasharray:P};return A.createElement("path",j4({},yl(e),{className:z,d:hK(ae,me,Z,ce,ne),ref:p,style:fK(fK({},Te),e.style)}))})},Aat=["option","shapeType","propTransformer","activeClassName"];function Sat(t,e){if(t==null)return{};var r,n,a=jat(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jat(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function mK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function T4(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mK(Object(r),!0).forEach(function(n){Tat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tat(t,e,r){return(e=Cat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cat(t){var e=kat(t,"string");return typeof e=="symbol"?e:e+""}function kat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iat(t,e){return T4(T4({},e),t)}function Oat(t,e){return t==="symbols"}function pK(t){var{shapeType:e,elementProps:r}=t;switch(e){case"rectangle":return A.createElement(tue,r);case"trapezoid":return A.createElement(Eat,r);case"sector":return A.createElement(sue,r);case"symbols":if(Oat(e))return A.createElement(ND,r);break;case"curve":return A.createElement(ZD,r);default:return null}}function Rat(t){return A.isValidElement(t)?t.props:t}function gL(t){var{option:e,shapeType:r,propTransformer:n=Iat,activeClassName:a="recharts-active-shape"}=t,s=Sat(t,Aat),o;if(A.isValidElement(e))o=A.cloneElement(e,T4(T4({},s),Rat(e)));else if(typeof e=="function")o=e(s,s.index);else if(bat(e)&&typeof e!="boolean"){var l=n(e,s);o=A.createElement(pK,{shapeType:r,elementProps:l})}else{var c=s;o=A.createElement(pK,{shapeType:r,elementProps:c})}return s.isActive?A.createElement(no,{className:a},o):o}var xL=(t,e,r)=>{var n=Ga();return(a,s)=>o=>{t==null||t(a,s,o),n($de({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},vL=t=>{var e=Ga();return(r,n)=>a=>{t==null||t(r,n,a),e(Qet())}},bL=(t,e,r)=>{var n=Ga();return(a,s)=>o=>{t==null||t(a,s,o),n(Jet({activeIndex:String(s),activeDataKey:e,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function yL(t){var{tooltipEntrySettings:e}=t,r=Ga(),n=Ko(),a=A.useRef(null);return A.useLayoutEffect(()=>{n||(a.current===null?r(Ket(e)):a.current!==e&&r(Xet({prev:a.current,next:e})),a.current=e)},[e,r,n]),A.useLayoutEffect(()=>()=>{a.current&&(r(Yet(a.current)),a.current=null)},[r]),null}function Ffe(t){var{legendPayload:e}=t,r=Ga(),n=Ko(),a=A.useRef(null);return A.useLayoutEffect(()=>{n||(a.current===null?r(Wce(e)):a.current!==e&&r(Kce({prev:a.current,next:e})),a.current=e)},[r,n,e]),A.useLayoutEffect(()=>()=>{a.current&&(r(Xce(a.current)),a.current=null)},[r]),null}function Pat(t){var{legendPayload:e}=t,r=Ga(),n=Cr(Kn),a=A.useRef(null);return A.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(Wce(e)):a.current!==e&&r(Kce({prev:a.current,next:e})),a.current=e)},[r,n,e]),A.useLayoutEffect(()=>()=>{a.current&&(r(Xce(a.current)),a.current=null)},[r]),null}var hC,Dat=()=>{var[t]=A.useState(()=>xy("uid-"));return t},Mat=(hC=aX.useId)!==null&&hC!==void 0?hC:Dat;function Bfe(t,e){var r=Mat();return e||(t?"".concat(t,"-").concat(r):r)}var Lat=A.createContext(void 0),wL=t=>{var{id:e,type:r,children:n}=t,a=Bfe("recharts-".concat(r),e);return A.createElement(Lat.Provider,{value:a},n(a))},Fat={cartesianItems:[],polarItems:[]},Ufe=Jl({name:"graphicalItems",initialState:Fat,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:os()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:r,next:n}=e.payload,a=sd(t).cartesianItems.indexOf(r);a>-1&&(t.cartesianItems[a]=n)},prepare:os()},removeCartesianGraphicalItem:{reducer(t,e){var r=sd(t).cartesianItems.indexOf(e.payload);r>-1&&t.cartesianItems.splice(r,1)},prepare:os()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:os()},removePolarGraphicalItem:{reducer(t,e){var r=sd(t).polarItems.indexOf(e.payload);r>-1&&t.polarItems.splice(r,1)},prepare:os()}}}),{addCartesianGraphicalItem:Bat,replaceCartesianGraphicalItem:Uat,removeCartesianGraphicalItem:zat,addPolarGraphicalItem:Vat,removePolarGraphicalItem:$at}=Ufe.actions,Hat=Ufe.reducer,qat=t=>{var e=Ga(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?e(Bat(t)):r.current!==t&&e(Uat({prev:r.current,next:t})),r.current=t},[e,t]),A.useLayoutEffect(()=>()=>{r.current&&(e(zat(r.current)),r.current=null)},[e]),null},zfe=A.memo(qat);function Gat(t){var e=Ga();return A.useLayoutEffect(()=>(e(Vat(t)),()=>{e($at(t))}),[e,t]),null}var Wat=["key"],Kat=["onMouseEnter","onClick","onMouseLeave"],Xat=["id"],Yat=["id"];function gK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gK(Object(r),!0).forEach(function(n){Zat(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zat(t,e,r){return(e=Qat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qat(t){var e=Jat(t,"string");return typeof e=="symbol"?e:e+""}function Jat(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},am.apply(null,arguments)}function g6(t,e){if(t==null)return{};var r,n,a=est(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function est(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function tst(t){var e=A.useMemo(()=>pL(t.children,s5),[t.children]),r=Cr(n=>hat(n,t.id,e));return r==null?null:A.createElement(Pat,{legendPayload:r})}var rst=A.memo(t=>{var{dataKey:e,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:o,name:l,hide:c,tooltipType:u}=t,d={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:o,dataKey:e,nameKey:r,name:vv(l,e),hide:c,type:u,color:o,unit:""}};return A.createElement(yL,{tooltipEntrySettings:d})}),nst=(t,e)=>t>e?"start":t<e?"end":"middle",ast=(t,e,r)=>Go(typeof e=="function"?e(t):e,r,r*.8),sst=(t,e,r)=>{var{top:n,left:a,width:s,height:o}=e,l=rue(s,o),c=a+Go(t.cx,s,s/2),u=n+Go(t.cy,o,o/2),d=Go(t.innerRadius,l,0),h=ast(r,t.outerRadius,l),p=t.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:h,maxRadius:p}},ist=(t,e)=>{var r=to(e-t),n=Math.min(Math.abs(e-t),360);return r*n};function ost(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var lst=(t,e)=>{if(A.isValidElement(t))return A.cloneElement(t,e);if(typeof t=="function")return t(e);var r=ta("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:n}=e,a=g6(e,Wat);return A.createElement(ZD,am({},a,{type:"linear",className:r}))},cst=(t,e,r)=>{if(A.isValidElement(t))return A.cloneElement(t,e);var n=r;if(typeof t=="function"&&(n=t(e),A.isValidElement(n)))return n;var a=ta("recharts-pie-label-text",ost(t));return A.createElement(n6,am({},e,{alignmentBaseline:"middle",className:a}),n)};function ust(t){var{sectors:e,props:r,showLabels:n}=t,{label:a,labelLine:s,dataKey:o}=r;if(!n||!a||!e)return null;var l=Uc(r),c=Wp(a),u=Wp(s),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,h=e.map((p,g)=>{var b=(p.startAngle+p.endAngle)/2,w=mi(p.cx,p.cy,p.outerRadius+d,b),_=Rs(Rs(Rs(Rs({},l),p),{},{stroke:"none"},c),{},{index:g,textAnchor:nst(w.x,p.cx)},w),N=Rs(Rs(Rs(Rs({},l),p),{},{fill:"none",stroke:p.fill},u),{},{index:g,points:[mi(p.cx,p.cy,p.outerRadius,b),w],key:"line"});return A.createElement(ec,{zIndex:pi.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},A.createElement(no,null,s&&lst(s,N),cst(a,_,Ma(p,o))))});return A.createElement(no,{className:"recharts-pie-labels"},h)}function dst(t){var{sectors:e,props:r,showLabels:n}=t,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?A.createElement(uL,{label:a}):A.createElement(ust,{sectors:e,props:r,showLabels:n})}function fst(t){var{sectors:e,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:s,id:o}=t,l=Cr(nm),c=Cr(nL),u=Cr(Ftt),{onMouseEnter:d,onClick:h,onMouseLeave:p}=a,g=g6(a,Kat),b=xL(d,a.dataKey,o),w=vL(p),_=bL(h,a.dataKey,o);return e==null||e.length===0?null:A.createElement(A.Fragment,null,e.map((N,S)=>{if((N==null?void 0:N.startAngle)===0&&(N==null?void 0:N.endAngle)===0&&e.length!==1)return null;var T=u==null||u===o,R=String(S)===l&&(c==null||a.dataKey===c)&&T,z=l?n:null,G=r&&R?r:z,O=Rs(Rs({},N),{},{stroke:N.stroke,tabIndex:-1,[kce]:S,[Ice]:a.dataKey});return A.createElement(no,am({key:"sector-".concat(N==null?void 0:N.startAngle,"-").concat(N==null?void 0:N.endAngle,"-").concat(N.midAngle,"-").concat(S),tabIndex:-1,className:"recharts-pie-sector"},Dw(g,N,S),{onMouseEnter:b(N,S),onMouseLeave:w(N,S),onClick:_(N,S)}),A.createElement(gL,am({option:s??G,index:S,shapeType:"sector",isActive:R},O)))}))}function hst(t){var e,{pieSettings:r,displayedData:n,cells:a,offset:s}=t,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:h}=r,p=Math.abs(r.minAngle),g=ist(l,c),b=Math.abs(g),w=n.length<=1?0:(e=r.paddingAngle)!==null&&e!==void 0?e:0,_=n.filter(G=>Ma(G,u,0)!==0).length,N=(b>=360?_:_-1)*w,S=b-_*p-N,T=n.reduce((G,O)=>{var D=Ma(O,u,0);return G+(Pr(D)?D:0)},0),R;if(T>0){var z;R=n.map((G,O)=>{var D=Ma(G,u,0),I=Ma(G,d,O),V=sst(r,s,G),P=(Pr(D)?D:0)/T,B,F=Rs(Rs({},G),a&&a[O]&&a[O].props);O?B=z.endAngle+to(g)*w*(D!==0?1:0):B=l;var ee=B+to(g)*((D!==0?p:0)+P*S),Z=(B+ee)/2,ce=(V.innerRadius+V.outerRadius)/2,ne=[{name:I,value:D,payload:F,dataKey:u,type:h}],ae=mi(V.cx,V.cy,ce,Z);return z=Rs(Rs(Rs(Rs({},r.presentationProps),{},{percent:P,cornerRadius:typeof o=="string"?parseFloat(o):o,name:I,tooltipPayload:ne,midAngle:Z,middleRadius:ce,tooltipPosition:ae},F),V),{},{value:D,dataKey:u,startAngle:B,endAngle:ee,payload:F,paddingAngle:to(g)*w}),z})}return R}function mst(t){var{showLabels:e,sectors:r,children:n}=t,a=A.useMemo(()=>!e||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,e]);return A.createElement(Znt,{value:e?a:void 0},n)}function pst(t){var{props:e,previousSectorsRef:r,id:n}=t,{sectors:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:h,onAnimationEnd:p}=e,g=Hw(e,"recharts-pie-"),b=r.current,[w,_]=A.useState(!1),N=A.useCallback(()=>{typeof p=="function"&&p(),_(!1)},[p]),S=A.useCallback(()=>{typeof h=="function"&&h(),_(!0)},[h]);return A.createElement(mst,{showLabels:!w,sectors:a},A.createElement($w,{animationId:g,begin:o,duration:l,isActive:s,easing:c,onAnimationStart:S,onAnimationEnd:N,key:g},T=>{var R=[],z=a&&a[0],G=z==null?void 0:z.startAngle;return a==null||a.forEach((O,D)=>{var I=b&&b[D],V=D>0?Kp(O,"paddingAngle",0):0;if(I){var P=cs(I.endAngle-I.startAngle,O.endAngle-O.startAngle,T),B=Rs(Rs({},O),{},{startAngle:G+V,endAngle:G+P+V});R.push(B),G=B.endAngle}else{var{endAngle:F,startAngle:ee}=O,Z=cs(0,F-ee,T),ce=Rs(Rs({},O),{},{startAngle:G+V,endAngle:G+Z+V});R.push(ce),G=ce.endAngle}}),r.current=R,A.createElement(no,null,A.createElement(fst,{sectors:R,activeShape:u,inactiveShape:d,allOtherPieProps:e,shape:e.shape,id:n}))}),A.createElement(dst,{showLabels:!w,sectors:a,props:e}),e.children)}var gst={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:pi.area};function xst(t){var{id:e}=t,r=g6(t,Xat),{hide:n,className:a,rootTabIndex:s}=t,o=A.useMemo(()=>pL(t.children,s5),[t.children]),l=Cr(d=>mat(d,e,o)),c=A.useRef(null),u=ta("recharts-pie",a);return n||l==null?(c.current=null,A.createElement(no,{tabIndex:s,className:u})):A.createElement(ec,{zIndex:t.zIndex},A.createElement(rst,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),A.createElement(no,{tabIndex:s,className:u},A.createElement(pst,{props:Rs(Rs({},r),{},{sectors:l}),previousSectorsRef:c,id:e})))}function Vfe(t){var e=yi(t,gst),{id:r}=e,n=g6(e,Yat),a=Uc(n);return A.createElement(wL,{id:r,type:"pie"},s=>A.createElement(A.Fragment,null,A.createElement(Gat,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:e.maxRadius}),A.createElement(tst,am({},n,{id:s})),A.createElement(xst,am({},n,{id:s}))))}Vfe.displayName="Pie";var vst=["points"];function xK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function mC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xK(Object(r),!0).forEach(function(n){bst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bst(t,e,r){return(e=yst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yst(t){var e=wst(t,"string");return typeof e=="symbol"?e:e+""}function wst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C4(){return C4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C4.apply(null,arguments)}function _st(t,e){if(t==null)return{};var r,n,a=Nst(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Nst(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Est(t){var{option:e,dotProps:r,className:n}=t;if(A.isValidElement(e))return A.cloneElement(e,r);if(typeof e=="function")return e(r);var a=ta(n,typeof e!="boolean"?e.className:""),s=r??{},{points:o}=s,l=_st(s,vst);return A.createElement(Cfe,C4({},l,{className:a}))}function Ast(t,e){return t==null?!1:e?!0:t.length===1}function Sst(t){var{points:e,dot:r,className:n,dotClassName:a,dataKey:s,baseProps:o,needClip:l,clipPathId:c,zIndex:u=pi.scatter}=t;if(!Ast(e,r))return null;var d=Mfe(r),h=Nqe(r),p=e.map((b,w)=>{var _,N,S=mC(mC(mC({r:3},o),h),{},{index:w,cx:(_=b.x)!==null&&_!==void 0?_:void 0,cy:(N=b.y)!==null&&N!==void 0?N:void 0,dataKey:s,value:b.value,payload:b.payload,points:e});return A.createElement(Est,{key:"dot-".concat(w),option:r,dotProps:S,className:a})}),g={};return l&&c!=null&&(g.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),A.createElement(ec,{zIndex:u},A.createElement(no,C4({className:n},g),p))}function vK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function bK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vK(Object(r),!0).forEach(function(n){jst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jst(t,e,r){return(e=Tst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tst(t){var e=Cst(t,"string");return typeof e=="symbol"?e:e+""}function Cst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kst={xAxis:{},yAxis:{},zAxis:{}},$fe=Jl({name:"cartesianAxis",initialState:kst,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:os()},replaceXAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.xAxis[r.id],t.xAxis[n.id]=n)},prepare:os()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:os()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:os()},replaceYAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.yAxis[r.id],t.yAxis[n.id]=n)},prepare:os()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:os()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:os()},replaceZAxis:{reducer(t,e){var{prev:r,next:n}=e.payload;t.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete t.zAxis[r.id],t.zAxis[n.id]=n)},prepare:os()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:os()},updateYAxisWidth(t,e){var{id:r,width:n}=e.payload,a=t.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var o=[...s,n].slice(-3);t.yAxis[r]=bK(bK({},t.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:Ist,replaceXAxis:Ost,removeXAxis:Rst,addYAxis:Pst,replaceYAxis:Dst,removeYAxis:Mst,addZAxis:odt,replaceZAxis:ldt,removeZAxis:cdt,updateYAxisWidth:Lst}=$fe.actions,Fst=$fe.reducer,Bst=bt([Pi],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Ust=bt([Bst,Sh,jh],(t,e,r)=>{if(!(!t||e==null||r==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,r-t.top-t.bottom)}}),_L=()=>Cr(Ust),zst=()=>Cr($tt);function yK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yK(Object(r),!0).forEach(function(n){Vst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vst(t,e,r){return(e=$st(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $st(t){var e=Hst(t,"string");return typeof e=="symbol"?e:e+""}function Hst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qst=t=>{var{point:e,childIndex:r,mainColor:n,activeDot:a,dataKey:s,clipPath:o}=t;if(a===!1||e.x==null||e.y==null)return null;var l={index:r,dataKey:s,cx:e.x,cy:e.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=pC(pC(pC({},l),Wp(a)),ED(a)),u;return A.isValidElement(a)?u=A.cloneElement(a,c):typeof a=="function"?u=a(c):u=A.createElement(Cfe,c),A.createElement(no,{className:"recharts-active-dot",clipPath:o},u)};function Gst(t){var{points:e,mainColor:r,activeDot:n,itemDataKey:a,clipPath:s,zIndex:o=pi.activeDot}=t,l=Cr(nm),c=zst();if(e==null||c==null)return null;var u=e.find(d=>c.includes(d.payload));return fs(u)?null:A.createElement(ec,{zIndex:o},A.createElement(qst,{point:u,childIndex:Number(l),mainColor:r,dataKey:a,activeDot:n,clipPath:s}))}var Wst="Invariant failed";function Kst(t,e){throw new Error(Wst)}var Xst=["x","y"];function eO(){return eO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eO.apply(null,arguments)}function wK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function d2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wK(Object(r),!0).forEach(function(n){Yst(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yst(t,e,r){return(e=Zst(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zst(t){var e=Qst(t,"string");return typeof e=="symbol"?e:e+""}function Qst(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jst(t,e){if(t==null)return{};var r,n,a=eit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function eit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function tit(t,e){var{x:r,y:n}=t,a=Jst(t,Xst),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(e.height||a.height),d=parseInt(u,10),h="".concat(e.width||a.width),p=parseInt(h,10);return d2(d2(d2(d2(d2({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:p,name:e.name,radius:e.radius})}function k4(t){return A.createElement(gL,eO({shapeType:"rectangle",propTransformer:tit,activeClassName:"recharts-active-bar"},t))}var rit=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Pr(e))return e;var s=Pr(n)||fs(n);return s?e(n,a):(s||Kst(),r)}},nit={},Hfe=Jl({name:"errorBars",initialState:nit,reducers:{addErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]||(t[r]=[]),t[r].push(n)},replaceErrorBar:(t,e)=>{var{itemId:r,prev:n,next:a}=e.payload;t[r]&&(t[r]=t[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(t,e)=>{var{itemId:r,errorBar:n}=e.payload;t[r]&&(t[r]=t[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:udt,replaceErrorBar:ddt,removeErrorBar:fdt}=Hfe.actions,ait=Hfe.reducer,sit=["children"];function iit(t,e){if(t==null)return{};var r,n,a=oit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function oit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var lit={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},cit=A.createContext(lit);function qfe(t){var{children:e}=t,r=iit(t,sit);return A.createElement(cit.Provider,{value:r},e)}function NL(t,e){var r,n,a=Cr(u=>Ch(u,t)),s=Cr(u=>kh(u,e)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:qi.allowDataOverflow,l=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Gi.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function Gfe(t){var{xAxisId:e,yAxisId:r,clipPathId:n}=t,a=_L(),{needClipX:s,needClipY:o,needClip:l}=NL(e,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:h}=a;return A.createElement("clipPath",{id:"clipPath-".concat(n)},A.createElement("rect",{x:s?c:c-d/2,y:o?u:u-h/2,width:s?d:d*2,height:o?h:h*2}))}function uit(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Js(t.zIndex)?t.zIndex:e}var dit={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i5=A;function fit(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hit=typeof Object.is=="function"?Object.is:fit,mit=i5.useSyncExternalStore,pit=i5.useRef,git=i5.useEffect,xit=i5.useMemo,vit=i5.useDebugValue;dit.useSyncExternalStoreWithSelector=function(t,e,r,n,a){var s=pit(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=xit(function(){function c(g){if(!u){if(u=!0,d=g,g=n(g),a!==void 0&&o.hasValue){var b=o.value;if(a(b,g))return h=b}return h=g}if(b=h,hit(d,g))return b;var w=n(g);return a!==void 0&&a(b,w)?(d=g,b):(d=g,h=w)}var u=!1,d,h,p=r===void 0?null:r;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,r,n,a]);var l=mit(t,s[0],s[1]);return git(function(){o.hasValue=!0,o.value=l},[l]),vit(l),l};function bit(t){t()}function yit(){let t=null,e=null;return{clear(){t=null,e=null},notify(){bit(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=e={callback:r,next:null,prev:e};return a.prev?a.prev.next=a:t=a,function(){!n||t===null||(n=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var _K={notify(){},get:()=>[]};function wit(t,e){let r,n=_K,a=0,s=!1;function o(w){d();const _=n.subscribe(w);let N=!1;return()=>{N||(N=!0,_(),h())}}function l(){n.notify()}function c(){b.onStateChange&&b.onStateChange()}function u(){return s}function d(){a++,r||(r=t.subscribe(c),n=yit())}function h(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=_K)}function p(){s||(s=!0,d())}function g(){s&&(s=!1,h())}const b={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>n};return b}var _it=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nit=_it(),Eit=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ait=Eit(),Sit=()=>Nit||Ait?A.useLayoutEffect:A.useEffect,jit=Sit();function NK(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Tit(t,e){if(NK(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(e,r[a])||!NK(t[r[a]],e[r[a]]))return!1;return!0}var gC=Symbol.for("react-redux-context"),xC=typeof globalThis<"u"?globalThis:{};function Cit(){if(!A.createContext)return{};const t=xC[gC]??(xC[gC]=new Map);let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var kit=Cit();function Iit(t){const{children:e,context:r,serverState:n,store:a}=t,s=A.useMemo(()=>{const c=wit(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=A.useMemo(()=>a.getState(),[a]);jit(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=r||kit;return A.createElement(l.Provider,{value:s},e)}var Oit=Iit,Rit=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Pit(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function x6(t,e){var r=new Set([...Object.keys(t),...Object.keys(e)]);for(var n of r)if(Rit.has(n)){if(t[n]==null&&e[n]==null)continue;if(!Tit(t[n],e[n]))return!1}else if(!Pit(t[n],e[n]))return!1;return!0}var Dit=["onMouseEnter","onMouseLeave","onClick"],Mit=["value","background","tooltipPosition"],Lit=["id"],Fit=["onMouseEnter","onClick","onMouseLeave"];function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yh.apply(null,arguments)}function EK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ul(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EK(Object(r),!0).forEach(function(n){Bit(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bit(t,e,r){return(e=Uit(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uit(t){var e=zit(t,"string");return typeof e=="symbol"?e:e+""}function zit(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I4(t,e){if(t==null)return{};var r,n,a=Vit(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Vit(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var $it=t=>{var{dataKey:e,name:r,fill:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:vv(r,e),payload:t}]},Hit=A.memo(t=>{var{dataKey:e,stroke:r,strokeWidth:n,fill:a,name:s,hide:o,unit:l,tooltipType:c}=t,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:e,nameKey:void 0,name:vv(s,e),hide:o,type:c,color:a,unit:l}};return A.createElement(yL,{tooltipEntrySettings:u})});function qit(t){var e=Cr(nm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=t,{onMouseEnter:o,onMouseLeave:l,onClick:c}=s,u=I4(s,Dit),d=xL(o,n),h=vL(l),p=bL(c,n);if(!a||r==null)return null;var g=Wp(a);return A.createElement(ec,{zIndex:uit(a,pi.barBackground)},r.map((b,w)=>{var{value:_,background:N,tooltipPosition:S}=b,T=I4(b,Mit);if(!N)return null;var R=d(b,w),z=h(b,w),G=p(b,w),O=ul(ul(ul(ul(ul({option:a,isActive:String(w)===e},T),{},{fill:"#eee"},N),g),Dw(u,b,w)),{},{onMouseEnter:R,onMouseLeave:z,onClick:G,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return A.createElement(k4,yh({key:"background-bar-".concat(w)},O))}))}function Git(t){var{showLabels:e,children:r,rects:n}=t,a=n==null?void 0:n.map(s=>{var o={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return ul(ul({},o),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:o,fill:s.fill})});return A.createElement(jfe,{value:e?a:void 0},r)}function Wit(t){var{shape:e,activeBar:r,baseProps:n,entry:a,index:s,dataKey:o}=t,l=Cr(nm),c=Cr(nL),u=r&&String(s)===l&&(c==null||o===c),d=u?r:e;return u?A.createElement(ec,{zIndex:pi.activeBar},A.createElement(k4,yh({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))):A.createElement(k4,yh({},n,{name:String(n.name)},a,{isActive:u,option:d,index:s,dataKey:o}))}function Kit(t){var{shape:e,baseProps:r,entry:n,index:a,dataKey:s}=t;return A.createElement(k4,yh({},r,{name:String(r.name)},n,{isActive:!1,option:e,index:a,dataKey:s}))}function Xit(t){var e,{data:r,props:n}=t,a=(e=Uc(n))!==null&&e!==void 0?e:{},{id:s}=a,o=I4(a,Lit),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:h,onMouseLeave:p}=n,g=I4(n,Fit),b=xL(d,c),w=vL(p),_=bL(h,c);return r?A.createElement(A.Fragment,null,r.map((N,S)=>A.createElement(no,yh({key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(S),className:"recharts-bar-rectangle"},Dw(g,N,S),{onMouseEnter:b(N,S),onMouseLeave:w(N,S),onClick:_(N,S)}),u?A.createElement(Wit,{shape:l,activeBar:u,baseProps:o,entry:N,index:S,dataKey:c}):A.createElement(Kit,{shape:l,baseProps:o,entry:N,index:S,dataKey:c})))):null}function Yit(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:a,isAnimationActive:s,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=e,h=r.current,p=Hw(e,"recharts-bar-"),[g,b]=A.useState(!1),w=!g,_=A.useCallback(()=>{typeof u=="function"&&u(),b(!1)},[u]),N=A.useCallback(()=>{typeof d=="function"&&d(),b(!0)},[d]);return A.createElement(Git,{showLabels:w,rects:n},A.createElement($w,{animationId:p,begin:o,duration:l,isActive:s,easing:c,onAnimationEnd:_,onAnimationStart:N,key:p},S=>{var T=S===1?n:n==null?void 0:n.map((R,z)=>{var G=h&&h[z];if(G)return ul(ul({},R),{},{x:cs(G.x,R.x,S),y:cs(G.y,R.y,S),width:cs(G.width,R.width,S),height:cs(G.height,R.height,S)});if(a==="horizontal"){var O=cs(0,R.height,S),D=cs(R.stackedBarStart,R.y,S);return ul(ul({},R),{},{y:D,height:O})}var I=cs(0,R.width,S),V=cs(R.stackedBarStart,R.x,S);return ul(ul({},R),{},{width:I,x:V})});return S>0&&(r.current=T??null),T==null?null:A.createElement(no,null,A.createElement(Xit,{props:e,data:T}))}),A.createElement(uL,{label:e.label}),e.children)}function Zit(t){var e=A.useRef(null);return A.createElement(Yit,{previousRectanglesRef:e,props:t})}var Wfe=0,Qit=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:Ma(t,e)}};class Jit extends A.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(e||r==null)return null;var d=ta("recharts-bar",a),h=u;return A.createElement(no,{className:d,id:u},l&&A.createElement("defs",null,A.createElement(Gfe,{clipPathId:h,xAxisId:s,yAxisId:o})),A.createElement(no,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},A.createElement(qit,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),A.createElement(Zit,this.props)))}}var eot={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Wfe,xAxisId:0,yAxisId:0,zIndex:pi.bar};function tot(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=t,{needClip:h}=NL(e,r),p=Uw(),g=Ko(),b=pL(t.children,s5),w=Cr(S=>Cot(S,e,r,g,t.id,b));if(p!=="vertical"&&p!=="horizontal")return null;var _,N=w==null?void 0:w[0];return N==null||N.height==null||N.width==null?_=0:_=p==="vertical"?N.height/2:N.width/2,A.createElement(qfe,{xAxisId:e,yAxisId:r,data:w,dataPointFormatter:Qit,errorBarOffset:_},A.createElement(Jit,yh({},t,{layout:p,needClip:h,data:w,xAxisId:e,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function rot(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:p,cells:g,parentViewBox:b,dataStartIndex:w}=t,_=e==="horizontal"?l:o,N=d?_.scale.domain():null,S=IKe({numericAxis:_}),T=_.scale(S);return h.map((R,z)=>{var G,O,D,I,V,P;d?G=AKe(d[z+w],N):(G=Ma(R,r),Array.isArray(G)||(G=[S,G]));var B=rit(n,Wfe)(G[1],z);if(e==="horizontal"){var F,[ee,Z]=[l.scale(G[0]),l.scale(G[1])];O=iG({axis:o,ticks:c,bandSize:s,offset:a.offset,entry:R,index:z}),D=(F=Z??ee)!==null&&F!==void 0?F:void 0,I=a.size;var ce=ee-Z;if(V=cd(ce)?0:ce,P={x:O,y:p.top,width:I,height:p.height},Math.abs(B)>0&&Math.abs(V)<Math.abs(B)){var ne=to(V||B)*(Math.abs(B)-Math.abs(V));D-=ne,V+=ne}}else{var[ae,me]=[o.scale(G[0]),o.scale(G[1])];if(O=ae,D=iG({axis:l,ticks:u,bandSize:s,offset:a.offset,entry:R,index:z}),I=me-ae,V=a.size,P={x:p.left,y:D,width:p.width,height:V},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var Te=to(I||B)*(Math.abs(B)-Math.abs(I));I+=Te}}if(O==null||D==null||I==null||V==null)return null;var we=ul(ul({},R),{},{stackedBarStart:T,x:O,y:D,width:I,height:V,value:d?G:G[1],payload:R,background:P,tooltipPosition:{x:O+I/2,y:D+V/2},parentViewBox:b},g&&g[z]&&g[z].props);return we}).filter(Boolean)}function not(t){var e=yi(t,eot),r=Ko();return A.createElement(wL,{id:e.id,type:"bar"},n=>A.createElement(A.Fragment,null,A.createElement(Ffe,{legendPayload:$it(e)}),A.createElement(Hit,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),A.createElement(zfe,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:kKe(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),A.createElement(ec,{zIndex:e.zIndex},A.createElement(tot,yh({},e,{id:n})))))}var tO=A.memo(not,x6);tO.displayName="Bar";function AK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function J_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AK(Object(r),!0).forEach(function(n){aot(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function aot(t,e,r){return(e=sot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sot(t){var e=iot(t,"string");return typeof e=="symbol"?e:e+""}function iot(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oot=(t,e)=>e,lot=(t,e,r)=>r,cot=(t,e,r,n)=>n,uot=(t,e,r,n,a)=>a,o5=bt([QS,uot],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),dot=bt([o5],t=>t==null?void 0:t.maxBarSize),fot=(t,e,r,n,a,s)=>s,SK=(t,e,r)=>{var n=r??t;if(!fs(n))return Go(n,e,0)},hot=bt([Kn,QS,oot,lot,cot],(t,e,r,n,a)=>e.filter(s=>t==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),mot=(t,e,r,n)=>{var a=Kn(t);return a==="horizontal"?GI(t,"yAxis",r,n):GI(t,"xAxis",e,n)},pot=(t,e,r)=>{var n=Kn(t);return n==="horizontal"?IW(t,"xAxis",e):IW(t,"yAxis",r)},got=(t,e,r)=>{var n={},a=t.filter(XS),s=t.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,h]=u,p=h.map(b=>b.dataKey),g=SK(e,r,h[0].barSize);return{stackId:d,dataKeys:p,barSize:g}}),c=s.map(u=>{var d=[u.dataKey].filter(p=>p!=null),h=SK(e,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...l,...c]},xot=bt([hot,BJe,pot],got),vot=(t,e,r,n,a)=>{var s,o,l=o5(t,e,r,n,a);if(l!=null){var c=Kn(t),u=ade(t),{maxBarSize:d}=l,h=fs(d)?u:d,p,g;return c==="horizontal"?(p=rm(t,"xAxis",e,n),g=tm(t,"xAxis",e,n)):(p=rm(t,"yAxis",r,n),g=tm(t,"yAxis",r,n)),(s=(o=Fx(p,g,!0))!==null&&o!==void 0?o:h)!==null&&s!==void 0?s:0}},Kfe=(t,e,r,n)=>{var a=Kn(t),s,o;return a==="horizontal"?(s=rm(t,"xAxis",e,n),o=tm(t,"xAxis",e,n)):(s=rm(t,"yAxis",r,n),o=tm(t,"yAxis",r,n)),Fx(s,o)};function bot(t,e,r,n,a){var s=n.length;if(!(s<1)){var o=Go(t,r,0,!0),l,c=[];if(Js(n[0].barSize)){var u=!1,d=r/s,h=n.reduce((N,S)=>N+(S.barSize||0),0);h+=(s-1)*o,h>=r&&(h-=(s-1)*o,o=0),h>=r&&d>0&&(u=!0,d*=.9,h=s*d);var p=(r-h)/2>>0,g={offset:p-o,size:0};l=n.reduce((N,S)=>{var T,R={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:g.offset+g.size+o,size:u?d:(T=S.barSize)!==null&&T!==void 0?T:0}},z=[...N,R];return g=z[z.length-1].position,z},c)}else{var b=Go(e,r,0,!0);r-2*b-(s-1)*o<=0&&(o=0);var w=(r-2*b-(s-1)*o)/s;w>1&&(w>>=0);var _=Js(a)?Math.min(w,a):w;l=n.reduce((N,S,T)=>[...N,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:b+(w+o)*T+(w-_)/2,size:_}}],c)}return l}}var yot=(t,e,r,n,a,s,o)=>{var l=fs(o)?e:o,c=bot(r,n,a!==s?a:s,t,l);return a!==s&&c!=null&&(c=c.map(u=>J_(J_({},u),{},{position:J_(J_({},u.position),{},{offset:u.position.offset-a/2})}))),c},wot=bt([xot,ade,FJe,sde,vot,Kfe,dot],yot),_ot=(t,e,r,n)=>rm(t,"xAxis",e,n),Not=(t,e,r,n)=>rm(t,"yAxis",r,n),Eot=(t,e,r,n)=>tm(t,"xAxis",e,n),Aot=(t,e,r,n)=>tm(t,"yAxis",r,n),Sot=bt([wot,o5],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),jot=(t,e)=>{var r=kM(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var a=t[n];if(a){var{stackedData:s}=a;if(s)return s.find(o=>o.key===r)}}}},Tot=bt([mot,o5],jot),Cot=bt([Pi,qD,_ot,Not,Eot,Aot,Sot,Kn,GS,Kfe,Tot,o5,fot],(t,e,r,n,a,s,o,l,c,u,d,h,p)=>{var{chartData:g,dataStartIndex:b,dataEndIndex:w}=c;if(!(h==null||o==null||e==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||s==null||u==null)){var{data:_}=h,N;if(_!=null&&_.length>0?N=_:N=g==null?void 0:g.slice(b,w+1),N!=null)return rot({layout:l,barSettings:h,pos:o,parentViewBox:e,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:d,displayedData:N,offset:t,cells:p,dataStartIndex:b})}}),Xfe=t=>{var{chartData:e}=t,r=Ga(),n=Ko();return A.useEffect(()=>n?()=>{}:(r($W(e)),()=>{r($W(void 0))}),[e,r,n]),null},jK={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Yfe=Jl({name:"brush",initialState:jK,reducers:{setBrushSettings(t,e){return e.payload==null?jK:e.payload}}}),{setBrushSettings:hdt}=Yfe.actions,kot=Yfe.reducer;function Iot(t,e,r){return(e=Oot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oot(t){var e=Rot(t,"string");return typeof e=="symbol"?e:e+""}function Rot(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class EL{static create(e){return new EL(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(n)switch(n){case"start":return this.scale(e);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?e>=n&&e<=a:e>=a&&e<=n}}Iot(EL,"EPS",1e-4);function Pot(t){return(t%180+180)%180}var Dot=function(e){var{width:r,height:n}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Pot(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Mot={dots:[],areas:[],lines:[]},Zfe=Jl({name:"referenceElements",initialState:Mot,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var r=sd(t).dots.findIndex(n=>n===e.payload);r!==-1&&t.dots.splice(r,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var r=sd(t).areas.findIndex(n=>n===e.payload);r!==-1&&t.areas.splice(r,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var r=sd(t).lines.findIndex(n=>n===e.payload);r!==-1&&t.lines.splice(r,1)}}}),{addDot:mdt,removeDot:pdt,addArea:gdt,removeArea:xdt,addLine:vdt,removeLine:bdt}=Zfe.actions,Lot=Zfe.reducer,Fot=A.createContext(void 0),Bot=t=>{var{children:e}=t,[r]=A.useState("".concat(xy("recharts"),"-clip")),n=_L();if(n==null)return null;var{x:a,y:s,width:o,height:l}=n;return A.createElement(Fot.Provider,{value:r},A.createElement("defs",null,A.createElement("clipPath",{id:r},A.createElement("rect",{x:a,y:s,height:l,width:o}))),e)};function Qfe(t,e){if(e<1)return[];if(e===1)return t;for(var r=[],n=0;n<t.length;n+=e)r.push(t[n]);return r}function Uot(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return Dot(n,r)}function zot(t,e,r){var n=r==="width",{x:a,y:s,width:o,height:l}=t;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function O4(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Vot(t,e){return Qfe(t,e+1)}function $ot(t,e,r,n,a){for(var s=(n||[]).slice(),{start:o,end:l}=e,c=0,u=1,d=o,h=function(){var b=n==null?void 0:n[c];if(b===void 0)return{v:Qfe(n,u)};var w=c,_,N=()=>(_===void 0&&(_=r(b,w)),_),S=b.coordinate,T=c===0||O4(t,S,N,d,l);T||(c=0,d=o,u+=1),T&&(d=S+t*(N()/2+a),c+=u)},p;u<=s.length;)if(p=h(),p)return p.v;return[]}function TK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TK(Object(r),!0).forEach(function(n){Hot(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hot(t,e,r){return(e=qot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qot(t){var e=Got(t,"string");return typeof e=="symbol"?e:e+""}function Got(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wot(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,{start:l}=e,{end:c}=e,u=function(p){var g=s[p],b,w=()=>(b===void 0&&(b=r(g,p)),b);if(p===o-1){var _=t*(g.coordinate+t*w()/2-c);s[p]=g=Fo(Fo({},g),{},{tickCoord:_>0?g.coordinate-_*t:g.coordinate})}else s[p]=g=Fo(Fo({},g),{},{tickCoord:g.coordinate});if(g.tickCoord!=null){var N=O4(t,g.tickCoord,w,l,c);N&&(c=g.tickCoord-t*(w()/2+a),s[p]=Fo(Fo({},g),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return s}function Kot(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=e;if(s){var d=n[l-1],h=r(d,l-1),p=t*(d.coordinate+t*h/2-u);if(o[l-1]=d=Fo(Fo({},d),{},{tickCoord:p>0?d.coordinate-p*t:d.coordinate}),d.tickCoord!=null){var g=O4(t,d.tickCoord,()=>h,c,u);g&&(u=d.tickCoord-t*(h/2+a),o[l-1]=Fo(Fo({},d),{},{isShow:!0}))}}for(var b=s?l-1:l,w=function(S){var T=o[S],R,z=()=>(R===void 0&&(R=r(T,S)),R);if(S===0){var G=t*(T.coordinate-t*z()/2-c);o[S]=T=Fo(Fo({},T),{},{tickCoord:G<0?T.coordinate-G*t:T.coordinate})}else o[S]=T=Fo(Fo({},T),{},{tickCoord:T.coordinate});if(T.tickCoord!=null){var O=O4(t,T.tickCoord,z,c,u);O&&(c=T.tickCoord+t*(z()/2+a),o[S]=Fo(Fo({},T),{},{isShow:!0}))}},_=0;_<b;_++)w(_);return o}function AL(t,e,r){var{tick:n,ticks:a,viewBox:s,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=t;if(!a||!a.length||!n)return[];if(Pr(c)||Vw.isSsr){var p;return(p=Vot(a,Pr(c)?c:0))!==null&&p!==void 0?p:[]}var g=[],b=l==="top"||l==="bottom"?"width":"height",w=d&&b==="width"?pb(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},_=(T,R)=>{var z=typeof u=="function"?u(T.value,R):T.value;return b==="width"?Uot(pb(z,{fontSize:e,letterSpacing:r}),w,h):pb(z,{fontSize:e,letterSpacing:r})[b]},N=a.length>=2?to(a[1].coordinate-a[0].coordinate):1,S=zot(s,N,b);return c==="equidistantPreserveStart"?$ot(N,S,_,a,o):(c==="preserveStart"||c==="preserveStartEnd"?g=Kot(N,S,_,a,o,c==="preserveStartEnd"):g=Wot(N,S,_,a,o),g.filter(T=>T.isShow))}var Xot=t=>{var{ticks:e,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+s,u=o+c+l+(r?n:0);return Math.round(u)}return 0},Yot=["axisLine","width","height","className","hide","ticks","axisType"];function Zot(t,e){if(t==null)return{};var r,n,a=Qot(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Qot(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Qp(){return Qp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qp.apply(null,arguments)}function CK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CK(Object(r),!0).forEach(function(n){Jot(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jot(t,e,r){return(e=elt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function elt(t){var e=tlt(t,"string");return typeof e=="symbol"?e:e+""}function tlt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qf={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:pi.axis};function rlt(t){var{x:e,y:r,width:n,height:a,orientation:s,mirror:o,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var u=oi(oi(oi({},c),Uc(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var d=+(s==="top"&&!o||s==="bottom"&&o);u=oi(oi({},u),{},{x1:e,y1:r+d*a,x2:e+n,y2:r+d*a})}else{var h=+(s==="left"&&!o||s==="right"&&o);u=oi(oi({},u),{},{x1:e+h*n,y1:r,x2:e+h*n,y2:r+a})}return A.createElement("line",Qp({},u,{className:ta("recharts-cartesian-axis-line",Kp(l,"className"))}))}function nlt(t,e,r,n,a,s,o,l,c){var u,d,h,p,g,b,w=l?-1:1,_=t.tickSize||o,N=Pr(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=d=t.coordinate,p=r+ +!l*a,h=p-w*_,b=h-w*c,g=N;break;case"left":h=p=t.coordinate,d=e+ +!l*n,u=d-w*_,g=u-w*c,b=N;break;case"right":h=p=t.coordinate,d=e+ +l*n,u=d+w*_,g=u+w*c,b=N;break;default:u=d=t.coordinate,p=r+ +l*a,h=p+w*_,b=h+w*c,g=N;break}return{line:{x1:u,y1:h,x2:d,y2:p},tick:{x:g,y:b}}}function alt(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function slt(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function ilt(t){var{option:e,tickProps:r,value:n}=t,a,s=ta(r.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))a=A.cloneElement(e,oi(oi({},r),{},{className:s}));else if(typeof e=="function")a=e(oi(oi({},r),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=ta(o,e==null?void 0:e.className)),a=A.createElement(n6,Qp({},r,{className:o}),n)}return a}var olt=A.forwardRef((t,e)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:s,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:p,y:g,width:b,height:w,tickSize:_,tickMargin:N,fontSize:S,letterSpacing:T,getTicksConfig:R,events:z,axisType:G}=t,O=AL(oi(oi({},R),{},{ticks:r}),S,T),D=alt(d,h),I=slt(d,h),V=Uc(R),P=Wp(n),B={};typeof a=="object"&&(B=a);var F=oi(oi({},V),{},{fill:"none"},B),ee=O.map(ne=>oi({entry:ne},nlt(ne,p,g,b,w,d,_,h,N))),Z=ee.map(ne=>{var{entry:ae,line:me}=ne;return A.createElement(no,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},a&&A.createElement("line",Qp({},F,me,{className:ta("recharts-cartesian-axis-tick-line",Kp(a,"className"))})))}),ce=ee.map((ne,ae)=>{var{entry:me,tick:Te}=ne,we=oi(oi(oi(oi({textAnchor:D,verticalAnchor:I},V),{},{stroke:"none",fill:s},P),Te),{},{index:ae,payload:me,visibleTicksCount:O.length,tickFormatter:o,padding:c},u);return A.createElement(no,Qp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(me.value,"-").concat(me.coordinate,"-").concat(me.tickCoord)},Dw(z,me,ae)),n&&A.createElement(ilt,{option:n,tickProps:we,value:"".concat(typeof o=="function"?o(me.value,ae):me.value).concat(l||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(G,"-ticks")},ce.length>0&&A.createElement(ec,{zIndex:pi.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(G,"-tick-labels"),ref:e},ce)),Z.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(G,"-tick-lines")},Z))}),llt=A.forwardRef((t,e)=>{var{axisLine:r,width:n,height:a,className:s,hide:o,ticks:l,axisType:c}=t,u=Zot(t,Yot),[d,h]=A.useState(""),[p,g]=A.useState(""),b=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var _;return Xot({ticks:b.current,label:(_=t.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=A.useCallback(_=>{if(_){var N=_.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=N;var S=N[0];if(S){var T=window.getComputedStyle(S),R=T.fontSize,z=T.letterSpacing;(R!==d||z!==p)&&(h(R),g(z))}}},[d,p]);return o||n!=null&&n<=0||a!=null&&a<=0?null:A.createElement(ec,{zIndex:t.zIndex},A.createElement(no,{className:ta("recharts-cartesian-axis",s)},A.createElement(rlt,{x:t.x,y:t.y,width:n,height:a,orientation:t.orientation,mirror:t.mirror,axisLine:r,otherSvgProps:Uc(t)}),A.createElement(olt,{ref:w,axisType:c,events:u,fontSize:d,getTicksConfig:t,height:t.height,letterSpacing:p,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(Pnt,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(Hnt,{label:t.label,labelRef:t.labelRef}),t.children)))}),SL=A.forwardRef((t,e)=>{var r=yi(t,Qf);return A.createElement(llt,Qp({},r,{ref:e}))});SL.displayName="CartesianAxis";var clt=["x1","y1","x2","y2","key"],ult=["offset"],dlt=["xAxisId","yAxisId"],flt=["xAxisId","yAxisId"];function kK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Uo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kK(Object(r),!0).forEach(function(n){hlt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hlt(t,e,r){return(e=mlt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mlt(t){var e=plt(t,"string");return typeof e=="symbol"?e:e+""}function plt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function np(){return np=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},np.apply(null,arguments)}function R4(t,e){if(t==null)return{};var r,n,a=glt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function glt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var xlt=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:o,ry:l}=t;return A.createElement("rect",{x:n,y:a,ry:l,width:s,height:o,stroke:"none",fill:e,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Jfe(t){var{option:e,lineItemProps:r}=t,n;if(A.isValidElement(e))n=A.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var a,{x1:s,y1:o,x2:l,y2:c,key:u}=r,d=R4(r,clt),h=(a=Uc(d))!==null&&a!==void 0?a:{},{offset:p}=h,g=R4(h,ult);n=A.createElement("line",np({},g,{x1:s,y1:o,x2:l,y2:c,fill:"none",key:u}))}return n}function vlt(t){var{x:e,width:r,horizontal:n=!0,horizontalPoints:a}=t;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=t,l=R4(t,dlt),c=a.map((u,d)=>{var h=Uo(Uo({},l),{},{x1:e,y1:u,x2:e+r,y2:u,key:"line-".concat(d),index:d});return A.createElement(Jfe,{key:"line-".concat(d),option:n,lineItemProps:h})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function blt(t){var{y:e,height:r,vertical:n=!0,verticalPoints:a}=t;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:o}=t,l=R4(t,flt),c=a.map((u,d)=>{var h=Uo(Uo({},l),{},{x1:u,y1:e,x2:u,y2:e+r,key:"line-".concat(d),index:d});return A.createElement(Jfe,{option:n,lineItemProps:h,key:"line-".concat(d)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function ylt(t){var{horizontalFill:e,fillOpacity:r,x:n,y:a,width:s,height:o,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length||l==null)return null;var u=l.map(h=>Math.round(h+a-a)).sort((h,p)=>h-p);a!==u[0]&&u.unshift(0);var d=u.map((h,p)=>{var g=!u[p+1],b=g?a+o-h:u[p+1]-h;if(b<=0)return null;var w=p%e.length;return A.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:b,width:s,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function wlt(t){var{vertical:e=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:o,height:l,verticalPoints:c}=t;if(!e||!r||!r.length)return null;var u=c.map(h=>Math.round(h+a-a)).sort((h,p)=>h-p);a!==u[0]&&u.unshift(0);var d=u.map((h,p)=>{var g=!u[p+1],b=g?a+o-h:u[p+1]-h;if(b<=0)return null;var w=p%r.length;return A.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:b,height:l,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var _lt=(t,e)=>{var{xAxis:r,width:n,height:a,offset:s}=t;return jce(AL(Uo(Uo(Uo({},Qf),r),{},{ticks:Tce(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,e)},Nlt=(t,e)=>{var{yAxis:r,width:n,height:a,offset:s}=t;return jce(AL(Uo(Uo(Uo({},Qf),r),{},{ticks:Tce(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,e)},Elt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:pi.grid};function sE(t){var e=WD(),r=KD(),n=Bce(),a=Uo(Uo({},yi(t,Elt)),{},{x:Pr(t.x)?t.x:n.left,y:Pr(t.y)?t.y:n.top,width:Pr(t.width)?t.width:n.width,height:Pr(t.height)?t.height:n.height}),{xAxisId:s,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:p,verticalValues:g}=a,b=Ko(),w=Cr(I=>OW(I,"xAxis",s,b)),_=Cr(I=>OW(I,"yAxis",o,b));if(!Yd(u)||!Yd(d)||!Pr(l)||!Pr(c))return null;var N=a.verticalCoordinatesGenerator||_lt,S=a.horizontalCoordinatesGenerator||Nlt,{horizontalPoints:T,verticalPoints:R}=a;if((!T||!T.length)&&typeof S=="function"){var z=p&&p.length,G=S({yAxis:_?Uo(Uo({},_),{},{ticks:z?p:_.ticks}):void 0,width:e??u,height:r??d,offset:n},z?!0:h);a4(Array.isArray(G),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof G,"]")),Array.isArray(G)&&(T=G)}if((!R||!R.length)&&typeof N=="function"){var O=g&&g.length,D=N({xAxis:w?Uo(Uo({},w),{},{ticks:O?g:w.ticks}):void 0,width:e??u,height:r??d,offset:n},O?!0:h);a4(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(R=D)}return A.createElement(ec,{zIndex:a.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(xlt,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),A.createElement(ylt,np({},a,{horizontalPoints:T})),A.createElement(wlt,np({},a,{verticalPoints:R})),A.createElement(vlt,np({},a,{offset:n,horizontalPoints:T,xAxis:w,yAxis:_})),A.createElement(blt,np({},a,{offset:n,verticalPoints:R,xAxis:w,yAxis:_}))))}sE.displayName="CartesianGrid";var ehe=(t,e,r,n)=>rm(t,"xAxis",e,n),the=(t,e,r,n)=>tm(t,"xAxis",e,n),rhe=(t,e,r,n)=>rm(t,"yAxis",r,n),nhe=(t,e,r,n)=>tm(t,"yAxis",r,n),Alt=bt([Kn,ehe,rhe,the,nhe],(t,e,r,n,a)=>vm(t,"xAxis")?Fx(e,n,!1):Fx(r,a,!1)),Slt=(t,e,r,n,a)=>a;function jlt(t){return t.type==="line"}var Tlt=bt([QS,Slt],(t,e)=>t.filter(jlt).find(r=>r.id===e)),Clt=bt([Kn,ehe,rhe,the,nhe,Tlt,Alt,GS],(t,e,r,n,a,s,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(s==null||e==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:h,data:p}=s,g;if(p!=null&&p.length>0?g=p:g=c==null?void 0:c.slice(u,d+1),g!=null)return Ylt({layout:t,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:h,bandSize:o,displayedData:g})}});function klt(t){var e=Wp(t),r=3,n=2;if(e!=null){var{r:a,strokeWidth:s}=e,o=Number(a),l=Number(s);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(l)||l<0)&&(l=n),{r:o,strokeWidth:l}}return{r,strokeWidth:n}}var Ilt=["id"],Olt=["type","layout","connectNulls","needClip","shape"],Rlt=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Iy(){return Iy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Iy.apply(null,arguments)}function IK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IK(Object(r),!0).forEach(function(n){Plt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Plt(t,e,r){return(e=Dlt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dlt(t){var e=Mlt(t,"string");return typeof e=="symbol"?e:e+""}function Mlt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jL(t,e){if(t==null)return{};var r,n,a=Llt(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Llt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Flt=t=>{var{dataKey:e,name:r,stroke:n,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:n,value:vv(r,e),payload:t}]},Blt=A.memo(t=>{var{dataKey:e,data:r,stroke:n,strokeWidth:a,fill:s,name:o,hide:l,unit:c,tooltipType:u}=t,d={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:e,nameKey:void 0,name:vv(o,e),hide:l,type:u,color:n,unit:c}};return A.createElement(yL,{tooltipEntrySettings:d})}),ahe=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function Ult(t,e){for(var r=t.length%2!==0?[...t,0]:t,n=[],a=0;a<e;++a)n=[...n,...r];return n}var zlt=(t,e,r)=>{var n=r.reduce((h,p)=>h+p);if(!n)return ahe(e,t);for(var a=Math.floor(t/n),s=t%n,o=e-t,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>s){l=[...r.slice(0,c),s-u];break}var d=l.length%2===0?[0,o]:[o];return[...Ult(r,a),...l,...d].map(h=>"".concat(h,"px")).join(", ")};function Vlt(t){var{clipPathId:e,points:r,props:n}=t,{dot:a,dataKey:s,needClip:o}=n,{id:l}=n,c=jL(n,Ilt),u=Uc(c);return A.createElement(Sst,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:u,needClip:o,clipPathId:e})}function $lt(t){var{showLabels:e,children:r,points:n}=t,a=A.useMemo(()=>n==null?void 0:n.map(s=>{var o,l,c={x:(o=s.x)!==null&&o!==void 0?o:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Nd(Nd({},c),{},{value:s.value,payload:s.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return A.createElement(jfe,{value:e?a:void 0},r)}function OK(t){var{clipPathId:e,pathRef:r,points:n,strokeDasharray:a,props:s}=t,{type:o,layout:l,connectNulls:c,needClip:u,shape:d}=s,h=jL(s,Olt),p=Nd(Nd({},yl(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(e,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:a??s.strokeDasharray});return A.createElement(A.Fragment,null,(n==null?void 0:n.length)>1&&A.createElement(gL,Iy({shapeType:"curve",option:d},p,{pathRef:r})),A.createElement(Vlt,{points:n,clipPathId:e,props:s}))}function Hlt(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function qlt(t){var{clipPathId:e,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=t,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:p,width:g,height:b,onAnimationEnd:w,onAnimationStart:_}=r,N=a.current,S=Hw(o,"recharts-line-"),T=A.useRef(S),[R,z]=A.useState(!1),G=!R,O=A.useCallback(()=>{typeof w=="function"&&w(),z(!1)},[w]),D=A.useCallback(()=>{typeof _=="function"&&_(),z(!0)},[_]),I=Hlt(n.current),V=A.useRef(0);T.current!==S&&(V.current=s.current,T.current=S);var P=V.current;return A.createElement($lt,{points:o,showLabels:G},r.children,A.createElement($w,{animationId:S,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:O,onAnimationStart:D,key:S},B=>{var F=cs(P,I+P,B),ee=Math.min(F,I),Z;if(c)if(l){var ce="".concat(l).split(/[,\s]+/gim).map(me=>parseFloat(me));Z=zlt(ee,I,ce)}else Z=ahe(I,ee);else Z=l==null?void 0:String(l);if(B>0&&I>0&&(a.current=o,s.current=Math.max(s.current,ee)),N){var ne=N.length/o.length,ae=B===1?o:o.map((me,Te)=>{var we=Math.floor(Te*ne);if(N[we]){var q=N[we];return Nd(Nd({},me),{},{x:cs(q.x,me.x,B),y:cs(q.y,me.y,B)})}return p?Nd(Nd({},me),{},{x:cs(g*2,me.x,B),y:cs(b/2,me.y,B)}):Nd(Nd({},me),{},{x:me.x,y:me.y})});return a.current=ae,A.createElement(OK,{props:r,points:ae,clipPathId:e,pathRef:n,strokeDasharray:Z})}return A.createElement(OK,{props:r,points:o,clipPathId:e,pathRef:n,strokeDasharray:Z})}),A.createElement(uL,{label:r.label}))}function Glt(t){var{clipPathId:e,props:r}=t,n=A.useRef(null),a=A.useRef(0),s=A.useRef(null);return A.createElement(qlt,{props:r,clipPathId:e,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:s})}var Wlt=(t,e)=>{var r,n;return{x:(r=t.x)!==null&&r!==void 0?r:void 0,y:(n=t.y)!==null&&n!==void 0?n:void 0,value:t.value,errorVal:Ma(t.payload,e)}};class Klt extends A.Component{render(){var{hide:e,dot:r,points:n,className:a,xAxisId:s,yAxisId:o,top:l,left:c,width:u,height:d,id:h,needClip:p,zIndex:g}=this.props;if(e)return null;var b=ta("recharts-line",a),w=h,{r:_,strokeWidth:N}=klt(r),S=Mfe(r),T=_*2+N,R=p?"url(#clipPath-".concat(S?"":"dots-").concat(w,")"):void 0;return A.createElement(ec,{zIndex:g},A.createElement(no,{className:b},p&&A.createElement("defs",null,A.createElement(Gfe,{clipPathId:w,xAxisId:s,yAxisId:o}),!S&&A.createElement("clipPath",{id:"clipPath-dots-".concat(w)},A.createElement("rect",{x:c-T/2,y:l-T/2,width:u+T,height:d+T}))),A.createElement(qfe,{xAxisId:s,yAxisId:o,data:n,dataPointFormatter:Wlt,errorBarOffset:0},A.createElement(Glt,{props:this.props,clipPathId:w}))),A.createElement(Gst,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:R}))}}var she={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:pi.line,type:"linear"};function Xlt(t){var e=yi(t,she),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:p,xAxisId:g,yAxisId:b,id:w}=e,_=jL(e,Rlt),{needClip:N}=NL(g,b),S=_L(),T=Uw(),R=Ko(),z=Cr(V=>Clt(V,g,b,R,w));if(T!=="horizontal"&&T!=="vertical"||z==null||S==null)return null;var{height:G,width:O,x:D,y:I}=S;return A.createElement(Klt,Iy({},_,{id:w,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:o,isAnimationActive:d,hide:u,label:h,legendType:p,xAxisId:g,yAxisId:b,points:z,layout:T,height:G,width:O,left:D,top:I,needClip:N}))}function Ylt(t){var{layout:e,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:o,bandSize:l,displayedData:c}=t;return c.map((u,d)=>{var h=Ma(u,o);if(e==="horizontal"){var p=sG({axis:r,ticks:a,bandSize:l,entry:u,index:d}),g=fs(h)?null:n.scale(h);return{x:p,y:g,value:h,payload:u}}var b=fs(h)?null:r.scale(h),w=sG({axis:n,ticks:s,bandSize:l,entry:u,index:d});return b==null||w==null?null:{x:b,y:w,value:h,payload:u}}).filter(Boolean)}function Zlt(t){var e=yi(t,she),r=Ko();return A.createElement(wL,{id:e.id,type:"line"},n=>A.createElement(A.Fragment,null,A.createElement(Ffe,{legendPayload:Flt(e)}),A.createElement(Blt,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),A.createElement(zfe,{type:"line",id:n,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:r}),A.createElement(Xlt,Iy({},e,{id:n}))))}var rO=A.memo(Zlt,x6);rO.displayName="Line";var Qlt=["domain","range"],Jlt=["domain","range"];function RK(t,e){if(t==null)return{};var r,n,a=ect(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function ect(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function PK(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function ihe(t,e){if(t===e)return!0;var{domain:r,range:n}=t,a=RK(t,Qlt),{domain:s,range:o}=e,l=RK(e,Jlt);return!PK(r,s)||!PK(n,o)?!1:x6(a,l)}var tct=["dangerouslySetInnerHTML","ticks"],rct=["id"];function nO(){return nO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nO.apply(null,arguments)}function DK(t,e){if(t==null)return{};var r,n,a=nct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function act(t){var e=Ga(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?e(Ist(t)):r.current!==t&&e(Ost({prev:r.current,next:t})),r.current=t},[t,e]),A.useLayoutEffect(()=>()=>{r.current&&(e(Rst(r.current)),r.current=null)},[e]),null}var sct=t=>{var{xAxisId:e,className:r}=t,n=Cr(qD),a=Ko(),s="xAxis",o=Cr(_=>Av(_,s,e,a)),l=Cr(_=>Lde(_,s,e,a)),c=Cr(_=>Rde(_,e)),u=Cr(_=>Fet(_,e)),d=Cr(_=>mde(_,e));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:h,ticks:p}=t,g=DK(t,tct),{id:b}=d,w=DK(d,rct);return A.createElement(SL,nO({},g,w,{scale:o,x:u.x,y:u.y,width:c.width,height:c.height,className:ta("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:l,axisType:s}))},ict={allowDataOverflow:qi.allowDataOverflow,allowDecimals:qi.allowDecimals,allowDuplicatedCategory:qi.allowDuplicatedCategory,angle:qi.angle,axisLine:Qf.axisLine,height:qi.height,hide:!1,includeHidden:qi.includeHidden,interval:qi.interval,minTickGap:qi.minTickGap,mirror:qi.mirror,orientation:qi.orientation,padding:qi.padding,reversed:qi.reversed,scale:qi.scale,tick:qi.tick,tickCount:qi.tickCount,tickLine:Qf.tickLine,tickSize:Qf.tickSize,type:qi.type,xAxisId:0},oct=t=>{var e=yi(t,ict);return A.createElement(A.Fragment,null,A.createElement(act,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),A.createElement(sct,e))},iE=A.memo(oct,ihe);iE.displayName="XAxis";var lct=["dangerouslySetInnerHTML","ticks"],cct=["id"];function aO(){return aO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},aO.apply(null,arguments)}function MK(t,e){if(t==null)return{};var r,n,a=uct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function uct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function dct(t){var e=Ga(),r=A.useRef(null);return A.useLayoutEffect(()=>{r.current===null?e(Pst(t)):r.current!==t&&e(Dst({prev:r.current,next:t})),r.current=t},[t,e]),A.useLayoutEffect(()=>()=>{r.current&&(e(Mst(r.current)),r.current=null)},[e]),null}var fct=t=>{var{yAxisId:e,className:r,width:n,label:a}=t,s=A.useRef(null),o=A.useRef(null),l=Cr(qD),c=Ko(),u=Ga(),d="yAxis",h=Cr(z=>Av(z,d,e,c)),p=Cr(z=>Pde(z,e)),g=Cr(z=>Uet(z,e)),b=Cr(z=>Lde(z,d,e,c)),w=Cr(z=>pde(z,e));if(A.useLayoutEffect(()=>{if(!(n!=="auto"||!p||cL(a)||A.isValidElement(a)||w==null)){var z=s.current;if(z){var G=z.getCalculatedWidth();Math.round(p.width)!==Math.round(G)&&u(Lst({id:e,width:G}))}}},[b,p,u,a,e,n,w]),p==null||g==null||w==null)return null;var{dangerouslySetInnerHTML:_,ticks:N}=t,S=MK(t,lct),{id:T}=w,R=MK(w,cct);return A.createElement(SL,aO({},S,R,{ref:s,labelRef:o,scale:h,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:ta("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:b,axisType:d}))},hct={allowDataOverflow:Gi.allowDataOverflow,allowDecimals:Gi.allowDecimals,allowDuplicatedCategory:Gi.allowDuplicatedCategory,angle:Gi.angle,axisLine:Qf.axisLine,hide:!1,includeHidden:Gi.includeHidden,interval:Gi.interval,minTickGap:Gi.minTickGap,mirror:Gi.mirror,orientation:Gi.orientation,padding:Gi.padding,reversed:Gi.reversed,scale:Gi.scale,tick:Gi.tick,tickCount:Gi.tickCount,tickLine:Qf.tickLine,tickSize:Qf.tickSize,type:Gi.type,width:Gi.width,yAxisId:0},mct=t=>{var e=yi(t,hct);return A.createElement(A.Fragment,null,A.createElement(dct,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),A.createElement(fct,e))},oE=A.memo(mct,ihe);oE.displayName="YAxis";var pct=(t,e)=>e,TL=bt([pct,Kn,fde,Mi,Jde,Ih,rrt,Pi],crt),CL=t=>{var e=t.currentTarget.getBoundingClientRect(),r=e.width/t.currentTarget.offsetWidth,n=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/r),chartY:Math.round((t.clientY-e.top)/n)}},ohe=Tu("mouseClick"),lhe=Fw();lhe.startListening({actionCreator:ohe,effect:(t,e)=>{var r=t.payload,n=TL(e.getState(),CL(r));(n==null?void 0:n.activeIndex)!=null&&e.dispatch(ett({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var sO=Tu("mouseMove"),che=Fw(),eN=null;che.startListening({actionCreator:sO,effect:(t,e)=>{var r=t.payload;eN!==null&&cancelAnimationFrame(eN);var n=CL(r);eN=requestAnimationFrame(()=>{var a=e.getState(),s=ZM(a,a.tooltip.settings.shared);if(s==="axis"){var o=TL(a,n);(o==null?void 0:o.activeIndex)!=null?e.dispatch(qde({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(Hde())}eN=null})}});var LK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},uhe=Jl({name:"rootProps",initialState:LK,reducers:{updateOptions:(t,e)=>{var r;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(r=e.payload.barGap)!==null&&r!==void 0?r:LK.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),gct=uhe.reducer,{updateOptions:xct}=uhe.actions,dhe=Jl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:vct}=dhe.actions,bct=dhe.reducer,fhe=Tu("keyDown"),hhe=Tu("focus"),kL=Fw();kL.startListening({actionCreator:fhe,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=QM(a,jv(r),Jw(r),n5(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=Ih(r);if(s==="Enter"){var u=A4(r,"axis","hover",String(a.index));e.dispatch(KI({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:u}));return}var d=Het(r),h=d==="left-to-right"?1:-1,p=s==="ArrowRight"?1:-1,g=l+p*h;if(!(c==null||g>=c.length||g<0)){var b=A4(r,"axis","hover",String(g));e.dispatch(KI({active:!0,activeIndex:g.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}}});kL.startListening({actionCreator:hhe,effect:(t,e)=>{var r=e.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",o=A4(r,"axis","hover",String(s));e.dispatch(KI({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:o}))}}}});var tu=Tu("externalEvent"),mhe=Fw(),vC=new Map;mhe.startListening({actionCreator:tu,effect:(t,e)=>{var{handler:r,reactEvent:n}=t.payload;if(r!=null){n.persist();var a=n.type,s=vC.get(a);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Utt(l),activeDataKey:nL(l),activeIndex:nm(l),activeLabel:rfe(l),activeTooltipIndex:nm(l),isTooltipActive:ztt(l)};r(c,n)}finally{vC.delete(a)}});vC.set(a,o)}}});var yct=bt([Sv],t=>t.tooltipItemPayloads),wct=bt([yct,t5,(t,e,r)=>e,(t,e,r)=>r],(t,e,r,n)=>{var a=t.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var o=e(s,r);return o}}}),phe=Tu("touchMove"),ghe=Fw();ghe.startListening({actionCreator:phe,effect:(t,e)=>{var r=t.payload;if(!(r.touches==null||r.touches.length===0)){var n=e.getState(),a=ZM(n,n.tooltip.settings.shared);if(a==="axis"){var s=TL(n,CL({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(qde({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(kce),d=(o=c.getAttribute(Ice))!==null&&o!==void 0?o:void 0,h=wct(e.getState(),u,d);e.dispatch($de({activeDataKey:d,activeIndex:u,activeCoordinate:h}))}}}});var _ct=Qle({brush:kot,cartesianAxis:Fst,chartData:Brt,errorBars:ait,graphicalItems:Hat,layout:bKe,legend:NXe,options:Prt,polarAxis:oat,polarOptions:bct,referenceElements:Lot,rootProps:gct,tooltip:ttt,zIndex:Nrt}),Nct=function(e){return HWe({reducer:_ct,preloadedState:e,middleware:r=>{var n;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((n="es6")!==null&&n!==void 0?n:"")}).concat([lhe.middleware,che.middleware,kL.middleware,mhe.middleware,ghe.middleware])},enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(hce({type:"raf"}))},devTools:Vw.devToolsEnabled})};function xhe(t){var{preloadedState:e,children:r,reduxStoreName:n}=t,a=Ko(),s=A.useRef(null);if(a)return r;s.current==null&&(s.current=Nct(e));var o=PD;return A.createElement(Oit,{context:o,store:s.current},r)}function Ect(t){var{layout:e,margin:r}=t,n=Ga(),a=Ko();return A.useEffect(()=>{a||(n(gKe(e)),n(pKe(r)))},[n,a,e,r]),null}var vhe=A.memo(Ect,x6);function bhe(t){var e=Ga();return A.useEffect(()=>{e(xct(t))},[e,t]),null}function FK(t){var{zIndex:e,isPanorama:r}=t,n=r?"recharts-zindex-panorama-":"recharts-zindex-",a=Bfe("".concat(n).concat(e)),s=Ga();return A.useLayoutEffect(()=>(s(wrt({zIndex:e,elementId:a,isPanorama:r})),()=>{s(_rt({zIndex:e,isPanorama:r}))}),[s,e,a,r]),A.createElement("g",{tabIndex:-1,id:a})}function BK(t){var{children:e,isPanorama:r}=t,n=Cr(drt);if(!n||n.length===0)return e;var a=n.filter(o=>o<0),s=n.filter(o=>o>0);return A.createElement(A.Fragment,null,a.map(o=>A.createElement(FK,{key:o,zIndex:o,isPanorama:r})),e,s.map(o=>A.createElement(FK,{key:o,zIndex:o,isPanorama:r})))}var Act=["children"];function Sct(t,e){if(t==null)return{};var r,n,a=jct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function jct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function P4(){return P4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},P4.apply(null,arguments)}var Tct={width:"100%",height:"100%",display:"block"},Cct=A.forwardRef((t,e)=>{var r=WD(),n=KD(),a=Yce();if(!Yd(r)||!Yd(n))return null;var{children:s,otherAttributes:o,title:l,desc:c}=t,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),A.createElement(vD,P4({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:Tct,ref:e}),s)}),kct=t=>{var{children:e}=t,r=Cr(PS);if(!r)return null;var{width:n,height:a,y:s,x:o}=r;return A.createElement(vD,{width:n,height:a,x:o,y:s},e)},UK=A.forwardRef((t,e)=>{var{children:r}=t,n=Sct(t,Act),a=Ko();return a?A.createElement(kct,null,A.createElement(BK,{isPanorama:!0},r)):A.createElement(Cct,P4({ref:e},n),A.createElement(BK,{isPanorama:!1},r))});function Ict(){var t=Ga(),[e,r]=A.useState(null),n=Cr(LKe);return A.useEffect(()=>{if(e!=null){var a=e.getBoundingClientRect(),s=a.width/e.offsetWidth;Js(s)&&s!==n&&t(vKe(s))}},[e,t,n]),r}function zK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oct(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zK(Object(r),!0).forEach(function(n){Rct(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rct(t,e,r){return(e=Pct(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pct(t){var e=Dct(t,"string");return typeof e=="symbol"?e:e+""}function Dct(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jp.apply(null,arguments)}var Mct=()=>(Krt(),null);function D4(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Lct=A.forwardRef((t,e)=>{var r,n,a=A.useRef(null),[s,o]=A.useState({containerWidth:D4((r=t.style)===null||r===void 0?void 0:r.width),containerHeight:D4((n=t.style)===null||n===void 0?void 0:n.height)}),l=A.useCallback((u,d)=>{o(h=>{var p=Math.round(u),g=Math.round(d);return h.containerWidth===p&&h.containerHeight===g?h:{containerWidth:p,containerHeight:g}})},[]),c=A.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=u.getBoundingClientRect();l(d,h);var p=b=>{var{width:w,height:_}=b[0].contentRect;l(w,_)},g=new ResizeObserver(p);g.observe(u),a.current=g}},[e,l]);return A.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),A.createElement(A.Fragment,null,A.createElement(MS,{width:s.containerWidth,height:s.containerHeight}),A.createElement("div",Jp({ref:c},t)))}),Fct=A.forwardRef((t,e)=>{var{width:r,height:n}=t,[a,s]=A.useState({containerWidth:D4(r),containerHeight:D4(n)}),o=A.useCallback((c,u)=>{s(d=>{var h=Math.round(c),p=Math.round(u);return d.containerWidth===h&&d.containerHeight===p?d:{containerWidth:h,containerHeight:p}})},[]),l=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[e,o]);return A.createElement(A.Fragment,null,A.createElement(MS,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",Jp({ref:l},t)))}),Bct=A.forwardRef((t,e)=>{var{width:r,height:n}=t;return A.createElement(A.Fragment,null,A.createElement(MS,{width:r,height:n}),A.createElement("div",Jp({ref:e},t)))}),Uct=A.forwardRef((t,e)=>{var{width:r,height:n}=t;return mh(r)||mh(n)?A.createElement(Fct,Jp({},t,{ref:e})):A.createElement(Bct,Jp({},t,{ref:e}))});function zct(t){return t===!0?Lct:Uct}var Vct=A.forwardRef((t,e)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:g,onTouchMove:b,onTouchStart:w,style:_,width:N,responsive:S,dispatchTouchEvents:T=!0}=t,R=A.useRef(null),z=Ga(),[G,O]=A.useState(null),[D,I]=A.useState(null),V=Ict(),P=GD(),B=(P==null?void 0:P.width)>0?P.width:N,F=(P==null?void 0:P.height)>0?P.height:a,ee=A.useCallback(pe=>{V(pe),typeof e=="function"&&e(pe),O(pe),I(pe),pe!=null&&(R.current=pe)},[V,e,O,I]),Z=A.useCallback(pe=>{z(ohe(pe)),z(tu({handler:s,reactEvent:pe}))},[z,s]),ce=A.useCallback(pe=>{z(sO(pe)),z(tu({handler:u,reactEvent:pe}))},[z,u]),ne=A.useCallback(pe=>{z(Hde()),z(tu({handler:d,reactEvent:pe}))},[z,d]),ae=A.useCallback(pe=>{z(sO(pe)),z(tu({handler:h,reactEvent:pe}))},[z,h]),me=A.useCallback(()=>{z(hhe())},[z]),Te=A.useCallback(pe=>{z(fhe(pe.key))},[z]),we=A.useCallback(pe=>{z(tu({handler:o,reactEvent:pe}))},[z,o]),q=A.useCallback(pe=>{z(tu({handler:l,reactEvent:pe}))},[z,l]),Y=A.useCallback(pe=>{z(tu({handler:c,reactEvent:pe}))},[z,c]),X=A.useCallback(pe=>{z(tu({handler:p,reactEvent:pe}))},[z,p]),re=A.useCallback(pe=>{z(tu({handler:w,reactEvent:pe}))},[z,w]),se=A.useCallback(pe=>{T&&z(phe(pe)),z(tu({handler:b,reactEvent:pe}))},[z,T,b]),Ce=A.useCallback(pe=>{z(tu({handler:g,reactEvent:pe}))},[z,g]),je=zct(S);return A.createElement(cfe.Provider,{value:G},A.createElement(Qoe.Provider,{value:D},A.createElement(je,{width:B??(_==null?void 0:_.width),height:F??(_==null?void 0:_.height),className:ta("recharts-wrapper",n),style:Oct({position:"relative",cursor:"default",width:B,height:F},_),onClick:Z,onContextMenu:we,onDoubleClick:q,onFocus:me,onKeyDown:Te,onMouseDown:Y,onMouseEnter:ce,onMouseLeave:ne,onMouseMove:ae,onMouseUp:X,onTouchEnd:Ce,onTouchMove:se,onTouchStart:re,ref:ee},A.createElement(Mct,null),r)))}),$ct=["width","height","responsive","children","className","style","compact","title","desc"];function Hct(t,e){if(t==null)return{};var r,n,a=qct(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function qct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var yhe=A.forwardRef((t,e)=>{var{width:r,height:n,responsive:a,children:s,className:o,style:l,compact:c,title:u,desc:d}=t,h=Hct(t,$ct),p=Uc(h);return c?A.createElement(A.Fragment,null,A.createElement(MS,{width:r,height:n}),A.createElement(UK,{otherAttributes:p,title:u,desc:d},s)):A.createElement(Vct,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(UK,{otherAttributes:p,title:u,desc:d,ref:e},A.createElement(Bot,null,s)))});function iO(){return iO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},iO.apply(null,arguments)}var Gct={top:5,right:5,bottom:5,left:5},Wct={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Gct,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},whe=A.forwardRef(function(e,r){var n,a=yi(e.categoricalChartProps,Wct),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(xhe,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:s},A.createElement(Xfe,{chartData:u.data}),A.createElement(vhe,{layout:a.layout,margin:a.margin}),A.createElement(bhe,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),A.createElement(yhe,iO({},a,{ref:r})))}),Kct=["axis"],Xct=A.forwardRef((t,e)=>A.createElement(whe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kct,tooltipPayloadSearcher:lL,categoricalChartProps:t,ref:e})),Yct=["axis","item"],VK=A.forwardRef((t,e)=>A.createElement(whe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Yct,tooltipPayloadSearcher:lL,categoricalChartProps:t,ref:e}));function Zct(t){var e=Ga();return A.useEffect(()=>{e(vct(t))},[e,t]),null}var Qct=["layout"];function oO(){return oO=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oO.apply(null,arguments)}function Jct(t,e){if(t==null)return{};var r,n,a=eut(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)r=s[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function eut(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var tut={top:5,right:5,bottom:5,left:5},_he={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tut,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},rut=A.forwardRef(function(e,r){var n,a=yi(e.categoricalChartProps,_he),{layout:s}=a,o=Jct(a,Qct),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=e,h={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return A.createElement(xhe,{preloadedState:{options:h},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},A.createElement(Xfe,{chartData:a.data}),A.createElement(vhe,{layout:s,margin:a.margin}),A.createElement(bhe,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),A.createElement(Zct,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),A.createElement(yhe,oO({},o,{ref:r})))});function $K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function HK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$K(Object(r),!0).forEach(function(n){nut(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$K(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nut(t,e,r){return(e=aut(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aut(t){var e=sut(t,"string");return typeof e=="symbol"?e:e+""}function sut(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iut=["item"],out=HK(HK({},_he),{},{layout:"centric",startAngle:0,endAngle:360}),lut=A.forwardRef((t,e)=>{var r=yi(t,out);return A.createElement(rut,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:iut,tooltipPayloadSearcher:lL,categoricalChartProps:r,ref:e})});const cut=()=>{const[t,e]=A.useState([]),[r,n]=A.useState(!0),[a,s]=A.useState([]),[o,l]=A.useState("BHD");A.useEffect(()=>{c()},[]);const c=async()=>{n(!0);try{const p=await wt.get("/empleados");if(p.data.success){const g=p.data.data.map(b=>({...b,salary:b.salarioBase||0,montoAPagar:b.salarioBase||0,banco:b.banco||"BHD",cuenta:b.cuentaBanco||""}));e(g)}}catch(p){console.error("Error cargando empleados:",p),Ke.error("Error cargando empleados")}finally{n(!1)}},u=p=>{p.target.checked?s(t.map(g=>g.id)):s([])},d=p=>{a.includes(p)?s(a.filter(g=>g!==p)):s([...a,p])},h=async()=>{var b,w;if(a.length===0){Ke.warning("Seleccione al menos un empleado");return}const p=t.filter(_=>a.includes(_.id)).map(_=>({userId:_.id,monto:parseFloat(_.montoAPagar),nombre:_.nombre,cuenta:_.cuenta})),g=p.filter(_=>!_.cuenta);if(g.length>0){Ke.error(`Hay ${g.length} empleados seleccionados sin cuenta bancaria.`);return}try{const _=await wt.post("/nomina/generar-archivo-banco",{banco:o,nomina:p});if(_.data.success){const N=new Blob([_.data.content],{type:"text/plain"}),S=window.URL.createObjectURL(N),T=document.createElement("a");T.href=S,T.download=_.data.fileName,document.body.appendChild(T),T.click(),window.URL.revokeObjectURL(S),Ke.success(`Archivo de Nmina (${o}) generado exitosamente`)}}catch(_){console.error("Error generando nmina:",_),Ke.error(((w=(b=_.response)==null?void 0:b.data)==null?void 0:w.error)||"Error generando archivo")}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Generar Archivo de Nmina"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione el banco, los empleados y genere el archivo."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-emerald-500 focus:outline-none",children:[i.jsx("option",{value:"BHD",children:"Banco BHD"}),i.jsx("option",{value:"POPULAR",children:"Banco Popular"}),i.jsx("option",{value:"BANRESERVAS",children:"Banreservas"})]}),i.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[i.jsx(BA,{className:"w-4 h-4"}),"Generar TXT"]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-400",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4 w-10",children:i.jsx("input",{type:"checkbox",onChange:u,checked:a.length===t.length&&t.length>0})}),i.jsx("th",{className:"p-4",children:"Empleado"}),i.jsx("th",{className:"p-4",children:"Cdula"}),i.jsx("th",{className:"p-4",children:"Banco"}),i.jsx("th",{className:"p-4",children:"Cuenta"}),i.jsx("th",{className:"p-4 text-right",children:"Monto a Pagar"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"p-8 text-center",children:"Cargando empleados..."})}):t.map(p=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"p-4",children:i.jsx("input",{type:"checkbox",checked:a.includes(p.id),onChange:()=>d(p.id)})}),i.jsx("td",{className:"p-4 font-medium text-slate-900 dark:text-white",children:p.nombre}),i.jsx("td",{className:"p-4 text-slate-500",children:p.cedula||"---"}),i.jsx("td",{className:"p-4",children:i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:"BHD"})}),i.jsx("td",{className:`p-4 font-mono ${p.cuenta?"text-slate-600 dark:text-slate-400":"text-rose-500"}`,children:p.cuenta||"Sin Cuenta Configurada"}),i.jsxs("td",{className:"p-4 text-right font-medium text-slate-900 dark:text-white",children:["RD$ ",i.jsx("input",{type:"number",className:"w-24 text-right border-b border-slate-300 bg-transparent focus:outline-none focus:border-indigo-500",value:p.montoAPagar,onChange:g=>{const b=g.target.value;e(t.map(w=>w.id===p.id?{...w,montoAPagar:b}:w))}})]})]},p.id))})]})})]})},uut=({userData:t})=>{const[e,r]=A.useState([]),[n,a]=A.useState(!1),[s,o]=A.useState(new Date().getFullYear()),[l,c]=A.useState(new Date().getMonth()+1),u=async()=>{if(t!=null&&t.companyId){a(!0);try{const h=await wt.get(`/companies/${t.companyId}/reporte-606?year=${s}&month=${l}`);h.data.success&&(r(h.data.data),h.data.data.length===0&&Ke.info("No se encontraron gastos fiscales en este periodo"))}catch(h){console.error("Error cargando 606:",h),Ke.error("Error al consultar reporte 606")}finally{a(!1)}}},d=()=>{var S;if(e.length===0){Ke.warning("No hay datos para exportar");return}const h=`${s}${String(l).padStart(2,"0")}`,p=`606|${((S=t.companyConfig)==null?void 0:S.rnc)||"000000000"}|${h}|${e.length}`,g=e.map(T=>`${T.rnc}|${T.tipoId}|${T.tipoBienes}|${T.ncf}|${T.ncfModificado}|${T.fechaComprobante}|${T.fechaPago}|${T.montoFacturado}|${T.itbisFacturado}|${T.itbisRetenido}|${T.montoTotal}|${T.tipoPago}`),b=[p,...g].join(`
`),w=new Blob([b],{type:"text/plain"}),_=window.URL.createObjectURL(w),N=document.createElement("a");N.href=_,N.download=`DGII_606_${h}.txt`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(_),Ke.success("Archivo 606 generado")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center p-4 bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Generar Reporte 606"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione el periodo para generar el reporte de compras y gastos."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("select",{value:l,onChange:h=>c(h.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm",children:Array.from({length:12},(h,p)=>i.jsx("option",{value:p+1,children:new Date(0,p).toLocaleString("es",{month:"long"})},p+1))}),i.jsx("input",{type:"number",value:s,onChange:h=>o(h.target.value),className:"w-20 px-3 py-2 border border-slate-300 rounded-lg text-sm"}),i.jsxs("button",{onClick:u,disabled:n,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:[i.jsx($d,{className:"w-4 h-4"}),n?"...":"Consultar"]}),e.length>0&&i.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[i.jsx(BA,{className:"w-4 h-4"}),"TXT"]})]})]}),e.length>0&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Total Facturado"}),i.jsxs("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["RD$ ",e.reduce((h,p)=>h+parseFloat(p.montoTotal),0).toLocaleString()]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold",children:"ITBIS Total"}),i.jsxs("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["RD$ ",e.reduce((h,p)=>h+parseFloat(p.itbisFacturado),0).toLocaleString()]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold",children:"Registros"}),i.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e.length})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm overflow-hidden border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-400",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-4",children:"Fecha"}),i.jsx("th",{className:"p-4",children:"NCF"}),i.jsx("th",{className:"p-4",children:"RNC"}),i.jsx("th",{className:"p-4",children:"Concepto"}),i.jsx("th",{className:"p-4 text-right",children:"Monto"}),i.jsx("th",{className:"p-4 text-center",children:"Evidencia"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:n?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"p-8 text-center",children:"Cargando gastos..."})}):e.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"p-8 text-center text-slate-500",children:"No hay gastos fiscales registrados."})}):e.map(h=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"p-4 text-slate-600",children:new Date(h.fecha).toLocaleDateString()}),i.jsx("td",{className:"p-4 font-mono font-medium text-slate-900 dark:text-white",children:h.ncf||"---"}),i.jsx("td",{className:"p-4 text-slate-500",children:h.rnc||"---"}),i.jsxs("td",{className:"p-4 text-slate-700 dark:text-slate-300",children:[i.jsx("div",{className:"font-medium capitalize",children:h.tipo}),i.jsx("div",{className:"text-xs text-slate-500",children:h.descripcion})]}),i.jsxs("td",{className:"p-4 text-right font-medium text-slate-900 dark:text-white",children:["RD$ ",(h.monto||0).toLocaleString()]}),i.jsx("td",{className:"p-4 text-center",children:i.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-800 text-xs rounded-full font-medium",children:"S"})})]},h.id))})]})})]})},dut=({userData:t})=>{const[e,r]=A.useState("nomina");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex gap-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>r("nomina"),className:`pb-3 px-1 text-sm font-medium transition-colors relative ${e==="nomina"?"text-indigo-600 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:["Nomina & Pagos",e==="nomina"&&i.jsx(Qt.div,{layoutId:"subtab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 dark:bg-indigo-400"})]}),i.jsxs("button",{onClick:()=>r("gastos"),className:`pb-3 px-1 text-sm font-medium transition-colors relative ${e==="gastos"?"text-indigo-600 dark:text-indigo-400":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:["Gastos Fiscales (606)",e==="gastos"&&i.jsx(Qt.div,{layoutId:"subtab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 dark:bg-indigo-400"})]})]}),i.jsx("div",{className:"min-h-[400px]",children:e==="nomina"?i.jsx(cut,{}):i.jsx(uut,{userData:t})})]})},fut=({planes:t,planActual:e,onCambiarPlan:r,cambiando:n})=>{const[a,s]=A.useState(null);if(!t||t.length===0)return i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planes..."})});const o=[...t].sort((c,u)=>c.precio-u.precio),l=c=>{switch(c){case"operativo":return i.jsx(rd,{className:"w-5 h-5"});case"automatizado":return i.jsx(oAe,{className:"w-5 h-5"});case"smart":return i.jsx(jre,{className:"w-5 h-5"});default:return i.jsx(rd,{className:"w-5 h-5"})}};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Elige el Plan Perfecto para tu Empresa"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Compara caractersticas y selecciona el plan que mejor se adapte a tus necesidades"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((c,u)=>{const d=e===c.id,h=c.popular;return i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},className:`relative rounded-2xl border-2 ${h?"border-emerald-500 shadow-xl shadow-emerald-500/20":d?"border-indigo-500 shadow-lg":"border-slate-200 dark:border-slate-700"} bg-white dark:bg-slate-800 overflow-hidden hover:shadow-2xl transition-all duration-300`,children:[h&&i.jsxs("div",{className:"absolute top-0 right-0 bg-emerald-500 text-white px-4 py-1 rounded-bl-lg text-xs font-bold flex items-center gap-1",children:[i.jsx(h3,{className:"w-3 h-3"}),"RECOMENDADO"]}),d&&!h&&i.jsx("div",{className:"absolute top-0 right-0 bg-indigo-500 text-white px-4 py-1 rounded-bl-lg text-xs font-bold",children:"TU PLAN ACTUAL"}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mx-auto mb-3",style:{backgroundColor:`${c.color}20`,color:c.color},children:l(c.id)}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:c.nombre}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:c.descripcion})]}),i.jsxs("div",{className:"text-center mb-6 pb-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsxs("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["RD$ ",c.precio.toLocaleString()]}),i.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"/mes"})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["~$",c.precioUSD," USD"]})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Camiones:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:c.limites.camiones===-1?"Ilimitados":`Hasta ${c.limites.camiones}`})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Usuarios:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:c.limites.usuarios===-1?"Ilimitados":c.limites.usuarios})]})]}),i.jsxs("div",{className:"space-y-2 mb-6",children:[c.caracteristicas.slice(0,8).map((p,g)=>i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[p.incluido?i.jsx(rd,{className:`w-4 h-4 mt-0.5 flex-shrink-0 ${p.destacado?"text-emerald-500":"text-slate-400"}`}):i.jsx(Zn,{className:"w-4 h-4 mt-0.5 text-slate-300 dark:text-slate-600 flex-shrink-0"}),i.jsx("span",{className:p.incluido?p.destacado?"text-slate-900 dark:text-white font-medium":"text-slate-600 dark:text-slate-400":"text-slate-400 dark:text-slate-600 line-through",children:p.nombre})]},g)),c.caracteristicas.length>8&&i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-2",children:["+ ",c.caracteristicas.length-8," caractersticas ms"]})]}),i.jsx("button",{onClick:()=>{d||r(c.id)},disabled:d||n,className:`w-full py-3 px-4 rounded-lg font-semibold transition-all ${d?"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed":h?"bg-emerald-500 hover:bg-emerald-600 text-white shadow-lg hover:shadow-xl":"bg-indigo-600 hover:bg-indigo-700 text-white"} ${n?"opacity-50 cursor-wait":""}`,children:n?"Cambiando...":d?"Plan Actual":"Seleccionar Plan"})]})]},c.id)})}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6 text-center",children:"Comparacin Detallada de Caractersticas"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50",children:[i.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-900 dark:text-white",children:"Caracterstica"}),o.map(c=>i.jsx("th",{className:"text-center p-4 text-sm font-semibold text-slate-900 dark:text-white",children:c.nombre},c.id))]})}),i.jsx("tbody",{children:Array.from(new Set(o.flatMap(c=>c.caracteristicas.map(u=>u.nombre)))).map((c,u)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"p-4 text-sm text-slate-600 dark:text-slate-400",children:c}),o.map(d=>{const h=d.caracteristicas.find(p=>p.nombre===c);return i.jsx("td",{className:"p-4 text-center",children:h?h.incluido?i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx(rd,{className:"w-5 h-5 text-emerald-500"}),h.valor&&i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:h.valor})]}):i.jsx(Zn,{className:"w-5 h-5 text-slate-300 dark:text-slate-600 mx-auto"}):i.jsx(Zn,{className:"w-5 h-5 text-slate-300 dark:text-slate-600 mx-auto"})},d.id)})]},u))})]})})]})]})},hut=({value:t,prefix:e="",suffix:r="",decimals:n=0})=>{const[a,s]=A.useState(0);return A.useEffect(()=>{const c=t/60;let u=0;const d=setInterval(()=>{u+=c,u>=t?(s(t),clearInterval(d)):s(u)},1e3/60);return()=>clearInterval(d)},[t]),i.jsxs("span",{children:[e,a.toLocaleString("en-US",{minimumFractionDigits:n,maximumFractionDigits:n}),r]})},tN=({title:t,value:e,change:r,changeType:n,icon:a,prefix:s="",suffix:o="",delay:l=0})=>i.jsx(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:l},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),i.jsx("div",{className:"mt-2 flex items-baseline gap-2",children:i.jsx("h3",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:i.jsx(hut,{value:e,prefix:s,suffix:o,decimals:s==="$"?2:0})})}),r!==void 0&&i.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[n==="up"?i.jsx(Ere,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}):i.jsx(YEe,{className:"w-4 h-4 text-rose-600 dark:text-rose-400"}),i.jsxs("span",{className:`text-sm font-medium ${n==="up"?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:[r,"%"]}),i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-500",children:"vs mes anterior"})]})]}),i.jsx("div",{className:`p-3 rounded-lg ${n==="up"?"bg-emerald-50 dark:bg-emerald-900/20":"bg-indigo-50 dark:bg-indigo-900/20"}`,children:i.jsx(a,{className:`w-6 h-6 ${n==="up"?"text-emerald-600 dark:text-emerald-400":"text-indigo-600 dark:text-indigo-400"}`,strokeWidth:1.5})})]})}),mut=()=>{var Z,ce,ne;const{userData:t}=ca(),[e,r]=A.useState("30"),[n,a]=A.useState(!0),[s,o]=A.useState("todos"),[l,c]=A.useState([]),[u,d]=A.useState(!1),[h,p]=A.useState("overview"),[g,b]=A.useState(58.5),[w,_]=A.useState({ingresos:{total:0,change:0,changeType:"up"},gastos:{total:0,change:0,changeType:"down",desglose:{repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0}},utilidad:{total:0,change:0,changeType:"up"},facturasActivas:{total:0,change:0,changeType:"up"},tasaDolar:58.5,companyConfig:{rnc:"",ncfSequences:{},ncfExpiry:""}}),[N,S]=A.useState({plan:"Basic",precio:300,fechaInicio:new Date,proximoPago:new Date,estado:"activo",limites:{recolecciones:100,usuarios:5,almacenamiento:"10 GB"},uso:{recolecciones:45,usuarios:3,almacenamiento:"3.2 GB"}}),[T,R]=A.useState([]),[z,G]=A.useState([]),[O,D]=A.useState([]),[I,V]=A.useState(null),[P,B]=A.useState(!1);A.useEffect(()=>{(async()=>{a(!0);try{const me=await wt.get(`/finanzas/empresa/overview?dateRange=${e}`);if(me.data.success){_(me.data.data),b(me.data.data.tasaDolar||58.5);const X=await wt.get(`/companies/${t.companyId}`);X.data&&_(re=>({...re,companyConfig:{rnc:X.data.rnc||"",ncfSequences:X.data.ncfSequences||{B01:"",B02:"",B14:"",B15:""},ncfExpiry:X.data.ncfExpiry||""}}))}const Te=await wt.get("/finanzas/empresa/suscripcion");Te.data.success&&S(Te.data.data);const we=await wt.get("/finanzas/empresa/facturas-pendientes");we.data.success&&R(we.data.data);const q=await wt.get("/finanzas/empresa/metricas-mensuales?meses=12");q.data.success&&G(q.data.data);const Y=await wt.get("/finanzas/empresa/planes-disponibles");Y.data.success&&D(Y.data.data.planes)}catch(me){console.error("Error fetching company finance data:",me);const Te=me.userMessage||me.message||"Error al cargar finanzas de la empresa";Ke.error(Te),_({ingresos:{total:0,change:0,changeType:"neutral"},gastos:{total:0,change:0,changeType:"neutral",desglose:{repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0,detalleOtros:{gasolina:0,comida:0,peaje:0,otros:0}}},utilidad:{total:0,change:0,changeType:"neutral"},facturasActivas:{total:0,change:0,changeType:"neutral"},tasaDolar:58.5,companyConfig:{rnc:"",ncfSequences:{},ncfExpiry:""}})}finally{a(!1)}})()},[e]);const F=async ae=>{var me,Te,we,q;try{B(!0);const Y=await wt.post("/finanzas/empresa/cambiar-plan",{nuevoPlanId:ae});Y.data.success&&(Ke.success(Y.data.message),S(X=>({...X,plan:Y.data.data.planNombre})),V(ae))}catch(Y){console.error("Error al cambiar plan:",Y),(Te=(me=Y.response)==null?void 0:me.data)!=null&&Te.advertencias?(Ke.error(Y.response.data.message),Y.response.data.advertencias.forEach(X=>{Ke.warning(X)})):Ke.error(((q=(we=Y.response)==null?void 0:we.data)==null?void 0:q.message)||"Error al cambiar plan")}finally{B(!1)}},ee=async()=>{try{(await wt.put(`/companies/${t.companyId}/ncf-config`,{rnc:w.companyConfig.rnc,ncfSequences:w.companyConfig.ncfSequences,ncfExpiry:w.companyConfig.ncfExpiry})).data.success&&Ke.success("Configuracin Fiscal guardada correctamente")}catch(ae){console.error("Error guardando config fiscal:",ae),Ke.error("Error guardando configuracin")}};return n?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-8 py-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Finanzas de la Empresa"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Gestiona tus ingresos, gastos y suscripcin al sistema"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 rounded-md",children:[i.jsx(W0,{className:"w-3.5 h-3.5 text-indigo-600 dark:text-indigo-400"}),i.jsxs("span",{className:"text-xs font-medium text-indigo-600 dark:text-indigo-400",children:["Tasa: RD$ ",g.toFixed(2)," / USD"]})]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[i.jsx(BA,{className:"w-4 h-4"}),"Exportar Reporte"]})]})]}),i.jsx("div",{className:"mt-6 flex items-center gap-4",children:i.jsxs("div",{className:"relative inline-block text-left",children:[i.jsxs("select",{value:s,onChange:ae=>o(ae.target.value),disabled:u,className:"appearance-none bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200 py-2 pl-4 pr-10 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm font-medium transition-all cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700",children:[i.jsx("option",{value:"todos",children:"Todos los Contenedores"}),l.map(ae=>i.jsx("option",{value:ae.id,children:ae.nombre},ae.id))]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-slate-500",children:i.jsx(Sre,{className:"h-4 w-4"})})]})}),i.jsx("div",{className:"flex gap-2 mt-6",children:[{id:"overview",label:"Resumen Financiero",icon:gp},{id:"suscripcion",label:"Suscripcin SaaS",icon:Jb},{id:"facturas",label:"Facturas Pendientes",icon:g4e},{id:"fiscal",label:"Contabilidad & Nmina",icon:Qm},{id:"config_fiscal",label:"Configuracin Fiscal",icon:Nu}].map(ae=>i.jsxs("button",{onClick:()=>p(ae.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${h===ae.id?"bg-indigo-600 text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[i.jsx(ae.icon,{className:"w-4 h-4"}),ae.label]},ae.id))})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[h==="fiscal"&&i.jsx(dut,{userData:t}),h==="config_fiscal"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 max-w-4xl",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Configuracin de Comprobantes Fiscales (NCF)"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"RNC de la Empresa"}),i.jsx("input",{type:"text",className:"w-full max-w-md px-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"Ej: 101000000",value:((Z=w.companyConfig)==null?void 0:Z.rnc)||"",onChange:ae=>_({...w,companyConfig:{...w.companyConfig,rnc:ae.target.value}})}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Este RNC aparecer en todas las facturas generadas."})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Secuencias Activas (Prximo NCF a emitir)"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["B01","B02","B14","B15"].map(ae=>{var me,Te;return i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:[ae," - ",ae==="B01"?"Crdito Fiscal":ae==="B02"?"Consumidor Final":ae==="B14"?"Especial":"Gubernamental"]}),i.jsx("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white font-mono",placeholder:`${ae}00000001`,value:((Te=(me=w.companyConfig)==null?void 0:me.ncfSequences)==null?void 0:Te[ae])||"",onChange:we=>_({...w,companyConfig:{...w.companyConfig,ncfSequences:{...w.companyConfig.ncfSequences,[ae]:we.target.value}}})})]},ae)})})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-6"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Fecha de Vencimiento Secuencia Actual"}),i.jsx("input",{type:"date",className:"w-full max-w-md px-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",value:((ce=w.companyConfig)==null?void 0:ce.ncfExpiry)||"",onChange:ae=>_({...w,companyConfig:{...w.companyConfig,ncfExpiry:ae.target.value}})})]}),i.jsx("div",{className:"flex justify-end pt-4",children:i.jsx("button",{onClick:ee,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"Guardar Configuracin"})})]})]}),h==="overview"&&(()=>{var me,Te,we,q,Y,X,re,se;if(!w)return i.jsx("div",{className:"p-4 text-center text-slate-500",children:"Cargando datos..."});const ae={ingresos:w.ingresos||{total:0,change:0,changeType:"neutral"},gastos:w.gastos||{total:0,change:0,changeType:"neutral",desglose:{repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0}},utilidad:w.utilidad||{total:0,change:0,changeType:"neutral"},facturasActivas:w.facturasActivas||{total:0,change:0,changeType:"neutral"},tasaDolar:w.tasaDolar||g};return ae.gastos&&!ae.gastos.desglose&&(ae.gastos.desglose={repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0,detalleOtros:{gasolina:0,comida:0,peaje:0,otros:0}}),ae.gastos.desglose||(ae.gastos.desglose={repartidoresRD:0,repartidoresUSD:0,recolectoresUSD:0,otrosUSD:0}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Finanzas Operativas"}),i.jsx("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[{value:"7",label:"7 das"},{value:"30",label:"30 das"},{value:"90",label:"90 das"}].map(Ce=>i.jsx("button",{onClick:()=>r(Ce.value),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${e===Ce.value?"bg-white dark:bg-slate-600 text-slate-900 dark:text-white shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:Ce.label},Ce.value))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(tN,{title:"Ingresos Totales",value:ae.ingresos.total,prefix:"$",change:ae.ingresos.change,changeType:ae.ingresos.changeType,icon:Tf,delay:0}),i.jsx(tN,{title:"Gastos Totales",value:ae.gastos.total,prefix:"$",change:ae.gastos.change,changeType:ae.gastos.changeType,icon:G4e,delay:.1}),i.jsx(tN,{title:"Utilidad Neta",value:ae.utilidad.total,prefix:"$",change:ae.utilidad.change,changeType:ae.utilidad.changeType,icon:Fl,delay:.2}),i.jsx(tN,{title:"Facturas Activas",value:ae.facturasActivas.total,change:ae.facturasActivas.change,changeType:ae.facturasActivas.changeType,icon:Lr,delay:.3})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Desglose de Gastos"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Todos los valores convertidos a USD. Repartidores cobran en RD$, Recolectores en USD."}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[i.jsx("div",{className:"flex items-center justify-center",children:i.jsx($_,{width:"100%",height:250,children:i.jsxs(lut,{children:[i.jsx(Vfe,{data:[{name:"Repartidores",value:ae.gastos.desglose.repartidoresUSD||0,color:"#4f46e5"},{name:"Recolectores",value:ae.gastos.desglose.recolectoresUSD||0,color:"#10b981"},{name:"Gasolina",value:((me=ae.gastos.desglose.detalleOtros)==null?void 0:me.gasolina)||0,color:"#8b5cf6"},{name:"Comida",value:((Te=ae.gastos.desglose.detalleOtros)==null?void 0:Te.comida)||0,color:"#f97316"},{name:"Peaje",value:((we=ae.gastos.desglose.detalleOtros)==null?void 0:we.peaje)||0,color:"#06b6d4"},{name:"Otros",value:((q=ae.gastos.desglose.detalleOtros)==null?void 0:q.otros)||0,color:"#f59e0b"}].filter(Ce=>Ce.value>0),cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{color:"#4f46e5"},{color:"#10b981"},{color:"#8b5cf6"},{color:"#f97316"},{color:"#06b6d4"},{color:"#f59e0b"}].map((Ce,je)=>i.jsx(s5,{fill:Ce.color,stroke:Ce.color},`cell-${je}`))}),i.jsx(Q_,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:Ce=>`$${(Ce||0).toLocaleString("en-US",{maximumFractionDigits:2})}`})]})})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Repartidores"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",(ae.gastos.desglose.repartidoresUSD||0).toLocaleString("en-US",{maximumFractionDigits:2})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:["RD$ ",(ae.gastos.desglose.repartidoresRD||0).toLocaleString("es-DO")]})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${(ae.gastos.desglose.repartidoresUSD||0)/(ae.gastos.total||1)*100}%`},transition:{duration:.8,delay:.6},className:"h-full bg-indigo-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round((ae.gastos.desglose.repartidoresUSD||0)/(ae.gastos.total||1)*100),"%"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Recolectores"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",(ae.gastos.desglose.recolectoresUSD||0).toLocaleString("en-US",{maximumFractionDigits:2})]}),i.jsx("div",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"USD"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${(ae.gastos.desglose.recolectoresUSD||0)/(ae.gastos.total||1)*100}%`},transition:{duration:.8,delay:.7},className:"h-full bg-emerald-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round((ae.gastos.desglose.recolectoresUSD||0)/(ae.gastos.total||1)*100),"%"]})]})]}),((Y=ae.gastos.desglose.detalleOtros)==null?void 0:Y.gasolina)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"w-4 h-4 text-violet-600 dark:text-violet-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Gasolina"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.gasolina.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.gasolina/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-violet-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.gasolina/(ae.gastos.total||1)*100),"%"]})]})]}),((X=ae.gastos.desglose.detalleOtros)==null?void 0:X.comida)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(od,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Comida"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.comida.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.comida/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-orange-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.comida/(ae.gastos.total||1)*100),"%"]})]})]}),((re=ae.gastos.desglose.detalleOtros)==null?void 0:re.peaje)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(F4e,{className:"w-4 h-4 text-cyan-600 dark:text-cyan-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Peaje"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.peaje.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.peaje/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-cyan-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.peaje/(ae.gastos.total||1)*100),"%"]})]})]}),((se=ae.gastos.desglose.detalleOtros)==null?void 0:se.otros)>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(od,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),i.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Miscelneos"})]}),i.jsxs("div",{className:"font-semibold text-slate-900 dark:text-white",children:["$",ae.gastos.desglose.detalleOtros.otros.toLocaleString("en-US",{maximumFractionDigits:2})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx(Qt.div,{initial:{width:0},animate:{width:`${ae.gastos.desglose.detalleOtros.otros/(ae.gastos.total||1)*100}%`},transition:{duration:.8},className:"h-full bg-amber-500"})}),i.jsxs("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 w-10 text-right",children:[Math.round(ae.gastos.desglose.detalleOtros.otros/(ae.gastos.total||1)*100),"%"]})]})]})]})]})]}),z.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Tendencia Mensual: Ingresos vs Gastos"}),i.jsx($_,{width:"100%",height:300,children:i.jsxs(Xct,{data:z,children:[i.jsx(sE,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(iE,{dataKey:"mes",stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(oE,{stroke:"#64748b",style:{fontSize:"12px"},tickFormatter:Ce=>`$${Ce.toLocaleString()}`}),i.jsx(Q_,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:Ce=>`$${Ce.toLocaleString("en-US",{maximumFractionDigits:2})}`}),i.jsx(rE,{}),i.jsx(rO,{type:"monotone",dataKey:"ingresos",stroke:"#10b981",strokeWidth:2,name:"Ingresos",dot:{fill:"#10b981",r:4},activeDot:{r:6}}),i.jsx(rO,{type:"monotone",dataKey:"gastos",stroke:"#ef4444",strokeWidth:2,name:"Gastos",dot:{fill:"#ef4444",r:4},activeDot:{r:6}})]})})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Utilidad Neta Mensual"}),i.jsx($_,{width:"100%",height:300,children:i.jsxs(VK,{data:z,children:[i.jsx(sE,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(iE,{dataKey:"mes",stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(oE,{stroke:"#64748b",style:{fontSize:"12px"},tickFormatter:Ce=>`$${Ce.toLocaleString()}`}),i.jsx(Q_,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"},formatter:Ce=>`$${Ce.toLocaleString("en-US",{maximumFractionDigits:2})}`}),i.jsx(rE,{}),i.jsx(tO,{dataKey:"utilidad",fill:"#6366f1",name:"Utilidad Neta",radius:[8,8,0,0]})]})})]})]}),z.length>0&&i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.7},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6",children:"Entregas Mensuales"}),i.jsx($_,{width:"100%",height:300,children:i.jsxs(VK,{data:z,children:[i.jsx(sE,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(iE,{dataKey:"mes",stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(oE,{stroke:"#64748b",style:{fontSize:"12px"}}),i.jsx(Q_,{contentStyle:{backgroundColor:"#1e293b",border:"none",borderRadius:"8px",color:"#fff"}}),i.jsx(rE,{}),i.jsx(tO,{dataKey:"entregas",fill:"#10b981",name:"Total Entregas",radius:[8,8,0,0]})]})})]})]})})(),h==="suscripcion"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(fut,{planes:O,planActual:(ne=N.plan)==null?void 0:ne.toLowerCase(),onCambiarPlan:F,cambiando:P}),i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mt-12",children:"Plan Actual - Detalles"}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg p-8 text-white",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsxs("h3",{className:"text-2xl font-bold",children:["Plan ",N.plan]}),i.jsx("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm font-medium",children:N.estado==="activo"?" Activo":"Inactivo"})]}),i.jsx("p",{className:"text-indigo-100",children:"Acceso completo al sistema de gestin de envos"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-4xl font-bold",children:["$",N.precio]}),i.jsx("div",{className:"text-indigo-100 text-sm",children:"por mes"})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Kl,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm text-indigo-100",children:"Fecha de Inicio"})]}),i.jsx("div",{className:"font-semibold",children:new Date(N.fechaInicio).toLocaleDateString()})]}),i.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Wo,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm text-indigo-100",children:"Prximo Pago"})]}),i.jsx("div",{className:"font-semibold",children:new Date(N.proximoPago).toLocaleDateString()})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Recolecciones"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Uso actual"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[N.uso.recolecciones," / ",N.limites.recolecciones===-1?"Ilimitado":N.limites.recolecciones]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-indigo-500 transition-all",style:{width:N.limites.recolecciones===-1?"0%":`${N.uso.recolecciones/N.limites.recolecciones*100}%`}})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:N.limites.recolecciones===-1?"Sin lmite":`${(N.uso.recolecciones/N.limites.recolecciones*100).toFixed(1)}% utilizado`})]})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Usuarios"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Uso actual"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[N.uso.usuarios," / ",N.limites.usuarios===-1?"Ilimitado":N.limites.usuarios]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-emerald-500 transition-all",style:{width:N.limites.usuarios===-1?"0%":`${N.uso.usuarios/N.limites.usuarios*100}%`}})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:N.limites.usuarios===-1?"Sin lmite":`${(N.uso.usuarios/N.limites.usuarios*100).toFixed(1)}% utilizado`})]})]}),i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Almacenamiento"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Uso actual"}),i.jsxs("span",{className:"font-semibold text-slate-900 dark:text-white",children:[N.uso.almacenamiento," / ",N.limites.almacenamiento]})]}),i.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-amber-500 transition-all",style:{width:"32%"}})}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:"32% utilizado"})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium shadow-sm",children:"Actualizar Plan"}),i.jsx("button",{className:"px-6 py-3 bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors font-medium",children:"Ver Historial de Pagos"})]})]}),h==="facturas"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Facturas Pendientes de Pago"}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[i.jsx(_s,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"}),i.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:[T.length," facturas pendientes"]})]})]}),T.length===0?i.jsxs(Qt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-12 text-center",children:[i.jsx(Jr,{className:"w-16 h-16 text-emerald-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"Todo al da!"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No tienes facturas pendientes de pago en este momento"})]}):i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Nmero"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Concepto"}),i.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Fecha"}),i.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Monto"}),i.jsx("th",{className:"text-center py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Estado"}),i.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 dark:text-slate-400 uppercase",children:"Acciones"})]})}),i.jsx("tbody",{children:T.map((ae,me)=>i.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-700",children:[i.jsx("td",{className:"py-3 px-4 text-sm font-medium text-slate-900 dark:text-white",children:ae.numero}),i.jsx("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:ae.concepto}),i.jsx("td",{className:"py-3 px-4 text-sm text-slate-600 dark:text-slate-400",children:ae.fecha}),i.jsxs("td",{className:"py-3 px-4 text-sm font-semibold text-right text-slate-900 dark:text-white",children:["$",ae.monto]}),i.jsx("td",{className:"py-3 px-4 text-center",children:i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:"Pendiente"})}),i.jsx("td",{className:"py-3 px-4 text-right",children:i.jsx("button",{className:"text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300 text-sm font-medium",children:"Pagar Ahora"})})]},me))})]})})]})]})]})},put=()=>{const{userData:t}=ca();return(t==null?void 0:t.rol)==="super_admin"?i.jsx(bqe,{}):(t==null?void 0:t.rol)==="propietario"?i.jsx(mut,{}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"Acceso No Autorizado"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No tienes permisos para acceder a este mdulo"})]})})},rN=()=>{const[t,e]=A.useState(!1),[r,n]=A.useState([]),[a,s]=A.useState([]),[o,l]=A.useState(null),[c,u]=A.useState(null),[d,h]=A.useState(!1),[p,g]=A.useState({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:new Date().toISOString().split("T")[0],horaPreferida:"",notas:""});A.useEffect(()=>{b(),w()},[]);const b=async()=>{try{const O=await wt.get("/solicitudes");if(O.data.success){const D=O.data.data.filter(I=>I.estado==="pendiente"||I.estado==="asignada");n(D)}}catch(O){console.error("Error cargando solicitudes:",O),Ke.error("Error al cargar solicitudes")}},w=async()=>{try{const O=await wt.get("/solicitudes/recolectores");O.data.success&&s(O.data.data)}catch(O){console.error("Error cargando recolectores:",O),Ke.error("Error al cargar recolectores")}},_=O=>{g({...p,[O.target.name]:O.target.value})},N=async O=>{if(O.preventDefault(),e(!0),!p.clienteNombre||!p.direccion){Ke.warning("Nombre y Direccin son obligatorios"),e(!1);return}try{(await wt.post("/solicitudes",p)).data.success&&(Ke.success("Solicitud de recoleccin creada"),g({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:new Date().toISOString().split("T")[0],horaPreferida:"",notas:""}),b())}catch(D){console.error("Error creando solicitud:",D),Ke.error("Error al agendar la cita")}finally{e(!1)}},S=(O,D)=>{l(D),O.dataTransfer.effectAllowed="move",O.target.style.opacity="0.5"},T=O=>{O.target.style.opacity="1",l(null),u(null)},R=(O,D)=>{O.preventDefault(),O.dataTransfer.dropEffect="move",u(D)},z=()=>{u(null)},G=async(O,D)=>{var I,V;if(O.preventDefault(),u(null),!!o){h(!0);try{const P=await wt.put(`/solicitudes/${o.id}/asignar`,{recolectorId:D});P.data.success&&(Ke.success(`Cita asignada a ${P.data.data.recolectorNombre}`),b())}catch(P){console.error("Error asignando solicitud:",P),Ke.error(((V=(I=P.response)==null?void 0:I.data)==null?void 0:V.error)||"Error al asignar la cita")}finally{h(!1),l(null)}}};return i.jsxs("div",{className:"p-6 max-w-[1800px] mx-auto space-y-6",children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(xl,{className:"text-indigo-600"}),"Call Center USA"]}),i.jsx("p",{className:"text-slate-500",children:"Agendamiento de Citas de Recoleccin"})]})}),r.filter(O=>O.estado==="pendiente").length>0&&i.jsx(Qt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(_s,{className:"w-5 h-5 text-blue-600"}),i.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100 font-medium",children:"Arrastra las citas pendientes y sultalas en la tarjeta del recolector para asignarlas automticamente"})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 p-6 sticky top-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Vd,{className:"w-5 h-5 text-indigo-600"}),"Nueva Cita"]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(vl,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{name:"clienteNombre",value:p.clienteNombre,onChange:_,placeholder:"Nombre del Cliente",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(xl,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{name:"clienteTelefono",value:p.clienteTelefono,onChange:_,placeholder:"Telfono (Opcional)",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsx("hr",{className:"border-slate-100 dark:border-slate-700"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Da,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{name:"direccion",value:p.direccion,onChange:_,placeholder:"Direccin Completa (Calle, Casa, Apto)",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{name:"sector",value:p.sector,onChange:_,placeholder:"Sector / Ciudad",className:"w-full px-3 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"}),i.jsx("input",{name:"referencia",value:p.referencia,onChange:_,placeholder:"Referencia (Ej: Casa azul)",className:"w-full px-3 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]})]}),i.jsx("hr",{className:"border-slate-100 dark:border-slate-700"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Kl,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"date",name:"fechaPreferida",value:p.fechaPreferida,onChange:_,className:"w-full pl-10 pr-2 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Wo,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"time",name:"horaPreferida",value:p.horaPreferida,onChange:_,className:"w-full pl-10 pr-2 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Nu,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),i.jsx("textarea",{name:"notas",value:p.notas,onChange:_,placeholder:"Notas adicionales (Ej: Cajas pesadas, Tocar timbre)",rows:"2",className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 focus:ring-2 focus:ring-indigo-500 text-sm"})]}),i.jsx("button",{type:"submit",disabled:t,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2",children:t?"Agendando...":i.jsxs(i.Fragment,{children:[i.jsx(Jr,{className:"w-5 h-5"}),"Agendar Cita"]})})]})]})}),i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Citas Agendadas"}),i.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-full text-xs font-bold",children:["Total: ",r.length]})]}),i.jsx("div",{className:"grid gap-3 max-h-[calc(100vh-200px)] overflow-y-auto pr-2",children:r.length===0?i.jsx("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-dashed border-slate-300",children:i.jsx("p",{className:"text-slate-500",children:"No hay citas agendadas."})}):r.map(O=>{var D,I,V,P,B,F;return i.jsxs(Qt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},draggable:O.estado==="pendiente",onDragStart:ee=>S(ee,O),onDragEnd:T,className:`bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col gap-3 transition-all ${O.estado==="pendiente"?"cursor-grab active:cursor-grabbing hover:shadow-lg hover:scale-[1.02]":"opacity-75"}`,children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:(D=O.cliente)==null?void 0:D.nombre}),i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium uppercase ${O.estado==="pendiente"?"bg-amber-100 text-amber-800":O.estado==="asignada"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:O.estado})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[i.jsxs("p",{className:"flex items-center gap-1",children:[i.jsx(Da,{className:"w-3 h-3"}),(I=O.ubicacion)==null?void 0:I.direccion," ",((V=O.ubicacion)==null?void 0:V.sector)&&`(${O.ubicacion.sector})`]}),i.jsxs("p",{className:"flex items-center gap-1",children:[i.jsx(xl,{className:"w-3 h-3"}),((P=O.cliente)==null?void 0:P.telefono)||"N/A"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white flex items-center gap-1",children:[i.jsx(Kl,{className:"w-3 h-3 text-slate-400"}),(B=O.programacion)==null?void 0:B.fecha]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[i.jsx(Wo,{className:"w-3 h-3"}),((F=O.programacion)==null?void 0:F.hora)||"Por definir"]})]})]}),O.recolectorNombre&&i.jsxs("div",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded flex items-center gap-1 w-fit",children:[i.jsx(ts,{className:"w-3 h-3"}),"Asignado a: ",O.recolectorNombre]})]},O.id)})})]}),i.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(od,{className:"w-5 h-5 text-green-600"}),"Recolectores"]}),i.jsx("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-bold",children:a.length})]}),i.jsx("div",{className:"grid gap-3 max-h-[calc(100vh-200px)] overflow-y-auto pr-2",children:a.length===0?i.jsx("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-dashed border-slate-300",children:i.jsx("p",{className:"text-slate-500",children:"No hay recolectores activos"})}):a.map(O=>{var D;return i.jsxs(Qt.div,{onDragOver:I=>R(I,O.id),onDragLeave:z,onDrop:I=>G(I,O.id),className:`bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border-2 transition-all ${c===O.id?"border-green-500 bg-green-50 dark:bg-green-900/20 scale-105 shadow-lg":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center text-white font-bold text-lg",children:(D=O.nombre)==null?void 0:D.charAt(0).toUpperCase()}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:O.nombre}),i.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1 mt-1",children:[i.jsx(ts,{className:"w-3 h-3"}),O.vehiculo||"Sin vehculo"]})]})]}),c===O.id&&i.jsx(Qt.p,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-green-700 dark:text-green-400 mt-2 font-medium",children:"Suelta aqu para asignar"})]},O.id)})})]})]})]})},bC=()=>{const{userData:t}=ca(),[e,r]=A.useState(!0),[n,a]=A.useState([]),[s,o]=A.useState(null);A.useEffect(()=>{l();const u=setInterval(l,15e3);return()=>clearInterval(u)},[]);const l=async()=>{try{const u=await wt.get("/solicitudes?estado=pendiente");u.data.success&&a(u.data.data)}catch(u){console.error("Error cargando pool:",u)}finally{r(!1)}},c=async(u,d)=>{var h,p;if(confirm(`Ests seguro de que puedes recolectar en: ${d}?`)){o(u);try{(await wt.put(`/solicitudes/${u}/asignar`)).data.success&&(Ke.success('Solicitud asignada a ti! Ve a "Nueva Recoleccin" cuando llegues.'),a(b=>b.filter(w=>w.id!==u)))}catch(g){console.error("Error asignando:",g),Ke.error(((p=(h=g.response)==null?void 0:h.data)==null?void 0:p.error)||"Error al tomar la solicitud")}finally{o(null)}}};return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Da,{className:"text-emerald-500"}),"Bolsa de Recolecciones"]}),i.jsx("p",{className:"text-slate-500",children:"Citas disponibles en tu zona. Tmalas antes que otro!"})]}),i.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 px-4 py-2 rounded-lg border border-emerald-100 dark:border-emerald-800",children:[i.jsx("span",{className:"text-emerald-700 dark:text-emerald-300 font-bold text-lg",children:n.length}),i.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 text-sm ml-2",children:"disponibles ahora"})]})]}),e?i.jsx("div",{className:"flex justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-emerald-500"})}):n.length===0?i.jsxs("div",{className:"text-center py-20 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-300 dark:border-slate-700",children:[i.jsx(Lr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700 dark:text-slate-300",children:"No hay recolecciones pendientes"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Reljate un poco, pronto caern ms."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.jsx(vw,{children:n.map(u=>{var d,h,p,g,b,w;return i.jsxs(Qt.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-xl transition-shadow relative",children:[i.jsx("div",{className:"absolute top-0 right-0 bg-indigo-600 text-white text-xs font-bold px-3 py-1 rounded-bl-lg",children:((d=u.ubicacion)==null?void 0:d.sector)||"Zona General"}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-full text-indigo-600 dark:text-indigo-400",children:i.jsx(ey,{size:24})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-1",children:(h=u.ubicacion)==null?void 0:h.direccion}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-ellipsis overflow-hidden",children:((p=u.ubicacion)==null?void 0:p.referencia)||"Sin referencia"})]})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(vl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:(g=u.cliente)==null?void 0:g.nombre})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(Kl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:(b=u.programacion)==null?void 0:b.fecha}),i.jsx(Wo,{size:16,className:"text-slate-400 ml-2"}),i.jsx("span",{className:"font-medium text-indigo-600 dark:text-indigo-400",children:((w=u.programacion)==null?void 0:w.hora)||"Flexible"})]}),u.notas&&i.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx(_s,{size:14,className:"flex-shrink-0 mt-0.5"}),i.jsx("span",{children:u.notas})]})]}),i.jsx("button",{onClick:()=>{var _;return c(u.id,(_=u.ubicacion)==null?void 0:_.direccion)},disabled:s===u.id,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 disabled:bg-slate-400 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2",children:s===u.id?i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white"}):i.jsxs(i.Fragment,{children:[i.jsx(Jr,{size:20}),"LO TOMO!"]})})]})]},u.id)})})})]})},gut=()=>{const{userData:t}=ca(),[e,r]=A.useState(!0),[n,a]=A.useState([]),[s,o]=A.useState([]),[l,c]=A.useState("pendiente"),[u,d]=A.useState(!1),[h,p]=A.useState(null),[g,b]=A.useState(null),[w,_]=A.useState(!1),[N,S]=A.useState({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:"",horaPreferida:"09:00",notas:""});A.useEffect(()=>{T(),R();const F=setInterval(()=>{T(),R()},3e4);return()=>clearInterval(F)},[l]),A.useEffect(()=>{console.log(" Estado actual:",{solicitudes:n.length,solicitudesPendientes:n.filter(F=>F.estado==="pendiente").length,recolectores:s.length,filtroActual:l})},[n,s,l]);const T=async()=>{try{const F=l!=="todas"?`?estado=${l}`:"",ee=await wt.get(`/solicitudes${F}`);ee.data.success&&a(ee.data.data)}catch(F){console.error("Error cargando solicitudes:",F),Ke.error("Error al cargar solicitudes")}finally{r(!1)}},R=async()=>{try{const F=await wt.get("/solicitudes/recolectores");F.data.success&&o(F.data.data)}catch(F){console.error("Error cargando recolectores:",F)}},z=(F,ee)=>{p(ee),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/html",F.target),F.target.style.opacity="0.5"},G=F=>{F.target.style.opacity="1",p(null),b(null)},O=(F,ee)=>{F.preventDefault(),F.dataTransfer.dropEffect="move",b(ee)},D=()=>{b(null)},I=async(F,ee)=>{var Z,ce,ne;if(F.preventDefault(),F.stopPropagation(),!!h){b(null),_(!0);try{(await wt.put(`/solicitudes/${h.id}/asignar`,{recolectorId:ee})).data.success&&(Ke.success(` ${(Z=h.cliente)==null?void 0:Z.nombre} asignado correctamente`),T())}catch(ae){console.error("Error asignando:",ae),Ke.error(((ne=(ce=ae.response)==null?void 0:ce.data)==null?void 0:ne.error)||"Error al asignar solicitud")}finally{_(!1),p(null)}}},V=async F=>{var ee,Z;if(F.preventDefault(),!N.clienteNombre||!N.direccion){Ke.error("Nombre del cliente y direccin son obligatorios");return}try{(await wt.post("/solicitudes",N)).data.success&&(Ke.success(" Solicitud creada exitosamente"),d(!1),S({clienteNombre:"",clienteTelefono:"",direccion:"",sector:"",referencia:"",fechaPreferida:"",horaPreferida:"09:00",notas:""}),T())}catch(ce){console.error("Error creando solicitud:",ce),Ke.error(((Z=(ee=ce.response)==null?void 0:ee.data)==null?void 0:Z.error)||"Error al crear solicitud")}},P=F=>{const ee={pendiente:"bg-yellow-100 text-yellow-800 border-yellow-200",asignada:"bg-blue-100 text-blue-800 border-blue-200",asignada_pendiente:"bg-purple-100 text-purple-800 border-purple-200",completada:"bg-green-100 text-green-800 border-green-200",cancelada:"bg-red-100 text-red-800 border-red-200"};return ee[F]||ee.pendiente},B=n.filter(F=>F.estado==="pendiente");return i.jsxs("div",{className:"p-6 max-w-[1800px] mx-auto",children:[i.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Lr,{className:"text-indigo-500"}),"Gestin de Solicitudes - Drag & Drop"]}),i.jsx("p",{className:"text-slate-500",children:"Arrastra solicitudes y sultalas en los recolectores para asignarlas"})]}),i.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all",children:[i.jsx(w3e,{size:20}),"Nueva Solicitud"]})]}),B.length>0&&s.length>0&&i.jsx("div",{className:"mb-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:i.jsx(bz,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 mb-1",children:" Cmo usar el Drag & Drop"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[i.jsx("strong",{children:"1."})," Haz clic y mantn presionado sobre una solicitud (izquierda)",i.jsx("br",{}),i.jsx("strong",{children:"2."})," Arrastra hacia un recolector (derecha)",i.jsx("br",{}),i.jsx("strong",{children:"3."}),' Suelta cuando veas el mensaje " Suelta aqu para asignar"']})]})]})}),i.jsx("div",{className:"mb-6 flex gap-2 flex-wrap",children:["pendiente","asignada","completada","todas"].map(F=>i.jsxs("button",{onClick:()=>c(F),className:`px-4 py-2 rounded-lg font-medium transition-all ${l===F?"bg-indigo-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[F.charAt(0).toUpperCase()+F.slice(1),F==="pendiente"&&B.length>0&&i.jsx("span",{className:"ml-2 bg-white text-indigo-600 px-2 py-0.5 rounded-full text-xs font-bold",children:B.length})]},F))}),e?i.jsx("div",{className:"flex justify-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-2 border-indigo-200 dark:border-slate-600 shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-indigo-600 rounded-xl",children:i.jsx(V3e,{size:24,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Solicitudes Pendientes"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Arrastra para asignar  ",B.length," disponibles"]})]})]}),B.length===0?i.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-800/50 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600",children:[i.jsx(Lr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"No hay solicitudes pendientes"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Crea una nueva solicitud para comenzar"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[800px] overflow-y-auto pr-2",children:i.jsx(vw,{children:B.map(F=>{var ee,Z,ce,ne,ae,me;return i.jsxs(Qt.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},draggable:!0,onDragStart:Te=>z(Te,F),onDragEnd:G,className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border-2 border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-2xl hover:scale-[1.02] transition-all cursor-grab active:cursor-grabbing relative group",children:[i.jsx("div",{className:"absolute top-2 left-2 opacity-40 group-hover:opacity-100 transition-opacity",children:i.jsx(bz,{size:20,className:"text-slate-400"})}),i.jsx("div",{className:`absolute top-0 right-0 text-xs font-bold px-3 py-1 rounded-bl-lg border ${P(F.estado)}`,children:F.estado}),i.jsxs("div",{className:"p-5 pt-8",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[i.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg text-indigo-600 dark:text-indigo-400",children:i.jsx(ey,{size:20})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-base text-slate-800 dark:text-white line-clamp-2",children:(ee=F.ubicacion)==null?void 0:ee.direccion}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:((Z=F.ubicacion)==null?void 0:Z.sector)||"Sin sector"})]})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx(vl,{size:14,className:"text-slate-400"}),i.jsx("span",{className:"font-medium",children:(ce=F.cliente)==null?void 0:ce.nombre})]}),((ne=F.cliente)==null?void 0:ne.telefono)&&i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx(xl,{size:14,className:"text-slate-400"}),i.jsx("span",{className:"text-xs",children:F.cliente.telefono})]}),i.jsxs("div",{className:"flex items-center gap-2 text-slate-600 dark:text-slate-300",children:[i.jsx(Kl,{size:14,className:"text-slate-400"}),i.jsx("span",{className:"text-xs",children:(ae=F.programacion)==null?void 0:ae.fecha}),i.jsx(Wo,{size:14,className:"text-slate-400 ml-1"}),i.jsx("span",{className:"text-xs font-medium text-indigo-600 dark:text-indigo-400",children:((me=F.programacion)==null?void 0:me.hora)||"Flexible"})]}),F.notas&&i.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-700 bg-amber-50 dark:bg-amber-900/20 p-2 rounded mt-2",children:[i.jsx(_s,{size:12,className:"flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"line-clamp-2",children:F.notas})]})]})]})]},F.id)})})})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-slate-800 dark:to-slate-700 rounded-2xl p-6 border-2 border-emerald-200 dark:border-slate-600 shadow-xl sticky top-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-emerald-600 rounded-xl",children:i.jsx(od,{size:24,className:"text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Recolectores Activos"}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Suelta aqu para asignar  ",s.length]})]})]}),s.length===0?i.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800/50 rounded-xl border-2 border-dashed border-slate-300 dark:border-slate-600",children:[i.jsx(od,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),i.jsx("p",{className:"text-slate-500",children:"No hay recolectores activos"})]}):i.jsx("div",{className:"space-y-4 max-h-[800px] overflow-y-auto pr-2",children:s.map(F=>{const ee=g===F.id;return i.jsxs(Qt.div,{onDragOver:Z=>O(Z,F.id),onDragLeave:D,onDrop:Z=>I(Z,F.id),animate:{scale:ee?1.05:1,borderColor:ee?"#10b981":void 0},className:`
                                                    bg-white dark:bg-slate-800 rounded-xl p-5 border-3 transition-all shadow-lg
                                                    ${ee?"border-emerald-500 shadow-2xl shadow-emerald-200 dark:shadow-emerald-900/50 bg-emerald-50 dark:bg-emerald-900/20":"border-slate-200 dark:border-slate-700 hover:border-emerald-300 dark:hover:border-emerald-600"}
                                                `,children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:`p-3 rounded-full ${ee?"bg-emerald-500":"bg-emerald-100 dark:bg-emerald-900/50"}`,children:i.jsx(ts,{size:24,className:ee?"text-white":"text-emerald-600 dark:text-emerald-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:F.nombre}),F.telefono&&i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[i.jsx(xl,{size:12}),F.telefono]})]})]}),F.zonaAsignada&&i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-700/50 px-3 py-1.5 rounded-lg",children:[i.jsx(Da,{size:12,className:"text-emerald-600 dark:text-emerald-400"}),i.jsxs("span",{children:["Zona: ",F.zonaAsignada]})]}),ee&&i.jsx(Qt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-3 text-center text-sm font-bold text-emerald-700 dark:text-emerald-300 bg-emerald-100 dark:bg-emerald-900/30 py-2 rounded-lg",children:" Suelta aqu para asignar"})]},F.id)})})]})})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs(Qt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full p-6 my-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Nueva Solicitud de Recoleccin"}),i.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(Zn,{size:24})})]}),i.jsxs("form",{onSubmit:V,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Nombre del Cliente *"}),i.jsx("input",{type:"text",required:!0,value:N.clienteNombre,onChange:F=>S({...N,clienteNombre:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Telfono"}),i.jsx("input",{type:"tel",value:N.clienteTelefono,onChange:F=>S({...N,clienteTelefono:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Direccin *"}),i.jsx("input",{type:"text",required:!0,value:N.direccion,onChange:F=>S({...N,direccion:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Sector"}),i.jsx("input",{type:"text",value:N.sector,onChange:F=>S({...N,sector:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Referencia"}),i.jsx("input",{type:"text",value:N.referencia,onChange:F=>S({...N,referencia:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha Preferida"}),i.jsx("input",{type:"date",value:N.fechaPreferida,onChange:F=>S({...N,fechaPreferida:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Hora Preferida"}),i.jsx("input",{type:"time",value:N.horaPreferida,onChange:F=>S({...N,horaPreferida:F.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Notas"}),i.jsx("textarea",{value:N.notas,onChange:F=>S({...N,notas:F.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-slate-700 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-4 py-3 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white font-semibold rounded-lg transition-all",children:"Cancelar"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-lg shadow-md transition-all",children:"Crear Solicitud"})]})]})]})}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-6 shadow-2xl flex items-center gap-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-indigo-500"}),i.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:"Asignando..."})]})})]})},xut=()=>{const{userData:t}=ca(),e=Fs(),[r,n]=A.useState(!0),[a,s]=A.useState([]);A.useEffect(()=>{o();const u=setInterval(o,15e3);return()=>clearInterval(u)},[]);const o=async()=>{try{const u=await wt.get(`/solicitudes?recolectorId=${t.uid}&estado=asignada`);u.data.success&&s(u.data.data)}catch(u){console.error("Error cargando mis solicitudes:",u)}finally{n(!1)}},l=u=>{e("/recolecciones/nueva",{state:{solicitud:u}})},c=u=>{const d=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(u)}`;window.open(d,"_blank")};return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Lr,{className:"text-indigo-500"}),"Mis Solicitudes Asignadas"]}),i.jsx("p",{className:"text-slate-500",children:"Recolecciones que la secretaria te ha asignado"})]}),i.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-lg border border-indigo-100 dark:border-indigo-800",children:[i.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-bold text-lg",children:a.length}),i.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 text-sm ml-2",children:"asignadas"})]})]}),r?i.jsx("div",{className:"flex justify-center py-20",children:i.jsx(xp,{className:"animate-spin w-12 h-12 text-indigo-500"})}):a.length===0?i.jsxs("div",{className:"text-center py-20 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-300 dark:border-slate-700",children:[i.jsx(Lr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-700 dark:text-slate-300",children:"No tienes solicitudes asignadas"}),i.jsx("p",{className:"text-slate-500 mt-2",children:"Cuando la secretaria te asigne una recoleccin, aparecer aqu."})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.jsx(vw,{children:a.map(u=>{var d,h,p,g,b,w,_,N;return i.jsxs(Qt.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 overflow-hidden hover:shadow-xl transition-shadow",children:[i.jsx("div",{className:"bg-indigo-600 text-white text-center py-2 text-xs font-bold",children:" ASIGNADA - Lista para recolectar"}),i.jsxs("div",{className:"p-5",children:[i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-full text-indigo-600 dark:text-indigo-400",children:i.jsx(Da,{size:24})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white line-clamp-2",children:((d=u.ubicacion)==null?void 0:d.direccion)||((h=u.cliente)==null?void 0:h.direccion)}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:((p=u.ubicacion)==null?void 0:p.sector)||"Sin sector"})]})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(vl,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"font-medium",children:(g=u.cliente)==null?void 0:g.nombre})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(xl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:((b=u.cliente)==null?void 0:b.telefono)||"Sin telfono"})]}),((w=u.cliente)==null?void 0:w.email)&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(lh,{size:16,className:"text-slate-400"}),i.jsx("span",{className:"text-xs",children:u.cliente.email})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(Kl,{size:16,className:"text-slate-400"}),i.jsx("span",{children:(_=u.programacion)==null?void 0:_.fecha}),i.jsx(Wo,{size:16,className:"text-slate-400 ml-2"}),i.jsx("span",{className:"font-medium text-indigo-600 dark:text-indigo-400",children:((N=u.programacion)==null?void 0:N.hora)||"Flexible"})]}),u.notas&&i.jsxs("div",{className:"flex items-start gap-2 text-xs text-amber-600 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[i.jsx(_s,{size:14,className:"flex-shrink-0 mt-0.5"}),i.jsx("span",{children:u.notas})]})]}),u.fotos&&u.fotos.length>0&&i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3 mt-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Gf,{size:16,className:"text-indigo-600"}),i.jsxs("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:["Fotos del Cliente (",u.fotos.length,")"]})]}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.fotos.slice(0,3).map((S,T)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:S,alt:`Foto ${T+1}`,className:"w-full h-20 object-cover rounded-lg border border-slate-200 dark:border-slate-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.open(S,"_blank")}),i.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:i.jsx(zd,{className:"text-white",size:20})})]},T))}),u.fotos.length>3&&i.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["+",u.fotos.length-3," foto(s) ms (vers todas al iniciar)"]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("button",{onClick:()=>{var S,T;return c(((S=u.ubicacion)==null?void 0:S.direccion)||((T=u.cliente)==null?void 0:T.direccion))},className:"py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2 text-sm",children:[i.jsx(ey,{size:18}),"Ver Mapa"]}),i.jsxs("button",{onClick:()=>l(u),className:"py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-lg shadow-md transition-all active:scale-95 flex justify-center items-center gap-2 text-sm",children:[i.jsx(Jr,{size:18}),"Iniciar"]})]})]})]},u.id)})})})]})};function vut(){const[t,e]=A.useState([]),[r,n]=A.useState([]),[a,s]=A.useState(!0),[o,l]=A.useState(null),[c,u]=A.useState(null),[d,h]=A.useState(!1);A.useEffect(()=>{p()},[]);const p=async()=>{s(!0);try{await Promise.all([g(),b()])}catch(D){console.error(D),Ke.error("Error cargando datos")}finally{s(!1)}},g=async()=>{const D=await wt.get("/companies");D.data.success&&e(D.data.data||[])},b=async()=>{try{const D=await wt.get("/whatsapp/instances");n(D.data)}catch(D){console.error("Error fetching instances:",D),n([])}},w=D=>`company_${D.nombre.toLowerCase().replace(/[^a-z0-9]/g,"_")}_${D.id}`,_=D=>{var B,F;const I=w(D),V=r.find(ee=>{var Z;return ee.name===I||((Z=ee.instance)==null?void 0:Z.instanceName)===I});return V?V.connectionStatus==="open"||((B=V.instance)==null?void 0:B.state)==="open"||((F=V.instance)==null?void 0:F.status)==="open"?"connected":"disconnected":"not_created"},N=async D=>{const I=w(D);l(D),u(null),h(!0);const V={instanceName:I,token:"secret_token_"+D.id,qrcode:!0,integration:"WHATSAPP-BAILEYS"};try{const P=await wt.post("/whatsapp/instance",V);P.data.qrcode&&P.data.qrcode.base64?(u(P.data.qrcode.base64),T(I)):S(I)}catch(P){if(P.response&&P.response.status===403){console.warn("Instancia Zombie detectada. Eliminando y recreando...",P),Ke.loading("Reiniciando instancia antigua...");try{await wt.delete(`/whatsapp/instance/${I}`),await new Promise(F=>setTimeout(F,4e3));const B=await wt.post("/whatsapp/instance",V);Ke.dismiss(),B.data.qrcode&&B.data.qrcode.base64?(u(B.data.qrcode.base64),T(I),Ke.success("Instancia reiniciada correctamente")):(await new Promise(F=>setTimeout(F,2e3)),S(I))}catch(B){console.error("Fallo al recrear:",B),Ke.dismiss(),Ke.error("No se pudo reiniciar la instancia. Intenta esperar unos segundos.")}}else console.warn("Error creando, intentando conectar...",P),S(I)}},S=async(D,I=0)=>{var V,P,B;try{const ee=(await wt.get(`/whatsapp/instance/${D}/connect`)).data;ee.base64||(V=ee.qrcode)!=null&&V.base64?(u(ee.base64||ee.qrcode.base64),T(D)):((P=ee.instance)==null?void 0:P.state)==="open"||((B=ee.instance)==null?void 0:B.status)==="open"?(Ke.success("Esta instancia ya estaba conectada!"),z(),b()):I<10?(console.log(`No se recibi QR, reintentando (${I+1}/10)...`),setTimeout(()=>S(D,I+1),3e3)):(console.warn("Respuesta connect inesperada (Final):",ee),Ke.warning("No se pudo obtener el QR tras varios intentos. La API puede estar lenta."),T(D))}catch(F){console.error("Error conectando:",F),I<10?setTimeout(()=>S(D,I+1),3e3):Ke.error("Error conectando: "+F.message)}},T=D=>{let I=0;const V=40,P=setInterval(async()=>{var B,F,ee;if(I++,I>V){clearInterval(P),Ke.error('Tiempo de espera agotado. Por favor intenta "Forzar Reinicio".');return}try{const ce=(await wt.get(`/whatsapp/instance/${D}/connect`)).data;(ce.base64||(B=ce.qrcode)!=null&&B.base64)&&u(ce.base64||ce.qrcode.base64),(((F=ce.instance)==null?void 0:F.state)==="open"||((ee=ce.instance)==null?void 0:ee.status)==="open")&&(clearInterval(P),Ke.success(`${o==null?void 0:o.nombre} conectado exitosamente!`),z(),b())}catch(Z){console.warn("Polling error",Z)}},3e3)},R=async D=>{if(!confirm(`Eliminar la conexin de WhatsApp de ${D.nombre}? Dejarn de enviarse mensajes.`))return;const I=w(D);try{await wt.delete(`/whatsapp/instance/${I}`),Ke.success("Instancia eliminada"),b()}catch{Ke.error("Error eliminando instancia")}},z=()=>{l(null),u(null),h(!1)},G=t.filter(D=>["automatizado","smart"].includes(D.plan)),O=t.filter(D=>!["automatizado","smart"].includes(D.plan));return i.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Ire,{className:"text-green-600"})," Gestin Multi-Tenant WhatsApp"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Administra las conexiones de WhatsApp para clientes con Plan Automatizado (75k) o Superior."})]}),i.jsx("button",{onClick:p,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition",children:i.jsx(W0,{size:20,className:a?"animate-spin text-indigo-600":"text-slate-500"})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50",children:i.jsxs("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Compaas Habilitadas (",G.length,")"]})}),i.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Compaa"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Plan"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado WhatsApp"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),i.jsxs("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:[a&&i.jsx("tr",{children:i.jsx("td",{colSpan:"4",className:"px-6 py-10 text-center",children:"Cargando datos..."})}),!a&&G.map(D=>{const I=_(D);return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-10 w-10 flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/50 rounded-full flex items-center justify-center text-indigo-600 dark:text-indigo-400",children:i.jsx(Qm,{size:20})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:D.nombre}),i.jsx("div",{className:"text-sm text-slate-500",children:D.adminEmail})]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${D.plan==="smart"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:D.plan.toUpperCase()})}),i.jsxs("td",{className:"px-6 py-4",children:[I==="connected"&&i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300",children:[i.jsx("span",{className:"w-2 h-2 mr-1 bg-green-500 rounded-full animate-pulse"}),"Conectado"]}),I==="disconnected"&&i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",children:[i.jsx("span",{className:"w-2 h-2 mr-1 bg-yellow-500 rounded-full"}),"Requiere Escaneo"]}),I==="not_created"&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-300",children:"Sin Configurar"})]}),i.jsx("td",{className:"px-6 py-4 text-right space-x-2",children:I==="connected"?i.jsx("button",{onClick:()=>R(D),className:"text-red-500 hover:text-red-700 p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition",title:"Desconectar / Eliminar",children:i.jsx(vp,{size:18})}):i.jsxs("button",{onClick:()=>N(D),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[i.jsx(h4e,{size:16,className:"mr-1.5"}),I==="disconnected"?"Escanear QR":"Crear & Conectar"]})})]},D.id)})]})]})]}),O.length>0&&i.jsx("div",{className:"opacity-60",children:i.jsxs("h3",{className:"text-sm font-medium text-slate-500 mb-2 px-2",children:["Compaas sin acceso a Automation (Plan Operativo) - ",O.length]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:["Conectar ",o.nombre]}),i.jsx("button",{onClick:z,className:"text-slate-400 hover:text-slate-600",children:i.jsx("span",{className:"text-2xl",children:""})})]}),i.jsx("div",{className:"p-8 flex flex-col items-center",children:c?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-400 to-blue-500 rounded-lg blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200"}),i.jsx("img",{src:c,alt:"QR",className:"relative w-64 h-64 rounded-lg bg-white p-2 shadow-sm"})]}),i.jsxs("p",{className:"mt-6 text-center text-slate-600 dark:text-slate-300 text-sm",children:["Abre WhatsApp  Dispositivos Vinculados  ",i.jsx("strong",{children:"Escanear Cdigo"})]}),i.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-green-600 bg-green-50 px-3 py-1 rounded-full animate-pulse",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Esperando conexin..."]})]}):i.jsxs("div",{className:"py-12 flex flex-col items-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mb-4"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Conectando con Evolution API..."}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Esto puede tomar hasta 30 segundos"}),d&&i.jsx("button",{onClick:()=>{confirm("Reiniciar conexin? Esto borrar la sesin actual.")&&N(o)},className:"mt-6 text-xs text-red-500 hover:text-red-700 underline",children:"Tarda demasiado? Forzar Reinicio"})]})})]})})]})}const yC=()=>{var P,B;const{user:t}=ca(),[e,r]=A.useState(!1),[n,a]=A.useState([]),[s,o]=A.useState([]),[l,c]=A.useState(!0),[u,d]=A.useState({busqueda:"",contenedor:"",fechaInicio:"",fechaFin:"",tipo:"",estado:"",repartidor:"",zona:""}),[h,p]=A.useState(null),[g,b]=A.useState(!1),[w,_]=A.useState(!1),[N,S]=A.useState(null);A.useEffect(()=>{T()},[t]);const T=async()=>{r(!0);try{const F=await t.getIdToken(),ee=await fetch("https://proyecto-envios-production.up.railway.app/api/api/rutas/historial",{headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"}});if(ee.ok){const Z=await ee.json();a(Z.rutas||[]),o(Z.rutas||[])}}catch(F){console.error("Error cargando historial:",F)}finally{r(!1)}};A.useEffect(()=>{R()},[u,n]);const R=()=>{let F=[...n];if(u.busqueda){const ee=u.busqueda.toLowerCase();F=F.filter(Z=>{var ce,ne,ae,me;return((ce=Z.nombre)==null?void 0:ce.toLowerCase().includes(ee))||((ne=Z.id)==null?void 0:ne.toLowerCase().includes(ee))||((ae=Z.repartidorNombre)==null?void 0:ae.toLowerCase().includes(ee))||((me=Z.zona)==null?void 0:me.toLowerCase().includes(ee))})}u.contenedor&&(F=F.filter(ee=>{var Z;return(Z=ee.numeroContenedor)==null?void 0:Z.toLowerCase().includes(u.contenedor.toLowerCase())})),u.fechaInicio&&(F=F.filter(ee=>{const Z=new Date(ee.fechaCreacion||ee.createdAt),ce=new Date(u.fechaInicio);return Z>=ce})),u.fechaFin&&(F=F.filter(ee=>{const Z=new Date(ee.fechaCreacion||ee.createdAt),ce=new Date(u.fechaFin);return ce.setHours(23,59,59),Z<=ce})),u.tipo&&(F=F.filter(ee=>ee.tipo===u.tipo)),u.estado&&(F=F.filter(ee=>ee.estado===u.estado)),u.repartidor&&(F=F.filter(ee=>{var Z;return(Z=ee.repartidorNombre)==null?void 0:Z.toLowerCase().includes(u.repartidor.toLowerCase())})),u.zona&&(F=F.filter(ee=>{var Z;return(Z=ee.zona)==null?void 0:Z.toLowerCase().includes(u.zona.toLowerCase())})),o(F)},z=()=>{d({busqueda:"",contenedor:"",fechaInicio:"",fechaFin:"",tipo:"",estado:"",repartidor:"",zona:""})},G=(F,ee)=>{d(Z=>({...Z,[F]:ee}))},O=F=>{p(F),b(!0)},D=F=>{S(F),_(!0)},I=F=>({pendiente:"bg-yellow-100 text-yellow-800",en_curso:"bg-blue-100 text-blue-800",en_ruta:"bg-indigo-100 text-indigo-800",cargada:"bg-purple-100 text-purple-800",completada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"})[F]||"bg-gray-100 text-gray-800",V=F=>F==="recoleccion"?i.jsx(Lr,{className:"h-5 w-5 text-indigo-600"}):i.jsx(ts,{className:"h-5 w-5 text-emerald-600"});return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 p-6",children:[i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:" Historial de Rutas"}),i.jsx("p",{className:"text-slate-600",children:"Consulta y filtra el historial completo de rutas, contenedores y fotos"})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 mb-6 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-purple-50 cursor-pointer",onClick:()=>c(!l),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Tre,{className:"h-6 w-6 text-indigo-600"}),i.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Filtros Avanzados"}),i.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:[s.length," resultados"]})]}),l?i.jsx(g3e,{className:"h-5 w-5 text-slate-600"}):i.jsx(Sre,{className:"h-5 w-5 text-slate-600"})]}),l&&i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Bsqueda General"}),i.jsxs("div",{className:"relative",children:[i.jsx($d,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),i.jsx("input",{type:"text",value:u.busqueda,onChange:F=>G("busqueda",F.target.value),placeholder:"Buscar por cdigo, repartidor, zona...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"N Contenedor"}),i.jsx("input",{type:"text",value:u.contenedor,onChange:F=>G("contenedor",F.target.value),placeholder:"EMI-CNT-XXXX",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fecha Inicio"}),i.jsx("input",{type:"date",value:u.fechaInicio,onChange:F=>G("fechaInicio",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Fecha Fin"}),i.jsx("input",{type:"date",value:u.fechaFin,onChange:F=>G("fechaFin",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Ruta"}),i.jsxs("select",{value:u.tipo,onChange:F=>G("tipo",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"recoleccion",children:"Recoleccin"}),i.jsx("option",{value:"entrega",children:"Entrega"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado"}),i.jsxs("select",{value:u.estado,onChange:F=>G("estado",F.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"pendiente",children:"Pendiente"}),i.jsx("option",{value:"en_curso",children:"En Curso"}),i.jsx("option",{value:"en_ruta",children:"En Ruta"}),i.jsx("option",{value:"cargada",children:"Cargada"}),i.jsx("option",{value:"completada",children:"Completada"}),i.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Repartidor"}),i.jsx("input",{type:"text",value:u.repartidor,onChange:F=>G("repartidor",F.target.value),placeholder:"Nombre del repartidor",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Zona"}),i.jsx("input",{type:"text",value:u.zona,onChange:F=>G("zona",F.target.value),placeholder:"Zona de entrega",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:[i.jsx(Zn,{className:"h-5 w-5"}),"Limpiar Filtros"]})})]})]}),e?i.jsx("div",{className:"flex justify-center items-center py-20",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):s.length===0?i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 p-12 text-center",children:[i.jsx(Nu,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 text-lg",children:"No se encontraron rutas con los filtros aplicados"})]}):i.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.map(F=>{var ee,Z;return i.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-6 hover:shadow-xl transition-all duration-300 cursor-pointer",onClick:()=>O(F),children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl",children:V(F.tipo)}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800",children:F.nombre||F.id}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${I(F.estado)}`,children:(ee=F.estado)==null?void 0:ee.replace("_"," ").toUpperCase()}),F.numeroContenedor&&i.jsxs("span",{className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-medium",children:[" ",F.numeroContenedor]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(vl,{className:"h-4 w-4"}),F.repartidorNombre||"Sin asignar"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Da,{className:"h-4 w-4"}),F.zona||"Sin zona"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Kl,{className:"h-4 w-4"}),new Date(F.fechaCreacion||F.createdAt).toLocaleDateString("es-DO")]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[i.jsx(Lr,{className:"h-4 w-4"}),((Z=F.facturas)==null?void 0:Z.length)||0," paquetes"]})]}),F.fotos&&F.fotos.length>0&&i.jsxs("div",{className:"flex items-center gap-2 mt-3 text-sm text-indigo-600",children:[i.jsx(zd,{className:"h-4 w-4"}),F.fotos.length," foto",F.fotos.length>1?"s":""," disponible",F.fotos.length>1?"s":""]})]})]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:shadow-lg transition-all",children:[i.jsx(Su,{className:"h-5 w-5"}),"Ver Detalles"]})]})},F.id)})})]}),g&&h&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold",children:h.nombre||h.id}),i.jsx("p",{className:"text-indigo-100 text-sm mt-1",children:"Detalles completos de la ruta"})]}),i.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:i.jsx(Zn,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Informacin General"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-xl",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Tipo"}),i.jsx("p",{className:"font-medium text-slate-800",children:h.tipo==="recoleccion"?"Recoleccin":"Entrega"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Estado"}),i.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium ${I(h.estado)}`,children:(P=h.estado)==null?void 0:P.replace("_"," ").toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Repartidor"}),i.jsx("p",{className:"font-medium text-slate-800",children:h.repartidorNombre||"Sin asignar"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Zona"}),i.jsx("p",{className:"font-medium text-slate-800",children:h.zona||"Sin zona"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Fecha Creacin"}),i.jsx("p",{className:"font-medium text-slate-800",children:new Date(h.fechaCreacion||h.createdAt).toLocaleString("es-DO")})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Paquetes"}),i.jsx("p",{className:"font-medium text-slate-800",children:((B=h.facturas)==null?void 0:B.length)||0})]}),h.numeroContenedor&&i.jsxs("div",{className:"col-span-2",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"N Contenedor"}),i.jsx("p",{className:"font-medium text-indigo-600",children:h.numeroContenedor})]})]})]}),h.facturas&&h.facturas.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Paquetes en la Ruta"}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:h.facturas.map((F,ee)=>i.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-slate-800",children:F.codigoTracking||`Paquete ${ee+1}`}),F.destinatario&&i.jsx("p",{className:"text-sm text-slate-600",children:F.destinatario.nombre})]}),F.estadoGeneral&&i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(F.estadoGeneral)}`,children:F.estadoGeneral.replace("_"," ")})]},ee))})]}),h.fotos&&h.fotos.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Fotos de la Ruta"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.fotos.map((F,ee)=>i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>D(F),children:[i.jsx("img",{src:F.url||F,alt:`Foto ${ee+1}`,className:"w-full h-32 object-cover rounded-lg border border-slate-200"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:i.jsx(Su,{className:"h-8 w-8 text-white opacity-0 group-hover:opacity-100 transition-all"})}),F.descripcion&&i.jsx("p",{className:"text-xs text-slate-600 mt-1",children:F.descripcion})]},ee))})]}),h.historial&&h.historial.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Historial de Eventos"}),i.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:h.historial.map((F,ee)=>i.jsxs("div",{className:"flex items-start gap-3 bg-slate-50 p-3 rounded-lg",children:[i.jsx(Wo,{className:"h-5 w-5 text-indigo-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"font-medium text-slate-800",children:F.descripcion||F.accion}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:new Date(F.fecha).toLocaleString("es-DO")})]})]},ee))})]}),(h.notas||h.notasCargador||h.notasRepartidor)&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:" Notas"}),i.jsxs("div",{className:"space-y-2",children:[h.notas&&i.jsxs("div",{className:"bg-amber-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-medium text-amber-900 mb-1",children:"Notas Generales:"}),i.jsx("p",{className:"text-sm text-amber-800",children:h.notas})]}),h.notasCargador&&i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Notas del Cargador:"}),i.jsx("p",{className:"text-sm text-blue-800",children:h.notasCargador})]}),h.notasRepartidor&&i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Notas del Repartidor:"}),i.jsx("p",{className:"text-sm text-green-800",children:h.notasRepartidor})]})]})]})]})]})}),w&&N&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:()=>_(!1),children:i.jsxs("div",{className:"relative max-w-5xl w-full",children:[i.jsx("button",{onClick:()=>_(!1),className:"absolute top-4 right-4 p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors z-10",children:i.jsx(Zn,{className:"h-6 w-6 text-white"})}),i.jsx("img",{src:N.url||N,alt:"Foto ampliada",className:"w-full h-auto rounded-xl shadow-2xl",onClick:F=>F.stopPropagation()}),N.descripcion&&i.jsx("div",{className:"mt-4 bg-white/10 backdrop-blur-sm p-4 rounded-xl",children:i.jsx("p",{className:"text-white text-center",children:N.descripcion})})]})})]})},$g={RFID_ZEBRA:"rfid_zebra_automatic",BARCODE_MANUAL:"barcode_manual_scanner"},qK=[{value:"munbyn",label:"MUNBYN",precio:60},{value:"netum",label:"NETUM",precio:35},{value:"honeywell",label:"Honeywell",precio:120},{value:"zebra_scanner",label:"Zebra Scanner",precio:200},{value:"otro",label:"Otro",precio:0}],GK=[{value:"munbyn",label:"MUNBYN",precio:140},{value:"netum",label:"NETUM",precio:90},{value:"zebra",label:"Zebra",precio:350},{value:"dymo",label:"DYMO",precio:250},{value:"brother",label:"Brother",precio:180},{value:"otro",label:"Otro",precio:0}],but=()=>{var me,Te,we,q,Y,X,re,se,Ce,je,pe,Oe,qe,Ue;const[t,e]=A.useState([]),[r,n]=A.useState(null),[a,s]=A.useState(null),[o,l]=A.useState(!1),[c,u]=A.useState(!1),[d,h]=A.useState(!1),[p,g]=A.useState(!1),[b,w]=A.useState(""),[_,N]=A.useState(""),[S,T]=A.useState({marca:"munbyn",modelo:"",nombre:"",ubicacion:"",conexion:"wireless",precio:60}),[R,z]=A.useState({marca:"netum",modelo:"",nombre:"",ubicacion:"",conexion:"usb",precio:90}),[G,O]=A.useState(!1),[D,I]=A.useState({nombre:"Etiquetas Adhesivas",tipo:"etiquetas",cantidad:1,costoUnitario:10,descripcion:"Rollo de etiquetas (1000 u)"});A.useEffect(()=>{V()},[]),A.useEffect(()=>{r&&P(r.id)},[r]);const V=async()=>{try{l(!0);const Me=await wt.get("/companies");Me.data.success&&e(Me.data.data)}catch(Me){console.error("Error cargando compaas:",Me),Ke.error("Error al cargar compaas")}finally{l(!1)}},P=async Me=>{try{l(!0);const Be=await wt.get(`/hardware/${Me}`);Be.data.success&&s(Be.data.data)}catch(Be){console.error("Error cargando configuracin:",Be),Ke.error("Error al cargar configuracin de hardware")}finally{l(!1)}},B=async()=>{var Me,Be;if(!(!r||!b))try{l(!0);const ve=await wt.post(`/hardware/${r.id}/cambiar-sistema`,{nuevoSistema:b,motivo:_});ve.data.success&&(Ke.success(ve.data.message),await P(r.id),u(!1),w(""),N(""))}catch(ve){console.error("Error cambiando sistema:",ve),Ke.error(((Be=(Me=ve.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al cambiar sistema")}finally{l(!1)}},F=async()=>{var Me,Be;if(!r||!S.nombre){Ke.error("Completa todos los campos requeridos");return}try{l(!0),(await wt.post(`/hardware/${r.id}/scanners`,S)).data.success&&(Ke.success("Scanner agregado exitosamente"),await P(r.id),h(!1),T({marca:"munbyn",modelo:"",nombre:"",ubicacion:"",conexion:"wireless",precio:60}))}catch(ve){console.error("Error agregando scanner:",ve),Ke.error(((Be=(Me=ve.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al agregar scanner")}finally{l(!1)}},ee=async()=>{var Me,Be;if(!r||!R.nombre){Ke.error("Completa todos los campos requeridos");return}try{l(!0),(await wt.post(`/hardware/${r.id}/impresoras`,R)).data.success&&(Ke.success("Impresora agregada exitosamente"),await P(r.id),g(!1),z({marca:"netum",modelo:"",nombre:"",ubicacion:"",conexion:"usb",precio:90}))}catch(ve){console.error("Error agregando impresora:",ve),Ke.error(((Be=(Me=ve.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al agregar impresora")}finally{l(!1)}},Z=async()=>{var Me,Be;if(!r||!D.nombre){Ke.error("Completa todos los campos");return}try{l(!0),(await wt.post(`/hardware/${r.id}/consumibles`,D)).data.success&&(Ke.success("Consumible agregado exitosamente"),await P(r.id),O(!1),I({nombre:"Etiquetas Adhesivas",tipo:"etiquetas",cantidad:1,costoUnitario:10,descripcion:"Rollo de etiquetas (1000 u)"}))}catch(ve){console.error("Error agregando consumible:",ve),Ke.error(((Be=(Me=ve.response)==null?void 0:Me.data)==null?void 0:Be.message)||"Error al agregar consumible")}finally{l(!1)}},ce=async(Me,Be)=>{if(confirm(`Eliminar este ${Be}?`))try{l(!0),(await wt.delete(`/hardware/${r.id}/dispositivos/${Me}?tipo=${Be}`)).data.success&&(Ke.success(`${Be==="scanner"?"Scanner":"Impresora"} eliminado`),await P(r.id))}catch(ve){console.error("Error eliminando dispositivo:",ve),Ke.error("Error al eliminar dispositivo")}finally{l(!1)}},ne=async()=>{if(r)try{l(!0);const Me=!a.enabled;(await wt.patch(`/hardware/${r.id}/toggle`,{enabled:Me})).data.success&&(Ke.success(Me?"Sistema activado":"Sistema desactivado"),await P(r.id))}catch(Me){console.error("Error cambiando estado:",Me),Ke.error("Error al cambiar estado del sistema")}finally{l(!1)}},ae=(a==null?void 0:a.sistemaActivo)===$g.RFID_ZEBRA?"Zebra RFID Automtico":"Scanners Manuales";return i.jsx("div",{className:"h-full overflow-auto bg-slate-50 p-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[i.jsx(EP,{className:"text-indigo-600",size:32}),"Gestin de Hardware"]}),i.jsx("p",{className:"text-slate-600 mt-1",children:"Configura sistemas Zebra RFID y Scanners Manuales"})]}),r&&a&&i.jsxs("button",{onClick:ne,className:`px-6 py-3 rounded-lg font-semibold transition flex items-center gap-2 ${a.enabled?"bg-emerald-600 text-white hover:bg-emerald-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:[a.enabled?i.jsx(Jr,{size:20}):i.jsx(_s,{size:20}),a.enabled?"Sistema Activo":"Sistema Inactivo"]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Seleccionar Compaa"}),i.jsxs("select",{value:(r==null?void 0:r.id)||"",onChange:Me=>{const Be=t.find(ve=>ve.id===Me.target.value);n(Be)},className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"-- Selecciona una compaa --"}),t.map(Me=>i.jsx("option",{value:Me.id,children:Me.nombre},Me.id))]})]}),r&&a&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-slate-900 flex items-center gap-2",children:[a.sistemaActivo===$g.RFID_ZEBRA?i.jsx(yz,{className:"text-purple-600",size:24}):i.jsx(Are,{className:"text-indigo-600",size:24}),"Sistema Activo: ",ae]}),i.jsxs("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(xz,{size:18}),"Cambiar Sistema"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Tipo"}),i.jsx("p",{className:"text-lg font-bold text-slate-900",children:ae})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Estado"}),i.jsx("p",{className:`text-lg font-bold ${a.enabled?"text-emerald-600":"text-slate-400"}`,children:a.enabled?"Activo":"Inactivo"})]}),i.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Inversin Total"}),i.jsxs("p",{className:"text-lg font-bold text-indigo-600",children:["$",((Te=(me=a.barcodeManual)==null?void 0:me.estadisticasGenerales)==null?void 0:Te.costoTotalInversion)||0," USD"]})]})]})]}),a.sistemaActivo===$g.BARCODE_MANUAL&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[i.jsx(Lj,{className:"text-indigo-600",size:20}),"Scanners Manuales (",((q=(we=a.barcodeManual)==null?void 0:we.scanners)==null?void 0:q.length)||0,")"]}),i.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Vd,{size:18}),"Agregar Scanner"]})]}),((X=(Y=a.barcodeManual)==null?void 0:Y.scanners)==null?void 0:X.length)>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.barcodeManual.scanners.map(Me=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:Me.nombre}),i.jsxs("p",{className:"text-sm text-slate-600",children:[Me.marca.toUpperCase()," - ",Me.modelo]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Me.ubicacion})]}),i.jsx("button",{onClick:()=>ce(Me.id,"scanner"),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition",children:i.jsx(vp,{size:18})})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Me.activo?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:Me.activo?"Activo":"Inactivo"}),i.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Me.precio," USD"]})]})]},Me.id))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Lj,{className:"mx-auto mb-2 text-slate-400",size:48}),i.jsx("p",{children:"No hay scanners configurados"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[i.jsx(ql,{className:"text-indigo-600",size:20}),"Impresoras Trmicas (",((se=(re=a.barcodeManual)==null?void 0:re.impresoras)==null?void 0:se.length)||0,")"]}),i.jsxs("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Vd,{size:18}),"Agregar Impresora"]})]}),((je=(Ce=a.barcodeManual)==null?void 0:Ce.impresoras)==null?void 0:je.length)>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.barcodeManual.impresoras.map(Me=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:Me.nombre}),i.jsxs("p",{className:"text-sm text-slate-600",children:[Me.marca.toUpperCase()," - ",Me.modelo]}),i.jsx("p",{className:"text-xs text-slate-500 mt-1",children:Me.ubicacion})]}),i.jsx("button",{onClick:()=>ce(Me.id,"impresora"),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition",children:i.jsx(vp,{size:18})})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Me.activo?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:Me.activo?"Activa":"Inactiva"}),i.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Me.precio," USD"]})]})]},Me.id))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(ql,{className:"mx-auto mb-2 text-slate-400",size:48}),i.jsx("p",{children:"No hay impresoras configuradas"})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[i.jsx(Lr,{className:"text-indigo-600",size:20}),"Consumibles (",((Oe=(pe=a.barcodeManual)==null?void 0:pe.consumibles)==null?void 0:Oe.length)||0,")"]}),i.jsxs("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center gap-2",children:[i.jsx(Vd,{size:18}),"Agregar Consumible"]})]}),((Ue=(qe=a.barcodeManual)==null?void 0:qe.consumibles)==null?void 0:Ue.length)>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.barcodeManual.consumibles.map(Me=>i.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-slate-900",children:Me.nombre}),i.jsx("p",{className:"text-sm text-slate-600",children:Me.descripcion||Me.tipo})]}),i.jsx("button",{onClick:()=>ce(Me.id,"consumible"),className:"p-2 text-rose-600 hover:bg-rose-50 rounded-lg transition",children:i.jsx(vp,{size:18})})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"bg-slate-100 px-2 py-1 rounded text-slate-600",children:["Cant: ",Me.cantidad]}),i.jsxs("span",{className:"text-slate-500 text-xs",children:["($",Me.costoUnitario,"/u)"]})]}),i.jsxs("span",{className:"text-indigo-600 font-bold",children:["$",Me.costoTotal," USD"]})]})]},Me.id))}):i.jsxs("div",{className:"text-center py-8 text-slate-500",children:[i.jsx(Lr,{className:"mx-auto mb-2 text-slate-400",size:48}),i.jsx("p",{children:"No hay consumibles registrados"})]})]})]}),a.sistemaActivo===$g.RFID_ZEBRA&&i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(yz,{className:"mx-auto mb-4 text-purple-600",size:64}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Sistema Zebra RFID Automtico"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"Configuracin avanzada de dispositivos Zebra RFID"}),i.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 max-w-md mx-auto",children:i.jsx("p",{className:"text-sm text-indigo-800",children:"La configuracin detallada de dispositivos Zebra RFID estar disponible prximamente."})})]})})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(xz,{className:"text-indigo-600"}),"Cambiar Sistema de Hardware"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nuevo Sistema"}),i.jsxs("select",{value:b,onChange:Me=>w(Me.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"",children:"Selecciona..."}),i.jsx("option",{value:$g.BARCODE_MANUAL,children:"Scanners Manuales (Econmico)"}),i.jsx("option",{value:$g.RFID_ZEBRA,children:"Zebra RFID (Premium)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Motivo del Cambio"}),i.jsx("textarea",{value:_,onChange:Me=>N(Me.target.value),rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Cliente adquiri equipos Zebra Premium"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:B,disabled:o||!b,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:o?"Cambiando...":"Cambiar Sistema"}),i.jsx("button",{onClick:()=>{u(!1),w(""),N("")},className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(Lj,{className:"text-indigo-600"}),"Agregar Scanner Manual"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Marca *"}),i.jsx("select",{value:S.marca,onChange:Me=>{const Be=Me.target.value,ve=qK.find(Ht=>Ht.value===Be);T({...S,marca:Be,precio:(ve==null?void 0:ve.precio)||0})},className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:qK.map(Me=>i.jsxs("option",{value:Me.value,children:[Me.label," ($",Me.precio," USD)"]},Me.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Modelo"}),i.jsx("input",{type:"text",value:S.modelo,onChange:Me=>T({...S,modelo:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: 2D Wireless Scanner"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre *"}),i.jsx("input",{type:"text",value:S.nombre,onChange:Me=>T({...S,nombre:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Scanner Almacn USA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ubicacin"}),i.jsx("input",{type:"text",value:S.ubicacion,onChange:Me=>T({...S,ubicacion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: almacen_usa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Conexin"}),i.jsxs("select",{value:S.conexion,onChange:Me=>T({...S,conexion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"wireless",children:"Inalmbrico"}),i.jsx("option",{value:"usb",children:"USB"}),i.jsx("option",{value:"bluetooth",children:"Bluetooth"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Precio (USD)"}),i.jsx("input",{type:"number",value:S.precio,onChange:Me=>T({...S,precio:parseFloat(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:F,disabled:o||!S.nombre,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:o?"Agregando...":"Agregar Scanner"}),i.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),p&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(ql,{className:"text-indigo-600"}),"Agregar Impresora Trmica"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Marca *"}),i.jsx("select",{value:R.marca,onChange:Me=>{const Be=Me.target.value,ve=GK.find(Ht=>Ht.value===Be);z({...R,marca:Be,precio:(ve==null?void 0:ve.precio)||0})},className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:GK.map(Me=>i.jsxs("option",{value:Me.value,children:[Me.label," ($",Me.precio," USD)"]},Me.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Modelo"}),i.jsx("input",{type:"text",value:R.modelo,onChange:Me=>z({...R,modelo:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: NT-P31"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre *"}),i.jsx("input",{type:"text",value:R.nombre,onChange:Me=>z({...R,nombre:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: Impresora Etiquetas USA"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ubicacin"}),i.jsx("input",{type:"text",value:R.ubicacion,onChange:Me=>z({...R,ubicacion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Ej: almacen_usa"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Conexin"}),i.jsxs("select",{value:R.conexion,onChange:Me=>z({...R,conexion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[i.jsx("option",{value:"usb",children:"USB"}),i.jsx("option",{value:"bluetooth",children:"Bluetooth"}),i.jsx("option",{value:"wifi",children:"WiFi"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Precio (USD)"}),i.jsx("input",{type:"number",value:R.precio,onChange:Me=>z({...R,precio:parseFloat(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:ee,disabled:o||!R.nombre,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:o?"Agregando...":"Agregar Impresora"}),i.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})}),G&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-4 flex items-center gap-2",children:[i.jsx(Lr,{className:"text-indigo-600"}),"Agregar Consumible"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nombre"}),i.jsx("input",{type:"text",value:D.nombre,onChange:Me=>I({...D,nombre:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descripcin"}),i.jsx("input",{type:"text",value:D.descripcion,onChange:Me=>I({...D,descripcion:Me.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cantidad"}),i.jsx("input",{type:"number",value:D.cantidad,onChange:Me=>I({...D,cantidad:parseInt(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Costo Unitario"}),i.jsx("input",{type:"number",value:D.costoUnitario,onChange:Me=>I({...D,costoUnitario:parseFloat(Me.target.value)||0}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]})]}),i.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-right",children:[i.jsx("p",{className:"text-sm text-slate-600",children:"Total Inversin"}),i.jsxs("p",{className:"text-lg font-bold text-indigo-600",children:["$",(D.cantidad*D.costoUnitario).toFixed(2)," USD"]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:Z,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Agregar"}),i.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition",children:"Cancelar"})]})]})})]})})},yut=()=>{const{companyId:t}=qy(),e=Fs(),[r,n]=A.useState(!0),[a,s]=A.useState(!1),[o,l]=A.useState(null),[c,u]=A.useState({}),[d,h]=A.useState({}),[p,g]=A.useState({}),[b,w]=A.useState({});A.useEffect(()=>{t&&_()},[t]);const _=async()=>{n(!0);try{const G=await wt.get(`/companies/${t}/features`);if(G.data.success){const O=G.data.data;l({id:O.companyId,name:O.companyName,plan:O.plan}),u(O.planFeatures),h(O.customFeatures),g(O.effectiveFeatures)}}catch(G){console.error("Error cargando features:",G),Ke.error("Error al cargar features de la compaa")}finally{n(!1)}},N=G=>{const D=!p[G];w(I=>({...I,[G]:D})),g(I=>({...I,[G]:D}))},S=async()=>{if(Object.keys(b).length===0){Ke.info("No hay cambios para guardar");return}s(!0);try{(await wt.put(`/companies/${t}/features`,{features:b})).data.success&&(Ke.success(`${Object.keys(b).length} features actualizadas`),w({}),await _())}catch(G){console.error("Error guardando cambios:",G),Ke.error("Error al guardar cambios")}finally{s(!1)}},T=async()=>{if(confirm("Resetear todas las features personalizadas? La compaa volver a usar las features de su plan base.")){s(!0);try{(await wt.delete(`/companies/${t}/features`)).data.success&&(Ke.success("Features reseteadas al plan base"),w({}),await _())}catch(G){console.error("Error reseteando features:",G),Ke.error("Error al resetear features")}finally{s(!1)}}},R=Object.keys(b).length>0,z={" Gestin y Reportes":{importarCSV:"Importar desde CSV",importarExcel:"Importar desde Excel",exportarReportes:"Exportar reportes",dashboardAvanzado:"Dashboard con grficas",trackingPublico:"Tracking pblico (sin login)"}," Notificaciones":{notificacionesWeb:"Notificaciones Web",emailBasico:"Email bsico",emailAutomatizado:"Email automtico (eventos)",whatsappBusiness:"WhatsApp Business (Evolution API)",smsCliente:"SMS a clientes (no implementado)"}," Hardware y Escaneo":{escanerCodigoBarras:"Escner de cdigos de barras",escaneoConCamara:"Escaneo con cmara del celular",impresionEtiquetas:"Impresin de etiquetas",impresorasBluetooth:"Impresoras Bluetooth (Phomemo/Zebra)"}," App Mvil":{appMovilBasica:"App mvil (Capacitor WebView)",fotoComprobante:"Subir fotos de comprobante",modoOffline:"Modo offline avanzado (no implementado)",firmaDigital:"Firma digital (no implementado)"}," GPS y Tracking":{trackingBasico:"Tracking de paquetes",gpsEnTiempoReal:"GPS en tiempo real (roadmap)",historialRutas:"Historial de rutas (roadmap)"}," API y Webhooks":{apiPublica:"API REST pblica",webhooks:"Webhooks para eventos",integraciones:"Integraciones con terceros"}," Seguridad":{autenticacion2FA:"Autenticacin 2FA (roadmap)",logsAuditoria:"Logs de auditora"}};return r?i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx(bs,{className:"animate-spin",size:40})}):i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>e("/dashboard-super-admin"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:i.jsx(Hl,{size:20})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Gestin de Features"}),i.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[o==null?void 0:o.name," - Plan: ",i.jsx("span",{className:"font-semibold",children:o==null?void 0:o.plan})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[R&&i.jsxs("button",{onClick:S,disabled:a,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[a?i.jsx(bs,{className:"animate-spin",size:16}):i.jsx(f3,{size:16}),"Guardar Cambios (",Object.keys(b).length,")"]}),i.jsxs("button",{onClick:T,disabled:a||Object.keys(d).length===0,className:"px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300 disabled:opacity-50 flex items-center gap-2",children:[i.jsx(W0,{size:16}),"Resetear"]})]})]}),Object.keys(d).length>0&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 flex items-start gap-2",children:[i.jsx(h3,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:18}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium text-amber-800",children:["Esta compaa tiene ",Object.keys(d).length," features personalizadas"]}),i.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Las features marcadas con  son overrides del plan base"})]})]})]}),i.jsx("div",{className:"space-y-6",children:Object.entries(z).map(([G,O])=>{const D=Object.entries(O).filter(([I])=>I in c||I in p);return D.length===0?null:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Lr,{size:20}),G]}),i.jsx("div",{className:"space-y-3",children:D.map(([I,V])=>{const P=p[I],B=c[I]&&!d[I],F=I in d,ee=I in b;return i.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition ${ee?"border-indigo-300 bg-indigo-50 dark:bg-indigo-900/20":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${P?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:P?i.jsx(rd,{size:20}):i.jsx(Zn,{size:20})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:V}),F&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:" Custom"}),ee&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded-full",children:"Sin guardar"})]}),i.jsx("span",{className:"text-xs text-slate-500",children:B?"Incluido en el plan":F?"Override personalizado":"No incluido"})]})]}),i.jsx("button",{onClick:()=>N(I),className:`p-2 rounded-lg transition ${P?"bg-emerald-500 hover:bg-emerald-600 text-white":"bg-slate-300 hover:bg-slate-400 text-slate-600"}`,children:P?i.jsx(V4e,{size:24}):i.jsx(U4e,{size:24})})]},I)})})]},G)})}),R&&i.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:i.jsxs("button",{onClick:S,disabled:a,className:"px-6 py-3 bg-indigo-600 text-white rounded-full shadow-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2 text-sm font-medium",children:[a?i.jsx(bs,{className:"animate-spin",size:18}):i.jsx(f3,{size:18}),"Guardar ",Object.keys(b).length," Cambios"]})})]})},WK=()=>{const{userData:t}=ca(),[e,r]=A.useState(!0),[n,a]=A.useState(null),[s,o]=A.useState({}),[l,c]=A.useState({}),[u,d]=A.useState({});A.useEffect(()=>{t!=null&&t.companyId&&h()},[t]);const h=async()=>{r(!0);try{const N=await wt.get(`/companies/${t.companyId}/features`);if(N.data.success){const S=N.data.data;a({id:S.companyId,name:S.companyName,plan:S.plan}),o(S.planFeatures),c(S.customFeatures),d(S.effectiveFeatures)}}catch(N){console.error("Error cargando features:",N),Ke.error("Error al cargar caractersticas de la compaa")}finally{r(!1)}},p=N=>({operativo:"Operativo",automatizado:"Automatizado",smart:"Smart"})[N]||N,g=N=>({operativo:"bg-blue-100 text-blue-700 border-blue-300",automatizado:"bg-purple-100 text-purple-700 border-purple-300",smart:"bg-amber-100 text-amber-700 border-amber-300"})[N]||"bg-slate-100 text-slate-700",b=[{name:"Gestin y Reportes",icon:Lr,color:"text-blue-600",features:{importarCSV:"Importar desde CSV",importarExcel:"Importar desde Excel",exportarReportes:"Exportar reportes",dashboardAvanzado:"Dashboard con grficas",trackingPublico:"Tracking pblico (sin login)"}},{name:"Notificaciones",icon:FN,color:"text-indigo-600",features:{notificacionesWeb:"Notificaciones Web",emailBasico:"Email bsico",emailAutomatizado:"Email automtico (eventos)",whatsappBusiness:"WhatsApp Business (Evolution API)",smsCliente:"SMS a clientes (roadmap)"}},{name:"Hardware y Escaneo",icon:Gf,color:"text-emerald-600",features:{escanerCodigoBarras:"Escner de cdigos de barras",escaneoConCamara:"Escaneo con cmara del celular",impresionEtiquetas:"Impresin de etiquetas",impresorasBluetooth:"Impresoras Bluetooth (Phomemo/Zebra)"}},{name:"App Mvil",icon:Ire,color:"text-blue-600",features:{appMovilBasica:"App mvil (Capacitor WebView)",fotoComprobante:"Subir fotos de comprobante",modoOffline:"Modo offline avanzado (roadmap)",firmaDigital:"Firma digital (roadmap)"}},{name:"GPS y Tracking",icon:Da,color:"text-rose-600",features:{trackingBasico:"Tracking de paquetes",gpsEnTiempoReal:"GPS en tiempo real (roadmap)",historialRutas:"Historial de rutas (roadmap)"}},{name:"API y Webhooks",icon:c4e,color:"text-orange-600",features:{apiPublica:"API REST pblica",webhooks:"Webhooks para eventos",integraciones:"Integraciones con terceros"}},{name:"Seguridad",icon:C4e,color:"text-slate-600",features:{autenticacion2FA:"Autenticacin 2FA (roadmap)",logsAuditoria:"Logs de auditora"}}],w=()=>Object.values(u).filter(N=>N===!0||N===-1).length,_=()=>Object.keys(l).length;return e?i.jsx("div",{className:"flex items-center justify-center h-screen",children:i.jsx(bs,{className:"animate-spin",size:40})}):i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 p-4 sm:p-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Lr,{size:28}),"Caractersticas de Mi Compaa"]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:n==null?void 0:n.name})]}),i.jsxs("div",{className:`px-4 py-2 rounded-lg border-2 ${g(n==null?void 0:n.plan)} font-bold flex items-center gap-2`,children:[i.jsx(jre,{size:20}),"Plan ",p(n==null?void 0:n.plan)]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[i.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-indigo-600 rounded-lg",children:i.jsx(rd,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Features Activas"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:w()})]})]})}),i.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4 border border-emerald-200 dark:border-emerald-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-emerald-600 rounded-lg",children:i.jsx(Lr,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Del Plan Base"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:Object.values(s).filter(N=>N===!0||N===-1).length})]})]})}),i.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-amber-600 rounded-lg",children:i.jsx(h3,{className:"text-white",size:20})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Personalizadas"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:_()})]})]})})]}),_()>0&&i.jsxs("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[i.jsx(h3,{className:"text-amber-600 flex-shrink-0 mt-0.5",size:20}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-medium text-amber-800",children:["Tu compaa tiene ",_()," caractersticas personalizadas!"]}),i.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Estas features extras fueron habilitadas especialmente para ti. Las features marcadas con  son personalizadas."})]})]})]}),i.jsx("div",{className:"space-y-6",children:b.map(N=>{const S=N.icon,T=Object.entries(N.features).filter(([R])=>R in s||R in u);return T.length===0?null:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 shadow-md",children:[i.jsxs("h2",{className:`text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2 ${N.color}`,children:[i.jsx(S,{size:22}),N.name]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:T.map(([R,z])=>{const G=u[R],O=R in l;return i.jsx("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 ${G?"border-emerald-200 bg-emerald-50 dark:bg-emerald-900/20":"border-slate-200 bg-slate-50 dark:bg-slate-900/20"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-lg ${G?"bg-emerald-500 text-white":"bg-slate-300 text-slate-600"}`,children:G?i.jsx(rd,{size:18}):i.jsx(Zn,{size:18})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`font-medium ${G?"text-slate-900 dark:text-white":"text-slate-500"}`,children:z}),O&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:" Extra"})]}),i.jsx("span",{className:"text-xs text-slate-500",children:G?"Disponible":"No disponible"})]})]})},R)})})]},N.name)})}),i.jsx("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Tf,{className:"text-blue-600 flex-shrink-0 mt-0.5",size:20}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Necesitas ms funcionalidades?"}),i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Contacta a tu administrador del sistema para explorar opciones de upgrade o caractersticas personalizadas."})]})]})})]})},Cn={SUPER_ADMIN:"super_admin",PROPIETARIO:"propietario",ADMIN_GENERAL:"admin_general",SECRETARIA:"secretaria",CARGADOR:"cargador",REPARTIDOR:"repartidor"},wut={dashboard:[Cn.SUPER_ADMIN,Cn.PROPIETARIO,Cn.ADMIN_GENERAL,Cn.SECRETARIA],finanzas:[Cn.SUPER_ADMIN,Cn.PROPIETARIO],recolecciones:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],embarques:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],almacenUSA:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],almacenRD:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],rutas:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL],panelRepartidores:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.REPARTIDOR],panelCargadores:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.CARGADOR],panelSecretarias:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA],noEntregadas:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL],facturasClientesPendientes:[Cn.SUPER_ADMIN,Cn.ADMIN_GENERAL,Cn.SECRETARIA]},_ut=(t,e)=>{const r=wut[e];return r?r.includes(t):!1},Nut=t=>({[Cn.SUPER_ADMIN]:"Super Administrador",[Cn.PROPIETARIO]:"Propietario",[Cn.ADMIN_GENERAL]:"Administrador General",[Cn.SECRETARIA]:"Secretaria",[Cn.CARGADOR]:"Cargador",[Cn.REPARTIDOR]:"Repartidor"})[t]||"Usuario",Eut=({children:t,modulo:e,redirectTo:r="/access-denied"})=>{const{user:n,userData:a,loading:s}=ca();if(s)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-600 font-medium",children:"Verificando permisos..."})]})});if(!n)return i.jsx(FE,{to:"/login",replace:!0});if(!e)return t;const o=(a==null?void 0:a.role)||(a==null?void 0:a.rol);return _ut(o,e)?t:(console.warn(` Acceso denegado: Usuario con rol "${o}" intent acceder a mdulo "${e}"`),i.jsx(FE,{to:r,replace:!0}))},Aut=()=>{const t=Fs(),{userData:e}=ca(),r=(e==null?void 0:e.role)||(e==null?void 0:e.rol),n=Nut(r);return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-200 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-rose-500 to-rose-600 px-8 py-6",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:"p-3 bg-white/20 rounded-full backdrop-blur-sm",children:i.jsx(j4e,{className:"w-12 h-12 text-white",strokeWidth:1.5})})})}),i.jsxs("div",{className:"px-8 py-8 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Acceso Denegado"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:["Tu rol actual ",i.jsxs("span",{className:"font-semibold text-slate-900",children:['"',n,'"']})," no tiene permisos para acceder a esta seccin."]}),i.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-6 border border-slate-200",children:i.jsx("p",{className:"text-sm text-slate-600",children:"Si crees que esto es un error, contacta al administrador de tu empresa para solicitar los permisos necesarios."})}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("button",{onClick:()=>t(-1),className:"flex items-center justify-center gap-2 px-6 py-3 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors font-medium",children:[i.jsx(Hl,{className:"w-5 h-5"}),"Volver atrs"]}),i.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center justify-center gap-2 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium shadow-sm",children:[i.jsx(d8,{className:"w-5 h-5"}),"Ir al Dashboard"]})]})]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-slate-500",children:"ProLogix - Sistema de Gestin de Envos"})})]})})},Sut=()=>{const{userData:t}=ca();return(t==null?void 0:t.rol)==="super_admin"?i.jsx(JTe,{}):(t==null?void 0:t.rol)==="propietario"?i.jsx(eCe,{}):i.jsx(QTe,{})};function jut(){const{userData:t,loading:e}=ca(),[r,n]=A.useState(!1);if(VEe(9e4),e)return i.jsx("div",{className:"h-screen w-screen bg-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(!t||r)return i.jsx(GTe,{onLoginStart:()=>n(!0),onExitComplete:()=>n(!1)});const a=t.rol==="admin"?"admin_general":t.rol;return i.jsxs(qTe,{children:[i.jsx(zEe,{richColors:!0,position:"top-right",expand:!0,closeButton:!0,duration:4e3}),i.jsxs(lQ,{children:[i.jsx(dr,{path:"/dashboard",element:i.jsx(Sut,{})}),a==="super_admin"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/companies",element:i.jsx(tCe,{})}),i.jsx(dr,{path:"/empleados",element:i.jsx(uT,{})}),i.jsx(dr,{path:"/tickets-admin",element:i.jsx(KHe,{})}),i.jsx(dr,{path:"/configuracion/whatsapp",element:i.jsx(vut,{})}),i.jsx(dr,{path:"/hardware",element:i.jsx(but,{})}),i.jsx(dr,{path:"/companies/:companyId/features",element:i.jsx(yut,{})})]}),a==="admin_general"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(i_,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(m_,{})}),i.jsx(dr,{path:"/embarques",element:i.jsx(Xv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(Yv,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(Zv,{})}),i.jsx(dr,{path:"/secretarias",element:i.jsx(oT,{})}),i.jsx(dr,{path:"/cargadores",element:i.jsx(lT,{})}),i.jsx(dr,{path:"/repartidores",element:i.jsx(cT,{})}),i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(p_,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(P_,{})}),i.jsx(dr,{path:"/empleados",element:i.jsx(uT,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(R_,{})}),i.jsx(dr,{path:"/almacen-usa",element:i.jsx(qT,{})}),i.jsx(dr,{path:"/almacen-rd",element:i.jsx(GT,{})}),i.jsx(dr,{path:"/call-center",element:i.jsx(rN,{})})," ",i.jsx(dr,{path:"/pool",element:i.jsx(bC,{})})," ",i.jsx(dr,{path:"/historial",element:i.jsx(yC,{})})," ",i.jsx(dr,{path:"/mis-features",element:i.jsx(WK,{})})," "]}),i.jsx(dr,{path:"/finanzas",element:i.jsx(Eut,{modulo:"finanzas",children:i.jsx(put,{})})}),a==="propietario"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(i_,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(m_,{})}),i.jsx(dr,{path:"/embarques",element:i.jsx(Xv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(Yv,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(Zv,{})}),i.jsx(dr,{path:"/secretarias",element:i.jsx(oT,{})}),i.jsx(dr,{path:"/cargadores",element:i.jsx(lT,{})}),i.jsx(dr,{path:"/repartidores",element:i.jsx(cT,{})}),i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(p_,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(P_,{})}),i.jsx(dr,{path:"/empleados",element:i.jsx(uT,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(R_,{})}),i.jsx(dr,{path:"/almacen-usa",element:i.jsx(qT,{})}),i.jsx(dr,{path:"/almacen-rd",element:i.jsx(GT,{})}),i.jsx(dr,{path:"/call-center",element:i.jsx(rN,{})})," ",i.jsx(dr,{path:"/pool",element:i.jsx(bC,{})})," ",i.jsx(dr,{path:"/historial",element:i.jsx(yC,{})})," ",i.jsx(dr,{path:"/mis-features",element:i.jsx(WK,{})})," "]}),a==="recolector"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(i_,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(m_,{})}),i.jsx(dr,{path:"/pool",element:i.jsx(bC,{})})," ",i.jsx(dr,{path:"/mis-solicitudes",element:i.jsx(xut,{})})," "]}),a==="almacen_eeuu"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/recolecciones",element:i.jsx(i_,{})}),i.jsx(dr,{path:"/recolecciones/nueva",element:i.jsx(m_,{})}),i.jsx(dr,{path:"/embarques",element:i.jsx(Xv,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(R_,{})}),i.jsx(dr,{path:"/almacen-usa",element:i.jsx(qT,{})})]}),a==="secretaria"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/embarques",element:i.jsx(Xv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(Yv,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(Zv,{})}),i.jsx(dr,{path:"/secretarias",element:i.jsx(oT,{})}),i.jsx(dr,{path:"/solicitudes",element:i.jsx(gut,{})})," ",i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(p_,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(P_,{})}),i.jsx(dr,{path:"/call-center",element:i.jsx(rN,{})})," "]}),a==="secretaria_usa"&&i.jsx(i.Fragment,{children:i.jsx(dr,{path:"/call-center",element:i.jsx(rN,{})})}),a==="cargador"&&i.jsx(i.Fragment,{children:i.jsx(dr,{path:"/cargadores",element:i.jsx(lT,{})})}),a==="almacen_rd"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/embarques",element:i.jsx(Xv,{})}),i.jsx(dr,{path:"/rutas",element:i.jsx(Yv,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(Zv,{})}),i.jsx(dr,{path:"/facturas-no-entregadas",element:i.jsx(p_,{})}),i.jsx(dr,{path:"/reportes",element:i.jsx(R_,{})}),i.jsx(dr,{path:"/almacen-rd",element:i.jsx(GT,{})}),i.jsx(dr,{path:"/historial",element:i.jsx(yC,{})})," "]}),a==="repartidor"&&i.jsxs(i.Fragment,{children:[i.jsx(dr,{path:"/rutas",element:i.jsx(Yv,{})}),i.jsx(dr,{path:"/rutas/:id",element:i.jsx(Zv,{})}),i.jsx(dr,{path:"/repartidores",element:i.jsx(cT,{})}),i.jsx(dr,{path:"/facturas-pendientes-pago",element:i.jsx(P_,{})})]}),i.jsx(dr,{path:"/configuracion",element:i.jsx(XHe,{})}),i.jsx(dr,{path:"/ayuda",element:i.jsx(YHe,{})}),i.jsx(dr,{path:"/access-denied",element:i.jsx(Aut,{})}),i.jsx(dr,{path:"/",element:i.jsx(FE,{to:"/dashboard",replace:!0})}),i.jsx(dr,{path:"*",element:i.jsx(FE,{to:"/dashboard",replace:!0})})]})]})}function Tut(){return i.jsx(n1e,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:i.jsx(mEe,{children:i.jsxs(lQ,{children:[i.jsx(dr,{path:"/tracking",element:i.jsx(Iq,{})}),i.jsx(dr,{path:"/tracking/:codigo",element:i.jsx(Iq,{})}),i.jsx(dr,{path:"/agendar",element:i.jsx(Oq,{})}),i.jsx(dr,{path:"/agendar/:companyId",element:i.jsx(Oq,{})}),i.jsx(dr,{path:"/forgot-password",element:i.jsx(pqe,{})}),i.jsx(dr,{path:"/reset-password",element:i.jsx(gqe,{})}),i.jsx(dr,{path:"/rutas/:rutaId/imprimir",element:i.jsx(mqe,{})}),i.jsx(dr,{path:"/*",element:i.jsx(jut,{})})]})})})}function Cut(t={}){const{immediate:e=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:a,onRegisteredSW:s,onRegisterError:o}=t;let l,c;const u=async(h=!0)=>{await c};async function d(){if("serviceWorker"in navigator){if(l=await cp(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{o==null||o(h)}),!l)return;l.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),l.addEventListener("installed",h=>{h.isUpdate||n==null||n()}),l.register({immediate:e}).then(h=>{s?s("/sw.js",h):a==null||a(h)}).catch(h=>{o==null||o(h)})}}return c=d(),u}const kut=Cut({onNeedRefresh(){confirm("Nueva versin disponible. Deseas actualizar ahora?")&&kut(!0)},onOfflineReady(){console.log(" App lista para funcionar offline")},onRegistered(t){console.log(" Service Worker registrado")},onRegisterError(t){console.error(" Error registrando Service Worker:",t)}});sge.createRoot(document.getElementById("root")).render(i.jsx(gr.StrictMode,{children:i.jsx(Tut,{})}));export{wa as _,Rv as c,qf as d,Dut as e,Vc as g,Ke as t};
